<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unity动态加载3D模型 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unity动态加载3D模型" />
<meta property="og:description" content="Unity动态加载3D模型 在Unity中创建游戏对象的方法有 3 种：
第一种是将物体模型资源由 Project 视图直接拖曳到 Hierarchy 面板中；第二种是在 Unity 3D 菜单 GameObject 中创建 Unity 3D 自带的游戏对象，如 Cube、Camera、Light 等；第三种是利用脚本编程，动态创建或删除游戏对象。 本文尝试采用第三种方法，即利用脚本动态加载3D模型文件，从而创建游戏对象。
网上搜索“Unity3d 动态加载fbx模型文件”，大部分都是对文章https://blog.csdn.net/ldkcumt/article/details/51098206的转载，先亲身做一下实践。
Unity版本：Unity 2018.3.7f1 (64-bit) 随VS2017一起安装。
方法一：
1 将模型拖动到场景中 ，调整好位置。（制作prefab预制体需要）
2 新建Resources（如果工程中有的话 就不用新建了，Resources.Load调用的就是该文件夹下的资源），在该文件夹下建一个prefab，将上面的模型拖动到这个prefab上
3 删除场景中的该物体模型
4 编写脚本，把它随便扔给一个GameObject
1 using System.Collections; 2 using System.Collections.Generic; 3 using UnityEngine; 4 5 public class LoadFBX : MonoBehaviour 6 { 7 public string url; 8 // Start is called before the first frame update 9 void Start() 10 { 11 GameObject gFbx = (GameObject)Instantiate(Resources." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/99e203098ca340f17dfd24c6d04e3c50/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-09T20:07:03+08:00" />
<meta property="article:modified_time" content="2020-07-09T20:07:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity动态加载3D模型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><a href="https://www.cnblogs.com/MakeView660/p/12196362.html" rel="nofollow" id="cb_post_title_url">Unity动态加载3D模型</a></h3> 
<p>在Unity中创建游戏对象的方法有 3 种：</p> 
<ul><li>第一种是将物体模型资源由 Project 视图直接拖曳到 Hierarchy 面板中；</li><li>第二种是在 Unity 3D 菜单 GameObject 中创建 Unity 3D 自带的游戏对象，如 Cube、Camera、Light 等；</li><li>第三种是利用脚本编程，动态创建或删除游戏对象。</li></ul> 
<p>本文尝试采用第三种方法，即利用脚本动态加载3D模型文件，从而创建游戏对象。<br> 网上搜索“Unity3d 动态加载fbx模型文件”，大部分都是对文章<a href="https://blog.csdn.net/ldkcumt/article/details/51098206">https://blog.csdn.net/ldkcumt/article/details/51098206</a>的转载，先亲身做一下实践。<br> Unity版本：Unity 2018.3.7f1 (64-bit)  随VS2017一起安装。<br><strong>方法一</strong>：<br> 1 将模型拖动到场景中 ，调整好位置。（制作prefab预制体需要）<br> 2 新建Resources（如果工程中有的话 就不用新建了，Resources.Load调用的就是该文件夹下的资源），在该文件夹下建一个<a href="https://gamedev.stackexchange.com/questions/166239/how-do-i-create-an-empty-prefab-with-unity-2018-3" rel="nofollow">prefab</a>，将上面的模型拖动到这个prefab上<br> 3 删除场景中的该物体模型<br> 4 编写脚本，把它随便扔给一个GameObject<br><img alt="" src="https://images2.imgbox.com/69/4d/BmpKTE0A_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/96/03/N0PM5K9q_o.gif"></p> 
<pre> 1 using System.Collections;
 2 using System.Collections.Generic;
 3 using UnityEngine;
 4 
 5 public class LoadFBX : MonoBehaviour
 6 {
 7     public string url;
 8     // Start is called before the first frame update
 9     void Start()
10     {
11         GameObject gFbx = (GameObject)Instantiate(Resources.Load("che"));
12     }
13 
14     // Update is called once per frame
15     void Update()
16     {
17         
18     }
20 }</pre> 
<p><img alt="" src="https://images2.imgbox.com/47/94/PLCmY4fY_o.gif"></p> 
<p><strong>方法二</strong>：<br> 1 按方法1 制作prefab （注意调整好位置）<br> 2 然后使用<a href="https://blog.csdn.net/j2573065345/article/details/80899345">AssetBundle</a>导出包<br> 3 这时可以看到导出的.AssetBundle文件了<br> 4 编写代码<br> 第2步详解：参考<a href="https://www.jianshu.com/p/f4c685cf487a" rel="nofollow">https://www.jianshu.com/p/f4c685cf487a</a><br><img alt="" src="https://images2.imgbox.com/f1/db/wq3z6sEu_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/f5/c7/SI51yw7s_o.gif"></p> 
<pre> 1 using UnityEngine;
 2 using System.Collections;
 3 using UnityEditor;
 4 using System.IO;
 5 public class AssetBundleBuilder
 6 {
 7     [MenuItem("Assets/Build AssetBundle")]
 8     static public void BuildAssetBundle()
 9     {
10         Caching.ClearCache();
11         string path = Application.streamingAssetsPath + "/" + "AssetBundles" + "/" + "Windows";
12         if (!Directory.Exists(path))
13         {
14             Directory.CreateDirectory(path);
15         }
16         BuildPipeline.BuildAssetBundles(path, 0, EditorUserBuildSettings.activeBuildTarget);
17         AssetDatabase.Refresh();
18     }
19 }</pre> 
<p><img alt="" src="https://images2.imgbox.com/44/28/vqOm2IZW_o.gif"></p> 
<p><img alt="" src="https://images2.imgbox.com/50/7e/PNnqmeUA_o.png"></p> 
<p>加载代码修改：</p> 
<p><img alt="" src="https://images2.imgbox.com/98/96/NvLYLAlA_o.gif"></p> 
<pre> 1 using System.Collections;
 2 using System.Collections.Generic;
 3 using UnityEngine;
 4 
 5 public class LoadFBX : MonoBehaviour
 6 {
 7     public string url;
 8     // Start is called before the first frame update
 9     void Start()
10     {
11         //GameObject gFbx = (GameObject)Instantiate(Resources.Load("che"));
12         string name = "che.first";
13         url = "file://C:/Users/yakong/Documents/FirstUnity3d/Assets/StreamingAssets/AssetBundles/Windows/";
14         StartCoroutine(LoadAsset(url, name));
15     }
16 
17     // Update is called once per frame
18     void Update()
19     {
20         
21     }
22 
23     // LoadAssert 
24     public IEnumerator LoadAsset(string url, string Scname)
25     {
26         WWW www = new WWW(url + Scname);
27         yield return www;
28         AssetBundle bundle = www.assetBundle;
29         foreach (var name in bundle.GetAllAssetNames())
30         {
31             Debug.Log(name);
32             if (name != "")
33             {
34                 GameObject go = (GameObject)Instantiate(bundle.LoadAsset(name));
35             }     
36         }  
37     }
38 }</pre> 
<p><img alt="" src="https://images2.imgbox.com/af/62/HIESQtFY_o.gif"></p> 
<p>PS：直接使用<a href="http://www.assetbundle.xn--mainassetnull-qo1u057yk2yfry0a/" rel="nofollow">www.assetBundle.mainAsset时运行为null</a>，参考<a href="https://stackoverflow.com/questions/42775797/cannot-load-an-asset-bundle" rel="nofollow">https://stackoverflow.com/questions/42775797/cannot-load-an-asset-bundle</a>解决！</p> 
<p>最终的启动运行加载效果：<br><img alt="" src="https://images2.imgbox.com/a2/a2/U8leeegq_o.png"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ee9d5b0f48730e5cafbcf4a1ad3dae3d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux下docker使用大全</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/058499680147e7a52a5f19ac89d84e8a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jvm与非jvm语言优劣_JVM语言的兴衰</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>