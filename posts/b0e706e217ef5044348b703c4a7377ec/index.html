<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>循环 创建 UIButton 并添加选中状态 （单选和多选） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="循环 创建 UIButton 并添加选中状态 （单选和多选）" />
<meta property="og:description" content="自己封装一个View
//在.h声明 @interface SelectView : UIView @property(nonatomic,assign)NSInteger selectIndex; - (instancetype)initWithTitle:(NSString *)title andItemArrar:(NSArray *)items; @end //在.m里面实现 #import &#34;SelectView.h&#34; #import &#34;Masonry.h&#34; @interface SelectView() @property(nonatomic,strong)UILabel * titleLabel; @property(nonatomic,strong)UIButton * selectBtn; @property(nonatomic,strong)NSString * title; @property(nonatomic,strong)NSArray * items; @end @implementation SelectView - (instancetype)initWithTitle:(NSString *)title andItemArrar:(NSArray *)items{ if (! (self = [super init])) return nil; self.backgroundColor = [UIColor yellowColor]; _title = title; _items = items; [self addSubview:self.titleLabel]; [self layoutPageFrame]; [self addSubview:self.selectBtn]; return self; } //点击事件 - (void)selectBtnClick:(UIButton *)sender{ //多选模式 // if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b0e706e217ef5044348b703c4a7377ec/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-06-29T16:14:30+08:00" />
<meta property="article:modified_time" content="2015-06-29T16:14:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">循环 创建 UIButton 并添加选中状态 （单选和多选）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>自己封装一个View</p> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-comment">//在.h声明</span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">SelectView</span> : <span class="hljs-title">UIView</span></span>
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">assign</span>)<span class="hljs-built_in">NSInteger</span> selectIndex;
- (instancetype)initWithTitle:(<span class="hljs-built_in">NSString</span> *)title andItemArrar:(<span class="hljs-built_in">NSArray</span> *)items;
<span class="hljs-keyword">@end</span>
<span class="hljs-comment">//在.m里面实现</span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"SelectView.h"</span></span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"Masonry.h"</span></span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">SelectView</span>()</span>
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>)<span class="hljs-built_in">UILabel</span> * titleLabel;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>)<span class="hljs-built_in">UIButton</span> * selectBtn;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>)<span class="hljs-built_in">NSString</span> * title;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>)<span class="hljs-built_in">NSArray</span> * items;

<span class="hljs-keyword">@end</span>
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">SelectView</span></span>
- (instancetype)initWithTitle:(<span class="hljs-built_in">NSString</span> *)title andItemArrar:(<span class="hljs-built_in">NSArray</span> *)items{
    <span class="hljs-keyword">if</span> (! (<span class="hljs-keyword">self</span> = [<span class="hljs-keyword">super</span> init]))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
    <span class="hljs-keyword">self</span><span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> yellowColor];
    _title = title;
    _items = items;
    [<span class="hljs-keyword">self</span> addSubview:<span class="hljs-keyword">self</span><span class="hljs-variable">.titleLabel</span>];
    [<span class="hljs-keyword">self</span> layoutPageFrame];
    [<span class="hljs-keyword">self</span> addSubview:<span class="hljs-keyword">self</span><span class="hljs-variable">.selectBtn</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
}
<span class="hljs-comment">//点击事件</span>
- (<span class="hljs-keyword">void</span>)selectBtnClick:(<span class="hljs-built_in">UIButton</span> *)sender{
 <span class="hljs-comment">//多选模式</span>
 <span class="hljs-comment">//    if (!sender.selected) {<!-- --></span>
<span class="hljs-comment">//        [sender setBackgroundColor:[UIColor brownColor]];</span>
<span class="hljs-comment">//    }else{<!-- --></span>
<span class="hljs-comment">//        [sender setBackgroundColor:[UIColor groupTableViewBackgroundColor]];</span>
<span class="hljs-comment">//    }</span>
<span class="hljs-comment">//    sender.selected = !sender.selected;</span>
<span class="hljs-comment">//单选模式</span>
    <span class="hljs-keyword">if</span> (_selectBtn == <span class="hljs-literal">nil</span>){
        sender<span class="hljs-variable">.selected</span> = <span class="hljs-literal">YES</span>;
        _selectBtn = sender;
    }
   <span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span> (_selectBtn !=<span class="hljs-literal">nil</span> &amp;&amp;_selectBtn == sender){
       sender<span class="hljs-variable">.selected</span> = <span class="hljs-literal">YES</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_selectBtn!= sender &amp;&amp; _selectBtn!=<span class="hljs-literal">nil</span>){
        _selectBtn<span class="hljs-variable">.selected</span> = <span class="hljs-literal">NO</span>;
        sender<span class="hljs-variable">.selected</span> = <span class="hljs-literal">YES</span>;
        _selectBtn = sender;
    }
    _selectIndex = sender<span class="hljs-variable">.tag</span>;
}
- (<span class="hljs-keyword">void</span>)layoutPageFrame{
    [_titleLabel mas_makeConstraints:^(MASConstraintMaker *make) {
        make<span class="hljs-variable">.left</span><span class="hljs-variable">.equalTo</span>(<span class="hljs-keyword">self</span><span class="hljs-variable">.mas_left</span>)<span class="hljs-variable">.offset</span>(<span class="hljs-number">10</span>);
        make<span class="hljs-variable">.top</span><span class="hljs-variable">.equalTo</span>(<span class="hljs-keyword">self</span><span class="hljs-variable">.mas_top</span>)<span class="hljs-variable">.offset</span>(<span class="hljs-number">5</span>);
        make<span class="hljs-variable">.height</span><span class="hljs-variable">.mas_equalTo</span>(<span class="hljs-number">25</span>);
        make<span class="hljs-variable">.width</span><span class="hljs-variable">.mas_equalTo</span>(<span class="hljs-number">360</span>);
    }];
}
- (<span class="hljs-built_in">UILabel</span> *)titleLabel{
    <span class="hljs-keyword">if</span> (_titleLabel == <span class="hljs-literal">nil</span>) {
        _titleLabel = [[<span class="hljs-built_in">UILabel</span> alloc]init];
         _titleLabel<span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> orangeColor];
        _titleLabel<span class="hljs-variable">.font</span> = [<span class="hljs-built_in">UIFont</span> systemFontOfSize:<span class="hljs-number">15.0</span>];
        _titleLabel<span class="hljs-variable">.text</span> = _title;
        _titleLabel<span class="hljs-variable">.textColor</span> = [<span class="hljs-built_in">UIColor</span> blackColor];
    }
    <span class="hljs-keyword">return</span> _titleLabel;
}
- (<span class="hljs-built_in">UIButton</span> *)selectBtn{
    <span class="hljs-keyword">if</span> (_selectBtn == <span class="hljs-literal">nil</span>) {
        <span class="hljs-keyword">if</span> (_items&gt;<span class="hljs-number">0</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt;_items<span class="hljs-variable">.count</span>; i ++) {
                _selectBtn = [<span class="hljs-built_in">UIButton</span> buttonWithType:UIButtonTypeCustom];
                [_selectBtn<span class="hljs-variable">.titleLabel</span> setFont:[<span class="hljs-built_in">UIFont</span> systemFontOfSize:<span class="hljs-number">14.0</span>]];
                [_selectBtn setTitle:[_items objectAtIndex:i] forState:UIControlStateNormal];
                 [_selectBtn setTitleColor:[<span class="hljs-built_in">UIColor</span> redColor] forState:UIControlStateNormal];
                _selectBtn<span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> whiteColor];
                [_selectBtn setTitleColor:[<span class="hljs-built_in">UIColor</span> blueColor] forState:UIControlStateSelected];
                <span class="hljs-comment">//单选用到的</span>
                [_selectBtn setBackgroundImage:[<span class="hljs-built_in">UIImage</span> imageNamed:@<span class="hljs-string">"normal.png"</span>] forState:UIControlStateNormal];
                [_selectBtn setBackgroundImage:[<span class="hljs-built_in">UIImage</span> imageNamed:@<span class="hljs-string">"selected.png"</span>] forState:UIControlStateSelected];
                <span class="hljs-built_in">CGFloat</span> tipDescW =<span class="hljs-number">95.0</span>;
                <span class="hljs-built_in">CGFloat</span> tipDescH =<span class="hljs-number">30.0</span>;
                <span class="hljs-keyword">int</span> totalColumns = <span class="hljs-number">3</span>;<span class="hljs-comment">//</span>
                <span class="hljs-built_in">CGFloat</span> marginX = (<span class="hljs-number">365</span>-totalColumns*tipDescW)/(totalColumns +<span class="hljs-number">1</span>);
                <span class="hljs-keyword">int</span> row = i/totalColumns;
                <span class="hljs-keyword">int</span> col = i%totalColumns;
                _selectBtn<span class="hljs-variable">.frame</span> = CGRectMake(marginX+ col*(marginX + tipDescW), <span class="hljs-number">40</span>+(row* tipDescH)+(row * <span class="hljs-number">20</span>), tipDescW, tipDescH);
                _selectBtn<span class="hljs-variable">.tag</span> =i;
                [<span class="hljs-keyword">self</span> addSubview:_selectBtn];
                [_selectBtn addTarget:<span class="hljs-keyword">self</span> action:<span class="hljs-keyword">@selector</span>(selectBtnClick:) forControlEvents:UIControlEventTouchUpInside];
            }
        }
    }
    <span class="hljs-keyword">return</span> _selectBtn;
}
<span class="hljs-keyword">@end</span>
</code></pre> 
<p>用的时候在Controller里面 直接使用就可以了</p> 
<pre class="prettyprint"><code class=" hljs avrasm"> NSArray * items = @[@<span class="hljs-string">"1人"</span>,@<span class="hljs-string">"2人"</span>,@<span class="hljs-string">"3人"</span>,@<span class="hljs-string">"四人"</span>,@<span class="hljs-string">"5人"</span>]<span class="hljs-comment">;</span>
    SelectView * selectView = [[SelectView alloc]initWithTitle:@<span class="hljs-string">"入住人数"</span> andItemArrar:items]<span class="hljs-comment">;</span>
    CGFloat selectViewH = (items<span class="hljs-preprocessor">.count</span>/<span class="hljs-number">3</span>+<span class="hljs-number">1</span>) * <span class="hljs-number">60</span> + <span class="hljs-number">40</span><span class="hljs-comment">;</span>
    selectView<span class="hljs-preprocessor">.frame</span> = CGRectMake(<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, self<span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.frame</span><span class="hljs-preprocessor">.size</span><span class="hljs-preprocessor">.width</span>, selectViewH)<span class="hljs-comment">;</span>
    [self<span class="hljs-preprocessor">.view</span> addSubview:selectView]<span class="hljs-comment">;</span></code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8278c9c0e281ecf9dc960d1c751a33d8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一句话理解Promise</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ea543de7a233d2adfcf0c5535dacf727/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">NWERC2013题解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>