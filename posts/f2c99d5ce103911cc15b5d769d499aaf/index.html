<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库】作业5——SQL练习2 - INDEX / INSERT / SELECT - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库】作业5——SQL练习2 - INDEX / INSERT / SELECT" />
<meta property="og:description" content="INDEX:【例3.13】~【例3.15】INSERT:【例3.69】~【例3.71】REF：使用 INSERT INTO - VALUES 插入数据SELECT:【例3.16】~【例3.28】REF：教材3.4“数据查询”的部分例题 建表&amp;插入数据
1. 在SQLserver上运行，观察运行效果，并把代码写到作业中。
2. 写出自己的理解/收获/心得体会（部分比较复杂的例题，建议增加测试方法和测试数据，举一反三）。
作业原地址：作业
INDEX 1.建立索引
使用CREATE INDEX语句
CREATE [UNIQUE] [CLUSTERER] INDEX &lt;索引名&gt; ON &lt;表名&gt;(&lt;列名&gt;[&lt;次序&gt;][,&lt;列名&gt;[&lt;次序&gt;] ]…);
&lt;表名&gt;：是要建索引的基本表的名字。
索引：可以建立在该表的一列或多列上，各列名之间用逗号分隔。
&lt;次序&gt;：可选ASC（升序）或DESC（降序），默认为ASC。
UNIQUE：表示此索引的每一个索引值只对应唯一的数据记录。
CLUSTER：表示要建立的索引是聚簇索引。（插眼——详细概念在7.5.2）
2.修改索引
对于已经建立的索引，如果需要对其进行重命名，可以使用ALTER INDEX语句
ALTER INDEX &lt;旧索引名&gt;RENAME TO&lt;新索引名&gt;;
3.删除索引
删除索引使用DROP INDEX 语句
DROP INDEX &lt;索引名&gt;;
【例3.13】为学生-课程数据库中的Student，Course和SC三个表建立索引。Student表按学号升序建唯一索引，Course表按课程号升序建唯一索引，SC表按学号升序和课程号降序建唯一索引。
CREATE UNIQUE INDEX Stusno ON Student(Sno); CREATE UNIQUE INDEX Coucno ON Course(Cno); CREATE UNIQUE INDEX SCno ON SC(Sno ASC,Cno DESC); 截图：
【例3.14】将SC表的SCno索引名改为SCSno。
ALTER INDEX SCno RENAME TO SCSno; /*×有问题×*/ 好像又出错了." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f2c99d5ce103911cc15b5d769d499aaf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-15T20:28:04+08:00" />
<meta property="article:modified_time" content="2020-03-15T20:28:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库】作业5——SQL练习2 - INDEX / INSERT / SELECT</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <hr> 
<ul><li><strong>INDEX:【例3.13】~【例3.15】</strong></li><li><strong>INSERT:【例3.69】~【例3.71】REF：<a href="https://blog.csdn.net/qq_38975453/article/details/104696660">使用 INSERT INTO - VALUES 插入数据</a></strong></li><li><strong>SELECT:【例3.16】~【例3.28】REF：<a href="https://blog.csdn.net/qq_38975453/article/details/104719512">教材3.4“数据查询”的部分例题</a></strong></li></ul> 
<p><a href="https://blog.csdn.net/qq_38975453/article/details/104696976">建表&amp;插入数据</a></p> 
<p><strong>1. 在SQLserver上运行，观察运行效果，并把代码写到作业中。</strong></p> 
<p><strong>2. 写出自己的理解/收获/心得体会（部分比较复杂的例题，建议增加测试方法和测试数据，举一反三）。</strong></p> 
<p>作业原地址：<a href="https://blog.csdn.net/qq_38975453/article/details/104747582">作业</a></p> 
<hr> 
<p> </p> 
<ul><li> <h2 id="INDEX"><span style="color:#f33b45;"><strong>INDEX</strong></span></h2> </li></ul> 
<p> </p> 
<p><strong>1.建立索引</strong></p> 
<p>使用<span style="color:#e579b6;">CREATE INDEX</span>语句</p> 
<p> </p> 
<p><span style="color:#ffbb66;">CREATE [UNIQUE] [CLUSTERER] INDEX &lt;索引名&gt; <br> ON &lt;表名&gt;(&lt;列名&gt;[&lt;次序&gt;][,&lt;列名&gt;[&lt;次序&gt;] ]…);</span><br>  </p> 
<p><strong>&lt;表名&gt;</strong>：是要建索引的基本表的名字。</p> 
<p><strong>索引</strong>：可以建立在该表的一列或多列上，各列名之间用逗号分隔。</p> 
<p><strong>&lt;次序&gt;</strong>：可选ASC（升序）或DESC（降序），默认为ASC。</p> 
<p><strong>UNIQUE</strong>：表示此索引的每一个索引值只对应唯一的数据记录。</p> 
<p><strong>CLUSTER</strong>：表示要建立的索引是聚簇索引。（<strong><span style="color:#3399ea;">插眼</span></strong><span style="color:#3399ea;">——详细概念在7.5.2</span>）</p> 
<p> </p> 
<p><strong>2.修改索引</strong></p> 
<p>对于已经建立的索引，如果需要对其进行重命名，可以使用<span style="color:#e579b6;">ALTER INDEX</span>语句</p> 
<p> </p> 
<p><span style="color:#ffbb66;">ALTER INDEX &lt;旧索引名&gt;RENAME TO&lt;新索引名&gt;;</span></p> 
<p> </p> 
<p><strong>3.删除索引</strong></p> 
<p>删除索引使用<span style="color:#e579b6;">DROP INDEX</span> 语句</p> 
<p> </p> 
<p><span style="color:#ffbb66;">DROP INDEX &lt;索引名&gt;;</span></p> 
<p> </p> 
<p>【例3.13】为学生-课程数据库中的Student，Course和SC三个表建立索引。Student表按学号升序建唯一索引，Course表按课程号升序建唯一索引，SC表按学号升序和课程号降序建唯一索引。</p> 
<p> </p> 
<pre><code class="language-sql"> CREATE UNIQUE INDEX  Stusno ON Student(Sno);
 CREATE UNIQUE INDEX  Coucno ON Course(Cno);
 CREATE UNIQUE INDEX  SCno ON SC(Sno ASC,Cno DESC);
</code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p><img alt="" height="642" src="https://images2.imgbox.com/01/a1/a2T6vYPt_o.png" width="290"></p> 
<p> </p> 
<p>【例3.14】将SC表的SCno索引名改为SCSno。</p> 
<p> </p> 
<pre><code class="language-sql">ALTER INDEX SCno RENAME TO SCSno;    /*×有问题×*/</code></pre> 
<p> </p> 
<p>好像又出错了...</p> 
<p> </p> 
<p><img alt="" height="487" src="https://images2.imgbox.com/f6/d1/ydvS3UmW_o.png" width="413"></p> 
<p> </p> 
<h4 id="%EF%BC%81%E6%8F%92%E7%9C%BC%EF%BC%9A"><span style="color:#3399ea;"><strong>！插眼修改索引</strong></span></h4> 
<p> </p> 
<p>原因：alter不能改变索引名，如若改变索引名就需要调用存储过程。</p> 
<p>更改：</p> 
<pre><code class="language-html">EXEC sp_rename @objname = 'student.stusno1', @newname = 'stusno2', @objtype = 'index'
/*或者如下*/
EXEC sp_rename '表名.旧索引名', '新索引名', 'index'
</code></pre> 
<p> </p> 
<p>原文链接：<a href="https://blog.csdn.net/weixin_30540691/article/details/101091086?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158426904519725219926872%2522%252C%2522scm%2522%253A%252220140713.130056874..%2522%257D&amp;request_id=158426904519725219926872&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task">https://blog.csdn.net/weixin_30540691/article/details/101091086?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522158426904519725219926872%2522%252C%2522scm%2522%253A%252220140713.130056874..%2522%257D&amp;request_id=158426904519725219926872&amp;biz_id=0&amp;utm_source=distribute.pc_search_result.none-task</a></p> 
<p> </p> 
<p>更换代码：</p> 
<p> </p> 
<pre><code class="language-sql">EXEC sp_rename 'SC.SCno', 'SCSno', 'index'</code></pre> 
<p> </p> 
<p>修改成功：</p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/c4/e5/G7sXmIPA_o.png" width="285"></p> 
<p> </p> 
<p> </p> 
<p>【例3.15】删除Student表的Stusname索引。</p> 
<p> </p> 
<pre><code class="language-sql">DROP INDEX Stusname;    /*×有问题×*/</code></pre> 
<p> </p> 
<p>又出错了...</p> 
<p> </p> 
<p><img alt="" height="503" src="https://images2.imgbox.com/35/4c/Ii4UBRPN_o.png" width="491"></p> 
<p> </p> 
<p> </p> 
<h4><span style="color:#3399ea;">！插眼删除索引</span></h4> 
<p> </p> 
<p><img alt="" height="86" src="https://images2.imgbox.com/80/10/LgVRgx7B_o.png" width="464"><img alt="" height="103" src="https://images2.imgbox.com/9f/d9/jnSgKxSJ_o.png" width="260"></p> 
<p> </p> 
<p>报错里说要指定表名和索引名，所以试试<span style="color:#ffbb66;">&lt;表名&gt;.&lt;索引名&gt;</span>，而且Student的索引里没有Stusname，只有Stusno，所以</p> 
<p>更换代码：</p> 
<p> </p> 
<pre><code class="language-sql">DROP INDEX Student.Stusno;</code></pre> 
<p> </p> 
<p>删除成功：</p> 
<p><img alt="" height="74" src="https://images2.imgbox.com/1c/84/ximaaOkX_o.png" width="283"></p> 
<p> </p> 
<hr> 
<p> </p> 
<ul><li> <h4 id="INSERT"><span style="color:#f33b45;">INSERT</span></h4> </li></ul> 
<p> </p> 
<p>插入元组的INSERT语句的格式：</p> 
<p> </p> 
<p><span style="color:#ffbb66;">INSERT INTO&lt;表名&gt;[(&lt;属性列1&gt;[,&lt;属性列2&gt;]…)]<br> VALUES(&lt;常量1&gt;[,&lt;常量2&gt;…]);</span><br>  </p> 
<p>其功能是将新元组插入指定表中。</p> 
<p>INTO子句中没有出现的属性列，新元组在这些列上将取空值，</p> 
<p>注意：在表定义时说明了NOT NULL 的属性列不能取空值，否则会出错。</p> 
<p> </p> 
<p>【例3.69】将一个新学生元组（学号：201215128，姓名：陈冬，性别：男，所在系：IS，年龄：18岁）插入到Student中。</p> 
<p> </p> 
<pre><code class="language-sql">INSERT
INTO  Student (Sno,Sname,Ssex,Sdept,Sage)
VALUES ('201215128','陈冬','男','IS',18);
</code></pre> 
<p> </p> 
<p> </p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/73/37/2LLKLgZv_o.png" width="270"></p> 
<p> </p> 
<p>【例3.70】将学生张成民的信息插入到Student表中。</p> 
<p> </p> 
<pre><code class="language-sql">INSERT 
INTO Student
VALUES('201215126','张成民','男',18,'CS');
</code></pre> 
<p> </p> 
<p>【例3.71】插入一条选课记录（‘201215128’,‘1’）。</p> 
<p> </p> 
<pre><code class="language-sql">INSERT
INTO SC(Sno,Cno)
VALUES('201215128','1');</code></pre> 
<p>新插入的记录的Grade列上自动地赋空值。</p> 
<p>或者：</p> 
<pre><code class="language-sql">INSERT 
INTO SC
VALUES('201215128','1',NULL);</code></pre> 
<p>没有指出SC的属性名，在Grade列上要明确给出空值。</p> 
<p> </p> 
<p><strong>以上三例结果：</strong></p> 
<p> </p> 
<p><img alt="" height="83" src="https://images2.imgbox.com/49/18/wvNG8NQH_o.png" width="276"></p> 
<p> </p> 
<p> </p> 
<hr> 
<h4> </h4> 
<ul><li> <h4 id="SELECT"><span style="color:#f33b45;"><strong>SELECT</strong></span></h4> </li></ul> 
<p> </p> 
<p> </p> 
<p><strong>数据查询是数据库的核心操作。</strong></p> 
<p> </p> 
<p><span style="color:#ffbb66;">SELECT [ALL|DISTINCT]&lt;目标列表达式&gt;[,&lt;目标列表达式&gt;]…<br> FROM&lt;表名或者视图名&gt;[,&lt;表名或视图名&gt;…]|(&lt;SELECT语句&gt;)[AS]&lt;别名&gt;<br> [WHERE&lt;条件表达式&gt;]<br> [GROUP BY&lt;列名1&gt;[HAVING&lt;条件表达式&gt;]]<br> [ORDER BY&lt;列名2&gt;[ASC|DESC]];</span></p> 
<p> </p> 
<p>    SELECT语句含义：根据<span style="color:#e579b6;">WHERE</span>子的条件表达式从<span style="color:#e579b6;">FROM</span>子句指定的基本表、视图或派生表中找出满足条件的元组，再按  SELECT子句中的目标表达式选出元组中的属性值形成结果表。</p> 
<p> </p> 
<p><strong>1.选择表中的若干列</strong></p> 
<p>（1）查询指定列</p> 
<p> </p> 
<p>【例3.16】查询全体学生的学号与姓名。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sno,Sname
FROM Student;</code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p> </p> 
<p><img alt="" height="95" src="https://images2.imgbox.com/95/f3/O44jHNON_o.png" width="267"></p> 
<p> </p> 
<p>【例3.17】查询全体学生的姓名、学号、所在系。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,Sno,Sdept
FROM Student</code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p> </p> 
<p><img alt="" height="112" src="https://images2.imgbox.com/52/78/HJptMHUR_o.png" width="339"></p> 
<p> </p> 
<p>（2）查询全部列</p> 
<p> </p> 
<p>【例3.18】查询全体学生详细记录。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT *
FROM Student; </code></pre> 
<p>等价于：</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sno,Sname,Ssex,Sage,Sdept 
FROM Student; </code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p> </p> 
<p><img alt="" height="118" src="https://images2.imgbox.com/ec/53/IOsucEp0_o.png" width="467"></p> 
<p> </p> 
<p>（3）查询计算过程</p> 
<p> </p> 
<p>【例3.19】查询全体学生的姓名及其出生年份。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,2014-Sage /*查询结果的第二列是一个算术表达式*/
FROM Student;</code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p> </p> 
<p><img alt="" height="142" src="https://images2.imgbox.com/c3/be/IFJDwScs_o.png" width="311"></p> 
<p>【例3.20】查询全体学生的姓名、出生年份和所在的院系，要求用小写字母表示系名。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,'Year of Birth:',2014-Sage,LOWER(Sdept)
FROM Student;</code></pre> 
<p> </p> 
<p><strong>截图：</strong></p> 
<p> </p> 
<p><img alt="" height="122" src="https://images2.imgbox.com/f4/26/U6zAc7Gj_o.png" width="499"></p> 
<p> </p> 
<p>用户可以用个指定别名改变查询结果的列标题。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname NAME,'Year or Birth:'BIRTH,2014-Sage BIRTHDAY,
       LOWER(Sdept)DEPERTMENT
FROM Student;</code></pre> 
<p> </p> 
<p>截图：</p> 
<p> </p> 
<p><img alt="" height="96" src="https://images2.imgbox.com/0e/29/tpqhsYYo_o.png" width="482"></p> 
<p> </p> 
<p><strong>2.选择表中的若干元组</strong></p> 
<p> </p> 
<p>（1）消除取值重复的行</p> 
<p> </p> 
<p>【例3.21】查询选修了课程的学生学号</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sno
FROM SC;</code></pre> 
<p> </p> 
<p><strong><u>因为我几个例题删除重做了好几次，做到这儿的时候发现有些数据不小心弄丢了，所以以下例子均已做，不发截图了。</u></strong></p> 
<p> </p> 
<p>删掉重复行：</p> 
<p> </p> 
<pre><code class="language-sql">SELECT DISTINCT Sno
FROM SC;</code></pre> 
<p> </p> 
<p>（2）查询满足条件的元组</p> 
<p> </p> 
<p>①比较大小</p> 
<p> </p> 
<p>【例3.22】查询计算机科学系全体学生的名单。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname
FROM Student
WHERE Sdept='CS';</code></pre> 
<p> </p> 
<p>【例3.23】查询所有年龄在20岁以下的学生姓名及其年龄。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT DISTINCT Sno
FROM SC
WHERE Grade&lt;60;</code></pre> 
<p> </p> 
<p>【例3.24】查询考试成绩不及格的学生的学号。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT DISTINCT Sno
FROM SC
WHERE Grade&lt;60;</code></pre> 
<p> </p> 
<p><strong>注：</strong>这里使用了<span style="color:#e579b6;">DISTINCT </span>语句，当一个同学有多门课程不及格，他的学号也只列一次。</p> 
<p> </p> 
<p>②确定范围</p> 
<p> </p> 
<p>【例3.25】查询年龄在20~23岁（包括20和23）之间的学生的姓名、系别和年龄。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,Sdept,Sage
FROM Student
WHERE Sage BETWEEN 20 AND 23;</code></pre> 
<p> </p> 
<p>【例3.26】查询年龄不在20~23岁之间的学生的姓名、系别和年龄。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,Sdept,Sage
FROM Student
WHERE Sage NOT BETWEEN 20 AND 23;</code></pre> 
<p> </p> 
<p>③确定集合</p> 
<p> </p> 
<p>【3.27】查询计算机科学系（CS）、数学系（MA）、信息系（IS）学生的姓名和性别。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,Ssex
FROM Student
WHERE Sdept IN('CS','MA','IS');</code></pre> 
<p> </p> 
<p>【3.28】查询不是计算机科学系（CS）、数学系（MA）、信息系（IS）学生的姓名和性别。</p> 
<p> </p> 
<pre><code class="language-sql">SELECT Sname,Ssex
FROM Student
WHERE Sdept NOT IN('CS','MA','IS');</code></pre> 
<p> </p> 
<hr> 
<p><strong>总结：</strong>这次作业感觉还可以，语句都还短还简单，也没有什么需要特别注意的。唯一麻烦的就是一点一点敲代码，这次截图已经  减少很多了，切屏、截图的时间省下了不少，时间基本都是在敲代码，例题太多了（哭哭哭）。</p> 
<p>又遇见了两个错误，通过查资料也全都解决了。</p> 
<p>出现的问题就是中英文总出错，中文的（）和英文的()超难区分，错了还一时照不出来，得加小心了。</p> 
<p>后半段出现了个问题，有些地方出了问题或者不懂，我总会删除之前的数据重新再写一遍，然后就可能在哪里不小心弄丢了一些内容，导致接下来的操作全都有影响。</p> 
<p> </p> 
<hr> 
<p>上期传送阵：<a href="https://blog.csdn.net/weixin_46366744/article/details/104752442">【数据库】作业4——SQL练习1 - CREATE / DROP / ALTER</a></p> 
<p>下期传送阵：————</p> 
<p>插眼传送：</p> 
<p id="%EF%BC%81%E6%8F%92%E7%9C%BC%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%EF%BC%81%E6%8F%92%E7%9C%BC%EF%BC%9A" rel="nofollow">！插眼修改索引</a></p> 
<p style="margin-left:80px;"><a href="#%EF%BC%81%E6%8F%92%E7%9C%BC%EF%BC%9A" rel="nofollow">！插眼删除索引</a></p> 
<hr id="hr-toc"> 
<p>完成时间：2h25min</p> 
<h4>          以上</h4> 
<p>                                         ————（2020.3.15）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7abea59d019d8a12e9c21f76cad31ba0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Element-UI 使用el-row 高度设置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f225ad66ae513fec65b9b17e84f0d6f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA debug模式下没有控制台输出日志怎么打开？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>