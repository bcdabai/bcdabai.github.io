<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为----园区网络三层架构实验 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为----园区网络三层架构实验" />
<meta property="og:description" content="园区网络三层架构 随着企业信息化建设不断深入，企业的生产业务系统、经营管理系统、办公自动化系统均得到大力发展，对于企业园区网的建设要求越来越高。传统园区网建设初期往往面临如下问题： 1、网络架构较为混乱，不便于扩容和维护管理
2、 网络可靠性规划不合理，影响企业生产和经营管理、造成投资浪费
3、网络信息安全存在隐患
4、无法满足日益增长的网络业务需求
5、缺乏简单有效的网络管理系统，企业IT网络运维部门面临很大压力
园区网络结构多趋向于模块化、结构化，接入层按接入人数或者部门划分。
网关多放在汇聚层
接入层
接入层交换机一般部署在楼道的网络机柜中，接入园区网用户（PC机或服务器），提供二层交换机功能，也支持三层接入功能（接入交换机为三层交换机）。
由于接入层交换机直接接园区网用户，根据用户接入信息点数目和类型（GE/FE），对接入交换机的GE/FE接口密度有较高的要求。另外接入交换机部署在楼道网络机柜，数量大，对于成本、功耗和易管理维护等特性要求较高。
汇聚层
园区汇聚层交换机一般部署在楼宇独立的网络汇聚机柜中，汇聚园区接入交换机的流量，一般提供三层交换机功能，汇聚层交换机作为园区网的网关，终结园区网用户的二层流量，进行三层转发。
根据需要，可以在汇聚交换机上集成增值业务板卡（如防火墙，负载均衡器、WLAN AC控制器）或者旁挂独立的增值业务设备，为园区网用户提供增值业务，汇聚交换机需要提供高密度的GE接口，汇聚接入交换机的流量，通过10GE接口接到核心交换。
核心层
园区核心层交换机部署在园区核心机房中，汇聚各楼宇/区域之间的用户流量，提供三层交换机功能，连接园区外部网络到内部用户的“纵向流量”和不同汇聚区域用户之间的“横向流量”要求高密10GE、高转发性能。
出口层
园区出口路由器，连接Internet/WAN广域网和园区内部局域网。
接下来，我们来搭建配置一个园区网络实例，网关在汇聚层，网络高冗余性。 结构拓扑：
配置思路（以区域2为例）： 从接入层开始，先划分vlan
LSW16-LSW19为 vlan 2 - 10 ，LSW20 - LSW23为 vlan 11 - 19，具体vlan划分如图所示。
划分完后，将接入交换机进行逐一配置，把接入层接口划分到vlan中，并配置边缘接口。
vlan batch 11-19 # 以区域二的LSW20为例 port-group group-member g0/0/3 to g0/0/10 port link-type access port default vlan 11 stp edged-port enable port-group group-member g0/0/11 to g0/0/20 port link-type access port default vlan 12 stp edged-port enable port-group group-member g0/0/1 to g0/0/2 port link-type trunk undo port trunk allow-pass vlan 1 #防止环路 port trunk allow-pass vlan 11 to 12 其余设备根据vlan划分，把自己的接口划分到相对应的vlan中，修改以上的vlan数据即可，此处不作过多赘述。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d7dacf38e04e2f5f8a6b5a637e858836/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-24T20:23:49+08:00" />
<meta property="article:modified_time" content="2022-03-24T20:23:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为----园区网络三层架构实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>园区网络三层架构</h2> 
<p><img src="https://images2.imgbox.com/5f/48/WFGlPJNw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_4"></a>随着企业信息化建设不断深入，企业的生产业务系统、经营管理系统、办公自动化系统均得到大力发展，对于企业园区网的建设要求越来越高。传统园区网建设初期往往面临如下问题：</h3> 
<p><strong>1、网络架构较为混乱，不便于扩容和维护管理<br> 2、 网络可靠性规划不合理，影响企业生产和经营管理、造成投资浪费<br> 3、网络信息安全存在隐患<br> 4、无法满足日益增长的网络业务需求<br> 5、缺乏简单有效的网络管理系统，企业IT网络运维部门面临很大压力</strong></p> 
<p>园区网络结构多趋向于模块化、结构化，接入层按接入人数或者部门划分。<br> 网关多放在汇聚层<br> <strong>接入层</strong><br> 接入层交换机一般部署在楼道的网络机柜中，接入园区网用户（PC机或服务器），提供二层交换机功能，也支持三层接入功能（接入交换机为三层交换机）。<br> 由于接入层交换机直接接园区网用户，根据用户接入信息点数目和类型（GE/FE），对接入交换机的GE/FE接口密度有较高的要求。另外接入交换机部署在楼道网络机柜，数量大，对于成本、功耗和易管理维护等特性要求较高。</p> 
<p><strong>汇聚层</strong><br> 园区汇聚层交换机一般部署在楼宇独立的网络汇聚机柜中，汇聚园区接入交换机的流量，一般提供三层交换机功能，汇聚层交换机作为园区网的网关，终结园区网用户的二层流量，进行三层转发。</p> 
<p>根据需要，可以在汇聚交换机上集成增值业务板卡（如防火墙，负载均衡器、WLAN AC控制器）或者旁挂独立的增值业务设备，为园区网用户提供增值业务，汇聚交换机需要提供高密度的GE接口，汇聚接入交换机的流量，通过10GE接口接到核心交换。</p> 
<p><strong>核心层</strong><br> 园区核心层交换机部署在园区核心机房中，汇聚各楼宇/区域之间的用户流量，提供三层交换机功能，连接园区外部网络到内部用户的“纵向流量”和不同汇聚区域用户之间的“横向流量”要求高密10GE、高转发性能。</p> 
<p><strong>出口层</strong><br> 园区出口路由器，连接Internet/WAN广域网和园区内部局域网。</p> 
<p><img src="https://images2.imgbox.com/6a/4e/Me8mMir4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_31"></a>接下来，我们来搭建配置一个园区网络实例，网关在汇聚层，网络高冗余性。</h3> 
<p><strong>结构拓扑：</strong><br> <img src="https://images2.imgbox.com/49/4f/4QrPlDjX_o.png" alt="拓扑结构图"></p> 
<h3><a id="2_35"></a>配置思路（以区域2为例）：</h3> 
<p>从接入层开始，先划分vlan<br> LSW16-LSW19为 vlan 2 - 10 ，LSW20 - LSW23为 vlan 11 - 19，具体vlan划分如图所示。<br> 划分完后，将接入交换机进行逐一配置，把接入层接口划分到vlan中，并配置边缘接口。</p> 
<pre><code class="prism language-python">vlan batch <span class="token number">11</span><span class="token operator">-</span><span class="token number">19</span>  <span class="token comment"># 以区域二的LSW20为例</span>
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">10</span>
	 port link<span class="token operator">-</span><span class="token builtin">type</span> access
	 port default vlan <span class="token number">11</span>
 	 stp edged<span class="token operator">-</span>port enable
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">11</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">20</span>
	port link<span class="token operator">-</span><span class="token builtin">type</span> access
	port default vlan <span class="token number">12</span>
 	stp edged<span class="token operator">-</span>port enable
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>   <span class="token comment">#防止环路</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">11</span> to <span class="token number">12</span>
</code></pre> 
<p><strong>其余设备根据vlan划分，把自己的接口划分到相对应的vlan中，修改以上的vlan数据即可，此处不作过多赘述。</strong></p> 
<pre><code class="prism language-python">vlan batch <span class="token number">11</span><span class="token operator">-</span><span class="token number">19</span>  <span class="token comment"># 以区域二的LSW21为例</span>
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">10</span>
	 port link<span class="token operator">-</span><span class="token builtin">type</span> access
	 port default vlan <span class="token number">12</span>
 	 stp edged<span class="token operator">-</span>port enable
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">11</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">20</span>
	port link<span class="token operator">-</span><span class="token builtin">type</span> access
	port default vlan <span class="token number">13</span>
 	stp edged<span class="token operator">-</span>port enable
port<span class="token operator">-</span>group group<span class="token operator">-</span>member g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> to g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>   <span class="token comment">#防止环路</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">12</span> to <span class="token number">13</span>
</code></pre> 
<p><strong>接下来配置二层汇聚层</strong></p> 
<p>首先把LSW14 和LSW15 两台设备连接做聚合<br> LSW14：</p> 
<pre><code class="prism language-python">interface Eth<span class="token operator">-</span>Trunk34
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">11</span> to <span class="token number">19</span>
 trunkport GigabitEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
 trunkport GigabitEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span>
</code></pre> 
<p>LSW15：</p> 
<pre><code class="prism language-python">interface Eth<span class="token operator">-</span>Trunk34
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">11</span> to <span class="token number">19</span> <span class="token number">45</span>
 trunkport GigabitEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
 trunkport GigabitEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/53/20/4xQpr1OQ_o.png" alt="在这里插入图片描述"><br> 接下来与接入层的设备配置连通<br> LSW14和LSW15为LSW20-23的负载均衡。<br> 配置如下：<br> LSW14</p> 
<pre><code class="prism language-python">interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">11</span> to <span class="token number">12</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">12</span> to <span class="token number">13</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">7</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">14</span> to <span class="token number">15</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">8</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">15</span> to <span class="token number">16</span>
</code></pre> 
<p>LSW15</p> 
<pre><code class="prism language-python">interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">11</span> to <span class="token number">12</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">12</span> to <span class="token number">13</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">7</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">14</span> to <span class="token number">15</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">8</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 undo port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">1</span>
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">15</span> to <span class="token number">16</span>
</code></pre> 
<p><strong>接下来，配置每个VLAN的网关</strong></p> 
<p>LSW14</p> 
<pre><code class="prism language-python">interface vlan11
 ip address <span class="token number">10.1</span><span class="token number">.3</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 
interface Vlanif12
 ip address <span class="token number">10.1</span><span class="token number">.12</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif13
 ip address <span class="token number">10.1</span><span class="token number">.13</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif14
 ip address <span class="token number">10.1</span><span class="token number">.14</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 
interface Vlanif15
 ip address <span class="token number">10.1</span><span class="token number">.15</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 
interface Vlanif16
 ip address <span class="token number">10.1</span><span class="token number">.16</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
</code></pre> 
<p>LSW15</p> 
<pre><code class="prism language-python">interface Vlanif11
 ip address <span class="token number">10.1</span><span class="token number">.3</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif12
 ip address <span class="token number">10.1</span><span class="token number">.12</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif13
 ip address <span class="token number">10.1</span><span class="token number">.13</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif14
 ip address <span class="token number">10.1</span><span class="token number">.14</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif15
 ip address <span class="token number">10.1</span><span class="token number">.15</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif16
 ip address <span class="token number">10.1</span><span class="token number">.16</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
</code></pre> 
<p>测试用PC4ping网关<br> <img src="https://images2.imgbox.com/de/c7/iDRoY4bx_o.png" alt="在这里插入图片描述"><br> <strong>接下来，配置汇聚层与核心层部分：</strong><br> 在LSW14上创建vlan 40（LSW24） 和 vlan41（LSW10）<br> 在LSW15上创建vlan 50（LSW24） 和 vlan51（LSW10）<br> LSW10和LSW24上再创建vlan100</p> 
<p><strong>LSW14配置：</strong></p> 
<pre><code class="prism language-python">vlan batch <span class="token number">40</span> <span class="token number">41</span>
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">41</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">40</span>

interface Vlanif41
 ip address <span class="token number">10.0</span><span class="token number">.41</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 interface Vlanif40
 ip address <span class="token number">10.0</span><span class="token number">.40</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
</code></pre> 
<p><strong>LSW15配置：</strong></p> 
<pre><code class="prism language-python">vlan batch <span class="token number">50</span> <span class="token number">51</span>
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">50</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">51</span>

interface Vlanif50
 ip address <span class="token number">10.0</span><span class="token number">.50</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 interface Vlanif51
 ip address <span class="token number">10.0</span><span class="token number">.51</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
</code></pre> 
<p><strong>LSW10配置：</strong></p> 
<pre><code class="prism language-python">vlan batch <span class="token number">41</span> <span class="token number">51</span> <span class="token number">100</span>
interface Eth<span class="token operator">-</span>Trunk10
trunkport g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">23</span>
trunkport g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">100</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">41</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">51</span>

interface Vlanif100
 ip address <span class="token number">10.0</span><span class="token number">.100</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif41
 ip address <span class="token number">10.0</span><span class="token number">.41</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif51
 ip address <span class="token number">10.0</span><span class="token number">.51</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
</code></pre> 
<p><strong>LSW24配置：</strong></p> 
<pre><code class="prism language-python">vlan batch <span class="token number">40</span> <span class="token number">50</span> <span class="token number">100</span>
interface Eth<span class="token operator">-</span>Trunk10
trunkport g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">23</span>
trunkport g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> trunk
 port trunk allow<span class="token operator">-</span><span class="token keyword">pass</span> vlan <span class="token number">100</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">40</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 port link<span class="token operator">-</span><span class="token builtin">type</span> access
 port default vlan <span class="token number">50</span>

interface Vlanif100
 ip address <span class="token number">10.0</span><span class="token number">.100</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif41
 ip address <span class="token number">10.0</span><span class="token number">.40</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

interface Vlanif51
 ip address <span class="token number">10.0</span><span class="token number">.50</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
</code></pre> 
<p>测试用LSW10 ping LSW24：<br> <img src="https://images2.imgbox.com/54/e5/IcIySvK4_o.png" alt="在这里插入图片描述"></p> 
<p><strong>接下来运行ospf：</strong><br> <strong>我们继续以area2为例：<br> 我们直接在接口运行ospf</strong></p> 
<p><strong>LSW10</strong></p> 
<pre><code class="prism language-python">ospf <span class="token number">2</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">7.7</span><span class="token number">.7</span><span class="token number">.7</span>
 area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif41
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif51
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>
</code></pre> 
<p><strong>LSW24</strong></p> 
<pre><code class="prism language-python">ospf <span class="token number">2</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">9.9</span><span class="token number">.9</span><span class="token number">.9</span>
 area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif40
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif50
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>
</code></pre> 
<p><strong>LSW14</strong></p> 
<pre><code class="prism language-python">ospf <span class="token number">2</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">14.14</span><span class="token number">.14</span><span class="token number">.14</span>
 area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif41
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif40
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif45
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>
</code></pre> 
<p><strong>LSW15</strong></p> 
<pre><code class="prism language-python">ospf <span class="token number">2</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">8.8</span><span class="token number">.8</span><span class="token number">.8</span>
 area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif51
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif50
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>

interface Vlanif45
 ospf cost <span class="token number">2</span>
 ospf network<span class="token operator">-</span><span class="token builtin">type</span> p2p
 ospf timer hello <span class="token number">1</span>
 ospf enable <span class="token number">2</span> area <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span>
</code></pre> 
<p><strong>OSPF配置完成后，我们来看邻居建立情况<br> LSW14</strong><br> <img src="https://images2.imgbox.com/b4/ef/YBHrNKXD_o.png" alt="在这里插入图片描述"><br> <strong>LSW15</strong><br> <img src="https://images2.imgbox.com/19/9e/1ZT986bM_o.png" alt="在这里插入图片描述"><br> <strong>LSW10</strong><br> <img src="https://images2.imgbox.com/cf/e7/YGxfVKXb_o.png" alt="在这里插入图片描述"><br> <strong>LSW24</strong><br> <img src="https://images2.imgbox.com/f2/c6/yM4PNBwD_o.png" alt="在这里插入图片描述"><br> 最后，根据流量图设计，我们做以调整<br> LSW12和 LSW13以LSW10为主核心，以LSW24为备核心<br> LSW14和 LSW15以LSW24为主核心，以LSW10为备核心<br> 接下来进行配置：<br> LSW14：</p> 
<pre><code class="prism language-python">interface vlan11
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.3</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface Vlanif12
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.12</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface vlan13
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.13</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface vlan14
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.14</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface vlan15
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.15</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface vlan16
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.16</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>
</code></pre> 
<p>LSW15</p> 
<pre><code class="prism language-python">interface <span class="token number">11</span>
vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.3</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface <span class="token number">12</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.12</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface <span class="token number">13</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.13</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface <span class="token number">14</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.14</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.15</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>

interface <span class="token number">16</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.16</span><span class="token number">.1</span>
 vrrp vrid <span class="token number">1</span> priority <span class="token number">120</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> track interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span> reduced <span class="token number">15</span>
 vrrp vrid <span class="token number">1</span> authentication<span class="token operator">-</span>mode md5 <span class="token number">123456</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e829d56e256c6f85a2c996157010899/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux: 多线程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f08e5457e25316b3948903f9315521df/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网页禁止缩放</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>