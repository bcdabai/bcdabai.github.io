<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Springboot安全管理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Springboot安全管理" />
<meta property="og:description" content="文章目录 安全管理介绍一、Spring SecuritySpring Boot整合Spring Security实现的安全管理功能： 二、MVC Security安全配置介绍如何关闭Sercurity提供的Web应用默认安全配置WebSecurityConfigurerAdapter类的主要方法及说明 本次用到的依赖 自定义用户认证使用内存进行身份认证 安全管理介绍 实际开发中，一些应用通常要考虑到安全性问题。例如，对于一些重要的操作，有些请求需要用户验明身份后才可以执行，还有一些请求需要用户具有特定权限才可以执行。这样做的意义，不仅可以用来保护项目安全，还可以控制项目访问效果。
提示：以下是本篇文章正文内容，下面案例可供参考
一、Spring Security •Spring Security是基于Spring生态圈的，用于提供安全访问控制解决方案的框架。
•Spring Security的安全管理有两个重要概念，分别是Authentication（认证）和Authorization（授权）。
Spring Boot整合Spring Security实现的安全管理功能： MVC Security是Spring Boot整合Spring MVC框架搭建的Web应用的安全管理。
WebFlux Security是Spring Boot整合Spring WebFlux框架搭建的Web应用的安全管理。
OAuth2是大型项目的安全管理框架，可以实现第三方认证、单点登录等功能。
Actuator Security用于对项目的一些运行环境提供安全监控，例如Health健康信息、Info运行信息等，它主要作为系统指标供运维人员查看管理系统的运行情况。
官方默认的安全登录常见几个问题
1.只有唯一的默认登录用户user、密码随机生成且过于暴露、登录页面及错误提示页面不是我们想要的等。
二、MVC Security安全配置介绍 项目引入spring-boot-starter-security依赖启动器，MVC Security安全管理功能就会自动生效，其默认的安全配置是在SecurityAutoConfiguration和UserDetailsServiceAutoConfiguration中实现的。
•SecurityAutoConfiguration:•导入并自动化配置启动Web安全管理
•UserDetailsServiceAutoConfiguration:•用于配置用户身份信息
如何关闭Sercurity提供的Web应用默认安全配置 1.要完全关闭Security提供的Web应用默认安全配置，可以自定义WebSecurityConfigurerAdapter类型的Bean组件以及自定义UserDetailsService、AuthenticationProvider或AuthenticationManager类型的Bean组件。
2.另外，可以通过自定义WebSecurityConfigurerAdapter类型的Bean组件来覆盖默认访问规则。
WebSecurityConfigurerAdapter类的主要方法及说明 方法描述configure(AuthenticationManagerBuilder auth)定制用户认证管理器来实现用户认证configure(HttpSecurity http)定制基于HTTP请求的用户访问控制 本次用到的依赖 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Spring Data JPA操作数据库 --&gt; &lt;dependency&gt; &lt;groupId&gt;org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6f63ee262c752831bb7e075aad9cc9bf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-28T10:16:52+08:00" />
<meta property="article:modified_time" content="2021-04-28T10:16:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Springboot安全管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">安全管理介绍</a></li><li><a href="#Spring_Security_15" rel="nofollow">一、Spring Security</a></li><li><ul><li><ul><li><ul><li><a href="#Spring_BootSpring_Security_22" rel="nofollow">Spring Boot整合Spring Security实现的安全管理功能：</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#MVC_Security_34" rel="nofollow">二、MVC Security安全配置介绍</a></li><li><ul><li><ul><li><ul><li><ul><li><a href="#SercurityWeb_41" rel="nofollow">如何关闭Sercurity提供的Web应用默认安全配置</a></li><li><ul><li><a href="#WebSecurityConfigurerAdapter_47" rel="nofollow">WebSecurityConfigurerAdapter类的主要方法及说明</a></li></ul> 
     </li></ul> 
     </li><li><a href="#_54" rel="nofollow">本次用到的依赖</a></li></ul> 
    </li><li><a href="#_107" rel="nofollow">自定义用户认证</a></li><li><ul><li><a href="#_127" rel="nofollow">使用内存进行身份认证</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h2><a id="_7"></a>安全管理介绍</h2> 
<p><font color="#999AAA">实际开发中，一些应用通常要考虑到安全性问题。例如，对于一些重要的操作，有些请求需要用户验明身份后才可以执行，还有一些请求需要用户具有特定权限才可以执行。这样做的意义，不仅可以用来保护项目安全，还可以控制项目访问效果。</font></p> 
<hr color="#000000" size='1"'> 
<p><font color="#999AAA">提示：以下是本篇文章正文内容，下面案例可供参考</font></p> 
<h2><a id="Spring_Security_15"></a>一、Spring Security</h2> 
<p><strong>•Spring Security是基于Spring生态圈的，用于提供安全访问控制解决方案的框架。</strong></p> 
<p><strong>•Spring Security的安全管理有两个重要概念，分别是Authentication（认证）和Authorization（授权）。</strong></p> 
<h5><a id="Spring_BootSpring_Security_22"></a>Spring Boot整合Spring Security实现的安全管理功能：</h5> 
<p>MVC Security是Spring Boot整合Spring MVC框架搭建的Web应用的安全管理。</p> 
<p>WebFlux Security是Spring Boot整合Spring WebFlux框架搭建的Web应用的安全管理。</p> 
<p>OAuth2是大型项目的安全管理框架，可以实现第三方认证、单点登录等功能。</p> 
<p>Actuator Security用于对项目的一些运行环境提供安全监控，例如Health健康信息、Info运行信息等，它主要作为系统指标供运维人员查看管理系统的运行情况。<br> 官方默认的安全登录常见几个问题<br> 1.<strong>只有唯一的默认登录用户user、密码随机生成且过于暴露、登录页面及错误提示页面不是我们想要的等。</strong></p> 
<h2><a id="MVC_Security_34"></a>二、MVC Security安全配置介绍</h2> 
<p><strong>项目引入</strong>spring-boot-starter-security依赖启动器，MVC Security安全管理功能就会自动生效，其默认的安全配置是在SecurityAutoConfiguration和UserDetailsServiceAutoConfiguration中实现的。</p> 
<p>•SecurityAutoConfiguration:•导入并自动化配置启动Web安全管理</p> 
<p>•UserDetailsServiceAutoConfiguration:•用于配置用户身份信息</p> 
<h6><a id="SercurityWeb_41"></a>如何关闭Sercurity提供的Web应用默认安全配置</h6> 
<p>1.要完全关闭Security提供的Web应用默认安全配置，可以自定义WebSecurityConfigurerAdapter类型的Bean组件以及自定义UserDetailsService、AuthenticationProvider或AuthenticationManager类型的Bean组件。</p> 
<p>2.另外，可以通过自定义WebSecurityConfigurerAdapter类型的Bean组件来覆盖默认访问规则。</p> 
<h6><a id="WebSecurityConfigurerAdapter_47"></a>WebSecurityConfigurerAdapter类的主要方法及说明</h6> 
<table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>configure(AuthenticationManagerBuilder auth)</td><td>定制用户认证管理器来实现用户认证</td></tr><tr><td>configure(HttpSecurity http)</td><td>定制基于HTTP请求的用户访问控制</td></tr></tbody></table> 
<h5><a id="_54"></a>本次用到的依赖</h5> 
<pre><code>&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
        &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;
        &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;
    &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Data JPA操作数据库  --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Redis缓存启动器--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- JDBC数据库连接启动器 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- MySQL数据连接驱动 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
</code></pre> 
<h4><a id="_107"></a>自定义用户认证</h4> 
<p>步骤一：创建一个config包里面的<strong>WebSecurityConfigurerAdapter配置类</strong></p> 
<p>@EnableWebSecurity注解是一个组合注解，主要包括@Configuration注解:声明当前类为配置类</p> 
<p>@Import({WebSecurityConfiguration.class, SpringWebMvcImportSelector.class})注解:根据pom.xml中导入的web模板和security模板进行自动化配置</p> 
<p>@EnableGlobalAuthentication注解:开启自定义的全局认证</p> 
<pre><code>import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
@EnableWebSecurity//开启MVCSecurity安全支持(这是一个组合注解，包括了主要包括@Configuration注解、@Import({WebSecurityConfiguration.class, SpringWebMvcImportSelector.class})注解和@EnableGlobalAuthentication注解)
public class SecurityConfig extends WebSecurityConfigurerAdapter {
}
</code></pre> 
<h5><a id="_127"></a>使用内存进行身份认证</h5> 
<p><strong>SecurityConfig</strong>类中重写configure(AuthenticationManagerBuilder auth)方法，并在该方法中使用内存身份认证的方式自定义了认证用户信息。定义用户认证信息时，设置了两个用户名和密码以及对应的角色信息。</p> 
<pre><code>@EnableWebSecurity//开启MVCSecurity安全支持(这是一个组合注解，包括了主要包括@Configuration注解、@Import({WebSecurityConfiguration.class, SpringWebMvcImportSelector.class})注解和@EnableGlobalAuthentication注解)
public class SecurityConfig extends WebSecurityConfigurerAdapter {
          @Override
        protected void configure(AuthenticationManagerBuilder auth) throws Exception {
           //设置密码编码器
            BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();
            //模拟测试用户
            auth.inMemoryAuthentication().passwordEncoder(encoder)
                    .withUser("user1").password(encoder.encode("123456")).roles("common")
                    .and()
                    .withUser("user2").password(encoder.encode("123456")).roles("vip");
        }}
</code></pre> 
<p>Spring Security提供多种密码编码器，包括<code>BcryptPasswordEncoder，Pbkdf2PasswordEncoder,ScryptPasswordEncoder</code>等密码设置不限于本例中<code>BcryptPasswordEncoder</code>密码编码器<br> 用内存可以存储多个用户信息，用<code>.and()</code>连接</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e7a3268ab2ce1d1c0b0eaff680b7952/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Freemarker使用详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/898a70c4c7bc7a8c46e691e67109a403/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">tera term串口文本匹配打印时间脚本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>