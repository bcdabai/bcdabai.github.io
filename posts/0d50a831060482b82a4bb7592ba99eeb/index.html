<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>渗透测试的方法和流程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="渗透测试的方法和流程" />
<meta property="og:description" content="渗透测试，是为了证明网络防御按照预期计划正常运行而提供的一种机制。不妨假设，你的公司定期更新安全策略和程序，时时给系统打补丁，并采用了漏洞扫描器等工具，以确保所有补丁都已打上。如果你早已做到了这些，为什么还要请外方进行审查或渗透测试呢？因为，渗透测试能够独立地检查你的网络策略，换句话说，就是给你的系统安了一双眼睛。而且，进行这类测试的，都是寻找网络系统安全漏洞的专业人士。 渗透测试就是利用我们所掌握的渗透知识，对网站进行一步一步的渗透，发现其中存在的漏洞和隐藏的风险，然后撰写一篇测试报告，提供给我们的客户。客户根据我们撰写的测试报告，对网站进行漏洞修补，以防止黑客的入侵！ 渗透测试的前提是我们得经过用户的授权，才可以对网站进行渗透。如果我们没有经过客户的授权而对一个网站进行渗透测试的话，这是违法的。
渗透测试基本流程
明确目标
信息收集
漏洞挖掘
漏洞利用
权限提升
内网渗透
痕迹清理
撰写报告
渗透测试分为黑盒测试和白盒测试
黑盒测试又被称为所谓的“Zero-Knowledge Testing”，渗透者完全处于对系统一无所知的状态，或者只知道这个网站的URL。通常这类型测试，最初的信息获取来自于DNS、Web、Email及各种公开对外的服务器。 白盒测试与黑箱测试恰恰相反，测试者可以通过正常渠道向被测单位取得各种资料，包括网络拓扑、员工资料甚至网站或其它程序的代码片段，也能够与单位的其它员工（销售、程序员、管理者...）进行面对面的沟通。这类测试的目的是模拟企业内部雇员的越权操作。
明确目标 授权许可 从客户或该公司获取书面渗透测试委托授权书
确定范围 测试目标的范围、ip、域名、内外网、整站或部分模块、测试账户等
确定规则 使用代理IP还是IP访问白名单、能渗透到什么程度（发现漏洞为止还是继续扩大范围挖掘尽可能多的风险），时间限制、能否修改上传、能否提权等。
目标系统介绍、重点保护对象及特性。
是否允许数据破坏？
是否允许阻断业务正常运行？
测试之前是否应当知会相关部门负责人？
接入方式？外网和内网？
测试是发现问题就算成功，还是尽可能的发现多的问题？
渗透过程是否需要考虑社会工程？
More...
确定需求 应用系统渗透、数据库系统渗透、主机操作系统渗透、网络设备渗透等
信息收集 信息收集的方式可以分为两种：主动和被动。
主动信息收集：通过直接访问、扫描网站，这种流量将流经网站
被动信息收集：利用第三方的服务对目标进行访问了解，比例：Google hack搜索、Shodan搜索等
基础信息 Whois信息（域名所有人、域名注册商、邮箱、联系方式、Whois反查）
域名对应IP（多地Ping判断是否存在CDN，获取服务器真实IP）
旁站（同一服务器下其他网站）
C段（同一网段其他服务器）
子域名(顶级域名下的域名，如：www.example.com是顶级域名example.com的子域名)
DNS（大型网络的企业，一般都有自己的DNS服务器）
More...
常用工具 方法 Google语法查询
基于SSL证书查询
More...
工具 Dig
Nmap
Masscan
Nslookup
subDomainsBrute
Layer子域名挖掘机
More...
常用网站 爱站网
DNSdb
Shodan
ZoomEy
微步在线
千寻查询工具
傻蛋联网设备搜索
站长工具-站长之家
Certificate Search" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0d50a831060482b82a4bb7592ba99eeb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-16T00:04:07+08:00" />
<meta property="article:modified_time" content="2023-07-16T00:04:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">渗透测试的方法和流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>渗透测试，是为了证明网络防御按照预期计划正常运行而提供的一种机制。不妨假设，你的公司定期更新安全策略和程序，时时给系统打补丁，并采用了漏洞扫描器等工具，以确保所有补丁都已打上。如果你早已做到了这些，为什么还要请外方进行审查或渗透测试呢？因为，渗透测试能够独立地检查你的网络策略，换句话说，就是给你的系统安了一双眼睛。而且，进行这类测试的，都是寻找网络系统安全漏洞的专业人士。 渗透测试就是利用我们所掌握的渗透知识，对网站进行一步一步的渗透，发现其中存在的漏洞和隐藏的风险，然后撰写一篇测试报告，提供给我们的客户。客户根据我们撰写的测试报告，对网站进行漏洞修补，以防止黑客的入侵！ 渗透测试的前提是我们得经过用户的授权，才可以对网站进行渗透。如果我们没有经过客户的授权而对一个网站进行渗透测试的话，这是违法的。</p> 
<p>渗透测试基本流程</p> 
<ul><li> <p><strong>明确目标</strong></p> </li><li> <p><strong>信息收集</strong></p> </li><li> <p><strong>漏洞挖掘</strong></p> </li><li> <p><strong>漏洞利用</strong></p> </li><li> <p><strong>权限提升</strong></p> </li><li> <p><strong>内网渗透</strong></p> </li><li> <p><strong>痕迹清理</strong></p> </li><li> <p><strong>撰写报告</strong></p> </li></ul> 
<p></p> 
<p>渗透测试分为黑盒测试和白盒测试</p> 
<p>黑盒测试又被称为所谓的“Zero-Knowledge Testing”，渗透者完全处于对系统一无所知的状态，或者只知道这个网站的URL。通常这类型测试，最初的信息获取来自于DNS、Web、Email及各种公开对外的服务器。 白盒测试与黑箱测试恰恰相反，测试者可以通过正常渠道向被测单位取得各种资料，包括网络拓扑、员工资料甚至网站或其它程序的代码片段，也能够与单位的其它员工（销售、程序员、管理者...）进行面对面的沟通。这类测试的目的是模拟企业内部雇员的越权操作。</p> 
<h5><strong>明确目标</strong></h5> 
<h6>授权许可</h6> 
<p>从客户或该公司获取书面渗透测试委托授权书</p> 
<h6>确定范围</h6> 
<p>测试目标的范围、ip、域名、内外网、整站或部分模块、测试账户等</p> 
<h6>确定规则</h6> 
<ul><li> <p>使用代理IP还是IP访问白名单、能渗透到什么程度（发现漏洞为止还是继续扩大范围挖掘尽可能多的风险），时间限制、能否修改上传、能否提权等。</p> </li><li> <p>目标系统介绍、重点保护对象及特性。</p> </li><li> <p>是否允许数据破坏？</p> </li><li> <p>是否允许阻断业务正常运行？</p> </li><li> <p>测试之前是否应当知会相关部门负责人？</p> </li><li> <p>接入方式？外网和内网？</p> </li><li> <p>测试是发现问题就算成功，还是尽可能的发现多的问题？</p> </li><li> <p>渗透过程是否需要考虑社会工程？</p> </li><li> <p>More...</p> </li></ul> 
<h6>确定需求</h6> 
<p>应用系统渗透、数据库系统渗透、主机操作系统渗透、网络设备渗透等</p> 
<p></p> 
<h5>信息收集</h5> 
<p>信息收集的方式可以分为两种：主动和被动。</p> 
<ul><li> <p>主动信息收集：通过直接访问、扫描网站，这种流量将流经网站</p> </li><li> <p>被动信息收集：利用第三方的服务对目标进行访问了解，比例：Google hack搜索、Shodan搜索等</p> </li></ul> 
<h6>基础信息</h6> 
<ol><li> <p>Whois信息（域名所有人、域名注册商、邮箱、联系方式、Whois反查）</p> </li><li> <p>域名对应IP（多地Ping判断是否存在CDN，获取服务器真实IP）</p> </li><li> <p>旁站（同一服务器下其他网站）</p> </li><li> <p>C段（同一网段其他服务器）</p> </li><li> <p>子域名(顶级域名下的域名，如：<a href="www.example.com" rel="nofollow">www.example.com</a>是顶级域名example.com的子域名)</p> </li><li> <p>DNS（大型网络的企业，一般都有自己的DNS服务器）</p> </li><li> <p>More...</p> </li></ol> 
<h6>常用工具</h6> 
<h6>方法</h6> 
<ol><li> <p>Google语法查询</p> </li><li> <p>基于SSL证书查询</p> </li><li> <p>More...</p> </li></ol> 
<h6>工具</h6> 
<ul><li> <p>Dig</p> </li><li> <p>Nmap</p> </li><li> <p>Masscan</p> </li><li> <p>Nslookup</p> </li><li> <p>subDomainsBrute</p> </li><li> <p>Layer子域名挖掘机</p> </li><li> <p>More...</p> </li></ul> 
<h6>常用网站</h6> 
<ul><li> <p>爱站网</p> </li><li> <p>DNSdb</p> </li><li> <p>Shodan</p> </li><li> <p>ZoomEy</p> </li><li> <p>微步在线</p> </li><li> <p>千寻查询工具</p> </li><li> <p>傻蛋联网设备搜索</p> </li><li> <p>站长工具-站长之家</p> </li><li> <p>Certificate Search</p> </li><li> <p>More...</p> </li></ul> 
<h6>整站分析</h6> 
<ol><li> <p>服务器类型（类Unix/Windows）</p> </li><li> <p>网站容器（Apache/Nginx/Tomcat/IIS等）</p> </li><li> <p>脚本类型（PHP/JSP/ASP/ASPX等）</p> </li><li> <p>数据库类型（Mysql/Oracle/Accees/Mqlserver等）</p> </li><li> <p>CMS系统（查询已知漏洞从而进一步攻击）</p> </li><li> <p>开放端口（扫描开放端口、端口对应服务等）</p> </li><li> <p>敏感信息（代码、目录、路径、文件等）</p> </li><li> <p>More...</p> </li></ol> 
<h6>常用工具</h6> 
<p>方法</p> 
<ol><li> <p>Google语法查询</p> </li><li> <p>Ping探测（通过TTL值判断服务器类型）</p> </li><li> <p>Response Headers（响应headers）</p> </li><li> <p>代码托管平台（Github、Gitee等）</p> </li><li> <p>More...</p> </li></ol> 
<p>工具</p> 
<ul><li> <p>Dig</p> </li><li> <p>Nmap</p> </li><li> <p>Masscan</p> </li><li> <p>Nslookup</p> </li><li> <p>subDomainsBrute</p> </li><li> <p>Layer子域名挖掘机</p> </li><li> <p>More...</p> </li></ul> 
<p>常用网站</p> 
<ul><li> <p>Nmap</p> </li><li> <p>Nessus</p> </li><li> <p>cansina</p> </li><li> <p>Masscan</p> </li><li> <p>DirBuster</p> </li><li> <p>Whatweb</p> </li><li> <p>wwwscan</p> </li><li> <p>Wappalyzer</p> </li><li> <p>More...</p> </li></ul> 
<h5>漏洞挖掘</h5> 
<p>漏洞挖掘的方式可以分为两种：手动和自动。</p> 
<ul><li> <p>手动漏洞挖掘：通过手工挖掘SQL注入、XSS跨站脚本攻击、代码执行、命令执行、文件上传、文件包含、越权访问等常见漏洞。</p> </li><li> <p>自动漏洞挖掘：就是直接使用网站漏洞扫描工具对网站进行漏洞探测了。但是需要注意的是，使用漏扫工具直接对网站进行扫描，因为一下子流量过大，有些网站可能会崩溃。所以一般最好不要使用漏洞扫描工具对网站进行扫描。并且如果未经授权就用漏扫对网站进行扫描还是违法的！</p> <p></p> </li></ul> 
<h6>漏洞验证</h6> 
<p>将发现的漏洞都验证一遍。结合实际情况，搭建模拟环境进行试验。成功后再应用于目标中。</p> 
<ol><li> <p>自动化验证：结合网站漏洞扫描工具提供的结果。</p> </li><li> <p>手工验证：根据网上公开资源进行验证。</p> </li><li> <p>试验验证：自己搭建模拟环境进行验证。</p> </li><li> <p>登陆猜解：有时可以尝试猜解登陆的账号密码等信息。</p> </li><li> <p>业务安全漏洞验证：如发现业务安全漏洞，要进行验证。</p> </li><li> <p>More...</p> </li></ol> 
<h6>常用工具</h6> 
<p>方法</p> 
<ol><li> <p>常见网络安全风险</p> </li><li> <p>OWASP TOP 10 安全风险</p> </li><li> <p>网上公开漏洞库</p> </li><li> <p>网上公开漏洞信息</p> </li><li> <p>网上公开漏洞验证Poc</p> </li><li> <p>More...</p> </li></ol> 
<p>工具</p> 
<ul><li> <p>Kali</p> </li><li> <p>Xray</p> </li><li> <p>Awvs</p> </li><li> <p>Nmap</p> </li><li> <p>Nessus</p> </li><li> <p>AppScan</p> </li><li> <p>OWASP-ZAP</p> </li><li> <p>More...</p> </li></ul> 
<p>常用网站</p> 
<ul><li> <p>Shodan</p> </li><li> <p>ZoomEy</p> </li><li> <p>exploit-db</p> </li><li> <p>傻蛋联网设备搜索</p> </li><li> <p>More...</p> </li></ul> 
<p></p> 
<h5>漏洞利用</h5> 
<p>漏洞利用exploitation获得系统控制权限，优先考虑能直接获取管理员权限。漏洞利用就是执行一次<code>漏洞攻击</code>的过程，而漏洞攻击程序是利用漏洞（vulnerability）实施攻击的一种具体体现。</p> 
<h6>常用工具</h6> 
<p>方法</p> 
<ol><li> <p>精准攻击：准备好上一步探测到的漏洞exp（漏洞利用），用来精准攻击</p> </li><li> <p>绕过防御机制：是否有防火墙等设备，如何绕过</p> </li><li> <p>定制攻击路径：最佳工具路径，根据薄弱入口，高内网权限位置，最终目标**</p> </li><li> <p>绕过检测机制：是否有检测机制，流量监控，杀毒软件，恶意代码检测等（免杀）**</p> </li><li> <p>攻击代码：经过试验得来的代码，包括不限于xss代码，sql注入语句等</p> </li><li> <p>More...</p> </li></ol> 
<p>工具</p> 
<ul><li> <p>Kali</p> </li><li> <p>John</p> </li><li> <p>Hydra</p> </li><li> <p>Nmap</p> </li><li> <p>Medusa</p> </li><li> <p>Metasploit</p> </li><li> <p>Cobalt Strike</p> </li><li> <p>More...</p> </li></ul> 
<p>常用网站</p> 
<ul><li> <p>Shodan</p> </li><li> <p>ZoomEy</p> </li><li> <p>exploit-db</p> </li><li> <p>傻蛋联网设备搜索</p> </li><li> <p>More...</p> </li></ul> 
<p></p> 
<h5>权限提升</h5> 
<h6>常见的提权方式</h6> 
<ol><li> <p>数据库提权</p> </li><li> <p>操作系统提权</p> </li><li> <p>内核漏洞提权</p> </li><li> <p>第三方软件提权</p> </li><li> <p>系统配置不当提权</p> </li><li> <p>More</p> </li></ol> 
<h6>常用工具</h6> 
<p>方法</p> 
<ol><li> <p>服务提权</p> </li><li> <p>SUID提权</p> </li><li> <p>直接提权过UAC</p> </li><li> <p>劫持高权限程序</p> </li><li> <p>定时任务计划提权</p> </li><li> <p>Linux内核溢出提权</p> </li><li> <p>劫持系统的DLL文件</p> </li><li> <p>服务路径权限可控提权</p> </li><li> <p>Windows内核漏洞提权</p> </li><li> <p>系统服务的错误权限配置漏洞</p> </li><li> <p>远程注入Shellcode到傀儡进程</p> </li><li> <p>More...</p> </li></ol> 
<p>工具</p> 
<ul><li> <p>NC</p> </li><li> <p>LCX</p> </li><li> <p>Kali</p> </li><li> <p>John</p> </li><li> <p>Hydra</p> </li><li> <p>Nmap</p> </li><li> <p>wesng</p> </li><li> <p>BeRoot</p> </li><li> <p>UACME</p> </li><li> <p>Medusa</p> </li><li> <p>sdclt.exe</p> </li><li> <p>PowerUP</p> </li><li> <p>Yamabiko</p> </li><li> <p>ElevateKit</p> </li><li> <p>cmstp.exe</p> </li><li> <p>Metasploit</p> </li><li> <p>wscript.exe</p> </li><li> <p>Bypass-UAC</p> </li><li> <p>Cobalt Strike</p> </li><li> <p>eventvwr.exe</p> </li><li> <p>SilentCleanup</p> </li><li> <p>WinSystemHelper</p> </li><li> <p>linux-kernel-exploits</p> </li><li> <p>windows-kernel-exploits</p> </li><li> <p>Windows-Exploit-Suggester</p> </li><li> <p>More...</p> </li></ul> 
<h6>常用网站</h6> 
<ul><li> <p>Github</p> </li><li> <p>exploit-db</p> </li><li> <p>More...</p> </li></ul> 
<p></p> 
<h5>内网渗透</h5> 
<p>内网渗透的环境可以分为两种：域环境和非域环境。</p> 
<ul><li> <p>域环境：将网络中多台计算机逻辑上组织到一起，进行集中管理，这种区别于工作组的逻辑环境叫做域，域是组织与存储资源的核心管理单元，在域中，至少有一台域控制器，域控制器中保存着整个域的用户帐号和安全数据库。</p> </li><li> <p>非域环境：在拿到一台服务器的时候，拿下内网更多的服务器，更有用的信息。<code>根据客户需求</code>是否进行扩大渗透！</p> </li></ul> 
<h6>常用工具</h6> 
<p>方法</p> 
<ol><li> <p>ARP欺骗</p> </li><li> <p>内网探测</p> </li><li> <p>密码破解</p> </li><li> <p>网络设备漏洞</p> </li><li> <p>域用户hash提取</p> </li><li> <p>More...</p> </li></ol> 
<p>工具</p> 
<ul><li> <p>NC</p> </li><li> <p>LCX</p> </li><li> <p>Kali</p> </li><li> <p>John</p> </li><li> <p>Hydra</p> </li><li> <p>Nmap</p> </li><li> <p>Nessus</p> </li><li> <p>pwdump</p> </li><li> <p>mimikatz</p> </li><li> <p>Metasploit</p> </li><li> <p>Cobalt Strike</p> </li><li> <p>More...</p> <p></p> </li></ul> 
<h5>痕迹清理</h5> 
<p>渗透测试的目的是模拟黑客攻击来发现系统的漏洞和脆弱之处。而这里提到的完成测试后清理痕迹已经有点像是入侵的范畴了。一般只有在一些<code>实战攻防演习</code>中需要使用，想完全清除痕迹是比较困难的，所以一般都以伪装为主，代理IP、虚拟机、跳板等方式。根据客户需求是否需要清除痕迹。</p> 
<ol><li> <p>日志清理</p> </li><li> <p>Webshell</p> </li><li> <p>一句话木马</p> </li><li> <p>登陆记录清理</p> </li><li> <p>提权脚本或程序</p> </li><li> <p>More...</p> </li></ol> 
<h6>常用工具</h6> 
<p>方法</p> 
<ul><li> <p>获得日志信息</p> </li><li> <p>导出日志文件</p> </li><li> <p>日志文件覆盖</p> </li><li> <p>3389登陆记录清除</p> </li><li> <p>破坏Windows日志记录功能（攻防比赛中使用）</p> </li><li> <p>More...</p> </li></ul> 
<p>工具</p> 
<ul><li> <p>Metasploit</p> </li><li> <p>Invoke-Phant0m</p> </li><li> <p>Windwos-EventLog-Bypass</p> </li><li> <p>More..</p> </li></ul> 
<p></p> 
<h5>撰写报告</h5> 
<p>报告内容在于精简。针对本次渗透测试中发现的安全问题，在整个渗透过程中发现了那些漏洞，有什么危害，使用了什么方法、工具等，利用过程多截图。</p> 
<p>报告规范</p> 
<ol><li> <p>概述（渗透测试范围、渗透测试主要内容）</p> </li><li> <p>脆弱性分析方法</p> </li><li> <p>渗透测试过程描述</p> </li><li> <p>分析结果与建议</p> </li><li> <p>More...</p> </li></ol> 
<h6>信息整理</h6> 
<p>渗透过程中收集到的一切信息</p> 
<h6>渗透工具</h6> 
<p>渗透过程中用到的代码、POC，EXP等</p> 
<h6>漏洞信息</h6> 
<p>渗透过程中遇到的各种漏洞，各种脆弱位置信息</p> 
<h6>客户需求</h6> 
<p>按照之前第一步跟客户确定好的范围，需求来整理资料，并将资料形成报告</p> 
<h6>分析总结</h6> 
<p>要对漏洞成因，验证过程和带来危害进行分析</p> 
<h6>安全建议</h6> 
<p>当然要对所有产生的问题提出合理高效安全的解决办法</p> 
<p></p> 
<h5>流程总结</h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c40d42a1ba026fe31277ede55213a3a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络与系统安全概述</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ad43e4f4ecb064bf757c9ee90398e0de/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">了解常见的漏洞类型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>