<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å‘é€é‚®ç®±éªŒè¯ç ã€spring bootã€‘ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="å‘é€é‚®ç®±éªŒè¯ç ã€spring bootã€‘" />
<meta property="og:description" content="â­å‰è¨€â­ â€»â€»â€»å¤§å®¶å¥½ï¼æˆ‘æ˜¯åŒå­¦ã€–æ£®ã€—ï¼Œä¸€åè®¡ç®—æœºçˆ±å¥½è€…ï¼Œä»Šå¤©è®©æˆ‘ä»¬è¿›å…¥å­¦ä¹ æ¨¡å¼ã€‚è‹¥æœ‰é”™è¯¯ï¼Œè¯·å¤šå¤šæŒ‡æ•™ã€‚æ›´å¤šæœ‰è¶£çš„ä»£ç è¯·ç§»æ­¥Gitee
ğŸ‘ ç‚¹èµ â­ æ”¶è— ğŸ“ç•™è¨€ éƒ½æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§çš„åŠ¨åŠ›ï¼
1. æ€ç»´å¯¼å›¾ 2. è·å–é‚®ç®±æˆæƒç  2.1 1. å¼€å¯POP3/SMTPæœåŠ¡ ç™»å½•QQé‚®ç®± --&gt; è®¾ç½® --&gt; è´¦æˆ· å‘ä¸‹æ»‘åŠ¨æ»šåŠ¨æ¡ï¼Œæ‰¾åˆ°è´¦æˆ·é¡µé¢ä¸‹æ–¹çš„ POP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡ä¸€æ ï¼Œç‚¹å‡»ç®¡ç†æœåŠ¡
ç¬¬ä¸€æ¬¡ä¼šè®©ä½ ç»‘å®šæ‰‹æœºåå†è¿›è¡Œæ“ä½œ æŒ‰è¦æ±‚è¿›è¡Œæ“ä½œå°±å¥½ï¼› è¿›å…¥å®‰å…¨æ¨¡å¼ï¼Œç‚¹å‡»ç”Ÿæˆæˆæƒç ï¼› çŸ­ä¿¡éªŒè¯
éªŒè¯æˆåŠŸä¼šç”Ÿæˆæˆæƒç 
ä¸€å®šè¦å¤åˆ¶æˆæƒç ï¼Œå¹¶ä¿å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ï¼›åˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ï¼›
3. åˆ›å»º Spring Boot é¡¹ç›® 3.1 å¼•å…¥ä¾èµ– &lt;!-- å‘é€é‚®ä»¶ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt; &lt;/dependency&gt; æ·»åŠ ä¾èµ–åä¸€å®šè¦é‡æ–° ReLoad ä¸€ä¸‹ï¼›
3.2 é…ç½®application.ymlæ–‡ä»¶ Spring: # é‚®ç®±åŸºæœ¬é…ç½® mail: # é…ç½® smtp æœåŠ¡ä¸»æœºåœ°å€ # qq é‚®ç®± smtp.qq.com ç«¯å£å· 465 æˆ– 587 # sina smtp.sina.com # aliyun smtp.aliyun.com # 163 smtp." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1057147f6557c44bee912aeb29039c98/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-02T17:07:08+08:00" />
<meta property="article:modified_time" content="2023-07-02T17:07:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å‘é€é‚®ç®±éªŒè¯ç ã€spring bootã€‘</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>â­å‰è¨€â­</h2> 
<blockquote> 
 <p>â€»â€»â€»å¤§å®¶å¥½ï¼æˆ‘æ˜¯åŒå­¦ã€–æ£®ã€—ï¼Œä¸€åè®¡ç®—æœºçˆ±å¥½è€…ï¼Œä»Šå¤©è®©æˆ‘ä»¬è¿›å…¥å­¦ä¹ æ¨¡å¼ã€‚è‹¥æœ‰é”™è¯¯ï¼Œè¯·å¤šå¤šæŒ‡æ•™ã€‚æ›´å¤šæœ‰è¶£çš„ä»£ç è¯·ç§»æ­¥<a href="https://gitee.com/never-give-in" rel="nofollow">Gitee</a><br> ğŸ‘ ç‚¹èµ â­ æ”¶è— ğŸ“ç•™è¨€ éƒ½æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§çš„åŠ¨åŠ›ï¼</p> 
</blockquote> 
<h2><a id="1__6"></a>1. æ€ç»´å¯¼å›¾</h2> 
<p><img src="https://images2.imgbox.com/73/ae/kcxJB0Wx_o.png" alt="å‘é€é‚®ç®±éªŒè¯ç çš„æ€ç»´å¯¼å›¾"></p> 
<h2><a id="2__10"></a>2. è·å–é‚®ç®±æˆæƒç </h2> 
<h3><a id="21_1_POP3SMTP_11"></a>2.1 1. å¼€å¯POP3/SMTPæœåŠ¡</h3> 
<blockquote> 
 <ul><li><strong>ç™»å½•QQé‚®ç®± --&gt; è®¾ç½® --&gt; è´¦æˆ·</strong></li></ul> 
</blockquote> 
<p><img src="https://images2.imgbox.com/66/33/s0LBqTmg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <ul><li><strong>å‘ä¸‹æ»‘åŠ¨æ»šåŠ¨æ¡ï¼Œæ‰¾åˆ°è´¦æˆ·é¡µé¢ä¸‹æ–¹çš„ POP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡ä¸€æ ï¼Œç‚¹å‡»<em>ç®¡ç†æœåŠ¡</em></strong><br> <img src="https://images2.imgbox.com/37/1c/H2nIBMZy_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ul> 
</blockquote> 
<blockquote> 
 <ul><li>ç¬¬ä¸€æ¬¡ä¼šè®©ä½ ç»‘å®šæ‰‹æœºåå†è¿›è¡Œæ“ä½œ æŒ‰è¦æ±‚è¿›è¡Œæ“ä½œå°±å¥½ï¼›</li></ul> 
</blockquote> 
<blockquote> 
 <ul><li>è¿›å…¥å®‰å…¨æ¨¡å¼ï¼Œç‚¹å‡»ç”Ÿæˆæˆæƒç ï¼›</li></ul> 
 <p><img src="https://images2.imgbox.com/19/c3/bKNnAXBq_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
</blockquote> 
<blockquote> 
 <ul><li>çŸ­ä¿¡éªŒè¯<br> <img src="https://images2.imgbox.com/86/26/a9yBKr8z_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ul> 
</blockquote> 
<blockquote> 
 <ul><li>éªŒè¯æˆåŠŸä¼šç”Ÿæˆæˆæƒç <br> <img src="https://images2.imgbox.com/05/94/1ERD7e8x_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ul> 
</blockquote> 
<blockquote> 
 <p>ä¸€å®šè¦å¤åˆ¶æˆæƒç ï¼Œå¹¶ä¿å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ï¼›åˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ï¼›</p> 
</blockquote> 
<h2><a id="3__Spring_Boot__37"></a>3. åˆ›å»º Spring Boot é¡¹ç›®</h2> 
<h3><a id="31__39"></a>3.1 å¼•å…¥ä¾èµ–</h3> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--   å‘é€é‚®ä»¶     --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<blockquote> 
 <p>æ·»åŠ ä¾èµ–åä¸€å®šè¦é‡æ–° ReLoad ä¸€ä¸‹ï¼›</p> 
 <p><img src="https://images2.imgbox.com/9c/05/DpB79acW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
</blockquote> 
<h3><a id="32_applicationyml_52"></a>3.2 é…ç½®application.ymlæ–‡ä»¶</h3> 
<pre><code class="prism language-yaml"><span class="token key atrule">Spring</span><span class="token punctuation">:</span>
  <span class="token comment"># é‚®ç®±åŸºæœ¬é…ç½®</span>
  <span class="token key atrule">mail</span><span class="token punctuation">:</span>
    <span class="token comment"># é…ç½® smtp æœåŠ¡ä¸»æœºåœ°å€</span>
    <span class="token comment"># qq é‚®ç®±     smtp.qq.com    ç«¯å£å· 465 æˆ– 587</span>
    <span class="token comment"># sina       smtp.sina.com</span>
    <span class="token comment"># aliyun     smtp.aliyun.com</span>
    <span class="token comment"># 163        smtp.163.com   ç«¯å£å· 465 æˆ– 994</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> smtp.qq.com
    <span class="token comment"># å‘é€è€…é‚®ç®±</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> xxxxxxxx@qq.com
    <span class="token comment"># åœ¨é‚®ç®±å†…ç”³è¯·çš„æˆæƒç </span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> xttfwlhoyguxbacg
    <span class="token comment"># ç«¯å£å·</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">587</span>
    <span class="token comment"># é»˜è®¤çš„é‚®ä»¶ç¼–ç ä¸ºUTF-8</span>
    <span class="token key atrule">default-encoding</span><span class="token punctuation">:</span> UTF<span class="token punctuation">-</span><span class="token number">8</span>
    <span class="token comment"># å…¶ä»–å‚æ•°</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">mail</span><span class="token punctuation">:</span>
          <span class="token comment"># é…ç½®SSL åŠ å¯†å·¥å‚</span>
        <span class="token key atrule">smtp</span><span class="token punctuation">:</span>
          <span class="token key atrule">ssl</span><span class="token punctuation">:</span>
            <span class="token comment"># æœ¬åœ°æµ‹è¯•ï¼Œ å…ˆæ”¾å¼€ssl</span>
            <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
            <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token comment">#å¼€å¯debugæ¨¡å¼ï¼Œè¿™æ ·é‚®ä»¶å‘é€è¿‡ç¨‹çš„æ—¥å¿—ä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿æ’æŸ¥é”™è¯¯</span>
        <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> 
<blockquote> 
 <ul><li>è¿™é‡Œæ³¨æ„ä¸€ä¸‹port 465æœ‰æ—¶ä¼šæŠ¥é”™ï¼Œæ¢ä¸€ä¸ªå°±å¥½ï¼›</li><li>æŠŠusername æ”¹æˆè‡ªå·±çš„QQé‚®ç®±å·ï¼ŒæŠŠpassword æ¢æˆåˆšåˆšæˆ‘ä»¬ç”³è¯·çš„æˆæƒç ï¼ˆä¸æ˜¯QQå¯†ç å“Ÿï¼‰</li></ul> 
</blockquote> 
<h3><a id="33_ToEmail_88"></a>3.3 å®ä½“ç±»ToEmail</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @version IntelliJ IDEA || java version 11.
 * @Author: Oliver
 * @Description: é‚®ç®±éªŒè¯ç å®ä½“ç±»
 * @Date: 2023-07-02
 * @Time: 14:21
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span> <span class="token comment">//ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰ç±»å­—æ®µçš„æ„é€ å‡½æ•°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ToEmail</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     *  é‚®ä»¶æ¥å—æ–¹
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tos<span class="token punctuation">;</span>
    <span class="token comment">/**
     *      é‚®ä»¶ä¸»é¢˜
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> subject<span class="token punctuation">;</span>

    <span class="token comment">/**
     * é‚®ä»¶å†…å®¹
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="34_6_124"></a>3.4 ç”Ÿæˆ6ä½éªŒè¯ç </h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">SecureRandom</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @version IntelliJ IDEA || java version 11.
 * @Author: Oliver
 * @Description: ç”ŸæˆéªŒè¯ç å·¥å…·ç±»
 * @Date: 2023-07-02
 * @Time: 14:35
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VerCodeGenerateUtil</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * éªŒè¯ç åŒ…å«çš„å­—æ®µ
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SYMBOLS <span class="token operator">=</span> <span class="token string">"0123456789ABCDEFGHIGKLMNOPQRSTUVWXYZ"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Random</span> RAND <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * ç”Ÿæˆ 6 ä½æ•°çš„éšæœºæ•°å­—
     * @return {@link String éªŒè¯ç }
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateVerCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> code<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            code<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> SYMBOLS<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>RAND<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>SYMBOLS<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//  RAND.nextInt(SYMBOLS.length()) ç”Ÿæˆä¸€ä¸ªéšæœºçš„ç´¢å¼•å€¼;</span>
            <span class="token comment">//  RAND.nextInt(n) ç”Ÿæˆä¸€ä¸ª0åˆ°n-1ä¹‹é—´çš„éšæœºæ•´æ•°;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>SecureRandom() å’Œ Random()</strong></p> 
 <ul><li><code>java.util.Random</code>æ˜¯ä¸€ä¸ª<strong>ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</strong>ï¼Œå®ƒä½¿ç”¨çº¿æ€§åŒä½™ç®—æ³•ç”Ÿæˆéšæœºæ•°ã€‚ 
   <ul><li>è¿™ç§ç®—æ³•è™½ç„¶èƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆéšæœºæ•°ï¼Œä½†æ˜¯å®ƒçš„éšæœºæ€§å¹¶ä¸å¤Ÿå¼ºï¼Œå› æ­¤ä¸é€‚ç”¨äºå®‰å…¨ç›¸å…³çš„åœºæ™¯ã€‚åœ¨Javaä¸­ï¼Œä½¿ç”¨java.util.Randomç”Ÿæˆçš„éšæœºæ•°åªèƒ½ç”¨äºä¸€äº›éå®‰å…¨æ€§çš„åœºæ™¯ï¼Œä¾‹å¦‚æ¨¡æ‹Ÿæ•°æ®æˆ–æ¸¸æˆç­‰ã€‚</li></ul> </li><li><code>java.security.SecureRandom</code>æ˜¯ä¸€ä¸ª<strong>å¼ºéšæœºæ•°ç”Ÿæˆå™¨</strong>ï¼Œå®ƒä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆç®—æ³•ç”Ÿæˆéšæœºæ•°ã€‚ 
   <ul><li>è¿™ç§ç®—æ³•çš„éšæœºæ€§æ›´åŠ å¼ºå¤§å’Œå®‰å…¨ï¼Œå¯ä»¥ç”¨äºå®‰å…¨ç›¸å…³çš„åœºæ™¯ï¼Œä¾‹å¦‚å¯†ç å­¦æˆ–å®‰å…¨é€šä¿¡ç­‰ã€‚åœ¨Javaä¸­ï¼Œä½¿ç”¨<code>java.security.SecureRandom</code>ç”Ÿæˆçš„éšæœºæ•°å¯ä»¥ç”¨äºå®‰å…¨æ€§è¦æ±‚æ›´é«˜çš„åœºæ™¯ã€‚</li></ul> </li></ul> 
</blockquote> 
<h3><a id="35_MailService_168"></a>3.5 é‚®ä»¶æœåŠ¡å™¨ç±»MailService</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>javamail<span class="token punctuation">.</span></span><span class="token class-name">JavaMailSenderImpl</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>mail<span class="token punctuation">.</span>javamail<span class="token punctuation">.</span></span><span class="token class-name">MimeMessageHelper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>mail<span class="token punctuation">.</span></span><span class="token class-name">MessagingException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * æ³¨å…¥é‚®ä»¶å·¥å…·ç±»
     */</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">JavaMailSenderImpl</span> javaMailSender<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${spring.mail.username}"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sendMailer<span class="token punctuation">;</span>

    <span class="token comment">/**
     * æ£€æµ‹é‚®ä»¶ä¿¡æ¯ç±»
     * @param receiveEmail æ¥æ”¶è€…
     * @param subject  ä¸»é¢˜
     * @param emailMsg å†…å®¹
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">checkMail</span><span class="token punctuation">(</span><span class="token class-name">String</span> receiveEmail<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> emailMsg<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//  StringUtils éœ€è¦å¼•å…¥  commons-lang3 ä¾èµ–</span>
        <span class="token comment">//  å¯ä»¥ç”¨ receiveEmail == null || receiveEmail.isEmpty() æ¥ä»£æ›¿</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>receiveEmail<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é‚®ä»¶æ”¶ä»¶äººä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é‚®ä»¶ä¸»é¢˜ä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>emailMsg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"é‚®ä»¶å†…å®¹ä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * å‘é€çº¯æ–‡æœ¬é‚®ä»¶
     * @param receiveEmail æ¥æ”¶è€…
     * @param subject  ä¸»é¢˜
     * @param emailMsg å†…å®¹
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">sendTextMail</span><span class="token punctuation">(</span><span class="token class-name">String</span> receiveEmail<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">,</span> <span class="token class-name">String</span> emailMsg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// å‚æ•°æ£€æŸ¥</span>
        <span class="token function">checkMail</span><span class="token punctuation">(</span>receiveEmail<span class="token punctuation">,</span> subject<span class="token punctuation">,</span> emailMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// true ä»£è¡¨æ”¯æŒå¤æ‚çš„ç±»å‹</span>
            <span class="token class-name">MimeMessageHelper</span> mimeMessageHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‚®ä»¶å‘ä»¶äºº</span>
            mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span>sendMailer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‚®ä»¶æ”¶ä»¶äºº</span>
            mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>receiveEmail<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‚®ä»¶ä¸»é¢˜</span>
            mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‚®ä»¶å†…å®¹</span>
            mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>emailMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// é‚®ä»¶å‘é€æ—¶é—´</span>
            mimeMessageHelper<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
            <span class="token comment">// å‘é€é‚®ä»¶</span>
            javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessageHelper<span class="token punctuation">.</span><span class="token function">getMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‘é€é‚®ä»¶æˆåŠŸ: "</span> <span class="token operator">+</span> sendMailer <span class="token operator">+</span> <span class="token string">"--&gt;"</span> <span class="token operator">+</span> receiveEmail<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MessagingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‘é€é‚®ä»¶å¤±è´¥: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="36_EmailController_252"></a>3.6 EmailController</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">AjaxResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">ToEmail</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">MailService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>sendemail<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">VerCodeGenerateUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @version IntelliJ IDEA || java version 11.
 * @Author: Oliver
 * @Description: é‚®ç®±éªŒè¯ç 
 * @Date: 2023-07-02
 * @Time: 15:06
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/email"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmailController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">MailService</span> mailService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/sendEmail"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token class-name">ToEmail</span> toEmail<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>toEmail <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> toEmail<span class="token punctuation">.</span><span class="token function">getTos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"å‚æ•°é”™è¯¯!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        toEmail<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"ä½ æœ¬æ¬¡çš„éªŒè¯ç æ˜¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–éªŒè¯ç </span>
        <span class="token class-name">String</span> verCode <span class="token operator">=</span> <span class="token class-name">VerCodeGenerateUtil</span><span class="token punctuation">.</span><span class="token function">generateVerCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">"å°Šæ•¬çš„xxx,æ‚¨å¥½:\n"</span>
                <span class="token operator">+</span> <span class="token string">"\næœ¬æ¬¡è¯·æ±‚çš„é‚®ä»¶éªŒè¯ç ä¸º:"</span> <span class="token operator">+</span> verCode <span class="token operator">+</span> <span class="token string">",æœ¬éªŒè¯ç  5 åˆ†é’Ÿå†…æ•ˆï¼Œè¯·åŠæ—¶è¾“å…¥ã€‚ï¼ˆè¯·å‹¿æ³„éœ²æ­¤éªŒè¯ç ï¼‰\n"</span>
                <span class="token operator">+</span> <span class="token string">"\nå¦‚éæœ¬äººæ“ä½œï¼Œè¯·å¿½ç•¥è¯¥é‚®ä»¶ã€‚\n(è¿™æ˜¯ä¸€å°é€šè¿‡è‡ªåŠ¨å‘é€çš„é‚®ä»¶ï¼Œè¯·ä¸è¦ç›´æ¥å›å¤ï¼‰"</span><span class="token punctuation">;</span>
        toEmail<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Boolean</span> check <span class="token operator">=</span> mailService<span class="token punctuation">.</span><span class="token function">sendTextMail</span><span class="token punctuation">(</span>toEmail<span class="token punctuation">.</span><span class="token function">getTos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toEmail<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toEmail<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"å‘é€æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"å‘é€å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <ul><li>AjaxResult ç»Ÿä¸€æ ¼å¼è¿”å›ç±»ï¼ŒåŒ…å« çŠ¶æ€ç  code ï¼Œ çŠ¶æ€ç æè¿°ä¿¡æ¯ msgï¼Œ è¿”å›çš„æ•°æ® dataï¼›</li></ul> 
</blockquote> 
<h2><a id="4__307"></a>4 åŠŸèƒ½æµ‹è¯•</h2> 
<p>ä½¿ç”¨ PostManæµ‹è¯•</p> 
<p><img src="https://images2.imgbox.com/d0/1b/p5iDewXD_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p>å…¶ä¸­ tos çš„ val å€¼æ˜¯è¦æ”¶ä»¶äººçš„é‚®ç®±ï¼›</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/2b/2e/tXAeAGZz_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e35cbb825a6ef2be47d3a84cf8d57d34/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">20230702 æ­£æ€åˆ†å¸ƒçš„å‡ ä¸ªæ€§è´¨</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/730ae093b1c9d78f151cefe3b78fa253/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">MOBAXtermè½¯ä»¶ä¸Šå®ç°ä¸€ä¸ªå‘½ä»¤å¤šä¸ªç»ˆç«¯åŒæ—¶æ‰§è¡Œ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>