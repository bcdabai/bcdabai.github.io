<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mac虚拟机安装配置qt遇到的坑 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mac虚拟机安装配置qt遇到的坑" />
<meta property="og:description" content="本人的环境大致如下：
VMware Workstation 16pro
Mac镜像 macOS.Mojave10.14.6 （后面在系统中升级到了 Sonoma 14.0）
Qt5.9.6
Xcode15.0
问题1：
环境都安装好后，qt创建工程一直只有.pro文件，看不到头文件和cpp那些，并且也无法创建新文件或添加现有文件。然后报错：
Project ERROR: failed to parse default search paths from compiler output.
这个问题大多数博客都是说Kits编译器的问题，不过我配置了之后都正常的，还是不行。也由于本身在mac上搞这块的比较少，资料也找不到多少。
后来问了同事，然后他在外网英文网站帮我查，大概是这个链接 https://bugreports.qt.io/browse/QTBUG-117519 。
大概来说的话就是 Qt 要根据那个文件里的一些定义来搭建编译环境，但是那个文件写的有 BUG。这个我也不清楚为啥，并且我用的也是官方提供的安装包安装的qt。然后帮我把Qt安装目录下的 mkspecs/features/toolchain.prf 文件里的内容进行了修改。
之后我关掉qt creator重新打开，这次头文件、cpp那些都正常显示出来了。
问题2：
虽然前面文件能正常显示出来了，但是编译运行却跑不起来。报错如下：
This application failed to start because it could not find or load the Qt platform plugin “cocoa” in “”.
Reinstalling the application may fix this problem.
程序异常结束。
这个好像是说在mac使用qt需要这个cocoa依赖，然后找不到吧。但是我在qt目录下，/Users/zhaoyuhui/Desktop/qt5.9.6/5.9.6/clang_64/plugins/platforms，发现是有那些相应的文件的。
于是想尝试添加环境变量，使用在终端输入 export QT_PLUGIN_PATH=路径 或者在 /etc/paths 中添加以上路径也不行。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dce749495a7309ec1234645c8bc05034/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-19T12:45:08+08:00" />
<meta property="article:modified_time" content="2023-10-19T12:45:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mac虚拟机安装配置qt遇到的坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本人的环境大致如下：<br> VMware Workstation 16pro<br> Mac镜像 macOS.Mojave10.14.6 （后面在系统中升级到了 Sonoma 14.0）<br> Qt5.9.6<br> Xcode15.0</p> 
<br> 
<p><strong>问题1：<br> 环境都安装好后，qt创建工程一直只有.pro文件，看不到头文件和cpp那些，并且也无法创建新文件或添加现有文件。然后报错：<br> <font color="red">Project ERROR: failed to parse default search paths from compiler output.</font></strong></p> 
<p><br>这个问题大多数博客都是说Kits编译器的问题，不过我配置了之后都正常的，还是不行。也由于本身在mac上搞这块的比较少，资料也找不到多少。<br> <font color="blue">后来问了同事，然后他在外网英文网站帮我查，大概是这个链接 https://bugreports.qt.io/browse/QTBUG-117519 。<br> 大概来说的话就是 Qt 要根据那个文件里的一些定义来搭建编译环境，但是那个文件写的有 BUG。这个我也不清楚为啥，并且我用的也是官方提供的安装包安装的qt。然后帮我把Qt安装目录下的 mkspecs/features/toolchain.prf 文件里的内容进行了修改。<br> <img src="https://images2.imgbox.com/35/00/KI9OFB5M_o.png" alt="在这里插入图片描述"><br> 之后我关掉qt creator重新打开，这次头文件、cpp那些都正常显示出来了。</font></p> 
<p><br><br><br><br> <strong>问题2：<br> 虽然前面文件能正常显示出来了，但是编译运行却跑不起来。报错如下：<br> <font color="red">This application failed to start because it could not find or load the Qt platform plugin “cocoa” in “”.<br> Reinstalling the application may fix this problem.<br> 程序异常结束。</font></strong></p> 
<br> 
<p>这个好像是说在mac使用qt需要这个cocoa依赖，然后找不到吧。但是我在qt目录下，/Users/zhaoyuhui/Desktop/qt5.9.6/5.9.6/clang_64/plugins/platforms，发现是有那些相应的文件的。<br> <img src="https://images2.imgbox.com/ae/16/kUZm4HAd_o.png" alt="在这里插入图片描述"><br> 于是想尝试添加环境变量，使用在终端输入 <code>export QT_PLUGIN_PATH=路径</code> 或者在 /etc/paths 中添加以上路径也不行。<br> 最后是问了chatgpt，是这样说的：<br> <img src="https://images2.imgbox.com/45/ad/fRkNA4Le_o.png" alt="在这里插入图片描述"><br> 于是在项目编译器的Run里像这样配置，程序就能正常编译运行跑起来了。</p> 
<p><img src="https://images2.imgbox.com/94/aa/El2OXh7F_o.png" alt="不过我在也尝试了使用"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/77298cbcee29d4cde762e712c117fcac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">浅谈单例模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69f61b0372859e387c000de9cd8ad8f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RV1126 WIFI移植记录AP6256</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>