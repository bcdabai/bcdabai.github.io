<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue中eventBus的实现，以及开发基础常用方法记录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue中eventBus的实现，以及开发基础常用方法记录" />
<meta property="og:description" content="~~~~~~~~~~~~~~~~~~~~~~~BUS实现步骤~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
首先在项目目录中创建bus.js，
2.并且引入vue
import Vue from &#39;vue&#39;; const bus = new Vue(); export default bus; 3.在发起通讯组件跟接收通讯组件中引入bus.js
import bus from &#39;@/utils/bus.js&#39; 4.首先在发起通讯的组件中去注册事件并且发射出去 根据需要去判断是否传参。
// 需要传参的情况下 bus.$emit(&#39;name&#39;,obj) // 无需传参的情况 bus.$emit(&#39;name&#39;) 5.在接收的组件中去接受事件
bus.$on(&#39;name&#39;,data=&gt;{ //执行对应接收组件传参的方法 }) 以上为兄弟组件之间的通信bus
不过在注册bus事件的时候尽量名称保持不一致不然他会执行多个相同名字的方法，根据你注册发射事件的事件去先后执行，一般正常情况下用的不会特别多，大部分都是父子组件通信
~~~~~~~~~~~~~~~~~~~~~~~常用事件~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
// eltable表頭加星號 export function renderHeader(h, { column }) { return [ h(&#39;span&#39;, { style: &#39;color:#ff4949;margin-right:4px&#39;, },&#39;*&#39;), h(&#39;span&#39;, column.label), ]; } // 文件地址拼接前綴 export function spliceFileUrl(filePath) { if( filePath.indexOf(&#34;http&#34;||&#34;https&#34;)!=-1){ return filePath; } return this.global.fileUrl &#43; filePath; } // 根據value獲取label export function getArrayLabelByValue(enumArr,selValue,label,value) { let config = { label: label || &#39;label&#39;, value: value || &#39;value&#39;, }; var str = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/12f12b465465079d3c0a19f50ee25a0c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-12T10:13:53+08:00" />
<meta property="article:modified_time" content="2023-01-12T10:13:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue中eventBus的实现，以及开发基础常用方法记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="">~~~~~~~~~~~~~~~~~~~~~~~BUS实现步骤~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>首先在项目目录中创建bus.js，</p></li></ol> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:783;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:64.49553%;height:0;"> 
    <img src="https://images2.imgbox.com/30/1c/fmjiwcQ8_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-64.49553%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""></p> 
 <p style="">2.并且引入vue</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">import Vue from 'vue';
const bus = new Vue();
export default bus;</code></pre> 
 <p style="">3.在发起通讯组件跟接收通讯组件中引入bus.js</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">import bus from '@/utils/bus.js'</code></pre> 
 <p style="">4.首先在发起通讯的组件中去注册事件并且发射出去 根据需要去判断是否传参。</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">//  需要传参的情况下
bus.$emit('name',obj)
//  无需传参的情况
bus.$emit('name')</code></pre> 
 <p style="">5.在接收的组件中去接受事件</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">bus.$on('name',data=&gt;{
    //执行对应接收组件传参的方法
})</code></pre> 
 <p style="">以上为兄弟组件之间的通信bus</p> 
 <p style="">不过在注册bus事件的时候尽量名称保持不一致不然他会执行多个相同名字的方法，根据你注册发射事件的事件去先后执行，一般正常情况下用的不会特别多，大部分都是父子组件通信</p> 
 <p style=""></p> 
 <p style="">~~~~~~~~~~~~~~~~~~~~~~~常用事件~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">// eltable表頭加星號
export function renderHeader(h, { column }) {
  return [
    h('span', {
      style: 'color:#ff4949;margin-right:4px',
    },'*'),
    h('span', column.label),
  ];
}

// 文件地址拼接前綴
export function spliceFileUrl(filePath) {
if( filePath.indexOf("http"||"https")!=-1){
  return filePath;
}
  return this.global.fileUrl + filePath;
}

// 根據value獲取label
export function  getArrayLabelByValue(enumArr,selValue,label,value) {
    let config = {
        label: label || 'label',
        value: value || 'value',
    };
  var str = "";
  if(enumArr!=undefined&amp;&amp;enumArr!=null&amp;&amp;enumArr.length&gt;0){
  enumArr.map((item) =&gt; {
    if (item[config.value] == selValue) {
      str = item[config.label];
    }
    });
  }
  return str;
}

// 根據value獲取item
export function  getArrayItemByValue(enumArr,selValue,value) {
    let config = {
        value: value || 'value',
    };
  var itemSel = {};
  if(enumArr!=undefined&amp;&amp;enumArr!=null&amp;&amp;enumArr.length&gt;0){
  enumArr.map((item) =&gt; {
    if (item[config.value] == selValue) {
      itemSel = item;
    }
    });
  }
  return itemSel;
}

// 獲取對象數組某個字段的數組
export function getKeyArr(objArr,key) {
    let config = {
        key: key || 'id',
    };
  var arr = [];
  if(objArr!=undefined&amp;&amp;objArr!=null&amp;&amp;objArr.length&gt;0){
    objArr.map((item) =&gt; {
      arr.push(item[config.key])
    });
  }
  return arr;
}

// Y,N轉為是否
export function formatYN(str) {
  var newStr = "";
  if(str=="Y"){
    newStr="是"
  }else if(str=="N"){
    newStr="否"
  }
  return newStr;
}

//通用下载方法
export  function download(url,params,filename) {
  downloadLoadingInstance = Loading.service({ text: "正在下载数据，请稍候", spinner: "el-icon-loading", background: "rgba(0, 0, 0, 0.7)", })
  let response;
  if(params){
    response  =  service.post(url, params, {
      transformRequest: [(params) =&gt; { return tansParams(params) }],
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      responseType: 'blob'
    })
  }else{
    response  =  service.get(url, {
      // transformRequest: [(params) =&gt; { return tansParams(params) }],
      // headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      responseType: 'blob'
    })
  }
  return response.then(async (data) =&gt; {
    const isLogin = await blobValidate(data);
    if (isLogin) {
      const blob = new Blob([data])
      saveAs(blob, filename)
    } else {
      const resText = await data.text();
      const rspObj = JSON.parse(resText);
      const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']
      Message.error(errMsg);
    }
    downloadLoadingInstance.close();
  }).catch((r) =&gt; {
    console.error(r)
    Message.error('下载文件出现错误，请联系管理员！')
    downloadLoadingInstance.close();
  })
}





</code></pre> 
 <p style="">注意通用方法的调用</p> 
 <p style="">get不需要传参 post需要传参</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">//post
this.download(
  `/account/amount/export/${this.queryParam.yearMonthStr}`,
   {},
   `下载附件名称.xls`
);
//get
this.download(
  `/account/amount/export/${this.queryParam.yearMonthStr}`,`下载附件名称.xls`
);</code></pre> 
 <p style=""></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/292100edc4674ec9b3a529761c228f5a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Git 从入门到精通】2023最新版的Git安装与卸载每一步附详细讲解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/29f15e8185dce41d1f36c22b76810c25/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">根据pom.xml文件下载依赖</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>