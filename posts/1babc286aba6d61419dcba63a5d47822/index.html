<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Ubuntu20.10中搭建TFTP服务器 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Ubuntu20.10中搭建TFTP服务器" />
<meta property="og:description" content="TFTP（Trivial File Transfer Protocol）是用来下载远程文件的最简单的网络协议，它基于UDP协议而实现.
一、安装：
sudo apt-get install tftp-hpa tftpd-hpa tftp-hpa 为客户端，tftpd-hpa 为服务端。
二、配置：
修改tftpd-hpa相应的配置文件
sudo vi /etc/default/tftpd-hpa
原始的内容如下：
#/etc/default/tftpd-hpa TFTP_USERNAME=&#34;tftp&#34; TFTP_DIRECTORY=&#34;/svr/tftp&#34; TFTP_ADDRESS=&#34;:69&#34; TFTP_OPTIONS=&#34;--secure&#34; 修改后：
# /etc/default/tftpd-hpa TFTP_USERNAME=&#34;tftp&#34; TFTP_DIRECTORY=&#34;/svr/tftp&#34; TFTP_ADDRESS=&#34;:69&#34; TFTP_OPTIONS=&#34;-l -c -s&#34; 说明：
TFTP_USERNAME：tftp帐号，
TFTP_DIRECTORY：tftp根目录，
TFTP_ADDRESS：地址与端口号，
TFTP_OPTIONS：启动参数，(可通过命令 man tftpd,查看各种参数含义)
-l：以standalone/listen模式启动TFTP服务（--listen），不用安装网络守护进程服务程序xinetd。
-c：可上传创建新文件（--create）。默认情况下，TFTP只允许覆盖原有文件，不能创建新文件。
-s：改变TFTP启动的根目录(--secure)。为了安全性和兼容性，使用一些引导rom，很难在请求中包含目录名。
三、修改TFTP根目录（）：
如果没有则建立TFTP目录 /var/tftp，以供上传和下载。修改目录所有者；设定该目录的权限，一般就将其权限设置为最高，为所有用户组都添加所有权限（读&#43;写&#43;执行=4&#43;2&#43;1=7）：
$ sudo chown tftp:tftp /srv/tftp
sudo mkdir /var/tftp
sudo chmod 777 tftp
四、重启tftpd-hpa服务：
sudo service tftpd-hpa restart
五、查看TFTP服务状态
$ ps aux|grep tftp root 5070 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1babc286aba6d61419dcba63a5d47822/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-18T23:28:35+08:00" />
<meta property="article:modified_time" content="2023-04-18T23:28:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Ubuntu20.10中搭建TFTP服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>TFTP（Trivial File Transfer Protocol）是用来下载远程文件的最简单的网络协议，它基于UDP协议而实现.</p> 
<p><strong>一、安装：</strong></p> 
<p>sudo apt-get install tftp-hpa tftpd-hpa  </p> 
<p> tftp-hpa 为客户端，tftpd-hpa 为服务端。</p> 
<p><strong>二、配置：</strong></p> 
<p>修改tftpd-hpa相应的配置文件</p> 
<p><strong>sudo vi /etc/default/tftpd-hpa</strong></p> 
<p>原始的内容如下：</p> 
<pre><code>#/etc/default/tftpd-hpa
TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/svr/tftp"
TFTP_ADDRESS=":69"
TFTP_OPTIONS="--secure"</code></pre> 
<p>修改后：</p> 
<pre><code># /etc/default/tftpd-hpa

TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/svr/tftp"
TFTP_ADDRESS=":69"
TFTP_OPTIONS="-l -c -s"</code></pre> 
<p>说明：</p> 
<p>TFTP_USERNAME：tftp帐号，</p> 
<p>TFTP_DIRECTORY：tftp根目录，</p> 
<p>TFTP_ADDRESS：地址与端口号，</p> 
<p>TFTP_OPTIONS：启动参数，(可通过命令 man tftpd,查看各种参数含义)</p> 
<p>-l：以standalone/listen模式启动TFTP服务（--listen），不用安装网络守护进程服务程序xinetd。</p> 
<p>-c：可上传创建新文件（--create）。默认情况下，TFTP只允许覆盖原有文件，不能创建新文件。</p> 
<p>-s：改变TFTP启动的根目录(--secure)。为了安全性和兼容性，使用一些引导rom，很难在请求中包含目录名。</p> 
<p><strong>三、修改TFTP根目录（）：</strong></p> 
<p>如果没有则建立TFTP目录 <strong>/var/tftp</strong>，以供上传和下载。修改目录所有者；设定该目录的权限，一般就将其权限设置为最高，为所有用户组都添加所有权限（读+写+执行=4+2+1=7）：</p> 
<p>$ sudo chown tftp:tftp /srv/tftp</p> 
<p>sudo mkdir  /var/tftp</p> 
<p>sudo chmod 777 tftp</p> 
<p><strong>四、重启tftpd-hpa服务：</strong></p> 
<p>sudo service tftpd-hpa restart</p> 
<p><strong>五、查看TFTP服务状态</strong></p> 
<pre><code>$ ps aux|grep tftp
root        5070  0.0  0.0   3068   680 ?        Ss   10:59   0:00 /usr/sbin/in.tftpd --listen --user tftp --address :69 --secure --create /var/tftpboot
</code></pre> 
<p>可以看到， /usr/sbin/in.tftpd已经启动，进程号：5070，以及对应参数</p> 
<p><strong>六、使用：</strong></p> 
<p>1、linux环境：</p> 
<pre><code>xxx@xxx-virtual-machine:~$ tftp 127.0.0.1
tftp&gt; help    
tftp-hpa 5.2
Commands may be abbreviated.  Commands are:

connect 	connect to remote tftp
mode    	set file transfer mode
put     	send file
get     	receive file
quit    	exit tftp
verbose 	toggle verbose mode
trace   	toggle packet tracing
literal 	toggle literal mode, ignore ':' in file name
status  	show current status
binary  	set mode to octet
ascii   	set mode to netascii
rexmt   	set per-packet transmission timeout
timeout 	set total retransmission timeout
?       	print help information
help    	print help information
tftp&gt;  
</code></pre> 
<p>2、windows环境：</p> 
<p>控制面板中，启用TFTP客户端，并在防火墙中放行（C:\Windows\System32\TFTP.EXE）。</p> 
<pre><code>C:\Users\Administrator&gt;tftp

向运行 TFTP 服务的远程计算机传入或从该计算机传出文件。

TFTP [-i] host [GET | PUT] source [destination]

  -i              指定二进制映像传输模式(也称为
                  八进制)。在二进制映像模式中，逐字节地
                  移动文件。在传输二进制文件时，
                  使用此模式。
  host            指定本地或远程主机。
  GET             将远程主机上的文件目标传输到
                  本地主机的文件源中。
  PUT             将本地主机上的文件源传输到
                  远程主机上的文件目标。
  source          指定要传输的文件。
  destination     指定要将文件传输到的位置。


C:\Users\Administrator&gt;tftp -i 192.168.1.100 get test.bin  </code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c851816a3826701ecff82055ad047371/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">生成扩散模型收藏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/204894dc3d31254702aed63e3046fbcc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PostMan笔记（二）发送请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>