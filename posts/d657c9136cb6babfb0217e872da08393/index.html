<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery 动态粒子效果 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="jQuery 动态粒子效果" />
<meta property="og:description" content="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&#34;utf-8&#34;&gt;
&lt;style&gt;
html,body {
width: 100%;
height: 100%;
margin: 0;
padding: 0;
overflow: hidden;
}
.container{
width: 100％;
height: 100%;
margin: 0;
padding: 0;
background-color: #000000;
}
&lt;/style&gt;
&lt;script src=&#34;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&#34;jsi-particle-container&#34; class=&#34;container&#34;&gt;&lt;/div&gt;
&lt;script&gt;
var RENDERER = {
PARTICLE_COUNT : 1000,
PARTICLE_RADIUS : 1,
MAX_ROTATION_ANGLE : Math.PI / 60,
TRANSLATION_COUNT : 500,
init : function(strategy){
this.setParameters(strategy);
this.createParticles();
this.setupFigure();
this.reconstructMethod();
this.bindEvent();
this.drawFigure();
}," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d657c9136cb6babfb0217e872da08393/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-13T14:15:19+08:00" />
<meta property="article:modified_time" content="2020-10-13T14:15:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">jQuery 动态粒子效果</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>&lt;!DOCTYPE html&gt;</p> 
<p>&lt;html&gt;</p> 
<p>&lt;head&gt;</p> 
<p>&lt;meta charset="utf-8"&gt;</p> 
<p>&lt;style&gt;</p> 
<p>html,body {<!-- --></p> 
<p>    width: 100%;</p> 
<p>    height: 100%;</p> 
<p>    margin: 0;</p> 
<p>    padding: 0;</p> 
<p>    overflow: hidden;</p> 
<p>}</p> 
<p>.container{<!-- --></p> 
<p>    width: 100％;</p> 
<p>    height: 100%;</p> 
<p>    margin: 0;</p> 
<p>    padding: 0;</p> 
<p>    background-color: #000000;</p> 
<p>}</p> 
<p>&lt;/style&gt;</p> 
<p>&lt;script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"&gt;&lt;/script&gt;</p> 
<p> </p> 
<p>&lt;/head&gt;</p> 
<p> </p> 
<p>&lt;body&gt;</p> 
<p>  &lt;div id="jsi-particle-container" class="container"&gt;&lt;/div&gt;</p> 
<p>  &lt;script&gt;</p> 
<p>    var RENDERER = {<!-- --></p> 
<p>  PARTICLE_COUNT : 1000,</p> 
<p>  PARTICLE_RADIUS : 1,</p> 
<p>  MAX_ROTATION_ANGLE : Math.PI / 60,</p> 
<p>  TRANSLATION_COUNT : 500,</p> 
<p>  </p> 
<p>  init : function(strategy){<!-- --></p> 
<p>    this.setParameters(strategy);</p> 
<p>    this.createParticles();</p> 
<p>    this.setupFigure();</p> 
<p>    this.reconstructMethod();</p> 
<p>    this.bindEvent();</p> 
<p>    this.drawFigure();</p> 
<p>  },</p> 
<p>  setParameters : function(strategy){<!-- --></p> 
<p>    this.$window = $(window);</p> 
<p>    </p> 
<p>    this.$container = $('#jsi-particle-container');</p> 
<p>    this.width = this.$container.width();</p> 
<p>    this.height = this.$container.height();</p> 
<p>    </p> 
<p>    this.$canvas = $('&lt;canvas /&gt;').attr({width : this.width, height : this.height}).appendTo(this.$container);</p> 
<p>    this.context = this.$canvas.get(0).getContext('2d');</p> 
<p>    </p> 
<p>    this.center = {x : this.width / 2, y : this.height / 2};</p> 
<p>    </p> 
<p>    this.rotationX = this.MAX_ROTATION_ANGLE;</p> 
<p>    this.rotationY = this.MAX_ROTATION_ANGLE;</p> 
<p>    this.strategyIndex = 0;</p> 
<p>    this.translationCount = 0;</p> 
<p>    this.theta = 0;</p> 
<p>    </p> 
<p>    this.strategies = strategy.getStrategies();</p> 
<p>    this.particles = [];</p> 
<p>  },</p> 
<p>  createParticles : function(){<!-- --></p> 
<p>    for(var i = 0; i &lt; this.PARTICLE_COUNT; i ++){<!-- --></p> 
<p>      this.particles.push(new PARTICLE(this.center));</p> 
<p>    }</p> 
<p>  },</p> 
<p>  reconstructMethod : function(){<!-- --></p> 
<p>    this.setupFigure = this.setupFigure.bind(this);</p> 
<p>    this.drawFigure = this.drawFigure.bind(this);</p> 
<p>    this.changeAngle = this.changeAngle.bind(this);</p> 
<p>  },</p> 
<p>  bindEvent : function(){<!-- --></p> 
<p>    this.$container.on('click', this.setupFigure);</p> 
<p>    this.$container.on('mousemove', this.changeAngle);</p> 
<p>  },</p> 
<p>  changeAngle : function(event){<!-- --></p> 
<p>    var offset = this.$container.offset(),</p> 
<p>      x = event.clientX - offset.left + this.$window.scrollLeft(),</p> 
<p>      y = event.clientY - offset.top + this.$window.scrollTop();</p> 
<p>    </p> 
<p>    this.rotationX = (this.center.y - y) / this.center.y * this.MAX_ROTATION_ANGLE;</p> 
<p>    this.rotationY = (this.center.x - x) / this.center.x * this.MAX_ROTATION_ANGLE;</p> 
<p>  },</p> 
<p>  setupFigure : function(){<!-- --></p> 
<p>    for(var i = 0, length = this.particles.length; i &lt; length; i++){<!-- --></p> 
<p>      this.particles[i].setAxis(this.strategies[this.strategyIndex]());</p> 
<p>    }</p> 
<p>    if(++this.strategyIndex == this.strategies.length){<!-- --></p> 
<p>      this.strategyIndex = 0;</p> 
<p>    }</p> 
<p>    this.translationCount = 0;</p> 
<p>  },</p> 
<p>  drawFigure : function(){<!-- --></p> 
<p>    requestAnimationFrame(this.drawFigure);</p> 
<p>    </p> 
<p>    this.context.fillStyle = 'rgba(0, 0, 0, 0.2)';</p> 
<p>    this.context.fillRect(0, 0, this.width, this.height);</p> 
<p>    </p> 
<p>    for(var i = 0, length = this.particles.length; i &lt; length; i++){<!-- --></p> 
<p>      var axis = this.particles[i].getAxis2D(this.theta);</p> 
<p>      </p> 
<p>      this.context.beginPath();</p> 
<p>      this.context.fillStyle = axis.color;</p> 
<p>      this.context.arc(axis.x, axis.y, this.PARTICLE_RADIUS, 0, Math.PI * 2, false);</p> 
<p>      this.context.fill();</p> 
<p>    }</p> 
<p>    this.theta++;</p> 
<p>    this.theta %= 360;</p> 
<p>    </p> 
<p>    for(var i = 0, length = this.particles.length; i &lt; length; i++){<!-- --></p> 
<p>      this.particles[i].rotateX(this.rotationX);</p> 
<p>      this.particles[i].rotateY(this.rotationY);</p> 
<p>    }</p> 
<p>    this.translationCount++;</p> 
<p>    this.translationCount %= this.TRANSLATION_COUNT;</p> 
<p>    </p> 
<p>    if(this.translationCount == 0){<!-- --></p> 
<p>      this.setupFigure();</p> 
<p>    }</p> 
<p>  }</p> 
<p>};</p> 
<p>var STRATEGY = {<!-- --></p> 
<p>  SCATTER_RADIUS :150,</p> 
<p>  CONE_ASPECT_RATIO : 1.5,</p> 
<p>  RING_COUNT : 5,</p> 
<p>  </p> 
<p>  getStrategies : function(){<!-- --></p> 
<p>    var strategies = [];</p> 
<p>    </p> 
<p>    for(var i in this){<!-- --></p> 
<p>      if(this[i] == arguments.callee || typeof this[i] != 'function'){<!-- --></p> 
<p>        continue;</p> 
<p>      }</p> 
<p>      strategies.push(this[i].bind(this));</p> 
<p>    }</p> 
<p>    return strategies;</p> 
<p>  },</p> 
<p>  createSphere : function(){<!-- --></p> 
<p>    var cosTheta = Math.random() * 2 - 1,</p> 
<p>      sinTheta = Math.sqrt(1 - cosTheta * cosTheta),</p> 
<p>      phi = Math.random() * 2 * Math.PI;</p> 
<p>      </p> 
<p>    return {<!-- --></p> 
<p>      x : this.SCATTER_RADIUS * sinTheta * Math.cos(phi),</p> 
<p>      y : this.SCATTER_RADIUS * sinTheta * Math.sin(phi),</p> 
<p>      z : this.SCATTER_RADIUS * cosTheta,</p> 
<p>      hue : Math.round(phi / Math.PI * 30)</p> 
<p>    };</p> 
<p>  },</p> 
<p>  createTorus : function(){<!-- --></p> 
<p>    var theta = Math.random() * Math.PI * 2,</p> 
<p>      x = this.SCATTER_RADIUS + this.SCATTER_RADIUS / 6 * Math.cos(theta),</p> 
<p>      y = this.SCATTER_RADIUS / 6 * Math.sin(theta),</p> 
<p>      phi = Math.random() * Math.PI * 2;</p> 
<p>    </p> 
<p>    return {<!-- --></p> 
<p>      x : x * Math.cos(phi),</p> 
<p>      y : y,</p> 
<p>      z : x * Math.sin(phi),</p> 
<p>      hue : Math.round(phi / Math.PI * 30)</p> 
<p>    };</p> 
<p>  },</p> 
<p>  createCone : function(){<!-- --></p> 
<p>    var status = Math.random() &gt; 1 / 3,</p> 
<p>      x,</p> 
<p>      y,</p> 
<p>      phi = Math.random() * Math.PI * 2,</p> 
<p>      rate = Math.tan(30 / 180 * Math.PI) / this.CONE_ASPECT_RATIO;</p> 
<p>    </p> 
<p>    if(status){<!-- --></p> 
<p>      y = this.SCATTER_RADIUS * (1 - Math.random() * 2);</p> 
<p>      x = (this.SCATTER_RADIUS - y) * rate;</p> 
<p>    }else{<!-- --></p> 
<p>      y = -this.SCATTER_RADIUS;</p> 
<p>      x = this.SCATTER_RADIUS * 2 * rate * Math.random();</p> 
<p>    }</p> 
<p>    return {<!-- --></p> 
<p>      x : x * Math.cos(phi),</p> 
<p>      y : y,</p> 
<p>      z : x * Math.sin(phi),</p> 
<p>      hue : Math.round(phi / Math.PI * 30)</p> 
<p>    };</p> 
<p>  },</p> 
<p>  createVase : function(){<!-- --></p> 
<p>    var theta = Math.random() * Math.PI,</p> 
<p>      x = Math.abs(this.SCATTER_RADIUS * Math.cos(theta) / 2) + this.SCATTER_RADIUS / 8,</p> 
<p>      y = this.SCATTER_RADIUS * Math.cos(theta) * 1.2,</p> 
<p>      phi = Math.random() * Math.PI * 2;</p> 
<p>    </p> 
<p>    return {<!-- --></p> 
<p>      x : x * Math.cos(phi),</p> 
<p>      y : y,</p> 
<p>      z : x * Math.sin(phi),</p> 
<p>      hue : Math.round(phi / Math.PI * 30)</p> 
<p>    };</p> 
<p>  }</p> 
<p>};</p> 
<p>var PARTICLE = function(center){<!-- --></p> 
<p>  this.center = center;</p> 
<p>  this.init();</p> 
<p>};</p> 
<p>PARTICLE.prototype = {<!-- --></p> 
<p>  SPRING : 0.01,</p> 
<p>  FRICTION : 0.9,</p> 
<p>  FOCUS_POSITION : 300,</p> 
<p>  COLOR : 'hsl(%hue, 100%, 70%)',</p> 
<p>  </p> 
<p>  init : function(){<!-- --></p> 
<p>    this.x = 0;</p> 
<p>    this.y = 0;</p> 
<p>    this.z = 0;</p> 
<p>    this.vx = 0;</p> 
<p>    this.vy = 0;</p> 
<p>    this.vz = 0;</p> 
<p>    this.color;</p> 
<p>  },</p> 
<p>  setAxis : function(axis){<!-- --></p> 
<p>    this.translating = true;</p> 
<p>    this.nextX = axis.x;</p> 
<p>    this.nextY = axis.y;</p> 
<p>    this.nextZ = axis.z;</p> 
<p>    this.hue = axis.hue;</p> 
<p>  },</p> 
<p>  rotateX : function(angle){<!-- --></p> 
<p>    var sin = Math.sin(angle),</p> 
<p>      cos = Math.cos(angle),</p> 
<p>      nextY = this.nextY * cos - this.nextZ * sin,</p> 
<p>      nextZ = this.nextZ * cos + this.nextY * sin,</p> 
<p>      y = this.y * cos - this.z * sin,</p> 
<p>      z = this.z * cos + this.y * sin;</p> 
<p>      </p> 
<p>    this.nextY = nextY;</p> 
<p>    this.nextZ = nextZ;</p> 
<p>    this.y = y;</p> 
<p>    this.z = z;</p> 
<p>  },</p> 
<p>  rotateY : function(angle){<!-- --></p> 
<p>    var sin = Math.sin(angle),</p> 
<p>      cos = Math.cos(angle),</p> 
<p>      nextX = this.nextX * cos - this.nextZ * sin,</p> 
<p>      nextZ = this.nextZ * cos + this.nextX * sin,</p> 
<p>      x = this.x * cos - this.z * sin,</p> 
<p>      z = this.z * cos + this.x * sin;</p> 
<p>      </p> 
<p>    this.nextX = nextX;</p> 
<p>    this.nextZ = nextZ;</p> 
<p>    this.x = x;</p> 
<p>    this.z = z;</p> 
<p>  },</p> 
<p>  rotateZ : function(angle){<!-- --></p> 
<p>    var sin = Math.sin(angle),</p> 
<p>      cos = Math.cos(angle),</p> 
<p>      nextX = this.nextX * cos - this.nextY * sin,</p> 
<p>      nextY = this.nextY * cos + this.nextX * sin,</p> 
<p>      x = this.x * cos - this.y * sin,</p> 
<p>      y = this.y * cos + this.x * sin;</p> 
<p>      </p> 
<p>    this.nextX = nextX;</p> 
<p>    this.nextY = nextY;</p> 
<p>    this.x = x;</p> 
<p>    this.y = y;</p> 
<p>  },</p> 
<p>  getAxis3D : function(){<!-- --></p> 
<p>    this.vx += (this.nextX - this.x) * this.SPRING;</p> 
<p>    this.vy += (this.nextY - this.y) * this.SPRING;</p> 
<p>    this.vz += (this.nextZ - this.z) * this.SPRING;</p> 
<p>    </p> 
<p>    this.vx *= this.FRICTION;</p> 
<p>    this.vy *= this.FRICTION;</p> 
<p>    this.vz *= this.FRICTION;</p> 
<p>    </p> 
<p>    this.x += this.vx;</p> 
<p>    this.y += this.vy;</p> 
<p>    this.z += this.vz;</p> 
<p>    </p> 
<p>    return {x : this.x, y : this.y, z : this.z};</p> 
<p>  },</p> 
<p>  getAxis2D : function(theta){<!-- --></p> 
<p>    var axis = this.getAxis3D(),</p> 
<p>      scale = this.FOCUS_POSITION / (this.FOCUS_POSITION + axis.z);</p> 
<p>      </p> 
<p>    return {x : this.center.x + axis.x * scale, y : this.center.y - axis.y * scale, color : this.COLOR.replace('%hue', this.hue + theta)};</p> 
<p>  }</p> 
<p>};</p> 
<p>$(function(){<!-- --></p> 
<p>  RENDERER.init(STRATEGY);</p> 
<p>});</p> 
<p>  &lt;/script&gt;</p> 
<p>&lt;/body&gt;</p> 
<p>&lt;/html&gt;</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/21bc37e63f0ceb3d5dab0c8212d2047b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css,布局时父组件固定高度，子组件无法滑动问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47d87bd6d9a52cecd336d3c552a8f0d0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用Logstash-input-jdbc同步mysql中的数据到es中</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>