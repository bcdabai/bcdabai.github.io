<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据中心EOR/MOR/TOR布线概念（整理） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据中心EOR/MOR/TOR布线概念（整理）" />
<meta property="og:description" content="数据中心机房平面布局通常采用矩形结构，为了保证制冷效果，通常将10 至 20 个机柜背靠背并排放置成一行，形成一对机柜组（又称为一个POD）。POD中的机柜都采用前后通风模式，冷空气从机柜前面板的吸入并从后部排出，由此在机柜背靠背摆放的POD中间形成 “热通道”，相邻的两个POD之间形成“冷通道”。热通道正对CRAC（机房空调），热空气沿热通道流回CRAC，再开始新一次循环。
每个POD由服务器机柜和网络机柜组成，其中服务器机柜占多数。由于服务器的形态差异（机架式服务器、刀片服务器），POD中服务器机柜和网络机柜的布线方式也存在差异。
一、机架式服务器布线方式： EOR（End of Row）
EOR是数据中心综合布线最传统的方法，接入交换机集中安装在一列机柜端部的机柜（交换机机柜）内，通过水平线缆以永久链路方式连接设备柜内的主机/服务器/小型机设备。
交换机EOR布线方式最为常见。通常在服务器和接入交换机安装以前，服务器机柜到网络机柜的布线施工已经完成，设备（服务器/交换机）安装和跳线工作都在服务器机柜内和网络机柜内进行。
二、机架式服务器的布线方式：MOR（Middle of Row）
MOR布线是对EOR布线方式的改进，主要区别是在摆放列头机柜的位置，MOR是将其放在每一列机柜的中间 。MOR方式的网络机柜部署在POD的两排机柜的中部，由此可以减少从服务器机柜到网络机柜的线缆距离，简化线缆管理维护工作。MOR的设置方式可以使得线缆从中间位置的列柜向两端布放，降低线缆在布线通道出入口的拥堵现象，并减少线缆的平均长度，也适合实施定制长度的预连接系统，而且对布线机柜内配线设备的交叉连接和管理较EOR 要方便 。
三、机架式服务器的布线方式： TOR（Top of Rack）
交换机TOR布线方式是对EOR/MOR方式的扩展，采用TOR布线时，POD中每个服务器机柜的上端部署1-2台两台接入交换机，机架式服务器通过跳线接入到机柜内的交换机上，交换机上行端口通过铜缆或光线接入到EOR/MOR的网络机柜中的汇聚交换上。如图所示
TOR布线方式简化了服务器机柜与网络机柜间的布线，从每个服务器机柜到EOR/MOR的网络机柜的光纤或铜缆数量较少（4-6根）。
机柜中服务器的密度高。对于标准的19英寸宽，42U高的机柜，如果采用交换机TOR布线方式，则每个机柜可部署15-30台1U高度的机架式服务器（具体数量需要考虑单台服务器的功耗和机柜的电源输出功率）。
随着用户数据业务需求的猛增，数据中心机房服务器密度越来越高，虚拟化和云计算等新技术趋势日益流行，使得服务器对应的网络端口大大增加，并且增加了管理的复杂性，另外以太网（LAN）与光纤存储区域网络（SAN）的融合也越来越常见，这就必然要求一种新的网络拓扑结构与之相对应。在云计算的大潮下，这种分布式架构的业务扩展性极强，要求的服务器数量也越来越多。海量的服务器数量要求充分利用数据中心机柜空间的同时，海量的业务数据也需要更快更直接的高性能链路把数据传送到网络核心。在这样的趋势下，显然TOR更加适用，在业务迅速扩展的压力下，TOR的方式可以更好的实现网络的更快速扩展。
四、对比
EOR布线的缺点：
从服务器机柜到网络机柜的铜缆多（约有20-40根铜缆），且距网络机柜越远的服务器机柜的铜缆，在机房中的布线距离越长，由此导致线缆管理维护工作量大、灵活性差。
TOR布线的缺点：
1、可能造成端口浪费：一直以来，TOR被诟病最多的就是交换机端口冗余问题。
每个服务器机柜受电源输出功率限制，可部署的服务器数量有限，由此导致机柜内交换机的接入端口利用率不足。在几个服务器机柜间共用1-2台接入交换机，可解决交换机端口利用率不足的问题，但这种方式增加了线缆管理工作量。
TIA TR-42 通信布线系统工程委员会副主席Valerie Maguire曾介绍过一个真实案例，某用户共有336个服务器机柜，每个机柜配置2台48端口的TOR交换机和40台服务器，这就使得每个交换机有8个端口是空闲的，整个网络就有112整台交换机端口数量都是空闲的。这些超额购买的设备和3年维护的成本总计将达到112万美金。如果考虑机柜受供电能力约束的真实情况，每个机柜能放置的服务器数量远小于40台，则浪费的总额将更高。而若采用集中式布线只需花费 27.5万美金，通过在布线上的投资就能换来极大的交换机等设备的节约。
从网络设计考虑，TOR布线方式的每台接入交换机上的VLAN量不会很多，在网络规划的时候也要尽量避免使一个VLAN通过汇聚交换机跨多台接入交换机，因此采用TOR布线方式的网络拓扑中，每个VLAN的范围不会太大，包含的端口数量不会太多。但对于EOR布线方式来说，接入交换机的端口密度高，在网路最初设计时，就可能存在包含较多端口数的VLAN。
2、成本未必节省
TOR方式得到推广的一个重要理由，是节省了大量的布线成本和制冷成本，简化结构，使得机房更加绿色节能。但深入研究会发现，布线成本减少的代价是网络接入设备成本的增加和端口冗余，并且缩减也只是水平铜缆布线的部分，TOR对于光纤的要求比传统布线方式更多。在初期建设成本之外，后期的管理和扩展问题有可能变得更加复杂。
3、增加管理难度：TOR方式的接入交换机数量多，EOR方式的接入交换机数量少，所以TOR方式的网络设备管理维护工作量大。
五、刀片服务器的布线方式
集成刀片交换机的刀片服务器在进行机柜安装时，不需要考虑机柜内从服务器到接入交换机/或配线架的跳线，只需考虑刀片交换机上行端口的配线方式即可。集成交换机模块的刀片服务器主要采用EOR/MOR布线方式，但这种EOR布线方式与机架式服务器TOR布线方式的特点基本相同。服务器在服务器机柜内完成网络接入，从服务器机柜到EOR/MOR网络机柜的电缆主要是刀片交换机上行汇聚交换机的光线，而且数量比较少。但刀片服务器的计算单元的密度比机架式服务器更高，所以对单个机柜的电源输出功率以及机房制冷环境的要求也更高。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7cc16a038f082bbbabe7bb5d80d55f79/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-10T13:19:49+08:00" />
<meta property="article:modified_time" content="2020-04-10T13:19:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据中心EOR/MOR/TOR布线概念（整理）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>    数据中心机房平面布局通常采用矩形结构，为了保证制冷效果，通常将10 至 20 个机柜背靠背并排放置成一行，形成一对机柜组（又称为一个POD）。POD中的机柜都采用前后通风模式，冷空气从机柜前面板的吸入并从后部排出，由此在机柜背靠背摆放的POD中间形成 “热通道”，相邻的两个POD之间形成“冷通道”。热通道正对CRAC（机房空调），热空气沿热通道流回CRAC，再开始新一次循环。</p> 
<p>    每个POD由服务器机柜和网络机柜组成，其中服务器机柜占多数。由于服务器的形态差异（机架式服务器、刀片服务器），POD中服务器机柜和网络机柜的布线方式也存在差异。</p> 
<p>一、机架式服务器布线方式： EOR（End of Row）</p> 
<p>    EOR是数据中心综合布线最传统的方法，接入交换机集中安装在一列机柜端部的机柜（交换机机柜）内，通过水平线缆以永久链路方式连接设备柜内的主机/服务器/小型机设备。</p> 
<p>    交换机EOR布线方式最为常见。通常在服务器和接入交换机安装以前，服务器机柜到网络机柜的布线施工已经完成，设备（服务器/交换机）安装和跳线工作都在服务器机柜内和网络机柜内进行。</p> 
<p><img alt="" height="492" src="https://images2.imgbox.com/d5/1a/CRncI3fo_o.png" width="960"></p> 
<p>二、机架式服务器的布线方式：MOR（Middle of Row）</p> 
<p>    MOR布线是对EOR布线方式的改进，主要区别是在摆放列头机柜的位置，MOR是将其放在每一列机柜的中间 。MOR方式的网络机柜部署在POD的两排机柜的中部，由此可以减少从服务器机柜到网络机柜的线缆距离，简化线缆管理维护工作。MOR的设置方式可以使得线缆从中间位置的列柜向两端布放，降低线缆在布线通道出入口的拥堵现象，并减少线缆的平均长度，也适合实施定制长度的预连接系统，而且对布线机柜内配线设备的交叉连接和管理较EOR 要方便 。</p> 
<p>三、机架式服务器的布线方式： TOR（Top of Rack）</p> 
<p>    交换机TOR布线方式是对EOR/MOR方式的扩展，采用TOR布线时，POD中每个服务器机柜的上端部署1-2台两台接入交换机，机架式服务器通过跳线接入到机柜内的交换机上，交换机上行端口通过铜缆或光线接入到EOR/MOR的网络机柜中的汇聚交换上。如图所示</p> 
<p>    TOR布线方式简化了服务器机柜与网络机柜间的布线，从每个服务器机柜到EOR/MOR的网络机柜的光纤或铜缆数量较少（4-6根）。</p> 
<p>    机柜中服务器的密度高。对于标准的19英寸宽，42U高的机柜，如果采用交换机TOR布线方式，则每个机柜可部署15-30台1U高度的机架式服务器（具体数量需要考虑单台服务器的功耗和机柜的电源输出功率）。</p> 
<p>    随着用户数据业务需求的猛增，数据中心机房服务器密度越来越高，虚拟化和云计算等新技术趋势日益流行，使得服务器对应的网络端口大大增加，并且增加了管理的复杂性，另外以太网（LAN）与光纤存储区域网络（SAN）的融合也越来越常见，这就必然要求一种新的网络拓扑结构与之相对应。在云计算的大潮下，这种分布式架构的业务扩展性极强，要求的服务器数量也越来越多。海量的服务器数量要求充分利用数据中心机柜空间的同时，海量的业务数据也需要更快更直接的高性能链路把数据传送到网络核心。在这样的趋势下，显然TOR更加适用，在业务迅速扩展的压力下，TOR的方式可以更好的实现网络的更快速扩展。</p> 
<p>四、对比</p> 
<p>EOR布线的缺点：</p> 
<p>    从服务器机柜到网络机柜的铜缆多（约有20-40根铜缆），且距网络机柜越远的服务器机柜的铜缆，在机房中的布线距离越长，由此导致线缆管理维护工作量大、灵活性差。</p> 
<p>TOR布线的缺点：</p> 
<p>1、可能造成端口浪费：一直以来，TOR被诟病最多的就是交换机端口冗余问题。</p> 
<p>每个服务器机柜受电源输出功率限制，可部署的服务器数量有限，由此导致机柜内交换机的接入端口利用率不足。在几个服务器机柜间共用1-2台接入交换机，可解决交换机端口利用率不足的问题，但这种方式增加了线缆管理工作量。</p> 
<p>TIA TR-42 通信布线系统工程委员会副主席Valerie Maguire曾介绍过一个真实案例，某用户共有336个服务器机柜，每个机柜配置2台48端口的TOR交换机和40台服务器，这就使得每个交换机有8个端口是空闲的，整个网络就有112整台交换机端口数量都是空闲的。这些超额购买的设备和3年维护的成本总计将达到112万美金。如果考虑机柜受供电能力约束的真实情况，每个机柜能放置的服务器数量远小于40台，则浪费的总额将更高。而若采用集中式布线只需花费 27.5万美金，通过在布线上的投资就能换来极大的交换机等设备的节约。</p> 
<p>从网络设计考虑，TOR布线方式的每台接入交换机上的VLAN量不会很多，在网络规划的时候也要尽量避免使一个VLAN通过汇聚交换机跨多台接入交换机，因此采用TOR布线方式的网络拓扑中，每个VLAN的范围不会太大，包含的端口数量不会太多。但对于EOR布线方式来说，接入交换机的端口密度高，在网路最初设计时，就可能存在包含较多端口数的VLAN。</p> 
<p>2、成本未必节省</p> 
<p>TOR方式得到推广的一个重要理由，是节省了大量的布线成本和制冷成本，简化结构，使得机房更加绿色节能。但深入研究会发现，布线成本减少的代价是网络接入设备成本的增加和端口冗余，并且缩减也只是水平铜缆布线的部分，TOR对于光纤的要求比传统布线方式更多。在初期建设成本之外，后期的管理和扩展问题有可能变得更加复杂。</p> 
<p>3、增加管理难度：TOR方式的接入交换机数量多，EOR方式的接入交换机数量少，所以TOR方式的网络设备管理维护工作量大。</p> 
<p>五、刀片服务器的布线方式</p> 
<p>集成刀片交换机的刀片服务器在进行机柜安装时，不需要考虑机柜内从服务器到接入交换机/或配线架的跳线，只需考虑刀片交换机上行端口的配线方式即可。集成交换机模块的刀片服务器主要采用EOR/MOR布线方式，但这种EOR布线方式与机架式服务器TOR布线方式的特点基本相同。服务器在服务器机柜内完成网络接入，从服务器机柜到EOR/MOR网络机柜的电缆主要是刀片交换机上行汇聚交换机的光线，而且数量比较少。但刀片服务器的计算单元的密度比机架式服务器更高，所以对单个机柜的电源输出功率以及机房制冷环境的要求也更高。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9225376c6aa729b6fced7236a3e9adb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">像羽毛一样轻的MVVMLight（一）（MVVM 和 MVVMLight简介）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/22bb05a1083d68dca6b4877ccd2e72b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">漏洞信息收集之——指纹识别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>