<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux安装Oracle11g - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux安装Oracle11g" />
<meta property="og:description" content="linux安装Oracle11g 一、准备工作 一、官方最低要求配置 内存：1G（官方最低要求1G） 硬盘：40G（企业版安装所需4.29G和1.7G数据文件） 二、准备工作 1、安装环境介绍 系统：CentOS 7.5 64位 Oracle版本：Oracle 11gR2 2、下载Oracle安装文件 官网下载地址 下载出来是这样两个压缩包： linux.x64_11gR2_database_1of2.zip linux.x64_11gR2_database_2of2.zip 需要了解：Oracle密码？ 主机名？ip? 实例名字？ 环境变量要求？ 二、检查 uname - m # 检查 -x86_64 cat /etc/redhat-release -Centos Linux release 7.4.1708 (Core) 检查YUM源： ll /etc/yum.repos.d/ 需要手动配置： df -h 查看yum源位置 将其余repo改名 vi local.repo [AppStream] name=AppStream baseurl=&#34;file:///run/media/wxl/RHEL-7.5 Server.x86_64&#34; enabled=1 gpgcheck=0 三、修改主机 修改主机名： sed -i &#34;s/HOSTNAME=localhost.localdomain/HOSTNAME=oracledb/&#34; /etc/sysconfig/network hostname oracledb 添加主机名： yum -y install vim # 安装vim，如已安装请忽略 vim /etc/hosts # 编辑 hosts 在下面添加： ip 主机名 四、操作 关闭Selinux sed -i &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a9cb702ad57bbc555dcf46edfc0862f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-20T10:55:28+08:00" />
<meta property="article:modified_time" content="2023-09-20T10:55:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux安装Oracle11g</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="linuxOracle11g_0"></a>linux安装Oracle11g</h2> 
<h3><a id="_2"></a>一、准备工作</h3> 
<pre><code>一、官方最低要求配置 
内存：1G（官方最低要求1G） 
硬盘：40G（企业版安装所需4.29G和1.7G数据文件） 
二、准备工作 
1、安装环境介绍 
系统：CentOS 7.5 64位 
Oracle版本：Oracle 11gR2 
2、下载Oracle安装文件 官网下载地址 
下载出来是这样两个压缩包： 
linux.x64_11gR2_database_1of2.zip 
linux.x64_11gR2_database_2of2.zip
需要了解：Oracle密码？  主机名？ip?  实例名字？ 环境变量要求？
</code></pre> 
<h3><a id="_19"></a>二、检查</h3> 
<pre><code>uname - m   # 检查
-x86_64
cat /etc/redhat-release
-Centos Linux release 7.4.1708 (Core)
检查YUM源：
ll /etc/yum.repos.d/
需要手动配置：
df -h    查看yum源位置  将其余repo改名
vi local.repo
[AppStream]
name=AppStream
baseurl="file:///run/media/wxl/RHEL-7.5 Server.x86_64"
enabled=1
gpgcheck=0

</code></pre> 
<h3><a id="_41"></a>三、修改主机</h3> 
<pre><code>修改主机名：
sed -i "s/HOSTNAME=localhost.localdomain/HOSTNAME=oracledb/" /etc/sysconfig/network

hostname oracledb

添加主机名：
yum -y install vim # 安装vim，如已安装请忽略

vim /etc/hosts # 编辑 hosts
在下面添加：
ip   主机名

</code></pre> 
<h3><a id="_58"></a>四、操作</h3> 
<pre><code>
关闭Selinux
sed -i "s/SELINUX=enforcing/SELINUX=disabled/" /etc/selinux/config 

关闭防火墙
setenforce 0

*或者：
systemctl stop firewalld
systemctl disable firewalld
systemctl status firewalld

free -m
memory  以256G为例
#kernel.shmmax = 256*0.6*1024*1024*1024*1024
kernel.shmall =shmmax/1024/4

修改内核参数
cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOF

fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmmni = 4096 
kernel.shmmax = 10307921510
kernel.shmall = 2516582
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default=262144
net.core.rmem_max=4194304
net.core.wmem_default=262144
net.core.wmem_max=1048586
EOF

#上面配置的文件生效
/sbin/sysctl -p

修改系统资源限制
    cat &gt;&gt; /etc/security/limits.conf &lt;&lt; EOF

    oracle   	soft    	nproc	  131072
    oracle   	hard   	nproc	  131072
    oracle   	soft    	nofile	  131072
    oracle   	hard   	nofile	  131072
    oracle   	soft    	core	  unlimited
    oracle   	hard   	core	  unlimited
    oracle   	soft    	memlock	  50000000
    oracle   	hard   	memlock	  0000000

    EOF

修改用户验证选项：

cat &gt;&gt; /etc/pam.d/login &lt;&lt; EOF
session    required     pam_limits.so
EOF

</code></pre> 
<h3><a id="_119"></a>五、创建</h3> 
<pre><code>创建用户和组
创建Oracle安装组oinstall,数据库管理员组dba，及oracle用户
groupadd -g 501 oinstall
groupadd -g 502 dba
groupadd -g 503 oper

useradd -u 500 -g oinstall -G dba,oper oracle

echo -e "oracle\noracle" | passwd oracle
#创建安装包解压路径
mkdir -p /u01/oracle
#Oracle安装路径
mkdir -p /u01/app/oracle/product/11.2.0.4/db

chown -R oracle:oinstall /u01
chmod -R 777 /u01

设置环境变量：
su - oracle
cat &gt;&gt; /home/oracle/.bash_profile &lt;&lt; EOF

export TMP=/tmp
export TMPDIR=$TMP
export ORACLE_SID=orcl
export ORACLE_UNQNAME=orcl;
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/11.2.0.4/db
export ORACLE_TERM=xterm
export PATH=/usr/sbin:$PATH
export PATH=$ORACLE_HOME/bin:$PATH
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib
export CLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib
EOF
source /home/oracle/.bash_profile


env | grep ORA # 查看环境变量是否完成

</code></pre> 
<h3><a id="_162"></a>六、安装</h3> 
<pre><code>yum -y install binutils compat-libcap1 compat-libstdc++-33 compat-libstdc++-33*i686 compat-libstdc++-33*.devel compat-libstdc++-33 compat-libstdc++-33*.devel gcc gcc-c++ glibc glibc*.i686 glibc-devel glibc-devel*.i686 ksh libaio libaio*.i686 libaio-devel libaio-devel*.devel libgcc libgcc*.i686 libstdc++ libstdc++*.i686 libstdc++-devel libstdc++-devel*.devel libXi libXi*.i686 libXtst libXtst*.i686 make sysstat unixODBC unixODBC*.i686 unixODBC-devel unixODBC-devel*.i686



检查是否安装完全：
rpm -q binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst make sysstat unixODBC unixODBC-devel


安装Oracle：
yum -y install unzip # 安装unzip，如已安装请忽略
yum whatprovides "*/xhost" 
yum -y install xorg-x11-server-utils-7.7-2.el6.x86_64
解压安装包：
cd $ORACLE_HOME
unzip linux.x64_11gR2_database_1of2.zip
unzip linux.x64_11gR2_database_2of2.zip


安装前需更改所属（Oracle）组：
chown -R oracle:oinstall /u01
chmod -R 777 /u01


</code></pre> 
<h3><a id="_190"></a>静默安装</h3> 
<pre><code>在$ORACLE_HOME/database/response目录下有静默安装驱动文件

#安装Oracle11g数据库:
压后进入 database 目录，该目录下有三个 .rsp 文件，用来作为静默安装时的应答文件的模板。 
   三个文件作用分别是： 
   db_install.rsp：安装应答 
   dbca.rsp：创建数据库应答 
   netca.rsp：建立监听、本地服务名等网络设置的应答 
     
   [root@localhost src]# cd /data/database/database/response # 进入 response 目录 
   [root@localhost response ]# cp db_install.rsp db_install_copy.rsp # 将 db_install.rsp 备份一份，以免修改出错 
   然后修改静默安装的配置文件 
   [root@localhost response ]# vim db_install.rsp # 编辑 
#需要修改如下：
oracle.install.option=INSTALL_DB_SWONLY
ORACLE_HOSTNAME=oracledb
UNIX_GROUP_NAME=oinstall
INVENTORY_LOCATION=/u01/app/oraInventory
SELECTED_LANGUAGES=en,zh_CN
ORACLE_HOME=/u01/app/oracle/product/11.2.0/db_home1
ORACLE_BASE=/u01/app/oracle
oracle.install.db.InstallEdition=EE
oracle.install.db.EEOptionsSelection=false
oracle.install.db.isCustomInstall=false    
oracle.install.db.DBA_GROUP=dba 
oracle.install.db.OPER_GROUP=oinstall 
oracle.install.db.config.starterdb.type=GENERAL_PURPOSE 
oracle.install.db.config.starterdb.globalDBName=orcl 
oracle.install.db.config.starterdb.SID=orcl
oracle.install.db.config.starterdb.characterSet=AL32UTF8 
oracle.install.db.config.starterdb.memoryOption=true 
oracle.install.db.config.starterdb.memoryLimit=1500 
oracle.install.db.config.starterdb.installExampleSchemas=false 
oracle.install.db.config.starterdb.enableSecuritySettings=true 
oracle.install.db.config.starterdb.password.ALL=oracle 
oracle.install.db.config.starterdb.password.SYS=oracle 
oracle.install.db.config.starterdb.control=DB_CONTROL 
oracle.install.db.config.starterdb.dbcontrol.enableEmailNotification=false 
oracle.install.db.config.starterdb.automatedBackup.enable=false 
oracle.install.db.config.starterdb.storageType=FILE_SYSTEM_STORAGE 
oracle.install.db.config.starterdb.fileSystemStorage.dataLocation=/data/oracle/oradata 
oracle.install.db.config.starterdb.fileSystemStorage.recoveryLocation=/data/oracle/fast_recovery_area   
DECLINE_SECURITY_UPDATES=true    //一定要设为 true

#安装前确认：
[root@localhost src]# vi /etc/hosts
192.168.56.10 localhost.localdomain
以root用户需创建/etc/oraInst.loc文件，否则安装会报错 
   [root@localhost src]#  vi /etc/oraInst.loc 
    
   inventory_log=/data/oracle/oraInventory 
   inst_group=oinstall
#开始静默安装：
cd $ORACLE_HOME/database  
./runInstaller -silent -force -responseFile /u01/app/oracle/product/11.2.0.4/db/database/response/db_install.rsp 

安装完成在root下执行两个脚本

#创建监听：直接应用监听配置文件即可

cd $ORACLE_HOME/bin
./netca /silent /responseFile /u01/app/oracle/product/11.2.0.4/db/database/response/netca.rsp 
#或者：/u01/app/oracle/product/11.2.0.4/db/bin/netca /silent /responseFile /u01/app/oracle/product/11.2.0.4/db/database/response/netca.rsp 

#创建数据库：
 vi $ORACLE_HOME/database/response/dbca.rsp 
   修改如下内容： 
    
   GDBNAME = "orcl" # 78 行 
   SID="orcl" # 170行 
   CHARACTERSET="AL32UTF8" # 418行 ---ZHS16GBK  中文字符集
   NATIONALCHARACTERSET="UTF8" # 428行

./dbca -silent -responseFile /u01/app/oracle/product/11.2.0.4/db/database/response/dbca.rsp
执行完后会先清屏，清屏之后没有提示，直接输入oracle用户的密码（oracle），回车，再输入一次（oracle），再回车。
稍等一会，会开始自动创建
</code></pre> 
<h3><a id="_283"></a>图形化安装</h3> 
<pre><code>直接用oracle用户登录    oracle/密码
设置在本机调用安装界面：
export DISPLAY=(cmd:ifconfig):0.0
设置安装界面语言为英文：
export LANG=en_US
**-------------------------------------
*遇到无法使用命令/usr/bin/xdpyinfo自动检查显示器颜色，可以通过以下方法解决。
 1.在root下执行
     ,记下name of display：后的字符串：0.0
   2. #xhost +
    返回信息为： access control disabled,clients can connect from any host
   3.切换到Oracle用户：
    #su - oracle
    export DISPLAY=:1.0
   4.在Oracle下执行xdpyinfo命令，如果能正常显示，说明设置成功
以上仍然无法联通：
yum install xorg-x11-xauth -y
看下是否缺失yum
-------------------------------------
切换到Oracle用户下进行安装：
在database目录下安装:
cd /u01/oracle/database
./runInstaller

安装过程中报错1：
Error in invoking target 'agent nm hs' of m akefile/u01/app/oracle/product/11.2.0.4/db/sysman/libjins_emagent.mk'.See/u01/app/oralnventory/logs/installActions2023-02-17_04-47-04PM.log' for details
解决：
[oracle@ysserver ~]$ cd $ORACLE_HOME/sysman/lib 
[oracle@ysserver lib]$ cp ins_emagent.mk ins_emagent.mk.bak 
[oracle@ysserver lib]$ vi ins_emagent.mk

进入vi编辑器后  命令模式输入/NMECTL 进行查找，快速定位要修改的行
在后面追加参数-lnnz11        第一个是字母l   后面两个是数字1
即：  $(MK_EMAGENT_NMECTL)  -----&gt;&gt;  $(MK_EMAGENT_NMECTL) -lnnz11

安装过程中报错2：
需要执行脚本：   在root下  cd ..   ./..
/u01/app/oraInventory/orainstRoot.sh
/u01/app/oracle/product/11.2.0.4/db/root.sh
-------------------------------
打补丁：
替换前：
cd $ORACLE_HOME/OPatch
查看当前OPatch版本
[oracle@localhost dbhome_1]$ cd OPatch/
[oracle@localhost OPatch]$ ./opatch version
Java HotSpot(TM) 64-Bit Server VM warning: Insufficient space for shared memory file:
   3272
Try using the -Djava.io.tmpdir= option to select an alternate temp location.

OPatch Version: 12.2.0.1.17
OPatch succeeded.
将原来OPatch改名以更新opatch
cd $ORACLE_HOME
mv OPatch OPatch_bak
unzip ../p6880880_190000_Linux-x86-64.zip

替换后：
cd $ORACLE_HOME/OPatch
查看当前OPatch版本
./opatch version

[oracle@localhost OPatch]$ ./opatch version
OPatch Version: 12.2.0.1.36

OPatch succeeded.
安装补丁：
unzip p32904851_&lt;version&gt;_&lt;platform&gt;.zip
cd 32904851
opatch apply



查看补丁情况：
opatch lspatches
--------------------------------------------------
查看监听状态：(服务为no正常)
lsnrctl status
创建监听：
netca
创建实例：
dbca
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8267c3e3bdccfba9d85ce2f412ad6d48/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">grid布局时 justify-*、align-*, *-content *-items 的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/386fe42c16fb745f3b2cf65b51da7a88/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">02 GPU深度学习环境搭建：Win11&#43;CUDA 11.7&#43;Pytorch1.12.1&#43;Anaconda</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>