<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>整数反转及问题解析 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="整数反转及问题解析" />
<meta property="og:description" content="一、算法题 LeetCode中有这样一个算法： 给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。 示例 1: 输入: 123 输出: 321 示例 2: 输入: -123 输出: -321 示例 3: 输入: 120 输出: 21 注意: 假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231, 231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。 二、算法分析 个人解法 当第一次看到这个算法的时候，其实是不知道该如何做的，自己勉强使用了最笨的办法来实现，大致思路是，首先将int类型的整数变为字符串，然后通过不断的截取字符串来实现整数的反转，反转后的值先用long来接收，然后判断是否溢出了int的最大范围，最后将值再转换成int类型。 高人的解法 直接看图了: 其大致的思路就是通过不断递归整数整除10取余来获取最后一位数字，从而实现整体的整数的反转。 三、算法实现 按照大神的思路，自己来实现的第一版 public static int reverse(int x) { int res=0; while (x!=0){ res=res*10&#43;x%10; x=x/10; } return res; } 问题：在程序运行的时候发现，如果入参的值比较大，如int值为-2^31时，会发生题目中所说的整数溢出情况。 所谓的整数溢出就是，整数值超出了int类型的最大范围。具体就是-2^31=-2147483648，当程序遍历到846384741之后，再将最后一位“2”反转的时候，反转后的值应该为-8463847412，此时的值超出了范围，最终的值变成了126087182。那么问题来了，为什么执行846384741*10的操作后结果为126087182？此处先卖一个关子，稍后再解释。 2. 第二版
public static int reverse(int x) { long res=0; while (x!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6f299631a00fa55ae1b8bc5ce2a40c7d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-30T10:56:02+08:00" />
<meta property="article:modified_time" content="2020-06-30T10:56:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">整数反转及问题解析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div>
  一、算法题 
</div> 
<div>
      LeetCode中有这样一个算法： 
</div> 
<div> 
 <pre><code>    
给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。


示例 1:
    输入: 123
    输出: 321

示例 2:
    输入: -123
    输出: -321

示例 3:
    输入: 120
    输出: 21
注意:

假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231,  231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。
</code></pre> 
 <p> </p> 
</div> 
<div>
  二、算法分析 
</div> 
<ol><li> 
  <div>
        个人解法 
  </div> </li></ol> 
<div style="margin-left:40px;">
  当第一次看到这个算法的时候，其实是不知道该如何做的，自己勉强使用了最笨的办法来实现，大致思路是，首先将int类型的整数变为字符串，然后通过不断的截取字符串来实现整数的反转，反转后的值先用long来接收，然后判断是否溢出了int的最大范围，最后将值再转换成int类型。 
</div> 
<ol><li> 
  <div>
    高人的解法 
  </div> </li></ol> 
<div style="margin-left:40px;">
  直接看图了: 
</div> 
<p style="text-indent:33px;"><img alt="" height="794" src="https://images2.imgbox.com/57/27/BePKSqAL_o.png" width="1200"></p> 
<div style="margin-left:40px;">
  其大致的思路就是通过不断递归整数整除10取余来获取最后一位数字，从而实现整体的整数的反转。 
</div> 
<div style="margin-left:40px;">
    
</div> 
<div>
  三、算法实现 
</div> 
<ol><li> 
  <div>
    按照大神的思路，自己来实现的第一版 
  </div> </li></ol> 
<div style="margin-left:40px;"> 
 <pre><code class="language-java">
public static int reverse(int x) {
    int res=0;
    while (x!=0){
        res=res*10+x%10;
        x=x/10;
    }
    return res;
}</code></pre> 
 <p> </p> 
</div> 
<div>
    
</div> 
<div style="margin-left:40px;">
  问题：在程序运行的时候发现，如果入参的值比较大，如int值为-2^31时，会发生题目中所说的整数溢出情况。 
</div> 
<div style="margin-left:40px;">
  所谓的整数溢出就是，整数值超出了int类型的最大范围。具体就是-2^31=-2147483648，当程序遍历到846384741之后，再将最后一位“2”反转的时候，反转后的值应该为-8463847412，此时的值超出了范围，最终的值变成了126087182。那么问题来了，为什么执行846384741*10的操作后结果为126087182？此处先卖一个关子，稍后再解释。 
</div> 
<div style="margin-left:40px;">
    
</div> 
<p style="text-indent:0;">     2. 第二版</p> 
<pre><code class="language-java">        
public static int reverse(int x) {
    long res=0;
    while (x!=0){
        res=res*10+x%10;
        x=x/10;
    }
    return ((int) res) == res ? (int)res:0;
}</code></pre> 
<div> 
 <p>   在程序中首先通过long类型来处理数据，防止整数溢出问题，最后通过long类型和int类型转换来判断是否发生了溢出。</p> 
</div> 
<div> 
 <div>
     
 </div> 
</div> 
<div>
    
</div> 
<div>
  四、遇到的问题 
</div> 
<ol><li> 
  <div>
    现在回答刚刚的问题“为什么执行846384741*10的操作后结果为126087182？” 
  </div> </li></ol> 
<div style="margin-left:40px;">
  这个需要从计算机的原理说起，在计算机中，乘法和除法运算是通过位移运算的到的。而针对我们这次的乘法运算就是通过对被乘数做 
 <strong><span style="color:#e30000;">左移</span></strong>来实现的。举个例子，比如：5*3，在计算机中的实现如下： 
</div> 
<ul><li> 
  <div>
    将5和3分别转化成二进制，0101和0011 
  </div> </li><li> 
  <div>
    由于乘数3的二进制表示中，只有第0位和第1位是“1”，所以对被乘数分别左移0位和1位，得到的结果为0101和1010 
  </div> </li><li> 
  <div>
    将左移后的数相加，得到1111，转化成十进制就是15 
  </div> </li></ul> 
<div style="margin-left:40px;">
  针对本次问题中，846384741*10，转化成二进制为：11001101100011010011000110011011和1010，所以对被乘数左移1位和3位得到110011011000110100110001100110110和11001101100011010011000110011011000，两个二进制值相加的结果为100000000111100000111111000000001110， 
 <strong><span style="color:#9c004c;">由于此时的结果已经超过了int类型的范围，所以计算机将默认截取后32位</span></strong>，即00000000111100000111111000000001110，此时将值转换为十进制后为：126087182 
</div> 
<div style="margin-left:40px;">
    
</div> 
<div>
  五、参考资料 
</div> 
<ol><li> 
  <div>
    java int溢出，结果只会保留低32位，高位会抛弃掉：h 
   <a href="https://blog.csdn.net/u010002184/article/details/86368598">ttps://blog.csdn.net/u010002184/article/details/86368598</a> 
  </div> </li><li> 
  <div>
    java int溢出总结： 
   <a href="https://njucz.github.io/2017/08/16/java-int%E6%BA%A2%E5%87%BA%E6%80%BB%E7%BB%93/" rel="nofollow">https://njucz.github.io/2017/08/16/java-int%E6%BA%A2%E5%87%BA%E6%80%BB%E7%BB%93/</a> 
  </div> </li><li> 
  <div>
    计算机计算乘除法的原理： 
   <a href="https://blog.csdn.net/qq_40316686/article/details/78370204">https://blog.csdn.net/qq_40316686/article/details/78370204</a> 
  </div> </li></ol> 
<div style="margin-left:40px;">
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div> 
<div>
    
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f7da68120b4a8276f85d648962cf9afa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Flink迟到数据处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1366dc50effa7918e0ea0915d59520c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">1072：鸡尾酒疗法 题解 信息学奥赛 NOIP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>