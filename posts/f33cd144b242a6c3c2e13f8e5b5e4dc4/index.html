<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下删除unknown PV - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下删除unknown PV" />
<meta property="og:description" content="1.vgdisplay 得到vg Name 为centos
[root@Linux122 guchenfei]# vgdisplay --- Volume group --- VG Name centos System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 5 VG Access read/write VG Status resizable MAX LV 0 Cur LV 2 Open LV 2 Max PV 0 Cur PV 1 Act PV 1 VG Size &lt;19.00 GiB PE Size 4.00 MiB Total PE 4863 Alloc PE / Size 4863 / &lt;19.00 GiB Free PE / Size 0 / 0 VG UUID 09i72y-vh64-9DvZ-m85B-MAU8-laD4-HvseBW 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f33cd144b242a6c3c2e13f8e5b5e4dc4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-26T18:22:34+08:00" />
<meta property="article:modified_time" content="2021-12-26T18:22:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下删除unknown PV</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1.vgdisplay 得到vg Name 为centos</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span>root<span class="token annotation punctuation">@Linux122</span> guchenfei<span class="token punctuation">]</span># vgdisplay
  <span class="token operator">--</span><span class="token operator">-</span> <span class="token class-name">Volume</span> group <span class="token operator">--</span><span class="token operator">-</span>
  VG <span class="token class-name">Name</span>               centos
  <span class="token class-name">System</span> ID             
  <span class="token class-name">Format</span>                lvm2
  <span class="token class-name">Metadata</span> <span class="token class-name">Areas</span>        <span class="token number">1</span>
  <span class="token class-name">Metadata</span> <span class="token class-name">Sequence</span> <span class="token class-name">No</span>  <span class="token number">5</span>
  VG <span class="token class-name">Access</span>             read<span class="token operator">/</span>write
  VG <span class="token class-name">Status</span>             resizable
  MAX LV                <span class="token number">0</span>
  <span class="token class-name">Cur</span> LV                <span class="token number">2</span>
  <span class="token class-name">Open</span> LV               <span class="token number">2</span>
  <span class="token class-name">Max</span> PV                <span class="token number">0</span>
  <span class="token class-name">Cur</span> PV                <span class="token number">1</span>
  <span class="token class-name">Act</span> PV                <span class="token number">1</span>
  VG <span class="token class-name">Size</span>               <span class="token operator">&lt;</span><span class="token number">19.00</span> <span class="token class-name">GiB</span>
  PE <span class="token class-name">Size</span>               <span class="token number">4.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Total</span> PE              <span class="token number">4863</span>
  <span class="token class-name">Alloc</span> PE <span class="token operator">/</span> <span class="token class-name">Size</span>       <span class="token number">4863</span> <span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token number">19.00</span> <span class="token class-name">GiB</span>
  <span class="token class-name">Free</span>  PE <span class="token operator">/</span> <span class="token class-name">Size</span>       <span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span>   
  VG UUID               <span class="token number">09</span>i72y<span class="token operator">-</span>vh64<span class="token operator">-</span><span class="token number">9D</span>vZ<span class="token operator">-</span>m85B<span class="token operator">-</span>MAU8<span class="token operator">-</span>laD4<span class="token operator">-</span><span class="token class-name">HvseBW</span>
</code></pre> 
<p>2.pvdisplay 查看pv 发现有一个unknown pv</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span>root<span class="token annotation punctuation">@Linux122</span> guchenfei<span class="token punctuation">]</span># pvdisplay
  WARNING<span class="token operator">:</span> <span class="token class-name">Device</span> <span class="token keyword">for</span> PV <span class="token number">83</span>QZB3<span class="token operator">-</span>ZX9A<span class="token operator">-</span><span class="token number">0</span>BmB<span class="token operator">-</span>oDqW<span class="token operator">-</span><span class="token class-name">Gh7y</span><span class="token operator">-</span><span class="token class-name">QrO8</span><span class="token operator">-</span>riPQV0 not found or rejected by a <span class="token class-name"><span class="token namespace">filter<span class="token punctuation">.</span></span>
  Couldn</span>'t find device <span class="token keyword">with</span> <span class="token namespace">uuid</span> <span class="token number">83</span>QZB3<span class="token operator">-</span>ZX9A<span class="token operator">-</span><span class="token number">0</span>BmB<span class="token operator">-</span>oDqW<span class="token operator">-</span><span class="token class-name">Gh7y</span><span class="token operator">-</span><span class="token class-name">QrO8</span><span class="token operator">-</span>riPQV0<span class="token punctuation">.</span>
  <span class="token operator">--</span><span class="token operator">-</span> <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda2
  VG <span class="token class-name">Name</span>               centos
  PV <span class="token class-name">Size</span>               <span class="token operator">&lt;</span><span class="token number">19.00</span> <span class="token class-name">GiB</span> <span class="token operator">/</span> not usable <span class="token number">3.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Allocatable</span>           yes <span class="token punctuation">(</span>but full<span class="token punctuation">)</span>
  PE <span class="token class-name">Size</span>               <span class="token number">4.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Total</span> PE              <span class="token number">4863</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">4863</span>
  PV UUID               <span class="token number">0</span>Zh72k<span class="token operator">-</span><span class="token number">0</span>gT0<span class="token operator">-</span>cREa<span class="token operator">-</span>k8eY<span class="token operator">-</span><span class="token class-name">Ylq9</span><span class="token operator">-</span><span class="token class-name">OpGY</span><span class="token operator">-</span>knkfAa
   
  <span class="token operator">--</span><span class="token operator">-</span> <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token punctuation">[</span>unknown<span class="token punctuation">]</span>
  VG <span class="token class-name">Name</span>               centos
  PV <span class="token class-name">Size</span>               <span class="token number">10.00</span> <span class="token class-name">GiB</span> <span class="token operator">/</span> not usable <span class="token number">4.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Allocatable</span>           yes 
  PE <span class="token class-name">Size</span>               <span class="token number">4.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Total</span> PE              <span class="token number">2559</span>
  <span class="token class-name">Free</span> PE               <span class="token number">2559</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">0</span>
  PV UUID               <span class="token number">83</span>QZB3<span class="token operator">-</span>ZX9A<span class="token operator">-</span><span class="token number">0</span>BmB<span class="token operator">-</span>oDqW<span class="token operator">-</span><span class="token class-name">Gh7y</span><span class="token operator">-</span><span class="token class-name">QrO8</span><span class="token operator">-</span>riPQV0
   
  <span class="token string">"/dev/sda5"</span> is a <span class="token keyword">new</span> physical volume of <span class="token string">"&lt;8.00 GiB"</span>
  <span class="token operator">--</span><span class="token operator">-</span> NEW <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda5
  VG <span class="token class-name">Name</span>               
  PV <span class="token class-name">Size</span>               <span class="token operator">&lt;</span><span class="token number">8.00</span> <span class="token class-name">GiB</span>
  <span class="token class-name">Allocatable</span>           NO
  PE <span class="token class-name">Size</span>               <span class="token number">0</span>   
  <span class="token class-name">Total</span> PE              <span class="token number">0</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">0</span>
  PV UUID               <span class="token class-name">AtdtdP</span><span class="token operator">-</span><span class="token class-name">MB9r</span><span class="token operator">-</span>gUP2<span class="token operator">-</span><span class="token class-name">R7o8</span><span class="token operator">-</span><span class="token class-name">SaZw</span><span class="token operator">-</span><span class="token class-name">VWfe</span><span class="token operator">-</span><span class="token class-name">M7wvfo</span>
   
  <span class="token string">"/dev/sda3"</span> is a <span class="token keyword">new</span> physical volume of <span class="token string">"10.00 GiB"</span>
  <span class="token operator">--</span><span class="token operator">-</span> NEW <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda3
  VG <span class="token class-name">Name</span>               
  PV <span class="token class-name">Size</span>               <span class="token number">10.00</span> <span class="token class-name">GiB</span>
  <span class="token class-name">Allocatable</span>           NO
  PE <span class="token class-name">Size</span>               <span class="token number">0</span>   
  <span class="token class-name">Total</span> PE              <span class="token number">0</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">0</span>
  PV UUID               <span class="token class-name">M1gmYR</span><span class="token operator">-</span><span class="token number">9</span>Bk9<span class="token operator">-</span>Z48D<span class="token operator">-</span>aeFK<span class="token operator">-</span><span class="token class-name">N2sT</span><span class="token operator">-</span>cd8L<span class="token operator">-</span>qJr3Lh
</code></pre> 
<p>3.pvscan</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span>root<span class="token annotation punctuation">@Linux122</span> guchenfei<span class="token punctuation">]</span># pvscan
  WARNING<span class="token operator">:</span> <span class="token class-name">Device</span> <span class="token keyword">for</span> PV <span class="token number">83</span>QZB3<span class="token operator">-</span>ZX9A<span class="token operator">-</span><span class="token number">0</span>BmB<span class="token operator">-</span>oDqW<span class="token operator">-</span><span class="token class-name">Gh7y</span><span class="token operator">-</span><span class="token class-name">QrO8</span><span class="token operator">-</span>riPQV0 not found or rejected by a <span class="token class-name"><span class="token namespace">filter<span class="token punctuation">.</span></span>
  Couldn</span>'t find device <span class="token keyword">with</span> <span class="token namespace">uuid</span> <span class="token number">83</span>QZB3<span class="token operator">-</span>ZX9A<span class="token operator">-</span><span class="token number">0</span>BmB<span class="token operator">-</span>oDqW<span class="token operator">-</span><span class="token class-name">Gh7y</span><span class="token operator">-</span><span class="token class-name">QrO8</span><span class="token operator">-</span>riPQV0<span class="token punctuation">.</span>
  PV <span class="token operator">/</span>dev<span class="token operator">/</span>sda2   VG centos          lvm2 <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">19.00</span> <span class="token class-name">GiB</span> <span class="token operator">/</span> <span class="token number">0</span>    free<span class="token punctuation">]</span>
  PV <span class="token punctuation">[</span>unknown<span class="token punctuation">]</span>   VG centos          lvm2 <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">10.00</span> <span class="token class-name">GiB</span> <span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token number">10.00</span> <span class="token class-name">GiB</span> free<span class="token punctuation">]</span>
  PV <span class="token operator">/</span>dev<span class="token operator">/</span>sda5                      lvm2 <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">8.00</span> <span class="token class-name">GiB</span><span class="token punctuation">]</span>
  PV <span class="token operator">/</span>dev<span class="token operator">/</span>sda3                      lvm2 <span class="token punctuation">[</span><span class="token number">10.00</span> <span class="token class-name">GiB</span><span class="token punctuation">]</span>
  <span class="token class-name">Total</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">[</span><span class="token number">46.99</span> <span class="token class-name">GiB</span><span class="token punctuation">]</span> <span class="token operator">/</span> in use<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">[</span><span class="token number">28.99</span> <span class="token class-name">GiB</span><span class="token punctuation">]</span> <span class="token operator">/</span> in no VG<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">18.00</span> <span class="token class-name">GiB</span><span class="token punctuation">]</span>
</code></pre> 
<p>4.去除未知或已丢失的VG</p> 
<pre><code class="prism language-java">vgreduce <span class="token operator">--</span>removemissing <span class="token operator">/</span>dev<span class="token operator">/</span>centos 
</code></pre> 
<p>5.pvdisplay 显示正常</p> 
<pre><code class="prism language-java"><span class="token punctuation">[</span>root<span class="token annotation punctuation">@Linux122</span> guchenfei<span class="token punctuation">]</span># pvdisplay
  <span class="token operator">--</span><span class="token operator">-</span> <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda2
  VG <span class="token class-name">Name</span>               centos
  PV <span class="token class-name">Size</span>               <span class="token operator">&lt;</span><span class="token number">19.00</span> <span class="token class-name">GiB</span> <span class="token operator">/</span> not usable <span class="token number">3.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Allocatable</span>           yes <span class="token punctuation">(</span>but full<span class="token punctuation">)</span>
  PE <span class="token class-name">Size</span>               <span class="token number">4.00</span> <span class="token class-name">MiB</span>
  <span class="token class-name">Total</span> PE              <span class="token number">4863</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">4863</span>
  PV UUID               <span class="token number">0</span>Zh72k<span class="token operator">-</span><span class="token number">0</span>gT0<span class="token operator">-</span>cREa<span class="token operator">-</span>k8eY<span class="token operator">-</span><span class="token class-name">Ylq9</span><span class="token operator">-</span><span class="token class-name">OpGY</span><span class="token operator">-</span>knkfAa
   
  <span class="token string">"/dev/sda5"</span> is a <span class="token keyword">new</span> physical volume of <span class="token string">"&lt;8.00 GiB"</span>
  <span class="token operator">--</span><span class="token operator">-</span> NEW <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda5
  VG <span class="token class-name">Name</span>               
  PV <span class="token class-name">Size</span>               <span class="token operator">&lt;</span><span class="token number">8.00</span> <span class="token class-name">GiB</span>
  <span class="token class-name">Allocatable</span>           NO
  PE <span class="token class-name">Size</span>               <span class="token number">0</span>   
  <span class="token class-name">Total</span> PE              <span class="token number">0</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">0</span>
  PV UUID               <span class="token class-name">AtdtdP</span><span class="token operator">-</span><span class="token class-name">MB9r</span><span class="token operator">-</span>gUP2<span class="token operator">-</span><span class="token class-name">R7o8</span><span class="token operator">-</span><span class="token class-name">SaZw</span><span class="token operator">-</span><span class="token class-name">VWfe</span><span class="token operator">-</span><span class="token class-name">M7wvfo</span>
   
  <span class="token string">"/dev/sda3"</span> is a <span class="token keyword">new</span> physical volume of <span class="token string">"10.00 GiB"</span>
  <span class="token operator">--</span><span class="token operator">-</span> NEW <span class="token class-name">Physical</span> volume <span class="token operator">--</span><span class="token operator">-</span>
  PV <span class="token class-name">Name</span>               <span class="token operator">/</span>dev<span class="token operator">/</span>sda3
  VG <span class="token class-name">Name</span>               
  PV <span class="token class-name">Size</span>               <span class="token number">10.00</span> <span class="token class-name">GiB</span>
  <span class="token class-name">Allocatable</span>           NO
  PE <span class="token class-name">Size</span>               <span class="token number">0</span>   
  <span class="token class-name">Total</span> PE              <span class="token number">0</span>
  <span class="token class-name">Free</span> PE               <span class="token number">0</span>
  <span class="token class-name">Allocated</span> PE          <span class="token number">0</span>
  PV UUID               <span class="token class-name">M1gmYR</span><span class="token operator">-</span><span class="token number">9</span>Bk9<span class="token operator">-</span>Z48D<span class="token operator">-</span>aeFK<span class="token operator">-</span><span class="token class-name">N2sT</span><span class="token operator">-</span>cd8L<span class="token operator">-</span>qJr3Lh  
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/765fe1e01db47ba2992f59fcc3713680/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">文件查看命令more、less、cat</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc89d257a590198f2c12044eb6ad3ca5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux命令-ss</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>