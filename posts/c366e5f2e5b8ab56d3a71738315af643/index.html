<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LeetCode·每日一题·722. 删除注释·模拟 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LeetCode·每日一题·722. 删除注释·模拟" />
<meta property="og:description" content="题目 示例 思路 题意 -&gt; 给定一段代码，将代码中的注释删除并返回。
由于注释只有两种类型：
字符串// 表示行注释，表示//和其右侧的其余字符应该被忽略。字符串/* 表示一个块注释，它表示直到下一个（非重叠）出现的*/之间的所有字符都应该被忽略。（阅读顺序为从左到右）非重叠是指，字符串/*/并没有结束块注释，因为注释的结尾与开头相重叠。 那么可以直接模拟，逐行分析源代码。每个字符有两种情况，要么在一个注释内要么不在。因此我们用 in_block 变量来标记状态，该变量为 true 表示在注释内，反之则不在。
假设此刻不在注释块内：
遇到 ‘/*’，则将状态改为在注释块内，继续遍历后面第三个字符。遇到 ‘//’，则直接忽略该行后面的部分。遇到其他字符，将该字符记录到 new_line 中。 假设此刻在注释块内，遇到 ‘*/’，则将状态改为不在注释块内，继续遍历后面第三个字符。 我们用 new_line 记录新的一行，当遍历到每行的末尾时，如果不在注释块内并且 new_line 不为空，就把它放入答案中。
代码注释超级详细
代码 /** * Note: The returned array must be malloced, assume caller calls free(). */ #define MAX_LINE_LEN 80 char ** removeComments(char ** source, int sourceSize, int* returnSize) { char **res = (char **)calloc(sourceSize, sizeof(char *));//保存有效值 char new_line[sourceSize * 100 &#43; 1];//临时数组 int pos = 0, new_line_pos = 0; bool in_block = false; for (int j = 0; j &lt; sourceSize; j&#43;&#43;) {//遍历代码 char *line = source[j];//取当前字符串 int line_size = strlen(line); for (int i = 0; i &lt; line_size; i&#43;&#43;) {//枚举每一个字符 if (in_block) { //判断注释结束位置 if (i &#43; 1 &lt; line_size &amp;&amp; line[i] == &#39;*&#39; &amp;&amp; line[i &#43; 1] == &#39;/&#39;) { in_block = false; i&#43;&#43;; } } else { //判断注释开始位置 if (i &#43; 1 &lt; line_size &amp;&amp; line[i] == &#39;/&#39; &amp;&amp; line[i &#43; 1] == &#39;*&#39;) { in_block = true; i&#43;&#43;; } else if (i &#43; 1 &lt; line_size &amp;&amp; line[i] == &#39;/&#39; &amp;&amp; line[i &#43; 1] == &#39;/&#39;) { //行注释，直接跳过当前字符串 break; } else { //有效代码，记录 new_line[new_line_pos&#43;&#43;] = line[i]; } } } //存储有效字符串 if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c366e5f2e5b8ab56d3a71738315af643/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-03T09:43:45+08:00" />
<meta property="article:modified_time" content="2023-08-03T09:43:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LeetCode·每日一题·722. 删除注释·模拟</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h2>题目<img alt="" height="746" src="https://images2.imgbox.com/c8/04/FPb0Uew0_o.png" width="887"></h2> 
<p> </p> 
<h2>示例<img alt="" height="565" src="https://images2.imgbox.com/63/c9/zlEbgl9w_o.png" width="885"></h2> 
<p> </p> 
<h2>思路</h2> 
<p>题意 -&gt; 给定一段代码，将代码中的注释删除并返回。</p> 
<p>由于注释只有两种类型：</p> 
<ul><li>字符串// 表示行注释，表示//和其右侧的其余字符应该被忽略。</li><li>字符串/* 表示一个块注释，它表示直到下一个（非重叠）出现的*/之间的所有字符都应该被忽略。（阅读顺序为从左到右）非重叠是指，字符串/*/并没有结束块注释，因为注释的结尾与开头相重叠。</li></ul> 
<p>那么可以直接模拟，逐行分析源代码。每个字符有两种情况，要么在一个注释内要么不在。因此我们用 in_block 变量来标记状态，该变量为 true 表示在注释内，反之则不在。</p> 
<p>假设此刻不在注释块内：</p> 
<ul><li>遇到 ‘/*’，则将状态改为在注释块内，继续遍历后面第三个字符。</li><li>遇到 ‘//’，则直接忽略该行后面的部分。</li><li>遇到其他字符，将该字符记录到 new_line 中。 假设此刻在注释块内，遇到 ‘*/’，则将状态改为不在注释块内，继续遍历后面第三个字符。</li></ul> 
<p>我们用 new_line 记录新的一行，当遍历到每行的末尾时，如果不在注释块内并且 new_line 不为空，就把它放入答案中。</p> 
<p><strong>代码注释超级详细</strong></p> 
<h2>代码</h2> 
<pre><code class="language-cpp">
/**
 * Note: The returned array must be malloced, assume caller calls free().
 */
#define MAX_LINE_LEN 80
char ** removeComments(char ** source, int sourceSize, int* returnSize) {
    char **res = (char **)calloc(sourceSize, sizeof(char *));//保存有效值
    char new_line[sourceSize * 100 + 1];//临时数组
    int pos = 0, new_line_pos = 0;
    bool in_block = false;
    for (int j = 0; j &lt; sourceSize; j++) {//遍历代码
        char *line = source[j];//取当前字符串
        int line_size = strlen(line);
        for (int i = 0; i &lt; line_size; i++) {//枚举每一个字符
            if (in_block) {
                //判断注释结束位置
                if (i + 1 &lt; line_size &amp;&amp; line[i] == '*' &amp;&amp; line[i + 1] == '/') {
                    in_block = false;
                    i++;
                }
            } else {
                //判断注释开始位置
                if (i + 1 &lt; line_size &amp;&amp; line[i] == '/' &amp;&amp; line[i + 1] == '*') {    
                    in_block = true;
                    i++;
                } else if (i + 1 &lt; line_size &amp;&amp; line[i] == '/' &amp;&amp; line[i + 1] == '/') {
                    //行注释，直接跳过当前字符串
                    break;
                } else {
                    //有效代码，记录
                    new_line[new_line_pos++] = line[i];
                }
            }
        }
        //存储有效字符串
        if (!in_block &amp;&amp; new_line_pos &gt; 0) {
            new_line[new_line_pos] = '\0';
            res[pos] = (char *)calloc(new_line_pos + 1, sizeof(char));
            strcpy(res[pos], new_line);
            pos++;
            new_line_pos = 0;
        }
        *returnSize = pos;
    }
    return res;
}


作者：小迅
链接：https://leetcode.cn/problems/remove-comments/solutions/2370701/mo-ni-zhu-shi-chao-ji-xiang-xi-by-xun-ge-2ovj/
来源：力扣（LeetCode）
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c671750d52d364ec755c58857dd3cf3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mysql导出(多张表)表结构及表数据 mysqldump用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1a08d1429ec1338b48f2b27c1cf05ac1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一条命令重启supervisor所有RUNNING状态的进程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>