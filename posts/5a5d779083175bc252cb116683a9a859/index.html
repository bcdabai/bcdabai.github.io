<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 3 脚手架搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 3 脚手架搭建" />
<meta property="og:description" content="文章目录 一、环境准备1.1 node.js 安装1.2 包管理工具安装：可选 二、创建项目2.1 使用 npm2.2 使用 yarn 三、配置项目3.1 安装初始依赖3.2 增加依赖3.2 配置自动导包3.3 配置 eslint 规则3.4 .vue 文件导入报错解决 四、路由配置4.1 路由类型定义4.2 index.ts 路由主入口4.3 system.ts 自定义路由4.4 routerGuard.ts 路由守护 五、常用类型定义5.1 response.d.ts5.2 user.d.ts 自定义返回类型 六、工具类6.1 二次封装 axios6.1.1 httpClient.ts6.1.2 httpClient 实例 6.2 浏览器本地存储6.3 系统设置工具 七、本地响应式存储7.1 定义7.1.1 user.ts7.1.2 permission.ts7.1.3 auth.ts 7.2 调用 八、全局样式8.1 样式重置8.1.1 index.scss8.1.2 reset.scss8.1.3 样式引入 8.2 样式常量8.2.1 variables.scss8.2.2 常量使用 九、layout9.1 面包屑9.2 导航栏9.3 侧边栏9.4 页脚9.5 主体结构 十、错误页面10.1 404页面10.2 401页面 十一、系统设置11.1 setting.ts11.2 App.vue11.3 main.ts 技术栈" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5a5d779083175bc252cb116683a9a859/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-18T17:00:03+08:00" />
<meta property="article:modified_time" content="2023-05-18T17:00:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 3 脚手架搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_71" rel="nofollow">一、环境准备</a></li><li><ul><li><a href="#11_nodejs__73" rel="nofollow">1.1 node.js 安装</a></li><li><a href="#12__77" rel="nofollow">1.2 包管理工具安装：可选</a></li></ul> 
   </li><li><a href="#_90" rel="nofollow">二、创建项目</a></li><li><ul><li><a href="#21__npm_94" rel="nofollow">2.1 使用 npm</a></li><li><a href="#22__yarn_104" rel="nofollow">2.2 使用 yarn</a></li></ul> 
   </li><li><a href="#_128" rel="nofollow">三、配置项目</a></li><li><ul><li><a href="#31__130" rel="nofollow">3.1 安装初始依赖</a></li><li><a href="#32__139" rel="nofollow">3.2 增加依赖</a></li><li><a href="#32__207" rel="nofollow">3.2 配置自动导包</a></li><li><a href="#33__eslint__286" rel="nofollow">3.3 配置 eslint 规则</a></li><li><a href="#34_vue__335" rel="nofollow">3.4 .vue 文件导入报错解决</a></li></ul> 
   </li><li><a href="#_357" rel="nofollow">四、路由配置</a></li><li><ul><li><a href="#41__373" rel="nofollow">4.1 路由类型定义</a></li><li><a href="#42_indexts__402" rel="nofollow">4.2 index.ts 路由主入口</a></li><li><a href="#43__systemts__480" rel="nofollow">4.3 system.ts 自定义路由</a></li><li><a href="#44_routerGuardts__529" rel="nofollow">4.4 routerGuard.ts 路由守护</a></li></ul> 
   </li><li><a href="#_603" rel="nofollow">五、常用类型定义</a></li><li><ul><li><a href="#51_responsedts_605" rel="nofollow">5.1 response.d.ts</a></li><li><a href="#52__userdts___637" rel="nofollow">5.2 user.d.ts 自定义返回类型</a></li></ul> 
   </li><li><a href="#_666" rel="nofollow">六、工具类</a></li><li><ul><li><a href="#61__axios_668" rel="nofollow">6.1 二次封装 axios</a></li><li><ul><li><a href="#611_httpClientts_670" rel="nofollow">6.1.1 httpClient.ts</a></li><li><a href="#612_httpClient__736" rel="nofollow">6.1.2 httpClient 实例</a></li></ul> 
    </li><li><a href="#62__805" rel="nofollow">6.2 浏览器本地存储</a></li><li><a href="#63__861" rel="nofollow">6.3 系统设置工具</a></li></ul> 
   </li><li><a href="#_876" rel="nofollow">七、本地响应式存储</a></li><li><ul><li><a href="#71__878" rel="nofollow">7.1 定义</a></li><li><ul><li><a href="#711_userts_880" rel="nofollow">7.1.1 user.ts</a></li><li><a href="#712_permissionts_909" rel="nofollow">7.1.2 permission.ts</a></li><li><a href="#713_authts_971" rel="nofollow">7.1.3 auth.ts</a></li></ul> 
    </li><li><a href="#72__1099" rel="nofollow">7.2 调用</a></li></ul> 
   </li><li><a href="#_1147" rel="nofollow">八、全局样式</a></li><li><ul><li><a href="#81__1149" rel="nofollow">8.1 样式重置</a></li><li><ul><li><a href="#811_indexscss_1151" rel="nofollow">8.1.1 index.scss</a></li><li><a href="#812_resetscss_1177" rel="nofollow">8.1.2 reset.scss</a></li><li><a href="#813__1368" rel="nofollow">8.1.3 样式引入</a></li></ul> 
    </li><li><a href="#82__1408" rel="nofollow">8.2 样式常量</a></li><li><ul><li><a href="#821_variablesscss_1410" rel="nofollow">8.2.1 variables.scss</a></li><li><a href="#822__1418" rel="nofollow">8.2.2 常量使用</a></li></ul> 
   </li></ul> 
   </li><li><a href="#layout_1429" rel="nofollow">九、layout</a></li><li><ul><li><a href="#91__1431" rel="nofollow">9.1 面包屑</a></li><li><a href="#92__1469" rel="nofollow">9.2 导航栏</a></li><li><a href="#93__1492" rel="nofollow">9.3 侧边栏</a></li><li><a href="#94___1637" rel="nofollow">9.4 页脚</a></li><li><a href="#95__1652" rel="nofollow">9.5 主体结构</a></li></ul> 
   </li><li><a href="#_1695" rel="nofollow">十、错误页面</a></li><li><ul><li><a href="#101__404_1699" rel="nofollow">10.1 404页面</a></li><li><a href="#102_401_1963" rel="nofollow">10.2 401页面</a></li></ul> 
   </li><li><a href="#_2077" rel="nofollow">十一、系统设置</a></li><li><ul><li><a href="#111__settingts_2079" rel="nofollow">11.1 setting.ts</a></li><li><a href="#112_Appvue_2123" rel="nofollow">11.2 App.vue</a></li><li><a href="#113_maints_2145" rel="nofollow">11.3 main.ts</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>技术栈</p> 
 <ul><li>vite</li><li>vue3</li><li>typescript</li><li>vue-router4</li><li>pinia</li><li>axios</li><li>eslint</li><li>prettier</li><li>sass</li></ul> 
</blockquote> 
<blockquote> 
 <p>项目结构：</p> 
 <ul><li> <p><strong>src</strong> ： 项目代码</p> 
   <blockquote> 
    <ul><li> <p><strong>api</strong> ：封装的网络请求</p> </li><li> <p><strong>assets</strong>：静态文件</p> </li><li> <p><strong>components</strong>：组件</p> </li><li> <p><strong>layout</strong>：主体结构</p> </li><li> <p><strong>model</strong>： 类型定义，严格遵守 ts 准则</p> </li><li> <p><strong>router</strong>： 路由管理</p> </li><li> <p><strong>stores</strong>： 全局变量管理</p> </li><li> <p><strong>utils</strong>： 工具包</p> <p>-httpClient.ts : axios 二次封装</p> </li><li> <p><strong>views</strong>：页面</p> <p>-App.vue ： 系统入口页面</p> <p>-main.ts ： 系统启动入口</p> <p>-setting.ts ： 系统设置</p> </li></ul> 
   </blockquote> </li><li> <p><strong>types</strong></p> 
   <blockquote> 
    <p><strong>-route.d.ts</strong> : 定义路由类型</p> 
   </blockquote> </li></ul> 
 <p><strong>-.eslintrc.cjs</strong> ：定义 eslint 规则</p> 
 <p><strong>-.eslintrc-auto-import.json</strong> ：unplugin-auto-import 插件自动生成的 eslint 类型规范</p> 
 <p><strong>-.prettierrc.json</strong> ：prettier 规则</p> 
 <p><strong>-auto-imports.d.ts</strong> ： unplugin-auto-import 插件自动生成，定义自动导入的方法</p> 
 <p><strong>-components.d.ts</strong> ：unplugin-vue-components 自动生成，定义自动导入的组件</p> 
 <p><strong>-env.d.ts</strong> ： 全局环境变量控制</p> 
 <p><strong>-package.json</strong> ： 包管理、依赖管理</p> 
 <p><strong>-tsconfig.app.json</strong> ：app 相关配置</p> 
 <p><strong>-tsconfig.json</strong> ：项目配置入口</p> 
 <p><strong>-tsconfig.node.json</strong> ： node 相关配置</p> 
 <p><strong>-vite.config.ts</strong> ： 项目内配置</p> 
</blockquote> 
<h3><a id="_71"></a>一、环境准备</h3> 
<h4><a id="11_nodejs__73"></a>1.1 node.js 安装</h4> 
<p><a href="https://nodejs.org/en" rel="nofollow">node.js 官方下载地址</a></p> 
<h4><a id="12__77"></a>1.2 包管理工具安装：可选</h4> 
<ul><li> <p>npm：</p> <p>node.js 中自带，速度较慢</p> </li><li> <p>yarn：</p> </li></ul> 
<pre><code class="prism language-ruby"><span class="token comment"># cmd 全局安装 yarn</span>
npm install <span class="token operator">-</span>g yarn 
</code></pre> 
<h3><a id="_90"></a>二、创建项目</h3> 
<blockquote> 
 <p>选择要创建项目的目录，打开cmd 执行以下命令</p> 
</blockquote> 
<h4><a id="21__npm_94"></a>2.1 使用 npm</h4> 
<pre><code class="prism language-ruby">npm init vite<span class="token variable">@latest</span> 
<span class="token comment"># npm 6.x</span>
npm init vite<span class="token variable">@latest</span> 项目名称 <span class="token operator">--</span>template vue
<span class="token comment"># npm 7+, 需要额外的双横线：</span>
npm init vite<span class="token variable">@latest</span> 项目名称 <span class="token operator">--</span> <span class="token operator">--</span>template vue
</code></pre> 
<h4><a id="22__yarn_104"></a>2.2 使用 yarn</h4> 
<pre><code class="prism language-ruby"><span class="token comment"># 方式一</span>
yarn create vite
<span class="token comment"># 方式二</span>
yarn create vite 项目名称 <span class="token operator">--</span>template vue
<span class="token comment"># 方式三：该方式可直接配置需要的组件，可减少依赖版本冲突</span>
npm init vue
<span class="token comment"># npm init vue 提示如下：</span>
✔ <span class="token constant">Project</span> name<span class="token punctuation">:</span> … <span class="token operator">&lt;</span>your<span class="token operator">-</span>project<span class="token operator">-</span>name<span class="token operator">&gt;</span>
✔ <span class="token constant">Add</span> <span class="token constant">TypeScript?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">JSX</span> <span class="token constant">Support?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">Vue</span> <span class="token constant">Router</span> <span class="token keyword">for</span> <span class="token constant">Single</span> <span class="token constant">Page</span> <span class="token constant">Application</span> development<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">Pinia</span> <span class="token keyword">for</span> state management<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">Vitest</span> <span class="token keyword">for</span> <span class="token constant">Unit</span> testing<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">Cypress</span> <span class="token keyword">for</span> both <span class="token constant">Unit</span> <span class="token keyword">and</span> <span class="token constant">End</span><span class="token operator">-</span>to<span class="token operator">-</span><span class="token constant">End</span> testing<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">ESLint</span> <span class="token keyword">for</span> code quality<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>
✔ <span class="token constant">Add</span> <span class="token constant">Prettier</span> <span class="token keyword">for</span> code formatting<span class="token operator">?</span> … <span class="token constant">No</span> <span class="token operator">/</span> <span class="token constant">Yes</span>

<span class="token constant">Scaffolding</span> project <span class="token keyword">in</span> <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">&lt;</span>your<span class="token operator">-</span>project<span class="token operator">-</span>name<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token constant">Done</span><span class="token punctuation">.</span>
</code></pre> 
<h3><a id="_128"></a>三、配置项目</h3> 
<h4><a id="31__130"></a>3.1 安装初始依赖</h4> 
<pre><code class="prism language-ruby"><span class="token comment"># npm</span>
npm install
<span class="token comment"># yarn</span>
yarn init
</code></pre> 
<h4><a id="32__139"></a>3.2 增加依赖</h4> 
<blockquote> 
 <p>yarn： yarn add 依赖名称</p> 
 <p>npm： npm install 依赖名称</p> 
</blockquote> 
<pre><code class="prism language-ruby"><span class="token comment"># 异步请求包</span>
yarn add axios
<span class="token comment"># scss 解析器，也可使用 less 等</span>
yarn add sass <span class="token operator">-</span>d
<span class="token comment"># 自动导包插件</span>
yarn add unplugin<span class="token operator">-</span>auto<span class="token operator">-</span>import <span class="token operator">-</span>d
yarn add unplugin<span class="token operator">-</span>icons <span class="token operator">-</span>d
yarn add unplugin<span class="token operator">-</span>vue<span class="token operator">-</span>components <span class="token operator">-</span>d
<span class="token comment"># 页面加载时的进度条，后面路由守护时使用</span>
yarn add nprogress 
yarn add <span class="token variable">@types</span><span class="token operator">/</span>nprogress <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> 
<blockquote> 
 <p>package.json</p> 
 <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
<span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"crowd-funding-fronted"</span><span class="token punctuation">,</span>
<span class="token string">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.0"</span><span class="token punctuation">,</span>
<span class="token string">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
 <span class="token string">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span>
 <span class="token string">"build"</span><span class="token operator">:</span> <span class="token string">"run-p type-check build-only"</span><span class="token punctuation">,</span>
 <span class="token string">"preview"</span><span class="token operator">:</span> <span class="token string">"vite preview"</span><span class="token punctuation">,</span>
 <span class="token string">"build-only"</span><span class="token operator">:</span> <span class="token string">"vite build"</span><span class="token punctuation">,</span>
 <span class="token string">"type-check"</span><span class="token operator">:</span> <span class="token string">"vue-tsc --noEmit"</span><span class="token punctuation">,</span>
 <span class="token string">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix --ignore-path .gitignore"</span><span class="token punctuation">,</span>
 <span class="token string">"format"</span><span class="token operator">:</span> <span class="token string">"prettier --write src/"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
 <span class="token string">"axios"</span><span class="token operator">:</span> <span class="token string">"^1.4.0"</span><span class="token punctuation">,</span>
 <span class="token string">"element-plus"</span><span class="token operator">:</span> <span class="token string">"^2.3.4"</span><span class="token punctuation">,</span>
 <span class="token string">"pinia"</span><span class="token operator">:</span> <span class="token string">"^2.0.35"</span><span class="token punctuation">,</span>
 <span class="token string">"vue"</span><span class="token operator">:</span> <span class="token string">"^3.2.47"</span><span class="token punctuation">,</span>
 <span class="token string">"vue-router"</span><span class="token operator">:</span> <span class="token string">"^4.1.6"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
 <span class="token string">"@rushstack/eslint-patch"</span><span class="token operator">:</span> <span class="token string">"^1.2.0"</span><span class="token punctuation">,</span>
 <span class="token string">"@tsconfig/node18"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string">"@types/jsdom"</span><span class="token operator">:</span> <span class="token string">"^21.1.1"</span><span class="token punctuation">,</span>
 <span class="token string">"@types/node"</span><span class="token operator">:</span> <span class="token string">"^18.16.3"</span><span class="token punctuation">,</span>
 <span class="token string">"@vitejs/plugin-vue"</span><span class="token operator">:</span> <span class="token string">"^4.2.1"</span><span class="token punctuation">,</span>
 <span class="token string">"@vue/eslint-config-prettier"</span><span class="token operator">:</span> <span class="token string">"^7.1.0"</span><span class="token punctuation">,</span>
 <span class="token string">"@vue/eslint-config-typescript"</span><span class="token operator">:</span> <span class="token string">"^11.0.3"</span><span class="token punctuation">,</span>
 <span class="token string">"@vue/tsconfig"</span><span class="token operator">:</span> <span class="token string">"^0.3.2"</span><span class="token punctuation">,</span>
 <span class="token string">"eslint"</span><span class="token operator">:</span> <span class="token string">"^8.39.0"</span><span class="token punctuation">,</span>
 <span class="token string">"eslint-plugin-vue"</span><span class="token operator">:</span> <span class="token string">"^9.11.0"</span><span class="token punctuation">,</span>
 <span class="token string">"jsdom"</span><span class="token operator">:</span> <span class="token string">"^22.0.0"</span><span class="token punctuation">,</span>
 <span class="token string">"npm-run-all"</span><span class="token operator">:</span> <span class="token string">"^4.1.5"</span><span class="token punctuation">,</span>
 <span class="token string">"prettier"</span><span class="token operator">:</span> <span class="token string">"^2.8.8"</span><span class="token punctuation">,</span>
 <span class="token string">"sass"</span><span class="token operator">:</span> <span class="token string">"^1.62.1"</span><span class="token punctuation">,</span>
 <span class="token string">"typescript"</span><span class="token operator">:</span> <span class="token string">"~5.0.4"</span><span class="token punctuation">,</span>
 <span class="token string">"unplugin-auto-import"</span><span class="token operator">:</span> <span class="token string">"^0.15.3"</span><span class="token punctuation">,</span>
 <span class="token string">"unplugin-icons"</span><span class="token operator">:</span> <span class="token string">"^0.16.1"</span><span class="token punctuation">,</span>
 <span class="token string">"unplugin-vue-components"</span><span class="token operator">:</span> <span class="token string">"^0.24.1"</span><span class="token punctuation">,</span>
 <span class="token string">"vite"</span><span class="token operator">:</span> <span class="token string">"^4.3.4"</span><span class="token punctuation">,</span>
 <span class="token string">"vue-tsc"</span><span class="token operator">:</span> <span class="token string">"^1.6.4"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
</blockquote> 
<h4><a id="32__207"></a>3.2 配置自动导包</h4> 
<pre><code class="prism language-ts"><span class="token comment">// vite.config.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> fileURLToPath<span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'node:url'</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span>
<span class="token keyword">import</span> Icons <span class="token keyword">from</span> <span class="token string">'unplugin-icons/vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  base<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 修改端口号</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span> 
    proxy<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 后端微服务时可在此处配置代理，解决测试环境跨域问题</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      imports<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'vue-router'</span><span class="token punctuation">,</span> <span class="token string">'pinia'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      eslintrc<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Default `false`</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 默认组件加载</span>
      dirs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/**/*.vue'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.ts'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.d.ts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 全局导入组件</span>
      globs<span class="token operator">:</span> <span class="token punctuation">[</span> 
        <span class="token string">'src/layout/**/*.vue'</span><span class="token punctuation">,</span>
        <span class="token string">'src/layout/**/*.ts'</span><span class="token punctuation">,</span>
        <span class="token string">'src/layout/**/*.d.ts'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'ts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Icons</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">/* options */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    alias<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">'@'</span><span class="token operator">:</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span><span class="token string">'./src'</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>配置后会在根目录下自动生成以下文件：</p> 
 <ul><li> <p>components.d.ts</p> <p>组件库自动导入、自定义组件自动导入</p> </li><li> <p>auto-imports.d.ts</p> <p>vue 相关方法自动注入</p> </li><li> <p>.prettierrc</p> <p>prettier 规则</p> </li><li> <p>.eslintrc.cjs</p> <p>eslint 规则</p> </li><li> <p>.eslintrc-auto-import.json</p> <p>auto-imports 自动插件生成的 eslint 规则，需要在 eslint 中引入</p> </li></ul> 
</blockquote> 
<h4><a id="33__eslint__286"></a>3.3 配置 eslint 规则</h4> 
<pre><code class="prism language-js"><span class="token comment">// .eslintrc.cjs</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@rushstack/eslint-patch/modern-module-resolution'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">'extends'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-typescript'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-prettier/skip-formatting'</span><span class="token punctuation">,</span>
    <span class="token comment">// 引入 auto-imports 自动生成的规则</span>
    <span class="token string">'./.eslintrc-auto-import.json'</span>  
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    ecmaVersion<span class="token operator">:</span> <span class="token string">'latest'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'prettier/prettier'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'error'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        arrowParens<span class="token operator">:</span> <span class="token string">'always'</span><span class="token punctuation">,</span>
        bracketSameLine<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        bracketSpacing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        embeddedLanguageFormatting<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
        htmlWhitespaceSensitivity<span class="token operator">:</span> <span class="token string">'ignore'</span><span class="token punctuation">,</span>
        insertPragma<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        jsxSingleQuote<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        printWidth<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
        proseWrap<span class="token operator">:</span> <span class="token string">'preserve'</span><span class="token punctuation">,</span>
        quoteProps<span class="token operator">:</span> <span class="token string">'as-needed'</span><span class="token punctuation">,</span>
        requirePragma<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        semi<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        singleAttributePerLine<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        singleQuote<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        tabWidth<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        trailingComma<span class="token operator">:</span> <span class="token string">'es5'</span><span class="token punctuation">,</span>
        useTabs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        vueIndentScriptAndStyle<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 设置文件命名可以为单个单词 </span>
      <span class="token string">'vue/multi-word-component-names'</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="34_vue__335"></a>3.4 .vue 文件导入报错解决</h4> 
<pre><code class="prism language-ts"><span class="token comment">// env.d.ts</span>
<span class="token comment">/// &lt;reference types="vite/client" /&gt;</span>
<span class="token keyword">interface</span> <span class="token class-name">ImportMetaEnv</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">readonly</span> <span class="token constant">VITE_APP_BASE_API</span><span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> <span class="token constant">VITE_APP_DEV_USER</span><span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> <span class="token constant">VITE_APP_DEV_PWD</span><span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">// more env variables...</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ImportMeta</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">readonly</span> env<span class="token operator">:</span> ImportMetaEnv
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token comment">// .vue 文件引入报错解决</span>

</code></pre> 
<h3><a id="_357"></a>四、路由配置</h3> 
<blockquote> 
 <p>该 layout 仅供参考，可按需求自行替换</p> 
 <p>src/router:</p> 
 <ul><li> <p>index.ts</p> <p>路由主要加载文件，可引入自定义路由文件</p> </li><li> <p>system.ts</p> <p>根据用户需求自定义路由文件，定义完成后在 index 中引入</p> </li><li> <p>routerGuard.ts<br> 路由守护</p> </li></ul> 
</blockquote> 
<h4><a id="41__373"></a>4.1 路由类型定义</h4> 
<pre><code class="prism language-ts"><span class="token comment">// types/route.d.ts</span>
<span class="token comment">// This can be directly added to any of your `.ts` files like `router.ts`</span>
<span class="token comment">// It can also be added to a `.d.ts` file, in which case you will need to add an export</span>
<span class="token comment">// to ensure it is treated as a module</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token string">'vue-router'</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue-router'</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">interface</span> <span class="token class-name">RouteMeta</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 标题</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token comment">// 图标</span>
    icon<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token comment">// 访问权限</span>
    perms<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// 是否在菜单中,默认在,设置为true则不在</span>
    hidden<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token comment">// 是否忽略子菜单全都被过滤掉导致的不显示,设置为true时忽略</span>
    alwaysShow<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token comment">// 是否在角色管理中不显示</span>
    roleManageIgnore<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="42_indexts__402"></a>4.2 index.ts 路由主入口</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/router/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">RouteRecordRaw</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> system <span class="token keyword">from</span> <span class="token string">'@/router/system'</span> <span class="token comment">// 自定义路由文件</span>

<span class="token comment">// 静态路由</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> commonRoutes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    path<span class="token operator">:</span> <span class="token string">'/layout'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'Layout'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/layout/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      title<span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
      hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        path<span class="token operator">:</span> <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'dashboard'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Dashboard.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          title<span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
          hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      title<span class="token operator">:</span> <span class="token string">'登录重定向'</span><span class="token punctuation">,</span>
      hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/login/Login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      title<span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">,</span>
      hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    path<span class="token operator">:</span> <span class="token string">'/404'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'404'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/error/404.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      title<span class="token operator">:</span> <span class="token string">'404'</span><span class="token punctuation">,</span>
      hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    path<span class="token operator">:</span> <span class="token string">'/401'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'401'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/error/401.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      title<span class="token operator">:</span> <span class="token string">'401'</span><span class="token punctuation">,</span>
      hidden<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// 将静态路由 和 自定义路由进行整合</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> allRoutes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>commonRoutes<span class="token punctuation">,</span> system<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> allRoutes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

</code></pre> 
<h4><a id="43__systemts__480"></a>4.3 system.ts 自定义路由</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/router/system.ts</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/layout/Home.vue'</span>

<span class="token comment">// 该路由文件的最顶层路由</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> systemRoute<span class="token operator">:</span> RouteRecordRaw <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  path<span class="token operator">:</span> <span class="token string">'/system'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'system'</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    title<span class="token operator">:</span> <span class="token string">'系统管理'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Home<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> userRoute<span class="token operator">:</span> RouteRecordRaw <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  path<span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    title<span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/system/user/user.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> roleRoute<span class="token operator">:</span> RouteRecordRaw <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  path<span class="token operator">:</span> <span class="token string">'/role'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'role'</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    title<span class="token operator">:</span> <span class="token string">'角色管理'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/system/role/role.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> logRoute<span class="token operator">:</span> RouteRecordRaw <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  path<span class="token operator">:</span> <span class="token string">'/log'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'log'</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    title<span class="token operator">:</span> <span class="token string">'日志管理'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/system/log/log.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>systemRoute<span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token punctuation">[</span>userRoute<span class="token punctuation">,</span> roleRoute<span class="token punctuation">,</span> logRoute<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="44_routerGuardts__529"></a>4.4 routerGuard.ts 路由守护</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/router/routerGuard.ts</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'@/router/index'</span>
<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">'nprogress'</span>
<span class="token keyword">import</span> <span class="token string">'nprogress/nprogress.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> isNavigationFailure<span class="token punctuation">,</span> NavigationFailureType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ElMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus'</span>
<span class="token keyword">import</span> getPageTitle <span class="token keyword">from</span> <span class="token string">'@/utils/settingUtils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> authStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/auth'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> permissionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/permission'</span>

<span class="token comment">// 白名单</span>
<span class="token keyword">const</span> whiteList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/401'</span><span class="token punctuation">,</span> <span class="token string">'/404'</span><span class="token punctuation">]</span>

<span class="token comment">// 路由守护前</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 白名单直接 pass</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>whiteList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>

  <span class="token comment">// 登录检测</span>
  <span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">authStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> authenticated <span class="token operator">=</span> <span class="token keyword">await</span> auth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'Login'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>authenticated<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'Home'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>authenticated<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'Login'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 权限检查</span>
  <span class="token keyword">const</span> permission <span class="token operator">=</span> <span class="token function">permissionStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkPermission</span><span class="token punctuation">(</span>permission<span class="token punctuation">.</span>perms<span class="token punctuation">,</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      name<span class="token operator">:</span> <span class="token string">'Unauthorized'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 路由守护结束后</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>failure<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNavigationFailure</span><span class="token punctuation">(</span>failure<span class="token punctuation">,</span> NavigationFailureType<span class="token punctuation">.</span>aborted<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>failure<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token function">getPageTitle</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 权限校验
 * @param hasPerms 用户已经有的权限
 * @param requirePerms 用户访问需要的权限
 */</span>
<span class="token keyword">function</span> <span class="token function">checkPermission</span><span class="token punctuation">(</span>hasPerms<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> requirePerms<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>requirePerms <span class="token operator">&amp;&amp;</span> requirePerms<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> hasPerms<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perms<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> requirePerms<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>perms<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="_603"></a>五、常用类型定义</h3> 
<h4><a id="51_responsedts_605"></a>5.1 response.d.ts</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/model/response.d.ts</span>
<span class="token comment">// 父接口， 不返回对象</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">BaseResponse</span> <span class="token punctuation">{<!-- --></span>
  success<span class="token operator">:</span> <span class="token builtin">boolean</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span>
  message<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用于返回一个对象</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ItemResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseResponse</span> <span class="token punctuation">{<!-- --></span>
  item<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用于返回一个List</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ListResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseResponse</span> <span class="token punctuation">{<!-- --></span>
  items<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用于返回含分页的 list</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PageResponse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseResponse</span> <span class="token punctuation">{<!-- --></span>
  pageNum<span class="token operator">:</span> <span class="token builtin">number</span>
  pageSize<span class="token operator">:</span> <span class="token builtin">number</span>
  total<span class="token operator">:</span> <span class="token builtin">number</span>
  totalPages<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  items<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="52__userdts___637"></a>5.2 user.d.ts 自定义返回类型</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/model/user.d.ts</span>
<span class="token comment">// 用户信息，用于存放在全局变量</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{<!-- --></span>
  username<span class="token operator">:</span> <span class="token builtin">string</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  phone<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  email<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 登录的用户</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">LoginUser</span> <span class="token punctuation">{<!-- --></span>
  username<span class="token operator">:</span> <span class="token builtin">string</span>
  password<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注册用户</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RegisterUser</span> <span class="token punctuation">{<!-- --></span>
  username<span class="token operator">:</span> <span class="token builtin">string</span>
  password<span class="token operator">:</span> <span class="token builtin">string</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  sex<span class="token operator">:</span> <span class="token builtin">string</span>
  email<span class="token operator">:</span> <span class="token builtin">string</span>
  phone<span class="token operator">:</span> <span class="token builtin">string</span>
  checkPassword<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_666"></a>六、工具类</h3> 
<h4><a id="61__axios_668"></a>6.1 二次封装 axios</h4> 
<h5><a id="611_httpClientts_670"></a>6.1.1 httpClient.ts</h5> 
<pre><code class="prism language-ts"><span class="token comment">// src/utils/httpClient.ts</span>
<span class="token comment">// 二次封装 axios</span>
<span class="token keyword">import</span> axios<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">type</span> <span class="token class-name">AxiosRequestConfig</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> BaseResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/model/response'</span>

<span class="token keyword">const</span> httpClient <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 设置默认请求地址</span>
  baseURL<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_APP_BASE_API</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置超时时间</span>
  timeout<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEV</span> <span class="token operator">?</span> <span class="token number">10000</span> <span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token comment">// 跨域时允许携带凭证</span>
  withCredentials<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 添加请求拦截器</span>
httpClient<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在发送请求之前做些什么</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 对请求错误做些什么</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 添加响应拦截器</span>
httpClient<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 2xx 范围内的状态码都会触发该函数。</span>
    <span class="token comment">// 对响应数据做点什么</span>
    <span class="token keyword">return</span> response
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 超出 2xx 范围的状态码都会触发该函数。</span>
    <span class="token comment">// 对响应错误做点什么</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">post</span><span class="token punctuation">(</span>
  url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span>
  config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token punctuation">,</span> BaseResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">put</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">put</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token punctuation">,</span> BaseResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token keyword">get</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token punctuation">,</span> BaseResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">del</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> config<span class="token operator">?</span><span class="token operator">:</span> AxiosRequestConfig<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token punctuation">,</span> BaseResponse<span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> httpClient
</code></pre> 
<h5><a id="612_httpClient__736"></a>6.1.2 httpClient 实例</h5> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> httpClient <span class="token keyword">from</span> <span class="token string">'@/utils/httpClient'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> BaseResponse<span class="token punctuation">,</span> ItemResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/model/response'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span>
  AuthedUser<span class="token punctuation">,</span>
  LoginUser<span class="token punctuation">,</span>
  RegisterUser<span class="token punctuation">,</span>
  UserInfo<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/model/user'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserInfo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ItemResponse<span class="token operator">&lt;</span>UserInfo<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/gateway/user/info'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
    params<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 登录
 * @param user 用户
 * @returns {BaseResponse} 登录结果
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">login</span><span class="token operator">:</span> <span class="token punctuation">(</span>user<span class="token operator">:</span> LoginUser<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ItemResponse<span class="token operator">&lt;</span>AuthedUser<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  user
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/gateway/login'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
    params<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      username<span class="token operator">:</span> user<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
      password<span class="token operator">:</span> user<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @param user
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">logout</span><span class="token operator">:</span> <span class="token punctuation">(</span>refreshToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>BaseResponse<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  refreshToken
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/gateway/logout'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
    params<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      refreshToken<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 注册
 * @param user 用户
 * @returns {Promise&lt;BaseResponse&gt;} 注册结果
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">register</span><span class="token operator">:</span> <span class="token punctuation">(</span>
  user<span class="token operator">:</span> RegisterUser
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ItemResponse<span class="token operator">&lt;</span>RegisterUser<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/gateway/user-service/user/registerUser'</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">refreshToken</span><span class="token operator">:</span> <span class="token punctuation">(</span>
  refreshToken<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ItemResponse<span class="token operator">&lt;</span>AuthedUser<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>refreshToken<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> httpClient<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/gateway/auth-service/auth/refreshToken'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
    params<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      refreshToken<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="62__805"></a>6.2 浏览器本地存储</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/utils/storageUtils.ts</span>
<span class="token keyword">const</span> TokenKey <span class="token operator">=</span> <span class="token string">'token'</span>
<span class="token keyword">const</span> RefreshTokenKey <span class="token operator">=</span> <span class="token string">'srid'</span>
<span class="token keyword">const</span> pageSizeKey <span class="token operator">=</span> <span class="token string">'pageSize'</span>
<span class="token keyword">const</span> SidebarStatusKey <span class="token operator">=</span> <span class="token string">'sidebarStatus'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setToken</span><span class="token punctuation">(</span>token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">,</span> token<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>TokenKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>RefreshTokenKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setRefreshToken</span><span class="token punctuation">(</span>token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>RefreshTokenKey<span class="token punctuation">,</span> token<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">removeRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>RefreshTokenKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> pageSize <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>pageSizeKey<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>pageSizeKey<span class="token punctuation">,</span> pageSize<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">removePageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>pageSizeKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 侧边栏状态(显示/隐藏)</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getSidebarStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>SidebarStatusKey<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setSidebarStatus</span><span class="token punctuation">(</span>sidebarStatus<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>SidebarStatusKey<span class="token punctuation">,</span> sidebarStatus<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="63__861"></a>6.3 系统设置工具</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/utils/settingUtils.ts</span>
<span class="token keyword">import</span> setting <span class="token keyword">from</span> <span class="token string">'@/setting'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">getPageTitle</span><span class="token punctuation">(</span>pageTitle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageTitle<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>pageTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>setting<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>setting<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_876"></a>七、本地响应式存储</h3> 
<h4><a id="71__878"></a>7.1 定义</h4> 
<h5><a id="711_userts_880"></a>7.1.1 user.ts</h5> 
<pre><code class="prism language-ts"><span class="token comment">// src/stores/user.ts</span>
<span class="token comment">// 用户相关</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> LoginUser<span class="token punctuation">,</span> UserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/model/user'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> login <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span> <span class="token comment">// api 中封装的登录请求</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> userStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 用户信息</span>
  <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>UserInfo <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token comment">// 登录后获取用户信息</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loginUser</span><span class="token punctuation">(</span>user<span class="token operator">:</span> LoginUser<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> success<span class="token punctuation">,</span> code<span class="token punctuation">,</span> item <span class="token punctuation">}</span> <span class="token operator">=</span> res
      <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">&amp;&amp;</span> code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        userInfo<span class="token punctuation">.</span>value <span class="token operator">=</span> item<span class="token operator">!</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 对外暴漏的属性及方法</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> userInfo<span class="token punctuation">,</span> loginUser <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="712_permissionts_909"></a>7.1.2 permission.ts</h5> 
<pre><code class="prism language-ts"><span class="token comment">// src/stores/permission.ts</span>
<span class="token comment">// 权限相关</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> allRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> permissionStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'permission'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> perms <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 这个用于后面 layout 中根据用户权限生成菜单</span>
  <span class="token keyword">const</span> authorizedRoutes <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 根据权限过滤路由</span>
    <span class="token keyword">const</span> filterRoutes <span class="token operator">=</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>perms<span class="token punctuation">.</span>value<span class="token punctuation">,</span> allRoutes<span class="token punctuation">)</span>
    <span class="token keyword">return</span> filterRoutes
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">setPermission</span><span class="token punctuation">(</span>newPermission<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    perms<span class="token punctuation">.</span>value <span class="token operator">=</span> newPermission
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    perms<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> perms<span class="token punctuation">,</span> $reset<span class="token punctuation">,</span> setPermission<span class="token punctuation">,</span> authorizedRoutes <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>
  perms<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span>RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>e <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasPermission</span><span class="token punctuation">(</span>perms<span class="token punctuation">,</span> route<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        route<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>perms<span class="token punctuation">,</span> route<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Use meta.perms to determine if the current user has permission
 * @param perms
 * @param route
 */</span>
<span class="token keyword">function</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span>perms<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> route<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>perms<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 如果该路由设置了权限，检查用户权限</span>
    <span class="token keyword">return</span> perms<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>meta<span class="token operator">?.</span>perms<span class="token operator">?.</span><span class="token function">includes</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 如果该路由没有设置权限，则默认所有人可见</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="713_authts_971"></a>7.1.3 auth.ts</h5> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> login<span class="token punctuation">,</span> logout<span class="token punctuation">,</span> refreshToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/user'</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  getToken<span class="token punctuation">,</span>
  setToken<span class="token punctuation">,</span>
  removeToken<span class="token punctuation">,</span>
  getRefreshToken<span class="token punctuation">,</span>
  setRefreshToken<span class="token punctuation">,</span>
  removeRefreshToken<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/storageUtils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> userStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./user'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> permissionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/permission'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> LoginUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/model/user'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> authStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'auth'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// token</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// refreshToken</span>
  <span class="token keyword">const</span> rtoken <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">getRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// 检查用户状态</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">userStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// Token 不为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>userInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 在这个位置token本来不为空，但是，</span>
      <span class="token comment">// token被请求返回拦截后，请求toRefreshToken()后，如果被重置为空，</span>
      <span class="token comment">// 这证明token已经刷新失败了，不能返回true，只有token还在才是一切正常</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果 Token 为空</span>
    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 重置Token</span>
  <span class="token keyword">function</span> <span class="token function">resetTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">removeRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    token<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
    rtoken<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 登录接口</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">toLogin</span><span class="token punctuation">(</span>data<span class="token operator">:</span> LoginUser<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> data
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        username<span class="token operator">:</span> username<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> password<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> success<span class="token punctuation">,</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> res
      <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">&amp;&amp;</span> code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> token<span class="token operator">:</span> tokenValue<span class="token punctuation">,</span> refreshToken<span class="token operator">:</span> refreshTokenValue <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>item<span class="token operator">!</span>
        <span class="token comment">// token 存到浏览器</span>
        <span class="token function">setToken</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span>
        <span class="token function">setRefreshToken</span><span class="token punctuation">(</span>refreshTokenValue<span class="token punctuation">)</span>
        <span class="token comment">// 存到全局变量</span>
        token<span class="token punctuation">.</span>value <span class="token operator">=</span> tokenValue
        rtoken<span class="token punctuation">.</span>value <span class="token operator">=</span> refreshTokenValue
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 退出登录</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">toLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>rtoken<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">logout</span><span class="token punctuation">(</span>rtoken<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 推出登录后删除 本地存储的 token</span>
        <span class="token function">resetTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 删除 本地用户信息</span>
        <span class="token function">userStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 删除 本地权限信息</span>
        <span class="token function">permissionStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 刷新token</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">toRefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">refreshToken</span><span class="token punctuation">(</span>rtoken<span class="token punctuation">.</span>value <span class="token operator">??</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> success<span class="token punctuation">,</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> res
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">&amp;&amp;</span> code <span class="token operator">===</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>item <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> token<span class="token operator">:</span> tokenValue<span class="token punctuation">,</span> refreshToken<span class="token operator">:</span> refreshTokenValue <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>item
      <span class="token function">setToken</span><span class="token punctuation">(</span>tokenValue<span class="token punctuation">)</span>
      <span class="token function">setRefreshToken</span><span class="token punctuation">(</span>refreshTokenValue<span class="token punctuation">)</span>
      token<span class="token punctuation">.</span>value <span class="token operator">=</span> tokenValue
      rtoken<span class="token punctuation">.</span>value <span class="token operator">=</span> refreshTokenValue
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">resetTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    token<span class="token punctuation">,</span>
    isAuthenticated<span class="token punctuation">,</span>
    toLogin<span class="token punctuation">,</span>
    toLogout<span class="token punctuation">,</span>
    toRefreshToken<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="72__1099"></a>7.2 调用</h4> 
<ul><li>页面中使用</li></ul> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 该页面属于 layout 中 --&gt;</span>
<span class="token comment">&lt;!-- src/layout/Header.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-header</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Breadcrumb</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 使用本地存储中的属性 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ userStore().userInfo?.name || '测试' }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 引入 userStore</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> userStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/user'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li>ts 中使用</li></ul> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 该页面属于 layout 中 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> src<span class="token operator">/</span>layout<span class="token operator">/</span>menu<span class="token operator">/</span>menu<span class="token punctuation">.</span>ts <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> isExternal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/validate'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> allRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> permissionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/permission'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useMenu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> menus <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 使用本地存储获取用户权限 </span>
    <span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">permissionStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>authorizedRoutes
    <span class="token comment">// 根据权限匹配路由</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">generateMenuFromRoute</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">generateMenuFromRoute</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> menus <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_1147"></a>八、全局样式</h3> 
<h4><a id="81__1149"></a>8.1 样式重置</h4> 
<h5><a id="811_indexscss_1151"></a>8.1.1 index.scss</h5> 
<pre><code class="prism language-scss">// src/assets/style/index.scss
/* 全局样式重置 */
* {
  /* 初始化 */
  padding: 0;
  margin: 0;
}

html.body {
  width: 100%;
  height: 100vh;
}
#app {
  width: 100%;
  height: 100%;
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}
</code></pre> 
<h5><a id="812_resetscss_1177"></a>8.1.2 reset.scss</h5> 
<pre><code class="prism language-scss">// src/assets/style/reset.scss
/**
 * src/assets/style/reset.scss
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  font-weight: normal;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
  display: flex;
}
ol,
ul,
li {
  list-style: none;
}
blockquote,
q {
  quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}

/* custom */
a {
  color: #7e8c8d;
  text-decoration: none;
  -webkit-backface-visibility: hidden;
}
::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}
::-webkit-scrollbar-track-piece {
  background-color: rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 6px;
}
::-webkit-scrollbar-thumb:vertical {
  height: 5px;
  background-color: rgba(125, 125, 125, 0.7);
  -webkit-border-radius: 6px;
}
::-webkit-scrollbar-thumb:horizontal {
  width: 5px;
  background-color: rgba(125, 125, 125, 0.7);
  -webkit-border-radius: 6px;
}
html,
body {
  font-family: 'Arial', 'Microsoft YaHei', '黑体', '宋体', '微软雅黑', sans-serif;
}
body {
  line-height: 1;
  -webkit-text-size-adjust: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
html {
  //overflow-y: scroll;
}

/*清除浮动*/
.clearfix:before,
.clearfix:after {
  content: ' ';
  display: inline-block;
  height: 0;
  clear: both;
  visibility: hidden;
}
.clearfix {
  *zoom: 1;
}

/*隐藏*/
.dn {
  display: none;
}
</code></pre> 
<h5><a id="813__1368"></a>8.1.3 样式引入</h5> 
<ul><li>main.ts</li></ul> 
<pre><code class="prism language-ts"><span class="token comment">// 引入 index.scss</span>
<span class="token keyword">import</span> <span class="token string">'@/assets/style/index.scss'</span> 

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>App.vue</li></ul> 
<pre><code class="prism language-vue">&lt;script setup lang="ts"&gt;
import zhCn from 'element-plus/dist/locale/zh-cn.mjs'
&lt;/script&gt;

&lt;template&gt;
  &lt;el-config-provider :locale="zhCn" id="app"&gt;
    &lt;router-view /&gt;
  &lt;/el-config-provider&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
/* 引入 reset.scss */
@import '@/assets/style/reset'; 
&lt;/style&gt;
</code></pre> 
<h4><a id="82__1408"></a>8.2 样式常量</h4> 
<h5><a id="821_variablesscss_1410"></a>8.2.1 variables.scss</h5> 
<pre><code class="prism language-scss">// src/styles/variables.scss
// base
$testWith: 200px;
</code></pre> 
<h5><a id="822__1418"></a>8.2.2 常量使用</h5> 
<pre><code class="prism language-scss">// src/styles/test.scss
// 导入 variables.scss
@import "variables.scss";
.test{
  width: $testWith; // 使用中定义的样式常量
}
</code></pre> 
<h3><a id="layout_1429"></a>九、layout</h3> 
<h4><a id="91__1431"></a>9.1 面包屑</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/Breadcrumb.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-breadcrumb<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&gt;<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>breadcrumb<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in route!.matched<span class="token punctuation">"</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>
              item.redirect === <span class="token punctuation">'</span>noRedirect<span class="token punctuation">'</span> ||
              index == route!.matched.length - 1
            <span class="token punctuation">"</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-redirect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            {<!-- -->{ item.meta.title }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 放开后可点击 --&gt;</span>
          <span class="token comment">&lt;!-- &lt;a v-else @click.prevent="handleLink(item)"&gt;{<!-- -->{ item.meta.title }}&lt;/a&gt; --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.meta.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'@/styles/layout'</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="92__1469"></a>9.2 导航栏</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/Header.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-header</span><span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!-- 面包屑 自动导入 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Breadcrumb</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ userStore().userInfo?.name || '测试' }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> userStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/user'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'@/styles/layout'</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="93__1492"></a>9.3 侧边栏</h4> 
<ul><li>menu.ts</li></ul> 
<pre><code class="prism language-ts"><span class="token comment">// src/layout/menu/menu.ts</span>
<span class="token comment">// 将菜单中的逻辑封装，简化页面代码</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> isExternal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/validate'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> allRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/router'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> permissionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/permission'</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Menu</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 标题</span>
   title<span class="token operator">:</span> <span class="token builtin">string</span>
   <span class="token comment">// 图标</span>
   icon<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
   <span class="token comment">// 路径</span>
   path<span class="token operator">:</span> <span class="token builtin">string</span>
   <span class="token comment">// 子目录</span>
   children<span class="token operator">?</span><span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span>
   <span class="token comment">// 隐藏</span>
   hidden<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
   <span class="token comment">// 外链</span>
   external<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token comment">// 出口方法，获取到 Menu 对象</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useMenu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">const</span> menus <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
       <span class="token comment">// TODO 获取用户权限</span>
       <span class="token keyword">const</span> routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">permissionStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>authorizedRoutes
       <span class="token comment">// 根据权限匹配路由</span>
       <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
       <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">generateMenuFromRoute</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> <span class="token function">generateMenuFromRoute</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> menus <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 根据路由控制菜单显示</span>
<span class="token keyword">const</span> generateMenuFromRoute <span class="token operator">=</span> <span class="token punctuation">(</span>
  routes<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  parent<span class="token operator">?</span><span class="token operator">:</span> Menu
<span class="token punctuation">)</span><span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> result<span class="token operator">:</span> Menu<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 如果路由隐藏直接返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta<span class="token operator">?.</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将当前路由转换为 menu</span>
    <span class="token keyword">const</span> menu<span class="token operator">:</span> Menu <span class="token operator">=</span> <span class="token function">routeToMenu</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> parent<span class="token operator">?.</span>path<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      menu<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">generateMenuFromRoute</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">,</span> menu<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 路由转化为 Menu 对象</span>
<span class="token keyword">const</span> routeToMenu <span class="token operator">=</span> <span class="token punctuation">(</span>route<span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">,</span> basePath<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Menu <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> path<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// / 开头为 / 是绝对路径</span>
    path <span class="token operator">=</span> route<span class="token punctuation">.</span>path
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 空路由则返回父路由</span>
      path <span class="token operator">=</span> basePath <span class="token operator">??</span> <span class="token string">''</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 没有 / 则为相对路径</span>
      path <span class="token operator">=</span> basePath <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> route<span class="token punctuation">.</span>path
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Menu<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
    title<span class="token operator">:</span> route<span class="token punctuation">.</span>meta<span class="token operator">?.</span>title <span class="token operator">??</span> <span class="token string">''</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> route<span class="token punctuation">.</span>meta<span class="token operator">?.</span>icon<span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">,</span>
    external<span class="token operator">:</span> <span class="token function">isExternal</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span>
    hidden<span class="token operator">:</span> route<span class="token punctuation">.</span>meta<span class="token operator">?.</span>hidden<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>SideMenuItem.vue</li></ul> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/menu/SideMenuItem.vue --&gt;</span>
 <span class="token comment">&lt;!-- 递归生成菜单 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-sub-menu</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.children<span class="token punctuation">"</span></span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.path<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
         {<!-- -->{ item.title }}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>side-menu-item</span>
         <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu in item.children<span class="token punctuation">"</span></span>
         <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu.path<span class="token punctuation">"</span></span>
         <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-sub-menu</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">v-else</span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.path<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.icon<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
       {<!-- -->{ item.title }}
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> type <span class="token punctuation">{<!-- --></span> Menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/layout/menu/menu'</span>
 <span class="token comment">// 父传子属性</span>
 <span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{<!-- --></span>
   item<span class="token operator">:</span> Menu
 <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li>SideBar.vue</li></ul> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/menu/SideBar.vue --&gt;</span>
<span class="token comment">&lt;!-- 侧边栏结构 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sideBar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>后台管理系统<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-scrollbar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span> <span class="token attr-name">text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span> <span class="token attr-name">background-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#304156<span class="token punctuation">"</span></span> <span class="token attr-name">router</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>side-menu-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu in menus<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu.path<span class="token punctuation">"</span></span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-scrollbar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/layout/menu/menu'</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> menus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'@/styles/layout'</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="94___1637"></a>9.4 页脚</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/Footer.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-card</span><span class="token punctuation">&gt;</span></span>Frontend 2022 dily<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-card</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="95__1652"></a>9.5 主体结构</h4> 
<p>由 面包屑、侧边栏、导航栏、页脚搭建组合成</p> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/layout/Home.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>common-layout<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-container</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-aside</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>side-bar</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-aside</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-container</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Header</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-main</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cont<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ Component, route }<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade-transform<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>out-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cachedViews<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Component<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>route.path<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-main</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-footer</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Footer</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-footer</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-container</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-container</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> cachedViews <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'@/styles/layout'</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_1695"></a>十、错误页面</h3> 
<blockquote> 
 <p>错误页面 仅供参考，可自行替换</p> 
</blockquote> 
<h4><a id="101__404_1699"></a>10.1 404页面</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/component/error/404.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wscn-http404-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wscn-http404<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pic-404<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pic-404__parent<span class="token punctuation">"</span></span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/404_images/404.png<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>404<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pic-404__child left<span class="token punctuation">"</span></span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/404_images/404_cloud.png<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>404<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pic-404__child mid<span class="token punctuation">"</span></span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/404_images/404_cloud.png<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>404<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pic-404__child right<span class="token punctuation">"</span></span>
          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/404_images/404_cloud.png<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>404<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit__oops<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>OOPS!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit__info<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          All rights reserved
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
            <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">color</span><span class="token punctuation">:</span> #20a0ff</span><span class="token punctuation">"</span></span></span>
            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://wallstreetcn.com<span class="token punctuation">"</span></span>
            <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            wallstreetcn
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit__headline<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit__info<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          Please check that the URL you entered is correct, or click the button
          below to return to the homepage.
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bullshit__return-home<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Back to home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'Page_404'</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token string">'The webmaster said that you can not enter this page...'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.wscn-http404-container</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 40%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.wscn-http404</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 50px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token selector">;
  .pic-404</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token selector">;
    &amp;__parent</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;__child</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token selector">;
      &amp;.left</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 220px<span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">animation-name</span><span class="token punctuation">:</span> cloudLeft<span class="token punctuation">;</span>
        <span class="token property">animation-duration</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>
        <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>
        <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
        <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;.mid</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 420px<span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">animation-name</span><span class="token punctuation">:</span> cloudMid<span class="token punctuation">;</span>
        <span class="token property">animation-duration</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>
        <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>
        <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
        <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.2s<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;.right</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">width</span><span class="token punctuation">:</span> 62px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">animation-name</span><span class="token punctuation">:</span> cloudRight<span class="token punctuation">;</span>
        <span class="token property">animation-duration</span><span class="token punctuation">:</span> 2s<span class="token punctuation">;</span>
        <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> linear<span class="token punctuation">;</span>
        <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
        <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1s<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@keyframes</span> cloudLeft</span> <span class="token punctuation">{<!-- --></span>
        <span class="token selector">0%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 220px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">20%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 33px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 188px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">80%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 81px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 92px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 97px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@keyframes</span> cloudMid</span> <span class="token punctuation">{<!-- --></span>
        <span class="token selector">0%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 420px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">20%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 360px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">70%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 130px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@keyframes</span> cloudRight</span> <span class="token punctuation">{<!-- --></span>
        <span class="token selector">0%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">20%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 460px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">80%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 340px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
          <span class="token property">top</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
          <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.bullshit</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 30px 0<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token selector">;
    &amp;__oops</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #1482f0<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">animation-name</span><span class="token punctuation">:</span> slideUp<span class="token punctuation">;</span>
      <span class="token property">animation-duration</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
      <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;__headline</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">animation-name</span><span class="token punctuation">:</span> slideUp<span class="token punctuation">;</span>
      <span class="token property">animation-duration</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.1s<span class="token punctuation">;</span>
      <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;__info</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 21px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> grey<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
      <span class="token property">animation-name</span><span class="token punctuation">:</span> slideUp<span class="token punctuation">;</span>
      <span class="token property">animation-duration</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.2s<span class="token punctuation">;</span>
      <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;__return-home</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 110px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #1482f0<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
      <span class="token property">animation-name</span><span class="token punctuation">:</span> slideUp<span class="token punctuation">;</span>
      <span class="token property">animation-duration</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
      <span class="token property">animation-delay</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>
      <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token atrule"><span class="token rule">@keyframes</span> slideUp</span> <span class="token punctuation">{<!-- --></span>
      <span class="token selector">0%</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>60px<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<ul><li>src/assets/404_images<br> 404.png<br> <img src="https://images2.imgbox.com/c9/e7/Uu48HHfM_o.png" alt="在这里插入图片描述"></li></ul> 
<p>404_cloud.png</p> 
<p><img src="https://images2.imgbox.com/70/91/E6I8wnvN_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="102_401_1963"></a>10.2 401页面</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/component/error/401.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>errPage-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-arrow-left<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pan-back-btn<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>back<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      返回
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-row</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-jumbo text-ginormous<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Oops!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        gif来源
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://zh.airbnb.com/<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>airbnb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        页面
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>你没有权限去该页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">&gt;</span></span>如有不满请联系你领导<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-unstyled<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>或者你可以去:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-type<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/dashboard<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>回首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>link-type<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.taobao.com/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>随便看看<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialogVisible = true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>点我看图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>errGif<span class="token punctuation">"</span></span>
          <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>313<span class="token punctuation">"</span></span>
          <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>428<span class="token punctuation">"</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Girl has dropped her ice cream.<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-row</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name"><span class="token namespace">v-model:</span>visible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialogVisible<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>随便看<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ewizardClap<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pan-img<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> errGif <span class="token keyword">from</span> <span class="token string">'@/assets/401_images/401.gif'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'Page_401'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      errGif<span class="token operator">:</span> errGif <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ewizardClap<span class="token operator">:</span>
        <span class="token string">'https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646'</span><span class="token punctuation">,</span>
      dialogVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>noGoBack<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> path<span class="token operator">:</span> <span class="token string">'/dashboard'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.errPage-container</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token selector">;
  .pan-back-btn</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">background</span><span class="token punctuation">:</span> #008489<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> none <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.pan-gif</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.pan-img</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.text-jumbo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #484848<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.list-unstyled</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token selector">;
    li</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">a</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">color</span><span class="token punctuation">:</span> #008489<span class="token punctuation">;</span>
      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token selector">;
      &amp;:hover</span> <span class="token punctuation">{<!-- --></span>
        <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li> <p>src/assets/401_images</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-5HyaOxg3-1684399802012)(img/401.gif)]</p> </li></ul> 
<h3><a id="_2077"></a>十一、系统设置</h3> 
<h4><a id="111__settingts_2079"></a>11.1 setting.ts</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/setting.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  title<span class="token operator">:</span> <span class="token string">'后台管理系统'</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * @type {boolean} true | false
   * @description Whether show the settings right-panel
   */</span>
  showSettings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * @type {boolean} true | false
   * @description Whether need tagsView
   */</span>
  tagsView<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * @type {boolean} true | false
   * @description Whether fix the header
   */</span>
  fixedHeader<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * @type {boolean} true | false
   * @description Whether show the logo in sidebar
   */</span>
  sidebarLogo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * @type {string | array} 'production' | ['production', 'development']
   * @description Need show err logs component.
   * The default is only used in the production env
   * If you want to also use it in dev, you can pass ['production', 'development']
   */</span>

  pageSize<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  sidebarCollapse<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  errorLog<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="112_Appvue_2123"></a>11.2 App.vue</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- src/App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 设置 element-plus 中使用中文</span>
<span class="token keyword">import</span> zhCn <span class="token keyword">from</span> <span class="token string">'element-plus/dist/locale/zh-cn.mjs'</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- el-config-provider 配置使用中文 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-config-provider</span> <span class="token attr-name">:locale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zhCn<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-config-provider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/** 重置样式 **/</span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'@/assets/style/reset'</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="113_maints_2145"></a>11.3 main.ts</h4> 
<pre><code class="prism language-ts"><span class="token comment">// src/main.ts</span>
<span class="token comment">// 引入全局样式</span>
<span class="token keyword">import</span> <span class="token string">'@/assets/style/index.scss'</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// 引入路由</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token comment">// 引入路由守护</span>
<span class="token keyword">import</span> <span class="token string">'./router/routerGuard'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token comment">// 使用 pinia</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 使用 router</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1cc1fcb7b7839cf67d6c487b570343e5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">若依动态添加多数据源</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b4fb11be395c11d64c2e92fdcb99ccc9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">分代回收工作流程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>