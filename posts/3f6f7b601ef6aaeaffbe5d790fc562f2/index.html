<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux服务器部署java项目 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux服务器部署java项目" />
<meta property="og:description" content="安装JDK 在官网下载JDK
我下载的是 jdk-8u341-linux-x64.tar.gz
一、上传 在/usr/local中创建java文件夹
mkdir /usr/local/java 把JDK上传到java目录下
可以用ls命令查看一下
二、解压 输入命令
tar -xzvf jdk-8u341-linux-x64.tar.gz jdk-8u341-linux-x64.tar.gz是我下载的JDK文件名，此处输入自己下载对应的文件名，解压之后可以看到/usr/local/java目录下多出了一个文件夹
解压之后JDK的安装包可以删掉
三、配置JAVA环境变量 java命令测试，直接输入java，出现-bash:java:command nor found说明没有配置java环境变量
需要配置的环境变量 项目Value备注PATH指定命令搜索路径,shell执行命令时会到PATH所指定的路径中查看能否找到命令程序jdk的/bin中包含经常要访问的javac、java、javadoc等命令,设置后可以在任何目录下执行该命令CLASSPATH指定类搜索路径,JVM通过CLASSPATH来寻找类设置jdk的/lib中的dt.jar和tools.jar以及当前目录&#34;.&#34;给CLASSPATHJAVA_HOME指向jdk安装目录Eclipse、NetBeans、Tomcat等软件会通过JAVA_HOME来使用jdk使用vim编辑 vim /etc/profile 或使用文本编辑器打开
修改.bash_profile或者/etc/profile在末尾引入环境变量,JAVA_HOME的值填写自己解压包的路径
export JAVA_HOME=/usr/local/java/jdk1.8.0_341 export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib:$CLASSPATH export JAVA_PATH=${JAVA_HOME}/bin:${JRE_HOME}/bin export PATH=$PATH:${JAVA_PATH} 完成上述修改后，执行命令:
source /etc/profile 或者重启
输入命令查看java版本，返回版本信息说明环境变量设置生效
安装MySQL 我是在docker环境部署的MySQL，docker部署框架支持mysql服务器的简单安装和配置。
一、安装Docker环境 #安装Docker yum install docker -y #启动Docker服务 service docker start 因为Docker在线安装镜像是从国外的DockerHub网站下载文件，所以速度超级慢，所以我们要给Docker设置加速器。我用的是腾讯云主机，所以设置腾讯云加速器是最快的。
打开/etc/docker/daemon.json文件，然后设置成如下内容：
{ &#34;registry-mirrors&#34;:[&#34;https:mirror.ccs.tencentyun.com&#34;] } 重新启动Docker服务，加速器才能生效
service docker restart 二、安装MySQL 利用刚才设置的加速器，我们可以在线安装MySQL镜像，这里我下载8.0.23版本的MySQL数据库
docker pull mysql:8.0.23 创建容器的时候，我们需要把MySQL容器内的数据目录映射到CentOS系统上面。如果MySQL容器挂掉了，数据库文件不会丢失。我们新建一个MySQL容器，挂载上这个数据目录就又能正常使用MySQL了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3f6f7b601ef6aaeaffbe5d790fc562f2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-27T13:15:59+08:00" />
<meta property="article:modified_time" content="2022-08-27T13:15:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux服务器部署java项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="JDK_0"></a>安装JDK</h2> 
<p><a href="https://www.oracle.com/java/technologies/downloads/#java8" rel="nofollow">在官网下载JDK</a><br> 我下载的是 jdk-8u341-linux-x64.tar.gz</p> 
<h3><a id="_3"></a>一、上传</h3> 
<p>在/usr/local中创建java文件夹</p> 
<pre><code class="prism language-bash"><span class="token function">mkdir</span> /usr/local/java
</code></pre> 
<p>把JDK上传到java目录下<br> <img src="https://images2.imgbox.com/e6/b7/Y2SQzSjp_o.png" alt="在这里插入图片描述"><br> 可以用ls命令查看一下<br> <img src="https://images2.imgbox.com/ff/95/XyiA0ATA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_12"></a>二、解压</h3> 
<p>输入命令</p> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -xzvf jdk-8u341-linux-x64.tar.gz
</code></pre> 
<p>jdk-8u341-linux-x64.tar.gz是我下载的JDK文件名，此处输入自己下载对应的文件名，解压之后可以看到/usr/local/java目录下多出了一个文件夹<br> <img src="https://images2.imgbox.com/29/44/MhDORYBJ_o.png" alt="在这里插入图片描述"><br> 解压之后JDK的安装包可以删掉</p> 
<h3><a id="JAVA_20"></a>三、配置JAVA环境变量</h3> 
<p>java命令测试，直接输入java，出现-bash:java:command nor found说明没有配置java环境变量<br> <img src="https://images2.imgbox.com/27/78/xTSSh8D0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_23"></a>需要配置的环境变量</h4> 
<table><thead><tr><th>项目</th><th align="left">Value</th><th align="left">备注</th></tr></thead><tbody><tr><td>PATH</td><td align="left">指定命令搜索路径,shell执行命令时会到PATH所指定的路径中查看能否找到命令程序</td><td align="left">jdk的/bin中包含经常要访问的javac、java、javadoc等命令,设置后可以在任何目录下执行该命令</td></tr><tr><td>CLASSPATH</td><td align="left">指定类搜索路径,JVM通过CLASSPATH来寻找类</td><td align="left">设置jdk的/lib中的dt.jar和tools.jar以及当前目录"."给CLASSPATH</td></tr><tr><td>JAVA_HOME</td><td align="left">指向jdk安装目录</td><td align="left">Eclipse、NetBeans、Tomcat等软件会通过JAVA_HOME来使用jdk</td></tr><tr><td>使用vim编辑</td><td align="left"></td><td align="left"></td></tr></tbody></table> 
<pre><code class="prism language-bash"><span class="token function">vim</span> /etc/profile
</code></pre> 
<p>或使用文本编辑器打开<br> 修改<code>.bash_profile</code>或者<code>/etc/profile</code>在末尾引入环境变量,JAVA_HOME的值填写自己解压包的路径</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java/jdk1.8.0_341
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">${JAVA_HOME}</span>/lib:<span class="token variable">${JRE_HOME}</span>/lib:<span class="token variable">$CLASSPATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_PATH</span><span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/bin:<span class="token variable">${JRE_HOME}</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">${JAVA_PATH}</span>
</code></pre> 
<p>完成上述修改后，执行命令:</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>或者重启<br> 输入命令查看java版本，返回版本信息说明环境变量设置生效<br> <img src="https://images2.imgbox.com/73/5f/MftOuLLW_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="MySQL_49"></a>安装MySQL</h2> 
<p>我是在docker环境部署的MySQL，docker部署框架支持mysql服务器的简单安装和配置。</p> 
<h3><a id="Docker_51"></a>一、安装Docker环境</h3> 
<pre><code class="prism language-java">#安装<span class="token class-name">Docker</span>
yum install docker <span class="token operator">-</span>y
#启动<span class="token class-name">Docker</span>服务
service docker start
</code></pre> 
<p>因为Docker在线安装镜像是从国外的DockerHub网站下载文件，所以速度超级慢，所以我们要给Docker设置加速器。我用的是腾讯云主机，所以设置腾讯云加速器是最快的。<br> 打开<code>/etc/docker/daemon.json</code>文件，然后设置成如下内容：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
	<span class="token string-property property">"registry-mirrors"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"https:mirror.ccs.tencentyun.com"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>重新启动Docker服务，加速器才能生效</p> 
<pre><code class="prism language-java">service docker restart
</code></pre> 
<h3><a id="MySQL_69"></a>二、安装MySQL</h3> 
<p>利用刚才设置的加速器，我们可以在线安装MySQL镜像，这里我下载8.0.23版本的MySQL数据库</p> 
<pre><code class="prism language-java">docker pull mysql<span class="token operator">:</span><span class="token number">8.0</span><span class="token number">.23</span>
</code></pre> 
<p>创建容器的时候，我们需要把MySQL容器内的数据目录映射到CentOS系统上面。如果MySQL容器挂掉了，数据库文件不会丢失。我们新建一个MySQL容器，挂载上这个数据目录就又能正常使用MySQL了。<br> Docker会给每个容器创建一个<code>虚拟的网卡</code>，然后分配一个Docker<code>内网IP地址</code>。假设A容器部署了MySQL，B容器中的Java程序想要访问A容器的MySQL，JDBC路径就要写A容器的Docker内网IP地址，略显麻烦。<br> 这次把容器设置成<code>host模式</code>，就是不让Docker为容器创建虚拟网卡，Docker容器直接使用CentOS的网卡，所以A容器中localhost代表CentOS，B容器中的localhost也代表CentOS，两个容器相互访问，URL地址写localhost即可。<br> 例如B容器中JDBC路径的host写localhost，就能访问到A容器里面的MySQL。<br> 这样我们部署的若干容器，相互访问就简单多了。</p> 
<p>MySQL容器我分配内存空间是500M，如果将来觉得不够用，删除容器，再创建新容器的时候分配更大的内存。而且只要挂载上那些文件目录，MySQL的数据就不会丢失。</p> 
<pre><code class="prism language-java">docker run <span class="token operator">-</span>it <span class="token operator">-</span>d <span class="token operator">--</span>name mysql <span class="token operator">--</span>net<span class="token operator">=</span>host \			<span class="token comment">//创建容器名字叫mysql host模式</span>
<span class="token operator">-</span>m <span class="token number">500</span>m <span class="token operator">-</span>v <span class="token operator">/</span>root<span class="token operator">/</span>mysql<span class="token operator">/</span>data<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql \		<span class="token comment">//分配内存500M。做文件夹映射，MySQL默认数据目录是/var/lib/mysql 映射到CentOS/root/mysql/data文件夹上</span>
<span class="token operator">-</span>v <span class="token operator">/</span>root<span class="token operator">/</span>mysql<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>mysql<span class="token operator">/</span>conf<span class="token punctuation">.</span>d \			<span class="token comment">//映射mysql配置文件</span>
<span class="token operator">-</span>e MYSQL_ROOT_PASSWORD<span class="token operator">=</span>abc123456 \					<span class="token comment">//传入参数，root账号的密码</span>
<span class="token operator">-</span>e TZ<span class="token operator">=</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Shanghai</span> mysql<span class="token operator">:</span><span class="token number">8.0</span><span class="token number">.23</span>					<span class="token comment">//mysql时区</span>
</code></pre> 
<p>\是换行，可以把命令分成多行来写</p> 
<p><strong>修改mysql密码</strong><br> 进入容器并以root用户登录</p> 
<pre><code>docker exec -it mysql bash
mysql -uroot -p
abc123456
//修改密码，与5.7版本不同
ALTER USER 'root'@'localhost' IDENTIFIED WITH MYSQL_NATIVE_PASSWORD BY 'xfx24805861WSQ';	
FLUSH PRIVILEGES;
</code></pre> 
<h2><a id="Tomcat_101"></a>安装Tomcat</h2> 
<p><a href="https://tomcat.apache.org/download-90.cgi" rel="nofollow">官网下载地址</a><br> <img src="https://images2.imgbox.com/fd/23/dLB7IGre_o.png" alt="在这里插入图片描述"><br> 在/usr/local/下创建tomcat文件夹，把压缩包上传到该目录下</p> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -xzvf apache-tomcat-9.0.65.tar.gz
</code></pre> 
<p><img src="https://images2.imgbox.com/28/c0/hxoVsZug_o.png" alt="在这里插入图片描述"><br> 启动Tomcat<br> 启动前，可以在tomcat9的conf目录下，找到server.xml文件修改tomcat的启动端口号<br> <img src="https://images2.imgbox.com/5d/27/K7U2bq5c_o.png" alt="在这里插入图片描述"><br> 进入tomcat服务器的bin目录下输入命令</p> 
<pre><code class="prism language-bash">./startup.sh
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/eb/M0i8iVma_o.png" alt="在这里插入图片描述"><br> 然后就可以通过ip:port访问tomcat了<br> 如果访问不了，需要查看云服务器设置端口号允许访问，我用的是腾讯云，在防火墙中设置<br> <img src="https://images2.imgbox.com/86/5d/qjXjGGqY_o.png" alt="在这里插入图片描述"><br> 配置好就可以访问到tomcat了<br> <img src="https://images2.imgbox.com/1c/37/8769O3E8_o.png" alt="在这里插入图片描述">关闭Tomcat服务，在bin目录下执行./shutdown.sh命令<br> <img src="https://images2.imgbox.com/16/1b/lTfOubYY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SpringBootTomcat_123"></a>打包SpringBoot项目部署到Tomcat</h3> 
<p>我的项目是打成了war包，放到Tomcat的webapps文件夹中，启动tomcat会自动解压到同名文件夹，访问路径也是这个文件夹名。<br> <img src="https://images2.imgbox.com/db/f0/U6UkVj03_o.png" alt="在这里插入图片描述"><br> 想要修改访问路径，修改conf文件夹中的server.xml配置文件<br> docBase中的属性值是原文件夹，path中的属性值是修改后的访问路径<br> <img src="https://images2.imgbox.com/54/57/kEqgKUXf_o.png" alt="在这里插入图片描述"><br> 最后就可以访问到自己的项目了<br> <img src="https://images2.imgbox.com/57/4c/olXPwLYO_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2753052ded32e7a9ac508fa5740a9b31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">项目版本号大小比较，找出最大版本号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5cc508f68740507129bb0a0afd82211e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自定义全局处理异常，并将报错的类名、方法名和行数 返回给前端</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>