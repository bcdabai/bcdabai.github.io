<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOs搭建Kafka集群 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOs搭建Kafka集群" />
<meta property="og:description" content="Centos7搭建Kafka集群 一、集群规划二、环境准备三、安装kafka集群1、下载kafka安装包2、解压3、配置环境变量4、编辑配置文件①修改broker.id②配置kafka运行日志路径③配置Zookeeper集群地址 5、启动集群6、测试kafka①、创建topic②、查看当前服务器中的所有topic③、生产者与消费者 一、集群规划 192.168.239.140192.168.239.141192.168.239.142zookeeperzookeeperzookeeperkafkakafkakafka 二、环境准备 请自行安装JDK与Zookeeper集群
Zookeeper集群安装参考
三、安装kafka集群 1、下载kafka安装包 通过此地址下载kafka
kafka_2.13-3.6.1.tgz 2、解压 tar -zxvf kafka_2.13-3.6.1.tgz 3、配置环境变量 vim /etc/profile.d/my_env.sh 在“my_env.sh”文件中添加如下内容：
#KAFKA_HOME（路径按需修改） export KAFKA_HOME=/wz_program/kafka/kafka_2.13-3.6.1 export PATH=$PATH:$KAFKA_HOME/bin 文件编辑完后执行如下命令：
source /etc/profile 4、编辑配置文件 进入“config”目录下，修改server.properties文件
vim server.properties ①修改broker.id 特别注意：broker.id在整个集群中全局唯一，不能重复，只能是数字
broker.id ②配置kafka运行日志路径 kafka运行日志(数据)存放的路径，路径不需要手动创建，kafka会自动创建。可以配置多个磁盘路径，路径与路径之间可以用&#34;,&#34;分隔。
log.dirs ③配置Zookeeper集群地址 zookeeper.connect= 5、启动集群 启动kafka集群前需要保证zookeeper集群已启动！！！
进入kafka的bin目录下执行如下命令：
./kafka-server-start.sh -daemon ../config/server.properties 关闭集群可使用如下命令：
./kafka-server-stop.sh 特别注意：停止Kafka集群时，一定要等Kafka所有节点进程全部停止后再停止Zookeeper集群。因为Zookeeper集群当中记录着Kafka集群相关信息，Zookeeper集群一旦先停止，Kafka集群就没有办法再获取停止进程的信息，只能手动杀死Kafka进程了。
6、测试kafka ①、创建topic kafka-topics.sh --bootstrap-server hadoop001:9092 --create --partitions 1 --replication-factor 3 --topic test_first ②、查看当前服务器中的所有topic kafka-topics.sh --bootstrap-server hadoop001:9092 --list ③、生产者与消费者 生产者：
kafka-console-producer.sh --bootstrap-server hadoop001:9092 --topic test_first 消费者：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/85c9b2d76c33b5b14b3b732a6cffabbc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T14:20:16+08:00" />
<meta property="article:modified_time" content="2024-01-04T14:20:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOs搭建Kafka集群</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Centos7搭建Kafka集群</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">一、集群规划</a></li><li><a href="#_7" rel="nofollow">二、环境准备</a></li><li><a href="#kafka_11" rel="nofollow">三、安装kafka集群</a></li><li><ul><li><a href="#1kafka_12" rel="nofollow">1、下载kafka安装包</a></li><li><a href="#2_18" rel="nofollow">2、解压</a></li><li><a href="#3_23" rel="nofollow">3、配置环境变量</a></li><li><a href="#4_41" rel="nofollow">4、编辑配置文件</a></li><li><ul><li><a href="#brokerid_47" rel="nofollow">①修改broker.id</a></li><li><a href="#kafka_55" rel="nofollow">②配置kafka运行日志路径</a></li><li><a href="#Zookeeper_63" rel="nofollow">③配置Zookeeper集群地址</a></li></ul> 
    </li><li><a href="#5_71" rel="nofollow">5、启动集群</a></li><li><a href="#6kafka_86" rel="nofollow">6、测试kafka</a></li><li><ul><li><a href="#topic_87" rel="nofollow">①、创建topic</a></li><li><a href="#topic_93" rel="nofollow">②、查看当前服务器中的所有topic</a></li><li><a href="#_99" rel="nofollow">③、生产者与消费者</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>一、集群规划</h3> 
<table><thead><tr><th>192.168.239.140</th><th>192.168.239.141</th><th>192.168.239.142</th></tr></thead><tbody><tr><td>zookeeper</td><td>zookeeper</td><td>zookeeper</td></tr><tr><td>kafka</td><td>kafka</td><td>kafka</td></tr></tbody></table> 
<h3><a id="_7"></a>二、环境准备</h3> 
<p>请自行安装JDK与Zookeeper集群<br> <a href="https://blog.csdn.net/qq_26709459/article/details/90744500">Zookeeper集群安装参考</a></p> 
<h3><a id="kafka_11"></a>三、安装kafka集群</h3> 
<h4><a id="1kafka_12"></a>1、下载kafka安装包</h4> 
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/apache/kafka/" rel="nofollow">通过此地址下载kafka</a></p> 
<pre><code class="prism language-bash">kafka_2.13-3.6.1.tgz
</code></pre> 
<h4><a id="2_18"></a>2、解压</h4> 
<pre><code class="prism language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> kafka_2.13-3.6.1.tgz
</code></pre> 
<h4><a id="3_23"></a>3、配置环境变量</h4> 
<pre><code class="prism language-bash"><span class="token function">vim</span> /etc/profile.d/my_env.sh
</code></pre> 
<p>在“<strong>my_env.sh</strong>”文件中添加如下内容：</p> 
<pre><code class="prism language-bash"><span class="token comment">#KAFKA_HOME（路径按需修改）</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">KAFKA_HOME</span><span class="token operator">=</span>/wz_program/kafka/kafka_2.13-3.6.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$KAFKA_HOME</span>/bin
</code></pre> 
<p>文件编辑完后执行如下命令：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h4><a id="4_41"></a>4、编辑配置文件</h4> 
<p>进入“<strong>config</strong>”目录下，修改<strong>server.properties</strong>文件</p> 
<pre><code class="prism language-bash"><span class="token function">vim</span> server.properties
</code></pre> 
<h5><a id="brokerid_47"></a>①修改broker.id</h5> 
<p>特别注意：broker.id在整个集群中全局唯一，不能重复，只能是数字</p> 
<pre><code class="prism language-bash">broker.id
</code></pre> 
<p><img src="https://images2.imgbox.com/52/0e/lAx8UsGp_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="kafka_55"></a>②配置kafka运行日志路径</h5> 
<p>kafka运行日志(数据)存放的路径，路径不需要手动创建，kafka会自动创建。可以配置多个磁盘路径，路径与路径之间可以用","分隔。</p> 
<pre><code class="prism language-bash">log.dirs
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/5d/HPNlpugM_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="Zookeeper_63"></a>③配置Zookeeper集群地址</h5> 
<pre><code class="prism language-bash"><span class="token assign-left variable">zookeeper.connect</span><span class="token operator">=</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/62/37/xo1gDr2R_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_71"></a>5、启动集群</h4> 
<p><strong>启动kafka集群前需要保证zookeeper集群已启动！！！</strong><br> 进入kafka的<strong>bin</strong>目录下执行如下命令：</p> 
<pre><code class="prism language-bash">./kafka-server-start.sh <span class="token parameter variable">-daemon</span> <span class="token punctuation">..</span>/config/server.properties
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/5f/juwkqEuG_o.png" alt="在这里插入图片描述"><br> 关闭集群可使用如下命令：</p> 
<pre><code class="prism language-bash">./kafka-server-stop.sh
</code></pre> 
<p><em>特别注意：停止Kafka集群时，一定要等Kafka所有节点进程全部停止后再停止Zookeeper集群。因为Zookeeper集群当中记录着Kafka集群相关信息，Zookeeper集群一旦先停止，Kafka集群就没有办法再获取停止进程的信息，只能手动杀死Kafka进程了。</em></p> 
<h4><a id="6kafka_86"></a>6、测试kafka</h4> 
<h5><a id="topic_87"></a>①、创建topic</h5> 
<pre><code class="prism language-bash">kafka-topics.sh --bootstrap-server hadoop001:9092 <span class="token parameter variable">--create</span> <span class="token parameter variable">--partitions</span> <span class="token number">1</span> --replication-factor <span class="token number">3</span> <span class="token parameter variable">--topic</span> test_first
</code></pre> 
<p><img src="https://images2.imgbox.com/61/71/8BI9Z4Rp_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="topic_93"></a>②、查看当前服务器中的所有topic</h5> 
<pre><code class="prism language-bash">kafka-topics.sh --bootstrap-server hadoop001:9092 <span class="token parameter variable">--list</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/5a/DNwwroaz_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_99"></a>③、生产者与消费者</h5> 
<p>生产者：</p> 
<pre><code class="prism language-bash">kafka-console-producer.sh --bootstrap-server hadoop001:9092 <span class="token parameter variable">--topic</span> test_first
</code></pre> 
<p>消费者：</p> 
<pre><code class="prism language-bash">kafka-console-consumer.sh --bootstrap-server hadoop001:9092 <span class="token parameter variable">--topic</span> test_first
</code></pre> 
<p><img src="https://images2.imgbox.com/f1/ad/iEV3uCmi_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/36e22eb37e643661add1f9955dbb7928/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java实现登录验证码的功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/80a8fa3805a1fd83d4937ad21f3190bc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jdbc---Java---mysql</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>