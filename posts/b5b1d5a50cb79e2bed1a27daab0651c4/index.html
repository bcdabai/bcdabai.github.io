<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>视频抽帧转图片——Python脚本 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="视频抽帧转图片——Python脚本" />
<meta property="og:description" content="先上代码： 网上找的脚本python 实现将视频转换为图片。
&#34;&#34;&#34; 将视频转换为图片，可以为多个文件夹下的图片。 注：在程序使用前需先配置好main中的地址 视频路径：video_path_list = [path1, path2, ...](路径数量可以为[1,n]，每个路径下的视频数也可为[1,m]) paht1 path2 .... |------video1.avi |-----video1.avi |------vidoe2.avi |-----... |------.... 图片存储路径：image_save_dir = save_path(存储方式则将按以下方式） save_path | -------path1_name |----video1 |----jpg1.jpg |----jpg2,jpg |----video2 ... |-------path2_name ... &#34;&#34;&#34; import cv2 import os from pathlib import Path VID_FORMATS = (&#39;.mov&#39;, &#39;.avi&#39;, &#39;.mp4&#39;, &#39;.mpg&#39;, &#39;.mpeg&#39;, &#39;.m4v&#39;, &#39;.wmv&#39;, &#39;.mkv&#39;, &#39;.mp3&#39;) def videos2images(root_video_path, root_save_dir): for video_dir_path in root_video_path: # 1.检测读取文件路径是否正确 path_video = Path(video_dir_path) if path_video.is_dir(): print(video_dir_path &#43; &#39;\t ok&#39;) videos = os." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b5b1d5a50cb79e2bed1a27daab0651c4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-30T20:29:57+08:00" />
<meta property="article:modified_time" content="2023-05-30T20:29:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">视频抽帧转图片——Python脚本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>先上代码：</h4> 
<p>网上找的脚本<a href="https://blog.csdn.net/weixin_42442319/article/details/122289055?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%20video_path_list%20=%20%5Br%27video%27%5D&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-122289055.142%5Ev41%5Epc_rank_34_ecpm25,185%5Ev2%5Etag_show&amp;spm=1018.2226.3001.4187" title="python 实现将视频转换为图片">python 实现将视频转换为图片</a>。</p> 
<pre><code class="language-python">"""
将视频转换为图片，可以为多个文件夹下的图片。
注：在程序使用前需先配置好main中的地址
视频路径：video_path_list = [path1, path2, ...](路径数量可以为[1,n]，每个路径下的视频数也可为[1,m])
    paht1                path2             ....
     |------video1.avi      |-----video1.avi
     |------vidoe2.avi      |-----...
     |------....
图片存储路径：image_save_dir = save_path(存储方式则将按以下方式）
    save_path
     | -------path1_name
                |----video1
                        |----jpg1.jpg
                        |----jpg2,jpg
                |----video2
                ...
     |-------path2_name
     ...
"""
import cv2
import os
from pathlib import Path

VID_FORMATS = ('.mov', '.avi', '.mp4', '.mpg',  '.mpeg', '.m4v', '.wmv', '.mkv', '.mp3')


def videos2images(root_video_path, root_save_dir):
    for video_dir_path in root_video_path:
        # 1.检测读取文件路径是否正确
        path_video = Path(video_dir_path)
        if path_video.is_dir():
            print(video_dir_path + '\t ok')
            videos = os.listdir(video_dir_path)
        else:
            print('\033[31mLine36 error: \033[31m' + video_dir_path + 'is not exist!')
            return

        # 2. 生成存储文件夹
        save_name_dir = Path(path_video.name)
        save_name_dir = os.path.join(root_save_dir, save_name_dir)
        if not os.path.exists(save_name_dir):
            os.makedirs(save_name_dir)

        file_count = 0
        for video in videos:
            # 判断是否为视频文件,如果不是视频文件则跳过并进行说明
            if Path(video).suffix in VID_FORMATS:
                file_count += 1  # 视频文件数+1
                save_jpg_dir = os.path.join(save_name_dir, Path(video).stem)
                if not os.path.exists(save_jpg_dir):
                    os.makedirs(save_jpg_dir)
                each_video_path = os.path.join(path_video, video)
                save_dir = save_jpg_dir
            else:
                print('\033[33mLine56 warning: \033[33m' + os.path.basename(video) + ' is not a video file, so skip.')
                continue

            # 3. 开始转换。打印正在处理文件的序号和他的文件名，并开始转换
            print('\033[38m' + str(file_count) + ':' + Path(video).stem + '\033[38m')
            cap = cv2.VideoCapture(each_video_path)

            flag = cap.isOpened()
            if not flag:
                print("\033[31mLine 65 error\033[31m: open" + each_video_path + "error!")

            frame_count = 0  # 给每一帧标号
            while True:
                frame_count += 1
                flag, frame = cap.read()
                if not flag:  # 如果已经读取到最后一帧则退出
                    break
                if os.path.exists(
                        save_dir + str(frame_count) + '_t.jpg'):  # 在源视频不变的情况下，如果已经创建，则跳过
                    break
                cv2.imwrite(save_dir + '\\' + str(frame_count) + '_t.jpg', frame) #图片名字

            cap.release()
            print('\033[38m' + Path(video).stem + ' save to ' + save_dir + 'finished. \033[38m')  # 表示一个视频片段已经转换完成


if __name__ == '__main__':
    # 需要转换的视频路径列表，直达视频文件(自定义修改）
    video_path_list = [r'E:\Code\feature_extraction_svm\video/', r'E:\Code\feature_extraction_svm\video2'] # 两个源文件夹

    # 预期存储在的主文件夹，即'result'文件夹下
    image_save_dir = r'E:\Code\feature_extraction_svm\result2'
    path_save = Path(image_save_dir)
    if not path_save.exists():
        path_save.mkdir()
    # 进行转换
    videos2images(video_path_list, image_save_dir)
</code></pre> 
<h4></h4> 
<h4>结果展示：</h4> 
<p>成功运行：</p> 
<p><img alt="" height="188" src="https://images2.imgbox.com/0c/6f/1Ys3BMGY_o.png" width="1094"></p> 
<p> 视频所在文件夹：</p> 
<p><img alt="" height="455" src="https://images2.imgbox.com/49/27/5m4u7WgI_o.png" width="1070"></p> 
<p>图片导出位置如下所示：</p> 
<p><img alt="" height="576" src="https://images2.imgbox.com/f7/82/Yp51EK0E_o.png" width="1054"></p> 
<p></p> 
<h4>主程序</h4> 
<p>视频路径和存储输出路径<br> 原博是支持多个路径 每个路径下多个视频的</p> 
<pre><code class="language-python">video_path_list = [r'video1'，r'video2']
image_save_dir = r'results'
</code></pre> 
<p>判断存储路径是否存在，若不存在则创建。</p> 
<pre><code class="language-python">    if not path_save.exists():
        path_save.mkdir()
</code></pre> 
<h4>进入自定义的转换函数</h4> 
<p>遍历“路径列表<span style="color:#fe2c24;"><span style="background-color:#fef2f0;">”</span><code><span style="background-color:#fef2f0;">for video_dir_path in root_video_path:</span></code></span></p> 
<p>1.检测读取文件路径是否正确</p> 
<pre><code class="language-python"> # 1.检测读取文件路径是否正确
        path_video = Path(video_dir_path)
        if path_video.is_dir():
            print(video_dir_path + '\t ok')
            videos = os.listdir(video_dir_path)
        else:
            print('\033[31mLine36 error: \033[31m' + video_dir_path + 'is not exist!')
            return
</code></pre> 
<p><a href="https://blog.csdn.net/kittyzc/article/details/106462397?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166069716516782388012274%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=166069716516782388012274&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-106462397-null-null.142%5Ev41%5Epc_rank_34_ecpm25,185%5Ev2%5Etag_show&amp;utm_term=Path%EF%BC%88%EF%BC%89&amp;spm=1018.2226.3001.4187" title="python系列13：python中Path常用功能">python系列13：python中Path常用功能</a></p> 
<blockquote> 
 <p>path_video = Path(video_dir_path)<br> 拉出单个路径地址判断<br> .is_dir（）判断路径是否存在<br> 若存在路径赋值给videos<br> 若不存在输出警告</p> 
</blockquote> 
<p><span style="color:#fe2c24;"><code><span style="background-color:#fef2f0;">'\033[31mLine36 error: \033[31m' + video_dir_path + 'is not exist!'</span></code><span style="background-color:#fef2f0;"> </span></span>意为<br> （31m:前景色红色）Line36 error: <em>地址</em>is not exist!</p> 
<p>如图所示：</p> 
<p><img alt="" height="188" src="https://images2.imgbox.com/3c/d4/FElf2hJd_o.png" width="1111"></p> 
<p>该错误为绝对路径具体到某个视频，把黄线处删除即可</p> 
<p><img alt="" height="236" src="https://images2.imgbox.com/25/cb/O5TdZkON_o.png" width="866"></p> 
<p></p> 
<p>参考文章：<a href="https://blog.csdn.net/jingzilideniu/article/details/126367710" title="【脚本解析笔记】将视频转为图片_是孑然呀的博客-CSDN博客">【脚本解析笔记】将视频转为图片_是孑然呀的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1e708181bb1c58f05e07fceda83171a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql中的count(1)、count(*)、count(id)哪个更快？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f8f2e8a3ba76831574336c0a3665138/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">全面理解：C&#43;&#43;中list（双向链表）容器的基础概念与函数解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>