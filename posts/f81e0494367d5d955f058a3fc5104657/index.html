<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java对象拷贝(BeanUtil.copyProperties 方法) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java对象拷贝(BeanUtil.copyProperties 方法)" />
<meta property="og:description" content="一、简介： BeanUtils提供对Java反射和自省API的包装。其主要目的是利用反射机制对JavaBean的属性进行处理。我们知道，一个JavaBean通常包含了大量的属性，很多情况下，对JavaBean的处理导致大量get/set代码堆积，增加了代码长度和阅读代码的难度。
二、用法：
如果你有两个具有很多相同属性的JavaBean，一个很常见的情况就是Struts里的PO对象（持久对象）和对应的ActionForm。例如：一个用户注册页面，有一个User实体类和一个UserActionForm，我们一般会在Action里从ActionForm构造一个PO对象，传统的方式是使用类似下面的语句对属性逐个赋值：
[html] view plain copy // 获取 ActionForm 表单数据 UserActionForm uForm = (UserActionForm) form; // 构造一个User对象 User user = new User(); // 逐一赋值 user.setUsername(uForm.getUsername); user.setPassword(uForm.getPassword); user.setAge(uForm.getAge); // 然后调用JDBC、或操作Hibernate 持久化对象User到数据库 通过这样的方法如果表单数据N多、100、1000（夸张点。哈哈）、、、、那我们不是要写100、、、1000行set、get了。谁都不愿意这样做。
而我们使用 BeanUtils.copyProperties() 方法以后，代码量大大的减少，而且整体程序看着也简洁明朗，代码如下：
[html] view plain copy // 获取 ActionForm 表单数据 UserActionForm uForm = (UserActionForm) form; // 构造一个User对象 User user = new User(); // 赋值 BeanUtils.copyProperties(user, uForm); // 然后调用JDBC、或操作Hibernate 持久化对象User到数据库 ....... 注：如果User和UserActionForm 间存在名称不相同的属性，则BeanUtils不对这些属性进行处理，需要手动处理。例如：
User类里面有个createDate 创建时间字段，而UserActionForm里面无此字段。BeanUtils.copyProperties()不会对此字段做任何处理。必须要自己手动处理。
Date为null时拷贝会报错" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f81e0494367d5d955f058a3fc5104657/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-23T11:02:18+08:00" />
<meta property="article:modified_time" content="2018-03-23T11:02:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java对象拷贝(BeanUtil.copyProperties 方法)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="margin:0px;padding:0px;color:rgb(69,69,69);background-color:rgb(255,255,255);">
  一、简介： 
</div> 
<p style="background-color:rgb(255,255,255);">        BeanUtils提供对Java反射和自省API的包装。其主要目的是利用反射机制对JavaBean的属性进行处理。我们知道，一个JavaBean通常包含了大量的属性，很多情况下，对JavaBean的处理导致大量get/set代码堆积，增加了代码长度和阅读代码的难度。</p> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-size:12px;">二、用法：</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-size:12px;">        如果你有两个具有很多相同属性的JavaBean，一个很常见的情况就是Struts里的PO对象（持久对象）和对应的ActionForm。例如：一个用户注册页面，有一个User实体类和一个UserActionForm，我们一般会在Action里从ActionForm构造一个PO对象，传统的方式是使用类似下面的语句对属性逐个赋值：</span></p> 
<div class="dp-highlighter bg_html" style="margin:0px 0px 24px;padding:1px 0px 0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:rgb(231,229,220);width:772.188px;text-align:left;color:rgb(69,69,69);"> 
 <div class="bar" style="margin:0px;padding:0px 0px 0px 45px;"> 
  <div class="tools" style="margin:0px;padding:3px 8px 10px 10px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;background-color:rgb(248,248,248);border-left:3px solid rgb(108,226,108);border-right:1px solid rgb(231,229,220);"> 
   <strong>[html]</strong>  
   <a href="https://blog.csdn.net/mr_linjw/article/details/50236279#" class="ViewSource" title="view plain" style='margin:0px 10px 0px 0px;padding:1px;background-image:url("https://csdnimg.cn/release/phoenix/images/ico_plain.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;width:16px;height:16px;text-indent:-2000px;'>view plain</a> 
   <span class="tracking-ad" style="margin:0px;padding:0px;"> <a href="https://blog.csdn.net/mr_linjw/article/details/50236279#" class="CopyToClipboard" title="copy" style='margin:0px 10px 0px 0px;padding:1px;background-image:url("https://csdnimg.cn/release/phoenix/images/ico_copy.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;width:16px;height:16px;text-indent:-2000px;'>copy</a></span> 
   <div style="margin:0px;padding:0px;width:16px;height:16px;"></div> 
   <span class="tracking-ad" style="margin:0px;padding:0px;"></span> 
  </div> 
 </div> 
 <ol start="1" class="dp-xml" style="border-top:none;border-right:1px solid rgb(231,229,220);border-bottom:none;border-left:none;background-color:rgb(255,255,255);color:rgb(92,92,92);"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">// 获取 ActionForm 表单数据  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">UserActionForm <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">uForm</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> = (UserActionForm) form;  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 构造一个User对象  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">User <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">user</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> = </span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:rgb(0,0,255);background-color:inherit;">new</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> User();  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 逐一赋值  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">user.setUsername(uForm.getUsername);  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">user.setPassword(uForm.getPassword);  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">user.setAge(uForm.getAge);  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 然后调用JDBC、或操作Hibernate 持久化对象User到数据库  </span></li></ol> 
</div> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-size:12px;">通过这样的方法如果表单数据N多、100、1000（夸张点。哈哈）、、、、那我们不是要写100、、、1000行set、get了。谁都不愿意这样做。</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-size:12px;">而我们使用 BeanUtils.copyProperties() 方法以后，代码量大大的减少，而且整体程序看着也简洁明朗，代码如下：</span></p> 
<div class="dp-highlighter bg_html" style="margin:0px 0px 24px;padding:1px 0px 0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:rgb(231,229,220);width:772.188px;text-align:left;color:rgb(69,69,69);"> 
 <div class="bar" style="margin:0px;padding:0px 0px 0px 45px;"> 
  <div class="tools" style="margin:0px;padding:3px 8px 10px 10px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;background-color:rgb(248,248,248);border-left:3px solid rgb(108,226,108);border-right:1px solid rgb(231,229,220);"> 
   <strong>[html]</strong>  
   <a href="https://blog.csdn.net/mr_linjw/article/details/50236279#" class="ViewSource" title="view plain" style='margin:0px 10px 0px 0px;padding:1px;background-image:url("https://csdnimg.cn/release/phoenix/images/ico_plain.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;width:16px;height:16px;text-indent:-2000px;'>view plain</a> 
   <span class="tracking-ad" style="margin:0px;padding:0px;"> <a href="https://blog.csdn.net/mr_linjw/article/details/50236279#" class="CopyToClipboard" title="copy" style='margin:0px 10px 0px 0px;padding:1px;background-image:url("https://csdnimg.cn/release/phoenix/images/ico_copy.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;width:16px;height:16px;text-indent:-2000px;'>copy</a></span> 
   <div style="margin:0px;padding:0px;width:16px;height:16px;"></div> 
   <span class="tracking-ad" style="margin:0px;padding:0px;"></span> 
  </div> 
 </div> 
 <ol start="1" class="dp-xml" style="border-top:none;border-right:1px solid rgb(231,229,220);border-bottom:none;border-left:none;background-color:rgb(255,255,255);color:rgb(92,92,92);"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">// 获取 ActionForm 表单数据  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">UserActionForm <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">uForm</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> = (UserActionForm) form;  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 构造一个User对象  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">User <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">user</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> = </span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:rgb(0,0,255);background-color:inherit;">new</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> User();  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 赋值  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">BeanUtils.copyProperties(user, uForm);  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">// 然后调用JDBC、或操作Hibernate 持久化对象User到数据库  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;margin-right:0px;margin-bottom:0px;padding:0px 3px 0px 10px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:rgb(0,0,0);background-color:inherit;">.......  </span></li></ol> 
</div> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;color:rgb(255,0,0);">注：</span>如果User和<span style="margin:0px;padding:0px;color:rgb(0,0,0);">UserActionForm<span style="margin:0px;padding:0px;"> </span></span>间存在名称不相同的属性，则BeanUtils不对这些属性进行处理，需要手动处理。例如：</p> 
<p style="background-color:rgb(255,255,255);">User类里面有个createDate 创建时间字段，而UserActionForm里面无此字段。BeanUtils.copyProperties()不会对此字段做任何处理。必须要自己手动处理。</p> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-size:14px;color:rgb(255,0,0);"><span style="font-weight:700;">Date为null时拷贝会报错</span><br></span></p> 
<p style="background-color:rgb(255,255,255);">而commons-beanutils则施加了很多的检验，包括类型的转换，甚至于还会检验对象所属的类的可访问性。</p> 
<p style="background-color:rgb(255,255,255);">而且，commons-beanutils中的装换是不支持java.util.Date的。除了支持基本类型以及基本类型的数组之外，还支持java.sql.Date, java.sql.Time, java.sql.TimeStamp,  java.io.File,  javaio.URL这些类的对象，其余一概不支持。不过你可以自定义你的类的Converter。然后注册进去。</p> 
<p style="background-color:rgb(255,255,255);">感觉commons-beanutils包中的这个BeanUtils类的copyProperties方法，太过复杂，约束太多，而且使用不便，虽然可扩展性好了，但是易用性不高。</p> 
<p style="background-color:rgb(255,255,255);">总结：</p> 
<p style="background-color:rgb(255,255,255);">关于bean复制，如果属性较少，建议直接写个方法完成get/set即可。如果属性较多，可以自己采用反射实现一个满足自己需要的工具类，或者使用spring的那个beanutils类，不建议使用commons-beanutils包中的那个BeanUtils类，刚看了下，这个类对于内部静态类的对象复制也会出现问题，检验太复杂了，常会出现一些诡异的问题。毕竟我们bean复制一般就是简单的属性copy而已。</p> 
<p style="background-color:rgb(255,255,255);">而且，由于这些BeanUtils类都是采用反射机制实现的，对程序的效率也会有影响。因此，慎用BeanUtils.copyProperties！！！</p> 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-family:verdana, Arial, helvetica, 'sans-seriff';line-height:18px;"><span style="margin:0px;padding:0px;font-size:14px;color:rgb(0,102,0);">除BeanUtils外还有一个名为PropertyUtils的工具类，它也提供copyProperties()方法，作用与BeanUtils的同名方法十分相似，主要的区别在于后者提供类型转换功能，即发现两个JavaBean的同名属性为不同类型时，在支持的数据类型范围内进行转换，而前者不支持这个功能，但是速度会更快一些</span></span></p> 
<p><span style="font-size:14px;"><span style="font-family:verdana, Arial, helvetica, 'sans-seriff';color:#006600;"><span style="background-color:rgb(255,255,255);">(此外最后我写了一个专用的克隆工具类给大家</span></span><span style="font-family:'宋体';color:#000000;"><span style="background-color:rgb(199,237,204);">) 其中的beanUtil是spring 包下的</span></span></span></p> 
<pre><code class="language-java">public class CloneUtils {
    /**
     * 拷贝对象
     * @param source
     * @param classType
     * @return
     */
    public static &lt;T, E&gt; E clone(T source, Class&lt;E&gt; classType) {

        if (source == null) {
            return null;
        }
        E targetInstance = null;
        try {
            targetInstance = classType.newInstance();
        } catch (InstantiationException e) {
            throw new RuntimeException(e);
        } catch (IllegalAccessException e) {
            throw new RuntimeException(e);
        }
        BeanUtils.copyProperties(source, targetInstance);
        return targetInstance;
    }

    /**
     * 拷贝数组对象
     * @param sourceList
     * @param classType
     * @return
     */
    public static &lt;T, E&gt; List&lt;E&gt; batchClone(List&lt;T&gt; sourceList, Class&lt;E&gt; classType) {
        if (sourceList == null) {
            return null;
        }
        List&lt;E&gt; result = new ArrayList&lt;E&gt;();
        int size = sourceList.size();
        for (int i = 0; i &lt; size; i++) {
            result.add(clone(sourceList.get(i), classType));
        }
        return result;
    }
}</code></pre> 
<p>使用实例:</p> 
<p></p> 
<pre style="background-color:rgb(199,237,204);font-family:'宋体';font-size:12pt;">OrderDO orderDO = CloneUtils.<span style="font-style:italic;">clone</span>(OrderModel, OrderDO.<span style="color:#000080;"><strong>class</strong></span>);</pre>POJO =&gt; DO 
<p style="background-color:rgb(255,255,255);"><span style="margin:0px;padding:0px;font-family:verdana, Arial, helvetica, 'sans-seriff';line-height:18px;"><span style="margin:0px;padding:0px;font-size:14px;color:rgb(0,102,0);"><br></span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40471edf102a6f70db21888a00af89f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QST培训日志</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c11dbd6984efb658cfb5fae955ee9d4a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用js实现千位分隔符</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>