<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GIS总结 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GIS总结" />
<meta property="og:description" content="GIS介绍:全称Geographic Information System(地理信息系统) 要素模型(Feature)
它是描述地理空间数据对象的基本单位，它描述了一个现实世界中的客观地理实体，如:一条河流、一座桥梁都可以理解为要素
栅格数据
栅格数据是从上向下拍摄的地球照片，使用离散单元存储其值，图片的每个像素点都有一个指定值服务器本身存储，传输速度快，服务器压力小，多为png,jpg,gif数据量大，更新慢
矢量数据
矢量数据是仅仅存储节点，比如箭头，线条，点等。存储的是对象的轮廓，而栅格数据适合表达对象的内容。矢量数据类型有点、线和面。数量小，数据更新快服务器压力大，技术要求高
数据类型介绍 栅格数据: 栅格数据的优势:
适用范围广：栅格数据适用于描述大范围地理现象，例如土地覆盖、气象变化、海洋温度等。这些数据通常覆盖大面积，而且数据分辨率相对较低。连续性强：栅格数据中每个像素都代表一个位置上的属性值，可以形成完整的空间连续性。这使得栅格数据在进行空间分析时能够提供更精细和准确的结果。数据格式统一：栅格数据的格式相对统一，常见的格式包括GeoTIFF、GRID、BIL、BIP、BSQ等。这使得栅格数据在不同的GIS软件和平台上可以更方便地共享和处理。数据处理简单：栅格数据的处理通常比矢量数据简单，因为它们只需要进行基本的数学和统计计算，如平均值、最大值、最小值等。这些计算通常不需要复杂的几何运算。可视化效果好：由于栅格数据的连续性，其可视化效果相对较好。例如，在地图上显示高程模型数据时，可以使用不同的颜色渐变来表示不同的海拔高度，从而形成非常直观的三维地形模型。 文件头部分:
通常包含栅格数据的一些基本信息，例如数据类型、数据格式、地理坐标系、栅格像素数、栅格像素大小等。这部分信息通常是以二进制形式存储在文件的开头，其格式和内容可能因数据格式而异
数据部分: 会存在多个像素波段,每个波段含有对应像素的值。每个像素的值通常是一个数值，表示该像素的属性值(可以是高度、温度、颜色深浅等等)。这些像素值通常是按行存储的，每一行从左到右存储。不同的栅格数据格式可能还会有一些元数据，例如像素值的数据类型、缺失值标识等
矢量数据: 矢量数据的优势:
精度高：矢量数据可以描述精细的地理现象，例如建筑物、交通网络、河流、边界等，因此具有比栅格数据更高的精度和准确性。这使得矢量数据在需要高精度分析和建模的场景中非常有用。数据量小：相对于栅格数据而言，矢量数据的数据量通常较小，因为它们只需要存储要素的位置、形状和属性信息等，而不需要存储每个像素的值。这使得矢量数据在存储和传输方面更加高效。数据格式灵活：矢量数据的格式相对灵活，常见的格式包括Shapefile、GeoJSON、KML等。这使得矢量数据可以适用于不同的GIS软件和平台，并且可以方便地进行共享和交换。几何运算方便：由于矢量数据是基于几何要素的，因此进行几何运算和分析相对容易。例如，在计算两个区域之间的距离时，只需要对它们的边界进行计算即可。可视化效果好：由于矢量数据的精度和准确性较高，其可视化效果相对较好。例如，在地图上显示道路和建筑物时，可以使用不同的符号和颜色来表示不同的要素类型和属性信息，从而形成非常直观的地图。 文件头部分:
通常包含矢量数据的一些基本信息，例如数据类型、数据格式、地理坐标系、要素数目等。这部分信息通常是以二进制形式存储在文件的开头，其格式和内容可能因数据格式而异
几何要素数据部分:
包含矢量数据的实际几何信息。每个几何要素通常由若干个坐标点组成，这些坐标点的顺序和方式通常根据具体的数据格式而定。常见的矢量数据格式包括点数据、线数据和面数据等。
属性数据部分:
包含与几何要素相关联的属性信息，例如地物名称、坐标点的高程值、温度值等。这些属性数据通常是按记录存储的，每个记录包含一个或多个属性字段。不同的矢量数据格式可能还会有一些元数据，例如属性值的数据类型、缺失值标识等。
类型数据处理示例 读取清洗成新的栅格数据: /** * 通用新增为tif上色 现在tiff不上色 * * @param tifUrl 文件地址 * @return levels索引位置对应生成的文件地址 */ public String tiffProcess(String tifUrl) { Dataset open = gdal.Open(tifUrl, gdalconstConstants.GA_ReadOnly); /* 获取gtiff 数据 */ //行数 高 int iYSize = open.getRasterYSize(); //列数 宽 int iXSize = open.getRasterXSize(); //仿射矩阵 double[] doubles = open." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f079f6fdd58880e2d5bf69d2734cafc6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-03T18:56:48+08:00" />
<meta property="article:modified_time" content="2023-03-03T18:56:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GIS总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="GISGeographic_Information_System_0"></a>GIS介绍:全称Geographic Information System(地理信息系统)</h5> 
<blockquote> 
 <p><strong>要素模型(Feature)</strong><br> 它是描述地理空间数据对象的基本单位，它描述了一个现实世界中的客观地理实体，如:一条河流、一座桥梁都可以理解为要素</p> 
</blockquote> 
<hr> 
<blockquote> 
 <p><strong>栅格数据</strong><br> 栅格数据是从上向下拍摄的地球照片，使用离散单元存储其值，图片的每个像素点都有一个指定值服务器本身存储，传输速度快，服务器压力小，多为png,jpg,gif数据量大，更新慢</p> 
</blockquote> 
<hr> 
<blockquote> 
 <p><strong>矢量数据</strong><br> 矢量数据是仅仅存储节点，比如箭头，线条，点等。存储的是对象的轮廓，而栅格数据适合表达对象的内容。矢量数据类型有点、线和面。数量小，数据更新快服务器压力大，技术要求高</p> 
</blockquote> 
<h5><a id="_9"></a>数据类型介绍</h5> 
<h6><a id="_10"></a>栅格数据:</h6> 
<blockquote> 
 <p><strong>栅格数据的优势:</strong></p> 
 <ul><li>适用范围广：栅格数据适用于描述大范围地理现象，例如土地覆盖、气象变化、海洋温度等。这些数据通常覆盖大面积，而且数据分辨率相对较低。</li><li>连续性强：栅格数据中每个像素都代表一个位置上的属性值，可以形成完整的空间连续性。这使得栅格数据在进行空间分析时能够提供更精细和准确的结果。</li><li>数据格式统一：栅格数据的格式相对统一，常见的格式包括GeoTIFF、GRID、BIL、BIP、BSQ等。这使得栅格数据在不同的GIS软件和平台上可以更方便地共享和处理。</li><li>数据处理简单：栅格数据的处理通常比矢量数据简单，因为它们只需要进行基本的数学和统计计算，如平均值、最大值、最小值等。这些计算通常不需要复杂的几何运算。</li><li>可视化效果好：由于栅格数据的连续性，其可视化效果相对较好。例如，在地图上显示高程模型数据时，可以使用不同的颜色渐变来表示不同的海拔高度，从而形成非常直观的三维地形模型。</li></ul> 
</blockquote> 
<blockquote> 
 <p><strong>文件头部分:</strong><br> 通常包含栅格数据的一些基本信息，例如数据类型、数据格式、地理坐标系、栅格像素数、栅格像素大小等。这部分信息通常是以二进制形式存储在文件的开头，其格式和内容可能因数据格式而异</p> 
</blockquote> 
<blockquote> 
 <p><strong>数据部分:</strong> 会存在多个像素波段,每个波段含有对应像素的值。每个像素的值通常是一个数值，表示该像素的属性值(可以是高度、温度、颜色深浅等等)。这些像素值通常是按行存储的，每一行从左到右存储。不同的栅格数据格式可能还会有一些元数据，例如像素值的数据类型、缺失值标识等</p> 
</blockquote> 
<h6><a id="_22"></a>矢量数据:</h6> 
<blockquote> 
 <p><strong>矢量数据的优势:</strong></p> 
 <ul><li>精度高：矢量数据可以描述精细的地理现象，例如建筑物、交通网络、河流、边界等，因此具有比栅格数据更高的精度和准确性。这使得矢量数据在需要高精度分析和建模的场景中非常有用。</li><li>数据量小：相对于栅格数据而言，矢量数据的数据量通常较小，因为它们只需要存储要素的位置、形状和属性信息等，而不需要存储每个像素的值。这使得矢量数据在存储和传输方面更加高效。</li><li>数据格式灵活：矢量数据的格式相对灵活，常见的格式包括Shapefile、GeoJSON、KML等。这使得矢量数据可以适用于不同的GIS软件和平台，并且可以方便地进行共享和交换。</li><li>几何运算方便：由于矢量数据是基于几何要素的，因此进行几何运算和分析相对容易。例如，在计算两个区域之间的距离时，只需要对它们的边界进行计算即可。</li><li>可视化效果好：由于矢量数据的精度和准确性较高，其可视化效果相对较好。例如，在地图上显示道路和建筑物时，可以使用不同的符号和颜色来表示不同的要素类型和属性信息，从而形成非常直观的地图。</li></ul> 
</blockquote> 
<blockquote> 
 <p><strong>文件头部分:</strong><br> 通常包含矢量数据的一些基本信息，例如数据类型、数据格式、地理坐标系、要素数目等。这部分信息通常是以二进制形式存储在文件的开头，其格式和内容可能因数据格式而异</p> 
</blockquote> 
<blockquote> 
 <p><strong>几何要素数据部分:</strong><br> 包含矢量数据的实际几何信息。每个几何要素通常由若干个坐标点组成，这些坐标点的顺序和方式通常根据具体的数据格式而定。常见的矢量数据格式包括点数据、线数据和面数据等。</p> 
</blockquote> 
<blockquote> 
 <p><strong>属性数据部分:</strong><br> 包含与几何要素相关联的属性信息，例如地物名称、坐标点的高程值、温度值等。这些属性数据通常是按记录存储的，每个记录包含一个或多个属性字段。不同的矢量数据格式可能还会有一些元数据，例如属性值的数据类型、缺失值标识等。</p> 
</blockquote> 
<h5><a id="_39"></a>类型数据处理示例</h5> 
<h6><a id="_40"></a>读取清洗成新的栅格数据:</h6> 
<pre><code class="prism language-java"><span class="token comment">/**
     * 通用新增为tif上色 现在tiff不上色
     *
     * @param tifUrl 文件地址
     * @return levels索引位置对应生成的文件地址
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">tiffProcess</span><span class="token punctuation">(</span><span class="token class-name">String</span> tifUrl<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Dataset</span> <span class="token keyword">open</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">gdal<span class="token punctuation">.</span></span>Open</span><span class="token punctuation">(</span>tifUrl<span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">gdalconstConstants<span class="token punctuation">.</span></span>GA_ReadOnly</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
          获取gtiff 数据
         */</span>
        <span class="token comment">//行数 高</span>
        <span class="token keyword">int</span> iYSize <span class="token operator">=</span> <span class="token keyword">open</span><span class="token punctuation">.</span><span class="token function">getRasterYSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//列数 宽</span>
        <span class="token keyword">int</span> iXSize <span class="token operator">=</span> <span class="token keyword">open</span><span class="token punctuation">.</span><span class="token function">getRasterXSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//仿射矩阵</span>
        <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> doubles <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">open<span class="token punctuation">.</span></span>GetGeoTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//地图投影信息</span>
        <span class="token class-name">String</span> projection <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">open<span class="token punctuation">.</span></span>GetProjection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将数据写成数组</span>
        <span class="token class-name">Band</span> sourceBand <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">open<span class="token punctuation">.</span></span>GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> doubles1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">sourceBand<span class="token punctuation">.</span></span>ComputeRasterMinMax</span><span class="token punctuation">(</span>doubles1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>iYSize<span class="token punctuation">]</span><span class="token punctuation">[</span>iXSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iYSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span>iXSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token namespace">sourceBand<span class="token punctuation">.</span></span>ReadRaster</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> iXSize<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> d1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//读取一行数据</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i1 <span class="token operator">&lt;</span> d1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i1<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>d1<span class="token punctuation">[</span>i1<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i1<span class="token punctuation">]</span> <span class="token operator">=</span> d1<span class="token punctuation">[</span>i1<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token comment">/*
          生成tiff
         */</span>
        <span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">gdal<span class="token punctuation">.</span></span>GetDriverByName</span><span class="token punctuation">(</span><span class="token string">"GTiff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> newFile <span class="token operator">=</span> tifUrl<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> tifUrl<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".tif"</span><span class="token punctuation">;</span>
        <span class="token class-name">Dataset</span> create <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">driver<span class="token punctuation">.</span></span>Create</span><span class="token punctuation">(</span>newFile<span class="token punctuation">,</span> iXSize<span class="token punctuation">,</span> iYSize<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">gdalconst<span class="token punctuation">.</span></span>GDT_Byte</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置仿射矩阵</span>
        <span class="token class-name"><span class="token namespace">create<span class="token punctuation">.</span></span>SetGeoTransform</span><span class="token punctuation">(</span>doubles<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置投影信息</span>
        <span class="token class-name"><span class="token namespace">create<span class="token punctuation">.</span></span>SetProjection</span><span class="token punctuation">(</span>projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置波段</span>
        <span class="token class-name">Band</span> targetBand <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">create<span class="token punctuation">.</span></span>GetRasterBand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> colorRange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">sourceBand<span class="token punctuation">.</span></span>ComputeRasterMinMax</span><span class="token punctuation">(</span>colorRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token namespace">targetBand<span class="token punctuation">.</span></span>SetNoDataValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置波段值</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">convertPixel</span><span class="token punctuation">(</span>colorRange<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> colorRange<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name"><span class="token namespace">targetBand<span class="token punctuation">.</span></span>WriteRaster</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">open</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        create<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> newFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 像素波段等级区间判断转换 1-4 高-低
     *
     * @param min 像素最小值
     * @param max 像素最大值
     * @param now 比较值
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">convertPixel</span><span class="token punctuation">(</span><span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">,</span> <span class="token keyword">double</span> now<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        min <span class="token operator">=</span> <span class="token number">100000D</span> <span class="token operator">*</span> min<span class="token punctuation">;</span>
        max <span class="token operator">=</span> max <span class="token operator">*</span> <span class="token number">100000D</span><span class="token punctuation">;</span>
        now <span class="token operator">=</span> now <span class="token operator">*</span> <span class="token number">100000D</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> v <span class="token operator">=</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> v2 <span class="token operator">=</span> v <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> v3 <span class="token operator">=</span> v <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">&lt;=</span> now <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>min <span class="token operator">+</span> v<span class="token punctuation">)</span> <span class="token operator">&gt;</span> now<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//高</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>min <span class="token operator">+</span> v<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> now <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>min <span class="token operator">+</span> v2<span class="token punctuation">)</span> <span class="token operator">&gt;</span> now<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//较高</span>
            <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>min <span class="token operator">+</span> v2<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> now <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>min <span class="token operator">+</span> v3<span class="token punctuation">)</span> <span class="token operator">&gt;</span> now<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//中</span>
            <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>min <span class="token operator">+</span> v3<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> now <span class="token operator">&amp;&amp;</span> max <span class="token operator">&gt;=</span> now<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//低</span>
            <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h5><a id="geoserver_137"></a>geoserver介绍</h5> 
<blockquote> 
 <p><strong>GeoServer是一个开源的地理空间数据服务器</strong><br> 它可以用来发布和管理地理空间数据，并提供各种服务，例如地图渲染、地理编码、空间分析等。GeoServer可以读取各种格式的地理空间数据，例如Shapefile、PostGIS、Oracle Spatial、GeoJSON等，支持各种标准的地理空间数据协议，例如WMS、WFS、WCS、WPS等，同时也支持各种地图样式和渲染效果，例如SLD、CSS等。<br> 如果是前后端结合的项目,也可以在后端配置geotools或者postgis把地理数据返回到前端,前端进行渲染加载;</p> 
</blockquote> 
<blockquote> 
 <p><strong>相关特性:</strong></p> 
 <ul><li>数据存储支持：Geoserver支持多种数据存储，包括PostGIS、Oracle Spatial、MySQL、Shapefile、GeoTIFF等。其中，PostGIS是最常用的数据库存储方式，支持的空间数据类型最全面，性能最优秀。用户可以根据自己的需求选择合适的数据存储方式。</li><li>样式设置：Geoserver支持用户自定义样式，通过Symbology Encoding规范来实现。用户可以使用内置的样式模板，也可以自己创建样式模板。此外，Geoserver还支持符号化规则，使用户能够根据属性和值对数据进行符号化。</li><li>安全设置：Geoserver提供了灵活的安全设置，可以通过基于角色的授权来限制用户对数据的访问。可以通过LDAP、Active Directory等集中式身份验证服务，或者使用内置的用户存储来管理用户和角色。用户可以自定义角色和权限，以实现更加细粒度的授权控制。</li><li>Web服务发布：Geoserver支持OGC标准的Web服务发布，包括WMS、WFS、WCS、WPS等。用户可以选择发布哪些服务，以及服务的参数设置。同时，Geoserver还支持REST API，可以通过HTTP请求来进行数据访问和管理。</li><li>插件扩展：Geoserver支持插件扩展，可以通过插件来扩展Geoserver的功能。例如，通过GeoWebCache插件可以提高WMS服务的性能和稳定性，通过WPS插件可以实现Web处理服务。</li><li>社区支持：Geoserver是一个开源项目，有一个活跃的社区支持。用户可以通过邮件列表、论坛、社交媒体等途径获取技术支持、提出问题和建议，参与社区贡献。</li><li>其他特性：Geoserver还具有其他一些特性，例如支持空间数据分析、支持动态投影、支持数据版本控制等。这些特性可以使用户更加方便地进行空间数据处理和管理。</li></ul> 
</blockquote> 
<p><strong>通过代码发布图层服务到geoserver:</strong></p> 
<pre><code class="prism language-java">		<span class="token comment">// 如果不存在工作区则创建</span>
        <span class="token class-name">URL</span> u <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeoServerRESTManager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeoServerRESTManager</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> geoserverUrl<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> geoserverUrl<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeoServerRESTPublisher</span> publisher <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getPublisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeoServerRESTReader</span> reader <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> workspaces <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getWorkspaceNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>workspaces<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            publisher<span class="token punctuation">.</span><span class="token function">createWorkspace</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> fileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">".shp"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> zipFile <span class="token operator">=</span> filePath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">".shp"</span><span class="token punctuation">,</span> <span class="token string">".zip"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//判断数据存储（datastore）是否已经存在，不存在则创建</span>
        <span class="token class-name">RESTDataStore</span> restStore <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDatastore</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>restStore <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//创建shape文件存储</span>
            <span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">"file://"</span> <span class="token operator">+</span> filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">GSShapefileDatastoreEncoder</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GSShapefileDatastoreEncoder</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            manager<span class="token punctuation">.</span><span class="token function">getStoreManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> store<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//发布图层</span>
        <span class="token comment">//判断图层是否已经存在，不存在则创建并发布</span>
        <span class="token class-name">RESTLayer</span> layer <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">getLayer</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>layer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            manager<span class="token punctuation">.</span><span class="token function">getPublisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">publishShp</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                          fileName<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>zipFile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">GeoServerRESTPublisher</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_CRS</span><span class="token punctuation">,</span> geoserverUrl<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            layer <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">getLayer</span><span class="token punctuation">(</span>geoserverUrl<span class="token punctuation">.</span><span class="token function">getWorkSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">RESTWms</span> wms <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getWms</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RESTBoundingBox</span> nativeBoundingBox <span class="token operator">=</span> wms<span class="token punctuation">.</span><span class="token function">getNativeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileName<span class="token operator">=</span>fileName<span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span>wms<span class="token punctuation">.</span><span class="token function">getSRS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span>nativeBoundingBox<span class="token punctuation">.</span><span class="token function">getMinX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>nativeBoundingBox<span class="token punctuation">.</span><span class="token function">getMinY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>nativeBoundingBox<span class="token punctuation">.</span><span class="token function">getMaxX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>nativeBoundingBox<span class="token punctuation">.</span><span class="token function">getMaxY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> fileName<span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/60bcc79fa3db09002fb4edfde276f92e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot实现Excel导入导出，简单好用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ff1dcc6ce723ba9c41fdc41cdf11f65c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">NI图像处理函数应用——像素操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>