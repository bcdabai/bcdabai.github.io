<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python AVL树的插入 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python AVL树的插入" />
<meta property="og:description" content="key 关键字项
bf 平衡因子
data 其它数据域
lchild rchild 左右孩子
左
右
#右选 左旋
往右偏移说明插入在s3上了,s3s是h，s2是h-1
#左旋 右旋
#下面的代码是右边减左边，其实应该是左边减右边的
from bst import BiTreeNode,BST #下面的代码是右边减左边，其实应该是左边减右边的 class AVLNode(BiTreeNode): def __init__(self,data): BiTreeNode.__init__(self,data) self.bf = 0 class AVLTree(BST): def __init__(self,li=None): BST.__init__(self,li) #左旋 def rotate_left(self,p,c): #s2 是c的左子树 s2 = c.lchild p.rchild =s2 if s2: #父亲连过来,孩子也要连回去 s2.parent = p c.lchild = p p.parent = c p.bf = 0 c.bf = 0 return c def insert_no_rec(self,val): s2 = c." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8d2bf022ef20ecf11d6287df0ca00512/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-20T16:24:49+08:00" />
<meta property="article:modified_time" content="2019-11-20T16:24:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python AVL树的插入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>key 关键字项<br> bf 平衡因子<br> data 其它数据域<br> lchild rchild 左右孩子</p> 
<p>左<br> <img src="https://images2.imgbox.com/40/98/Y98an2ak_o.png" alt="在这里插入图片描述"></p> 
<p>右</p> 
<p><img src="https://images2.imgbox.com/c6/49/gb16C3Xw_o.png" alt="在这里插入图片描述"></p> 
<p>#右选 左旋<br> <img src="https://images2.imgbox.com/56/3b/rW8QYOh8_o.png" alt="在这里插入图片描述"><br> 往右偏移说明插入在s3上了,s3s是h，s2是h-1</p> 
<p>#左旋 右旋<br> <img src="https://images2.imgbox.com/fe/8e/Biive3es_o.png" alt="在这里插入图片描述"></p> 
<p>#下面的代码是右边减左边，其实应该是左边减右边的</p> 
<pre><code class="prism language-c">from bst import BiTreeNode<span class="token punctuation">,</span>BST


#下面的代码是右边减左边，其实应该是左边减右边的

class <span class="token function">AVLNode</span><span class="token punctuation">(</span>BiTreeNode<span class="token punctuation">)</span><span class="token punctuation">:</span>
        def <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
                BiTreeNode<span class="token punctuation">.</span><span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>data<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>


class <span class="token function">AVLTree</span><span class="token punctuation">(</span>BST<span class="token punctuation">)</span><span class="token punctuation">:</span>
        def <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>li<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>
                BST<span class="token punctuation">.</span><span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>li<span class="token punctuation">)</span>

        #左旋
        def <span class="token function">rotate_left</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>p<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token macro property">#s2 是c的左子树</span>
                s2 <span class="token operator">=</span> c<span class="token punctuation">.</span>lchild
                p<span class="token punctuation">.</span>rchild <span class="token operator">=</span>s2
                <span class="token keyword">if</span> s2<span class="token punctuation">:</span>
                        #父亲连过来<span class="token punctuation">,</span>孩子也要连回去
                        s2<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                c<span class="token punctuation">.</span>lchild <span class="token operator">=</span> p
                p<span class="token punctuation">.</span>parent <span class="token operator">=</span> c

                p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token keyword">return</span> c


        def <span class="token function">insert_no_rec</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
                s2 <span class="token operator">=</span> c<span class="token punctuation">.</span>rchild
                p<span class="token punctuation">.</span>lchild <span class="token operator">=</span> s2
                <span class="token keyword">if</span> s2<span class="token punctuation">:</span>
                        s2<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                c<span class="token punctuation">.</span>rchild <span class="token operator">=</span> p
                p<span class="token punctuation">.</span>parent <span class="token operator">=</span> c
                p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                <span class="token keyword">return</span> c

        #右选左旋 
        def <span class="token function">rotate_right_left</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>p<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>
                g <span class="token operator">=</span> c<span class="token punctuation">.</span>lchild
                <span class="token macro property">#s3 是g的右孩子</span>
                s3 <span class="token operator">=</span> g<span class="token punctuation">.</span>rchild
                <span class="token macro property">#s3绑到c的左孩子上   </span>
                c<span class="token punctuation">.</span>lchild <span class="token operator">=</span> s3
                #反着连回去就要判断是否为空 
                <span class="token keyword">if</span> s3<span class="token punctuation">:</span>
                        s3<span class="token punctuation">.</span>parent <span class="token operator">=</span> c
                #下面c和g交互了
                <span class="token macro property">#c 是g的右孩子 </span>
                g<span class="token punctuation">.</span>rchild <span class="token operator">=</span> c
                <span class="token macro property">#g 是c的父亲 </span>
                c<span class="token punctuation">.</span>parent <span class="token operator">=</span> g

                <span class="token macro property">#s2 是g的左孩子         </span>
                s2 <span class="token operator">=</span> g<span class="token punctuation">.</span>lchild
                #现在p的右孩子 等于s2
                p<span class="token punctuation">.</span>rchild <span class="token operator">=</span> s2

                <span class="token keyword">if</span> s2<span class="token punctuation">:</span>
                        s2<span class="token punctuation">.</span>parent <span class="token operator">=</span> p

                g<span class="token punctuation">.</span>lchild <span class="token operator">=</span> p
                p<span class="token punctuation">.</span>parent <span class="token operator">=</span> g

                #更新 bf  插入s3   大于<span class="token number">0</span>就是等于<span class="token number">1</span> 是往右偏移
                <span class="token keyword">if</span> g<span class="token punctuation">.</span>bf <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">:</span>
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                elif g<span class="token punctuation">.</span>bf <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">:</span> #插入s2 左边
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">1</span>

                <span class="token keyword">else</span><span class="token punctuation">:</span>  #特殊情况，G插入进去来 刚插入进来的是叶子根节点， 所以等于<span class="token number">0</span>   G <span class="token operator">=</span><span class="token number">0</span> 
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                #旋转之后的根
                <span class="token keyword">return</span> g

        #先左旋后右选 
        def <span class="token function">rotate_left_right</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>p<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>
                g <span class="token operator">=</span> c<span class="token punctuation">.</span>rchild

                s2 <span class="token operator">=</span> g<span class="token punctuation">.</span>lchild
                c<span class="token punctuation">.</span>rchild <span class="token operator">=</span> s2

                <span class="token keyword">if</span> s2<span class="token punctuation">:</span>
                        s2<span class="token punctuation">.</span>parent <span class="token operator">=</span> c

                g<span class="token punctuation">.</span>lchild <span class="token operator">=</span> c
                c<span class="token punctuation">.</span>parent <span class="token operator">=</span> g

                s3 <span class="token operator">=</span> g<span class="token punctuation">.</span>rchild
                p<span class="token punctuation">.</span>lchild <span class="token operator">=</span> s3

                <span class="token keyword">if</span> s3<span class="token punctuation">:</span>
                        s3<span class="token punctuation">.</span>parent <span class="token operator">=</span> p

                g<span class="token punctuation">.</span>rchild <span class="token operator">=</span> p
                p<span class="token punctuation">.</span>parent <span class="token operator">=</span> g

                #更新 
                <span class="token keyword">if</span> g<span class="token punctuation">.</span>bf <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">1</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                elif g<span class="token punctuation">.</span>bf <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>

                <span class="token keyword">else</span><span class="token punctuation">:</span>
                        p<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                        c<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>

        #代码从左往右读 
        def <span class="token function">insert_no_rec</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span>
                #如果传递或者插入 有一个节点。balance变成<span class="token number">0</span><span class="token punctuation">,</span>停止了       
                #如果变成<span class="token number">2</span>或者<span class="token operator">-</span><span class="token number">2</span> 就不平衡了 
                # <span class="token number">1.</span> 和BST一样，插入
                p <span class="token operator">=</span> self<span class="token punctuation">.</span>root
                <span class="token keyword">if</span> not p<span class="token punctuation">:</span>  # 空树
                        self<span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token function">AVLNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
                        <span class="token keyword">return</span>
                <span class="token keyword">while</span> True<span class="token punctuation">:</span>
                        #来的值要比当前的节点要小 左子树
                        <span class="token keyword">if</span> val <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
                                <span class="token keyword">if</span> p<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
                                        #如果有 父亲指向了孩子
                                        p <span class="token operator">=</span> p<span class="token punctuation">.</span>lchild
                                <span class="token keyword">else</span><span class="token punctuation">:</span>  # 左孩子不存在插入这个位置，插入到p<span class="token punctuation">.</span>lchild的位置上
                                        p<span class="token punctuation">.</span>lchild <span class="token operator">=</span> <span class="token function">AVLNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
                                        #孩子指向了父亲 
                                        p<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                                        #保存这个元素插入的位置 
                                        node <span class="token operator">=</span> p<span class="token punctuation">.</span>lchild # node 存储的就是插入的节点
                                        <span class="token keyword">break</span>
                        elif val <span class="token operator">&gt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
                                <span class="token keyword">if</span> p<span class="token punctuation">.</span>rchild<span class="token punctuation">:</span>
                                        p <span class="token operator">=</span> p<span class="token punctuation">.</span>rchild
                                <span class="token keyword">else</span><span class="token punctuation">:</span>
                                        p<span class="token punctuation">.</span>rchild <span class="token operator">=</span> <span class="token function">AVLNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
                                        p<span class="token punctuation">.</span>rchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                                        node <span class="token operator">=</span> p<span class="token punctuation">.</span>rchild
                                        <span class="token keyword">break</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>   # val <span class="token operator">==</span> p<span class="token punctuation">.</span>data  同样的元素不能多次插入 
                                <span class="token keyword">return</span>

                #右沉左旋，左沉右选             
                #更新balance factor  从它的父亲网上更新
                <span class="token keyword">while</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">:</span>  # node<span class="token punctuation">.</span>parent不空  保证node的从父亲开始
                        #左孩子<span class="token operator">-</span><span class="token number">1</span>  右孩子<span class="token operator">+</span><span class="token number">1</span>
                        <span class="token keyword">if</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild <span class="token operator">==</span> node<span class="token punctuation">:</span> # 传递是从左子树来的，左子树更沉了 插入的
                        #更新node<span class="token punctuation">.</span>parent的bf <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">1</span>  减<span class="token number">1</span>  这是父亲
                                <span class="token keyword">if</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span> # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> 更新后变成<span class="token operator">-</span><span class="token number">2</span>
                                        # 做旋转
                                        # 看node哪边沉
                                        x <span class="token operator">=</span> node<span class="token punctuation">.</span>parent  # 旋转前的子树的根
                                        #右沉 这是子
                                        <span class="token keyword">if</span> node<span class="token punctuation">.</span>bf <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                #旋转之后的新的根
                                                n <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">rotate_left_right</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
                                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                                                n <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">rotate_right_left</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
                                        # 记得：把n和g连起来
                                elif node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span> # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">1</span>，更新之后变成<span class="token number">0</span>
                                        #更新之后减<span class="token number">1</span> 变成零   等于<span class="token number">0</span>就不再传递了
                                        node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                                        <span class="token keyword">break</span>
                                <span class="token keyword">else</span><span class="token punctuation">:</span> # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>，更新之后变成<span class="token operator">-</span><span class="token number">1</span>  
                                        node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
                                        #网上继续走 继续看
                                        node <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
                                        <span class="token keyword">continue</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span> # 传递是从右子树来的，右子树更沉了 插入
                                #更新node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
                                #这是父亲
                                <span class="token keyword">if</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>  # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">,</span> 更新后变成<span class="token number">2</span>
                                        # 做旋转
                                        # 看node哪边沉
                                        g <span class="token operator">=</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent # 为了连接旋转之后的子树
                                        x <span class="token operator">=</span> node<span class="token punctuation">.</span>parent  # 旋转前的子树的根
                                        #这是子
                                        <span class="token keyword">if</span> node<span class="token punctuation">.</span>bf <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span> # node<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">1</span>
                                                 #旋转之后的新的根
                                                n <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">rotate_right_left</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
                                        <span class="token keyword">else</span><span class="token punctuation">:</span>   # node<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
                                                n <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">rotate_left</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
                                        # 记得连起来
                                elif node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span> # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>，更新之后变成<span class="token number">0</span>
                                        node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>
                                        <span class="token keyword">break</span>
                                <span class="token keyword">else</span><span class="token punctuation">:</span> # 原来node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">0</span>，更新之后变成<span class="token number">1</span>
                                        node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>bf <span class="token operator">=</span> <span class="token number">1</span>
                                        node <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
                                        <span class="token keyword">continue</span>

                        # 链接旋转后的子树
                        n<span class="token punctuation">.</span>parent <span class="token operator">=</span> g
                        <span class="token keyword">if</span> g<span class="token punctuation">:</span> # g不是空
                                <span class="token keyword">if</span> x <span class="token operator">==</span> g<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
                                        g<span class="token punctuation">.</span>lchild <span class="token operator">=</span> n
                                <span class="token keyword">else</span><span class="token punctuation">:</span>
                                        g<span class="token punctuation">.</span>rchild <span class="token operator">=</span> n
                                <span class="token keyword">break</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                                self<span class="token punctuation">.</span>root <span class="token operator">=</span> n
                                <span class="token keyword">break</span>



tree <span class="token operator">=</span> <span class="token function">AVLTree</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
tree<span class="token punctuation">.</span><span class="token function">pre_order</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
tree<span class="token punctuation">.</span><span class="token function">in_order</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
</code></pre> 
<p>二叉搜索树</p> 
<pre><code class="prism language-c">import random

class BiTreeNode<span class="token punctuation">:</span>
    def <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>data <span class="token operator">=</span> data
        self<span class="token punctuation">.</span>lchild <span class="token operator">=</span> None   # 左孩子
        self<span class="token punctuation">.</span>rchild <span class="token operator">=</span> None  # 右孩子
        self<span class="token punctuation">.</span>parent <span class="token operator">=</span> None

class BST<span class="token punctuation">:</span>
    def <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> li<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>root <span class="token operator">=</span> None
        <span class="token keyword">if</span> li<span class="token punctuation">:</span>
            <span class="token keyword">for</span> val in li<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span><span class="token function">insert_no_rec</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>

    def <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> not node<span class="token punctuation">:</span>
            node <span class="token operator">=</span> <span class="token function">BiTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        elif val <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>lchild <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>lchild<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
            node<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node
        elif val <span class="token operator">&gt;</span> node<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>rchild <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>rchild<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
            node<span class="token punctuation">.</span>rchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node
        <span class="token keyword">return</span> node

    def <span class="token function">insert_no_rec</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        p <span class="token operator">=</span> self<span class="token punctuation">.</span>root
        <span class="token keyword">if</span> not p<span class="token punctuation">:</span>               # 空树
            self<span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token function">BiTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token keyword">while</span> True<span class="token punctuation">:</span>
            <span class="token keyword">if</span> val <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
                <span class="token keyword">if</span> p<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
                    p <span class="token operator">=</span> p<span class="token punctuation">.</span>lchild
                <span class="token keyword">else</span><span class="token punctuation">:</span>           # 左孩子不存在
                    p<span class="token punctuation">.</span>lchild <span class="token operator">=</span> <span class="token function">BiTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
                    p<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                    <span class="token keyword">return</span>
            elif val <span class="token operator">&gt;</span> p<span class="token punctuation">.</span>data<span class="token punctuation">:</span>
                <span class="token keyword">if</span> p<span class="token punctuation">.</span>rchild<span class="token punctuation">:</span>
                    p <span class="token operator">=</span> p<span class="token punctuation">.</span>rchild
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    p<span class="token punctuation">.</span>rchild <span class="token operator">=</span> <span class="token function">BiTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
                    p<span class="token punctuation">.</span>rchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> p
                    <span class="token keyword">return</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span>

    def <span class="token function">query</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> not node<span class="token punctuation">:</span>
            <span class="token keyword">return</span> None
        <span class="token keyword">if</span> node<span class="token punctuation">.</span>data <span class="token operator">&lt;</span> val<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>rchild<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        elif node<span class="token punctuation">.</span>data <span class="token operator">&gt;</span> val<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>lchild<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> node

    def <span class="token function">query_no_rec</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        p <span class="token operator">=</span> self<span class="token punctuation">.</span>root
        <span class="token keyword">while</span> p<span class="token punctuation">:</span>
            <span class="token keyword">if</span> p<span class="token punctuation">.</span>data <span class="token operator">&lt;</span> val<span class="token punctuation">:</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>rchild
            elif p<span class="token punctuation">.</span>data <span class="token operator">&gt;</span> val<span class="token punctuation">:</span>
                p <span class="token operator">=</span> p<span class="token punctuation">.</span>lchild
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> p
        <span class="token keyword">return</span> None

    def <span class="token function">pre_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> root<span class="token punctuation">:</span>
            <span class="token function">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>data<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span><span class="token function">pre_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span><span class="token function">pre_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">)</span>

    def <span class="token function">in_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> root<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token function">in_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>data<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span><span class="token function">in_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">)</span>

    def <span class="token function">post_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> root<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token function">post_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span><span class="token function">post_order</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">)</span>
            <span class="token function">print</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>data<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>


    def <span class="token function">__remove_node_1</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        # 情况<span class="token number">1</span>：node是叶子节点
        <span class="token keyword">if</span> not node<span class="token punctuation">.</span>parent<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>root <span class="token operator">=</span> None
        <span class="token keyword">if</span> node <span class="token operator">==</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>  #node是它父亲的左孩子
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild <span class="token operator">=</span> None
        <span class="token keyword">else</span><span class="token punctuation">:</span>   #右孩子
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>rchild <span class="token operator">=</span> None

    def <span class="token function">__remove_node_21</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        # 情况<span class="token number">2.1</span>：node只有一个左孩子
        <span class="token keyword">if</span> not node<span class="token punctuation">.</span>parent<span class="token punctuation">:</span> # 根节点
            self<span class="token punctuation">.</span>root <span class="token operator">=</span> node<span class="token punctuation">.</span>lchild
            node<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> None
        elif node <span class="token operator">==</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild <span class="token operator">=</span> node<span class="token punctuation">.</span>lchild
            node<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>rchild <span class="token operator">=</span> node<span class="token punctuation">.</span>lchild
            node<span class="token punctuation">.</span>lchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent

    def <span class="token function">__remove_node_22</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        # 情况<span class="token number">2.2</span>：node只有一个右孩子
        <span class="token keyword">if</span> not node<span class="token punctuation">.</span>parent<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>root <span class="token operator">=</span> node<span class="token punctuation">.</span>rchild
        elif node <span class="token operator">==</span> node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>lchild <span class="token operator">=</span> node<span class="token punctuation">.</span>rchild
            node<span class="token punctuation">.</span>rchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>rchild <span class="token operator">=</span> node<span class="token punctuation">.</span>rchild
            node<span class="token punctuation">.</span>rchild<span class="token punctuation">.</span>parent <span class="token operator">=</span> node<span class="token punctuation">.</span>parent


    def <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>root<span class="token punctuation">:</span>   # 不是空树
            node <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">query_no_rec</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
            <span class="token keyword">if</span> not node<span class="token punctuation">:</span> # 不存在
                <span class="token keyword">return</span> False
            <span class="token keyword">if</span> not node<span class="token punctuation">.</span>lchild and not node<span class="token punctuation">.</span>rchild<span class="token punctuation">:</span> #<span class="token number">1.</span> 叶子节点
                self<span class="token punctuation">.</span><span class="token function">__remove_node_1</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
            elif not node<span class="token punctuation">.</span>rchild<span class="token punctuation">:</span>       # <span class="token number">2.1</span> 只有一个左孩子
                self<span class="token punctuation">.</span><span class="token function">__remove_node_21</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
            elif not node<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>       # <span class="token number">2.2</span> 只有一个右孩子
                self<span class="token punctuation">.</span><span class="token function">__remove_node_22</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>   # <span class="token number">3.</span> 两个孩子都有
                min_node <span class="token operator">=</span> node<span class="token punctuation">.</span>rchild
                <span class="token keyword">while</span> min_node<span class="token punctuation">.</span>lchild<span class="token punctuation">:</span>
                    min_node <span class="token operator">=</span> min_node<span class="token punctuation">.</span>lchild
                node<span class="token punctuation">.</span>data <span class="token operator">=</span> min_node<span class="token punctuation">.</span>data
                # 删除min_node
                <span class="token keyword">if</span> min_node<span class="token punctuation">.</span>rchild<span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span><span class="token function">__remove_node_22</span><span class="token punctuation">(</span>min_node<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span><span class="token function">__remove_node_1</span><span class="token punctuation">(</span>min_node<span class="token punctuation">)</span>




#
<span class="token macro property">#

tree = BST([1,4,2,5,3,8,6,9,7])</span>
tree<span class="token punctuation">.</span><span class="token function">pre_order</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
tree<span class="token punctuation">.</span><span class="token function">in_order</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
tree<span class="token punctuation">.</span><span class="token function">post_order</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>

#
<span class="token macro property"># tree.delete(4)</span>
<span class="token macro property"># tree.delete(1)</span>
<span class="token macro property"># tree.delete(8)</span>
<span class="token macro property"># tree.in_order(tree.root)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/07/0b/LYsbGyip_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c8f7ade91d7af798788c619f537ff947/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">导入Flutter项目Because xxx depends on dio &gt;=3.0.0-dev.1 which requires SDK version &gt;2</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2dfdac75681c7e75b44b8ba1c01deed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常见编码及乱码的处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>