<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax请求 不同步,如何使JQuery-AJAX请求同步 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax请求 不同步,如何使JQuery-AJAX请求同步" />
<meta property="og:description" content="如何使Ajax请求同步？
我有一个需要提交的表格。但是只有在用户输入正确的密码时才需要提交。
这是表单代码：
用于发送和检查密码的jQuery代码是这样的：
var ajaxSubmit = function(formE1) {
var password = $.trim($(&#39;#employee_password&#39;).val());
$.ajax({
type: &#34;POST&#34;,
async: &#34;false&#34;,
url: &#34;checkpass.php&#34;,
data: &#34;password=&#34;&#43;password,
success: function(html) {
var arr=$.parseJSON(html);
if(arr == &#34;Successful&#34;) {
return true;
} else {
return false;
}
}
});
}
但是，无论ajax请求返回的值如何，该表单始终提交。我检查了其他所有内容。输入正确的密码后，arr的值将显示为“成功”，反之亦然。
如何使此请求同步？据我可以调试，请求是异步的，因此在请求完成之前先提交表单。
checkpass.php的代码
require(&#34;includes/apptop.php&#34;);
require(&#34;classes/class_employee.php&#34;);
require(&#34;classes/class_employee_attendance.php&#34;);
$employee_password=$_POST[&#39;password&#39;];
$m=new employee();
$m-&gt;setbyid_employee(1);
$arr=$m-&gt;editdisplay_employee();
if($arr[&#39;employee_password&#39;] == $employee_password)
{
$res=&#34;Successful&#34;;
}
else
{
$res=&#34;Password not match&#34;;
}
echo $res;
?&gt;
更新：已找到解决方案。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f0f9ab22cc39c63c7fffaef6f2dfe6b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T14:52:25+08:00" />
<meta property="article:modified_time" content="2021-08-05T14:52:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax请求 不同步,如何使JQuery-AJAX请求同步</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>如何使Ajax请求同步？</p> 
 <p>我有一个需要提交的表格。但是只有在用户输入正确的密码时才需要提交。</p> 
 <p>这是表单代码：</p> 
 <p>用于发送和检查密码的jQuery代码是这样的：</p> 
 <p>var ajaxSubmit = function(formE1) {<!-- --></p> 
 <p>var password = $.trim($('#employee_password').val());</p> 
 <p>$.ajax({<!-- --></p> 
 <p>type: "POST",</p> 
 <p>async: "false",</p> 
 <p>url: "checkpass.php",</p> 
 <p>data: "password="+password,</p> 
 <p>success: function(html) {<!-- --></p> 
 <p>var arr=$.parseJSON(html);</p> 
 <p>if(arr == "Successful") {<!-- --></p> 
 <p>return true;</p> 
 <p>} else {<!-- --></p> 
 <p>return false;</p> 
 <p>}</p> 
 <p>}</p> 
 <p>});</p> 
 <p>}</p> 
 <p>但是，无论ajax请求返回的值如何，该表单始终提交。我检查了其他所有内容。输入正确的密码后，arr的值将显示为“成功”，反之亦然。</p> 
 <p>如何使此请求同步？据我可以调试，请求是异步的，因此在请求完成之前先提交表单。</p> 
 <p>checkpass.php的代码</p> 
 <p>require("includes/apptop.php");</p> 
 <p>require("classes/class_employee.php");</p> 
 <p>require("classes/class_employee_attendance.php");</p> 
 <p>$employee_password=$_POST['password'];</p> 
 <p>$m=new employee();</p> 
 <p>$m-&gt;setbyid_employee(1);</p> 
 <p>$arr=$m-&gt;editdisplay_employee();</p> 
 <p>if($arr['employee_password'] == $employee_password)</p> 
 <p>{<!-- --></p> 
 <p>$res="Successful";</p> 
 <p>}</p> 
 <p>else</p> 
 <p>{<!-- --></p> 
 <p>$res="Password not match";</p> 
 <p>}</p> 
 <p>echo $res;</p> 
 <p>?&gt;</p> 
 <p>更新：已找到解决方案。</p> 
 <p>正如Olaf Dietshche指出的那样：的返回值ajaxSubmit不是的返回值success:</p> 
 <p>function(){...}。ajaxSubmit完全不返回任何值，该值等于undefined，其结果为true。</p> 
 <p>这就是为什么总是提交表单并且独立于是否同步发送请求的原因。</p> 
 <p>因此，我1在成功后将变量设置为成功函数内部。并从成功函数中检查了它的值，如果它1不在成功函数中，那么我写了return true ... else</p> 
 <p>return false。那行得通。</p> 
 <p>更新的工作代码：</p> 
 <p>var ajaxsubmit=function(forme1) {<!-- --></p> 
 <p>var password = $.trim($('#employee_password').val());</p> 
 <p>var test="0";</p> 
 <p>$.ajax({<!-- --></p> 
 <p>type: "POST",</p> 
 <p>url: "checkpass.php",</p> 
 <p>async: false,</p> 
 <p>data: "password="+password,</p> 
 <p>success: function(html) {<!-- --></p> 
 <p>if(html == "Successful") {<!-- --></p> 
 <p>test="1";</p> 
 <p>} else {<!-- --></p> 
 <p>alert("Password incorrect. Please enter correct password.");</p> 
 <p>test="0";</p> 
 <p>}</p> 
 <p>}</p> 
 <p>});</p> 
 <p>if(test=="1") {<!-- --></p> 
 <p>return true;</p> 
 <p>} else if(test=="0") {<!-- --></p> 
 <p>return false;</p> 
 <p>}</p> 
 <p>}</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2d3b3aff2e1b913421ed39ad7bb36f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ajax怎么添加表单,使用Ajax动态地将表单添加到Django表单集</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6eb37433d41c7d1799fafb1f3885c203/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">虚拟仿真三种部署方案的优劣势对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>