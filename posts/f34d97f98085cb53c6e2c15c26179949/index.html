<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Lucene、Solr和Elasticsearch三者的区别与联系 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Lucene、Solr和Elasticsearch三者的区别与联系" />
<meta property="og:description" content="目录
一、结构化数据与非结构化数据
二、全文检索
三、Lucene
四、Lucene、Solr、Elasticsearch三者的关系
Solr
Elasticsearch
Solr的优缺点
Elasticsearch的优缺点
Elasticsearch 与 Solr 的比较
一、结构化数据与非结构化数据 结构化数据：指具有固定格式或有限长度的数据，如数据库，元数据等。
非结构化数据：指不定长或无固定格式的数据，如邮件，word文档等。
结构化数据的搜索
根据上面所述的内容，所以两者在搜索上也是同样存在着一定的区别 （内容来自wiki）：
对于结构化的数据：对数据库的搜索，用SQL语句。再如对元数据的搜索，如利用windows搜索对文件名，类型，修改时间进行搜索等。
对于非结构化的数据：
顺序扫描法(Serial Scanning)：所谓顺序扫描，比如要找内容包含某一个字符串的文件，就是一个文档一个文档的看，对于每一个文档，从头看到尾，如果此文档包含此字符串，则此文档为我们要找的文件，接着看下一个文件，直到扫描完所有的文件。如利用windows的搜索也可以搜索文件内容，只是相当的慢。全文检索(Full-text Search)：将非结构化数据中的一部分信息提取出来，重新组织，使其变得有一定结构，然后对此有一定结构的数据进行搜索，从而达到搜索相对较快的目的。这部分从非结构化数据中提取出的然后重新组织的信息，我们称之索引。例如：字典。字典的拼音表和部首检字表就相当于字典的索引，对每一个字的解释是非结构化的，如果字典没有音节表和部首检字表，在茫茫辞海中找一个字只能顺序扫描。然而字的某些信息可以提取出来进行结构化处理，比如读音，就比较结构化，分声母和韵母，分别只有几种可以一一列举，于是将读音拿出来按一定的顺序排列，每一项读音都指向此字的详细解释的页数。我们搜索时按结构化的拼音搜到读音，然后按其指向的页数，便可找到我们的非结构化数据——也即对字的解释。这种先建立索引，再对索引进行搜索的过程就叫全文检索(Full-text Search)。 二、全文检索 1、全文检索是一种将文件中所有文本与检索项匹配的文字资料检索方法。全文检索首先将要查询的目标文档中的词提取出来，组成索引，通过查询索引达到搜索目标文档的目的。这种先建立索引，再对索引进行搜索的过程就叫全文检索（Full-text Search）。
2、全文检索就是把文本中的内容拆分成若干个关键词，然后根据关键词创建索引。查询时，根据关键词查询索引，最终找到包含关键词的文章。整个过程类似于查字典的过程。（重点在于如何可以正确高效的拆分关键词，然后根据关键词创建索引）
3、全文检索的应用领域：
搜索引擎：例如百度、谷歌、搜狗。站内搜索：例如论坛搜索，天涯论坛搜索、微博搜索。电商搜索：搜索的是商品信息。例如淘宝、京东。
三、Lucene Lucene是apache下的一个子项目，是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎。官网地址：https://lucene.apache.org/
Lucene实现索引和全文搜索流程
图中的蓝色表示索引过程，对要搜索的原始内容进行索引构建一个索引库，索引过程包括：
确定原始文档内容即要搜索的内容--》获得文档--》创建文档对象--》分析文档--》索引文档
1）创建文档对象。为每个文件对应的创建一个Document对象。把文件的属性都保存到document对象中。需要为每个属性创建一个field（在lucene中叫做域），把field添加到文档对象中。每个document都有一个唯一的编号。
2）分析文档。针对document中的域进行分析，例如分析文件名、文件内容两个域。先把文件内容域中的字符串根据空格进行分词，把单词进行统一转换成小写。把没有意义的单词叫做停用词。把停用词从词汇列表中去掉。去掉标点符号。最终得到一个关键词列表。每个关键词叫做一个Term。Term中包含关键词及其所在的域，不同的域中相当的单词是不同的term。
3）创建索引。索引，即为了提高查询速度的一种数据结构。在关键词列表上创建一个索引；把索引和文档对象写入索引库，并记录关键词和文档对象的对应关系。
每个关键词对应一链表，链表中的每个元素都是document对象的id。对所有文档分析得出的语汇单元进行索引，索引的目的是为了搜索，最终要实现只搜索被索引的语汇单元从而找到Document（文档）。
注意：创建索引是对语汇单元索引，通过词语找文档，这种索引的结构叫倒排索引结构。传统方法是根据文件找到该文件的内容，在文件内容中匹配搜索关键字，这种方法是顺序扫描方法，数据量大、搜索慢。倒排索引结构也叫反向索引结构，包括索引和文档两部分，索引即词汇表，它的规模较小，而文档集合较大。
4）查询索引
图中的黄色表示搜索过程，从索引库中搜索内容，搜索过程包括：
用户通过搜索界面--》创建查询--》执行搜索，从索引库搜索--》渲染搜索结果
搜索就是用户输入关键字，从索引（index）中进行搜索的过程。根据关键字搜索索引，根据索引找到对应的文档，从而找到要搜索的内容（这里指磁盘上的文件）。
四、Lucene、Solr、Elasticsearch三者的关系 Solr Solr是一个高性能，采用Java5开发，基于Lucene的全文搜索服务器。同时对其进行了扩展，提供了比Lucene更为丰富的查询语言，同时实现了可配置、可扩展并对查询性能进行了优化，并且提供了一个完善的功能管理界面，是一款非常优秀的全文搜索引擎。官网地址：http://lucene.apache.org/solr/
Elasticsearch Elasticsearch跟Solr一样，也是一个基于Lucene的全文搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。官网地址：https://www.elastic.co/products/elasticsearch
Solr的优缺点 优点：
Solr有一个更大、更成熟的用户、开发和贡献者社区。支持添加多种格式的索引，如：HTML、PDF、微软 Office 系列软件格式以及 JSON、XML、CSV 等纯文本格式。Solr比较成熟、稳定。不考虑建索引的同时进行搜索，速度更快。 缺点：建立索引时，搜索效率下降，实时索引搜索效率不高。
Elasticsearch的优缺点 优点：
Elasticsearch是分布式的。不需要其他组件，分发是实时的，被叫做”Push replication”。Elasticsearch 完全支持 Apache Lucene 的接近实时的搜索。处理多租户（multitenancy）不需要特殊配置，而Solr则需要更多的高级设置。Elasticsearch 采用 Gateway 的概念，使得完备份更加简单。各节点组成对等的网络结构，某些节点出现故障时会自动分配其他节点代替其进行工作。 缺点：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f34d97f98085cb53c6e2c15c26179949/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-21T14:53:00+08:00" />
<meta property="article:modified_time" content="2020-07-21T14:53:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Lucene、Solr和Elasticsearch三者的区别与联系</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%9D%9E%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%9D%9E%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE" rel="nofollow">一、结构化数据与非结构化数据</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2" rel="nofollow">二、全文检索</a></p> 
<p id="%E4%B8%89%E3%80%81Lucene-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Lucene" rel="nofollow">三、Lucene</a></p> 
<p id="%E5%9B%9B%E3%80%81Lucene%E3%80%81Solr%E3%80%81Elasticsearch%E4%B8%89%E8%80%85%E7%9A%84%E5%85%B3%E7%B3%BB-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81Lucene%E3%80%81Solr%E3%80%81Elasticsearch%E4%B8%89%E8%80%85%E7%9A%84%E5%85%B3%E7%B3%BB" rel="nofollow">四、Lucene、Solr、Elasticsearch三者的关系</a></p> 
<p id="Solr-toc" style="margin-left:40px;"><a href="#Solr" rel="nofollow">Solr</a></p> 
<p id="Elasticsearch-toc" style="margin-left:40px;"><a href="#Elasticsearch" rel="nofollow">Elasticsearch</a></p> 
<p id="Solr%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A-toc" style="margin-left:40px;"><a href="#Solr%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A" rel="nofollow">Solr的优缺点</a></p> 
<p id="Elasticsearch%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A-toc" style="margin-left:40px;"><a href="#Elasticsearch%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A" rel="nofollow">Elasticsearch的优缺点</a></p> 
<p id="Elasticsearch%20%E4%B8%8E%20Solr%20%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A-toc" style="margin-left:40px;"><a href="#Elasticsearch%20%E4%B8%8E%20Solr%20%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A" rel="nofollow">Elasticsearch 与 Solr 的比较</a></p> 
<hr id="hr-toc"> 
<h2 id="%E4%B8%80%E3%80%81%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE%E4%B8%8E%E9%9D%9E%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE">一、结构化数据与非结构化数据</h2> 
<p>结构化数据：指具有固定格式或有限长度的数据，如数据库，元数据等。<br> 非结构化数据：指不定长或无固定格式的数据，如邮件，word文档等。<br>  </p> 
<p><strong>结构化数据的搜索</strong></p> 
<p>根据上面所述的内容，所以两者在搜索上也是同样存在着一定的区别 （内容来自wiki）：</p> 
<p><strong>对于结构化的数据：</strong>对数据库的搜索，用SQL语句。再如对元数据的搜索，如利用windows搜索对文件名，类型，修改时间进行搜索等。<br><strong>对于非结构化的数据：</strong></p> 
<ol><li><strong>顺序扫描法(Serial Scanning)：</strong>所谓顺序扫描，比如要找内容包含某一个字符串的文件，就是一个文档一个文档的看，对于每一个文档，从头看到尾，如果此文档包含此字符串，则此文档为我们要找的文件，接着看下一个文件，直到扫描完所有的文件。如利用windows的搜索也可以搜索文件内容，只是相当的慢。</li><li><strong>全文检索(Full-text Search)：</strong>将非结构化数据中的一部分信息提取出来，重新组织，使其变得有一定结构，然后对此有一定结构的数据进行搜索，从而达到搜索相对较快的目的。这部分从非结构化数据中提取出的然后重新组织的信息，我们称之索引。例如：字典。字典的拼音表和部首检字表就相当于字典的索引，对每一个字的解释是非结构化的，如果字典没有音节表和部首检字表，在茫茫辞海中找一个字只能顺序扫描。然而字的某些信息可以提取出来进行结构化处理，比如读音，就比较结构化，分声母和韵母，分别只有几种可以一一列举，于是将读音拿出来按一定的顺序排列，每一项读音都指向此字的详细解释的页数。我们搜索时按结构化的拼音搜到读音，然后按其指向的页数，便可找到我们的非结构化数据——也即对字的解释。这种先建立索引，再对索引进行搜索的过程就叫全文检索(Full-text Search)。</li></ol> 
<h2> </h2> 
<h2 id="%E4%BA%8C%E3%80%81%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2"><strong>二、全文检索</strong></h2> 
<p>1、全文检索是一种将文件中所有文本与检索项匹配的文字资料检索方法。全文检索首先将要查询的目标文档中的词提取出来，组成索引，通过查询索引达到搜索目标文档的目的。<span style="color:#f33b45;">这种先建立索引，再对索引进行搜索的过程就叫全文检索（Full-text Search）。</span><br> 2、全文检索就是<span style="color:#f33b45;">把文本中的内容拆分成若干个关键词，然后根据关键词创建索引。查询时，根据关键词查询索引，最终找到包含关键词的文章。</span>整个过程类似于查字典的过程。（重点在于如何可以正确高效的拆分关键词，然后根据关键词创建索引）<br> 3、全文检索的应用领域：</p> 
<ul><li>搜索引擎：例如百度、谷歌、搜狗。</li><li>站内搜索：例如论坛搜索，天涯论坛搜索、微博搜索。</li><li>电商搜索：搜索的是商品信息。例如淘宝、京东。<br>  </li></ul> 
<h2> </h2> 
<h2 id="%E4%B8%89%E3%80%81Lucene"><strong>三、Lucene</strong></h2> 
<p>Lucene是apache下的一个子项目，是一个开放源代码的<strong>全文检索引擎工具包</strong>，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎。官网地址：https://lucene.apache.org/</p> 
<p><strong>Lucene实现索引和全文搜索流程</strong></p> 
<p><strong><img alt="" src="https://images2.imgbox.com/48/c3/bY11DJpK_o.png"></strong></p> 
<p>图中的蓝色表示索引过程，对要搜索的原始内容进行索引构建一个索引库，索引过程包括：</p> 
<p>确定原始文档内容即要搜索的内容--》获得文档--》创建文档对象--》分析文档--》索引文档</p> 
<p><strong>1）创建文档对象。</strong>为每个文件对应的创建一个Document对象。把文件的属性都保存到document对象中。需要为每个属性创建一个field（在lucene中叫做域），把field添加到文档对象中。每个document都有一个唯一的编号。</p> 
<p><br><strong>2）分析文档。</strong>针对document中的域进行分析，例如分析文件名、文件内容两个域。先把文件内容域中的字符串根据空格进行分词，把单词进行统一转换成小写。把没有意义的单词叫做停用词。把停用词从词汇列表中去掉。去掉标点符号。最终得到一个关键词列表。每个关键词叫做一个Term。Term中包含关键词及其所在的域，不同的域中相当的单词是不同的term。</p> 
<p><br><strong>3）创建索引。</strong>索引，即为了提高查询速度的一种数据结构。在关键词列表上创建一个索引；把索引和文档对象写入索引库，并记录关键词和文档对象的对应关系。</p> 
<p><img alt="" src="https://images2.imgbox.com/bb/57/MC133kcq_o.png"></p> 
<p>每个关键词对应一链表，链表中的每个元素都是document对象的id。对所有文档分析得出的语汇单元进行索引，索引的目的是为了搜索，最终要实现只搜索被索引的语汇单元从而找到Document（文档）。</p> 
<p>注意：创建索引是对语汇单元索引，通过词语找文档，这种索引的结构叫<span style="color:#f33b45;">倒排索引结构</span>。传统方法是根据文件找到该文件的内容，在文件内容中匹配搜索关键字，这种方法是顺序扫描方法，数据量大、搜索慢。倒排索引结构也叫反向索引结构，包括索引和文档两部分，索引即词汇表，它的规模较小，而文档集合较大。</p> 
<p><br><strong>4）查询索引</strong></p> 
<p>图中的黄色表示搜索过程，从索引库中搜索内容，搜索过程包括：</p> 
<p>用户通过搜索界面--》创建查询--》执行搜索，从索引库搜索--》渲染搜索结果</p> 
<p>搜索就是用户输入关键字，从索引（index）中进行搜索的过程。根据关键字搜索索引，根据索引找到对应的文档，从而找到要搜索的内容（这里指磁盘上的文件）。</p> 
<p> </p> 
<h2 id="%E5%9B%9B%E3%80%81Lucene%E3%80%81Solr%E3%80%81Elasticsearch%E4%B8%89%E8%80%85%E7%9A%84%E5%85%B3%E7%B3%BB">四、Lucene、Solr、Elasticsearch三者的关系</h2> 
<h3 id="Solr"><strong>Solr</strong></h3> 
<p>Solr是一个高性能，采用Java5开发，<strong>基于Lucene的全文搜索服务器</strong>。同时对其进行了扩展，提供了比Lucene更为丰富的查询语言，同时实现了可配置、可扩展并对查询性能进行了优化，并且提供了一个完善的功能管理界面，是一款非常优秀的全文搜索引擎。官网地址：http://lucene.apache.org/solr/</p> 
<h3 id="Elasticsearch"><strong>Elasticsearch</strong></h3> 
<p>Elasticsearch跟Solr一样，也是一个<strong>基于Lucene的全文搜索服务器。</strong>它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。官网地址：https://www.elastic.co/products/elasticsearch<br>  </p> 
<h3 id="Solr%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A">Solr的优缺点</h3> 
<p><strong>优点：</strong></p> 
<ul><li>Solr有一个更大、更成熟的用户、开发和贡献者社区。</li><li>支持添加多种格式的索引，如：HTML、PDF、微软 Office 系列软件格式以及 JSON、XML、CSV 等纯文本格式。</li><li>Solr比较成熟、稳定。</li><li>不考虑建索引的同时进行搜索，速度更快。</li></ul> 
<p><strong>缺点：</strong>建立索引时，搜索效率下降，实时索引搜索效率不高。<br>  </p> 
<h3 id="Elasticsearch%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9A">Elasticsearch的优缺点</h3> 
<p><strong>优点：</strong></p> 
<ul><li>Elasticsearch是分布式的。不需要其他组件，分发是实时的，被叫做”Push replication”。</li><li>Elasticsearch 完全支持 Apache Lucene 的接近实时的搜索。</li><li>处理多租户（multitenancy）不需要特殊配置，而Solr则需要更多的高级设置。</li><li>Elasticsearch 采用 Gateway 的概念，使得完备份更加简单。</li><li>各节点组成对等的网络结构，某些节点出现故障时会自动分配其他节点代替其进行工作。</li></ul> 
<p><strong>缺点：</strong></p> 
<ul><li>只有一名开发者（当前Elasticsearch GitHub组织已经不只如此，已经有了相当活跃的维护者）</li><li>还不够自动（不适合当前新的Index Warmup API）<br>  </li></ul> 
<h3 id="Elasticsearch%20%E4%B8%8E%20Solr%20%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A">Elasticsearch 与 Solr 的比较</h3> 
<ol><li>二者安装都很简单；</li><li>Solr 利用 Zookeeper 进行分布式管理，而 Elasticsearch 自身带有分布式协调管理功能;</li><li>Solr 支持更多格式的数据，而 Elasticsearch 仅支持json文件格式；</li><li>Solr 官方提供的功能更多，而 Elasticsearch 本身更注重于核心功能，高级功能多有第三方插件提供；</li><li>Solr 在传统的搜索应用中表现好于 Elasticsearch，但在处理实时搜索应用时效率明显低于 Elasticsearch。</li><li>Solr 是传统搜索应用的有力解决方案，但 Elasticsearch 更适用于新兴的实时搜索应用。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bfc615b341a14c88b6397b78bcf69681/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何优雅的利用C#做协议解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e5b2c3a06af779d4b8284035368c4d0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Unity基础系列（五）——每秒帧率（测试性能）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>