<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows下YOLO V5环境（pytorch，cuda）配置及部署 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows下YOLO V5环境（pytorch，cuda）配置及部署" />
<meta property="og:description" content="最近在学习yolo v5 分享一下学习经验
一.torch环境配置： 1.Anaconda安装 首先需要下载一个Anaconda来方便我们配置pytorch的环境
Anaconda直接百度就可以找到官网并且下载
可以进入Anaconda的官网查询你想下载的版本对应的是哪个安装包，主界面进入后直接点击下方的Get Additional Linstallers
点进来之后会进入如下界面
上面默认是最新版的Anaconda选择你对应的系统就能进行安装了 不过有的时候我们需要下载一些比较旧的版本的Anaconda， 在Anaconda的界面选择下面蓝框里的archive就会得到旧版本安装表的列表了
如果没有科学上网的话国内在Anaconda官网下载速度可能会很慢也容易出现下载失败等问题，这时候可以访问下面的国内源进行下载，下载完成后一直点确定就行了。
https://mirrors.bfsu.edu.cn/anaconda/archive/ 2.CUDA安装（如果你的电脑没有NIVDIA显卡可以跳过这一步） 首先从开始菜单打开NIVDIA的控制面板，如果没有的话需要到官网下载显卡驱动 ，具体可以参考这位老哥的博客
https://blog.csdn.net/weixin_36040777/article/details/114875128?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167522802616782425111390%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=167522802616782425111390&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-7-114875128-null-null.142^v72^control,201^v4^add_ask&amp;utm_term=%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD&amp;spm=1018.2226.3001.4187
打开NV的控制面板后点击左下角的系统信息，然后选择组件
这一行就是显示当前你显卡能支持的“最高”（划重点）CUDA版本，像我的就是12.0.139
接下来就可以从NIVDIA的官网下载我们需要的CUDA（别无脑下载最新版本，有时候pytorch并没有支持到最新的CUDA）可以先访问Pytorch的官网看一眼
比如我现在其实已经能从官网上下载到12.0的CUDA了，但是Pytorch只有到11.7的版本所以请下载11.7版本的CUDA，官网如下：https://developer.nvidia.cn/cuda-toolkit-archive 如果安装CUDA报错了有可能是和visual studio冲突，CUDA安装选择自定义安装，关闭CUDA下的VSE（visual studio edition）选项
按下Win&#43;R键输入cmd进入命令窗口输入下面的代码
nvcc -V 出现如下窗口则表示安装成功了
3.pytorch安装 接下来从开始菜单打开anaconda prompt，输入(后面的python=3.9表示的是建立的python环境，可自行选择版本)
conda create -n yolov5 python=3.9 执行后会出现问你是否确定安装，输入y再回车即可。然后来激活我们创建的yolov5环境，输入如下代码来激活我们刚刚创建好的环境，后面的操作都要在这个环境里操作
conda activate yolov5 后面的操作都需要保证前面的括号里显示的是我们创建的yolov5环境，不是就再输入一次上面的代码
接下来就要进行pytorch的安装了，这边推荐进行先下载离线包然后进行安装
进入这个网站：https://download.pytorch.org/whl/torch_stable.html
选择对应的pytorch版本
前面cu xxx是你的CUDA版本，像我是11.7的CUDA就选择cu117，前面没安装CUDA的选择cpu就好了，后面的cp则表示你的python版本，我们刚才创建yolov5的环境时使用的是python=3.9，这边我们就选择cp39的版本，然后选择后面是win的版本就好了，这边建议同时下载一下torchvision和torchaudio
下载完成后回到anaconda prompt输入：cd 你下载好的文件的地址 然后输入：pip install 下载的文件名（torchvision和torchaudio同理）
安装完成后在anaconda prompt输入python并回车激活python
输入如下代码
import torch import torchvision 没有报错即可
二.yolov5部署 1.yolo环境 进入如下网站：https://github.com/ultralytics/yolov5
下载yolo并解压，然后打开anaconda prompt" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/69eb01bcb4c82faf7fedfd5fe1d4448a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-01T14:54:02+08:00" />
<meta property="article:modified_time" content="2023-02-01T14:54:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows下YOLO V5环境（pytorch，cuda）配置及部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 最近在学习yolo v5 分享一下学习经验</p> 
<h2><strong>一.torch环境配置：</strong></h2> 
<h3>1.Anaconda安装 </h3> 
<p>首先需要下载一个Anaconda来方便我们配置pytorch的环境</p> 
<p>Anaconda直接百度就可以找到官网并且下载</p> 
<p> 可以进入Anaconda的官网查询你想下载的版本对应的是哪个安装包，主界面进入后直接点击下方的Get Additional Linstallers</p> 
<p><img alt="" height="598" src="https://images2.imgbox.com/84/1c/vFqszorT_o.png" width="1014"></p> 
<p> 点进来之后会进入如下界面</p> 
<p><img alt="" height="961" src="https://images2.imgbox.com/7b/92/eNFhebXR_o.png" width="1200"></p> 
<p>上面默认是最新版的Anaconda选择你对应的系统就能进行安装了 </p> 
<p>不过有的时候我们需要下载一些比较旧的版本的Anaconda， 在Anaconda的界面选择下面蓝框里的archive就会得到旧版本安装表的列表了</p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/00/50/zEpCjBnK_o.png" width="963"></p> 
<p> 如果没有科学上网的话国内在Anaconda官网下载速度可能会很慢也容易出现下载失败等问题，这时候可以访问下面的国内源进行下载，下载完成后一直点确定就行了。</p> 
<pre><code class="hljs">https://mirrors.bfsu.edu.cn/anaconda/archive/</code></pre> 
<h3> 2.CUDA安装（如果你的电脑没有NIVDIA显卡可以跳过这一步）</h3> 
<p>首先从开始菜单打开NIVDIA的控制面板，如果没有的话需要到官网下载显卡驱动 ，具体可以参考这位老哥的博客</p> 
<p><a class="link-info" href="https://blog.csdn.net/weixin_36040777/article/details/114875128?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167522802616782425111390%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=167522802616782425111390&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-7-114875128-null-null.142%5Ev72%5Econtrol,201%5Ev4%5Eadd_ask&amp;utm_term=%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD&amp;spm=1018.2226.3001.4187" title="https://blog.csdn.net/weixin_36040777/article/details/114875128?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167522802616782425111390%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=167522802616782425111390&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-7-114875128-null-null.142^v72^control,201^v4^add_ask&amp;utm_term=%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD&amp;spm=1018.2226.3001.4187">https://blog.csdn.net/weixin_36040777/article/details/114875128?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167522802616782425111390%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=167522802616782425111390&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-7-114875128-null-null.142^v72^control,201^v4^add_ask&amp;utm_term=%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%E4%B8%8B%E8%BD%BD&amp;spm=1018.2226.3001.4187</a></p> 
<p><img alt="" height="710" src="https://images2.imgbox.com/61/58/RDEsFRRc_o.png" width="748"></p> 
<p>打开NV的控制面板后点击左下角的系统信息，然后选择组件</p> 
<p><img alt="" height="718" src="https://images2.imgbox.com/6f/53/h0pNARKK_o.png" width="974"></p> 
<p> 这一行就是显示当前你显卡能支持的“<strong>最高</strong>”（划重点）CUDA版本，像我的就是12.0.139</p> 
<p><img alt="" height="26" src="https://images2.imgbox.com/dd/63/ddXNx0fe_o.png" width="507"></p> 
<p> 接下来就可以从NIVDIA的官网下载我们需要的CUDA（别无脑下载最新版本，有时候pytorch并没有支持到最新的CUDA）可以先访问Pytorch的官网看一眼</p> 
<p><img alt="" height="961" src="https://images2.imgbox.com/cd/d5/Vd5HY5Jb_o.png" width="1200"></p> 
<p>比如我现在其实已经能从官网上下载到12.0的CUDA了，但是Pytorch只有到11.7的版本所以请下载11.7版本的CUDA，官网如下：<a class="link-info" href="https://developer.nvidia.cn/cuda-toolkit-archive" rel="nofollow" title="https://developer.nvidia.cn/cuda-toolkit-archive">https://developer.nvidia.cn/cuda-toolkit-archive</a> </p> 
<p>如果安装CUDA报错了有可能是和visual studio冲突，CUDA安装选择自定义安装，关闭CUDA下的VSE（visual studio edition）选项</p> 
<p>按下Win+R键输入cmd进入命令窗口输入下面的代码</p> 
<pre><code class="hljs">nvcc -V</code></pre> 
<p>出现如下窗口则表示安装成功了</p> 
<p><img alt="" height="131" src="https://images2.imgbox.com/07/35/tnAUfTMp_o.png" width="510"></p> 
<h3>3.pytorch安装</h3> 
<p> 接下来从开始菜单打开anaconda prompt，输入(后面的python=3.9表示的是建立的python环境，可自行选择版本)</p> 
<pre><code class="hljs">conda create -n yolov5 python=3.9</code></pre> 
<p>执行后会出现问你是否确定安装，输入y再回车即可。然后来激活我们创建的yolov5环境，输入如下代码来激活我们刚刚创建好的环境，后面的操作都要在这个环境里操作</p> 
<pre><code class="hljs">conda activate yolov5</code></pre> 
<p> <img alt="" height="91" src="https://images2.imgbox.com/f4/05/fQoYJ34S_o.png" width="530"></p> 
<p> 后面的操作都需要保证前面的括号里显示的是我们创建的yolov5环境，不是就再输入一次上面的代码</p> 
<p>接下来就要进行pytorch的安装了，这边推荐进行先下载离线包然后进行安装</p> 
<p>进入这个网站：<a class="link-info" href="https://download.pytorch.org/whl/torch_stable.html" rel="nofollow" title="https://download.pytorch.org/whl/torch_stable.html">https://download.pytorch.org/whl/torch_stable.html</a></p> 
<p>选择对应的pytorch版本</p> 
<p><img alt="" height="289" src="https://images2.imgbox.com/a2/a2/Q4naejq3_o.png" width="514"></p> 
<p>前面cu xxx是你的CUDA版本，像我是11.7的CUDA就选择cu117，前面没安装CUDA的选择cpu就好了，后面的cp则表示你的python版本，我们刚才创建yolov5的环境时使用的是python=3.9，这边我们就选择cp39的版本，然后选择后面是win的版本就好了，这边建议同时下载一下torchvision和torchaudio</p> 
<p>下载完成后回到anaconda prompt输入：cd 你下载好的文件的地址 </p> 
<p>然后输入：pip install 下载的文件名（torchvision和torchaudio同理）</p> 
<p>安装完成后在anaconda prompt输入python并回车激活python</p> 
<p>输入如下代码</p> 
<pre><code class="hljs">import torch
import torchvision</code></pre> 
<p> 没有报错即可</p> 
<h2>二.yolov5部署</h2> 
<h3>1.yolo环境</h3> 
<p>进入如下网站：<a class="link-info" href="https://github.com/ultralytics/yolov5" title="https://github.com/ultralytics/yolov5">https://github.com/ultralytics/yolov5</a></p> 
<p>下载yolo并解压，然后打开anaconda prompt</p> 
<p>cd到你下载yolo的目录</p> 
<p>然后输入</p> 
<pre><code class="hljs">pip install -r requirements.txt
</code></pre> 
<p>对比较大的安装包可以自行百度离线安装包，参考pytorch进行离线安装即可</p> 
<h4>1.1python库的安装小技巧（建议先看完pycharm的安装再进行浏览）</h4> 
<p>python库也可以使用pycharm来进行安装，打开pychram选择左上角的File，然后选择setting</p> 
<p><img alt="" height="720" src="https://images2.imgbox.com/6a/44/WGbqlHJR_o.png" width="998"></p> 
<p> 确保上方的python解释器是我们创建的yolov5，然后点击解释器下方的加号</p> 
<p><img alt="" height="760" src="https://images2.imgbox.com/fe/9f/Pve9sT4v_o.png" width="940"></p> 
<p>输入需要安装的python库名字进行安装就好了 </p> 
<h3>2.安装pycharm</h3> 
<p>具体可以参考这位博主的博客：<a class="link-info" href="https://blog.csdn.net/qq_44809707/article/details/122501118" title="https://blog.csdn.net/qq_44809707/article/details/122501118">https://blog.csdn.net/qq_44809707/article/details/122501118</a></p> 
<p>安装完成后我们来新建一个基于我们刚才配置好的环境的项目</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/ca/54/reqdeph6_o.png" width="816"> </p> 
<p>这边我们选择添加解释器</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/2b/cd/K3TkwdQv_o.png" width="836"> </p> 
<p>左侧选择conda环境，然后python版本选择你创建环境的版本，解释器下拉选择我们创建好的环境就可以了</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/2b/8f/ImsBbvdz_o.png" width="816"></p> 
<p>注意创建的pycharm项目的位置需要在下载yolov5文件夹内 </p> 
<h2>三.运行测试yolov5</h2> 
<p>进入GitHub下载我们需要的权重文件</p> 
<p><a class="link-info" href="https://github.com/ultralytics/yolov5/releases" title="https://github.com/ultralytics/yolov5/releases">https://github.com/ultralytics/yolov5/releases</a></p> 
<p>滑倒最下方，这边我们选择的是yolov5s.py这个文件 </p> 
<p><img alt="" height="338" src="https://images2.imgbox.com/61/06/Al98Yj6O_o.png" width="798"></p> 
<p> 将下载好的文件放入yolov5的文件夹内，然后用刚刚创建好的pycharm项目打开yolo文件夹内的detect.py</p> 
<p>右键运行</p> 
<p><img alt="" height="1040" src="https://images2.imgbox.com/b2/d8/z7yXyKGJ_o.png" width="1200"></p> 
<p>可以看到程序已经成功运行了，运行结果保存在下方提示的文件夹内 </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a529344ab6c28bf566797ef104d55a6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hutool的httpUtil的使用（访问第三方接口）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10e558d02294e3e2ce7cc6978dc98805/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">超简单·Ubuntu系统Git安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>