<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mybatis模糊查询的四种方式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mybatis模糊查询的四种方式" />
<meta property="og:description" content="Mybatis模糊查询的四种方式 1、根据姓名模糊查询员工信息 1.1、方式一 步骤一：编写配置文件
步骤二：测试
步骤三：分析 此种方式需要在调用处手动的去添加“%”通配符。
1.2、方式二 说明： 使用方式一可以实现模糊查询，但是有一点不方便的地方就是：在测试类中，调用selectList()方法传参时需要调用者手动的添加%号通配符，显然是麻烦的，能否在映射配置文件中直接将%号写好呢？ 有的朋友可能会这么想，好办，直接在配置文件中这么写：形如1：
测试后发现，程序会报错，原因是：缺少单引号。
这个时候，有朋友可能会这样想了，那干脆加一个“单引号”不就得了，形如2：
测试后发现，程序依然会报错，原因是：如果加上单引号，那么就当成是一个字符串，而#{ }写在字符串中不能识别，要改写成${ }这种形式。
即：形如3
分析： 通过使用“ ” 也 可 以 实 现 。 但 是 通 过 ”也可以实现。但是通过 ”也可以实现。但是通过的方式拼接的sql语句，不再是以占位符的形式生成sql，而是以拼接字符串的方式生成sql，这样做带来的问题是：会引发sql注入的问题。
1.3、方式三（推荐） 说明：通过前两种写法，虽然可以解决模糊查询的问题，但是还是不好，因为通过%的方式会引发sql注入的问题，现在的期望是：既能够解决sql注入又能在配置文件中写%该如何实现呢，可以借助mysql的函数。
步骤一：编写映射文件
步骤二：测试 此步骤省略，比较简单。
1.4、方式四 说明： 当然对于方式三，也可以使用$，不过需要特别留意单引号的问题。步骤一：编写配置文件
步骤二：测试 该步骤省略。
2、总结 #{ }是预编译处理，MyBatis在处理#{ }时，它会将sql中的#{ }替换为？，然后调用PreparedStatement的set方法来赋值，传入字符串后，会在值两边加上单引号，使用占位符的方式提高效率，可以防止sql注入。 ${}:表示拼接sql串，将接收到参数的内容不加任何修饰拼接在sql中，可能引发sql注入。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f2b0d34f1e4a578e0d2c6d2c9f7670ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-07T16:04:30+08:00" />
<meta property="article:modified_time" content="2021-09-07T16:04:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mybatis模糊查询的四种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Mybatis_0"></a>Mybatis模糊查询的四种方式</h3> 
<h4><a id="1_2"></a>1、根据姓名模糊查询员工信息</h4> 
<h5><a id="11_4"></a>1.1、方式一</h5> 
<p>步骤一：编写配置文件</p> 
<p><img src="https://images2.imgbox.com/76/07/Qk25amaB_o.jpg" alt="在这里插入图片描述"></p> 
<p>步骤二：测试</p> 
<p><img src="https://images2.imgbox.com/8c/b5/fCnkgZv4_o.jpg" alt="在这里插入图片描述"></p> 
<p>步骤三：分析 此种方式需要在调用处手动的去添加“%”通配符。</p> 
<h5><a id="12_19"></a>1.2、方式二</h5> 
<p>说明： 使用方式一可以实现模糊查询，但是有一点不方便的地方就是：在测试类中，调用selectList()方法传参时需要调用者手动的添加%号通配符，显然是麻烦的，能否在映射配置文件中直接将%号写好呢？ 有的朋友可能会这么想，好办，直接在配置文件中这么写：形如1：<br> <img src="https://images2.imgbox.com/c3/0e/qlRivice_o.jpg" alt="在这里插入图片描述"></p> 
<p>测试后发现，程序会报错，原因是：<strong>缺少单引号</strong>。</p> 
<p>这个时候，有朋友可能会这样想了，那干脆加一个“单引号”不就得了，形如2：<br> <img src="https://images2.imgbox.com/58/85/FCgETRCZ_o.jpg" alt="在这里插入图片描述"></p> 
<p>测试后发现，程序依然会报错，原因是：如果加上单引号，那么就当成是一个字符串，而#{ }写在字符串中不能识别，要改写成${ }这种形式。</p> 
<p>即：形如3<br> <img src="https://images2.imgbox.com/d9/a3/JfovDnMr_o.jpg" alt="在这里插入图片描述"></p> 
<p>分析： 通过使用“<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ” 
        
       
         也 
        
       
         可 
        
       
         以 
        
       
         实 
        
       
         现 
        
       
         。 
        
       
         但 
        
       
         是 
        
       
         通 
        
       
         过 
        
       
      
        ”也可以实现。但是通过 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord">”</span><span class="mord cjk_fallback">也</span><span class="mord cjk_fallback">可</span><span class="mord cjk_fallback">以</span><span class="mord cjk_fallback">实</span><span class="mord cjk_fallback">现</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">但</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span></span></span></span></span>的方式拼接的sql语句，不再是以占位符的形式生成sql，而是以拼接字符串的方式生成sql，这样做带来的问题是：会引发sql注入的问题。</p> 
<h5><a id="13_38"></a>1.3、方式三（推荐）</h5> 
<p>说明：通过前两种写法，虽然可以解决模糊查询的问题，但是还是不好，因为通过%的方式会引发sql注入的问题，现在的期望是：既能够解决sql注入又能在配置文件中写%该如何实现呢，可以借助mysql的函数。</p> 
<p>步骤一：编写映射文件</p> 
<p><img src="https://images2.imgbox.com/10/05/GMZ1DNoV_o.jpg" alt="在这里插入图片描述"></p> 
<p>步骤二：测试 此步骤省略，比较简单。</p> 
<h5><a id="14_49"></a>1.4、方式四</h5> 
<p>说明： 当然对于方式三，也可以使用$，不过需要特别留意单引号的问题。步骤一：编写配置文件</p> 
<p><img src="https://images2.imgbox.com/30/75/S5CzPEaP_o.jpg" alt="在这里插入图片描述"></p> 
<p>步骤二：测试 该步骤省略。</p> 
<h4><a id="2_58"></a>2、总结</h4> 
<p>#{ }是预编译处理，MyBatis在处理#{ }时，它会将sql中的#{ }替换为？，然后调用PreparedStatement的set方法来赋值，传入字符串后，会在值两边加上单引号，使用占位符的方式提高效率，可以防止sql注入。 ${}:表示拼接sql串，将接收到参数的内容不加任何修饰拼接在sql中，可能引发sql注入。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0005d9a778cb7fc8a52621b550a591e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">死锁详解和解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b7eea36a073a829fae57647c33196869/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2021上半年软考证书开始发放</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>