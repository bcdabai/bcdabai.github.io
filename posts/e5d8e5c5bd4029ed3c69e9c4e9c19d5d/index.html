<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32F103中断 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32F103中断" />
<meta property="og:description" content="EXTI (Extern Interrupt) 外部中断
EXTI可以监测指定GPIO口的电平信号，当其指定的GPIO口产生电平变化时，EXTI将立即向NVIC发出中断申请，经过NVIC裁决后即可中断CPU主程序，使CPU执行EXTI对应的中断程序
支持的触发方式:上升沿/下降沿/双边沿/软件触发
支持的GPIO口:所有GPIO口，但相同的Pin不能同时触发中断
(1) 不同端口、同一pin口，共用一个中断线：如PA1、PB1、PC1共用外部中断线1——EXTI_Line1；
(2) 同一pin口共用一个中断线，但16个中断线却只共用7个中断服务函数：其中中断线EXTI_Line0-4独立拥有一个中断服务，中断线5-9共用一个中断服务函数，中断线10-15共用一个中断服务函数。
GPIO_PIN不能相同：PA1和PB1不行，PA6和PA7可以，PA9和PB15可以，PB0和PB1可以
（图来源于江协科技）
（图源于《STM32F10XXX参考手册》）
如上图，GPIO_PIN相同的gpio共用了一个中断线。
中断线和中断服务之间的关系
DCD EXTI0_IRQHandler ; EXTI Line 0 DCD EXTI1_IRQHandler ; EXTI Line 1 DCD EXTI2_IRQHandler ; EXTI Line 2 DCD EXTI3_IRQHandler ; EXTI Line 3 DCD EXTI4_IRQHandler ; EXTI Line 4 DCD EXTI9_5_IRQHandler ; EXTI Line 9..5 DCD EXTI15_10_IRQHandler ; EXTI Line 15..10 注意：不可以同时配置PA6和PA8触发外部中断
因为EXTI_Line6和EXTI_Line8是共用一个中断服务函数的，那触发EXTI_Line6和触发EXTI_Line8就进同一个中断服务函数了
解决方案：
进服务函数之后，判断是哪根中断线触发的就行：
if（ITStatus EXTI_GetITStatus(EXTI_Line6)）｛ 中断线6程序&#43;清标志位6 ｝ if（ITStatus EXTI_GetITStatus(EXTI_Line8)）｛ 中断线8程序&#43;清标志位8 ｝ 通道数:16个GPIO Pin，外加PVD输出、RTC闹钟、USB唤醒、以太网唤醒" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e5d8e5c5bd4029ed3c69e9c4e9c19d5d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-05T10:34:11+08:00" />
<meta property="article:modified_time" content="2023-08-05T10:34:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32F103中断</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>EXTI (Extern Interrupt) 外部中断</strong></p> 
<p>EXTI可以监测指定GPIO口的电平信号，当其指定的GPIO口产生电平变化时，EXTI将立即向NVIC发出中断申请，经过NVIC裁决后即可中断CPU主程序，使CPU执行EXTI对应的中断程序</p> 
<p>支持的触发方式:上升沿/下降沿/双边沿/软件触发</p> 
<p>支持的GPIO口:所有GPIO口，但相同的Pin不能同时触发中断</p> 
<p><strong>(1) 不同端口、同一pin口，共用一个中断线：如PA1、PB1、PC1共用外部中断线1——EXTI_Line1；</strong></p> 
<p><strong>(2) 同一pin口共用一个中断线，但16个中断线却只共用7个中断服务函数：其中中断线EXTI_Line0-4独立拥有一个中断服务，中断线5-9共用一个中断服务函数，中断线10-15共用一个中断服务函数。</strong></p> 
<p><span style="background-color:#ffd900;">GPIO_PIN不能相同：PA1和PB1不行，PA6和PA7可以，PA9和PB15可以，PB0和PB1可以</span></p> 
<p><img alt="" height="790" src="https://images2.imgbox.com/20/82/uBokTgqD_o.png" width="1200"></p> 
<p> （图来源于江协科技）</p> 
<p><img alt="" height="703" src="https://images2.imgbox.com/7f/c6/2PAHHNW0_o.png" width="463"></p> 
<p> （图源于《STM32F10XXX参考手册》）</p> 
<p>如上图，GPIO_PIN相同的gpio共用了一个中断线。</p> 
<p><span style="background-color:#ffd900;">中断线和中断服务之间的关系</span></p> 
<pre><code class="language-bash">  DCD     EXTI0_IRQHandler           ; EXTI Line 0
  DCD     EXTI1_IRQHandler           ; EXTI Line 1             
  DCD     EXTI2_IRQHandler           ; EXTI Line 2
  DCD     EXTI3_IRQHandler           ; EXTI Line 3
  DCD     EXTI4_IRQHandler           ; EXTI Line 4
  DCD     EXTI9_5_IRQHandler         ; EXTI Line 9..5
  DCD     EXTI15_10_IRQHandler       ; EXTI Line 15..10</code></pre> 
<p><span style="color:#fe2c24;"><strong>注意：不可以同时配置PA6和PA8触发外部中断</strong></span></p> 
<p>因为<span style="color:#0d0016;"><span style="background-color:#ffd900;">EXTI_Line6和EXTI_Line8是共用一个中断服务函数的，那触发EXTI_Line6和触发EXTI_Line8就进同一个中断服务函数了</span></span></p> 
<p><span style="color:#0d0016;">解决方案：</span></p> 
<p>进服务函数之后，判断是哪根中断线触发的就行：</p> 
<pre><code class="language-bash">if（ITStatus EXTI_GetITStatus(EXTI_Line6)）｛

中断线6程序+清标志位6

｝

if（ITStatus EXTI_GetITStatus(EXTI_Line8)）｛

中断线8程序+清标志位8

｝</code></pre> 
<p>通道数:16个GPIO Pin，外加PVD输出、RTC闹钟、USB唤醒、以太网唤醒<br> 触发响应方式:中断响应/事件响应（不会触发中断，而是触发别的外设操作，属于外设之间的联合工作）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6ac21c462ce3bac9bc1011dcaae9fcfb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac安装npm全面指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47c337f644433d946f2053078c5fcb46/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">QT 使用单例模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>