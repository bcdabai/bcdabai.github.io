<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>二.用户与权限管理(二) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="二.用户与权限管理(二)" />
<meta property="og:description" content="用户与权限管理 5.角色管理5.1角色的理解5.2创建角色5.3给角色赋予权限5.4查看角色的权限5.5回收角色的权限5.6删除角色5.7给用户赋予角色5.8激活角色5.9撤销用户角色5.10设置强制角色(mandatory role) 6.配置文件的使用6.1配置文件格式6.2 启动命令与选项组6.3 特定MySQL版本的专用选项组6.4 同一个配置文件中多个组的优先级6.5 命令行和配置文件中启动选项的区别 7.系统变量7.1系统变量简介7.2查看系统变量7.3 设置系统变量7.3.1 通过启动选项设置7.3.2 服务器程序运行过程中设置 5.角色管理 5.1角色的理解 角色是在MySQL8.0中引入的新功能。在MySQL中，角色是权限的集合，可以为角色添加或移除权限。用户可以被赋予角色，同时也被授予角色包含的权限。对角色进行操作需要较高的权限。并且像用户账户一样，角色可以拥有授予和撤消的权限。
引入角色的目的是 方便管理拥有相同权限的用户 。恰当的权限设定，可以确保数据的安全性，这是至关重要的
5.2创建角色 在实际应用中，为了安全性，需要给用户授予权限。当用户数量较多时，为了避免单独给每一个用户授予多个权限，可以先将权限集合放入角色中，再赋予用户相应的角色。
创建角色使用 CREATE ROLE 语句，语法如下：
CREATE ROLE &#39;role_name&#39;[@&#39;host_name&#39;] [,&#39;role_name&#39;[@&#39;host_name&#39;]]... 角色名称的命名规则和用户名类似。如果 host_name省略，默认为% ， role_name不可省略 ，不可为空。
练习：我们现在需要创建一个经理的角色，就可以用下面的代码：
CREATE ROLE &#39;manager&#39;@&#39;localhost&#39;; 这里创建了一个角色，角色名称是“manager”，角色可以登录的主机是“localhost”，意思是只能从数据库服务器运行的这台计算机登录这个账号。你也可以不写主机名，直接创建角色&#34;manager&#34;:
CREATE ROLE &#39;manager&#39;; 如果不写主机名，MySQL默认是通配符“%”，意思是这个账号可以从任何一台主机上登录数据库。
同样道理，如果我们要创建库管的角色，就可以用下面的代码：
CREATE ROLE &#39;stocker&#39;; 5.3给角色赋予权限 创建角色之后，默认这个角色是没有任何权限的，我们需要给角色授权。给角色授权的语法结构是
GRANT [privileges] ON table_name TO &#39;role_name&#39;[@&#39;host_name&#39;]; 上述语句中privileges代表权限的名称，多个权限以逗号隔开。可使用SHOW语句查询权限名称，下图列出了部分权限列表。
SHOW PRIVILEGES\G; 练习1：我们现在想给经理角色授予商品信息表、盘点表和应付账款表的只读权限，就可以用下面的代码来实现
GRANT SELECT ON demo.settlement TO &#39;manager&#39;; GRANT SELECT ON demo.goodsmaster TO &#39;manager&#39;; GRANT SELECT ON demo." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f8b67d3efc4abd9edc8911d40129eb48/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-22T19:12:54+08:00" />
<meta property="article:modified_time" content="2024-01-22T19:12:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">二.用户与权限管理(二)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>用户与权限管理</h4> 
 <ul><li><a href="#5_1" rel="nofollow">5.角色管理</a></li><li><ul><li><a href="#51_2" rel="nofollow">5.1角色的理解</a></li><li><a href="#52_7" rel="nofollow">5.2创建角色</a></li><li><a href="#53_29" rel="nofollow">5.3给角色赋予权限</a></li><li><a href="#54_67" rel="nofollow">5.4查看角色的权限</a></li><li><a href="#55_93" rel="nofollow">5.5回收角色的权限</a></li><li><a href="#56_110" rel="nofollow">5.6删除角色</a></li><li><a href="#57_120" rel="nofollow">5.7给用户赋予角色</a></li><li><a href="#58_145" rel="nofollow">5.8激活角色</a></li><li><a href="#59_181" rel="nofollow">5.9撤销用户角色</a></li><li><a href="#510mandatory_role_196" rel="nofollow">5.10设置强制角色(mandatory role)</a></li></ul> 
  </li><li><a href="#6_209" rel="nofollow">6.配置文件的使用</a></li><li><ul><li><a href="#61_210" rel="nofollow">6.1配置文件格式</a></li><li><a href="#62__238" rel="nofollow">6.2 启动命令与选项组</a></li><li><a href="#63_MySQL_266" rel="nofollow">6.3 特定MySQL版本的专用选项组</a></li><li><a href="#64__269" rel="nofollow">6.4 同一个配置文件中多个组的优先级</a></li><li><a href="#65__279" rel="nofollow">6.5 命令行和配置文件中启动选项的区别</a></li></ul> 
  </li><li><a href="#7_292" rel="nofollow">7.系统变量</a></li><li><ul><li><a href="#71_293" rel="nofollow">7.1系统变量简介</a></li><li><a href="#72_301" rel="nofollow">7.2查看系统变量</a></li><li><a href="#73__313" rel="nofollow">7.3 设置系统变量</a></li><li><ul><li><a href="#731__314" rel="nofollow">7.3.1 通过启动选项设置</a></li><li><a href="#732__348" rel="nofollow">7.3.2 服务器程序运行过程中设置</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="5_1"></a>5.角色管理</h2> 
<h3><a id="51_2"></a>5.1角色的理解</h3> 
<p>角色是在MySQL8.0中引入的新功能。在MySQL中，<code>角色是权限的集合</code>，可以为角色添加或移除权限。用户可以被赋予角色，同时也被授予角色包含的权限。对角色进行操作需要较高的权限。并且像用户账户一样，角色可以拥有授予和撤消的权限。</p> 
<p>引入角色的目的是 <code>方便管理拥有相同权限的用户</code> 。<strong>恰当的权限设定，可以确保数据的安全性，这是至关重要的</strong><br> <img src="https://images2.imgbox.com/d4/a3/0C476Mqu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="52_7"></a>5.2创建角色</h3> 
<p>在实际应用中，为了安全性，需要给用户授予权限。当用户数量较多时，为了避免单独给每一个用户授予多个权限，可以先将权限集合放入角色中，再赋予用户相应的角色。<br> 创建角色使用 <code>CREATE ROLE</code> 语句，语法如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE <span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>角色名称的命名规则和用户名类似。如果 <code>host_name省略，默认为%</code> ， <code>role_name不可省略</code> ，不可为空。</p> 
<p>练习：我们现在需要创建一个经理的角色，就可以用下面的代码：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE <span class="token string">'manager'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里创建了一个角色，角色名称是“manager”，角色可以登录的主机是“localhost”，意思是只能从数据库服务器运行的这台计算机登录这个账号。你也可以不写主机名，直接创建角色"manager":</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE <span class="token string">'manager'</span><span class="token punctuation">;</span>
</code></pre> 
<p>如果不写主机名，MySQL默认是通配符“%”，意思是这个账号可以从任何一台主机上登录数据库。</p> 
<p>同样道理，如果我们要创建库管的角色，就可以用下面的代码：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE <span class="token string">'stocker'</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="53_29"></a>5.3给角色赋予权限</h3> 
<p>创建角色之后，默认这个角色是没有任何权限的，我们需要给角色授权。给角色授权的语法结构是</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token punctuation">[</span><span class="token keyword">privileges</span><span class="token punctuation">]</span> <span class="token keyword">ON</span> table_name <span class="token keyword">TO</span> <span class="token string">'role_name'</span><span class="token punctuation">[</span><span class="token variable">@'host_name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述语句中privileges代表权限的名称，多个权限以逗号隔开。可使用SHOW语句查询权限名称，下图列出了部分权限列表。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">PRIVILEGES</span>\G<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/7a/Wey0EebY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1b/68/AHJ49Tf2_o.png" alt="在这里插入图片描述"><br> 练习1：我们现在想给经理角色授予商品信息表、盘点表和应付账款表的只读权限，就可以用下面的代码来实现</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> demo<span class="token punctuation">.</span>settlement <span class="token keyword">TO</span> <span class="token string">'manager'</span><span class="token punctuation">;</span> 

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> demo<span class="token punctuation">.</span>goodsmaster <span class="token keyword">TO</span> <span class="token string">'manager'</span><span class="token punctuation">;</span> 

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> demo<span class="token punctuation">.</span>invcount <span class="token keyword">TO</span> <span class="token string">'manager'</span><span class="token punctuation">;</span>
</code></pre> 
<p>练习2:</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> app_db<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'app_developer'</span><span class="token punctuation">;</span> <span class="token comment">-- 给app_db数据库中所有表的所有权限</span>

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> app_db<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'app_read'</span><span class="token punctuation">;</span> <span class="token comment">-- app_db数据库中所有表的查询权限</span>

<span class="token keyword">GRANT</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span> <span class="token keyword">ON</span> app_db<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'app_write'</span><span class="token punctuation">;</span> <span class="token comment">-- app_db数据库中所有表的修改权限</span>
</code></pre> 
<p>练习3:创建三个角色，分别拥有全部权限、查询权限和读写权限，步骤如下所示<br> (1) 使用如下SQL语句创建三个角色，角色名为school_admin、school_read、school_write。</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE <span class="token string">'school_admin'</span><span class="token punctuation">,</span><span class="token string">'school_read'</span><span class="token punctuation">,</span><span class="token string">'school_write'</span><span class="token punctuation">;</span>
</code></pre> 
<p>(2)给每个角色授予对应的权限，school_admin可以对数据库school中的所有表进行任何操作，school_read只能对数据库school中的表进行查询，school_write可以对数据库school中的表进行读写操作，SQL语句如下。</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span>  <span class="token keyword">ON</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'school_admin'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'school_read'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span> <span class="token keyword">ON</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'school_write'</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="54_67"></a>5.4查看角色的权限</h3> 
<p>赋予角色权限之后，我们可以通过 SHOW GRANTS 语句，来查看权限是否创建成功了：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'manager'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>
<span class="token operator">|</span> Grants <span class="token keyword">for</span> manager@<span class="token operator">%</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">USAGE</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token identifier"><span class="token punctuation">`</span>manager<span class="token punctuation">`</span></span><span class="token variable">@`%`</span>                   <span class="token operator">|</span> 
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>demo<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>goodsmaster<span class="token punctuation">`</span></span> <span class="token keyword">TO</span> <span class="token identifier"><span class="token punctuation">`</span>manager<span class="token punctuation">`</span></span><span class="token variable">@`%`</span> <span class="token operator">|</span> 
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>demo<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>invcount<span class="token punctuation">`</span></span> <span class="token keyword">TO</span> <span class="token identifier"><span class="token punctuation">`</span>manager<span class="token punctuation">`</span></span><span class="token variable">@`%`</span>    <span class="token operator">|</span> 
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>demo<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>settlement<span class="token punctuation">`</span></span> <span class="token keyword">TO</span> <span class="token identifier"><span class="token punctuation">`</span>manager<span class="token punctuation">`</span></span><span class="token variable">@`%`</span>  <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>
</code></pre> 
<p>只要你创建了一个角色，系统就会自动给你一个<code>“ USAGE ”</code>权限，意思是 <code>连接登录数据库的权限</code> 。代码的最后三行代表了我们给角色“manager”赋予的权限，也就是对商品信息表、盘点表和应付账款表的只读权限。<br> 再举例：来看看库管角色的权限：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'stocker'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------+</span>
<span class="token operator">|</span> Grants <span class="token keyword">for</span> <span class="token string">'stocker'</span><span class="token variable">@'%'</span>                                               <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">USAGE</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'stocker'</span><span class="token variable">@'%'</span>                                    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token string">'demo'</span><span class="token punctuation">.</span><span class="token string">'goodsmaster'</span> <span class="token keyword">To</span> <span class="token string">'stocker'</span><span class="token variable">@'%'</span>                  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span> <span class="token keyword">ON</span> <span class="token string">'demo'</span><span class="token punctuation">.</span><span class="token string">'invcount'</span> <span class="token keyword">To</span> <span class="token string">'stocker'</span><span class="token variable">@'%'</span><span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------</span>
<span class="token comment">-----------------------------------------------+</span>
</code></pre> 
<p>结果显示，库管角色拥有商品信息表的只读权限和盘点表的增删改查权限。</p> 
<h3><a id="55_93"></a>5.5回收角色的权限</h3> 
<p>角色授权后，可以对角色的权限进行维护，对权限进行添加或撤销。添加权限使用GRANT语句，与角色授权相同。撤销角色或角色权限使用REVOKE语句。</p> 
<p>修改了角色的权限，会影响拥有该角色的账户的权限。</p> 
<p>撤销角色权限的SQL语法如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token punctuation">[</span><span class="token keyword">privileges</span><span class="token punctuation">]</span> <span class="token keyword">ON</span> tablename <span class="token keyword">FROM</span> <span class="token string">'rolename'</span><span class="token punctuation">;</span>
</code></pre> 
<p>练习1：撤销school_write角色的权限。</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">DELETE</span> <span class="token keyword">ON</span> school<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">'school_write'</span><span class="token punctuation">;</span>
</code></pre> 
<p>（2）撤销后使用SHOW语句查看school_write对应的权限，语句如下。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'school_write'</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="56_110"></a>5.6删除角色</h3> 
<p>当我们需要对业务重新整合的时候，可能就需要对之前创建的角色进行清理，删除一些不会再使用的角色。删除角色的操作很简单，你只要掌握语法结构就行了。</p> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> ROLE role <span class="token punctuation">[</span><span class="token punctuation">,</span>role2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p><code>注意， 如果你删除了角色，那么用户也就失去了通过这个角色所获得的所有权限 </code><br> 练习：执行如下SQL删除角色school_read。</p> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> ROLE <span class="token string">'school_read'</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="57_120"></a>5.7给用户赋予角色</h3> 
<p><code>角色创建并授权后，要付给用户并处于激活状态才能发挥作用</code>，给用户添加角色可以使用GRANT语句，语法形式如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> role <span class="token punctuation">[</span><span class="token punctuation">,</span>role2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">TO</span> <span class="token keyword">user</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>user2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上述语句中，role代表角色，user代表用户。可将多个角色同时赋予多个用户，用逗号隔开即可。</p> 
<p>练习：给wang5用户添加角色school_read权限。<br> （1）使用GRANT语句给kangshifu添加school_read权限，SQL语句如下。</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'wang5'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123123'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token string">'school_read'</span> <span class="token keyword">TO</span> <span class="token string">'wang5'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>（2）添加完成后使用SHOW语句查看是否添加成功，SQL语句如下。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'wang5'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>（3）使用wnag5用户登录，然后查询当前角色，如果角色未激活，结果将显示NONE。SQL语句如下。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> CURRENT_ROLE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/9f/WCx2VAsn_o.png" alt="在这里插入图片描述"><br> 上面结果是NONE,说明用户未具备相应的角色。</p> 
<p>或者你用赋予了角色的用户去登录、操作，你会发现，这个账号没有任何权限。这是因为，MySQL中创建了角色之后，默认都是没有被激活，也就是不能用，<code>必须要手动激活</code>，激活以后用户才能拥有角色对应的权限。</p> 
<h3><a id="58_145"></a>5.8激活角色</h3> 
<p><strong>方式1：使用set default role命令激活角色</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE 角色名 <span class="token keyword">TO</span> <span class="token string">'用户'</span><span class="token variable">@'地址'</span><span class="token punctuation">;</span>
</code></pre> 
<p>举例：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- SET DEFAULT ROLE 'manager'@'%' TO 'wang5'@'%';   -- 单个角色</span>
<span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE <span class="token keyword">ALL</span> <span class="token keyword">TO</span> <span class="token string">'wang5'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>   <span class="token comment">-- 所有权限</span>
</code></pre> 
<p>举例：使用 SET DEFAULT ROLE 为下面4个用户默认激活所有已拥有的角色如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> ROLE <span class="token keyword">ALL</span> <span class="token keyword">TO</span> 
	<span class="token string">'dev1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">,</span> 
	<span class="token string">'read_user1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">,</span> 
	<span class="token string">'read_user2'</span><span class="token variable">@'localhost'</span><span class="token punctuation">,</span> 
	<span class="token string">'rw_user1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>注意：用户需要退出重新登录，才能看到赋予的角色。</code></p> 
<p>方式二：将activate_all_roles_on_login设置为ON</p> 
<ul><li>默认情况</li></ul> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'activate_all_roles_on_login'</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">-----------------------------+-------+</span>
<span class="token operator">|</span> Variable_name               <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-----------------------------+-------+</span>
<span class="token operator">|</span> activate_all_roles_on_login <span class="token operator">|</span> <span class="token keyword">OFF</span>   <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-----------------------------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> 
<ul><li>设置</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> activate_all_roles_on_login<span class="token operator">=</span><span class="token keyword">ON</span><span class="token punctuation">;</span>
</code></pre> 
<p>这条 SQL 语句的意思是，对 <code>所有角色永久激活</code> 。运行这条语句之后，用户才真正拥有了赋予角色的所有权限。</p> 
<h3><a id="59_181"></a>5.9撤销用户角色</h3> 
<p>撤销用户角色的SQL语法如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> role <span class="token keyword">FROM</span> username<span class="token punctuation">;</span>
</code></pre> 
<p>练习：撤销wang5用户的school_read角色。<br> （1）撤销的SQL语句如下</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token string">'school_read'</span> <span class="token keyword">FROM</span> <span class="token string">'wang5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p>（2）撤销后，执行如下查询语句，查看wang5用户的角色信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'wang5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p>执行发现，用户wang5之前的school_read角色已被撤销。</p> 
<h3><a id="510mandatory_role_196"></a>5.10设置强制角色(mandatory role)</h3> 
<p>强制角色是给每个创建账户的默认角色，不需要手动设置。强制角色无法被<code>REVOKE</code>或者<code>DROP</code><br> 方式1：服务启动前设置</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span> 
mandatory_roles<span class="token operator">=</span><span class="token string">'role1,role2@localhost,r3@%.atguigu.com'</span>
</code></pre> 
<p>方式2：运行时设置</p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> PERSIST mandatory_roles <span class="token operator">=</span> <span class="token string">'role1,role2@localhost,r3@%.example.com'</span><span class="token punctuation">;</span> <span class="token comment">#系统重启后仍然有效</span>

<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> mandatory_roles <span class="token operator">=</span> <span class="token string">'role1,role2@localhost,r3@%.example.com'</span><span class="token punctuation">;</span> <span class="token comment">#系统重启后失效</span>
</code></pre> 
<h2><a id="6_209"></a>6.配置文件的使用</h2> 
<h3><a id="61_210"></a>6.1配置文件格式</h3> 
<p>与在命令行中指定启动选项不同的是，配置文件中的启动选项被划分为若干个组，每个组有一个组名，用中括号[]扩起来，像这样：</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>mysqld_safe<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>mysqladmin<span class="token punctuation">]</span>
<span class="token punctuation">(</span>具体的启动选项<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> 
<p>像这个配置文件里就定义了许多个组，组名分别是<code>server、mysqld、mysqld_safe、client、mysql、mysqladmin</code>。每个组下边可以定义若干个启动选项，我们以[server]组为例来看一下填写启动选项的形式(其他组中启动选项的形式是一样的）:</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
option1          <span class="token comment">#这是option1.该选项不需要选项值</span>
option2<span class="token operator">-</span>value2   <span class="token comment">#这是option2.该选项需要选项值</span>
</code></pre> 
<p>在配置文件中指定启动选项的语法类似于命令行语法，但是配置文件中指定的启动选项不允以加 - -前缀。并且每行只指定一个选项，而且<code>=</code>周围可以有空白字符（命令行中选项名、=、选项值之间不允许有空白字符）。另外，在配置文件中，我们可以使用<code>#</code>来添加注释，从#出现直到行尾的内容都属于注释内容，读取配置文件时会忽略这些注释内容。</p> 
<h3><a id="62__238"></a>6.2 启动命令与选项组</h3> 
<p>配置文件中不同的选项组是给不同的启动命令使用的。不过有两个选项组比较特别：</p> 
<ul><li><code>[server]</code>组下边的启动选项将作用于<code>所有的服务器</code>程序。</li><li><code>[client]</code>组下边的启动选项将作用于<code>所有的客户端</code>程序。</li></ul> 
<p>下面是启动命令能读取的选项组都有哪些：</p> 
<table><thead><tr><th>启动命令</th><th>类别</th><th>能读取的组</th></tr></thead><tbody><tr><td>mysqld</td><td>启动服务器</td><td>[mysqld]、[server]</td></tr><tr><td>mysqld_safe</td><td>启动服务器</td><td>[mysqld]、[server]、[mysqld_safe]</td></tr><tr><td>mysql.server</td><td>启动服务器</td><td>[mysqld]、[server]、[mysql.server]</td></tr><tr><td>mysql</td><td>启动客户端</td><td>[mysql]、[clinet]</td></tr><tr><td>mysqladmin</td><td>启动客户端</td><td>[mysqladmin] 、[clinet]</td></tr><tr><td>mysqldump</td><td>启动客户端</td><td>[mysqldump]、[clinet]</td></tr></tbody></table> 
<p>比如,在<code>/etc/mysql/my.cnf</code>这个配置文件中添加一些内容：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
skip-networking
default-storage-engine<span class="token operator">=</span>MyISAM
</code></pre> 
<p>然后直接用<code>mysqld</code>启动服务器程序：</p> 
<pre><code class="prism language-shell">mysqld
</code></pre> 
<p>虽然在命令行没有添加启动选项，但是在程序启动的时候，就会默认的到我们上边提到的配置文件路径下查找配置文件，其中就包括<code>/etc/my.cnf</code>。又由于<code>mysqld</code>命令可以读取<code>[server]</code>选项组的内容，所以<code>skip-networking</code>和<code>default-storage-engine=MyISAM</code>这两个选项是生效的。你可以把这些启动选项放在[client]组里再试试用<code>mysqld</code>启动服务器程序，就不生效。</p> 
<h3><a id="63_MySQL_266"></a>6.3 特定MySQL版本的专用选项组</h3> 
<p>我们可以在选项组的名称后加上特定的<code>MySQL</code>版本号，比如对于<code>[mysqld]</code>选项组来说，我们可以定义一个<code>[mysqld-5.7]</code>的选项组，它的含义和<code>[mysqld]</code>一样，只不过只有版本号为<code>5.7的mysqld</code>程序才能使用这个选项组中的选项。</p> 
<h3><a id="64__269"></a>6.4 同一个配置文件中多个组的优先级</h3> 
<p>我们说同一个命令可以访问配置文件中的多个组，比如<code>mysqld</code>可以访问<code>[mysqld]、[server]</code>组，如果在同一个配置文件中，比如<code>~/.my.cnf</code>,在这些组里出现了同样的配置项，比如这样：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
default-storage-engine<span class="token operator">=</span>InnoDB

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
default-storage-engine<span class="token operator">=</span>MyISAM
</code></pre> 
<p>那么，将以最后一个出现的组中的启动选项为准，比方说例子中<code>default-storage-engine</code>既出现在<code>[mysqld]</code>组也出现在<code>[server]组</code>，因为<code>[mysqld]</code>组在<code>[server]</code>组后边，就以<code>[mysqld]</code>组中的配置项为准。</p> 
<h3><a id="65__279"></a>6.5 命令行和配置文件中启动选项的区别</h3> 
<p>在命令行上指定的绝大部分启动选项都可以放到配置文件中，但是有一些选项是专门为命令行设计的，比方说<code>defaults-extra-file</code>、<code>defaults-file</code>这样的选项本身就是为归指定配置文件路径的，再放在配置文件中使用就没啥意义了。</p> 
<p>如果同一个启动选项既出现在命令行中，又出现在配置文件中，那么以<code>命令行中的启动选项为准</code>！比如我们在配置文件中写了：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
default-storage-engine<span class="token operator">=</span>InnoDB
</code></pre> 
<p>而我们的启动命令是：</p> 
<pre><code class="prism language-shell">mysq1.server start --default-storage-engine<span class="token operator">=</span>MyISAM
</code></pre> 
<p>那最后<code>default-storage-engine</code>的值就是<code>MyISAM</code></p> 
<h2><a id="7_292"></a>7.系统变量</h2> 
<h3><a id="71_293"></a>7.1系统变量简介</h3> 
<p>MySQL服务器程序运行过程中会用到许多影响程序行为的变量，它们被称为MySQL系统变量。比如：</p> 
<p><code>max_connections</code>:允许同时连入的客户端数量<br> <code>fault_storage_engine</code>:表的默认存储引擎用系统变量<br> <code>query_cache_size</code>:查询缓存的大小<br> MySQL服务器程序的系统变量有好几百条，就不一 一列举了。</p> 
<h3><a id="72_301"></a>7.2查看系统变量</h3> 
<p>查看MySQL服务器程序支持的系统变量以及它们的当前值：</p> 
<pre><code class="prism language-sql"><span class="token comment">#查看所有全局变量</span>
<span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> VARIABLES<span class="token punctuation">;</span>

<span class="token comment">#查看所有会话变量</span>
<span class="token keyword">SHOW</span> <span class="token keyword">SESSION</span> VARIABLES <span class="token punctuation">;</span>
<span class="token comment">#或</span>
<span class="token keyword">SHOW</span> VARIABLES<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="73__313"></a>7.3 设置系统变量</h3> 
<h4><a id="731__314"></a>7.3.1 通过启动选项设置</h4> 
<p>大部分的系统变量都可以通过启动服务器时传送启动选项的方式来进行设置。如何填写启动选项我们总结一下<br> 主要是两种方式：</p> 
<ul><li>通过命令行添加启动选项<br> 比方说我们在启动服务器程序时用这个命令：</li></ul> 
<pre><code class="prism language-sql">mysqld <span class="token comment">--default-storage-engine=MyISAM --max-connections=10</span>
</code></pre> 
<ul><li>通过配置文件添加启动选<br> 我们可以这样填写配置文件：</li></ul> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>server<span class="token punctuation">]</span>
default-storage-engine<span class="token operator">=</span>MyISAM
max-connections<span class="token operator">=</span><span class="token number">10</span>
</code></pre> 
<p>当使用上边两种方式中的任意一种启动服务器程序后，我们再来查看一下系统变量的值：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'default_storge_engine'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
<span class="token operator">|</span> Variable_name         <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
<span class="token operator">|</span> default_storge_engine <span class="token operator">|</span> MyISAM<span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
</code></pre> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'max-connections'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
<span class="token operator">|</span> Variable_name         <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
<span class="token operator">|</span> max<span class="token operator">-</span>connections       <span class="token operator">|</span>  <span class="token number">10</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-------+</span>
</code></pre> 
<p>可以看到<code>default_storage_engine</code>和<code>max_connections</code>这两个系统变量的值已经被修改了。有一点需要注意的是，对于启动选项来说，如果启动选项名由多个单词组成，各个单词之间用短划线-或者下划线_连接起来都可以，但是它对应的系统变量的单词之间必须使用下划线_连接起来。</p> 
<h4><a id="732__348"></a>7.3.2 服务器程序运行过程中设置</h4> 
<p>对于大部分系统变量来说，它们的值可以在服务器程序运行过程中进行动态修改而无需停止并重启服务器。但是，系统变量有作用范围之分。</p> 
<p><strong>设置不同作用范围的系统变量</strong></p> 
<p>多个客户端程序可以同时连接到一个服务器程序。对于同一个系统变量，我们有时想让不同的客户端有不同的值。比方说客户端A,他想让当前客户端对应的默认存储引擎为<code>InnoDB</code>,所以他可以把系统变量default_storage_engine的值设置为InnoDB;客户端B,他想让当前客户端对应的默认存储引擎为<code>MyISAM</code>,所以他可以把系统变量<code>defaull_storage_engine</code>的值设置为MyISAM。这样两个客户端拥有不同的默认存储引擎，使用时互不影响，十分方便。但是这样各个客户端都私有一份系统变量会产生这么两个问题：</p> 
<ul><li>有一些系统变量并不是针对单个客户端的，比如允许同时连接到服务器的客户端数量max_connections,查询缓存的大小query_cache_size,这些公有的系统变量让某个客户端私有显然不合适。</li><li>一个新连接到服务器的客户端对应的系统变量的值该怎么设置？</li></ul> 
<p>为了解决这两个问题，MySQL提出了系统变量作用范围的概念，具体来说作用范围分为这两种：</p> 
<ul><li><code>GLOBAL</code> 全局变量，影响服务器的整体操作。</li><li><code>SESSION</code>:会话变量，影响某个客户端连接的操作。（注：SESSION有个别名叫LOCAL)</li></ul> 
<p>在服务器启动时，会将每个全局变量初始化为其默认值（可以通过命令行或选项文件中指定的选项更改这些默认值）。然后服务器还为每个连接的客户端维护一组会话变量，客户端的会话变量在连接时使用相应全局变量的当前值初始化。</p> 
<p>以<code>default_storage_engine</code>举例，在服务器启动时会初始化一个名为default_storage_engine,作用范围为<code>GLOBAL的系统变量</code>。之后每当有一个客户端连接到该服务器时，服务器都会单独为该客户端分配一个名为default_storage_engine,作用范围为<code>SESSION的系统变量</code>，该作用范围为SESSION的系统变量值按照当前作用范围为GLOBAL的同名系统变量值进行初始化。<br> 很显然，<code>通过启动选项设置的系统变量的作用范围都是GLOBAL的</code>，<code>也就是对所有客户端都有效的</code>，因为在系统启动的时候还没有客户端程序连接进来呢。了解了系统变量的<code>GLOBAL</code>和<code>SESSION</code>作用范围之后，我们再看一下在服务器程序运行期间通过客户端程序设置系统变量的语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token punctuation">[</span><span class="token keyword">GLOBAL</span><span class="token operator">|</span><span class="token keyword">SESSION</span><span class="token punctuation">]</span> 系统变量名 <span class="token operator">=</span> 值；
</code></pre> 
<p>或者写成这样也行：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span>  <span class="token punctuation">[</span>@@<span class="token punctuation">(</span><span class="token keyword">GLOBAL</span><span class="token operator">|</span><span class="token keyword">SESSION</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">]</span> var_name <span class="token operator">=</span> XXX <span class="token punctuation">;</span>
</code></pre> 
<p>比如，服务器运行过程中把作用范围为<code>GLOBAL</code>的系统变量<code>default_storage_engine</code>的值修改为MyISAM,也就是想让之后新连接到服务器的客户端都用MyISAM作为默认的存储引擎，那我们可以选择下边两条语句中的任意一条来进行设置：</p> 
<pre><code class="prism language-sql"><span class="token comment">#方式一:</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> default_storage_engine <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>

<span class="token comment">#方式二：</span>
<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.default_storage_engine</span> <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>
</code></pre> 
<p>如果只想对本客户端生效，也可以选择下边三条语句中的任意一条来进行设置：</p> 
<pre><code class="prism language-sql"><span class="token comment">#方式一</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> default_storage_engine <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>

<span class="token comment">#方式二：</span>
<span class="token keyword">SET</span> @<span class="token variable">@SESSION.default_storage_engine</span> <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>

<span class="token comment">#方式三：</span>
<span class="token keyword">SET</span> default_storage_engine <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>
</code></pre> 
<p>从上边的方式三可以看出，如果在设置系统变量的语句中省略了作用范围，默认的作用范围就是SESSION。也就是说<code>SET系统变量名 = 值和SET SESSION 系统变量名 = 值是等价的</code>。</p> 
<p><strong>查看不同作用范围的系统变量</strong><br> 既然系统变量有作用范围之分，那我们的<code>SHOW VARIABLES</code>语句查看的是什么作用范围的系统变量呢？<br> 答：默认查看的是<code>SESSION</code>作用范围的系统变量。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> <span class="token punctuation">[</span><span class="token keyword">GLOBAL</span><span class="token operator">|</span><span class="token keyword">SESSION</span><span class="token punctuation">]</span> VARIABLES <span class="token punctuation">[</span><span class="token operator">LIKE</span> 匹配的模式<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>小贴士：如果某个客户端改变了某个系统变量在GLOBAL作用范围的值，并不会影响该系统变量在当前已经连接的客户端作用范围为SESSION的值，只会影响后续连入的客户端在作用范围为SESSION的值。</p> 
</blockquote> 
<p>注意事项</p> 
<p>并不是所有系统变量都具有<code>GLOBAL和SESSION</code>的作用范围。</p> 
<ul><li>有一些系统变量只具有<code>GLOBAL</code>作用范围，比方说<code>max_connections</code>,表示服务器程序支持同时最多有多少个客户端程序进行连接。</li><li>有一些系统变量只具有<code>SESSION作用范围</code>，比如<code>insert_id</code>,表示在对某个包含<code>AUTO_INCREMENT</code>列的表进行插入时，该列初始的值。</li><li>有一些系统变量的值既具有<code>GLOBAL</code>作用范围，也具有<code>SESSION</code>作用范围，比如我们前边用到的<code>default_storage_engine</code>,而且其实大部分的系统变量都是这样的</li><li>有些系统变量是只读的，并<code>不能设置值</code>。比方说<code>version</code>,表示当前MySQL的版本，我们客户端是不能设置它的值的，只能在<code>SHOW VARIABLES</code>语句里查看。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f8fc1028f1fa197d725a31db9d420ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2024新版Windows 11要来了！16GB内存需求引热议 只是推荐配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8e3ea3df16f4c07ccd8e6bc7df2c3b9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Maven的介绍、安装配置及工程构建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>