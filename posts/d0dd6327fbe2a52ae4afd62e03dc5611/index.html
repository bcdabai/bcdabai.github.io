<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>全民飞机大战(java) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="全民飞机大战(java)" />
<meta property="og:description" content="目录 一、需求
二、窗体、面板、背景图的绘制
2.1 工具类
2.2 面板类
2.3 窗体类
2.4 效果图
三、英雄机的出现及移动
3.1 定义飞行父类
3.2 英雄机的出现
3.3 加入鼠标监听器
3.4 英雄机的移动
四、敌机的出现及移动
4.1 敌机类
4.2 敌机入场
4.3 敌机移动
4.4 启动一个线程
4.5 效果图
五、英雄机子弹的出现及移动
5.1 英雄机子弹类
5.2 英雄机发射子弹
5.3 英雄机子弹移动
5.4 效果图
六、敌机子弹的出现及移动
6.1 敌机子弹类
6.2 敌机发射子弹
6.3 敌机子弹移动
6.4 效果图
七、击中问题
7.1 英雄机子弹击中敌机
7.2 敌机子弹击中英雄机
7.3 敌机与英雄机相撞
7.4 效果图 八、游戏的开始与结束
8.1 鼠标点击监听事件
8.2 开始与结束界面
8.3 效果图 九、加入音效
9.1 音乐类
十、遇到的问题" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d0dd6327fbe2a52ae4afd62e03dc5611/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-30T16:05:20+08:00" />
<meta property="article:modified_time" content="2020-03-30T16:05:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">全民飞机大战(java)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="main-toc"><strong>目录</strong></h2> 
<p id="%E4%B8%80%E3%80%81%E9%9C%80%E6%B1%82-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E9%9C%80%E6%B1%82" rel="nofollow">一、需求</a></p> 
<p id="%E4%BA%8C%E3%80%81%E7%AA%97%E4%BD%93%E3%80%81%E9%9D%A2%E6%9D%BF%E3%80%81%E8%83%8C%E6%99%AF%E5%9B%BE%E7%9A%84%E7%BB%98%E5%88%B6-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E7%AA%97%E4%BD%93%E3%80%81%E9%9D%A2%E6%9D%BF%E3%80%81%E8%83%8C%E6%99%AF%E5%9B%BE%E7%9A%84%E7%BB%98%E5%88%B6" rel="nofollow">二、窗体、面板、背景图的绘制</a></p> 
<p id="2.1%C2%A0%20%E5%B7%A5%E5%85%B7%E7%B1%BB-toc" style="margin-left:40px;"><a href="#2.1%C2%A0%20%E5%B7%A5%E5%85%B7%E7%B1%BB" rel="nofollow">2.1  工具类</a></p> 
<p id="2.2%C2%A0%20%E9%9D%A2%E6%9D%BF%E7%B1%BB-toc" style="margin-left:40px;"><a href="#2.2%C2%A0%20%E9%9D%A2%E6%9D%BF%E7%B1%BB" rel="nofollow">2.2  面板类</a></p> 
<p id="2.3%C2%A0%20%E7%AA%97%E4%BD%93%E7%B1%BB-toc" style="margin-left:40px;"><a href="#2.3%C2%A0%20%E7%AA%97%E4%BD%93%E7%B1%BB" rel="nofollow">2.3  窗体类</a></p> 
<p id="2.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;"><a href="#2.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">2.4  效果图</a></p> 
<p id="%E4%B8%89%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8" rel="nofollow">三、英雄机的出现及移动</a></p> 
<p id="3.1%C2%A0%20%E5%AE%9A%E4%B9%89%E9%A3%9E%E8%A1%8C%E7%88%B6%E7%B1%BB-toc" style="margin-left:40px;"><a href="#3.1%C2%A0%20%E5%AE%9A%E4%B9%89%E9%A3%9E%E8%A1%8C%E7%88%B6%E7%B1%BB" rel="nofollow">3.1  定义飞行父类</a></p> 
<p id="3.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0-toc" style="margin-left:40px;"><a href="#3.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0" rel="nofollow">3.2  英雄机的出现</a></p> 
<p id="3.3%C2%A0%20%E5%8A%A0%E5%85%A5%E9%BC%A0%E6%A0%87%E7%9B%91%E5%90%AC%E5%99%A8-toc" style="margin-left:40px;"><a href="#3.3%C2%A0%20%E5%8A%A0%E5%85%A5%E9%BC%A0%E6%A0%87%E7%9B%91%E5%90%AC%E5%99%A8" rel="nofollow">3.3  加入鼠标监听器</a></p> 
<p id="%C2%A03.4%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E7%A7%BB%E5%8A%A8-toc" style="margin-left:40px;"><a href="#%C2%A03.4%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E7%A7%BB%E5%8A%A8" rel="nofollow">3.4  英雄机的移动</a></p> 
<p id="%E5%9B%9B%E3%80%81%E6%95%8C%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E6%95%8C%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8" rel="nofollow">四、敌机的出现及移动</a></p> 
<p id="4.1%C2%A0%20%E6%95%8C%E6%9C%BA%E7%B1%BB-toc" style="margin-left:40px;"><a href="#4.1%C2%A0%20%E6%95%8C%E6%9C%BA%E7%B1%BB" rel="nofollow">4.1  敌机类</a></p> 
<p id="4.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%85%A5%E5%9C%BA-toc" style="margin-left:40px;"><a href="#4.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%85%A5%E5%9C%BA" rel="nofollow">4.2  敌机入场</a></p> 
<p id="4.3%C2%A0%20%E6%95%8C%E6%9C%BA%E7%A7%BB%E5%8A%A8-toc" style="margin-left:40px;"><a href="#4.3%C2%A0%20%E6%95%8C%E6%9C%BA%E7%A7%BB%E5%8A%A8" rel="nofollow">4.3  敌机移动</a></p> 
<p id="4.4%C2%A0%20%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B-toc" style="margin-left:40px;"><a href="#4.4%C2%A0%20%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B" rel="nofollow">4.4  启动一个线程</a></p> 
<p id="4.5%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;"><a href="#4.5%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">4.5  效果图</a></p> 
<p id="%E4%BA%94%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8" rel="nofollow">五、英雄机子弹的出现及移动</a></p> 
<p id="5.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB-toc" style="margin-left:40px;"><a href="#5.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB" rel="nofollow">5.1  英雄机子弹类</a></p> 
<p id="5.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9-toc" style="margin-left:40px;"><a href="#5.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9" rel="nofollow">5.2  英雄机发射子弹</a></p> 
<p id="5.3%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8-toc" style="margin-left:40px;"><a href="#5.3%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8" rel="nofollow">5.3  英雄机子弹移动</a></p> 
<p id="5.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;"><a href="#5.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">5.4  效果图</a></p> 
<p id="%E5%85%AD%E3%80%81%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8" rel="nofollow">六、敌机子弹的出现及移动</a></p> 
<p id="6.1%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB-toc" style="margin-left:40px;"><a href="#6.1%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB" rel="nofollow">6.1  敌机子弹类</a></p> 
<p id="6.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9-toc" style="margin-left:40px;"><a href="#6.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9" rel="nofollow">6.2  敌机发射子弹</a></p> 
<p id="%C2%A06.3%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8-toc" style="margin-left:40px;"><a href="#%C2%A06.3%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8" rel="nofollow">6.3  敌机子弹移动</a></p> 
<p id="6.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:40px;"><a href="#6.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">6.4  效果图</a></p> 
<p id="%E4%B8%83%E3%80%81%E5%87%BB%E4%B8%AD%E9%97%AE%E9%A2%98-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%E5%87%BB%E4%B8%AD%E9%97%AE%E9%A2%98" rel="nofollow">七、击中问题</a></p> 
<p id="7.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E6%95%8C%E6%9C%BA-toc" style="margin-left:40px;"><a href="#7.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E6%95%8C%E6%9C%BA" rel="nofollow">7.1  英雄机子弹击中敌机</a></p> 
<p id="7.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E8%8B%B1%E9%9B%84%E6%9C%BA-toc" style="margin-left:40px;"><a href="#7.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E8%8B%B1%E9%9B%84%E6%9C%BA" rel="nofollow">7.2  敌机子弹击中英雄机</a></p> 
<p id="7.3%C2%A0%20%E6%95%8C%E6%9C%BA%E4%B8%8E%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9B%B8%E6%92%9E-toc" style="margin-left:40px;"><a href="#7.3%C2%A0%20%E6%95%8C%E6%9C%BA%E4%B8%8E%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9B%B8%E6%92%9E" rel="nofollow">7.3  敌机与英雄机相撞</a></p> 
<p id="7.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0-toc" style="margin-left:40px;"><a href="#7.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0" rel="nofollow">7.4  效果图 </a></p> 
<p id="%E5%85%AB%E3%80%81%E6%B8%B8%E6%88%8F%E7%9A%84%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F-toc" style="margin-left:0px;"><a href="#%E5%85%AB%E3%80%81%E6%B8%B8%E6%88%8F%E7%9A%84%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F" rel="nofollow">八、游戏的开始与结束</a></p> 
<p id="8.1%C2%A0%20%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6-toc" style="margin-left:40px;"><a href="#8.1%C2%A0%20%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6" rel="nofollow">8.1  鼠标点击监听事件</a></p> 
<p id="8.2%C2%A0%20%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px;"><a href="#8.2%C2%A0%20%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F%E7%95%8C%E9%9D%A2" rel="nofollow">8.2  开始与结束界面</a></p> 
<p id="8.3%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0-toc" style="margin-left:40px;"><a href="#8.3%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0" rel="nofollow">8.3  效果图 </a></p> 
<p id="%E4%B9%9D%E3%80%81%E5%8A%A0%E5%85%A5%E9%9F%B3%E6%95%88-toc" style="margin-left:0px;"><a href="#%E4%B9%9D%E3%80%81%E5%8A%A0%E5%85%A5%E9%9F%B3%E6%95%88" rel="nofollow">九、加入音效</a></p> 
<p id="%C2%A09.1%C2%A0%20%E9%9F%B3%E4%B9%90%E7%B1%BB-toc" style="margin-left:40px;"><a href="#%C2%A09.1%C2%A0%20%E9%9F%B3%E4%B9%90%E7%B1%BB" rel="nofollow">9.1  音乐类</a></p> 
<p id="%E5%8D%81%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98" rel="nofollow">十、遇到的问题</a></p> 
<p id="%E5%8D%81%E4%B8%80%E3%80%81%E5%AD%A6%E4%B9%A0%E5%9C%B0%E5%9D%80%E5%8F%8A%E6%BA%90%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%AD%A6%E4%B9%A0%E5%9C%B0%E5%9D%80%E5%8F%8A%E6%BA%90%E7%A0%81" rel="nofollow">十一、学习地址</a></p> 
<hr id="hr-toc"> 
<h2>一、需求</h2> 
<ul><li>窗体、面板、背景图的绘制</li><li>英雄机的出现及移动</li><li>敌机的出现及移动</li><li>英雄机子弹的出现及移动</li><li>敌机子弹的出现及移动</li><li>英雄机子弹打中敌机</li><li>敌机子弹打中英雄机</li><li>敌机与英雄机相撞</li><li>游戏的开始与结束界面</li><li>增加背景音乐和爆炸音效</li></ul> 
<h2 id="%E4%BA%8C%E3%80%81%E7%AA%97%E4%BD%93%E3%80%81%E9%9D%A2%E6%9D%BF%E3%80%81%E8%83%8C%E6%99%AF%E5%9B%BE%E7%9A%84%E7%BB%98%E5%88%B6">二、窗体、面板、背景图的绘制</h2> 
<h3 id="2.1%C2%A0%20%E5%B7%A5%E5%85%B7%E7%B1%BB">2.1  工具类</h3> 
<pre><code class="language-java">/**
 * 这是工具类，用于获取图片
 * @author Administrator
 *
 */

import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.imageio.ImageIO;

public class Tool {

	public static BufferedImage getImage(String path) {
		try {
			BufferedImage img = ImageIO.read(Tool.class.getResource(path));
			return img;
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;
	}
}</code></pre> 
<h3 id="2.2%C2%A0%20%E9%9D%A2%E6%9D%BF%E7%B1%BB">2.2  面板类</h3> 
<pre><code class="language-java">/**
 * 这是面板类，继承JPanel
 */
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import javax.swing.JPanel;

public class GamePanel extends JPanel {
	// 定义背景图
	private BufferedImage bg;

	// 构造方法
	public GamePanel() {
		bg = Tool.getImage("../img/bg3.jpg");
	}

	// paint方法
	@Override
	public void paint(Graphics g) {
		g.drawImage(bg, 0, 0, null);
	}
}</code></pre> 
<h3 id="2.3%C2%A0%20%E7%AA%97%E4%BD%93%E7%B1%BB">2.3  窗体类</h3> 
<pre><code class="language-java">import javax.swing.JFrame;

/**
 * 这个类是窗体类,继承JFrame类
 * 
 * @author Administrator
 *
 */
public class GameFrame extends JFrame {

	public GameFrame() {
		setSize(512, 768);
		setLocationRelativeTo(null);// 居中
		setIconImage(Tool.getImage("../img/hero.png"));// 图标
		setTitle("飞机大战");
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);// 关闭停止运行
	}

	public static void main(String[] args) {

		GameFrame frame = new GameFrame();
		GamePanel panel = new GamePanel();
		frame.add(panel);
		frame.setVisible(true);//窗体可见
	}
}</code></pre> 
<h3 id="2.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE">2.4  效果图</h3> 
<p><img alt="" height="299" src="https://images2.imgbox.com/10/7a/LDmPAriZ_o.png" width="200"></p> 
<h2 id="%E4%B8%89%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8">三、英雄机的出现及移动</h2> 
<h3 id="3.1%C2%A0%20%E5%AE%9A%E4%B9%89%E9%A3%9E%E8%A1%8C%E7%88%B6%E7%B1%BB">3.1  定义飞行父类</h3> 
<pre><code class="language-java">import java.awt.image.BufferedImage;

/**
 * 这是飞行类，作为飞机及子弹的父类
 * @author Administrator
 *
 */
abstract class FlyObject {
	
	//图片
	BufferedImage img;
	
	//坐标
	int x;
	int y;
	
	//宽高
	int w;
	int h;
}</code></pre> 
<h3 id="3.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0">3.2  英雄机的出现</h3> 
<pre><code class="language-java">/**
 * 这是英雄机类
 * @author Administrator
 *
 */
public class Hero extends FlyObject {

	public Hero() {
		img = Tool.getImage("../img/hero.png");
		x = 190;
		y = 550;
		w = img.getWidth();
		h = img.getHeight();
	}

}</code></pre> 
<p> <img alt="" height="300" src="https://images2.imgbox.com/af/8f/CTbECM2q_o.png" width="200"></p> 
<h3 id="3.3%C2%A0%20%E5%8A%A0%E5%85%A5%E9%BC%A0%E6%A0%87%E7%9B%91%E5%90%AC%E5%99%A8">3.3  加入鼠标监听器</h3> 
<pre><code class="language-java">// 构造方法
	public GamePanel() {
		bg = Tool.getImage("../img/bg3.jpg");
		
		//创建鼠标适配器
		MouseAdapter adapter = new MouseAdapter() {
			public void mouseMoved(MouseEvent e) {
				int mx = e.getX();
				int my = e.getY();
				hero.moveToMouse(mx,my);
				repaint();
			}
		};
		//将适配器加入到监听器
		addMouseListener(adapter);
		addMouseMotionListener(adapter);
	}</code></pre> 
<h3 id="%C2%A03.4%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9A%84%E7%A7%BB%E5%8A%A8">3.4  英雄机的移动</h3> 
<pre><code class="language-java">	/**
	 * 英雄机跟随鼠标移动
	 * @param mx
	 * @param my
	 */
	public void moveToMouse(int mx, int my) {
		x = mx - w/2;
		y = my - h/2;
	}</code></pre> 
<p><img alt="" height="298" src="https://images2.imgbox.com/d1/30/0vTZn7eR_o.gif" width="200"></p> 
<h2 id="%E5%9B%9B%E3%80%81%E6%95%8C%E6%9C%BA%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8">四、敌机的出现及移动</h2> 
<h3 id="4.1%C2%A0%20%E6%95%8C%E6%9C%BA%E7%B1%BB">4.1  敌机类</h3> 
<pre><code>import java.util.Random;

/**
 * 这是敌机类
 * @author Administrator
 */
public class Enemy extends FlyObject{
	//敌机速度
	int sp;
	
	public Enemy() {
		
		Random num = new Random();
		int index = num.nextInt(11)+1;//生成1~11的随机数
		img = Tool.getImage("../img/ep"+index+".png");
		
		w = img.getWidth();
		h = img.getHeight();
		x = num.nextInt(512 - w);
		y = -h;
		sp = 11 - index;
	}
	
	//敌机移动
	public void move() {
		y += sp;
	}
}</code></pre> 
<h3 id="4.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%85%A5%E5%9C%BA">4.2  敌机入场</h3> 
<pre><code class="language-java">// 敌机入场
	public void epEnter() {
		epcount++;
		if (epcount &gt; 10) {
			Enemy ep = new Enemy();
			eps.add(ep);
			epcount = 0;
		}
	}</code></pre> 
<h3 id="4.3%C2%A0%20%E6%95%8C%E6%9C%BA%E7%A7%BB%E5%8A%A8">4.3  敌机移动</h3> 
<pre><code class="language-java">//敌机移动
	public void epMove() {
		for(int i = 0; i &lt; eps.size(); i++) {
			Enemy ep = eps.get(i);
			ep.move();
		}
	}</code></pre> 
<h3 id="4.4%C2%A0%20%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B">4.4  启动一个线程</h3> 
<pre><code class="language-java">//游戏启动方法
	public void action() {
		new Thread() {
			public void run() {
				while(true) {
				    epEnter();
				    epMove();
				    try {
						Thread.sleep(20);
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
				    repaint();
				}
			}
		}.start();
	}</code></pre> 
<h3 id="4.5%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE">4.5  效果图</h3> 
<p><img alt="" height="298" src="https://images2.imgbox.com/f4/d7/bP11ynxY_o.png" width="200"></p> 
<h2 id="%E4%BA%94%E3%80%81%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8">五、英雄机子弹的出现及移动</h2> 
<h3 id="5.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB">5.1  英雄机子弹类</h3> 
<pre><code class="language-java">/**
 * 这是英雄机子弹类
 * @author Administrator
 *
 */
public class HeroFire extends FlyObject{
	
	public HeroFire(int hx,int hy) {
		img = Tool.getImage("../img/herofire.png");
		x = hx;
		y = hy;
		w = img.getWidth()/3;
		h = img.getHeight()/3;
	}
	
	//英雄机子弹的移动
	public void move() {
		y -= 10;
	}
}</code></pre> 
<h3 id="5.2%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9">5.2  英雄机发射子弹</h3> 
<pre><code class="language-java">//英雄机发射子弹
	public void heroShoot() {
		hero_fire_count++;
		if(hero_fire_count &gt; 5) {
			HeroFire hf = new HeroFire(hero.x+43,hero.y);
			hfs.add(hf);
			hero_fire_count = 0;
		}
	}</code></pre> 
<h3 id="5.3%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8">5.3  英雄机子弹移动</h3> 
<pre><code class="language-java">//英雄机子弹移动
	public void heroFireMove() {
		for(int i = 0; i &lt; hfs.size(); i++) {
			HeroFire hf = hfs.get(i);
			hf.move();
		}
	}</code></pre> 
<h3 id="5.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE">5.4  效果图</h3> 
<p> <img alt="" height="297" src="https://images2.imgbox.com/64/59/5g44pFJY_o.png" width="200"></p> 
<h2 id="%E5%85%AD%E3%80%81%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%9A%84%E5%87%BA%E7%8E%B0%E5%8F%8A%E7%A7%BB%E5%8A%A8">六、敌机子弹的出现及移动</h2> 
<h3 id="6.1%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%B1%BB">6.1  敌机子弹类</h3> 
<pre><code class="language-java">/**
 * 这是敌机子弹类
 * @author Administrator
 *
 */
public class EnemyFire extends FlyObject{
	
	int sp;
	
	public EnemyFire(int ex,int ey) {
		img = Tool.getImage("../img/fire.png");
		x = ex;
		y = ey;
		w = img.getWidth()/5;
		h = img.getHeight()/5;
	}
	
	//敌机子弹移动
	public void move() {
		y += sp+5;
	}
}</code></pre> 
<h3 id="6.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9">6.2  敌机发射子弹</h3> 
<pre><code class="language-java">//敌机发射子弹
	public void enemyShoot() {
		enemy_fire_count++;
		if (enemy_fire_count &gt; 10) {
			for (int i = 0; i &lt; eps.size(); i++) {
				Enemy ep = eps.get(i);
				EnemyFire ef = new EnemyFire(ep.x+55, ep.y+120);
				ef.sp = ep.sp;
				efs.add(ef);
			}
			enemy_fire_count = 0;
		}
	}</code></pre> 
<h3 id="%C2%A06.3%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E7%A7%BB%E5%8A%A8">6.3  敌机子弹移动</h3> 
<pre><code class="language-java">//敌机子弹移动
	public void enemyFireMove() {
		for(int i = 0; i &lt; efs.size(); i++) {
			EnemyFire ef = efs.get(i);
			ef.move();
		}
	}</code></pre> 
<h3 id="6.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE">6.4  效果图</h3> 
<p><img alt="" height="295" src="https://images2.imgbox.com/0a/a2/mIpEj9PB_o.png" width="200"></p> 
<h2 id="%E4%B8%83%E3%80%81%E5%87%BB%E4%B8%AD%E9%97%AE%E9%A2%98">七、击中问题</h2> 
<h3 id="7.1%C2%A0%20%E8%8B%B1%E9%9B%84%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E6%95%8C%E6%9C%BA">7.1  英雄机子弹击中敌机</h3> 
<pre><code>       //英雄机子弹击中敌机
	public void heroFireHitEnemy() {
		for(int i = 0; i &lt; hfs.size(); i++) {
			HeroFire hf = hfs.get(i);
			enemyBang(hf);
		}
	}
	
	//敌机被击中后消失
	public void enemyBang(HeroFire hf) {
		for(int i = 0; i &lt; eps.size(); i++) {
			Enemy ep = eps.get(i);
			if(ep.enemyshootBy(hf)) {
				ep.hp--;
				if(ep.hp &lt;= 0) {
					eps.remove(ep);
				}
				hfs.remove(hf);
			}
		}
	}</code></pre> 
<h3 id="7.2%C2%A0%20%E6%95%8C%E6%9C%BA%E5%AD%90%E5%BC%B9%E5%87%BB%E4%B8%AD%E8%8B%B1%E9%9B%84%E6%9C%BA">7.2  敌机子弹击中英雄机</h3> 
<pre><code>//3.敌机子弹击中英雄机
	public void enemyFireHitHero() {
		for(int i = 0; i &lt; efs.size(); i++) {
			EnemyFire ef = efs.get(i);
			heroBang(ef);
		}
	}
	
	//4.英雄机被敌机击中后，游戏结束
	public void heroBang(EnemyFire ef) {
		if(hero.heroshootBy(ef)) {
			hero.hp--;
			if(hero.hp &lt;= 0) {
				gameover = true;
			}
			efs.remove(ef);
		}
	}</code></pre> 
<h3 id="7.3%C2%A0%20%E6%95%8C%E6%9C%BA%E4%B8%8E%E8%8B%B1%E9%9B%84%E6%9C%BA%E7%9B%B8%E6%92%9E">7.3  敌机与英雄机相撞</h3> 
<pre><code class="language-java">//7.敌机与英雄机相撞
	public void enemyBumpHero() {
		for(int i = 0; i &lt; eps.size(); i++) {
			Enemy ep = eps.get(i);
			if(ep.bumpByHero(hero)) {
				eps.remove(ep);
				//hero.hp--;
				if(hero.hp &lt;= 0) {
					gameover = true;
				}
			}
		}
	}</code></pre> 
<h3 id="7.4%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0">7.4  效果图 </h3> 
<p><img alt="" height="299" src="https://images2.imgbox.com/64/1c/1BqDVtaG_o.gif" width="200"></p> 
<h2 id="%E5%85%AB%E3%80%81%E6%B8%B8%E6%88%8F%E7%9A%84%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F">八、游戏的开始与结束</h2> 
<h3 id="8.1%C2%A0%20%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6">8.1  鼠标点击监听事件</h3> 
<pre><code class="language-java">//鼠标点击监听
			@Override
			public void mouseClicked(MouseEvent e) {
				if (!start) {
					hero = new Hero();
					gameover = false;
					start = true;
					score = 0;
					eps.clear();
					hfs.clear();
					efs.clear();
					repaint();
				}
				if (gameover) {
					start = false;
					repaint();
				}
			}</code></pre> 
<h3 id="8.2%C2%A0%20%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F%E7%95%8C%E9%9D%A2">8.2  开始与结束界面</h3> 
<pre><code class="language-java">//绘制结束界面
		if(gameover) {
			g.drawImage(over, 60, 200, over.getWidth() * 2, over.getHeight() * 2, null);
			g.drawImage(again_img,190,450,null);
		}
		//绘制开始界面
		if(!start) {
			g.drawImage(begin_img,0,0,null);
			g.drawImage(title_img,-30,10,title_img.getWidth(),title_img.getHeight(),null);
			g.drawImage(start_img,180,400,null);
		}</code></pre> 
<h3 id="8.3%C2%A0%20%E6%95%88%E6%9E%9C%E5%9B%BE%C2%A0">8.3  效果图 </h3> 
<p> <img alt="" height="299" src="https://images2.imgbox.com/4f/24/kIYaFiXg_o.gif" width="200"></p> 
<h2 id="%E4%B9%9D%E3%80%81%E5%8A%A0%E5%85%A5%E9%9F%B3%E6%95%88">九、加入音效</h2> 
<h3 id="%C2%A09.1%C2%A0%20%E9%9F%B3%E4%B9%90%E7%B1%BB">9.1  音乐类</h3> 
<pre><code class="language-java">/**
 * 这是音乐类，用于播放音乐
 * @author Administrator
 *
 */
public class Sound {
	
	private AudioClip bang;
	private AudioClip music;
	
	public Sound() {
		String fileName = "E:\\learning\\Program\\img\\bang.wav";
		String fileName2 = "E:\\learning\\Program\\img\\bgm.wav";
		try {
			bang = JApplet.newAudioClip(new URL("file:"+fileName));
			music = JApplet.newAudioClip(new URL("file:"+fileName2));
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
	
	
	//播放飞机爆炸的声音
	public void bangVoice() {
		new Thread() {
			public void run() {
				bang.play();;
			}
		}.start();
	}
	
	//播放背景音乐
	public void bgm() {
		new Thread() {
			public void run() {
				music.loop();
			}
		}.start();
	}
	
	//停止播放背景音乐
	public void stop() {
		music.stop();
	}
}</code></pre> 
<h2 id="%E5%8D%81%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">十、遇到的问题</h2> 
<p>1.  明明没有敌机出现，可是子弹却一直不停的从上方发出，一开始我总把注意力放在敌机和子弹的出现频率上，后来更改敌机的</p> 
<p>     初始贴图位置后，发现敌机速度为0，所以一直在发射子弹。不同的敌机拥有不同的速度，其中有一种设为0了。</p> 
<p>2.  关于鼠标点击监听，游戏结束后，点击后应该重新开始游戏，结果游戏并未运行，只贴出了背景图和英雄机，于是又把注意</p> 
<p>     力放在了gameover上，因为游戏不运行，就是某个地方gameover=true了，<span style="color:#f33b45;">找了很久发现action函数中if把异常中的睡眠也包</span></p> 
<p><span style="color:#f33b45;">     括进去了，包括睡眠与不包括睡眠这两者的区别我还不明白</span>。</p> 
<p>3.  关于加入敌机爆炸特效，不知道怎么加。 </p> 
<p>4.  关于背景图的循环滚动，不知道怎么加。</p> 
<h2 id="%E5%8D%81%E4%B8%80%E3%80%81%E5%AD%A6%E4%B9%A0%E5%9C%B0%E5%9D%80%E5%8F%8A%E6%BA%90%E7%A0%81">十一、学习地址</h2> 
<ul><li>学习地址：<a href="https://www.bilibili.com/video/BV1VE411Z7gB?t=194" rel="nofollow">https://www.bilibili.com/video/BV1VE411Z7gB?t=194</a> </li></ul> 
<p><strong>----------------------------------------------------------------------更新bug及功能-------------------------------------------------------------------------------</strong></p> 
<ul><li>关于开始界面，简介界面，结束界面之间存在bug，更正监听代码如下</li></ul> 
<pre><code class="language-java">//鼠标点击监听
			@Override
			public void mouseClicked(MouseEvent e) {
				
				boolean clickstartgame = e.getX() &gt;= 160 &amp;&amp; e.getX() &lt;= 349 &amp;&amp; e.getY() &gt;= 400 &amp;&amp; e.getY() &lt;= 462;
				boolean clickregame = e.getX() &gt;= 190 &amp;&amp; e.getX() &lt;= 332 &amp;&amp; e.getY() &gt;= 450 &amp;&amp; e.getY() &lt;= 501;
				boolean clickbrief = e.getX() &gt;= 160 &amp;&amp; e.getX() &lt;= 349 &amp;&amp; e.getY() &gt;= 480 &amp;&amp; e.getY() &lt;= 542;
				boolean clickreturn = e.getX() &gt;= 160 &amp;&amp; e.getX() &lt;= 349 &amp;&amp; e.getY() &gt;= 620 &amp;&amp; e.getY() &lt;= 682;
				
				if(clickbrief &amp;&amp; !gameover) {
					playbrief = true;
				}
				if(playbrief &amp;&amp; clickreturn) {
					start = false;
					playbrief = false;
				}
				if (!start &amp;&amp; clickstartgame) {
					hero = new Hero();
					gameover = false;
					start = true;
					score = 0;
					eps.clear();
					hfs.clear();
					efs.clear();
					sound.bgm();
					repaint();
				}
				if (gameover &amp;&amp; clickregame) {
					start = false;
					gameover = false;
					repaint();
				}
			}</code></pre> 
<ul><li>关于背景的循环滚动</li></ul> 
<pre><code class="language-java">//背景图的移动,画两张相同的背景图
	public void bgMove() {
		y1++;
		y2++;
		if(y1 == 0) {
			y2 = -game_bg.getHeight();
		}
		if(y2 == 0) {
			y1 = -game_bg.getHeight();
		}
	}</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9eb8163730b927b877f8436474c6e458/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android开发之C盘瘦身（gradle瘦身）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0c762a003724386cf27ff200040f5c84/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java实现 LeetCode 621 任务调度器（暴力大法）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>