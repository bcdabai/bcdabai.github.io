<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>J2ee路径问题(转) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="J2ee路径问题(转)" />
<meta property="og:description" content="前天突然想把 做了一部分的 程序变得更安全， 就把全部的jsp视图页面给移到了 WEB-INF中 ， 结果问题出来了一大堆：
全部图片， struts 的访问。
已经做的 功能全部都乱套了 ， 更搞笑的是 我没有备份。。
汗。。 都是相对路径惹的祸
网上得到这段不错的 技术：
（转载）
JSP 中究竟采用绝对路径还是采用相对路径随着所采用技术的越来越复杂，这个问题也变得越来越难以解决。
１） 采用相对路径遇到的问题
l 相对路径固然比较灵活，但如果想复制页面内的代码却变得比较困难，因为不同的页面具有不同的相对路径，复制后必须修改每一个连接的路径。
l 如果页面被多于一个的页面所包含，那么被包含页面中的相对路径将是不正确的。
l 如果采用 Struts 的 Action 返回页面，那么由于页面路径与 Action 路径不同，使得浏览器无法正确解释页面中的路径，如页面为 /pages/cust/cust.jsp ，图片所有目录为 /images/title.gif ，这时在 /pages/cust/cust.jsp 中的所用的路径为 ”../../images/title.gif” ，但是如果某一个 Action 的 Forward 指向这个 JSP 文件，而这个 Action 的路径为 /cust/manage.do ，那么页面内容中 ”../../images/title.gif” 就不再指向正确的路径了。
解决以上问题似乎只有使用绝对路径了。
２） 采用绝对路径遇到的问题
l 随着不同的 Web 应用发布方式，绝对路径的值也不同。如 Web 应用发布为 MyApp ，则路径 ”/MyApp/images/title.gif” 是正确的，但发布为另一应用时如 MyApp2 ，这个路径就不对了，也许这个情况比较少，但以 default 方式发布 Web 应用时以上绝对路径也不同： ”/images/title." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0bb48db02752b5bb581f18cba8d89040/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-03-18T19:39:00+08:00" />
<meta property="article:modified_time" content="2010-03-18T19:39:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">J2ee路径问题(转)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> </p> 
<p>前天突然想把 做了一部分的 程序变得更安全， 就把全部的jsp视图页面给移到了 WEB-INF中 ， 结果问题出来了一大堆：</p> 
<p>                   全部图片， struts 的访问。</p> 
<p>                            已经做的 功能全部都乱套了 ， 更搞笑的是 我没有备份。。</p> 
<p>                汗。。 都是相对路径惹的祸</p> 
<p>   网上得到这段不错的 技术：</p> 
<p>（转载）</p> 
<p>    JSP 中究竟采用绝对路径还是采用相对路径随着所采用技术的越来越复杂，这个问题也变得越来越难以解决。</p> 
<p>１） 采用相对路径遇到的问题</p> 
<p>l          相对路径固然比较灵活，但如果想复制页面内的代码却变得比较困难，因为不同的页面具有不同的相对路径，复制后必须修改每一个连接的路径。</p> 
<p>l          如果页面被多于一个的页面所包含，那么被包含页面中的相对路径将是不正确的。</p> 
<p>l          如果采用 Struts 的 Action 返回页面，那么由于页面路径与 Action 路径不同，使得浏览器无法正确解释页面中的路径，如页面为 /pages/cust/cust.jsp ，图片所有目录为 /images/title.gif ，这时在 /pages/cust/cust.jsp 中的所用的路径为 ”../../images/title.gif” ，但是如果某一个 Action 的 Forward 指向这个 JSP 文件，而这个 Action 的路径为 /cust/manage.do ，那么页面内容中 ”../../images/title.gif” 就不再指向正确的路径了。</p> 
<p>解决以上问题似乎只有使用绝对路径了。</p> 
<p>２） 采用绝对路径遇到的问题</p> 
<p>l          随着不同的 Web 应用发布方式，绝对路径的值也不同。如 Web 应用发布为 MyApp ，则路径 ”/MyApp/images/title.gif” 是正确的，但发布为另一应用时如 MyApp2 ，这个路径就不对了，也许这个情况比较少，但以 default 方式发布 Web 应用时以上绝对路径也不同： ”/images/title.gif” 。</p> 
<p>二． 解决方案</p> 
<p> </p> 
<p>１） 采用绝对路径，但为了解决不同部署方式的差别，在所有非 struts 标签的路径前加 ${pageContext.request.contextPath} ，如原路径为：</p> 
<p>”/images/title.gif” ，改为</p> 
<p>“${pageContext.request.contextPath}/images/title.gif” 。</p> 
<p>代码 ” ${pageContext.request.contextPath}” 的作用是取出部署的应用程序名，这样不管如何部署，所用路径都是正确的。</p> 
<p>缺点：</p> 
<p> </p> 
<p>操作不便，其他工具无法正确解释 ${pageContext.request.contextPath}</p> 
<p>２） 采用相对路径，在每个 JSP 文件中加入 base 标签，如：</p> 
<p>&lt;base href="http://${header['host']}${pageContext.request.contextPath}/pages/cust/relation.jsp" /&gt;</p> 
<p>这样所有的路径都可以使用相对路径。</p> 
<p>缺点：</p> 
<p> </p> 
<p>对于被包含的文件依然无效。</p> 
<p>    真正使用时需要灵活应用１）和２），写出更加健壮的代码。</p> 
<p>转自：<a href="http://glagra.blog.163.com/blog/static/4209634920096710500828/" rel="nofollow">http://glagra.blog.163.com/blog/static/4209634920096710500828/</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c78128400d6cff24f28e4d2d0fc5f002/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实现LoadPE功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/38474cf97c8cf1e86441a7732629501c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软件研发部经理岗位职责</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>