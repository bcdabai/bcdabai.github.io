<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>.gitignore文件用法及如何配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content=".gitignore文件用法及如何配置" />
<meta property="og:description" content=".gitignore文件用法如何配置(笔记) .gitignore文件是在git提交的时候用来屏蔽某些你不想提交上去的文件。
项目开发过程中，有时候不想把一些文件（如中间文件/编译文件等）提交到git上。这个时候就由.gitignore文件来筛选出不想提交的文件。所筛选的文件/夹将不会被追踪（tracked），push的时候也不会上传到git上。
**以下用法配置是单片机C开发项目中的
创建 我们需要在提交Git之前，需要自己创建一个.gitignore文件，由于Windows下创建文件必须键入文件名，而要创建的.gitignore文件是没有文件名的，所以我们可以使用move命令来实现，打开Git Bash ，使用mv gitignore.txt .gitignore，然后用编辑器编辑这个文件。
语法规范 #：开头的行表示注释行*：用来匹配零个或多个字符
*.a表示忽略.a文件；
*.[oa]表示忽略所有以.a和.o结尾的文件，*~忽略所有以~结尾的文件；
[]用来匹配括号内的任一字符，如[abc]，也可以在括号内加连接符，如[0-9]匹配0至9的数；
?用来匹配单个字符；!：用来否定忽略
比如前面用了*.txt，然后使用!*a.txt，则这个a.txt不会被忽略/：
正斜杠在前：匹配项目跟目录；如/bin表示忽略根目录下的bin文件，/bsp表示忽略根目录下的bsp文件夹，但不忽略子目录里的user/bsp文件夹；
正斜杠在后：匹配文件夹以及在该文件夹路径下的内容，但是不匹配该文件；如bsp/表示忽略bsp文件夹里的所有文件；**：匹配多级目录，可在开始，中间，结束； 忽略优先级 在.gitignore文件中，每一行指定一个忽略规则，Git 检查忽略规则的时候有多个来源，它的优先级如下（由高到低）：
从命令行中读取可用的忽略规则当前目录定义的规则父级目录定义的规则，依次递推$GIT_DIR/info/exclude 文件中定义的规则core.excludesfile中定义的全局规则 常见例子 1、忽略.bin文件
#忽略所有的.bin文件 *.bin 2、否定忽略 link.bin
#不忽略目录下的link.bin !link.bin #不忽略obj目录下的link.bin !/obj/link.bin 3、忽略某目录.txt, 不包括子目录.txt
#忽略doc/notes.txt, 不包括doc/server/arch.txt doc/*.txt 4、忽略某目录内所有的.pdf 文件
#忽略所有的 .pdf 文件 在 doc/ directory 下的 doc/**/*.pdf 5、忽略当前目录.c，不忽略子目录.c
#忽略 cat.c，不忽略 build/cat.c /*.c 6、忽略当前路径下的Proj文件夹，该文件夹下的所有内容都会被忽略
#忽略当前路径下的Proj文件夹，该文件夹下的所有内容都会被忽略 Proj/ 7、忽略Proj文件夹子目录文件夹
#忽略Proj文件夹子目录Obj文件夹里的所有文件 Proj/Obj/ 8、忽略根目录下的某文件
#忽略根目录下的bin文件 /bin: 9、忽略/foo, a/foo, a/b/foo等
#忽略/foo, a/foo, a/b/foo等 **/foo: 10、忽略a/b, a/x/b, a/x/y/b等" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/469d1ac6e44c0456fbb241e3a0fca5d5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-18T17:20:19+08:00" />
<meta property="article:modified_time" content="2022-04-18T17:20:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">.gitignore文件用法及如何配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="gitignore_0"></a>.gitignore文件用法如何配置(笔记)</h2> 
<p>.gitignore文件是在git提交的时候用来屏蔽某些你不想提交上去的文件。<br> 项目开发过程中，有时候不想把一些文件（如中间文件/编译文件等）提交到git上。这个时候就由.gitignore文件来筛选出不想提交的文件。所筛选的文件/夹将不会被追踪（tracked），push的时候也不会上传到git上。</p> 
<p>**以下用法配置是单片机C开发项目中的</p> 
<h3><a id="_7"></a>创建</h3> 
<p>我们需要在提交Git之前，需要自己创建一个.gitignore文件，由于Windows下创建文件必须键入文件名，而要创建的.gitignore文件是没有文件名的，所以我们可以使用move命令来实现，打开Git Bash ，使用<code>mv gitignore.txt .gitignore</code>，然后用编辑器编辑这个文件。</p> 
<h3><a id="_9"></a>语法规范</h3> 
<ul><li>#：开头的行表示注释行</li><li>*：用来匹配零个或多个字符<br> <code>*.a</code>表示忽略.a文件；<br> <code>*.[oa]</code>表示忽略所有以.a和.o结尾的文件，<code>*~</code>忽略所有以~结尾的文件；<br> <code>[]</code>用来匹配括号内的任一字符，如[abc]，也可以在括号内加连接符，如[0-9]匹配0至9的数；<br> <code>?</code>用来匹配单个字符；</li><li>!：用来否定忽略<br> 比如前面用了<code>*.txt</code>，然后使用<code>!*a.txt</code>，则这个a.txt不会被忽略</li><li>/：<br> 正斜杠在前：匹配项目跟目录；如<code>/bin</code>表示忽略根目录下的bin文件，<code>/bsp</code>表示忽略根目录下的bsp文件夹，但不忽略子目录里的user/bsp文件夹；<br> 正斜杠在后：匹配文件夹以及在该文件夹路径下的内容，但是不匹配该文件；如<code>bsp/</code>表示忽略bsp文件夹里的所有文件；</li><li>**：匹配多级目录，可在开始，中间，结束；</li></ul> 
<h3><a id="_23"></a>忽略优先级</h3> 
<p>在.gitignore文件中，每一行指定一个忽略规则，Git 检查忽略规则的时候有多个来源，它的优先级如下（由高到低）：</p> 
<ol><li>从命令行中读取可用的忽略规则</li><li>当前目录定义的规则</li><li>父级目录定义的规则，依次递推</li><li>$GIT_DIR/info/exclude 文件中定义的规则</li><li>core.excludesfile中定义的全局规则</li></ol> 
<h3><a id="_31"></a>常见例子</h3> 
<p>1、忽略.bin文件</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略所有的.bin文件</span>
*.bin
</code></pre> 
<p>2、否定忽略 link.bin</p> 
<pre><code class="prism language-bash"><span class="token comment">#不忽略目录下的link.bin</span>
<span class="token operator">!</span>link.bin
<span class="token comment">#不忽略obj目录下的link.bin</span>
<span class="token operator">!</span>/obj/link.bin
</code></pre> 
<p>3、忽略某目录.txt, 不包括子目录.txt</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略doc/notes.txt, 不包括doc/server/arch.txt</span>
doc/*.txt
</code></pre> 
<p>4、忽略某目录内所有的.pdf 文件</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略所有的 .pdf 文件 在 doc/ directory 下的</span>
doc/**/*.pdf
</code></pre> 
<p>5、忽略当前目录.c，不忽略子目录.c</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略 cat.c，不忽略 build/cat.c</span>
/*.c
</code></pre> 
<p>6、忽略当前路径下的Proj文件夹，该文件夹下的所有内容都会被忽略</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略当前路径下的Proj文件夹，该文件夹下的所有内容都会被忽略</span>
Proj/
</code></pre> 
<p>7、忽略Proj文件夹子目录文件夹</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略Proj文件夹子目录Obj文件夹里的所有文件</span>
Proj/Obj/
</code></pre> 
<p>8、忽略根目录下的某文件</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略根目录下的bin文件</span>
/bin: 
</code></pre> 
<p>9、忽略/foo, a/foo, a/b/foo等</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略/foo, a/foo, a/b/foo等</span>
**/foo: 
</code></pre> 
<p>10、忽略a/b, a/x/b, a/x/y/b等</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略a/b, a/x/b, a/x/y/b等</span>
a/**/b: 
</code></pre> 
<p>11、忽略当前路径的某文件</p> 
<pre><code class="prism language-bash"><span class="token comment">#忽略当前路径的 config.php 文件</span>
config.php: 
</code></pre> 
<h3><a id="gitignore_109"></a>.gitignore规则不生效</h3> 
<p>一、.gitignore只能忽略那些原来没有被追踪（tracked）的文件，如果某些文件已经被纳入了版本管理中，则修改.gitignore是无效的。<br> 解决方法就是先把本地缓存删除（改变成未track状态），然后再提交:</p> 
<pre><code class="prism language-bash"><span class="token number">1</span>. <span class="token function">git</span> <span class="token function">rm</span> -r --cached <span class="token builtin class-name">.</span>
<span class="token number">2</span>. <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token number">3</span>. <span class="token function">git</span> commit -m <span class="token string">'update .gitignore'</span>
</code></pre> 
<p>二、你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：</p> 
<pre><code class="prism language-bash">$ <span class="token function">git</span> <span class="token function">add</span> App.class
The following paths are ignored by one of your .gitignore files:
App.class
Use -f <span class="token keyword">if</span> you really want to <span class="token function">add</span> them.
</code></pre> 
<p>如果你确实想添加该文件，可以用-f强制添加到Git：</p> 
<pre><code class="prism language-bash">$ <span class="token function">git</span> <span class="token function">add</span> -f App.class
</code></pre> 
<p>三、或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用git check-ignore命令检查：</p> 
<pre><code class="prism language-bash">$ <span class="token function">git</span> check-ignore -v App.class
.gitignore:3:*.class    App.class
</code></pre> 
<p>Git会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。</p> 
<h3><a id="_141"></a>忽略已提交文件中的变化</h3> 
<h4><a id="_142"></a>临时忽略变更</h4> 
<p>在开发阶段，有时候需要临时忽略本地仓库中已提交的文件的变更。例如，你的配置文件与本机的工作环境或者项目配置有关，那么这个操作就非常有用：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> update-index --skip-worktree <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> 
<p>当然也可以恢复文件的追踪：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> update-index --no-skip-worktree <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> 
<p>也可以通过以下方式进行。这主要是为了防止文件被开发者修改。<br> 关闭变更追踪：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> update-index --assume-unchanged <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> 
<p>恢复变更追踪：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> update-index --no-assume-unchanged <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_165"></a>永久忽略文件变更</h4> 
<p>如果一个文件已经被 Git 跟踪，那么再将这个文件添加到 .gitignore 中并不会忽略文件变更。你还需要从Git 暂存区（index）中移除这个文件的信息，步骤如下：</p> 
<ol><li>在.gitignore中添加这个文件</li><li>从暂存区移除文件信息：</li></ol> 
<pre><code class="prism language-bash"><span class="token function">git</span> <span class="token function">rm</span> --cached  <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre> 
<ol start="3"><li>提交删除文件和更新的.gitignore到您的仓库</li></ol> 
<blockquote> 
 <p>注：以上步骤不会从系统中删除文件，只是告诉Git以后忽略该文件的变更</p> 
</blockquote> 
<hr> 
<p>以上是最近在用.gitignore文件时查阅的一些资料，感谢以下大神的帖子：</p> 
<p><a href="https://blog.csdn.net/weixin_45318845/article/details/120740012">https://blog.csdn.net/weixin_45318845/article/details/120740012</a><br> <a href="https://blog.csdn.net/wnvalentin/article/details/105448739">https://blog.csdn.net/wnvalentin/article/details/105448739</a></p> 
<p>如有描述有误的地方欢迎大家指出，感谢！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b9e9f53ea819bf7ab3e7246b15f13103/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">matlab最优化问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e0f9c6b79456d02a0d8977e78293602/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js高级笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>