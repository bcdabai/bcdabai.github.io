<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>flask 第七章 简陋版智能玩具 &#43;MongoDB初识和基本操作 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="flask 第七章 简陋版智能玩具 &#43;MongoDB初识和基本操作" />
<meta property="og:description" content="1.简陋版web智能玩具
FAQ.py文件
import os from aip import AipSpeech, AipNlp from uuid import uuid4 &#34;&#34;&#34; 你的 APPID AK SK &#34;&#34;&#34; APP_ID = &#39;16027160&#39; API_KEY = &#39;uzx4SWZuimPqbE4LvxYScEhi&#39; SECRET_KEY = &#39;3HBy8yi11ID9T4yyxkADuGYOGyavxPdG&#39; client = AipSpeech(APP_ID, API_KEY, SECRET_KEY) client_nlp = AipNlp(APP_ID, API_KEY, SECRET_KEY) # 语音识别,将你输入的文字转化为语音 def AI_voice(file): filename=f&#39;{uuid4()}.mp3&#39; result = client.synthesis(file, &#39;zh&#39;, 1, { &#39;spd&#39;: 5, &#39;vol&#39;: 5, &#39;pit&#39;: 5, &#39;per&#39;: 2 }) if not isinstance(result, dict): with open(filename, &#39;wb&#39;) as f: f.write(result) return filename # 语音合成,通过语音生成文字,在这里只是读出文字,并没有写出来,下面这一步才是将语音中的文字return出来 def get_file_content(file): os." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2a63693e336886752855961d60b4ae86/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-25T08:27:00+08:00" />
<meta property="article:modified_time" content="2019-04-25T08:27:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">flask 第七章 简陋版智能玩具 &#43;MongoDB初识和基本操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p><span style="font-size:18pt;"><strong>1.简陋版web智能玩具</strong></span></p> 
 <p>FAQ.py文件</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">import</span><span style="color:#000000;"> os

</span><span style="color:#0000ff;">from</span> aip <span style="color:#0000ff;">import</span><span style="color:#000000;"> AipSpeech, AipNlp
</span><span style="color:#0000ff;">from</span> uuid <span style="color:#0000ff;">import</span><span style="color:#000000;"> uuid4
</span><span style="color:#800000;">"""</span><span style="color:#800000;"> 你的 APPID AK SK </span><span style="color:#800000;">"""</span><span style="color:#000000;">
APP_ID </span>= <span style="color:#800000;">'</span><span style="color:#800000;">16027160</span><span style="color:#800000;">'</span><span style="color:#000000;">
API_KEY </span>= <span style="color:#800000;">'</span><span style="color:#800000;">uzx4SWZuimPqbE4LvxYScEhi</span><span style="color:#800000;">'</span><span style="color:#000000;">
SECRET_KEY </span>= <span style="color:#800000;">'</span><span style="color:#800000;">3HBy8yi11ID9T4yyxkADuGYOGyavxPdG</span><span style="color:#800000;">'</span><span style="color:#000000;">

client </span>=<span style="color:#000000;"> AipSpeech(APP_ID, API_KEY, SECRET_KEY)
client_nlp </span>=<span style="color:#000000;"> AipNlp(APP_ID, API_KEY, SECRET_KEY)


</span><span style="color:#008000;">#</span><span style="color:#008000;"> 语音识别,将你输入的文字转化为语音</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> AI_voice(file):
    filename</span>=f<span style="color:#800000;">'</span><span style="color:#800000;">{uuid4()}.mp3</span><span style="color:#800000;">'</span><span style="color:#000000;">
    result </span>= client.synthesis(file, <span style="color:#800000;">'</span><span style="color:#800000;">zh</span><span style="color:#800000;">'</span>, 1<span style="color:#000000;">, {
        </span><span style="color:#800000;">'</span><span style="color:#800000;">spd</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">vol</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">pit</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">per</span><span style="color:#800000;">'</span>: 2<span style="color:#000000;">
    })
    </span><span style="color:#0000ff;">if</span> <span style="color:#0000ff;">not</span><span style="color:#000000;"> isinstance(result, dict):
        with open(filename, </span><span style="color:#800000;">'</span><span style="color:#800000;">wb</span><span style="color:#800000;">'</span><span style="color:#000000;">) as f:
            f.write(result)

    </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> filename

</span><span style="color:#008000;">#</span><span style="color:#008000;"> 语音合成,通过语音生成文字,在这里只是读出文字,并没有写出来,下面这一步才是将语音中的文字return出来</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> get_file_content(file):
    os.system(f</span><span style="color:#800000;">"</span><span style="color:#800000;">ffmpeg -y  -i {file} -acodec pcm_s16le -f s16le -ac 1 -ar 16000 {file}.pcm</span><span style="color:#800000;">"</span><span style="color:#000000;">)
    with open(f</span><span style="color:#800000;">'</span><span style="color:#800000;">{file}.pcm</span><span style="color:#800000;">'</span>, <span style="color:#800000;">'</span><span style="color:#800000;">rb</span><span style="color:#800000;">'</span><span style="color:#000000;">) as fp:
        </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> fp.read()

</span><span style="color:#008000;">#</span><span style="color:#008000;"> 返回的是你语音中的消息</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> voice_content(file):
    result </span>= client.asr(get_file_content(file), <span style="color:#800000;">'</span><span style="color:#800000;">pcm</span><span style="color:#800000;">'</span>, 16000<span style="color:#000000;">, {
        </span><span style="color:#800000;">'</span><span style="color:#800000;">dev_pid</span><span style="color:#800000;">'</span>: 1536<span style="color:#000000;">,
    })
    </span><span style="color:#008000;">#</span><span style="color:#008000;"> print(result.get('result')[0])</span>
    <span style="color:#0000ff;">return</span> result.get(<span style="color:#800000;">'</span><span style="color:#800000;">result</span><span style="color:#800000;">'</span><span style="color:#000000;">)[0]

</span><span style="color:#0000ff;">def</span><span style="color:#000000;"> goto_tl(text, uid):
    URL </span>= <span style="color:#800000;">"</span><span style="color:#800000;">http://openapi.tuling123.com/openapi/api/v2</span><span style="color:#800000;">"</span>
    <span style="color:#0000ff;">import</span><span style="color:#000000;"> requests
    data </span>=<span style="color:#000000;"> {
        </span><span style="color:#800000;">"</span><span style="color:#800000;">perception</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
            </span><span style="color:#800000;">"</span><span style="color:#800000;">inputText</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
                </span><span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">你叫什么名字</span><span style="color:#800000;">"</span><span style="color:#000000;">
            }
        },
        </span><span style="color:#800000;">"</span><span style="color:#800000;">userInfo</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
            </span><span style="color:#800000;">"</span><span style="color:#800000;">apiKey</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">be41cf8596a24aec95b0e86be895cfa9</span><span style="color:#800000;">"</span><span style="color:#000000;">,
            </span><span style="color:#800000;">"</span><span style="color:#800000;">userId</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">123</span><span style="color:#800000;">"</span><span style="color:#000000;">
        }
    }

    data[</span><span style="color:#800000;">"</span><span style="color:#800000;">perception</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">inputText</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span>] =<span style="color:#000000;"> text
    data[</span><span style="color:#800000;">"</span><span style="color:#800000;">userInfo</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">userId</span><span style="color:#800000;">"</span>] =<span style="color:#000000;"> uid
    res </span>= requests.post(URL, json=<span style="color:#000000;">data)

    </span><span style="color:#0000ff;">return</span> res.json().get(<span style="color:#800000;">"</span><span style="color:#800000;">results</span><span style="color:#800000;">"</span>)[0].get(<span style="color:#800000;">"</span><span style="color:#800000;">values</span><span style="color:#800000;">"</span>).get(<span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span>)</pre> 
 </div> 
 <p>WebToy.html文件内容如下:</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">import</span><span style="color:#000000;"> os

</span><span style="color:#0000ff;">from</span> aip <span style="color:#0000ff;">import</span><span style="color:#000000;"> AipSpeech, AipNlp
</span><span style="color:#0000ff;">from</span> uuid <span style="color:#0000ff;">import</span><span style="color:#000000;"> uuid4
</span><span style="color:#800000;">"""</span><span style="color:#800000;"> 你的 APPID AK SK </span><span style="color:#800000;">"""<br></span><span style="color:#000000;">#图灵机器人
APP_ID </span>= <span style="color:#800000;">'</span><span style="color:#800000;">16027160</span><span style="color:#800000;">'</span><span style="color:#000000;">
API_KEY </span>= <span style="color:#800000;">'</span><span style="color:#800000;">uzx4SWZuimPqbE4LvxYScEhi</span><span style="color:#800000;">'</span><span style="color:#000000;">
SECRET_KEY </span>= <span style="color:#800000;">'</span><span style="color:#800000;">3HBy8yi11ID9T4yyxkADuGYOGyavxPdG</span><span style="color:#800000;">'</span><span style="color:#000000;">

client </span>=<span style="color:#000000;"> AipSpeech(APP_ID, API_KEY, SECRET_KEY)
client_nlp </span>=<span style="color:#000000;"> AipNlp(APP_ID, API_KEY, SECRET_KEY)


</span><span style="color:#008000;">#</span><span style="color:#008000;"> 语音识别,将你输入的文字转化为语音</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> AI_voice(file):
    filename</span>=f<span style="color:#800000;">'</span><span style="color:#800000;">{uuid4()}.mp3</span><span style="color:#800000;">'</span><span style="color:#000000;">
    result </span>= client.synthesis(file, <span style="color:#800000;">'</span><span style="color:#800000;">zh</span><span style="color:#800000;">'</span>, 1<span style="color:#000000;">, {
        </span><span style="color:#800000;">'</span><span style="color:#800000;">spd</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">vol</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">pit</span><span style="color:#800000;">'</span>: 5<span style="color:#000000;">,
        </span><span style="color:#800000;">'</span><span style="color:#800000;">per</span><span style="color:#800000;">'</span>: 2<span style="color:#000000;">
    })
    </span><span style="color:#0000ff;">if</span> <span style="color:#0000ff;">not</span><span style="color:#000000;"> isinstance(result, dict):
        with open(filename, </span><span style="color:#800000;">'</span><span style="color:#800000;">wb</span><span style="color:#800000;">'</span><span style="color:#000000;">) as f:
            f.write(result)

    </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> filename

</span><span style="color:#008000;">#</span><span style="color:#008000;"> 语音合成,通过语音生成文字,在这里只是读出文字,并没有写出来,下面这一步才是将语音中的文字return出来</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> get_file_content(file):
    os.system(f</span><span style="color:#800000;">"</span><span style="color:#800000;">ffmpeg -y  -i {file} -acodec pcm_s16le -f s16le -ac 1 -ar 16000 {file}.pcm</span><span style="color:#800000;">"</span><span style="color:#000000;">)
    with open(f</span><span style="color:#800000;">'</span><span style="color:#800000;">{file}.pcm</span><span style="color:#800000;">'</span>, <span style="color:#800000;">'</span><span style="color:#800000;">rb</span><span style="color:#800000;">'</span><span style="color:#000000;">) as fp:
        </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> fp.read()

</span><span style="color:#008000;">#</span><span style="color:#008000;"> 返回的是你语音中的消息</span>
<span style="color:#0000ff;">def</span><span style="color:#000000;"> voice_content(file):
    result </span>= client.asr(get_file_content(file), <span style="color:#800000;">'</span><span style="color:#800000;">pcm</span><span style="color:#800000;">'</span>, 16000<span style="color:#000000;">, {
        </span><span style="color:#800000;">'</span><span style="color:#800000;">dev_pid</span><span style="color:#800000;">'</span>: 1536<span style="color:#000000;">,
    })</span>
    <span style="color:#0000ff;">return</span> result.get(<span style="color:#800000;">'</span><span style="color:#800000;">result</span><span style="color:#800000;">'</span><span style="color:#000000;">)[0]

</span><span style="color:#0000ff;">def</span><span style="color:#000000;"> goto_tl(text, uid):
    URL </span>= <span style="color:#800000;">"</span><span style="color:#800000;">http://openapi.tuling123.com/openapi/api/v2</span><span style="color:#800000;">"</span>
    <span style="color:#0000ff;">import</span><span style="color:#000000;"> requests
    data </span>=<span style="color:#000000;"> {
        </span><span style="color:#800000;">"</span><span style="color:#800000;">perception</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
            </span><span style="color:#800000;">"</span><span style="color:#800000;">inputText</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
                </span><span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">你叫什么名字</span><span style="color:#800000;">"</span><span style="color:#000000;">
            }
        },
        </span><span style="color:#800000;">"</span><span style="color:#800000;">userInfo</span><span style="color:#800000;">"</span><span style="color:#000000;">: {
            </span><span style="color:#800000;">"</span><span style="color:#800000;">apiKey</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">be41cf8596a24aec95b0e86be895cfa9</span><span style="color:#800000;">"</span><span style="color:#000000;">,
            </span><span style="color:#800000;">"</span><span style="color:#800000;">userId</span><span style="color:#800000;">"</span>: <span style="color:#800000;">"</span><span style="color:#800000;">123</span><span style="color:#800000;">"</span><span style="color:#000000;">
        }
    }

    data[</span><span style="color:#800000;">"</span><span style="color:#800000;">perception</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">inputText</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span>] =<span style="color:#000000;"> text
    data[</span><span style="color:#800000;">"</span><span style="color:#800000;">userInfo</span><span style="color:#800000;">"</span>][<span style="color:#800000;">"</span><span style="color:#800000;">userId</span><span style="color:#800000;">"</span>] =<span style="color:#000000;"> uid
    res </span>= requests.post(URL, json=<span style="color:#000000;">data)

</span>
    <span style="color:#0000ff;">return</span> res.json().get(<span style="color:#800000;">"</span><span style="color:#800000;">results</span><span style="color:#800000;">"</span>)[0].get(<span style="color:#800000;">"</span><span style="color:#800000;">values</span><span style="color:#800000;">"</span>).get(<span style="color:#800000;">"</span><span style="color:#800000;">text</span><span style="color:#800000;">"</span><span style="color:#000000;">)

</span><span style="color:#008000;"><br></span></pre> 
 </div> 
 <p>webtoy.py文件内容如下:</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#0000ff;">from</span> flask <span style="color:#0000ff;">import</span><span style="color:#000000;"> Flask, render_template, request, jsonify, send_file
</span><span style="color:#0000ff;">from</span> uuid <span style="color:#0000ff;">import</span> uuid4  <span style="color:#008000;">#</span><span style="color:#008000;"> 这个是导入的一串数字,唯一的</span>

<span style="color:#0000ff;">from</span> flask_cors <span style="color:#0000ff;">import</span><span style="color:#000000;"> CORS

</span><span style="color:#0000ff;">from</span> day07.FAQ <span style="color:#0000ff;">import</span><span style="color:#000000;"> AI_voice, goto_tl, voice_content, client_nlp

app </span>= Flask(<span style="color:#800080;">__name__</span><span style="color:#000000;">)
</span><span style="color:#008000;">#</span><span style="color:#008000;">跨域请求</span>
<span style="color:#000000;">CORS(app)

@app.route(</span><span style="color:#800000;">'</span><span style="color:#800000;">/</span><span style="color:#800000;">'</span><span style="color:#000000;">)
</span><span style="color:#0000ff;">def</span><span style="color:#000000;"> WebToy():
    </span><span style="color:#0000ff;">return</span> render_template(<span style="color:#800000;">'</span><span style="color:#800000;">WebToy.html</span><span style="color:#800000;">'</span><span style="color:#000000;">)


@app.route(</span><span style="color:#800000;">"</span><span style="color:#800000;">/uploader</span><span style="color:#800000;">"</span>,methods=[<span style="color:#800000;">"</span><span style="color:#800000;">POST</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">GET</span><span style="color:#800000;">"</span><span style="color:#000000;">])
</span><span style="color:#0000ff;">def</span><span style="color:#000000;"> uploader():
    filename </span>= f<span style="color:#800000;">"</span><span style="color:#800000;">{uuid4()}.wav</span><span style="color:#800000;">"</span><span style="color:#000000;">
    file </span>= request.files.get(<span style="color:#800000;">"</span><span style="color:#800000;">reco</span><span style="color:#800000;">"</span><span style="color:#000000;">)
    file.save(filename)

    text </span>=<span style="color:#000000;"> voice_content(filename)
    </span><span style="color:#008000;">#</span><span style="color:#008000;"> 自然语言处理 LowB</span>
    score = client_nlp.simnet(<span style="color:#800000;">"</span><span style="color:#800000;">你叫什么名字</span><span style="color:#800000;">"</span>, text).get(<span style="color:#800000;">"</span><span style="color:#800000;">score</span><span style="color:#800000;">"</span><span style="color:#000000;">)
    </span><span style="color:#0000ff;">print</span><span style="color:#000000;">(score)
    </span><span style="color:#0000ff;">if</span> score &gt;= 0.75<span style="color:#000000;">:
        filename </span>= AI_voice(<span style="color:#800000;">"</span><span style="color:#800000;">我的名字叫嘻嘻</span><span style="color:#800000;">"</span><span style="color:#000000;">)
    </span><span style="color:#0000ff;">else</span><span style="color:#000000;">:
        answer </span>= goto_tl(text, <span style="color:#800000;">"</span><span style="color:#800000;">qiaoxiaoqiang</span><span style="color:#800000;">"</span><span style="color:#000000;">)
        filename </span>=<span style="color:#000000;"> AI_voice(answer)

    </span><span style="color:#0000ff;">return</span> jsonify({<!-- --><span style="color:#800000;">"</span><span style="color:#800000;">code</span><span style="color:#800000;">"</span>:0,<span style="color:#800000;">"</span><span style="color:#800000;">msg</span><span style="color:#800000;">"</span>:<span style="color:#800000;">"</span><span style="color:#800000;">文件上传成功</span><span style="color:#800000;">"</span>,<span style="color:#800000;">"</span><span style="color:#800000;">filename</span><span style="color:#800000;">"</span><span style="color:#000000;">:filename})


@app.route(</span><span style="color:#800000;">'</span><span style="color:#800000;">/getaudio/&lt;filename&gt;</span><span style="color:#800000;">'</span><span style="color:#000000;">)
</span><span style="color:#0000ff;">def</span><span style="color:#000000;"> getaudio(filename):
    </span><span style="color:#0000ff;">return</span><span style="color:#000000;"> send_file(filename)


</span><span style="color:#0000ff;">if</span> <span style="color:#800080;">__name__</span> == <span style="color:#800000;">'</span><span style="color:#800000;">__main__</span><span style="color:#800000;">'</span><span style="color:#000000;">:
    app.run(</span><span style="color:#800000;">'</span><span style="color:#800000;">0.0.0.0</span><span style="color:#800000;">'</span>, 5000, debug=True)</pre> 
 </div> 
 <p><span style="font-size:18pt;"><strong>2.MongoDB初识</strong></span></p> 
 <p>在启动mongoDB前,先配置环境变量 ,安装后找到bin目录(包含mongod.exe和mongo.exe)</p> 
 <p>MongoDB的默认服务端口为27017 ,redis的默认端口为6379,mysql的默认端口为3306</p> 
 <p>1.启动MongoDB服务 </p> 
 <p>　　mongod -dbpath  D:\data\db</p> 
 <p>　　mongod -dbpath 数据库的存放路径</p> 
 <p>　　　　　　-install  安装Windows服务</p> 
 <p>　　　　　　-remove 卸载Windows服务</p> 
 <p>2.客户端的连接</p> 
 <p>　　推荐使用mongodb自带的客户端  -mongo</p> 
 <p>　　show databases    查看本地磁盘数据库</p> 
 <p>　　use dbname　　   切换到当前使用的数据库</p> 
 <p>　　db　　　　　　　 查看当前使用的数据库</p> 
 <p>　　show tables 　　   查看当前数据库存放在磁盘上的数据表</p> 
 <p> </p> 
 <p>　　use 不存在的数据库    - 创建了数据库 ,当前创建的数据库没有存放在磁盘中</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">数据库中没有users数据库,如果使用了 use  users命令,他会在内存中创建一个users的数据库
</code></pre> 
 </div> 
 <p>　　db.tablename 不存在的表名 - 创建数据表  当前数据表没有存放在磁盘中</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">通过前面创建的数据库,use 不存在的表名,如果你在后面再表中添加了数据,那么这个表和内容都存放到了磁盘中
</code></pre> 
 </div> 
 <p>　　概念: - 使用了不存在的对象即创建了该对象  - 不限制数据结构</p> 
 <p>使用第三方客户端 :  --图形化工具 -NoSQLBooster4MongoDB for windows for mac</p> 
 <p><span style="font-size:18pt;"><strong>3.MongoDB的增删改查</strong></span></p> 
 <p><span style="font-size:18px;"><strong>添加数据:</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">db.tablename.insert({'key':'value'})

官方推荐的写法:
    #在图形化客户端和数据库中是这个写法
    db.table.insertOne({'key':'value'})
    db.table.insertMany({k1:v1},{k2:v2},,{k3:v3})
    #在pycharm中的写法为
    db.tablename.insert_one({})
    db.tablename.insert_many({},{},{})</code></pre> 
 </div> 
 <p><span style="font-size:18px;"><strong>删除数据:</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">db.tablename.remove({k:v})
db.tablename.remove({age:34}) #删除所有age=34的数据

官方推荐的写法:
#数据库和图形化操作写法
db.tablename.deleteOne()  #删除符合条件的第一条数据
db.tablename.deleteMany() # 删除符合条件的所有数据</code></pre> 
  <pre><code class="language-python">#在pycharm中的写法为
db.tablename.delete_one({})
db.tablename.delete_many({},{},{})</code></pre> 
 </div> 
 <p><span style="font-size:18px;"><strong>更新数据:</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#查询出name为xx的数据,将符合条件的一条数据进行修改
db.tablename.update({name:'xx'},{$set:{age:23}}) 

$set -set修改器   强制替换覆盖

官方推荐写法<br><br>　　#数据库和图形化操作的写法<br>　　#更新符合条件的第一条数据,第一条数据就是你第一个插入的数据 </code></pre> 
  <pre><code class="language-python"><em>　　db.tablename.updateOne({k1:v1},{$set:{k2:v2}}) <br>　　#更新符合条件的所有数据 <br>　　db.tablename.updateMany({k1:v1},{$set:{k2:v2}})<br><br>　　pycharm写法<br></em></code></pre> 
  <pre><code class="language-python">　　db.tablename.update_one({},{})
　　db.tablename.update_many({},{})<br><br>array(数组,列表) + object(字典) :db.tablename.updateOne({cp.name:'装X'},{$set:{cp.$.score:'100'}}) #此处cp.$.score,$的意思为前面查询出的索引</code></pre> 
 </div> 
 <p><span style="font-size:18px;"><strong>查询操作:</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">db.filename.find()  #查询所有数据
db.user.find({name:xixi}) #查询出name为xixi的数据

#查询符合条件的一条数据
db.tablename.findOne({k:v}) 
</code></pre> 
 </div> 
 <p><span style="font-size:18pt;"><strong>4.MongoDB的数据类型</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">ObjectId ：Documents 自动生成的 _id
_id:ObjectId("5cb69a23815ea7295f8bad43") 自动生成的 json数据中不包含ObjectId类型 id类型uuid
String： 字符串，必须是utf-8
Boolean：布尔值，true 或者false (这里有坑哦~在我们大Python中 True False 首字母大写)
Integer：整数 (Int32 Int64 你们就知道有个Int就行了,一般我们用Int32)
Double：浮点数 (没有float类型,所有小数都是Double)
Arrays：数组或者列表，多个值存储到一个键 (list哦,大Python中的List哦)
Object：深度&lt;=4 如果你学过Python的话,那么这个概念特别好理解,就是Python中的字典,这个数据类型就是字典
Null：空数据类型 , 一个特殊的概念,None Null
Timestamp：时间戳 通常不用这个数据类型 如果存储时间 Double
Date：存储当前日期或时间unix时间格式 (我们一般不用这个Date类型,时间戳可以秒杀一切时间类型)
</code></pre> 
 </div> 
 <p><span style="font-size:18pt;"><strong>5.数学比较符</strong></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">$lt : 小于 √
$lte: 小于等于 √
$gt : 大于 √
$gte: 大于等于 √
	
$ne : 不等于
$eq or 冒号 : 等于
</code></pre> 
 </div> 
 <p><span style="font-size:18pt;"><strong>6.查询关键字</strong></span></p> 
 <p>　　array数据类型会自动遍历</p> 
 <p>　　$in 或者等于相同字段 db.filename.fiind({age:{$in:[19,109]}})  　　     #就是age=19或age=109的数据 </p> 
 <p>　　$or 或者等于不同字段 db.filename.find({$or:[{age:19},{age:109}] })   #也是age=19或age=109的数据,与$in不同之处在于 ,$in写的必须是相同的字段,而$or可以写不同的字段</p> 
 <p>　　$and or 逗号  -- 并列条件</p> 
 <p>　　$all --Array 数据类型 子集查询 db.filename.find({hobby:{$all : [ '玉凤','玉霞' ]}})</p> 
 <p><span style="font-size:18pt;"><strong>7.$字符特殊用法:</strong></span></p> 
 <p>　　存储符合条件的元素的下标索引</p> 
 <p>　　用于修改字段</p> 
 <p><span style="font-size:18pt;"><strong>8.修改器</strong></span></p> 
 <p>　　$set -- set修改器   强制替换覆盖</p> 
 <p>　　$unset  -- 强制删除字段</p> 
 <p>　　$inc   -- 引用增加   #就相当于我查询出的数据进行增加,没有减,如果想实现减的操作,加负的即可</p> 
 <p> 　　array操作:</p> 
 <p>　　$push  相当于append  在array中追加 </p> 
 <p>　　$pushAll  相当于extend  在array中追加列表中的所有元素</p> 
 <p>　　$pull   相当于remove  在array中删除一个元素</p> 
 <p>　　$pullAll  在array中删除一堆元素</p> 
 <p>　　$pop  相当于pop 删除第一个 -1 或 最后一个 1 的值</p> 
 <p><span style="font-size:18pt;"><strong>9.<strong> sort(排序) </strong>skip(跳过) limit(选取条目)</strong></span></p> 
 <p><span style="font-size:18px;"> sort 排序</span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#找到name为xixi的数据,根据age排序
db.filename.find({name:xixi}).sort({age:18})

#找到name为xixi的数据,根据age排序,如果age有相同的,再根据birthday倒序排序
db.filename.find({name:xixi}).sort({age:18,birthday:-1})
</code></pre> 
 </div> 
 <p><span style="font-size:18px;">skip 跳过</span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#找到name为xixi的数据,然后根据插入顺序跳过第一条
db.filename.find(name:xixi).skip(1)</code></pre> 
 </div> 
 <p><span style="font-size:18px;">limit 选取条目</span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#找到name为xixi的数据,根据插入顺序选取出3条数据展示
db.filename.find({name:xixi}).limit(3)</code></pre> 
 </div> 
 <p><span style="font-size:16px;color:#ff0000;"><strong>sort,limit,skip是有执行顺序的</strong></span></p> 
 <p><span style="font-size:16px;color:#ff0000;"><strong>先排序(sort),在跳过(skip),最后显示条目(limit)</strong></span></p> 
 <p><span style="font-size:18px;">分页 </span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">(page-1)*num

db.filename.find({name:xixi}).skip((page-1)*num).limit(num)
</code></pre> 
 </div> 
 <p>10.pymongo</p> 
 <p>*************************</p> 
 <p>11.MongoDB偷换的概念</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">MySql               MongoDB

DataBase            DataBase 
Table               Collection
Colunm              Field
Row                 Dcouments
</code></pre> 
 </div> 
 <p>　　</p> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/zty1304368100/p/10726968.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7e2c2b79b72effd55628992f36d72d7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PTA中的习题以及答案附带解释（长期更新）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/650139fdd0624616b561e408fbca3ff0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从Excel表中导入数据时日期格式的验证问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>