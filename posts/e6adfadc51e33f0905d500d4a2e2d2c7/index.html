<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【华为_安全】防火墙IPsec双机实验 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【华为_安全】防火墙IPsec双机实验" />
<meta property="og:description" content="【华为_安全】防火墙IPsec双机实验 1. 前言2. 拓扑3. 需求4. 解法4.1 思路总部IP-Link双机热备IPsec路由部署 分公司(Fw3 动态公网IP)IPsecIP-Link路由部署 4.2 参考命令Fw1Fw2Fw3Fw4ISP1ISP2ISP3ISP4NAT-Device 4.3 故障测试FW1正常时PC1测试 isp1链路故障模拟关闭ISP1接口Fw1成为备墙Fw2成为主墙PC1测试 isp1链路故障恢复恢复ISP1接口Fw1成为主墙Fw2成为备墙PC1测试 4.4 流量走向诉求描述 1. 前言 学习华为防火墙IPsec双机实验记录
ensp拓扑链接：拓扑
防火墙登录账号都为admin
密码为Huawei@123
2. 拓扑 总部：
两台防火墙 采用双机部署，分别连接到ISP1、ISP2
总部两台防火墙的 ISP1 出口是 G0/0/3，连接 ISP2 的出口是 G0/0/5，缺省情况下，流量走 FW1 的 G0/0/3 接口
两台防火墙 作为内网用户的上网网关
两台防火墙 需要基于双机双出口与两个分公司分别建立 IPSec VPN。
分公司1：
路由器NAT-Device作为NAT设备，连接到ISP3
出口防火墙Fw3作为内网用户的上网网关，以及与总部对接IPSec VPN。
分公司2：
出口防火墙Fw4连接到ISP4，作为内网用户的上网网关，以及与总部对接IPSec VPN。
3. 需求 链路故障：
FW1连接 ISP1 链路故障，但是 ISP1 未故障，流量走 FW2 的 G0/0/3；FW1 连接 ISP1 链路未故障，但是 ISP1 故障，流量走 FW2 的 G0/0/5；FW1 连接 ISP1 链路恢复，ISP1 恢复，流量走 FW1 的 G0/0/3； 设备故障：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e6adfadc51e33f0905d500d4a2e2d2c7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T16:13:21+08:00" />
<meta property="article:modified_time" content="2023-12-08T16:13:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【华为_安全】防火墙IPsec双机实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>【华为_安全】防火墙IPsec双机实验</h4> 
 <ul><li>1. 前言</li><li>2. 拓扑</li><li>3. 需求</li><li>4. 解法</li><li><ul><li>4.1 思路</li><li><ul><li>总部</li><li><ul><li>IP-Link</li><li>双机热备</li><li>IPsec</li><li>路由部署</li></ul> 
    </li><li>分公司(Fw3 动态公网IP)</li><li><ul><li>IPsec</li><li>IP-Link</li><li>路由部署</li></ul> 
   </li></ul> 
   </li><li>4.2 参考命令</li><li><ul><li>Fw1</li><li>Fw2</li><li>Fw3</li><li>Fw4</li><li>ISP1</li><li>ISP2</li><li>ISP3</li><li>ISP4</li><li>NAT-Device</li></ul> 
   </li><li>4.3 故障测试</li><li><ul><li>FW1正常时</li><li><ul><li>PC1测试</li></ul> 
    </li><li>isp1链路故障模拟</li><li><ul><li>关闭ISP1接口</li><li>Fw1成为备墙</li><li>Fw2成为主墙</li><li>PC1测试</li></ul> 
    </li><li>isp1链路故障恢复</li><li><ul><li>恢复ISP1接口</li><li>Fw1成为主墙</li><li>Fw2成为备墙</li><li>PC1测试</li></ul> 
   </li></ul> 
   </li><li>4.4 流量走向诉求描述</li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1__2"></a>1. 前言</h2> 
<p>学习华为防火墙IPsec双机实验记录</p> 
<p>ensp拓扑链接：<a href="https://pan.baidu.com/s/1fddYSjexSSGKBDfkA2JlVw?pwd=0jn8#list/path=%2F" rel="nofollow">拓扑</a></p> 
<p>防火墙登录账号都为admin<br> 密码为Huawei@123</p> 
<h2><a id="2__9"></a>2. 拓扑</h2> 
<p><img src="https://images2.imgbox.com/4b/1a/ypjSbNa9_o.png" alt="在这里插入图片描述"></p> 
<p><strong>总部：</strong><br> 两台防火墙 采用双机部署，分别连接到ISP1、ISP2<br> 总部两台防火墙的 ISP1 出口是 G0/0/3，连接 ISP2 的出口是 G0/0/5，缺省情况下，流量走 FW1 的 G0/0/3 接口<br> 两台防火墙 作为内网用户的上网网关<br> 两台防火墙 需要基于双机双出口与两个分公司分别建立 IPSec VPN。</p> 
<p><strong>分公司1：</strong><br> 路由器NAT-Device作为NAT设备，连接到ISP3<br> 出口防火墙Fw3作为内网用户的上网网关，以及与总部对接IPSec VPN。</p> 
<p><strong>分公司2：</strong><br> 出口防火墙Fw4连接到ISP4，作为内网用户的上网网关，以及与总部对接IPSec VPN。</p> 
<h2><a id="3__27"></a>3. 需求</h2> 
<p><strong>链路故障：</strong></p> 
<blockquote> 
 <ol><li>FW1<code>连接 ISP1 链路故障</code>，但是 ISP1 未故障，流量走 FW2 的 G0/0/3；</li><li>FW1 连接 ISP1 链路未故障，但是 <code>ISP1 故障</code>，流量走 FW2 的 G0/0/5；</li><li>FW1 <code>连接 ISP1 链路恢复</code>，<code>ISP1 恢复</code>，流量走 FW1 的 G0/0/3；</li></ol> 
</blockquote> 
<p><strong>设备故障：</strong></p> 
<blockquote> 
 <ol><li>FW1 正常情况下，流量走 FW1 的 G0/0/3；</li><li>FW1 设备故障，流量走 FW2 的 G0/0/3；</li><li>FW1 及 ISP1 设备故障，流量走 FW2 的 G0/0/5</li></ol> 
</blockquote> 
<h2><a id="4__41"></a>4. 解法</h2> 
<h3><a id="41__42"></a>4.1 思路</h3> 
<h4><a id="_43"></a>总部</h4> 
<h5><a id="IPLink_44"></a>IP-Link</h5> 
<ol><li>在Fw1、Fw2上开启IP-Link探测功能，探测连接到IPS1的网络，当ISP1网络发生故障，可以及时发现故障。</li></ol> 
<h5><a id="_47"></a>双机热备</h5> 
<ol><li> <p>在Fw1、Fw2配置双机热备，采用主备备份模式，Fw1作为主设备、Fw2作为备设备。同时配置VGMP组监控接口和IP-Link状态，确保在遇到故障的时候实现快速切换。</p> 
  <ol><li>配置VGMP组监控连接到ISP1、ISP2、内网的接口</li><li>配置VGMP组监控连接到ISP1的网络，即关联上一步的IP-Link</li></ol> </li><li> <p>在Fw1、Fw2配置部署VRRP备份组：</p> 
  <ol><li>Fw1、Fw2连接到ISP1的接口加入到同一VRRP备份组中，虚拟IP地址配置为ISP1的公网地址，同时启用虚拟MAC地址功能。</li><li>Fw1、Fw2连接到ISP2的接口加入到同一VRRP备份组中，虚拟IP地址配置为ISP2的公网地址，同时启用虚拟MAC地址功能。</li><li>Fw1、Fw2连接到内网的接口加入到同一VRRP备份组中，虚拟IP地址配置为内网网关地址，同时启用虚拟MAC地址功能。</li><li>因为F1作为主设备，所以Fw1的VRRP备份组的状态都设置为active。</li><li>因为F2作为备设备，所以Fw2的VRRP备份组的状态都设置为standby。</li></ol> </li></ol> 
<h5><a id="IPsec_59"></a>IPsec</h5> 
<ol><li>总部对接IPSec VPN的分公司，存在对端为 非固定公网IP和固定公网IP的情况，所以总部对接非固定公网IP的Fw3采用IPSec策略模板方式，对接固定公网IP的Fw4采用IPSec策略方式。</li><li>根据总部和分部需要互访的流量，使用高级ACL定义 需要 受IPSec VPN保护 的感兴趣流。</li><li>配置IKE提议、IPSec提议，根据用户需求配置安全参数，确保两端参数一致。</li><li>配置针对Fw3的IKE Peer。使用预共享密钥进行认证，引用IKE提议，由于对端为非固定公网IP，无需配置对端IP地址，但是需要开启NAT穿越功能。</li><li>配置针对Fw4的IKE Peer。使用预共享密钥进行认证，引用IKE提议，配置对端IP地址。</li><li>配置针对Fw3的IPsec策略模板。引用感兴趣流、IPSec提议、Fw3的IKE Peer，配置本端地址。</li><li>配置针对从ISP1和ISP2到达Fw4的2个IPsec策略。引用感兴趣流、IPSec提议、Fw4的IKE Peer，配置本端地址、对端地址。</li><li>将IPsec策略模板引用到2个IPsec策略中。切记 IPsec策略模板 的序列号 一定要大于 IPsec策略 的序列号。</li><li>分别在两个出接口调用对应的IPsec策略。</li><li>由于配置了双机热备，只需在主墙配置，配置会自动同步到备墙。</li></ol> 
<h5><a id="_72"></a>路由部署</h5> 
<ol><li>根据需求，需要配置两条缺省路由，一主一备： 
  <ol><li>主路由为去往ISP1，并绑定IP-Link “to_isp1”，实现ISP1故障时的路由快速切换。</li><li>备路由为去往ISP2。</li></ol> </li></ol> 
<h4><a id="Fw3_IP_79"></a>分公司(Fw3 动态公网IP)</h4> 
<h5><a id="IPsec_81"></a>IPsec</h5> 
<ol><li>根据总部和分部需要互访的流量，使用高级ACL定义 需要 受IPSec VPN保护 的感兴趣流。</li><li>配置IKE提议、IPSec提议，根据用户需求配置安全参数，确保两端参数一致。</li><li>配置针对总部ISP1和ISP2的两个IKE Peer。使用预共享密钥进行认证（需要与总部一致），引用IKE提议，由于本端为非固定公网IP，需要开启NAT穿越功能。在ISP1的IKE Peer中，对端IP地址为总部连接到ISP1的VRRP备份组虚拟IP地址；在ISP2的IKE Peer中，对端IP地址为总部连接到ISP2的VRRP备份组虚拟IP地址。</li><li>配置针对总部ISP1和ISP2的两个IPsec策略。引用感兴趣流、IPSec提议。对接总部ISP1的IPsec策略中，调用ISP1的IKE Peer；对接总部ISP2的IPsec策略中，调用ISP2的IKE Peer。</li><li>配置两个tunnel接口，分别为tunnel1和tunnel2，加入到与外网侧物理接口相同的安全区域中，协议类型为IPSec，同时借用外网侧接口的IP地址。Tunnel1作为主隧道，调用对接总部ISP1的IPsec策略；Tunnel2作为备隧道，调用对接总部ISP2的IPsec策略</li></ol> 
<h5><a id="IPLink_88"></a>IP-Link</h5> 
<ol><li>在Fw3上开启IP-Link探测功能，探测 总部 连接到ISP1 所在的 VRRP备份组虚拟IP地址，当发生故障时，可以及时发现故障。</li></ol> 
<h5><a id="_91"></a>路由部署</h5> 
<ol><li>配置一条到达运营商的缺省路由。</li><li>配置两条到达 总部内部网络 的路由，一主一备： 
  <ol><li>主路由：下一跳指向Tunnel1，并绑定IP-Link“to_ZongBu_isp1”，实现总部ISP1故障时的路由快速切换。</li><li>备路由：下一跳指向Tunnel2。</li></ol> </li></ol> 
<h3><a id="42__98"></a>4.2 参考命令</h3> 
<h4><a id="Fw1_99"></a>Fw1</h4> 
<pre><code class="prism language-python"><span class="token comment">#</span>
sysname Fw1

<span class="token comment">#</span>
 hrp enable
 hrp interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span> remote <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.2</span>
 hrp track interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 hrp track interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
 hrp track interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 hrp track ip<span class="token operator">-</span>link to_isp1
<span class="token comment">#</span>
ip<span class="token operator">-</span>link check enable
ip<span class="token operator">-</span>link name to_isp1
 destination <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span> mode icmp <span class="token builtin">next</span><span class="token operator">-</span>hop <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span>

<span class="token comment">#</span>
acl number <span class="token number">3000</span>
 rule <span class="token number">5</span> permit ip source <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> destination <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
acl number <span class="token number">3001</span>
 rule <span class="token number">5</span> permit ip source <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> destination <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
<span class="token comment">#</span>
ipsec proposal <span class="token number">1</span>                          
 esp authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>
 esp encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike proposal <span class="token number">1</span>
 encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
 dh group14
 authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>
 authentication<span class="token operator">-</span>method pre<span class="token operator">-</span>share
 integrity<span class="token operator">-</span>algorithm hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
 prf hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike peer to_fw4
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 remote<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>
ike peer to_fw3
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 dpd <span class="token builtin">type</span> periodic
 dpd idle<span class="token operator">-</span>time <span class="token number">10</span>
 dpd retransmit<span class="token operator">-</span>interval <span class="token number">2</span>
<span class="token comment">#</span>
ipsec policy<span class="token operator">-</span>template FenBu <span class="token number">10</span>
 security acl <span class="token number">3001</span>
 ike<span class="token operator">-</span>peer to_fw3
 proposal <span class="token number">1</span>
<span class="token comment">#</span>
ipsec policy POLICY_1 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_fw4
 proposal <span class="token number">1</span>
 tunnel local <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>
ipsec policy POLICY_1 <span class="token number">50</span> isakmp template FenBu
ipsec policy POLICY_2 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_fw4
 proposal <span class="token number">1</span>
 tunnel local <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>
 sa trigger<span class="token operator">-</span>mode auto
ipsec policy POLICY_2 <span class="token number">50</span> isakmp template FenBu

<span class="token comment">#                                         </span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>

 ip address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 vrrp vrid <span class="token number">3</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span> active
 vrrp virtual<span class="token operator">-</span>mac enable
 link<span class="token operator">-</span>group <span class="token number">1</span>
 service<span class="token operator">-</span>manage ping permit
 dhcp select interface
<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
 ip address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.248</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> active
 vrrp virtual<span class="token operator">-</span>mac enable
 link<span class="token operator">-</span>group <span class="token number">1</span>
 service<span class="token operator">-</span>manage ping permit
 ipsec policy POLICY_1

<span class="token comment">#                                         </span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 ip address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.248</span>
 vrrp vrid <span class="token number">2</span> virtual<span class="token operator">-</span>ip <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> active
 vrrp virtual<span class="token operator">-</span>mac enable
 link<span class="token operator">-</span>group <span class="token number">1</span>
 service<span class="token operator">-</span>manage ping permit
 ipsec policy POLICY_2
<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
 ip address <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 service<span class="token operator">-</span>manage ping permit

<span class="token comment">#</span>
firewall zone trust
 <span class="token builtin">set</span> priority <span class="token number">85</span>     
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token comment">#</span>
firewall zone untrust
 <span class="token builtin">set</span> priority <span class="token number">5</span>
<span class="token comment">#</span>
firewall zone dmz
 <span class="token builtin">set</span> priority <span class="token number">50</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
<span class="token comment">#</span>
firewall zone name isp1 <span class="token builtin">id</span> <span class="token number">4</span>
 <span class="token builtin">set</span> priority <span class="token number">10</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
<span class="token comment">#</span>
firewall zone name isp2 <span class="token builtin">id</span> <span class="token number">5</span>
 <span class="token builtin">set</span> priority <span class="token number">20</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
<span class="token comment">#</span>
ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> track ip<span class="token operator">-</span>link to_isp1
ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span> preference <span class="token number">70</span>

<span class="token comment">#</span>
security<span class="token operator">-</span>policy
 rule name ipsec_ike
  source<span class="token operator">-</span>zone isp1
  source<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>zone local
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  destination<span class="token operator">-</span>zone local
  source<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  source<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  source<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  service protocol udp source<span class="token operator">-</span>port <span class="token number">500</span> destination<span class="token operator">-</span>port <span class="token number">500</span>
  action permit                           
 rule name ipsec_office_FengGongSi_2
  source<span class="token operator">-</span>zone isp1
  source<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  destination<span class="token operator">-</span>zone trust
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit
 rule name ipsec_esp
  source<span class="token operator">-</span>zone isp1
  source<span class="token operator">-</span>zone isp2
  destination<span class="token operator">-</span>zone local
  destination<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  service esp
  action permit
 rule name ipsec_ike_ChanYue
  source<span class="token operator">-</span>zone isp1
  source<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>zone local                       
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  destination<span class="token operator">-</span>zone local
  service protocol udp destination<span class="token operator">-</span>port <span class="token number">500</span> <span class="token number">4500</span>
  action permit
 rule name icmp
  source<span class="token operator">-</span>zone local
  service icmp
  action permit
 rule name to_internet
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit
 rule name ipsec_office_FengGongSi_1
  source<span class="token operator">-</span>zone isp1
  source<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  destination<span class="token operator">-</span>zone trust
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit

<span class="token comment">#</span>
nat<span class="token operator">-</span>policy
 rule name no<span class="token operator">-</span>nat
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone isp1
  destination<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action no<span class="token operator">-</span>nat
 rule name to_internet
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone isp1                   
  destination<span class="token operator">-</span>zone isp2
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action source<span class="token operator">-</span>nat easy<span class="token operator">-</span>ip
<span class="token comment">#</span>
</code></pre> 
<h4><a id="Fw2_309"></a>Fw2</h4> 
<p>Fw2只配置基础命令，双机热备会同步配置</p> 
<pre><code class="prism language-python">sys
sys Fw2

interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
 ip address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.248</span>
 vrrp vrid <span class="token number">1</span> virtual<span class="token operator">-</span>ip <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> s
 vrrp virtual<span class="token operator">-</span>mac enable
 service<span class="token operator">-</span>manage ping permit 
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 ip address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.248</span>
 vrrp vrid <span class="token number">2</span> virtual<span class="token operator">-</span>ip <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> s
 vrrp virtual<span class="token operator">-</span>mac enable
 service<span class="token operator">-</span>manage ping permit 

interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
 ip add <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">24</span>
 service<span class="token operator">-</span>manage ping permit 

dhcp enable
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 undo shutdown
 ip address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.3</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 vrrp vrid <span class="token number">3</span> virtual<span class="token operator">-</span>ip <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span> s
 vrrp virtual<span class="token operator">-</span>mac enable
 service<span class="token operator">-</span>manage ping permit
 dhcp select interface


firewall zone trust
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token comment">#</span>
firewall zone dmz
 <span class="token builtin">set</span> priority <span class="token number">50</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
<span class="token comment">#</span>
firewall zone name isp1 <span class="token builtin">id</span> <span class="token number">4</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
<span class="token comment">#</span>
firewall zone name isp2 <span class="token builtin">id</span> <span class="token number">5</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
 

ipsec policy POLICY_1 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 proposal <span class="token number">1</span>
 tunnel local <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>
ipsec policy POLICY_2 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 proposal <span class="token number">1</span>
 tunnel local <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>

ip<span class="token operator">-</span>link check enable
ip<span class="token operator">-</span>link name to_isp1
 destination <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span> mode icmp <span class="token builtin">next</span><span class="token operator">-</span>hop <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span>

ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> track ip<span class="token operator">-</span>link to_isp1
ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span> preference <span class="token number">70</span>

 hrp enable
 hrp interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span> remote <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span>
</code></pre> 
<h4><a id="Fw3_374"></a>Fw3</h4> 
<pre><code class="prism language-python">sysname Fw3
<span class="token comment">#</span>
ip<span class="token operator">-</span>link check enable
ip<span class="token operator">-</span>link name to_isp1
 destination <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> mode icmp <span class="token builtin">next</span><span class="token operator">-</span>hop <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.1</span>

<span class="token comment">#</span>
acl number <span class="token number">3000</span>
 rule <span class="token number">5</span> permit ip source <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> destination <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
<span class="token comment">#</span>
ipsec proposal <span class="token number">1</span>
 esp authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>
 esp encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike proposal <span class="token number">1</span>
 encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
 dh group14
 authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>
 authentication<span class="token operator">-</span>method pre<span class="token operator">-</span>share
 integrity<span class="token operator">-</span>algorithm hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
 prf hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike peer to_isp1
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 dpd <span class="token builtin">type</span> periodic
 dpd idle<span class="token operator">-</span>time <span class="token number">10</span>
 dpd retransmit<span class="token operator">-</span>interval <span class="token number">2</span>
 remote<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>
ike peer to_isp2
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 dpd <span class="token builtin">type</span> periodic
 dpd idle<span class="token operator">-</span>time <span class="token number">10</span>
 dpd retransmit<span class="token operator">-</span>interval <span class="token number">2</span>
 remote<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                  
<span class="token comment">#</span>
ipsec policy POLICY_1 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_isp1
 proposal <span class="token number">1</span>
 sa trigger<span class="token operator">-</span>mode auto
ipsec policy POLICY_2 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_isp2
 proposal <span class="token number">1</span>
 sa trigger<span class="token operator">-</span>mode auto

<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 undo shutdown
 ip address dhcp<span class="token operator">-</span>alloc

<span class="token comment">#</span>
interface Tunnel1
 ip address unnumbered interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 tunnel<span class="token operator">-</span>protocol ipsec
 ipsec policy POLICY_1
<span class="token comment">#</span>
interface Tunnel2
 ip address unnumbered interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 tunnel<span class="token operator">-</span>protocol ipsec
 ipsec policy POLICY_2
                     
<span class="token comment">#</span>
firewall zone trust
 <span class="token builtin">set</span> priority <span class="token number">85</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
<span class="token comment">#</span>
firewall zone untrust
 <span class="token builtin">set</span> priority <span class="token number">5</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 add interface Tunnel1
 add interface Tunnel2
 
<span class="token comment">#</span>
ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
ip route<span class="token operator">-</span>static <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> Tunnel1 track ip<span class="token operator">-</span>link to_isp1
ip route<span class="token operator">-</span>static <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> Tunnel2 preference <span class="token number">70</span>

<span class="token comment">#</span>
security<span class="token operator">-</span>policy
 rule name to_internet
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit
 rule name ipsec_ike
  source<span class="token operator">-</span>zone local
  source<span class="token operator">-</span>zone untrust
  destination<span class="token operator">-</span>zone local
  destination<span class="token operator">-</span>zone untrust
  service protocol udp destination<span class="token operator">-</span>port <span class="token number">500</span> <span class="token number">4500</span>
  action permit
 rule name ipsec_office
  source<span class="token operator">-</span>zone trust
  source<span class="token operator">-</span>zone untrust
  destination<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust                
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit
 rule name icmp
  source<span class="token operator">-</span>zone local
  service icmp
  action permit

<span class="token comment">#</span>
nat<span class="token operator">-</span>policy
 rule name no<span class="token operator">-</span>nat
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">192.16</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">192.16</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action no<span class="token operator">-</span>nat
 rule name to_internet
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">192.16</span><span class="token number">.3</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action source<span class="token operator">-</span>nat easy<span class="token operator">-</span>ip


</code></pre> 
<h4><a id="Fw4_507"></a>Fw4</h4> 
<pre><code class="prism language-python">sysname fw4

<span class="token comment">#</span>
acl number <span class="token number">3000</span>
 rule <span class="token number">5</span> permit ip source <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> destination <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
<span class="token comment">#</span>
ipsec proposal <span class="token number">1</span>
 esp authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>
 esp encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike proposal <span class="token number">1</span>
 encryption<span class="token operator">-</span>algorithm aes<span class="token operator">-</span><span class="token number">256</span>
 dh group14
 authentication<span class="token operator">-</span>algorithm sha2<span class="token operator">-</span><span class="token number">256</span>        
 authentication<span class="token operator">-</span>method pre<span class="token operator">-</span>share
 integrity<span class="token operator">-</span>algorithm hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
 prf hmac<span class="token operator">-</span>sha2<span class="token operator">-</span><span class="token number">256</span>
<span class="token comment">#</span>
ike peer to_isp1
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 dpd <span class="token builtin">type</span> periodic
 dpd idle<span class="token operator">-</span>time <span class="token number">10</span>
 dpd retransmit<span class="token operator">-</span>interval <span class="token number">2</span>
 remote<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>
ike peer to_isp2
 pre<span class="token operator">-</span>shared<span class="token operator">-</span>key Huawei@<span class="token number">123</span>
 ike<span class="token operator">-</span>proposal <span class="token number">1</span>
 remote<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>
<span class="token comment">#</span>
ipsec policy POLICY_1 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_isp1
 proposal <span class="token number">1</span>
ipsec policy POLICY_2 <span class="token number">5</span> isakmp
 security acl <span class="token number">3000</span>
 ike<span class="token operator">-</span>peer to_isp2
 proposal <span class="token number">1</span>                               

<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 undo shutdown                            
 ip address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 service<span class="token operator">-</span>manage ping permit
<span class="token comment">#</span>
interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 undo shutdown
 ip address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 service<span class="token operator">-</span>manage ping permit

<span class="token comment">#</span>
interface Tunnel1
 ip address unnumbered interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 tunnel<span class="token operator">-</span>protocol ipsec
 ipsec policy POLICY_1
<span class="token comment">#</span>
interface Tunnel2
 ip address unnumbered interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 tunnel<span class="token operator">-</span>protocol ipsec
 ipsec policy POLICY_2

<span class="token comment">#</span>
firewall zone trust
 <span class="token builtin">set</span> priority <span class="token number">85</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
<span class="token comment">#</span>
firewall zone untrust
 <span class="token builtin">set</span> priority <span class="token number">5</span>
 add interface GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>       
 add interface Tunnel1
 add interface Tunnel2
<span class="token comment">#</span>
firewall zone dmz
 <span class="token builtin">set</span> priority <span class="token number">50</span>
<span class="token comment">#</span>
ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.1</span>

<span class="token comment">#</span>
security<span class="token operator">-</span>policy
 rule name to_internet
  source<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit
 rule name ipsec_ike
  source<span class="token operator">-</span>zone local
  source<span class="token operator">-</span>zone untrust
  destination<span class="token operator">-</span>zone local
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  source<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  source<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  service protocol udp source<span class="token operator">-</span>port <span class="token number">500</span> destination<span class="token operator">-</span>port <span class="token number">500</span>
  action permit
 rule name ipsec_esp
  source<span class="token operator">-</span>zone untrust
  destination<span class="token operator">-</span>zone local
  source<span class="token operator">-</span>address <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  source<span class="token operator">-</span>address <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  destination<span class="token operator">-</span>address <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span>
  service esp
  action permit
 rule name ipsec_office
  source<span class="token operator">-</span>zone trust                       
  source<span class="token operator">-</span>zone untrust
  destination<span class="token operator">-</span>zone trust
  destination<span class="token operator">-</span>zone untrust
  source<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  source<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  destination<span class="token operator">-</span>address <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> mask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
  action permit

</code></pre> 
<h4><a id="ISP1_627"></a>ISP1</h4> 
<pre><code class="prism language-python">sys
sys isp1

<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 ip add <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> <span class="token number">29</span>
<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 ip add <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">24</span>

ospf <span class="token number">10</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.1</span>
a <span class="token number">0</span>
 net <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.7</span>
 net <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>

</code></pre> 
<h4><a id="ISP2_645"></a>ISP2</h4> 
<pre><code class="prism language-python">sys
sys isp2

<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 ip add <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span> <span class="token number">29</span>
<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 ip add <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">24</span>

ospf <span class="token number">10</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">2.2</span><span class="token number">.2</span><span class="token number">.2</span>
a <span class="token number">0</span>
 net <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.7</span>
 net <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>

</code></pre> 
<h4><a id="ISP3_663"></a>ISP3</h4> 
<pre><code class="prism language-python">sys
sys isp3

<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 ip add <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">24</span>
<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 ip add <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.3</span> <span class="token number">24</span>

ospf <span class="token number">10</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">3.3</span><span class="token number">.3</span><span class="token number">.3</span>
a <span class="token number">0</span>
 net <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
 net <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>

</code></pre> 
<h4><a id="ISP4_681"></a>ISP4</h4> 
<pre><code class="prism language-python">sys
sys isp4

<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 ip add <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">24</span>
<span class="token builtin">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
 ip add <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.4</span> <span class="token number">24</span>

ospf <span class="token number">10</span> router<span class="token operator">-</span><span class="token builtin">id</span> <span class="token number">4.4</span><span class="token number">.4</span><span class="token number">.4</span>
a <span class="token number">0</span>
 net <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
 net <span class="token number">18.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>

</code></pre> 
<h4><a id="NATDevice_698"></a>NAT-Device</h4> 
<pre><code class="prism language-python">sys
sys NAT<span class="token operator">-</span>Device

acl number <span class="token number">2000</span>  
 rule <span class="token number">5</span> permit source <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>

dhcp en
 nat address<span class="token operator">-</span>group <span class="token number">1</span> <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.100</span> <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.200</span>

interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
 ip address <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
 dhcp select interface
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
 ip address <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
 nat outbound <span class="token number">2000</span> address<span class="token operator">-</span>group <span class="token number">1</span> 

ip route<span class="token operator">-</span>static <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.1</span>

</code></pre> 
<h3><a id="43__721"></a>4.3 故障测试</h3> 
<h4><a id="FW1_722"></a>FW1正常时</h4> 
<pre><code class="prism language-python">HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>display ip routing<span class="token operator">-</span>table 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">:</span><span class="token number">19.840</span> 
Route Flags<span class="token punctuation">:</span> R <span class="token operator">-</span> relay<span class="token punctuation">,</span> D <span class="token operator">-</span> download to fib
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Routing Tables<span class="token punctuation">:</span> Public
         Destinations <span class="token punctuation">:</span> <span class="token number">14</span>       Routes <span class="token punctuation">:</span> <span class="token number">14</span>       

Destination<span class="token operator">/</span>Mask    Proto   Pre  Cost      Flags NextHop         Interface

        <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">0</span>   Static  <span class="token number">60</span>   <span class="token number">0</span>          RD   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.2</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.2</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">8</span>   Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.2</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>

HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>display vrrp brief 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span><span class="token number">56.630</span> 
Total<span class="token punctuation">:</span><span class="token number">3</span>     Master<span class="token punctuation">:</span><span class="token number">3</span>     Backup<span class="token punctuation">:</span><span class="token number">0</span>     Non<span class="token operator">-</span>active<span class="token punctuation">:</span><span class="token number">0</span>      
VRID  State        Interface                Type     Virtual IP     
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">1</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>                  Vgmp     <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>      
<span class="token number">2</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>                  Vgmp     <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>       
<span class="token number">3</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>                  Vgmp     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span>     
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>display ike sa
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">29</span><span class="token punctuation">:</span><span class="token number">08.260</span> 

IKE SA information <span class="token punctuation">:</span>
 Conn<span class="token operator">-</span>ID    Peer                                          VPN              Flag<span class="token punctuation">(</span>s<span class="token punctuation">)</span>               Phase  RemoteType  RemoteID        
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
 <span class="token number">33</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">65064</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">30</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">65064</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">44</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">39</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">32</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">31</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">43</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">41</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       

  Number of IKE SA <span class="token punctuation">:</span> <span class="token number">8</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>

 Flag Description<span class="token punctuation">:</span>
 RD<span class="token operator">-</span><span class="token operator">-</span>READY   ST<span class="token operator">-</span><span class="token operator">-</span>STAYALIVE   RL<span class="token operator">-</span><span class="token operator">-</span>REPLACED   FD<span class="token operator">-</span><span class="token operator">-</span>FADING   TO<span class="token operator">-</span><span class="token operator">-</span>TIMEOUT
 HRT<span class="token operator">-</span><span class="token operator">-</span>HEARTBEAT   LKG<span class="token operator">-</span><span class="token operator">-</span>LAST KNOWN GOOD SEQ NO<span class="token punctuation">.</span>   BCK<span class="token operator">-</span><span class="token operator">-</span>BACKED UP
 M<span class="token operator">-</span><span class="token operator">-</span>ACTIVE   S<span class="token operator">-</span><span class="token operator">-</span>STANDBY   A<span class="token operator">-</span><span class="token operator">-</span>ALONE  NEG<span class="token operator">-</span><span class="token operator">-</span>NEGOTIATING

HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>display ipsec sa brief
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">29</span><span class="token punctuation">:</span><span class="token number">26.490</span> 

IPSec SA information<span class="token punctuation">:</span>
   Src address                             Dst address                             SPI
   VPN                                     Protocol                                Algorithm
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">196662029</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">194138009</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">200362542</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">194760684</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">185700354</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">197910612</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">190270246</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">194466263</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128

  Number of IPSec SA <span class="token punctuation">:</span> <span class="token number">8</span>
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>

</code></pre> 
<h5><a id="PC1_815"></a>PC1测试</h5> 
<pre><code class="prism language-python">PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span>

Ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
Request timeout!
Request timeout!
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">3</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">40.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">83</span><span class="token operator">/</span><span class="token number">94</span> ms

PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span>

Ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
Request timeout!
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">109</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">79</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">4</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">20.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">86</span><span class="token operator">/</span><span class="token number">109</span> ms

PC<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="isp1_855"></a>isp1链路故障模拟</h4> 
<h5><a id="ISP1_856"></a>关闭ISP1接口</h5> 
<pre><code class="prism language-python"><span class="token punctuation">[</span>isp1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>shutdown 
</code></pre> 
<h5><a id="Fw1_862"></a>Fw1成为备墙</h5> 
<pre><code class="prism language-python">HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HEALTHCHECK<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>DOWN<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">93</span><span class="token punctuation">]</span><span class="token punctuation">:</span>Detect changed status to down <span class="token punctuation">(</span>Protocol<span class="token operator">=</span>icmp<span class="token punctuation">,</span>DestinationIp<span class="token operator">=</span><span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span><span class="token punctuation">,</span>DestinationPort<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HRPI<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>PRIORITY_CHANGE<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">94</span><span class="token punctuation">]</span><span class="token punctuation">:</span>The priority of the local VGMP group changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>change_reason<span class="token operator">=</span><span class="token string">"The IP-link went Down."</span><span class="token punctuation">,</span> local_old_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">,</span> local_new_priority<span class="token operator">=</span><span class="token number">44998</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HEALTHCHECK<span class="token operator">/</span><span class="token number">3</span><span class="token operator">/</span>DOWN<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IP<span class="token operator">-</span>Link to_isp1 changed status to down <span class="token punctuation">(</span>Protocol<span class="token operator">=</span>icmp<span class="token punctuation">,</span>DestinationIp<span class="token operator">=</span><span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span><span class="token punctuation">,</span>DestinationPort<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 HEALTHCHECK<span class="token operator">/</span><span class="token number">2</span><span class="token operator">/</span>DOWN<span class="token punctuation">:</span>OID <span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.45</span><span class="token number">.2</span><span class="token number">.2</span> IP<span class="token operator">-</span>link to_isp1 changes status to down<span class="token punctuation">.</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 HRPI<span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">:</span><span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.51</span><span class="token number">.2</span><span class="token number">.2</span><span class="token number">.1</span> The HRP core state changed due to <span class="token string">"Ip-link change to Down"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>normal<span class="token punctuation">,</span>new_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>standby<span class="token punctuation">)</span><span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">44998</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">96</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Delete<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">97</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Add<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">34</span><span class="token punctuation">:</span><span class="token number">52</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HRPI<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">98</span><span class="token punctuation">]</span><span class="token punctuation">:</span>The HRP core state changed due to <span class="token string">"Ip-link change to Down"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>normal<span class="token punctuation">,</span> new_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>standby<span class="token punctuation">)</span><span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">44998</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
HRP_S<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
</code></pre> 
<h5><a id="Fw2_877"></a>Fw2成为主墙</h5> 
<pre><code class="prism language-python">HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display ip routing<span class="token operator">-</span>table 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">35</span><span class="token punctuation">:</span><span class="token number">47.240</span> 
Route Flags<span class="token punctuation">:</span> R <span class="token operator">-</span> relay<span class="token punctuation">,</span> D <span class="token operator">-</span> download to fib
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Routing Tables<span class="token punctuation">:</span> Public
         Destinations <span class="token punctuation">:</span> <span class="token number">14</span>       Routes <span class="token punctuation">:</span> <span class="token number">14</span>       

Destination<span class="token operator">/</span>Mask    Proto   Pre  Cost      Flags NextHop         Interface

        <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">0</span>   Static  <span class="token number">70</span>   <span class="token number">0</span>          RD   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.3</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.3</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.3</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.3</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.2</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">8</span>   Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.3</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.3</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>

HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display ip<span class="token operator">-</span>link 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">35</span><span class="token punctuation">:</span><span class="token number">52.990</span> 
Current Total Ip<span class="token operator">-</span>link Number <span class="token punctuation">:</span> <span class="token number">1</span>
Name                              Member   State   Up<span class="token operator">/</span>Down<span class="token operator">/</span>Init
to_isp1                           <span class="token number">1</span>        down    <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">0</span>   
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display ike sa
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">00.940</span> 

IKE SA information <span class="token punctuation">:</span>
 Conn<span class="token operator">-</span>ID    Peer                                          VPN              Flag<span class="token punctuation">(</span>s<span class="token punctuation">)</span>               Phase  RemoteType  RemoteID        
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
 <span class="token number">22</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">21</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">20</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">19</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">18</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">17</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       

  Number of IKE SA <span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>

 Flag Description<span class="token punctuation">:</span>
 RD<span class="token operator">-</span><span class="token operator">-</span>READY   ST<span class="token operator">-</span><span class="token operator">-</span>STAYALIVE   RL<span class="token operator">-</span><span class="token operator">-</span>REPLACED   FD<span class="token operator">-</span><span class="token operator">-</span>FADING   TO<span class="token operator">-</span><span class="token operator">-</span>TIMEOUT
 HRT<span class="token operator">-</span><span class="token operator">-</span>HEARTBEAT   LKG<span class="token operator">-</span><span class="token operator">-</span>LAST KNOWN GOOD SEQ NO<span class="token punctuation">.</span>   BCK<span class="token operator">-</span><span class="token operator">-</span>BACKED UP
 M<span class="token operator">-</span><span class="token operator">-</span>ACTIVE   S<span class="token operator">-</span><span class="token operator">-</span>STANDBY   A<span class="token operator">-</span><span class="token operator">-</span>ALONE  NEG<span class="token operator">-</span><span class="token operator">-</span>NEGOTIATING

HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display vrrp brief 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">23.660</span> 
Total<span class="token punctuation">:</span><span class="token number">3</span>     Master<span class="token punctuation">:</span><span class="token number">3</span>     Backup<span class="token punctuation">:</span><span class="token number">0</span>     Non<span class="token operator">-</span>active<span class="token punctuation">:</span><span class="token number">0</span>      
VRID  State        Interface                Type     Virtual IP     
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">1</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>                  Vgmp     <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>      
<span class="token number">2</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>                  Vgmp     <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>       
<span class="token number">3</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>                  Vgmp     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span>     
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display ipsec sa brief 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">09.140</span> 

IPSec SA information<span class="token punctuation">:</span>
   Src address                             Dst address                             SPI
   VPN                                     Protocol                                Algorithm
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">196406332</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">200362542</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">185700354</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">197910612</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">190270246</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">200558179</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128

  Number of IPSec SA <span class="token punctuation">:</span> <span class="token number">6</span>
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>display hrp state 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">36</span><span class="token punctuation">:</span><span class="token number">41.460</span> 
 Role<span class="token punctuation">:</span> active<span class="token punctuation">,</span> peer<span class="token punctuation">:</span> standby <span class="token punctuation">(</span>should be <span class="token string">"standby-active"</span><span class="token punctuation">)</span>
 Running priority<span class="token punctuation">:</span> <span class="token number">45000</span><span class="token punctuation">,</span> peer<span class="token punctuation">:</span> <span class="token number">44998</span>
 Backup channel usage<span class="token punctuation">:</span> <span class="token number">0.00</span><span class="token operator">%</span>
 Stable time<span class="token punctuation">:</span> <span class="token number">0</span> days<span class="token punctuation">,</span> <span class="token number">0</span> hours<span class="token punctuation">,</span> <span class="token number">3</span> minutes
 Last state change information<span class="token punctuation">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">3</span><span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">:</span><span class="token number">36</span> HRP core state changed<span class="token punctuation">,</span> old_state <span class="token operator">=</span> normal<span class="token punctuation">,</span> new_state <span class="token operator">=</span> abnormal<span class="token punctuation">(</span>active<span class="token punctuation">)</span><span class="token punctuation">,</span> local_priority <span class="token operator">=</span> <span class="token number">45000</span><span class="token punctuation">,</span> peer_priority <span class="token operator">=</span> <span class="token number">44998.</span>

HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="PC1_979"></a>PC1测试</h5> 
<pre><code class="prism language-python">PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span>

Ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
Request timeout!
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">4</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">20.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">90</span><span class="token operator">/</span><span class="token number">94</span> ms

PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span>

Ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
Request timeout!
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">125</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">110</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">78</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">93</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">4</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">20.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">101</span><span class="token operator">/</span><span class="token number">125</span> ms

PC<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="isp1_1017"></a>isp1链路故障恢复</h4> 
<h5><a id="ISP1_1018"></a>恢复ISP1接口</h5> 
<pre><code class="prism language-python"><span class="token punctuation">[</span>isp1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>undo shutdown 
</code></pre> 
<h5><a id="Fw1_1023"></a>Fw1成为主墙</h5> 
<pre><code class="prism language-python">HRP_S<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_S<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">22</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HRPI<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>PRIORITY_CHANGE<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">:</span>The priority of the local VGMP group changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>change_reason<span class="token operator">=</span><span class="token string">"The IP-link went Up."</span><span class="token punctuation">,</span> local_old_priority<span class="token operator">=</span><span class="token number">44998</span><span class="token punctuation">,</span> local_new_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">22</span> Fw1 HEALTHCHECK<span class="token operator">/</span><span class="token number">6</span><span class="token operator">/</span>UP<span class="token punctuation">:</span>OID <span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.45</span><span class="token number">.2</span><span class="token number">.1</span> IP<span class="token operator">-</span>link to_isp1 changes status to up<span class="token punctuation">.</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">22</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Add<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">22</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Delete<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
HRP_S<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">44</span><span class="token punctuation">:</span><span class="token number">23</span> Fw1 HRPI<span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">:</span><span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.51</span><span class="token number">.2</span><span class="token number">.2</span><span class="token number">.1</span> The HRP core state changed due to <span class="token string">"Ip-link change to UP"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>standby<span class="token punctuation">)</span><span class="token punctuation">,</span>new_state<span class="token operator">=</span>normal<span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">44</span><span class="token punctuation">:</span><span class="token number">23</span> Fw1 <span class="token operator">%</span><span class="token operator">%</span>01HRPI<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">102</span><span class="token punctuation">]</span><span class="token punctuation">:</span>The HRP core state changed due to <span class="token string">"Ip-link change to UP"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>standby<span class="token punctuation">)</span><span class="token punctuation">,</span> new_state<span class="token operator">=</span>normal<span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>
HRP_M<span class="token punctuation">[</span>Fw1<span class="token punctuation">]</span>

HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>display ip routing<span class="token operator">-</span>table 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">04</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">14.320</span> 
Route Flags<span class="token punctuation">:</span> R <span class="token operator">-</span> relay<span class="token punctuation">,</span> D <span class="token operator">-</span> download to fib
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
Routing Tables<span class="token punctuation">:</span> Public
         Destinations <span class="token punctuation">:</span> <span class="token number">14</span>       Routes <span class="token punctuation">:</span> <span class="token number">14</span>       

Destination<span class="token operator">/</span>Mask    Proto   Pre  Cost      Flags NextHop         Interface

        <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">0</span>   Static  <span class="token number">60</span>   <span class="token number">0</span>          RD   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.2</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.2</span>        GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
       <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">100.1</span><span class="token number">.1</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">8</span>   Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       InLoopBack0
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">29</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.2</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
      <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span>  Direct  <span class="token number">0</span>    <span class="token number">0</span>           D   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>       GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>

HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>display ip<span class="token operator">-</span>link 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">04</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">19.270</span> 
Current Total Ip<span class="token operator">-</span>link Number <span class="token punctuation">:</span> <span class="token number">1</span>
Name                              Member   State   Up<span class="token operator">/</span>Down<span class="token operator">/</span>Init
to_isp1                           <span class="token number">1</span>        up      <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">0</span>   
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>display vrrp brief 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">04</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">22.630</span> 
Total<span class="token punctuation">:</span><span class="token number">3</span>     Master<span class="token punctuation">:</span><span class="token number">3</span>     Backup<span class="token punctuation">:</span><span class="token number">0</span>     Non<span class="token operator">-</span>active<span class="token punctuation">:</span><span class="token number">0</span>      
VRID  State        Interface                Type     Virtual IP     
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token number">1</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>                  Vgmp     <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>      
<span class="token number">2</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>                  Vgmp     <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>       
<span class="token number">3</span>     Master       GE1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>                  Vgmp     <span class="token number">10.1</span><span class="token number">.1</span><span class="token number">.254</span>     
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span> 
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>dis
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>display ike sa
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">04</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">26.730</span> 

IKE SA information <span class="token punctuation">:</span>
 Conn<span class="token operator">-</span>ID    Peer                                          VPN              Flag<span class="token punctuation">(</span>s<span class="token punctuation">)</span>               Phase  RemoteType  RemoteID        
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
 <span class="token number">54</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">23849</span>                                              RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">47</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">23849</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">52</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">45</span>         <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span><span class="token punctuation">:</span><span class="token number">64552</span>                                              RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">201.1</span><span class="token number">.1</span><span class="token number">.254</span>     
 <span class="token number">51</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">39</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">53</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>ST<span class="token operator">|</span>M               v2<span class="token punctuation">:</span><span class="token number">2</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       
 <span class="token number">49</span>         <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token punctuation">:</span><span class="token number">500</span>                                                  RD<span class="token operator">|</span>M                  v2<span class="token punctuation">:</span><span class="token number">1</span>   IP          <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>       

  Number of IKE SA <span class="token punctuation">:</span> <span class="token number">8</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>

 Flag Description<span class="token punctuation">:</span>
 RD<span class="token operator">-</span><span class="token operator">-</span>READY   ST<span class="token operator">-</span><span class="token operator">-</span>STAYALIVE   RL<span class="token operator">-</span><span class="token operator">-</span>REPLACED   FD<span class="token operator">-</span><span class="token operator">-</span>FADING   TO<span class="token operator">-</span><span class="token operator">-</span>TIMEOUT
 HRT<span class="token operator">-</span><span class="token operator">-</span>HEARTBEAT   LKG<span class="token operator">-</span><span class="token operator">-</span>LAST KNOWN GOOD SEQ NO<span class="token punctuation">.</span>   BCK<span class="token operator">-</span><span class="token operator">-</span>BACKED UP
 M<span class="token operator">-</span><span class="token operator">-</span>ACTIVE   S<span class="token operator">-</span><span class="token operator">-</span>STANDBY   A<span class="token operator">-</span><span class="token operator">-</span>ALONE  NEG<span class="token operator">-</span><span class="token operator">-</span>NEGOTIATING

HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>display ipsec sa brief 
<span class="token number">2023</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">04</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span><span class="token number">45.770</span> 

IPSec SA information<span class="token punctuation">:</span>
   Src address                             Dst address                             SPI
   VPN                                     Protocol                                Algorithm
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">185561417</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">189671080</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">184812195</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">199431858</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">198882347</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">200.1</span><span class="token number">.1</span><span class="token number">.198</span>                             <span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.1</span>                                <span class="token number">199012368</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">195484779</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128
   <span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.1</span>                               <span class="token number">205.1</span><span class="token number">.1</span><span class="token number">.2</span>                               <span class="token number">194413064</span> 
                                           ESP                                     E<span class="token punctuation">:</span>AES<span class="token operator">-</span><span class="token number">256</span> A<span class="token punctuation">:</span>SHA2_256_128

  Number of IPSec SA <span class="token punctuation">:</span> <span class="token number">8</span>
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw1<span class="token operator">&gt;</span>

</code></pre> 
<h5><a id="Fw2_1137"></a>Fw2成为备墙</h5> 
<pre><code class="prism language-python">HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token number">09</span> Fw2 HEALTHCHECK<span class="token operator">/</span><span class="token number">6</span><span class="token operator">/</span>UP<span class="token punctuation">:</span>OID <span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.45</span><span class="token number">.2</span><span class="token number">.1</span> IP<span class="token operator">-</span>link to_isp1 changes status to up<span class="token punctuation">.</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token number">09</span> Fw2 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Add<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">202.2</span><span class="token number">.2</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token number">09</span> Fw2 <span class="token operator">%</span><span class="token operator">%</span>01RM<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>IPV4_DEFT_RT_CHG<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>IPV4 default Route <span class="token keyword">is</span> changed<span class="token punctuation">.</span> <span class="token punctuation">(</span>ChangeType<span class="token operator">=</span>Delete<span class="token punctuation">,</span> InstanceId<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Protocol<span class="token operator">=</span>Static<span class="token punctuation">,</span> ExitIf<span class="token operator">=</span>GigabitEthernet1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">,</span> Nexthop<span class="token operator">=</span><span class="token number">40.1</span><span class="token number">.1</span><span class="token number">.6</span><span class="token punctuation">,</span> Neighbour<span class="token operator">=</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">,</span> Preference<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> Label<span class="token operator">=</span>NULL<span class="token punctuation">,</span> Metric<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_M<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">07</span> Fw2 HRPI<span class="token operator">/</span><span class="token number">1</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">:</span><span class="token number">1.3</span><span class="token number">.6</span><span class="token number">.1</span><span class="token number">.4</span><span class="token number">.1</span><span class="token number">.2011</span><span class="token number">.6</span><span class="token number">.122</span><span class="token number">.51</span><span class="token number">.2</span><span class="token number">.2</span><span class="token number">.1</span> The HRP core state changed due to <span class="token string">"Unknown"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>active<span class="token punctuation">)</span><span class="token punctuation">,</span>new_state<span class="token operator">=</span>normal<span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
Dec  <span class="token number">8</span> <span class="token number">2023</span> <span class="token number">03</span><span class="token punctuation">:</span><span class="token number">43</span><span class="token punctuation">:</span><span class="token number">07</span> Fw2 <span class="token operator">%</span><span class="token operator">%</span>01HRPI<span class="token operator">/</span><span class="token number">4</span><span class="token operator">/</span>CORE_STATE<span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span>The HRP core state changed due to <span class="token string">"Unknown"</span><span class="token punctuation">.</span> <span class="token punctuation">(</span>old_state<span class="token operator">=</span>abnormal<span class="token punctuation">(</span>active<span class="token punctuation">)</span><span class="token punctuation">,</span> new_state<span class="token operator">=</span>normal<span class="token punctuation">,</span> local_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">,</span> peer_priority<span class="token operator">=</span><span class="token number">45000</span><span class="token punctuation">)</span>
HRP_S<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
HRP_S<span class="token operator">&lt;</span>Fw2<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="PC1_1156"></a>PC1测试</h5> 
<pre><code class="prism language-python">PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span>

Ping <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">1</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">93</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">63</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">110</span> ms
From <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">0.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">63</span><span class="token operator">/</span><span class="token number">90</span><span class="token operator">/</span><span class="token number">110</span> ms

PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>
PC<span class="token operator">&gt;</span>ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span>

Ping <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token number">32</span> data <span class="token builtin">bytes</span><span class="token punctuation">,</span> Press Ctrl_C to <span class="token keyword">break</span>
Request timeout!
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">2</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">109</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">3</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">63</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">4</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">93</span> ms
From <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token operator">=</span><span class="token number">32</span> seq<span class="token operator">=</span><span class="token number">5</span> ttl<span class="token operator">=</span><span class="token number">126</span> time<span class="token operator">=</span><span class="token number">94</span> ms

<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.10</span> ping statistics <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
  <span class="token number">5</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> transmitted
  <span class="token number">4</span> packet<span class="token punctuation">(</span>s<span class="token punctuation">)</span> received
  <span class="token number">20.00</span><span class="token operator">%</span> packet loss
  <span class="token builtin">round</span><span class="token operator">-</span>trip <span class="token builtin">min</span><span class="token operator">/</span>avg<span class="token operator">/</span><span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">89</span><span class="token operator">/</span><span class="token number">109</span> ms

PC<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="44__1196"></a>4.4 流量走向诉求描述</h3> 
<ol><li> <p>当FW1 连接 ISP1 <strong>链路</strong>故障 <strong>或者 设备故障</strong>，但是 ISP1 未故障。可以通过VRRP感知故障，并联动双机热备 触发防火墙主备切换，即Fw2成为主墙。此时FW2上 主用缺省路由 绑定的 ip-link isp1并未感知ISP1网络出现故障，流量通过去往ISP1的G0/0/3口转发，且通过双机热备技术 同步状态会话表项，保证业务不中断。</p> </li><li> <p>当FW1 连接 ISP1 链路未故障，但是 <strong>ISP1 故障</strong>。可以通过IP-Link感知故障，并联动双机热备 触发防火墙主备切换，即Fw2成为主墙。此时FW2上 主用缺省路由 绑定的 ip-link isp1感知ISP1网络出现故障，流量通过去往ISP2的G0/0/5口转发，且通过双机热备技术 同步状态会话表项，保证业务不中断。</p> </li><li> <p>当FW1 <strong>设备故障</strong>，但是 <strong>ISP1 故障</strong>。可以通过VRRP感知故障，并联动双机热备 触发防火墙主备切换，即Fw2成为主墙。此时FW2上 主用缺省路由 绑定的 ip-link isp1感知ISP1网络出现故障，流量通过去往ISP2的G0/0/5口转发，且通过双机热备技术 同步状态会话表项，保证业务不中断。</p> </li><li> <p>当FW1 连接 ISP1 链路恢复，ISP1 恢复。可以通过VRRP、IP-Link感知故障恢复，触发防火墙以及浮动缺省路由主备回切，流量通过FW1的G0/0/3接口转发，且通过双机热备技术 同步状态会话表项，保证业务不中断。</p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41999534e40047da6ce11b27d2b74f9c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Effective C&#43;&#43;(七):inline关键字, 降低文件间依存关系</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c81158b7bf835bb4c1563e673022547/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">记一次堆内外内存问题的排查和优化</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>