<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue 使用高德地图插件 vue-amap文章 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue 使用高德地图插件 vue-amap文章" />
<meta property="og:description" content="账号注册
===========
首先得成为高德地图开发者，也就是说你的拥有一个账号，当然有公司账号最好，没有就暂时自己先注册一个。
注册好后，点开控制台，右上角创建一个新应用，选好你需要的环境，vue的话估计基本都是web端吧，然后就可以看到你的开发需要的key了
高德地图插件安装 首先说明，这里示例项目使用vue-cli3脚手架，不熟悉的可以先去看看vue-cli3创建项目相关。
npm安装vue-amap
npm install vue-amap --save
页面引入与组件配置 我这里的项目因为多个地方都会用的地图，所以将地图这一块抽离出来做一个单独的组件，并且是全局组件，方便页面引用
创建全局组件AMap
创建全局地图组件文件AMap.vue以及全局组件配置文件globalComponents.js
项目目录结构如图所示
main.js页面引入vue-amap以及globalComponents.js
import Vue from ‘vue’
import App from ‘./App.vue’
import router from ‘./router’
import store from ‘./store’
import globalComponents from ‘./assets/commonJs/globalComponents’ //全局组件配置文件
import VueAMap from ‘vue-amap’; // 高德地图
import {AMapKey} from ‘./assets/commonJs/constDatas’//AMapKey是高德地图开发key，我这里放到了一个专门的文件管理，你也可以不必这样做。
Vue.use(VueAMap) //插件使用声明
Vue.use(globalComponents) //插件使用声明
//下面是vue-amap初始化，请将AMapKey换成你自己的key
VueAMap.initAMapApiLoader({
key:AMapKey, plugin: \[&#39;AMap.Autocomplete&#39;, &#39;AMap.PlaceSearch&#39;, &#39;AMap.Scale&#39;, &#39;AMap.OverView&#39;, &#39;AMap.ToolBar&#39;, &#39;AMap.MapType&#39;, &#39;AMap.PolyEditor&#39;, &#39;AMap.CircleEditor&#39;, &#39;AMap.Geolocation&#39;, \], v: &#39;1.4.4&#39; })" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a33bb379e436f95860512f7ebe58a2cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-16T01:20:06+08:00" />
<meta property="article:modified_time" content="2023-12-16T01:20:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue 使用高德地图插件 vue-amap文章</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>账号注册</strong></p> 
<p>===========</p> 
<p>首先得成为高德地图开发者，也就是说你的拥有一个账号，当然有公司账号最好，没有就暂时自己先注册一个。</p> 
<p>注册好后，点开控制台，右上角创建一个新应用，选好你需要的环境，vue的话估计基本都是web端吧，然后就可以看到你的开发需要的key了</p> 
<p><img src="https://images2.imgbox.com/ba/e4/67PhxDWd_o.png" alt=""></p> 
<h2><a id="_16"></a><strong>高德地图插件安装</strong></h2> 
<p>首先说明，这里示例项目使用vue-cli3脚手架，不熟悉的可以先去看看vue-cli3创建项目相关。</p> 
<p>npm安装vue-amap</p> 
<blockquote> 
 <p>npm install vue-amap --save</p> 
</blockquote> 
<h3><a id="_25"></a>页面引入与组件配置</h3> 
<p>我这里的项目因为多个地方都会用的地图，所以将地图这一块抽离出来做一个单独的组件，并且是全局组件，方便页面引用</p> 
<p>创建全局组件AMap</p> 
<p>创建全局地图组件文件AMap.vue以及全局组件配置文件globalComponents.js</p> 
<p>项目目录结构如图所示</p> 
<p><img src="https://images2.imgbox.com/d7/e5/tWPKD6t7_o.png" alt=""></p> 
<p>main.js页面引入vue-amap以及globalComponents.js</p> 
<hr> 
<blockquote> 
 <p>import Vue from ‘vue’</p> 
 <p>import App from ‘./App.vue’</p> 
 <p>import router from ‘./router’</p> 
 <p>import store from ‘./store’</p> 
 <p>import globalComponents from ‘./assets/commonJs/globalComponents’ //全局组件配置文件</p> 
 <p>import VueAMap from ‘vue-amap’; // 高德地图</p> 
 <p>import {AMapKey} from ‘./assets/commonJs/constDatas’//AMapKey是高德地图开发key，我这里放到了一个专门的文件管理，你也可以不必这样做。</p> 
 <p>Vue.use(VueAMap) //插件使用声明</p> 
 <p>Vue.use(globalComponents) //插件使用声明</p> 
 <p>//下面是vue-amap初始化，请将AMapKey换成你自己的key</p> 
 <p>VueAMap.initAMapApiLoader({<!-- --></p> 
 <pre><code>key:AMapKey,

plugin: \['AMap.Autocomplete', 'AMap.PlaceSearch', 'AMap.Scale', 'AMap.OverView', 'AMap.ToolBar', 'AMap.MapType', 'AMap.PolyEditor', 'AMap.CircleEditor', 'AMap.Geolocation', \],

v: '1.4.4'
</code></pre> 
 <p>})</p> 
 <p>Vue.config.productionTip = false</p> 
 <p>new Vue({<!-- --></p> 
 <p>router,</p> 
 <p>store,</p> 
 <p>render: h =&gt; h(App)</p> 
 <p>}).$mount(‘#app’)</p> 
</blockquote> 
<p>配置AMap为全局组件</p> 
<hr> 
<p>在globalComponents.js文件中</p> 
<blockquote> 
 <p>import AMap from ‘…/…/globalComponents/AMap/AMap’; //高德地图组件</p> 
 <p>export default {<!-- --></p> 
 <p>install(Vue) {<!-- --></p> 
 <pre><code>  Vue.component('AMap', AMap)
</code></pre> 
 <p>}</p> 
 <p>};</p> 
</blockquote> 
<p>AMap页面实现</p> 
<hr> 
<p><strong>**这里强调一下，想要使用好vue-amap，首先得在页面引入AMap地图标签创建地图实例，后面才可以使用相应的API，有些小伙伴可能并不需要展示地图，只是想使用某个API,比如根据经纬度获取地址，所以在main.js中配置好后就迫不及待的去相应的页面来这么一段</strong></p> 
<blockquote> 
 <p><strong>AMap.plugin(‘AMap.Geocoder’, ()=&gt; {<!-- --></strong></p> 
 <p><strong>let geocoder = new AMap.Geocoder({<!-- --></strong></p> 
 <p><strong>// city 指定进行编码查询的城市，支持传入城市名、adcode 和 citycode</strong></p> 
 <p><strong>city:citycode</strong></p> 
 <p><strong>})</strong></p> 
 <p><strong>geocoder.getAddress([lng,lat], (status, result)=&gt; {<!-- --></strong></p> 
 <p><strong>…</strong></p> 
 <p><strong>})</strong></p> 
</blockquote> 
<p><strong>**</strong></p> 
<p><strong>然后你看到可能就是下面这种</strong></p> 
<p><img src="https://images2.imgbox.com/c2/45/Rq1OlZoq_o.png" alt=""></p> 
<p>还有你可能直接在页面引入，比如这样 import AMap from ‘vue-amap’，然后你很可能看到下面这样的报错。</p> 
<p><img src="https://images2.imgbox.com/a8/fa/HPerwClL_o.png" alt=""></p> 
<p>其他废话不多说了，总之必须得先在html部分用标签创建好实例，其他API才可以使用。废话不多说，上代码，先看html部分</p> 
<blockquote> 
 <pre><code>&lt;div class="amapBox" :style="{height}"&gt;

    &lt;el-amap class="amap-box" :vid="'amap-vue'" :plugin="plugin" :center="mapCenter" :events="events" ref="map"&gt;

        &lt;el-amap-marker

                vid="component-marker"

                :position="markPosition"

                :icon="require('../../assets/images/mapMark.png')"

                :draggable="true"

                :raiseOnDrag="true"

                :events="markEvents"

        &gt;&lt;/el-amap-marker&gt;

    &lt;/el-amap&gt;

&lt;/div&gt;
</code></pre> 
</blockquote> 
<p>el-amap即vue-amap创建实例的标签，class不用说，vid照写就好，是地图组件id，另外plugin是地图插件配置，center是地图的中心位置，events是事件</p> 
<p>el-amap-marker是地图标记标签，其中position是标签位置，icon是标记图标，可以使用网络图片或者本地图片，本地图片请使用require引入，draggable表示是否可以拖动标记，events是事件</p> 
<blockquote> 
  
</blockquote> 
<p>下面css部分，高德地图组件本身默认没有宽高，需要继承父级的宽高，所以需要给el-map标签父级设置宽高</p> 
<pre><code>&gt; &lt;style scoped lang="less"&gt;
&gt; 
&gt;     .amapBox{
&gt; 
&gt;         width:100%;
&gt; 
&gt;     }
&gt; 
&gt; &lt;/style&gt;
</code></pre> 
<p>地图组件已经完成，可以愉快的调用了</p> 
<h2><a id="AMap_546"></a>父组件调用AMap组件</h2> 
<p>AMap已经配置为全局组件，所以本页面可以直接使用，不再需要引入和注册组件</p> 
<blockquote> 
 <pre><code>&lt;div class="mapBox columnStart"&gt;

    &lt;div class="mapSearchBox rowStart"&gt;

        

        &lt;input placeholder="搜索地点" class="mapInput" v-model="searchName" @input="searchAddress"/&gt;

    &lt;/div&gt;

    &lt;AMap @getAddressInfo="getAddressInfo" ref="amapComponent"/&gt;

    &lt;ul class="mapAddressBox"&gt;

        &lt;li class="rowBtween mapAddressLi" v-for="(address,index) in addresses" :key="index" @click="chooseAddress(index)"&gt;

            &lt;div class="addressBox columnStart"&gt;

                &lt;div class="addressName"&gt;{<!-- -->{address.name}}&lt;/div&gt;

                &lt;span class="detailAddress gray999"&gt;{<!-- -->{address.formattedAddress}}&lt;/span&gt;

            &lt;/div&gt;

            &lt;van-icon name="success" color="#4491FA" size="18" v-if="activeIndex===index"/&gt;

        &lt;/li&gt;

    &lt;/ul&gt;

&lt;/div&gt;
</code></pre> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b222b89282fcd5195ab21abdea94cf4a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【7】基于多设计模式下的同步&amp;异步日志系统-代码设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/714b09416450243381fc075af962e6ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Github 2023-12-16开源项目日报Top10</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>