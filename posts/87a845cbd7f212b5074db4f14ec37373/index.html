<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>day8 STM32数据搬运工 - DMA - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="day8 STM32数据搬运工 - DMA" />
<meta property="og:description" content="DMA简介 DMA，全称为：Direct Memory Access，即直接存储器访问。
DMA 传输方式无需 CPU 直接控制传输，也没有中断处理方式那样保留现场和恢复现场的过程，通过硬件为 RAM 与 I/O 设备开辟一条直接传送数据的通路，能使 CPU 的效率大为提高。
DMA功能框图和特性 5个独立的可配置通道，每个通道都直接连接专用的硬件DMA请求；在同一个DMA模块上，多个请求间的优先权可以通过软件编程设置（共有四级：超高、高、中、低）；独立数据 源和目标 数据区的传输宽度（字节、半字节、全字）源和目标 地址必须按数据宽度对齐；支持循环的缓冲器管理；每个通道有3个事件标志（DMA版传输、DMA传输完成和DMA传输出错）；存储器和存储器间的传输；外设到存储器和存储器到外设，外设到外设间的传输；闪存、SRAM、APB、AHB外设均可作为访问的 源和目标；可编程的数据传输数目：最大为65536 STM32F0-DMA通道 注：可修改SYSCFG_CFGR1来配置通道的映射关系。
DMA通道优先级 仲裁器根据优先级管理着通道的请求和启动外设 / 存储器的访问；
优先级管理分两个方面：
软件方面：可通过DMA_CCRX寄存器配置每个通道的优先级，优先级分为4各等级：
最高等级；
高优先级；
中等优先级；
低优先级；
硬件方面：如果2个请求有相同的软件优先级，则较低编号的通道比较高编号的通道有较高的优先权。例如：通道2优先于通道4.
STM32F0-DMA传输 DMA增量设置 通过设置DMA_CCRx寄存器中的PINC和MINC标志位，外设和存储器的指针在每次传输后可以有选择的完成自动增量当设置为增量模式时，下一个要传输的地址将是签一个地址加上增量值，增量值取决于所选的数据宽度为1、2或4。 DMA循环模式 循环模式用于处理循环缓冲区和连续的数据传输（如ADC的扫描模式）。在DMA_CCRx寄存器中的CIRC位用于开启这一功能。当启动了循环模式，一组的数据传输完成时，计数寄存器将会自动的被恢复成配置该通道是设置的初值，DMA操作将会继续进行。 STM32F0-DMA中断 每一个DMA通道都可以在DMA传输过半、传输完成和传输出错时产生中断。为应用的灵活性考虑，通过设置寄存器的不同位来打开这些中断。
注：这些标志位都在中断状态寄存器DMA_ISR中设置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/87a845cbd7f212b5074db4f14ec37373/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-15T14:38:12+08:00" />
<meta property="article:modified_time" content="2023-08-15T14:38:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">day8 STM32数据搬运工 - DMA</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>DMA简介</h2> 
<p>DMA，全称为：Direct Memory Access，即直接存储器访问。</p> 
<p>DMA 传输方式无需 CPU 直接控制传输，也没有中断处理方式那样保留现场和恢复现场的过程，通过硬件为 RAM 与 I/O 设备开辟一条直接传送数据的通路，能使 CPU 的效率大为提高。<br><img alt="" height="589" src="https://images2.imgbox.com/50/d0/kRBL6W9M_o.png" width="1200"></p> 
<h2> DMA功能框图和特性</h2> 
<ul><li>5个独立的可配置通道，每个通道都直接连接专用的硬件DMA请求；</li><li>在同一个DMA模块上，多个请求间的优先权可以通过软件编程设置（共有四级：超高、高、中、低）；</li><li>独立数据<span style="background-color:#ffd900;"> 源和目标 </span>数据区的传输宽度（字节、半字节、全字）源和目标 地址必须按数据宽度对齐；</li><li>支持循环的缓冲器管理；</li><li>每个通道有3个事件标志（DMA版传输、DMA传输完成和DMA传输出错）；</li><li>存储器和存储器间的传输；</li><li>外设到存储器和存储器到外设，外设到外设间的传输；</li><li>闪存、SRAM、APB、AHB外设均可作为访问的 源和目标；</li><li>可编程的数据传输数目：最大为65536</li></ul> 
<h2>STM32F0-DMA通道</h2> 
<h2><img alt="" height="760" src="https://images2.imgbox.com/55/94/Ebp6PGKU_o.png" width="1119"></h2> 
<p><span style="background-color:#ffd900;"> 注：可修改SYSCFG_CFGR1来配置通道的映射关系。</span></p> 
<h2>DMA通道优先级</h2> 
<p>仲裁器根据优先级管理着通道的请求和启动外设 / 存储器的访问；</p> 
<p>优先级管理分两个方面：</p> 
<p>软件方面：可通过DMA_CCRX寄存器配置每个通道的优先级，优先级分为4各等级：</p> 
<p>        最高等级；</p> 
<p>        高优先级；</p> 
<p>        中等优先级；</p> 
<p>        低优先级；</p> 
<p>硬件方面：如果2个请求有相同的软件优先级，则较低编号的通道比较高编号的通道有较高的优先权。例如：通道2优先于通道4.</p> 
<h2>STM32F0-DMA传输</h2> 
<h3>DMA增量设置</h3> 
<ul><li>通过设置DMA_CCRx寄存器中的PINC和MINC标志位，外设和存储器的指针在每次传输后可以有选择的完成自动增量</li><li>当设置为增量模式时，下一个要传输的地址将是签一个地址加上增量值，增量值取决于所选的数据宽度为1、2或4。</li></ul> 
<h3>DMA循环模式</h3> 
<ul><li>循环模式用于处理循环缓冲区和连续的数据传输（如ADC的扫描模式）。在DMA_CCRx寄存器中的CIRC位用于开启这一功能。</li><li>当启动了循环模式，一组的数据传输完成时，计数寄存器将会自动的被恢复成配置该通道是设置的初值，DMA操作将会继续进行。</li></ul> 
<p><img alt="" height="266" src="https://images2.imgbox.com/52/d9/kYb8rsbE_o.png" width="279"></p> 
<h2> STM32F0-DMA中断</h2> 
<p>每一个DMA通道都可以在DMA传输过半、传输完成和传输出错时产生中断。为应用的灵活性考虑，通过设置寄存器的不同位来打开这些中断。</p> 
<p><img alt="" height="270" src="https://images2.imgbox.com/d2/9c/QpThOXDr_o.png" width="1200"></p> 
<p><span style="background-color:#ffd900;"> 注：这些标志位都在中断状态寄存器DMA_ISR中设置</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3f53a9b51352c4e7b00fbeff3bfc8982/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">爬虫获取电影数据----以沈腾参演电影为例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c230e51b183552ccb659be6e3c958ba2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux发送邮件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>