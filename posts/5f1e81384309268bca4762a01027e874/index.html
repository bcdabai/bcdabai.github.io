<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用docker部署一个jar项目 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用docker部署一个jar项目" />
<meta property="og:description" content="简介: 通过docker镜像, docker可以在服务器上运行包含项目所需运行环境的docker容器, 在线仓库里有很多各个软件公司官方发布的镜像, 或者第三方的镜像. 如果我们需要使用docker把我们的应用程序打包成镜像, 别的机器上只要安装了docker, 就可以直接运行镜像, 而不需要再安装应用程序所需要的环境(比如 jre)了.
定制自己的镜像: 更新已有的镜像,再构建新的自定义镜像.
1. 使用docker pull 镜像名:版本从在线docker仓库中拉取一个镜像 docker pull ubuntu:18.04 ​ 使用docker images 可以看到你的镜像: (默认路径: /var/lib/docker/containers)
root@iZbp13tcf8gaqn21r6m8viZ:/var/lib/docker/containers# docker images REPOSITORY TAG IMAGE ID CREATED SIZE lifetrack 1.0 881e666fc6b3 21 minutes ago 1.49GB ubuntu_jdk 1.0 42d9398e7f50 40 minutes ago 1.46GB ubuntu 18.04 8e4ce0a6ce69 3 weeks ago 64.2MB star7th/showdoc latest e169aaaa88e2 3 months ago 389MB 各个选项说明:
REPOSITORY：表示镜像的仓库源
TAG：镜像的标签
IMAGE ID：镜像ID
CREATED：镜像创建时间
SIZE：镜像大小" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5f1e81384309268bca4762a01027e874/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-02T15:54:28+08:00" />
<meta property="article:modified_time" content="2023-08-02T15:54:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用docker部署一个jar项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h3>简介:</h3> 
<p>通过docker镜像, docker可以在服务器上运行包含项目所需运行环境的docker容器, 在线仓库里有很多各个软件公司官方发布的镜像, 或者第三方的镜像. 如果我们需要使用docker把我们的应用程序打包成镜像, 别的机器上只要安装了docker, 就可以直接运行镜像, 而不需要再安装应用程序所需要的环境(比如 jre)了.</p> 
<p></p> 
<h3>定制自己的镜像:</h3> 
<p>更新已有的镜像,再构建新的自定义镜像.</p> 
<h6><strong>1. 使用<code>docker pull 镜像名:版本</code>从在线docker仓库中拉取一个镜像</strong></h6> 
<p><code>docker pull ubuntu:18.04</code> ​ 使用<code>docker images</code> 可以看到你的镜像: (默认路径: /var/lib/docker/containers)</p> 
<pre>root@iZbp13tcf8gaqn21r6m8viZ:/var/lib/docker/containers# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
lifetrack           1.0                 881e666fc6b3        21 minutes ago      1.49GB
ubuntu_jdk          1.0                 42d9398e7f50        40 minutes ago      1.46GB
ubuntu              18.04               8e4ce0a6ce69        3 weeks ago         64.2MB
star7th/showdoc     latest              e169aaaa88e2        3 months ago        389MB</pre> 
<p>各个选项说明:</p> 
<ul><li> <p><strong>REPOSITORY：</strong>表示镜像的仓库源</p> </li><li> <p><strong>TAG：</strong>镜像的标签</p> </li><li> <p><strong>IMAGE ID：</strong>镜像ID</p> </li><li> <p><strong>CREATED：</strong>镜像创建时间</p> </li><li> <p><strong>SIZE：</strong>镜像大小</p> </li></ul> 
<h6><strong>2.使用<code>docker run -t -i -d 镜像名:版本 /bin/bash</code> 来根据镜像运行一个容器&lt;/u&gt;</strong></h6> 
<p>参数说明：</p> 
<ul><li> <p><strong>-i</strong>: 交互式操作。</p> </li><li> <p><strong>-t</strong>: 终端。</p> </li><li> <p>-d:在后台运行(加了这个 -i -t就没用了)</p> </li><li> <p><strong>ubuntu:15.10</strong>: 这是指用 ubuntu 15.10 版本镜像为基础来启动容器。</p> </li><li> <p><strong>/bin/bash</strong>：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 /bin/bash。</p> <p><strong><em>如果在后台运行容器, 想进入容器有两种方法:</em></strong></p> <pre>1. docker attach 容器ID   : 退出时(exit)会停止容器</pre> 
  <ol><li> <p>docker exec -it 容器ID /bin/bash :退出时(exit)不会停止容器, 一般用这个</p> </li></ol></li></ul> 
<h6>3. 修改容器</h6> 
<p>进入这个ubuntu容器后, 你可以自己安装你的应用所需要的运行环境, 比如我要安装</p> 
<p>mysql: <code>sudo apt-get install mysql</code></p> 
<p>JDK: <code>sudo apt-get install openjdk-8-jdk</code> 以上在容器内操作, 退出输入: exit</p> 
<h6>4. 将容器提交为一个新镜像:</h6> 
<p><code>docker commit -m="has update" -a="qds" 容器ID 镜像名:版本号</code></p> 
<h6>5. 用包含运行环境的新镜像, 打包我们的应用程序为docker镜像</h6> 
<p>把我们的java程序的jar包, 放在一个新建空文件夹, 然后新建一个Dockerfile文件</p> 
<p>编辑Docerfile文件:</p> 
<pre>   FROM 镜像名:版本号
   
   MAINTAINER 作者签名
​
   RUN 打包时运行的linux命令
​
   COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;源路径1&gt;... &lt;目标路径&gt;
​
   CMD nohup java -jar xxxx.jar &gt; xxx.log  2&gt;&amp;1 &amp;```
​</pre> 
<p><strong>FROM</strong>：定制的镜像都是基于 FROM 的镜像，这里的 nginx 就是定制需要的基础镜像。后续的操作都是基于 nginx。</p> 
<p><strong>RUN</strong>：用于执行后面跟着的命令行命令。有以下俩种格式：</p> 
<p>shell 格式：</p> 
<pre>RUN &lt;命令行命令&gt;
# &lt;命令行命令&gt; 等同于，在终端操作的 shell 命令。</pre> 
<p>exec 格式：</p> 
<pre>RUN ["可执行文件", "参数1", "参数2"]
# 例如：
# RUN ["./test.php", "dev", "offline"] 等价于 RUN ./test.php dev offline</pre> 
<p><strong>COPY</strong>: 复制指令，从上下文目录中复制文件或者目录到容器里指定路径。</p> 
<p><strong>CMD</strong>: 类似于 RUN 指令，用于运行程序，但二者运行的时间点不同:</p> 
<pre>CMD 在docker run 时运行。
RUN 是在 docker build。
​
作用：为启动的容器指定默认要运行的程序，程序运行结束，容器也就结束。CMD 指令指定的程序可被 docker run 命令行参数中指定要运行的程序所覆盖。
​
注意：如果 Dockerfile 中如果存在多个 CMD 指令，仅最后一个生效。</pre> 
<h6>6. 根据Dockerfile文件构建包含应用程序的新镜像:</h6> 
<p><code>docker build -t runoob/centos:6.7 .</code></p> 
<pre>   runoob@runoob:~$ docker build -t runoob/centos:6.7 .
   Sending build context to Docker daemon 17.92 kB
   Step 1 : FROM centos:6.7
    ---&amp;gt; d95b5ca17cc3
   Step 2 : MAINTAINER Fisher "fisher@sudops.com"
    ---&amp;gt; Using cache
    ---&amp;gt; 0c92299c6f03
   Step 3 : RUN /bin/echo 'root:123456' |chpasswd
    ---&amp;gt; Using cache
    ---&amp;gt; 0397ce2fbd0a
   Step 4 : RUN useradd runoob
   ......</pre> 
<p>参数说明：</p> 
<ul><li> <p><strong>-t</strong> ：指定要创建的目标镜像名</p> </li><li> <p><strong>.</strong> ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径</p> </li></ul> 
<h6>7. 使用 <code>docker images</code> 查看我们新建的镜像</h6> 
<h6>8. 使用<code>docker run -it 镜像名:版本</code> 运行我们的镜像并访问其中的应用程序.</h6> 
<h6>9. 这个镜像可以在其他安装了docker的设备上直接运行, 不需要提前装jdk等环境了.</h6> 
<hr> 
<p> <strong>以下是我收集到的比较好的学习教程资源，虽然不是什么很值钱的东西，如果你刚好需要，可以评论区，留言【777】直接拿走就好了</strong></p> 
<p><img alt="" height="404" src="https://images2.imgbox.com/9a/47/fKyCKCVU_o.png" width="679"></p> 
<p><img alt="" src="https://images2.imgbox.com/4f/43/lm6VmlI5_o.png"></p> 
<p><strong>各位想获取资料的朋友请</strong><strong>点赞 + 评论 + 收藏</strong><strong>，三连！</strong></p> 
<p><strong>三连</strong>之后我会在评论区挨个私信发给你们~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ca6275d77f496b2dfe8ae09da74e62b2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【mysql】 this is incompatible with sql_mode=only_full_group_by 修改数据库的默认sql-mode，去除 only_full_group_by</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c5fe3da492839adf11dae1d5b792f990/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux 磁盘管理及磁盘分区（主分区、扩展分区、逻辑分区）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>