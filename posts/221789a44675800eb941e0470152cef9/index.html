<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>asterisk卡常见问题（收集整理） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="asterisk卡常见问题（收集整理）" />
<meta property="og:description" content="以下转自：http://space.taobao.com/e2e26e6e41fda171bf6ec37c526f6893/show_blog-22524724.htm
Q：系统检测不到内线模块
A：通常是因为没有插上电源接头。如果卡上有内线模块，则需要将PC机箱电源引出的插头插到卡上右边的电源接口上。
Q：模拟卡检测不到外线挂机
Q：听到的摘机信号音与普通的电话摘机信号音不一致。
A：国内用户经常反映这个问题。需要修改一下配置文件：
l /etc/zaptel.conf中把 loadzone 和 defaultzont 改为cn
l 在/etc/asterisk/zapata.conf 中打开忙音检测：busydetect=yes
需要重新加载zaptel和asterisk，或者重启系统。
Q：模拟卡外线通话有时候意外中断
A：某些地方的汇线通或者线路质量不佳时常出现这个问题。
需要修改/etc/modprobe.conf，将install wctdm这一行改成下面的样子：
install wctdm /sbin/modprobe --ignore-install wctdm battdebounce=128 &amp;&amp; /sbin/ztcfg
Q：通话中噪音大，有回声
A：
1、首先要在配置文件zapata.conf 中激活回音消除，请把以下选项设置为yes：
² echocancel=yes
² echocancelwhenbridged=yes
² echotraining=yes
2、调整rxgain/txgain设置
为了取得好的回音消除效果，必须调整zapata.conf配置文件中的rxgain（输入增益）和txgain（输出增益）到合适的值，请按照以下步骤来进行：
1. 把rxgain/txgain的值都修改为1.0；
2. 用asterisk板卡上的通道来拨打一个电话，也就是说需要建立一个通过板卡的通道进行的通话；
3. 运行ztmonitor命令来查看通道收、发音增益是不是在一个比较优化的范围：（注，ztmonitor命令的第一个参数是你正在通话的通道号）
4. 根据你的实际情况来调整rxgain和txgain到一个优化的值。比如上图所表现的，rxgain和txgain的值都偏小，你就在配置文件Zapata.conf中增加rxgain和txgain的值，使得图形中所表示出来的值处于中间的位置。
5. 很多情况下，把rxgain和txgain的值设置为8.0会取得比较好的回音消除效果。
Q：模拟卡没有主叫显示或者显示不正确
A： 如果排除局端可能(直接接外线能正常收到主叫，经过asterisk卡后收不到主叫)，这个问题通常是因为zaptel驱动版本和asterisk版本不匹配造成。Asterisk和zaptel一般是成对发布的，版本之间有对应关系，不同版本的zaptel和asterisk是否可以混用需要仔细验证。一旦发生主叫识别问题，则最为简便可靠的验证方式是使用原装的trixbox2.0光盘重新安装系统后验证主叫显示。
Q：SIP可以呼通，但听不到声音
A：一般是NAT问题造成。
如果Asterisk处在NAT的后面，则Asterisk的配置如下： -------------------------------------------------------------- sip.conf: ;externip = 200.201.202.203 externhost=dmlink.dvrdns.org localnet=192.168.0.0/255.255.0.0 rtp.conf rtpstart=10000 rtpend=20000 NAT网关端口映射： SIP端口 5060 和 RTP端口10000-20000 -------------------------------------------------------------- 需要配置externip或externhost，这是Asterisk的公网IP，还需配置localnet，这样当Asterisk判断外部来的SIP会话时（本地是localnet，对方不是localnet），会在Invite应答（200 OK）的SDP 中，将Connection Information置为外部IP，而Media Description的端口从[rtpstart,rtpend]中分配。 这样，SIP客户端收到Invite应答（200 OK）后，就知道了Asterisk的RTP公网IP&#43;端口，SIP客户端的语音流发到这个地址，NAT网关（端口映射）转发到Asterisk。 而如果SIP客户端也处于一个NAT之后，Asterisk如何判断出SIP客户端的RTP公网地址呢？ 经过Asterisk代码的分析，Asterisk的SIP并没有实现ICE（Interactive Connectivity Establishment）到SIP的映射，即没有处理ICE在SDP的Media块中定义的一个新属性alt（候选IP地址和端口），而是采用了一个简单的方式，即当NAT=yes时，从哪儿来的到哪儿去（SIP也是用这种策略处理）。 所以，Asterisk收到来自SIP客户端的RTP包后，Asterisk会记录此包的源地址和端口（是经过了客户端侧NAT转换后的公网IP&#43;端口）, Asterisk的语音流将被发到这个地址。客户端侧NAT网关会自动转发到对应的Asterisk的内网地址。 如此，一个NAT之后的SIP客户端（无需ICE）已经可以拨入一个配置了端口映射的NAT后的Asterisk了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/221789a44675800eb941e0470152cef9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-10-17T08:36:00+08:00" />
<meta property="article:modified_time" content="2009-10-17T08:36:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">asterisk卡常见问题（收集整理）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>以下转自：<a href="http://space.taobao.com/e2e26e6e41fda171bf6ec37c526f6893/show_blog-22524724.htm" rel="nofollow">http://space.taobao.com/e2e26e6e41fda171bf6ec37c526f6893/show_blog-22524724.htm</a></p> 
<p>Q：系统检测不到内线模块<br>A：通常是因为没有插上电源接头。如果卡上有内线模块，则需要将PC机箱电源引出的插头插到卡上右边的电源接口上。<br> <br>Q：模拟卡检测不到外线挂机<br>Q：听到的摘机信号音与普通的电话摘机信号音不一致。<br>A：国内用户经常反映这个问题。需要修改一下配置文件：<br>l        /etc/zaptel.conf中把 loadzone 和 defaultzont 改为cn<br>l        在/etc/asterisk/zapata.conf 中打开忙音检测：busydetect=yes<br>需要重新加载zaptel和asterisk，或者重启系统。<br> <br>Q：模拟卡外线通话有时候意外中断<br>A：某些地方的汇线通或者线路质量不佳时常出现这个问题。<br>需要修改/etc/modprobe.conf，将install wctdm这一行改成下面的样子：<br>install wctdm /sbin/modprobe --ignore-install wctdm battdebounce=128 &amp;&amp; /sbin/ztcfg<br> <br> <br>Q：通话中噪音大，有回声<br>A：<br>1、首先要在配置文件zapata.conf 中激活回音消除，请把以下选项设置为yes：<br>²        echocancel=yes<br>²        echocancelwhenbridged=yes<br>²        echotraining=yes<br>2、调整rxgain/txgain设置<br>为了取得好的回音消除效果，必须调整zapata.conf配置文件中的rxgain（输入增益）和txgain（输出增益）到合适的值，请按照以下步骤来进行：<br>1.        把rxgain/txgain的值都修改为1.0；<br>2.        用asterisk板卡上的通道来拨打一个电话，也就是说需要建立一个通过板卡的通道进行的通话；<br>3.        运行ztmonitor命令来查看通道收、发音增益是不是在一个比较优化的范围：（注，ztmonitor命令的第一个参数是你正在通话的通道号）<br> <br>4.        根据你的实际情况来调整rxgain和txgain到一个优化的值。比如上图所表现的，rxgain和txgain的值都偏小，你就在配置文件Zapata.conf中增加rxgain和txgain的值，使得图形中所表示出来的值处于中间的位置。<br>5.        很多情况下，把rxgain和txgain的值设置为8.0会取得比较好的回音消除效果。<br> <br> <br>Q：模拟卡没有主叫显示或者显示不正确<br>A： 如果排除局端可能(直接接外线能正常收到主叫，经过asterisk卡后收不到主叫)，这个问题通常是因为zaptel驱动版本和asterisk版本不匹配造成。Asterisk和zaptel一般是成对发布的，版本之间有对应关系，不同版本的zaptel和asterisk是否可以混用需要仔细验证。一旦发生主叫识别问题，则最为简便可靠的验证方式是使用原装的trixbox2.0光盘重新安装系统后验证主叫显示。<br> <br>Q：SIP可以呼通，但听不到声音<br>A：一般是NAT问题造成。<br>如果Asterisk处在NAT的后面，则Asterisk的配置如下：  <br>-------------------------------------------------------------- <br>sip.conf: <br> <br>;externip = 200.201.202.203 <br>externhost=dmlink.dvrdns.org <br>localnet=192.168.0.0/255.255.0.0 <br> <br>rtp.conf <br> <br>rtpstart=10000 <br>rtpend=20000 <br> <br>NAT网关端口映射： <br> <br>SIP端口 5060 和 RTP端口10000-20000 <br> <br>-------------------------------------------------------------- <br> <br>需要配置externip或externhost，这是Asterisk的公网IP，还需配置localnet，这样当Asterisk判断外部来的SIP会话时（本地是localnet，对方不是localnet），会在Invite应答（200 OK）的SDP 中，将Connection Information置为外部IP，而Media Description的端口从[rtpstart,rtpend]中分配。 <br> <br>这样，SIP客户端收到Invite应答（200 OK）后，就知道了Asterisk的RTP公网IP+端口，SIP客户端的语音流发到这个地址，NAT网关（端口映射）转发到Asterisk。 <br> <br>而如果SIP客户端也处于一个NAT之后，Asterisk如何判断出SIP客户端的RTP公网地址呢？ <br> <br>经过Asterisk代码的分析，Asterisk的SIP并没有实现ICE（Interactive Connectivity Establishment）到SIP的映射，即没有处理ICE在SDP的Media块中定义的一个新属性alt（候选IP地址和端口），而是采用了一个简单的方式，即当NAT=yes时，从哪儿来的到哪儿去（SIP也是用这种策略处理）。 <br> <br>所以，Asterisk收到来自SIP客户端的RTP包后，Asterisk会记录此包的源地址和端口（是经过了客户端侧NAT转换后的公网IP+端口）, Asterisk的语音流将被发到这个地址。客户端侧NAT网关会自动转发到对应的Asterisk的内网地址。 <br> <br>如此，一个NAT之后的SIP客户端（无需ICE）已经可以拨入一个配置了端口映射的NAT后的Asterisk了。<br> <br>Q：Asterisk支持传真吗？<br>A：支持。 如果你是安装的Trixbox，则系统已经附带了两个传真收发命令rxfax和txfax。如果是自己安装编译的asterisk，则需要自行安装rxfax和txfax这两个app。<br> <br>Q：传真收发送不成功<br> <br> <br>Q：Asterisk支持7号信令吗？<br>A：asterisk本身不支持7号信令。不过有很多开源的第三方模块。 <br>Q：Asterisk支持H323吗？</p> 
<p> </p> 
<p><br>Q：多块卡可以插到一台机器上吗？<br>A：可以。</p> 
<p><br>Q：Asterisk卡需要什么样的机器？<br>A：一般说来，跟具体的操作系统、是否启用回声消除、是否做编码转换、是否录音等有很大关系。<br>      一个典型的IVR应用，不包括录音，4E1至少P4 2.8G 2G内存以上配置。<br>      一个SS7转H323应用，4E1建议双至强2.8G。<br> <br>Q：模拟卡外线挂机检测有问题？<br>A：zapata.conf中设置：<br>Busydetect=yes<br>        <br>Q：G729协议呼叫软交换没有回铃音<br>A：G729模块问题。检查show translation G729是否正确安装，如果没有，则需要检查/usr/lib/asterisk/modules/codec_g729.so 是否存在。G729不是自带的，需要自行安装。<br>如果有，则用G729的协议拨打到asterisk上放音，看能否正确听到声音。如听不到则版本不对，不能正常工作。如听到则应该就正常了。<br> <br>Q：只能听到振铃,听不到彩铃<br>A：去掉dial(xxx,,..t..)命令中的t参数。T参数会强制asterisk产生回铃音。<br> <br>Q：数字卡PRI呼叫被交换机直接挂断<br>A：可能有中继号码限制.需要设置callid为指定号码。可以在拨号脚本中使用SetCallerID功能指定。<br>  如果局方需要设置国内国际，则zapatal.conf加上<br>pridialplan=local<br>prilocaldialplan=local</p> 
<p>相关调试命令：<br>Pri debug span 1</p> 
<p> </p> 
<p>以下转自：<a href="http://bbs2.chinaunix.net/thread-1492145-1-1.html" rel="nofollow">http://bbs2.chinaunix.net/thread-1492145-1-1.html</a></p> 
<p> </p> 
<p>===Q1, You can not compile zaptel and asterisk==</p> 
<p>please make sure that:<br>1) You have installed all necessary packages and kernel source.<br>2) Make sure the version of kernel source is exactly same with the version of the kernel.<br>please check the few links:<br><a href="http://wiki.openvox.cn/index.php/D110P" rel="nofollow">http://wiki.openvox.cn/index.php/D110P</a><br><a href="http://wiki.openvox.cn/index.php/D210P" rel="nofollow">http://wiki.openvox.cn/index.php/D210P</a><br><a href="http://wiki.openvox.cn/index.php/D410P" rel="nofollow">http://wiki.openvox.cn/index.php/D410P</a><br><a href="http://www.asteriskguru.com/tutorials/" rel="nofollow">http://www.asteriskguru.com/tutorials/</a><br>3) make sure that you do not miss any packages or files in asterisk or zaptel.<br>4) make sure your system can access <a href="http://www.asterisk.org" rel="nofollow">www.asterisk.org</a>.</p> 
<p>===Q2, ZT_SPANCONFIG failed on span 1: Invalid argument (22)===</p> 
<p>please check:<br>1) run lspci -vvvvv, make sure the system can detect the card. Tiger jet chip will be found. If there is no such Tiger jet chip, please clean the PCI slot and try again.<br>2) if lspc can find the card, make sure the pci id is included in the PCI table in our driver. how to patch the picid, please refer this link:<br><a href="http://www.openvox.cn/kb/entry/2/" rel="nofollow">http://www.openvox.cn/kb/entry/2/</a><br>3) if step 1 and step 2 are ok, please check the zaptel.conf or system.conf to make sure that the setting is correct.<br>4) if step 3 is correct, please make sure that there is no mISDN tiger jet module in the system, if it is there, please remove that or add to blacklist.<br>5) if you still can not boot it up, you have to recompile zaptel or dahdi again.</p> 
<p>===Q3, You can not make calls from asterisk===</p> 
<p>there are few reasons why you can not make calls:<br>1) check your extensions from your asterisk side, make sure your sip is ready to make calls, and SIP is with a right context what you put in extensions.conf<br>2) your pri is and active(leds are in green).<br>3) leds are up and card driver has boot up properly, but the zapata.conf is<br>, so asterisk does not boot up properly,<br>please check by run: zap show channels<br>please check the pri status, it MUST be up and active<br>if is empty or no such command, you should check your zapata.conf<br>4) Make sure dmesg shows without any error 5) Make sure the pri is up and active without any error<br>7) Make sure the physical connection is well established  You maybe recompile your zaptel and asterisk again.</p> 
<p>==Q4, How can you set the digital card for your country?=</p> 
<p>To set the pbx with your country support, you must:<br>1) set timezone and defaultzone to your country in zaptel.conf or system.conf of dahdi<br>2) set the country=your country in indication.conf</p> 
<p>==Q5, How can you open the debug for asterisk?===</p> 
<p>1) You can edit the file logger.conf under /etc/asterisk,<br>enable the debug or error, those message will be stored under<br>/var/log/asterisk<br>2) you also can start your asterisk in this way:<br>asterisk -vvvvvvvvgc -d</p> 
<p>===Q6, How can i check the IRQ of digital cards?===</p> 
<p>please run the command:<br>cat /proc/interrupts<br>you should see the IRQs, Make sure the card has OWN IRQ, Do NOT share with other devices.<br>more details, please check from here:<br><a href="http://www.voip-info.org/wiki/vi" rel="nofollow">http://www.voip-info.org/wiki/vi</a> ... bus+Troubleshooting</p> 
<p>===Q7, Sound Quality Problems with Digital cards===</p> 
<p>please refer this link:<br><a href="http://www.asteriskguru.com/tuto" rel="nofollow">http://www.asteriskguru.com/tuto</a> ... p_te405p_noise.html</p> 
<p>===Q8, How can you compile asterisk with dahdi for D110P/D210P/D410P===</p> 
<p>please refer these links:<br><a href="http://bbs.openvox.cn/viewthread.php?tid=576&amp;extra=page%3D1" rel="nofollow">http://bbs.openvox.cn/viewthread.php?tid=576&amp;extra=page%3D1</a><br><a href="http://www.voip-info.org/wiki/view/DAHDI" rel="nofollow">http://www.voip-info.org/wiki/view/DAHDI</a><br><a href="http://www.russellbryant.net/blog/category/dahdi/" rel="nofollow">http://www.russellbryant.net/blog/category/dahdi/</a><br><a href="http://blog.paulsnet.org/?p=44" rel="nofollow">http://blog.paulsnet.org/?p=44</a><br><a href="http://docs.tzafrir.org.il/dahdi-tools/?C=S%3BO=A" rel="nofollow">http://docs.tzafrir.org.il/dahdi-tools/?C=S%3BO=A</a></p> 
<p>===Q9, I am hearing an echo. What can I do to fix this?===</p> 
<p>please refer these links:<br><a href="http://kb.digium.com/entry/1/" rel="nofollow">http://kb.digium.com/entry/1/</a><br><a href="http://www.voip-info.org/wiki/view/Asterisk+echo+cancellation" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+echo+cancellation</a></p> 
<p>===Q10, Asterisk does not properly detect when a caller hangs up the phone. How do I fix this?===</p> 
<p>please refer this link:<br><a href="http://kb.digium.com/entry/6/" rel="nofollow">http://kb.digium.com/entry/6/</a></p> 
<p>===Q11, When will the LED's light up on my TDM400P/TE110P/TE2XXP/TE4XXP?===</p> 
<p>For the TDM400P and TE110P cards, the LED's will not be lit up until the kernel module is loaded. The TDM400P LED's will light up when the ports are configured and the kernel module is loaded. They do not change if a phone or trunk is plugged in or not. The TE110P LED's will light up RED when the span is configured and kernel module is loaded. If configured correctly and a circuit or channel bank is connected the LED should turn GREEN.</p> 
<p>For the TE2XXP/TE4XXP the LED's should scroll(knightrider) RED even without the kernel module being loaded or anything plugged in. When you have the spans properly configured and kernel module loaded without a circuit or channel bank the LED's should pulse RED. With the module loaded and a circuit/channel bank connected they should be solid GREEN. link from here:<br><a href="http://kb.digium.com/entry/13/" rel="nofollow">http://kb.digium.com/entry/13/</a></p> 
<p>==Q12, Why is my card getting an IRQ miss?===</p> 
<p>Each peice of hardware takes 1,000 interrupts per second. When, for some reason the cards get less than this, an IRQ miss occurs. You can see if the card is missing interrupts using 'zttool.'</p> 
<p>IRQ misses can cause different problems with Asterisk. Symptoms of IRQ misses are bad audio quality or perhaps PRI errors, although IRQ misses will not cause alarms. Also DTMF detection not working is something that can be caused by IRQ misses as well.</p> 
<p>Several common things that contribute to IRQ misses are: -Running the X window system -Shared IRQs -No hard drive DMA -Hard drive DMA too high (shoot for udma3) -Running serial terminals or frame buffers</p> 
<p>To check for shared IRQs you can run:</p> 
<p>   1. cat /proc/interrupts </p> 
<p>        CPU0          </p> 
<p>0 10756672 XT-PIC timer 2 0 XT-PIC cascade 5 10812879 XT-PIC uhci_hcd, uhci_hcd, wctdm 10 226219 XT-PIC t1xxp, CS46XX 11 1550046 XT-PIC eth0, nvidia 12 387234 XT-PIC i8042 14 32641 XT-PIC ide0 15 18 XT-PIC ide1 NMI 0 LOC 10757616 ERR 40481 MIS 0</p> 
<p><br>Notice the T100P card sharing with the sound card, and the TDM400P card is sharing with the USB controller. This will most likely cause problems. If you are not using any USB devices that would probably be ok, but it would be best to disable USB or get the card on it's own IRQ.</p> 
<p>There are several ways to move cards to their own IRQ.</p> 
<p>   -Turn on APIC<br>   -Tweak BIOS settings<br>   -Try a different PCI slot<br>   -Use setpci</p> 
<p>refer this link from digium: <a href="http://kb.digium.com/entry/63/" rel="nofollow">http://kb.digium.com/entry/63/</a></p> 
<p><br>===Q13, Why am I having DTMF detection problems?===</p> 
<p>Zaptel DTMF Detection Problems<br>DTMF detection problems can be caused by a number of different factors. The most common is running the X Windows System. Another cause of DTMF detection problems is the relaxdtmf option in Zapata.conf. It may need to be turned on or off. If you need to force all DTMF detection to be done in software, you can set vpmdtmf support to 0 in wct4xxp.c and recompile, or you can specify it as a kernel module option at runtime.</p> 
<p>SIP DTMF Detection Problems<br>If you are having problems sending DTMF digits amd are using a SIP phone, make sure the dtmfmode they have set is the same on the phone and in Asterisk. Also make sure you are not sending both inband and out-of-band (rfc2833) tones.</p> 
<p>=====Q14, I am getting error messages about PCI Master Aborts. What is wrong?===</p> 
<p>This is a very rare case. When your computer's PCI subsystem experiences serious problems with OpenVox's cards upon initialization of the card, Linux will print out scrolling "CI Master Abort" messages. What you should do is go into your system's BIOS, and turn off your motherboard's PNP (plug and play) feature. If this does not resolve your issue, You should contact OpenVox support.</p> 
<p>===Q15, list of asterisk pbx distributions===</p> 
<p><a href="http://www.elastix.org" rel="nofollow">www.elastix.org</a><br><a href="http://www.trixobx.org" rel="nofollow">www.trixobx.org</a><br><a href="http://www.briker.org/" rel="nofollow">http://www.briker.org/</a><br><a href="http://www.easyasterisk.it/" rel="nofollow">http://www.easyasterisk.it/</a><br><a href="http://pbxinaflash.org/" rel="nofollow">http://pbxinaflash.org/</a></p> 
<p>===Q16, How can you install asterisk with Debian Ubutun===</p> 
<p><a href="http://www.debianhelp.co.uk/asterisk.htm" rel="nofollow">http://www.debianhelp.co.uk/asterisk.htm</a><br><a href="http://www.itinfusion.ca/asteris" rel="nofollow">http://www.itinfusion.ca/asteris</a> ... isk-on-debian-etch/<br><a href="http://www.voip-info.org/tiki-in" rel="nofollow">http://www.voip-info.org/tiki-in</a> ... terisk+Linux+Debian<br><a href="http://www.voip-info.org/wiki/view/Running+Asterisk+on+Debian" rel="nofollow">http://www.voip-info.org/wiki/view/Running+Asterisk+on+Debian</a><br><a href="http://www.voip-info.org/wiki/view/Asterisk+Linux+Ubuntu" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+Linux+Ubuntu</a><br><a href="http://ubuntuforums.org/showthread.php?t=136785" rel="nofollow">http://ubuntuforums.org/showthread.php?t=136785</a></p> 
<p>===Q17, How can you install asterisk with Fedora?===</p> 
<p><a href="http://www.voip-info.org/wiki/view/Asterisk+Linux+Fedora" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+Linux+Fedora</a><br><a href="http://www.asteriskguru.com/" rel="nofollow">http://www.asteriskguru.com/</a></p> 
<p>===Q18, How can you install asterisk with SuSe?===</p> 
<p><a href="http://www.asteriskguru.com/tuto" rel="nofollow">http://www.asteriskguru.com/tuto</a> ... mpilation_suse.html<br><a href="http://voip-manager.net/installation-linux-asterisk.php" rel="nofollow">http://voip-manager.net/installation-linux-asterisk.php</a></p> 
<p>===Q19, install asterisk with Free BSD===</p> 
<p><a href="http://www.voip-info.org/wiki/view/Asterisk+FreeBSD" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+FreeBSD</a><br><a href="http://www.voip-info.org/wiki/view/FreeBSD+zaptel" rel="nofollow">http://www.voip-info.org/wiki/view/FreeBSD+zaptel</a></p> 
<p>===Q20, List of Asterisk OS Platforms===</p> 
<p><a href="http://www.voip-info.org/wiki/view/Asterisk+OS+Platforms" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+OS+Platforms</a></p> 
<p>===Q21, Centos with asterisk===</p> 
<p><a href="http://www.voip-info.org/wiki/vi" rel="nofollow">http://www.voip-info.org/wiki/vi</a> ... +1.6.x+installation<br><a href="http://www.voip-info.org/wiki/vi" rel="nofollow">http://www.voip-info.org/wiki/vi</a> ... +1.4.x+installation<br><a href="http://www.voip-info.org/wiki/view/Asterisk+Linux+Centos" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+Linux+Centos</a></p> 
<p>===Q22, digital cards with "TRUNK Dial failed due to CONGESTION" Problem===</p> 
<p>You must check:<br>1) your driver is loaded properly.<br>2) there is no error running dmesg with cards.<br>3) under asterisk console, run: zap show channels or dahdi show channels, make sure that there is no error<br>4) under asterisk console, run: pri show spans, make sure the spans are up and active<br>5) make sure your dialplan is set to a right channel.</p> 
<p>===Q23, How do you report a problem===</p> 
<p>In order to solve customer's problems very effective and efficiency,<br>when seeking a help from us, please give these information:<br>1) versions of kernel and Linux distribution<br>2) versions of asterisk and zaptel/dahdi<br>3) the name of cards used in your system<br>4) debug and error information from your system and asterisk<br>5) sending us zaptel(zaptel.conf and zapata.conf) or dahdi (system.conf and chan_dahdi.conf)<br>configuration files and extension.conf<br>6) after loading the driver, run the command: demsg and send the information to us<br>7) sending us the result of the command: cat /proc/interrupts<br> sending us the message of asterisk console when you making a call<br>9) inform the protocols you are using in your system<br>10) send us a working ssh account with root permission if you need us to check the system.<br>11) make a backup for your important files<br>12) describe the problem in details</p> 
<p>===Q24,FATAL: Module wcte11xp not found===</p> 
<p>if this problem occurred, please make sure:<br>1) the module is compiled and installed properly<br>2) you entered a right kernel, which you used to compile the zaptel<br>3) make sure you have a access permission to load the module.<br>4) make sure the wcte11xp is under /lib/modules/2.6.XX/extra</p> 
<p>===Q25,FATAL: Module wct4xxp not found===</p> 
<p>if this problem occurred, please make sure:<br>1) the module is compiled and installed properly<br>2) you entered a right kernel, which you used to compile the zaptel<br>3) make sure you have a access permission to load the module.<br>4) make sure the wct4xxp.ko is under /lib/modules/2.6.XX/extra</p> 
<p>===Q26, Tools for PRI cards===</p> 
<p>you can use these tools to test the wctdm and opvxa1200<br>1) zttest<br><a href="http://www.asteriskguru.com/tuto" rel="nofollow">http://www.asteriskguru.com/tuto</a> ... p_te405p_noise.html<br>2) zttool<br><a href="http://www.voip-info.org/wiki/view/Asterisk+zttool" rel="nofollow">http://www.voip-info.org/wiki/view/Asterisk+zttool</a><br>3) ztmonitor<br><a href="http://www.voip-info.org/wiki/vi" rel="nofollow">http://www.voip-info.org/wiki/vi</a> ... ata+gain+adjustment</p> 
<p>===Q27,check information of wctdm.ko/wct4xxp.ko===</p> 
<p>Under /lib/modules/2.6.18-128.el5/misc<br>run command: modinfo wct4xxp.ko</p> 
<p>===Q28, How to debug wct4xxp===</p> 
<p>When loading the wct4xxp with a debug mode,<br>please loading the driver in this way:<br>modprobe wct4xxp debug=1 // open the debug and check the /var/log/message</p> 
<p>===Q29, RHEL/Centos 5.2: xpp/xdefs.h:117: error: conflicting types for ‘bool’===</p> 
<p>please refer this:<br><a href="https://issues.asterisk.org/view.php?id=12889" rel="nofollow">https://issues.asterisk.org/view.php?id=12889</a></p> 
<p>===Q30, xpp modules do not compile with kernel 2.6.19-1.2919.fc7===</p> 
<p>please refer this:<br><a href="https://issues.asterisk.org/view.php?id=9006" rel="nofollow">https://issues.asterisk.org/view.php?id=9006</a></p> 
<p>===Q31, spinlock.h error with RHEL 4===</p> 
<p>please refer this link:<br><a href="http://forums.digium.com/viewtop" rel="nofollow">http://forums.digium.com/viewtop</a> ... 37576c7aa92518fe48b</p> 
<p>===Q32, Compile error on CentOS-4.6 with Kernel-2.6.9-67.0.15.ELsmp and CONFIG_DAHDI_NET===</p> 
<p>please refer this link:<br><a href="https://issues.asterisk.org/view.php?id=13427" rel="nofollow">https://issues.asterisk.org/view.php?id=13427</a></p> 
<p>===Q33, dahdi_compat.h:31:27: error: zaptel/zaptel.h: No such file===</p> 
<p>please read this:<br><a href="https://issues.asterisk.org/view.php?id=14121" rel="nofollow">https://issues.asterisk.org/view.php?id=14121</a></p> 
<p>===Q34, when compiling zaptel, error: You do not appear to have the sources for..===</p> 
<p>please refer this:<br><a href="http://forums.digium.com/viewtopic.php?t=7061" rel="nofollow">http://forums.digium.com/viewtopic.php?t=7061</a><br><a href="http://lists.digium.com/pipermai" rel="nofollow">http://lists.digium.com/pipermai</a> ... 07-June/189259.html</p> 
<p>===Q35, Bug#439814: zaptel-source: oslec_echo_can_identify undefined symbol===</p> 
<p>please refer this:<br><a href="http://lists.alioth.debian.org/p" rel="nofollow">http://lists.alioth.debian.org/p</a> ... -August/009225.html</p> 
<p>===Q36, How to install Octasic SoftEcho===</p> 
<p>please refer these links:<br><a href="http://www.openvox.cn/download/u" rel="nofollow">http://www.openvox.cn/download/u</a> ... n/Octvqeug_5000.pdf<br><a href="http://www.octasic.com/en/products/softecho/softecho_asterisk.php" rel="nofollow">http://www.octasic.com/en/products/softecho/softecho_asterisk.php</a><br><a href="http://www.octasic.com/en/products/softecho/support.php" rel="nofollow">http://www.octasic.com/en/products/softecho/support.php</a></p> 
<p>===Q37, Bug in Zaptel 1.2.20.1 and 1.4.5.1 - Only MG2===</p> 
<p>please refer this:<br><a href="http://trixbox.org/node/21080" rel="nofollow">http://trixbox.org/node/21080</a> <a href="http://www.rowetel.com/ucasterisk/oslec.html" rel="nofollow">http://www.rowetel.com/ucasterisk/oslec.html</a></p> 
<p>===Q38, Howto: OSLEC echo canceling + DAHDI 2.1.0.4 + Asterisk 1.4===</p> 
<p>please refer this:<br><a href="http://www.asterisk.org/forum/vi" rel="nofollow">http://www.asterisk.org/forum/vi</a> ... dc698e89467c3d49a86</p> 
<p>===Q39, Difference between zaptel and dahdi===</p> 
<p>please refer these links:<br><a href="http://www.voip-info.org/wiki/view/DAHDI" rel="nofollow">http://www.voip-info.org/wiki/view/DAHDI</a><br><a href="http://docs.tzafrir.org.il/dahdi-linux/" rel="nofollow">http://docs.tzafrir.org.il/dahdi-linux/</a><br><a href="http://docs.tzafrir.org.il/dahdi-tools/" rel="nofollow">http://docs.tzafrir.org.il/dahdi-tools/</a></p> 
<p>===Q40, Tonezones for zaptel.conf===</p> 
<p>The file zonedata.c contains the information about the tone zones used in libtonezone (and hence also in ztcfg). Here is a list of those zones:</p> 
<p>us United States / North America</p> 
<p>au Australia</p> 
<p>fr France</p> 
<p>nl Netherlands</p> 
<p>uk United Kingdom</p> 
<p>fi Finland</p> 
<p>es Spain</p> 
<p>jp Japan</p> 
<p>no Norway</p> 
<p>at Austria</p> 
<p>nz New Zealand</p> 
<p>it Italy</p> 
<p>us-old United States Circa 1950 / North America</p> 
<p>gr Greece</p> 
<p>tw Taiwan</p> 
<p>cl Chile</p> 
<p>se Sweden</p> 
<p>be Belgium</p> 
<p>sg Singapore</p> 
<p>il Israel</p> 
<p>br Brazil</p> 
<p>hu Hungary</p> 
<p>lt Lithuania</p> 
<p>pl Poland</p> 
<p>za South Africa</p> 
<p>pt Portugal</p> 
<p>ee Estonia</p> 
<p>mx Mexico</p> 
<p>in India</p> 
<p>de Germany</p> 
<p>ch Switzerland</p> 
<p>dk Denmark</p> 
<p>cz Czech Republic</p> 
<p>cn China</p> 
<p>ar Argentina</p> 
<p>my Malaysia</p> 
<p>th Thailand</p> 
<p>bg Bulgaria</p> 
<p>ve Venezuela</p> 
<p>ph Philippines</p> 
<p>ru Russian Federation</p> 
<p>tr Turkey</p> 
<p>===Q41, Tools from zaptel to dahdi===</p> 
<p>ztcfg -&gt; dahdi_cfg<br>ztmonitor -&gt; dahdi_monitor<br>ztscan -&gt; dahdi_scan<br>ztspeed -&gt; dahdi_speed<br>zttest -&gt; dahdi_test<br>zttool -&gt; dahdi_tool<br>zapconf -&gt; dahdi_genconf (deprecates genzaptelconf)</p> 
<p>===Q42, Why are you unable to call out with Asterisk 1.4.22?===</p> 
<p>If you are using wctdm or opvxa1200 with Zaptel and Asterisk 1.4.22 then there is a known issue with outbound calls. The reason you are not able to call out is because Asterisk 1.4.22 has a new feature which detects if a analog line is plugged in or not, but this feature only works with Dahdi. So to fix the issue you can do one of the following.<br>edit the file under /asterisk-1.4.22、channels/chan_dahdi.c" find this line</p> 
<p>   1. ifdef DAHDI_CHECK_HOOKSTATE return 0;<br>   2. else return 1;</p> 
<p>Change the "0" to a "1"</p> 
<p>   1. ifdef DAHDI_CHECK_HOOKSTATE return 1;<br>   2. else return 1;</p> 
<p>===Q43, Missing libpri===</p> 
<p>Symptom: chan_zap fails to load (no 'zap' in the CLI). In the logs you see the error:</p> 
<p>chan_zap.c: Unknown signalling method 'pri_cpe'</p> 
<p>Cause: chan_zap.so in Asterisk was built without support for libpri. libpri was not installed when you ran ./configure before building asterisk.</p> 
<p>Fix: Rebuild asterisk and make sure libpri is supported.</p> 
<p>$ strings channels/chan_zap.so | grep pri_cpe<br>pri_cpe</p> 
<p>===Q44, . I have an E1/PRI line, incoming calls are working but outgoing calls are not working, what is wrong?===</p> 
<p>try to set:<br>pridialplan= local (or unknown, private, national, and international)</p> 
<p>===Q45, How to get more debug information===</p> 
<p>under asterisk console, run : pri intense debug span X, X is span number</p> 
<p>==Q46, T1/E1 Clock Synchronization===</p> 
<p>TE1 Clock synchronization is used to propagate a single clock source over the T1/E1 ports on a single card.<br>Before configuring your system you must identify which ports should be in NORMAL (slave) clock mode and which should be in MASTER clock mode.<br>All ports connected to TELCO MUST be in NORMAL mode,<br>because Telco is ALWAYS MASTER clock.<br>Example:<br>zaptel-&gt;ort 1 connected to TELCO // port 1 MUST be Normal(slave) clock mode<br>zaptel-&gt;ort 2 connected to channel bank or back to back to another T1/E1<br>device. In this scenario Port2 must be configured as CLOCK MASTER.</p> 
<p>使用Elastix碰到的几个问题和解决办法。转自：<a href="http://www.cnasterisk.com/thread-62-1-7.html" rel="nofollow">http://www.cnasterisk.com/thread-62-1-7.html</a><br>Elastix呼出自动调度（中继队列）问题 <br>问题描述： <br>前提是在有多根外线接入到Elastix的服务器上时，通过软电话拨打外线，如何让并发通话自动自动调度到空闲外线进行呼出。 <br>解决办法： <br>如图，首先在PBX--&gt;PBX Configuration--&gt;Trunks中为每条外线设置Zap Identifier (trunk name)；然后在PBX--&gt;PBX Configuration--&gt;Outbound Routes中设置Trunk Sequence，依次添加想要加入到调度队列的中继线（Zap） </p> 
<p> </p> 
<p><br>拨虚拟传真机号码无法发送传真问题<br>问题描述：在向虚拟传真中发送传真时，用IVR语音交互引导到传真机，可以正常发送传真，但是直接拨虚拟传真的分机号码时，会发送失败。<br>解决办法:需要注释掉/etc/asterisk/zapata.conf这个文件中faxdetect=incoming这一行。（提示，注释符号是“;”而不是“#”）</p> 
<p> </p> 
<p>Flash Operator Panel不能有效显示状态问题 问题描述： <br>默认安装好Elastix后，Flash Operator Panel并不能正常显示分机和中继的状态。 <br>解决办法： <br>到网站：[url=http://www.asternic.org/download.php]http://www.asternic.org/download.php[/url]下载最新版本的op_panel-snapshot.tar.gz。然后将包内的op_server.pl和flashh/operator_panel.swf拷贝到/var/www/html/panel下，并覆盖原文件。修改/var/www/html/panel/op_server.cfg文件，加入一行use_amportal_conf=1然后再进入asterisk控制台,并reload一下就可以了。 <br>#asterisk -r <br>Asterisk 1.4.22-rc5, Copyright (C) 1999 - 2008 Digium, Inc. and others.Created by Mark Spencer &lt;[email=markster@digium.com]markster@digium.com[/email]&gt;Asterisk comes with ABSOLUTELY NO WARRANTY; type 'core show warranty' for details.This is free software, with components licensed under the GNU General PublicLicense version 2 and other licenses; you are welcome to redistribute it undercertain conditions. Type 'core show license' for details.=========================================================================Connected to Asterisk 1.4.22-rc5 currently running . Elastix105 (pid = 2308)Verbosity is at least 5Elastix105*CLI&gt; reload <br>... ... <br>Elastix105*CLI&gt;exit <br>#</p> 
<p>呼入呼出，不能正常挂机的问题</p> 
<p>主要是配置参数没有增加参数，请修改/etc/asterisk/目录下的zapata.conf文件，加入如下： busydetect=yes busycount=5 之后得新在asterisk -r 的控制台做下 reload 就可以了  <br>BTW:还有一个离奇的问题，没有经过最终测试。就是有时候会莫名奇妙的发现线路忙的问题。可以拨一下外线电话的线，再插上就好了。也有可能是没有修改zapata.conf的问题。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b25c64b7c7a954dee88149e282bd0ddb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UE中的正则表达式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/faa58f58f0153d93a4edf3313af7cccd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java中的锁池和等待池</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>