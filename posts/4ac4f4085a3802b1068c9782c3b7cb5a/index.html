<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mysql 用户管理和权限设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mysql 用户管理和权限设置" />
<meta property="og:description" content="MySQL创建用户与授权 一. 创建用户 命令: CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;; 说明： username：你将创建的用户名host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器 例子： CREATE USER &#39;dog&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;; CREATE USER &#39;pig&#39;@&#39;192.168.1.101_&#39; IDENDIFIED BY &#39;123456&#39;; CREATE USER &#39;pig&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;; CREATE USER &#39;pig&#39;@&#39;%&#39; IDENTIFIED BY &#39;&#39;; CREATE USER &#39;pig&#39;@&#39;%&#39;; 二. 授权: 命令: GRANT privileges ON databasename.tablename TO &#39;username&#39;@&#39;host&#39; 说明: privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALLdatabasename：数据库名tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用*表示，如*.* 例子: GRANT SELECT, INSERT ON test.user TO &#39;pig&#39;@&#39;%&#39;; GRANT ALL ON *.* TO &#39;pig&#39;@&#39;%&#39;; GRANT ALL ON maindataplus.* TO &#39;pig&#39;@&#39;%&#39;; 注意: 用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4ac4f4085a3802b1068c9782c3b7cb5a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-12T22:01:12+08:00" />
<meta property="article:modified_time" content="2019-06-12T22:01:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mysql 用户管理和权限设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a href="https://www.cnblogs.com/sos-blue/p/6852945.html" rel="nofollow" id="cb_post_title_url">MySQL创建用户与授权</a></h2> 
<h3>一. 创建用户</h3> 
<h4>命令:</h4> 
<pre><code class="language-html hljs">CREATE USER 'username'@'host' IDENTIFIED BY 'password';</code></pre> 
<h4>说明：</h4> 
<ul><li>username：你将创建的用户名</li><li>host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以<strong>从任意远程主机登陆</strong>，可以使用通配符<code>%</code></li><li>password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器</li></ul> 
<h4>例子：</h4> 
<pre><code class="language-html hljs">CREATE USER 'dog'@'localhost' IDENTIFIED BY '123456';
CREATE USER 'pig'@'192.168.1.101_' IDENDIFIED BY '123456';
CREATE USER 'pig'@'%' IDENTIFIED BY '123456';
CREATE USER 'pig'@'%' IDENTIFIED BY '';
CREATE USER 'pig'@'%';</code></pre> 
<h3>二. 授权:</h3> 
<h4>命令:</h4> 
<pre><code class="language-html hljs">GRANT privileges ON databasename.tablename TO 'username'@'host'</code></pre> 
<h4>说明:</h4> 
<ul><li>privileges：用户的操作权限，如<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>等，如果要授予所的权限则使用<code>ALL</code></li><li>databasename：数据库名</li><li>tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用<code>*</code>表示，如<code>*.*</code></li></ul> 
<h4>例子:</h4> 
<pre><code class="language-html hljs">GRANT SELECT, INSERT ON test.user TO 'pig'@'%';
GRANT ALL ON *.* TO 'pig'@'%';
GRANT ALL ON maindataplus.* TO 'pig'@'%';</code></pre> 
<h4>注意:</h4> 
<p>用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:</p> 
<pre><code class="language-html hljs">GRANT privileges ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION;</code></pre> 
<h3>三.设置与更改用户密码</h3> 
<h4>命令:</h4> 
<pre><code class="language-html hljs">SET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword');</code></pre> 
<p>如果是当前登陆用户用:</p> 
<pre><code class="language-html hljs">SET PASSWORD = PASSWORD("newpassword");</code></pre> 
<h4>例子:</h4> 
<pre><code class="language-html hljs">SET PASSWORD FOR 'pig'@'%' = PASSWORD("123456");</code></pre> 
<h3>四. 撤销用户权限</h3> 
<h4>命令:</h4> 
<pre><code class="language-html hljs">REVOKE privilege ON databasename.tablename FROM 'username'@'host';</code></pre> 
<h3>说明:</h3> 
<p>privilege, databasename, tablename：同授权部分</p> 
<h4>例子:</h4> 
<pre><code class="language-html hljs">REVOKE SELECT ON *.* FROM 'pig'@'%';</code></pre> 
<h4>注意:</h4> 
<p>假如你在给用户<code>'pig'@'%'</code>授权的时候是这样的（或类似的）：<code>GRANT SELECT ON test.user TO 'pig'@'%'</code>，则在使用<code>REVOKE SELECT ON *.* FROM 'pig'@'%';</code>命令并不能撤销该用户对test数据库中user表的<code>SELECT</code> 操作。相反，如果授权使用的是<code>GRANT SELECT ON *.* TO 'pig'@'%';</code>则<code>REVOKE SELECT ON test.user FROM 'pig'@'%';</code>命令也不能撤销该用户对test数据库中user表的<code>Select</code>权限。</p> 
<p>具体信息可以用命令<code>SHOW GRANTS FOR 'pig'@'%';</code> 查看。</p> 
<h3>五.删除用户</h3> 
<h4>命令:</h4> 
<pre><code class="language-html hljs">DROP USER 'username'@'host';

</code></pre> 
<p>权限简介</p> 
<table><tbody><tr><td> <p>权限</p> </td><td> <p>权限级别</p> </td><td> <p>权限说明</p> </td></tr><tr><td> <p>CREATE</p> </td><td> <p>数据库、表或索引</p> </td><td> <p>创建数据库、表或索引权限</p> </td></tr><tr><td> <p>DROP</p> </td><td> <p>数据库或表</p> </td><td> <p>删除数据库或表权限</p> </td></tr><tr><td> <p>GRANT OPTION</p> </td><td> <p>数据库、表或保存的程序</p> </td><td> <p>赋予权限选项</p> </td></tr><tr><td> <p>REFERENCES</p> </td><td> <p>数据库或表</p> </td><td> </td></tr><tr><td> <p>ALTER</p> </td><td> <p>表</p> </td><td> <p>更改表，比如添加字段、索引等</p> </td></tr><tr><td> <p>DELETE</p> </td><td> <p>表</p> </td><td> <p>删除数据权限</p> </td></tr><tr><td> <p>INDEX</p> </td><td> <p>表</p> </td><td> <p>索引权限</p> </td></tr><tr><td> <p>INSERT</p> </td><td> <p>表</p> </td><td> <p>插入权限</p> </td></tr><tr><td> <p>SELECT</p> </td><td> <p>表</p> </td><td> <p>查询权限</p> </td></tr><tr><td> <p>UPDATE</p> </td><td> <p>表</p> </td><td> <p>更新权限</p> </td></tr><tr><td> <p>CREATE VIEW</p> </td><td> <p>视图</p> </td><td> <p>创建视图权限</p> </td></tr><tr><td> <p>SHOW VIEW</p> </td><td> <p>视图</p> </td><td> <p>查看视图权限</p> </td></tr><tr><td> <p>ALTER ROUTINE</p> </td><td> <p>存储过程</p> </td><td> <p>更改存储过程权限</p> </td></tr><tr><td> <p>CREATE ROUTINE</p> </td><td> <p>存储过程</p> </td><td> <p>创建存储过程权限</p> </td></tr><tr><td> <p>EXECUTE</p> </td><td> <p>存储过程</p> </td><td> <p>执行存储过程权限</p> </td></tr><tr><td> <p>FILE</p> </td><td> <p>服务器主机上的文件访问</p> </td><td> <p>文件访问权限</p> </td></tr><tr><td> <p>CREATE TEMPORARY TABLES</p> </td><td> <p>服务器管理</p> </td><td> <p>创建临时表权限</p> </td></tr><tr><td> <p>LOCK TABLES</p> </td><td> <p>服务器管理</p> </td><td> <p>锁表权限</p> </td></tr><tr><td> <p>CREATE USER</p> </td><td> <p>服务器管理</p> </td><td> <p>创建用户权限</p> </td></tr><tr><td> <p>RELOAD</p> </td><td> <p>服务器管理</p> </td><td> <p>执行flush-hosts, flush-logs, flush-privileges, flush-status, flush-tables, flush-threads, refresh, reload等命令的权限</p> </td></tr><tr><td> <p>PROCESS</p> </td><td> <p>服务器管理</p> </td><td> <p>查看进程权限</p> </td></tr><tr><td> <p>REPLICATION CLIENT</p> </td><td> <p>服务器管理</p> </td><td> <p>复制权限</p> </td></tr><tr><td> <p>REPLICATION SLAVE</p> </td><td> <p>服务器管理</p> </td><td> <p>复制权限</p> </td></tr><tr><td> <p>SHOW DATABASES</p> </td><td> <p>服务器管理</p> </td><td> <p>查看数据库权限</p> </td></tr><tr><td> <p>SHUTDOWN</p> </td><td> <p>服务器管理</p> </td><td> <p>关闭数据库权限</p> </td></tr><tr><td> <p>SUPER</p> </td><td> <p>服务器管理</p> </td><td> <p>执行kill线程权限</p> </td></tr></tbody></table> 
<p> </p> 
<table><tbody><tr><td> <p>权限分布</p> </td><td> <p>可能的设置的权限</p> </td></tr><tr><td> <p>表权限</p> </td><td> <p>'Select', 'Insert', 'Update', 'Delete', 'Create', 'Drop', 'Grant', 'References', 'Index', 'Alter'</p> </td></tr><tr><td> <p>列权限</p> </td><td> <p>'Select', 'Insert', 'Update', 'References'</p> </td></tr><tr><td> <p>过程权限</p> </td><td> <p>'Execute', 'Alter Routine', 'Grant'</p> </td></tr></tbody></table> 
<p>1、GRANT命令使用说明：</p> 
<p>    先来看一个例子，创建一个只允许从本地登录的超级用户jack，并允许将权限赋予别的用户，密码为：jack.</p> 
<p>mysql&gt; grant all privileges on *.* to jack@'localhost' identified by "jack" with grant option; Query OK, 0 rows affected (0.01 sec)</p> 
<p>    GRANT命令说明：</p> 
<p>    ALL PRIVILEGES 是表示所有权限，你也可以使用select、update等权限。</p> 
<p>    ON 用来指定权限针对哪些库和表。</p> 
<p>    *.* 中前面的*号用来指定数据库名，后面的*号用来指定表名。</p> 
<p>    TO 表示将权限赋予某个用户。</p> 
<p>    <a href="mailto:jack@'%20rel=">jack@'localhost'</a> 表示jack用户，@后面接限制的主机，可以是IP、IP段、域名以及%，%表示任何地方。注意：这里%有的版本不包括本地，以前碰到过给某个用户设置了%允许任何地方登录，但是在本地登录不了，这个和版本有关系，遇到这个问题再加一个localhost的用户就可以了。</p> 
<p>    IDENTIFIED BY 指定用户的登录密码。</p> 
<p>    WITH GRANT OPTION 这个选项表示该用户可以将自己拥有的权限授权给别人。注意：经常有人在创建操作用户的时候不指定WITH GRANT OPTION选项导致后来该用户不能使用GRANT命令创建用户或者给其它用户授权。</p> 
<p>备注：可以使用GRANT重复给用户添加权限，权限叠加，比如你先给用户添加一个select权限，然后又给用户添加一个insert权限，那么该用户就同时拥有了select和insert权限。</p> 
<p>2、刷新权限</p> 
<p>flush privileges;每次修改都需要重新刷新权限</p> 
<p>3、查看权限</p> 
<p>查看当前用户的权限：</p> 
<p>mysql&gt; show grants;</p> 
<p>查看某个用户的权限：</p> 
<p>mysql&gt; show grants for 'jack'@'%';</p> 
<p>4、回收权限</p> 
<p>revoke delete on *.* from 'jack'@'localhost';</p> 
<p>5、删除用户</p> 
<p>首先查看</p> 
<p>select host,user,password from user;</p> 
<p>删除</p> 
<p>drop user 'jack'@'localhost';</p> 
<p> 6、对账户重命名</p> 
<p>rename user 'jack'@'%' to 'jim'@'%';</p> 
<p>示例</p> 
<p>设置普通dba管理某个数据的权限</p> 
<p>Grant ALL privileges on testdb to usernameDBA@’localhost’</p> 
<p>Localhost是限制本地</p> 
<p>Grant ALL on testdb to userNameDBA@’%’</p> 
<p>ip没有限制</p> 
<p>设置能查询mysql服务器上所有数据库的表</p> 
<p>Grant select on *.* to userName@’%’</p> 
<p>username用户不管在哪登陆都能操作mysql所有的数据库和表</p> 
<p>Grant ALL on *.* to username@’%’</p> 
<p>Username用户可以管理mysql服务器中所有的数据库</p> 
<p>grant 作用在单个数据库上：</p> 
<p>grant select on testdb.* to username@localhost;</p> 
<p>grant 作用在单个数据表上：</p> 
<p>Grant select on testdb.tablename to username@’%’</p> 
<p>Grant作用在表的列上</p> 
<p>Grant select(id,sex,rank) on testdb.tableName to username@’%’</p> 
<p> </p> 
<p style="margin-left:0pt;">查看用户权限</p> 
<p style="margin-left:0pt;">Show grants for username</p> 
<p style="margin-left:0pt;">赋予权限</p> 
<p style="margin-left:0pt;">Grant select on databaseName.* to username</p> 
<p style="margin-left:0pt;">Grant select, update, delete, insert on databaseName.* to username</p> 
<p style="margin-left:0pt;">回收权限</p> 
<p style="margin-left:0pt;">Revoke select, delete on databaseName.* from username</p> 
<p style="margin-left:0pt;">每次权限的修改都需要刷新权限</p> 
<p style="margin-left:0pt;">Flush privileges；</p> 
<p style="margin-left:0pt;">设置整个数据库的权限</p> 
<p style="margin-left:0pt;">Grant ALL on databaseName.* to username和 revoke ALL</p> 
<p style="margin-left:0pt;">Grant ALL on databaseName.table to username</p> 
<p style="margin-left:0pt;">授权给普通用户查询，插入，更新，删除对数据库所有表的权利</p> 
<p style="margin-left:0pt;">%标识这个用户ip没有限制</p> 
<p style="margin-left:0pt;">grant select, insert, update, delete on testdb.* to common_user@’%’</p> 
<p style="margin-left:0pt;">授权给开发者用户在testdb数据库创建表的权限，</p> 
<p style="margin-left:0pt;">限制ip只能是192.168.0开头的用户</p> 
<p style="margin-left:0pt;">grant create on testdb.* to <a href="mailto:developer@%E2%80%99192.168.0.%25%E2%80%99;" rel="nofollow"><u><span style="color:#0000ff;"><u>developer@’192.168.0.%’;</u></span></u></a></p> 
<p style="margin-left:0pt;">设置索引的权限 设置用户在数据库上创建索引的权限</p> 
<p style="margin-left:0pt;">限制ip只能是192.168.0开头的用户</p> 
<p style="margin-left:0pt;">grant index on testdb.* to <a href="mailto:userName@%E2%80%99192.168.0.%25%E2%80%99;" rel="nofollow"><u><span style="color:#0000ff;"><u>userName@</u></span></u><u><span style="color:#0000ff;"><u>’</u></span></u><u><span style="color:#0000ff;"><u>192.168.0.%</u></span></u><u><span style="color:#0000ff;"><u>’</u></span></u><u><span style="color:#0000ff;"><u>;</u></span></u></a></p> 
<p style="margin-left:0pt;">设置存储过程的权限</p> 
<p style="margin-left:0pt;">grant create routine on testdb.* to <a href="mailto:username@%E2%80%99192.168.0.%25%E2%80%99;" rel="nofollow"><u><span style="color:#0000ff;"><u>username@</u></span></u><u><span style="color:#0000ff;"><u>’</u></span></u><u><span style="color:#0000ff;"><u>192.168.0.%</u></span></u><u><span style="color:#0000ff;"><u>’</u></span></u><u><span style="color:#0000ff;"><u>;</u></span></u></a></p> 
<p style="margin-left:0pt;">grant alter routine on testdb.* to <a href="mailto:developer@%E2%80%99192.168.0.%25%E2%80%99;" rel="nofollow"><u><span style="color:#0000ff;"><u>developer@’192.168.0.%’;</u></span></u></a></p> 
<pre><code class="language-html hljs">https://www.cnblogs.com/Richardzhu/p/3318595.html  这个链接是mysql权限管理详解</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1ee8dd7d4761cc906db0cfe3673ca56c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">对Yelp dataset 中的数据进行json格式转csv操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c07b91f90400f376de020ea65a7ee596/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序上传图片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>