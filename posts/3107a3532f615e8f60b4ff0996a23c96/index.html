<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样" />
<meta property="og:description" content="QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样 [1] QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样一、本自制虚拟键盘特点二、windows打开系统自带软键盘三、让键盘界面保持在最上方、不改变底层界面焦点四、长按按键重复输入键盘内容五、模拟键盘点击事件完成虚拟键盘输入六、键盘符号输入七、界面八、头文件代码九、源文件代码十、使用示例十一、效果 [2] Qt在Win下调用系统的软键盘，区分win7\win8\win10 [1] QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样 原文链接：https://blog.csdn.net/qq_41632571/article/details/125808787
一、本自制虚拟键盘特点 1.键盘界面保持在所有界面最上方。
2.点击键盘按钮不会改变底层文本输入框焦点。
3.通过模拟键盘点击事件完成键盘输入文本信息。
4.包含各种键盘自带符号输入。
5.长按按键可以持续重复输入键盘内容。
6.支持win7、win10、Linux等各个系统。
7.界面好看。
总之跟真的虚拟键盘一样，不会有不爽的地方
二、windows打开系统自带软键盘 QDesktopServices::openUrl(QUrl(&#34;osk.exe&#34;, QUrl::TolerantMode)); 传统打开系统自带虚拟键盘的方法如上，一行代码即可，但是系统自带的虚拟键盘不一定好用，有的按键太小，有的电脑上可能没有自带的软键盘，干脆直接写一个。
三、让键盘界面保持在最上方、不改变底层界面焦点 很多自制键盘时不知道怎么使键盘保持在最顶层，发现点击键盘界面后系统焦点在键盘界面上了，光标不在底层的行输入框里，就通过输入完成后点击确定的方式将键盘内容传到底层界面，显得不nice，其实这两个问题都很简单能够解决，代码如下
this-&gt;setWindowFlags(Qt::WindowStaysOnTopHint | Qt::WindowDoesNotAcceptFocus); Qt::WindowStaysOnTopHint 设置窗口置顶
Qt::WindowDoesNotAcceptFocus 设置无焦点窗口
四、长按按键重复输入键盘内容 特别是我们点击退格删除键时，文本比较多是我们使用真实键盘就会长按退格键把十多个文本挨个删除，而使用虚拟键盘时要按十多次退格键，显得不nice。那么我们使用QPushButton的setAutoRepeat为true，就可以实现按键长按功能了，设置重复操作延时为500ms差不多了，按下的时长超过500ms后马上再次执行按键槽函数。
pbtn-&gt;setAutoRepeat(true); //允许自动重复 pbtn-&gt;setAutoRepeatDelay(500);//设置重复操作的时延 五、模拟键盘点击事件完成虚拟键盘输入 一些自制虚拟键盘完成键盘输入的方式是同传递文本到输入框的方式，话不多说，就是不nice。点击虚拟按键直接发送对应的按键点击事件就很nice，这样其实就不会太死，甚至中文输入也可以，我们写的是键盘，不是写中文输入法，那些下载网上含有中文输入法的库的大可不必，输入法你系统用的什么就是什么。如果你想中文输入，系统下载的有搜狗输入法，你的键盘只需按下ctrl&#43;shift切换输入法即可，而不是在键盘里实现中文输入法的功能。那样不nice，模拟发送按键点击事件代码如下。
QPushButton* pbtn = (QPushButton*)sender(); if (pbtn-&gt;text() &gt;= &#39;a&#39; &amp;&amp; pbtn-&gt;text() &lt;= &#39;z&#39;) { QKeyEvent keyPress(QEvent::KeyPress, int(pbtn-&gt;text().at(0).toLatin1()) - 32, Qt::NoModifier, pbtn-&gt;text()); QKeyEvent keyRelease(QEvent::KeyRelease, int(pbtn-&gt;text().at(0).toLatin1()) - 32, Qt::NoModifier, pbtn-&gt;text()); QApplication::sendEvent(m_focusWidget-&gt;focusWidget(), &amp;keyPress); QApplication::sendEvent(m_focusWidget-&gt;focusWidget(), &amp;keyRelease); } 通过QApplication::sendEvent发送一个按键按下和按键松开的事件就相当于模拟一个按键按下事件" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3107a3532f615e8f60b4ff0996a23c96/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-08T08:15:31+08:00" />
<meta property="article:modified_time" content="2023-05-08T08:15:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样</h4> 
 <ul><li><a href="#1_QT__6" rel="nofollow">[1] QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样</a></li><li><ul><li><a href="#_10" rel="nofollow">一、本自制虚拟键盘特点</a></li><li><a href="#windows_27" rel="nofollow">二、windows打开系统自带软键盘</a></li><li><a href="#_34" rel="nofollow">三、让键盘界面保持在最上方、不改变底层界面焦点</a></li><li><a href="#_42" rel="nofollow">四、长按按键重复输入键盘内容</a></li><li><a href="#_49" rel="nofollow">五、模拟键盘点击事件完成虚拟键盘输入</a></li><li><a href="#_75" rel="nofollow">六、键盘符号输入</a></li><li><a href="#_108" rel="nofollow">七、界面</a></li><li><a href="#_110" rel="nofollow">八、头文件代码</a></li><li><a href="#_153" rel="nofollow">九、源文件代码</a></li><li><a href="#_434" rel="nofollow">十、使用示例</a></li><li><a href="#_467" rel="nofollow">十一、效果</a></li></ul> 
  </li><li><a href="#2_QtWinwin7win8win10_470" rel="nofollow">[2] Qt在Win下调用系统的软键盘，区分win7\win8\win10</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="1_QT__6"></a>[1] QT自制软键盘 最完美、最简单、跟自带虚拟键盘一样</h2> 
<p>原文链接：<a href="https://blog.csdn.net/qq_41632571/article/details/125808787">https://blog.csdn.net/qq_41632571/article/details/125808787</a></p> 
<h3><a id="_10"></a>一、本自制虚拟键盘特点</h3> 
<p>1.键盘界面保持在所有界面最上方。</p> 
<p>2.点击键盘按钮不会改变底层文本输入框焦点。</p> 
<p>3.通过模拟键盘点击事件完成键盘输入文本信息。</p> 
<p>4.包含各种键盘自带符号输入。</p> 
<p>5.长按按键可以持续重复输入键盘内容。</p> 
<p>6.支持win7、win10、Linux等各个系统。</p> 
<p>7.界面好看。</p> 
<p>总之跟真的虚拟键盘一样，不会有不爽的地方</p> 
<h3><a id="windows_27"></a>二、windows打开系统自带软键盘</h3> 
<pre><code class="prism language-cpp"><span class="token class-name">QDesktopServices</span><span class="token double-colon punctuation">::</span><span class="token function">openUrl</span><span class="token punctuation">(</span><span class="token function">QUrl</span><span class="token punctuation">(</span><span class="token string">"osk.exe"</span><span class="token punctuation">,</span> QUrl<span class="token double-colon punctuation">::</span>TolerantMode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>传统打开系统自带虚拟键盘的方法如上，一行代码即可，但是系统自带的虚拟键盘不一定好用，有的按键太小，有的电脑上可能没有自带的软键盘，干脆直接写一个。</p> 
<h3><a id="_34"></a>三、让键盘界面保持在最上方、不改变底层界面焦点</h3> 
<p>很多自制键盘时不知道怎么使键盘保持在最顶层，发现点击键盘界面后系统焦点在键盘界面上了，光标不在底层的行输入框里，就通过输入完成后点击确定的方式将键盘内容传到底层界面，显得不nice，其实这两个问题都很简单能够解决，代码如下</p> 
<pre><code class="prism language-cpp"><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowFlags</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowStaysOnTopHint <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>WindowDoesNotAcceptFocus<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>Qt::WindowStaysOnTopHint 设置窗口置顶<br> Qt::WindowDoesNotAcceptFocus 设置无焦点窗口</p> 
<h3><a id="_42"></a>四、长按按键重复输入键盘内容</h3> 
<p>特别是我们点击退格删除键时，文本比较多是我们使用真实键盘就会长按退格键把十多个文本挨个删除，而使用虚拟键盘时要按十多次退格键，显得不nice。那么我们使用QPushButton的setAutoRepeat为true，就可以实现按键长按功能了，设置重复操作延时为500ms差不多了，按下的时长超过500ms后马上再次执行按键槽函数。</p> 
<pre><code class="prism language-cpp">pbtn<span class="token operator">-&gt;</span><span class="token function">setAutoRepeat</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//允许自动重复</span>
pbtn<span class="token operator">-&gt;</span><span class="token function">setAutoRepeatDelay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置重复操作的时延</span>
</code></pre> 
<h3><a id="_49"></a>五、模拟键盘点击事件完成虚拟键盘输入</h3> 
<p>一些自制虚拟键盘完成键盘输入的方式是同传递文本到输入框的方式，话不多说，就是不nice。点击虚拟按键直接发送对应的按键点击事件就很nice，这样其实就不会太死，甚至中文输入也可以，我们写的是键盘，不是写中文输入法，那些下载网上含有中文输入法的库的大可不必，输入法你系统用的什么就是什么。如果你想中文输入，系统下载的有搜狗输入法，你的键盘只需按下ctrl+shift切换输入法即可，而不是在键盘里实现中文输入法的功能。那样不nice，模拟发送按键点击事件代码如下。</p> 
<pre><code class="prism language-cpp">	QPushButton<span class="token operator">*</span> pbtn <span class="token operator">=</span> <span class="token punctuation">(</span>QPushButton<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token char">'a'</span> <span class="token operator">&amp;&amp;</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token char">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>通过QApplication::sendEvent发送一个按键按下和按键松开的事件就相当于模拟一个按键按下事件</p> 
<p>QKeyEvent说明：</p> 
<p>QKeyEvent::QKeyEvent(QEvent::Type type, int key, Qt::KeyboardModifiers modifiers, const QString &amp;text = QString(), bool autorep = false, ushort count = 1)</p> 
<p>类型参数必须为QEvent::KeyPress、QEvent::KeyRelease或QEvent::ShortcutOverride。</p> 
<p>Int key是事件循环应该监听的Qt:: key的代码。 如果key为0，则事件不是已知键的结果; 例如，它可能是组合序列或键盘宏的结果。 修饰符包含键盘修饰符，给定的文本是键生成的Unicode文本。 如果autorep为真，isAutoRepeat()将为真。 Count是事件中涉及的键的数量。</p> 
<p>QKeyEvent在我们这里用4个参数就行了，第二个参数Qt:: key对应的按键，第四个参数是需要发送的文本，没有这个参数是无法输入任何内容的。</p> 
<p>QApplication::sendEvent的第一个参数非常重要，是接收键盘输入的控件，比如是底层界面的lineEdit。</p> 
<h3><a id="_75"></a>六、键盘符号输入</h3> 
<pre><code class="prism language-cpp">m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"~"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_AsciiTilde<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"`"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_nobreakspace<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Minus<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Underscore<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Plus<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Equal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Comma<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Period<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Slash<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"&lt;"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Less<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"&gt;"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Greater<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Question<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BracketLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"]"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BracketRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"{"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BraceLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"}"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BraceRight<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Backslash<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Colon<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Semicolon<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"\""</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_QuoteLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"'"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Apostrophe<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
	QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>键盘输入特定的符号重要是找到QKeyEvent第二个参数对应的按键值即可。按键中的值被都在qnamespace.h的头文件中的enum Key枚举类型内。</p> 
<h3><a id="_108"></a>七、界面</h3> 
<p><img src="https://images2.imgbox.com/79/01/0LHLD4Wf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_110"></a>八、头文件代码</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">execution_character_set</span><span class="token punctuation">(</span></span><span class="token string">"utf-8"</span><span class="token expression"><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDialog&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_frmKeyBoard.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"moveWidget.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QKeyEvent&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStyle&gt;</span></span>
 
<span class="token keyword">class</span> <span class="token class-name">frmKeyBoard</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QDialog</span></span>
<span class="token punctuation">{<!-- --></span>
	Q_OBJECT
 
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">frmKeyBoard</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">~</span><span class="token function">frmKeyBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	<span class="token keyword">void</span> <span class="token function">initFocusWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">private</span> slots<span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">slotKeyButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">slotKeyLetterButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">slotKeyNumberButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">private</span><span class="token operator">:</span>
	Ui<span class="token double-colon punctuation">::</span>frmKeyBoardClass ui<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">initFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">initStyleSheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	QWidget<span class="token operator">*</span> m_focusWidget<span class="token punctuation">;</span>	<span class="token comment">//键盘输入主窗口</span>
 
	QVector<span class="token operator">&lt;</span>QPushButton<span class="token operator">*</span><span class="token operator">&gt;</span> m_letterKeys<span class="token punctuation">;</span>
	QVector<span class="token operator">&lt;</span>QPushButton<span class="token operator">*</span><span class="token operator">&gt;</span> m_NumberKeys<span class="token punctuation">;</span>
 
	QMap<span class="token operator">&lt;</span>QString<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key<span class="token operator">&gt;</span> m_mapSymbolKeys<span class="token punctuation">;</span>
 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<h3><a id="_153"></a>九、源文件代码</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"frmKeyBoard.h"</span></span>
 
frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">frmKeyBoard</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">QDialog</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ui<span class="token punctuation">.</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowFlags</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowStaysOnTopHint <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>FramelessWindowHint <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>WindowDoesNotAcceptFocus<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"屏幕键盘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowModality</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WindowModal<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WA_DeleteOnClose<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	MoveWidget<span class="token operator">*</span> moveWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MoveWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	moveWidget<span class="token operator">-&gt;</span><span class="token function">setWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">initFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">initStyleSheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token class-name">frmKeyBoard</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">frmKeyBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">initFocusWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> widget<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	m_focusWidget <span class="token operator">=</span> widget<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">initFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token punctuation">.</span>pushButton_closeKeyboard<span class="token operator">-&gt;</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">standardIcon</span><span class="token punctuation">(</span>QStyle<span class="token double-colon punctuation">::</span>SP_TitleBarCloseButton<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_letterKeys<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_NumberKeys<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	QList<span class="token operator">&lt;</span>QPushButton<span class="token operator">*</span><span class="token operator">&gt;</span> pbtns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">findChildren</span><span class="token generic class-name"><span class="token operator">&lt;</span>QPushButton<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">foreach</span><span class="token punctuation">(</span>QPushButton <span class="token operator">*</span> pbtn<span class="token punctuation">,</span> pbtns<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		pbtn<span class="token operator">-&gt;</span><span class="token function">setAutoRepeat</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//允许自动重复</span>
		pbtn<span class="token operator">-&gt;</span><span class="token function">setAutoRepeatDelay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置重复操作的时延</span>
 
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token char">'a'</span> <span class="token operator">&amp;&amp;</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token char">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">connect</span><span class="token punctuation">(</span>pbtn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>frmKeyBoard<span class="token double-colon punctuation">::</span>slotKeyLetterButtonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_letterKeys<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pbtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">9</span> <span class="token operator">||</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">connect</span><span class="token punctuation">(</span>pbtn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>frmKeyBoard<span class="token double-colon punctuation">::</span>slotKeyNumberButtonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_NumberKeys<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pbtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">connect</span><span class="token punctuation">(</span>pbtn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>frmKeyBoard<span class="token double-colon punctuation">::</span>slotKeyButtonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
 
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"~"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_AsciiTilde<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"`"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_nobreakspace<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Minus<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Underscore<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Plus<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"="</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Equal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Comma<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Period<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Slash<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"&lt;"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Less<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"&gt;"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Greater<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Question<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BracketLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"]"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BracketRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"{"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BraceLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"}"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_BraceRight<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"|"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Backslash<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Colon<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Semicolon<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"\""</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_QuoteLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"'"</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Apostrophe<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">initStyleSheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	QString qss<span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"QWidget{ background-color:rgb(26,26,26)}"</span><span class="token punctuation">;</span>
    qss <span class="token operator">+=</span> <span class="token string">"QPushButton{ color:white; background-color:rgb(51,51,51); height:60px; font-size:bold 15pt; border:1px solid rgb(26,26,26); border-radius: 0px; min-width:50px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"QPushButton:hover{background-color:rgb(229,229,229); color:black;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"QPushButton:pressed,QPushButton:checked{background-color:rgb(0,118,215);}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_closeKeyboard{background-color:rgba(0,0,0,0); border:0px}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_closeKeyboard:hover{background-color:#b30220;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_space{min-width:500px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_backspace,#pushButton_shift{min-width:100px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_enter{min-width:120px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_tab,#pushButton_ctrl{min-width:70px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_capsLock{min-width:80px;}"</span><span class="token punctuation">;</span>
	qss <span class="token operator">+=</span> <span class="token string">"#pushButton_up{min-width:150px;}"</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span>qss<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">slotKeyButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	QPushButton<span class="token operator">*</span> pbtn <span class="token operator">=</span> <span class="token punctuation">(</span>QPushButton<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	QString objectName <span class="token operator">=</span> pbtn<span class="token operator">-&gt;</span><span class="token function">objectName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>objectName <span class="token operator">==</span> <span class="token string">"pushButton_closeKeyboard"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Backspace"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Backspace<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Backspace<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Caps"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>	
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Space"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Space<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Space<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Tab"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Tab<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Tab<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Enter"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Enter<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Enter<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Shift"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Shift<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Shift<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Ctrl"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Control<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Control<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Win"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Menu<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Menu<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Alt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Alt<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Alt<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"↑"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Up<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Up<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"↓"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Down<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Down<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"←"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Left<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Left<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"→"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Right<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Key_Right<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		QString symbol<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			symbol <span class="token operator">=</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			symbol <span class="token operator">=</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> m_mapSymbolKeys<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//取消组合键按下</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Shift"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Ctrl"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Win"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Alt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">slotKeyLetterButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	QPushButton<span class="token operator">*</span> pbtn <span class="token operator">=</span> <span class="token punctuation">(</span>QPushButton<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token char">'a'</span> <span class="token operator">&amp;&amp;</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token char">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token char">'A'</span> <span class="token operator">&amp;&amp;</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//取消组合键按下</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">void</span> frmKeyBoard<span class="token double-colon punctuation">::</span><span class="token function">slotKeyNumberButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	QPushButton<span class="token operator">*</span> pbtn <span class="token operator">=</span> <span class="token punctuation">(</span>QPushButton<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	QKeyEvent <span class="token function">keyPress</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">48</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	QKeyEvent <span class="token function">keyRelease</span><span class="token punctuation">(</span>QEvent<span class="token double-colon punctuation">::</span>KeyRelease<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">48</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>NoModifier<span class="token punctuation">,</span> pbtn<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyPress<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">QApplication</span><span class="token double-colon punctuation">::</span><span class="token function">sendEvent</span><span class="token punctuation">(</span>m_focusWidget<span class="token operator">-&gt;</span><span class="token function">focusWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>keyRelease<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//取消组合键按下</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ui<span class="token punctuation">.</span>pushButton_shift<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pbtnKey <span class="token operator">:</span> m_letterKeys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			pbtnKey<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>pbtnKey<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_ctrl<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_win<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ui<span class="token punctuation">.</span>pushButton_alt<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
</code></pre> 
<h3><a id="_434"></a>十、使用示例</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>
 
<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>MainWindow<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    QHBoxLayout<span class="token operator">*</span> layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>pushButton<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>AlignRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>lineEdit<span class="token operator">-&gt;</span><span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
 
<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
 
<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButton_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    frmKeyBoard<span class="token operator">*</span> keyBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">frmKeyBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    keyBoard<span class="token operator">-&gt;</span><span class="token function">initFocusWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    keyBoard<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_467"></a>十一、效果</h3> 
<p><img src="https://images2.imgbox.com/07/91/gtCko36r_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_QtWinwin7win8win10_470"></a>[2] Qt在Win下调用系统的软键盘，区分win7\win8\win10</h2> 
<p><a href="https://blog.csdn.net/hss2799/article/details/111626829?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-111626829-blog-100572369.235%5Ev32%5Epc_relevant_default_base3&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3">https://blog.csdn.net/hss2799/article/details/111626829?utm_medium=distribute.pc_relevant.none-task-blog-2<sub>default</sub>baidujs_baidulandingword~default-0-111626829-blog-100572369.235<sup>v32</sup>pc_relevant_default_base3&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3</a></p> 
<pre><code class="prism language-cpp"> 
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QOperatingSystemVersion&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDesktopServices&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QUrl&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QUrl&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">comment</span><span class="token punctuation">(</span>lib<span class="token punctuation">,</span> </span><span class="token string">"user32.lib"</span><span class="token expression"><span class="token punctuation">)</span></span><span class="token comment">//打开屏幕键盘使用头文件</span></span>
 
<span class="token comment">//调用系统键盘</span>
<span class="token keyword">void</span> <span class="token function">systemKeyboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">QOperatingSystemVersion</span><span class="token double-colon punctuation">::</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> QOperatingSystemVersion<span class="token double-colon punctuation">::</span>Windows7<span class="token punctuation">)</span><span class="token comment">//版本大于win7</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//win8.1   win10 下使用</span>
        PVOID OldValue <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        BOOL bRet <span class="token operator">=</span> <span class="token function">Wow64DisableWow64FsRedirection</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>OldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        QString csProcess <span class="token operator">=</span> <span class="token string">"C:\\Windows\\System32\\osk.exe"</span><span class="token punctuation">;</span>
        QString params<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token function">ShellExecute</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> L<span class="token string">"open"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>LPCWSTR<span class="token punctuation">)</span>csProcess<span class="token punctuation">.</span><span class="token function">utf16</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>LPCWSTR<span class="token punctuation">)</span>params<span class="token punctuation">.</span><span class="token function">utf16</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> SW_SHOWNORMAL<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bRet<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">Wow64RevertWow64FsRedirection</span><span class="token punctuation">(</span>OldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//只能在win7下使用</span>
        <span class="token class-name">QDesktopServices</span><span class="token double-colon punctuation">::</span><span class="token function">openUrl</span><span class="token punctuation">(</span><span class="token function">QUrl</span><span class="token punctuation">(</span><span class="token string">"osk.exe"</span><span class="token punctuation">,</span> QUrl<span class="token double-colon punctuation">::</span>TolerantMode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/33a898f48295f1e03b3a4737479a97bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">服务器购买到宝塔网站搭建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/863948bd68585c86b5279e02dd784811/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt 多语言界面设计概述</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>