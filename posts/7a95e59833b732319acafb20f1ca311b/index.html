<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>lucene&amp;solr入门（二） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="lucene&amp;solr入门（二）" />
<meta property="og:description" content="一、Solr概述 Solr 是Apache下的一个顶级开源项目，采用Java开发，它是基于Lucene的全文搜索服务。Solr自带服务器功能，可以通过命令方式直接启动solr服务。也可以把solr部署到Jetty、Tomcat等其他Servlet容器中运行。
Solr与lucene的关系 Lucene是一个开放源代码的全文检索引擎工具包，它不是一个完整的全文检索应用。Lucene仅提供了完整的查询引擎和索引引擎，目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者以Lucene为基础构建全文检索应用。Solr的目标是打造一款企业级的搜索引擎系统，它是基于Lucene一个搜索引擎服务，可以独立运行，通过Solr可以非常快速的构建企业的搜索引擎，通过Solr也可以高效的完成站内搜索功能。
二、Solv安装配置 2.1 下载Solr 下载地址：http://archive.apache.org/dist/lucene/solr/
如果是Windows版本，那么下载完成后直接解压缩到指定目录即可。目录结果如下图所示：
bin：solr的运行脚本；
contrib：solr相关的第三方扩展jar包；
dist：该目录包含build过程中产生的war和jar文件，以及相关的依赖文件；
docs：api文档；
example：solr工程的示例；
licenses：各种许可和协议；
server：solr自带的服务器目录。其中有两个比较重要的目录：
|- solr：运行Solr的配置文件都保存在这里。其中，它包含一个子文件夹configsets，该文件夹存放了solr的示例配置文件
|- solr-webapp：solr后台管理系统所在目录
2.2 启动自带solr服务 第一步：在命令行进入solr/bin目录，然后执行solr start命令即可。
solr服务默认监听8983端口。启动成功后，在浏览器上输入localhost:8983/solr即可打开solr管理界面。
2.3 创建solr core 一个solr core就是一个索引库。一个solr服务器上可以有多个solr core。
第一步：进入%solr_home%/server/solr目录，新建一个目录，该目录作为一个索引库目录存放我们创建的索引。
第二步：将%solr_home%\server\solr\configsets\sample_techproducts_configs目录下的conf文件夹拷贝到solrtest目录中。
第三步：重启solr服务。
solr restart -p 8983 例如：
启动成功后，重新访问solr管理界面。
第四步：点击左边Core Admin菜单，然后点击Add Core，在name和InstanceDir输入框中输入solr core文件夹的名称，输入完后点击蓝色的Add Core按钮。
这时候在左边core selector中可以看到我们创建的solr core。
2.4 管理界面介绍 （1）DashBoard
仪表盘，显示了该Solr实例开始启动运行的时间、版本、系统资源、jvm等信息。
（2）Logging
Solr运行日志信息。
（3）Core Admin
Solr Core管理界面，在这里可以添加SolrCore实例。
（4）Java Properties
Solr在JVM 运行环境中的属性信息，包括类路径、文件编码、jvm内存设置等信息。
（5）Thread Dump
显示Solr Server中当前活跃线程信息，同时也可以跟踪线程运行栈信息。
（6）Core Selector" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7a95e59833b732319acafb20f1ca311b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-05T11:44:48+08:00" />
<meta property="article:modified_time" content="2019-09-05T11:44:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">lucene&amp;solr入门（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Solr_0"></a>一、Solr概述</h2> 
<p>Solr 是Apache下的一个顶级开源项目，采用Java开发，它是基于Lucene的全文搜索服务。Solr自带服务器功能，可以通过命令方式直接启动solr服务。也可以把solr部署到Jetty、Tomcat等其他Servlet容器中运行。</p> 
<ul><li>Solr与lucene的关系</li></ul> 
<p>Lucene是一个开放源代码的全文检索引擎工具包，它不是一个完整的全文检索应用。Lucene仅提供了完整的查询引擎和索引引擎，目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者以Lucene为基础构建全文检索应用。Solr的目标是打造一款企业级的搜索引擎系统，它是基于Lucene一个搜索引擎服务，可以独立运行，通过Solr可以非常快速的构建企业的搜索引擎，通过Solr也可以高效的完成站内搜索功能。</p> 
<h2><a id="Solv_8"></a>二、Solv安装配置</h2> 
<h3><a id="21_Solr_9"></a>2.1 下载Solr</h3> 
<p>下载地址：http://archive.apache.org/dist/lucene/solr/</p> 
<p>如果是Windows版本，那么下载完成后直接解压缩到指定目录即可。目录结果如下图所示：<br> <img src="https://images2.imgbox.com/e0/47/b90onhyv_o.png" alt="在这里插入图片描述"><br> bin：solr的运行脚本；<br> contrib：solr相关的第三方扩展jar包；<br> dist：该目录包含build过程中产生的war和jar文件，以及相关的依赖文件；<br> docs：api文档；<br> example：solr工程的示例；<br> licenses：各种许可和协议；<br> server：solr自带的服务器目录。其中有两个比较重要的目录：<br>     |- solr：运行Solr的配置文件都保存在这里。其中，它包含一个子文件夹configsets，该文件夹存放了solr的示例配置文件<br>     |- solr-webapp：solr后台管理系统所在目录</p> 
<h3><a id="22_solr_24"></a>2.2 启动自带solr服务</h3> 
<p>第一步：在命令行进入solr/bin目录，然后执行solr start命令即可。<br> <img src="https://images2.imgbox.com/2e/38/HNZaaGeA_o.png" alt="在这里插入图片描述"><br> solr服务默认监听8983端口。启动成功后，在浏览器上输入localhost:8983/solr即可打开solr管理界面。<br> <img src="https://images2.imgbox.com/6c/9b/PwdbFtVn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23_solr_core_30"></a>2.3 创建solr core</h3> 
<p>一个solr core就是一个索引库。一个solr服务器上可以有多个solr core。</p> 
<p>第一步：进入%solr_home%/server/solr目录，新建一个目录，该目录作为一个索引库目录存放我们创建的索引。<br> <img src="https://images2.imgbox.com/6a/a3/ReVzAnv1_o.png" alt="在这里插入图片描述"><br> 第二步：将%solr_home%\server\solr\configsets\sample_techproducts_configs目录下的conf文件夹拷贝到solrtest目录中。</p> 
<p>第三步：重启solr服务。</p> 
<pre><code class="prism language-cmd">solr restart -p 8983
</code></pre> 
<p>例如：<br> <img src="https://images2.imgbox.com/17/fb/auS9ohvv_o.png" alt="在这里插入图片描述"><br> 启动成功后，重新访问solr管理界面。</p> 
<p>第四步：点击左边Core Admin菜单，然后点击Add Core，在name和InstanceDir输入框中输入solr core文件夹的名称，输入完后点击蓝色的Add Core按钮。</p> 
<p><img src="https://images2.imgbox.com/52/c6/xJZYURXd_o.png" alt="在这里插入图片描述"><br> 这时候在左边core selector中可以看到我们创建的solr core。<br> <img src="https://images2.imgbox.com/3f/9a/qZM7x7Cn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24__50"></a>2.4 管理界面介绍</h3> 
<p>（1）DashBoard</p> 
<p>仪表盘，显示了该Solr实例开始启动运行的时间、版本、系统资源、jvm等信息。<br> <img src="https://images2.imgbox.com/af/ae/qJeHORxk_o.png" alt="在这里插入图片描述"></p> 
<p>（2）Logging</p> 
<p>Solr运行日志信息。</p> 
<p><img src="https://images2.imgbox.com/8f/b8/JOAJKXxG_o.png" alt="在这里插入图片描述"></p> 
<p>（3）Core Admin</p> 
<p>Solr Core管理界面，在这里可以添加SolrCore实例。</p> 
<p><img src="https://images2.imgbox.com/e8/0d/DL8cZe2Y_o.png" alt="在这里插入图片描述"></p> 
<p>（4）Java Properties</p> 
<p>Solr在JVM 运行环境中的属性信息，包括类路径、文件编码、jvm内存设置等信息。</p> 
<p><img src="https://images2.imgbox.com/3e/ad/H9a6aj5Y_o.png" alt="在这里插入图片描述"></p> 
<p>（5）Thread Dump</p> 
<p>显示Solr Server中当前活跃线程信息，同时也可以跟踪线程运行栈信息。</p> 
<p><img src="https://images2.imgbox.com/d9/26/FQzOGmKj_o.png" alt="在这里插入图片描述"></p> 
<p>（6）Core Selector</p> 
<p>选择一个SolrCore进行详细操作。具体操作如下所示：<br> <img src="https://images2.imgbox.com/25/fb/03hU48OT_o.png" alt="在这里插入图片描述"><br> 其中有几个比较常用的功能：</p> 
<p>Analysis：通过此界面可以测试索引分析器和搜索分析器的执行情况。<br> <img src="https://images2.imgbox.com/ae/7f/mUPClkVc_o.png" alt="在这里插入图片描述"></p> 
<p>Dataimport：定义数据导入处理器，可以从关系数据库将数据导入到Solr索引库中。默认没有配置，需要手工配置；</p> 
<p>Documents：通过/update表示更新索引，solr默认根据id（唯一约束）域来更新Document的内容，如果根据id值搜索不到id域则会执行添加操作，如果找到则更新；<br> <img src="https://images2.imgbox.com/e5/4f/ayDrayAj_o.png" alt="在这里插入图片描述"></p> 
<p>Query：通过/select执行搜索索引，必须指定“q”查询条件方可搜索。<br> <img src="https://images2.imgbox.com/cd/1a/gYW5Bo8H_o.png" alt="在这里插入图片描述"><br> q： 查询关键字；<br> <img src="https://images2.imgbox.com/7d/bd/RFw50q83_o.png" alt="在这里插入图片描述"><br> fq: (filter query)过滤查询，在q查询结果中再把符合fq的内容筛选出来；<br> <img src="https://images2.imgbox.com/c4/9d/wkRSxa31_o.png" alt="在这里插入图片描述"><br> sort：排序，desc代表降序，asc代表升序；<br> <img src="https://images2.imgbox.com/96/c9/DKuKBdSz_o.png" alt="在这里插入图片描述"><br> start: 分页显示使用，开始记录下标，从0开始；<br> rows：指定返回结果最多有多少条记录，配合start来实现分页；<br> <img src="https://images2.imgbox.com/7d/6c/g4IdHMoi_o.png" alt="在这里插入图片描述"><br> fl: (Field List)指定返回那些字段内容，用逗号或空格分隔多个；<br> <img src="https://images2.imgbox.com/40/56/PBfUxTkS_o.png" alt="在这里插入图片描述"><br> df:（Default Field）指定默认搜索Field；<br> <img src="https://images2.imgbox.com/9c/a3/TIct4fVk_o.png" alt="在这里插入图片描述"><br> wt: (writer type)指定输出格式，可以有xml、json等格式；<br> <img src="https://images2.imgbox.com/9e/b8/B4kQG5gy_o.png" alt="在这里插入图片描述"><br> hl: 是否高亮 ,设置高亮Field，设置格式前缀和后缀；<br> <img src="https://images2.imgbox.com/b5/0f/biqkOCrR_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Solrj_115"></a>三、Solrj的使用</h2> 
<h3><a id="31_solrj_116"></a>3.1 什么是solrj</h3> 
<p>solrj是访问Solr服务的java客户端，提供索引和搜索的请求方法。<br> <img src="https://images2.imgbox.com/75/f1/rBNzBCpP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__120"></a>3.2 环境搭建</h3> 
<p>搭建Maven工程，并引入solrj相关坐标；</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.solr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>solr-solrj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="33__130"></a>3.3 添加或修改索引</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateIndexTest</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 设置solr服务接口</span>
	String baseURL <span class="token operator">=</span> <span class="token string">"http://127.0.0.1:8983/solr/solrtest"</span><span class="token punctuation">;</span>
	
	SolrClient solrClient<span class="token punctuation">;</span>
	
	<span class="token annotation punctuation">@Before</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 创建SolrServer对象</span>
		solrClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpSolrClient<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>baseURL<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 添加和更新索引</span>
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 创建SolrInputDocument对象</span>
		SolrInputDocument document <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SolrInputDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 添加Field</span>
		document<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"103"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		document<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span><span class="token string">"content_ik"</span><span class="token punctuation">,</span> <span class="token string">"中华人民共和国"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 把SolrInputDocument对象添加到索引库中</span>
		solrClient<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 提交</span>
		solrClient<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<p>上面solrClient.add(document)方法会根据id域来更新Document的内容，如果根据id值搜索不到id域则会执行添加操作。</p> 
<h3><a id="34__166"></a>3.4 删除索引</h3> 
<pre><code class="prism language-java"><span class="token comment">// 根据条件删除</span>
solrClient<span class="token punctuation">.</span><span class="token function">deleteByQuery</span><span class="token punctuation">(</span><span class="token string">"*:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 提交</span>
solrClient<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>*<em>注意：*:<em>代表删除所有索引，需要慎用。</em></em></p> 
<h3><a id="35__177"></a>3.5 查询索引</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建搜索对象</span>
	SolrQuery query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SolrQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 设置搜索条件</span>
	query<span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string">"*:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 发起搜索请求</span>
	QueryResponse response <span class="token operator">=</span> solrClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 处理搜索结果</span>
	SolrDocumentList results <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"搜索到的结果总数："</span> <span class="token operator">+</span> results<span class="token punctuation">.</span><span class="token function">getNumFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 遍历搜索结果</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>SolrDocument solrDocument <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"content"</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="36__203"></a>3.6 复杂查询</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchIndex2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建搜索对象</span>
	SolrQuery solrQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SolrQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 设置查询条件</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string">"搜索引擎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置过滤条件</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setFilterQueries</span><span class="token punctuation">(</span><span class="token string">"bookName:lucene"</span><span class="token punctuation">,</span> <span class="token string">"bookPrice:[49 TO 99]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置排序</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setSort</span><span class="token punctuation">(</span><span class="token string">"bookPrice"</span><span class="token punctuation">,</span> ORDER<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置分页</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setRows</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置显示Field域</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setFields</span><span class="token punctuation">(</span><span class="token string">"id, bookName, bookPrice, bookPic, bookRemark"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置默认搜索Field域</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"df"</span><span class="token punctuation">,</span> <span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 设置高亮</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setHighlight</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">addHighlightField</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setHighlightSimplePre</span><span class="token punctuation">(</span><span class="token string">"&lt;font color=\"red\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	solrQuery<span class="token punctuation">.</span><span class="token function">setHighlightSimplePost</span><span class="token punctuation">(</span><span class="token string">"&lt;/font&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 查询数据</span>
	QueryResponse response <span class="token operator">=</span> solrClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>solrQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 获取查询结果的记录数</span>
	SolrDocumentList results <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"搜索到的数据总条数："</span> <span class="token operator">+</span> results<span class="token punctuation">.</span><span class="token function">getNumFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;&gt;</span> map <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getHighlighting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 解析查询结果</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>SolrDocument solrDocument <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 显示高亮</span>
		List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"编号："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"书名："</span> <span class="token operator">+</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"书名："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"价格："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookPrice"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"图片："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookPic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"描述："</span> <span class="token operator">+</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookRemark"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_261"></a>四、配置中文分词器</h2> 
<p>第一步：下载ikanalyzer。</p> 
<p>下载地址：https://mvnrepository.com/artifact/com.jianggujin/IKAnalyzer-lucene/8.0.0<br> <img src="https://images2.imgbox.com/51/4a/Wz6wIrzA_o.png" alt="在这里插入图片描述"></p> 
<p>第二步：把下载好的jar包复制到%solr_home%\server\solr-webapp\webapp\WEB-INF\lib目录下。<br> <img src="https://images2.imgbox.com/dc/6d/EYKMPwtn_o.png" alt="在这里插入图片描述"></p> 
<p>第三步：把下面三个文件复制到%solr_home%\server\solr-webapp\webapp\WEB-INF\classes目录下。这三个文件可以从ikanalyzer.jar文件中获得。<br> <img src="https://images2.imgbox.com/23/ba/VWLiv0SA_o.png" alt="在这里插入图片描述"><br> 第四步：修改%solr_home%\server\solr\solrtest\conf\managed-schema文件，配置中文分词器。</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- ik分词器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldType</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text_ik<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>solr.TextField<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>analyzer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.wltea.analyzer.lucene.IKAnalyzer<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldType</span><span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content_ik<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text_ik<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>修改完成后重启solr服务，进入analysis页面，在Field Value中输入要分词的内容，然后再选择FieldType为content_ik，最后点击蓝色按钮即可。效果如下图所示：<br> <img src="https://images2.imgbox.com/ed/8d/uiEp37lV_o.png" alt="在这里插入图片描述"></p> 
<p>下面没有使用ikanalyzer分词器的效果（供大家参考）：<br> <img src="https://images2.imgbox.com/e1/ae/YLAPPaQz_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_287"></a>五、导入数据</h2> 
<p>需求：使用solr后台导入数据库中book表的数据到solr中。</p> 
<p>功能分析：<br> 1.需要在solr的schema.xml文件定义要存储的商品Field。<br> 2.需要把MySQL的数据导入到solr索引库中<br> 3.开发搜索功能</p> 
<h3><a id="51_jar_295"></a>5.1 引入jar包</h3> 
<p>复制%solr_home%/dist目录下的solr-dataimporthandler包到%solr_home%/contrib/dataimporthandler/lib目录下。<br> <img src="https://images2.imgbox.com/6d/fd/gXhqhoCq_o.png" alt="在这里插入图片描述"><br> 准备mysql驱动包，然后添加到%solr_home%\contrib\db\lib目录下。如果没有lib目录，则自己创建。<br> <img src="https://images2.imgbox.com/47/5b/sM7GEtp6_o.png" alt="在这里插入图片描述"><br> 修改%solr_home%\server\solr\solrtest\conf目录下的sqlrconfig.xml文件。修改内容如下：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lib</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${solr.install.dir:../..}/contrib/dataimporthandler/lib<span class="token punctuation">"</span></span> <span class="token attr-name">regex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.*\.jar<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lib</span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${solr.install.dir:../..}/contrib/db/lib<span class="token punctuation">"</span></span> <span class="token attr-name">regex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.*\.jar<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<h3><a id="52__306"></a>5.2 配置数据源</h3> 
<p>在%solr_home%\server\solr\solrtest\conf目录下新建data-config.xml文件，该文件配置了Document中每个Field与数据库表的对应关系。配置如下：</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataConfig</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 数据库信息 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>JdbcDataSource<span class="token punctuation">"</span></span> 
        <span class="token attr-name">driver</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span> 
        <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/solr<span class="token punctuation">"</span></span> 
        <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>document</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- document实体 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entity</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book<span class="token punctuation">"</span></span> <span class="token attr-name">query</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SELECT * FROM book<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 数据库字段映射solr字段 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookName<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>price<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookPrice<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pic<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookPic<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>remark<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookRemark<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entity</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>document</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataConfig</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>修改%solr_home%\server\solr\solrtest\conf目录下的sqlrconfig.xml文件：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>requestHandler</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/dataimport<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.apache.solr.handler.dataimport.DataImportHandler<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lst</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>defaults<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>str</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>config<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>data-config.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>str</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lst</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>requestHandler</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="53_Field_338"></a>5.3 配置Field</h3> 
<p>修改%solr_home%\server\solr\solrtest\conf目录下的managed-schema文件，在最后面加入下面内容：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookName<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text_ik<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookPrice<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pint<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookPic<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookRemark<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text_ik<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_keywords<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text_ik<span class="token punctuation">"</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">multiValued</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copyField</span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookName<span class="token punctuation">"</span></span> <span class="token attr-name">dest</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_keywords<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>copyField</span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookRemark<span class="token punctuation">"</span></span> <span class="token attr-name">dest</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>book_keywords<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>copyField：将多个Field复制到一个Field中，以便进行统一的检索。当创建索引时，solr服务器会自动的将source域的内容复制到dest目标域中。如果指定dest目标域为默认搜索域，可以提高查询效率。</p> 
<p>配置完成后，重启solr服务。</p> 
<h3><a id="54__354"></a>5.4 后台导入操作</h3> 
<p>点击Dataimport菜单，选择Entity，然后点击Execute按钮执行导入。导入成功后界面如下所示：<br> <img src="https://images2.imgbox.com/72/d0/yVefhYg1_o.png" alt="在这里插入图片描述"><br> 在Overview中可以看到索引库的信息。<br> <img src="https://images2.imgbox.com/a7/cb/gtNRGPL5_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="SpringBootsolr_360"></a>六、SpringBoot整合solr</h2> 
<h3><a id="springboot_361"></a>第一步：创建springboot项目，引入相关坐标。</h3> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-solr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_378"></a>第二步：创建实体类。</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> solrjtest<span class="token punctuation">.</span>beans<span class="token punctuation">;</span>

<span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String name<span class="token punctuation">;</span>
	<span class="token keyword">private</span> Integer price<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String pic<span class="token punctuation">;</span>
	<span class="token keyword">private</span> String remark<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Servicesolr_394"></a>第三步：创建Service接口，该接口定义一个方法，用于从solr中查询索引，并返回结果。</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBookService</span> <span class="token punctuation">{<!-- --></span>

	List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> <span class="token function">searchBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Service_403"></a>第四步：创建Service实现类。</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> solrjtest<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>client<span class="token punctuation">.</span>solrj<span class="token punctuation">.</span>SolrClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>client<span class="token punctuation">.</span>solrj<span class="token punctuation">.</span>SolrQuery<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>client<span class="token punctuation">.</span>solrj<span class="token punctuation">.</span>SolrQuery<span class="token punctuation">.</span>ORDER<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>client<span class="token punctuation">.</span>solrj<span class="token punctuation">.</span>response<span class="token punctuation">.</span>QueryResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>common<span class="token punctuation">.</span>SolrDocument<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>solr<span class="token punctuation">.</span>common<span class="token punctuation">.</span>SolrDocumentList<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token keyword">import</span> solrjtest<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>Book<span class="token punctuation">;</span>
<span class="token keyword">import</span> solrjtest<span class="token punctuation">.</span>service<span class="token punctuation">.</span>IBookService<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IBookService</span> <span class="token punctuation">{<!-- --></span>
	
	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> SolrClient solrClient<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> <span class="token function">searchBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>		
		<span class="token comment">// 创建搜索对象</span>
		SolrQuery solrQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SolrQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置查询条件</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token string">"搜索引擎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置过滤条件</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setFilterQueries</span><span class="token punctuation">(</span><span class="token string">"bookName:lucene"</span><span class="token punctuation">,</span> <span class="token string">"bookPrice:[49 TO 99]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置排序</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setSort</span><span class="token punctuation">(</span><span class="token string">"bookPrice"</span><span class="token punctuation">,</span> ORDER<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置分页</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setRows</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置显示Field域</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setFields</span><span class="token punctuation">(</span><span class="token string">"id, bookName, bookPrice, bookPic, bookRemark"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置默认搜索Field域</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"df"</span><span class="token punctuation">,</span> <span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 设置高亮</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setHighlight</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">addHighlightField</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setHighlightSimplePre</span><span class="token punctuation">(</span><span class="token string">"&lt;font color=\"red\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		solrQuery<span class="token punctuation">.</span><span class="token function">setHighlightSimplePost</span><span class="token punctuation">(</span><span class="token string">"&lt;/font&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 查询数据</span>
		QueryResponse response <span class="token operator">=</span> solrClient<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>solrQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 获取查询结果的记录数</span>
		SolrDocumentList results <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"搜索到的数据总条数："</span> <span class="token operator">+</span> results<span class="token punctuation">.</span><span class="token function">getNumFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;&gt;</span> map <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getHighlighting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> books <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 解析查询结果</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>SolrDocument solrDocument <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 显示高亮</span>
			List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取Field的值</span>
			String id <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String bookName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				bookName <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
				bookName <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">int</span> bookPrice <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String bookPic <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookPic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			String bookRemark <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> solrDocument<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"bookRemark"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">// 把获取到Field的值封装成Book对象</span>
			Book book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>bookName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			book<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>bookPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
			book<span class="token punctuation">.</span><span class="token function">setPic</span><span class="token punctuation">(</span>bookPic<span class="token punctuation">)</span><span class="token punctuation">;</span>
			book<span class="token punctuation">.</span><span class="token function">setRemark</span><span class="token punctuation">(</span>bookRemark<span class="token punctuation">)</span><span class="token punctuation">;</span>
			books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> books<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_501"></a>第五步：创建控制器。</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{<!-- --></span>
	
	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> IBookService bookService<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">"/list"</span><span class="token punctuation">,</span> produces<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ResponseBody</span>
	<span class="token keyword">public</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> bookService<span class="token punctuation">.</span><span class="token function">searchBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> null<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="solr_524"></a>第六步：配置solr。</h4> 
<pre><code class="prism language-xml">spring:
  data:
    solr:
      host: http://192.168.31.20:8983/solr/solrtest
</code></pre> 
<h3><a id="_532"></a>第七步：创建启动类。</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>最终在浏览器上看到的效果如下图所示：<br> <img src="https://images2.imgbox.com/0d/b5/EBoJT9PV_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b97405fbd1144a890ce0c03dd933fe3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常见文件头  文件幻数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf214dbb29ff3972c258ee5614f58fcd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【高数】幂级数求和函数问题：用变限积分？积分下限是0？S(0)怎么求？求和时起始项n和角标有规定吗？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>