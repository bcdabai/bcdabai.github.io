<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Poco库使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Poco库使用" />
<meta property="og:description" content="下载编译 Index of /releases
以运行调试HTTP库为例，使用vs2010打开samples解决方案（打开解决方案默认是编译32位，添加64位）
添加Foundation项目，并进行编译
修改输出目录..\..\..\bin64
就可以编译运行了
OutPut Directory ,它的值不会直接影响到你文件的输出，但它会间接的影响其他输出，比方说默认值中包含有$(OutDir)
Linker-&gt;General-&gt;OutPut File,输出文件，虽然填的是exe的路径,但.ilk文件会按这个路径输出.Linker-&gt;Debugging-&gt;Genrerate Program Database File,输出的pdb文件
发送Http请求
如果需要JSON库，先添加后编译， 同时添加头文件目录 ..\..\..\JSON\include
案例如下，因为工程是unicode编码的
#include &#34;Poco/JSON/Parser.h&#34; #include &#34;Poco/JSON/ParseHandler.h&#34; #include &#34;Poco/JSON/JSONException.h&#34; #include &#34;Poco/StreamCopier.h&#34; #include &#34;Poco/Dynamic/Var.h&#34; #include &#34;Poco/JSON/Query.h&#34; #include &#34;Poco/JSON/PrintHandler.h&#34; #include &#34;Poco/Net/HTTPClientSession.h&#34; #include &#34;Poco/Net/HTTPRequest.h&#34; #include &#34;Poco/Net/HTTPResponse.h&#34; #include &#34;Poco/StreamCopier.h&#34; #include &#34;Poco/Net/NetException.h&#34; #include &#34;Poco/Net/HTMLForm.h&#34; #include &#34;Poco/URI.h&#34; #include &lt;iostream&gt; using namespace Poco::Dynamic; using namespace Poco; using std::string; using namespace Poco::JSON; using namespace Poco::Net; int main() { try { std::string strUrl(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a1f6aa3ae673e106b33af2e01da639d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-06T10:34:34+08:00" />
<meta property="article:modified_time" content="2023-04-06T10:34:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Poco库使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>下载编译 <a href="https://pocoproject.org/releases/" rel="nofollow" title="Index of /releases">Index of /releases</a></p> 
<p>以运行调试HTTP库为例，使用vs2010打开samples解决方案（打开解决方案默认是编译32位，添加64位）</p> 
<p><img alt="" height="556" src="https://images2.imgbox.com/17/12/LQR7mcMn_o.png" width="968"></p> 
<p></p> 
<p>添加Foundation项目，并进行编译</p> 
<p><img alt="" height="509" src="https://images2.imgbox.com/89/42/WAUlzY7Q_o.png" width="1200"></p> 
<p> 修改输出目录..\..\..\bin64</p> 
<p><img alt="" height="315" src="https://images2.imgbox.com/1d/b4/WLt7N5a7_o.png" width="1080"></p> 
<p></p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/ab/ab/FGerGLd8_o.png" width="1095"></p> 
<p></p> 
<p>就可以编译运行了</p> 
<p>OutPut Directory ,它的值不会直接影响到你文件的输出，但它会间接的影响其他输出，比方说默认值中包含有$(OutDir)</p> 
<p>Linker-&gt;General-&gt;OutPut File,输出文件，虽然填的是exe的路径,但.ilk文件会按这个路径输出.Linker-&gt;Debugging-&gt;Genrerate Program Database File,输出的pdb文件</p> 
<p></p> 
<p>发送Http请求</p> 
<p>如果需要JSON库，先添加后编译， 同时添加头文件目录  ..\..\..\JSON\include</p> 
<p>案例如下，因为工程是unicode编码的</p> 
<pre><code class="language-cpp">#include "Poco/JSON/Parser.h"
#include "Poco/JSON/ParseHandler.h"
#include "Poco/JSON/JSONException.h"
#include "Poco/StreamCopier.h"
#include "Poco/Dynamic/Var.h"
#include "Poco/JSON/Query.h"
#include "Poco/JSON/PrintHandler.h" 
#include "Poco/Net/HTTPClientSession.h"
#include "Poco/Net/HTTPRequest.h"
#include "Poco/Net/HTTPResponse.h"
#include "Poco/StreamCopier.h"
#include "Poco/Net/NetException.h"
#include "Poco/Net/HTMLForm.h"
#include "Poco/URI.h" 
#include &lt;iostream&gt; 
using namespace Poco::Dynamic;
using namespace Poco;
using std::string;
using namespace Poco::JSON;
using namespace Poco::Net;
 
int main()
{
    try {
        std::string strUrl("http://www.weather.com.cn/data/sk/101010100.html");
        Poco::URI uri(strUrl);       
 
        HTTPClientSession session(uri.getHost(), uri.getPort());
        HTTPRequest request(HTTPRequest::HTTP_GET, uri.getPathAndQuery());
        session.sendRequest(request);
        HTTPResponse response;
        std::istream &amp;is = session.receiveResponse(response);
        const HTTPResponse::HTTPStatus &amp;status = response.getStatus();
        if (HTTPResponse::HTTPStatus::HTTP_OK == status) {
            std::string result;
            StreamCopier::copyToString(is, result);
            std::cout &lt;&lt; result &lt;&lt; result.size() &lt;&lt; std::endl;
            
        } else {
            std::cout &lt;&lt; status &lt;&lt; std::endl;
        }
        
 
    } catch (Poco::Exception &amp;e) {
        std::cout &lt;&lt; e.message() &lt;&lt; std::endl;
    }
	char ch;
	std::cin &gt;&gt; ch;
    return 0;
}</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p>1. 在引用的Poco的工程中，不能添加Poco的头文件路径 如: ../../include/Poco, 直接添加 ../../include/就可以了</p> 
<p>    使用头文件的时候 #include "Poco/ThreadPool.h"</p> 
<p></p> 
<p>2.http获取服务端返回的header信息</p> 
<p>HTTPClientSession &amp;httpClientSession;</p> 
<p>istream&amp; rs = httpClientSession.receiveResponse(response);</p> 
<p>if (reponse.has("signature"))<br> {<!-- --><br>         string strSign = reponse.get("signature");<br> }</p> 
<p></p> 
<p>3.openssl加解密的时候，已经将openssl的头文件拷贝到VS工程路径下，但是遇到 #include &lt;openssl/rsa.h&gt;这样的头文件无法找到，</p> 
<p>可以在VS工程中添加  .\</p> 
<p></p> 
<p>4.HTTPServerRequest获取get的参数</p> 
<p>HTMLForm form(request, request.stream());<br> NameValueCollection::ConstIterator it;<br> NameValueCollection::ConstIterator end;<br> if (!form.empty())<br> {<!-- --><br><br> it = form.begin();<br> end = form.end();<br> for (; it != end; ++it)<br> {<!-- --><br> cout &lt;&lt; it-&gt;first &lt;&lt; ": " &lt;&lt; it-&gt;second &lt;&lt; endl;<br> }<br><br> }</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ce161e39e5b58cc8d5ee31b27c90ab91/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">智能指针使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db9fa57a42c38a7915688c5f68d3b4c4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">修改SSH登陆后弹出内容</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>