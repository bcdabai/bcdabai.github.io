<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【SSH框架/国际物流商综平台】-06 javamail与spring集成 MailUtil,SimpleMailMessage,JavaMailSender,MimeMessag,helper - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【SSH框架/国际物流商综平台】-06 javamail与spring集成 MailUtil,SimpleMailMessage,JavaMailSender,MimeMessag,helper" />
<meta property="og:description" content="回顾： 1.用户—角色 Span 标签的样式:display:inline-block;width:200px
2. 角色…模块 zTree树展示权限列表
实际项目用得多，zTree的使用步骤：
1.导入js/css
2.jsp中引入js/css
3.组织 json 数据,手动拼接 json 串[{id:&#34;”,pld:&#34;”,name:〃”,checked:“true|false”}]
4.将这个json串向浏览器输出:response对象手动输出
5.客户端可以发出ajax请求，来得到这个json串
$,ajax({url:&#34;&#34;,dataType:“text”,type:&#34;GET”,success:function(){} });
注意多对多操作时，如果要操作中间表的关系，不需要加cascade
3.struts2异常处理框架 struts.xml文件中配置：
〈global-results〉
/WEB-INF/pages/error.jsp
&lt;exception-mapping exception=,zcn.itcast.jk.exception.SysException,z result= “error”/〉
&lt;/ global-exception-mappings&gt;
Action类中
throw new SysException。、&#39;7);
一.什么是 JavaMail JavaMail是提供给开发人员在应用程序中实现邮件发送和接收功能而提供的一 套标准开发类库，支持常用的邮件协议，如SMTP、POP3、IMAP ,开发人员使用 JavaMail编写邮件程序时，无需考虑底层的通信细节(Socket) , JavaMail也提供了能够 创建出各种复杂MIME格式的邮件内容的API。使用JavaMail ,我们可以实现类似 OutLook、FoxMail 的软件。
二.JavaMail的基本概述 1.邮件开发的相关协议 SMTP : Simple Message Transfer Protocal 发送协议默认端口 ： 25
POP : Post Office Protocal邮局协议。POP3这个版本用的最多,接收协议默认端口 ： 110
2 .邮件发送接收的过程分析 三.邮件开发的准备工作 1.申请邮箱 我这里申请的是新浪、网易邮箱，进入后开通P0P3/SMTP服务" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/432447b62ba68e647ddfa70958a13362/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-22T11:13:45+08:00" />
<meta property="article:modified_time" content="2021-10-22T11:13:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【SSH框架/国际物流商综平台】-06 javamail与spring集成 MailUtil,SimpleMailMessage,JavaMailSender,MimeMessag,helper</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>回顾：</h3> 
<h3><a id="1_1"></a>1.用户—角色</h3> 
<p>Span 标签的样式:display:inline-block;width:200px</p> 
<h3><a id="2__3"></a>2. 角色…模块</h3> 
<p>zTree树展示权限列表<br> 实际项目用得多，zTree的使用步骤：<br> 1.导入js/css<br> 2.jsp中引入js/css<br> 3.组织 json 数据,手动拼接 json 串[{id:"”,pld:"”,name:〃”,checked:“true|false”}]<br> 4.将这个json串向浏览器输出:response对象手动输出<br> 5.客户端可以发出ajax请求，来得到这个json串<br> $,ajax({url:"",dataType:“text”,type:"GET”,success:function(){} });<br> 注意多对多操作时，如果要操作中间表的关系，不需要加cascade</p> 
<h3><a id="3struts2_13"></a>3.struts2异常处理框架</h3> 
<p>struts.xml文件中配置：<br> 〈global-results〉<br> /WEB-INF/pages/error.jsp<br> <br> <br> &lt;exception-mapping exception=,zcn.itcast.jk.exception.SysException,z result= “error”/〉<br> &lt;/ global-exception-mappings&gt;<br> Action类中<br> throw new SysException。、'7);</p> 
<h3><a id="_JavaMail_23"></a>一.什么是 JavaMail</h3> 
<blockquote> 
 <p>JavaMail是提供给开发人员在应用程序中实现邮件发送和接收功能而提供的一 套标准开发类库，支持常用的邮件协议，如SMTP、POP3、IMAP ,开发人员使用 JavaMail编写邮件程序时，无需考虑底层的通信细节(Socket) , JavaMail也提供了能够 创建出各种复杂MIME格式的邮件内容的API。使用JavaMail ,我们可以实现类似 OutLook、FoxMail 的软件。</p> 
</blockquote> 
<h3><a id="JavaMail_25"></a>二.JavaMail的基本概述</h3> 
<h4><a id="1_26"></a>1.邮件开发的相关协议</h4> 
<p>SMTP : Simple Message Transfer Protocal 发送协议默认端口 ： 25<br> POP : Post Office Protocal邮局协议。POP3这个版本用的最多,接收协议默认端口 ： 110</p> 
<h4><a id="2__29"></a>2 .邮件发送接收的过程分析</h4> 
<p><img src="https://images2.imgbox.com/15/d0/BTA2kQ20_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_35"></a>三.邮件开发的准备工作</h3> 
<h4><a id="1_36"></a>1.申请邮箱</h4> 
<p>我这里申请的是新浪、网易邮箱，进入后开通P0P3/SMTP服务<br> P0P3/SMTP 服务<br> <img src="https://images2.imgbox.com/19/bc/Po1AmauR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_JavaMail_40"></a>2.引入 JavaMail</h4> 
<p>在jk2601_parentT程的pom.xml中添加如下依赖</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Javamail</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	    <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
	      <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
	      <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mail<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
	      <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.4</span><span class="token number">.4</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<p>为了让Spring与JavaMaii集成，还需要在jk260—parent工程的pom.xml引入如下依 赖：</p> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
		  <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
		  <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>context<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
		  <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{<!-- --></span>spring<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<p>如果是web项目,引入如下jar包</p> 
<p><img src="https://images2.imgbox.com/e0/1d/EmgT3ppt_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_68"></a>四.传统的邮件开发</h3> 
<pre><code class="prism language-java"><span class="token comment">//再开启一个新的线程完成邮件发送功能</span>
			<span class="token class-name">Thread</span> th <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
						<span class="token class-name">MailUtil</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getUserinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"新员工入职的系统账户通知"</span><span class="token punctuation">,</span> <span class="token string">"欢迎您加入本集团，您的用户名:"</span><span class="token operator">+</span>entity<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",初始密码："</span><span class="token operator">+</span><span class="token class-name">SysConstant</span><span class="token punctuation">.</span>DEFAULT_PASS<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			th<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__MailUtilsendMessage_85"></a>五.邮件发送的工具类的提取 MailUtil.sendMessage()</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailUtil</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> toAddr<span class="token punctuation">,</span><span class="token class-name">String</span> subject<span class="token punctuation">,</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> <span class="token string">"smtp.163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//指定邮件的发送服务器地址</span>
		props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//服务器是否要验证用户的身份信息</span>
		
		<span class="token class-name">Session</span> session <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//得到Session</span>
		session<span class="token punctuation">.</span><span class="token function">setDebug</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//代表启用debug模式，可以在控制台输出smtp协议应答的过程</span>
		
		
		<span class="token comment">//创建一个MimeMessage格式的邮件</span>
		<span class="token class-name">MimeMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//设置发送者</span>
		<span class="token class-name">Address</span> fromAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span><span class="token string">"itheima14@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//邮件地址</span>
		message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置发送的邮件地址</span>
		
		<span class="token comment">//设置接收者</span>
		<span class="token class-name">Address</span> toAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span>toAddr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//邮件地址</span>
		message<span class="token punctuation">.</span><span class="token function">setRecipient</span><span class="token punctuation">(</span><span class="token class-name">RecipientType</span><span class="token punctuation">.</span>TO<span class="token punctuation">,</span> toAddress<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置接收者的地址</span>
		
		<span class="token comment">//设置邮件的主题</span>
		message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//设置邮件的内容</span>
		message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//保存邮件</span>
		message<span class="token punctuation">.</span><span class="token function">saveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		
		<span class="token comment">//得到发送邮件的火箭</span>
		<span class="token class-name">Transport</span> transport <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getTransport</span><span class="token punctuation">(</span><span class="token string">"smtp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//火箭连接到服务器上</span>
		transport<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">"smtp.163.com"</span><span class="token punctuation">,</span><span class="token string">"itheima14"</span><span class="token punctuation">,</span><span class="token string">"iamsorry"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//火箭点火，发送</span>
		transport<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getAllRecipients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		
		<span class="token comment">//关闭通道</span>
		transport<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="JavaMail_136"></a>六.使用JavaMail实现员工登录信息的发送</h3> 
<p>业务需求：在员工信息添加时，同时需要向员工发送一封通知的邮件，以进行提示！<br> <img src="https://images2.imgbox.com/2b/52/oveC8Ua5_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1PO_140"></a>1.修改PO类与映射文件</h4> 
<p><img src="https://images2.imgbox.com/ab/7e/k7pTuZby_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_jUserCreatejsp__143"></a>2.修改 jUserCreate.jsp 页面</h4> 
<p><img src="https://images2.imgbox.com/8f/ad/FYEsmbSb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3UserServicelmpI_146"></a>3,进入业务逻辑层UserServicelmpI中</h4> 
<h3><a id="JavaMailSpring_148"></a>七.JavaMail与Spring集成开发</h3> 
<blockquote> 
 <p>Spring邮件抽象层的主要包为org. springframework. mai<br> 它包括了发送电子邮件的 主要接口 MailSender ,和其实现类SimpleMailMessage ,<br> 它封装了简单邮件的属性如 from, to,cc, subject,text<br> 包里还包含一棵以 MailException 为根的 checked Exception继承树，<br> 它们提供了对底层邮件系统异常的高级别抽象。要获得关于邮件 异常层次的更丰富的信息。</p> 
</blockquote> 
<blockquote> 
 <p>为了使用JavaMail中的一些特色，比如MIME类型的信件,spring提供了 MailSender 的一个子接口，org. springframework, mail, javamail. JavaMailSender,<br> Spring还提供了一个回调接口 org. springframework. mail, javamail. MimeMessagePreparator,<br> 用于准备 JavaMail 的 MIME 信件。</p> 
</blockquote> 
<p>这里简单的介绍了如何使用spring发送各种形式的邮件以及配置。<br> <img src="https://images2.imgbox.com/0a/df/fUrCbISR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1srcmailproperties_164"></a>1、在src目录下建立mail.properties文件里边包含一下内容</h4> 
<pre><code class="prism language-java">mail<span class="token punctuation">.</span>smtp<span class="token punctuation">.</span>host<span class="token operator">=</span>smtp<span class="token punctuation">.</span><span class="token number">163.</span>com
mail<span class="token punctuation">.</span>smtp<span class="token punctuation">.</span>auth<span class="token operator">=</span><span class="token boolean">true</span>
mail<span class="token punctuation">.</span>username<span class="token operator">=</span>itheimacca
mail<span class="token punctuation">.</span>password<span class="token operator">=</span>RGOKGSVFHCHJHDHH
mail<span class="token punctuation">.</span>from<span class="token operator">=</span>itheimacca<span class="token annotation punctuation">@163.com</span>

</code></pre> 
<h4><a id="2spring_applicationContextmailxml_175"></a>2、使用spring配置 applicationContext-mail.xml</h4> 
<p>/jk28_web/src/main/resources/spring/applicationContext-mail.xml</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>  
	xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>       
	xmlns<span class="token operator">:</span>p<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/p"</span>  
	xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>   
	xmlns<span class="token operator">:</span>tx<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/tx"</span>  
	xmlns<span class="token operator">:</span>aop<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/aop"</span>  
	xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>aop    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>aop<span class="token operator">/</span>spring<span class="token operator">-</span>aop<span class="token punctuation">.</span>xsd    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>tx    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>tx<span class="token operator">/</span>spring<span class="token operator">-</span>tx<span class="token punctuation">.</span>xsd    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context    
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>
	
	<span class="token generics"><span class="token punctuation">&lt;</span>description<span class="token punctuation">&gt;</span></span><span class="token class-name">JavaMail</span>的配置<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用context加载mail<span class="token punctuation">.</span>properties <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>context<span class="token operator">:</span>property<span class="token operator">-</span>placeholder location<span class="token operator">=</span><span class="token string">"classpath:mail.properties"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 配置一个用于发送简单邮件的bean   from代表邮件的发送者<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"mailMessage"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.mail.SimpleMailMessage"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"from"</span> value<span class="token operator">=</span><span class="token string">"${mail.from}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 邮件发送的<span class="token class-name">Sender</span>实现类的配置 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"mailSender"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.mail.javamail.JavaMailSenderImpl"</span><span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"host"</span> value<span class="token operator">=</span><span class="token string">"${mail.smtp.host}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token string">"${mail.username}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"${mail.password}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"defaultEncoding"</span> value<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"javaMailProperties"</span><span class="token operator">&gt;</span>
	         <span class="token generics"><span class="token punctuation">&lt;</span>props<span class="token punctuation">&gt;</span></span>
	              <span class="token operator">&lt;</span>prop key<span class="token operator">=</span><span class="token string">"mail.smtp.auth"</span><span class="token operator">&gt;</span>$<span class="token punctuation">{<!-- --></span>mail<span class="token punctuation">.</span>smtp<span class="token punctuation">.</span>auth<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>prop<span class="token operator">&gt;</span>
	              <span class="token operator">&lt;</span>prop key<span class="token operator">=</span><span class="token string">"mail.smtp.timeout"</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>prop<span class="token operator">&gt;</span>
	              <span class="token operator">&lt;</span>prop key<span class="token operator">=</span><span class="token string">"mail.debug"</span><span class="token operator">&gt;</span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>prop<span class="token operator">&gt;</span>
	         <span class="token operator">&lt;</span><span class="token operator">/</span>props<span class="token operator">&gt;</span>
	     <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="1__JavaMail02TesttestJavaMail_223"></a>1.发送简单邮件 JavaMail02Test.testJavaMail()</h5> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JavaMail02Test</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJavaMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"classpath:applicationContext-mail.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">SimpleMailMessage</span> message <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SimpleMailMessage</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"mailMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//加载简单邮件对象</span>
		<span class="token class-name">JavaMailSender</span> sender <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"mailSender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//得到邮件的发送对象，专门用于邮件发送</span>
		
		<span class="token comment">//设置简单邮件对象的属性</span>
		message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"spring与javamail的测试"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//主题</span>
		message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"hello,spring and javamail "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//内容</span>
		message<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"723422021@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//收件箱</span>
		
		
	    <span class="token comment">//发送邮件</span>
		sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="2HTML_250"></a>2.发送带有图片的邮件，以嵌入HTML的方式</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJavaMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"classpath:applicationContext-mail.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">JavaMailSender</span> sender <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"mailSender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 得到邮件的发送对象，专门用于邮件发送</span>

		<span class="token comment">// 发送一个允许带图片，同时带附件的邮件</span>
		<span class="token class-name">MimeMessage</span> message <span class="token operator">=</span> sender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建一封允许带图片，同时带附件的邮件对象</span>

		<span class="token comment">// 为了更好的操作MimeMessage对象，借用一个工具类来操作它</span>
		<span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 通过工具类设置主题，内容，图片，附件</span>
		helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"itheimacch@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"723422021@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"这是来自bh网22的一个请求"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello!!baby &lt;/h1&gt;"</span> <span class="token operator">+</span> <span class="token string">"&lt;a href=http://www.itheima.com&gt;黑马程序员&lt;/a&gt;"</span>
				<span class="token operator">+</span> <span class="token string">"&lt;img src=cid:image/&gt;&lt;/body&gt;&lt;/html&gt;"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 第二个参数说明内容要解析为html代码</span>

		<span class="token comment">// 添加图片</span>
		<span class="token class-name">FileSystemResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSystemResource</span><span class="token punctuation">(</span>
				<span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D://mailpic.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">addInline</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">,</span> resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

		sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3_282"></a>3.发送带附件的邮件</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMimeMessageHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"classpath:applicationContext-mail.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


		<span class="token class-name">JavaMailSenderImpl</span> mailSender <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JavaMailSenderImpl</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"mailSender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 3.创建一封允许带附件的邮件对象</span>
		<span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> mailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建出允许带附件的邮件对象</span>

		<span class="token comment">// 4.创建出一个用于操作MimeMessage的帮助类的对象</span>
		<span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 5.设置邮件的相关内容 （发送者，拼接者，主题，内容 ）</span>
		helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">"itheimacch@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">"723422021@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"带图片和附件的邮件测试"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello!!spring image html mail&lt;/h1&gt;"</span>
				<span class="token operator">+</span> <span class="token string">"&lt;a href=http://www.itheima.com&gt;黑马程序员&lt;/a&gt;"</span> <span class="token operator">+</span> <span class="token string">"&lt;/body&gt;&lt;/html&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// cid:是固定的，后面的image是自己定义的</span>
		
		<span class="token comment">//helper.setText("&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello!!spring image html mail&lt;/h1&gt;"</span>
		<span class="token comment">//		+ "&lt;a href=http://www.itheima.com&gt;黑马程序员&lt;/a&gt;" + "&lt;img src=cid:image/&gt;&lt;/body&gt;&lt;/html&gt;", true);// cid:是固定的，后面的image是自己定义的</span>

		<span class="token comment">// 指定image所在的位置（是指本地电脑）</span>
		<span class="token comment">//FileSystemResource img = new FileSystemResource(new File("D:\\mailpic.jpg"));// 将本地的图片转化成一个图片资源</span>
		<span class="token comment">//helper.addInline("image", img);// image的参数来自上面cid的取值</span>

		<span class="token comment">// 发送时带附件</span>
		<span class="token class-name">FileSystemResource</span> zipResource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSystemResource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\mail.rar"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		helper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span><span class="token string">"mail.rar"</span><span class="token punctuation">,</span> zipResource<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 发送邮件</span>
		 mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_323"></a>八.案例改写</h3> 
<h4><a id="1UserServicelmpI_SimpleMailMessage_JavaMailSender_324"></a>1.要在UserServicelmpI中注入相关的对象 SimpleMailMessage ,JavaMailSender</h4> 
<p>〃注入邮件发送相关的对象</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">SimpleMailMessage</span> mailMessage<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> mailSender<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMailMessage</span><span class="token punctuation">(</span><span class="token class-name">SimpleMailMessage</span> mailMessage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>mailMessage <span class="token operator">=</span> mailMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMailSender</span><span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span> mailSender<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>mailSender <span class="token operator">=</span> mailSender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2_338"></a>2.修改相关的配置</h4> 
<p>applicationContext-service.xml</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"cn.itcast.jk.service.impl.UserServiceImpl"</span><span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"baseDao"</span> ref<span class="token operator">=</span><span class="token string">"baseDao"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"mailMessage"</span> ref<span class="token operator">=</span><span class="token string">"mailMessage"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	    <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"mailSender"</span> ref<span class="token operator">=</span><span class="token string">"mailSender"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="3springjavaMail_349"></a>3.添加spring与javaMail集成的配置文件</h4> 
<p>applicationContext-mail.xml</p> 
<h4><a id="4U_mailproperties_351"></a>4.同时将邮件相关信息抽取至U mail.properties文件中</h4> 
<p>mail.properties</p> 
<h4><a id="5_353"></a>5.使用线程实现邮件发送</h4> 
<pre><code class="prism language-java"><span class="token comment">//spring集成javaMail</span>
		<span class="token class-name">Thread</span> th <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
					mailMessage<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getUserinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					mailMessage<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"新员工入职的系统账户通知"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					mailMessage<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"欢迎您加入本集团，您的用户名:"</span><span class="token operator">+</span>entity<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">",初始密码："</span><span class="token operator">+</span><span class="token class-name">SysConstant</span><span class="token punctuation">.</span>DEFAULT_PASS<span class="token punctuation">)</span><span class="token punctuation">;</span>
					
					mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mailMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		th<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="6_374"></a>6.测试</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c2520b56f6e717ad6a4c37aa9a7c2224/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在scrapy爬取微博热评时出现MySQLdb._exceptions.ProgrammingError错误</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a8f3b96c941189412f172a4d9ba99fd8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">redis：CLUSTER ADDSLOTS、CLUSTER DELSLOTS</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>