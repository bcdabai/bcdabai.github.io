<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>从0开始搭建vue3&#43;vite&#43;ts&#43;pinia项目 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="从0开始搭建vue3&#43;vite&#43;ts&#43;pinia项目" />
<meta property="og:description" content="目录
项目搭建选项
项目搭建步骤
本地开发环境
Vite脚手架构建项目
关联Git仓库
开发工具
安装pinia
安装Sass
安装Vant-UI
安装postcss-pxtorem（移动端项目）
安装axios
本地调试
环境变量
本地代理
全局UI组件
路由中间件
项目部署
nginx配置
jenkins自动化部署
自由风格配置
流水线配置
灰度部署方案
项目搭建选项 Vue3ViteTypeScriptaxiosPiniaSassVant-UI（M）、Element-UI（PC）Eslintpostcss-pxtorem（M） 项目搭建步骤 本地开发环境 安装nodejs，node版本建议大于16.0.0
Download | Node.js
Vite脚手架构建项目 官网：https://cn.vitejs.dev/guide/
关联Git仓库 初始化后的项目关联远程git仓库
开发工具 Visual Studio Code
配置.vscode/setting.json，自动校验eslint并修复
{ // 开启保存自动格式化 &#34;editor.formatOnSave&#34;: true, // 开启eslint校验 &#34;eslint.enable&#34;: true, &#34;recommendations&#34;: [&#34;Vue.volar&#34;, &#34;Vue.vscode-typescript-vue-plugin&#34;], &#34;editor.fontSize&#34;: 14, // vscode默认启用了根据文件类型自动设置tabsize的选项 &#34;editor.detectIndentation&#34;: false, // 重新设定tabsize &#34;editor.tabSize&#34;: 2, // #每次保存的时候将代码按eslint格式进行修复 &#34;editor.codeActionsOnSave&#34;: { &#34;source.fixAll.eslint&#34;: true }, // 校验文件类型 &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5598e0b54e25a73e31a7ce6a96de275b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-05T15:28:46+08:00" />
<meta property="article:modified_time" content="2023-06-05T15:28:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">从0开始搭建vue3&#43;vite&#43;ts&#43;pinia项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E9%80%89%E9%A1%B9-toc" style="margin-left:0px;"><a href="#%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E9%80%89%E9%A1%B9" rel="nofollow">项目搭建选项</a></p> 
<p id="%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4" rel="nofollow">项目搭建步骤</a></p> 
<p id="%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" rel="nofollow">本地开发环境</a></p> 
<p id="Vite%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:40px;"><a href="#Vite%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE" rel="nofollow">Vite脚手架构建项目</a></p> 
<p id="%E5%85%B3%E8%81%94Git%E4%BB%93%E5%BA%93-toc" style="margin-left:40px;"><a href="#%E5%85%B3%E8%81%94Git%E4%BB%93%E5%BA%93" rel="nofollow">关联Git仓库</a></p> 
<p id="%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7" rel="nofollow">开发工具</a></p> 
<p id="%E5%AE%89%E8%A3%85pinia-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85pinia" rel="nofollow">安装pinia</a></p> 
<p id="%E5%AE%89%E8%A3%85Sass-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85Sass" rel="nofollow">安装Sass</a></p> 
<p id="%E5%AE%89%E8%A3%85Vant-UI-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85Vant-UI" rel="nofollow">安装Vant-UI</a></p> 
<p id="%E5%AE%89%E8%A3%85postcss-pxtorem%EF%BC%88%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85postcss-pxtorem%EF%BC%88%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%EF%BC%89" rel="nofollow">安装postcss-pxtorem（移动端项目）</a></p> 
<p id="%E5%AE%89%E8%A3%85axios-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85axios" rel="nofollow">安装axios</a></p> 
<p id="%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95-toc" style="margin-left:40px;"><a href="#%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95" rel="nofollow">本地调试</a></p> 
<p id="%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">环境变量</a></p> 
<p id="%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%90%86-toc" style="margin-left:40px;"><a href="#%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%90%86" rel="nofollow">本地代理</a></p> 
<p id="%E5%85%A8%E5%B1%80UI%E7%BB%84%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E5%85%A8%E5%B1%80UI%E7%BB%84%E4%BB%B6" rel="nofollow">全局UI组件</a></p> 
<p id="%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6" rel="nofollow">路由中间件</a></p> 
<p id="%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;"><a href="#%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2" rel="nofollow">项目部署</a></p> 
<p id="nginx%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#nginx%E9%85%8D%E7%BD%AE" rel="nofollow">nginx配置</a></p> 
<p id="jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2-toc" style="margin-left:40px;"><a href="#jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2" rel="nofollow">jenkins自动化部署</a></p> 
<p id="%E8%87%AA%E7%94%B1%E9%A3%8E%E6%A0%BC%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E8%87%AA%E7%94%B1%E9%A3%8E%E6%A0%BC%E9%85%8D%E7%BD%AE" rel="nofollow">自由风格配置</a></p> 
<p id="%E6%B5%81%E6%B0%B4%E7%BA%BF%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E9%85%8D%E7%BD%AE" rel="nofollow">流水线配置</a></p> 
<p id="%E7%81%B0%E5%BA%A6%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88-toc" style="margin-left:80px;"><a href="#%E7%81%B0%E5%BA%A6%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88" rel="nofollow">灰度部署方案</a></p> 
<hr id="hr-toc"> 
<h2>项目搭建选项</h2> 
<ul><li id="main-toc">Vue3</li><li>Vite</li><li>TypeScript</li><li>axios</li><li>Pinia</li><li>Sass</li><li>Vant-UI（M）、Element-UI（PC）</li><li>Eslint</li><li>postcss-pxtorem（M）</li></ul> 
<h2></h2> 
<h2 id="%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4">项目搭建步骤</h2> 
<h3 id="%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">本地开发环境</h3> 
<p>安装nodejs，node版本建议大于16.0.0</p> 
<p><a href="https://nodejs.org/en/download" rel="nofollow" title="Download | Node.js">Download | Node.js</a></p> 
<p></p> 
<h3 id="Vite%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE">Vite脚手架构建项目</h3> 
<p>官网：<a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="https://">https://</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="cn.">cn.</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="vitejs.de">vitejs.de</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="v">v</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="/gui">/gui</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="d">d</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="e">e</a><a href="https://cn.vitejs.dev/guide/" rel="nofollow" title="/">/</a></p> 
<p><img alt="" height="874" src="https://images2.imgbox.com/d9/6d/h5lf56a0_o.png" width="1200"></p> 
<p></p> 
<h3 id="%E5%85%B3%E8%81%94Git%E4%BB%93%E5%BA%93">关联Git仓库</h3> 
<p>初始化后的项目关联远程git仓库</p> 
<p></p> 
<h3 id="%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">开发工具</h3> 
<p>Visual Studio Code</p> 
<p>配置.vscode/setting.json，自动校验eslint并修复</p> 
<pre><code class="language-javascript">{
  // 开启保存自动格式化
  "editor.formatOnSave": true,
  // 开启eslint校验
  "eslint.enable": true,
  "recommendations": ["Vue.volar", "Vue.vscode-typescript-vue-plugin"],
  "editor.fontSize": 14,
  // vscode默认启用了根据文件类型自动设置tabsize的选项
  "editor.detectIndentation": false,
  // 重新设定tabsize
  "editor.tabSize": 2,
  // #每次保存的时候将代码按eslint格式进行修复
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  // 校验文件类型
  "eslint.validate": ["html", "vue", "javascript", "jsx"],
  //  #让prettier使用eslint的代码格式进行校验
  "prettier.eslintIntegration": true,
  //  #去掉代码结尾的分号
  "prettier.semi": true,
  //  #使用带引号替代双引号
  "prettier.singleQuote": true,
  //  #让函数(名)和后面的括号之间加个空格
  "javascript.format.insertSpaceBeforeFunctionParenthesis": true,
  // #让vue中的js按编辑器自带的ts格式进行格式化
  "vetur.format.defaultFormatter.js": "vscode-typescript",
  "vetur.format.defaultFormatterOptions": {
    "js-beautify-html": {
      "wrap_attributes": "force-aligned"
      // #vue组件中html代码格式化样式
    },
    "prettier": {
      "semi": false,
      "singleQuote": true,
      "eslintIntegration": true,
      "stylelintIntegration": true,
      "tabWidth": 2,
      "vetur.format.defaultFormatter.html": "prettier"
    }
  },
  "explorer.confirmDelete": false,
  "explorer.confirmDragAndDrop": false,
  "editor.renderControlCharacters": true,
  // "editor.renderWhitespace": "all",
  "files.associations": {
    "*.cjson": "jsonc",
    "*.wxss": "css",
    "*.wxs": "javascript"
  },
  "emmet.includeLanguages": {
    "wxml": "html"
  },
  "minapp-vscode.disableAutoConfig": true,
  "bald.config": false,
  "files.autoSave": "off",
  "diffEditor.ignoreTrimWhitespace": false,
  "editor.foldingStrategy": "indentation",
  "git.path": "",
  "editor.foldingMaximumRegions": 50000,
  "security.workspace.trust.untrustedFiles": "newWindow",
  "editor.unicodeHighlight.nonBasicASCII": false,
  // 以下是格式化插件配置
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[less]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[vue]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[json]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[css]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[scss]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[jsonc]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
</code></pre> 
<p></p> 
<h3 id="%E5%AE%89%E8%A3%85pinia">安装pinia与持久化封装</h3> 
<p>官网：<a href="https://pinia.web3doc.top/getting-started.html" rel="nofollow" title="安装 | Pinia 中文文档">安装 | Pinia 中文文档</a></p> 
<p>项目构建时已选择安装pinia，下面是使用方法以及持久化存储配置</p> 
<p>官网：<a href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/" rel="nofollow" title="快速开始 | pinia-plugin-persistedstate">快速开始 | pinia-plugin-persistedstate</a></p> 
<p>1、安装持久化存储插件 pinia-plugin-persistedstate</p> 
<pre><code class="language-bash">npm i pinia-plugin-persistedstate -S</code></pre> 
<p>2、main.ts</p> 
<pre><code class="language-TypeScript">import { createPinia } from 'pinia'
import piniaPluginPersistedstate from 'pinia-plugin-persistedstate'

const app = createApp(App)

const pinia = createPinia()
pinia.use(piniaPluginPersistedstate)

app.use(pinia)
app.mount('#app')
</code></pre> 
<p>3、在/src/store/目录下新建user.ts</p> 
<pre><code class="language-TypeScript">import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () =&gt; ({
    name: 'Tom', // 用户名
    age: 18, // 年龄
    weight: 60 // 公斤
  }),
  getters: {
    // 获取体重市斤
    getWeight: (state) =&gt; {
      return state.weight * 2
    }
  },
  actions: {
    // 修改用户名
    changeUserName(name: string) {
      this.name = name
    }
  },
  // 持久化插件配置
  persist: {
    key: 'store-user', // 本地存储key名称
    // storage: sessionStorage // 不设置默认存储localStorage
    paths: ['name'] // 指定持久化的值
  }
})

</code></pre> 
<p>4、页面调用</p> 
<pre><code class="language-TypeScript">&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;pinia-name: {<!-- -->{ name }}&lt;/p&gt;
    &lt;p&gt;pinia-age: {<!-- -->{ age }}&lt;/p&gt;
    &lt;p&gt;pinia-市斤: {<!-- -->{ storeUser.getWeight }}&lt;/p&gt;
    &lt;button @click="changeName"&gt;修改用户名称&lt;/button&gt;
    &lt;button @click="changeUser"&gt;批量修改&lt;/button&gt;
    &lt;button @click="changeNameFun"&gt;修改用户名称方法&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { useUserStore } from '../store/user'
import { storeToRefs } from 'pinia';
const storeUser = useUserStore()
const { name, age } = storeToRefs(storeUser) // 将pinia的值响应式

// 单个修改state
const changeName = () =&gt; {
  storeUser.name = 'Jack'
}
// 批量修改
const changeUser = () =&gt; {
  storeUser.$patch({
    name: 'LiuTao',
    age: 10,
    weight: 80
  })
}
// 调用action
const changeNameFun = ()=&gt; {
  storeUser.changeUserName('Alex')
}
&lt;/script&gt;
</code></pre> 
<p></p> 
<h3 id="%E5%AE%89%E8%A3%85Sass">安装Sass</h3> 
<pre><code class="language-bash">npm i sass -D</code></pre> 
<p>使用</p> 
<pre><code class="language-html">&lt;style lang="scss"&gt;
&lt;/style&gt;</code></pre> 
<p></p> 
<h3 id="%E5%AE%89%E8%A3%85Vant-UI">安装Vant-UI</h3> 
<p>官网：<a href="https://vant-ui.github.io/vant/#/zh-CN/quickstart" rel="nofollow" title="Vant 4 - A lightweight, customizable Vue UI library for mobile web apps.">Vant 4 - A lightweight, customizable Vue UI library for mobile web apps.</a></p> 
<pre><code class="language-bash">npm i vant -S</code></pre> 
<p></p> 
<h3 id="%E5%AE%89%E8%A3%85postcss-pxtorem%EF%BC%88%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B9%E7%9B%AE%EF%BC%89">安装postcss-pxtorem（移动端项目）</h3> 
<p>移动端适配，兼容不同分辨率的手机</p> 
<pre><code class="language-bash">npm i postcss-pxtorem amfe-flexible -D</code></pre> 
<p>修改vite.config.ts</p> 
<pre><code class="language-TypeScript">import postCssPxToRem from 'postcss-pxtorem'
export default defineConfig({
  ...
  css: {
    postcss: {
      plugins: [
        postCssPxToRem({
          rootValue: 75, // 1rem的大小
          propList: ['*'], // 需要转换的属性，这里选择全部都进行转换
          minPixelValue: 2 // 最小px为2，如果设置1px则不转rem
        })
      ]
    }
  }
  ...
})
</code></pre> 
<p>在main.ts引入amfe-flexible</p> 
<pre><code class="language-TypeScript">import 'amfe-flexible'</code></pre> 
<p></p> 
<h3 id="%E5%AE%89%E8%A3%85axios">安装axios与请求封装</h3> 
<p>官网：<a href="http://www.axios-js.com/docs/" rel="nofollow" title="axios">axios</a></p> 
<pre><code class="language-bash">npm i axios -S</code></pre> 
<p>封装axios方法，新建/src/utils/request.ts文件</p> 
<pre><code class="language-TypeScript">import axios from 'axios'
import type { AxiosInstance, AxiosError, AxiosResponse } from 'axios'
import { showToast } from 'vant'

const service: AxiosInstance = axios.create({
  // import.meta.env.DEV 判断是否为本地环境
  baseURL: import.meta.env.DEV ? '/api' : 'http://www.baidu.com',
  timeout: 30000
})

/* 请求拦截器 */
service.interceptors.request.use(
  (config) =&gt; {
    // 登录状态鉴权
    // if (token) {
    //   config.headers.Authorization = `Bearer ${token}`;
    // }
    return config
  },
  (error: AxiosError) =&gt; {
    showToast(error.message)
    return Promise.reject(error)
  }
)

/* 响应拦截器 */
service.interceptors.response.use(
  (response: AxiosResponse) =&gt; {
    const { code, message, data } = response.data
    // 根据自定义错误码判断请求是否成功
    if (code === '0') {
      // 将组件用的数据返回
      return data
    } else {
      // 处理业务错误。
      showToast(message)
      return Promise.reject(new Error(message))
    }
  },
  (error: AxiosError) =&gt; {
    // 处理 HTTP 网络错误
    let message = ''
    // HTTP 状态码
    const status = error.response?.status
    switch (status) {
      case 401:
        message = 'token 失效，请重新登录'
        // 这里可以触发退出的 action
        break
      case 403:
        message = '拒绝访问'
        break
      case 404:
        message = '请求地址错误'
        break
      case 500:
        message = '服务器故障'
        break
      default:
        message = '网络连接故障'
    }

    showToast(message)
    return Promise.reject(error)
  }
)

/* 导出封装的请求方法 */
export const http = (options: any) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    // 方法一：get和delete请求，将请求体转换为queryString形式拼接在url
    // if (!options.method || options.method === 'get' || options.method === 'delete') {
    //   if (options.data) {
    //     options.url = options.url + '?' + new URLSearchParams(options.data).toString()
    //   }
    // }

    // 方法二：get和delete请求，使用params参数传参，post和put使用data参数
    const serviceOpt: any = {}
    if (!options.method || options.method === 'get' || options.method === 'delete') {
      serviceOpt.params = options.data
    } else {
      serviceOpt.data = options.data
    }
    service({
      method: options.method || 'get',
      url: options.url,
      ...serviceOpt
    })
      .then((res) =&gt; {
        resolve(res)
      })
      .catch((err) =&gt; {
        reject(err)
      })
  })
}
</code></pre> 
<p>将封装的http方法绑定到全局变量</p> 
<p>打开/src/mian.ts</p> 
<pre><code class="language-TypeScript">import { http } from '@/utils/request'

app.config.globalProperties.$http = http</code></pre> 
<p>在vue文件使用</p> 
<pre><code class="language-TypeScript">&lt;script setup lang="ts"&gt;
import { onMounted, getCurrentInstance } from 'vue'
const { proxy: { $http } } = getCurrentInstance() as any
onMounted (async() =&gt; {
  const res: object = await $http({
    url: '/get/product/list',
    // method: 'get',
    data: {
      id: 1
    }
  })
  console.log(res)
})
&lt;/script&gt;</code></pre> 
<p></p> 
<h3 id="%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95">本地调试</h3> 
<p>npm run dev执行后，只显示了Local: <a href="http://localhost:5173/" rel="nofollow" title="http://localhost:5173/">http://localhost:5173/</a>，没有显示局域网ip地址，不方便局域网真机调试，需要配置启动host为0.0.0.0</p> 
<p>打开vite.config.ts</p> 
<pre><code class="language-TypeScript">export default defineConfig({
  server: {
    // port: 8080, // 启动端口号
    host: '0.0.0.0' // 启动显示局域网ip
  }
})</code></pre> 
<p>测试环境真机调试请参考：</p> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/103889813" title="H5移动端调试工具_不求甚解bc的博客-CSDN博客">H5移动端调试工具_不求甚解bc的博客-CSDN博客</a></p> 
<p></p> 
<h3 id="%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">环境变量</h3> 
<p>1、获取系统环境变量</p> 
<pre><code class="language-TypeScript">import.meta.env.DEV // 开发环境：true
import.meta.env.PROD // 生产环境：true
import.meta.env.MODE // 开发环境：development  生产环境：production
...</code></pre> 
<p>2、获取命令行自定义环境变量</p> 
<pre><code class="language-bash">npm run dev --env=test</code></pre> 
<p>打开vite.config.ts</p> 
<pre><code class="language-TypeScript">const env = process.env.npm_config_env || 'dev'
export default defineConfig({
  define: {
    app_env: JSON.stringify(env)
  }
})
</code></pre> 
<p>在项目代码中使用，比如main.ts / index.vue</p> 
<pre><code class="language-TypeScript">console.log(app_env) // 打印结果：test</code></pre> 
<p>注意：直接使用环境变量会提示变量未声明，需要在 env.d.ts 或 vite-env.d.ts 文件中添加类型声明</p> 
<pre><code class="language-TypeScript">declare const app_env: string</code></pre> 
<p></p> 
<h3 id="%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%90%86">本地代理</h3> 
<p>vite.config.ts</p> 
<pre><code class="language-TypeScript">export default defineConfig({
  server: {
    proxy: {
      // 带选项写法：http://localhost:5173/api/bar -&gt; http://jsonplaceholder.typicode.com/bar
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) =&gt; path.replace(/^\/api/, '')
      }
    }
  }
})
</code></pre> 
<p></p> 
<h3 id="%E5%85%A8%E5%B1%80UI%E7%BB%84%E4%BB%B6">全局UI组件</h3> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/130689291" title="vue3全局api组件_vue3 全局弹窗_不求甚解bc的博客-CSDN博客">vue3全局api组件_vue3 全局弹窗_不求甚解bc的博客-CSDN博客</a></p> 
<p></p> 
<h3 id="%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6">路由中间件</h3> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/131009669" title="vue路由中间件_不求甚解bc的博客-CSDN博客">vue路由中间件_不求甚解bc的博客-CSDN博客</a></p> 
<p></p> 
<h2 id="%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2">项目部署</h2> 
<h3 id="nginx%E9%85%8D%E7%BD%AE">nginx配置</h3> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/83957206" title="Apache，Nginx部署vue/react项目_apached发布 react_不求甚解bc的博客-CSDN博客">Apache，Nginx部署vue/react项目_apached发布 react_不求甚解bc的博客-CSDN博客</a></p> 
<p></p> 
<h3 id="jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2">jenkins自动化部署</h3> 
<h4 id="%E8%87%AA%E7%94%B1%E9%A3%8E%E6%A0%BC%E9%85%8D%E7%BD%AE">自由风格配置</h4> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/115909427" title="jenkins部署vue/react项目_jenkins部署vue项目_不求甚解bc的博客-CSDN博客">jenkins部署vue/react项目_jenkins部署vue项目_不求甚解bc的博客-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/115911020" title="jenkins分环境部署vue/react项目_不求甚解bc的博客-CSDN博客">jenkins分环境部署vue/react项目_不求甚解bc的博客-CSDN博客</a></p> 
<h4 id="%E6%B5%81%E6%B0%B4%E7%BA%BF%E9%85%8D%E7%BD%AE">流水线配置</h4> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/130134400" title="jenkins流水线部署H5项目_jenkins部署h5_不求甚解bc的博客-CSDN博客">jenkins流水线部署H5项目_jenkins部署h5_不求甚解bc的博客-CSDN博客</a></p> 
<p></p> 
<h4 id="%E7%81%B0%E5%BA%A6%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88">灰度部署方案</h4> 
<p><a href="https://blog.csdn.net/bocongbo/article/details/113045967" title="web前端灰度部署_不求甚解bc的博客-CSDN博客">web前端灰度部署_不求甚解bc的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad334f23fc3a25cf14089315859468a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL自动化分区新增数字时间戳类型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/134029dc8db27a8abf79b0a5ee73b47e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue路由跳转时，判断是否登录及权限验证</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>