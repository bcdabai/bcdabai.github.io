<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>android--登录例子，保存用户名和密码到这个应用所在文件中，从文件中读取用户名和密码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="android--登录例子，保存用户名和密码到这个应用所在文件中，从文件中读取用户名和密码" />
<meta property="og:description" content="登录例子，保存用户名和密码到这个应用所在文件中，从文件中读取用户名和密码 1.写登录界面activity_main.xml
&lt;span style=&#34;font-size:18px;&#34;&gt;&lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;fill_parent&#34; android:layout_height=&#34;fill_parent&#34; android:orientation=&#34;vertical&#34; &gt; &lt;EditText android:id=&#34;@&#43;id/tname&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:hint=&#34;@string/input_username&#34; /&gt; &lt;EditText android:id=&#34;@&#43;id/tpass&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:hint=&#34;@string/input_pass&#34; /&gt; &lt;RelativeLayout android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; &gt; &lt;CheckBox android:id=&#34;@&#43;id/chk&#34; android:layout_centerVertical=&#34;true&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;@string/remember&#34; /&gt; &lt;Button android:id=&#34;@&#43;id/btn&#34; android:layout_alignParentRight=&#34;true&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:layout_gravity=&#34;right&#34; android:paddingLeft=&#34;50dp&#34; android:paddingRight=&#34;50dp&#34; android:text=&#34;@string/login&#34; /&gt; &lt;/RelativeLayout&gt; &lt;/LinearLayout&gt;&lt;/span&gt; String.xml中代码如下： &lt;span style=&#34;font-size:18px;&#34;&gt;&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;resources&gt; &lt;string name=&#34;app_name&#34;&gt;login&lt;/string&gt; &lt;string name=&#34;hello_world&#34;&gt;Hello world!&lt;/string&gt; &lt;string name=&#34;action_settings&#34;&gt;Settings&lt;/string&gt; &lt;string name=&#34;input_pass&#34;&gt;请输入密码&lt;/string&gt; &lt;string name=&#34;input_username&#34;&gt;请输入用户名&lt;/string&gt; &lt;string name=&#34;login&#34;&gt;登录&lt;/string&gt; &lt;string name=&#34;remember&#34;&gt;记住我&lt;/string&gt; &lt;/resources&gt; &lt;/span&gt; 2.在MainActivity.java中获取相应的值，注册点击事件" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/14cc95d00030b8f83dbea725b1461077/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-02T07:50:56+08:00" />
<meta property="article:modified_time" content="2016-08-02T07:50:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">android--登录例子，保存用户名和密码到这个应用所在文件中，从文件中读取用户名和密码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="font-size:18px">   </span><span style="font-size:24px">  登录例子，保存用户名和密码到这个应用所在文件中，从文件中读取用户名和密码</span></h2> 
<p><span style="font-size:18px">1.写登录界面activity_main.xml</span></p> 
<p></p> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" &gt;

    &lt;EditText
        android:id="@+id/tname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/input_username" /&gt;

    &lt;EditText
        android:id="@+id/tpass"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/input_pass" /&gt;

    &lt;RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" &gt;

        &lt;CheckBox
            android:id="@+id/chk"
            android:layout_centerVertical="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/remember" /&gt;

        &lt;Button
            android:id="@+id/btn"
            android:layout_alignParentRight="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:paddingLeft="50dp"
            android:paddingRight="50dp"
            android:text="@string/login" /&gt;
    &lt;/RelativeLayout&gt;

&lt;/LinearLayout&gt;&lt;/span&gt;</code></pre> 
<span style="font-size:18px">String.xml中代码如下：</span> 
<p></p> 
<p></p> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;

    &lt;string name="app_name"&gt;login&lt;/string&gt;
    &lt;string name="hello_world"&gt;Hello world!&lt;/string&gt;
    &lt;string name="action_settings"&gt;Settings&lt;/string&gt;
    &lt;string name="input_pass"&gt;请输入密码&lt;/string&gt;
    &lt;string name="input_username"&gt;请输入用户名&lt;/string&gt;
    &lt;string name="login"&gt;登录&lt;/string&gt;
    &lt;string name="remember"&gt;记住我&lt;/string&gt;
&lt;/resources&gt;

&lt;/span&gt;</code></pre> 
<span style="font-size:18px"><br> </span> 
<p></p> 
<p><span style="font-size:18px">2.在MainActivity.java中获取相应的值，注册点击事件</span></p> 
<p></p> 
<pre><code class="language-java">&lt;span style="font-size:18px;"&gt;package com.etc.login;

import android.app.Activity;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

	/*定义一个静态常量，在控制台中加入自定义的Filter,想要在控制台输出语句时，可以直接用Log.d("debug模式")
	/Log.e("error模式")等模式输出，判断错误也较为方便
	 * Log.d(MYTAG, "点击了按钮"+name+","+pass);
	 * */
	public static final String MYTAG = "mytag";
	private Button btn;
	private EditText tname;
	private EditText tpass;
	private CheckBox chk;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		//通过id获取一些输入框，按钮等元素
		tname = (EditText) findViewById(R.id.tname);
		tpass = (EditText) findViewById(R.id.tpass);
		chk = (CheckBox) findViewById(R.id.chk);
		btn = (Button) findViewById(R.id.btn);

		btn.setOnClickListener(this);//按钮注册点击事件
		//FileUtil.readFromFile(this,tname,tpass);//从文件中读取用户名和密码
		//FileUtil.readFromSDCard(this, tname, tpass);//从sd卡中读取用户名和密码
		//FileUtil.readFromFile2(this, tname, tpass);
		FileUtil.readFromPre(this, tname, tpass);
	}

	//实现 了android.view.View中的OnClickListener接口，必须实现的方法
	@Override
	public void onClick(View v) {
		//通过获取id来进行多个事件，此处只为按钮添加了判断登录事件
		switch (v.getId()) {
		case R.id.btn:
			doLogin();//点击按钮时，做登录判断
			break;
		}
	}

	private void doLogin() {
		//toString()不能少,getText()是一个EditText对象
		String name = tname.getText().toString();
		String pass = tpass.getText().toString();
		Log.d(MYTAG, "点击了按钮"+name+","+pass);
		//将输入框输入的用户名和密码保存到本地的文件中
		if(chk.isChecked())//如果选中了"记住我"的多选框，就将用户名和密码保存，否则不保存
		{
			//FileUtil.saveToFile(this,name,pass);
			//FileUtil.savtToSDCard(this,name,pass);
			//FileUtil.saveToFile2(this, name, pass);
			FileUtil.saveToPre(this, name, pass);
		}
		//登录完之后做一个提示，.show()不可少
		Toast.makeText(this,"success",1000).show();

	}
}
&lt;/span&gt;</code></pre> 
<span style="font-size:18px"><br> <br> </span> 
<p></p> 
<pre></pre> 
<p></p> 
<p><span style="font-size:18px">3.在封装的FileUtil.java类中写保存和读取的方法</span></p> 
<p></p> 
<pre><code class="language-java">&lt;span style="font-size:18px;"&gt;package com.etc.login;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Environment;
import android.util.Log;
import android.widget.EditText;

public class FileUtil {
	/**
	 * 第一种方法：
	 * 将输入的用户名和密码保存在这个应用的某个文件中
	 * @param context Activity的上面的某一层是Context,所以传值过来的是一个Activity,此处可以写成Context
	 * @param name 输入的用户名
	 * @param pass 输入的密码
	 */
	public static void saveToFile(Context context, String name, String pass) {
		File dir = context.getFilesDir(); //查找这个应用下的所有文件所在的目录
		FileWriter writer;
		try {
			writer = new FileWriter(dir.getAbsolutePath() + "/userinfo.txt");
			writer.append(name + "," + pass);
			writer.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	/**
	 * 从这个应用下的文件中读取保存的用户名和密码,再次登录时自动显示在输入框中
	 * @param context
	 * @param tname
	 * @param tpass
	 */
	public static void readFromFile(Context context, EditText tname, EditText tpass) {
		File dir = context.getFilesDir();//目录为：/data/data/com.etc.login/files
		FileReader reader;
		try {
			reader = new FileReader(dir.getAbsolutePath() + "/userinfo.txt");
			BufferedReader breader = new BufferedReader(reader);
			String line = breader.readLine();
			String strs[] = line.split(",");
			tname.setText(strs[0]);
			tpass.setText(strs[1]);
			breader.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	/**
	 * 第二种方法：
	 * 将输入的用户名和密码保存到sdcard中
	 * @param context
	 * @param name
	 * @param pass
	 */
	public static void savtToSDCard(Context context, String name, String pass) {
		File sdcardDir = Environment.getExternalStorageDirectory();
		Log.d("mytag",sdcardDir.toString());//目录为：/storage/emulated/0
		/**
		 * 但是使用cmd工具查找文件时，不再这个目录下，而是在/mnt/sdcard目录下
		 *
		 */
		FileWriter writer;
		try {
			writer = new FileWriter(sdcardDir.getAbsolutePath() + "/userinfo.txt");
			writer.append(name + "," + pass);
			writer.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	/**
	 * 从sdcard中读取保存的用户名和密码
	 * @param context
	 * @param tname
	 * @param tpass
	 */
	public static void readFromSDCard(Context context, EditText tname, EditText tpass) {
		File sdcardDir = Environment.getExternalStorageDirectory();
		FileReader reader;
		try {
			reader = new FileReader(sdcardDir.getAbsolutePath() + "/userinfo.txt");
			BufferedReader breader = new BufferedReader(reader);
			String line = breader.readLine();
			String strs[] = line.split(",");
			tname.setText(strs[0]);
			tpass.setText(strs[1]);
			breader.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	/**
	 * 第三种方法：
	 * 使用文件api进行保存用户名和密码，不必得到对应的目录
	 * @param context
	 * @param name
	 * @param pass
	 */
	public static void saveToFile2(Context context, String name, String pass) {
		try {
			FileOutputStream out = context.openFileOutput("userinfo2.txt",context.MODE_PRIVATE);
			OutputStreamWriter writer = new OutputStreamWriter(out);
			writer.append(name+","+pass);
			writer.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	/**
	 * 使用文件api进行读取保存的用户名和密码
	 * @param context
	 * @param tname
	 * @param tpass
	 */
	public static void readFromFile2(Context context, EditText tname, EditText tpass) {
		try {
			FileInputStream in = context.openFileInput("userinfo2.txt");
			InputStreamReader reader = new InputStreamReader(in);
			BufferedReader breader = new BufferedReader(reader);
			String line = breader.readLine();
			String strs[] = line.split(",");
			tname.setText(strs[0]);
			tpass.setText(strs[1]);
			breader.close();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	/**
	 * 最为通用的第四种方法：
	 * 使用SharedPreference进行保存用户名和密码，可以实现拆分，不必手动的以，为分隔符进行拆分，
	 * 如果用，进行拆分，那么一旦用户登录的时候输入了，号，程序就会出错，现在以Map的形式保存用户名和密码，
	 * 就不用再担心这个问题
	 * @param context
	 * @param name
	 * @param pass
	 */
	public static void saveToPre(Context context, String name, String pass) {
		SharedPreferences sharedPreferences = context.getSharedPreferences("userinfo",context.MODE_PRIVATE);
		Editor editor = sharedPreferences.edit();
		editor.putString("name",name);
		editor.putString("pass",pass);
		editor.commit();
	}
	/**
	 * 使用SharedPreference进行读取保存的用户名和密码
	 * @param context
	 * @param tname
	 * @param tpass
	 */
	public static void readFromPre(Context context, EditText tname, EditText tpass) {
		SharedPreferences sharedPreferences = context.getSharedPreferences("userinfo",context.MODE_PRIVATE);
		String name = sharedPreferences.getString("name","");
		String pass = sharedPreferences.getString("pass","");
		tname.setText(name);
		tpass.setText(pass);
	}
}
&lt;/span&gt;</code></pre> 
<span style="font-size:18px"><br> <br> </span> 
<p></p> 
<pre></pre> 
<span style="font-size:18px">实现的效果，如果选中了“记住我"的多选框，就将用户名和密码保存起来，然后再次进入时就直接记住了用户名和密码，不需要再次输入， 如果没有选中，就不保存用户名和密码。再次登录时重新输入。</span> 
<p><span style="font-size:18px">利用cmd工具，adb命令读取保存的用户名和密码</span></p> 
<p><span style="font-size:18px">首先要配置安卓的环境，ANDROID_HOME--&gt;sdk所在的目录 --&gt;F:\Anroid Software\sdk-19\sdk-19\sdk</span></p> 
<p><span style="font-size:18px">然后在path的环境变量后面加入：;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools;</span></p> 
<p><span style="font-size:18px">最后将sdk目录下的platform-tools下的adb.exe，AdbWinApi.dll，AdbWinUsbApi.dll文件复制到tools目录下</span></p> 
<p><span style="font-size:18px">然后在任意一个盘下都可以直接写adb命令，而不需要转到sdk所在的目录下，才能使用adb命令。</span></p> 
<p><span style="font-size:18px">C:Users\Administrator&gt;adb shell</span></p> 
<p><span style="font-size:18px">root@android:/ # cd data/data/com.etc.login 到达com.etc.login目录下</span></p> 
<p><span style="font-size:18px">cd data/data/com.etc.login</span></p> 
<p><span style="font-size:18px">root@android:/data/data/com.etc.login #cd files 到达files目录下</span></p> 
<p><span style="font-size:18px">cd files</span></p> 
<p><span style="font-size:18px">root@android:/data/data/com.etc.login/files #ll 显示这个目录下的所有文件</span></p> 
<p><span style="font-size:18px">ll</span></p> 
<p><span style="font-size:18px">-rw------- u0a36 u0a36 7 2016-08-02 08:03 userinfo.txt</span></p> 
<p><span style="font-size:18px">root@android:/data/data/com.etc.login/files #cat userinfo.txt 显示这个文件的内容</span></p> 
<p><span style="font-size:18px">cat userinfo.txt</span></p> 
<p><span style="font-size:18px">aa,bb12root@android:/data/data/com.etc.login/files # (Ctrl+C退出)</span></p> 
<p><span style="font-size:18px">C:\Users\Administrator&gt;adb pull /data/data/com.etc.login/files/userinfo.txt  将文件拉出来</span></p> 
<p><span style="font-size:18px">2KB/s (7bytes in 0.229s)</span></p> 
<p><span style="font-size:18px">C:\Users\Administrator&gt;explorer . 显示文件所在的目录</span></p> 
<p><span style="font-size:18px">之后便会自动弹出这个文件所在的文件夹处，可以看到userinfo.txt，用记事本打开，可以看到所保存的用户名和密码</span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<p></p> 
<p><span style="font-size:18px">C:Users\Administrator&gt;adb shell</span></p> 
<p><span style="font-size:18px">root@android:/ # cd /storage </span></p> 
<p><span style="font-size:18px">cd /storage</span></p> 
<p><span style="font-size:18px">root@android:/storage #ll </span></p> 
<p><span style="font-size:18px">ll</span></p> 
<p><span style="font-size:18px"> dr-xr-xr-x   root  root  2016-08-02 08:50 emulated</span></p> 
<p><span style="font-size:18px">lrwxrwxrwx root  root  2016-08-02 08:50 sdcard0-&gt;/storage/emulated/legacy</span></p> 
<p><span style="font-size:18px">root@android:/storage #cd emulated</span></p> 
<p><span style="font-size:18px">cd emulated</span></p> 
<p><span style="font-size:18px">root@android:/storage/emulated # ll</span></p> 
<p><span style="font-size:18px">ll</span></p> 
<p><span style="font-size:18px">lrwxrwxrwx  root  root 016-08-02 08:50 sdcard0-&gt;/mnt.shell/emulated/0</span></p> 
<p><span style="font-size:18px">root@android:/storage/emulated # cd 0 //刚开始，想要到/storage/emulated/0目录下查找userinfo.txt文件，发现一直找不到，于是到他的映射目录下去查找</span></p> 
<p><span style="font-size:18px">cd 0</span></p> 
<p><span style="font-size:18px">/system/bin/sh:cd /storage/emulated/0:No such file or directory</span></p> 
<p><span style="font-size:18px">root@android:/storage/emulated #cd /mnt </span></p> 
<p><span style="font-size:18px">cd /mnt</span></p> 
<p><span style="font-size:18px">root@android:/mnt #ll</span></p> 
<p><span style="font-size:18px">ll</span></p> 
<p><span style="font-size:18px">d---------  system system 2016-08-02 08:50 USB</span></p> 
<p><span style="font-size:18px">lrwxrwxrwx root   root  2016-08-02 08:50 sdcard--&gt;/storage/emulated/legacy</span></p> 
<p><span style="font-size:18px">root@android:/mnt #cd sdcard</span></p> 
<p><span style="font-size:18px">cd sdcard</span></p> 
<p><span style="font-size:18px">root@android:/mnt/sdcard #ll</span></p> 
<p><span style="font-size:18px">ll</span></p> 
<p><span style="font-size:18px">-rw-rw----  root  root sdcard_r  9 2016-08-02 09:11  userinfo.txt  //最终在/mnt/sdcard目录下找到userinfo.txt文件</span></p> 
<p><span style="font-size:18px">root@android:/mnt/sdcard # cat userinfo.txt</span></p> 
<p><span style="font-size:18px">cat userinfo.txt</span></p> 
<p><span style="font-size:18px">aa12,bb12root@android:/mnt/sdcard</span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f843a996c5ae46bb1fe8c4b59471bb70/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">后序线索化二叉树及遍历（图解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7ad02959ef58343054eaa406f5b7e115/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">设置请求头信息的不同方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>