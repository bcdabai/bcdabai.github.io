<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>电子科技大学现代电子信息系统综合实验课程单片机练习题代码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="电子科技大学现代电子信息系统综合实验课程单片机练习题代码" />
<meta property="og:description" content="接上一篇博客https://blog.csdn.net/Jinyindao243052/article/details/107822771
除了实现练习题的功能，我自己还写了一些函数，实践证明在考试中用得到！
#include &lt;reg51.h&gt; #include &lt;absacc.h&gt; #include &lt;ctype.h&gt; //数码管的引脚 sbit led0=P0^0; sbit led1=P0^1; sbit led2=P0^2; sbit led3=P0^3; sbit led4=P0^4; sbit led5=P0^5; sbit led6=P0^6; sbit led7=P0^7; //定义按键 sbit KEY2 = P2^0;	//按键1 sbit KEY3 = P2^1;	//按键2 unsigned char key; unsigned char DispBuf[8]; unsigned char s_led[8]={1,1,1,1,1,1,1,1};//led显示控制:s_led[0]对应最右边的数码管 unsigned char s_dat[8]={1,1,1,0,0,1,1,1};//数码管显示控制：s_dat[0]对应最右边的数码管 unsigned char d[8]={1,1,1,15,14,1,1,1};//数据：d[0]对应最右边的数码管 code unsigned char Tab[] =	{//定义0123456789AbCdEF的数码管字型数据 0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07, 0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71 }; /* 函数：KeyScan() 功能：键盘扫描 返回：扫描到的键值 */ unsigned char KeyScan() { unsigned char k = &#39;\0&#39;; if ( KEY2 == 0 ) k = &#39;A&#39;; if ( KEY3== 0 ) k = &#39;B&#39;; return k; } //定义显示缓冲区（由定时中断程序自动扫描） unsigned char DispBuf[8]; /* 函数：T1INTSVC() 功能：定时器T1的中断服务函数，扫描数码管 */ void T1INTSVC() interrupt 3 { code unsigned char com[] = {0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80}; static unsigned char n = 0; TR1 = 0; TH1 = 0xFC; TL1 = 0x66; TR1 = 1; XBYTE[0x7800] = 0xFF;	//暂停显示 XBYTE[0x7801] = ~DispBuf[n];	//更新扫描数据 XBYTE[0x7800] = ~com[n];	//重新显示 n&#43;&#43;; n &amp;= 0x07; } /* 函数：DispClear() 功能：清除DispBuf */ void DispClear() { unsigned char i; for ( i=0; i&lt;8; i&#43;&#43; ) { DispBuf[i] = 0x00; } } //延时函数 void delay(unsigned int t) { do { TH0 = 0xFA; TL0 = 0x24;	//设置定时器初值（对应0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d3eb947f08c34e721ef5f2c49ceea545/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-05T23:22:53+08:00" />
<meta property="article:modified_time" content="2020-08-05T23:22:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">电子科技大学现代电子信息系统综合实验课程单片机练习题代码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>接上一篇博客https://blog.csdn.net/Jinyindao243052/article/details/107822771<br> 除了实现练习题的功能，我自己还写了一些函数，实践证明在考试中用得到！</p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;reg51.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;absacc.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;ctype.h&gt;</span></span>
<span class="token comment">//数码管的引脚</span>
sbit led0<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">;</span>
sbit led1<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">;</span>
sbit led2<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span>
sbit led3<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">3</span><span class="token punctuation">;</span>
sbit led4<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">4</span><span class="token punctuation">;</span>
sbit led5<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span>
sbit led6<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">6</span><span class="token punctuation">;</span>
sbit led7<span class="token operator">=</span>P0<span class="token operator">^</span><span class="token number">7</span><span class="token punctuation">;</span>
<span class="token comment">//定义按键</span>
sbit KEY2 <span class="token operator">=</span> P2<span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">//按键1</span>
sbit KEY3 <span class="token operator">=</span> P2<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//按键2</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> key<span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> DispBuf<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> s_led<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//led显示控制:s_led[0]对应最右边的数码管</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> s_dat<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//数码管显示控制：s_dat[0]对应最右边的数码管</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> d<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//数据：d[0]对应最右边的数码管</span>
code <span class="token keyword">unsigned</span> <span class="token keyword">char</span> Tab<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span>																																		
	<span class="token punctuation">{<!-- --></span><span class="token comment">//定义0123456789AbCdEF的数码管字型数据</span>
		<span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x5B</span><span class="token punctuation">,</span><span class="token number">0x4F</span><span class="token punctuation">,</span><span class="token number">0x66</span><span class="token punctuation">,</span><span class="token number">0x6D</span><span class="token punctuation">,</span><span class="token number">0x7D</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span>
		<span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x6F</span><span class="token punctuation">,</span><span class="token number">0x77</span><span class="token punctuation">,</span><span class="token number">0x7C</span><span class="token punctuation">,</span><span class="token number">0x39</span><span class="token punctuation">,</span><span class="token number">0x5E</span><span class="token punctuation">,</span><span class="token number">0x79</span><span class="token punctuation">,</span><span class="token number">0x71</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/*
函数：KeyScan()
功能：键盘扫描
返回：扫描到的键值
*/</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">KeyScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> k <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> KEY2 <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> k <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> KEY3<span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> k <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> k<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//定义显示缓冲区（由定时中断程序自动扫描）</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> DispBuf<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/*
函数：T1INTSVC()
功能：定时器T1的中断服务函数，扫描数码管
*/</span>
<span class="token keyword">void</span> <span class="token function">T1INTSVC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">3</span>
<span class="token punctuation">{<!-- --></span>
	code <span class="token keyword">unsigned</span> <span class="token keyword">char</span> com<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	TR1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	TH1 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span>
	TL1 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span>
	TR1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	XBYTE<span class="token punctuation">[</span><span class="token number">0x7800</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0xFF</span><span class="token punctuation">;</span>		<span class="token comment">//暂停显示</span>
	XBYTE<span class="token punctuation">[</span><span class="token number">0x7801</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">~</span>DispBuf<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//更新扫描数据</span>
	XBYTE<span class="token punctuation">[</span><span class="token number">0x7800</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">~</span>com<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//重新显示</span>
	n<span class="token operator">++</span><span class="token punctuation">;</span>
	n <span class="token operator">&amp;</span><span class="token operator">=</span> <span class="token number">0x07</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/*
函数：DispClear()
功能：清除DispBuf
*/</span>
<span class="token keyword">void</span> <span class="token function">DispClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		DispBuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//延时函数</span>
<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		TH0 <span class="token operator">=</span> <span class="token number">0xFA</span><span class="token punctuation">;</span>
		TL0 <span class="token operator">=</span> <span class="token number">0x24</span><span class="token punctuation">;</span>		<span class="token comment">//设置定时器初值（对应0.001s）</span>
		TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//启动定时器</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token operator">!</span>TF0 <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//等待定时器溢出</span>
		TR0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">//停止定时器</span>
		TF0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">//清除溢出标志</span>
	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token operator">--</span>t <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//循环t次</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
函数：DispInit()
功能：数码管扫描显示初始化
*/</span>
<span class="token keyword">void</span> <span class="token function">DispInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">DispClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//初始为全灭</span>
	EA <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	TMOD <span class="token operator">&amp;</span><span class="token operator">=</span> <span class="token number">0x0F</span><span class="token punctuation">;</span>
	TMOD <span class="token operator">|</span><span class="token operator">=</span> <span class="token number">0x10</span><span class="token punctuation">;</span>
	TH1 <span class="token operator">=</span> <span class="token number">0xFC</span><span class="token punctuation">;</span>
	TL1 <span class="token operator">=</span> <span class="token number">0x66</span><span class="token punctuation">;</span>
	TR1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	ET1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	EA <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*系统初始化函数*/</span>
<span class="token keyword">void</span> <span class="token function">SysInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TMOD <span class="token operator">&amp;</span><span class="token operator">=</span> <span class="token number">0xF0</span><span class="token punctuation">;</span>
	TMOD <span class="token operator">|</span><span class="token operator">=</span> <span class="token number">0x01</span><span class="token punctuation">;</span>	<span class="token comment">//设置定时器T0为16位定时器</span>
	<span class="token function">DispInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//数码管扫描显示初始化</span>
<span class="token punctuation">}</span>

<span class="token comment">//自己实现的函数</span>
<span class="token comment">/*
LED全部熄灭
*/</span>
<span class="token keyword">void</span> <span class="token function">ledclear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   led0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led3<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led4<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led5<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led6<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   led7<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
  
<span class="token punctuation">}</span>
<span class="token comment">/*
led灯控制函数
s[0]对应最右边的LED灯，0为亮，1为不亮
*/</span>
<span class="token keyword">void</span> <span class="token function">displed</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>    
   <span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token function">ledclear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led5<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led6<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   led7<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//实现led向左循环移动times次</span>
<span class="token function">shift_ledr</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> times<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>   
    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>times<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	    temp<span class="token operator">=</span>s_led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token number">7</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		s_led<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>s_led<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		s_led<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">;</span>
		<span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//实现led向右循环移动times次</span>
<span class="token function">shift_ledl</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> times<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>   
    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>times<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	    temp<span class="token operator">=</span>s_led<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span>j<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		s_led<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>s_led<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		s_led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">;</span>
		<span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 数码管显示控制函数
s控制哪个数码管亮，dat控制对应位置显示哪个数
s[0]对应最右边的数码管，DispBuf[0]，0为亮，1为灭
dat[0]对应最右边的数码管,DispBuf[0]，是几就显示几
*/</span>
<span class="token keyword">void</span> <span class="token function">dispdata</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> d<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{<!-- --></span>   	
   <span class="token function">DispClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   DispBuf<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">shift_l</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> times<span class="token punctuation">)</span><span class="token comment">//数码管左移左移times次</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp3<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>times<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    temp1<span class="token operator">=</span>s_dat<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	temp2<span class="token operator">=</span>d<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span>i<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		s_dat<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>s_dat<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>d<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	s_dat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>temp1<span class="token punctuation">;</span>
	d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>temp2<span class="token punctuation">;</span>
	<span class="token comment">//控制每次停留的时间</span>

<span class="token punctuation">}</span>
    <span class="token function">dispdata</span><span class="token punctuation">(</span>s_dat<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
更改d的数值
把temp的数值赋给d
*/</span>
<span class="token keyword">void</span> <span class="token function">modify_d</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>    
 	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	 	  d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>	
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token comment">/*
修改d的某一位
把第a位改为b
*/</span>
<span class="token keyword">void</span> <span class="token function">modify_d_bit</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token comment">/*判断是否有键按下，按下退出*/</span>
<span class="token keyword">void</span> <span class="token function">keyin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
 <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	key<span class="token operator">=</span><span class="token function">KeyScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">!=</span><span class="token string">'\0'</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	   <span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
判断按键是否抬起，抬起退出
*/</span>
<span class="token keyword">void</span> <span class="token function">keyout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
	  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  key<span class="token operator">=</span><span class="token function">KeyScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">==</span><span class="token string">'\0'</span><span class="token punctuation">)</span>
	  <span class="token punctuation">{<!-- --></span>
	    <span class="token keyword">break</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
把num代表的数存储到是s数组中，保存位数的长度是len
*/</span>
<span class="token keyword">void</span> <span class="token function">num2str</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> len<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	 <span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	 <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	 <span class="token punctuation">{<!-- --></span>
	    temp<span class="token operator">=</span>num<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span>
		num<span class="token operator">=</span><span class="token punctuation">(</span>num<span class="token operator">-</span>temp<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>
		<span class="token operator">*</span>s<span class="token operator">++</span><span class="token operator">=</span>temp<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
改变s_dat,把第a位设置为0或1
*/</span>
<span class="token keyword">void</span> <span class="token function">modify_s_dat_bit</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   s_dat<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
   DispBuf<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0x00</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span>
   <span class="token punctuation">{<!-- --></span>
   DispBuf<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
更改s_dat，控制哪些数码管亮
*/</span>
<span class="token keyword">void</span> <span class="token function">modify_s_dat</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   	 <span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	 <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	 <span class="token punctuation">{<!-- --></span>
		 s_dat<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		 <span class="token keyword">if</span><span class="token punctuation">(</span>s_dat<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
		 <span class="token punctuation">{<!-- --></span>
		    DispBuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0x00</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
		 <span class="token keyword">else</span>
		 <span class="token punctuation">{<!-- --></span>
		    DispBuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>Tab<span class="token punctuation">[</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
	 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">/*
快速改变灯的第a位的亮灭
b=0亮,b=1灭
*/</span>
<span class="token keyword">void</span> <span class="token function">modify_s_led</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token punctuation">,</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  s_led<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">;</span>
  <span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
对char类型的0和1取反
char a=0
a=0x08
不像sbit类型一样可以直接取反
*/</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span> a<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">unsigned</span> <span class="token keyword">char</span> b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
	 b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp1<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp3<span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp5<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> temp6<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> mode0<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> mode1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> wait<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	
	<span class="token function">SysInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">dispdata</span><span class="token punctuation">(</span>s_dat<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span>
	<span class="token function">dispdata</span><span class="token punctuation">(</span>s_dat<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		  	 	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
                 <span class="token punctuation">{<!-- --></span>
                    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	key<span class="token operator">=</span><span class="token function">KeyScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	<span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">!=</span><span class="token string">'\0'</span><span class="token punctuation">)</span>
	                <span class="token punctuation">{<!-- --></span>
	                  <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

					<span class="token keyword">if</span><span class="token punctuation">(</span>wait<span class="token operator">==</span><span class="token number">20</span><span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span> 
					  <span class="token keyword">if</span><span class="token punctuation">(</span>mode1<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
					  <span class="token punctuation">{<!-- --></span>
					  s_led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">convert</span><span class="token punctuation">(</span>s_led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
					  temp4<span class="token operator">++</span><span class="token punctuation">;</span>
					  <span class="token keyword">if</span><span class="token punctuation">(</span>temp4<span class="token operator">==</span><span class="token number">10</span><span class="token punctuation">)</span>
					  <span class="token punctuation">{<!-- --></span>
						 <span class="token function">shift_l</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						 temp4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
					  <span class="token punctuation">}</span>
					  <span class="token punctuation">}</span>
					<span class="token punctuation">}</span>			   

					wait<span class="token operator">++</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>wait<span class="token operator">==</span><span class="token number">21</span><span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span>
					  wait<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

                  <span class="token punctuation">}</span>
	
		<span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">==</span><span class="token string">'A'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		   mode0<span class="token operator">=</span><span class="token function">convert</span><span class="token punctuation">(</span>mode0<span class="token punctuation">)</span><span class="token punctuation">;</span>
           s_led<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">convert</span><span class="token punctuation">(</span>s_led<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		   <span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">==</span><span class="token string">'B'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		   mode1<span class="token operator">=</span><span class="token function">convert</span><span class="token punctuation">(</span>mode1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		   <span class="token keyword">if</span><span class="token punctuation">(</span>mode1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		   <span class="token punctuation">{<!-- --></span>
			temp4<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
			s_led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token function">displed</span><span class="token punctuation">(</span>s_led<span class="token punctuation">)</span><span class="token punctuation">;</span>
		   <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		 <span class="token keyword">for</span><span class="token punctuation">(</span>temp5<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>temp5<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>temp5<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
			 
			 <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>temp5<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">1</span><span class="token punctuation">)</span>
			 <span class="token punctuation">{<!-- --></span> 
			 <span class="token keyword">for</span><span class="token punctuation">(</span>temp6<span class="token operator">=</span>temp5<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>temp6<span class="token operator">&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>temp6<span class="token operator">++</span><span class="token punctuation">)</span>
			 <span class="token punctuation">{<!-- --></span>
			   <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>temp6<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">1</span><span class="token punctuation">)</span>
			   <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			   <span class="token punctuation">}</span>
			 <span class="token punctuation">}</span>
			 <span class="token keyword">break</span><span class="token punctuation">;</span>
			 <span class="token punctuation">}</span>			
			 <span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>mode0<span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span>mode1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>temp5<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
			 d<span class="token punctuation">[</span>temp5<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span>
			 d<span class="token punctuation">[</span>temp6<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
			 d<span class="token punctuation">[</span>temp6<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">;</span>
			 d<span class="token punctuation">[</span>temp5<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
		    <span class="token keyword">if</span><span class="token punctuation">(</span>temp5<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
			 d<span class="token punctuation">[</span>temp5<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span>
			 d<span class="token punctuation">[</span>temp6<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
			 d<span class="token punctuation">[</span>temp6<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span>
			 d<span class="token punctuation">[</span>temp5<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token function">dispdata</span><span class="token punctuation">(</span>s_dat<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
			 
		    	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
                 <span class="token punctuation">{<!-- --></span>
                    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	key<span class="token operator">=</span><span class="token function">KeyScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	<span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">==</span><span class="token string">'\0'</span><span class="token punctuation">)</span>
	                <span class="token punctuation">{<!-- --></span>
	                  <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
		 
	             <span class="token punctuation">}</span> 
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2ae710811b6b53a49b8375b103d8549b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VBA 单元格基本操作 - 值的判断</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1251cc705bd5fcb4d051a2ef856c1497/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">13.3-“制作一款私有IAP串口下载小工具”之上位机软件设计说明（包含源码）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>