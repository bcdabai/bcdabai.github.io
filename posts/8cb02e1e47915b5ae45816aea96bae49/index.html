<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DROP CONSTRAINT 子句 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DROP CONSTRAINT 子句" />
<meta property="og:description" content="使用 DROP CONSTRAINT 子句删除指定的约束。
ALTER TABLE 语句的 DROP CONSTRAINT 子句具有此语法：
DROP CONSTRAINT 子句
用法
要删除现有约束，请指定 DROP CONSTRAINT 关键字和此约束的名称。要删除同一表上的多个约束，则约束名称列表必须逗号分隔并由括号分隔。
您要删除的约束可具有 ENABLED 、DISABLED 或 FILTERING 方式。
这里是一个删除约束的示例：
ALTER TABLE manufact DROP CONSTRAINT con_name;
以下示例删除了定义在 orders 表中的引用约束和检查约束：
ALTER TABLE orders DROP CONSTRAINT (con_ref, con_check);
GBase 8s 的 SQL 执行包含非 DROP CONSTRAINT 语句。然而，如果该语句存在，则 ALTER
TABLE 语句的此子句提供一个 DROP CONSTRAINT 语句除外的功能。
当 DROP TABLE 语句删除该表时，会默示地删除该指定表上所有的约束。
获取约束名称
DROP CONSTRAINT 子句需要约束的名称。如果创建约束时没有声明名称，则数据库服务器生成
新的约束的名称。您可以查询 sysconstraints 系统目录表以获得约束的名称的所有者。例如，要查
找位于 items 表上约束的名称，您可以发出以下语句：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8cb02e1e47915b5ae45816aea96bae49/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-17T16:51:17+08:00" />
<meta property="article:modified_time" content="2022-10-17T16:51:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DROP CONSTRAINT 子句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>使用 DROP CONSTRAINT 子句删除指定的约束。<br> ALTER TABLE 语句的 DROP CONSTRAINT 子句具有此语法：<br> DROP CONSTRAINT 子句<br> 用法<br> 要删除现有约束，请指定 DROP CONSTRAINT 关键字和此约束的名称。要删除同一表上的多个约束，则约束名称列表必须逗号分隔并由括号分隔。<br> 您要删除的约束可具有 ENABLED 、DISABLED 或 FILTERING 方式。<br> 这里是一个删除约束的示例：<br> ALTER TABLE manufact DROP CONSTRAINT con_name;<br> 以下示例删除了定义在 orders 表中的引用约束和检查约束：<br> ALTER TABLE orders DROP CONSTRAINT (con_ref, con_check);<br> GBase 8s 的 SQL 执行包含非 DROP CONSTRAINT 语句。然而，如果该语句存在，则 ALTER<br> TABLE 语句的此子句提供一个 DROP CONSTRAINT 语句除外的功能。<br> 当 DROP TABLE 语句删除该表时，会默示地删除该指定表上所有的约束。<br> <strong>获取约束名称</strong><br> DROP CONSTRAINT 子句需要约束的名称。如果创建约束时没有声明名称，则数据库服务器生成<br> 新的约束的名称。您可以查询 sysconstraints 系统目录表以获得约束的名称的所有者。例如，要查<br> 找位于 items 表上约束的名称，您可以发出以下语句：<br> SELECT constrname FROM sysconstraints<br> WHERE tabid = (SELECT tabid FROM systables<br> WHERE tabname = ‘items’);<br> <strong>约束之间的依赖</strong><br> 当您删除拥有对应外键的主键约束或唯一约束时，任何相关联的引用约束也会被删除。<br> 例如，在 stores_demo 数据库中，orders 表的 order_num 列上具有主键约束。对应的外键约束<br> 也定义在 items 表中的 order_num 列。这些约束定义在这两个表中的 order_num 列定义了引用<br> 关系。<br> 假设您运行 ALTER TABLE orders DROP CONSTRAINT 语句删除 orders 表 order_num 列上的主键约束。因为在这两个表之间的参照完整性关系不能没有主键约束，如果此示例中的 ALTER TABLE 语句成功，则数据库服务器将会采取这些操作：<br> ⚫ 删除 orders 表 order_num 列上指定的主键约束。<br> ⚫ 删除 items 表 order_num 列上对应的引用约束。<br> ⚫ 从系统目录中删除所有引用 orders 表的主键或 items 表上引用约束。<br> <strong>删除约束对系统目录的影响</strong><br> 数据库服务器维护这些系统目录表中的现有约束的信息：<br> ⚫ sysconstraints（所有的约束）<br> ⚫ sysobjstate（所有的约束）<br> ⚫ syschecks （检查约束）<br> ⚫ syscoldepend（检查约束和 NOT NULL 约束）<br> ⚫ syscheckudrdep（UDR 引用的检查约束）<br> ⚫ sysreferences（引用约束）<br> ⚫ sysindices（ 在 sysindices 中没有对应所有项的引用、主键或唯一约束）<br> 当 DROP CONSTRAINT 子句成功删除约束之后，数据库服务器至少删除或更新以上一个或多个表的一行。<br> <strong>数据类型的注意事项</strong><br> 缺省情况下，每一 IDSSECURITYLABEL 列拥有一个隐式的 NOT NULL 约束，但是 DROP<br> CONSTRAINT 子句不能引用 IDSSECURITYLABEL 类型的列。<br> 您可以在 ROW 数据类型的已分类表的 ALTER TABLE 操作中包含 DROP CONSTRAINT 子句。<br> <strong>还原引用约束</strong><br> 对于某些操作，例如将表重新定位到另一个数据库中，您可能要求引用约束暂时不会对它的表产生<br> 影响。然而，当您不带此约束而完成操作后，数据库的参照完整性通常要求还原此约束的功能。可<br> 能的选项是：<br> ⚫ 使用 DROP CONSTRAINT 子句删除此约束。<br> ⚫ 完成此任务需要避免该约束的影响。<br> ⚫ 使用 ALTER TABLE ADD CONSTRAINT 重建此约束。<br> 对于符合已删除外键约束的大表，在 ALTER TABLE ADD CONSTRAINT 已经中使用<br> NOVALIDATE 选项可以避免创建约束时使用全表扫描验证约束的显著成本。此 NOVALIDATE<br> 选项要求使 Multi-Column Constraint Format 语法定义此约束。<br> 类似地，比起删除大表上的引用约束，您可以禁用它，然后完成任务，使用禁用的约束需要较少的<br> 资源。要恢复约束的强制性，您可以使用 SET Database Object Mode 语句的 SET CONSTRAINTS<br> 选项将此对象的方式重置为 ENABLED NOVALIDATE 或 FILTERING WITH ERROR<br> NOVALIDATE 或 FILTERING WITHOUT ERROR NOVALIDATE。在以上每一种约束方式中，<br> NOVALIDATE 关键字避免了重置方式时验证约束的开销。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5026305c5f457b3fad5173454585b40/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql新建用户并赋权</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f68e354a0d19b904ce6f94e58b91ff6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在 NOVALIDATE 方式下创建外键约束</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>