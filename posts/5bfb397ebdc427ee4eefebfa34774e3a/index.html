<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>赛元单片机触摸按键调节及避坑指南(以SC92F8461B的高灵敏触摸为例) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="赛元单片机触摸按键调节及避坑指南(以SC92F8461B的高灵敏触摸为例)" />
<meta property="og:description" content="目录 前言流程总览步骤说明1.烧录官方高灵敏hex文件2.目标板连接电脑并选择初始参数3.参数调整4.验证相互间影响5.将配置信添加到工程6.灵活调整 总结 前言 项目中前前后后用到过好多次带触摸按键功能的赛元单片机，第一次使用时研究了好久的使用手册。过了一段时间后，再次使用，便又忘了，写下这篇文章，方便今后查阅和回顾。
本文以SC92F8461B，静态调试高灵敏触摸为例。
流程总览 1.烧录官方高灵敏hex文件 2.目标板连接电脑并选择初始参数 3.参数调整 4.验证相互间影响 5.将配置信添加到工程 6.灵活调整 下面从各个步骤进行说明，重点是步骤2、3及步骤6。
步骤说明 1.烧录官方高灵敏hex文件 向官方或者代理的技术支持要到静态触摸调试的hex文件(这个文件官网下载不到)，SC92F8x6xB用到的hex文件已上传至楼主资源，文件截图如下：
用官方提供的程序烧录软件SOC Pro51烧录至目标板，软件及其界面如下：
烧录中的选项可参考此界面。
2.目标板连接电脑并选择初始参数 完成上一步操作之后，最好将烧录器拔插一次，要不然上位机软件可能会检测不到目标板。打开触控调节的上位机软件，软件图标如下：
选择&#34;高灵敏度触控&#34;：
上位机初始界面如下：
以SC92F8461B为例，我只会更改红框中的参数，首先选择对应的型号，抗干扰设置改为1:12bit，选择用到的通道，其它参数保持默认，就可以点确定了。
等待触控芯片自适应参数，若上位机提示检测不到目标板，可以按下面的步骤进行排查：
避坑指南
①重新拔插目标板与烧录器的连接，重新拔插烧录器与电脑的连接。
②调试时用到的TCK和DIO端口是否连接了阻容，如果是，最好拆掉后跳个线再试一下。
tips：以上问题都是我自己曾经遇到过的，最后都由上述方案得到了解决。
连接成功后，就可以进行参数调整了。
3.参数调整 目标板与电脑连接成功后的界面如上图所示，红框框中的按钮表示要调整两个按键的参数，点击第一个按钮，界面如下：
点击启动调试后，跟随上位机指示，完成参数调整。
在完成参数调整后，若参数调整成功，界面如下：
再看下失败的界面：
失败的界面下会有很多参数是红色的，这表示参数不在限定条件内，即参数调整失败。我在调整时也遇到过几次这样的现象，基本上都是硬件问题，经验如下：
①检查板子的CMOD引脚是否复用外接了负载，此引脚在激活触控功能时不能连接负载，若连接了负载，断开负载再试试。
②触摸按键所接的阻容参数不合适，这点可详细看下文档，或者问下FAE。
这些数字是多少不是很重要，只要是参数调节成功后，就可以进入下一步操作了。
4.验证相互间影响 点击上图中的按钮，
按照图片中的提示进行操作，当按键都检测完后，检测成功的话会有如下的提示：
我遇到过一次诊断失败的情况，但是最后排查后发现并不是目标板布线的问题，而是端子处的阻容不匹配，导致提示按键之间有影响。
5.将配置信添加到工程 诊断完成后，便可点击如下按钮生成.h文件了，默认文件名是S_TouchKeyCFG.h，然后将此文件添加至工程即可。
我个人喜欢将此头文件和官方的lib文件和.c文件放在一个文件夹下，如下图所示，方便管理。
6.灵活调整 将此文件添加至工程后，上位机生成的参数只是可以确保开发者能使用按键，但是对于EMC实验等还需要手动微调。可以在调节参数时使用相应规格的铜柱来辅助调整，这里没有什么技巧，就是慢慢试，而且调整一次就要烧录一次，然后用铜柱验证。
下面对哪些是开发者可以自己调整的参数进行说明：
①标号的位置表示是否激活组合按键，为0表示不激活组合按键，为1表示激活组合按键
②标号的位置是用于修改灵敏度的，可用于过emc的抗干扰试验，两个字节组成的16位数据，此数据越大，灵敏度便越低。一般来说都是灵敏度太高才需要我们去手动调整，我一般是直接修改高字节的数据，以上图为例的话，这个数据是未经修改的，我一般会把0x00改成0x01或0x02，来烧录验证。这些只是个人经验，具体板子需要具体应对。
总结 需要提醒一下，赛元的官方库会直接输出一个键值信息，应该是32位的，这个键值是可以直接使用的，当然，也可以基于此键值继续写一下消抖函数，这个键值具体的用法这篇就不介绍了，本文主要目的在于如何成功输出一个有效的配置头文件。文中提到的工具都已打包好上传至我的资源中，包括说明文档，使用指南和烧录工具及上位机软件，都是赛元官方的，除了库文件外，官网都可以直接下载。
笔芯，变得更强~" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5bfb397ebdc427ee4eefebfa34774e3a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-10T18:20:29+08:00" />
<meta property="article:modified_time" content="2021-04-10T18:20:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">赛元单片机触摸按键调节及避坑指南(以SC92F8461B的高灵敏触摸为例)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#_4" rel="nofollow">流程总览</a></li><li><a href="#_12" rel="nofollow">步骤说明</a></li><li><ul><li><a href="#1hex_13" rel="nofollow">1.烧录官方高灵敏hex文件</a></li><li><a href="#2_19" rel="nofollow">2.目标板连接电脑并选择初始参数</a></li><li><a href="#3_32" rel="nofollow">3.参数调整</a></li><li><a href="#4_46" rel="nofollow">4.验证相互间影响</a></li><li><a href="#5_53" rel="nofollow">5.将配置信添加到工程</a></li><li><a href="#6_58" rel="nofollow">6.灵活调整</a></li></ul> 
  </li><li><a href="#_64" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>项目中前前后后用到过好多次带触摸按键功能的赛元单片机，第一次使用时研究了好久的使用手册。过了一段时间后，再次使用，便又忘了，写下这篇文章，方便今后查阅和回顾。<br> 本文以SC92F8461B，静态调试高灵敏触摸为例。</p> 
<h2><a id="_4"></a>流程总览</h2> 
<div class="mermaid"> 
 <svg id="mermaid-svg-df4CU48E5dnRhyev" width="1243.859375" xmlns="http://www.w3.org/2000/svg" height="62" viewbox="0 0 1243.859375 62"> 
  <style>#mermaid-svg-df4CU48E5dnRhyev .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);fill:#333;color:#333}#mermaid-svg-df4CU48E5dnRhyev .label text{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .node rect,#mermaid-svg-df4CU48E5dnRhyev .node circle,#mermaid-svg-df4CU48E5dnRhyev .node ellipse,#mermaid-svg-df4CU48E5dnRhyev .node polygon,#mermaid-svg-df4CU48E5dnRhyev .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-df4CU48E5dnRhyev .node .label{text-align:center;fill:#333}#mermaid-svg-df4CU48E5dnRhyev .node.clickable{cursor:pointer}#mermaid-svg-df4CU48E5dnRhyev .arrowheadPath{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-svg-df4CU48E5dnRhyev .flowchart-link{stroke:#333;fill:none}#mermaid-svg-df4CU48E5dnRhyev .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-svg-df4CU48E5dnRhyev .edgeLabel rect{opacity:0.9}#mermaid-svg-df4CU48E5dnRhyev .edgeLabel span{color:#333}#mermaid-svg-df4CU48E5dnRhyev .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-svg-df4CU48E5dnRhyev .cluster text{fill:#333}#mermaid-svg-df4CU48E5dnRhyev div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-svg-df4CU48E5dnRhyev .actor{stroke:#ccf;fill:#ECECFF}#mermaid-svg-df4CU48E5dnRhyev text.actor&gt;tspan{fill:#000;stroke:none}#mermaid-svg-df4CU48E5dnRhyev .actor-line{stroke:grey}#mermaid-svg-df4CU48E5dnRhyev .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333}#mermaid-svg-df4CU48E5dnRhyev .messageLine1{stroke-width:1.5;stroke-dasharray:2, 2;stroke:#333}#mermaid-svg-df4CU48E5dnRhyev #arrowhead path{fill:#333;stroke:#333}#mermaid-svg-df4CU48E5dnRhyev .sequenceNumber{fill:#fff}#mermaid-svg-df4CU48E5dnRhyev #sequencenumber{fill:#333}#mermaid-svg-df4CU48E5dnRhyev #crosshead path{fill:#333;stroke:#333}#mermaid-svg-df4CU48E5dnRhyev .messageText{fill:#333;stroke:#333}#mermaid-svg-df4CU48E5dnRhyev .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-svg-df4CU48E5dnRhyev .labelText,#mermaid-svg-df4CU48E5dnRhyev .labelText&gt;tspan{fill:#000;stroke:none}#mermaid-svg-df4CU48E5dnRhyev .loopText,#mermaid-svg-df4CU48E5dnRhyev .loopText&gt;tspan{fill:#000;stroke:none}#mermaid-svg-df4CU48E5dnRhyev .loopLine{stroke-width:2px;stroke-dasharray:2, 2;stroke:#ccf;fill:#ccf}#mermaid-svg-df4CU48E5dnRhyev .note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-df4CU48E5dnRhyev .noteText,#mermaid-svg-df4CU48E5dnRhyev .noteText&gt;tspan{fill:#000;stroke:none}#mermaid-svg-df4CU48E5dnRhyev .activation0{fill:#f4f4f4;stroke:#666}#mermaid-svg-df4CU48E5dnRhyev .activation1{fill:#f4f4f4;stroke:#666}#mermaid-svg-df4CU48E5dnRhyev .activation2{fill:#f4f4f4;stroke:#666}#mermaid-svg-df4CU48E5dnRhyev .mermaid-main-font{font-family:"trebuchet ms", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .section{stroke:none;opacity:0.2}#mermaid-svg-df4CU48E5dnRhyev .section0{fill:rgba(102,102,255,0.49)}#mermaid-svg-df4CU48E5dnRhyev .section2{fill:#fff400}#mermaid-svg-df4CU48E5dnRhyev .section1,#mermaid-svg-df4CU48E5dnRhyev .section3{fill:#fff;opacity:0.2}#mermaid-svg-df4CU48E5dnRhyev .sectionTitle0{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .sectionTitle1{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .sectionTitle2{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .sectionTitle3{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-svg-df4CU48E5dnRhyev .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .grid path{stroke-width:0}#mermaid-svg-df4CU48E5dnRhyev .today{fill:none;stroke:red;stroke-width:2px}#mermaid-svg-df4CU48E5dnRhyev .task{stroke-width:2}#mermaid-svg-df4CU48E5dnRhyev .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .taskText:not([font-size]){font-size:11px}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-svg-df4CU48E5dnRhyev .task.clickable{cursor:pointer}#mermaid-svg-df4CU48E5dnRhyev .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-svg-df4CU48E5dnRhyev .taskText0,#mermaid-svg-df4CU48E5dnRhyev .taskText1,#mermaid-svg-df4CU48E5dnRhyev .taskText2,#mermaid-svg-df4CU48E5dnRhyev .taskText3{fill:#fff}#mermaid-svg-df4CU48E5dnRhyev .task0,#mermaid-svg-df4CU48E5dnRhyev .task1,#mermaid-svg-df4CU48E5dnRhyev .task2,#mermaid-svg-df4CU48E5dnRhyev .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutside0,#mermaid-svg-df4CU48E5dnRhyev .taskTextOutside2{fill:#000}#mermaid-svg-df4CU48E5dnRhyev .taskTextOutside1,#mermaid-svg-df4CU48E5dnRhyev .taskTextOutside3{fill:#000}#mermaid-svg-df4CU48E5dnRhyev .active0,#mermaid-svg-df4CU48E5dnRhyev .active1,#mermaid-svg-df4CU48E5dnRhyev .active2,#mermaid-svg-df4CU48E5dnRhyev .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-svg-df4CU48E5dnRhyev .activeText0,#mermaid-svg-df4CU48E5dnRhyev .activeText1,#mermaid-svg-df4CU48E5dnRhyev .activeText2,#mermaid-svg-df4CU48E5dnRhyev .activeText3{fill:#000 !important}#mermaid-svg-df4CU48E5dnRhyev .done0,#mermaid-svg-df4CU48E5dnRhyev .done1,#mermaid-svg-df4CU48E5dnRhyev .done2,#mermaid-svg-df4CU48E5dnRhyev .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-svg-df4CU48E5dnRhyev .doneText0,#mermaid-svg-df4CU48E5dnRhyev .doneText1,#mermaid-svg-df4CU48E5dnRhyev .doneText2,#mermaid-svg-df4CU48E5dnRhyev .doneText3{fill:#000 !important}#mermaid-svg-df4CU48E5dnRhyev .crit0,#mermaid-svg-df4CU48E5dnRhyev .crit1,#mermaid-svg-df4CU48E5dnRhyev .crit2,#mermaid-svg-df4CU48E5dnRhyev .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-svg-df4CU48E5dnRhyev .activeCrit0,#mermaid-svg-df4CU48E5dnRhyev .activeCrit1,#mermaid-svg-df4CU48E5dnRhyev .activeCrit2,#mermaid-svg-df4CU48E5dnRhyev .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-svg-df4CU48E5dnRhyev .doneCrit0,#mermaid-svg-df4CU48E5dnRhyev .doneCrit1,#mermaid-svg-df4CU48E5dnRhyev .doneCrit2,#mermaid-svg-df4CU48E5dnRhyev .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-svg-df4CU48E5dnRhyev .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-svg-df4CU48E5dnRhyev .milestoneText{font-style:italic}#mermaid-svg-df4CU48E5dnRhyev .doneCritText0,#mermaid-svg-df4CU48E5dnRhyev .doneCritText1,#mermaid-svg-df4CU48E5dnRhyev .doneCritText2,#mermaid-svg-df4CU48E5dnRhyev .doneCritText3{fill:#000 !important}#mermaid-svg-df4CU48E5dnRhyev .activeCritText0,#mermaid-svg-df4CU48E5dnRhyev .activeCritText1,#mermaid-svg-df4CU48E5dnRhyev .activeCritText2,#mermaid-svg-df4CU48E5dnRhyev .activeCritText3{fill:#000 !important}#mermaid-svg-df4CU48E5dnRhyev .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev g.classGroup text{fill:#9370db;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-svg-df4CU48E5dnRhyev g.classGroup text .title{font-weight:bolder}#mermaid-svg-df4CU48E5dnRhyev g.clickable{cursor:pointer}#mermaid-svg-df4CU48E5dnRhyev g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-df4CU48E5dnRhyev g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-svg-df4CU48E5dnRhyev .classLabel .label{fill:#9370db;font-size:10px}#mermaid-svg-df4CU48E5dnRhyev .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-df4CU48E5dnRhyev .dashed-line{stroke-dasharray:3}#mermaid-svg-df4CU48E5dnRhyev #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev .commit-id,#mermaid-svg-df4CU48E5dnRhyev .commit-msg,#mermaid-svg-df4CU48E5dnRhyev .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev g.stateGroup text{fill:#9370db;fill:#333;stroke:none;font-size:10px}#mermaid-svg-df4CU48E5dnRhyev g.statediagram-cluster .cluster-label text{fill:#333}#mermaid-svg-df4CU48E5dnRhyev g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-svg-df4CU48E5dnRhyev g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-svg-df4CU48E5dnRhyev g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-svg-df4CU48E5dnRhyev .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-svg-df4CU48E5dnRhyev .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-svg-df4CU48E5dnRhyev .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-svg-df4CU48E5dnRhyev .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-svg-df4CU48E5dnRhyev .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-svg-df4CU48E5dnRhyev .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.7}#mermaid-svg-df4CU48E5dnRhyev .edgeLabel text{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-svg-df4CU48E5dnRhyev .node circle.state-start{fill:black;stroke:black}#mermaid-svg-df4CU48E5dnRhyev .node circle.state-end{fill:black;stroke:white;stroke-width:1.5}#mermaid-svg-df4CU48E5dnRhyev #statediagram-barbEnd{fill:#9370db}#mermaid-svg-df4CU48E5dnRhyev .statediagram-cluster rect{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-svg-df4CU48E5dnRhyev .statediagram-cluster rect.outer{rx:5px;ry:5px}#mermaid-svg-df4CU48E5dnRhyev .statediagram-state .divider{stroke:#9370db}#mermaid-svg-df4CU48E5dnRhyev .statediagram-state .title-state{rx:5px;ry:5px}#mermaid-svg-df4CU48E5dnRhyev .statediagram-cluster.statediagram-cluster .inner{fill:white}#mermaid-svg-df4CU48E5dnRhyev .statediagram-cluster.statediagram-cluster-alt .inner{fill:#e0e0e0}#mermaid-svg-df4CU48E5dnRhyev .statediagram-cluster .inner{rx:0;ry:0}#mermaid-svg-df4CU48E5dnRhyev .statediagram-state rect.basic{rx:5px;ry:5px}#mermaid-svg-df4CU48E5dnRhyev .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#efefef}#mermaid-svg-df4CU48E5dnRhyev .note-edge{stroke-dasharray:5}#mermaid-svg-df4CU48E5dnRhyev .statediagram-note rect{fill:#fff5ad;stroke:#aa3;stroke-width:1px;rx:0;ry:0}:root{--mermaid-font-family: '"trebuchet ms", verdana, arial';--mermaid-font-family: "Comic Sans MS", "Comic Sans", cursive}#mermaid-svg-df4CU48E5dnRhyev .error-icon{fill:#522}#mermaid-svg-df4CU48E5dnRhyev .error-text{fill:#522;stroke:#522}#mermaid-svg-df4CU48E5dnRhyev .edge-thickness-normal{stroke-width:2px}#mermaid-svg-df4CU48E5dnRhyev .edge-thickness-thick{stroke-width:3.5px}#mermaid-svg-df4CU48E5dnRhyev .edge-pattern-solid{stroke-dasharray:0}#mermaid-svg-df4CU48E5dnRhyev .edge-pattern-dashed{stroke-dasharray:3}#mermaid-svg-df4CU48E5dnRhyev .edge-pattern-dotted{stroke-dasharray:2}#mermaid-svg-df4CU48E5dnRhyev .marker{fill:#333}#mermaid-svg-df4CU48E5dnRhyev .marker.cross{stroke:#333}

:root { --mermaid-font-family: "trebuchet ms", verdana, arial;}</style> 
  <style>#mermaid-svg-df4CU48E5dnRhyev {
    color: rgba(0, 0, 0, 0.75);
    font: ;
  }</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M211.140625,31L236.140625,31L261.140625,31" marker-end="url(#arrowhead3003)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead3003" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M518.484375,31L543.484375,31L568.484375,31" marker-end="url(#arrowhead3004)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead3004" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"> 
      <path class="path" d="M665.828125,31L690.828125,31L715.828125,31" marker-end="url(#arrowhead3005)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead3005" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M861.171875,31L886.171875,31L911.171875,31" marker-end="url(#arrowhead3006)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead3006" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-F" style="opacity: 1;" id="L-E-F"> 
      <path class="path" d="M1088.515625,31L1113.515625,31L1138.515625,31" marker-end="url(#arrowhead3007)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead3007" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0" style="fill:#e8e8e8;"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-F" class="edgeLabel L-LS-E' L-LE-F"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="A" transform="translate(109.5703125,31)" style="opacity: 1;"> 
      <rect rx="5" ry="5" x="-101.5703125" y="-23" width="203.140625" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-91.5703125,-13)"> 
        <foreignobject width="183.140625" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1.烧录官方高灵敏hex文件 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="B" transform="translate(389.8125,31)"> 
      <rect rx="5" ry="5" x="-128.671875" y="-23" width="257.34375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-118.671875,-13)"> 
        <foreignobject width="237.34375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2.目标板连接电脑并选择初始参数 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="C" transform="translate(617.15625,31)"> 
      <rect rx="5" ry="5" x="-48.671875" y="-23" width="97.34375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-38.671875,-13)"> 
        <foreignobject width="77.34375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3.参数调整 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="D" transform="translate(788.5,31)"> 
      <rect rx="5" ry="5" x="-72.671875" y="-23" width="145.34375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-62.671875,-13)"> 
        <foreignobject width="125.34375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4.验证相互间影响 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="E" transform="translate(999.84375,31)"> 
      <rect rx="5" ry="5" x="-88.671875" y="-23" width="177.34375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-78.671875,-13)"> 
        <foreignobject width="157.34375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5.将配置信添加到工程 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="F" transform="translate(1187.1875,31)"> 
      <rect rx="5" ry="5" x="-48.671875" y="-23" width="97.34375" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-38.671875,-13)"> 
        <foreignobject width="77.34375" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           6.灵活调整 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>下面从各个步骤进行说明，重点是步骤2、3及步骤6。</p> 
<h2><a id="_12"></a>步骤说明</h2> 
<h3><a id="1hex_13"></a>1.烧录官方高灵敏hex文件</h3> 
<p>向官方或者代理的技术支持要到静态触摸调试的hex文件(这个文件官网下载不到)，SC92F8x6xB用到的hex文件已上传至楼主资源，文件截图如下：<br> <img src="https://images2.imgbox.com/1c/84/epjz9iXS_o.png" alt="在这里插入图片描述"><br> 用官方提供的程序烧录软件SOC Pro51烧录至目标板，软件及其界面如下：<img src="https://images2.imgbox.com/0b/e4/wzBaDwcw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d9/a6/dwgu8Bvm_o.png" alt="在这里插入图片描述"><br> 烧录中的选项可参考此界面。</p> 
<h3><a id="2_19"></a>2.目标板连接电脑并选择初始参数</h3> 
<p>完成上一步操作之后，最好将烧录器拔插一次，要不然上位机软件可能会检测不到目标板。打开触控调节的上位机软件，软件图标如下：<img src="https://images2.imgbox.com/5b/79/0DkuruB6_o.png" alt="在这里插入图片描述"><br> 选择"高灵敏度触控"：<br> <img src="https://images2.imgbox.com/26/e9/hi9sCypQ_o.png" alt="在这里插入图片描述"><br> 上位机初始界面如下：<br> <img src="https://images2.imgbox.com/1a/f3/4rExTAfD_o.png" alt="在这里插入图片描述"><br> 以SC92F8461B为例，我只会更改红框中的参数，首先选择对应的型号，抗干扰设置改为1:12bit，选择用到的通道，其它参数保持默认，就可以点确定了。<br> 等待触控芯片自适应参数，若上位机提示检测不到目标板，可以按下面的步骤进行排查：</p> 
<blockquote> 
 <p><mark>避坑指南</mark><br> ①重新拔插目标板与烧录器的连接，重新拔插烧录器与电脑的连接。<br> ②调试时用到的TCK和DIO端口是否连接了阻容，如果是，最好拆掉后跳个线再试一下。<br> tips：以上问题都是我自己曾经遇到过的，最后都由上述方案得到了解决。<br> 连接成功后，就可以进行参数调整了。</p> 
</blockquote> 
<h3><a id="3_32"></a>3.参数调整</h3> 
<p><img src="https://images2.imgbox.com/2c/cc/LOb8Ba3q_o.png" alt="在这里插入图片描述"><br> 目标板与电脑连接成功后的界面如上图所示，红框框中的按钮表示要调整两个按键的参数，点击第一个按钮，界面如下：<br> <img src="https://images2.imgbox.com/61/3e/Wz87Am9e_o.png" alt="在这里插入图片描述"><br> 点击启动调试后，跟随上位机指示，完成参数调整。<br> 在完成参数调整后，若参数调整成功，界面如下：<br> <img src="https://images2.imgbox.com/aa/d5/pRIUHkl4_o.png" alt="在这里插入图片描述"><br> 再看下失败的界面：<br> <img src="https://images2.imgbox.com/01/51/aH1hsnZG_o.png" alt="在这里插入图片描述"><br> 失败的界面下会有很多参数是红色的，这表示参数不在限定条件内，即参数调整失败。我在调整时也遇到过几次这样的现象，基本上都是硬件问题，经验如下：</p> 
<blockquote> 
 <p>①检查板子的CMOD引脚是否复用外接了负载，此引脚在激活触控功能时不能连接负载，若连接了负载，断开负载再试试。<br> ②触摸按键所接的阻容参数不合适，这点可详细看下文档，或者问下FAE。</p> 
</blockquote> 
<p>这些数字是多少不是很重要，只要是参数调节成功后，就可以进入下一步操作了。</p> 
<h3><a id="4_46"></a>4.验证相互间影响</h3> 
<p><img src="https://images2.imgbox.com/6a/cf/h0vP16NH_o.png" alt="在这里插入图片描述"><br> 点击上图中的按钮，<br> <img src="https://images2.imgbox.com/a8/70/U0vJxAAS_o.png" alt="在这里插入图片描述"><br> 按照图片中的提示进行操作，当按键都检测完后，检测成功的话会有如下的提示：<br> <img src="https://images2.imgbox.com/2f/48/d1SG8R7q_o.png" alt="在这里插入图片描述"><br> 我遇到过一次诊断失败的情况，但是最后排查后发现并不是目标板布线的问题，而是端子处的阻容不匹配，导致提示按键之间有影响。</p> 
<h3><a id="5_53"></a>5.将配置信添加到工程</h3> 
<p>诊断完成后，便可点击如下按钮生成.h文件了，默认文件名是S_TouchKeyCFG.h，然后将此文件添加至工程即可。<br> <img src="https://images2.imgbox.com/9b/57/ssgldh1X_o.png" alt="在这里插入图片描述"><br> 我个人喜欢将此头文件和官方的lib文件和.c文件放在一个文件夹下，如下图所示，方便管理。<br> <img src="https://images2.imgbox.com/b8/34/lpzs3KAQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6_58"></a>6.灵活调整</h3> 
<p>将此文件添加至工程后，上位机生成的参数只是可以确保开发者能使用按键，但是对于EMC实验等还需要手动微调。可以在调节参数时使用相应规格的铜柱来辅助调整，这里没有什么技巧，就是慢慢试，而且调整一次就要烧录一次，然后用铜柱验证。<br> 下面对哪些是开发者可以自己调整的参数进行说明：<br> <img src="https://images2.imgbox.com/d8/6e/wovSzqeI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>①标号的位置表示是否激活组合按键，为0表示不激活组合按键，为1表示激活组合按键<br> ②标号的位置是用于修改灵敏度的，可用于过emc的抗干扰试验，两个字节组成的16位数据，此数据越大，灵敏度便越低。一般来说都是灵敏度太高才需要我们去手动调整，我一般是直接修改高字节的数据，以上图为例的话，这个数据是未经修改的，我一般会把0x00改成0x01或0x02，来烧录验证。这些只是个人经验，具体板子需要具体应对。</p> 
</blockquote> 
<h2><a id="_64"></a>总结</h2> 
<p>需要提醒一下，赛元的官方库会直接输出一个键值信息，应该是32位的，这个键值是可以直接使用的，当然，也可以基于此键值继续写一下消抖函数，这个键值具体的用法这篇就不介绍了，本文主要目的在于如何成功输出一个有效的配置头文件。文中提到的工具都已打包好上传至我的资源中，包括说明文档，使用指南和烧录工具及上位机软件，都是赛元官方的，除了库文件外，官网都可以直接下载。<br> 笔芯，变得更强~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fc1c062694593841781fba26df602a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hive 加载数据跳过表头</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0abcf1c61a9773fddb2a581d07699772/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">hybrid 是什么</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>