<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos 7 Redis编译部署最佳实践 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos 7 Redis编译部署最佳实践" />
<meta property="og:description" content="下载安装包 下载链接：
Index of /releases/
根据实际需要安装对应版本的Redis应用服务
对于Redis 6以上版本的，需要高版本的GCC支持
在不升级GCC的情况下安装Redis服务，只针对centos7 有效，centos6无法创建虚拟GCC环境
但是因为是默认情况下会安装现有的低版本GCC，如果去升级的情况下可能会导致有依赖其他的应用服务出现异常的情况，因此可以通过centos 7的虚拟环境的方式去创建Redis服务
具体的配置方式如下：
创建高级版本的GCC环境：
yum install centos-release-scl scl-utils-build yum install devtoolset-9-gcc devtoolset-9-gcc-c&#43;&#43; devtoolset-9-binutils scl enable devtoolset-9 bash 配置完成之后会生成devtoolset-9-gcc环境
然后再进行安装
cd /usr/local/services/src/redis-6.0.8 make make PREFIX=/usr/local/services/redis-6.0.8 install 部署完成之后会生成对应的bin文件
此时还需要对创建的配置文件创建对应的文件信息
包括etc logs配置
etc的配置信息可以参考源码上的redis.conf配置进行相应的修改
包括绑定的端口 IP地址 logs的日志文件路径和名称
pid的文件路径
以及持久化，读写间隔设置 密码等信息
配置systemctl启动项服务
# systemctl cat redis-server.service # /usr/lib/systemd/system/redis-server.service [Unit] Description=Redis data structure server Documentation=https://redis.io/documentation #Before=your_application.service another_example_application.service #AssertPathExists=/var/lib/redis Wants=network-online.target After=network-online.target [Service] #ExecStart=/usr/local/bin/redis-server --supervised systemd --daemonize no ## Alternatively, have redis-server load a configuration file: ExecStart=/usr/local/services/redis-6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/15738c6e52fa30594df9522632ced22c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-22T10:30:29+08:00" />
<meta property="article:modified_time" content="2022-07-22T10:30:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos 7 Redis编译部署最佳实践</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>下载安装包 下载链接：</p> 
<p><a href="http://download.redis.io/releases/" rel="nofollow" title="Index of /releases/">Index of /releases/</a></p> 
<p>根据实际需要安装对应版本的Redis应用服务</p> 
<p>对于Redis 6以上版本的，需要高版本的GCC支持</p> 
<p>在不升级GCC的情况下安装Redis服务，只针对centos7 有效，centos6无法创建虚拟GCC环境</p> 
<p>但是因为是默认情况下会安装现有的低版本GCC，如果去升级的情况下可能会导致有依赖其他的应用服务出现异常的情况，因此可以通过centos 7的虚拟环境的方式去创建Redis服务</p> 
<p>具体的配置方式如下：</p> 
<p></p> 
<p>创建高级版本的GCC环境：</p> 
<pre><code>yum install centos-release-scl scl-utils-build
yum install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
scl enable devtoolset-9 bash</code></pre> 
<p>配置完成之后会生成devtoolset-9-gcc环境</p> 
<p>然后再进行安装</p> 
<pre><code>cd /usr/local/services/src/redis-6.0.8
make
make PREFIX=/usr/local/services/redis-6.0.8 install</code></pre> 
<p>部署完成之后会生成对应的bin文件</p> 
<p>此时还需要对创建的配置文件创建对应的文件信息</p> 
<p>包括etc logs配置</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7e/db/aNxvFp4F_o.png" width="914"></p> 
<p></p> 
<p>etc的配置信息可以参考源码上的redis.conf配置进行相应的修改</p> 
<p>包括绑定的端口 IP地址 logs的日志文件路径和名称</p> 
<p>pid的文件路径</p> 
<p>以及持久化，读写间隔设置 密码等信息</p> 
<p></p> 
<p>配置systemctl启动项服务</p> 
<pre><code># systemctl  cat redis-server.service 
# /usr/lib/systemd/system/redis-server.service
[Unit]
Description=Redis data structure server
Documentation=https://redis.io/documentation
#Before=your_application.service another_example_application.service
#AssertPathExists=/var/lib/redis
Wants=network-online.target
After=network-online.target

[Service]
#ExecStart=/usr/local/bin/redis-server --supervised systemd --daemonize no
## Alternatively, have redis-server load a configuration file:
ExecStart=/usr/local/services/redis-6.0.8/bin/redis-server /usr/local/services/redis-6.0.8/etc/redis_123.conf
LimitNOFILE=10032
NoNewPrivileges=yes
#OOMScoreAdjust=-900
#PrivateTmp=yes
#Type=notify
TimeoutStartSec=infinity
TimeoutStopSec=infinity
UMask=0077
#User=redis
#Group=redis
WorkingDirectory=/usr/local/services/redis-6.0.8

[Install]
WantedBy=multi-user.target</code></pre> 
<p>启动脚本信息可以参考源文件中的redis.conf配置信息</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c4c6e0a3d2a13a0dd1975b3326bfe14/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在计算机上设置指定当拒绝用户访问文件或文件夹时要显示的自定义消息【Windows操作系统优化配置】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e44fed84ab8cfa829610f375c0535e95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux相关命令详解持续更新</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>