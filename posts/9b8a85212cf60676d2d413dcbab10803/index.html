<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在windows11环境下安装CUDA11.6&#43;Anaconda3&#43;pyToach1.13搭建炼丹炉 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在windows11环境下安装CUDA11.6&#43;Anaconda3&#43;pyToach1.13搭建炼丹炉" />
<meta property="og:description" content="0.电脑环境 系统：win11
显卡：NVIDIA GTX1650
还有一个pyCharm，其他也用不到了，需要的文章中会进行说明
1.安装CUDA11.6 目前2023.03出来的pyToach2.0是用不到了，因为最低版本支持CUDA11.7。我的显卡是1650，驱动达不到CUDA11.7的要求，因此安装不了11.7。（主要原因是和女朋友端午旅游把我计划要买的4060TI 16G钱花掉了/(ㄒoㄒ)/~~，只能继续压榨我的我的小显卡了）。
pyToach2.0看说明是比1.13快很多，但是安装方式一样的，有好显卡的一定要安装CUDA11.7进而支持pyToach2.0
PyTorch的官网：官网
可以看的具体的依赖
显卡驱动和cuda对照
首先打开 cmd 命令窗口，输出如下命令：
nvidia-smi
可以看到，此时显示的表格中，有一个字段叫 CUDA Version，像我的界面是这样的：
在这个官方网站：老黄的CUDA网站
找到11.6，下载它，三个都可以下载，随便选一个
说明：
安装cuda时，第一次会让设置临时解压目录，第二次会让设置安装目录；
临时解压路径，建议默认即可，也可以自定义。安装结束后，临时解压文件夹会自动删除；
安装目录，自定义最好；
注意：临时解压目录千万不要和cuda的安装路径设置成一样的，否则安装结束，会找不到安装目录
选择自定义安装
安装完成后，配置cuda的环境变量；
命令行中，测试是否安装成功；下面是具体安装步骤：
1）双击“exe文件”，选择下载路径，换一个其他的盘也可以。
一直确定
2）自定义安装，精简版本是下载好所有组件，并且会覆盖原有驱动，所以在这里推荐自定义下载
3）如果电脑上没有visual studio，后面会让下载，所以可以取消这个复选框
4）下面是比较重要的安装路径选择，建议先在自己电脑上安装软件的盘中先建立两个文件夹：
4.1) 然后将第一个和第三个目录更换为上面的CUDAToolkit，第二个目录更换为CUDASamples。记住安装目录
后面一直向下，然后就是查看一下环境变量了。点击设置–&gt;搜索高级系统设置–&gt;查看环境变量
上面的环境变量是自己生成的，无需手动配置。之后在cmd下查看是否可以使用命令：注意是大写V哦
这样就可以确定安装成功了。要注意自己的显卡驱动版本和cuda版本的对应，我的1650就可以安11.6了，显卡比我高的如果驱动版本不高可以升级驱动版本。
2.安装Anaconda3 下载官网：Anaconda官网，或者是清华镜像源镜像源，我感觉都可以下载
双击exe安装包，进行安装，
1）一直下一步到这里，选择所有用户
2）安装路径，还是推荐自定义
3）只选择第二项，第二项是说要默认使用python的版本，后期手动添加环境变量
4）安装完成
5）配置环境变量，点击path
5.1) 在编辑环境变量里，点击新建
5.2）新建下面这五个变量：xxx是自己的路径
D:\xxx\xxx\Anaconda3
D:\xxx\xxx\Anaconda3\Scripts
D:\xxx\xxx\Anaconda3\Library\bin
D:\xxx\xxx\Anaconda3\Library\mingw-w64\bin
D:\xxx\xxx\Anaconda3\Library\usr\bin
6）安装完成，验证，同时按 win &#43; r ，输入cmd，在弹出的命令行查看anaconda版本，输入 ：
conda --version和python
可以看的正确的版本号以及python已托管至Anaconda。可以在电脑屏幕左下角的Windows徽标键这里，选择点击绿色圈圈Anaconda Navifator将其打开
7）接下来是镜像源的配置，这里踩坑很多，花了好几个小时才搞定，其他博客有通过命令配置的源的，然后一些包总是无法使用。这里提供一个简单的方式。进入c盘的用户路径下，点击.condarc文件，可以用记事本方式打开。
然后内容修改为如下内容，注意envs_dirs:
D://DeepLearingEnvironment//envs是自己的路径哦。 channels: - defaults show_channel_urls: true default_channels: - https://mirrors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9b8a85212cf60676d2d413dcbab10803/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T11:39:12+08:00" />
<meta property="article:modified_time" content="2023-06-26T11:39:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在windows11环境下安装CUDA11.6&#43;Anaconda3&#43;pyToach1.13搭建炼丹炉</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="0_0"></a>0.电脑环境</h2> 
<blockquote> 
 <p>系统：win11<br> 显卡：NVIDIA GTX1650<br> 还有一个pyCharm，其他也用不到了，需要的文章中会进行说明</p> 
</blockquote> 
<h2><a id="1CUDA116_5"></a>1.安装CUDA11.6</h2> 
<p>目前2023.03出来的pyToach2.0是用不到了，因为最低版本支持CUDA11.7。我的显卡是1650，驱动达不到CUDA11.7的要求，因此安装不了11.7。（主要原因是和女朋友端午旅游把我计划要买的4060TI 16G钱花掉了/(ㄒoㄒ)/~~，只能继续压榨我的我的小显卡了）。<br> pyToach2.0看说明是比1.13快很多，但是安装方式一样的，有好显卡的一定要安装CUDA11.7进而支持pyToach2.0<br> PyTorch的官网：<a href="https://pytorch.org/" rel="nofollow">官网</a><br> 可以看的具体的依赖<br> <img src="https://images2.imgbox.com/c7/47/1g90fQnd_o.png" alt="在这里插入图片描述"><br> 显卡驱动和cuda对照<br> <img src="https://images2.imgbox.com/17/56/GqX0Hr0p_o.png" alt="在这里插入图片描述"><br> 首先打开 cmd 命令窗口，输出如下命令：</p> 
<blockquote> 
 <p>nvidia-smi</p> 
</blockquote> 
<p>可以看到，此时显示的表格中，有一个字段叫 CUDA Version，像我的界面是这样的：<br> <img src="https://images2.imgbox.com/68/11/pU2tTZfl_o.png" alt="在这里插入图片描述">在这个官方网站：<a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow">老黄的CUDA网站</a><br> 找到11.6，下载它，三个都可以下载，随便选一个<br> <img src="https://images2.imgbox.com/f3/18/Lt3u64LN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/57/de/ZQCJM9GK_o.png" alt="在这里插入图片描述"><br> <strong>说明：</strong><br> 安装cuda时，第一次会让设置临时解压目录，第二次会让设置安装目录；</p> 
<p>临时解压路径，建议默认即可，也可以自定义。安装结束后，临时解压文件夹会自动删除；</p> 
<p>安装目录，自定义最好；</p> 
<p><mark>注意</mark>：临时解压目录千万不要和cuda的安装路径设置成一样的，否则安装结束，会找不到安装目录</p> 
<p>选择自定义安装</p> 
<p>安装完成后，配置cuda的环境变量；</p> 
<p>命令行中，测试是否安装成功；<strong>下面是具体安装步骤：</strong></p> 
<p>1）双击“exe文件”，选择下载路径，换一个其他的盘也可以。<br> <img src="https://images2.imgbox.com/6a/10/4q0bzWaE_o.png" alt="在这里插入图片描述"><br> 一直确定<br> 2）自定义安装，精简版本是下载好所有组件，并且会覆盖原有驱动，所以在这里推荐自定义下载<br> <img src="https://images2.imgbox.com/b6/40/P8bJlVEO_o.png" alt="在这里插入图片描述"><br> 3）如果电脑上没有visual studio，后面会让下载，所以可以取消这个复选框<br> <img src="https://images2.imgbox.com/ab/a5/64RtXcar_o.png" alt="在这里插入图片描述"><br> 4）下面是比较重要的安装路径选择，建议先在自己电脑上安装软件的盘中先建立两个文件夹：<br> <img src="https://images2.imgbox.com/fb/27/T2eWuIDr_o.png" alt="在这里插入图片描述"><br> 4.1) 然后将第一个和第三个目录更换为上面的CUDAToolkit，第二个目录更换为CUDASamples。记住安装目录<br> <img src="https://images2.imgbox.com/96/60/zbtITntu_o.png" alt="在这里插入图片描述"><br> 后面一直向下，然后就是查看一下环境变量了。点击设置–&gt;搜索高级系统设置–&gt;查看环境变量<br> <img src="https://images2.imgbox.com/10/a9/DTZHjRRS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d2/62/tAZZJdFv_o.png" alt="在这里插入图片描述"><br> 上面的环境变量是自己生成的，无需手动配置。之后在cmd下查看是否可以使用命令：注意是<strong>大写V</strong>哦<br> <img src="https://images2.imgbox.com/36/01/UczL0EVA_o.png" alt="在这里插入图片描述"><br> 这样就可以确定安装成功了。要注意自己的显卡驱动版本和cuda版本的对应，我的1650就可以安11.6了，显卡比我高的如果驱动版本不高可以升级驱动版本。</p> 
<h2><a id="2Anaconda3_54"></a>2.安装Anaconda3</h2> 
<p>下载官网：<a href="https://www.anaconda.com/" rel="nofollow">Anaconda官网</a>，或者是清华镜像源<a href="https://repo.anaconda.com/archive/" rel="nofollow">镜像源</a>，我感觉都可以下载<br> <img src="https://images2.imgbox.com/28/46/YgGf6irw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/9c/ee/SjR9jxBA_o.png" alt="在这里插入图片描述"><br> 双击exe安装包，进行安装，<br> 1）一直下一步到这里，选择所有用户<br> <img src="https://images2.imgbox.com/60/d3/DMlADRPm_o.png" alt="在这里插入图片描述"><br> 2）安装路径，还是推荐自定义<br> <img src="https://images2.imgbox.com/a6/e4/VPuhUAVN_o.png" alt="在这里插入图片描述"><br> 3）只选择第二项，第二项是说要默认使用python的版本，后期手动添加环境变量<br> <img src="https://images2.imgbox.com/80/e8/J10ZKuFt_o.png" alt="在这里插入图片描述"><br> 4）安装完成<br> <img src="https://images2.imgbox.com/e1/44/HLaBiye3_o.png" alt="在这里插入图片描述"><br> 5）配置环境变量，点击path<br> <img src="https://images2.imgbox.com/8a/27/pmuQuUph_o.png" alt="在这里插入图片描述"><br> 5.1) 在编辑环境变量里，点击新建<br> <img src="https://images2.imgbox.com/fa/2c/ePTUA5Ji_o.png" alt="在这里插入图片描述"><br> 5.2）新建下面这五个变量：xxx是自己的路径</p> 
<blockquote> 
 <p>D:\xxx\xxx\Anaconda3<br> D:\xxx\xxx\Anaconda3\Scripts<br> D:\xxx\xxx\Anaconda3\Library\bin<br> D:\xxx\xxx\Anaconda3\Library\mingw-w64\bin<br> D:\xxx\xxx\Anaconda3\Library\usr\bin</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/3c/ab/s3M5hTp0_o.png" alt="在这里插入图片描述"><br> 6）安装完成，验证，同时按 win + r ，输入cmd，在弹出的命令行查看anaconda版本，输入 ：<br> conda --version和python<br> <img src="https://images2.imgbox.com/d7/b4/zDrJjvhp_o.png" alt="在这里插入图片描述"><br> 可以看的正确的版本号以及python已托管至Anaconda。可以在电脑屏幕左下角的Windows徽标键这里，选择点击绿色圈圈Anaconda Navifator将其打开<br> <img src="https://images2.imgbox.com/8e/6a/7mSJn6at_o.png" alt="在这里插入图片描述"><br> 7）接下来是镜像源的配置，这里踩坑很多，花了好几个小时才搞定，其他博客有通过命令配置的源的，然后一些包总是无法使用。这里提供一个简单的方式。进入c盘的用户路径下，点击.condarc文件，可以用记事本方式打开。<br> <img src="https://images2.imgbox.com/25/05/xMQmBokS_o.png" alt="在这里插入图片描述"><br> 然后内容修改为如下内容，注意envs_dirs:</p> 
<ul><li>D://DeepLearingEnvironment//envs是自己的路径哦。</li></ul> 
<pre><code class="prism language-java">channels<span class="token operator">:</span>
  <span class="token operator">-</span> defaults
show_channel_urls<span class="token operator">:</span> <span class="token boolean">true</span>
default_channels<span class="token operator">:</span>
  <span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>main
  <span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>r
  <span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>msys2
custom_channels<span class="token operator">:</span>
  conda<span class="token operator">-</span>forge<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  msys2<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  bioconda<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  menpo<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  pytorch<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  pytorch<span class="token operator">-</span>lts<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  simpleitk<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
envs_dirs<span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token class-name">D</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token class-name">DeepLearingEnvironment</span><span class="token comment">//envs</span>
</code></pre> 
<p>编辑保存后，打开Anaconda查看镜像源，如下所示<br> <img src="https://images2.imgbox.com/84/bd/8rXYZLga_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d7/50/hHiaFkAo_o.png" alt="在这里插入图片描述"><br> 点击configure Conda后，可以看到镜像源已更换<br> <img src="https://images2.imgbox.com/42/44/BBJuXR8j_o.png" alt="在这里插入图片描述"><br> 8）试着导入一下基础环境，如下所示，点击Environment下的base环境，等待加载后，可以看到环境导入完成，前面都有绿色的勾。而且速度快到飞起。至此，Anaconda也安装配置完成<br> <img src="https://images2.imgbox.com/e5/42/Y8TrByfM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3AnacondapyToacn113_115"></a>3.在Anaconda中安装pyToacn1.13</h2> 
<ol><li>先新建一个环境，我随便起名为pyToach1113<br> <img src="https://images2.imgbox.com/e6/77/NRKifCg3_o.png" alt="在这里插入图片描述"><br> 2）命令行添加环境，进入cmd下，输入</li></ol> 
<blockquote> 
 <p>conda env list<br> antivate pyToach1113<br> <img src="https://images2.imgbox.com/95/f3/TK98UavD_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>2.1) 使用官方推荐命令安装pyToach，进入网站<a href="https://pytorch.org/get-started/previous-versions/" rel="nofollow">pyToach官网</a>，选择这个标签页：<br> <img src="https://images2.imgbox.com/5d/46/Xcff1aVn_o.png" alt="在这里插入图片描述"><br> 拉到下面，使用这个命令，注意是11.6哦</p> 
<pre><code class="prism language-java">conda install pytorch<span class="token operator">==</span><span class="token number">1.13</span><span class="token number">.1</span> torchvision<span class="token operator">==</span><span class="token number">0.14</span><span class="token number">.1</span> torchaudio<span class="token operator">==</span><span class="token number">0.13</span><span class="token number">.1</span> pytorch<span class="token operator">-</span>cuda<span class="token operator">=</span><span class="token number">11.6</span> <span class="token operator">-</span>c pytorch <span class="token operator">-</span>c nvidia
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/23/wGz9USaC_o.png" alt="在这里插入图片描述"><br> 2.2) 等待漫长的命令执行完成，验证是否可以正常使用：<br> <img src="https://images2.imgbox.com/e5/79/VTyaN9Mn_o.png" alt="在这里插入图片描述"><br> 可以正常使用</p> 
<h2><a id="4pyToachcuda_136"></a>4.尝试使用pyToach调用cuda</h2> 
<ol><li>新建一个项目，环境选择刚才搞好的<br> <img src="https://images2.imgbox.com/3c/d8/qyGzBZmY_o.png" alt="在这里插入图片描述"><br> 2）输入如下代码</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">import</span> time

<span class="token keyword">import</span> torch

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"启动！！！"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"PyTorch版本："</span> <span class="token operator">+</span> torch<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"PyTorch是否启动CUDA："</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    matrix_a1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">15000</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span>  <span class="token comment"># GPU运算量太大会爆显存</span>
    matrix_b1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span>  <span class="token comment"># GPU运算量太大会爆显存</span>

    t1 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#cpu运算前的时间</span>
    matrix_c1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>matrix_a1<span class="token punctuation">,</span>matrix_b1<span class="token punctuation">)</span> <span class="token comment">#cpu做矩阵相乘</span>
    t2 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#cpu运算后的时间</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前模式："</span><span class="token punctuation">,</span>matrix_a1<span class="token punctuation">.</span>device<span class="token punctuation">,</span><span class="token string">"\t耗时："</span><span class="token punctuation">,</span>t2<span class="token operator">-</span>t1<span class="token punctuation">,</span>matrix_c1<span class="token punctuation">.</span>norm<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    gpu <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span><span class="token punctuation">)</span>
    matrix_a2<span class="token operator">=</span>matrix_a1<span class="token punctuation">.</span>to<span class="token punctuation">(</span>gpu<span class="token punctuation">)</span>
    matrix_b2<span class="token operator">=</span>matrix_b1<span class="token punctuation">.</span>to<span class="token punctuation">(</span>gpu<span class="token punctuation">)</span>

    t3<span class="token operator">=</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#gpu运算前的时间</span>
    matrix_c2<span class="token operator">=</span>torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>matrix_a2<span class="token punctuation">,</span>matrix_b2<span class="token punctuation">)</span>
    t4<span class="token operator">=</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#gpu运算后的时间</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前模式："</span><span class="token punctuation">,</span> matrix_a2<span class="token punctuation">.</span>device<span class="token punctuation">,</span> <span class="token string">"\t耗时："</span><span class="token punctuation">,</span> t4 <span class="token operator">-</span> t3<span class="token punctuation">,</span> matrix_c2<span class="token punctuation">.</span>norm<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    t5<span class="token operator">=</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#gpu运算前的时间</span>
    matrix_c3<span class="token operator">=</span>torch<span class="token punctuation">.</span>matmul<span class="token punctuation">(</span>matrix_a2<span class="token punctuation">,</span>matrix_b2<span class="token punctuation">)</span>
    t6<span class="token operator">=</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#gpu运算后的时间</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前模式："</span><span class="token punctuation">,</span> matrix_a2<span class="token punctuation">.</span>device<span class="token punctuation">,</span> <span class="token string">"\t耗时："</span><span class="token punctuation">,</span> t6 <span class="token operator">-</span> t5<span class="token punctuation">,</span> matrix_c3<span class="token punctuation">.</span>norm<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
</code></pre> 
<p>计算一个矩阵乘法，对比一下cpu与gpu，结果如下：<br> <img src="https://images2.imgbox.com/ff/55/jyEmboWh_o.png" alt="在这里插入图片描述"><br> 可以看到目前已经启用了CUDA加速，且PyTorch的版本是1.13，安装成功。<br> 因为GPU运算首次需要加载C++的包，依旧比CPU快了10多倍。第二次运算时C++的包已经加载完毕，比CPU快了将近1000倍（/(ㄒoㄒ)/~~是我的cpu跟不上gpu吗）。</p> 
<p>3）但是，gpu计算出来的结果和cpu有些差距，看一下gpt的解释是：</p> 
<blockquote> 
 <p>通常情况下，GPU（图形处理单元）和CPU（中央处理单元）执行计算任务的方式和速度不同，这可能导致计算结果略有不同的情况。下面是一些可能导致GPU计算结果与CPU计算结果稍有不同的原因：<br> 数值精度：GPU通常使用较低的数值精度来执行计算，例如使用32位浮点数（单精度）而不是64位浮点数（双精度）的CPU默认精度。这种精度差异可能会导致在某些情况下，GPU计算结果的舍入误差略微大于CPU计算结果。<br> 并行计算：GPU通过并行计算大规模数据集来提高计算速度，而CPU通常是顺序执行。由于并行计算涉及到数据分割和任务分配，可能会存在微小的差异，尤其是在涉及非结合性操作（不满足交换律和结合律）时。<br> 优化算法：GPU和CPU使用不同的指令集和优化算法来执行计算任务。这可能导致在某些情况下，GPU计算结果与CPU计算结果有细微差异。例如，某些特定的数学函数或优化算法在GPU上可能有不同的实现方式。<br> 平台依赖性：GPU和CPU使用不同的硬件和驱动程序，可能存在平台依赖性问题。这可能会导致不同的硬件或驱动程序在执行计算时产生微小的差异。<br> 需要注意的是，通常情况下，GPU计算结果与CPU计算结果之间的差异应该是非常小的，特别是对于大多数数值计算任务来说。如果存在较大的差异，可能是由于程序中的错误、数值稳定性问题或其他因素引起的，这时候需要进一步调查和分析问题。<br> 为了确保结果的一致性，可以采取一些措施，如使用相同的数值精度、检查算法实现的一致性、验证代码的正确性，并进行平台和硬件的兼容性测试。</p> 
</blockquote> 
<h2><a id="5_188"></a>5.总结</h2> 
<p>总之，代码可以测试成功，之后可以进行愉快的炼丹了。然后有时间发一个使用上面环境进行深度学习的案例<br> 最后说一个实话，想要一个4060ti学习为假，打游戏为真。<br> <img src="https://images2.imgbox.com/f1/fe/I30VwSvd_o.jpg" alt="在这里插入图片描述"></p> 
<p>参考文章：<br> <a href="https://blog.csdn.net/qq_41990268/article/details/127827522">在Windows10环境安装CUDA11.7及PyTorch1.13–使用Nvidia RTX A4000开始炼丹之旅</a></p> 
<p><a href="https://blog.csdn.net/weixin_44189155/article/details/126359352">【CUDA安装详细教程】</a></p> 
<p><a href="https://blog.csdn.net/weixin_43412762/article/details/129599741">Anaconda安装-超详细版(2023)</a></p> 
<p><a href="https://blog.csdn.net/weixin_48373309/article/details/127830801">w11下载anaconda在d盘，新建的虚拟环境总是在c盘怎么解决</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3b47206dc7aa8cec58adcc9341778158/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Tcp实现文件传输的一些问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/829c48da04566f3b0e8ad63d5a8525f3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">QCustomPlot的安装与使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>