<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vuex —— 状态管理 | Module - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vuex —— 状态管理 | Module" />
<meta property="og:description" content="在前面讲到了关于Vuex数据状态管理的内容，讲了Vuex的五大核心属性，在这五大核心属性中就 state、mutation 和 actions 在前面介绍 Vuex 状态管理和讲 Vuex 中的同步和异步操作已经比较熟悉了，getter 是基于state 的计算属性，vue 中 computed从data中派生出的计算属性， vuex中 getter是从state中派生出的属性，对于getter的使用还是比较简单的，那么本篇主要来讲关于这最后一个核心属性 —— Module .
创建项目之后在 /store/index.js 文件后，将之前编写获取swiperList的操作放进入之后：
import Vue from &#39;vue&#39; import Vuex from &#39;vuex&#39; import { reqSwiperList } from &#39;@/api&#39; Vue.use(Vuex) export default new Vuex.Store({ state: { swiperList: [] // swiperList-轮播列表 }, getters: { }, actions: { async getSwiperList (store) { const result = await reqSwiperList() console.log(result) if (result.meta.status === 200) { const data = result." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bd4e66efefe2893be022753a71bb0089/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-22T09:06:01+08:00" />
<meta property="article:modified_time" content="2023-09-22T09:06:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vuex —— 状态管理 | Module</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d8/bf/KFbHZ2ta_o.png"></p> 
<p>         在前面讲到了关于Vuex数据状态管理的内容，讲了Vuex的五大核心属性，在这五大核心属性中就 state、mutation 和 actions 在前面介绍 Vuex 状态管理和讲 Vuex 中的同步和异步操作已经比较熟悉了，getter 是基于state 的计算属性，vue 中 computed从data中派生出的计算属性， vuex中 getter是从state中派生出的属性，对于getter的使用还是比较简单的，那么本篇主要来讲关于这最后一个核心属性 —— Module .</p> 
<p>        创建项目之后在 /store/index.js 文件后，将之前编写获取swiperList的操作放进入之后：</p> 
<pre><code class="language-javascript">import Vue from 'vue'
import Vuex from 'vuex'
import { reqSwiperList } from '@/api'

Vue.use(Vuex)

export default new Vuex.Store({
  state: {
    swiperList: [] // swiperList-轮播列表
  },
  getters: {

  },
  actions: {
    async getSwiperList (store) {
      const result = await reqSwiperList()
      console.log(result)
      if (result.meta.status === 200) {
        const data = result.data.swiperList
        store.commit('receive_SwiperList', data)
      }
    }
  },
  mutations: {
    receive_SwiperList (state, data) {
      state.swiperList = data
    }
  },
  modules: {

  }
})</code></pre> 
<p>        设想一下假设项目中还有其他模块内容，这些模块内容在编写上还是相信你可以完成而且排序整齐，但项目完成会发现这个index.js的文件太大了且可维护性差，项目的开发是一个团队的事情，而且负责的模块内容也需要编写到这里，团队成员的合作就会产生一些冲突，使用 Vuex 状态管理的本意是让团队的协助会变得方便且后期维护起来方便，但现在仅仅将所有的内容放置在index.js 下就不合理，所以就需要将内容分为模块(module)，最后将模块在index.js进行管理！</p> 
<p>        下面来进行模块（Module）的引入使用：</p> 
<blockquote> 
 <h2>Module </h2> 
</blockquote> 
<p>        上面编写的是一个获取swiperList(轮播)数据，现在它是分到了项目中的首页去展示的，那么就来创建一下首页模块：</p> 
<p>        创建 /store/Module 文件夹来存放各模块内容，并在该文件目录下创建 HomeModule.js 模块文件：</p> 
<pre><code class="language-javascript">// store/Module/HomeModule.js

/* 首页数据状态管理模块 */
import { reqSwiperList } from '@/api/index'

const module = {
  state: {
    swiperList: [] // swiperList-轮播列表
  },
  mutations: {
    receive_SwiperList (state, data) {
      state.swiperList = data
    }
  },
  actions: {
    async getSwiperList (store) {
      const result = await reqSwiperList()
      console.log(result)
      if (result.meta.status === 200) {
        const data = result.data.swiperList
        store.commit('receive_SwiperList', data)
      }
    }
  }
}

export default module</code></pre> 
<p>        这个内容就是首页模块需要管理的数据状态了，那么还需要将它引入到 /store/index.js 的文件中去，如下：</p> 
<pre><code class="language-javascript">// store/index.js
import Vue from 'vue'
import Vuex from 'vuex'
import HomeModule from '@/store/Module/HomeModule'

Vue.use(Vuex)

export default new Vuex.Store({
  state: {
  },
  getters: {
  },
  mutations: {
  },
  actions: {
  },
  modules: {
    HomeModule
  }
})
</code></pre> 
<p>        可以看到现在 /store/index.js 的文件中引入 modules: { HomeModule } 首页数据状态管理的模块，如果要引入其他的模块，例如：服务模块，在Module文件夹中创建服务模块ServiceModule.js后，编写需要管理的数据状态即可，接着将在/store/index.js文件中去引入该模块就好了，妙哉！</p> 
<p>下面来测试运行一下是否成功：（实践是检验真理的唯一标准）</p> 
<p><img alt="" height="428" src="https://images2.imgbox.com/0a/f7/i0u6Pc5e_o.png" width="1200"></p> 
<p>        通过 Devtools 拓展工具就可以看到加载了HomeModule模块以及有对应模块的state数据状态管理，到这一步是不是隐隐约约有个老头撅个嘴说 "Nice!!!" 别急，还有下一步呢!</p> 
<p>        如果是上一篇目到达此地，可能就说，视图怎么没更新？</p> 
<p><img alt="" height="428" src="https://images2.imgbox.com/1f/d0/S8vCgivv_o.png" width="1200">        不应该是如下面这般的吗？</p> 
<p><img alt="" height="857" src="https://images2.imgbox.com/f6/6b/MutXEhwO_o.png" width="1200"></p> 
<p><img alt="" height="248" src="https://images2.imgbox.com/98/d5/AdZ4vCnI_o.png" width="1200"></p> 
<p>        就挺秃然的是吧，那下面就来讲怎么让它出来好吧！</p> 
<blockquote> 
 <h2>渲染视图</h2> 
</blockquote> 
<p>        Vuex状态模式改变了，对应的渲染视图操作也需要调整；首先先来打开命名空间：</p> 
<h3>namespace 命名空间</h3> 
<p>        在编写的模块当中添加一个namespace属性，属性值为true！</p> 
<pre><code class="language-javascript">// store/Module/HomeModule.js

/* 首页数据状态管理模块 */
import { reqSwiperList } from '@/api/index'

const module = {
  // 命名空间
  namespace: true,
  state: {
    swiperList: [] // swiperList-轮播列表
  },
...</code></pre> 
<h3>mapState 映射状态</h3> 
<p>        那么就来到首页页面MusicView.vue中来导入vuex，通过 mapState 来映射状态，那么现在在mounted生命周期打印一下，使用 mapState 来将 HomeModule 模块中 state.swiperList 进行切割出来；</p> 
<pre><code class="language-javascript">mapState('模块名称',[切割内容])</code></pre> 
<p><strong>注：</strong>使用数组[ ] 是因为在模块中的state中的数据状态不止一个，比如有swiperList，可能还有navList 等这些其他数据状态；</p> 
<pre><code class="language-javascript">&lt;!--MusicView.vue--&gt;
...
&lt;script&gt;
import { mapState } from 'vuex'
export default {
  mounted () {
    console.log(mapState('HomeModule', ['swiperList']))
  },
...</code></pre> 
<p><img alt="" height="377" src="https://images2.imgbox.com/ee/a9/fifrpO3k_o.png" width="1200"></p> 
<p>        可以知道拿到的是一个对象，怎么来使用呢？那么在这个对象中呢有这样一个方法供你在计算属性当中来使用；在 <a href="https://blog.csdn.net/weixin_52203618/article/details/127413159" title="第十六篇 Computed 计算属性的应用">第十六篇 Computed 计算属性的应用</a> 中就讲过了计算属性的使用，举一个简单的例子：computed:{ sum(){ return ... } } ，在页面中直接把 sum 拿过来用就可以了对吧，那么现在就是去展开这个对象，然后将它取出来用！</p> 
<h3>... mapState()</h3> 
<p>        在计算属性中通过三个点 ' ... ' 就可以展开一个数组或是一个对象（ES6语法），如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/75/18/bbByiHK8_o.png"></p> 
<p>         通过以上的讲解你就知道这块 ...mapState('HomeModule',['swiperList']) 是什么了，就是展开切割出来的对象，这对象就是映射该模块的所要取的状态；现在来计算属性中展开：</p> 
<pre><code class="language-javascript">...
&lt;script&gt;
import { mapState } from 'vuex'
export default {
  computed: {
    ...mapState('HomeModule', ['swiperList'])
  },

  mounted () {
    console.log(mapState('HomeModule', ['swiperList']))
  },
...</code></pre> 
<p>        依然没有视图，打开控制台出现这一句（心想："真的要奔溃啦"）：</p> 
<p><img alt="" height="213" src="https://images2.imgbox.com/0d/67/Pc0Zk5kJ_o.png" width="934"></p> 
<p>         同理，mapState 将状态映射出来，同理，这里也需要将 actions 的方法进行映射出来这个模块的方法 getSwiperList ；</p> 
<h2>...mapActions</h2> 
<p>        将mapActions引入之后，通过在methods中将方法进行映射；</p> 
<pre><code class="language-javascript">...
&lt;button @click="getSwiperList"&gt;同步获取swiperList数据&lt;/button&gt;
...
&lt;script&gt;
import { mapActions, mapState } from 'vuex'
export default {
  computed: {
    ...mapState('HomeModule', ['swiperList'])
  },
  methods: {
    ...mapActions('HomeModule', ['getSwiperList']),
    // 按钮事件
    getSwiperList () {
      // 通过dispatch触发actions调用
      this.$store.dispatch('getSwiperList')
    }
  }
...</code></pre> 
<p>        别急，现在已经将 getSwiperList 方法引入了，就不需要通过this.$store.dispatch()来调用函数了，直接调用该函数就可以了；[ 注：把按钮的触发事件名称修改一下，避免冲突 ]</p> 
<pre><code class="language-javascript">&lt;button @click="getSwiperData"&gt;同步获取swiperList数据&lt;/button&gt;
...
methods: {
    // 按钮事件
    getSwiperData () {
      // 通过dispatch触发actions调用
      this.getSwiperList()
    }
}</code></pre> 
<p>现在来测试一下代码：在页面使用v-for做渲染的时候，也不需要使用 this.$store.state.swiperList </p> 
<p>通过 mapState 映射状态可以直接使用 swiperList 即可！</p> 
<p><img alt="" height="720" src="https://images2.imgbox.com/a8/7a/gXm2qZUI_o.png" width="1200"></p> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;div&gt;
        &lt;h3&gt;分享音乐社区&lt;/h3&gt;
        &lt;router-link to="/music/kugou" active-class="chosen_cl"&gt;&lt;li&gt;分享酷狗Music&lt;/li&gt;&lt;/router-link&gt;
        &lt;router-link to="/music/kuwo" active-class="chosen_cl"&gt;&lt;li&gt;分享酷我Music&lt;/li&gt;&lt;/router-link&gt;
        &lt;router-view&gt;&lt;/router-view&gt;
        &lt;button @click="getSwiperData"&gt;同步获取swiperList数据&lt;/button&gt;
        &lt;li v-for="item in swiperList" :key="item.goods_id"&gt;
          &lt;img :src="item.imgUrl" alt=""&gt;
        &lt;/li&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapActions, mapState } from 'vuex'
export default {
  computed: {
    ...mapState('HomeModule', ['swiperList'])
  },
  methods: {
    ...mapActions('HomeModule', ['getSwiperList']),
    // 按钮事件
    getSwiperData () {
      // 通过dispatch触发actions调用
      // this.$store.dispatch('getSwiperList')
      this.getSwiperList()
    }
  }
}
&lt;/script&gt;

&lt;style lang="scss"&gt;
  .chosen_cl{
    color:skyblue;
    font-weight: bold;
  }
  img{
    width: 200px;
  }
&lt;/style&gt;
</code></pre> 
<p>        本篇目讲到这里就已然结束了，在此关于对Vuex的数据状态管理有了一个比较充分的认识，对Vuex中的五大核心属性也有了了解，在之后的项目开发中可以尝试着使用Vuex数据状态管理的模式来开发项目，希望本篇能助你在项目开发这条路上的起初是一块垫脚石！感谢大家的支持！</p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7a/23/AMtly8Ax_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9b98f9f75d4070fbbad9494d266a5c94/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【ubuntu20.04配置PX4仿真】ros&#43;PX4固件&#43;gazebo&#43;mavros</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1c2a7e27506a29a0eec0251b3a67bf3f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue-cli-service build 不同环境的配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>