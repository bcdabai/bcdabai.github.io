<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 禁止应用颜色跟随深色模式设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android 禁止应用颜色跟随深色模式设置" />
<meta property="og:description" content="总结解决方法：自己用的是&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.NoActionBar&#34;&gt;，需要修改为&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.Light.NoActionBar&#34;&gt;
在系统设置为深色模式后，发现应用中的部分文字从默认颜色变为了白色，CardView从白色变成了黑色（大多数文字和组件颜色没有变化），丑到爆了
很容易发现有变化的文字是因为没有设置textcolor，于是给他们加上之后，又给所有的cardview设置了background，但是发现文字不会改变，但cardview依然会变成深色。。
赶紧看了一下文档https://developer.android.google.cn/guide/topics/ui/look-and-feel/darktheme，希望能有禁用深色模式的方法，但根据文档里的意思，应用应该默认不会跟随系统的深色模式呀，只有手动设置后才会跟随深色模式。
在应用中支持深色主题背景
如要支持深色主题背景，您必须将应用的主题背景（通常可在 res/values/styles.xml 中找到）设置为继承 DayNight 主题背景：
&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.DayNight&#34;&gt;
您还可以使用 MaterialComponent 的深色主题背景：
&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.MaterialComponents.DayNight&#34;&gt;
这会将应用的主要主题背景与系统控制的夜间模式标记相关联，并将应用的默认主题背景设置为深色主题背景（如果已启用）。
去看了一下styles文件，果然被设置过了
&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.DayNight&#34;&gt;
修改了一下
&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.NoActionBar&#34;&gt;
再次运行，发现没有作用，Cardview依旧会跟随深色。。公司的项目被几个人修改过，各种配置已经比较乱了，也不敢乱改，切到自己的demo试了一下，发现默认的应用是不会跟随深色模式的，经过对比才发现，demo的styles是
&lt;style name=&#34;AppTheme&#34; parent=&#34;Theme.AppCompat.Light.NoActionBar&#34;&gt;
修改后，终于解决问题了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ea7e2d672486687408e956cd247735e1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-18T15:28:16+08:00" />
<meta property="article:modified_time" content="2020-09-18T15:28:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 禁止应用颜色跟随深色模式设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>总结解决方法：自己用的是<code>&lt;style name="AppTheme" parent="Theme.AppCompat.NoActionBar"&gt;</code>，需要修改为<code>&lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;</code></strong></p> 
<p>在系统设置为深色模式后，发现应用中的部分文字从默认颜色变为了白色，CardView从白色变成了黑色（大多数文字和组件颜色没有变化），丑到爆了</p> 
<p>很容易发现有变化的文字是因为没有设置textcolor，于是给他们加上之后，又给所有的cardview设置了background，但是发现文字不会改变，但cardview依然会变成深色。。</p> 
<p>赶紧看了一下文档<a href="https://developer.android.google.cn/guide/topics/ui/look-and-feel/darktheme" rel="nofollow">https://developer.android.google.cn/guide/topics/ui/look-and-feel/darktheme</a>，希望能有禁用深色模式的方法，但根据文档里的意思，应用应该默认不会跟随系统的深色模式呀，只有手动设置后才会跟随深色模式。</p> 
<blockquote> 
 <p>在应用中支持深色主题背景<br> 如要支持深色主题背景，您必须将应用的主题背景（通常可在 res/values/styles.xml 中找到）设置为继承 DayNight 主题背景：<br> <code>&lt;style name="AppTheme" parent="Theme.AppCompat.DayNight"&gt;</code><br> 您还可以使用 MaterialComponent 的深色主题背景：<br> <code>&lt;style name="AppTheme" parent="Theme.MaterialComponents.DayNight"&gt;</code><br> 这会将应用的主要主题背景与系统控制的夜间模式标记相关联，并将应用的默认主题背景设置为深色主题背景（如果已启用）。</p> 
</blockquote> 
<p>去看了一下styles文件，果然被设置过了<br> <code>&lt;style name="AppTheme" parent="Theme.AppCompat.DayNight"&gt;</code><br> 修改了一下<br> <code>&lt;style name="AppTheme" parent="Theme.AppCompat.NoActionBar"&gt;</code><br> 再次运行，发现没有作用，Cardview依旧会跟随深色。。公司的项目被几个人修改过，各种配置已经比较乱了，也不敢乱改，切到自己的demo试了一下，发现默认的应用是不会跟随深色模式的，经过对比才发现，demo的styles是<br> <code>&lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;</code><br> 修改后，终于解决问题了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a96422a7285bb7ab0bb477819b4fa414/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">函数的多种定义和调用方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/19bbf74432c030c468a738c6b626be9b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OPPO 芯片设计 面经</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>