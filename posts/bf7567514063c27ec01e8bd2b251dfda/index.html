<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>搭建在线电子书：Sphinx &#43; Github &#43; ReadTheDocs - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="搭建在线电子书：Sphinx &#43; Github &#43; ReadTheDocs" />
<meta property="og:description" content="我写博客的初衷是为了系统的构建自己的知识体系，目前使用的平台有微信公众号，CSDN，博客园，GitHub Pages和Gitee Pages，他们都各有优缺点，整理的笔记多了之后发现这些平台不是很方便，比如公众号，CSDN和博客园，每次写完文章后，还需要再平台上进行编辑再发布，比较麻烦；GitHub Pages和Gitee Pages虽然可以快速发布，但是在文章系统管理上不是很方便。我希望将笔记整理成类似电子书一样，方便搜索和管理，经过查询资料，发现了ReadTheDocs这个文档管理工具，比较符合我的需求。可以使用 Sphinx 生成文档，GitHub 托管文档，然后导入到 ReadtheDocs进行展示，本文记录一下搭建过程。
目录 准备条件Sphinx创建文档1. 安装Sphinx2. 创建文档3. 编译4. 配置主题5. 配置markdown 关联Read the Docs 准备条件 1、github账号
使用github对文档进行版本管理
2、注册Read the Docs账号
官网地址：https://readthedocs.org/
3、安装Python
Sphinx是一个python工具，用于生成文档，所以需要安装Python环境。
Sphinx创建文档 Sphinx是一个基于Python的文档生成项目，开始是用来生成 Python 官方文档的工具，更多介绍可参考官网：https://www.sphinx.org.cn/ 。
1. 安装Sphinx Sphinx的GitHub地址：https://github.com/sphinx-doc/sphinx
pip安装Sphinx
$ pip install -U sphinx 2. 创建文档 先将远程github仓库clone到本地，这个仓库是你要托管文档的仓库，如果没有就新建一个。
clone到本地后，在项目根目录创建一个docs目录，cd进入docs目录，执行如下命令：
$ sphinx-quickstart Welcome to the Sphinx 4.2.0 quickstart utility. Please enter values for the following settings (just press Enter to accept a default value, if one is given in brackets)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bf7567514063c27ec01e8bd2b251dfda/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-09T22:12:53+08:00" />
<meta property="article:modified_time" content="2021-11-09T22:12:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">搭建在线电子书：Sphinx &#43; Github &#43; ReadTheDocs</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>我写博客的初衷是为了系统的构建自己的知识体系，目前使用的平台有微信公众号，CSDN，博客园，GitHub Pages和Gitee Pages，他们都各有优缺点，整理的笔记多了之后发现这些平台不是很方便，比如公众号，CSDN和博客园，每次写完文章后，还需要再平台上进行编辑再发布，比较麻烦；GitHub Pages和Gitee Pages虽然可以快速发布，但是在文章系统管理上不是很方便。我希望将笔记整理成类似电子书一样，方便搜索和管理，经过查询资料，发现了ReadTheDocs这个文档管理工具，比较符合我的需求。可以使用 Sphinx 生成文档，GitHub 托管文档，然后导入到 ReadtheDocs进行展示，本文记录一下搭建过程。</p> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">准备条件</a></li><li><a href="#Sphinx_15" rel="nofollow">Sphinx创建文档</a></li><li><ul><li><a href="#1_Sphinx_19" rel="nofollow">1. 安装Sphinx</a></li><li><a href="#2__28" rel="nofollow">2. 创建文档</a></li><li><a href="#3__93" rel="nofollow">3. 编译</a></li><li><a href="#4__129" rel="nofollow">4. 配置主题</a></li><li><a href="#5_markdown_154" rel="nofollow">5. 配置markdown</a></li></ul> 
  </li><li><a href="#Read_the_Docs_207" rel="nofollow">关联Read the Docs</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_5"></a>准备条件</h2> 
<p>1、github账号<br> 使用<a href="https://github.com/">github</a>对文档进行版本管理</p> 
<p>2、注册Read the Docs账号<br> 官网地址：<a href="https://readthedocs.org/" rel="nofollow">https://readthedocs.org/</a></p> 
<p>3、安装Python<br> <a href="https://www.sphinx.org.cn/" rel="nofollow">Sphinx</a>是一个python工具，用于生成文档，所以需要安装Python环境。</p> 
<h2><a id="Sphinx_15"></a>Sphinx创建文档</h2> 
<p>Sphinx是一个基于Python的文档生成项目，开始是用来生成 Python 官方文档的工具，更多介绍可参考官网：<a href="https://www.sphinx.org.cn/" rel="nofollow">https://www.sphinx.org.cn/</a> 。</p> 
<h3><a id="1_Sphinx_19"></a>1. 安装Sphinx</h3> 
<p>Sphinx的GitHub地址：<a href="https://github.com/sphinx-doc/sphinx">https://github.com/sphinx-doc/sphinx</a></p> 
<p>pip安装Sphinx</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> -U sphinx
</code></pre> 
<h3><a id="2__28"></a>2. 创建文档</h3> 
<p>先将远程github仓库clone到本地，这个仓库是你要托管文档的仓库，如果没有就新建一个。</p> 
<p>clone到本地后，在项目根目录创建一个<code>docs</code>目录，cd进入docs目录，执行如下命令：</p> 
<pre><code class="prism language-bash">$ sphinx-quickstart
Welcome to the Sphinx <span class="token number">4.2</span>.0 quickstart utility.

Please enter values <span class="token keyword">for</span> the following settings <span class="token punctuation">(</span>just press Enter to
accept a default value, <span class="token keyword">if</span> one is given <span class="token keyword">in</span> brackets<span class="token punctuation">)</span>.

Selected root path: <span class="token builtin class-name">.</span>

You have two options <span class="token keyword">for</span> placing the build directory <span class="token keyword">for</span> Sphinx output.
Either, you use a directory <span class="token string">"_build"</span> within the root path, or you separate
<span class="token string">"source"</span> and <span class="token string">"build"</span> directories within the root path.
<span class="token operator">&gt;</span> Separate <span class="token builtin class-name">source</span> and build directories <span class="token punctuation">(</span>y/n<span class="token punctuation">)</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span>: y

The project name will occur <span class="token keyword">in</span> several places <span class="token keyword">in</span> the built documentation.
<span class="token operator">&gt;</span> Project name: 测试开发小记
<span class="token operator">&gt;</span> Author name<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: hiyongz
<span class="token operator">&gt;</span> Project release <span class="token punctuation">[</span><span class="token punctuation">]</span>: <span class="token number">0.1</span>.0

If the documents are to be written <span class="token keyword">in</span> a language other than English,
you can <span class="token keyword">select</span> a language here by its language code. Sphinx will <span class="token keyword">then</span>
translate text that it generates into that language.

For a list of supported codes, see
https://www.sphinx-doc.org/en/master/usage/configuration.html<span class="token comment">#confval-language.</span>
<span class="token operator">&gt;</span> Project language <span class="token punctuation">[</span>en<span class="token punctuation">]</span>: zh_CN

Creating <span class="token function">file</span> D:<span class="token punctuation">\</span>pythonproj<span class="token punctuation">\</span>devtest<span class="token punctuation">\</span>source<span class="token punctuation">\</span>conf.py.
Creating <span class="token function">file</span> D:<span class="token punctuation">\</span>pythonproj<span class="token punctuation">\</span>devtest<span class="token punctuation">\</span>source<span class="token punctuation">\</span>index.rst.
Creating <span class="token function">file</span> D:<span class="token punctuation">\</span>pythonproj<span class="token punctuation">\</span>devtest<span class="token punctuation">\</span>Makefile.
Creating <span class="token function">file</span> D:<span class="token punctuation">\</span>pythonproj<span class="token punctuation">\</span>devtest<span class="token punctuation">\</span>make.bat.

Finished: An initial directory structure has been created.

You should now populate your master <span class="token function">file</span> D:<span class="token punctuation">\</span>pythonproj<span class="token punctuation">\</span>devtest<span class="token punctuation">\</span>source<span class="token punctuation">\</span>index.rst and create other documentation
<span class="token builtin class-name">source</span> files. Use the Makefile to build the docs, like so:
   <span class="token function">make</span> builder
where <span class="token string">"builder"</span> is one of the supported builders, e.g. html, latex or linkcheck.
</code></pre> 
<p>上面的配置可以选择默认，稍后修改生成的conf.py配置文件即可。</p> 
<p>设置完成后，目录结构如下：</p> 
<pre><code class="prism language-bash">│   make.bat
│   Makefile
│
├───build
└───source
    │   conf.py
    │   index.rst
    │
    ├───_static
    └───_templates
</code></pre> 
<ul><li>build 存放编译后的文件</li><li>source/_static 存放静态文件</li><li>source/_templates 存放模板文件</li><li>source/conf.py 项目配置文件，上面的配置可以在这里面修改</li><li>source/index.rst 首页</li></ul> 
<h3><a id="3__93"></a>3. 编译</h3> 
<p>对rst文件进行编译生成HTML及相关静态文件：</p> 
<pre><code class="prism language-bash">$ <span class="token function">make</span> html
Running Sphinx v4.2.0
loading translations <span class="token punctuation">[</span>zh_CN<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token keyword">done</span>
making output directory<span class="token punctuation">..</span>. <span class="token keyword">done</span>
building <span class="token punctuation">[</span>mo<span class="token punctuation">]</span>: targets <span class="token keyword">for</span> <span class="token number">0</span> po files that are out of <span class="token function">date</span>
building <span class="token punctuation">[</span>html<span class="token punctuation">]</span>: targets <span class="token keyword">for</span> <span class="token number">1</span> <span class="token builtin class-name">source</span> files that are out of <span class="token function">date</span>
updating environment: <span class="token punctuation">[</span>new config<span class="token punctuation">]</span> <span class="token number">1</span> added, <span class="token number">0</span> changed, <span class="token number">0</span> removed
reading sources<span class="token punctuation">..</span>. <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span> index
looking <span class="token keyword">for</span> now-outdated files<span class="token punctuation">..</span>. none found
pickling environment<span class="token punctuation">..</span>. <span class="token keyword">done</span>
checking consistency<span class="token punctuation">..</span>. <span class="token keyword">done</span>
preparing documents<span class="token punctuation">..</span>. <span class="token keyword">done</span>
writing output<span class="token punctuation">..</span>. <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span> index
generating indices<span class="token punctuation">..</span>. genindex <span class="token keyword">done</span>
writing additional pages<span class="token punctuation">..</span>. search <span class="token keyword">done</span>
copying static files<span class="token punctuation">..</span>. <span class="token keyword">done</span>
copying extra files<span class="token punctuation">..</span>. <span class="token keyword">done</span>
dumping search index <span class="token keyword">in</span> Chinese <span class="token punctuation">(</span>code: zh<span class="token punctuation">)</span><span class="token punctuation">..</span>. <span class="token keyword">done</span>
dumping object inventory<span class="token punctuation">..</span>. <span class="token keyword">done</span>
build succeeded.

The HTML pages are <span class="token keyword">in</span> build<span class="token punctuation">\</span>html.
</code></pre> 
<p>index.rst文件内容会编译到_build/html目录下。</p> 
<p>打开_build\html\index.html文件，下面是渲染出来的HTML页面：</p> 
<p><img src="https://images2.imgbox.com/6d/49/6ErsyE8t_o.jpg" alt="" width="500"></p> 
<p>默认主题不好看，可以配置其它主题。</p> 
<h3><a id="4__129"></a>4. 配置主题</h3> 
<p>安装sphinx Read the Docs主题</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> sphinx_rtd_theme
</code></pre> 
<p>更多主题可到官网 <a href="https://sphinx-themes.org/" rel="nofollow">https://sphinx-themes.org/</a> 查看。</p> 
<p>配置source/conf.py 文件：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sphinx_rtd_theme
html_theme <span class="token operator">=</span> <span class="token string">"sphinx_rtd_theme"</span>
html_theme_path <span class="token operator">=</span> <span class="token punctuation">[</span>sphinx_rtd_theme<span class="token punctuation">.</span>get_html_theme_path<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> 
<p>重新编译：</p> 
<pre><code class="prism language-bash">$ <span class="token function">make</span> html
</code></pre> 
<p>打开_build\html\index.html文件，可以发现主题配置成功。</p> 
<p><img src="https://images2.imgbox.com/44/36/iyoMzbEd_o.jpg" alt="" width="500"></p> 
<h3><a id="5_markdown_154"></a>5. 配置markdown</h3> 
<p>Sphinx默认使用 reStructuredText 标记语言，由于已经习惯使用markdown进行文档编辑，下面来配置markdown。</p> 
<p><strong>1) 安装recommonmark插件</strong></p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> recommonmark
</code></pre> 
<p><strong>2）安装支持markdown表格的插件</strong></p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> sphinx_markdown_tables
</code></pre> 
<p>ReadTheDocs的python环境貌似没有sphinx_markdown_tables，在构建时可能报如下错误：</p> 
<pre><code class="prism language-bash">ModuleNotFoundError: No module named <span class="token string">'sphinx_markdown_tables'</span>
</code></pre> 
<p>解决方案是在docs目录下新建一个requirements.txt文件，写入如下内容：</p> 
<pre><code class="prism language-bash">sphinx-markdown-tables<span class="token operator">==</span><span class="token number">0.0</span>.15
</code></pre> 
<p><strong>3）配置source/conf.py 文件</strong></p> 
<p>增加：</p> 
<pre><code class="prism language-python">extensions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'recommonmark'</span><span class="token punctuation">,</span><span class="token string">'sphinx_markdown_tables'</span><span class="token punctuation">]</span> 
</code></pre> 
<p>在source目录下创建一个markdown文件，将makdown文件名添加到source/index.rst 中</p> 
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span> toctree<span class="token punctuation">:</span><span class="token punctuation">:</span>
   <span class="token punctuation">:</span>maxdepth<span class="token punctuation">:</span> <span class="token number">2</span>
   <span class="token punctuation">:</span>caption<span class="token punctuation">:</span> Contents<span class="token punctuation">:</span>
   
    windows<span class="token operator">-</span>shortcuts<span class="token punctuation">.</span>md
</code></pre> 
<p>重新编译</p> 
<p><img src="https://images2.imgbox.com/4a/ee/MScBV34z_o.jpg" alt="" width="500"></p> 
<p><strong>4）提交上传</strong></p> 
<p><code>.gitignore</code>文件添加<code>docs/build/</code>目录，不需要上传这个目录。上传：</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">"提交说明"</span>
<span class="token function">git</span> push -u origin master
</code></pre> 
<h2><a id="Read_the_Docs_207"></a>关联Read the Docs</h2> 
<p>关联Read the Docs，使其可以在线访问文档。</p> 
<p>浏览器访问 <a href="https://readthedocs.org/" rel="nofollow">https://readthedocs.org/</a>， 点击【我的项目】-&gt; 【Import a Project】：</p> 
<p><img src="https://images2.imgbox.com/af/01/jcDLLoiN_o.png" alt="" width="500"></p> 
<p>选择仓库</p> 
<p><img src="https://images2.imgbox.com/47/2c/W6omKC5M_o.jpg" alt="" width="500"></p> 
<p>点击下一步</p> 
<p><img src="https://images2.imgbox.com/57/52/UHYR7l2R_o.jpg" alt="" width="500"></p> 
<p>构建版本</p> 
<p><img src="https://images2.imgbox.com/30/5f/RQFug0qx_o.jpg" alt="" width="500"></p> 
<p>构建完成后，点击阅读文档</p> 
<p><img src="https://images2.imgbox.com/b2/0d/16v6b4Xe_o.jpg" alt="" width="500"></p> 
<p>构建成功</p> 
<p><img src="https://images2.imgbox.com/af/3e/I1S2Qrwn_o.jpg" alt="" width="500"></p> 
<p>在线文档地址为<a href="https://devtest-notes.readthedocs.io/" rel="nofollow">https://devtest-notes.readthedocs.io/</a>。</p> 
<p>参考资料：</p> 
<ol><li><a href="https://www.sphinx.org.cn/" rel="nofollow">https://www.sphinx.org.cn/</a></li><li><a href="https://readthedocs.org/" rel="nofollow">https://readthedocs.org/</a></li><li><a href="https://github.com/readthedocs/readthedocs.org">https://github.com/readthedocs/readthedocs.org</a></li><li><a href="https://docs.readthedocs.io/en/stable/tutorial/" rel="nofollow">https://docs.readthedocs.io/en/stable/tutorial/</a></li><li><a href="https://www.osgeo.cn/sphinx/usage/markdown.html" rel="nofollow">https://www.osgeo.cn/sphinx/usage/markdown.html</a></li><li><a href="https://www.sphinx-doc.org/zh_CN/master/usage/configuration.html" rel="nofollow">https://www.sphinx-doc.org/zh_CN/master/usage/configuration.html</a></li><li><a href="https://iridescent.ink/HowToMakeDocs/Basic/reST.html" rel="nofollow">https://iridescent.ink/HowToMakeDocs/Basic/reST.html</a></li></ol> 
<center> 
 <b>--THE END--<b></b></b> 
</center>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad02112afc7e3abdf882c4aedc1639b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">题目 1559: 蓝桥杯算法提高VIP-解二元一次方程组</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/261aa40be18af91c514bbee693db7f67/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">solidworks想把弹簧拉钩挂在孔里，要怎么配合？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>