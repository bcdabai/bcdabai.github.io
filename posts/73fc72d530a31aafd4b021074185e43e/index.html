<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>系统移植的环境搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="系统移植的环境搭建" />
<meta property="og:description" content="我个人使用的是Ubantu16.04版本。
samba服务的安装及配置 一、安装：
sudo apt-get install samba
二、配置：
1、创建一个需要共享的目录，并修改权限：
lpf@ubuntu:~$ mkdir share
lpf@ubuntu:~$ sudo chmod 777 share/ -R
2、打开配置文件：
lpf@ubuntu:~$ sudo vim /etc/samba/smb.conf
3、对创建的共享目录进行配置并保存退出：path和users需要改成自己的
[share]
path = /home/student/share available = yes
browseable = yes
public = yes
writable = yes
valid users = student
三、重新samba服务：
lpf@ubuntu:~/1703$ sudo /etc/init.d/smbd restart
四、测试：
在windows中win&#43;R：
–&gt;开始
—&gt;运行
—&gt;\linux的IP （例如：\192.168.0.189 ）
五、设置samba密码： 2》设置samba密码：设置共享文件夹密码，student是用户名
sudo smbpasswd -a student
3》重启samba服务：
sudo /etc/init.d/smbd restart
nfs服务器的安装配置和使用 1、将已经制作好的文件系统rootfs.tar.gz拷贝到 /opt，并解压" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/73fc72d530a31aafd4b021074185e43e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-20T15:32:07+08:00" />
<meta property="article:modified_time" content="2023-07-20T15:32:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">系统移植的环境搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>我个人使用的是Ubantu16.04版本。</p> 
<h3><a id="samba_2"></a>samba服务的安装及配置</h3> 
<p>一、安装：<br> sudo apt-get install samba<br> 二、配置：<br> 1、创建一个需要共享的目录，并修改权限：<br> lpf@ubuntu:~$ mkdir share<br> lpf@ubuntu:~$ sudo chmod 777 share/ -R<br> 2、打开配置文件：<br> lpf@ubuntu:~$ sudo vim /etc/samba/smb.conf<br> 3、对创建的共享目录进行配置并保存退出：path和users需要改成自己的<br> [share]<br> path = /home/student/share <br> available = yes<br> browseable = yes<br> public = yes<br> writable = yes<br> valid users = student<br> 三、重新samba服务：<br> lpf@ubuntu:~/1703$ sudo /etc/init.d/smbd restart<br> 四、测试：<br> 在windows中win+R：<br> –&gt;开始<br> —&gt;运行<br> —&gt;\linux的IP （例如：\192.168.0.189 ）<br> 五、设置samba密码： <br> 2》设置samba密码：设置共享文件夹密码，student是用户名<br> sudo smbpasswd -a student<br> 3》重启samba服务：<br> sudo /etc/init.d/smbd restart</p> 
<h3><a id="nfs_32"></a>nfs服务器的安装配置和使用</h3> 
<p>1、将已经制作好的文件系统rootfs.tar.gz拷贝到 /opt，并解压<br> sudo tar -xvf rootfs.tar.gz<br> sudo mkdir /opt/rootfs<br> 2、安装nfs服务器：<br> 1》安装NFSserver端口映射和服务</p> 
<pre><code>        	sudo apt-get install nfs-kernel-server
2》先重启portmap服务： 

	sudo /etc/init.d/portmap restart

  3》编辑/etc/exports,添加目标系统的根文件系统映射目录，假 
   如目标系统的根文件系统最后映射到/opt/rootfs,则 

	步骤（3.1）打开文件/etc/exports
</code></pre> 
<p>sudo vim /etc/exports</p> 
<p>（3.2）添加以下内容：<br> /opt/rootfs *(subtree_check,rw,no_root_squash,async)</p> 
<pre><code>4》重启服务：
	 $sudo  /etc/init.d/nfs-kernel-server	restart 
	 $sudo exportfs -a(最好每修改过/etc/exports 后需要执行一次) 
</code></pre> 
<p>3、测试：<br> 1》在用户主目录中创建一个挂载点: mkdir ~/mnt<br> 2》挂载文件系统：/opt/rootfs<br> sudo mount 192.168.0.189:/opt/rootfs mnt<br> 3》查看mnt下是否可以看到rootfs中的内容,如果可以看到，nfs</p> 
<p>删除挂载目录要取消挂载，才能删除。<br> sudo umount 192.168.0.189:/opt/rootfs mnt</p> 
<h3><a id="tftp_67"></a>tftp服务器的安装与配置</h3> 
<p>1、创建tftp的工作目录，并修改权限<br> sudo mkdir /tftpboot<br> sudo chmod 777 /tftpboot</p> 
<p>2、安装：<br> sudo apt-get install tftp-hpa tftpd-hpa　 // tftp-hpa是客户端，tftpd-hpa 是服务器<br> sudo apt-get install xinetd<br> 3、打开配置文件 /etc/default/tftpd-hpa ：<br> sudo vim /etc/default/tftpd-hpa</p> 
<p>4、添加以下内容：<br> TFTP_USERNAME=“tftp”<br> TFTP_DIRECTORY=“/tftpboot”<br> TFTP_ADDRESS=“0.0.0.0:69”<br> TFTP_OPTIONS=“-l -c -s”</p> 
<p>5、打开文件 sudo vim /etc/xinetd.d/tftp ，添加以下内容：<br> service tftp<br> {<!-- --><br> socket_type = dgram<br> protocol = udp<br> wait = yes<br> user =root<br> server = /usr/sbin/in.tftpd<br> server_args = -s /tftpboot/<br> disable = no<br> per_source= 11<br> cps = 100 2<br> flags = IPv4<br> }</p> 
<p>6、重启服务：<br> linux@ubuntu:~$ sudo service tftpd-hpa restart<br> linux@ubuntu:~$ sudo /etc/init.d/xinetd reload<br> [ ok ] Reloading xinetd configuration (via systemctl): xinetd.service.<br> linux@ubuntu:~$ sudo /etc/init.d/xinetd restart<br> [ ok ] Restarting xinetd (via systemctl): xinetd.service.</p> 
<p>7、测试：<br> 在用户主目录位置下载hello.c,虚拟机IP<br> tftp 192.168.0.189 登陆tftp服务器<br> tftp&gt; get hello.c 下载文件zImage<br> Received 95 bytes in 0.1 seconds<br> tftp&gt; quit 退出tftp服务器</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a5956d1d375ac71e0207023c263dcf99/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">接口报错-JSON parse error: Cannot deserialize value of type `java.lang.Integer` from Boolean value</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f72b85033f37168a2edaf0fe674a9b4b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Antd RadioGroup-Change事件获取当前选中值</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>