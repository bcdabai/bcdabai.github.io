<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于ASP.NET WebApi (增删改查) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于ASP.NET WebApi (增删改查)" />
<meta property="og:description" content="1、首先，我们先来介绍一下什么是WebApi ASP.NET Web API 是一种框架，用于轻松构建可以由多种客户端（包括浏览器和移动设备）访问的 HTTP 服务。ASP.NET Web API 是一种用于在 .NET Framework 上构建 RESTful 应用程序的理想平台。
可以把WebApi看成Asp.Net项目类型中的一种，其他项目类型诸如我们熟知的WebForm项目，Windows窗体项目，控制台应用程序等。
2、先来看一下这个demo的运行效果
如图所示，可以添加一条记录; 输入记录的Id，查询出该记录的其它信息； 修改该Id的记录； 删除该Id的记录。
3、开始建项目 1）新建一个“ASP.NET Web 应用程序”项目，命名为“Product”,点击确定，如图 2）和MVC类型的项目相似，构建程序的过程是先建立数据模型（Model）用于存取数据, 再建立控制器层（Controller）用于处理发来的Http请求，最后构造显示层（View）用于接收用户的输入和用户进行直接交互。 这里我们先在Models文件夹中建立产品Product类： Product.cs，如下：
using System; using System.Collections.Generic; using System.Linq; using System.Web; namespace demoApi.Models { public class Product { public int ID { get; set; } public string Name { get; set; } public string Department { get; set; } public decimal Salary { get; set; } } } 3）创建完一个Product类后，我们要编写一个类对其实现增删改查。 为了方便拓展和调用，我们在Product上构建一个接口“IProductRepository." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a24ebb19f16b042dacdf20edd4e7a489/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-10T10:50:36+08:00" />
<meta property="article:modified_time" content="2018-09-10T10:50:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于ASP.NET WebApi (增删改查)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1、首先，我们先来介绍一下什么是WebApi <br> ASP.NET Web API 是一种框架，用于轻松构建可以由多种客户端（包括浏览器和移动设备）访问的 HTTP 服务。ASP.NET Web API 是一种用于在 .NET Framework 上构建 RESTful 应用程序的理想平台。</p> 
<p>可以把WebApi看成Asp.Net项目类型中的一种，其他项目类型诸如我们熟知的WebForm项目，Windows窗体项目，控制台应用程序等。</p> 
<p>2、先来看一下这个demo的运行效果</p> 
<p><img src="https://images2.imgbox.com/91/4c/TVRXrTNG_o.png" alt="这里写图片描述" title=""></p> 
<p>如图所示，可以添加一条记录; 输入记录的Id，查询出该记录的其它信息； 修改该Id的记录； 删除该Id的记录。</p> 
<p>3、开始建项目 <br> 1）新建一个“ASP.NET Web 应用程序”项目，命名为“Product”,点击确定，如图 <br> <img src="https://images2.imgbox.com/7e/39/mvdH3s15_o.png" alt="这里写图片描述" title=""></p> 
<p>2）和MVC类型的项目相似，构建程序的过程是先建立数据模型（Model）用于存取数据, 再建立控制器层（Controller）用于处理发来的Http请求，最后构造显示层（View）用于接收用户的输入和用户进行直接交互。 <br> 这里我们先在Models文件夹中建立产品Product类： Product.cs，如下：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Web;

namespace demoApi.Models
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Product
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> ID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Department { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> Salary { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}</code></pre> 
<p>3）创建完一个Product类后，我们要编写一个类对其实现增删改查。 <br> 为了方便拓展和调用，我们在Product上构建一个接口“IProductRepository.cs ”，约定增删查改的方法和参数，如下：</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Text;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-class"><span class="hljs-keyword">namespace</span> <span class="hljs-title">demoApi</span>.<span class="hljs-title">Models</span>
{<!-- --></span>
    <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IProductRepository</span>
    {<!-- --></span>
        IEnumerable&lt;Product&gt; GetAll();
        Product Get(<span class="hljs-keyword">int</span> id);
        Product Add(Product item);
        <span class="hljs-keyword">void</span> Remove(<span class="hljs-keyword">int</span> id);
        <span class="hljs-keyword">bool</span> Update(Product item);
    }
}</code></pre> 
<p>4）然后，我们实现这个接口，在Models文件夹中新建一个类，具体针对Product类型的对象进行增删改查存取数据，并在该类的构造方法中，向List列表中存入几条数据，这个类叫：ProductRepository.cs，如下：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Web;

namespace demoApi.Models
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> ProductRepository : IProductRepository
    {
        <span class="hljs-keyword">private</span> List&lt;Product&gt; products = <span class="hljs-keyword">new</span> List&lt;Product&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> nextId = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-title">ProductRepository</span>()
        {
            Add(<span class="hljs-keyword">new</span> Product { Name = <span class="hljs-string">"LLL"</span>, Department = <span class="hljs-string">"FD"</span>, Salary = <span class="hljs-number">3000</span> });
            Add(<span class="hljs-keyword">new</span> Product { Name = <span class="hljs-string">"CCC"</span>, Department = <span class="hljs-string">"HR"</span>, Salary = <span class="hljs-number">6500</span> });
            Add(<span class="hljs-keyword">new</span> Product { Name = <span class="hljs-string">"MMM"</span>, Department = <span class="hljs-string">"R&amp;D"</span>, Salary = <span class="hljs-number">10000</span> });
        }
        <span class="hljs-keyword">public</span> Product <span class="hljs-title">Add</span>(Product item)
        {
            <span class="hljs-keyword">if</span> (item == <span class="hljs-keyword">null</span>)
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-string">"item"</span>);
            }
            item.ID = nextId++;
            products.Add(item);
            <span class="hljs-keyword">return</span> item;

        }

        <span class="hljs-keyword">public</span> Product <span class="hljs-title">Get</span>(<span class="hljs-keyword">int</span> id)
        {
            <span class="hljs-keyword">return</span> products.Find(u=&gt;u.ID==id);
        }

        <span class="hljs-keyword">public</span> IEnumerable&lt;Product&gt; <span class="hljs-title">GetAll</span>()
        {
            <span class="hljs-keyword">return</span> products;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Remove</span>(<span class="hljs-keyword">int</span> id)
        {
            products.RemoveAll(u =&gt; u.ID == id);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Update</span>(Product item)
        {
            <span class="hljs-keyword">if</span> (item == <span class="hljs-keyword">null</span>)
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-string">"item"</span>);
            }
            <span class="hljs-keyword">var</span> index = products.FindIndex(u =&gt; u.ID == item.ID);
            <span class="hljs-keyword">if</span> (index==-<span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
            products.RemoveAt(index);
            products.Add(item);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;

        }
    }
}</code></pre> 
<p>到此，Model层就构建好了。</p> 
<p>5）下面，我们要构建Controller层 <br> 在此之前，先说一下Http中几种请求类型，如下</p> 
<pre class="prettyprint"><code class=" hljs livecodeserver">    <span class="hljs-built_in">get</span>  类型  用于从服务器端获取数据，且不应该对服务器端有任何操作和影响

    <span class="hljs-built_in">post</span> 类型  用于发送数据到服务器端，创建一条新的数据，对服务器端产生影响

    <span class="hljs-built_in">put</span> 类型  用于向服务器端更新一条数据，对服务器端产生影响 （也可创建一条新的数据但不推荐这样用）

    <span class="hljs-built_in">delete</span> 类型 用于删除一条数据，对服务器端产生影响</code></pre> 
<p>四种请求类型刚好可对应于对数据的 查询，添加，修改，删除 <br> 接下来，我们将要建立一个ProductController.cs控制器类，其中的方法都是以“Get Post Put Delete”中的任一一个开头的，这样的开头使得Get类型的请求发送给以Get开头的方法去处理，Post类型的请求交给Post开头的方法去处理，Put和Delete同理。</p> 
<p>而以Get开头的方法有好几个也是可以的，此时如何区分到底交给哪个方法执行呢？这就取决于Get开头的方法们的传入参数了</p> 
<p>构建Controller层，在Controllers文件夹中建立一个ProductController.cs控制器类，如下：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Web;
<span class="hljs-keyword">using</span> System.Web.Mvc;
<span class="hljs-keyword">using</span> System.Web.Http;
<span class="hljs-keyword">using</span> System.Net;
<span class="hljs-keyword">using</span> System.Net.Http;
<span class="hljs-keyword">using</span> demoApi.Models;

namespace demoApi.Controllers
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> ProductController: ApiController
    {
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> IProductRepository repository = <span class="hljs-keyword">new</span> ProductRepository();

        <span class="hljs-comment">//GET: /api/product</span>
        <span class="hljs-keyword">public</span> IEnumerable&lt;Product&gt; <span class="hljs-title">GetAllProduct</span>()
        {
            <span class="hljs-keyword">return</span> repository.GetAll();
        }

        <span class="hljs-comment">//GET: /api/product/id</span>
        <span class="hljs-keyword">public</span> Product <span class="hljs-title">GetProduct</span>(<span class="hljs-keyword">int</span> id)
        {
            Product item = repository.Get(id);
            <span class="hljs-keyword">if</span> (item == <span class="hljs-keyword">null</span>)
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> HttpResponseException(HttpStatusCode.NotFound);
            }
            <span class="hljs-keyword">return</span> item;
        }
        <span class="hljs-comment">//POST: api/product</span>
        <span class="hljs-keyword">public</span> HttpResponseMessage <span class="hljs-title">PostProct</span>(Product item)
        {
            item = repository.Add(item);

            <span class="hljs-keyword">var</span> response = Request.CreateResponse&lt;Product&gt;(HttpStatusCode.Created, item);
            <span class="hljs-keyword">string</span> uri = Url.Link(<span class="hljs-string">"DefaultApi"</span>, <span class="hljs-keyword">new</span> { id = item.ID });
            response.Headers.Location = <span class="hljs-keyword">new</span> Uri(uri);

            <span class="hljs-keyword">return</span> response;
        }
        <span class="hljs-comment">//PUT: /api/products/id</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PutProduct</span>(<span class="hljs-keyword">int</span> id, Product product)
        {
            product.ID = id;
            <span class="hljs-keyword">if</span> (!repository.Update(product))
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> HttpResponseException(HttpStatusCode.NotFound);
            }
        }

        <span class="hljs-comment">//Delete: /api/products/id</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DeleteProduct</span>(<span class="hljs-keyword">int</span> id)
        {
            Product item = repository.Get(id);
            <span class="hljs-keyword">if</span> (item == <span class="hljs-keyword">null</span>)
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> HttpResponseException(HttpStatusCode.NotFound);
            }
            repository.Remove(id);
        }

    }
}</code></pre> 
<p>使该类继承于ApiController类，在其中实现处理各种Get,Post,Put,Delete类型Http请求的方法。</p> 
<p>每一个方法前都有一句注释，标识了该方法的针对的请求的类型（取决于方法的开头），以及要请求到该方法，需要使用的url。 <br> <img src="https://images2.imgbox.com/40/ee/2ljlJa3J_o.png" alt="这里写图片描述" title=""></p> 
<p>6）最后，我们来构建View视图层，我们更改Views文件夹中的Home文件夹下的Index.cshtml文件，这个文件是项目启动页，如下：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"body"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">section</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">h2</span>&gt;</span>添加记录<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        Name:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"name"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        Department:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"category"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span>
        Salary:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"price"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"addItem"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"添加"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">section</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">h2</span>&gt;</span>修改记录<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        Id：<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"id2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        Name:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"name2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        Department:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"category2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span>
        Salary:<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"price2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"showItem"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"查询"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"editItem"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"修改"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"removeItem"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"删除"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"~/Scripts/jquery-1.10.2.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">//用于保存用户输入数据</span>
        <span class="hljs-keyword">var</span> Product = {
            create: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
                Id: <span class="hljs-string">""</span>;
                Name: <span class="hljs-string">""</span>;
                Category: <span class="hljs-string">""</span>;
                Price: <span class="hljs-string">""</span>; 
                <span class="hljs-keyword">return</span> Product;
            }
        }


        $(<span class="hljs-string">"#addItem"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            <span class="hljs-keyword">var</span> newProduct = Product.create();
            newProduct.Name = $(<span class="hljs-string">"#name"</span>).val();
            newProduct.Category = $(<span class="hljs-string">"#category"</span>).val();
            newProduct.Price = $(<span class="hljs-string">"#price"</span>).val();

            $.ajax({
                url: <span class="hljs-string">"/api/Product"</span>,
                type: <span class="hljs-string">"POST"</span>,
                contentType: <span class="hljs-string">"application/json; charset=utf-8"</span>,
                data: <span class="hljs-built_in">JSON</span>.stringify(newProduct),
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>

                    alert(<span class="hljs-string">"添加成功！"</span>);
                },
                error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(XMLHttpRequest, textStatus, errorThrown)</span> {<!-- --></span>

                    alert(<span class="hljs-string">"请求失败，消息："</span> + textStatus + <span class="hljs-string">"  "</span> + errorThrown);
                }
            });
        });


        $(<span class="hljs-string">"#showItem"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            <span class="hljs-keyword">var</span> inputId = $(<span class="hljs-string">"#id2"</span>).val();
            $(<span class="hljs-string">"#name2"</span>).val(<span class="hljs-string">""</span>);
            $(<span class="hljs-string">"#category2"</span>).val(<span class="hljs-string">""</span>);
            $(<span class="hljs-string">"#price2"</span>).val(<span class="hljs-string">""</span>);
            $.ajax({
                url: <span class="hljs-string">"/api/Product/"</span> + inputId,
                type: <span class="hljs-string">"GET"</span>,
                contentType: <span class="hljs-string">"application/json; charset=urf-8"</span>,
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {<!-- --></span>
                    $(<span class="hljs-string">"#name2"</span>).val(data.Name);
                    $(<span class="hljs-string">"#category2"</span>).val(data.Category);
                    $(<span class="hljs-string">"#price2"</span>).val(data.Price);
                },
                error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(XMLHttpRequest, textStatus, errorThrown)</span> {<!-- --></span>
                    alert(<span class="hljs-string">"请求失败，消息："</span> + textStatus + <span class="hljs-string">"  "</span> + errorThrown);
                }
            });
        });


        $(<span class="hljs-string">"#editItem"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            <span class="hljs-keyword">var</span> inputId = $(<span class="hljs-string">"#id2"</span>).val();
            <span class="hljs-keyword">var</span> newProduct = Product.create();
            newProduct.Name = $(<span class="hljs-string">"#name2"</span>).val();
            newProduct.Category = $(<span class="hljs-string">"#category2"</span>).val();
            newProduct.Price = $(<span class="hljs-string">"#price2"</span>).val();

            $.ajax({
                url: <span class="hljs-string">"/api/Product/"</span> + inputId,
                type: <span class="hljs-string">"PUT"</span>,
                data: <span class="hljs-built_in">JSON</span>.stringify(newProduct),
                contentType: <span class="hljs-string">"application/json; charset=urf-8"</span>,
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
                    alert(<span class="hljs-string">"修改成功！ "</span>);
                },
                error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(XMLHttpRequest, textStatus, errorThrown)</span> {<!-- --></span>
                    alert(<span class="hljs-string">"请求失败，消息："</span> + textStatus + <span class="hljs-string">"  "</span> + errorThrown);
                }
            });
        });


        $(<span class="hljs-string">"#removeItem"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {<!-- --></span>
            <span class="hljs-keyword">var</span> inputId = $(<span class="hljs-string">"#id2"</span>).val();
            $.ajax({
                url: <span class="hljs-string">"/api/Product/"</span> + inputId,
                type: <span class="hljs-string">"DELETE"</span>,
                contentType: <span class="hljs-string">"application/json; charset=uft-8"</span>,
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data)</span> {<!-- --></span>

                        alert(<span class="hljs-string">"Id为 "</span> + inputId + <span class="hljs-string">" 的记录删除成功！"</span>);
                },
                error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(XMLHttpRequest, textStatus, errorThrown)</span> {<!-- --></span>
                    alert(<span class="hljs-string">"请求失败，消息："</span> + textStatus + <span class="hljs-string">"  "</span> + errorThrown);
                }
            });
        });
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></code></pre> 
<p>这里，WebApi的一个简单的增删改查项目就完成了，选择执行项目即可测试</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9b2b00067bc20c81022d5a4890bcdd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SSM 动态SQL文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f1564ced616fb11afd6c46dcdd31d9da/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Oracle Wrap破解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>