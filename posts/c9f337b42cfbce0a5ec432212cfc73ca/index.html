<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Arcgis小技巧【15】——字段计算器的简单用法和示例2.0 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Arcgis小技巧【15】——字段计算器的简单用法和示例2.0" />
<meta property="og:description" content="之前写过一篇【字段计算器的简单用法和示例】：
https://blog.csdn.net/xcc34452366/article/details/128776450
说了一些字段计算的使用方法，主要是针对python的用法。
不是很完整，这里再补充一些内容。
欢迎关注同名微信公众号，更多文章推送：
​
1、数字前填充0 一般用在编号中， 例如取【OBJECTID】的数字并在前面填充0至5位，注意计算的字段必须是字符串型。因为【OBJECTID】的值是数字，所以要加str()转成字符串：
str(!OBJECTID!).zfill(5) ​
2、小数点后保留固定位数，不足部分用0填充 正常情况下用round()函数可以保留固定位数，但是因为生成的是数值型，所以如果最后位是0会自动消掉。如果想要实现不足部分用0填充，则需要字段为字符串型，并如下计算：
format(!TBMJ!, &#39;.5f&#39;) ​
3、文本居中，两端填充 再整点活，如果想在文本两端都进行填充。例如要在文本前后都填充【0】至文本长度为8：
!JQDLMC!.center(8,&#34;0&#34;) 4、文本左右对齐，另一端填充 例如文本左对齐，右侧填充至8位：
!JQDLMC!.ljust(8,&#34;%&#34;) 相反的话则是：
!JQDLMC!.rjust(8,&#34;%&#34;) 5、获取特定字符在字符串的位置 例如获取字符串中【8】的位置，注意是从左开始获取第一个【8】的位置：
!BSM!.find(&#34;8&#34;) 如果是从右开始获取：
!BSM!.rfind(&#34;8&#34;) 6、获取多个数字型字段值中的最大值或最小值 取最大值：
max(!TBMJ!,!Shape_Area!) 取最小值：
min(!TBMJ!,!Shape_Area!) 7、获取随机数 例如要获取0至10之间的随机整数：
random.randrange(0,10) 在代码块中输入：
import random 8、赋空值 空值不是空格：
None 9、计算数字的百分比变化 例如计算图斑的面积变化，以百分比的方式表达：
PercentChange(!TBMJ!) 在代码块中输入：
lastValue = 0 def PercentChange(arg): newValue = arg global lastValue if lastValue: percentage = (float(newValue - lastValue) / lastValue) * 100 else: percentage = 0 lastValue = newValue return percentage 10、计算数字的累积值 例如逐个累积图斑的面积之和：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c9f337b42cfbce0a5ec432212cfc73ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-08T18:05:26+08:00" />
<meta property="article:modified_time" content="2023-10-08T18:05:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Arcgis小技巧【15】——字段计算器的简单用法和示例2.0</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>之前写过一篇【字段计算器的简单用法和示例】：</p> 
<p><a class="link-info" href="https://blog.csdn.net/xcc34452366/article/details/128776450" title="https://blog.csdn.net/xcc34452366/article/details/128776450">https://blog.csdn.net/xcc34452366/article/details/128776450</a></p> 
<p>说了一些字段计算的使用方法，主要是针对python的用法。</p> 
<p>不是很完整，这里再补充一些内容。</p> 
<p>欢迎关注同名微信公众号，更多文章推送：</p> 
<p><img alt="" height="120" src="https://images2.imgbox.com/e8/14/C35DP7T9_o.png" width="120">​</p> 
<hr> 
<h4><a name="t0"></a><strong>1、数字前填充0</strong></h4> 
<p>一般用在编号中， 例如取【OBJECTID】的数字并在前面填充0至5位，注意计算的字段必须是字符串型。因为【OBJECTID】的值是数字，所以要加str()转成字符串：</p> 
<div> 
 <pre><code class="language-python">str(!OBJECTID!).zfill(5)</code></pre> 
</div> 
<p><img alt="" height="207" src="https://images2.imgbox.com/ac/94/b0S4wuPY_o.png" width="632">​</p> 
<h4><strong>2、小数点后保留固定位数，不足部分用0填充</strong></h4> 
<p>正常情况下用round()函数可以保留固定位数，但是因为生成的是数值型，所以如果最后位是0会自动消掉。如果想要实现不足部分用0填充，则需要字段为字符串型，并如下计算：</p> 
<div> 
 <pre><code class="language-python">format(!TBMJ!, '.5f')</code></pre> 
</div> 
<p><img alt="" height="187" src="https://images2.imgbox.com/df/82/BYT5rMns_o.png" width="500">​</p> 
<h4><strong>3、文本居中，两端填充</strong></h4> 
<p>再整点活，如果想在文本两端都进行填充。例如要在文本前后都填充【0】至文本长度为8：</p> 
<pre><code class="language-python">!JQDLMC!.center(8,"0")</code></pre> 
<p><img alt="" height="178" src="https://images2.imgbox.com/f5/3f/2Gpdvi6P_o.png" width="526"></p> 
<h4><strong>4、文本左右对齐，另一端填充</strong></h4> 
<p>例如文本左对齐，右侧填充至8位：</p> 
<pre><code class="language-python">!JQDLMC!.ljust(8,"%")</code></pre> 
<p><img alt="" height="269" src="https://images2.imgbox.com/b5/70/CiWaHSaw_o.png" width="516"></p> 
<p>相反的话则是：</p> 
<pre><code class="language-python">!JQDLMC!.rjust(8,"%")</code></pre> 
<h4><strong>5、获取特定字符在字符串的位置</strong></h4> 
<p>例如获取字符串中【8】的位置，注意是从左开始获取第一个【8】的位置：</p> 
<pre><code class="language-python">!BSM!.find("8")</code></pre> 
<p></p> 
<p> 如果是从右开始获取：</p> 
<pre><code class="language-python">!BSM!.rfind("8")</code></pre> 
<h4><strong>6、获取多个数字型字段值中的最大值或最小值</strong></h4> 
<p>取最大值：</p> 
<pre><code class="language-python">max(!TBMJ!,!Shape_Area!)</code></pre> 
<p><img alt="" height="207" src="https://images2.imgbox.com/81/25/7lgYCoTx_o.png" width="494"></p> 
<p>取最小值：</p> 
<pre><code class="language-python">min(!TBMJ!,!Shape_Area!)</code></pre> 
<h4><strong>7、获取随机数</strong></h4> 
<p>例如要获取0至10之间的随机整数：</p> 
<pre><code class="language-python">random.randrange(0,10)</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">import random</code></pre> 
<p><img alt="" height="236" src="https://images2.imgbox.com/6e/66/8qPjwkGd_o.png" width="622"></p> 
<h4><strong>8、赋空值</strong></h4> 
<p>空值不是空格：</p> 
<pre><code class="language-python">None</code></pre> 
<h4><strong>9、计算数字的百分比变化</strong></h4> 
<p>例如计算图斑的面积变化，以百分比的方式表达：</p> 
<pre><code class="language-python">PercentChange(!TBMJ!)</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">lastValue = 0
def PercentChange(arg):
    newValue = arg
    global lastValue
    if lastValue:
        percentage = (float(newValue - lastValue) / lastValue)  * 100
    else:
        percentage = 0
    lastValue = newValue
    return percentage</code></pre> 
<p><img alt="" height="235" src="https://images2.imgbox.com/09/cf/d5dLy0i6_o.png" width="513"></p> 
<h4><strong>10、计算数字的累积值</strong></h4> 
<p>例如逐个累积图斑的面积之和：</p> 
<pre><code class="language-python">AccumulateValue(!TBMJ!)</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">total = 0
def AccumulateValue(arg):
    value = arg
    global total
    if total:
        total += value
    else:
        total = value
    return total</code></pre> 
<p><img alt="" height="239" src="https://images2.imgbox.com/f2/f7/yukLYu53_o.png" width="508"></p> 
<h4><strong>11、给图斑顺序编号</strong></h4> 
<p>结果输入：</p> 
<pre><code class="language-python">SequentialNumber()</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">rec=0
def SequentialNumber():
    global rec
    pStart = 1
    pInterval = 1
    if (rec == 0):
        rec = pStart
    else:
        rec = rec + pInterval
    return rec</code></pre> 
<p><img alt="" height="210" src="https://images2.imgbox.com/d1/79/sDuC4gik_o.png" width="472"></p> 
<h4><strong>12、获取</strong>面要素<strong>的折点数</strong></h4> 
<p>可以获取面要素折点线，需注意获取的折点数包括首末点，比你看上去的要多一个。选择一个整型字段进行计算：</p> 
<pre><code class="language-python">getVertexCount(!shape!)</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">def getVertexCount(feat):    
    partnum = 0
    partcount = feat.partCount
    pntcount = 0
    while partnum &lt; partcount:
        part = feat.getPart(partnum)
        pnt = part.next()
        while pnt:
            pntcount += 1   
            pnt = part.next()
            if not pnt: 
                pnt = part.next()
        partnum += 1
    return pntcount</code></pre> 
<h4><strong>13、移动点要素</strong></h4> 
<p>在【shape】字段上点击计算字段，实现点要素x坐标增加100：</p> 
<pre><code class="language-python">shiftXCoordinate(!SHAPE!)</code></pre> 
<p>在代码块中输入：</p> 
<pre><code class="language-python">def shiftXCoordinate(shape):
    shiftValue = 100
    point = shape.getPart(0)
    point.X += shiftValue
    return point</code></pre> 
<p><img alt="" height="438" src="https://images2.imgbox.com/55/38/q2KKd4Qc_o.png" width="806"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6da0816b5c9c064ebb81074fdcb7c3e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">云计算安全和云原生安全的关系</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/307cdc7ba30305199a2d841f750c907b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AF_UNIX和127.0.0.1(AF_INET)回环地址写数据速度对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>