<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用servlet获得客户端与服务器的信息 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用servlet获得客户端与服务器的信息" />
<meta property="og:description" content="使用从客户端传过来的HttpServletRequest request获得客户端与服务器的相关信息。
import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.io.PrintWriter; import java.security.Principal; import java.util.Locale; public class haunJingServlet extends HttpServlet { // 返回客户端浏览器接受的文件类型 private String getAccept(String accept){ StringBuffer buffer = new StringBuffer(); if(accept.contains(&#34;image/gif&#34;)){ buffer.append(&#34;Gif文件，&#34;); } if(accept.contains(&#34;image/x-xbitmap&#34;)){ buffer.append(&#34;BMP文件，&#34;); } if(accept.contains(&#34;iamge/jpeg&#34;)){ buffer.append(&#34;JPG文件，&#34;); } if(accept.contains(&#34;application/vnd.ms-excle&#34;)){ buffer.append(&#34;Excle文件，&#34;); } if(accept.contains(&#34;application/vnd.ms-powerpoint&#34;)){ buffer.append(&#34;PPT文件，&#34;); } if(accept.contains(&#34;application/msword&#34;)){ buffer.append(&#34;Word文件，&#34;); } return buffer.toString().replaceAll(&#34;，$&#34;,&#34;&#34;); } // 返回客户端语言环境 private String getLocale(Locale locale){ if(Locale.SIMPLIFIED_CHINESE.equals(locale)){ return &#34;简体中文&#34;; } if(Locale.TRADITIONAL_CHINESE.equals(locale)){ return &#34;繁体中文&#34;; } if(Locale." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/cb23b42a32b18aed5c72b4eae23cf201/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-05-09T12:11:48+08:00" />
<meta property="article:modified_time" content="2019-05-09T12:11:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用servlet获得客户端与服务器的信息</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>使用从客户端传过来的<code>HttpServletRequest request</code>获得客户端与服务器的相关信息。</p> 
<pre><code>import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.security.Principal;
import java.util.Locale;

public class haunJingServlet extends HttpServlet {

//    返回客户端浏览器接受的文件类型
    private String getAccept(String accept){
        StringBuffer buffer = new StringBuffer();
        if(accept.contains("image/gif")){
            buffer.append("Gif文件，");
        }

        if(accept.contains("image/x-xbitmap")){
            buffer.append("BMP文件，");
        }

        if(accept.contains("iamge/jpeg")){
            buffer.append("JPG文件，");
        }

        if(accept.contains("application/vnd.ms-excle")){
            buffer.append("Excle文件，");
        }

        if(accept.contains("application/vnd.ms-powerpoint")){
            buffer.append("PPT文件，");
        }

        if(accept.contains("application/msword")){
            buffer.append("Word文件，");
        }

        return buffer.toString().replaceAll("，$","");
    }


//    返回客户端语言环境
    private String getLocale(Locale locale){
        if(Locale.SIMPLIFIED_CHINESE.equals(locale)){
            return "简体中文";
        }

        if(Locale.TRADITIONAL_CHINESE.equals(locale)){
            return "繁体中文";
        }

        if(Locale.ENGLISH.equals(locale)){
            return "英文";
        }

        if(Locale.JAPANESE.equals(locale)){
            return "日文";
        }

        return "位置语言环境";
    }



//    获得客户端浏览器信息
    private String getNavigator(String userAgent){
        if(userAgent.indexOf("TencentTraveler")&gt;0){
            return "腾讯浏览器";
        }
        if(userAgent.indexOf("Maxthon")&gt;0){
            return "Mathon浏览器";
        }
        if(userAgent.indexOf("MyIE2")&gt;0){
            return "MyIE2浏览器";
        }
        if(userAgent.indexOf("Firefox")&gt;0){
            return "Firefox浏览器";
        }
        if(userAgent.indexOf("MSIE")&gt;0){
            return "IE浏览器";
        }
        return "未知浏览器信息";
    }



//    获得客户端操作系统信息
    private String getOS(String userAgent){
        if(userAgent.indexOf("Windows NT 5.1") &gt; 0 ){
            return "Windows xp";
        }

        if(userAgent.indexOf("Windows 98") &gt; 0){
            return "Windows 98";
        }

        if(userAgent.indexOf("Windows 5.0") &gt; 0){
            return "Windows 2000";
        }

        if(userAgent.indexOf("Linux") &gt; 0){
            return "Linux";
        }

        if(userAgent.indexOf("Unix") &gt; 0 ){
            return "Unix";
        }

        return "未知操作系统";
    }


    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        //        设置请求和响应的编码方式
        request.setCharacterEncoding("utf-8");
        response.setCharacterEncoding("utf-8");
        response.setContentType("text/html");


        String authType = request.getAuthType();

//        获取本地IP
        String localAddr = request.getLocalAddr();

//        获取本地名称，即服务器名称
        String localName = request.getLocalName();

//        获取本地端口号
        int localPort = request.getLocalPort();

//        获取用户的语言环境
        Locale locale = request.getLocale();

//        获取context路径
        String contextPath = request.getContextPath();

//        获取请求方法，即为GET或者POST
        String method = request.getMethod();

        String pathInfo = request.getPathInfo();

        String pathTranslated = request.getPathTranslated();

//        协议，这里是HTTP协议
        String protocol = request.getProtocol();

//        查询字符串，即？后面的字符串
        String queryString = request.getQueryString();

//        远程IP，即客户端IP
        String remoteAddr = request.getRemoteAddr();

//        远程端口，即客户端端口
        int port = request.getRemotePort();

//        远程用户
        String remoteUser = request.getRemoteUser();

//        客户端Session的ID
        String requestedSessionId = request.getRequestedSessionId();

//        用户请求的URL
        String requestURL = request.getRequestURI();

//        协议头，这里为HTTP
        String scheme = request.getScheme();

//        服务器名称
        String serverName = request.getServerName();

//        服务器端口
        int serverPort = request.getServerPort();

//        servlet路径
        String servletPath = request.getServletPath();

//        浏览器支持的格式
        Principal userPrincipal = request.getUserPrincipal();

//        从哪个页面单击链接到了本页
        String accept = request.getHeader("accept");

//        userAgent信息，包括操作系统类型及版本号、浏览器类型及版本号
        String referer = request.getHeader("regerer");

        String userAgent = request.getHeader("user-agent");

        String serverInfo = this.getServletContext().getServerInfo();

        PrintWriter out = response.getWriter();
        out.println("您的IP为："+remoteAddr+"；您使用"+getOS(userAgent)+
                    "操作系统"+getNavigator(userAgent)+"。您使用："+getLocale(locale)+"&lt;/br&gt;");

        out.println("服务器IP为："+localAddr+"；服务器使用"+serverPort+"端口，您的浏览器使用了"+port+"端口访问本网页"+
                    "服务器软件为："+serverInfo+"。服务器名称为："+localName+"&lt;/br&gt;");

        out.println("您的浏览器接受："+getAccept(accept)+"。&lt;/br&gt;");

        out.println("您从"+referer+"访问到该页面");

        out.println("您使用的协议是："+protocol+"URL协议头："+scheme+"服务器名称"+serverName+"您访问的URL为："+requestURL);

        out.println("该servlet的路径为："+servletPath+"该servlet类名为："+this.getClass().getName()+"&lt;/br&gt;");

        out.println("本应用程序在硬盘中的路径为："+this.getServletContext()+"网络相对路径为："+ contextPath+"&lt;/br&gt;");

        out.flush();
        out.close();
    }
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6cc319e6aea46740a0d719774177814/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">golang WebDav 多目录文件服务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7aa3ef793879cb226a711aadae6149d4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android实用技巧之adb命令：am 命令的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>