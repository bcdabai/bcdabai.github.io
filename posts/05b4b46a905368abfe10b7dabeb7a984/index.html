<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu20.04 nerf Instant-ngp - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu20.04 nerf Instant-ngp" />
<meta property="og:description" content="Instant-ngp linux
ubuntu 20.04
GPU RTX3050Ti
Instant-ngp官方文档地址
https://github.com/NVlabs/instant-ngp
参考链接
Instant-ngp linux部署及使用 - 简书
Ubuntu20.04复现instant-ngp，自建数据集，导出mesh_XINYU W的博客-CSDN博客
步骤
安装基本依赖
sudo apt-get install build-essential git python3-dev python3-pip libopenexr-dev libxi-dev \ libglfw3-dev libglew-dev libomp-dev libxinerama-dev libxcursor-dev 安装CUDA 官网给的是NVIDIA&#43;CUDA，但我个人推荐现在自己电脑装对应的显卡驱动
首先进入
CUDA Toolkit - Free Tools and Training | NVIDIA Developer
download now
Linux
x86_64
ubuntu
20.04
runfile(local)
可以参考
Ubuntu 20.04安装CUDA 11.4, cuDNN 8.24 - 知乎
ubuntu将cuda卸载干净_ubuntu卸载cuda-CSDN博客
也可以参考下面
可以看到
wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda_12.2.2_535.104.05_linux.run sudo sh cuda_12.2.2_535.104.05_linux.run 这是可以看到535，那我们就在自己电脑的软件和更新里面选择（记得先sudo apt update,sudo apt upgrade）,选择NVIDIA driver metapackage 来自****535（专有）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/05b4b46a905368abfe10b7dabeb7a984/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-12T11:36:00+08:00" />
<meta property="article:modified_time" content="2023-10-12T11:36:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu20.04 nerf Instant-ngp</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Instant-ngp linux</p> 
<p><br> ubuntu 20.04<br> GPU RTX3050Ti</p> 
<p>Instant-ngp官方文档地址</p> 
<p><a href="https://github.com/NVlabs/instant-ngp" title="https://github.com/NVlabs/instant-ngp">https://github.com/NVlabs/instant-ngp</a></p> 
<p>参考链接<br><a href="https://www.jianshu.com/p/02c3d3cce99b" rel="nofollow" title="Instant-ngp linux部署及使用 - 简书">Instant-ngp linux部署及使用 - 简书</a></p> 
<p><a href="https://blog.csdn.net/weixin_59961223/article/details/130438781?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169692793816800215026497%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169692793816800215026497&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-4-130438781-null-null.142%5Ev95%5EchatgptT3_1&amp;utm_term=instant-ngp&amp;spm=1018.2226.3001.4187" title="Ubuntu20.04复现instant-ngp，自建数据集，导出mesh_XINYU W的博客-CSDN博客">Ubuntu20.04复现instant-ngp，自建数据集，导出mesh_XINYU W的博客-CSDN博客</a></p> 
<p><br> 步骤<br> 安装基本依赖</p> 
<pre><code class="language-cpp">sudo apt-get install build-essential git python3-dev python3-pip libopenexr-dev libxi-dev \
                 libglfw3-dev libglew-dev libomp-dev libxinerama-dev libxcursor-dev</code></pre> 
<p><br>                  <br><strong>安装CUDA  </strong> <br> 官网给的是NVIDIA+CUDA，但我个人推荐现在自己电脑装对应的显卡驱动</p> 
<p>首先进入</p> 
<p><a href="https://developer.nvidia.com/cuda-toolkit" rel="nofollow" title="CUDA Toolkit - Free Tools and Training | NVIDIA Developer">CUDA Toolkit - Free Tools and Training | NVIDIA Developer</a></p> 
<p>download now<br> Linux<br> x86_64<br> ubuntu<br> 20.04<br> runfile(local)</p> 
<p><br> 可以参考</p> 
<p><a href="https://zhuanlan.zhihu.com/p/424817205" rel="nofollow" title="Ubuntu 20.04安装CUDA 11.4, cuDNN 8.24 - 知乎">Ubuntu 20.04安装CUDA 11.4, cuDNN 8.24 - 知乎</a></p> 
<p><a href="https://blog.csdn.net/qq_16792139/article/details/129730718" title="ubuntu将cuda卸载干净_ubuntu卸载cuda-CSDN博客">ubuntu将cuda卸载干净_ubuntu卸载cuda-CSDN博客</a></p> 
<p><br> 也可以参考下面<br> 可以看到</p> 
<pre><code class="language-cpp">wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda_12.2.2_535.104.05_linux.run
sudo sh cuda_12.2.2_535.104.05_linux.run</code></pre> 
<p>这是可以看到535，那我们就在自己电脑的软件和更新里面选择（记得先sudo apt update,sudo apt upgrade）,选择NVIDIA driver metapackage 来自****535（专有）</p> 
<p>点击应用更改，需要等待一定时间，完成后重启。</p> 
<p><br> 重启后打开终端下载（4.3G左右，大概8分钟）</p> 
<pre><code class="language-cpp">wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda_12.2.2_535.104.05_linux.run</code></pre> 
<p>下载后<br> 安装前可以选择为gcc降级</p> 
<pre><code class="language-cpp">sudo apt-get install gcc-7 g++-7
 
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 9
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 1
 
sudo update-alternatives --display gcc    
 
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 9
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-9 1
 
sudo update-alternatives --display g++</code></pre> 
<p><br> 安装驱动</p> 
<pre><code class="language-cpp">sudo sh cuda_12.2.2_535.104.05_linux.run</code></pre> 
<p>选“continue”<br> 取消Driver的选取（X是选中的意思，因为之前已经安装过驱动）<br> 然后Install</p> 
<p>完成后屏幕输出<br> Driver:   Installed<br> Toolkit:  Installed in /usr/local/cuda-10.1/<br> Samples:  Installed in /home/abneryepku/</p> 
<p>Please make sure that<br>  -   PATH includes /usr/local/cuda-10.1/<br>  -   LD_LIBRARY_PATH includes /usr/local/cuda-10.1/lib64, or, add /usr/local/cuda-10.1/lib64 to /etc/ld.so.conf and run ldconfig as root<br>  <br>  这里我的是<strong>12.2，上面是放别人的所以是10.1</strong>，注意自己的版本<br>  <br>  <br>  ~/.bashrc 文件中写入（<strong>10.1为自己对应的版本</strong>）<br>  </p> 
<pre><code class="language-cpp"> sudo gedit  ~/.bashrc
 # add nvcc compiler to path
export PATH=$PATH:/usr/local/cuda-10.1/bin
# add cuBLAS, cuSPARSE, cuRAND, cuSOLVER, cuFFT to path
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-10.1/lib64:/usr/lib/x86_64-linux-gnu</code></pre> 
<p>然后</p> 
<pre><code class="language-cpp">source ~/.bashrc</code></pre> 
<p>检查CUDA是否安装成功<br> 终端输入<strong>nvcc -V</strong>,若有输出，则安装成功</p> 
<p><br> 至此，cuda和驱动安装成功</p> 
<p><br><strong>安装cmake</strong><br> cmake安装包：链接: https://pan.baidu.com/s/1Dv99ODmhjzizkz5clEKI2g?pwd=zims 提取码: zims <br> 1.从官网下载cmake安装包，输入指令解压缩</p> 
<pre><code class="language-cpp">sudo tar -zxvf cmake-3.24.0-rc1.tar.gz</code></pre> 
<p>2.进入解压缩后的文件夹中执行</p> 
<pre><code class="language-cpp">sudo ./bootstrap
sudo make
sudo make install</code></pre> 
<p></p> 
<p></p> 
<p><strong>安装OptiX</strong><br> OptiX安装脚本：链接: https://pan.baidu.com/s/1Dv99ODmhjzizkz5clEKI2g?pwd=zims 提取码: zims <br> 下载Optix安装脚本到 /usr/local 目录（执行下面命令是会提示你是否安装在/usr/local ）</p> 
<pre><code class="language-cpp">bash NVIDIA-OptiX-SDK-7.5.0-linux64-x86_64.sh</code></pre> 
<p>执行完安装脚本后，会在/usr/local下生成 NVIDIA-OptiX-SDK-7.5.0-linux64-x86_64/ 目录</p> 
<p>即</p> 
<pre><code class="language-cpp">cd /usr/local
ll</code></pre> 
<p><br> 可以看到NVIDIA-OptiX-SDK-7.5.0-linux64-x86_64/</p> 
<p><br> 设置OptiX_INSTALL_DIR为环境变量，在 ~/.bashrc 文件最后添加以下内容</p> 
<pre><code class="language-cpp">export OptiX_INSTALL_DIR="/usr/local/NVIDIA-OptiX-SDK-7.5.0-linux64-x86_64"</code></pre> 
<p></p> 
<p></p> 
<p><strong>安装COLMAP</strong><br> 1.安装依赖包</p> 
<pre><code class="language-cpp">sudo apt-get install \
git \
build-essential \
libboost-program-options-dev \
libboost-filesystem-dev \
libboost-graph-dev \
libboost-system-dev \
libboost-test-dev \
libeigen3-dev \
libsuitesparse-dev \
libfreeimage-dev \
libmetis-dev \
libgoogle-glog-dev \
libgflags-dev \
libglew-dev \
qtbase5-dev \
libqt5opengl5-dev \
libcgal-dev \
libcgal-qt5-dev</code></pre> 
<p></p> 
<p></p> 
<p>2.安装ceres-solver<br> ceres环境配置<br> 下载地址：</p> 
<p>git clone https://github.com/ceres-solver/ceres-solver</p> 
<p>安装附加库前需要安装依赖项，依赖项会报错。解决：<br> //第一步，打开sources.list</p> 
<p>sudo gedit /etc/apt/sources.list</p> 
<p>//第二步，将下面的源粘贴到最上方sources.list</p> 
<p>deb http://cz.archive.ubuntu.com/ubuntu trusty main universe</p> 
<p>//第三步，更新源（看网速）</p> 
<p>sudo apt-get update</p> 
<p>//第四步，重新输入依赖项安装命令安装依赖项</p> 
<p>sudo apt-get install liblapack-dev libsuitesparse-dev libcxsparse3.1.2 libgflags-dev libgoogle-glog-dev libgtest-dev</p> 
<p><br> #进入到解压后的压缩文件夹中，进行编译：(预计10分钟)</p> 
<p>mkdir build</p> 
<p>cd build</p> 
<p>cmake ..</p> 
<p>make -j4</p> 
<p>#然后执行：</p> 
<p>sudo make install</p> 
<p>sudo ldconfig</p> 
<p>#验证是否安装成功：</p> 
<p>/usr/local/include/ceres有ceres的头文件，/usr/local/lib/下能找到名为libceres.a的库文件</p> 
<p>以上是ceres的配置</p> 
<p></p> 
<p></p> 
<p></p> 
<p>3.安装colmap</p> 
<pre><code class="language-cpp">git clone https://github.com/colmap/colmap
cd colmap
git checkout dev
mkdir build
cd build
cmake ..</code></pre> 
<p><br> 这一步可能会报You must set CMAKE_CUDA_ARCHITECTURES to e.g. 'native', 'all-major', '70', etc. "的错，在错的文件的位置加上下面这行即可</p> 
<pre><code class="language-cpp">set(CMAKE_CUDA_ARCHITECTURES "native")</code></pre> 
<p>如果在完成上面添加重新cmake .. 报了gpu的另一个错则换成下面这个</p> 
<pre><code class="language-cpp">set(CMAKE_CUDA_ARCHITECTURES "all-major")</code></pre> 
<pre><code class="language-cpp">rm -rf *
cmake ..
make -j12
sudo make install</code></pre> 
<p><br> 4.验证colmap</p> 
<pre><code class="language-cpp">colmap -h
# 有GUI的可执行以下命令
colmap gui</code></pre> 
<p></p> 
<p></p> 
<p><br><span style="color:#fe2c24;"><strong>部署instant-ngp</strong></span></p> 
<p>1.clone项目代码到项目目录</p> 
<pre><code class="language-cpp">git clone --recursive https://github.com/nvlabs/instant-ngp
cd instant-ngp</code></pre> 
<p>2.使用cmake构建项目</p> 
<pre><code class="language-cpp">cmake . -B build
cmake --build build --config RelWithDebInfo -j 16</code></pre> 
<p>3.使用测试数据测试</p> 
<pre><code class="language-cpp">./instant-ngp  ./data/nerf/fox

./instant-ngp data/sdf/armadillo.obj

./instant-ngp data/image/albert.exr</code></pre> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/32/0c/bBxrmxHR_o.png"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" height="908" src="https://images2.imgbox.com/c2/72/s5At9sjc_o.png" width="1200"><br>  </p> 
<p><img alt="" src="https://images2.imgbox.com/1e/fc/qQabbQnd_o.png"></p> 
<p style="text-align:center;"></p> 
<p>2023.10.12</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/065edeceed1e01439f2b9ccfa51cd404/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hantek 的hdp135v6s通信协议测试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9ace8d0b81fbf68faff31c3e803685c5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">echarts 中如何将 legend 设置成「直线」</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>