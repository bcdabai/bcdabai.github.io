<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>maven系列(2) 测试项目HelloWorld - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="maven系列(2) 测试项目HelloWorld" />
<meta property="og:description" content="上篇文章介绍了Maven的安装及简单的配置。本篇博客主要是对Maven配置做的补充，及通过 helloworld 程序带你体验maven构建生命周期。话不多说，进入正题。
一、配置中央仓库：maven默认中央仓库是外服，做练习时下载插件或者依赖真的不是一般的慢，为此先来改变下我们的中央厂库。
1.从maven home 的conf目录下拷贝 settings.xml 文件到 C:\Users\Administrator\.m2目录下。
2.修改 settings.xml 内容，找到&lt;mirrors&gt;节点，添加&lt;mirror&gt;子节点，内容如下
&lt;mirror&gt; &lt;id&gt;central &lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; 二、实现helloworld，并用mvn 构建
maven项目是基于约定的，不同的文件都要遵循一定的规约
项目代码在 src\main\java 目录下；测试代码在src\test\java 目录下；项目资源文件在src\main\resources目录下；测试资源文件在src\test\resources；pom文件放在项目根目录等等。
1.在 src\main\java目录下新建 john\mvndemo 目录 然后新建HelloWorld.java文件，内容为
package john.mvndemo.helloworld; public class HelloWorld{ public static String sayHello(){ return &#34;Hello World!&#34;; } public static void main(String[] args){ System.out.println(sayHello()); } } 文件路劲：
2..在 src\test\java目录下新建 john\mvndemo 目录 然后新建HelloWorldTest.java文件用于单元测试，内容为
package john.mvndemo.helloworld; import static org.junit.Assert.assertEquals; import org.junit.Test; public class HelloWorldTest{ @Test public void testSayHello(){ HelloWorld helloWorld = new HelloWorld(); String result = helloWorld." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1eb7baf9b66bd0cb0d5c59f044ce6597/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-01T08:17:35+08:00" />
<meta property="article:modified_time" content="2017-04-01T08:17:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">maven系列(2) 测试项目HelloWorld</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>上篇文章介绍了Maven的安装及简单的配置。本篇博客主要是对Maven配置做的补充，及通过 helloworld 程序带你体验maven构建生命周期。话不多说，进入正题。</p> 
<p>一、配置中央仓库：maven默认中央仓库是外服，做练习时下载插件或者依赖真的不是一般的慢，为此先来改变下我们的中央厂库。</p> 
<p>1.从maven home 的conf目录下拷贝 settings.xml 文件到 C:\Users\Administrator\.m2目录下。<img alt="" src="https://images2.imgbox.com/06/b3/DZANZ3xz_o.png"></p> 
<p>2.修改 settings.xml 内容，找到&lt;mirrors&gt;节点，添加&lt;mirror&gt;子节点，内容如下</p> 
<p></p> 
<pre class="has"><code class="language-html">&lt;mirror&gt;
      &lt;id&gt;central &lt;/id&gt;
      &lt;name&gt;aliyun maven&lt;/name&gt;
      &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central&lt;/url&gt;
      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
    &lt;/mirror&gt;</code></pre> 
<p></p> 
<p></p> 
<p>二、实现helloworld，并用mvn 构建<br>  maven项目是基于约定的，不同的文件都要遵循一定的规约</p> 
<p>项目代码在 src\main\java 目录下；测试代码在src\test\java 目录下；项目资源文件在src\main\resources目录下；测试资源文件在src\test\resources；pom文件放在项目根目录等等。</p> 
<p>1.在 src\main\java目录下新建 john\mvndemo 目录 然后新建HelloWorld.java文件，内容为</p> 
<p></p> 
<pre> </pre> 
<pre class="has"><code class="language-java">package john.mvndemo.helloworld; public class HelloWorld{ public static String sayHello(){ return "Hello World!"; } public static void main(String[] args){ System.out.println(sayHello()); } }</code></pre> 
<pre> </pre> 
<p>文件路劲：<br><img alt="" src="https://images2.imgbox.com/e0/2d/Kox8JfDZ_o.png"></p> 
<p></p> 
<p>2..在 src\test\java目录下新建 john\mvndemo 目录 然后新建HelloWorldTest.java文件用于单元测试，内容为</p> 
<p></p> 
<pre class="has"><code class="language-java">package john.mvndemo.helloworld;

import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class HelloWorldTest{
	@Test
	public void testSayHello(){
		HelloWorld helloWorld = new HelloWorld();
		String result = helloWorld.sayHello();
		assertEquals("Hello World!",result);
	}
}</code></pre> 
<p>文件路劲：</p> 
<p></p> 
<p><img alt="" src="https://images2.imgbox.com/9d/04/HgWnrofw_o.png"><br>  </p> 
<p>3.在helloworld目录下新建POM.xml文件内容为，其中dependency是管理依赖，这里只用到junit（单元测试用），plugin插件管理，shade是为了把具有main函数的类打包，默认是不打包具有main函数的类的。</p> 
<p></p> 
<pre class="has"><code class="language-html">&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;join.mvndemo&lt;/groupId&gt;
  &lt;artifactId&gt;hello-world&lt;/artifactId&gt;
  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
  &lt;!-- &lt;packaging&gt;war&lt;/packaging&gt; --&gt;
  &lt;name&gt; hello-world maven project &lt;/name&gt;
  &lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;junit&lt;/groupId&gt;
		&lt;artifactId&gt;junit&lt;/artifactId&gt;
		&lt;version&gt;4.7&lt;/version&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
  &lt;/dependencies&gt;  
  
  &lt;!-- --&gt;
  &lt;build&gt;
	&lt;plugins&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;!-- 打包时添加main()方法插件 --&gt;
			&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
			&lt;version&gt;1.2.1&lt;/version&gt;
			&lt;executions&gt;
				&lt;execution&gt;
					&lt;phase&gt;package&lt;/phase&gt;
					&lt;goals&gt;
						&lt;goal&gt;shade&lt;/goal&gt;				
					&lt;/goals&gt;
					&lt;configuration&gt;
						&lt;transformers&gt;
							&lt;transformer implementation = "org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"&gt;
								&lt;mainClass&gt;john.mvndemo.helloworld.HelloWorld&lt;/mainClass&gt;
							&lt;/transformer&gt;
						&lt;/transformers&gt;
					&lt;/configuration&gt;
				&lt;/execution&gt;				
			&lt;/executions&gt;
		&lt;/plugin&gt;
	&lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;</code></pre> 
<p>文件路劲：</p> 
<p></p> 
<p><img alt="" src="https://images2.imgbox.com/08/d4/IVcVzQoj_o.png"><br> 文件就绪，接下来就可以用maven构建了。maven 版本 apache-maven-3.3.9</p> 
<p>以下步骤的前提是Maven已安装并且正确配置了（mvn -version 查看maven是否已正确安装和配置），具体见我另篇博客<a href="http://blog.csdn.net/wfl_137724/article/details/68488894" title="maven之旅 之环境搭建">maven之旅 之环境搭建</a></p> 
<p>4.清理项目：  打开 cmd 切换到helloworld目录 （上面pom.xml目录）输入 mvn clean  ，看到下图说明成功了</p> 
<p><img alt="" src="https://images2.imgbox.com/52/14/KeejTD3R_o.png"></p> 
<p>如果失败BUILD SUCCESS 会 显示 BUILD FAILD </p> 
<p>5. 编译项目（先清理再编译）：输入mvn clean compile，看到下图说明成功了</p> 
<p><img alt="" src="https://images2.imgbox.com/92/26/uI3AhYq7_o.png"></p> 
<p>6.测试项目（先清理再测试）：输入mvn clean test，看到下图说明成功了</p> 
<p><img alt="" src="https://images2.imgbox.com/43/0c/FGzy6YcE_o.png"></p> 
<p>7.打包项目（先清理再打包）：输入 mvn clean package，看到下图说明成功了</p> 
<p><img alt="" src="https://images2.imgbox.com/b0/24/dLtEMvDE_o.png"></p> 
<p>8.安装项目（类库）：要想让自己的项目像开源项目那样通过maven被其他项目使用，还要把项目安装到maven厂库才行。输入 mvn clean install，成功后如下图</p> 
<p><img alt="" src="https://images2.imgbox.com/fe/e7/FEluOIrp_o.png"></p> 
<p>到本地仓库就可以按到自己安装的项目路，如下图</p> 
<p><img alt="" src="https://images2.imgbox.com/0e/37/aC5gNn0L_o.png"></p> 
<p>9.测试jar包：输入 java -jar target/hello-world-0.0.1-SNAPSHOT.jar</p> 
<p><img alt="" src="https://images2.imgbox.com/56/f3/Nbx5Wp9o_o.png"></p> 
<p></p> 
<p>10.分析：</p> 
<p> Maven的3个生命周期：clean，default，deploy</p> 
<p>clean : pre-clean、clean、post-clean；</p> 
<p>default:  :compile 、test、package、install；</p> 
<p>deploy   :pre-deploy、deploy、post-deploy；</p> 
<p>同种生命周期，后者依赖前者，后者执行前，前者会自动执行，如mvn clean 实际执行的是pre-clean和clean；</p> 
<p>不同种生命周期可以结合使用，如mvn clean test 实际执行的是pre-clean、clean、compile和test。</p> 
<p>还有本文只是提供了一个完整的maven构建过程。由于篇幅截图都不是很全，不是很形象。读者在演示的时候可以自己观察控制台输出。看了之后就会很明白的。</p> 
<p></p> 
<p>11.注意事项：第一次使用maven会下载很多插件，先把中央厂库配好，不然会很慢，影响心情；maven 版本号，这个可能会影响单元测试；编译的过程会先处理资源文件，因为没用到，所以没说，但是不等于没有；pom配置文件如果没有装shade插件，第9步是没法执行的。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/86db4ef054ad7322ea1b1a7c125d4933/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker容器iptables&amp;nbsp;failed:&amp;amp;…</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1393b9f5253cb92a2da5e569dbc6b621/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">maven系列(3) 快速搭建项目骨架</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>