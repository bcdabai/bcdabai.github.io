<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3&#43;Ts&#43;Vite项目(第三篇)——配置husky、stylelint、commitlint，配置git提交代码校验 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3&#43;Ts&#43;Vite项目(第三篇)——配置husky、stylelint、commitlint，配置git提交代码校验" />
<meta property="og:description" content="文章目录 简介一、项目环境1.1 node.js v16.0.0 及以上 （我 v16.14.1）1.2 pnpm v8.0.0 及以上（我 v8.6.6） 二、创建项目2.1 安装 pnpm2.2 创建项目-不多赘述 三、配置 eslint3.1 安装 eslint3.2 生成eslint配置文件3.3 完善 .eslintrc.cjs 文件中的 rules 对象3.4 新建忽略文件3.5 添加脚本3.6 检测是否生效 四、配置 prettier4.1 安装 prettier4.2 运行 pnpm run lint4.3 新建 prettier 配置文件4.4 新建忽略文件4.5 完善 .eslintrc.cjs 文件4.6 添加脚本 五、配置stylelint5.1 安装 stylelint5.2 装包完成后5.3 新建 stylelint 配置文件5.4 新建 stylelint 忽略文件5.5 添加脚本 六、配置 husky6.1 安装 husky6.2 生成 husky 配置文件 七、配置 commitlint7.1 安装 commitlint7.2 新建 commitlint 配置文件7.3 添加脚本7." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8a65da20b615cc0c1c1a431b640c1441/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-11T13:38:17+08:00" />
<meta property="article:modified_time" content="2023-09-11T13:38:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3&#43;Ts&#43;Vite项目(第三篇)——配置husky、stylelint、commitlint，配置git提交代码校验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">简介</a></li><li><a href="#_8" rel="nofollow">一、项目环境</a></li><li><ul><li><ul><li><a href="#11_nodejs_v1600____v16141_9" rel="nofollow">1.1 node.js v16.0.0 及以上 （我 v16.14.1）</a></li><li><a href="#12_pnpm___v800__v866_14" rel="nofollow">1.2 pnpm v8.0.0 及以上（我 v8.6.6）</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_22" rel="nofollow">二、创建项目</a></li><li><ul><li><ul><li><a href="#21__pnpm_23" rel="nofollow">2.1 安装 pnpm</a></li><li><a href="#22__27" rel="nofollow">2.2 创建项目-不多赘述</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_eslint_32" rel="nofollow">三、配置 eslint</a></li><li><ul><li><ul><li><a href="#31__eslint_33" rel="nofollow">3.1 安装 eslint</a></li><li><a href="#32_eslint_38" rel="nofollow">3.2 生成eslint配置文件</a></li><li><a href="#33__eslintrccjs__rules__81" rel="nofollow">3.3 完善 .eslintrc.cjs 文件中的 rules 对象</a></li><li><a href="#34__108" rel="nofollow">3.4 新建忽略文件</a></li><li><a href="#35__116" rel="nofollow">3.5 添加脚本</a></li><li><a href="#36__123" rel="nofollow">3.6 检测是否生效</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_prettier_129" rel="nofollow">四、配置 prettier</a></li><li><ul><li><ul><li><a href="#41__prettier_132" rel="nofollow">4.1 安装 prettier</a></li><li><a href="#42__pnpm_run_lint_137" rel="nofollow">4.2 运行 pnpm run lint</a></li><li><a href="#43__prettier__170" rel="nofollow">4.3 新建 prettier 配置文件</a></li><li><a href="#44__209" rel="nofollow">4.4 新建忽略文件</a></li><li><a href="#45__eslintrccjs__222" rel="nofollow">4.5 完善 .eslintrc.cjs 文件</a></li><li><a href="#46__230" rel="nofollow">4.6 添加脚本</a></li></ul> 
  </li></ul> 
  </li><li><a href="#stylelint_239" rel="nofollow">五、配置stylelint</a></li><li><ul><li><ul><li><a href="#51__stylelint_242" rel="nofollow">5.1 安装 stylelint</a></li><li><a href="#52__248" rel="nofollow">5.2 装包完成后</a></li><li><a href="#53__stylelint__255" rel="nofollow">5.3 新建 stylelint 配置文件</a></li><li><a href="#54__stylelint__312" rel="nofollow">5.4 新建 stylelint 忽略文件</a></li><li><a href="#55__322" rel="nofollow">5.5 添加脚本</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_husky_329" rel="nofollow">六、配置 husky</a></li><li><ul><li><ul><li><a href="#61__husky_330" rel="nofollow">6.1 安装 husky</a></li><li><a href="#62__husky__336" rel="nofollow">6.2 生成 husky 配置文件</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_commitlint_349" rel="nofollow">七、配置 commitlint</a></li><li><ul><li><ul><li><a href="#71__commitlint_353" rel="nofollow">7.1 安装 commitlint</a></li><li><a href="#72__commitlint__358" rel="nofollow">7.2 新建 commitlint 配置文件</a></li><li><a href="#73__407" rel="nofollow">7.3 添加脚本</a></li><li><a href="#74__husky__413" rel="nofollow">7.4 搭配 husky 来使用</a></li><li><a href="#75__425" rel="nofollow">7.5 提交规范</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_2"></a>简介</h2> 
<blockquote> 
 <p><strong>做什么：本文将从零开始带你配置<code>husky</code>、<code>stylelint</code>，完成代码提交git前的强制校验，保证代码风格和一致性</strong><br> <strong>技术栈：Vue3 + TypeScript + Vite</strong></p> 
</blockquote> 
<hr> 
<h2><a id="_8"></a>一、项目环境</h2> 
<h4><a id="11_nodejs_v1600____v16141_9"></a>1.1 node.js v16.0.0 及以上 （我 v16.14.1）</h4> 
<pre><code class="prism language-bash">// 查看node 版本 <span class="token builtin class-name">:</span> 打开小黑窗输入 <span class="token function">node</span> <span class="token parameter variable">-v</span>
<span class="token function">node</span> <span class="token parameter variable">-v</span>
</code></pre> 
<h4><a id="12_pnpm___v800__v866_14"></a>1.2 pnpm v8.0.0 及以上（我 v8.6.6）</h4> 
<pre><code class="prism language-bash">// 查看pnpm 版本 <span class="token builtin class-name">:</span> 打开小黑窗输入 <span class="token function">pnpm</span> <span class="token parameter variable">-v</span>
<span class="token function">pnpm</span> <span class="token parameter variable">-v</span>
</code></pre> 
<hr> 
<h2><a id="_22"></a>二、创建项目</h2> 
<h4><a id="21__pnpm_23"></a>2.1 安装 pnpm</h4> 
<pre><code class="prism language-bash"><span class="token function">npm</span> i <span class="token function">pnpm</span> <span class="token parameter variable">-g</span>
</code></pre> 
<h4><a id="22__27"></a>2.2 创建项目-不多赘述</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> create vite <span class="token string">'项目名称'</span>
</code></pre> 
<hr> 
<h2><a id="_eslint_32"></a>三、配置 eslint</h2> 
<h4><a id="31__eslint_33"></a>3.1 安装 eslint</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> i eslint <span class="token parameter variable">-D</span>
</code></pre> 
<h4><a id="32_eslint_38"></a>3.2 生成eslint配置文件</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> eslint <span class="token parameter variable">--init</span>
</code></pre> 
<p>运行命令后会在根目录生成一个<code>.eslintrc.cjs</code>文件，其中的代码如下：</p> 
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"env"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"browser"</span><span class="token builtin class-name">:</span> true,
        <span class="token string">"es2021"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"extends"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">"eslint:recommended"</span>,
        <span class="token string">"plugin:@typescript-eslint/recommended"</span>,
        <span class="token string">"plugin:vue/vue3-essential"</span>,
        <span class="token string">'plugin:prettier/recommended'</span>,
    <span class="token punctuation">]</span>,
    <span class="token string">"overrides"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"env"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">"node"</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>,
            <span class="token string">"files"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">".eslintrc.{js,cjs}"</span>
            <span class="token punctuation">]</span>,
            <span class="token string">"parserOptions"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">"sourceType"</span><span class="token builtin class-name">:</span> <span class="token string">"script"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>,
    <span class="token string">"parserOptions"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"ecmaVersion"</span><span class="token builtin class-name">:</span> <span class="token string">"latest"</span>,
        <span class="token string">"parser"</span><span class="token builtin class-name">:</span> <span class="token string">"@typescript-eslint/parser"</span>,
        <span class="token string">"sourceType"</span><span class="token builtin class-name">:</span> <span class="token string">"module"</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"plugins"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">"@typescript-eslint"</span>,
        <span class="token string">"vue"</span>
    <span class="token punctuation">]</span>,
  <span class="token string">"rules"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="33__eslintrccjs__rules__81"></a>3.3 完善 .eslintrc.cjs 文件中的 rules 对象</h4> 
<pre><code class="prism language-bash">  rules: <span class="token punctuation">{<!-- --></span>
    // eslint（https://eslint.bootcss.com/docs/rules/）
    <span class="token string">'no-var'</span><span class="token builtin class-name">:</span> <span class="token string">'error'</span>, // 要求使用 <span class="token builtin class-name">let</span> 或 const 而不是 var
    <span class="token string">'no-multiple-empty-lines'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span>, <span class="token punctuation">{<!-- --></span> max: <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>, // 不允许多个空行
    <span class="token string">'no-console'</span><span class="token builtin class-name">:</span> process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span> ? <span class="token string">'error'</span> <span class="token builtin class-name">:</span> <span class="token string">'off'</span>,
    <span class="token string">'no-debugger'</span><span class="token builtin class-name">:</span> process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span> ? <span class="token string">'error'</span> <span class="token builtin class-name">:</span> <span class="token string">'off'</span>,
    <span class="token string">'no-unexpected-multiline'</span><span class="token builtin class-name">:</span> <span class="token string">'error'</span>, // 禁止空余的多行
    <span class="token string">'no-useless-escape'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>, // 禁止不必要的转义字符

    // typeScript <span class="token punctuation">(</span>https://typescript-eslint.io/rules<span class="token punctuation">)</span>
    <span class="token string">'@typescript-eslint/no-unused-vars'</span><span class="token builtin class-name">:</span> <span class="token string">'error'</span>, // 禁止定义未使用的变量
    <span class="token string">'@typescript-eslint/prefer-ts-expect-error'</span><span class="token builtin class-name">:</span> <span class="token string">'error'</span>, // 禁止使用 @ts-ignore
    <span class="token string">'@typescript-eslint/no-explicit-any'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>, // 禁止使用 any 类型
    <span class="token string">'@typescript-eslint/no-non-null-assertion'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>,
    <span class="token string">'@typescript-eslint/no-namespace'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>, // 禁止使用自定义 TypeScript 模块和命名空间。
    <span class="token string">'@typescript-eslint/semi'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>,

    // eslint-plugin-vue <span class="token punctuation">(</span>https://eslint.vuejs.org/rules/<span class="token punctuation">)</span>
    <span class="token string">'vue/multi-word-component-names'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>, // 要求组件名称始终为 “-” 链接的单词
    <span class="token string">'vue/script-setup-uses-vars'</span><span class="token builtin class-name">:</span> <span class="token string">'error'</span>, // 防止<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>使用的变量<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>被标记为未使用
    <span class="token string">'vue/no-mutating-props'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span>, // 不允许组件 prop的改变
    <span class="token string">'vue/attribute-hyphenation'</span><span class="token builtin class-name">:</span> <span class="token string">'off'</span> // 对模板中的自定义组件强制执行属性命名样式
  <span class="token punctuation">}</span>

</code></pre> 
<h4><a id="34__108"></a>3.4 新建忽略文件</h4> 
<p>在项目根目录新建 <code>.eslintignore</code> 文件，并写入如下代码：</p> 
<pre><code class="prism language-bash">dist
node_modules
</code></pre> 
<h4><a id="35__116"></a>3.5 添加脚本</h4> 
<p>在 <code>packjson.json</code> 中 <code>script</code> 字段中添加俩行命令</p> 
<pre><code class="prism language-bash"><span class="token string">"lint"</span><span class="token builtin class-name">:</span> <span class="token string">"eslint src"</span>,
<span class="token string">"fix"</span><span class="token builtin class-name">:</span> <span class="token string">"eslint src --fix"</span>
</code></pre> 
<h4><a id="36__123"></a>3.6 检测是否生效</h4> 
<p>在 <code>main.ts</code> 中使用 <code>var</code> 数据类型，终端运行 pnpm run lint 命令，出现如下错误说明 <code>eslint</code> 安装并配置成功<br> <img src="https://images2.imgbox.com/c9/fa/D4QLHFsT_o.png" alt="在这里插入图片描述"><br> 接着试运行修复命令 <code>pnpm run fix</code>，修复成功，证明配置成功<br> <img src="https://images2.imgbox.com/0c/b4/47QcSBa0_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_prettier_129"></a>四、配置 prettier</h2> 
<blockquote> 
 <p><strong>在我们的项目中，<code>eslint</code> 应主要负责校验语法校验，<code>prettier</code> 应主要负责代码格式化</strong></p> 
</blockquote> 
<h4><a id="41__prettier_132"></a>4.1 安装 prettier</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> eslint-plugin-prettier prettier eslint-config-prettier
</code></pre> 
<h4><a id="42__pnpm_run_lint_137"></a>4.2 运行 pnpm run lint</h4> 
<p>装包完成之后在终端运行 <code>pnpm run lint</code> 命令，查看本次装包是否影响项目</p> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> run lint
</code></pre> 
<p>如果你运行 <code>pnpm run lint</code> 命令后报类似这样的错：</p> 
<pre><code class="prism language-bash">Oops<span class="token operator">!</span> Something went wrong<span class="token operator">!</span> :<span class="token punctuation">(</span>

ESLint: <span class="token number">8.44</span>.0

TypeError: prettier.resolveConfig.sync is not a <span class="token keyword">function</span>
Occurred <span class="token keyword">while</span> linting D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main.ts:1
Rule: “prettier/prettier”
at Program <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint-plugin-prettier@4.2.1_eslint-config-prettier@8.8.0_eslint@8.44.0_prettier@3.0.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint-plugin-prettier<span class="token punctuation">\</span>eslint-plugin-prettier.js:138:40<span class="token punctuation">)</span>
at ruleErrorHandler <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>linter.js:1050:28<span class="token punctuation">)</span>
at D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>safe-emitter.js:45:58
at Array.forEach <span class="token punctuation">(</span><span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token punctuation">)</span>
at Object.emit <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>safe-emitter.js:45:38<span class="token punctuation">)</span>
at NodeEventGenerator.applySelector <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>node-event-generator.js:297:26<span class="token punctuation">)</span>
at NodeEventGenerator.applySelectors <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>node-event-generator.js:326:22<span class="token punctuation">)</span>
at NodeEventGenerator.enterNode <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>node-event-generator.js:340:14<span class="token punctuation">)</span> at CodePathAnalyzer.enterNode <span class="token punctuation">(</span>D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>code-path-analysis<span class="token punctuation">\</span>code-path-analyzer.js:795:23<span class="token punctuation">)</span>
at D:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>study_wy<span class="token punctuation">\</span>node_modules.pnpm<span class="token punctuation">\</span>registry.npmmirror.com+eslint@8.44.0<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>eslint<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>linter<span class="token punctuation">\</span>linter.js:1085:32
</code></pre> 
<p>如若报上面这样类似的错，则运行下面这条命令，不报错则进入下一步：</p> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> <span class="token function">install</span> prettier@^2.4.0 <span class="token parameter variable">-D</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/0c/0F8wWWd0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="43__prettier__170"></a>4.3 新建 prettier 配置文件</h4> 
<p>根目录下新建 <code>.prettierrc.json</code> 文件，并填入如下代码：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>
	<span class="token string">"printWidth"</span><span class="token builtin class-name">:</span> <span class="token number">100</span>,
	<span class="token string">"tabWidth"</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,
	<span class="token string">"useTabs"</span><span class="token builtin class-name">:</span> true,
	<span class="token string">"semi"</span><span class="token builtin class-name">:</span> false,
	<span class="token string">"singleQuote"</span><span class="token builtin class-name">:</span> true,
	<span class="token string">"trailingComma"</span><span class="token builtin class-name">:</span> <span class="token string">"none"</span>,
	<span class="token string">"bracketSpacing"</span><span class="token builtin class-name">:</span> true,
	<span class="token string">"bracketSameLine"</span><span class="token builtin class-name">:</span> true,
	<span class="token string">"arrowParens"</span><span class="token builtin class-name">:</span> <span class="token string">"always"</span>,
	<span class="token string">"htmlWhitespaceSensitivity"</span><span class="token builtin class-name">:</span> <span class="token string">"ignore"</span>,
	<span class="token string">"vueIndentScriptAndStyle"</span><span class="token builtin class-name">:</span> false,
	<span class="token string">"endOfLine"</span><span class="token builtin class-name">:</span> <span class="token string">"auto"</span>,
	<span class="token string">"singleAttributePerLine"</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>各文件说明：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"printWidth"</span><span class="token builtin class-name">:</span> <span class="token number">100</span>,	//每行最多显示的字符数
  <span class="token string">"tabWidth"</span><span class="token builtin class-name">:</span> <span class="token number">2</span>,//tab的宽度 <span class="token number">2</span>个字符
  <span class="token string">"useTabs"</span><span class="token builtin class-name">:</span> true,//使用tab代替空格
  <span class="token string">"semi"</span><span class="token builtin class-name">:</span> false,//结尾使用分号
  <span class="token string">"singleQuote"</span><span class="token builtin class-name">:</span> true,//使用单引号代替双引号
  <span class="token string">"trailingComma"</span><span class="token builtin class-name">:</span> <span class="token string">"none"</span>,//结尾是否添加逗号
  <span class="token string">"bracketSpacing"</span><span class="token builtin class-name">:</span> true,//对象括号俩边是否用空格隔开
  <span class="token string">"bracketSameLine"</span><span class="token builtin class-name">:</span> true,<span class="token punctuation">;</span>//组件最后的尖括号不另起一行
  <span class="token string">"arrowParens"</span><span class="token builtin class-name">:</span> <span class="token string">"always"</span>,//箭头函数参数始终添加括号
  <span class="token string">"htmlWhitespaceSensitivity"</span><span class="token builtin class-name">:</span> <span class="token string">"ignore"</span>,//html存在空格是不敏感的
  <span class="token string">"vueIndentScriptAndStyle"</span><span class="token builtin class-name">:</span> false,//vue 的script和style的内容是否缩进
  <span class="token string">"endOfLine"</span><span class="token builtin class-name">:</span> <span class="token string">"auto"</span>,//行结尾形式 mac和linux是<span class="token punctuation">\</span>n  windows是<span class="token punctuation">\</span>r<span class="token punctuation">\</span>n 
  <span class="token string">"singleAttributePerLine"</span><span class="token builtin class-name">:</span> <span class="token boolean">false</span> //组件或者标签的属性是否控制一行只显示一个属性
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="44__209"></a>4.4 新建忽略文件</h4> 
<p>根目录下新建 <code>.prettierignore</code> 文件并填入如下代码：</p> 
<pre><code class="prism language-bash">/dist/*
/html/*
.local
/node_modules/**
**/*.svg
**/*.sh
/public/*
</code></pre> 
<h4><a id="45__eslintrccjs__222"></a>4.5 完善 .eslintrc.cjs 文件</h4> 
<pre><code class="prism language-bash"><span class="token string">'plugin:prettier/recommended'</span>,
</code></pre> 
<p><img src="https://images2.imgbox.com/eb/c1/nlAlWgAi_o.png" alt="在这里插入图片描述"><br> 在 <code>main.ts</code> 中加入一句测试用的 console,然后运行 <code>pnpm run lint</code>，可以看到控制台给出了提示<br> <img src="https://images2.imgbox.com/46/d3/OB5h03J2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="46__230"></a>4.6 添加脚本</h4> 
<p>在 <code>packjson.json</code> 文件的<code>script</code> 字段中添加一行命令</p> 
<pre><code class="prism language-bash"> <span class="token string">"format"</span><span class="token builtin class-name">:</span> <span class="token string">"prettier --write <span class="token entity" title='\"'>\"</span>./**/*.{html,vue,js,ts,json,md}<span class="token entity" title='\"'>\"</span> "</span>
</code></pre> 
<p>运行 <code>pnpm run format</code> 可以看到将所有允许的文件都格式化了一遍<br> <img src="https://images2.imgbox.com/a4/a7/Y4AbfCw1_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="stylelint_239"></a>五、配置stylelint</h2> 
<blockquote> 
 <p><strong><code>stylelint</code> 是 css 的格式化工具。可格式化css代码、检查css语法错误与不合理的写法，指定css书写顺序等</strong></p> 
</blockquote> 
<h4><a id="51__stylelint_242"></a>5.1 安装 stylelint</h4> 
<p>本项目中使用scss作为预处理器，安装以下依赖：</p> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> <span class="token function">add</span> sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss <span class="token parameter variable">-D</span>
</code></pre> 
<h4><a id="52__248"></a>5.2 装包完成后</h4> 
<p>5.1 命令执行完成后，如若报类似下面的警告，可以先不管，接着看步骤5.2</p> 
<pre><code class="prism language-bash">└─┬ stylelint-config-prettier <span class="token number">9.0</span>.5
└── ✕ unmet peer stylelint@“<span class="token operator">&gt;=</span> <span class="token number">11</span>.x <span class="token operator">&lt;</span> <span class="token number">15</span>”: found <span class="token number">15.10</span>.1
</code></pre> 
<h4><a id="53__stylelint__255"></a>5.3 新建 stylelint 配置文件</h4> 
<p>在项目根目录下新建 <code>.stylelintrc.cjs</code>，并填入如下代码：</p> 
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  extends: <span class="token punctuation">[</span>
    <span class="token string">'stylelint-config-standard'</span>, // 配置stylelint拓展插件
    <span class="token string">'stylelint-config-html/vue'</span>, // 配置 vue 中 template 样式格式化
    <span class="token string">'stylelint-config-standard-scss'</span>, // 配置stylelint scss插件
    <span class="token string">'stylelint-config-recommended-vue/scss'</span>, // 配置 vue 中 scss 样式格式化
    <span class="token string">'stylelint-config-recess-order'</span>, // 配置stylelint css属性书写顺序插件,
    <span class="token string">'stylelint-config-prettier'</span>, // 配置stylelint和prettier兼容
  <span class="token punctuation">]</span>,
  overrides: <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      files: <span class="token punctuation">[</span><span class="token string">'**/*.(scss|css|vue|html)'</span><span class="token punctuation">]</span>,
      customSyntax: <span class="token string">'postcss-scss'</span>,
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{<!-- --></span>
      files: <span class="token punctuation">[</span><span class="token string">'**/*.(html|vue)'</span><span class="token punctuation">]</span>,
      customSyntax: <span class="token string">'postcss-html'</span>,
    <span class="token punctuation">}</span>,
  <span class="token punctuation">]</span>,
  ignoreFiles: <span class="token punctuation">[</span>
    <span class="token string">'**/*.js'</span>,
    <span class="token string">'**/*.jsx'</span>,
    <span class="token string">'**/*.tsx'</span>,
    <span class="token string">'**/*.ts'</span>,
    <span class="token string">'**/*.json'</span>,
    <span class="token string">'**/*.md'</span>,
    <span class="token string">'**/*.yaml'</span>,
  <span class="token punctuation">]</span>,
  /**
   * null  <span class="token operator">=</span><span class="token operator">&gt;</span> 关闭该规则
   * always <span class="token operator">=</span><span class="token operator">&gt;</span> 必须
   */
  rules: <span class="token punctuation">{<!-- --></span>
    <span class="token string">'value-keyword-case'</span><span class="token builtin class-name">:</span> null, // 在 css 中使用 v-bind，不报错
    <span class="token string">'no-descending-specificity'</span><span class="token builtin class-name">:</span> null, // 禁止在具有较高优先级的选择器后出现被其覆盖的较低优先级的选择器
    <span class="token string">'function-url-quotes'</span><span class="token builtin class-name">:</span> <span class="token string">'always'</span>, // 要求或禁止 URL 的引号 <span class="token string">"always(必须加上引号)"</span><span class="token operator">|</span><span class="token string">"never(没有引号)"</span>
    <span class="token string">'no-empty-source'</span><span class="token builtin class-name">:</span> null, // 关闭禁止空源码
    <span class="token string">'selector-class-pattern'</span><span class="token builtin class-name">:</span> null, // 关闭强制选择器类名的格式
    <span class="token string">'property-no-unknown'</span><span class="token builtin class-name">:</span> null, // 禁止未知的属性<span class="token punctuation">(</span>true 为不允许<span class="token punctuation">)</span>
    <span class="token string">'block-opening-brace-space-before'</span><span class="token builtin class-name">:</span> <span class="token string">'always'</span>, //大括号之前必须有一个空格或不能有空白符
    <span class="token string">'value-no-vendor-prefix'</span><span class="token builtin class-name">:</span> null, // 关闭 属性值前缀 --webkit-box
    <span class="token string">'property-no-vendor-prefix'</span><span class="token builtin class-name">:</span> null, // 关闭 属性前缀 -webkit-mask
    <span class="token string">'selector-pseudo-class-no-unknown'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      // 不允许未知的选择器
      true,
      <span class="token punctuation">{<!-- --></span>
        ignorePseudoClasses: <span class="token punctuation">[</span><span class="token string">'global'</span>, <span class="token string">'v-deep'</span>, <span class="token string">'deep'</span><span class="token punctuation">]</span>, // 忽略属性，修改element默认样式的时候能使用到
      <span class="token punctuation">}</span>,
    <span class="token punctuation">]</span>,
  <span class="token punctuation">}</span>,
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="54__stylelint__312"></a>5.4 新建 stylelint 忽略文件</h4> 
<p>在项目根目录下新建 <code>.stylelintignore</code> 文件，并填入如下代码：</p> 
<pre><code class="prism language-bash">/node_modules/*
/dist/*
/html/*
/public/*
</code></pre> 
<h4><a id="55__322"></a>5.5 添加脚本</h4> 
<p>在 <code>packjson.json</code> 文件的 <code>script</code> 字段中添加命令</p> 
<pre><code class="prism language-bash"><span class="token string">"lint:style"</span><span class="token builtin class-name">:</span> <span class="token string">"stylelint src/**/*.{css,scss,vue} --cache --fix"</span>
</code></pre> 
<hr> 
<h2><a id="_husky_329"></a>六、配置 husky</h2> 
<h4><a id="61__husky_330"></a>6.1 安装 husky</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> husky
</code></pre> 
<h4><a id="62__husky__336"></a>6.2 生成 husky 配置文件</h4> 
<blockquote> 
 <p><strong>注：执行此命令前，要先 <code>git init</code> 或者是先将本项目<code>链接到远程仓库</code>(github、gitee等)</strong></p> 
</blockquote> 
<pre><code class="prism language-bash">npx husky-init
</code></pre> 
<p>执行此命令后会在根目录下生成个一个.husky目录，在这个目录下面会有一个pre-commit文件，<code>内容如下</code>。这个文件里面的命令在我们执行commit的时候就会执行</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/husky.sh"</span>
<span class="token function">pnpm</span> <span class="token function">format</span>
</code></pre> 
<h2><a id="_commitlint_349"></a>七、配置 commitlint</h2> 
<blockquote> 
 <p><strong>配置 git 提交时的 commit 信息，统一提交 git 提交规范</strong></p> 
</blockquote> 
<h4><a id="71__commitlint_353"></a>7.1 安装 commitlint</h4> 
<pre><code class="prism language-bash"><span class="token function">pnpm</span> <span class="token function">add</span> @commitlint/config-conventional @commitlint/cli <span class="token parameter variable">-D</span>
</code></pre> 
<h4><a id="72__commitlint__358"></a>7.2 新建 commitlint 配置文件</h4> 
<p>在项目根目录下新建 commitlint.config.cjs 文件，并填入如下代码：</p> 
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  extends: <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span>,
  // 校验规则
  rules: <span class="token punctuation">{<!-- --></span>
    <span class="token string">'type-enum'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      <span class="token number">2</span>,
      <span class="token string">'always'</span>,
      <span class="token punctuation">[</span>
        <span class="token string">'feat'</span>,
        <span class="token string">'fix'</span>,
        <span class="token string">'docs'</span>,
        <span class="token string">'style'</span>,
        <span class="token string">'refactor'</span>,
        <span class="token string">'perf'</span>,
        <span class="token string">'test'</span>,
        <span class="token string">'chore'</span>,
        <span class="token string">'revert'</span>,
        <span class="token string">'build'</span>,
      <span class="token punctuation">]</span>,
    <span class="token punctuation">]</span>,
    <span class="token string">'type-case'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>,
    <span class="token string">'type-empty'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>,
    <span class="token string">'scope-empty'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>,
    <span class="token string">'scope-case'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>,
    <span class="token string">'subject-full-stop'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span>, <span class="token string">'never'</span><span class="token punctuation">]</span>,
    <span class="token string">'subject-case'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span>, <span class="token string">'never'</span><span class="token punctuation">]</span>,
    <span class="token string">'header-max-length'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">0</span>, <span class="token string">'always'</span>, <span class="token number">72</span><span class="token punctuation">]</span>,
  <span class="token punctuation">}</span>,
<span class="token punctuation">}</span>

</code></pre> 
<p>配置说明：</p> 
<pre><code class="prism language-bash"><span class="token string">'feat'</span>,     //新特性、新功能
<span class="token string">'fix'</span>,      //修改bug
<span class="token string">'docs'</span>,     //文档修改
<span class="token string">'style'</span>,    //代码格式修改, 注意不是 css 修改
<span class="token string">'refactor'</span>, //代码重构
<span class="token string">'perf'</span>,     //优化相关，比如提升性能、体验
<span class="token string">'test'</span>,     //测试用例修改
<span class="token string">'chore'</span>,    //其他修改, 比如改变构建流程、或者增加依赖库、工具等
<span class="token string">'revert'</span>,   //回滚到上一个版本
<span class="token string">'build'</span>,    //编译相关的修改，例如发布版本、对项目构建或者依赖的改动
</code></pre> 
<h4><a id="73__407"></a>7.3 添加脚本</h4> 
<p>在 <code>packjson.json</code> 文件的 <code>script</code> 字段中添加命令</p> 
<pre><code class="prism language-bash"> <span class="token string">"commitlint"</span><span class="token builtin class-name">:</span> <span class="token string">"commitlint --config commitlint.config.cjs -e -V"</span>
</code></pre> 
<h4><a id="74__husky__413"></a>7.4 搭配 husky 来使用</h4> 
<pre><code class="prism language-bash">npx husky <span class="token function">add</span> .husky/commit-msg 
</code></pre> 
<p>在根目录下 husky文件夹中的 commit-msg中添加如下命令</p> 
<pre><code class="prism language-bash"><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">.</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> -- <span class="token string">"<span class="token variable">$0</span>"</span><span class="token variable">)</span></span>/_/husky.sh"</span>
<span class="token function">pnpm</span> commitlint
</code></pre> 
<h4><a id="75__425"></a>7.5 提交规范</h4> 
<blockquote> 
 <p><strong>提交示范：git commit -m 'feat: 新增商品页查询功能’</strong><br> <strong>此处并非只能用 <code>feat</code> 作为前缀，还能使用其他前缀，详情见 步骤7.2</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/99/bb/OfBOPmUp_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/02d40be1dfc8a21145064c4f2fc16a2e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux计划任务-定时任务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d7e7d748bf71350e8b24473f50ab7948/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Modbus RTU/Modbus TCP协议详细、区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>