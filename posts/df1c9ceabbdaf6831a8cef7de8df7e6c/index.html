<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>卡特兰数递推公式证明及应用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="卡特兰数递推公式证明及应用" />
<meta property="og:description" content="目录 卡特兰数定义递推公式公式1:公式2:公式3:公式4: 应用场景公式1证明公式2证明公式3证明公式4证明 例题 卡特兰数 定义 在oeis上可以看到卡特兰数的定义如下。
递推公式 f[0] = f[1] = 1
公式1: f[n]=f[0]f[n-1]&#43;f[1]f[n-2]&#43;...&#43;f[n-1]f[0]&#39;
公式2: f[n]=f[n−1]∗(4∗n−2)/(n&#43;1)
公式3: f[n]=C[2n,n]/(n&#43;1)(n=0,1,2,...),C是组合数
公式4: f[n]=C[2n,n]−C[2n,n−1],C是组合数
应用场景 一共有n对括号&#39;(&#39; &#39;)&#39;,求出所有的排列的个数f(n)。（在前i个符号中，左括号数量一定比右括号多）。
显然有f(0)=1; f(1)=1。
借助于这个问题：引入公式的证明
公式1证明 证明：在n对括号的排列中，假设最后一个括号和第i个左括号匹配。则在第i个左括号之前，一定已经匹配上了(i-1)对左括号。如下图，因此，此种情况的数量为f(i-1)*f(n-i)。(1&lt;=i&lt;=n)最后一个右括号可以1~n个左括号匹配共n种情况。
因此，对i从1到n的情况求和得到∑f(i-1)f(n-i)，即可得到递推公式1。
公式2证明 通过公式4很容易变换得到，给出公式4的证明。
公式3证明 通过公式4很容易变换得到，给出公式4的证明。
公式4证明 证明:对于给定的n对括号，如果不考虑任意一个前缀序列中的&#39;(&#39;不能比&#39;&#39;)少这一个条件，则一共有C[2n][n]种结果（2n个位置插入n个右括号）。现在只要删除所有结果中不符合条件的部分即可。
令 g(x) ：前缀x中的左括号数减右边括号数的差。如果不符合条件，一定是在排列中出现了某一点的g(x)&lt;0。
找到第一次出现g(x)=-1的位置，将之后的所有g(x)取反。最终g(n)变为g(n) = -2。
对于任何一种非法情况，做上述变换之后一定会使得g(n) = -2,等价于在最终结果时右括号比左括号多2个。因此非法情况数位C[2n][n&#43;1]
即f[n]=C[2n,n]−C[2n,n−1]=C[2n,n]−C[2n,n&#43;1]。
参考https://www.cnblogs.com/zyt1253679098/p/9190217.html
例题 P1044 栈
hdu1134 Game of Connections（此题用到高精度大数）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/df1c9ceabbdaf6831a8cef7de8df7e6c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-24T00:22:10+08:00" />
<meta property="article:modified_time" content="2022-05-24T00:22:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">卡特兰数递推公式证明及应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">卡特兰数</a></li><li><ul><li><a href="#_2" rel="nofollow">定义</a></li><li><a href="#_5" rel="nofollow">递推公式</a></li><li><ul><li><a href="#1_7" rel="nofollow">公式1:</a></li><li><a href="#2_9" rel="nofollow">公式2:</a></li><li><a href="#3_11" rel="nofollow">公式3:</a></li><li><a href="#4_13" rel="nofollow">公式4:</a></li></ul> 
   </li><li><a href="#_15" rel="nofollow">应用场景</a></li><li><ul><li><a href="#1_19" rel="nofollow">公式1证明</a></li><li><a href="#2_24" rel="nofollow">公式2证明</a></li><li><a href="#3_26" rel="nofollow">公式3证明</a></li><li><a href="#4_28" rel="nofollow">公式4证明</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_35" rel="nofollow">例题</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>卡特兰数</h2> 
<h3><a id="_2"></a>定义</h3> 
<p>在<a href="http://oeis.org/A000108" rel="nofollow">oeis</a>上可以看到卡特兰数的定义如下。<br> <img src="https://images2.imgbox.com/57/c2/ELadT4S9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_5"></a>递推公式</h3> 
<p><code>f[0] = f[1] = 1</code></p> 
<h4><a id="1_7"></a>公式1:</h4> 
<p><code>f[n]=f[0]f[n-1]+f[1]f[n-2]+...+f[n-1]f[0]'</code></p> 
<h4><a id="2_9"></a>公式2:</h4> 
<p><code>f[n]=f[n−1]∗(4∗n−2)/(n+1)</code></p> 
<h4><a id="3_11"></a>公式3:</h4> 
<p><code>f[n]=C[2n,n]/(n+1)(n=0,1,2,...)</code>,C是组合数</p> 
<h4><a id="4_13"></a>公式4:</h4> 
<p><code>f[n]=C[2n,n]−C[2n,n−1]</code>,C是组合数</p> 
<h3><a id="_15"></a>应用场景</h3> 
<p>一共有n对括号<code>'(' ')'</code>,求出所有的排列的个数f(n)。（在前i个符号中，左括号数量一定比右括号多）。<br> 显然有f(0)=1; f(1)=1。<br> 借助于这个问题：引入公式的证明</p> 
<h4><a id="1_19"></a>公式1证明</h4> 
<p>证明：在n对括号的排列中，假设最后一个括号和第i个左括号匹配。则在第i个左括号之前，一定已经匹配上了(i-1)对左括号。如下图，因此，此种情况的数量为<code>f(i-1)*f(n-i)</code>。(1&lt;=i&lt;=n)最后一个右括号可以1~n个左括号匹配共n种情况。<br> <img src="https://images2.imgbox.com/4f/0d/ARWeFQVp_o.png" alt="在这里插入图片描述"><br> 因此，对i从1到n的情况求和得到∑f(i-1)f(n-i)，即可得到递推公式1。</p> 
<h4><a id="2_24"></a>公式2证明</h4> 
<p>通过公式4很容易变换得到，给出公式4的证明。</p> 
<h4><a id="3_26"></a>公式3证明</h4> 
<p>通过公式4很容易变换得到，给出公式4的证明。</p> 
<h4><a id="4_28"></a>公式4证明</h4> 
<p>证明:对于给定的n对括号，如果不考虑任意一个前缀序列中的<code>'('</code>不能比<code>'')</code>少这一个条件，则一共有<code>C[2n][n]</code>种结果（2n个位置插入n个右括号）。现在只要删除所有结果中不符合条件的部分即可。<br> 令 <code>g(x) ：前缀x中的左括号数减右边括号数的差</code>。如果不符合条件，一定是在排列中出现了某一点的<code>g(x)&lt;0</code>。<br> <strong>找到第一次出现<code>g(x)=-1</code>的位置，将之后的所有g(x)取反。最终g(n)变为g(n) = -2</strong>。<br> 对于任何一种非法情况，做上述变换之后一定会使得g(n) = -2,等价于在最终结果时右括号比左括号多2个。因此非法情况数位C[2n][n+1]<br> 即<code>f[n]=C[2n,n]−C[2n,n−1]=C[2n,n]−C[2n,n+1]</code>。<br> 参考<a href="https://www.cnblogs.com/zyt1253679098/p/9190217.html" rel="nofollow">https://www.cnblogs.com/zyt1253679098/p/9190217.html</a></p> 
<h2><a id="_35"></a>例题</h2> 
<p><a href="https://www.luogu.com.cn/problem/P1044" rel="nofollow">P1044 栈</a><br> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=1134" rel="nofollow">hdu1134 Game of Connections</a>（此题用到高精度大数）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4b536a60baaed4cec8a9b5351f21660c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Unity开发实现的坦克游戏设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8acbf3cb82bb24375a380134ae14ae23/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vscode在wsl的基础上连接ssh的解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>