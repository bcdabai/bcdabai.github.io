<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot三种方法实现定时发送邮件的案例 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot三种方法实现定时发送邮件的案例" />
<meta property="og:description" content="介绍
这里是小编成长之路的历程，也是小编的学习之路。希望和各位大佬们一起成长！
以下为小编最喜欢的两句话：
要有最朴素的生活和最遥远的梦想，即使明天天寒地冻，山高水远，路远马亡。
一个人为什么要努力？ 我见过最好的答案就是：因为我喜欢的东西都很贵，我想去的地方都很远，我爱的人超完美。因此，小编想说：共勉！ 目录
前言
一、发送邮件的三种方法
二、定时任务介绍
1.@EnableScheduling
2.@Scheduled
三、前期准备工作
1、登录QQ邮箱获取授权码
第一步：进入QQ邮箱
第二步：找到POP3/SMTP，并开启
第三步：复制授权码
2、pom.xml中的依赖
3、在全局配置文件application.properties添加邮件服务配置
四、操作
一、创建邮件发送任务管理的业务处理类SendEmailService
二、在test类中发送邮件
三、发送定时邮件
四、在项目启动类上添加基于注解的定时任务支持:@EnableScheduling
一、发送邮件的三种方法 1、发送纯文本邮件
2、发送复杂邮件
3、发送模板邮件
二、定时任务介绍 Spring框架的定时任务调度功能支持配置和注解两种方式Spring Boot在Spring框架的基础上实现了继承，并对其中基于注解方式的定时任务实现了非常好的支持。下面，针对 Spring Boot 项目中基于注解方式的定时任务调度的相关注解和使用进行介绍。
1.@EnableScheduling @EnableScheduling 注解是 Spring 框架提供的，用于开启基于注解方式的定时任务支持，该注解主要用在项目启动类上。
2.@Scheduled @Scheduled 注解同样是 Spring 框架提供的，配置定时任务的执行规则，该注解主要用在定时业务方法上。@Scheduled 注解提供有多个属性，精细化配置定时任务执行规则
属性说明cron类似于 cron 的表达式，可以定制定时任务触发的秒、分钟、小时、月中的日、月、周中的日zone表示在上一次任务执行结束后在指定时间后继续执行下一次任务(属性值为long类型)fixedDelay指定cron 表达式将被解析的时区。默认情况下，该属性是空字符串(即使用服务器的本地时区fixedDelayString表示在上一次任务执行结束后在指定时间后继续执行下一次任务(属性值为long类型的字符串形式)fixedRate表示每隔指定时间执行一次任务 (属性值为 long 类型)fixedRateString表示每隔指定时间执行一次任务(属性值为 long 类型的字符串形式)initialDelay表示在fixedRate 或fixedDelay 任务第一次执行之前要延迟的毫秒数(属性值为long类型)initialDelayString表示在fixedRate或fixedDelay 任务第一次执行之前要延迟的毫秒数(属性值为long类型的字符串形式) 三、前期准备工作 1、登录QQ邮箱获取授权码 第一步：进入QQ邮箱 第二步：找到POP3/SMTP，并开启 第三步：复制授权码 开启过程需要手机号码验证，按照步骤操作即可。开启成功之后，即可获取一个授权码，将该号码保存好，一会使用
2、pom.xml中的依赖 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5d42e74faa335acac28e53d01f6410fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-26T20:54:28+08:00" />
<meta property="article:modified_time" content="2023-03-26T20:54:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot三种方法实现定时发送邮件的案例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>介绍</strong></p> 
 <p>这里是小编成长之路的历程，也是小编的学习之路。希望和各位大佬们一起成长！</p> 
 <p>以下为小编最喜欢的两句话：</p> 
 <p>要有最朴素的生活和最遥远的梦想，即使明天天寒地冻，山高水远，路远马亡。</p> 
 <p>一个人为什么要努力？ 我见过最好的答案就是：因为我喜欢的东西都很贵，我想去的地方都很远，我爱的人超完美。因此，小编想说：共勉！ </p> 
</blockquote> 
<hr> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E4%B8%80%E3%80%81%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95" rel="nofollow">一、发送邮件的三种方法</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%BB%8B%E7%BB%8D" rel="nofollow">二、定时任务介绍</a></p> 
<p id="1.%40EnableScheduling-toc" style="margin-left:40px;"><a href="#1.%40EnableScheduling" rel="nofollow">1.@EnableScheduling</a></p> 
<p id="2.%40Scheduled-toc" style="margin-left:40px;"><a href="#2.%40Scheduled" rel="nofollow">2.@Scheduled</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow">三、前期准备工作</a></p> 
<p id="1%E3%80%81%E7%99%BB%E5%BD%95QQ%E9%82%AE%E7%AE%B1%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E7%99%BB%E5%BD%95QQ%E9%82%AE%E7%AE%B1%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81" rel="nofollow">1、登录QQ邮箱获取授权码</a></p> 
<p id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%BF%9B%E5%85%A5QQ%E9%82%AE%E7%AE%B1-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%BF%9B%E5%85%A5QQ%E9%82%AE%E7%AE%B1" rel="nofollow">第一步：进入QQ邮箱</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%89%BE%E5%88%B0POP3%2FSMTP%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%89%BE%E5%88%B0POP3%2FSMTP%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF" rel="nofollow">第二步：找到POP3/SMTP，并开启</a></p> 
<p id="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E6%8E%88%E6%9D%83%E7%A0%81-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E6%8E%88%E6%9D%83%E7%A0%81" rel="nofollow">第三步：复制授权码</a></p> 
<p id="2%E3%80%81pom.xml%E4%B8%AD%E7%9A%84%E4%BE%9D%E8%B5%96-toc" style="margin-left:40px;"><a href="#2%E3%80%81pom.xml%E4%B8%AD%E7%9A%84%E4%BE%9D%E8%B5%96" rel="nofollow">2、pom.xml中的依赖</a></p> 
<p id="3%E3%80%81%E5%9C%A8%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6application.properties%E6%B7%BB%E5%8A%A0%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%9C%A8%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6application.properties%E6%B7%BB%E5%8A%A0%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE" rel="nofollow">3、在全局配置文件application.properties添加邮件服务配置</a></p> 
<p id="%E5%9B%9B%E3%80%81%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E6%93%8D%E4%BD%9C" rel="nofollow">四、操作</a></p> 
<p id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%B1%BBSendEmailService-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%B1%BBSendEmailService" rel="nofollow">一、创建邮件发送任务管理的业务处理类SendEmailService</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%9C%A8test%E7%B1%BB%E4%B8%AD%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E5%9C%A8test%E7%B1%BB%E4%B8%AD%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6" rel="nofollow">二、在test类中发送邮件</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%8F%91%E9%80%81%E5%AE%9A%E6%97%B6%E9%82%AE%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E5%8F%91%E9%80%81%E5%AE%9A%E6%97%B6%E9%82%AE%E4%BB%B6" rel="nofollow">三、发送定时邮件</a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E6%B7%BB%E5%8A%A0%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%94%AF%E6%8C%81%3A%40EnableScheduling-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E6%B7%BB%E5%8A%A0%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%94%AF%E6%8C%81%3A%40EnableScheduling" rel="nofollow">四、在项目启动类上添加基于注解的定时任务支持:@EnableScheduling</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95">一、发送邮件的三种方法</h2> 
<blockquote> 
 <p>1、发送纯文本邮件</p> 
 <p>2、发送复杂邮件</p> 
 <p>3、发送模板邮件</p> 
</blockquote> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E4%BB%8B%E7%BB%8D">二、定时任务介绍</h2> 
<blockquote> 
 <p>Spring框架的定时任务调度功能支持配置和注解两种方式Spring Boot在Spring框架的基础上实现了继承，并对其中基于注解方式的定时任务实现了非常好的支持。下面，针对 Spring Boot 项目中基于注解方式的定时任务调度的相关注解和使用进行介绍。</p> 
</blockquote> 
<h3 id="1.%40EnableScheduling">1.@EnableScheduling</h3> 
<p>@EnableScheduling 注解是 Spring 框架提供的，用于开启基于注解方式的定时任务支持，该注解主要用在项目启动类上。</p> 
<h3 id="2.%40Scheduled">2.@Scheduled</h3> 
<p>@Scheduled 注解同样是 Spring 框架提供的，配置定时任务的执行规则，该注解主要用在定时业务方法上。@Scheduled 注解提供有多个属性，精细化配置定时任务执行规则</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>属性</td><td>说明</td></tr><tr><td>cron</td><td>类似于 cron 的表达式，可以定制定时任务触发的秒、分钟、小时、月中的日、月、周中的日</td></tr><tr><td>zone</td><td>表示在上一次任务执行结束后在指定时间后继续执行下一次任务(属性值为long类型)</td></tr><tr><td>fixedDelay</td><td>指定cron 表达式将被解析的时区。默认情况下，该属性是空字符串(即使用服务器的本地时区</td></tr><tr><td>fixedDelayString</td><td>表示在上一次任务执行结束后在指定时间后继续执行下一次任务(属性值为long类型的字符串形式)</td></tr><tr><td>fixedRate</td><td>表示每隔指定时间执行一次任务 (属性值为 long 类型)</td></tr><tr><td>fixedRateString</td><td>表示每隔指定时间执行一次任务(属性值为 long 类型的字符串形式)</td></tr><tr><td>initialDelay</td><td>表示在fixedRate 或fixedDelay 任务第一次执行之前要延迟的毫秒数(属性值为long类型)</td></tr><tr><td>initialDelayString</td><td>表示在fixedRate或fixedDelay 任务第一次执行之前要延迟的毫秒数(属性值为long类型的字符串形式)</td></tr></tbody></table> 
<h2 id="%E4%B8%89%E3%80%81%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">三、前期准备工作</h2> 
<h3 id="1%E3%80%81%E7%99%BB%E5%BD%95QQ%E9%82%AE%E7%AE%B1%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81">1、登录QQ邮箱获取授权码</h3> 
<h4 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%BF%9B%E5%85%A5QQ%E9%82%AE%E7%AE%B1">第一步：进入QQ邮箱</h4> 
<p><img alt="" src="https://images2.imgbox.com/d5/91/JKDInBS8_o.png"></p> 
<h4 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%89%BE%E5%88%B0POP3%2FSMTP%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AF">第二步：找到POP3/SMTP，并开启</h4> 
<p><img alt="" src="https://images2.imgbox.com/90/5d/ZiExu3e3_o.png"></p> 
<h4 id="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%A4%8D%E5%88%B6%E6%8E%88%E6%9D%83%E7%A0%81">第三步：复制授权码</h4> 
<p><br> 开启过程需要手机号码验证，按照步骤操作即可。开启成功之后，即可获取一个授权码，将该号码保存好，一会使用</p> 
<p><img alt="" height="477" src="https://images2.imgbox.com/6d/8e/xOyUjkMF_o.png" width="865"></p> 
<p></p> 
<h3 id="2%E3%80%81pom.xml%E4%B8%AD%E7%9A%84%E4%BE%9D%E8%B5%96">2、pom.xml中的依赖</h3> 
<pre><code>&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!--添加下面的依赖后，Spring Boot自动配置的邮件服务会生效，在邮件发送任务时，
            可以直接使用Spring框架提供的JavaMailSender接口或者它的实现类JavaMailSenderImpl邮件        
        发送--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre> 
<p><img alt="" height="973" src="https://images2.imgbox.com/11/d7/fjppkpjl_o.png" width="1200"></p> 
<h3 id="3%E3%80%81%E5%9C%A8%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6application.properties%E6%B7%BB%E5%8A%A0%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE">3、在全局配置文件application.properties添加邮件服务配置</h3> 
<pre><code># 发件人邮件服务器相关配置
spring.mail.host=smtp.qq.com
spring.mail.port=587
# 配置个人QQ账户和密码（这里需要大家修改为自己的QQ账号和密码，密码是加密后的授权码，授权码的获得后继讲解）
spring.mail.username=QQ@qq.com
spring.mail.password=填入刚刚复制的授权码
spring.mail.default-encoding=UTF-8
# 邮件服务超时时间配置
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E6%93%8D%E4%BD%9C">四、操作</h2> 
<h3 id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%B1%BBSendEmailService">一、创建<span style="background-color:#ffffff;"><span style="color:#4d4d4d;">邮件发送任务管理的业务处理类SendEmailService</span></span></h3> 
<p><span style="color:#fe2c24;"><span style="background-color:#ffffff;">注意：在方法上的注解@Async是需要搭配定时任务一起使用的，如果使用普通的test类时可以不用这个注解的</span></span></p> 
<pre><code>package com.lyn.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.core.io.FileSystemResource;
import org.springframework.mail.MailException;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSenderImpl;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Service;

import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;
import java.io.File;

/**
 * @author:Lyn.R
 * @date:2023-02-21 14:54:36
 * @Description:
 * @note:
 **/
@Service
public class SendEmailService {
    @Autowired
    private JavaMailSenderImpl mailSender;//使用Spring框架提供的实现类JavaMailSenderImpl来实现邮件发送。
    @Value("${spring.mail.username}")//借助@Value注解读取全局变量中的spring.mail.username的值来作发件人
    private String from;
    /**
     * 第一种方法：发送纯文本邮件
     * @param to      收件人地址
     * @param subject 邮件标题
     * @param text    邮件内容
     */
   @Async
    public void sendSimpleEmail(String to, String subject, String text) {
        // 定制纯文本邮件信息SimpleMailMessage
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom(from);//设置发件人
        message.setTo(to);//设置收件人
        message.setSubject(subject);//设置邮件标题
        message.setText(text);//设置 正文件内容
        try {
            // 发送邮件
            mailSender.send(message);
            System.out.println("纯文本邮件发送成功");
        } catch (MailException e) {
            System.out.println("纯文本邮件发送失败 " + e.getMessage());
            e.printStackTrace();
        }
    }
    /**
     * 第二种方法：发送复杂邮件（包括静态资源和附件）
     * @param to           收件人地址
     * @param subject      邮件标题
     * @param text         邮件内容
     * @param filePath     附件地址
     * @param rscId        静态资源唯一标识
     * @param rscPath      静态资源地址
     */
    //sendComplexEmail()方法需要接收的参数除了基本的发送信息外，还包括静态资源唯一标识、静态资源路径和附件路径
    @Async
    public void sendComplexEmail(String to,String subject,String text,String filePath,String rscId,String rscPath){
        // 定制复杂邮件信息MimeMessage
        MimeMessage message = mailSender.createMimeMessage();
        try {
            // 使用MimeMessageHelper帮助类对邮件信息封装处理 ，并设置multipart多部件使用为true
            MimeMessageHelper helper = new MimeMessageHelper(message, true);
            helper.setFrom(from);
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(text, true);
            // 设置邮件静态资源
            FileSystemResource res = new FileSystemResource(new File(rscPath));
            helper.addInline(rscId, res);//设置邮件静态资源的方法
            // 设置邮件附件
            FileSystemResource file = new FileSystemResource(new File(filePath));
            String fileName = filePath.substring(filePath.lastIndexOf(File.separator));
            helper.addAttachment(fileName, file);//设置邮件附件的方法
            // 发送邮件
            mailSender.send(message);
            System.out.println("复杂邮件发送成功");
        } catch (MessagingException e) {
            System.out.println("复杂邮件发送失败 "+e.getMessage());
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * 第三钟方法：发送模板邮件
     * @param to       收件人地址
     * @param subject  邮件标题
     * @param content  邮件内容
     */
    @Async
    public void sendTemplateEmail(String to, String subject, String content) {
        MimeMessage message = mailSender.createMimeMessage();
        try {
            // 使用MimeMessageHelper帮助类对邮件信息进行封装处理，并设置multipart多部件使用为true
            MimeMessageHelper helper = new MimeMessageHelper(message, true);
            helper.setFrom(from);
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(content, true);
            // 发送邮件
            mailSender.send(message);
            System.out.println("模板邮件发送成功");
        } catch (MessagingException e) {
            System.out.println("模板邮件发送失败 "+e.getMessage());
            e.printStackTrace();
        }
    }

}</code></pre> 
<h3 id="%E4%BA%8C%E3%80%81%E5%9C%A8test%E7%B1%BB%E4%B8%AD%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6">二、在test类中发送邮件</h3> 
<pre><code>package com.lyn;

import com.lyn.service.SendEmailService;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;

@SpringBootTest
class SpringbootHomeworkEmail0221ApplicationTests {

    @Autowired
    private SendEmailService sendEmailService;
    @Test
    public void sendSimpleMailTest() {
        String to="12345678@qq.com";//这里修改为你能接收到的邮箱
        String subject="【纯文本邮件】标题";
        String text="嘟嘟嘟.....";
        // 发送简单邮件
        sendEmailService.sendSimpleEmail(to,subject,text);
    }
    @Test
    public void sendComplexEmailTest() {
        //根据前面定义的复杂邮件发送业务定制各种参数
        String to="12345678@qq.com";//修改为你自己的邮件方便接收查看
        String subject="【复杂邮件】标题";
        // 定义邮件内容
        StringBuilder text = new StringBuilder();
        //对邮件内容使用了HTML标签编辑邮件内容
        text.append("&lt;html&gt;&lt;head&gt;&lt;/head&gt;");
        text.append("&lt;body&gt;&lt;h1&gt;二月二龙抬头！&lt;/h1&gt;");
        // cid为嵌入静态资源文件关键字的固定写法，如果改变将无法识别；rscId则属于自定义的静态资源唯一标识，一个邮件内容中可能会包括多个静态资源，该属性是为了区别唯一性的。
        String rscId = "img001";
        text.append("&lt;img src='cid:" +rscId+"'/&gt;&lt;/body&gt;");
        text.append("&lt;/html&gt;");
        // 指定静态资源文件和附件路径
        String rscPath="D:\\1.jpg";//注意这里修改为你的硬盘中有的资源
        String filePath="D:\\hahaha.txt";//注意这里修改为你的硬盘中有的资源
        // 发送复杂邮件
        sendEmailService.sendComplexEmail(to,subject,text.toString(),filePath,rscId,rscPath);
    }

    @Autowired
    private TemplateEngine templateEngine;
    @Test
    public void sendTemplateEmailTest() {
        String to="12345678@qq.com";
        String subject="【模板邮件】标题";
        // 使用模板邮件定制邮件正文内容
        Context context = new Context();//Context注意正确导入“import org.thymeleaf.context.Context;”
        context.setVariable("username", "石头");
        context.setVariable("code", "456123");
        // 使用TemplateEngine设置要处理的模板页面
        String emailContent = templateEngine.process("emailTemplate_vercode", context);
        // 发送模板邮件
        sendEmailService.sendTemplateEmail(to,subject,emailContent);
    }
}
</code></pre> 
<p>模板文件的html（emailTemplate_vercode.html）</p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;html lang="zh" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"/&gt;
    &lt;title&gt;用户验证码&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;&lt;span th:text="${username}"&gt;XXX&lt;/span&gt;&amp;nbsp;先生/女士,您好：&lt;/div&gt;
&lt;P style="text-indent: 2em"&gt;您的新用户验证码为&lt;span th:text="${code}" style="color: cornflowerblue"&gt;123456&lt;/span&gt;，请妥善保管。&lt;/P&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3 id="%E4%B8%89%E3%80%81%E5%8F%91%E9%80%81%E5%AE%9A%E6%97%B6%E9%82%AE%E4%BB%B6">三、发送定时邮件</h3> 
<p>下面类中的 @Scheduled(cron = "*/5 * * * * ?")表达式大家可以去下面的网址生成<a href="http://cron.ciding.cc/" rel="nofollow" title="Cron - 在线Cron表达式生成器 (ciding.cc)">Cron - 在线Cron表达式生成器 (ciding.cc)</a></p> 
<pre><code>package com.lyn.controller;

import com.lyn.service.SendEmailService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Controller;
import org.springframework.stereotype.Service;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;

/**
 * @author:Lyn.R
 * @date:2023-02-21 19:55:01
 * @Description:
 * @note:
 **/
@Controller
public class MyScheduled {
    @Autowired
    private SendEmailService sendEmailService;

    @Autowired
    //模板引擎（Template Engine）, 是用来解析对应类型模板文件然后动态生成由数据和静态页面组成的视图文件的一个工具
    private TemplateEngine templateEngine;

    @Scheduled(cron = "*/5 * * * * ?")
    public void sendSimpleMailTest() {
        String to="12345678@qq.com";//这里修改为你能接收到的邮箱
        String subject="【纯文本邮件】标题";
        String text="嘟嘟嘟.....";
        // 发送简单邮件
        sendEmailService.sendSimpleEmail(to,subject,text);
    }
    @Scheduled(cron = "1 * * * * ?  ")
    public void sendComplexEmailTest() {
        //根据前面定义的复杂邮件发送业务定制各种参数
        String to="12345678@qq.com";//修改为你自己的邮件方便接收查看
        String subject="【复杂邮件】标题";
        // 定义邮件内容
        StringBuilder text = new StringBuilder();
        //对邮件内容使用了HTML标签编辑邮件内容
        text.append("&lt;html&gt;&lt;head&gt;&lt;/head&gt;");
        text.append("&lt;body&gt;&lt;h1&gt;二月二龙抬头！&lt;/h1&gt;");
        // cid为嵌入静态资源文件关键字的固定写法，如果改变将无法识别；rscId则属于自定义的静态资源唯一标识，一个邮件内容中可能会包括多个静态资源，该属性是为了区别唯一性的。
        String rscId = "img001";
        text.append("&lt;img src='cid:" +rscId+"'/&gt;&lt;/body&gt;");
        text.append("&lt;/html&gt;");
        // 指定静态资源文件和附件路径
        String rscPath="D:\\1.jpg";//注意这里修改为你的硬盘中有的资源
        String filePath="D:\\hahaha.txt";//注意这里修改为你的硬盘中有的资源
        // 发送复杂邮件
        sendEmailService.sendComplexEmail(to,subject,text.toString(),filePath,rscId,rscPath);
    }

    @Scheduled(cron = "0 * * * * ? ")
    public void sendTemplateEmailTest() {
        String to="12345678@qq.com";
        String subject="【模板邮件】标题";
        // 使用模板邮件定制邮件正文内容
        Context context = new Context();//Context注意正确导入“import org.thymeleaf.context.Context;”
        context.setVariable("username", "石头");
        context.setVariable("code", "456123");
        // 使用TemplateEngine设置要处理的模板页面
        String emailContent = templateEngine.process("emailTemplate_vercode", context);
        // 发送模板邮件
        sendEmailService.sendTemplateEmail(to,subject,emailContent);
    }
}
</code></pre> 
<h3 id="%E5%9B%9B%E3%80%81%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E6%B7%BB%E5%8A%A0%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%94%AF%E6%8C%81%3A%40EnableScheduling">四、在项目启动类上添加基于注解的定时任务支持:<strong>@EnableScheduling</strong></h3> 
<p></p> 
<pre><code>package com.lyn;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.scheduling.annotation.EnableScheduling;

@SpringBootApplication
@EnableScheduling
public class SpringbootHomeworkEmail0221Application {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootHomeworkEmail0221Application.class, args);
    }

}
</code></pre> 
<p><span style="color:#fe2c24;">注意：邮件发多了，可能会导致qq邮箱认为是垃圾邮件，就会出现报错，所以尽量不要进行邮箱轰炸</span></p> 
<p>以上就是小编的实现过程，希望各位大佬可以多多指教，共同进步！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/48e07705d7b7dbdd2c2f4fe499c038b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【ArcGIS Pro二次开发】(17)：打开GDB、SHP、CAD等各种数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bbecfbaf66b373457c0cda8070df38d0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【微信小程序】免费的高德地图api——获取天气（全过程）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>