<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>51单片机串口通信 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="51单片机串口通信" />
<meta property="og:description" content="串口 串口号需要一致
串口的介绍
总线的概念 总线是计算机系统中用于在各个组件之间传输数据、地址和控制信号的一种集成电路或物理连接。它是计算机内部各个部件之间进行通信和数据传输的重要途径。
总线可以分为数据总线、地址总线和控制总线三种类型。数据总线用于传输数据，地址总线用于指定内存或者I/O设备的地址，控制总线用于传输控制信号。这三种总线协同工作，使得不同的系统组件能够相互通信，协同工作，从而实现数据传输和协同操作。
在计算机系统中，总线连接着各个重要的组件，如中央处理器（CPU）、内存、输入输出设备（如键盘、鼠标、显示器等），使得它们能够相互通信和协同工作。总线的性能和速度直接影响了整个计算机系统的运行效率和性能。
总线的概念也在其他领域得到应用，比如在汽车电子系统中，各种传感器、执行器和控制单元之间通过总线进行通信和数据传输。总线的概念是计算机和电子系统中一个非常重要的概念，它为各种设备提供了一种统一的通信方式。
中断程序的编写 eg1:使用串口实现秒&#43;&#43;的功能
#include &lt;REGX52.H&gt; #include &lt;INTRINS.H&gt; unsigned char Sec; void UART_Init(){ SCON = 0X40; PCON |= 0X80; TMOD &amp;= 0X0F; // 设置定时器模式 TMOD |= 0X20; // 设置定时器模式 TL1 = 0XF3; // 设置定时器的初始值 TH1 = 0XF3; // 设置定时器的初始值 ET1 = 0; // 禁止定时器1中断 TR1 = 1; // 启动定时器1 } // 串口发送函数 void UART_SendByte(unsigned char Byte){ SBUF = Byte; while(TI == 0){ } TI = 0; } void Delay(unsigned int xms)	{ unsigned char i, j; while(xms){ i = 2; j = 239; do{ while(--j); }while(--i); xms--; } } void main(){ // 串口初始化 UART_Init();	while(1){ // 发送一个数据 UART_SendByte(Sec); Sec&#43;&#43;; Delay(1000); } } eg2：使用串口发送数据" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/21f6db6948e6f3db08e005536bb34ca7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-21T11:15:34+08:00" />
<meta property="article:modified_time" content="2024-01-21T11:15:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">51单片机串口通信</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:center;"> 串口</h2> 
<p><strong> 串口号需要一致</strong></p> 
<p><img alt="" height="746" src="https://images2.imgbox.com/fd/f0/xOLpkeT5_o.png" width="993"></p> 
<p> <strong>串口的介绍</strong></p> 
<p><img alt="" height="479" src="https://images2.imgbox.com/15/c6/rfUABuVN_o.png" width="840"></p> 
<p><img alt="" height="762" src="https://images2.imgbox.com/47/82/SaDoq8ie_o.png" width="1200"></p> 
<p><img alt="" height="853" src="https://images2.imgbox.com/b7/5a/qopvavgA_o.png" width="1200"></p> 
<p><img alt="" height="834" src="https://images2.imgbox.com/19/d6/Ci9zH6nY_o.png" width="1200"></p> 
<p><img alt="" height="593" src="https://images2.imgbox.com/60/ca/v6chpdlR_o.png" width="1200"></p> 
<p><img alt="" height="774" src="https://images2.imgbox.com/a5/22/y4eqNSlZ_o.png" width="1200"></p> 
<p><img alt="" height="850" src="https://images2.imgbox.com/77/77/WhSldBeq_o.png" width="1200"></p> 
<p><img alt="" height="671" src="https://images2.imgbox.com/ef/6f/pk1L3CB1_o.png" width="1200"></p> 
<p><img alt="" height="661" src="https://images2.imgbox.com/33/1f/PFZnslpa_o.png" width="1081"></p> 
<p><img alt="" height="857" src="https://images2.imgbox.com/fe/1d/GlRfI29K_o.png" width="1200"></p> 
<p><img alt="" height="859" src="https://images2.imgbox.com/97/bf/hJD8tNP0_o.png" width="1200"></p> 
<p><img alt="" height="786" src="https://images2.imgbox.com/93/02/vNaSh5xc_o.png" width="1200"></p> 
<h3 style="background-color:transparent;text-align:center;">总线的概念</h3> 
<blockquote> 
 <p>总线是计算机系统中用于在各个组件之间传输数据、地址和控制信号的一种集成电路或物理连接。它是计算机内部各个部件之间进行通信和数据传输的重要途径。</p> 
 <p>总线可以分为数据总线、地址总线和控制总线三种类型。数据总线用于传输数据，地址总线用于指定内存或者I/O设备的地址，控制总线用于传输控制信号。这三种总线协同工作，使得不同的系统组件能够相互通信，协同工作，从而实现数据传输和协同操作。</p> 
 <p>在计算机系统中，总线连接着各个重要的组件，如中央处理器（CPU）、内存、输入输出设备（如键盘、鼠标、显示器等），使得它们能够相互通信和协同工作。总线的性能和速度直接影响了整个计算机系统的运行效率和性能。</p> 
 <p>总线的概念也在其他领域得到应用，比如在汽车电子系统中，各种传感器、执行器和控制单元之间通过总线进行通信和数据传输。总线的概念是计算机和电子系统中一个非常重要的概念，它为各种设备提供了一种统一的通信方式。</p> 
</blockquote> 
<h3 style="background-color:transparent;text-align:center;"><strong>中断程序的编写</strong></h3> 
<p><img alt="" height="585" src="https://images2.imgbox.com/a0/fd/7sC9uR84_o.png" width="783"></p> 
<p><img alt="" height="256" src="https://images2.imgbox.com/df/84/oza4QRZc_o.png" width="868"></p> 
<p><strong>eg1:使用串口实现秒++的功能</strong></p> 
<pre><code class="language-cpp">#include &lt;REGX52.H&gt;
#include &lt;INTRINS.H&gt;
unsigned char Sec;


void UART_Init(){
		 SCON = 0X40;
	   PCON |= 0X80;
	   TMOD &amp;= 0X0F; // 设置定时器模式
	   TMOD |= 0X20; // 设置定时器模式
	   TL1 = 0XF3;   // 设置定时器的初始值
	   TH1 = 0XF3;   // 设置定时器的初始值
	   ET1 = 0;      // 禁止定时器1中断
	   TR1 = 1;      // 启动定时器1
}
// 串口发送函数
void UART_SendByte(unsigned char Byte){
      SBUF = Byte;
      while(TI == 0){
			  

			}
			TI = 0;

}

void Delay(unsigned int xms)		
{
	unsigned char i, j;
  while(xms){
		i = 2;
		j = 239;
		do{
		   while(--j);
		}while(--i);
	  xms--;
	}
	
}
void  main(){
	 // 串口初始化
	 UART_Init();	
   while(1){
	    	  // 发送一个数据
					UART_SendByte(Sec);
		      Sec++;
		      Delay(1000);
	 }

}
</code></pre> 
<p><strong>eg2：使用串口发送数据</strong></p> 
<p><img alt="" height="578" src="https://images2.imgbox.com/89/a1/DzKk0o0N_o.png" width="792"></p> 
<p><strong>eg2:电脑通过串口控制LED（使用模块化编程方式）</strong></p> 
<p><strong>main函数文件</strong></p> 
<pre><code class="language-cpp">#include &lt;REGX52.H&gt;
#include &lt;INTRINS.H&gt;
#include "UART.H"



void  main(){
	 // 串口初始化
	 UART_Init();	
   while(1){
      

	 }

}

// 串口中断,中断服务子函数
void UART_Routine() interrupt 4{
	 if(RI == 1){
	   P1 = ~SBUF;//读取寄存器中的数据，并存储到P2中
		 UART_SendByte(SBUF);// 函数不能同时在主函数中写然后右在中断函数中写，可能会导致函数的重入
		 RI = 0;
	 }
   //P1 = 0x00;

}
</code></pre> 
<p><strong>函数头文件</strong></p> 
<pre><code class="language-cpp">#ifndef __UART_H__
#define __UART_H__
void Delay(unsigned int xms);
void UART_Init();
void UART_SendByte(unsigned char Byte);
#endif

</code></pre> 
<p><strong>函数c语言文件</strong></p> 
<pre><code class="language-cpp">#include &lt;REGX52.H&gt;
void Delay(unsigned int xms)		
{
	unsigned char i, j;
  while(xms){
		i = 2;
		j = 239;
		do{
		   while(--j);
		}while(--i);
	  xms--;
	}
	
}
// 串口初始化
void UART_Init(){
		 SCON = 0X50;  // 接收数据
	   PCON |= 0X80;
	   TMOD &amp;= 0X0F; // 设置定时器模式
	   TMOD |= 0X20; // 设置定时器模式
	   TL1 = 0XF3;   // 设置定时器的初始值
	   TH1 = 0XF3;   // 设置定时器的初始值
	   ET1 = 0;      // 禁止定时器1中断
	   TR1 = 1;      // 启动定时器1
	   EA = 1;       // 启动总中断
	   ES = 1;       // 启动串口中断
}

// 串口发送函数：发送一个字数据
void UART_SendByte(unsigned char Byte){
      SBUF = Byte;
      while(TI == 0){
			  

			}
			TI = 0;

}
</code></pre> 
<p><strong>串口波特率的计算补充</strong></p> 
<p><img alt="" height="473" src="https://images2.imgbox.com/bd/2f/eWR9cXWJ_o.png" width="1115"></p> 
<p><img alt="" height="592" src="https://images2.imgbox.com/b1/db/98RTNOEm_o.png" width="795"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6c25db6b43a9cfc9bb46b3494747b8a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">01-开始Rust之旅</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6afaf0dc3c81e9664b9fff25aafff931/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">03-常用编程概念</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>