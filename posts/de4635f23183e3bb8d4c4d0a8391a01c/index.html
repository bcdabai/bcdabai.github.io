<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OPENSSH è¯¦è§£ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OPENSSH è¯¦è§£" />
<meta property="og:description" content="ä¸€ã€ä»€ä¹ˆæ˜¯Openssh
OpenSSH æ˜¯ SSH ï¼ˆSecure SHellï¼‰ åè®®çš„å…è´¹å¼€æºå®ç°ã€‚SSHåè®®æ—å¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æ§åˆ¶ï¼Œ æˆ–åœ¨è®¡ç®—æœºä¹‹é—´ä¼ é€æ–‡ä»¶ã€‚è€Œå®ç°æ­¤åŠŸèƒ½çš„ä¼ ç»Ÿæ–¹å¼ï¼Œå¦‚telnet(ç»ˆç«¯ä»¿çœŸåè®®)ã€ rcp ftpã€ rloginã€rshéƒ½æ˜¯æä¸ºä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨æ˜æ–‡ä¼ é€å¯†ç ã€‚OpenSSHæä¾›äº†æœåŠ¡ç«¯åå°ç¨‹åºå’Œå®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨æ¥åŠ å¯†è¿œç¨‹æ§ä»¶å’Œæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®ï¼Œå¹¶ç”±æ­¤æ¥ä»£æ›¿åŸæ¥çš„ç±»ä¼¼æœåŠ¡ã€‚ çŸ¥è¯†å»¶ä¼¸ï¼š
sshåè®®æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼š
v1:åŸºäºCRC-32 åšMACï¼Œä¸å®‰å…¨ï¼› ï¼ˆä¸€èˆ¬ç”¨äºå®ç°ä¸»æœºè®¤è¯ï¼‰
v2:åŸºäºåè®®åå•†é€‰æ‹©åŒæ–¹éƒ½æ”¯æŒçš„æœ€å®‰å…¨çš„MACæœºåˆ¶
åŸºäºDHåšå¯†é’¥äº¤æ¢ï¼ŒåŸºäºRSAæˆ–DSAå®ç°èº«ä»½è®¤è¯ï¼Œä»è€Œå®ç°æ— éœ€è¾“å…¥è´¦å·é¢è†œ
å®¢æˆ·ç«¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ç«¯çš„ä¸»æœºç§˜é’¥æ¥åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿç»§ç»­é€šä¿¡ï¼›
è®¤è¯æ–¹å¼ï¼š
1ã€åŸºäºå£ä»¤çš„è®¤è¯
2ã€åŸºäºå¯†é’¥çš„è®¤è¯
äºŒã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨OpenSSH
ç”±äºä¼ ç»Ÿçš„telnetã€rcp ftpç­‰å·¥å…·æ˜¯æ˜æ–‡ä¼ è¾“æ•°æ®çš„ï¼Œå¯¹æ•°æ®å®‰å…¨æ€§å­˜åœ¨å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼Œè€ŒOpenSSHå¯ä»¥å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ä»è€Œå¤§å¤§æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚ ä¸‰ã€OpenSSHç¨‹åºç®€ä»‹
1ã€OpenSSHçš„åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸¤éƒ¨åˆ†
Clientsç«¯çš„é…ç½®æ–‡ä»¶ï¼š/etc/ssh/ssh_config Serverç«¯çš„é…ç½®æ–‡ä»¶ï¼š/etc/ssh/sshd_config Serverç«¯æœåŠ¡è„šæœ¬ï¼š/etc/rc.d/init.d/sshd OpenSSHåœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤æ˜¯å®‰è£…å¹¶å¯åŠ¨çš„ openssh ä¸»è¦çš„å…³é”®åŒ…æœ‰å››ä¸ª
openssh.x86_64 5.3p1-104.el6 //æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å…¬å…±ç»„ä»¶
openssh-askpass.x86_64 5.3p1-104.el6 //
openssh-clients.x86_64 5.3p1-104.el6 //å®¢æˆ·ç«¯å®‰è£…åŒ…
openssh-server.x86_64 5.3p1-104.el6 //æœåŠ¡ç«¯å®‰è£…åŒ…
openssl-clients å‡ ä¸ªå¸¸ç”¨æ–‡ä»¶ [root@1inux ssh] # rpm -ql openssh-clients /etc/ssh/ssh_config //å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ /usr/bin/scp //è¿œç¨‹å¤åˆ¶æ–‡ä»¶ /usr/bin/sftp //è¿œç¨‹æ–‡ä»¶å…±äº« /usr/bin/slogin /usr/bin/ssh /usr/bin/ssh-add /usr/bin/ssh-agent /usr/bin/ssh-copy-id /usr/bin/ssh-keyscan openssl-server å‡ ä¸ªå¸¸ç”¨æ–‡ä»¶ /etc/rc.d/init.d/sshd /etc/ssh/sshd_config /etc/sysconfig/sshd 2ã€æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶/etc/ssh/sshd_config ä¸»è¦å‚æ•°è¯¦è§£" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/de4635f23183e3bb8d4c4d0a8391a01c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-26T09:09:26+08:00" />
<meta property="article:modified_time" content="2020-03-26T09:09:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OPENSSH è¯¦è§£</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ä¸€ã€ä»€ä¹ˆæ˜¯Openssh</p> 
<pre><code>OpenSSH æ˜¯ SSH ï¼ˆSecure SHellï¼‰ åè®®çš„å…è´¹å¼€æºå®ç°ã€‚SSHåè®®æ—å¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æ§åˆ¶ï¼Œ æˆ–åœ¨è®¡ç®—æœºä¹‹é—´ä¼ é€æ–‡ä»¶ã€‚è€Œå®ç°æ­¤åŠŸèƒ½çš„ä¼ ç»Ÿæ–¹å¼ï¼Œå¦‚telnet(ç»ˆç«¯ä»¿çœŸåè®®)ã€ rcp ftpã€ rloginã€rshéƒ½æ˜¯æä¸ºä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨æ˜æ–‡ä¼ é€å¯†ç ã€‚OpenSSHæä¾›äº†æœåŠ¡ç«¯åå°ç¨‹åºå’Œå®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨æ¥åŠ å¯†è¿œç¨‹æ§ä»¶å’Œæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®ï¼Œå¹¶ç”±æ­¤æ¥ä»£æ›¿åŸæ¥çš„ç±»ä¼¼æœåŠ¡ã€‚
</code></pre> 
<p>çŸ¥è¯†å»¶ä¼¸ï¼š<br> sshåè®®æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼š<br> v1:åŸºäºCRC-32 åšMACï¼Œä¸å®‰å…¨ï¼› ï¼ˆä¸€èˆ¬ç”¨äºå®ç°ä¸»æœºè®¤è¯ï¼‰<br> v2:åŸºäºåè®®åå•†é€‰æ‹©åŒæ–¹éƒ½æ”¯æŒçš„æœ€å®‰å…¨çš„MACæœºåˆ¶<br> åŸºäºDHåšå¯†é’¥äº¤æ¢ï¼ŒåŸºäºRSAæˆ–DSAå®ç°èº«ä»½è®¤è¯ï¼Œä»è€Œå®ç°æ— éœ€è¾“å…¥è´¦å·é¢è†œ<br> å®¢æˆ·ç«¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ç«¯çš„ä¸»æœºç§˜é’¥æ¥åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿç»§ç»­é€šä¿¡ï¼›<br> è®¤è¯æ–¹å¼ï¼š<br> 1ã€åŸºäºå£ä»¤çš„è®¤è¯<br> 2ã€åŸºäºå¯†é’¥çš„è®¤è¯</p> 
<p>äºŒã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨OpenSSH</p> 
<pre><code>ç”±äºä¼ ç»Ÿçš„telnetã€rcp ftpç­‰å·¥å…·æ˜¯æ˜æ–‡ä¼ è¾“æ•°æ®çš„ï¼Œå¯¹æ•°æ®å®‰å…¨æ€§å­˜åœ¨å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼Œè€ŒOpenSSHå¯ä»¥å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ä»è€Œå¤§å¤§æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚
</code></pre> 
<p>ä¸‰ã€OpenSSHç¨‹åºç®€ä»‹</p> 
<p>1ã€OpenSSHçš„åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸¤éƒ¨åˆ†</p> 
<pre><code>Clientsç«¯çš„é…ç½®æ–‡ä»¶ï¼š/etc/ssh/ssh_config
Serverç«¯çš„é…ç½®æ–‡ä»¶ï¼š/etc/ssh/sshd_config
Serverç«¯æœåŠ¡è„šæœ¬ï¼š/etc/rc.d/init.d/sshd

OpenSSHåœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤æ˜¯å®‰è£…å¹¶å¯åŠ¨çš„
</code></pre> 
<p>openssh ä¸»è¦çš„å…³é”®åŒ…æœ‰å››ä¸ª<br> openssh.x86_64 5.3p1-104.el6 //æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å…¬å…±ç»„ä»¶<br> openssh-askpass.x86_64 5.3p1-104.el6 //<br> openssh-clients.x86_64 5.3p1-104.el6 //å®¢æˆ·ç«¯å®‰è£…åŒ…<br> openssh-server.x86_64 5.3p1-104.el6 //æœåŠ¡ç«¯å®‰è£…åŒ…</p> 
<pre><code>openssl-clients  å‡ ä¸ªå¸¸ç”¨æ–‡ä»¶
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@1inux ssh<span class="token punctuation">]</span>     <span class="token comment"># rpm -ql openssh-clients</span>
/etc/ssh/ssh_config  //å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
/usr/bin/scp    //è¿œç¨‹å¤åˆ¶æ–‡ä»¶
/usr/bin/sftp    //è¿œç¨‹æ–‡ä»¶å…±äº«
/usr/bin/slogin
/usr/bin/ssh
/usr/bin/ssh-add
/usr/bin/ssh-agent
/usr/bin/ssh-copy-id
/usr/bin/ssh-keyscan
</code></pre> 
<pre><code>openssl-server å‡ ä¸ªå¸¸ç”¨æ–‡ä»¶
</code></pre> 
<pre><code class="prism language-bash">/etc/rc.d/init.d/sshd
/etc/ssh/sshd_config
/etc/sysconfig/sshd
</code></pre> 
<p>2ã€æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶/etc/ssh/sshd_config ä¸»è¦å‚æ•°è¯¦è§£</p> 
<p>æœåŠ¡ç«¯é…ç½®æ–‡ä»¶æ˜¯è®©åˆ«äººç™»é™†æ—¶ä½¿ç”¨çš„<br> æ³¨:é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨â€œ#â€æ³¨é‡Šæ‰çš„ä¸€èˆ¬å°±æ˜¯ä½¿ç”¨é»˜è®¤<br> #Port 22 //é»˜è®¤ç«¯å£å·ï¼Œä¸ºäº†å…¶å®‰å…¨ä¸€èˆ¬è¦æ›´æ”¹ä¸ºå…¶ä»–ç«¯å£<br> #AddressFamily any //è¯´æ˜è¦ç›‘å¬ä»»æ„åœ°å€<br> #ListenAddress 0.0.0.0 //ç›‘å¬æœ¬æœºæ‰€æœ‰IPV4çš„ip<br> #ListenAddress :: //ç›‘å¬æœ¬æœºæ‰€æœ‰çš„IPV6çš„åœ°å€<br> Protocol 2 ç›‘å¬çš„åè®®ç‰ˆæœ¬<br> # HostKey for protocol version 1 //è¯´æ˜keyçš„åè®®ç‰ˆæœ¬<br> SyslogFacility AUTHPRIV //ä½¿ç”¨AUTHPRIV è®°å½•æ—¥å¿—<br> #LogLevel INFO //logæ—¥å¿—çº§åˆ«</p> 
<pre><code>#Authentication:            //è®¤è¯ç›¸å…³
#LoginGraceTime 2m    //ç™»é™†å®½é™æ—¶é•¿  é»˜è®¤2åˆ†é’Ÿä¸ç™»å½•è‡ªåŠ¨å…³é—­
#PermitRootLogin yes    //æ˜¯å¦æ”¯æŒç®¡ç†å‘˜ç›´æ¥ç™»é™†
#StrictModes yes    //æ˜¯å¦ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ ï¼ˆä¸¥æ ¼æ£€æŸ¥ç”¨æˆ·çš„æŸäº›ç›¸å…³ä¿¡æ¯ï¼‰
#MaxAuthTries 6        //æœ€å¤§å°è¯•æ¬¡æ•°  ï¼ˆ6æ¬¡ä»¥åç»ˆç«¯æ–­å¼€ï¼‰
#MaxSessions 10        //æœ€å¤§å¹¶å‘å…è®¸é“¾æ¥æ•° ï¼ˆè¶…è¿‡ å°†æ‹’ç»ï¼‰
#RSAAuthentication yes    //æ˜¯å¦æ”¯æŒRSAå¯†é’¥è®¤è¯
#PubkeyAuthentication yes    //æ˜¯å¦æ”¯æŒå…¬é’¥è®¤è¯
#AuthorizedKeysFile     .ssh/authorized_keys  //é»˜è®¤ä¿å­˜å£ä»¤çš„æ–‡ä»¶
#PermitEmptyPasswords no        //æ˜¯å¦æ”¯æŒç©ºå¯†ç ç™»é™†
PasswordAuthentication yes
            
UsePAM yes //æ˜¯å¦ä½¿ç”¨PAM è®¤è¯ï¼ˆ æ˜¯ä¸€ç§ç»Ÿä¸€è®¤è¯æ¡†æ¶ï¼‰
X11Forwarding yes     //æ˜¯å¦è½¬å‘å›¾å½¢ç•Œé¢è¯·æ±‚ (å¯ä»¥æ‰“å¼€è¿œç¨‹æœåŠ¡å™¨å›¾å½¢ç•Œé¢)
Subsystem       sftp    /usr/libexec/openssh/sftp-server  
#UseDNS yes        //æ˜¯å¦å…è®¸DNSåè§£  æ¯”è¾ƒæµªè´¹æ—¶é—´ä¸€èˆ¬æ›´æ”¹ä¸ºno
                /etc/ssh/ssh_known_hosts  //ä¿å­˜å·²ç»è®¤å¯ä¸»æœºçš„æ–‡ä»¶
</code></pre> 
<p>3ã€å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶/etc/ssh/ssh_config ä¸»è¦å‚æ•°è¯¦è§£</p> 
<p>å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶æ—¶ç™»é™†åˆ«äººçš„sshä½¿ç”¨çš„<br> #Host * //è¡¨ç¤ºè¿æ¥æ‰€æœ‰ä¸»æœº<br> #Port 22 //é»˜è®¤è¿æ¥ç«¯å£<br> #Cipher 3des //åŠ å¯†æ—¶ä½¿ç”¨çš„åŠ å¯†æœºåˆ¶<br> #StrictHostKeyChecking ask //ä¸¥æ ¼çš„ä¸»æœºç§˜é’¥æ£€æŸ¥ å³ç¬¬ä¸€æ¬¡è¿æ¥æ—¶æ˜¯å¦è¯¢é—®</p> 
<p>å››ã€å®¢æˆ·ç«¯sshçš„ä½¿ç”¨</p> 
<pre><code>1ã€sshçš„åŸºæœ¬è¯­æ³•
    ssh [OPTIONS] [user]@server [COMMAND]
                
        -l user: ä»¥æŒ‡å®šç”¨æˆ·èº«ä»½è¿æ¥è‡³æœåŠ¡å™¨ï¼›é»˜è®¤ä½¿ç”¨æœ¬åœ°ç”¨æˆ·ä¸ºè¿œç¨‹ç™»å½•æ—¶çš„ç”¨æˆ·ï¼›
            ssh user@server
            ssh -l user server
</code></pre> 
<p>[root@1inux ~]# ssh centos@172.16.66.81<br> The authenticity of host â€˜172.16.66.81 (172.16.66.81)â€™ canâ€™t be established.<br> RSA key fingerprint is d6:3b:33:71:32:69:7a:dd:47:c2:49:03:ec:03:a1:5e.<br> Are you sure you want to continue connecting (yes/no)?<br> [root@1inux ~]# ssh -l centos 172.16.66.81<br> The authenticity of host â€˜172.16.66.81 (172.16.66.81)â€™ canâ€™t be established.<br> RSA key fingerprint is d6:3b:33:71:32:69:7a:dd:47:c2:49:03:ec:03:a1:5e.<br> Are you sure you want to continue connecting (yes/no)?</p> 
<pre><code>        -p PORTï¼šæŒ‡æ˜è¦è¿æ¥çš„ç«¯å£ï¼š
</code></pre> 
<p>[root@1inux ~]# ssh -p 22 -l centos 172.16.66.81<br> The authenticity of host â€˜172.16.66.81 (172.16.66.81)â€™ canâ€™t be established.<br> RSA key fingerprint is d6:3b:33:71:32:69:7a:dd:47:c2:49:03:ec:03:a1:5e.<br> Are you sure you want to continue connecting (yes/no)?</p> 
<pre><code>        -X ï¼šå¯ç”¨X11Forwarding,å³è½¬å‘Xç•Œé¢çš„è¯·æ±‚ï¼›
        -xï¼š ç¦ç”¨ï¼›
        -Y:  å¯ç”¨ä¿¡ä»»çš„X11Forwarding

2ã€ssh åŸºäºç§˜é’¥çš„è®¤è¯
    2.1ã€ssh-keygenè¯­æ³•ï¼š
       ssh-keygen [OPTIONS]
        
        -t {rsa|dsa} å¯†é’¥ç±»å‹ ä¸€èˆ¬ä½¿ç”¨rsa
        -b # æŒ‡æ˜å¯†é’¥é•¿åº¦
        -f /PATH/TO/OUTPUT_KEYFILE  æŒ‡æ˜å¯†é’¥æ–‡ä»¶
        -P '' ï¼šæŒ‡æ˜åŠ å¯†å¯†é’¥çš„å¯†ç ï¼Œè¡¨ç¤ºä½¿ç”¨ç©ºå¯†ç 
</code></pre> 
<h3><a id="root1inux__sshkeygen_t_rsa____
Generating_publicprivate_rsa_key_pair
Enter_file_in_which_to_save_the_key_rootsshid_rsa_rootsshid_90__
Enter_passphrase_empty_for_no_passphrase___________OK_
Enter_same_passphrase_again_
Your_identification_has_been_saved_in_rootsshid_90________
Your_public_key_has_been_saved_in_rootsshid_90pub________
The_key_fingerprint_is
7a17b3e76f54a13023627c0437105208_root1inux
The_keys_randomart_image_is
_RSA_2048
___E_______
_____o____
_______o____
_______________
________S_o_____
______________
________o____
_________o____
____________o__

root1inux__
root1inux__ls_ssh
id_90__id_90pub__known_hosts
root1inux__154"></a>[root@1inux ~]# ssh-keygen -t rsa //ç”Ÿæˆå¯†é’¥å¯¹<br> Generating public/private rsa key pair.<br> Enter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/id_90 //å®šä¹‰ä¿å­˜çš„å¯†é’¥æ–‡ä»¶å<br> Enter passphrase (empty for no passphrase): //è¦æ±‚å¯¹ç”Ÿæˆçš„å¯†é’¥å¯¹åŠ å¯†ï¼Œä¹Ÿå¯ä»¥ä¸åŠ å¯† è¾“å…¥ä¸¤æ¬¡å›è½¦å°±OK<br> Enter same passphrase again:<br> Your identification has been saved in /root/.ssh/id_90. //è¯´æ˜å·²ç»ç”Ÿæˆå¯†é’¥<br> Your public key has been saved in /root/.ssh/id_90.pub. //è¯´æ˜å·²ç»ç”Ÿæˆå…¬é’¥<br> The key fingerprint is:<br> 7a:17:b3:e7:6f:54:a1:30:23:62:7c:04:37:10:52:08 root@1inux<br> The keyâ€™s randomart image is:<br> Â±-[ RSA 2048]----+<br> | Eâ€¦+==+ |<br> | â€¦+.o.+ . |<br> | . o . + . .|<br> | . .|<br> | S o . |<br> | . + . |<br> | . . o â€¦ |<br> | . . o . |<br> | .o. |<br> Â±----------------+<br> [root@1inux ~]#<br> [root@1inux ~]# ls .ssh/<br> id_90 id_90.pub known_hosts<br> [root@1inux ~]#</h3> 
<p>ä¹Ÿå¯ä»¥æŒ‡æ˜ç§˜é’¥è·¯å¾„ åŠå¯†ç </p> 
<p>[root@1inux .ssh]# ssh-keygen -t rsa -f /root/.ssh/id_rsa -P â€˜â€™ //ç»æµ‹è¯• åå­—å¿…é¡»ä¸ºid_rsa<br> Generating public/private rsa key pair.<br> Your identification has been saved in /root/.ssh/id_rsa.<br> Your public key has been saved in /root/.ssh/id_rsa.pub.<br> The key fingerprint is:<br> 33:c3:f8:f3:2c:ed:88:cc:db:7a:97:5f:d0ğŸ‡©ğŸ‡ªce:d9 root@1inux<br> The keyâ€™s randomart image is:<br> Â±-[ RSA 2048]----+<br> | |<br> | |<br> | |<br> | o . |<br> | . S . . |<br> | . + o . |<br> | o. . o .|<br> | o oo=+ . oo|<br> | *+o++â€¦ .E|<br> Â±----------------+<br> [root@1inux ~]# ls .ssh/<br> id_rsa id_rsa.pub id_www id_www.pub known_hosts</p> 
<pre><code>    2.2ã€æŠŠå…¬é’¥éƒ¨åˆ†å¤åˆ¶åˆ°è¦ç™»é™†è¿œç¨‹ä¸»æœºçš„ç‰¹å®šç”¨æˆ·ï¼ˆå¯ä¸åŒäºæœ¬åœ°ç”¨æˆ·ï¼‰çš„å®¶ç›®å½•ä¸‹ï¼Œè¿½åŠ ä¿å­˜è‡³.ssh ç›®å½•ä¸­çš„authorized_keysæ–‡ä»¶ä¸­ï¼›
</code></pre> 
<p>ssh-copy-id -i /PATH/TO/PUBKEY_FILE [user]@server<br> //ä½¿ç”¨æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨å°†å…¬é’¥å¤åˆ¶åˆ°ç›®æ ‡ä¸»æœºæŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•ä¸‹çš„.ssh/authorized_keysæ–‡ä»¶ä¸­</p> 
<p>[root@1inux ~]# ssh-copy-id -i /root/.ssh/id_rsa.pub henan@172.16.66.81<br> henan@172.16.66.81â€™s password:<br> Now try logging into the machine, with â€œssh â€˜henan@172.16.66.81â€™â€, and check in:<br> .ssh/authorized_keys<br> to make sure we havenâ€™t added extra keys that you werenâ€™t expecting.</p> 
<pre><code>    2.3ã€éªŒè¯ï¼š
</code></pre> 
<p>[root@1inux .ssh]# ssh lfs@172.16.66.81<br> Last login: Wed Apr 8 14:31:52 2015 from 172.16.66.90<br> [lfs@1inux ~]$ //å¯ä»¥çœ‹åˆ°å·²ç»ç™»å½•æˆåŠŸ<br> [henan@1inux ~]$ whoami<br> henan<br> [henan@1inux ~]$ ifconfig | grep â€œ172.16.66â€<br> inet addr:172.16.66.81 Bcast:172.16.255.255 Mask:255.255.0.0</p> 
<p>åŸºäºå¯†é’¥çš„å‘½ä»¤æ€»ç»“</p> 
<p>1ã€[root@1inux .ssh]# ssh-keygen -t rsa -f /root/.ssh/id_rsa -P â€˜â€™<br> 2ã€[root@1inux ~]# ssh-copy-id -i /root/.ssh/id_rsa.pub henan@172.16.66.81<br> 3ã€ssh lfs@172.16.66.81</p> 
<pre><code>    2.4ã€é€šè¿‡sshç›´æ¥æ‰§è¡Œå‘½ä»¤
</code></pre> 
<p>[root@1inux ~]# ssh -l henan 172.16.66.81 date //ç”±äºæ­¤ç”¨äºå·²ç»åŸºäºå¯†é’¥è®¤è¯æ‰€ä»¥æ²¡æœ‰è¦æ±‚è¾“å…¥å¯†ç <br> Wed Apr 8 15:01:15 CST 2015</p> 
<p>äº”ã€scpè¿œç¨‹å¤åˆ¶å·¥å…·çš„ä½¿ç”¨ç®€ä»‹<br> è¯­æ³•ï¼š<br> scp [OPTIONS] SRCâ€¦DEST<br> å¸¸ç”¨é€‰é¡¹ï¼š</p> 
<pre><code>    -r: é€’å½’å¤åˆ¶ï¼Œå¤åˆ¶ç›®å½•åŠå†…éƒ¨æ–‡ä»¶æ—¶ä½¿ç”¨ï¼›
    -p: ä¿å­˜æºæ–‡ä»¶å…ƒæ•°æ®ä¿¡æ¯ä¸­çš„å±ä¸»ã€å±ç»„åŠæƒé™ï¼›
    -q: é™é»˜æ¨¡å¼
    -P PORT: æŒ‡æ˜è¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨çš„ç«¯å£ï¼›

ä¸¤ç§æ¨¡å¼ï¼š
    PUSH: scp [OPTIONS] /PATH/FROM/SOMEFILE ... user@server:/PATH/TO/DEST   

                   //å¤åˆ¶æœ¬åœ°æ–‡ä»¶è‡³è¿œç¨‹ä¸»æœº ï¼ˆä½†è¿œç¨‹ç›®å½•ä¸€å®šè¦æœ‰å†™æƒé™ï¼‰
    
    PULL: SCP [OPTIONS] user@server:/PATH/FROM/SOMEFILE /PATH/TO/DEST    

                  //è¿œç¨‹ç›®æ ‡ä¸»æœºæ–‡ä»¶è‡³æœ¬åœ° 
</code></pre> 
<p>eg1:å¤åˆ¶å½“å‰ä¸»æœºä¸Šçš„/etc/ssh/sshd_configè‡³172.16.66.90ä¸»æœºçš„/tmp/aaç›®å½•ä¸‹</p> 
<p>[root@1inux ~]# scp -p /etc/ssh/sshd_config henan@172.16.66.90:/root<br> henan@172.16.66.90â€™s password:<br> sshd_config 100% 3879 3.8KB/s 00:00</p> 
<p>eg2ï¼šå¤åˆ¶è¿œç¨‹ä¸»æœº/etc/fstabè‡³å½“å‰ä¸»æœºå½“å‰ç›®å½•ä¸‹</p> 
<p>[root@1inux ~]# ls<br> anaconda-ks.cfg Documents grub.conf install.log Music Public Videos<br> Desktop Downloads henan@172.16.66.90 install.log.syslog Pictures Templates<br> [root@1inux ~]# scp root@172.16.66.90:/etc/fstab ./<br> root@172.16.66.90â€™s password:<br> fstab 100% 921 0.9KB/s 00:00<br> [root@1inux ~]# ls<br> anaconda-ks.cfg Documents fstab henan@172.16.66.90 install.log.syslog Pictures Templates<br> Desktop Downloads grub.conf install.log Music Public Videos</p> 
<p>å…­ã€sftpçš„ä½¿ç”¨<br> è¦ä½¿ç”¨sftpéœ€è¦ç¼–è¾‘/etc/ssh/sshd_config å¼€å¯Subsystem å³ï¼š<br> Subsystem sftp /usr/libexec/openssh/sftp-server</p> 
<pre><code>è¯­æ³•ï¼š
</code></pre> 
<p>sftp [USER]@server</p> 
<pre><code>å¸¸ç”¨å‘½ä»¤ï¼šput get
</code></pre> 
<p>egï¼š</p> 
<h2><a id="root1inux__sftp_root172166690
Connecting_to_172166690
root172166690s_password_________
sftp_help____________help
Available_commands
bye________________________________Quit_sftp
cd_path____________________________Change_remote_directory_to_path
chgrp_grp_path_____________________Change_group_of_file_path_to_grp
chmod_mode_path____________________Change_permissions_of_file_path_to_mode
chown_own_path_____________________Change_owner_of_file_path_to_own
df_hi_path____________________Display_statistics_for_current_directory_or
___________________________________filesystem_containing_path
exit_______________________________Quit_sftp
get_P_remotepath_localpath__Download_file
help_______________________________Display_this_help_text
lcd_path___________________________Change_local_directory_to_path
lls_lsoptions_path____________Display_local_directory_listing
lmkdir_path________________________Create_local_directory
ln_oldpath_newpath_________________Symlink_remote_file
lpwd_______________________________Print_local_working_directory
ls_1aflnrSt_path______________Display_remote_directory_listing
lumask_umask_______________________Set_local_umask_to_umask
mkdir_path_________________________Create_remote_directory
progress___________________________Toggle_display_of_progress_meter
put_P_localpath_remotepath__Upload_file
pwd________________________________Display_remote_working_directory
quit_______________________________Quit_sftp
rename_oldpath_newpath_____________Rename_remote_file
rm_path____________________________Delete_remote_file
rmdir_path_________________________Remove_remote_directory
symlink_oldpath_newpath____________Symlink_remote_file
version____________________________Show_SFTP_version
command___________________________Execute_command_in_local_shell
__________________________________Escape_to_local_shell
__________________________________Synonym_for_help_295"></a>[root@1inux ~]# sftp root@172.16.66.90<br> Connecting to 172.16.66.90â€¦<br> root@172.16.66.90â€™s password: //è¾“å…¥å¯†ç <br> sftp&gt; help //å¯ä»¥ä½¿ç”¨helpæŸ¥çœ‹å…¶æ”¯æŒçš„å‘½ä»¤<br> Available commands:<br> bye Quit sftp<br> cd path Change remote directory to â€˜pathâ€™<br> chgrp grp path Change group of file â€˜pathâ€™ to â€˜grpâ€™<br> chmod mode path Change permissions of file â€˜pathâ€™ to â€˜modeâ€™<br> chown own path Change owner of file â€˜pathâ€™ to â€˜ownâ€™<br> df [-hi] [path] Display statistics for current directory or<br> filesystem containing â€˜pathâ€™<br> exit Quit sftp<br> get [-P] remote-path [local-path] Download file<br> help Display this help text<br> lcd path Change local directory to â€˜pathâ€™<br> lls [ls-options [path]] Display local directory listing<br> lmkdir path Create local directory<br> ln oldpath newpath Symlink remote file<br> lpwd Print local working directory<br> ls [-1aflnrSt] [path] Display remote directory listing<br> lumask umask Set local umask to â€˜umaskâ€™<br> mkdir path Create remote directory<br> progress Toggle display of progress meter<br> put [-P] local-path [remote-path] Upload file<br> pwd Display remote working directory<br> quit Quit sftp<br> rename oldpath newpath Rename remote file<br> rm path Delete remote file<br> rmdir path Remove remote directory<br> symlink oldpath newpath Symlink remote file<br> version Show SFTP version<br> !command Execute â€˜commandâ€™ in local shell<br> ! Escape to local shell<br> ? Synonym for help</h2> 
<p>ä¸ƒã€å¢å¼ºæœåŠ¡ç«¯sshdé…ç½®æŒ‡å—<br> 1ã€ä¸è¦ä½¿ç”¨é»˜è®¤ç«¯å£ï¼›ï¼ˆä¿®æ”¹é»˜è®¤ç«¯å£ä¸ºå…¶ä»–ç«¯å£ï¼‰<br> é…ç½®æ–‡ä»¶ï¼š/etc/ssh/sshd_config<br> Port 22<br> service sshd restart //ä¿®æ”¹åéœ€è¦é‡å¯æœåŠ¡<br> 2ã€ä¸è¦ä½¿ç”¨v1ç‰ˆæœ¬åè®®ï¼š<br> Protocol 2<br> 3ã€é™åˆ¶å¯ç™»é™†çš„ç”¨æˆ· {éœ€è¦æ·»åŠ }<br> AllowUsersï¼šå…è®¸ç™»é™†çš„ç”¨æˆ·ç™½åå• (å¤šä¸ªç”¨æˆ·ä½¿ç”¨ç©ºæ ¼éš”å¼€)<br> AllowGroups:å…è®¸ç™»é™†çš„ç»„çš„ç™½åå•<br> DenyUsers<br> DenyGroups<br> /etc/ssh/sshd_config</p> 
<pre><code>          # service sshd reload 
          ==ã€‹ è·å–é…ç½®æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼›ã€ man sshd_conifg ã€‘
    4ã€è®¾å®šç©ºé—²ä¼šè¯è¶…æ—¶æ—¶é•¿ï¼š
    5ã€åˆ©ç”¨é˜²ç«å¢™è®¾ç½®sshè®¿é—®ç­–ç•¥ï¼š
        é™å®šsshæœåŠ¡ä»…å…è®¸***æœåŠ¡å™¨åˆ†é…æœ‰é™çš„åœ°å€æ®µå†…çš„ä¸»æœºè®¿é—®                
    6ã€ä»…ç›‘å¬ç‰¹å®šçš„IPåœ°å€ï¼š            
    7ã€ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥ï¼š                
</code></pre> 
<p>[root@1inux ssh]# tr -dc A-Za-z0-9 &lt; /dev/urandom | head -c 30 | xargs<br> Qe6zOmB2sBNpEONVcKhWS8T4bVrcb0</p> 
<pre><code>    8ã€ä½¿ç”¨åŸºäºå¯†é’¥çš„è®¤è¯ï¼›            
    9ã€ç¦æ­¢ä½¿ç”¨ç©ºå¯†ç             
    10ã€ç¦æ­¢rootç›´æ¥ç™»é™†
                PermitRootLogin no 
    11ã€é™åˆ¶sshçš„è®¿é—®é¢‘åº¦            
    12ã€åšå¥½æ—¥å¿—ã€ç»å¸¸åšæ—¥å¿—åˆ†æ
        /var/log/secure
</code></pre> 
<p>https://www.cnblogs.com/RXDXB/p/11672127.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9686c775a5b1b9db3540fdb18c29270f/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Django error</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/edea360634a8c06a956191b8a178b1c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ä¿®å¤LandSat7 ETM SLC&#43;offç¼ºå¤±æ¡å¸¦</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>