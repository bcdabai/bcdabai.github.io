<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言实现扫雷游戏(超详细讲解&#43;全部源码) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言实现扫雷游戏(超详细讲解&#43;全部源码)" />
<meta property="og:description" content="电子信息 工科男
一点一点努力！
文章目录 前言一、游戏介绍二、游戏设计思路二、具体步骤1.创建test.c和game.c源文件以及 game.h头文件2.创建菜单3.创建雷盘4.初始化雷盘5.打印雷盘6.布雷7.排雷 三、程序源码 前言 本文使用C语言实现扫雷游戏
一、游戏介绍 扫雷游戏大家都不陌生，玩家翻开一个格子，如果是雷则直接游戏结束，如果不是雷则显示周围8格包含雷的个数，通过玩家逐渐推理出所有非雷的位置，最终取得胜利
二、游戏设计思路 我们定义两个数组，一个数组(mine)用来存放布置好的雷的信息，一个数组(show)用来存放排查出类雷的信息（用于和玩家交互），通过修改show的信息达到排雷的目的。
如上图可知:在计算边界1周围雷数时，数组会越界，所以为了防止这个现象，我们可以在周围多留一圈，例如如果我们要玩9x9的，那就定义11x11大小的数组
二、具体步骤 1.创建test.c和game.c源文件以及 game.h头文件 注：各文件作用解释如下
1：test.c代码为整个程序的主题实现逻辑
2：game.c代码为游戏函数的定义
3：game.h代码为游戏函数的声明
2.创建菜单 在test.c文件中创建菜单函数。
代码如下（示例）：
void menu() { printf(&#34;*******************************\n&#34;); printf(&#34;************ 1. play **********\n&#34;); printf(&#34;************ 0. exit **********\n&#34;); printf(&#34;*******************************\n&#34;); } 注：玩家选择1进入游戏，0退出游戏
3.创建雷盘 mine数组雷盘示例如下：
show数组雷盘示例如下：
代码如下：
#define ROW 9 #define COL 9 #define ROWS ROW&#43;2 #define COLS COL&#43;2 //1：雷盘创建，mine数组用来存放雷，show数组用来显示排雷 char mine[ROWS][COLS] = { 0 }; char show[ROWS][COLS] = { 0 }; 4.初始化雷盘 两个数组的初始化" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c7196ef0ce7d4bcd25433d5226c1c784/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-14T21:36:25+08:00" />
<meta property="article:modified_time" content="2022-11-14T21:36:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言实现扫雷游戏(超详细讲解&#43;全部源码)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>电子信息 工科男<br> 一点一点努力！</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_8" rel="nofollow">前言</a></li><li><a href="#_11" rel="nofollow">一、游戏介绍</a></li><li><a href="#_23" rel="nofollow">二、游戏设计思路</a></li><li><a href="#_30" rel="nofollow">二、具体步骤</a></li><li><ul><li><a href="#1testcgamec_gameh_32" rel="nofollow">1.创建test.c和game.c源文件以及 game.h头文件</a></li><li><a href="#2_39" rel="nofollow">2.创建菜单</a></li><li><a href="#3_54" rel="nofollow">3.创建雷盘</a></li><li><a href="#4_75" rel="nofollow">4.初始化雷盘</a></li><li><a href="#5_97" rel="nofollow">5.打印雷盘</a></li><li><a href="#6_125" rel="nofollow">6.布雷</a></li><li><a href="#7_156" rel="nofollow">7.排雷</a></li></ul> 
  </li><li><a href="#_282" rel="nofollow">三、程序源码</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_8"></a>前言</h2> 
<blockquote> 
 <p>本文使用C语言实现扫雷游戏</p> 
</blockquote> 
<h2><a id="_11"></a>一、游戏介绍</h2> 
<p>扫雷游戏大家都不陌生，玩家翻开一个格子，如果是雷则直接游戏结束，如果不是雷则显示周围8格包含雷的个数，通过玩家逐渐推理出所有非雷的位置，最终取得胜利<br> <img src="https://images2.imgbox.com/b1/cc/Vub7ZG3a_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_23"></a>二、游戏设计思路</h2> 
<blockquote> 
 <p>我们定义两个数组，一个数组(mine)用来存放布置好的雷的信息，一个数组(show)用来存放排查出类雷的信息（用于和玩家交互），通过修改show的信息达到排雷的目的。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b8/32/HhWfCeGv_o.jpg" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>如上图可知:在计算边界1周围雷数时，数组会越界，所以为了防止这个现象，我们可以在周围多留一圈，例如如果我们要玩9x9的，那就定义11x11大小的数组</p> 
</blockquote> 
<h2><a id="_30"></a>二、具体步骤</h2> 
<h3><a id="1testcgamec_gameh_32"></a>1.创建test.c和game.c源文件以及 game.h头文件</h3> 
<p>注：各文件作用解释如下<br> 1：test.c代码为整个程序的主题实现逻辑<br> 2：game.c代码为游戏函数的定义<br> 3：game.h代码为游戏函数的声明</p> 
<h3><a id="2_39"></a>2.创建菜单</h3> 
<p>在test.c文件中创建菜单函数。<br> 代码如下（示例）：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*******************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"************ 1. play **********\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"************ 0. exit **********\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*******************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>注：玩家选择1进入游戏，0退出游戏</p> 
<h3><a id="3_54"></a>3.创建雷盘</h3> 
<p>mine数组雷盘示例如下：<br> <img src="https://images2.imgbox.com/b9/ec/5FQW13AN_o.jpg" alt="在这里插入图片描述"><br> show数组雷盘示例如下：<br> <img src="https://images2.imgbox.com/17/3e/964eU5HE_o.jpg" alt="在这里插入图片描述"></p> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ROW</span> <span class="token expression"><span class="token number">9</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COL</span> <span class="token expression"><span class="token number">9</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ROWS</span> <span class="token expression">ROW<span class="token operator">+</span><span class="token number">2</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COLS</span> <span class="token expression">COL<span class="token operator">+</span><span class="token number">2</span></span></span>

<span class="token comment">//1：雷盘创建，mine数组用来存放雷，show数组用来显示排雷</span>
<span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4_75"></a>4.初始化雷盘</h3> 
<blockquote> 
 <p>两个数组的初始化<br> mine数组初始化为’0’，布置雷的时候，改成’1’<br> show数组初始化为‘*’，排除雷后，具体位置改成数字字符</p> 
</blockquote> 
<p>代码如下:</p> 
<pre><code class="prism language-c"><span class="token comment">雷盘初始化。初始化是参数要为11*11，防止数组越界，打印只需要9*9的就行了</span>
<span class="token keyword">void</span> <span class="token function">init_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> rows<span class="token punctuation">,</span> <span class="token keyword">int</span> cols<span class="token punctuation">,</span> <span class="token keyword">char</span> set<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rows<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> set<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5_97"></a>5.打印雷盘</h3> 
<blockquote> 
 <p>由上图雷盘示例可见，为了便于玩家输入排雷坐标，需要在打印雷盘信息前打印行号和列号，同时只需要打印9x9的雷盘大小即可。</p> 
</blockquote> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token comment">//打印9*9的就行了</span>
<span class="token keyword">void</span> <span class="token function">display_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//打印列号</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> row<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//打印行号</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c "</span><span class="token punctuation">,</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_125"></a>6.布雷</h3> 
<blockquote> 
 <p><strong>布雷需要考虑三个因素</strong><br> 1：随机生成两个数，横坐标x,纵坐标y<br> 2：该坐标是否布过雷<br> 3：由于布雷是在11x11(0-10)数组中间9x9(1-9)的格子上布置的，故调用rand()函数对行和列取余生成的是0-10的数字，故还需加一才能时期布置在目标的位置</p> 
</blockquote> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token comment">//布雷</span>
<span class="token comment">//1:要随机生成两个数，横坐标x,纵坐标y</span>
<span class="token comment">//2:该位置是否被布过雷</span>
<span class="token keyword">void</span> <span class="token function">set_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> count <span class="token operator">=</span> EASY_COUNT<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>count<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//取余生成的数是0-row-1的</span>
		<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> col <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//取余生成的数是0-row-1的</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'1'</span><span class="token punctuation">;</span>
			count<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注：生成随机数需要用到rand()函数，但是多次运行代码会发现rand()函数会生成的随机数一样。故需要在使用前调用前采用如下代码，同时需要引用头文件#include &lt;stdlib.h&gt;和#include &lt;time.h&gt;</p> 
<h3><a id="7_156"></a>7.排雷</h3> 
<blockquote> 
 <p><strong>排雷需要考虑五个问题：</strong><br> 1:输入坐标是否合法<br> 2:输入坐标是否排过雷<br> 3:如果输入坐标四周都不是雷，且周围的格子四周也没有雷怎么办<br> 4：如何显示雷的数量<br> 5:排雷结束标志,全部排完，或者踩雷</p> 
</blockquote> 
<blockquote> 
 <p><strong>对于问题三:</strong><br> 我们采用<strong>递归思想</strong>，如果输入坐标(x,y)周围没有雷，那么就将其改成空格，然后再用同样的方法向四周扩散（x从x-1 ~ x+1）（y从y-1~y+1），看其周围的8个位置附近有雷，没有雷同样也改为空格，有雷则显示周围雷的数量。</p> 
</blockquote> 
<blockquote> 
 <p><strong>递归的两个必要条件</strong><br> 1：存在限制条件，当满足这个条件的时候，递归将不在继续，本处递归的限制条件是：<strong>只对</strong>*<strong>进行递归，防止死循环</strong>即if (show[i][j] == '<em>')才进行递归<br> 2：每次递归调用以后越来越接近这个限制条件，本处由于向四周扩散，故最后一定会碰到show[i][j] ！= '</em>'的地方</p> 
</blockquote> 
<blockquote> 
 <p><strong>对于问题四：</strong><br> 我们需要一个函数获(x,y)周围雷的数量，由于雷的数字为1，但是如果单纯的将周围数字加起来确实整形十进制数字，而数组中存放的是字符型，故需要将其转换。<br> 根据ASCII表可知，字符数字1和数子0的十进制相差1，即’1’ - ‘0’=1，故如果想要得到字符’1’,则是十进制相减的结果加上字符0即可</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ce/27/CHe275WI_o.jpg" alt="ASCII表"><br> 代码如下：</p> 
<pre><code class="prism language-c"><span class="token comment">//获取雷数</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">get_mine_count</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//递归展开</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">expand</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> win<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> ROW <span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;=</span>  COL<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token function">get_mine_count</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//如果(x,y)坐标四周没有雷,将其改为空格，并且向四周扩散</span>
				show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">' '</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token comment">//只对*进行递归，防止死循环</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'*'</span><span class="token punctuation">)</span>
						<span class="token punctuation">{<!-- --></span>
							<span class="token function">expand</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> show<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span>win<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//四周有雷显示雷数</span>
		<span class="token punctuation">{<!-- --></span>
			show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>win<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//排雷</span>
<span class="token comment">//1:输入坐标是否合法</span>
<span class="token comment">//2:输入坐标是否排过雷</span>

<span class="token comment">//3:排雷结束标志,全部排完，或者踩雷</span>
<span class="token keyword">void</span> <span class="token function">find_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> win <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>win <span class="token operator">&lt;</span> row <span class="token operator">*</span> col <span class="token operator">-</span> EASY_COUNT<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"------------------------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要排雷的坐标:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> row <span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;=</span> col<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//判断是否排过雷</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'*'</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//踩雷了</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"很遗憾，你被雷裤衩子都炸没了\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//Sleep(1000);</span>
					<span class="token comment">//system("cls");</span>
					<span class="token function">display_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//int count = get_mine_count(mine, x, y);</span>
					<span class="token comment">//show[x][y] = count + '0';</span>
					<span class="token function">expand</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> show<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">&amp;</span>win<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">display_board</span><span class="token punctuation">(</span>show<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//win++;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"该位置已经排过雷了，请重新输入\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"坐标非法，请重新输入\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>win <span class="token operator">==</span> row <span class="token operator">*</span> col <span class="token operator">-</span> EASY_COUNT<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"恭喜你排雷成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">display_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_282"></a>三、程序源码</h2> 
<blockquote> 
 <p>test.c中代码</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"game.h"</span></span>


<span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*********1. play ***********\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*********0. play ***********\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//1：雷盘创建，mine数组用来存放雷，show数组用来显示排雷</span>
	<span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">//2：雷盘初始化</span>
	<span class="token comment">//mine数组初始化为0其中1为雷</span>
	<span class="token comment">//show数组初始化为*</span>
	<span class="token function">init_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROWS<span class="token punctuation">,</span> COLS<span class="token punctuation">,</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">init_board</span><span class="token punctuation">(</span>show<span class="token punctuation">,</span> ROWS<span class="token punctuation">,</span> COLS<span class="token punctuation">,</span> <span class="token char">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//3：雷盘打印</span>
	<span class="token function">display_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">display_board</span><span class="token punctuation">(</span>show<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//4：布雷,雷要布在9*9的格子里</span>
	<span class="token function">set_mine</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//display_board(mine, ROW, COL);</span>

	<span class="token comment">//排雷</span>
	<span class="token function">find_mine</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> show<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请选择:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
			<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"退出游戏\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"输入错误，请重新输入\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>game.c中代码</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"game.h"</span></span>

<span class="token comment">雷盘初始化。初始化是参数要为11*11，防止数组越界，打印只需要9*9的就行了</span>
<span class="token keyword">void</span> <span class="token function">init_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> rows<span class="token punctuation">,</span> <span class="token keyword">int</span> cols<span class="token punctuation">,</span> <span class="token keyword">char</span> set<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rows<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cols<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> set<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//打印9*9的就行了</span>
<span class="token keyword">void</span> <span class="token function">display_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">//打印列号</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> row<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//打印行号</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c "</span><span class="token punctuation">,</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//布雷</span>
<span class="token comment">//1:要随机生成两个数，横坐标x,纵坐标y</span>
<span class="token comment">//2:该位置是否被布过雷</span>
<span class="token keyword">void</span> <span class="token function">set_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> count <span class="token operator">=</span> EASY_COUNT<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>count<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//取余生成的数是0-row-1的</span>
		<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> col <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//取余生成的数是0-row-1的</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			board<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'1'</span><span class="token punctuation">;</span>
			count<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token comment">//获取雷数</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">get_mine_count</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span>
		mine<span class="token punctuation">[</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//递归展开</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">expand</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span> win<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> ROW <span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;=</span>  COL<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token function">get_mine_count</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//如果(x,y)坐标四周没有雷,将其改为空格，并且向四周扩散</span>
				show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">' '</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token comment">//只对*进行递归，防止死循环</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'*'</span><span class="token punctuation">)</span>
						<span class="token punctuation">{<!-- --></span>
							<span class="token function">expand</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> show<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span>win<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//四周有雷显示雷数</span>
		<span class="token punctuation">{<!-- --></span>
			show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>win<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//排雷</span>
<span class="token comment">//1:输入坐标是否合法</span>
<span class="token comment">//2:输入坐标是否排过雷</span>

<span class="token comment">//3:排雷结束标志,全部排完，或者踩雷</span>
<span class="token keyword">void</span> <span class="token function">find_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> win <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>win <span class="token operator">&lt;</span> row <span class="token operator">*</span> col <span class="token operator">-</span> EASY_COUNT<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"------------------------------\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要排雷的坐标:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;=</span> row <span class="token operator">&amp;&amp;</span> y <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">&lt;=</span> col<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//判断是否排过雷</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'*'</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//踩雷了</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>mine<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'1'</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"很遗憾，你被雷裤衩子都炸没了\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//Sleep(1000);</span>
					<span class="token comment">//system("cls");</span>
					<span class="token function">display_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//int count = get_mine_count(mine, x, y);</span>
					<span class="token comment">//show[x][y] = count + '0';</span>
					<span class="token function">expand</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> show<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">&amp;</span>win<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">display_board</span><span class="token punctuation">(</span>show<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//win++;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"该位置已经排过雷了，请重新输入\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"坐标非法，请重新输入\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>win <span class="token operator">==</span> row <span class="token operator">*</span> col <span class="token operator">-</span> EASY_COUNT<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"恭喜你排雷成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">display_board</span><span class="token punctuation">(</span>mine<span class="token punctuation">,</span> ROW<span class="token punctuation">,</span> COL<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<blockquote> 
 <p>game.h中代码</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span></span>


<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ROW</span> <span class="token expression"><span class="token number">9</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COL</span> <span class="token expression"><span class="token number">9</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ROWS</span> <span class="token expression">ROW<span class="token operator">+</span><span class="token number">2</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COLS</span> <span class="token expression">COL<span class="token operator">+</span><span class="token number">2</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">EASY_COUNT</span> <span class="token expression"><span class="token number">10</span></span></span>


<span class="token comment">//雷盘初始化,初始化是参数要为11*11，防止数组越界，打印只需要9*9的就行了</span>
<span class="token keyword">void</span> <span class="token function">init_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> rows<span class="token punctuation">,</span> <span class="token keyword">int</span> cols<span class="token punctuation">,</span> <span class="token keyword">char</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//打印雷盘</span>
<span class="token keyword">void</span> <span class="token function">display_board</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//布雷</span>
<span class="token keyword">void</span> <span class="token function">set_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> board<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//排雷</span>
<span class="token keyword">void</span> <span class="token function">find_mine</span><span class="token punctuation">(</span><span class="token keyword">char</span> mine<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">char</span> show<span class="token punctuation">[</span>ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>COLS<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> 
<blockquote> 
 <p>以上就是本游戏的全部代码，程序是在VS2019环境下实现</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e6db0292586e18f80fa1494ee31706c3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【pytorch】计算向量相似度</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e46adbbd40cf97bae8973b1326a7c02/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">获取某月有多少天</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>