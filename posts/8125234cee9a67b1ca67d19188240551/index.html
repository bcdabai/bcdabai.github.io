<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 下使用 linuxdeployqt 打包QT程序 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux 下使用 linuxdeployqt 打包QT程序" />
<meta property="og:description" content="Linux 下使用 linuxdeployqt 打包QT程序 一. 安装 linuxdeployqt二. 打包成 .AppImage 应用程序 当别人需要使用我们的 Qt 程序时，我们可以用打包工具将程序打包发给他，这样就不用发送整个 Qt 工程。由于Qt 跨平台的特性，可以用不同的工具打包它。本篇文章是在 Linux 下使用 linuxdeployqt 将 Qt 程序打包成 .AppImage 应用程序。
环境介绍：
Ubuntu 16.04QT 5.12.12linuxdeployqt（built on 2023-04-23） 注： 当我们把打包好的应用程序发给别人使用，可能会遇到 GLIBC库 版本过高的错误，也有很多办法，不过个人觉得使用低版本的 Linux 系统作为编译机这个方法简单点，而且兼容性好一点，所以我才使用 Ubuntu 16.04 这个版本作为编译机。
一. 安装 linuxdeployqt 直接从 Releases · probonopd/linuxdeployqt (github.com) 中下载编译好的 linuxdeployqt-continuous-x86_64.AppImage 应用程序文件。（从最新的版本开始下载，如果用不了可以降版本）
下载好之后，执行下面命令（这里默认 Ubuntu 上已经配置了 Qt 环境）
chmod &#43;x linuxdeployqt-continuous-x86_64.AppImage # 赋予可执行权限 mv linuxdeployqt-continuous-x86_64.AppImage linuxdeployqt # 改名以便后面操作 ./linuxdelpoyqt -version # 查看是否安装成功，若输出版本信息表示安装成功。 （参数说明 机翻） Usage: linuxdeployqt &lt;app-binary|desktop file&gt; [options] Options: -always-overwrite ：即使目标文件存在，也复制文件。 -appimage ：创建 AppImage （意味着 -bundle-non-qt-libs）。 -bundle-non-qt-libs ：还捆绑非核心、非 Qt 库。 -exclude-libs=&lt;list&gt; ：应排除的库列表，用逗号分隔。 -ignore-glob=&lt;glob&gt; ：相对于 appdir 的 Glob 模式在何时忽略寻找库。 -executable=&lt;path&gt; ：让给定的可执行文件使用已部署的库也 -extra-plugins=&lt;list&gt; ：应该部署的额外插件列表，用逗号分隔。 -no-copy-copyright-files ：跳过版权文件的部署。 -no-plugins ：跳过插件部署。 -no-strip ：不要在二进制文件上运行“strip”。 -no-translations ：跳过翻译部署。 -qmake=&lt;path&gt; ：要使用的 qmake 可执行文件。 -qmldir=&lt;path&gt; ：扫描给定路径中的 QML 导入。 -qmlimport=&lt;path&gt; ：将给定路径添加到 QML 模块搜索位置。 -show-exclude-libs ：打印排除库列表。 -verbose=&lt;0-3&gt; ：0 = 无输出，1 = 错误/警告（默认），2 = 正常，3 = 调试。 -updateinformation=&lt;更新字符串&gt;：嵌入更新信息STRING； 如果安装了zsyncmake，则生成zsync文件 -qtlibinfix=&lt;infix&gt; ：如果您的 Qt 发行版有中缀，请调整 ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8125234cee9a67b1ca67d19188240551/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-28T23:33:48+08:00" />
<meta property="article:modified_time" content="2023-08-28T23:33:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 下使用 linuxdeployqt 打包QT程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Linux 下使用 linuxdeployqt 打包QT程序</h4> 
 <ul><li><ul><li><a href="#__linuxdeployqt_12" rel="nofollow">一. 安装 linuxdeployqt</a></li><li><a href="#__AppImage__49" rel="nofollow">二. 打包成 .AppImage 应用程序</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>当别人需要使用我们的 <em>Qt</em> 程序时，我们可以用打包工具将程序打包发给他，这样就不用发送整个 <em>Qt</em> 工程。由于<em>Qt</em> 跨平台的特性，可以用不同的工具打包它。本篇文章是在 <em>Linux</em> 下使用 <em>linuxdeployqt</em> 将 <em>Qt</em> 程序打包成 <em>.AppImage</em> 应用程序。</p> 
<p><strong>环境介绍：</strong></p> 
<ul><li>Ubuntu 16.04</li><li>QT 5.12.12</li><li>linuxdeployqt（built on 2023-04-23）</li></ul> 
<p><strong>注：</strong> 当我们把打包好的应用程序发给别人使用，可能会遇到 <code>GLIBC库 </code> 版本过高的错误，也有很多办法，不过个人觉得使用低版本的 Linux 系统作为编译机这个方法简单点，而且兼容性好一点，所以我才使用 Ubuntu 16.04 这个版本作为编译机。</p> 
<h3><a id="__linuxdeployqt_12"></a>一. 安装 linuxdeployqt</h3> 
<p>直接从 <a href="https://github.com/probonopd/linuxdeployqt/releases">Releases · probonopd/linuxdeployqt (github.com)</a> 中下载编译好的 linuxdeployqt-continuous-x86_64.AppImage 应用程序文件。（从最新的版本开始下载，如果用不了可以降版本）<br> <img src="https://images2.imgbox.com/51/b5/Ei60XEqc_o.png" alt="在这里插入图片描述"></p> 
<p>下载好之后，执行下面命令（这里默认 Ubuntu 上已经配置了 Qt 环境）</p> 
<pre><code class="prism language-bash"><span class="token function">chmod</span> +x linuxdeployqt-continuous-x86_64.AppImage  <span class="token comment"># 赋予可执行权限</span>
<span class="token function">mv</span> linuxdeployqt-continuous-x86_64.AppImage linuxdeployqt  <span class="token comment"># 改名以便后面操作</span>
./linuxdelpoyqt <span class="token parameter variable">-version</span>   <span class="token comment"># 查看是否安装成功，若输出版本信息表示安装成功。</span>
</code></pre> 
<pre><code class="prism language-bash">（参数说明 机翻）
Usage: linuxdeployqt <span class="token operator">&lt;</span>app-binary<span class="token operator">|</span>desktop file<span class="token operator">&gt;</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>
Options:
-always-overwrite ：即使目标文件存在，也复制文件。
<span class="token parameter variable">-appimage</span> ：创建 AppImage （意味着 -bundle-non-qt-libs）。
-bundle-non-qt-libs ：还捆绑非核心、非 Qt 库。
-exclude-libs<span class="token operator">=</span><span class="token operator">&lt;</span>list<span class="token operator">&gt;</span> ：应排除的库列表，用逗号分隔。
-ignore-glob<span class="token operator">=</span><span class="token operator">&lt;</span>glob<span class="token operator">&gt;</span> ：相对于 appdir 的 Glob 模式在何时忽略寻找库。
<span class="token parameter variable">-executable</span><span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> ：让给定的可执行文件使用已部署的库也
-extra-plugins<span class="token operator">=</span><span class="token operator">&lt;</span>list<span class="token operator">&gt;</span> ：应该部署的额外插件列表，用逗号分隔。
-no-copy-copyright-files ：跳过版权文件的部署。
-no-plugins ：跳过插件部署。
-no-strip ：不要在二进制文件上运行“strip”。
-no-translations ：跳过翻译部署。
<span class="token parameter variable">-qmake</span><span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> ：要使用的 qmake 可执行文件。
<span class="token parameter variable">-qmldir</span><span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> ：扫描给定路径中的 QML 导入。
<span class="token parameter variable">-qmlimport</span><span class="token operator">=</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> ：将给定路径添加到 QML 模块搜索位置。
-show-exclude-libs ：打印排除库列表。
<span class="token parameter variable">-verbose</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token number">0</span>-<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> ：0 <span class="token operator">=</span> 无输出，1 <span class="token operator">=</span> 错误/警告（默认），2 <span class="token operator">=</span> 正常，3 <span class="token operator">=</span> 调试。
<span class="token parameter variable">-updateinformation</span><span class="token operator">=</span><span class="token operator">&lt;</span>更新字符串<span class="token operator">&gt;</span>：嵌入更新信息STRING； 如果安装了zsyncmake，则生成zsync文件
<span class="token parameter variable">-qtlibinfix</span><span class="token operator">=</span><span class="token operator">&lt;</span>infix<span class="token operator">&gt;</span> ：如果您的 Qt 发行版有中缀，请调整 .so 搜索。
<span class="token parameter variable">-version</span> ：打印版本信息。
</code></pre> 
<p><img src="https://images2.imgbox.com/91/06/VmV0kxkT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="__AppImage__49"></a>二. 打包成 .AppImage 应用程序</h3> 
<ol><li> <p>打开 Qt 使用 <code>Release</code> 模式构建源代码，然后编译。<br> <img src="https://images2.imgbox.com/c0/40/UVszYevQ_o.png" alt="在这里插入图片描述"></p> </li><li> <p>找到 <code>Release Build</code> 的文件夹位置，然后将生成的可执行文件复制到另一个空文件夹下。<br> <img src="https://images2.imgbox.com/94/35/FvgB5ni8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b5/41/FldSfUQM_o.png" alt="在这里插入图片描述"></p> </li><li> <p>然后在文件夹下创建一个 .desktop 后缀的文件，这是桌面应用配置文件，在放一个图片用来当应用图标。<br> （详细的 desktop 文件的编写可以参考官方描述 <a href="https://help.ubuntu.com/community/UnityLaunchersAndDesktopFiles" rel="nofollow">UnityLaunchersAndDesktopFiles - Community Help Wiki </a>）</p> </li></ol> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>Application
<span class="token assign-left variable">Name</span><span class="token operator">=</span>这里填应用的名字
<span class="token assign-left variable">Comment</span><span class="token operator">=</span>这里描述该程序功能
<span class="token assign-left variable">Exec</span><span class="token operator">=</span>这里是可执行文件的路径。仅当可执行文件不在 <span class="token environment constant">$PATH</span> 变量中指定的任何路径中时，才必须使用可执行文件的完整路径。例如，路径 /usr/bin 内的任何文件都不需要在 Exec 字段中指定其完整路径，而只需指定其文件名即可，或者在当前路径下也不用。
<span class="token assign-left variable">Icon</span><span class="token operator">=</span>这里是应用图标。例如，目录 /usr/share/pixmaps 下的所有图标不需要指定其完整路径，但不需要指定不带扩展名的文件名。例如，如果图标文件是 /usr/share/pixmaps/wallch.png，则图标字段应该只是“wallch”。或者在当前路径下也不用。所有其他图标都应指定其完整路径。
<span class="token assign-left variable">Categories</span><span class="token operator">=</span>Application<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7d/ac/4zxJ8Xuc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6e/0e/YNCi2wCU_o.png" alt="在这里插入图片描述"></p> 
<p>完成以上工作，会有三个文件，然后执行下面命令：</p> 
<pre><code class="prism language-bash">~/Downloads/linuxdeployqt hello <span class="token parameter variable">-appimage</span>
<span class="token comment"># hello 是可执行文件的名字</span>
<span class="token comment"># -appimage 是参数</span>
</code></pre> 
<p>出现下图内容表示打包成功<br> <img src="https://images2.imgbox.com/89/95/Lib9J7NU_o.png" alt="在这里插入图片描述"></p> 
<p>创建完成后，除了上面三个自己创建的，其他的都是命令生成的，双击 <em>.AppImage</em> 后缀文件，即可运行，给别人使用也只需要把 <em>.AppImage</em> 后缀文件发过去即可。<br> <img src="https://images2.imgbox.com/3f/cd/NBOOPi6M_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bf/de/jHVdcBwz_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>如有其他问题，或者发现文章有错误，请在评论区留言<br> Keep learning！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eec32bf97843d5b561279861d5945660/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">FPGA图像算法.任意比缩放</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f1d89313dbf08e6193887b08c2618891/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">创业笔记16</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>