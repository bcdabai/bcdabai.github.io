<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>H.264编码中，Profile和Level的含义 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="H.264编码中，Profile和Level的含义" />
<meta property="og:description" content="好雪片片，不落别处
H.264有四种画质级别,分别是baseline, extended, main, high： 1、Baseline Profile：基本画质。支持I/P 帧，只支持无交错（Progressive）和CAVLC； 2、Extended profile：进阶画质。支持I/P/B/SP/SI 帧，只支持无交错（Progressive）和CAVLC；(用的少) 3、Main profile：主流画质。提供I/P/B 帧，支持无交错（Progressive）和交错（Interlaced）， 也支持CAVLC 和CABAC 的支持； 4、High profile：高级画质。在main Profile 的基础上增加了8x8内部预测、自定义量化、 无损视频编码和更多的YUV 格式； H.264 Baseline profile、Extended profile和Main profile都是针对8位样本数据、4:2:0格式(YUV)的视频序列。在相同配置情况下，High profile（HP）可以比Main profile（MP）降低10%的码率。 根据应用领域的不同，Baseline profile多应用于实时通信领域，Main profile多应用于流媒体领域，High profile则多应用于广电和存储领域。
下图清楚的给出不同的profile&amp;level的性能区别。 我们可以对比一下Base与Main两个Level所用技术。Base级不可以使用双向预测，Main则可以使用双向预测。那么双向预测又带来什么好处呢？当然是同质量情况下码流的减少，省下不少带宽。那么既然有Main这么好的东西，凭什么还留着Base，一步到位不就行了？计算机技术同样符合辩证法，时间与空间永远是一对矛盾，省了时间，就占多点空间；省点空间，就费点时间。
h.264是一种为求省点空间无所不用其极的技术，从Base级一直到High级，一级比一级复杂，计算量更大。而厂家唯求节省硬件成本，未必要求极致，所以各个级别皆有其应用场合，所谓好雪片片不落别处。总之，一分钱一分货，用High级的硬件肯定是最贵的。当然，实现起来也是最复杂的。
在MPP代码中的体现：
FFMPEG编码： 转换过程中用到了CPU指令集的加速特性：
using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
ffmpeg -i test.mp4 -profile:v baseline -level 3.0 output.mp4 czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -profile:v baseline -level 3.0 output.mp4 ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers built with gcc 7 (Ubuntu 7." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/98383d12df1fa38af8ffa6cc8de9b832/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-13T12:23:38+08:00" />
<meta property="article:modified_time" content="2021-09-13T12:23:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">H.264编码中，Profile和Level的含义</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>好雪片片，不落别处</strong></p> 
<hr> 
<p>H.264有四种画质级别,分别是baseline, extended, main, high： <br> 　　1、Baseline Profile：基本画质。支持I/P 帧，只支持无交错（Progressive）和CAVLC； <br> 　　2、Extended profile：进阶画质。支持I/P/B/SP/SI 帧，只支持无交错（Progressive）和CAVLC；(用的少) <br> 　　3、Main profile：主流画质。提供I/P/B 帧，支持无交错（Progressive）和交错（Interlaced）， <br> 　　　 也支持CAVLC 和CABAC 的支持； <br> 　　4、High profile：高级画质。在main Profile 的基础上增加了8x8内部预测、自定义量化、 无损视频编码和更多的YUV 格式； <br> H.264 Baseline profile、Extended profile和Main profile都是针对8位样本数据、4:2:0格式(YUV)的视频序列。在相同配置情况下，High profile（HP）可以比Main profile（MP）降低10%的码率。 <br> 根据应用领域的不同，Baseline profile多应用于实时通信领域，Main profile多应用于流媒体领域，High profile则多应用于广电和存储领域。</p> 
<p>下图清楚的给出不同的profile&amp;level的性能区别。 </p> 
<p style="text-align:center;"><img alt="这里写图片描述" src="https://images2.imgbox.com/4f/35/NCtbFBbW_o.jpg"></p> 
<p style="text-align:center;"><img alt="这里写图片描述" src="https://images2.imgbox.com/05/8b/9Vvu50s8_o.jpg"></p> 
<p>我们可以对比一下Base与Main两个Level所用技术。Base级不可以使用双向预测，Main则可以使用双向预测。那么双向预测又带来什么好处呢？当然是同质量情况下码流的减少，省下不少带宽。那么既然有Main这么好的东西，凭什么还留着Base，一步到位不就行了？计算机技术同样符合辩证法，时间与空间永远是一对矛盾，省了时间，就占多点空间；省点空间，就费点时间。<br> h.264是一种为求省点空间无所不用其极的技术，从Base级一直到High级，一级比一级复杂，计算量更大。而厂家唯求节省硬件成本，未必要求极致，所以各个级别皆有其应用场合，所谓好雪片片不落别处。总之，一分钱一分货，用High级的硬件肯定是最贵的。当然，实现起来也是最复杂的。</p> 
<p><strong>在MPP代码中的体现：</strong></p> 
<p style="text-align:center;"><img alt="" height="705" src="https://images2.imgbox.com/c7/99/Ho0htPpN_o.png" width="1037"></p> 
<h4>FFMPEG编码：</h4> 
<p>转换过程中用到了CPU指令集的加速特性：</p> 
<p><strong>using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX</strong></p> 
<pre><code>ffmpeg -i test.mp4 -profile:v baseline -level 3.0 output.mp4</code></pre> 
<pre><code>czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -profile:v baseline -level 3.0 output.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x558375b2a860] using SAR=1/1
[libx264 @ 0x558375b2a860] frame MB size (80x45) &gt; level limit (1620)
[libx264 @ 0x558375b2a860] MB rate (90000) &gt; level limit (40500)
[libx264 @ 0x558375b2a860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x558375b2a860] profile Constrained Baseline, level 3.0
[libx264 @ 0x558375b2a860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=0 ref=2 deblock=1:0:0 analyse=0x1:0x111 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps= 18 q=28.0 Lsize=   73770kB time=00:03:49.08 bitrate=2638.0kbits/s dup=1 drop=0 speed=0.719x    
video:70029kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.196494%
[libx264 @ 0x558375b2a860] frame I:380   Avg QP:20.01  size: 27095
[libx264 @ 0x558375b2a860] frame P:5347  Avg QP:23.63  size: 11486
[libx264 @ 0x558375b2a860] mb I  I16..4: 63.8%  0.0% 36.2%
[libx264 @ 0x558375b2a860] mb P  I16..4: 11.8%  0.0%  5.7%  P16..4: 35.2%  9.9%  2.3%  0.0%  0.0%    skip:35.0%
[libx264 @ 0x558375b2a860] coded y,uvDC,uvAC intra: 28.2% 14.3% 2.8% inter: 9.7% 3.3% 0.0%
[libx264 @ 0x558375b2a860] i16 v,h,dc,p: 36% 31% 13% 20%
[libx264 @ 0x558375b2a860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 20% 31% 18%  5%  5%  5%  6%  4%  5%
[libx264 @ 0x558375b2a860] i8c dc,h,v,p: 85%  9%  5%  1%
[libx264 @ 0x558375b2a860] ref P L0: 72.5% 27.5%
[libx264 @ 0x558375b2a860] kb/s:2504.25
[aac @ 0x558375b1b2a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ 
</code></pre> 
<pre><code>ffmpeg -i test.mp4 -profile:v main -level 3.0 output.mp4</code></pre> 
<p style="text-align:center;"></p> 
<pre><code>czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -profile:v main -level 3.0 output.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
File 'output.mp4' already exists. Overwrite ? [y/N] y
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x55a1a0e1f860] using SAR=1/1
[libx264 @ 0x55a1a0e1f860] frame MB size (80x45) &gt; level limit (1620)
[libx264 @ 0x55a1a0e1f860] DPB size (4 frames, 14400 mbs) &gt; level limit (2 frames, 8100 mbs)
[libx264 @ 0x55a1a0e1f860] MB rate (90000) &gt; level limit (40500)
[libx264 @ 0x55a1a0e1f860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x55a1a0e1f860] profile Main, level 3.0
[libx264 @ 0x55a1a0e1f860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x1:0x111 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps= 13 q=28.0 Lsize=   58339kB time=00:03:49.08 bitrate=2086.2kbits/s dup=1 drop=0 speed=0.524x    
video:54563kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.309643%
[libx264 @ 0x55a1a0e1f860] frame I:219   Avg QP:19.06  size: 30992
[libx264 @ 0x55a1a0e1f860] frame P:2756  Avg QP:23.02  size: 12705
[libx264 @ 0x55a1a0e1f860] frame B:2752  Avg QP:25.96  size:  5112
[libx264 @ 0x55a1a0e1f860] consecutive B-frames: 22.3% 37.1% 11.7% 29.0%
[libx264 @ 0x55a1a0e1f860] mb I  I16..4: 52.4%  0.0% 47.6%
[libx264 @ 0x55a1a0e1f860] mb P  I16..4: 20.5%  0.0% 10.3%  P16..4: 30.8%  9.3%  2.3%  0.0%  0.0%    skip:26.8%
[libx264 @ 0x55a1a0e1f860] mb B  I16..4:  2.6%  0.0%  1.8%  B16..8: 31.4%  4.6%  0.7%  direct: 1.8%  skip:57.0%  L0:46.8% L1:47.1% BI: 6.1%
[libx264 @ 0x55a1a0e1f860] coded y,uvDC,uvAC intra: 32.3% 13.8% 3.0% inter: 8.0% 2.9% 0.0%
[libx264 @ 0x55a1a0e1f860] i16 v,h,dc,p: 34% 32% 12% 21%
[libx264 @ 0x55a1a0e1f860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 21% 30% 19%  5%  5%  5%  6%  4%  5%
[libx264 @ 0x55a1a0e1f860] i8c dc,h,v,p: 85%  9%  5%  1%
[libx264 @ 0x55a1a0e1f860] Weighted P-Frames: Y:2.8% UV:1.0%
[libx264 @ 0x55a1a0e1f860] ref P L0: 75.2% 11.3% 13.3%  0.2%
[libx264 @ 0x55a1a0e1f860] ref B L0: 88.5% 11.5%
[libx264 @ 0x55a1a0e1f860] ref B L1: 98.1%  1.9%
[libx264 @ 0x55a1a0e1f860] kb/s:1951.16
[aac @ 0x55a1a0e102a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ 
</code></pre> 
<pre><code>ffmpeg -i test.mp4 -profile:v high -level 3.0 output.mp4</code></pre> 
<pre><code>czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -profile:v high -level 3.0 output.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
File 'output.mp4' already exists. Overwrite ? [y/N] y
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x55b9948eb860] using SAR=1/1
[libx264 @ 0x55b9948eb860] frame MB size (80x45) &gt; level limit (1620)
[libx264 @ 0x55b9948eb860] DPB size (4 frames, 14400 mbs) &gt; level limit (2 frames, 8100 mbs)
[libx264 @ 0x55b9948eb860] MB rate (90000) &gt; level limit (40500)
[libx264 @ 0x55b9948eb860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x55b9948eb860] profile High, level 3.0
[libx264 @ 0x55b9948eb860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps=7.6 q=28.0 Lsize=   58250kB time=00:03:49.08 bitrate=2083.0kbits/s dup=1 drop=0 speed=0.302x    
video:54473kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.310125%
[libx264 @ 0x55b9948eb860] frame I:219   Avg QP:19.96  size: 30239
[libx264 @ 0x55b9948eb860] frame P:2756  Avg QP:23.67  size: 12622
[libx264 @ 0x55b9948eb860] frame B:2752  Avg QP:26.09  size:  5222
[libx264 @ 0x55b9948eb860] consecutive B-frames: 22.3% 37.1% 11.7% 29.0%
[libx264 @ 0x55b9948eb860] mb I  I16..4: 22.8% 53.7% 23.5%
[libx264 @ 0x55b9948eb860] mb P  I16..4: 10.0% 20.1%  4.5%  P16..4: 28.3%  8.0%  2.1%  0.0%  0.0%    skip:27.1%
[libx264 @ 0x55b9948eb860] mb B  I16..4:  1.7%  3.0%  0.9%  B16..8: 30.1%  4.3%  0.7%  direct: 1.5%  skip:57.8%  L0:47.3% L1:46.5% BI: 6.2%
[libx264 @ 0x55b9948eb860] 8x8 transform intra:56.9% inter:72.0%
[libx264 @ 0x55b9948eb860] coded y,uvDC,uvAC intra: 40.4% 13.1% 2.8% inter: 10.0% 2.4% 0.0%
[libx264 @ 0x55b9948eb860] i16 v,h,dc,p: 20% 35% 10% 35%
[libx264 @ 0x55b9948eb860] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 31% 19%  3%  3%  3%  4%  3%  5%
[libx264 @ 0x55b9948eb860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 22% 30% 12%  5%  6%  6%  8%  5%  6%
[libx264 @ 0x55b9948eb860] i8c dc,h,v,p: 86%  9%  5%  1%
[libx264 @ 0x55b9948eb860] Weighted P-Frames: Y:2.8% UV:1.0%
[libx264 @ 0x55b9948eb860] ref P L0: 76.2% 11.0% 12.5%  0.2%
[libx264 @ 0x55b9948eb860] ref B L0: 88.8% 11.2%
[libx264 @ 0x55b9948eb860] ref B L1: 98.2%  1.8%
[libx264 @ 0x55b9948eb860] kb/s:1947.96
[aac @ 0x55b9948dc2a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ 
</code></pre> 
<pre><code>ffmpeg -i test.mp4 -c:v libx264 -x264-params "profile=high:level=3.0" output-1.mp4</code></pre> 
<pre><code>czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -c:v libx264 -x264-params "profile=high:level=3.0" output-1.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x55b2cacf2860] Error parsing option 'profile = high'.
[libx264 @ 0x55b2cacf2860] using SAR=1/1
[libx264 @ 0x55b2cacf2860] frame MB size (80x45) &gt; level limit (1620)
[libx264 @ 0x55b2cacf2860] DPB size (4 frames, 14400 mbs) &gt; level limit (2 frames, 8100 mbs)
[libx264 @ 0x55b2cacf2860] MB rate (90000) &gt; level limit (40500)
[libx264 @ 0x55b2cacf2860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x55b2cacf2860] profile High, level 3.0
[libx264 @ 0x55b2cacf2860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output-1.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps=7.2 q=28.0 Lsize=   58141kB time=00:03:49.08 bitrate=2079.1kbits/s dup=1 drop=0 speed=0.288x    
video:54365kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.310705%
[libx264 @ 0x55b2cacf2860] frame I:219   Avg QP:19.96  size: 30239
[libx264 @ 0x55b2cacf2860] frame P:2756  Avg QP:23.68  size: 12588
[libx264 @ 0x55b2cacf2860] frame B:2752  Avg QP:26.10  size:  5216
[libx264 @ 0x55b2cacf2860] consecutive B-frames: 22.3% 37.1% 11.7% 29.0%
[libx264 @ 0x55b2cacf2860] mb I  I16..4: 22.8% 53.7% 23.5%
[libx264 @ 0x55b2cacf2860] mb P  I16..4:  9.9% 19.8%  4.4%  P16..4: 28.7%  8.0%  2.1%  0.0%  0.0%    skip:27.1%
[libx264 @ 0x55b2cacf2860] mb B  I16..4:  1.7%  2.9%  0.9%  B16..8: 30.1%  4.3%  0.7%  direct: 1.5%  skip:57.9%  L0:47.4% L1:46.4% BI: 6.2%
[libx264 @ 0x55b2cacf2860] 8x8 transform intra:56.8% inter:72.0%
[libx264 @ 0x55b2cacf2860] coded y,uvDC,uvAC intra: 40.3% 13.1% 2.8% inter: 9.9% 2.4% 0.0%
[libx264 @ 0x55b2cacf2860] i16 v,h,dc,p: 20% 35% 10% 35%
[libx264 @ 0x55b2cacf2860] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 31% 19%  3%  3%  3%  4%  3%  5%
[libx264 @ 0x55b2cacf2860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 22% 30% 12%  5%  6%  6%  8%  5%  6%
[libx264 @ 0x55b2cacf2860] i8c dc,h,v,p: 85%  9%  5%  1%
[libx264 @ 0x55b2cacf2860] Weighted P-Frames: Y:2.8% UV:1.0%
[libx264 @ 0x55b2cacf2860] ref P L0: 73.8% 10.6% 11.3%  4.2%  0.2%
[libx264 @ 0x55b2cacf2860] ref B L0: 88.9%  9.7%  1.5%
[libx264 @ 0x55b2cacf2860] ref B L1: 98.2%  1.8%
[libx264 @ 0x55b2cacf2860] kb/s:1944.08
[aac @ 0x55b2cace32a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ 
</code></pre> 
<pre><code>ffmpeg -i test.mp4 -c:v libx264 -x264-params "profile=high:level=5.1" output-2.mp4</code></pre> 
<pre><code>czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -c:v libx264 -x264-params "profile=high:level=3.0" output-1.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x55b2cacf2860] Error parsing option 'profile = high'.
[libx264 @ 0x55b2cacf2860] using SAR=1/1
[libx264 @ 0x55b2cacf2860] frame MB size (80x45) &gt; level limit (1620)
[libx264 @ 0x55b2cacf2860] DPB size (4 frames, 14400 mbs) &gt; level limit (2 frames, 8100 mbs)
[libx264 @ 0x55b2cacf2860] MB rate (90000) &gt; level limit (40500)
[libx264 @ 0x55b2cacf2860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x55b2cacf2860] profile High, level 3.0
[libx264 @ 0x55b2cacf2860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output-1.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps=7.2 q=28.0 Lsize=   58141kB time=00:03:49.08 bitrate=2079.1kbits/s dup=1 drop=0 speed=0.288x    
video:54365kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.310705%
[libx264 @ 0x55b2cacf2860] frame I:219   Avg QP:19.96  size: 30239
[libx264 @ 0x55b2cacf2860] frame P:2756  Avg QP:23.68  size: 12588
[libx264 @ 0x55b2cacf2860] frame B:2752  Avg QP:26.10  size:  5216
[libx264 @ 0x55b2cacf2860] consecutive B-frames: 22.3% 37.1% 11.7% 29.0%
[libx264 @ 0x55b2cacf2860] mb I  I16..4: 22.8% 53.7% 23.5%
[libx264 @ 0x55b2cacf2860] mb P  I16..4:  9.9% 19.8%  4.4%  P16..4: 28.7%  8.0%  2.1%  0.0%  0.0%    skip:27.1%
[libx264 @ 0x55b2cacf2860] mb B  I16..4:  1.7%  2.9%  0.9%  B16..8: 30.1%  4.3%  0.7%  direct: 1.5%  skip:57.9%  L0:47.4% L1:46.4% BI: 6.2%
[libx264 @ 0x55b2cacf2860] 8x8 transform intra:56.8% inter:72.0%
[libx264 @ 0x55b2cacf2860] coded y,uvDC,uvAC intra: 40.3% 13.1% 2.8% inter: 9.9% 2.4% 0.0%
[libx264 @ 0x55b2cacf2860] i16 v,h,dc,p: 20% 35% 10% 35%
[libx264 @ 0x55b2cacf2860] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 31% 19%  3%  3%  3%  4%  3%  5%
[libx264 @ 0x55b2cacf2860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 22% 30% 12%  5%  6%  6%  8%  5%  6%
[libx264 @ 0x55b2cacf2860] i8c dc,h,v,p: 85%  9%  5%  1%
[libx264 @ 0x55b2cacf2860] Weighted P-Frames: Y:2.8% UV:1.0%
[libx264 @ 0x55b2cacf2860] ref P L0: 73.8% 10.6% 11.3%  4.2%  0.2%
[libx264 @ 0x55b2cacf2860] ref B L0: 88.9%  9.7%  1.5%
[libx264 @ 0x55b2cacf2860] ref B L1: 98.2%  1.8%
[libx264 @ 0x55b2cacf2860] kb/s:1944.08
[aac @ 0x55b2cace32a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ ffmpeg -i test.mp4 -c:v libx264 -x264-params "profile=high:level=5.1" output-2.mp4
ffmpeg version 3.4.8-0ubuntu0.2 Copyright (c) 2000-2020 the FFmpeg developers
  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)
  configuration: --prefix=/usr --extra-version=0ubuntu0.2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared
  libavutil      55. 78.100 / 55. 78.100
  libavcodec     57.107.100 / 57.107.100
  libavformat    57. 83.100 / 57. 83.100
  libavdevice    57. 10.100 / 57. 10.100
  libavfilter     6.107.100 /  6.107.100
  libavresample   3.  7.  0 /  3.  7.  0
  libswscale      4.  8.100 /  4.  8.100
  libswresample   2.  9.100 /  2.  9.100
  libpostproc    54.  7.100 / 54.  7.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-05-20T06:32:24.000000Z
  Duration: 00:03:49.09, start: 0.000000, bitrate: 2205 kb/s
    Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 223 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
    Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 1978 kb/s, 25 fps, 25 tbr, 25k tbn, 50 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
Stream mapping:
  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; h264 (libx264))
  Stream #0:0 -&gt; #0:1 (aac (native) -&gt; aac (native))
Press [q] to stop, [?] for help
[libx264 @ 0x56041a580860] Error parsing option 'profile = high'.
[libx264 @ 0x56041a580860] using SAR=1/1
[libx264 @ 0x56041a580860] using cpu capabilities: MMX2 SSE2Fast LZCNT SSSE3 SSE4.2 AVX
[libx264 @ 0x56041a580860] profile High, level 5.1
[libx264 @ 0x56041a580860] 264 - core 152 r2854 e9a5903 - H.264/MPEG-4 AVC codec - Copyleft 2003-2017 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output-2.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    encoder         : Lavf57.83.100
    Stream #0:0(und): Video: h264 (libx264) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 25 fps, 12800 tbn, 25 tbc (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 libx264
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2008-05-20T06:32:24.000000Z
      handler_name    : (C) 2007 Google Inc. v06.24.2007.
      encoder         : Lavc57.107.100 aac
frame= 5727 fps= 11 q=28.0 Lsize=   58149kB time=00:03:49.08 bitrate=2079.4kbits/s dup=1 drop=0 speed=0.438x    
video:54373kB audio:3596kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.310728%
[libx264 @ 0x56041a580860] frame I:219   Avg QP:19.96  size: 30208
[libx264 @ 0x56041a580860] frame P:2749  Avg QP:23.67  size: 12598
[libx264 @ 0x56041a580860] frame B:2759  Avg QP:26.11  size:  5231
[libx264 @ 0x56041a580860] consecutive B-frames: 22.1% 36.9% 12.0% 28.9%
[libx264 @ 0x56041a580860] mb I  I16..4: 22.8% 53.8% 23.5%
[libx264 @ 0x56041a580860] mb P  I16..4:  9.8% 19.7%  4.4%  P16..4: 28.8%  8.0%  2.1%  0.0%  0.0%    skip:27.1%
[libx264 @ 0x56041a580860] mb B  I16..4:  1.7%  3.0%  0.9%  B16..8: 30.1%  4.3%  0.7%  direct: 1.5%  skip:57.8%  L0:47.5% L1:46.3% BI: 6.2%
[libx264 @ 0x56041a580860] 8x8 transform intra:56.8% inter:72.0%
[libx264 @ 0x56041a580860] coded y,uvDC,uvAC intra: 40.3% 13.2% 2.8% inter: 10.0% 2.4% 0.0%
[libx264 @ 0x56041a580860] i16 v,h,dc,p: 20% 35% 10% 35%
[libx264 @ 0x56041a580860] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 31% 19%  3%  3%  3%  4%  3%  5%
[libx264 @ 0x56041a580860] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 22% 30% 12%  5%  6%  6%  8%  5%  6%
[libx264 @ 0x56041a580860] i8c dc,h,v,p: 85%  9%  5%  1%
[libx264 @ 0x56041a580860] Weighted P-Frames: Y:2.7% UV:1.0%
[libx264 @ 0x56041a580860] ref P L0: 73.8% 10.7% 11.2%  4.2%  0.2%
[libx264 @ 0x56041a580860] ref B L0: 88.7%  9.8%  1.5%
[libx264 @ 0x56041a580860] ref B L1: 98.2%  1.8%
[libx264 @ 0x56041a580860] kb/s:1944.37
[aac @ 0x56041a5712a0] Qavg: 1959.487
czl@czl-VirtualBox:~/WorkSpace/ffserver$ 
</code></pre> 
<p><img alt="" height="861" src="https://images2.imgbox.com/54/80/LZ68wjvh_o.png" width="1200"></p> 
<h4>结束！</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a7abc0f294d7cfcca9c1440a521a4c48/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[Asis CTF 2016] b00ks —— Off-By-One笔记与思考</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6bd7524d21725d34686368fbc3d9326a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">iOS关于TestFlight的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>