<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT 使用图表 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT 使用图表" />
<meta property="og:description" content="目录
1、概念
1.1 坐标轴-QAbstractAxis
1.2 系列-QAbstractSeries
1.3 图例-Legend
1.4 图表-QChart
1.5 视图-QChartView
2、 QT 折线图
2.1 Qt 折线图介绍
2.2 Qt 折线图实现
Qt 图表是专门用来数据可视化的控件
Qt 图表包含折线、饼图、棒图、散点图、范围图等。
使用 Qt 图表时,需要添加 Qt &#43;= charts
包含头文件 #include
1、概念 1.1 坐标轴-QAbstractAxis 图表中，一般都有 X、Y 坐标轴，复杂一些的还带有 Z 轴。对应到 Qt 的图表也有 X、Y 轴对象。但是 今天，我们先不展开介绍。如果我们不创建轴坐标对应的对象，可以使用 Qt 的默认轴对象。后面我们会介绍用 法。
1.2 系列-QAbstractSeries 不论是曲线、饼图、棒图还是其他图表，其中展示的内容本质都是数据。一条曲线是一组数据，一个饼图也 对应一组数据。在 Qt Charts 中，这些一组组的数据被称作系列。对应不同类型的图表 Qt 提供了不同的系列。 系列除了负责存储、访问数据，应该还提供了数据的绘制方法，比如折线图和曲线图分别对应 QLineSerie 和 QSPLineSerie。我们可以用不同的系列达到不同的展示目的。
1.3 图例-Legend 类似于 Excel，Qt Charts 中也提供了图例，并且还可以显示或者隐藏图例。
1.4 图表-QChart Qt 提供了 QChart 类来封装前面所说的内容，比如坐标轴、系列、图例等。QChart 承担了一个组织、管理 的角色。QChart 派生自 QGraphicsObject，因此它实际上是一个图元 item。我们可以从 QChart 获取到坐标轴对 象、数据系列对象、图例等等，并且可以设置图表的主题、背景色等样式信息。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1dfd2d5ba626f770b145d21c668387ca/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-22T09:33:10+08:00" />
<meta property="article:modified_time" content="2023-08-22T09:33:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT 使用图表</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E6%A6%82%E5%BF%B5" rel="nofollow">1、概念</a></p> 
<p id="1.1%20%E5%9D%90%E6%A0%87%E8%BD%B4-QAbstractAxis-toc" style="margin-left:80px;"><a href="#1.1%20%E5%9D%90%E6%A0%87%E8%BD%B4-QAbstractAxis" rel="nofollow">1.1 坐标轴-QAbstractAxis</a></p> 
<p id="1.2%20%E7%B3%BB%E5%88%97-QAbstractSeries-toc" style="margin-left:80px;"><a href="#1.2%20%E7%B3%BB%E5%88%97-QAbstractSeries" rel="nofollow">1.2 系列-QAbstractSeries</a></p> 
<p id="1.3%20%E5%9B%BE%E4%BE%8B-Legend-toc" style="margin-left:80px;"><a href="#1.3%20%E5%9B%BE%E4%BE%8B-Legend" rel="nofollow">1.3 图例-Legend</a></p> 
<p id="1.4%20%E5%9B%BE%E8%A1%A8-QChart-toc" style="margin-left:80px;"><a href="#1.4%20%E5%9B%BE%E8%A1%A8-QChart" rel="nofollow">1.4 图表-QChart</a></p> 
<p id="1.5%20%E8%A7%86%E5%9B%BE-QChartView-toc" style="margin-left:80px;"><a href="#1.5%20%E8%A7%86%E5%9B%BE-QChartView" rel="nofollow">1.5 视图-QChartView</a></p> 
<p id="2%E3%80%81%20QT%20%E6%8A%98%E7%BA%BF%E5%9B%BE-toc" style="margin-left:40px;"><a href="#2%E3%80%81%20QT%20%E6%8A%98%E7%BA%BF%E5%9B%BE" rel="nofollow">2、 QT 折线图</a></p> 
<p id="2.1%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E4%BB%8B%E7%BB%8D-toc" style="margin-left:80px;"><a href="#2.1%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E4%BB%8B%E7%BB%8D" rel="nofollow">2.1 Qt 折线图介绍</a></p> 
<p id="2.2%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E5%AE%9E%E7%8E%B0-toc" style="margin-left:80px;"><a href="#2.2%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E5%AE%9E%E7%8E%B0" rel="nofollow">2.2 Qt 折线图实现</a></p> 
<p style="text-align:center;"><br><img alt="" src="https://images2.imgbox.com/87/ad/cPQ1pBYN_o.gif"></p> 
<p> </p> 
<p>Qt 图表是专门用来数据可视化的控件</p> 
<p>Qt 图表包含折线、饼图、棒图、散点图、范围图等。</p> 
<p>使用 Qt 图表时,需要添加 Qt += charts</p> 
<p>包含头文件 #include</p> 
<h3 id="1%E3%80%81%E6%A6%82%E5%BF%B5">1、概念</h3> 
<h4 id="1.1%20%E5%9D%90%E6%A0%87%E8%BD%B4-QAbstractAxis">1.1 坐标轴-QAbstractAxis</h4> 
<p>图表中，一般都有 X、Y 坐标轴，复杂一些的还带有 Z 轴。对应到 Qt 的图表也有 X、Y 轴对象。但是 今天，我们先不展开介绍。如果我们不创建轴坐标对应的对象，可以使用 Qt 的默认轴对象。后面我们会介绍用 法。</p> 
<h4 id="1.2%20%E7%B3%BB%E5%88%97-QAbstractSeries">1.2 系列-QAbstractSeries</h4> 
<p>不论是曲线、饼图、棒图还是其他图表，其中展示的内容本质都是数据。一条曲线是一组数据，一个饼图也 对应一组数据。在 Qt Charts 中，这些一组组的数据被称作系列。对应不同类型的图表 Qt 提供了不同的系列。 系列除了负责存储、访问数据，应该还提供了数据的绘制方法，比如折线图和曲线图分别对应 QLineSerie 和 QSPLineSerie。我们可以用不同的系列达到不同的展示目的。</p> 
<h4 id="1.3%20%E5%9B%BE%E4%BE%8B-Legend">1.3 图例-Legend</h4> 
<p>类似于 Excel，Qt Charts 中也提供了图例，并且还可以显示或者隐藏图例。</p> 
<h4 id="1.4%20%E5%9B%BE%E8%A1%A8-QChart">1.4 图表-QChart</h4> 
<p>Qt 提供了 QChart 类来封装前面所说的内容，比如坐标轴、系列、图例等。QChart 承担了一个组织、管理 的角色。QChart 派生自 QGraphicsObject，因此它实际上是一个图元 item。我们可以从 QChart 获取到坐标轴对 象、数据系列对象、图例等等，并且可以设置图表的主题、背景色等样式信息。</p> 
<h4 id="1.5%20%E8%A7%86%E5%9B%BE-QChartView">1.5 视图-QChartView</h4> 
<p> 负责 QChart 的展示。QChart 本身只负责图表内容的组织、管理。图表的展示由视图负责，这个视图就是 QChartView。QChartView 派生自 QGraphicsView，只是它专门提供了几个面向 QChart 的接口，比如 setChart （QChart*）等。</p> 
<hr> 
<h3 id="2%E3%80%81%20QT%20%E6%8A%98%E7%BA%BF%E5%9B%BE">2、 QT 折线图</h3> 
<h4 id="2.1%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E4%BB%8B%E7%BB%8D">2.1 Qt 折线图介绍</h4> 
<p><img alt="" height="581" src="https://images2.imgbox.com/ec/0d/k4BzVZgJ_o.png" width="966"></p> 
<p> Qt 折线图使用的类是 QlineSeries。</p> 
<p>Qt 折线图包含如下几个部分: ① 坐标轴(x,y) ② 线条 ③ 参考背景线</p> 
<p></p> 
<h4 id="2.2%20Qt%20%E6%8A%98%E7%BA%BF%E5%9B%BE%E5%AE%9E%E7%8E%B0">2.2 Qt 折线图实现</h4> 
<p>Qt 折线图实现过程主要包括以下几个步骤:</p> 
<p>1. 新建一个 QChart 图表对象 chart;</p> 
<p>2. 往 chart 添加坐标轴(x,y 轴);</p> 
<p>3. 在 ui 里提升一个 QWidget 成 QChartView,作为 chart 的视图;</p> 
<p>4. 在 chart 里添加新的折线对象 QLineSeries(可添加多条)</p> 
<p>5. 添加数据</p> 
<p>6. 清除数据</p> 
<p>一．新建一个 QChart 图表对象 chart</p> 
<pre><code class="language-cs">QChart *chart = new QChart();
 chart-&gt;legend()-&gt;setVisible(true);
 QFont font;
 font.setPixelSize(50);
chart-&gt;setTitleFont(font);
 chart-&gt;setTitle("小红体重曲线");//设置图表标题</code></pre> 
<p>二．往 chart 添加坐标轴(x 轴,y 轴)</p> 
<pre><code class="language-cpp">QValueAxis *axisX;
 axisX = new QValueAxis();
axisX-&gt;setTitleText("时间"); //设置坐标轴的标题
 axisX-&gt;setLabelFormat("%i"); //设置坐标格式，类似于 printf
axisX-&gt;setTickCount(10); //坐标被分成多少格
axisX-&gt;setRange(0, 60); //设置范围
//Bottom 是底部的意思,意思是坐标轴是放在底部的,也就是 X 轴
//相似的还有 Qt::AlignLeft...
chart-&gt;addAxis(axisX, Qt::AlignBottom);
QValueAxis *axisY;
 axisY = new QValueAxis();
 axisY-&gt;setTitleText("体重"); //设置坐标轴的标题
 axisY-&gt;setLabelFormat("%i"); //设置坐标格式
 axisY-&gt;setTickCount(5); //坐标被分成多少格
axisY-&gt;setRange(0, 200); //设置范围
chart-&gt;addAxis(axisY, Qt::AlignLeft);</code></pre> 
<p>三．在 ui 里提升一个 QWidget 成 QChartView,作为 chart 的视图;</p> 
<p><img alt="" height="303" src="https://images2.imgbox.com/44/c2/P36mxHWx_o.png" width="1002"></p> 
<p>四．在 chart 里添加新的折线对象 QLineSeries(可添加多条)</p> 
<pre><code class="language-cpp">line = new QLineSeries;
line-&gt;setName("体重曲线"); //设置线的名字
line-&gt;setColor(Qt::red); //设置线的颜色
 chart-&gt;addSeries(line); //把曲线加到图表里 //设置曲线遵循哪个坐标,它会自动
识别 x,y 轴,因为坐标轴里的 AlignBottom/AlignLeft 属性
line-&gt;attachAxis(axisX);
line-&gt;attachAxis(axisY);
ui-&gt;chartView-&gt;setChart(chart);//把拆线添加到控件</code></pre> 
<p> 五．添加数据，使用定时器模拟</p> 
<p>1. 定时器初始化</p> 
<pre><code class="language-cpp">QTimer *timer = new QTimer(this);
 connect(timer, SIGNAL(timeout()), this, SLOT(slotTimeout()));
x = 0;
 timer-&gt;start(1000);</code></pre> 
<p>2. 定时器槽函数</p> 
<pre><code class="language-cpp">void Widget::doTimeoutSlot()
{
 y = qrand() % 200; //生成随机数,范围在 200 以内,因为我们 y 轴最大是 200
 qDebug()&lt;&lt;"y="&lt;&lt;y;
 if(x &gt; 60){
x = 0;
 line-&gt;clear();
 }else{
 line-&gt;append(x, y);
 x++;
 }
}
</code></pre> 
<p>六．清除数据 line-&gt;clear();</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d667ee31953a8e4d5b653dec4e6dfeb8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">本科双非CS，计算机985 CS，投的IC，记录一下</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d3013e2e83018019ffbf0d52fc3556c5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">super iserver发布shp线上地图,获取数据集(超图服务发布 - 保姆式教程)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>