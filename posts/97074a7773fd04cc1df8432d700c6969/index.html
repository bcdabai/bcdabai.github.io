<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ç”µå½±æ•°æ®å¯è§†åŒ–ç»¼åˆåˆ†æ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ç”µå½±æ•°æ®å¯è§†åŒ–ç»¼åˆåˆ†æ" />
<meta property="og:description" content="æ•°æ®å¯è§†åŒ–&amp;åˆ†æå®æˆ˜ 1.1 æ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–
1.2 ç”µå½±æ•°æ®å¯è§†åŒ–åˆ†æ
ç›®å½• æ•°æ®å¯è§†åŒ–&amp;åˆ†æå®æˆ˜å‰è¨€1. æ•°æ®è®¤çŸ¥2. æ•°æ®å¯è§†åŒ–2.1 è§£å†³matplotlibä¸èƒ½ç»˜åˆ¶ä¸­æ–‡å­—ç¬¦çš„é—®é¢˜2.2 æŠ˜çº¿å›¾2.3 æŸ±çŠ¶å›¾ç»˜åˆ¶2.4 ç®±çº¿å›¾ç»˜åˆ¶2.5 é¥¼å›¾ 3. Naå€¼å¤„ç†åŠç›¸å…³æ€§åˆ†æ3.1 ç›¸å…³æ€§åˆ†æ3.2 Naå€¼å¤„ç† 4. å›¾ï¼ˆgraphï¼‰å¯è§†åŒ–åˆ†ææ€»ç»“ å‰è¨€ å¤§å®¶å¥½âœ¨ï¼Œè¿™é‡Œæ˜¯bioğŸ¦–ã€‚ç‚¹èµ&#43;å…³æ³¨ä¸è¿·è·¯ã€‚æ•°æ®å¯è§†åŒ–åœ¨æ•°æ®ç§‘å­¦å’Œæ•°æ®åˆ†æä¸­éå¸¸é‡è¦ï¼Œä¾‹å¦‚è®ºæ–‡ä¸­é…è‰²ç²¾ç¾çš„ç»“æœå›¾ã€PPTæ±‡æŠ¥ä¸­çªå‡ºæ•°æ®å·®å¼‚æ•°æ®åˆ†æå›¾ç­‰ã€‚é€šè¿‡å¯è§†åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°è§‚å¯Ÿå’Œç†è§£æ•°æ®çš„åˆ†å¸ƒã€è¶‹åŠ¿ã€å¼‚å¸¸å€¼ç­‰ç‰¹å¾ã€‚é€šè¿‡å›¾è¡¨å’Œå›¾å½¢ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°å‘ç°æ•°æ®ä¸­çš„æ¨¡å¼å’Œå…³è”ã€‚
æœ¬æ–‡æ˜¯å¯¹ä¸Šä¸€ç¯‡åšå®¢ä¸­è·å–çš„æ•°æ®åˆ©ç”¨pythonè¿›è¡Œå¯è§†åŒ–åˆ†æï¼ˆæ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–ï¼‰ï¼Œçœ‹å®Œæœ¬æ–‡ä½ å°†å­¦ä¼šï¼š
è§£å†³matplotlibä¸èƒ½ç»˜åˆ¶ä¸­æ–‡çš„é—®é¢˜å¦‚ä½•ä½¿ç”¨matplotlibåŒ…ç»˜åˆ¶æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€ç®±çº¿å›¾ã€é¥¼å›¾ç­‰å¡«å……naçš„æ–¹æ³•è¡¡é‡å˜é‡ä¹‹é—´çš„å…³ç³»ä»¥åŠå»ºæ¨¡å›¾ï¼ˆgraphï¼‰å¯è§†åŒ–åˆ†æ æœ¬æ–‡æ‰€ç”¨çš„æ‰€æœ‰ä»£ç éƒ½åœ¨Githubä»“åº“ï¼Œä½ å¯ä»¥ä¸‹è½½åœ¨æœ¬åœ°è¿è¡Œï¼ˆæå‰å®‰è£…å¥½ç›¸å…³åŒ…~ï¼‰ã€‚æ„Ÿå…´è¶£çš„è¯å¯ä»¥staræˆ‘çš„ä¸»é¡µã€‚
1. æ•°æ®è®¤çŸ¥ åœ¨å¯è§†åŒ–å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹æ•°æ®æœ‰ä¸€ä¸ªåŸºç¡€çš„è®¤è¯†ï¼Œäº†è§£æˆ‘ä»¬çš„æ•°æ®èƒ½åšä»€ä¹ˆæ ·çš„å¯è§†åŒ–åˆ†æï¼Œåˆ†æä¹‹åèƒ½å¾—åˆ°ä»€ä¹ˆæ ·çš„ç»“æœã€‚æœ¬æ–‡æ‰€ç”¨æ•°æ®æ¥æºäºåšå®¢æ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç§¯åˆ†ä»CSDNèµ„æºåº“ä¸‹è½½ä¸‹è½½é“¾æ¥ã€‚æœ¬æ–‡æ‰€ç”¨çš„å…¨éƒ¨ä»£ç å·²notebookçš„æ ¼å¼å­˜å‚¨åœ¨Githubï¼Œå»ºè®®ä¸‹è½½ä½¿ç”¨ã€‚
é¦–å…ˆè¯»å…¥æ–‡ä»¶ï¼Œè¯»å…¥æ—¶è®°å¾—ä½¿ç”¨gbkç¼–ç æ–¹å¼ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä¸­å…·æœ‰ä¸­æ–‡å­—ç¬¦ã€‚è€Œåå°†Rating_valueè½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼ŒYearè½¬æ¢ä¸ºå­—ç¬¦ï¼Œä¾¿äºåç»­ç»˜å›¾ã€‚
# time: 2023.07.27 # author: bioå¤§æé¾™ import pandas as pd film_details_df = pd.read_csv(&#39;/mnt/c/Users/bio_dinosaur/Desktop/films_info.csv&#39;, encoding=&#39;gbk&#39;) film_details_df[&#39;Rating_value&#39;] = [float(i) for i in film_details_df[&#39;Rating_value&#39;]] film_details_df[&#39;Year&#39;] = [str(i) for i in film_details_df[&#39;Year&#39;]] film_details_df.head() ç„¶åçœ‹ä¸€ä¸‹æ•°æ®åŒ…å«çš„å˜é‡ï¼Œæ€è€ƒå¦‚ä½•è¿›è¡Œå¯è§†åŒ–å±•ç¤º~
Film_name	URL	Year	Director	Actors	Genre	Rating_count	Rating_value	IMDb	Description	Interesting_count	Watched_count 0	è¶…èƒ½ä¸€å®¶äºº	https://movie." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/97074a7773fd04cc1df8432d700c6969/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-23T14:17:47+08:00" />
<meta property="article:modified_time" content="2024-01-23T14:17:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ç”µå½±æ•°æ®å¯è§†åŒ–ç»¼åˆåˆ†æ</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>æ•°æ®å¯è§†åŒ–&amp;åˆ†æå®æˆ˜</h2> 
<p><a href="https://editor.csdn.net/md/?articleId=132016703" rel="nofollow">1.1 æ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–</a><br> <a href="https://editor.csdn.net/md/?articleId=132131218" rel="nofollow">1.2 ç”µå½±æ•°æ®å¯è§†åŒ–åˆ†æ</a></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>ç›®å½•</h4> 
 <ul><li><a href="#_1" rel="nofollow">æ•°æ®å¯è§†åŒ–&amp;åˆ†æå®æˆ˜</a></li><li><a href="#_11" rel="nofollow">å‰è¨€</a></li><li><a href="#1__27" rel="nofollow">1. æ•°æ®è®¤çŸ¥</a></li><li><a href="#2__51" rel="nofollow">2. æ•°æ®å¯è§†åŒ–</a></li><li><ul><li><a href="#21_matplotlib_52" rel="nofollow">2.1 è§£å†³matplotlibä¸èƒ½ç»˜åˆ¶ä¸­æ–‡å­—ç¬¦çš„é—®é¢˜</a></li><li><a href="#22__116" rel="nofollow">2.2 æŠ˜çº¿å›¾</a></li><li><a href="#23__165" rel="nofollow">2.3 æŸ±çŠ¶å›¾ç»˜åˆ¶</a></li><li><a href="#24__193" rel="nofollow">2.4 ç®±çº¿å›¾ç»˜åˆ¶</a></li><li><a href="#25__236" rel="nofollow">2.5 é¥¼å›¾</a></li></ul> 
  </li><li><a href="#3_Na_304" rel="nofollow">3. Naå€¼å¤„ç†åŠç›¸å…³æ€§åˆ†æ</a></li><li><ul><li><a href="#31__305" rel="nofollow">3.1 ç›¸å…³æ€§åˆ†æ</a></li><li><a href="#32_Na_337" rel="nofollow">3.2 Naå€¼å¤„ç†</a></li></ul> 
  </li><li><a href="#4_graph_408" rel="nofollow">4. å›¾ï¼ˆgraphï¼‰å¯è§†åŒ–åˆ†æ</a></li><li><a href="#_515" rel="nofollow">æ€»ç»“</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_11"></a>å‰è¨€</h2> 
<p>å¤§å®¶å¥½âœ¨ï¼Œè¿™é‡Œæ˜¯bioğŸ¦–ã€‚ç‚¹èµ+å…³æ³¨ä¸è¿·è·¯ã€‚æ•°æ®å¯è§†åŒ–åœ¨æ•°æ®ç§‘å­¦å’Œæ•°æ®åˆ†æä¸­éå¸¸é‡è¦ï¼Œä¾‹å¦‚è®ºæ–‡ä¸­é…è‰²ç²¾ç¾çš„ç»“æœå›¾ã€PPTæ±‡æŠ¥ä¸­çªå‡ºæ•°æ®å·®å¼‚æ•°æ®åˆ†æå›¾ç­‰ã€‚é€šè¿‡å¯è§†åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°è§‚å¯Ÿå’Œç†è§£æ•°æ®çš„åˆ†å¸ƒã€è¶‹åŠ¿ã€å¼‚å¸¸å€¼ç­‰ç‰¹å¾ã€‚é€šè¿‡å›¾è¡¨å’Œå›¾å½¢ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°å‘ç°æ•°æ®ä¸­çš„æ¨¡å¼å’Œå…³è”ã€‚<br> æœ¬æ–‡æ˜¯å¯¹ä¸Šä¸€ç¯‡åšå®¢ä¸­è·å–çš„æ•°æ®åˆ©ç”¨pythonè¿›è¡Œå¯è§†åŒ–åˆ†æï¼ˆ<a href="https://editor.csdn.net/md/?articleId=132016703" rel="nofollow">æ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–</a>ï¼‰ï¼Œçœ‹å®Œæœ¬æ–‡ä½ å°†å­¦ä¼šï¼š</p> 
<ol><li>è§£å†³<code>matplotlib</code>ä¸èƒ½ç»˜åˆ¶ä¸­æ–‡çš„é—®é¢˜</li><li>å¦‚ä½•ä½¿ç”¨<code>matplotlib</code>åŒ…ç»˜åˆ¶æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€ç®±çº¿å›¾ã€é¥¼å›¾ç­‰</li><li>å¡«å……naçš„æ–¹æ³•</li><li>è¡¡é‡å˜é‡ä¹‹é—´çš„å…³ç³»ä»¥åŠå»ºæ¨¡</li><li>å›¾ï¼ˆgraphï¼‰å¯è§†åŒ–åˆ†æ</li></ol> 
<p>æœ¬æ–‡æ‰€ç”¨çš„æ‰€æœ‰ä»£ç éƒ½åœ¨<a href="https://github.com/CocoConstant/Learning/tree/main/Python/CSDN_codes_document/film_data_analysis">Githubä»“åº“</a>ï¼Œä½ å¯ä»¥ä¸‹è½½åœ¨æœ¬åœ°è¿è¡Œï¼ˆæå‰å®‰è£…å¥½ç›¸å…³åŒ…~ï¼‰ã€‚æ„Ÿå…´è¶£çš„è¯å¯ä»¥<code>star</code><a href="https://github.com/CocoConstant/Learning">æˆ‘çš„ä¸»é¡µ</a>ã€‚</p> 
<p><img src="https://images2.imgbox.com/8b/0a/IivmPwZW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h2><a id="1__27"></a>1. æ•°æ®è®¤çŸ¥</h2> 
<p>åœ¨å¯è§†åŒ–å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹æ•°æ®æœ‰ä¸€ä¸ªåŸºç¡€çš„è®¤è¯†ï¼Œäº†è§£æˆ‘ä»¬çš„æ•°æ®èƒ½åšä»€ä¹ˆæ ·çš„å¯è§†åŒ–åˆ†æï¼Œåˆ†æä¹‹åèƒ½å¾—åˆ°ä»€ä¹ˆæ ·çš„ç»“æœã€‚æœ¬æ–‡æ‰€ç”¨æ•°æ®æ¥æºäºåšå®¢<a href="https://editor.csdn.net/md/?articleId=132016703" rel="nofollow">æ²ˆè…¾å‚æ¼”ç”µå½±æ•°æ®è·å–</a>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç§¯åˆ†ä»CSDNèµ„æºåº“ä¸‹è½½<a href="https://download.csdn.net/download/ouyangk1026/88152949">ä¸‹è½½é“¾æ¥</a>ã€‚æœ¬æ–‡æ‰€ç”¨çš„å…¨éƒ¨ä»£ç å·²<code>notebook</code>çš„æ ¼å¼å­˜å‚¨åœ¨<a href="https://github.com/CocoConstant/Learning/blob/main/daily_work/film_analysis/02_data_analysis.ipynb">Github</a>ï¼Œå»ºè®®ä¸‹è½½ä½¿ç”¨ã€‚</p> 
<p>é¦–å…ˆè¯»å…¥æ–‡ä»¶ï¼Œè¯»å…¥æ—¶è®°å¾—ä½¿ç”¨<code>gbk</code>ç¼–ç æ–¹å¼ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä¸­å…·æœ‰ä¸­æ–‡å­—ç¬¦ã€‚è€Œåå°†<code>Rating_value</code>è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼Œ<code>Year</code>è½¬æ¢ä¸ºå­—ç¬¦ï¼Œä¾¿äºåç»­ç»˜å›¾ã€‚</p> 
<pre><code class="prism language-python"><span class="token comment"># time: 2023.07.27</span>
<span class="token comment"># author: bioå¤§æé¾™</span>

<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
film_details_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/bio_dinosaur/Desktop/films_info.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
film_details_df<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> film_details_df<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
film_details_df<span class="token punctuation">[</span><span class="token string">'Year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> film_details_df<span class="token punctuation">[</span><span class="token string">'Year'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
film_details_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>ç„¶åçœ‹ä¸€ä¸‹æ•°æ®åŒ…å«çš„å˜é‡ï¼Œæ€è€ƒå¦‚ä½•è¿›è¡Œå¯è§†åŒ–å±•ç¤º~</p> 
<pre><code class="prism language-python">Film_name	URL	Year	Director	Actors	Genre	Rating_count	Rating_value	IMDb	Description	Interesting_count	Watched_count
<span class="token number">0</span>	è¶…èƒ½ä¸€å®¶äºº	https<span class="token punctuation">:</span><span class="token operator">//</span>movie<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>subject<span class="token operator">/</span><span class="token number">35228789</span><span class="token operator">/</span>	<span class="token number">2023</span>	å®‹é˜³	<span class="token string">'è‰¾ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'æ²ˆè…¾'</span><span class="token punctuation">,</span> <span class="token string">'é™¶æ…§'</span><span class="token punctuation">,</span> <span class="token string">'å¼ çª'</span><span class="token punctuation">,</span> <span class="token string">'éŸ©å½¦åš'</span><span class="token punctuation">,</span> <span class="token string">'ç™½ä¸½å¨œ'</span><span class="token punctuation">,</span> <span class="token string">'åº·æ™å¨…'</span><span class="token punctuation">,</span> <span class="token string">'...	'</span>å–œå‰§<span class="token string">', '</span>å®¶åº­<span class="token string">', '</span>å¥‡å¹»'	<span class="token number">52844</span>	<span class="token number">4.0</span>	tt12787014	éƒ‘å‰ï¼ˆè‰¾ä¼¦ é¥°ï¼‰æ–°å¼€å‘çš„APPè¢«ç‹¡çŒ¾åˆè¯šå®çš„åæ´¾ä¹ä¹ç§‘å¤«ï¼ˆæ²ˆè…¾ é¥°ï¼‰ç›¯ä¸Šäº†ã€‚å¹¸å¥½éƒ‘å‰ä¸€å®¶äººæ„<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	<span class="token number">54367.0</span>	<span class="token number">36868.0</span>
<span class="token number">1</span>	æ»¡æ±Ÿçº¢	https<span class="token punctuation">:</span><span class="token operator">//</span>movie<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>subject<span class="token operator">/</span><span class="token number">35766491</span><span class="token operator">/</span>	<span class="token number">2023</span>	å¼ è‰ºè°‹	<span class="token string">'æ²ˆè…¾'</span><span class="token punctuation">,</span> <span class="token string">'æ˜“çƒŠåƒçº'</span><span class="token punctuation">,</span> <span class="token string">'å¼ è¯‘'</span><span class="token punctuation">,</span> <span class="token string">'é›·ä½³éŸ³'</span><span class="token punctuation">,</span> <span class="token string">'å²³äº‘é¹'</span><span class="token punctuation">,</span> <span class="token string">'ç‹ä½³æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'æ½˜æ–Œé¾™'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	<span class="token string">'å‰§æƒ…'</span><span class="token punctuation">,</span> <span class="token string">'å–œå‰§'</span><span class="token punctuation">,</span> <span class="token string">'æ‚¬ç–‘'</span><span class="token punctuation">,</span> <span class="token string">'å¤è£…'</span>	<span class="token number">993333</span>	<span class="token number">7.0</span>	tt21148018	å—å®‹ç»å…´å¹´é—´ï¼Œå²³é£æ­»åå››å¹´ï¼Œç§¦æ¡§ç‡å…µä¸é‡‘å›½ä¼šè°ˆã€‚ä¼šè°ˆå‰å¤œï¼Œé‡‘å›½ä½¿è€…æ­»åœ¨å®°ç›¸é©»åœ°ï¼Œæ‰€æºå¯†ä¿¡ä¹Ÿä¸<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	<span class="token number">1085283.0</span>	<span class="token number">71428.0</span>
<span class="token number">2</span>	ç‹¬è¡Œæœˆçƒ	https<span class="token punctuation">:</span><span class="token operator">//</span>movie<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>subject<span class="token operator">/</span><span class="token number">35183042</span><span class="token operator">/</span>	<span class="token number">2022</span>	å¼ åƒé±¼	<span class="token string">'æ²ˆè…¾'</span><span class="token punctuation">,</span> <span class="token string">'é©¬ä¸½'</span><span class="token punctuation">,</span> <span class="token string">'å¸¸è¿œ'</span><span class="token punctuation">,</span> <span class="token string">'æè¯šå„’'</span><span class="token punctuation">,</span> <span class="token string">'é»„æ‰ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'æå˜‰ç¦'</span><span class="token punctuation">,</span> <span class="token string">'éƒç€š'</span><span class="token punctuation">,</span> <span class="token string">'...	'</span>å–œå‰§<span class="token string">', '</span>ç§‘å¹»'	<span class="token number">677450</span>	<span class="token number">6.6</span>	tt14557302	äººç±»ä¸ºæŠµå¾¡å°è¡Œæ˜Ÿçš„æ’å‡»ï¼Œæ‹¯æ•‘åœ°çƒï¼Œåœ¨æœˆçƒéƒ¨ç½²äº†æœˆç›¾è®¡åˆ’ã€‚é™¨çŸ³æå‰æ¥è¢­ï¼Œå…¨å‘˜ç´§æ€¥æ’¤ç¦»æ—¶ï¼Œç»´ä¿®å·¥<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	<span class="token number">815477.0</span>	<span class="token number">40755.0</span>
<span class="token number">3</span>	å››æµ·	https<span class="token punctuation">:</span><span class="token operator">//</span>movie<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>subject<span class="token operator">/</span><span class="token number">35337517</span><span class="token operator">/</span>	<span class="token number">2022</span>	éŸ©å¯’	<span class="token string">'åˆ˜æ˜Šç„¶'</span><span class="token punctuation">,</span> <span class="token string">'åˆ˜æµ©å­˜'</span><span class="token punctuation">,</span> <span class="token string">'æ²ˆè…¾'</span><span class="token punctuation">,</span> <span class="token string">'å°¹æ­£'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”æ‰'</span><span class="token punctuation">,</span> <span class="token string">'å‘¨å¥‡'</span><span class="token punctuation">,</span> <span class="token string">'å¼ å®¥æµ©'</span><span class="token punctuation">,</span> <span class="token string">'...	'</span>å–œå‰§<span class="token string">', '</span>åŠ¨ä½œ<span class="token string">', '</span>çˆ±æƒ…'	<span class="token number">250478</span>	<span class="token number">5.3</span>	tt14509614	åœ¨ç å¤´åšæ‘©æ‰˜è½¦ç‰¹æŠ€è¡¨æ¼”é¡ºä¾¿æ‹‰å®¢çš„å¹´è½»äººå´ä»è€€ï¼ˆåˆ˜æ˜Šç„¶ é¥°ï¼‰ï¼Œä»–å¤šå¹´ä¸è§çš„æµªè¡çˆ¶äº²å´ä»è…¾ï¼ˆæ²ˆè…¾<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	NaN	NaN
<span class="token number">4</span>	æˆ‘å’Œæˆ‘çš„çˆ¶è¾ˆ	https<span class="token punctuation">:</span><span class="token operator">//</span>movie<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>subject<span class="token operator">/</span><span class="token number">35294995</span><span class="token operator">/</span>	<span class="token number">2021</span>	å´äº¬	<span class="token string">'å´äº¬'</span><span class="token punctuation">,</span> <span class="token string">'ç« å­æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'å¾å³¥'</span><span class="token punctuation">,</span> <span class="token string">'æ²ˆè…¾'</span><span class="token punctuation">,</span> <span class="token string">'å´ç£Š'</span><span class="token punctuation">,</span> <span class="token string">'é»„è½©'</span><span class="token punctuation">,</span> <span class="token string">'è¢è¿‘è¾‰'</span><span class="token punctuation">,</span> <span class="token string">'ä»»...	'</span>å‰§æƒ…'	<span class="token number">265552</span>	<span class="token number">6.5</span>	tt15465312	ç»§<span class="token number">2019</span>å¹´ã€Šæˆ‘å’Œæˆ‘çš„ç¥–å›½ã€‹ã€<span class="token number">2020</span>å¹´ã€Šæˆ‘å’Œæˆ‘çš„å®¶ä¹¡ã€‹ï¼Œå›½åº†ä¸‰éƒ¨æ›²ä¹‹ã€Šæˆ‘å’Œæˆ‘çš„çˆ¶è¾ˆã€‹æ¥æ£’å®š<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	NaN	NaN
</code></pre> 
<hr> 
<h2><a id="2__51"></a>2. æ•°æ®å¯è§†åŒ–</h2> 
<h3><a id="21_matplotlib_52"></a>2.1 è§£å†³matplotlibä¸èƒ½ç»˜åˆ¶ä¸­æ–‡å­—ç¬¦çš„é—®é¢˜</h3> 
<p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸­æ–‡å­—ä½“ï¼Œä½¿ç”¨<code>matplotlib</code>ç»˜å›¾æ—¶ï¼Œä¸­æ–‡å­—ç¬¦å°†ä¼šä»¥ç©ºæ–¹å—å±•ç¤ºå‡ºæ¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œé¦–å…ˆä½¿ç”¨ä¸‹é¢çš„ä»£ç è¾“å‡ºå½“å‰ä½ å…·æœ‰çš„å­—ä½“ã€‚ï¼ˆ<strong>å¦‚æœä½ èƒ½å¤Ÿç»˜åˆ¶ä¸­æ–‡å­—ç¬¦ï¼Œè¯·è·³åˆ°2.2</strong>ï¼‰</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>font_manager <span class="token keyword">import</span> FontManager

mpl_fonts <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>name <span class="token keyword">for</span> f <span class="token keyword">in</span> FontManager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ttflist<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'matplotlib.font_managerå†…çš„æ‰€æœ‰å­—ä½“:'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> f <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>mpl_fonts<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\t'</span> <span class="token operator">+</span> f<span class="token punctuation">)</span>
</code></pre> 
<p>æˆ‘çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œå¦‚æœå«æœ‰ä¸­æ–‡å­—ä½“è¿™å¯ä»¥é€šè¿‡æ‹¼éŸ³æ‹¼å‡ºæ¥ï¼Œæ˜¾ç„¶ï¼Œæˆ‘çš„å­—ä½“åº“é‡Œé¢å¹¶æ²¡æœ‰ä¸­æ–‡å­—ä½“ï¼ˆé˜²æ­¢å ç”¨è¿‡å¤šçš„ç¯‡å¹…ï¼Œæˆ‘åˆ é™¤äº†éƒ¨åˆ†å­—ä½“çš„å±•ç¤ºï¼Œä¸ä¼šå½±å“ç†è§£ï¼‰ã€‚</p> 
<pre><code class="prism language-python">matplotlib<span class="token punctuation">.</span>font_managerå†…çš„æ‰€æœ‰å­—ä½“<span class="token punctuation">:</span>
	DejaVu Sans
	DejaVu Sans Display
	STIXGeneral
	STIXSizeThreeSym
	STIXSizeTwoSym
	cmb10
</code></pre> 
<p>æ²¡æœ‰ä¸­æ–‡å­—ä½“å°±éœ€è¦å»ä¸‹è½½ä¸­æ–‡å­—ä½“ï¼Œæ¨èå­—ä½“ä¸‹è½½ç½‘ç«™<a href="https://ziyouziti.com/index-index-list-type-1.html" rel="nofollow">è‡ªç”±å­—ä½“</a>ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå­—ä½“éƒ½æ˜¯å¯ä»¥å…è´¹ä¸‹è½½çš„ï¼Œæœ¬æ–‡é€‰æ‹©çš„<code>é˜¿é‡Œå¦ˆå¦ˆä¸œæ–¹å¤§æ¥·</code>ï¼Œä¸‹è½½é“¾æ¥ä¸º<a href="http://download.ziyouziti.com/f/33689682-769797694-6143f6" rel="nofollow">é˜¿é‡Œå¦ˆå¦ˆä¸œæ–¹å¤§æ¥·</a>ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸‹è½½ä½ å–œæ¬¢çš„å­—ä½“ç”¨äºå›¾ç‰‡ç»˜åˆ¶ã€‚</p> 
<p>è€Œåè¿è¡Œä¸‹åˆ—ä»£ç ï¼Œå¾—åˆ°å­—ä½“å­˜å‚¨è·¯å¾„ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib
<span class="token keyword">print</span><span class="token punctuation">(</span>matplotlib<span class="token punctuation">.</span>matplotlib_fname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœå¦‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ°è¿”å›ç»“æœçš„ä¸Šçº§ç›®å½•ï¼Œå³<code>/home/ouyangkang/software/anaconda3/envs/ML/lib/python3.9/site-packages/matplotlib/mpl-data/</code>ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ‰¾åˆ°<code>fonts</code>æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥<code>fonts</code>æ–‡ä»¶å¤¹æ‰¾åˆ°<code>ttf</code>æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€<code>ttf</code>æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°å¾ˆå¤šä»¥<code>.ttf</code>ä¸ºåç¼€çš„å­—ä½“æ–‡ä»¶ã€‚å°†æˆ‘ä»¬ä¸‹è½½<code>é˜¿é‡Œå¦ˆå¦ˆä¸œæ–¹å¤§æ¥·</code>å­—ä½“ä¸­ä»¥<code>.ttf</code>ç»“å°¾çš„æ–‡ä»¶ç§»å…¥<code>ttf</code>æ–‡ä»¶å¤¹ä¸­ã€‚</p> 
<pre><code class="prism language-python"><span class="token operator">/</span>home<span class="token operator">/</span>bio_dinosaur<span class="token operator">/</span>software<span class="token operator">/</span>anaconda3<span class="token operator">/</span>envs<span class="token operator">/</span>ML<span class="token operator">/</span>lib<span class="token operator">/</span>python3<span class="token punctuation">.</span><span class="token number">9</span><span class="token operator">/</span>site<span class="token operator">-</span>packages<span class="token operator">/</span>matplotlib<span class="token operator">/</span>mpl<span class="token operator">-</span>data<span class="token operator">/</span>matplotlibrc
</code></pre> 
<p>è€Œåè¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œä¼šè¿”å›ä¸€ä¸ªç›®å½•çš„è·¯å¾„ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ‰¾åˆ°ç¼“å­˜çš„<code>fontlist-vxxx.json</code>æ–‡ä»¶ï¼ˆxxxæ˜¯æ•°å­—ï¼‰ï¼Œå°†å…¶åˆ é™¤ï¼Œè€Œåé‡å¯<code>vscode</code>æˆ–è€…ä½ ä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼Œä¼šé‡æ–°ç”Ÿæˆè¯¥æ–‡ä»¶ã€‚</p> 
<pre><code class="prism language-python">matplotlib<span class="token punctuation">.</span>get_cachedir<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>æœ€åå†ä¸€æ¬¡è¿è¡Œè¾“å‡ºæ‰€æœ‰å­—ä½“çš„ä»£ç ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>font_manager <span class="token keyword">import</span> FontManager

mpl_fonts <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>name <span class="token keyword">for</span> f <span class="token keyword">in</span> FontManager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ttflist<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'matplotlib.font_managerå†…çš„æ‰€æœ‰å­—ä½“:'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> f <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>mpl_fonts<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\t'</span> <span class="token operator">+</span> f<span class="token punctuation">)</span>
</code></pre> 
<p>ç»“æœå¦‚ä¸‹ï¼ˆé˜²æ­¢å ç”¨è¿‡å¤šçš„ç¯‡å¹…ï¼Œæˆ‘åˆ é™¤äº†éƒ¨åˆ†å­—ä½“çš„å±•ç¤ºï¼Œä¸ä¼šå½±å“ç†è§£ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªä¾¿æ˜¯<code>é˜¿é‡Œå¦ˆå¦ˆä¸œæ–¹å¤§æ¥·</code>ã€‚</p> 
<pre><code class="prism language-python">matplotlib<span class="token punctuation">.</span>font_managerå†…çš„æ‰€æœ‰å­—ä½“<span class="token punctuation">:</span>
	Alimama DongFangDaKai
	DejaVu Sans
	DejaVu Sans Display
	DejaVu Sans Mono
	DejaVu Serif
	DejaVu Serif Display
	STIXGeneral
	STIXNonUnicode
	STIXSizeFiveSym
</code></pre> 
<hr> 
<h3><a id="22__116"></a>2.2 æŠ˜çº¿å›¾</h3> 
<p>æˆ‘ä»¬çš„æ•°æ®ä¸­åŒ…æ‹¬ç”µå½±çš„åç§°ä»¥åŠç”µå½±çš„è¯„åˆ†ï¼Œå¯ä»¥ç»˜åˆ¶æŠ˜çº¿å›¾æˆ–è€…æŸ±çŠ¶å›¾æ¥å±•ç¤ºå„ä¸ªç”µå½±çš„è¯„åˆ†ï¼Œä½†æ˜¯æŸ±çŠ¶å›¾ä¸é€‚ç”¨äºæ•°æ®é¡¹è¿‡å¤šçš„æƒ…å†µï¼Œå½“æ•°æ®é¡¹è¿‡å¤šæ—¶ï¼ŒæŸ±çŠ¶å›¾å¯èƒ½ä¼šæ˜¾å¾—æ‹¥æŒ¤ï¼Œä¸åˆ©äºæ•°æ®çš„æ¸…æ™°è¡¨è¾¾ã€‚å› æ­¤ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©æŠ˜çº¿å›¾æ¥å±•ç¤ºå„ä¸ªç”µå½±çš„è¯„åˆ†ã€‚</p> 
<p><code>plt.plot()</code>ç»˜åˆ¶æŠ˜çº¿å›¾ï¼Œè¾“å…¥æ•°æ®ä¸ºxè½´æ•°æ®, yè½´æ•°æ®ï¼Œæ•°æ®æ ¼å¼å¯ä»¥æ˜¯<code>DataFrame</code>æˆ–è€…<code>List</code><br> <code>plt.text()</code>ç»˜åˆ¶æ–‡æœ¬ï¼Œå³ä¸‹å›¾ä¸­å„ä¸ªç”µå½±çš„åˆ†æ•°ã€‚è¾“å…¥æ•°æ®xè½´æ•°æ®, yè½´æ•°æ®, lableä¿¡æ¯ã€‚å…¶ä¸­xè½´æ•°æ®, yè½´æ•°æ®ç”¨æ¥å¯¹åº”ï¼Œå¯è§†åŒ–lableä¿¡æ¯ã€‚</p> 
<p>å¯ä»¥çœ‹åˆ°å¦‚æœæˆ‘ä»¬ä¸å¯¹æ•°æ®è¿›è¡Œä»»ä½•å¤„ç†ï¼Œè¾“å‡ºæŠ˜çº¿å›¾æ³¢åŠ¨è¾ƒå¤§ï¼Œä¸åˆ©äºè§‚å¯Ÿæœ€å¤§å€¼ä¸æœ€å°å€¼ï¼ˆåŒæ—¶èƒ½å¤Ÿå‘ç°å›§å¦ˆçš„â€œå›§â€å­—æ²¡æœ‰å±•ç¤ºå‡ºæ¥ï¼Œè¯´æ˜é˜¿é‡Œå¦ˆå¦ˆä¸œæ–¹å¤§æ¥·ä¸­ä¸åŒ…å«è¿™ä¸ªå­—ï¼‰ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

movie_score <span class="token operator">=</span> film_details_df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
labels <span class="token operator">=</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># å›¾ç‰‡å¤§å°</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># è®¾ç½®ä¸­æ–‡å­—ä½“</span>
plt<span class="token punctuation">.</span>rc<span class="token punctuation">(</span><span class="token string">"font"</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">'Alimama DongFangDaKai'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.size'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>

plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># å­—ä½“å€¾æ–œ</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>
<span class="token comment"># ç»˜åˆ¶å¯¹åº”çš„åˆ†æ•°</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/af/20/XDGO5mE4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œæ ¹æ®å¾—åˆ†å¯¹æ•°æ®è¿›è¡Œå‡åºæ’åºã€‚å…¶ç»“æœæ›´åŠ å¹³æ»‘ï¼Œèƒ½å¤Ÿå®¹æ˜“åœ°å‘ç°ã€Šæ—¥ä¸è½é…’åº—ã€‹æ˜¯è¯¥æ‰¹æ•°æ®ä¸­è¯„åˆ†æœ€ä½çš„ç”µå½±ï¼Œã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹æ˜¯è¯¥æ‰¹æ•°æ®ä¸­è¯„åˆ†æœ€é«˜çš„ç”µå½±ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯ä½¿ç”¨<code>sort_values()</code>å°±å®Œæˆå¯¹æ•°æ®æ¡†å®Œæˆæ’åºï¼Œä¸å¾—ä¸å†æ¬¡æ„Ÿå¹<strong>pandas</strong>çš„å¼ºå¤§ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

movie_score <span class="token operator">=</span> film_details_df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'Rating_value'</span><span class="token punctuation">)</span>
labels <span class="token operator">=</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># è®¾ç½®ä¸­æ–‡å­—ä½“</span>
plt<span class="token punctuation">.</span>rc<span class="token punctuation">(</span><span class="token string">"font"</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">'Alimama DongFangDaKai'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.size'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>

plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>movie_score<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> movie_score<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/33/iEBugWAW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h3><a id="23__165"></a>2.3 æŸ±çŠ¶å›¾ç»˜åˆ¶</h3> 
<p>æ•°æ®å½“ä¸­åŒ…å«å¹´ä»½ä¿¡æ¯ï¼Œå¯ä»¥ç»Ÿè®¡æ¯å¹´å‚æ¼”ç”µå½±çš„æ•°é‡ä»¥åŠç”µå½±çš„å¹³å‡åˆ†ï¼Œä»è€Œåˆ†ææ¼”å‘˜å‚æ¼”çš„ç”µå½±çš„ä¸€èˆ¬åœ¨ä»€ä¹ˆæ°´å¹³ã€‚åˆ©ç”¨<code>pandas</code>çš„<code>groupby()</code>å‡½æ•°å°†ç›¸åŒå¹´ä»½çš„æ•°æ®åˆå¹¶åˆ°åŒä¸€ä¸ªç±»åˆ«ä¸­ï¼Œè€Œåå¯¹åŒç±»åˆ«ä¸­çš„ç”µå½±è¯„åˆ†è®¡ç®—å¹³å‡åˆ†ï¼Œç”µå½±æ•°é‡ã€‚</p> 
<p><code>plt.bar()</code>ç»˜åˆ¶æŸ±çŠ¶å›¾ï¼Œè¾“å…¥æ•°æ®ä¸ºxè½´æ•°æ®ï¼Œè¿™é‡Œæ˜¯å¹´ä»½ï¼›yè½´æ•°æ®ï¼Œè¿™é‡Œæ˜¯ç»Ÿè®¡çš„ç”µå½±æ•°é‡ã€‚<br> <code>plt.plot()</code>ç»˜åˆ¶æŠ˜çº¿å›¾ï¼ŒåŒ2.2ã€‚<br> <code>plt.legend()</code>ç»˜åˆ¶å›¾ä¾‹ï¼Œä»¥<code>plt.bar(), plt.plot()</code>ä¸­çš„<code>label</code>ä¸ºä¿¡æ¯ã€‚<br> <code>plt.title()</code>ç»˜åˆ¶æ ‡é¢˜ã€‚</p> 
<p>é€šè¿‡è§£è¯»å›¾ç‰‡å¯çŸ¥ï¼Œ2020å¹´è¯¥æ¼”å‘˜å‚æ¼”ç”µå½±æ•°é‡æœ€å¤šï¼Œè¾¾åˆ°äº†5éƒ¨ã€‚åŒæ—¶è¯¥æ¼”å‘˜çš„å‚æ¼”ç”µå½±çš„å¹³å‡è¯„åˆ†ä¸º5.48ã€‚åœ¨2014ã€2015å¹´ï¼Œè¿™ä¸¤å¹´çš„ç”µå½±å¹³å‡åˆ†è¶…è¿‡äº†7åˆ†ã€‚æ€»ä½“è€Œè¨€ï¼Œè¯¥æ¼”å‘˜çš„å‚æ¼”çš„ç”µå½±å¹³å‡è¯„åˆ†å‘ˆç°ä¸‹é™çš„è¶‹åŠ¿ï¼Œæ•°é‡ä¸Šå‘ˆç°ä¸Šå‡çš„è¶‹åŠ¿ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

year_analysis <span class="token operator">=</span> film_details_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'Year'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'Rating_value'</span><span class="token punctuation">:</span><span class="token string">'mean'</span><span class="token punctuation">,</span> <span class="token string">'Film_name'</span><span class="token punctuation">:</span><span class="token string">'count'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>year_analysis<span class="token punctuation">.</span>index<span class="token punctuation">,</span> year_analysis<span class="token punctuation">[</span><span class="token string">'Film_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Film count'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'greenyellow'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>year_analysis<span class="token punctuation">.</span>index<span class="token punctuation">,</span> year_analysis<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Averge score'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'orange'</span><span class="token punctuation">)</span>
<span class="token comment"># add score</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>year_analysis<span class="token punctuation">.</span>Rating_value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>year_analysis<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> year_analysis<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">round</span><span class="token punctuation">(</span>year_analysis<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
<span class="token comment"># add legend</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># add title</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Averge Score And Count of Films Each Year'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9f/05/NKDydBdu_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h3><a id="24__193"></a>2.4 ç®±çº¿å›¾ç»˜åˆ¶</h3> 
<p>å¯¹ç”µå½±çš„è¯„åˆ†å¯¹ç”µå½±åˆ’åˆ†ç­‰çº§ï¼ŒæŒ‰ç…§äº”æ˜Ÿæ¡£ 8.5-10åˆ†ã€å››æ˜Ÿæ¡£ 7-8.5åˆ†ã€ä¸‰æ˜Ÿæ¡£ 6-7åˆ†ã€äºŒæ˜Ÿæ¡£ 4.5-6åˆ†ã€ä¸€æ˜Ÿæ¡£ 2-4.5åˆ†çš„æ ‡å‡†åˆ†çº§ã€‚è¿™éƒ¨åˆ†ä»£ç å¤§éƒ¨åˆ†æ˜¯æ•°æ®å¤„ç†çš„ä»£ç ï¼Œå¦‚æœæœ‰é—®é¢˜å¯ä»¥ç•™è¨€æˆ–ç§ä¿¡~</p> 
<p>ç®±çº¿å›¾æ˜¯ä¸€ç§ç”¨äºæ˜¾ç¤ºæ•°æ®åˆ†å¸ƒæƒ…å†µçš„ç»Ÿè®¡å›¾è¡¨ï¼Œå®ƒé€šè¿‡å±•ç¤ºæ•°æ®çš„ä¸­ä½æ•°ã€å››åˆ†ä½æ•°ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ç­‰ç»Ÿè®¡ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£æ•°æ®çš„é›†ä¸­è¶‹åŠ¿ã€ç¦»æ•£ç¨‹åº¦ä»¥åŠæ˜¯å¦å­˜åœ¨å¼‚å¸¸å€¼ã€‚</p> 
<p><code>plt.boxplot()</code>ç»˜åˆ¶ç®±çº¿å›¾ï¼Œè¾“å…¥æ•°æ®æ˜¯åˆ†çº§æ•°æ®ï¼Œè¿™é‡Œçš„æ•°æ®æ ¼å¼æ˜¯åµŒå¥—çš„åˆ—è¡¨ï¼Œç±»ä¼¼äº<code>[[level_1_1, level_1_2], [...]], [...]</code>ã€‚<br> <code>plt.plot()</code>ç»˜åˆ¶ç‚¹å›¾ï¼ŒåŒ2.2ï¼Œè¿™é‡Œé€‰æ‹©<code>ro</code>ï¼Œæ•…ä¸ä¼šè¿æ¥ä¸”ä¸ºçº¢è‰²çš„åœ†ï¼Œ<code>alpha</code>æ˜¯é€æ˜åº¦çš„è®¾ç½®ã€‚</p> 
<p>ä»å›¾ä¸­å¯çŸ¥ï¼Œè¯¥æ¼”å‘˜æ²¡æœ‰äº”æ˜Ÿæ¡£çš„ç”µå½±ï¼Œå“ªæ€•æ˜¯äººå°½çš†çŸ¥çš„ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹ä¹Ÿåªæœ‰å››æ˜Ÿæ¡£ã€‚åŒæ—¶åœ¨ä¸€æ˜Ÿæ¡£æ•°æ®ã€äºŒæ˜Ÿæ¡£æ•°æ®ä¸­æ•°æ®è¾ƒä¸ºç¦»æ•£ï¼›ä¸‰æ˜Ÿæ¡£æ•°æ®ã€å››æ˜Ÿæ¡£æ•°æ®ä¸­æ•°æ®è¾ƒä¸ºé›†ä¸­ã€‚ç®±çº¿å›¾ä¸Šçš„é€æ˜åœ†ç‚¹åœ¨ä¸‰æ˜Ÿæ¡£æœ€ä¸ºå¯Œé›†ï¼Œå› æ­¤è¯¥æ¼”å‘˜å‚æ¼”çš„ç”µå½±è¯„åˆ†å¤§éƒ¨åˆ†ä½äºä¸‰æ˜Ÿæ¡£ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">level_assignment</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">8.5</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Five'</span>
    <span class="token keyword">elif</span> score <span class="token operator">&gt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Four'</span>
    <span class="token keyword">elif</span> score <span class="token operator">&gt;=</span> <span class="token number">6</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Three'</span>
    <span class="token keyword">elif</span> score <span class="token operator">&gt;=</span> <span class="token number">4.5</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Two'</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'One'</span>
film_details_df<span class="token punctuation">[</span><span class="token string">'Level'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>level_assignment<span class="token punctuation">,</span> film_details_df<span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># draw box figure</span>
level_analysis <span class="token operator">=</span> <span class="token punctuation">[</span>film_details_df<span class="token punctuation">[</span>film_details_df<span class="token punctuation">[</span><span class="token string">'Level'</span><span class="token punctuation">]</span> <span class="token operator">==</span> level<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> level <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"One"</span><span class="token punctuation">,</span> <span class="token string">"Two"</span><span class="token punctuation">,</span> <span class="token string">"Three"</span><span class="token punctuation">,</span> <span class="token string">"Four"</span><span class="token punctuation">,</span> <span class="token string">"Five"</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"One Star"</span><span class="token punctuation">,</span> <span class="token string">"Two Star"</span><span class="token punctuation">,</span> <span class="token string">"Three Star"</span><span class="token punctuation">,</span> <span class="token string">"Four Star"</span><span class="token punctuation">,</span> <span class="token string">"Five Star"</span><span class="token punctuation">]</span>
colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">,</span> <span class="token string">'lightblue'</span><span class="token punctuation">,</span> <span class="token string">'lightgreen'</span><span class="token punctuation">,</span> <span class="token string">'turquoise'</span><span class="token punctuation">,</span> <span class="token string">'mediumslateblue'</span><span class="token punctuation">]</span>

bplot <span class="token operator">=</span> plt<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>level_analysis<span class="token punctuation">,</span> labels<span class="token operator">=</span>labels<span class="token punctuation">,</span> patch_artist<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> vert<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># fill color</span>
<span class="token keyword">for</span> patch<span class="token punctuation">,</span> color <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>bplot<span class="token punctuation">[</span><span class="token string">'boxes'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> colors<span class="token punctuation">)</span><span class="token punctuation">:</span>
    patch<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span>color<span class="token punctuation">)</span>

<span class="token comment"># add dots to box</span>
<span class="token keyword">for</span> num<span class="token punctuation">,</span> level <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"One"</span><span class="token punctuation">,</span> <span class="token string">"Two"</span><span class="token punctuation">,</span> <span class="token string">"Three"</span><span class="token punctuation">,</span> <span class="token string">"Four"</span><span class="token punctuation">,</span> <span class="token string">"Five"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>film_details_df<span class="token punctuation">[</span>film_details_df<span class="token punctuation">[</span><span class="token string">'Level'</span><span class="token punctuation">]</span> <span class="token operator">==</span> level<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> film_details_df<span class="token punctuation">[</span>film_details_df<span class="token punctuation">[</span><span class="token string">'Level'</span><span class="token punctuation">]</span> <span class="token operator">==</span> level<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'ro'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/22/da/nkHsvpJp_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h3><a id="25__236"></a>2.5 é¥¼å›¾</h3> 
<p>é€šè¿‡ç”µå½±æ‰€å±ç±»åˆ«å¯ä»¥åˆ¤æ–­å‡ºè¯¥æ¼”å‘˜å±äºä»€ä¹ˆç±»å‹çš„æ¼”å‘˜ï¼Œä¾‹å¦‚åŠ¨ä½œæ¼”å‘˜ã€å–œå‰§æ¼”å‘˜ç­‰ç­‰ã€‚è¿™é‡Œé‡‡ç”¨é¥¼å›¾æ¥å¯è§†åŒ–ã€‚é¥¼å›¾æ˜¯ä¸€ç§ç”¨äºå±•ç¤ºåˆ†ç±»æ•°æ®å æ¯”å…³ç³»çš„å›¾è¡¨ï¼Œå®ƒé€šè¿‡å°†æ•°æ®åˆ†æˆå‡ ä¸ªæ‰‡å½¢åŒºåŸŸï¼Œæ¯ä¸ªæ‰‡å½¢åŒºåŸŸçš„å¤§å°è¡¨ç¤ºå¯¹åº”ç±»åˆ«åœ¨æ€»ä½“ä¸­çš„å æ¯”ã€‚</p> 
<p><code>plt.subplots()</code> å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå…·æœ‰ç‰¹å®šå¤§å°å’Œç­‰å®½ç­‰é«˜æ¯”çš„å­å›¾ï¼Œå‚æ•°<code>figsize</code>è®¾ç½®å›¾ç‰‡å¤§å°ï¼Œå‚æ•°<code>subplot_kw</code>æ˜¯ä¼ é€’ç»™å­å›¾çš„å…³é”®å­—å‚æ•°ã€‚<br> <code>pli.pie()</code>ç»˜åˆ¶é¥¼å›¾ï¼Œè¾“å…¥æ•°æ®éœ€è¦æ˜¯ä¸€ç»´æ•°æ®ã€‚<br> <code>ax.legend()</code>ä¸ºå­å›¾æ·»åŠ å›¾ä¾‹ï¼Œè¾“å…¥æ•°æ®åŒæ ·ä¸ºä¸€ç»´æ•°æ®ã€‚</p> 
<p>é€šè¿‡å¯¹é¥¼å›¾çš„å¯è§†åŒ–å¯çŸ¥ï¼Œè¯¥æ¼”å‘˜å‚æ¼”çš„å¤§éƒ¨åˆ†ç”µå½±ç±»å‹ä¸ºå–œå‰§ï¼Œå…¶æ¬¡åˆ†åˆ«æ˜¯å‰§æƒ…å’Œçˆ±æƒ…ã€‚åŸºäºè·å–çš„æ•°æ®å¯ä»¥å°†è¯¥æ¼”å‘˜å®šä¹‰ä¸ºå–œå‰§æ¼”å‘˜ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

genre_dic <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
total_num <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> film_details_df<span class="token punctuation">.</span>Genre<span class="token punctuation">:</span>
    genre <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    genre <span class="token operator">=</span> <span class="token punctuation">[</span>k<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> genre<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> g <span class="token keyword">in</span> genre<span class="token punctuation">:</span>
        genre_dic<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">=</span> genre_dic<span class="token punctuation">.</span>get<span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
        total_num <span class="token operator">+=</span> <span class="token number">1</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subplot_kw<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">'equal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

wages<span class="token punctuation">,</span> text<span class="token operator">=</span>plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>genre_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Genre'</span><span class="token punctuation">,</span> <span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Count <span class="token operator">/</span> total_num<span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        labels<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>genre_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Genre'</span><span class="token punctuation">,</span> <span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Genre<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>wages<span class="token punctuation">,</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>genre_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Genre'</span><span class="token punctuation">,</span> <span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Genre<span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">'center left'</span><span class="token punctuation">,</span> bbox_to_anchor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/85/6b/xp2ZRRgn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> åŒæ—¶ï¼Œæœ¬æ–‡è¿˜ç»™å‡ºäº†ç»˜åˆ¶å‡çº§ç‰ˆé¥¼å›¾çš„ä»£ç ï¼Œç®€ç§°ä¸ºé¥¼å›¾plusï¼ˆå¤§é¥¼ï¼‰ã€‚å¯ä»¥è‡ªå·±å°è¯•å»è§£è¯»ä¸€ä¸‹ä»£ç ~ï¼Œé‡åˆ°ä¸ä¼šçš„å¯ä»¥<code>print()</code>çœ‹çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆå¦–é­”é¬¼æ€ªã€‚<a href="https://matplotlib.org/stable/gallery/pie_and_polar_charts/pie_and_donut_labels.html#sphx-glr-gallery-pie-and-polar-charts-pie-and-donut-labels-py" rel="nofollow">é¥¼å›¾pluså‚è€ƒè¿æ¥</a>ã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subplot_kw<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">"equal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

wedges<span class="token punctuation">,</span> texts <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>genre_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Genre'</span><span class="token punctuation">,</span> <span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Count<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                       wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startangle<span class="token operator">=</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span>

bbox_props <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>boxstyle<span class="token operator">=</span><span class="token string">'square, pad=0.3'</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">'k'</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">0.72</span><span class="token punctuation">)</span>

kw <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>arrowprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>arrowstyle<span class="token operator">=</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          bbox<span class="token operator">=</span>bbox_props<span class="token punctuation">,</span>
          zorder<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
          va<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> p <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>wedges<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ang <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>theta2 <span class="token operator">-</span> p<span class="token punctuation">.</span>theta1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>theta1
    y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>np<span class="token punctuation">.</span>deg2rad<span class="token punctuation">(</span>ang<span class="token punctuation">)</span><span class="token punctuation">)</span>
    x <span class="token operator">=</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>np<span class="token punctuation">.</span>deg2rad<span class="token punctuation">(</span>ang<span class="token punctuation">)</span><span class="token punctuation">)</span>

    horizontalaligment <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'right'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'left'</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    connectionstyle <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"angle, angleA=0, angleB=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>ang<span class="token punctuation">}</span></span><span class="token string">"</span></span>
    kw<span class="token punctuation">[</span><span class="token string">'arrowprops'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'connectionstyle'</span><span class="token punctuation">:</span>connectionstyle<span class="token punctuation">}</span><span class="token punctuation">)</span>

    ax<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>genre_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Genre'</span><span class="token punctuation">,</span> <span class="token string">'Count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Genre<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                xy<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
                xytext<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1.35</span><span class="token operator">*</span>np<span class="token punctuation">.</span>sign<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>
                horizontalalignment<span class="token operator">=</span>horizontalaligment<span class="token punctuation">,</span>
                <span class="token operator">**</span>kw<span class="token punctuation">)</span>
    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/16/d4/odgx7Ic4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h2><a id="3_Na_304"></a>3. Naå€¼å¤„ç†åŠç›¸å…³æ€§åˆ†æ</h2> 
<h3><a id="31__305"></a>3.1 ç›¸å…³æ€§åˆ†æ</h3> 
<p>åœ¨æ•°æ®è·å–é˜¶æ®µï¼Œéƒ¨åˆ†æ•°æ®å­˜åœ¨ç¼ºå¤±çš„æƒ…å†µã€‚å¦‚ä½•å¤„ç†ç¼ºå¤±æ•°æ®æ˜¯æ•°æ®å¤„ç†ä¸€ç›´ä¸€æ¥é¢ä¸´çš„é—®é¢˜ï¼Œæœ€ç®€å•åŒæ—¶ä¹Ÿæ˜¯æœ€å®¹æ˜“çš„æ“ä½œæ–¹æ³•æ˜¯å°†ç¼ºå¤±å€¼å¡«å……ä¸ºå¹³å‡æ•°ã€ä¸­ä½æ•°ä¹‹ç±»çš„æ•°æ®ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¹¶æ²¡æœ‰è€ƒè™‘ä¸åŒå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œä¾‹å¦‚ä¸€éƒ¨ç”µå½±è¯„åˆ†ä¸º9.0åˆ†ï¼Œè¿™éƒ¨ç”µå½±çš„è¯„è®ºäººæ•°ä¸º10ä¸‡ï¼Œå¦ä¸€éƒ¨ç”µå½±çš„è¯„åˆ†ä¸º6.0åˆ†ï¼Œè¯„è®ºäººæ•°ä¸º5ä¸‡ï¼Œä½†ç¼ºå¤±è¯„è®ºäººæ•°çš„ç”µå½±è¯„åˆ†ä¸º5.3åˆ†ï¼Œå…¶è¯„è®ºäººæ•°å¡«å……ä¸ºå¹³å‡å€¼7.5ä¸‡ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„æ“ä½œã€‚</p> 
<p>å› æ­¤ï¼Œå¯ä»¥è€ƒè™‘<strong>ä½¿ç”¨æ¨¡å‹é¢„æµ‹</strong>ç¼ºå¤±å€¼ã€‚è¿™é‡Œé¦–å…ˆå°†æ•°æ®è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼Œä¾¿äºåç»­æ¨¡å‹çš„æ‹Ÿåˆä¸é¢„æµ‹ã€‚åŒæ—¶å°†æ•°æ®åˆ’åˆ†ä¸ºä¸å«ç¼ºå¤±å€¼éƒ¨åˆ†ã€å«ç¼ºå¤±å€¼éƒ¨åˆ†ã€‚ä½¿ç”¨<code>seaborn</code>åº“ä¸­çš„<code>pairplot()</code>å‡½æ•°ç»˜åˆ¶ä¸å«ç¼ºå¤±å€¼éƒ¨åˆ†æ•°æ®ä¸¤ä¸¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚åœ¨æœ¬æ–‡ä¸­ç¼ºå¤±çš„æ•°æ®ä¸º<code>Interesting_count</code>ã€<code>Watched_count</code>ã€‚</p> 
<p>ä»ç»˜åˆ¶çš„å›¾ä¸­å¯ä»¥çœ‹å‡º<code>Interesting_count</code>ä¸<code>Rating_count</code>ã€<code>Rating_value</code>ä¹‹é—´ç›¸å…³æ€§è¾ƒå¥½ï¼›è€Œ<code>Watched_count</code>ä¸<code>Rating_count</code>ã€<code>Rating_value</code>ä¹‹é—´ç›¸å…³æ€§è¾ƒå·®ã€‚å› æ­¤å¯ä»¥è€ƒè™‘ä½¿ç”¨çº¿æ€§æ¨¡å‹æ‹Ÿåˆ<code>Interesting_count</code>ï¼Œç”¨éçº¿æ€§æ¨¡å‹æ‹Ÿåˆ<code>Watched_count</code>ã€‚</p> 
<pre><code class="prism language-python"><span class="token comment"># data pre-procession</span>
fit_data <span class="token operator">=</span> film_details_df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">,</span> <span class="token string">'Interesting_count'</span><span class="token punctuation">,</span> <span class="token string">'Watched_count'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment"># transform data format from str to float</span>
fit_data<span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> fit_data<span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fit_data<span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> fit_data<span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fit_data<span class="token punctuation">[</span><span class="token string">'Watched_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> fit_data<span class="token punctuation">[</span><span class="token string">'Watched_count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># split data by Na</span>
known_data <span class="token operator">=</span> fit_data<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>subset<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">,</span> <span class="token string">'Watched_count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
unknown_data <span class="token operator">=</span> fit_data<span class="token punctuation">[</span>fit_data<span class="token punctuation">.</span>isna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># visualization</span>
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token comment"># correlation analysis</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>known_data<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">"reg"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/54/71/7pOLFOM1_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å¦‚æœä½ å¯¹äºä¸Šè¯‰ç›¸å…³æ€§çš„åˆ†æä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯ä»¥ä»ä¸‹å›¾ä¸­æ›´å¥½äº†è§£ä¸¤ä¸¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å¦‚<code>Rating_value</code>ä¸<code>Interesting_count</code>ä¹‹é—´çš„ç›¸å…³æ€§æ˜¯0.68ï¼Œ<code>Rating_value</code>ä¸<code>Watched_count</code>ä¹‹é—´çš„ç›¸å…³æ€§ä»…ä¸º0.33ã€‚ä¸ä¸Šè¯‰ç›¸å…³æ€§æè¿°ä¸€è‡´ã€‚<br> è¿™é‡Œé¦–å…ˆä½¿ç”¨<code>pandas</code>ä¸­çš„<code>corr()</code>è®¡ç®—å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè€Œåä½¿ç”¨<code>seaborn</code>çš„<code>heatmap()</code>ç»˜åˆ¶çƒ­å›¾ã€‚åŒæ—¶çƒ­å›¾æ˜¯ä¸€ç§å¾ˆå¥½å±•ç¤ºç›¸å…³æ€§çš„å¯è§†åŒ–æ–¹æ³•~</p> 
<pre><code class="prism language-python">sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>known_data<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> fmt<span class="token operator">=</span><span class="token string">'.2f'</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>sns<span class="token punctuation">.</span>cubehelix_palette<span class="token punctuation">(</span>as_cmap<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/0e/GPnMXeZt_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h3><a id="32_Na_337"></a>3.2 Naå€¼å¤„ç†</h3> 
<p>å¦‚3.1æ‰€è¿°ï¼Œæœ¬æ–‡ä½¿ç”¨çº¿æ€§æ¨¡å‹æ‹Ÿåˆ<code>Interesting_count</code>ï¼Œç”¨éçº¿æ€§æ¨¡å‹æ‹Ÿåˆ<code>Watched_count</code>ã€‚è¿™é‡Œé‡‡ç”¨å¤šå…ƒçº¿æ€§æ¨¡å‹ä»¥åŠæ”¯æŒå‘é‡æœºæ¨¡å‹åˆ†åˆ«æ‹Ÿåˆä¸¤ä¸ªå˜é‡ã€‚æ‰€é‡‡ç”¨çš„åŒ…ä¸º<code>sklearn</code>ï¼Œä¸€ä¸ªå¼ºå¤§æœºå™¨å­¦ä¹ åŒ…ï¼Œåªéœ€è¦ç®€å•çš„ä½¿ç”¨<code>fit()</code>ã€<code>predict()</code>å°±å¯ä»¥å®Œæˆæ•°æ®çš„æ‹Ÿåˆä¸é¢„æµ‹ã€‚è¿™é‡Œå°±ä¸å¤šåšä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨æˆ–è®¢é˜…æˆ‘çš„ä¸“æ <a href="https://blog.csdn.net/ouyangk1026/category_12047787.html">æœºå™¨å­¦ä¹ </a>ï¼ˆæŒç»­æ›´æ–°ä¸­~ï¼‰ã€‚</p> 
<pre><code class="prism language-python"><span class="token comment">#################### linear model ####################</span>
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> linear_model

<span class="token comment"># interesting count model</span>
reg_interesting <span class="token operator">=</span> linear_model<span class="token punctuation">.</span>LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>
reg_interesting<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>known_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> known_data<span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># slope</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>reg_interesting<span class="token punctuation">.</span>coef_<span class="token punctuation">)</span>
<span class="token comment"># intercept</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>reg_interesting<span class="token punctuation">.</span>intercept_<span class="token punctuation">)</span>
<span class="token comment"># fill na</span>
unknown_data<span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>reg_interesting<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>unknown_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#################### svm model ####################</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>svm <span class="token keyword">import</span> SVR
<span class="token comment"># from sklearn.metrics import mean_squared_error</span>

x_train <span class="token operator">=</span> known_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">,</span> <span class="token string">'Interesting_count'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
y_train <span class="token operator">=</span> known_data<span class="token punctuation">[</span><span class="token string">'Watched_count'</span><span class="token punctuation">]</span>

svr_model <span class="token operator">=</span> SVR<span class="token punctuation">(</span>kernel<span class="token operator">=</span><span class="token string">'linear'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>
<span class="token comment"># fill na</span>
unknown_data<span class="token punctuation">[</span><span class="token string">'Watched_count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> svr_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>unknown_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">,</span> <span class="token string">'Interesting_count'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>éçº¿æ€§æ¨¡å‹ä¸å¯ä»¥å¯è§†åŒ–ï¼Œç”±äºæ•°æ®ä¸å¤šï¼Œä¸å¤ªå¥½åæ˜ é¢„æµ‹æ•°æ®çš„å‡†ç¡®æ€§ï¼Œå½“ç„¶è¿™é‡Œè¿™æ˜¯å°†å®ƒä½œä¸ºä¸€ä¸ªç¤ºä¾‹æ¥ä»‹ç»ä½¿ç”¨æ¨¡å‹é¢„æµ‹ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚ä½†æ˜¯çº¿æ€§æ¨¡å‹å¯ä»¥å¯è§†åŒ–ï¼Œå°†çœŸå®æ•°æ®ç”»ä¸ºç‚¹ï¼Œé¢„æµ‹æ•°æ®ç»˜åˆ¶ä¸ºçº¿æ¡ï¼Œå¯è§†åŒ–é€æ˜åŒºå¸¦ä½œä¸º0.95çš„ç½®ä¿¡åŒºé—´ã€‚ä»å›¾ä¸­å¯çŸ¥ä»…ä»…åªæœ‰ä¸¤ä¸ªç‚¹åœ¨0.95ç½®ä¿¡åŒºé—´ä¹‹å¤–ï¼Œè¯´æ˜çº¿æ€§æ¨¡å‹æ‹Ÿåˆçš„éå¸¸å¥½~</p> 
<pre><code class="prism language-python"><span class="token comment">#################### linear model visualization ####################</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">as</span> stats

coef <span class="token operator">=</span> reg_interesting<span class="token punctuation">.</span>coef_
intercept <span class="token operator">=</span> reg_interesting<span class="token punctuation">.</span>intercept_

x_test <span class="token operator">=</span> known_data<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Rating_count'</span><span class="token punctuation">,</span> <span class="token string">'Rating_value'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
y_pred <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>x_test<span class="token punctuation">,</span> coef<span class="token punctuation">)</span> <span class="token operator">+</span> intercept
y_test <span class="token operator">=</span> known_data<span class="token punctuation">[</span><span class="token string">'Interesting_count'</span><span class="token punctuation">]</span>

<span class="token comment"># confidence area</span>
confidence <span class="token operator">=</span> <span class="token number">0.95</span>
alpha <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> confidence

residuals <span class="token operator">=</span> y_test <span class="token operator">-</span> y_pred
std_err <span class="token operator">=</span> np<span class="token punctuation">.</span>std<span class="token punctuation">(</span>residuals<span class="token punctuation">,</span> ddof<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

margin_of_error <span class="token operator">=</span> std_err <span class="token operator">*</span>  stats<span class="token punctuation">.</span>t<span class="token punctuation">.</span>ppf<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> alpha <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> df<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>y_pred<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

confidence_lower <span class="token operator">=</span> y_pred <span class="token operator">-</span> margin_of_error
confidence_upper <span class="token operator">=</span> y_pred <span class="token operator">+</span> margin_of_error

sorted_indices <span class="token operator">=</span> np<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span>y_pred<span class="token punctuation">)</span>
y_pred_sorted <span class="token operator">=</span> y_pred<span class="token punctuation">[</span>sorted_indices<span class="token punctuation">]</span>
confidence_lower_sorted <span class="token operator">=</span> confidence_lower<span class="token punctuation">[</span>sorted_indices<span class="token punctuation">]</span>
confidence_upper_sorted <span class="token operator">=</span> confidence_upper<span class="token punctuation">[</span>sorted_indices<span class="token punctuation">]</span>

plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y_pred_sorted<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>y_test<span class="token punctuation">)</span><span class="token punctuation">[</span>sorted_indices<span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Actual'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">min</span><span class="token punctuation">(</span>y_pred_sorted<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>y_pred_sorted<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token builtin">min</span><span class="token punctuation">(</span>y_test<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>y_test<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Predicted'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>fill_between<span class="token punctuation">(</span>y_pred_sorted<span class="token punctuation">,</span> confidence_lower_sorted<span class="token punctuation">,</span> confidence_upper_sorted<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'95% Confidence Interval'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predicted'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Actual'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/d2/CvFDRmXX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h2><a id="4_graph_408"></a>4. å›¾ï¼ˆgraphï¼‰å¯è§†åŒ–åˆ†æ</h2> 
<p>å›¾æ˜¯æŒ‡ä»¥å›¾ï¼ˆæˆ–ç½‘ç»œï¼‰çš„å½¢å¼æ¥è¡¨ç¤ºå’Œç»„ç»‡çš„æ•°æ®ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€ç†è§£çš„å›¾ç‰‡ã€‚åœ¨å›¾æ•°æ®ä¸­ï¼Œæ•°æ®å…ƒç´ è¢«è¡¨ç¤ºä¸ºèŠ‚ç‚¹ï¼ˆverticesï¼‰å’Œè¾¹ï¼ˆedgesï¼‰ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ç”¨è¾¹æ¥è¿æ¥ã€‚ å›¾æ•°æ®èƒ½å¤Ÿè‡ªç„¶åœ°è¡¨ç¤ºå®ä½“ä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œå¦‚ç¤¾äº¤ç½‘ç»œä¸­çš„æœ‹å‹å…³ç³»ã€ç‰©æµç½‘ç»œä¸­çš„è¿è¾“è·¯å¾„ç­‰ã€‚</p> 
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œä½¿ç”¨<code>Fruchterman-Reingold</code>ç®—æ³•æ¥å±•ç¤º<code>æ¼”å‘˜-(è”ç³»)-æ¼”å‘˜</code>å…³ç³»ï¼ˆè½¯ä»¶ï¼š<code>Gephi</code>ï¼‰ï¼Œä½¿ç”¨<code>Neo4j</code>å¯è§†åŒ–<code>å¯¼æ¼”-(å¯¼æ¼”)&gt;ç”µå½±-(åŒ…æ‹¬)&gt;æ¼”å‘˜</code>ï¼Œ<code>Fruchterman-Reingold</code>ï¼ˆç®€ç§°FRï¼‰æ˜¯ä¸€ç§ç”¨äºå›¾å¸ƒå±€çš„ç®—æ³•ï¼Œç”¨äºåœ¨å¹³é¢ä¸Šç»˜åˆ¶ä¸€ä¸ªå›¾çš„èŠ‚ç‚¹å’Œè¾¹ï¼Œä»¥ä¾¿èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»èƒ½å¤Ÿä»¥ä¸€ç§è§†è§‰ä¸Šæ˜“äºç†è§£çš„æ–¹å¼å‘ˆç°å‡ºæ¥ã€‚</p> 
<p>ä¸‹é¢æ˜¯æ•°æ®å¤„ç†çš„éƒ¨åˆ†ï¼Œå¤„ç†æ–¹å¼æ¯”è¾ƒå•ä¸€ï¼Œç›¸å½“äºä¸ºæ•°æ®æ·»åŠ äº†ä¸€ä¸ªå”¯ä¸€ç¼–å·ï¼Œè¿™ä¸ªç¼–å·å°±ä»£è¡¨çš„è¿™ä¸ªæ•°æ®ã€‚ä¸è¯¦ç»†ä»‹ç»~ï¼Œå¦‚æœ‰é—®é¢˜å¯ä»¥ç•™è¨€æˆ–ç§ä¿¡äº¤æµã€‚</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
film_details_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/films_info.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> re
<span class="token keyword">import</span> random

<span class="token comment"># set seed to reproduce result</span>
random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">1026</span><span class="token punctuation">)</span>

<span class="token comment">#################### actor procession ####################</span>
actor_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># remove blank and single quotes</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> film_details_df<span class="token punctuation">.</span>Actors<span class="token punctuation">:</span>
    actors <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
    actor_list <span class="token operator">+=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> actors<span class="token punctuation">]</span>

<span class="token comment"># remove duplication</span>
actor_list <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>actor_list<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># create unicode</span>
ac_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
uni_code <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> actor <span class="token keyword">in</span> actor_list<span class="token punctuation">:</span>
    ac_dict<span class="token punctuation">[</span>actor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'AC'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>uni_code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># checking whether unicodes are unique</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>ac_dict<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>actor_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># save</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>ac_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Actor'</span><span class="token punctuation">,</span> <span class="token string">'Unicode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/actor_unicode.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>

<span class="token comment">#################### director processiong ####################</span>
dire_list <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>film_details_df<span class="token punctuation">.</span>Director<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">1026</span><span class="token punctuation">)</span>
dire_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token comment"># create unicode</span>
<span class="token keyword">for</span> director <span class="token keyword">in</span> dire_list<span class="token punctuation">:</span>
    dire_dict<span class="token punctuation">[</span>director<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'DI'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>uni_code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># checking whether unicodes are unique</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>dire_dict<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dire_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># save</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>dire_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Director'</span><span class="token punctuation">,</span> <span class="token string">'Unicode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/director_unicode.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>

<span class="token comment">#################### film processiong ####################</span>
film_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">for</span> film <span class="token keyword">in</span> film_details_df<span class="token punctuation">.</span>Film_name<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    film_dict<span class="token punctuation">[</span>film<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Film'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>uni_code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>film_dict<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>film_details_df<span class="token punctuation">.</span>Film_name<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>film_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Film'</span><span class="token punctuation">,</span> <span class="token string">'Unicode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/film_unicode.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>

<span class="token comment">#################### connection between film, director and actor ####################</span>
f_d_a_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">for</span> film <span class="token keyword">in</span> film_details_df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    actors <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> film<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Actors<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
    actors <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> actors<span class="token punctuation">]</span>
    f_d_a_dict<span class="token punctuation">[</span>film<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Film_name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>film<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Director<span class="token punctuation">:</span> actors<span class="token punctuation">}</span>

flat_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> film<span class="token punctuation">,</span> term <span class="token keyword">in</span> f_d_a_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> director<span class="token punctuation">,</span> actor_list <span class="token keyword">in</span> term<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> actor <span class="token keyword">in</span> actor_list<span class="token punctuation">:</span>
            flat_data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>film<span class="token punctuation">,</span> director<span class="token punctuation">,</span> actor<span class="token punctuation">]</span><span class="token punctuation">)</span>
            
f_d_a_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>flat_data<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Film'</span><span class="token punctuation">,</span> <span class="token string">'Director'</span><span class="token punctuation">,</span> <span class="token string">'Actors'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
f_d_a_df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/film_dir_ac.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>

<span class="token comment">#################### connection between actors ####################</span>
st_connection <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> film <span class="token keyword">in</span> film_details_df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    actors <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> film<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Actors'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
    actors <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> actors<span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>actors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>actors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            st_connection<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>actors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> actors<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>st_connection<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Actor_1'</span><span class="token punctuation">,</span> <span class="token string">'Actor_2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'/mnt/c/Users/ouyangkang/Desktop/connection.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre> 
<p>åœ¨<code>Neo4j Desktop</code>ä¸­ä½¿ç”¨ä¸‹è¿°<code>Cypher</code>è¯­è¨€æ„å»º<code>å¯¼æ¼”-(å¯¼æ¼”)&gt;ç”µå½±-(åŒ…æ‹¬)&gt;æ¼”å‘˜</code>å…³ç³»å›¾è°±ã€‚å› ä¸ºå¯¹<code>Cypher</code>è¯­è¨€è¿˜ä¸å¤Ÿç†Ÿç»ƒï¼Œå¹¶æ²¡æœ‰åˆ†æå‡ºå…·æœ‰æ„ä¹‰çš„ç»“æœï¼Œè§è°…~</p> 
<pre><code class="prism language-python"><span class="token comment"># NEO4J COMMAND</span>

CREATE CONSTRAINT actor_unicode FOR <span class="token punctuation">(</span>a<span class="token punctuation">:</span>actor<span class="token punctuation">)</span> REQUIRE a<span class="token punctuation">.</span><span class="token builtin">unicode</span> IS UNIQUE
CREATE CONSTRAINT director_unicode FOR <span class="token punctuation">(</span>d<span class="token punctuation">:</span>director<span class="token punctuation">)</span> REQUIRE d<span class="token punctuation">.</span><span class="token builtin">unicode</span> IS UNIQUE
CREATE CONSTRAINT film_unicode FOR <span class="token punctuation">(</span>f<span class="token punctuation">:</span>film<span class="token punctuation">)</span> REQUIRE f<span class="token punctuation">.</span><span class="token builtin">unicode</span> IS UNIQUE

LOAD CSV WITH HEADERS FROM <span class="token string">'file:///actor_unicode.csv'</span> AS row MERGE <span class="token punctuation">(</span>a<span class="token punctuation">:</span>actor <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Actor<span class="token punctuation">,</span> <span class="token builtin">unicode</span><span class="token punctuation">:</span>row<span class="token punctuation">.</span>Unicode<span class="token punctuation">}</span><span class="token punctuation">)</span>
LOAD CSV WITH HEADERS FROM <span class="token string">'file:///director_unicode.csv'</span> AS row MERGE <span class="token punctuation">(</span>d<span class="token punctuation">:</span>director <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Director<span class="token punctuation">,</span> <span class="token builtin">unicode</span><span class="token punctuation">:</span>row<span class="token punctuation">.</span>Unicode<span class="token punctuation">}</span><span class="token punctuation">)</span>
LOAD CSV WITH HEADERS FROM <span class="token string">'file:///film_unicode.csv'</span> AS row MERGE <span class="token punctuation">(</span>f<span class="token punctuation">:</span>film <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Film<span class="token punctuation">,</span><span class="token builtin">unicode</span><span class="token punctuation">:</span>row<span class="token punctuation">.</span>Unicode<span class="token punctuation">}</span><span class="token punctuation">)</span>

LOAD CSV WITH HEADERS FROM <span class="token string">'file:///film_dir_ac.csv'</span> AS row MERGE <span class="token punctuation">(</span>d<span class="token punctuation">:</span>director <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Director<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>f<span class="token punctuation">:</span>film <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Film<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">:</span>Directs<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
LOAD CSV WITH HEADERS FROM <span class="token string">'file:///film_dir_ac.csv'</span> AS row MERGE <span class="token punctuation">(</span>f<span class="token punctuation">:</span>film <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Film<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>a<span class="token punctuation">:</span>actor <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Actors<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">:</span>Including<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
LOAD CSV WITH HEADERS FROM <span class="token string">'file:///connection.csv'</span> AS row MERGE <span class="token punctuation">(</span>a<span class="token punctuation">:</span>actor <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Actor_1<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>b<span class="token punctuation">:</span>actor <span class="token punctuation">{<!-- --></span>name<span class="token punctuation">:</span>row<span class="token punctuation">.</span>Actor_2<span class="token punctuation">}</span><span class="token punctuation">)</span> MERGE <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">:</span>cooperation<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/41/86/4Lp5j1dk_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> åŒæ—¶ï¼Œä½¿ç”¨<code>Gephi</code>å¯¹æ¼”å‘˜å…³ç³»ä½¿ç”¨<code>Fruchterman-Reingold</code>ç®—æ³•å¯è§†åŒ–ï¼Œå‘ç°å‚æ¼”ä¸åŒç”µå½±çš„æ¼”å‘˜è¢«åˆ†æˆäº†ä¸€ä¸ªæœ‰ä¸€ä¸ªèšç±»ç¾¤ï¼Œè€Œå…±åŒå‚æ¼”å¤šéƒ¨ç”µå½±çš„æ¼”å‘˜åœ¨å›¾ä¸­é—´å½¢æˆå¤æ‚çš„ç½‘ç»œç»“æ„ï¼Œè€Œä¸»è§’æ²ˆè…¾åˆ™ä½äºæœ€ä¸­å¿ƒï¼Œæˆä¸ºæœ€çº¢çš„ç‚¹ï¼Œè¿æ¥æ¯ä¸€ä¸ªæ¼”å‘˜ã€‚è¾ƒç²—çš„çº¿æ¡è¡¨ç¤ºæ²ˆè…¾ä¸è¯¥æ¼”å‘˜åœ¨å¤šéƒ¨ç”µå½±ä¸­åˆä½œè¿‡ï¼Œä¾‹å¦‚é©¬ä¸½ã€‚<br> <img src="https://images2.imgbox.com/01/61/yDzU3IEf_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<h2><a id="_515"></a>æ€»ç»“</h2> 
<p>æœ¬æ–‡å¯¹è·å–çš„ç”µå½±æ•°æ®åšäº†ç›¸å…³çš„å¯è§†åŒ–åˆ†æï¼ŒåŒ…æ‹¬æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€ç®±çº¿å›¾ã€é¥¼å›¾ä»¥åŠç›¸å…³æ€§çƒ­å›¾ï¼›ä½¿ç”¨æ¨¡å‹é¢„æµ‹Naå€¼ï¼ŒåŒ…æ‹¬çº¿æ€§æ¨¡å‹ã€æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼›ä»¥åŠå›¾å¯è§†åŒ–å·¥å…·åˆ†æå¯¼æ¼”-ç”µå½±-æ¼”å‘˜ï¼Œæ¼”å‘˜-æ¼”å‘˜ä¹‹é—´çš„å¤æ‚ç½‘ç»œå…³ç³»ã€‚å¸Œæœ›çœ‹å®Œæœ¬æ–‡ä½ èƒ½å¤Ÿå­¦ä¼šå¦‚ä½•å¯¹æ•°æ®è¿›è¡Œåˆç†çš„å¯è§†åŒ–ã€ä½¿ç”¨æ¨¡å‹é¢„æµ‹Naå€¼ä»¥åŠå›¾å¯è§†åŒ–å¤æ‚çš„ç½‘ç»œå…³ç³»ã€‚</p> 
<p>æœ€åæ„Ÿè°¢å¤§å®¶çš„è§‚çœ‹ï¼Œ<strong>ç‚¹ç‚¹å…³æ³¨ä¸è¿·è·¯~</strong>ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bbc32c01e41de6be7c6ce9cef5fe4e27/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Flinkä¸­çš„æ—¶é—´å’Œçª—å£ï¼ˆæ—¶é—´è¯­ä¹‰ï¼Œæ°´ä½çº¿ï¼Œçª—å£ï¼Œè¿Ÿåˆ°æ•°æ®çš„å¤„ç†ï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1f5b3a4df71907f3ff602fa43bddba1a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€JavaEE &amp; Springã€‘MyBatis æ“ä½œæ•°æ®åº“(åŸºç¡€æ“ä½œ)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>