<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>POJ 2182 Lost Cowsï¼ˆä¸‰ç§è§£æ³•ï¼šæš´åŠ› å’Œ çº¿æ®µæ ‘ å’Œ æ ‘çŠ¶æ•°ç»„ï¼‰ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="POJ 2182 Lost Cowsï¼ˆä¸‰ç§è§£æ³•ï¼šæš´åŠ› å’Œ çº¿æ®µæ ‘ å’Œ æ ‘çŠ¶æ•°ç»„ï¼‰" />
<meta property="og:description" content="é¢˜ç›®ä¼ é€é—¨ é¢˜æ„ï¼š æœ‰nå¤´ç‰›ï¼Œæ¯å¤´ç‰›æœ‰ä¸€ä¸ªåºå·(èŒƒå›´æ˜¯1-n)ã€‚ç°åœ¨çŸ¥é“æ¯å¤´ç‰›å‰é¢æ¯”è‡ªå·±åºå·å°çš„ç‰›çš„æ•°é‡ã€‚éœ€è¦æ±‚å‡ºæ¯å¤´ç‰›çš„åºå·
åˆ†æï¼š å¯ä»¥æƒ³åˆ°çš„æ˜¯ï¼Œä»åå¾€å‰éå†ã€‚å¯¹äºç¬¬iå¤´ç‰›ï¼Œå¦‚æœå®ƒå‰é¢æœ‰kå¤´ç‰›æ¯”å®ƒçš„åºå·å°ï¼Œé‚£ä¹ˆå®ƒçš„åºå·å°±æ˜¯å½“å‰ä»…å‰©ç¼–å·ä¸­çš„ç¬¬ï¼ˆk &#43; 1ï¼‰å¤§çš„æ•°ã€‚ æš´åŠ›æ±‚æ³•ï¼ˆç±»ä¼¼çº¦ç‘Ÿå¤«ç¯ï¼‰ é‚£ä¹ˆæœ¬é¢˜çš„éš¾ç‚¹å°±å˜æˆäº†å¦‚æœæ±‚å‡ºå‰©ä¸‹çš„ç¼–å·ä¸­ç¬¬må¤§çš„æ•°ï¼Œå› ä¸ºä»åå¾€å‰éå†çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ç¡®å®šä¸€å¤´ç‰›çš„ç¼–å·ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ç¼–å·å°±è¦å»æ‰ä¸€ä¸ªå€¼ã€‚
è¿™å’Œçº¦ç‘Ÿå¤«ç¯éå¸¸çš„ç±»ä¼¼ï¼ˆæœ¬é¢˜æ²¡æœ‰ç¯ï¼‰ï¼Œå› æ­¤å¯ä»¥ç”¨vectoræ¨¡æ‹Ÿä¸€ä¸ªçº¦ç‘Ÿå¤«ç¯æ¥æš´åŠ›æ±‚è§£
å› ä¸ºn = 8000ï¼Œæ‰€ä»¥O(n ^ 2)çš„å¤æ‚åº¦ä¹Ÿå‹‰å¼ºå¯ä»¥è¿‡
æš´åŠ›ä»£ç ï¼š
//preå­˜å‚¨çš„æ˜¯æ¯å¤´ç‰›å‰é¢æ¯”è‡ªå·±åºå·å°çš„ç‰›çš„å¤´æ•° int pre[N]; //rä¸ºå‰©ä¸‹çš„ç¼–å·çš„é›†åˆï¼Œansä¸ºæ±‚å‡ºçš„æ¯å¤´ç‰›çš„ç¼–å· VI r, ans; int main(){	int n; scanf(&#34;%d&#34;, &amp;n); for(int i = 2; i &lt;= n; i&#43;&#43;) scanf(&#34;%d&#34;, &amp;pre[i]); //åˆå§‹çš„ç¼–å·é›†åˆä¸º {1ï¼Œ2ï¼Œ3ï¼Œ4.....n} for(int i = 1; i &lt;= n; i&#43;&#43;) r.push_back(i); //å€’åºéå† for(int i = n; i &gt;= 1; i--){ //å–å‡ºç¬¬pre[i]å¤§çš„å€¼ï¼ˆå› ä¸ºræ˜¯å‡åºæ’åˆ—çš„ï¼Œç›´æ¥æŒ‰ä¸‹æ ‡æŠŠå€¼å–å‡ºæ¥å³å¯ï¼‰ //å› ä¸ºrçš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„ï¼Œå› æ­¤ä¸‹æ ‡ä¸ºkçš„æ•°å…¶å®æ˜¯ç¬¬ k&#43;1 å¤§çš„ ans.push_back(r[pre[i]]); //ç¼–å·é›†åˆå»æ‰pre[i] r.erase(r.begin() &#43; pre[i]); } //å› ä¸ºå‰é¢æ˜¯å€’åºéå†æ¯ä¸€å¤´ç‰›ï¼Œå› æ­¤è¾“å‡ºå‰éœ€è¦å…ˆåè½¬ä¸€ä¸‹ reverse(ans." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/191ff4b5b974f339c868fc8b38b7fa21/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-07T12:04:32+08:00" />
<meta property="article:modified_time" content="2021-08-07T12:04:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">POJ 2182 Lost Cowsï¼ˆä¸‰ç§è§£æ³•ï¼šæš´åŠ› å’Œ çº¿æ®µæ ‘ å’Œ æ ‘çŠ¶æ•°ç»„ï¼‰</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong><a href="https://vjudge.net/problem/POJ-2182" rel="nofollow" title="é¢˜ç›®ä¼ é€é—¨">é¢˜ç›®ä¼ é€é—¨</a></strong></h3> 
<p></p> 
<h3><strong>é¢˜æ„ï¼š</strong></h3> 
<blockquote> 
 <p><strong>æœ‰nå¤´ç‰›ï¼Œæ¯å¤´ç‰›æœ‰ä¸€ä¸ªåºå·(èŒƒå›´æ˜¯1-n)ã€‚ç°åœ¨çŸ¥é“æ¯å¤´ç‰›å‰é¢æ¯”è‡ªå·±åºå·å°çš„ç‰›çš„æ•°é‡ã€‚éœ€è¦æ±‚å‡ºæ¯å¤´ç‰›çš„åºå·</strong></p> 
</blockquote> 
<p></p> 
<p></p> 
<h3><strong>åˆ†æï¼š</strong></h3> 
<blockquote> 
 <h4><strong>å¯ä»¥æƒ³åˆ°çš„æ˜¯ï¼Œä»åå¾€å‰éå†ã€‚å¯¹äºç¬¬iå¤´ç‰›ï¼Œå¦‚æœå®ƒå‰é¢æœ‰kå¤´ç‰›æ¯”å®ƒçš„åºå·å°ï¼Œé‚£ä¹ˆå®ƒçš„åºå·å°±æ˜¯å½“å‰ä»…å‰©ç¼–å·ä¸­çš„ç¬¬ï¼ˆk + 1ï¼‰å¤§çš„æ•°ã€‚</strong></h4> 
</blockquote> 
<p></p> 
<h3><span style="color:#fe2c24;">æš´åŠ›æ±‚æ³•ï¼ˆç±»ä¼¼çº¦ç‘Ÿå¤«ç¯ï¼‰</span></h3> 
<p><strong>é‚£ä¹ˆæœ¬é¢˜çš„éš¾ç‚¹å°±å˜æˆäº†å¦‚æœæ±‚å‡ºå‰©ä¸‹çš„ç¼–å·ä¸­ç¬¬må¤§çš„æ•°ï¼Œå› ä¸ºä»åå¾€å‰éå†çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ç¡®å®šä¸€å¤´ç‰›çš„ç¼–å·ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ç¼–å·å°±è¦å»æ‰ä¸€ä¸ªå€¼ã€‚</strong></p> 
<p><strong>è¿™å’Œçº¦ç‘Ÿå¤«ç¯éå¸¸çš„ç±»ä¼¼ï¼ˆæœ¬é¢˜æ²¡æœ‰ç¯ï¼‰ï¼Œå› æ­¤å¯ä»¥ç”¨vectoræ¨¡æ‹Ÿä¸€ä¸ªçº¦ç‘Ÿå¤«ç¯æ¥æš´åŠ›æ±‚è§£</strong></p> 
<p><strong>å› ä¸ºn = 8000ï¼Œæ‰€ä»¥O(n ^ 2)çš„å¤æ‚åº¦ä¹Ÿå‹‰å¼ºå¯ä»¥è¿‡</strong></p> 
<p></p> 
<p><strong>æš´åŠ›ä»£ç ï¼š</strong></p> 
<pre><code>//preå­˜å‚¨çš„æ˜¯æ¯å¤´ç‰›å‰é¢æ¯”è‡ªå·±åºå·å°çš„ç‰›çš„å¤´æ•°
int pre[N];
//rä¸ºå‰©ä¸‹çš„ç¼–å·çš„é›†åˆï¼Œansä¸ºæ±‚å‡ºçš„æ¯å¤´ç‰›çš„ç¼–å·
VI r, ans;

int main(){	
	int n;
	scanf("%d", &amp;n);
	for(int i = 2; i &lt;= n; i++) scanf("%d", &amp;pre[i]);
    
    //åˆå§‹çš„ç¼–å·é›†åˆä¸º {1ï¼Œ2ï¼Œ3ï¼Œ4.....n}    
	for(int i = 1; i &lt;= n; i++) r.push_back(i);
	
    //å€’åºéå†
	for(int i = n; i &gt;= 1; i--){
		//å–å‡ºç¬¬pre[i]å¤§çš„å€¼ï¼ˆå› ä¸ºræ˜¯å‡åºæ’åˆ—çš„ï¼Œç›´æ¥æŒ‰ä¸‹æ ‡æŠŠå€¼å–å‡ºæ¥å³å¯ï¼‰
        //å› ä¸ºrçš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„ï¼Œå› æ­¤ä¸‹æ ‡ä¸ºkçš„æ•°å…¶å®æ˜¯ç¬¬ k+1 å¤§çš„
        ans.push_back(r[pre[i]]);
		//ç¼–å·é›†åˆå»æ‰pre[i]
        r.erase(r.begin() + pre[i]);
	}
    
    //å› ä¸ºå‰é¢æ˜¯å€’åºéå†æ¯ä¸€å¤´ç‰›ï¼Œå› æ­¤è¾“å‡ºå‰éœ€è¦å…ˆåè½¬ä¸€ä¸‹
	reverse(ans.begin(), ans.end());
	
	for(int i = 0; i &lt; ans.size(); i++)
		printf("%d\n", ans[i]);
	
	return 0;
}</code></pre> 
<p></p> 
<h3><span style="color:#fe2c24;">çº¿æ®µæ ‘è§£æ³•ï¼ˆç»´æŠ¤åŒºé—´å†…è¿˜æœ‰å¤šå°‘æ•°æ²¡æœ‰è¢«ç”¨è¿‡ï¼‰</span></h3> 
<p><span style="color:#0d0016;">çº¿æ®µæ ‘ç»´æŠ¤æ¯ä¸ªåŒºé—´å†…æœ‰å¤šå°‘ä¸ªæ²¡è¢«ç”¨è¿‡çš„æ•°ã€‚æ¯æ¬¡å–å‡ºç¬¬må¤§çš„æ•°åï¼ŒåŒºé—´å†…æ•°çš„ä¸ªæ•° -1ã€‚</span></p> 
<p><span style="color:#0d0016;">è€Œæ‰¾åˆ°ç¬¬må¤§çš„æ•°ï¼Œç±»ä¼¼äºåœ¨ä¸€ä¸ªæœ‰åºåºåˆ—ä¸­æ‰¾ç¬¬må¤§çš„æ•°ï¼Œå…¶å®æœ¬è´¨æ€æƒ³æ˜¯äºŒåˆ†äº†ã€‚</span></p> 
<p><span style="color:#0d0016;">å› æ­¤ï¼Œå¤æ‚åº¦ä¸ºO(n*logn)ï¼Œè‚¯å®šæ˜¯å¯ä»¥è¿‡çš„</span></p> 
<p></p> 
<p><strong><span style="color:#0d0016;">çº¿æ®µæ ‘ä»£ç ï¼š</span></strong></p> 
<pre><code>//çº¿æ®µæ ‘çš„ç»“ç‚¹ï¼Œä¿å­˜ç€åŒºé—´å·¦å³ç«¯ç‚¹å’ŒåŒºé—´ä¸­å€¼çš„ä¸ªæ•°
struct node{
	int v, l, r;
}tr[N * 4];

//å»ºæ ‘
void build(int u, int l, int r){
	
    //åˆå§‹æ—¶[l, r]åŒºé—´ä¸­çš„æ•°çš„ä¸ªæ•°ä¸º r - l + 1
    tr[u] = {r - l + 1, l, r};
	if(l == r) return;
	int mid = l + r &gt;&gt; 1;
	build(u &lt;&lt; 1, l, mid);
	build(u &lt;&lt; 1 | 1, mid + 1, r);
}

//æ‰¾ç¬¬xå¤§çš„æ•°
int query(int u, int x){
	//æ—¢ç„¶æœåˆ°äº†è¿™ä¸ªåŒºé—´ï¼Œé‚£ä¹ˆxå¿…å®šåœ¨è¿™ä¸ªåŒºé—´é‡Œé¢ï¼ŒåŒºé—´å€¼çš„ä¸ªæ•°è‡ªç„¶è¦-1
    tr[u].v--;
	//å¦‚æœæœåˆ°äº†å¶å­ç»“ç‚¹ï¼Œé‚£ä¹ˆå¿…å®šæ˜¯è¿™ä¸ªå€¼äº†
    if(tr[u].l == tr[u].r) return tr[u].r;
	//å·¦å­åŒºé—´çš„å€¼çš„ä¸ªæ•°ä¸è¶³xä¸ªï¼Œé‚£ä¹ˆå°±åœ¨å³å­åŒºé—´æ‰¾ç¬¬ x - kå¤§çš„æ•°ï¼ˆkä¸ºå·¦åŒºé—´æ•°çš„ä¸ªæ•°ï¼‰
    if(tr[u &lt;&lt; 1].v &lt; x) return query(u &lt;&lt; 1 | 1, x - tr[u &lt;&lt; 1].v);
	//å·¦åŒºé—´çš„æ•°çš„ä¸ªæ•° &gt;= xï¼Œé‚£ä¹ˆå°±åœ¨å·¦åŒºé—´æœç´¢å³å¯
    return query(u &lt;&lt; 1, x);
}

int pre[N];
VI ans;

int main(){	
	int n;
	scanf("%d", &amp;n);
	for(int i = 2; i &lt;= n; i++) scanf("%d", &amp;pre[i]);
	
    //å»ºæ ‘
	build(1, 1, n);
	//å€’åºéå†ï¼Œæ±‚å‡ºæ¯å¤´ç‰›çš„åºå·
    for(int i = n; i &gt;= 1; i--) ans.push_back(query(1, pre[i] + 1)); 
	
    //ç¿»è½¬è¾“å‡º
    reverse(ans.begin(), ans.end());
	for(int i = 0; i &lt; ans.size(); i++) printf("%d\n", ans[i]);
	
	return 0;
}</code></pre> 
<p></p> 
<h2>æ ‘çŠ¶æ•°ç»„è§£æ³•</h2> 
<p><span style="color:#fe2c24;"><strong>å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ä¹Ÿå¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„çš„ï¼Œä»£ç è¿˜çŸ­ä¸€äº›ï¼</strong></span></p> 
<pre><code>#include&lt;bits/stdc++.h&gt;
using namespace std;

#define fi first 
#define se second 
#define pb push_back
#define mst(a, b) memset((a), (b), sizeof (a))
#define sc(x) scanf("%d",&amp;x)
#define scl(x) scanf("%lld",&amp;x)
#define prt(x) printf("%d\n", x)
#define prtl(x) printf("%lld\n", x)
#define debug(x) cout &lt;&lt; #x &lt;&lt; ": " &lt;&lt; x &lt;&lt; endl;
#define pY putlls("YES")
#define pN puts("NO")
typedef vector&lt;int&gt; VI;
typedef long long LL;
typedef pair&lt;int, int&gt; PII;
typedef priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; PQ;
typedef priority_queue&lt;int, vector&lt;int&gt;, less&lt;int&gt; &gt; QP;

int n, m;
const int N = 200010, M = 510, INF = 0x3f3f3f3f;
int book[N], a[N];
int val[N], res[N];

inline int lowbit(int x) {return x &amp; -x;}

void update(int x, int c){
    while(x &lt;= n){
        val[x] += c;
        x += lowbit(x);
    }
}

int getsum(int x){
    int sum = 0;
    while(x){
        sum += val[x];
        x -= lowbit(x);
    }
    return sum;
}


//äºŒåˆ†æŸ¥æ‰¾ç¬¬kå¤§çš„æ•°ï¼Œè‚¯å®šæ˜¯é€’å¢çš„å“‡
int findK(int k){
    int l = 1, r = n;
    while(l &lt; r){
        int mid = l + r &gt;&gt; 1; 
        int t = getsum(mid);
        if(t &lt; k) l = mid + 1;
        else r = mid;
    }
    return l;
}


int main(){
    int __ = 1;
    // sc(__);
    while(__--){
       sc(n);
       for(int i = 1; i &lt;= n; i++){
           if(i &gt; 1) sc(a[i]); 
           update(i, 1);
       }

        for(int i = n; i &gt;= 1; i--){
            //æ‰¾ç¬¬a[i]+1å¤§çš„æ•°
            int k = findK(a[i] + 1);
            update(k, -1);
            //ç”¨è¿‡äº†ï¼Œå°±å‡å»1
            res[i] = k;
        }

        for(int i = 1; i &lt;= n; i++) prt(res[i]);
    }
    return 0;
}</code></pre> 
<p></p> 
<p></p> 
<blockquote> 
 <p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¹Ÿä¸å·®ğŸ‘çš„é‚£ç‚¹æ—¶é—´äº†å§~ğŸ˜˜</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0f1bc63fdf919143129b34440a599680/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ä»€ä¹ˆæ˜¯QuestDB ï¼Ÿ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b0b8c69ba8c9b880e31cf3c5eb87791/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Python-OpenCVä½¿ç”¨åŸºæœ¬å›¾åƒå¤„ç†æŠ€æœ¯è¿›è¡Œæ°´å°å»é™¤</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>