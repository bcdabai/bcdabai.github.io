<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决Mysql replication error 1594 - Relay log read failure - Could not parse relay log event entry - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决Mysql replication error 1594 - Relay log read failure - Could not parse relay log event entry" />
<meta property="og:description" content="Mysql复制错误1594-中继日志读取失败-无法解析中继日志事件条目 错误信息：
Relay log read failure: Could not parse relay log event entry. The possible reasons are: the master&#39;s binary log is corrupted (you can check this by running &#39;mysqlbinlog&#39; on the binary log), the slave&#39;s relay log is corrupted (you can check this by running &#39;mysqlbinlog&#39; on the relay log), a network problem, or a bug in the master&#39;s or slave&#39;s MySQL code. If you want to check the master&#39;s binary log or slave&#39;s relay log, you will be able to know their names by issuing &#39;SHOW SLAVE STATUS&#39; on this slave." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d046d3b2404bb9b36a75bea3a3e890ee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-27T16:00:58+08:00" />
<meta property="article:modified_time" content="2020-07-27T16:00:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决Mysql replication error 1594 - Relay log read failure - Could not parse relay log event entry</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="Mysql1594_0"></a>Mysql复制错误1594-中继日志读取失败-无法解析中继日志事件条目</h5> 
<p>错误信息：</p> 
<pre><code class="prism language-sql">Relay log <span class="token keyword">read</span> failure: Could <span class="token operator">not</span> parse relay log event entry<span class="token punctuation">.</span> The possible reasons are: the master<span class="token string">'s binary log is corrupted (you can check this by running '</span>mysqlbinlog<span class="token string">' on the binary log), the slave'</span>s relay log <span class="token operator">is</span> corrupted <span class="token punctuation">(</span>you can <span class="token keyword">check</span> this <span class="token keyword">by</span> running <span class="token string">'mysqlbinlog'</span> <span class="token keyword">on</span> the relay log<span class="token punctuation">)</span><span class="token punctuation">,</span> a network problem<span class="token punctuation">,</span> <span class="token operator">or</span> a bug <span class="token operator">in</span> the master<span class="token string">'s or slave'</span>s MySQL code<span class="token punctuation">.</span> <span class="token keyword">If</span> you want <span class="token keyword">to</span> <span class="token keyword">check</span> the master<span class="token string">'s binary log or slave'</span>s relay log<span class="token punctuation">,</span> you will be able <span class="token keyword">to</span> know their names <span class="token keyword">by</span> issuing <span class="token string">'SHOW SLAVE STATUS'</span> <span class="token keyword">on</span> this slave<span class="token punctuation">.</span>
</code></pre> 
<p>有时mysql复制会因中继二进制日志损坏而崩溃，并且无法通过简单的“ start slave”命令将其重启</p> 
<p><strong>要检查当前从站状态，请执行命令：</strong></p> 
<pre><code class="prism language-bash">show slave status\G<span class="token punctuation">;</span>
</code></pre> 
<p><strong>您应该看到类似以下结果：</strong></p> 
<pre><code class="prism language-sql"><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>

               Slave_IO_State: Waiting <span class="token keyword">for</span> master <span class="token keyword">to</span> send event
                  Master_Host: <span class="token number">192.168</span><span class="token number">.194</span><span class="token number">.74</span>
                  Master_User: replicator
                  Master_Port: <span class="token number">3306</span>
                Connect_Retry: <span class="token number">60</span>
              Master_Log_File: mysql<span class="token operator">-</span>bin<span class="token punctuation">.</span><span class="token number">001274</span>
          Read_Master_Log_Pos: <span class="token number">1045327404</span>
               Relay_Log_File: <span class="token number">3</span>_dbbackup<span class="token punctuation">.</span><span class="token number">003821</span>
                Relay_Log_Pos: <span class="token number">617884398</span>
        Relay_Master_Log_File: mysql<span class="token operator">-</span>bin<span class="token punctuation">.</span><span class="token number">001273</span>
             Slave_IO_Running: Yes
            Slave_SQL_Running: <span class="token keyword">No</span>
              Replicate_Do_DB: 
          Replicate_Ignore_DB: 
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: <span class="token number">1594</span>
                   Last_Error: Relay log <span class="token keyword">read</span> failure: Could <span class="token operator">not</span> parse relay log event entry<span class="token punctuation">.</span> The possible reasons are: the master<span class="token string">'s binary log is corrupted (you can check this by running '</span>mysqlbinlog<span class="token string">' on the binary log), the slave'</span>s relay log <span class="token operator">is</span> corrupted <span class="token punctuation">(</span>you can <span class="token keyword">check</span> this <span class="token keyword">by</span> running <span class="token string">'mysqlbinlog'</span> <span class="token keyword">on</span> the relay log<span class="token punctuation">)</span><span class="token punctuation">,</span> a network problem<span class="token punctuation">,</span> <span class="token operator">or</span> a bug <span class="token operator">in</span> the master<span class="token string">'s or slave'</span>s MySQL code<span class="token punctuation">.</span> <span class="token keyword">If</span> you want <span class="token keyword">to</span> <span class="token keyword">check</span> the master<span class="token string">'s binary log or slave'</span>s relay log<span class="token punctuation">,</span> you will be able <span class="token keyword">to</span> know their names <span class="token keyword">by</span> issuing <span class="token string">'SHOW SLAVE STATUS'</span> <span class="token keyword">on</span> this slave<span class="token punctuation">.</span>
                 Skip_Counter: <span class="token number">0</span>
          Exec_Master_Log_Pos: <span class="token number">617884110</span>
              Relay_Log_Space: <span class="token number">3192816253</span>
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: <span class="token number">0</span>
           Master_SSL_Allowed: <span class="token keyword">No</span>
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: <span class="token boolean">NULL</span>
Master_SSL_Verify_Server_Cert: <span class="token keyword">No</span>
                Last_IO_Errno: <span class="token number">0</span>
                Last_IO_Error: 
               Last_SQL_Errno: <span class="token number">1594</span>
               Last_SQL_Error: Relay log <span class="token keyword">read</span> failure: Could <span class="token operator">not</span> parse relay log event entry<span class="token punctuation">.</span> The possible reasons are: the master<span class="token string">'s binary log is corrupted (you can check this by running '</span>mysqlbinlog<span class="token string">' on the binary log), the slave'</span>s relay log <span class="token operator">is</span> corrupted <span class="token punctuation">(</span>you can <span class="token keyword">check</span> this <span class="token keyword">by</span> running <span class="token string">'mysqlbinlog'</span> <span class="token keyword">on</span> the relay log<span class="token punctuation">)</span><span class="token punctuation">,</span> a network problem<span class="token punctuation">,</span> <span class="token operator">or</span> a bug <span class="token operator">in</span> the master<span class="token string">'s or slave'</span>s MySQL code<span class="token punctuation">.</span> <span class="token keyword">If</span> you want <span class="token keyword">to</span> <span class="token keyword">check</span> the master<span class="token string">'s binary log or slave'</span>s relay log<span class="token punctuation">,</span> you will be able <span class="token keyword">to</span> know their names <span class="token keyword">by</span> issuing <span class="token string">'SHOW SLAVE STATUS'</span> <span class="token keyword">on</span> this slave<span class="token punctuation">.</span>
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: <span class="token number">13</span>
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
                   Using_Gtid: <span class="token keyword">No</span>
                  Gtid_IO_Pos: 
      Replicate_Do_Domain_Ids: 
  Replicate_Ignore_Domain_Ids: 
                Parallel_Mode: conservative
</code></pre> 
<p>应该注意的重要值是 Relay_Master_Log_File和 Exec_Master_Log_Pos。 将需要它们来正确重新启动从属服务器上的复制。</p> 
<p><strong>要重新启动复制：<font color="#C63A1B" size="3"> “master_log_file = mysql-bin.001273”，“Exec_Master_Log_Pos: 617884110”</font></strong> </p> 
<pre><code class="prism language-sql">STOP SLAVE<span class="token punctuation">;</span>
RESET SLAVE<span class="token punctuation">;</span>
CHANGE MASTER <span class="token keyword">TO</span> master_log_file<span class="token operator">=</span><span class="token string">'mysql-bin.001273'</span><span class="token punctuation">,</span> master_log_pos<span class="token operator">=</span><span class="token number">617884110</span><span class="token punctuation">;</span>
<span class="token keyword">START</span> SLAVE<span class="token punctuation">;</span>
</code></pre> 
<p><strong>要检查复制是否再次起作用，请再次执行命令：</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> slave <span class="token keyword">status</span>\G<span class="token punctuation">;</span>
</code></pre> 
<p><strong>在以同步方式调用从库之前，请从状态命令中检查参数 Seconds_Behind_Master 的值。主从同步延迟的状态（5187秒）：</strong></p> 
<pre><code class="prism language-sql">Seconds_Behind_Master: <span class="token number">5187</span>
</code></pre> 
<p><strong>在接下来的几分钟内，复制再次与主服务器同步，复制滞后为0s</strong></p> 
<pre><code class="prism language-sql">Seconds_Behind_Master: <span class="token number">0</span>
</code></pre> 
<p><strong>这是时候，就可以在生产中再次开始使用mysql slave了。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/957ce82bbd1d2c5f40c56f94d2a13006/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常用adb命令整理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d15944bf924e588ce51ceec2ad5ff18f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android计算器代码分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>