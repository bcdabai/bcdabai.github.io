<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android——在线计算器完整代码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android——在线计算器完整代码" />
<meta property="og:description" content="实现效果 一、xml布局文件 这里采用线性布局，关于计算器的布局，可以查看之前的文章。
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:orientation=&#34;vertical&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34;&gt; &lt;TextView android:id=&#34;@&#43;id/textResult&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:textSize=&#34;30sp&#34; android:gravity=&#34;right&#34; android:text=&#34;&#34; /&gt; &lt;LinearLayout android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:orientation=&#34;horizontal&#34;&gt; &lt;Button android:id=&#34;@&#43;id/btnCLs&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;2&#34; android:text=&#34;C&#34;/&gt; &lt;Button android:id=&#34;@&#43;id/btnDel&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;2&#34; android:text=&#34;Del&#34;/&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:orientation=&#34;horizontal&#34;&gt; &lt;Button android:id=&#34;@&#43;id/btnOne&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;1&#34; android:text=&#34;1&#34;/&gt; &lt;Button android:id=&#34;@&#43;id/btnTwo&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;1&#34; android:text=&#34;2&#34;/&gt; &lt;Button android:id=&#34;@&#43;id/btnThree&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;1&#34; android:text=&#34;3&#34;/&gt; &lt;Button android:id=&#34;@&#43;id/btnAdd&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;wrap_content&#34; android:layout_weight=&#34;1&#34; android:text=&#34;&#43;&#34;/&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:orientation=&#34;horizontal&#34;&gt; &lt;Button android:id=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/54f87a71732b3176733406709532257c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-14T16:09:25+08:00" />
<meta property="article:modified_time" content="2022-11-14T16:09:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android——在线计算器完整代码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2> 实现效果</h2> 
<p><img alt="" height="227" src="https://images2.imgbox.com/22/0a/DEEmI41u_o.png" width="143"> <img alt="" height="227" src="https://images2.imgbox.com/59/d8/3g2yPtbG_o.png" width="144"><img alt="" height="227" src="https://images2.imgbox.com/c6/82/EGDnvhyr_o.png" width="147"><img alt="" height="227" src="https://images2.imgbox.com/c6/bc/uSNv98BA_o.png" width="149"></p> 
<h2>一、xml布局文件</h2> 
<p>这里采用线性布局，关于计算器的布局，可以查看之前的文章。</p> 
<pre><code class="hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;TextView
        android:id="@+id/textResult"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:gravity="right"
        android:text="" /&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;Button
            android:id="@+id/btnCLs"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:text="C"/&gt;
        &lt;Button
            android:id="@+id/btnDel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:text="Del"/&gt;


    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;Button
            android:id="@+id/btnOne"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="1"/&gt;
        &lt;Button
            android:id="@+id/btnTwo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="2"/&gt;
        &lt;Button
            android:id="@+id/btnThree"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="3"/&gt;
        &lt;Button
            android:id="@+id/btnAdd"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="+"/&gt;

    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;Button
            android:id="@+id/btnFour"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="4"/&gt;
        &lt;Button
            android:id="@+id/btnFive"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="5"/&gt;
        &lt;Button
            android:id="@+id/btnSix"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="6"/&gt;
        &lt;Button
            android:id="@+id/btnReduce"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="-"/&gt;

    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;Button
            android:id="@+id/btnSeven"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="7"/&gt;
        &lt;Button
            android:id="@+id/btnEight"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="8"/&gt;
        &lt;Button
            android:id="@+id/btnNine"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="9"/&gt;
        &lt;Button
            android:id="@+id/btnMul"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="*"/&gt;

    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;

        &lt;Button
            android:id="@+id/btnZero"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="0"/&gt;
        &lt;Button
            android:id="@+id/btnPoint"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="."/&gt;
        &lt;Button
            android:id="@+id/btnEquals"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="="/&gt;
        &lt;Button
            android:id="@+id/btnChu"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="÷"/&gt;

    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;</code></pre> 
<h2>二、MainActivity.java文件 </h2> 
<p>1.创建每个按钮的对象</p> 
<p>2.实例化每个按钮 通过每个按钮的id进行实例化创建</p> 
<p>3.设置每个按钮的点击事件即监听按钮<br> switch通过id判断被点击的按钮属于哪个控件。如果是数字或小数点，setText(str + ((Button) view).getText())。<br> 如果是加减乘除，setText(str + " " + ((Button) view).getText() + " ")。这里的空格是很巧妙的，对下面运算结果中提取两个数字大有帮助。<br> 如果是清空按钮，setText("")。<br> 如果是删了后面一位数字，setText(str.substring(0,str.length()-1))。调用<span style="color:#fe2c24;">substring（beginIndex，endIndex）</span>函数。<span style="color:#fe2c24;">substring函数是用来截取一个字段的一部分。</span><br> 如果是等于按钮，调用getresult（）方法。</p> 
<p>4.创建运算结果的方法getresult（）。<br> 首先将其中的两个数字和运算符分割出来，调用<span style="color:#fe2c24;">substring</span>(0,exp.<span style="color:#fe2c24;">indexOf</span>(" "))函数。<span style="color:#fe2c24;">indexOf函数用于返回[目标字符串]在[源字符串]中的位置。</span><br><span style="color:#0d0016;">接着判断两个数都有，还是第一个数/第二个数为空，分情况写代码。</span></p> 
<p>5.MainActivity.java代码如下：</p> 
<pre><code class="hljs">import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity implements View.OnClickListener{//实现鼠标点击的事件的监听接口

    //创建每个按钮的对象
    //数字按钮
    Button btnOne,btnTwo,btnThree,btnFour,btnFive,btnSix,btnSeven,btnEight,btnNine,btnZero;
    //加减乘除
    Button btnChu,btnAdd,btnReduce,btnMul;
    //其他按钮
    Button btnCLs,btnDel,btnEquals,btnPoint;
    //文本框
    TextView textResult;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);//设置采用哪一个布局文件

        //实例化每个按钮 通过每个按钮的id进行实例化创建
        btnOne = (Button) findViewById(R.id.btnOne);
        btnTwo = (Button) findViewById(R.id.btnTwo);
        btnThree = (Button) findViewById(R.id.btnThree);
        btnFour = (Button) findViewById(R.id.btnFour);
        btnFive = (Button) findViewById(R.id.btnFive);
        btnSix = (Button) findViewById(R.id.btnSix);
        btnSeven = (Button) findViewById(R.id.btnSeven);
        btnEight = (Button) findViewById(R.id.btnEight);
        btnNine = (Button) findViewById(R.id.btnNine);
        btnZero = (Button) findViewById(R.id.btnZero);

        btnChu = (Button) findViewById(R.id.btnChu);
        btnAdd = (Button) findViewById(R.id.btnAdd);
        btnReduce = (Button) findViewById(R.id.btnReduce);
        btnMul = (Button) findViewById(R.id.btnMul);

        btnCLs = (Button) findViewById(R.id.btnCLs);
        btnDel = (Button) findViewById(R.id.btnDel);
        btnEquals = (Button) findViewById(R.id.btnEquals);
        btnPoint = (Button) findViewById(R.id.btnPoint);

        textResult = (TextView)findViewById(R.id.textResult);

        //设置每个按钮的点击事件即监听按钮
        btnOne.setOnClickListener(this);
        btnTwo.setOnClickListener(this);
        btnThree.setOnClickListener(this);
        btnFour.setOnClickListener(this);
        btnFive.setOnClickListener(this);
        btnSix.setOnClickListener(this);
        btnSeven.setOnClickListener(this);
        btnEight.setOnClickListener(this);
        btnNine.setOnClickListener(this);
        btnZero.setOnClickListener(this);

        btnChu.setOnClickListener(this);
        btnAdd.setOnClickListener(this);
        btnReduce.setOnClickListener(this);
        btnMul.setOnClickListener(this);

        btnCLs.setOnClickListener(this);
        btnDel.setOnClickListener(this);
        btnEquals.setOnClickListener(this);
        btnPoint.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {

        String str = textResult.getText().toString(); //获取当前textview文本

        switch (view.getId()) {
            case R.id.btnOne:
            case R.id.btnTwo:
            case R.id.btnThree:
            case R.id.btnFour:
            case R.id.btnFive:
            case R.id.btnSix:
            case R.id.btnSeven:
            case R.id.btnEight:
            case R.id.btnNine:
            case R.id.btnZero:
            case R.id.btnPoint:
                textResult.setText(str + ((Button) view).getText());
                break;

            case R.id.btnChu:
            case R.id.btnAdd:
            case R.id.btnReduce:
            case R.id.btnMul:
                textResult.setText(str + " " + ((Button) view).getText() + " ");
                break;

            case R.id.btnCLs:
                textResult.setText("");
                break;

            case R.id.btnDel:
                if(str != null &amp;&amp; !str.equals("")){
                    textResult.setText(str.substring(0,str.length()-1));   // substring(beginIndex, endIndex)  [beginIndex, endIndex)
                }                                                          //  str="123456"   str.substring(0,3) ="123";         "1237 + 10"
                break;

            case R.id.btnEquals:
                getresult();
        }
    }

    private void getresult() {
        String exp = textResult.getText().toString(); //从textview获取整个文本
        if(exp == null || exp.equals("")){
            return;
        }
        if(!exp.contains(" ")){
            return;
        }

        //将其中的两个数字和运算符分割出来
        float result = 0;                                                   // exp ="123 + 5"
        String num1 = exp.substring(0,exp.indexOf(" "));                      // num1 ="123"
        String ex = exp.substring(exp.indexOf(" ") + 1,exp.indexOf(" ") + 2); // ex="+"
        String num2 = exp.substring(exp.indexOf(" ") + 3);                    // num2="5"

        //如果两个数字都不为空则判断运算符进行运算
        if(!num1.equals("") &amp;&amp; !num2.equals("")) {
            float d1 = Float.parseFloat(num1);
            float d2 = Float.parseFloat(num2);

            if (ex.equals("+")) {
                result = d1 + d2;
            } else if (ex.equals("-")) {
                result = d1 - d2;
            } else if (ex.equals("*")) {
                result = d1 * d2;
            } else if (ex.equals("÷")) {
                if (d2 == 0) {
                    result = 0;
                } else {
                    result = d1 / d2;
                }
            }
            textResult.setText(result + "");
        }else if(!num1.equals("") &amp;&amp; num2.equals("")){
            textResult.setText(exp.substring(0,exp.indexOf(" ")));   //textResult.setText(exp);
        }else if(num1.equals("") &amp;&amp; !num2.equals("")){
            float d3 = Float.parseFloat(num2);
            if(ex.equals("+")){
                result = 0 + d3;
            }else if(ex.equals("-")){
                result = 0 - d3;
            }else if(ex.equals("*")){
                result = 0 * d3;
            }else if(ex.equals("÷")){
                result = 0;
            }
            textResult.setText(result + "");
        }else{
            textResult.setText("");
        }
    }
}</code></pre> 
<h2>四、总结</h2> 
<p>总体来说很不错，也实现了清除后面一个数的功能，但还未能实现负数的运算 。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/babcb528bd5d2434c6a230b55215d492/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">R语言armasubsets使用及报错问题处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d9f781d2cd90a8e7138395365a5a78d1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java 时间格式转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>