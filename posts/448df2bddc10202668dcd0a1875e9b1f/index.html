<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在页面中使用Acegi权限集合和taglib控制页面元素 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何在页面中使用Acegi权限集合和taglib控制页面元素" />
<meta property="og:description" content="如何在页面中使用Acegi权限集合和taglib控制页面元素
王保政
Email:baozhengw@netease.com
JSP页面中的页面元素,URL,按钮是否可见或变灰都可通过Acegi标签库来实现，使用Acegi标签库，可设置不同的权限ID允许点击的按钮,访问的URL,或隐藏无权限的功能菜单。
如何配置和使用标签库？
打开acegi-security-1.0.3.jar,在META-INF目录中有一个authz.tld文件，将此文件复制到你的web应用的WEB-INF/tld中，然后配置web.xml,增加:
&lt;taglib&gt; &lt;taglib-uri&gt;http://acegisecurity.sf.net/authz&lt;/taglib-uri&gt; &lt;taglib-location&gt;/WEB-INF/tld/authz.tld&lt;/taglib-location&gt; &lt;/taglib&gt;
然后JSP页面可以通过声明&lt;%@ taglib uri=&#34;http://acegisecurity.sf.net/authz&#34; prefix=&#34;authz&#34;%&gt;来引用标签库。
声明了标签以后，在页面中可以按下面的格式使用acegi标签(authz标签可以嵌套使用)：
&lt;!-- 使用权限标签的例子,标签可以嵌套 --&gt;
&lt;authz:authorize ifAnyGranted=&#34;AUTH_USER&#34;&gt; &lt;td&gt; 一般用户权限
&lt;/td&gt; &lt;authz:authorize ifAnyGranted=&#34;AUTH_ADMIN&#34;&gt; &lt;td&gt; 超级用户权限
&lt;/td&gt; &lt;/authz:authorize&gt;
&lt;/authz:authorize&gt;
&lt;authz:authorize ifAnyGranted=&#34;AUTH_SYS&#34;&gt; &lt;td&gt; 系统维护权限
&lt;/td&gt; &lt;/authz:authorize&gt;
也可以在JavaScript中用document.write输出权限标签：
&lt;script language=&#34;JavaScript&#34; type=&#34;text/javascript&#34;&gt;
//订单中心
document.write(&#39;&lt;authz:authorize ifAnyGranted=&#34;AUTH_TAG_ORDER_CENTER&#34;&gt; &#39;);
new tree(TREE_ITEMS1, TREE_TPL);
document.write(&#39;&lt;/authz:authorize&gt;&#39;);
&lt;/script&gt;
在有javaScript脚本中有时不方便引用acegi标签，可以从SecurityContextHolder中获得权限集合，然后判断当前登录的用户，其权限集合中是否有某权限，根据判断结果来决定显示或隐藏哪些页面元素，见下面的JSP:
&lt;%@ page contentType=&#34;text/html; charset=GBK&#34;%&gt;
&lt;%@ taglib uri=&#34;/WEB-INF/struts-html.tld&#34; prefix=&#34;html&#34; %&gt;
&lt;%@ taglib uri=&#34;/WEB-INF/struts-bean.tld&#34; prefix=&#34;bean&#34; %&gt;
&lt;%@ taglib uri=&#34;/WEB-INF/struts-logic.tld&#34; prefix=&#34;logic&#34;%&gt;
&lt;%@ taglib uri=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/448df2bddc10202668dcd0a1875e9b1f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2007-08-09T11:15:00+08:00" />
<meta property="article:modified_time" content="2007-08-09T11:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在页面中使用Acegi权限集合和taglib控制页面元素</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p class="MsoNormal" style="text-align:center;" align="center"><strong><span style="font-family:'宋体';">如何在页面中使用</span><span lang="en-us"><font face="Times New Roman">Acegi</font></span></strong><strong><span style="font-family:'宋体';">权限集合和</span><span lang="en-us"><font face="Times New Roman">taglib</font></span></strong><strong><span style="font-family:'宋体';">控制页面元素</span><span lang="en-us"></span></strong></p> 
 <p><strong></strong></p> 
 <strong></strong> 
 <p class="MsoNormal" style="text-align:center;" align="center"><strong><span lang="en-us"></span></strong></p> 
 <p><strong><font face="Times New Roman"> </font></strong></p> 
 <strong></strong> 
 <p class="MsoNormal" style="text-align:center;" align="center"><span style="font-family:'宋体';">王保政</span></p> 
 <p class="MsoNormal" style="text-align:center;" align="center"><span lang="en-us"><font face="Times New Roman">Email:baozhengw@netease.com</font></span></p> 
 <p class="MsoNormal" style="text-align:center;" align="center"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">JSP</font></span><span style="font-family:'宋体';">页面中的页面元素</span><span lang="en-us"><font face="Times New Roman">,URL,</font></span><span style="font-family:'宋体';">按钮是否可见或变灰都可通过</span><span lang="en-us"><font face="Times New Roman">Acegi</font></span><span style="font-family:'宋体';">标签库来实现，使用</span><span lang="en-us"><font face="Times New Roman">Acegi</font></span><span style="font-family:'宋体';">标签库，可设置不同的权限</span><span lang="en-us"><font face="Times New Roman">ID</font></span><span style="font-family:'宋体';">允许点击的按钮</span><span lang="en-us"><font face="Times New Roman">,</font></span><span style="font-family:'宋体';">访问的</span><span lang="en-us"><font face="Times New Roman">URL,</font></span><span style="font-family:'宋体';">或隐藏无权限的功能菜单。</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">如何配置和使用标签库？</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">打开</span><span lang="en-us"><font face="Times New Roman">acegi-security-1.0.3.jar,</font></span><span style="font-family:'宋体';">在</span><span lang="en-us"><font face="Times New Roman">META-INF</font></span><span style="font-family:'宋体';">目录中有一个</span><span lang="en-us"><font face="Times New Roman">authz.tld</font></span><span style="font-family:'宋体';">文件，将此文件复制到你的</span><span lang="en-us"><font face="Times New Roman">web</font></span><span style="font-family:'宋体';">应用的</span><span lang="en-us"><font face="Times New Roman">WEB-INF/tld</font></span><span style="font-family:'宋体';">中，然后配置</span><span lang="en-us"><font face="Times New Roman">web.xml,</font></span><span style="font-family:'宋体';">增加</span><span lang="en-us"><font face="Times New Roman">:</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">       &lt;taglib&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        &lt;taglib-uri&gt;http://acegisecurity.sf.net/authz&lt;/taglib-uri&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        &lt;taglib-location&gt;/WEB-INF/tld/authz.tld&lt;/taglib-location&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/taglib&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">然后</span><span lang="en-us"><font face="Times New Roman">JSP</font></span><span style="font-family:'宋体';">页面可以通过声明</span><span lang="en-us"><font face="Times New Roman">&lt;%@ taglib uri="http://acegisecurity.sf.net/authz" prefix="authz"%&gt;</font></span><span style="font-family:'宋体';">来引用标签库。</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">声明了标签以后，在页面中可以按下面的格式使用</span><span lang="en-us"><font face="Times New Roman">acegi</font></span><span style="font-family:'宋体';">标签</span><span lang="en-us"><font face="Times New Roman">(authz</font></span><span style="font-family:'宋体';">标签可以嵌套使用</span><span lang="en-us"><font face="Times New Roman">)</font></span><span style="font-family:'宋体';">：</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;!--  </font></span><span style="font-family:'宋体';">使用权限标签的例子</span><span lang="en-us"><font face="Times New Roman">,</font></span><span style="font-family:'宋体';">标签可以嵌套</span><font face="Times New Roman"> <span lang="en-us">  --&gt;</span></font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;authz:authorize ifAnyGranted="AUTH_USER"&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;td&gt; </font></span><span style="font-family:'宋体';">一般用户权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/td&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> &lt;authz:authorize ifAnyGranted="AUTH_ADMIN"&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;td&gt; </font></span><span style="font-family:'宋体';">超级用户权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/td&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/authz:authorize&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/authz:authorize&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        &lt;authz:authorize ifAnyGranted="AUTH_SYS"&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;td&gt; </font></span><span style="font-family:'宋体';">系统维护权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/td&gt;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">      &lt;/authz:authorize&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">也可以在</span><span lang="en-us"><font face="Times New Roman">JavaScript</font></span><span style="font-family:'宋体';">中用</span><span lang="en-us"><font face="Times New Roman">document.write</font></span><span style="font-family:'宋体';">输出权限标签：</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;script language="JavaScript" type="text/javascript"&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">//</font></span><span style="font-family:'宋体';">订单中心</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> document.write('&lt;authz:authorize ifAnyGranted="AUTH_TAG_ORDER_CENTER"&gt; ');</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> new tree(TREE_ITEMS1, TREE_TPL);</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> document.write('&lt;/authz:authorize&gt;');</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;/script&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">在有</span><span lang="en-us"><font face="Times New Roman">javaScript</font></span><span style="font-family:'宋体';">脚本中有时不方便引用</span><span lang="en-us"><font face="Times New Roman">acegi</font></span><span style="font-family:'宋体';">标签，可以从</span><span lang="en-us"><font face="Times New Roman">SecurityContextHolder</font></span><span style="font-family:'宋体';">中获得权限集合，然后判断当前登录的用户，其权限集合中是否有某权限，根据判断结果来决定显示或隐藏哪些页面元素，见下面的</span><span lang="en-us"><font face="Times New Roman">JSP:</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page contentType="text/html; charset=GBK"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ taglib uri="http://acegisecurity.sf.net/authz" prefix="authz"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.Authentication" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.context.SecurityContext" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.context.SecurityContextHolder" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.userdetails.UserDetails" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.ui.AccessDeniedHandlerImpl" %&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.springframework.aop.framework.ProxyFactoryBean"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.springframework.context.ApplicationContext"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.springframework.context.support.ClassPathXmlApplicationContext"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="org.acegisecurity.GrantedAuthority"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%@ page import="com.mysoft.common.ValidateAcegiAuth"%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%  </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">  SecurityContext ctx = SecurityContextHolder.getContext();</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">。。。</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;script language="JavaScript" type="text/javascript"&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">//</font></span><span style="font-family:'宋体';">下面是调用自定义的类</span><span lang="en-us"><font face="Times New Roman">ValidateAcegiAuth</font></span><span style="font-family:'宋体';">，输入当前登录用户的</span><span lang="en-us"><font face="Times New Roman">SecurityContext</font></span><span style="font-family:'宋体';">，及权限码，如果有</span><span lang="en-us"><font face="Times New Roman">AUTH_FUN_TICKET_CHKERR</font></span><span style="font-family:'宋体';">权限，则执行相应的</span><span lang="en-us"><font face="Times New Roman">JS</font></span><span style="font-family:'宋体';">脚本。</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> &lt;%if(ValidateAcegiAuth.validate(ctx,"AUTH_FUN_TICKET_CHKERR")){%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">//</font></span><span style="font-family:'宋体';">具有</span><span lang="en-us"><font face="Times New Roman">AUTH_FUN_TICKET_CHKERR </font></span><span style="font-family:'宋体';">权限，执行相应</span><span lang="en-us"><font face="Times New Roman">js</font></span><span style="font-family:'宋体';">脚本</span><span lang="en-us"><font face="Times New Roman">…</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;%}%&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">&lt;/script&gt;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span style="font-family:'宋体';">下面是</span><span lang="en-us"><font face="Times New Roman">ValidateAcegiAuth</font></span><span style="font-family:'宋体';">类的代码：</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">package com.mysoft.common;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.Authentication;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.context.SecurityContext;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.context.SecurityContextHolder;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.userdetails.UserDetails;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.ui.AccessDeniedHandlerImpl;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.springframework.aop.framework.ProxyFactoryBean;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.springframework.context.ApplicationContext;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.springframework.context.support.ClassPathXmlApplicationContext; </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">import org.acegisecurity.GrantedAuthority;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">/**</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> * </font></span><span style="font-family:'宋体';">验证权限集合中是否有某一权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> * @author bzwang</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> * </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> *</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman"> */</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">public class ValidateAcegiAuth </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">{<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">       /**</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        *  </font></span><span style="font-family:'宋体';">验证权限集合中是否有某一权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        * @param ctxLoginUser SecurityContext</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        * @param sAuthID </font></span><span style="font-family:'宋体';">权限</span><span lang="en-us"><font face="Times New Roman">ID</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        * @return boolean </font></span><span style="font-family:'宋体';">是否有指定的权限</span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">        */</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">       public static boolean validate(SecurityContext ctxLoginUser,String sAuthID)</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">       {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              boolean bool = false;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              Authentication authLoginUser = null; </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              GrantedAuthority[] arrayAuthorities = null;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              if(ctxLoginUser!=null)</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  authLoginUser = ctxLoginUser.getAuthentication();</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  if(authLoginUser!=null)</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                         arrayAuthorities = authLoginUser.getAuthorities();</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                         for(int i=0;i&lt;arrayAuthorities.length;i++)</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                         {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                             if(arrayAuthorities[i].toString().equals(sAuthID))</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                          {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                             bool = true;   </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                               break;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                          }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                         }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                                 </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  else</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                         bool = false;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                  }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">               </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">           }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              else</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              {<!-- --></font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                     bool = false;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">                </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              </font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">              return bool;</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">       }</font></span></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"></span></p> 
 <p><font face="Times New Roman"> </font></p> 
 <p class="MsoNormal" style="text-indent:21pt;"><span lang="en-us"><font face="Times New Roman">}</font></span></p>   
</div> 
<p>转载于:https://www.cnblogs.com/ajuanabc/archive/2007/08/09/2463156.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1871d410cb8c21189d994a2cdb40d2f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">重修:拉格朗日恒等式(初等代数)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7570f8fe2d14b6dc8e35cfd616bf15dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">把onmouseover事件写在css文件里面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>