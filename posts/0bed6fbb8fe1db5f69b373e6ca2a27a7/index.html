<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>屏幕与窗口录制转码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="屏幕与窗口录制转码" />
<meta property="og:description" content="背景介绍 在一些培训或者交流时候，希望可以留下视频后期观看，产生了视频录制需求。同时在存储时，希望可以占用本地磁盘较小的空间，并且可以看清楚视频中的字体。经过实践，选取录屏软件与转码软件，大约1小时视频转码后在300M以内。下面对软件使用做简单介绍
### 软件介绍
录屏软件使用开源的OBS，官网地址与快速下载地址为
Open Broadcaster Software | OBS
https://github.91chi.fun/https://github.com//BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-n5.0-latest-win64-gpl-5.0.zip
转码软件使用开源的ffmpeg，官网地址与快速下载地址为
FFmpeg
https://cdn-fastly.obsproject.com/downloads/OBS-Studio-27.2.3-Full-Installer-x64.exe
OBS使用介绍 安装完OBS后选择设置
设置视频参数如下，注意分辨率设置要与当前电脑一致，否则界面录制不全。
设置输出属性如下，硬件编码指使用gpu编码，软编码指使用cpu编码
然后在场景位置增加一个场景，比如“桌面录制”，添加来源为“音频输入采集”，“显示器采集”
选择完成后，中间界面可以看到屏幕预览信息，如果此时报错，一般为系统显示设置问题，可以进行百度
音频输入采集后，“混音器”部分会有“麦克风输入”与“桌面音频输出”，如果不想收集麦克风声音，需要点击输入的&#34;小喇叭&#34;图标静音，输出其他同理
如果要录制一个窗口，可以新建场景，选择窗口采集，窗口采集时，右键预览位置，可以设置窗口居中或者拉伸状态
注意，如果录制窗口，这个窗口可以后置，但不能最小化，最小化后无法捕捉窗口状态。
ffmpeg使用介绍 使用obs录制完成后，视频文件比较大，为了方便存储，通过转码方式降低视频质量与视频大小
ffmpeg下载完成后，解压到本地文件夹，可以看到bin目录下有ffmpeg.exe程序
接下来配置环境变量
右键此电脑--&gt;高级系统设置--&gt;高级--&gt;环境变量--&gt;系统变量--&gt;Path--&gt;编辑--&gt;新增，填入上面路径
新建一个cmd窗口，输入ffmpeg -version，表示安装成功
接下来cmd中输入以下命令，即可实现转码
建议：使用intel集成显卡，修改分辨率，一般是1080 720 480，-1表示等比例缩放
ffmpeg -i &#34;E:\项目\xxx.mp4&#34; -vf scale=-1:720 -vcodec h264_qsv -preset slow -r 15 -x264opts keyint=75 -vcodec h264_qsv -preset slow -b:v 600k -f mp4 &#34;E:\项目\xxx-720P.mp4&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0bed6fbb8fe1db5f69b373e6ca2a27a7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-26T15:10:09+08:00" />
<meta property="article:modified_time" content="2022-03-26T15:10:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">屏幕与窗口录制转码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>背景介绍</strong></h2> 
<p>    在一些培训或者交流时候，希望可以留下视频后期观看，产生了视频录制需求。同时在存储时，希望可以占用本地磁盘较小的空间，并且可以看清楚视频中的字体。经过实践，选取录屏软件与转码软件，大约1小时视频转码后在300M以内。下面对软件使用做简单介绍</p> 
<p>### 软件介绍</p> 
<p>录屏软件使用开源的OBS，官网地址与快速下载地址为</p> 
<p><a href="https://obsproject.com/" rel="nofollow" title="Open Broadcaster Software | OBS">Open Broadcaster Software | OBS</a></p> 
<p><a href="https://github.91chi.fun/https://github.com//BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-n5.0-latest-win64-gpl-5.0.zip" title="https://github.91chi.fun/https://github.com//BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-n5.0-latest-win64-gpl-5.0.zip">https://github.91chi.fun/https://github.com//BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-n5.0-latest-win64-gpl-5.0.zip</a></p> 
<p>转码软件使用开源的ffmpeg，官网地址与快速下载地址为</p> 
<p><a href="https://ffmpeg.org/" rel="nofollow" title="FFmpeg">FFmpeg</a></p> 
<p><a href="https://cdn-fastly.obsproject.com/downloads/OBS-Studio-27.2.3-Full-Installer-x64.exe" rel="nofollow" title="https://cdn-fastly.obsproject.com/downloads/OBS-Studio-27.2.3-Full-Installer-x64.exe">https://cdn-fastly.obsproject.com/downloads/OBS-Studio-27.2.3-Full-Installer-x64.exe</a></p> 
<p></p> 
<h2>OBS使用介绍</h2> 
<p>安装完OBS后选择设置</p> 
<p><img alt="" height="698" src="https://images2.imgbox.com/da/5c/1jEur8S1_o.png" width="1178"></p> 
<p>设置视频参数如下，注意分辨率设置要与当前电脑一致，否则界面录制不全。</p> 
<p><img alt="" height="697" src="https://images2.imgbox.com/89/e4/8j7QL94n_o.png" width="1200"></p> 
<p>设置输出属性如下，硬件编码指使用gpu编码，软编码指使用cpu编码</p> 
<p><img alt="" height="872" src="https://images2.imgbox.com/ed/03/mUE13UUM_o.png" width="1200"></p> 
<p></p> 
<p>然后在场景位置增加一个场景，比如“桌面录制”，添加来源为“音频输入采集”，“显示器采集”</p> 
<p><img alt="" height="698" src="https://images2.imgbox.com/35/07/Cr28q6xu_o.png" width="1178"></p> 
<p>选择完成后，中间界面可以看到屏幕预览信息，如果此时报错，一般为系统显示设置问题，可以进行百度</p> 
<p>音频输入采集后，“混音器”部分会有“麦克风输入”与“桌面音频输出”，如果不想收集麦克风声音，需要点击输入的"小喇叭"图标静音，输出其他同理</p> 
<p></p> 
<p>如果要录制一个窗口，可以新建场景，选择窗口采集，窗口采集时，右键预览位置，可以设置窗口居中或者拉伸状态</p> 
<p>注意，如果录制窗口，这个窗口可以后置，但不能最小化，最小化后无法捕捉窗口状态。</p> 
<p><img alt="" height="930" src="https://images2.imgbox.com/e2/9a/VhPe8jNz_o.png" width="1177"></p> 
<p></p> 
<h2>ffmpeg使用介绍</h2> 
<p>使用obs录制完成后，视频文件比较大，为了方便存储，通过转码方式降低视频质量与视频大小</p> 
<p>ffmpeg下载完成后，解压到本地文件夹，可以看到bin目录下有ffmpeg.exe程序</p> 
<p><img alt="" height="291" src="https://images2.imgbox.com/c1/50/SYQXxdnc_o.png" width="571"></p> 
<p>接下来配置环境变量</p> 
<p>右键此电脑--&gt;高级系统设置--&gt;高级--&gt;环境变量--&gt;系统变量--&gt;Path--&gt;编辑--&gt;新增，填入上面路径</p> 
<p><img alt="" height="710" src="https://images2.imgbox.com/86/6f/NxFn4bqS_o.png" width="1200"></p> 
<p>新建一个cmd窗口，输入ffmpeg -version，表示安装成功</p> 
<p><img alt="" height="494" src="https://images2.imgbox.com/d4/e7/OGKeMrU1_o.png" width="488"></p> 
<p></p> 
<p>接下来cmd中输入以下命令，即可实现转码</p> 
<p>建议：使用intel集成显卡，修改分辨率，一般是1080 720 480，-1表示等比例缩放</p> 
<p>ffmpeg -i "E:\项目\xxx.mp4" -vf scale=-1:720 -vcodec h264_qsv -preset slow -r 15 -x264opts keyint=75 -vcodec h264_qsv -preset slow -b:v 600k -f mp4 "E:\项目\xxx-720P.mp4"</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0fd8c5615a3e5566f523a087c97a610c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">POE供电标准之802.3af、802.3at、802.3bt解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b8dc52040b0c1fc807982180ed9c1f32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">go111 module、goproxy以及结合Goland使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>