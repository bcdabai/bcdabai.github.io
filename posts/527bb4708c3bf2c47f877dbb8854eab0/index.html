<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于微信小程序地图组件实现行车轨迹 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于微信小程序地图组件实现行车轨迹" />
<meta property="og:description" content="微信小程序是一款能够开发出各种功能的便捷工具，其中内置的地图组件，为我们提供了强大的地图展示和交互的能力，为我们的开发节约了不少时间和精力。同时，利用微信小程序内置的定时器，我们也能够简单地实现经纬度轨迹移动的效果。
在这个程序中，我们需要用到地图组件的polyline和marker属性。先来了解一下它们的作用：
polyline：用于在地图上展示一条折线，可以设置线条样式、颜色、粗细、折线点等属性。marker：用于在地图上创建标记点，可以设置标记点的经纬度、图标、标签等属性。 接下来我们就可以开始介绍这个程序的实现过程了。
首先，我们需要在wxml文件中引入map组件，并设置相应的属性：
&lt;map id=&#34;map&#34; longitude=&#34;{{longitude}}&#34; latitude=&#34;{{latitude}}&#34; markers=&#34;{{markers}}&#34; polyline=&#34;{{polyline}}&#34; style=&#34;width: 100%; height: 100%;&#34;&gt;&lt;/map&gt; 其中，longitude和latitude分别表示地图中心所在的经纬度，markers和polyline则是我们需要在地图上展示的标记点和折线的属性。
接下来，我们需要在js文件中定义相应的数据：
data: { longitude: 0, latitude: 0, markers: [], polyline: [] } 在这里，我们将地图中心的经纬度、标记点和折线数据都定义为空。
然后，我们需要在onLoad生命周期函数中获取当前用户的位置信息，并将地图中心设置为当前位置：
onLoad: function () { wx.getLocation({ type: &#39;gcj02&#39;, success: res =&gt; { this.setData({ longitude: res.longitude, latitude: res.latitude }) } }) } 在获取到用户位置的经纬度后，我们将其设置为地图的中心点。
接下来，我们需要通过定时器，实现经纬度轨迹移动的效果。我们可以在onShow生命周期函数中设置一个定时器，每隔一段时间更新一次标记点和折线的经纬度数据：
onShow: function () { let index = 0; let timer = setInterval(() =&gt; { if (index &lt; points." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/527bb4708c3bf2c47f877dbb8854eab0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-29T10:17:36+08:00" />
<meta property="article:modified_time" content="2023-10-29T10:17:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于微信小程序地图组件实现行车轨迹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>微信小程序是一款能够开发出各种功能的便捷工具，其中内置的地图组件，为我们提供了强大的地图展示和交互的能力，为我们的开发节约了不少时间和精力。同时，利用微信小程序内置的定时器，我们也能够简单地实现经纬度轨迹移动的效果。</p> 
<p>在这个程序中，我们需要用到地图组件的polyline和marker属性。先来了解一下它们的作用：</p> 
<ul><li>polyline：用于在地图上展示一条折线，可以设置线条样式、颜色、粗细、折线点等属性。</li><li>marker：用于在地图上创建标记点，可以设置标记点的经纬度、图标、标签等属性。</li></ul> 
<p>接下来我们就可以开始介绍这个程序的实现过程了。</p> 
<p>首先，我们需要在wxml文件中引入map组件，并设置相应的属性：</p> 
<pre><code>&lt;map id="map" longitude="{<!-- -->{longitude}}" latitude="{<!-- -->{latitude}}" markers="{<!-- -->{markers}}" polyline="{<!-- -->{polyline}}" style="width: 100%; height: 100%;"&gt;&lt;/map&gt;
</code></pre> 
<p> </p> 
<p>其中，longitude和latitude分别表示地图中心所在的经纬度，markers和polyline则是我们需要在地图上展示的标记点和折线的属性。</p> 
<p>接下来，我们需要在js文件中定义相应的数据：</p> 
<pre><code>data: {
  longitude: 0,
  latitude: 0,
  markers: [],
  polyline: []
}
</code></pre> 
<p> </p> 
<p>在这里，我们将地图中心的经纬度、标记点和折线数据都定义为空。</p> 
<p>然后，我们需要在onLoad生命周期函数中获取当前用户的位置信息，并将地图中心设置为当前位置：</p> 
<pre><code>onLoad: function () {
  wx.getLocation({
    type: 'gcj02',
    success: res =&gt; {
      this.setData({
        longitude: res.longitude,
        latitude: res.latitude
      })
    }
  })
}
</code></pre> 
<p> </p> 
<p>在获取到用户位置的经纬度后，我们将其设置为地图的中心点。</p> 
<p>接下来，我们需要通过定时器，实现经纬度轨迹移动的效果。我们可以在onShow生命周期函数中设置一个定时器，每隔一段时间更新一次标记点和折线的经纬度数据：</p> 
<pre><code>onShow: function () {
  let index = 0;
  let timer = setInterval(() =&gt; {
    if (index &lt; points.length) {
      let marker = [{
        id: 1,
        longitude: points[index].longitude,
        latitude: points[index].latitude,
        iconPath: '/images/icon.png',
        width: 50,
        height: 50
      }];
      let polyline = [{
        points: points.slice(0, index + 1),
        color: "#FF0000DD",
        width: 2,
        dottedLine: false
      }];
      this.setData({
        longitude: points[index].longitude,
        latitude: points[index].latitude,
        markers: marker,
        polyline: polyline
      })
      index++;
    } else {
      clearInterval(timer);
    }
  }, 1000)
}
</code></pre> 
<p> </p> 
<p>在这段代码中，我们定义了一个points数组，用来存储一组点的经纬度数据，index变量表示当前经纬度点的索引。定时器每隔一秒钟就更新一次经纬度点的位置。我们通过更新marker和polyline的经纬度属性，来达到经纬度轨迹移动的效果。</p> 
<p>最后，我们需要在wxml文件中引入icon图片，用于作为标记点的图标。我们可以将图片存放在images文件夹下，并设置图片宽高为30px</p> 
<p>这样，我们就完成了利用微信小程序内置的地图组件，实现经纬度轨迹移动的程序。通过简单的设置，我们可以展示出一条折线经过一系列点的轨迹，给用户带来更好的交互体验。</p> 
<p>最后附上实现的效果，下载地址在我的资源里</p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/36/85/lc5ZCPFg_o.gif" alt="4fe683c691114d2badc68b8caffb4a9a.gif"></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2cf5ef177f59a6181bfbb9f28ce9b19f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IMYAI-人工智能聊天绘画机器人4.0 - 终身学习者的超级生产力工具！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba15dbf5f00b712a16a315f425876277/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【教3妹学编程-java实战5】结构体字段赋值的几种方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>