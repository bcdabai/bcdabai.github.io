<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux的FTP安装、使用和配置（FTP客户端管理工具） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux的FTP安装、使用和配置（FTP客户端管理工具）" />
<meta property="og:description" content="一、FTP服务介绍 1. 什么是HTP服务 FTP（File Transfer Protocol）是一种应用非常广泛并且古老的一个互联网文件传输协议
FTP主要用户互联网中文件的双向传输（上传/下载）、文的共享
跨品台（Linux、Windows、MAC）
FTP属于C/S架构，拥有客户端和服务器，使用TCP作为底层传输协议，提供可靠的数据传输
FTP的默认端口 21（命令端口）、20（数据端口，主动模式下） ，FTP 默认为被动模式
FTP软件全称为vsftpd
vsftpd =&gt; vs（very secure ftp daemon）
vs非常安全的ftp守护进程
2. FTP服务的客户端工具 Linux：ftp、lftp（客户端程序）
Windows：Xftp、Chrome、Firefox
lftp和ftp工具区别：
lftp：默认是以匿名用户访问
ftp：默认是以用户名&#43;密码方式访问
lftp可以批量并且下载目录
3. FTP的两种运行模式 在FTP服务中，其一共拥有两种模式（主动模式&#43;被动模式）
注意：这个主动和被动是站在FTP服务器端来看的
如果是FTP服务器主动连接客户端就是主动模式
如果是客户端主动连接FTP服务端就是被动模式
FTP模式是被动模式
1）主动模式 客户端打开大于1023的随机命令端口和大于1023的随机数据端口向服务的的21号端口发起请求
服务端的21号命令端口响应客户端的随机命令端口
服务端的20号端口主动请求连接客户端的随机数据端口
客户的随机数据端口进行确认
2）被动模式 客户端打开大于1023的随机命令端口和大于1023的随机数据端口向服务的21号端口发起请求
服务端的21号命令端口响应客户端的随机命令端口
客户端主动连接服务器打开的大于1023的随机数据端口
服务端进行确认
3）为什么默认是被动模式 因为如果是主动模式可能会遇到客户端的防火墙拦截的可能，但如果是客户端主动发起连接就不会遇到这种情况。
二、搭建FTP服务 1. 关闭防火墙和selinux 关闭防火墙命令：systemctl stop firewalld
关闭防火墙开机自启：systemctl disable firewalld
关闭selinux：setenforce 0
关闭selinux开机自启：vim /etc/selinux/config
把SELINUX=disabled
2. 安装软件 如果没网挂载光盘。
命令：mount /dev/sr0 /mnt
清除缓存：yum clean all" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2da4b9dc3397c724e522da5fd7202790/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-09T10:35:03+08:00" />
<meta property="article:modified_time" content="2023-03-09T10:35:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux的FTP安装、使用和配置（FTP客户端管理工具）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">一、FTP服务介绍</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. 什么是HTP服务</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP（File Transfer Protocol）是一种应用非常广泛并且古老的一个互联网文件传输协议</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:650px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:38.615387%;height:0;"> 
    <img src="https://images2.imgbox.com/a6/01/GvUFetPM_o.png" style="margin-left:;display:block;width:650px;margin-top:-38.615387%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP主要用户互联网中文件的双向传输（上传/下载）、文的共享</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">跨品台（Linux、Windows、MAC）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP属于C/S架构，拥有客户端和服务器，使用TCP作为底层传输协议，提供可靠的数据传输</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP的默认端口 21（命令端口）、20（数据端口，主动模式下） ，FTP 默认为被动模式</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP软件全称为vsftpd</span></p> 
 <p style="text-align:left;"><a class="kdocs-link" style="color:#0A6CFF;" href="https://so.csdn.net/so/search?q=vsftpd&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-underline" style="text-decoration:underline;">vsftpd</span></span></a><span class="kdocs-fontSize" style="font-size:9pt;"> =&gt; vs（very secure ftp daemon）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">vs非常安全的ftp</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://so.csdn.net/so/search?q=%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-underline" style="text-decoration:underline;">守护进程</span></span></a></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2. FTP服务的客户端工具</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">Linux：ftp、lftp（客户端程序）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">Windows：Xftp、Chrome、Firefox</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">lftp和ftp工具区别：</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">lftp：默认是以匿名用户访问</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">ftp：默认是以用户名+密码方式访问</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">lftp可以批量并且下载目录</span></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3. FTP的两种运行模式</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在FTP服务中，其一共拥有两种模式（主动模式+被动模式）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">注意：这个主动和被动是站在FTP服务器端来看的</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">如果是FTP服务器主动连接客户端就是主动模式</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">如果是客户端主动连接FTP服务端就是被动模式</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">FTP模式是被动模式</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1）主动模式</span></h4> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:443px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:79.006775%;height:0;"> 
    <img src="https://images2.imgbox.com/04/d5/wwxtYbWl_o.png" style="margin-left:;display:block;width:443px;margin-top:-79.006775%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">客户端打开大于1023的随机命令端口和大于1023的随机数据端口向服务的的21号端口发起请求</span></p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">服务端的21号命令端口响应客户端的随机命令端口</span></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">服务端的20号端口主动请求连接客户端的随机数据端口</span></p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">客户的随机数据端口进行确认</span></p></li></ol> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2）被动模式</span></h4> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:495px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:78.38384%;height:0;"> 
    <img src="https://images2.imgbox.com/40/9e/gGAor9DV_o.png" style="margin-left:;display:block;width:495px;margin-top:-78.38384%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">客户端打开大于1023的随机命令端口和大于1023的随机数据端口向服务的21号端口发起请求</span></p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">服务端的21号命令端口响应客户端的随机命令端口</span></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">客户端主动连接服务器打开的大于1023的随机数据端口</span></p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">服务端进行确认</span></p></li></ol> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3）为什么默认是被动模式</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">因为如果是主动模式可能会遇到客户端的防火墙拦截的可能，但如果是客户端主动发起连接就不会遇到这种情况。</span></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">二、搭建FTP服务</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. 关闭防火墙和selinux</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">关闭防火墙命令：systemctl stop firewalld</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">关闭防火墙开机自启：systemctl disable firewalld</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">关闭selinux：setenforce 0</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">关闭selinux开机自启：vim /etc/selinux/config</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">把SELINUX=disabled</span></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2. 安装软件</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">如果没网挂载光盘。</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：mount /dev/sr0 /mnt</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">清除缓存：yum clean all</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">重新建立缓存：yum makecache</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">第一步安装</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">安装命令：yum -y install vsftpd</span></p></li></ul> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">第二步启动ftp服务并添加到开机启动项中</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">启动：systemctl start vsftpd</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">设置开机自启：systemctl enable vsftpd</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">最后通过浏览器输入本机ip测试</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">查看本机Ip：ifconfig</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:461px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:42.082428%;height:0;"> 
    <img src="https://images2.imgbox.com/ca/6a/PCKXVmtV_o.png" style="margin-left:;display:block;width:461px;margin-top:-42.082428%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> 使用FTP软件测试</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:371px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:128.30188%;height:0;"> 
    <img src="https://images2.imgbox.com/1a/b7/aWJlXlOD_o.png" style="margin-left:;display:block;width:371px;margin-top:-128.30188%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:680px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:45.88235%;height:0;"> 
    <img src="https://images2.imgbox.com/d4/ae/sbhxn0rc_o.png" style="margin-left:;display:block;width:680px;margin-top:-45.88235%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3. 了解FTP软件配置文件</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">通过命令：rpm -ql vsftpd，查看安装vsftpd产生了哪写文件</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/43/8f/pj2dDF4Y_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/</span>vsftpd #配置文件的目录</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/vsftpd/</span>ftpusers #用户列表文件，黑名单</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/vsftpd/</span>user_list #用户列表文件，可黑可白（默认是黑名单）</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/vsftpd/</span>vsftpd.conf #配置文件(主配置文件)</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/</span>var<span class="kdocs-fontSize" style="font-size:9pt;">/</span>ftp #匿名用户的默认数据根目录</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/</span>var<span class="kdocs-fontSize" style="font-size:9pt;">/ftp/</span>pub #匿名用户的扩展数据目录</p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/usr/sbin/vsftpd #程序本身（二进制的命令）</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/e4/e4/Z8TUMSCn_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">查看配置文件：过率掉以#开头的内容</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：grep -v ^# /etc/vsftpd/vsftpd.conf</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/b6/27/QFtHaIMt_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">anonymous_enable=</span>YES #支持匿名用户访问</p> 
 <p style="text-align:left;">local_enable<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #支持非匿名用户,普通账号登录，默认进入到自己家目录</p> 
 <p style="text-align:left;">write_enable<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #是否支持写入</p> 
 <p style="text-align:left;">local_umask<span class="kdocs-fontSize" style="font-size:9pt;">=</span>022<span class="kdocs-fontSize" style="font-size:9pt;"> #反掩码 file:</span>644<span class="kdocs-fontSize" style="font-size:9pt;"> rw- r-- r-- dir:</span>755</p> 
 <p style="text-align:left;">dirmessage_enable<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #启用消息功能</p> 
 <p style="text-align:left;">xferlog_enable<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #开启或启用xferlog日志</p> 
 <p style="text-align:left;">connect_from_port_20<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #支持主动模式（默认被动模式）</p> 
 <p style="text-align:left;">xferlog_std_format<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #xferlog日志格式</p> 
 <p style="text-align:left;">listen<span class="kdocs-fontSize" style="font-size:9pt;">=</span>NO #ftp服务独立模式下的监听</p> 
 <p style="text-align:left;">listen_ipv6<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #支持ipv4和ipv6</p> 
 <p style="text-align:left;"></p> 
 <p style="text-align:left;">pam_service_name<span class="kdocs-fontSize" style="font-size:9pt;">=</span>vsftpd #指定认证文件</p> 
 <p style="text-align:left;">userlist_enable<span class="kdocs-fontSize" style="font-size:9pt;">=</span>YES #启用用户列表</p> 
 <p style="text-align:left;">tcp_wrappers<span class="kdocs-fontSize" style="font-size:9pt;">=YES #支持tcp_wrappers功能(FTP限速操作)</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/1e/e6/HqYmBunh_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">三、FTP使用</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. 任务背景</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">某创业公司刚刚起步，随着业务量的增多，咨询和投诉的用户也越来越多，公司的客服部门由原来的2个增加到5个。客服部门平时需要处理大量的用户反馈，不管是邮件，还是ＱＱ，还是电话，客服人员都会针对每一次的用户反馈做详细的记录 ，但是由于客观原因，客服人员没有成熟稳定的客户服务系统，所以希望运维部门能够协助搭建一个文件共享服务来管理这些文档，并且随时跟踪客户的反馈情况。</span></p> 
 <p style="text-align:left;"></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2. 任务要求</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">客服人员必须使用用户名密码(kefu/123456)的方式登录服务器来下载相应文档</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">不允许匿名用户访问</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">客服部门的相关文档保存在指定的目录里/data/kefu local_root=/data/kefu</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">客服用户使用用户kefu/123登录后就只能在默认的==/data/kefu目录里活动==</span></p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3. 配置过程</span></h3> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1）创建客服账号</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：useradd kefu</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">设置密码：echo 123456 | passwd --stdin kefu</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2）不允许匿名用户访问</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">vim /etc/vsftpd/vsftpd.conf</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改12行的配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">anonymous_enable=NO</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">重启vsftpd服务</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">systemctl restart vsftpd</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">关闭匿名用户登录后</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:664px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:69.72891%;height:0;"> 
    <img src="https://images2.imgbox.com/0a/3f/ifpWqxxL_o.png" style="margin-left:;display:block;width:664px;margin-top:-69.72891%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:436px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:75.91743%;height:0;"> 
    <img src="https://images2.imgbox.com/da/80/HJ3kdpTh_o.png" style="margin-left:;display:block;width:436px;margin-top:-75.91743%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3）指定账号访问的目录</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">创建/data/kefu目录</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：mkdir -p /data/keft</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改FTP配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：vim /etc/vsftpd/vsftpd.conf</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在17行添加</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">local_root=/data/kefu</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:473px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:69.97886%;height:0;"> 
    <img src="https://images2.imgbox.com/6d/8a/TgBagJSI_o.png" style="margin-left:;display:block;width:473px;margin-top:-69.97886%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">重启服务:systemctl restart vsftpd</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在XFTP上测试连接，默认就是进入/data/kefu目录</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:15.405405%;height:0;"> 
    <img src="https://images2.imgbox.com/97/20/EBvmtlNC_o.png" style="margin-left:;display:block;width:740px;margin-top:-15.405405%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">4）限定kefu/123只能在/data/kefu目录下活动</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">为了保证安全，只能运行kefu用户在/data/kefu目录下活动</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">禁锢kefu用户只能在/data/kefu目录下</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改/etc/vsftpd/vsftpd.conf配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：vim /etc/vsftpd/vsftpd.conf</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在第18行添加</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">chroot_local_user=YES</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">禁锢在/data/kefu目录</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">5）解决无法上传</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">之所以无法上传，主要原因在于kefu这个账号对于/data/kefu文件夹没有w写权限，因为这个目录是root 创建的。</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">通过命令：getfacl [目录]查看当前目录的ACL 权限</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:680px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:36.764706%;height:0;"> 
    <img src="https://images2.imgbox.com/7c/ef/Wj1Kvu4c_o.png" style="margin-left:;display:block;width:680px;margin-top:-36.764706%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> 解决办法：用户ACL给kefu用户单独设置写权限</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：setfacl -R -m u:kefu:rwx /data/kefu</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:651px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:91.70506%;height:0;"> 
    <img src="https://images2.imgbox.com/47/ff/ng59QjEl_o.png" style="margin-left:;display:block;width:651px;margin-top:-91.70506%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">6）禁锢目录</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">让所有用户只能在固定目录活动</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">禁锢所有用户修改配置文件：/etc/vsftpd/vsftpd.conf</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">添加：chroot_local_user=YES</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">给某一些用户开同非禁锢权限</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">105行 chroot_list_enable=YES 开启用户列表文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">107行chroot_list_file=/etc/vsftpd/chroot_list 指定用户列表文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">比如让hhy这个用户不会被禁锢在指定目录</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：echo hhy &gt;&gt; /etc/vsftpd/chroot_list</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">重启服务：systemctl restart vsftpd</span></p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">四、Linux下ftp客户端管理工具</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. 安装ftp和lftp</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">ftp和lftp都是Linux下ftp的客户端管理工具</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">安装命令：yum -y install ftp lftp</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">ftp一般用来上传下载单个或者多个文件</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">lftp一般用于批量上传或下载文件</span></p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2. ftp工具</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：ftp [目标主机ip]</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">注意：目标主机要安装vsftpd服务</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:599px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:87.14524%;height:0;"> 
    <img src="https://images2.imgbox.com/c6/3f/uEqjoMJm_o.png" style="margin-left:;display:block;width:599px;margin-top:-87.14524%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1） 解决ftp工具登录报错</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">原因是目录没有写入权限</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:46.35135%;height:0;"> 
    <img src="https://images2.imgbox.com/f0/75/Oo8rWlbh_o.png" style="margin-left:;display:block;width:740px;margin-top:-46.35135%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> 解决方案：修改/etc/vsftpd/vsftpd.conf配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在19行添加：allow_writeable_chroot=YES</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2）ftp客户端工具常用命令</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">通过help可以查看有哪些命令</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:55.945946%;height:0;"> 
    <img src="https://images2.imgbox.com/05/dc/Ex0Cmpqg_o.png" style="margin-left:;display:block;width:740px;margin-top:-55.945946%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">ls：和linux上的ls命令类似</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Ctrl+Shift + L：清屏</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">put：使用put [本地文件路径+名称] 上传</span></p></li></ul> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:72.2973%;height:0;"> 
    <img src="https://images2.imgbox.com/7f/5f/aTISKxkV_o.png" style="margin-left:;display:block;width:740px;margin-top:-72.2973%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> get：使用get [远程文件路径+名称] 下载</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:37.162163%;height:0;"> 
    <img src="https://images2.imgbox.com/12/9b/wtjWVYaj_o.png" style="margin-left:;display:block;width:740px;margin-top:-37.162163%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> mput：批量上传多个文件：mput 文件名1 文件名2</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:629px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:50.238476%;height:0;"> 
    <img src="https://images2.imgbox.com/ac/e8/0aBs757E_o.png" style="margin-left:;display:block;width:629px;margin-top:-50.238476%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> mget：批量获取多个文件：mget 文件名1 文件名2</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:51.48649%;height:0;"> 
    <img src="https://images2.imgbox.com/25/e2/W6Dxapp2_o.png" style="margin-left:;display:block;width:740px;margin-top:-51.48649%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> prompt：屏蔽批量输出信息，批量上传下载文件就不需要一直回车确认了</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:64.86487%;height:0;"> 
    <img src="https://images2.imgbox.com/80/71/BNxfsdDD_o.png" style="margin-left:;display:block;width:740px;margin-top:-64.86487%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">quit：退出ftp</span></p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3. lftp工具（批量操作）</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">使用命令：lftp [用户名]@目标主机ip</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:577px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:30.84922%;height:0;"> 
    <img src="https://images2.imgbox.com/03/3f/kFDnlY7n_o.png" style="margin-left:;display:block;width:577px;margin-top:-30.84922%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">lftp常用命令</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">通过 help获取命令帮助</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:70.27027%;height:0;"> 
    <img src="https://images2.imgbox.com/fc/7c/OZ3DCjDh_o.png" style="margin-left:;display:block;width:740px;margin-top:-70.27027%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">获取某个命令的用法：help 命令</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:70.27027%;height:0;"> 
    <img src="https://images2.imgbox.com/f2/c8/YMrl8e6w_o.png" style="margin-left:;display:block;width:740px;margin-top:-70.27027%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">常用命令：mirror</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">示例1：批量上传（把tmp文件夹上传到FTP服务器上）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：mirror -R tmp</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:23.243242%;height:0;"> 
    <img src="https://images2.imgbox.com/bb/3c/YEgDXbSd_o.png" style="margin-left:;display:block;width:740px;margin-top:-23.243242%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">示例2：批量下载（把整个FTP目录下载到本地）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令：mirror ./</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:33.51351%;height:0;"> 
    <img src="https://images2.imgbox.com/97/41/cTNsUzYn_o.png" style="margin-left:;display:block;width:740px;margin-top:-33.51351%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">五、FTP控制</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. FTP访问对象控制（黑名单）</span></h3> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">在 /etc/vsftpd/目录下有这么两个文件</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">ftpusers：黑名单</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">user_list：默认是黑名单（可以改成白名单）</span></p></li></ul> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">默认情况下，root账号是不能登录FTP服务器的。**因为root账号在/etc/vsftpd/ftpusers黑名单里</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:621px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:60.547504%;height:0;"> 
    <img src="https://images2.imgbox.com/bc/03/8uOjz2oh_o.png" style="margin-left:;display:block;width:621px;margin-top:-60.547504%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">注意：这个两个黑名单是同时起作用的，只有把这个两个名单里的用户同时删除才能登录</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">示例2：ftpusers 和 user_list黑名单不同之处</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">ftpusers：被禁用，可以输入密码，返回530</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">[root@localhost ~]# ftp 192.168.44.122
Connected to 192.168.44.122 (192.168.44.122).
220 (vsFTPd 3.0.2)
Name (192.168.44.122:root): kefu
331 Please specify the password.
Password:
530 Login incorrect.
Login failed.
ftp&gt;</code></pre> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">user_list：默认情况下user_list文件也是黑名单，如果在该文件里直接拒绝，不给输入密码的机会。</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">[root@localhost ~]# ftp 192.168.44.122
Connected to 192.168.44.122 (192.168.44.122).
220 (vsFTPd 3.0.2)
Name (192.168.44.122:root): kefu
530 Permission denied.
Login failed.
ftp&gt;</code></pre> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">示例3：user_list可以从黑名单变成白名单（允许某个用户登录FTP系统服务器）</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">user_list如果要变成白名单，需要在/etc/vsftpd/vsftpd.conf配置文件里增加</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">userlist_deny=NO</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">注意：如果user_list被设置为白名单，那必须在该文件里 的用户才能访问ftp服务</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">总结</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">用户在ftpusers文件中，那么用户不能访问ftp服务器</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">用户在user_list文件中，如果该文件是白名单，那么只在该文件中的用户可以访问ftp服务</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">如果user_list文件是白名单，用户即在ftpusers中又在user_list中，那么ftpusers拒绝优先</span></p> 
 <p style="text-align:left;"></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">2. FTP 网络访问控制</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/hosts.allow：允许访问网段的配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">/etc/hosts.deny：拒绝访问网段的配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">TP必须支持tcp_wrappers</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">通过命令：tail -1 /etc/vsftpd/vsftpd.conf 可以查看ftp的配置文件，是支持tcp_wrappers</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">[root@localhost vsftpd]# tail -1 /etc/vsftpd/vsftpd.conf
tcp_wrappers=YES
[root@localhost vsftpd]#</code></pre> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:645px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:88.83721%;height:0;"> 
    <img src="https://images2.imgbox.com/04/0c/gok5p047_o.png" style="margin-left:;display:block;width:645px;margin-top:-88.83721%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1)限制IP地址</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">限制ip或者ip网段访问示例</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改/etc/hosts.deny配置文件</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">添加对应配置文件：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">vsftpd:all     拒绝所有主机连接ftp
vsftpd:all EXCEPT 192.168.44.122    拒绝所有ip ，除了192.168.44.122
vsftpd:192.168.44.155    拒绝单个ip访问
vsftpd:192.168.44.155:allow    允许192.168.44.155访问，类似/etc/hosts.allow里增加vsftpd:192.168.44.155</code></pre> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">拒绝某个网段</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">vsftpd:192.168.44.122/255.255.255.0   拒绝某个网段
vsftpd:192.168.0.0/255.255.255.0 EXCEPT 192.168.44.122   拒绝某个网段，但是除了192.168.44.122地址</code></pre> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">注意：子网掩码不支持192.168.44.122/24这种写法</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">还可以禁用sshd服务的某个ip</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">vim /etc/hosts.deny
vsftpd,sshd:192.168.44.155</code></pre> 
 <p style="text-align:left;">代表禁止：192.168<span class="kdocs-fontSize" style="font-size:9pt;">.</span>44<span class="kdocs-fontSize" style="font-size:9pt;">.155这个ip 连接这个两个服务</span></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2）如何判断某个服务是否支持tcp_wrappers</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">命令： ldd命令 +二进制程序，查询某个软件包含哪些模块</span></p> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">示例：查询vsftpd与sshd是否支持tcp_wrappers</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">[root@localhost vsftpd]# ldd /usr/sbin/sshd | grep libwrap*
    libwrap.so.0 =&gt; /lib64/libwrap.so.0 (0x00007fc5e4160000)
[root@localhost vsftpd]# ldd /usr/sbin/vsftpd | grep libwrap*
    libwrap.so.0 =&gt; /lib64/libwrap.so.0 (0x00007ff21c4da000)
[root@localhost vsftpd]#</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3）显示FTP流量</span></h4> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">修改配置文件</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">vim /etc/vsftpd/vsftpd.conf
在配置文件中添加一行
local_max_rate=0
# 0代码不限速
# local_max_rate以字节为单位</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">4）使用第三方平台视频</span></h4> 
 <ol start="1"><li style="margin-left:2.8em;list-style-type:lower-alpha;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">在linux中安装httpd</span><br><span class="kdocs-fontSize" style="font-size:9pt;">命令：yum -y install httpd</span></p></li></ol> 
 <ol start="2"><li style="margin-left:2.8em;list-style-type:lower-alpha;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">启动httpd</span><br><span class="kdocs-fontSize" style="font-size:9pt;">命令：systemctl start httpd\</span></p></li></ol> 
 <ol start="3"><li style="margin-left:2.8em;list-style-type:lower-alpha;text-indent:0;text-align:left;"><p><span class="kdocs-fontSize" style="font-size:9pt;">：在/var/www/html项目目录中创建一个demo.html文件</span></p></li></ol> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;">把下面内容写入demo.html中</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;iframe height=498 width=510 src='https://player.youku.com/embed/XNTg4NjMwNTUwNA==' frameborder=0'allowfullscreen'&gt;&lt;/iframe&gt;</code></pre> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:488px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:54.71311%;height:0;"> 
    <img src="https://images2.imgbox.com/88/bc/inmTwvM8_o.png" style="margin-left:;display:block;width:488px;margin-top:-54.71311%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:556px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:103.23741%;height:0;"> 
    <img src="https://images2.imgbox.com/9f/16/KgrX9QvP_o.png" style="margin-left:;display:block;width:556px;margin-top:-103.23741%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;"><span class="kdocs-fontSize" style="font-size:9pt;"> </span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/282d829a275d38d18ab3552758562bdf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">activiti6 任务委派</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e9ee21c2573b26689151710d74750bd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Git报错解决：OpenSSL SSL_read: Connection was reset, errno 10054 错误解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>