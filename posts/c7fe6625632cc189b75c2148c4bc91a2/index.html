<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>git submodule update --init --recursive失败的处理办法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="git submodule update --init --recursive失败的处理办法" />
<meta property="og:description" content="文章目录
前言
1 clone事例
2 Failed to clone
3 假象clone的处理方法
4 网络问题
总结
前言 由于国内网络环境的影响，我们从 github clone 代码时，总是会出现 clone 失败的情况。当 clone失败时，我们怎么处理解决呢？以下总结了三种解决办法，仅供参考交流。
1 clone事例 这里，我以获取乐鑫提供的软件库文件 ESP-IDF 仓库。作为 clone 的事例，具体讲解当 clone 失败时，怎么解决问题。
获取 ESP-IDF 的本地副本：打开终端，切换到要保存 ESP-IDF 的工作目录，使用 git clone 命令克隆远程仓库。
打开终端，输入以下命令：
mkdir -p ~/esp cd ~/esp git clone --recursive https://github.com/espressif/esp-idf.git ​
ESP-IDF 将下载至 ~/esp/esp-idf。
2 Failed to clone 受到网络环境的影响，代码一次性克隆成功，基本属于中彩票。经常会出现子模块 clone 失败的情况。即报错：Failed to clone...
这种问题，大多由于网络不稳定或者无法访问 github 子模块网络，我们首先多尝试 clone几次（说不定网络稳定一会儿，就能 clone 成功），具体步骤如下：
(1) 切换到 esp-idf 代码目录下；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c7fe6625632cc189b75c2148c4bc91a2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-25T02:20:12+08:00" />
<meta property="article:modified_time" content="2022-10-25T02:20:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">git submodule update --init --recursive失败的处理办法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <p id="main-toc"><strong>文章目录</strong></p> 
 <p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:80px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow"><span style="color:#4da8ee;">前言</span></a></p> 
 <p id="1%20clone%E4%BA%8B%E4%BE%8B-toc" style="margin-left:80px;"><a href="#1%20clone%E4%BA%8B%E4%BE%8B" rel="nofollow"><span style="color:#4da8ee;">1 clone事例</span></a></p> 
 <p id="%C2%A02%20Failed%20to%20clone-toc" style="margin-left:80px;"><a href="#%C2%A02%20Failed%20to%20clone" rel="nofollow"><span style="color:#4da8ee;">2 Failed to clone</span></a></p> 
 <p id="3%20%E5%81%87%E8%B1%A1clone%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#3%20%E5%81%87%E8%B1%A1clone%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95" rel="nofollow"><span style="color:#4da8ee;">3 假象clone的处理方法</span></a></p> 
 <p id="4%20%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98-toc" style="margin-left:80px;"><a href="#4%20%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98" rel="nofollow"><span style="color:#4da8ee;">4 网络问题</span></a></p> 
 <p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:80px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow"><span style="color:#4da8ee;">总结</span></a></p> 
</div> 
<hr> 
<h4 id="%E5%89%8D%E8%A8%80"><a id="_7"></a>前言</h4> 
<p>由于国内网络环境的影响，我们从 <a class="link-info" href="https://github.com" title="github">github</a> <span style="color:#4da8ee;">clone</span> 代码时，总是会出现 <span style="color:#4da8ee;">clone</span> 失败的情况。当 <span style="color:#4da8ee;">clone</span>失败时，我们怎么处理解决呢？以下总结了三种解决办法，仅供参考交流。</p> 
<hr> 
<h4 id="1%20clone%E4%BA%8B%E4%BE%8B">1 clone事例</h4> 
<p>这里，我以获取乐鑫提供的软件库文件 <a href="https://github.com/espressif/esp-idf" title="ESP-IDF 仓库">ESP-IDF 仓库</a>。作为 <span style="color:#4da8ee;">clone</span> 的事例，具体讲解当 <span style="color:#4da8ee;">clone</span> 失败时，怎么解决问题。</p> 
<p>获取 <span style="color:#4da8ee;">ESP-IDF</span> 的本地副本：打开终端，切换到要保存 <span style="color:#4da8ee;">ESP-IDF</span> 的工作目录，使用 <span style="color:#fe2c24;"><code><span style="background-color:#9c8ec1;">git clone</span></code></span> 命令克隆远程仓库。</p> 
<p>打开终端，输入以下命令：</p> 
<div> 
 <pre><code class="language-bash">mkdir -p ~/esp
cd ~/esp
git clone --recursive https://github.com/espressif/esp-idf.git</code></pre> 
</div> 
<p><img alt="" src="https://images2.imgbox.com/03/3c/JIuBr7AH_o.png">​</p> 
<p><span style="color:#4da8ee;"> ESP-IDF</span> 将下载至 <span style="color:#fe2c24;">~<code>/esp/esp-idf</code></span>。</p> 
<h4 id="%C2%A02%20Failed%20to%20clone">2 Failed to clone</h4> 
<p>受到网络环境的影响，代码一次性克隆成功，基本属于中彩票。经常会出现子模块 <span style="color:#4da8ee;">clone</span> 失败的情况。即报错：<span style="color:#fe2c24;">Failed to clone...</span></p> 
<p>这种问题，大多由于网络不稳定或者无法访问 <span style="color:#4da8ee;">github</span> 子模块网络，我们首先多尝试 <span style="color:#4da8ee;">clone</span>几次（说不定网络稳定一会儿，就能 <span style="color:#4da8ee;">clone</span> 成功），具体步骤如下：</p> 
<p>(1) 切换到 <span style="color:#4da8ee;">esp-idf</span> 代码目录下；</p> 
<div> 
 <pre><code class="language-bash">cd esp-idf/</code></pre> 
</div> 
<p> (2) 查看当前本地分支状态；</p> 
<div> 
 <pre><code class="language-bash">git status</code></pre> 
</div> 
<p><span style="color:#4da8ee;">git</span> 会提示，当前本地分支与远程分支的不一致性（红色字体部分），也就是我们 <span style="color:#fe2c24;">clone</span> 失败的具体组件部分。</p> 
<p>(3) 我们再次输入子模块更新下载指令，尝试从远端仓库 <span style="color:#4da8ee;">clone</span> 代码；</p> 
<div> 
 <pre><code class="language-bash">git submodule update --init --recursive</code></pre> 
</div> 
<p>不用担心重复下载，已经 <span style="color:#4da8ee;">clone</span> 成功的代码，会自动跳过。</p> 
<p><img alt="" src="https://images2.imgbox.com/4f/19/kL2We76g_o.png">​</p> 
<p>在网络状况良好的情况下，多尝试几次，基本就能 <span style="color:#4da8ee;">clone</span> 成功。但是，也有可能出现下面的情况，我称之为“<span style="color:#fe2c24;">假象 clone</span>”。</p> 
<h4 id="3%20%E5%81%87%E8%B1%A1clone%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95">3 假象clone的处理方法</h4> 
<p>(1) 经过多次的重复 <span style="color:#4da8ee;">clone</span> 子模块，<span style="color:#4da8ee;">git</span> 已经不再下载新的代码，貌似我们已经成功 <span style="color:#4da8ee;">clone</span> 所有远端仓库；</p> 
<p>(2) 我们再次输入本地分支状态查看命令，发现 <span style="color:#4da8ee;">git</span> 提示了很多“不一致性”；</p> 
<p>也就是说我们本地分支和远端分支还是不同，我们没有 <span style="color:#4da8ee;">clone</span> 成功，可是为什么<span style="color:#4da8ee;"> clone</span> 子模块的命令不再生效呢？</p> 
<p>根据提示路径，我们可以找到不一致模块的文件夹，发现里面只有一个空目录。我们使用快捷键 <span style="color:#4da8ee;">CTRL+H</span>，发现文件夹里面有以 . 开头的隐藏文件（比如 <span style="color:#fe2c24;">.git</span>）。</p> 
<p>这里我猜测 <span style="color:#4da8ee;">clone</span> 命令不再有效的原因是：<span style="color:#fe2c24;">.git</span> 中记录该子模块的版本信息，所以当 <span style="color:#4da8ee;">git</span> 命令，扫描到该子模块时，已经有文件夹和版本信息，所以不再 <span style="color:#4da8ee;">clone</span>，认为已经存在。（如果有同学知道这部分机制，欢迎评论留言）</p> 
<p><img alt="" src="https://images2.imgbox.com/74/42/uHklZoT4_o.png">​</p> 
<p>(3) 既然 <span style="color:#4da8ee;">git</span> 扫描的依据是：<span style="color:#fe2c24;">文件夹 + .git</span>，那么我们将不一致模块的最后一级文件夹删除即可；</p> 
<p>(4) 删除以后，再次输入更新下载子模块的命令；</p> 
<pre><code class="language-bash">git submodule update --init --recursive</code></pre> 
<p>可以看到，刚才删除的子模块再次被下载，并切换到相应的最新分支。</p> 
<p>(5) 最后，输入查看本地分支状态的命令；</p> 
<pre><code class="language-bash">git status</code></pre> 
<p>提示：<strong><span style="color:#fe2c24;">nothing to commit,working tree clean.</span></strong></p> 
<p>翻译过来的意思就是：没有需要提交的代码，本地工作的树很干净，和远端仓库代码一致。</p> 
<p>至此，通过以上两种办法的交替，多次使用，基本能 <span style="color:#4da8ee;">clone</span> 成功，就是比较耗费时间。</p> 
<h4 id="4%20%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98">4 网络问题</h4> 
<p>有些代码，经过以上两种办法还是无法 <span style="color:#4da8ee;">clone</span> 成功。那没办法了，基本就是网络问题。</p> 
<p>这里推荐大家一个小工具（<a class="link-info" href="https://github.com/freefq/free" title="科学上网">科学上网</a>），作者亲自尝试以后，基本能访问 <span style="color:#4da8ee;">google</span> 和 <span style="color:#4da8ee;">YouTube</span>，说明效果还是不错的。</p> 
<hr> 
<h4 id="%E6%80%BB%E7%BB%93"><a id="_45"></a>总结</h4> 
<p>以上就是 <span style="color:#4da8ee;">git submodule update --init --recursive</span> 失败的时候，三种处理方法。推荐先尝试第三种方法，毕竟咱们的时间就是金钱。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b3b6a1e3c02dbf7961c2920396d31bda/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数组元素的区间删除PTA（数据结构20分）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/07bef2f2208dbe8f79996aadc6a0902c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【最全】you-get和youtube-dl的安装和使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>