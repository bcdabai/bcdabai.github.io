<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>群体寻路算法Flow Field Pathfinding - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="群体寻路算法Flow Field Pathfinding" />
<meta property="og:description" content="AI Flow Field Pathfinding Flow Field Pathfinding Leif Erkenbrach December 5, 2013 AI, Programming One of the most important and wide reaching subjects of artificial intelligence in video games is pathfinding. One of the most commonly used methods of pathfinding in games at the moment is the A* algorithm. This algorithm is capable of finding the shortest path between two points when given a graph to traverse. This method is an acceptable solution to pathfinding in most situations, but there are a few cases where A* is not able to meet the requirements of an application." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3ffb43d69f06183e0351e6d52fb4767d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-06-03T14:03:57+08:00" />
<meta property="article:modified_time" content="2016-06-03T14:03:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">群体寻路算法Flow Field Pathfinding</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="breadcrumbs" style="margin:0px 0px 20px; padding:0px; border:0px; font-size:0.85em; vertical-align:baseline; position:relative; color:rgb(68,68,68); line-height:24px">
    
 <a target="_blank" href="http://leifnode.com/category/programming/ai/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:11.9px; vertical-align:baseline; color:rgb(22,147,165); text-decoration:none">AI<span class="icon-angle-right" style="margin:0px; padding:0px; border:0px; font-size:11.9px; vertical-align:baseline"></span> </a>Flow Field Pathfinding 
</div> 
<div id="post-79" class="post-79 post type-post status-publish format-standard has-post-thumbnail hentry category-ai category-programming tag-a tag-cost-field tag-dijkstra tag-field tag-flocking tag-flow tag-flow-field tag-goal-based tag-integration-field tag-pathfinding tag-terrain tag-tutorial tag-vector-field tag-weighted" style="margin:0px 0px 36px; padding:0px; border:0px; font-size:14px; vertical-align:baseline; overflow:hidden; color:rgb(68,68,68); line-height:24px"> 
 <h2 class="entry-title" style="margin:0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.3em; word-wrap:break-word; font-family:Roboto"> Flow Field Pathfinding</h2> 
 <div class="entry-meta" style="margin:0px; padding:0px; border:0px; font-size:12px; vertical-align:baseline; clear:both; overflow:hidden"> 
  <span class="author vcard" style="margin:0px 10px 0px 0px; padding:0px; border:0px; vertical-align:baseline; display:block; float:left; line-height:22px"><span class="icon-author icon-metas" title="Author " style="margin:0px; padding:0px; border:0px; vertical-align:baseline"></span> <a target="_blank" class="url fn n" href="http://leifnode.com/author/leif/" rel="nofollow noopener noreferrer" title="View all posts by Leif Erkenbrach" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Leif Erkenbrach</a></span> 
  <span class="onDate date updated" style="margin:0px 10px 0px 0px; padding:0px; border:0px; vertical-align:baseline; display:block; float:left; line-height:22px"><span class="icon-time icon-metas" title="Date" style="margin:0px; padding:0px; border:0px; vertical-align:baseline"></span><a target="_blank" href="http://leifnode.com/2013/12/flow-field-pathfinding/" rel="bookmark noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">December 5, 2013</a></span> 
  <span class="bl_categ" style="margin:0px 10px 0px 0px; padding:0px; border:0px; vertical-align:baseline; display:block; float:left; line-height:22px; max-width:97%"><span class="icon-folder-open icon-metas" title="Categories" style="margin:0px; padding:0px; border:0px; vertical-align:baseline"></span><a target="_blank" href="http://leifnode.com/category/programming/ai/" rel="tag noopener noreferrer" title="View all posts in AI" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">AI</a>, <a target="_blank" href="http://leifnode.com/category/programming/" rel="tag noopener noreferrer" title="View all posts in Programming" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Programming</a></span> 
 </div> 
 <div class="entry-content" style="margin:0px; padding:8px 0px 0px; border:0px; vertical-align:baseline; clear:both; word-wrap:break-word"> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> One of the most important and wide reaching subjects of artificial intelligence in video games is pathfinding. One of the most commonly used methods of pathfinding in games at the moment is the A* algorithm. This algorithm is capable of finding the shortest path between two points when given a graph to traverse. This method is an acceptable solution to pathfinding in most situations, but there are a few cases where A* is not able to meet the requirements of an application. When an application fulfills one or more of these cases, flow field pathfinding may become an attractive solution.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> Some of these cases where regular A* may not be the best choice are:</p> 
  <ul style="margin:0px 0px 1em 1.5em; padding:0px; border:0px; font-size:15px; vertical-align:baseline; list-style:none; line-height:1.7em"><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> If the graph that needs to be traversed is dense (A common example would be a grid-based graph)</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> If you have hundreds of units attempting to path to the same location</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> If the environment is highly dynamic</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> If there is a constant need to change the position of units</li></ul> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> There are solutions to all of these issues using common techniques.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> If the graph is dense, then allow a pathfinder to calculate paths in a non-blocking manner such that each unit sends a request to the pathfinder and idles until the pathfinder completes the request.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> If you have hundreds of units attempting to reach the same location, then you can use Dijkstra’s algorithm to solve for all shortest paths from the goal to every other point on the graph, and then reconstruct paths for each unit using the same results. Flow field pathfinding uses an extension of this technique.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> If the environment is dynamic, then an implementation of D* can be used. D* goes out and recalculates only the portions of a graph that are affected by changes.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> If units need to be affected by forces other than the path that they are following, then their paths may need to be rebuilt or modified whenever a change occurs. This can be fixed by using Navigation Meshes which allow for changes in the position of units within a threshold before the path needs to be rebuilt.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> The major issue is that each of these techniques can be time consuming and complicated to implement and get working together.</p> 
  <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto"> Flow Fields</h3> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> The first place that I heard about flow fields was through a <a target="_blank" href="http://youtu.be/5Qyl7h7D1Q8?t=24m28s" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; border:0px; vertical-align:baseline; color:rgb(22,147,165); text-decoration:none">live stream</a> about the development of the game Planetary Annihilation. This article is a more simplified implementation of the one described by Elijah Emerson in his article about crowd pathfinding which goes into more detail about building on this algorithm to efficiently scale to large maps. I have listed the article in the sources list at the bottom of this page. The concept of flow fields has only started to come into use in computer games over the past few years. Before computer games, they were mostly used in fluid dynamics simulations as the name “flow field” suggests. Flow fields can also be referred to as vector fields.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> <img src="https://images2.imgbox.com/f5/4f/XzhEi57v_o.jpg" alt=""><br> </p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> </p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> In vector fields each vector points towards their neighbor node closest to the goal. When a unit passes over a cell, the unit queries the vector that the node has. This vector is then used to influence the final velocity of the unit. True to the name the vectors in the flow field can look like the flow of water going around obstacles.</p> 
  <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> Calculating the Flow Field</h3> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> There are three fields that are used in the process of calculating the flow field. The first field is the cost field which stores the cost information associated with the terrain. The second is the integration field which is what does most of the work in calculating the field. The final field is the flow field itself which uses the integration field as input to calculate a final result.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Calculating a flow field involves three stages:</p> 
  <ol style="margin:0px 0px 1em 1.5em; padding:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">Create a cost field</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">Generate an integration field</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">Generate the flow field</li></ol> 
  <h5 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:24px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> The Cost Field</h5> 
  <div> 
   <img src="https://images2.imgbox.com/42/76/Y6sNNOLl_o.jpg" alt=""> 
   <br> 
  </div> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Each cell in the cost field is represented by a single byte that will normally be set to some value in between 1 and 255. By default all cells are set to a value of 1. Any values between 2 and 254 represent cells that are passable but should be avoided if possible. The value 255 represents impassable walls that units must path around.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Whenever the cost field is modified the integration fiend and integration field must be recalculated. Since units only read from the flow field and are not given static paths the whole recalculation process takes a constant amount of time regardless of the number of units using the field.</p> 
  <h5 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:24px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> The Integration Field</h5> 
  <div> 
   <img src="https://images2.imgbox.com/f5/fc/JIOKMzid_o.jpg" alt=""> 
   <br> 
  </div> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> The integration field is where most of the work in the flow field calculation is done. In order to create the integration field we will use a modified version of Dijkstra’s algorithm.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> This is a list of the steps that the algorithm takes to calculate the field:</p> 
  <ol style="margin:0px 0px 1em 1.5em; padding:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">The algorithm starts by resetting the value of all cells to a large value (I use 65535).</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">The goal node then gets its total path cost set to zero and gets added to the open list. From this point the goal node is treated like a normal node.</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">The current node is made equal to the node at the beginning of the open list and gets removed from the list.</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">All of the current node’s neighbors get their total cost set to the current node’s cost plus their cost read from the cost field then they get added to the back of the open list. This happens if and only if the new calculated cost is lower than the old cost. If the neighbor has a cost of 255 then it gets ignored completely.</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline">This algorithm continues until the open list is empty.</li></ol> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> In addition to being used for calculating the flow field, the integration field can also be used for reachability analysis. Since the algorithm will be blocked by impassable terrain, if a unit is on a cell of the integration field that has a value of 65535 then it can know that it will not be able to reach the goal unless the cost field changes.</p> 
  <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> <span style="font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace; font-size:14px; line-height:15.4px">Example implementation of the algorithm</span><br> </p> 
  <div style="margin:0px; padding:0px; border:0px; font-size:14px; vertical-align:baseline; color:rgb(68,68,68); line-height:24px"> 
   <div id="highlighter_986827" class="syntaxhighlighter  cpp" style="padding:0px; border:0px; vertical-align:baseline; width:830px; margin:1em 0px!important; font-size:1em!important; position:relative!important; overflow-x:auto!important; overflow-y:hidden!important"> 
    <pre><code class="language-cpp">void IntegrationField::calculateIntegrationField(unsigned targetX, unsigned targetY)
{
    unsigned int targetID = targetY * mArrayWidth + targetX;
 
    resetField();//Set total cost in all cells to 65535
    list openList;
 
    //Set goal node cost to 0 and add it to the open list
    setValueAt(targetID, 0);
    openList.push_back(targetID);
 
    while (openList.size() &gt; 0)
    {
        //Get the next node in the open list
        unsigned currentID = openList.front();
        openList.pop_front();
 
        unsigned short currentX = currentID % mArrayWidth;
        unsigned short currentY = currentID / mArrayWidth;
 
        //Get the N, E, S, and W neighbors of the current node
        std::vector neighbors = getNeighbors(currentX, currentY);
        int neighborCount = neighbors.size();
 
        //Iterate through the neighbors of the current node
        for (int i = 0; i &lt; neighborCount; i++)         {             //Calculate the new cost of the neighbor node             // based on the cost of the current node and the weight of the next node             unsigned int endNodeCost = getValueByIndex(currentID)                          + getCostField()-&gt;getCostByIndex(neighbors[i]);
 
            //If a shorter path has been found, add the node into the open list
            if (endNodeCost &lt; getValueByIndex(neighbors[i]))
            {
                //Check if the neighbor cell is already in the list.
                //If it is not then add it to the end of the list.
                if (!checkIfContains(neighbors[i], openList))
                {
                    openList.push_back(neighbors[i]);
                }
 
                //Set the new cost of the neighbor node.
                setValueAt(neighbors[i], endNodeCost);
            }
        }
    }
}</code></pre> 
    <br> 
    <h5 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:24px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> The Flow Field</h5> 
    <div> 
     <img src="https://images2.imgbox.com/8a/83/GgNpNWQu_o.jpg" alt=""> 
     <br> 
    </div> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Finally the flow field takes the result of the integration field’s calculations and uses it to determine the direction of the vectors in the field. The flow field calculates this by going through each cell of the integration field and comparing that cell’s value to all of its 8 neighbors to find the one with the lowest value. In this implementation I use a static array of 9 vectors (8 for directions and one for a zero vector) and then store the index of the vector that points towards to lowest neighbor in a 1 byte field. If the current cell is unreachable then the index is set to the zero vector.</p> 
    <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> Performance</h3> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Here are some of my quick benchmarks on the time to calculate a grid.</p> 
    <ul style="margin:0px 0px 1em 1.5em; padding:0px; border:0px; font-size:15px; vertical-align:baseline; list-style:none; line-height:1.7em; color:rgb(68,68,68)"><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 10×10 : 0.2ms</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 20×20 : 1.0ms</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 25×25 : 1.5ms</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 40×40 : 3.7ms</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 50×50 : 5.2ms</li><li style="margin:0px; padding:2px 0px; border:0px; vertical-align:baseline; list-style:circle"> 100×100 : 20ms</li></ul> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> This is compiled in C++ and uses the algorithm that I demonstrated earlier. Note that these results are based on a completely empty cost field. The time can increase by around 30% depending on how the map is laid out. However, it generally runs faster if there are more walls. These tests were run on release build. In debug builds calculation of the fields would generally take up to 15 times longer.</p> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> This is efficient enough for use on my computer, but slower computer would certainly struggle with 50×50 size fields and up. Treating each cell as 1m x 1m allows me to have plenty of space on the map for my units, however in larger games that need to cover several square kilometers it would be much more efficient to partition the fields. For instance instead of using a 100×100 field I could use 100 10×10 fields.</p> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Having multiple fields adds a degree of difficulty, but can be done with very few changes to existing code. A method for doing pathfinding like this is described in the flow field article in the book Game AI Pro written by Elijah Emerson. What you end up doing is connecting the 10×10 fields with portals that span the gap between 1 to all of the nodes on an edge of the field. You then use A* to find a path from the current field to the target field and only calculate fields for each field that you need to pass through. Results from the A* and flow field calculation can be reused between multiple units. With this method maps can be far larger without performance issues.</p> 
    <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> Following the Path</h3> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Now in order to make the units follow the flow field you just need to translate the position of the unit into the coordinate system of the flow field and get the corresponding vector to their cell. In my sample this is done by just dividing the unit’s position by the scale of the grid cells. I then take the new position and truncate it into integer x and y coordinates are then used to get the index of the vector stored in the cell that the unit occupies.</p> 
    <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> Float-based Fields</h3> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> My examples used mostly integers to store the cost, integration, and flow fields. This is due to the small space and efficiency gains that are involved. It is perfectly valid to use floats for all three fields. Using float-based cost and integration fields allows for much more fine control over the map and pathfinding. If you store 2D vectors in the flow field then much smoother movement is possible than when units are constrained to 8 discrete directions.</p> 
    <h3 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:34px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto; color:rgb(68,68,68)"> Conclusion</h3> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Using flow fields in pathfinding allows for many advantages above other pathfinding techniques in some cases and allows for much more robust path following.</p> 
    <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em; color:rgb(68,68,68)"> Comment if you have any questions.</p> 
    <div id="post-79" class="post-79 post type-post status-publish format-standard has-post-thumbnail hentry category-ai category-programming tag-a tag-cost-field tag-dijkstra tag-field tag-flocking tag-flow tag-flow-field tag-goal-based tag-integration-field tag-pathfinding tag-terrain tag-tutorial tag-vector-field tag-weighted" style="margin:0px 0px 36px; padding:0px; border:0px; font-size:14px; vertical-align:baseline; overflow:hidden; color:rgb(68,68,68); line-height:24px"> 
     <div class="entry-content" style="margin:0px; padding:8px 0px 0px; border:0px; vertical-align:baseline; clear:both; word-wrap:break-word"> 
      <h4 style="margin:20px 0px 0px; padding:0px; border:0px; font-size:29px; vertical-align:baseline; clear:none; font-weight:normal; line-height:1.5em; font-family:Roboto"> References</h4> 
      <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> Durant, S. (2013, July 5). Understanding Goal-Based Vector Field Pathfinding. <span style="margin:0px; padding:0px; border:0px; vertical-align:baseline">Tuts+</span>. Retrieved December 05, 2013, from http://gamedevelopment.tutsplus.com/tutorials/goal-based-vector-field-pathfinding–gamedev-9007</p> 
      <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> Emerson, E. (2013). Crowd Pathfinding and Steering Using Flow Field Tiles. In S. Rabin (Ed.), <span style="margin:0px; padding:0px; border:0px; vertical-align:baseline">Game AI Pro: Collected Wisdom of Game AI Professionals</span> (pp. 307-316). Boca Raton: CRC Press.</p> 
      <p style="margin-top:0px; margin-bottom:1em; padding-top:0px; padding-bottom:0px; border:0px; font-size:15px; vertical-align:baseline; line-height:1.7em"> Pentheny, G. (2013). Efficient Crowd Simulation for Mobile Games. In S. Rabin (Ed.), <span style="margin:0px; padding:0px; border:0px; vertical-align:baseline">Game AI Pro: Collected Wisdom of Game AI Professionals</span> (pp. 317-323). Boca Raton: CRC Press.</p> 
     </div> 
     <span class="footer-tags" style="margin:0px 10px 0px 0px; padding:0px; border:0px; vertical-align:baseline; display:block; float:left; line-height:22px"><span class="icon-tag icon-metas" title="Tagged" style="margin:0px; padding:0px; border:0px; vertical-align:baseline"></span>  <a target="_blank" href="http://leifnode.com/tag/a/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">A*</a>, <a target="_blank" href="http://leifnode.com/tag/cost-field/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Cost Field</a>, <a target="_blank" href="http://leifnode.com/tag/dijkstra/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Dijkstra</a>, <a target="_blank" href="http://leifnode.com/tag/field/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Field</a>, <a target="_blank" href="http://leifnode.com/tag/flocking/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Flocking</a>, <a target="_blank" href="http://leifnode.com/tag/flow/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Flow</a>, <a target="_blank" href="http://leifnode.com/tag/flow-field/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Flow Field</a>, <a target="_blank" href="http://leifnode.com/tag/goal-based/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Goal Based</a>, <a target="_blank" href="http://leifnode.com/tag/integration-field/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Integration Field</a>, <a target="_blank" href="http://leifnode.com/tag/pathfinding/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Pathfinding</a>, <a target="_blank" href="http://leifnode.com/tag/terrain/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Terrain</a>, <a target="_blank" href="http://leifnode.com/tag/tutorial/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Tutorial</a>, <a target="_blank" href="http://leifnode.com/tag/vector-field/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Vector Field</a>, <a target="_blank" href="http://leifnode.com/tag/weighted/" rel="tag noopener noreferrer" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Weighted</a>.</span> 
     <span class="bl_bookmark" style="margin:0px 10px 0px 0px; padding:0px; border:0px; vertical-align:baseline; display:block; float:left; line-height:22px"><span class="icon-bookmark icon-metas" title=" Bookmark the permalink" style="margin:0px; padding:0px; border:0px; vertical-align:baseline"></span> <a target="_blank" href="http://leifnode.com/2013/12/flow-field-pathfinding/" rel="bookmark noopener noreferrer" title="Permalink to Flow Field Pathfinding" style="margin:0px; padding:0px; border:0px; font-size:13px; vertical-align:baseline; color:rgb(102,102,102); text-decoration:none">Bookmark</a>.</span> 
     <div> 
      <br> 
     </div> 
    </div> 
    <div id="nav-below" class="navigation" style="margin:5px 0px; padding:0px; border:0px; font-size:14px; vertical-align:baseline; overflow:hidden; float:none; clear:both; color:rgb(68,68,68); line-height:24px"> 
     <div class="nav-previous" style="margin:0px; padding:0px; border:0px; vertical-align:baseline"> 
     </div> 
    </div> 
    <br> 
   </div> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba9f7183f7172553cfe32606af29c450/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">J2ee项目从0搭建(一):eclipse下载、安装、使用习惯配置迁移</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2779fe52c14a6c0e88eb34b1a2a9c024/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt 预编译头文件(precompiled headers) 加快编译速度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>