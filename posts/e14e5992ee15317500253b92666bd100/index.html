<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>常见的锂电池的算法--基础概念 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="常见的锂电池的算法--基础概念" />
<meta property="og:description" content="常见的锂电池的算法–基础概念 1、锂电池的一些特性 (1)锂电池的各种静态和动态参数，都有个体差异，批次差异，型号差异。 (2)锂电池的剩余电量和电压有关。参考充放电曲线。 (3)锂电池的满电/空电状态对应的电量和电压参数，会随着充放电循环增多而老化衰减。 (4)锂电池的各种参数都随温度变化，一般额定参数是在某个特定温度下测量得到的。 (5)电池不同电压/剩余容量时的充放电电流极限值可能会不同，也可能老化，温度漂移。 2、常用SOX (1)SOC：State of Charge，剩余电量百分比，剩余电量/实际容量 (2)SOH：State of Health，电池健康度，电池使用一段时间后老化衰减度，实际容量/额定容量 (3)SOE：Stete of Energy，剩余能量，与续航里程相关，需考虑续航相关的额外因素 (4)SOP：State Of Power，锂电池的允许充放电电流值在不同SOC，不同温度下是不同的。(例如：电动车在刚充满电时和快没电量时，所表现的性能是不一样的) (5)DOD：Depth of discharge，放电深度，电池放电量与电池额定容量的百分比（例如：电池并不是完全放空电量，还是留有一定的电量保存在电池中） 3、总结说明 (1)SOX是从不同角度对锂电池特性的建模和参数表达 (2)物理上电池有个体差异，各种静态和动态参数在不同温度下也会变化甚至不成线性变化 (3)产品和项目中实现哪些SOX由产品和项目自身决定，没有统一标准 (4)SOX的实现可以有多种算法，可用1种或同时几种叠加使用以增强准确度 (5)SOX实现的关键点：算法选择、参数标定、验证试验体系和环境搭建 4、本课程中的实现 (1)本课程中只实现了SOC，未实现其余SOX，主要使用SOC计算剩余电量百分比 (2)本课程中SOC的实现采用了2种算法叠加：开路电压法、安时积分法 5、SOC代码解析 (1)电池状态的分析主要包括简单分析数据、实时校准容量、计算SOC值等主要部分。简单分析主要用于计算最大电压差、平均电压等简单参数；实时校准，主要是对采集的温度信息进行校准，SOC值计算主要包括开路电压法和安时积分法。
&gt; // 电池状态分析任务线程入口 static void BMS_AnalysisTaskEntry(void *paramter) { &gt; BMS_AnalysisCapAndSocInit(); while(1) {	&gt; BMS_AnalysisEasy();//简单分析，计算最大电压差、平均电压等简单参数 &gt; BMS_AnalysisCalCap();//实时校准容量涉及因素:温度 &gt; BMS_AnalysisSocCheck();//计算SOC值 &gt; rt_thread_mdelay(ANALYSISI_TASK_PERIOD); } } (2)简单分析,通过数据直接进行计算就能得到的
static void BMS_AnalysisEasy(void) { uint8_t index; // 最大电压差 BMS_AnalysisData.MaxVoltageDifference = BMS_MonitorData.CellData[BMS_GlobalParam.Cell_Real_Number - 1]." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e14e5992ee15317500253b92666bd100/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-22T16:50:50+08:00" />
<meta property="article:modified_time" content="2023-10-22T16:50:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">常见的锂电池的算法--基础概念</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>常见的锂电池的算法–基础概念</h3> 
<h3><a id="1_2"></a>1、锂电池的一些特性</h3> 
<pre><code>(1)锂电池的各种静态和动态参数，都有个体差异，批次差异，型号差异。
(2)锂电池的剩余电量和电压有关。参考充放电曲线。
(3)锂电池的满电/空电状态对应的电量和电压参数，会随着充放电循环增多而老化衰减。
(4)锂电池的各种参数都随温度变化，一般额定参数是在某个特定温度下测量得到的。
(5)电池不同电压/剩余容量时的充放电电流极限值可能会不同，也可能老化，温度漂移。
</code></pre> 
<h3><a id="2SOX_12"></a>2、常用SOX</h3> 
<pre><code>(1)SOC：State of Charge，剩余电量百分比，剩余电量/实际容量
(2)SOH：State of Health，电池健康度，电池使用一段时间后老化衰减度，实际容量/额定容量
(3)SOE：Stete of Energy，剩余能量，与续航里程相关，需考虑续航相关的额外因素
(4)SOP：State Of Power，锂电池的允许充放电电流值在不同SOC，不同温度下是不同的。(例如：电动车在刚充满电时和快没电量时，所表现的性能是不一样的)
(5)DOD：Depth of discharge，放电深度，电池放电量与电池额定容量的百分比（例如：电池并不是完全放空电量，还是留有一定的电量保存在电池中）
</code></pre> 
<h3><a id="3_22"></a>3、总结说明</h3> 
<pre><code>(1)SOX是从不同角度对锂电池特性的建模和参数表达
(2)物理上电池有个体差异，各种静态和动态参数在不同温度下也会变化甚至不成线性变化
(3)产品和项目中实现哪些SOX由产品和项目自身决定，没有统一标准
(4)SOX的实现可以有多种算法，可用1种或同时几种叠加使用以增强准确度
(5)SOX实现的关键点：算法选择、参数标定、验证试验体系和环境搭建
</code></pre> 
<h3><a id="4_32"></a>4、本课程中的实现</h3> 
<pre><code>(1)本课程中只实现了SOC，未实现其余SOX，主要使用SOC计算剩余电量百分比
(2)本课程中SOC的实现采用了2种算法叠加：开路电压法、安时积分法
</code></pre> 
<h3><a id="5SOC_39"></a>5、SOC代码解析</h3> 
<p>(1)电池状态的分析主要包括简单分析数据、实时校准容量、计算SOC值等主要部分。简单分析主要用于计算最大电压差、平均电压等简单参数；实时校准，主要是对采集的温度信息进行校准，SOC值计算主要包括开路电压法和安时积分法。</p> 
<pre><code>&gt; // 电池状态分析任务线程入口 static void BMS_AnalysisTaskEntry(void *paramter) {
&gt; 	BMS_AnalysisCapAndSocInit(); 	while(1) 	{			
&gt; 		BMS_AnalysisEasy();//简单分析，计算最大电压差、平均电压等简单参数
&gt; 		BMS_AnalysisCalCap();//实时校准容量涉及因素:温度
&gt; 		BMS_AnalysisSocCheck();//计算SOC值
&gt; 		rt_thread_mdelay(ANALYSISI_TASK_PERIOD); 	} }
</code></pre> 
<p>(2)简单分析,通过数据直接进行计算就能得到的</p> 
<pre><code>static void BMS_AnalysisEasy(void)
{
	uint8_t index;

	// 最大电压差
	BMS_AnalysisData.MaxVoltageDifference = BMS_MonitorData.CellData[BMS_GlobalParam.Cell_Real_Number - 1].CellVoltage - BMS_MonitorData.CellData[0].CellVoltage;
	
	
	// 平均电压
	for (index = 0, BMS_AnalysisData.AverageVoltage = 0; index &lt; BMS_GlobalParam.Cell_Real_Number; index++)
	{
		BMS_AnalysisData.AverageVoltage += BMS_MonitorData.CellVoltage[index];
	}
	BMS_AnalysisData.AverageVoltage /= BMS_GlobalParam.Cell_Real_Number;
	
	
	// 实时功率
	BMS_AnalysisData.PowerReal = BMS_MonitorData.BatteryVoltage * BMS_MonitorData.BatteryCurrent;	


	// 最大和最小电压
	BMS_AnalysisData.CellVoltMax = BMS_MonitorData.CellData[BMS_GlobalParam.Cell_Real_Number - 1].CellVoltage;
	BMS_AnalysisData.CellVoltMin = BMS_MonitorData.CellData[0].CellVoltage;
}
</code></pre> 
<p>（3）</p> 
<pre><code class="prism language-//">static void BMS_AnalysisTempCal(void)
{
	static int16_t LastTemp = 0;

	uint8_t  Ratio; 	// 校准比率
	uint16_t RateTemp;	
	int16_t MinTemp = BMS_MonitorData.CellTemp[0] * 10;


	if (BMS_MonitorData.CellTempEffectiveNumber == 0)
	{
		return;
	}


	// 判断温度变化是否超过1度
	if( MinTemp &gt; LastTemp)  
	{
		if (MinTemp - LastTemp &gt;= 10)
		{
			LastTemp = MinTemp;
		}
		else
		{
			return;
		}
	}
	else
	{
		if (LastTemp - MinTemp &gt;= 10) 
		{
			LastTemp = MinTemp;
		}
		else
		{
			return;
		}
	}

	
	// 确定校准比率
	if (MinTemp &gt;= 250)                             
	{
		Ratio = 1;
	}
	else if (MinTemp &gt;= 100 &amp;&amp; MinTemp &lt; 250)   
	{   
		Ratio = 2;
	}
	else if (MinTemp &gt;= 0 &amp;&amp; MinTemp &lt; 100)      
	{   
		Ratio = 3;
	}
	else if (MinTemp &gt;= -200 &amp;&amp; MinTemp &lt; -10)    
	{   
		Ratio = 4;
	}
	else if (MinTemp &gt;= -300 &amp;&amp; MinTemp &lt; -200)    
	{   
		Ratio = 5;
	}
	else
	{
		Ratio = 6;                                       
	}


	RateTemp = 1000 + Ratio * (MinTemp - 250) / 10;
	if(RateTemp &gt; TEMP_CAP_RATE_LIMITH_HIGH )
	{
		RateTemp = TEMP_CAP_RATE_LIMITH_HIGH;
	}
	else if(RateTemp &lt; TEMP_CAP_RATE_LIMITL_LOW)
	{
		RateTemp = TEMP_CAP_RATE_LIMITL_LOW;
	}

	// 实时容量
	BMS_AnalysisData.CapacityReal = BMS_AnalysisData.CapacityRated * RateTemp / 1000;

	// 剩余容量
	BMS_AnalysisData.CapacityRemain = BMS_AnalysisData.CapacityReal * BMS_AnalysisData.SOC;
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18a81d72d2d070ca9390d37fe919f2d6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机组成原理---第二章 习题详解版</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fdb8a2ffd0fc0c141ea54f1eeb70f4bd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">osWorkflow-1——osWorkflow官网例子部署启动简单使用（版本：OSWorkflow-2.8.0）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>