<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java——红黑树 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java——红黑树" />
<meta property="og:description" content="概念 红黑树也是一种二叉搜索树，但是和avl树不同，它并不是依靠平衡因子来保证树的平衡的，而是通过颜色
红黑树每个节点中会存储颜色，分为红色和黑色，通过红黑树的限制条件，可以保证从根节点出发到叶子节点的每一条路径长度都不会是其他路径长度的两倍，以此达到接近平衡，保证了搜索的效率是log2（N）
性质 红黑树需要满足以下几点性质：
每个节点不是红色的就是黑色的根节点必须是黑色的如果一个节点是红色的，那么他的孩子节点必须是黑色的每一条路径从根节点到叶子节点中的黑色节点的个数必须相同所有的叶子节点（这里指的是空节点）都是黑色的 红黑树节点的定义 红黑树中的节点不仅需要定义左右孩子的指针，父节点的指针，自身存储的值，还要存储这个节点的颜色，这里通过枚举来存储
并且需要满足新创建的节点是红色的，因为如果要是创建的是黑色的，那么在插入的过程中很难保证性质四——每一条路径从根节点到叶子节点中的黑色节点的个数必须相同
节点定义代码 static class RBTreeNode { public RBTreeNode left; public RBTreeNode right; public RBTreeNode parent; public int val; public COLOR color; public RBTreeNode(int val){ this.val = val; //新创建的节点默认是红色 this.color = COLOR.RED; } } COLOR枚举 package rbTree; public enum COLOR { RED,BLACK } 插入 在插入时和AVL树一样，要先按照平衡二叉树来进行遍历插入
先判断根节点是否为空，为空则直接插入
然后定义一个cur和parent，cur先为root，cur一直向下遍历。
如果val小于cur.val，cur就变成cur.left
大于的话就变成cur.right
如果等于，就说明已经有这个节点了，return false
在cur遍历的过程中，使parent始终为cur的上一个节点，使得当cur变成空时，能够记录上一个节点的位置
然后判断val和parent.val的大小关系，插到对应的位置上
RBTreeNode node = new RBTreeNode(val); if(root == null){ root = node; node." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c1c2a297ec4db35f202b4e47f672e487/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-31T10:27:11+08:00" />
<meta property="article:modified_time" content="2023-01-31T10:27:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java——红黑树</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>概念</h2> 
<p>红黑树也是一种二叉搜索树，但是和avl树不同，它并不是依靠平衡因子来保证树的平衡的，而是通过颜色</p> 
<p>红黑树每个节点中会存储颜色，分为红色和黑色，通过红黑树的限制条件，可以保证从根节点出发到叶子节点的每一条路径长度都不会是其他路径长度的两倍，以此达到接近平衡，保证了搜索的效率是log2（N）</p> 
<h2><a id="_5"></a>性质</h2> 
<p>红黑树需要满足以下几点性质：</p> 
<ol><li>每个节点不是红色的就是黑色的</li><li>根节点必须是黑色的</li><li>如果一个节点是红色的，那么他的孩子节点必须是黑色的</li><li>每一条路径从根节点到叶子节点中的黑色节点的个数必须相同</li><li>所有的叶子节点（这里指的是空节点）都是黑色的</li></ol> 
<h2><a id="_13"></a>红黑树节点的定义</h2> 
<p>红黑树中的节点不仅需要定义左右孩子的指针，父节点的指针，自身存储的值，还要存储这个节点的颜色，这里通过枚举来存储<br> 并且需要满足新创建的节点是红色的，因为如果要是创建的是黑色的，那么在插入的过程中很难保证性质四——每一条路径从根节点到叶子节点中的黑色节点的个数必须相同</p> 
<h3><a id="_16"></a>节点定义代码</h3> 
<pre><code class="prism language-java"><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">RBTreeNode</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token class-name">RBTreeNode</span> left<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">RBTreeNode</span> right<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">RBTreeNode</span> parent<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> val<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">COLOR</span> color<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RBTreeNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token comment">//新创建的节点默认是红色</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="COLOR_32"></a>COLOR枚举</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">rbTree</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">COLOR</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">RED</span><span class="token punctuation">,</span><span class="token constant">BLACK</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_41"></a>插入</h2> 
<p>在插入时和AVL树一样，要先按照平衡二叉树来进行遍历插入</p> 
<p>先判断根节点是否为空，为空则直接插入<br> 然后定义一个cur和parent，cur先为root，cur一直向下遍历。<br> 如果val小于cur.val，cur就变成cur.left<br> 大于的话就变成cur.right<br> 如果等于，就说明已经有这个节点了，return false<br> 在cur遍历的过程中，使parent始终为cur的上一个节点，使得当cur变成空时，能够记录上一个节点的位置<br> 然后判断val和parent.val的大小关系，插到对应的位置上</p> 
<pre><code class="prism language-java"><span class="token class-name">RBTreeNode</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RBTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    root <span class="token operator">=</span> node<span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">RBTreeNode</span> parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">RBTreeNode</span> cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    parent<span class="token punctuation">.</span>right <span class="token operator">=</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    parent<span class="token punctuation">.</span>left <span class="token operator">=</span> node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
node<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
cur <span class="token operator">=</span> node<span class="token punctuation">;</span>
</code></pre> 
<p>然后进行颜色的更改<br> 因为默认插入的颜色是红色，因此如果父节点是黑色的话，那么就不违背任何性质，否则的话需要进行颜色的更改，因此循环的条件是parent不为空，parent的颜色是红色<br> 定义parent的父节点grandfather节点<br> 定义grandfather的另一个孩子节点uncle节点</p> 
<pre><code class="prism language-java"><span class="token keyword">while</span><span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//根不能是红色，所以一定有父节点</span>
    <span class="token class-name">RBTreeNode</span> grandFather <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>parent <span class="token operator">==</span> grandFather<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RBTreeNode</span> uncle <span class="token operator">=</span> grandFather<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
</code></pre> 
<p>在这里分为以下几种情况：</p> 
<h4><a id="_94"></a>情况一</h4> 
<p>cur，parent为红，grandfather为黑，uncle存在且为红<br> <img src="https://images2.imgbox.com/89/50/AjO1uZR0_o.jpg" alt="在这里插入图片描述"><br> 此时cur和parent两个都是红色，因此不满足性质——如果一个节点是红色的，那么他的孩子节点必须是黑色的</p> 
<p>此时如果把cur改成黑色，那么uncle这边就不满足性质—— 每一条路径从根节点到叶子节点中的黑色节点的个数必须相同</p> 
<p>所以需要将parent和uncle都改成黑色节点</p> 
<p>但是，这里还需要考虑grandfather的兄弟节点也会出现不满足性质—— 每一条路径从根节点到叶子节点中的黑色节点的个数必须相同，因此我们可以把grandfather改成红色的，这样就满足这个性质了</p> 
<p>所以，如果grandparent是根节点，那么就不用改颜色了，如果不是根节点的话，我们就需要让grandparent变成红色的<br> <img src="https://images2.imgbox.com/47/6d/jKWAaZQt_o.jpg" alt="在这里插入图片描述"><br> 然后我们可以把grandparent看成cur，继续向上调整</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>uncle <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> uncle<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    uncle<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>

    <span class="token comment">//向上迭代</span>
    cur <span class="token operator">=</span> grandFather<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> cur<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_118"></a>情况二</h4> 
<p>cur和parent为红色，grandfather为黑色，uncle不存在或为黑色<br> 这种情况就相当于情况一的相反情况，因此写在情况一的else中<br> 情况二出现在下图这样，先是情况一进行调整，迭代后出现情况二<br> <img src="https://images2.imgbox.com/ca/4b/7zSDRFqZ_o.jpg" alt="在这里插入图片描述"></p> 
<p>这时我们需要右单旋grandparent，然后将原来的grandparent变成红色，parent变成黑色<br> <img src="https://images2.imgbox.com/00/4f/mcIvEgB2_o.jpg" alt="在这里插入图片描述"><br> 关于右单旋，这个在上一篇博客avl树中讲过，不会的可以去上一篇博客看</p> 
<pre><code class="prism language-java"><span class="token comment">//uncle不存在或者是黑色</span>
<span class="token comment">//情况二</span>
<span class="token function">rotateRight</span><span class="token punctuation">(</span>grandFather<span class="token punctuation">)</span><span class="token punctuation">;</span>
grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
</code></pre> 
<p>右单旋：</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span><span class="token class-name">RBTreeNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">RBTreeNode</span> subL <span class="token operator">=</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token class-name">RBTreeNode</span> subLR <span class="token operator">=</span> subL<span class="token punctuation">.</span>right<span class="token punctuation">;</span>

    parent<span class="token punctuation">.</span>left <span class="token operator">=</span> subLR<span class="token punctuation">;</span>
    subL<span class="token punctuation">.</span>right <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>subLR <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        subLR<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">RBTreeNode</span> pParent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>

    parent<span class="token punctuation">.</span>parent <span class="token operator">=</span> subL<span class="token punctuation">;</span>

    <span class="token comment">//检查是否parent为根节点</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>parent <span class="token operator">==</span> root<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//使subL为根节点</span>
        root <span class="token operator">=</span> subL<span class="token punctuation">;</span>
        root<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//使得parent的原parent节点的孩子为subL</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pParent<span class="token punctuation">.</span>left <span class="token operator">==</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            pParent<span class="token punctuation">.</span>left <span class="token operator">=</span> subL<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            pParent<span class="token punctuation">.</span>right <span class="token operator">=</span> subL<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        subL<span class="token punctuation">.</span>parent <span class="token operator">=</span> pParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_168"></a>情况三</h4> 
<p>cur和parent为红色，grandfather为黑色，uncle不存在或者为黑色<br> 情况三也是由下方迭代上来时，会出现的一种情况，例如下图<br> <img src="https://images2.imgbox.com/87/47/5TI4d9Lz_o.jpg" alt="在这里插入图片描述"><br> 那么，我们需要将parent进行左单旋，这样问题就回到情况二了<br> <img src="https://images2.imgbox.com/11/e7/AURB2bDN_o.jpg" alt="在这里插入图片描述"><br> 因此，我们只需要左单旋一下parent，然后让cur和parent交换一下位置，然后再用情况二来处理就可以了</p> 
<pre><code class="prism language-java"><span class="token comment">//情况三</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">rotateLeft</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RBTreeNode</span> tmp <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
    cur <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token comment">//情况三变成情况二</span>

<span class="token comment">//uncle不存在或者是黑色</span>
<span class="token comment">//情况二</span>
<span class="token function">rotateRight</span><span class="token punctuation">(</span>grandFather<span class="token punctuation">)</span><span class="token punctuation">;</span>
grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
</code></pre> 
<p>左单旋：</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span><span class="token class-name">RBTreeNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">RBTreeNode</span> subR <span class="token operator">=</span> parent<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token class-name">RBTreeNode</span> subRl <span class="token operator">=</span> subR<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

    parent<span class="token punctuation">.</span>right <span class="token operator">=</span> subRl<span class="token punctuation">;</span>
    subR<span class="token punctuation">.</span>left <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>subRl <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        subRl<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">RBTreeNode</span> pParent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>

    parent<span class="token punctuation">.</span>parent <span class="token operator">=</span> subR<span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> parent<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        root <span class="token operator">=</span> subR<span class="token punctuation">;</span>
        root<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pParent<span class="token punctuation">.</span>left <span class="token operator">==</span> parent<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            pParent<span class="token punctuation">.</span>left <span class="token operator">=</span> subR<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            pParent<span class="token punctuation">.</span>right <span class="token operator">=</span> subR<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        subR<span class="token punctuation">.</span>parent <span class="token operator">=</span> pParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_221"></a>情况四，情况五，情况六</h4> 
<p>这三种情况就是uncle节点再parent的左侧的情况<br> 情况四和情况一的处理是一样的</p> 
<p>当cur是parent的right，就是情况五，那么和情况二处理方法类似，只是变成了左单旋grandparent<br> <img src="https://images2.imgbox.com/a9/c0/vzeCNR03_o.jpg" alt="在这里插入图片描述"></p> 
<p>当cur是parent的left，就是情况六，那么和情况三处理方法类似，只是变成了右单旋parent<br> <img src="https://images2.imgbox.com/3e/fc/J6dg2nVi_o.jpg" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">//parent == grandfather.right</span>
<span class="token class-name">RBTreeNode</span> uncle <span class="token operator">=</span> grandFather<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>uncle <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> uncle<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//情况四</span>
    parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    uncle<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>

    <span class="token comment">//向上迭代</span>
    cur <span class="token operator">=</span> grandFather<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> cur<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//情况六</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">rotateRight</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RBTreeNode</span> tmp <span class="token operator">=</span> parent<span class="token punctuation">;</span>
        parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
        cur <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token comment">//情况五变成情况四</span>

    <span class="token comment">//uncle不存在或者是黑色</span>
    <span class="token comment">//情况五</span>
    <span class="token function">rotateLeft</span><span class="token punctuation">(</span>grandFather<span class="token punctuation">)</span><span class="token punctuation">;</span>
    grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
    parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_259"></a>插入的全部代码</h2> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">RBTreeNode</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RBTreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        root <span class="token operator">=</span> node<span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">RBTreeNode</span> parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">RBTreeNode</span> cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        parent<span class="token punctuation">.</span>right <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        parent<span class="token punctuation">.</span>left <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    node<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
    cur <span class="token operator">=</span> node<span class="token punctuation">;</span>

    <span class="token comment">//调整颜色</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//根不能是红色，所以一定有父节点</span>
        <span class="token class-name">RBTreeNode</span> grandFather <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>parent <span class="token operator">==</span> grandFather<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">RBTreeNode</span> uncle <span class="token operator">=</span> grandFather<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>uncle <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> uncle<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//情况一</span>
                parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
                uncle<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
                grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>

                <span class="token comment">//向上迭代</span>
                cur <span class="token operator">=</span> grandFather<span class="token punctuation">;</span>
                parent <span class="token operator">=</span> cur<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//uncle不存在或者是黑色</span>
                <span class="token comment">//情况三</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">rotateLeft</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">RBTreeNode</span> tmp <span class="token operator">=</span> parent<span class="token punctuation">;</span>
                    parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
                    cur <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token comment">//情况三变成情况二</span>

                <span class="token comment">//情况二</span>
                <span class="token function">rotateRight</span><span class="token punctuation">(</span>grandFather<span class="token punctuation">)</span><span class="token punctuation">;</span>
                grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
                parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//parent == grandfather.right</span>
            <span class="token class-name">RBTreeNode</span> uncle <span class="token operator">=</span> grandFather<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>uncle <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> uncle<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token comment">//情况四</span>
                parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
                uncle<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
                grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>

                <span class="token comment">//向上迭代</span>
                cur <span class="token operator">=</span> grandFather<span class="token punctuation">;</span>
                parent <span class="token operator">=</span> cur<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//uncle不存在或者是黑色</span>
                <span class="token comment">//情况六</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token function">rotateRight</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">RBTreeNode</span> tmp <span class="token operator">=</span> parent<span class="token punctuation">;</span>
                    parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
                    cur <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token comment">//情况六变成情况五</span>

                <span class="token comment">//情况五</span>
                <span class="token function">rotateLeft</span><span class="token punctuation">(</span>grandFather<span class="token punctuation">)</span><span class="token punctuation">;</span>
                grandFather<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">;</span>
                parent<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    root<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_354"></a>验证是否为红黑树</h2> 
<h3><a id="_355"></a>中序遍历</h3> 
<p>红黑树是二叉搜索树，所以应该满足中序遍历结果是一个从小到大的有序序列</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inorder</span><span class="token punctuation">(</span><span class="token class-name">RBTreeNode</span> root<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">inorder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_368"></a>判断根节点的颜色</h3> 
<p>如果是空树，我们认为这棵树是红黑树，不是空树的话需要判断这棵树的根节点是否为黑色，如果不是黑色，说明这棵树不是红黑树</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//空树是红黑树</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>color <span class="token operator">!=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"根节点不是黑色"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_381"></a>判断红色节点的孩子节点是否为红色节点</h3> 
<p>通过另外单写一个方法，可以实现递归查询每一个树的左子树是否满足和右子树是否满足</p> 
<p>首先判断传入的节点是否为空，如果是空则返回true</p> 
<p>然后判断这个节点是否为红色节点，如果是，则判断他的孩子节点有没有红色的，如果有，说明不满足性质——红色节点的孩子节点不能是红色的，那么就直接返回false</p> 
<p>然后去分别判断root的左子树和root的右子树是否满足条件，必须都满足才能返回true，因此是&amp;&amp;的关系</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span>  <span class="token keyword">boolean</span> <span class="token function">checkRedColor</span><span class="token punctuation">(</span><span class="token class-name">RBTreeNode</span> root<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RBTreeNode</span> parent <span class="token operator">=</span> root<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"红色节点的孩子节点还是红色节点"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">checkRedColor</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">checkRedColor</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_406"></a>判断每条路径的黑色节点总数是否相等</h3> 
<p>先求出红黑树的某一条路径的黑色节点个数，然后拿这个个数去和其他的路径进行比较</p> 
<pre><code class="prism language-java"><span class="token keyword">int</span> blackNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">RBTreeNode</span> cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        blackNum<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>单写一个判断黑色节点总数的方法，方便我们递归</p> 
<p>这里的参数分别有如下的含义：pathBlackNum代表递归到现在时的黑色节点的总个数，而blackNum则是我们计算好了的某一条路径上的黑色节点的总个数</p> 
<p>首先判断传入的节点是否为空，如果是空则返回true</p> 
<p>然后判断传入的节点是否为黑色的，如果是黑色的，我们就需要让pathBlackNum++，代表这个路径上又多了一个黑色的节点</p> 
<p>接着看传入的节点的左右孩子节点是否为空，如果都为空，说明当前传入的节点是叶子节点，那么我们就可以去看当前路径的黑色节点总数pathBlackNum和之前计算的路径中黑色节点个数blackNum是否相等，如果不相等，说明这个路径的黑色节点个数和别的不一致，那么就不是红黑树</p> 
<p>然后，分别递归去看左子树的黑色节点个数和右子树的黑色节点个数是否符合要求</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">checkBlackNum</span><span class="token punctuation">(</span><span class="token class-name">RBTreeNode</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> pathBlackNum<span class="token punctuation">,</span> <span class="token keyword">int</span> blackNum<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        pathBlackNum<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>pathBlackNum <span class="token operator">!=</span> blackNum<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"某条路径上的黑色节点总数和其他路径的黑色节点总数不一致"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">checkBlackNum</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> pathBlackNum<span class="token punctuation">,</span> blackNum<span class="token punctuation">)</span>
            <span class="token operator">&amp;&amp;</span> <span class="token function">checkBlackNum</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> pathBlackNum<span class="token punctuation">,</span> blackNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_451"></a>完整检查是否为红黑树代码</h2> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isRBTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//空树是红黑树</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>color <span class="token operator">!=</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"根节点不是黑色"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//计算最红黑树的最左面路径的黑色节点个数</span>
    <span class="token keyword">int</span> blackNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">RBTreeNode</span> cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>color <span class="token operator">==</span> <span class="token constant">COLOR</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            blackNum<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//检查是否有红色节点的孩子节点也是红色节点，检查是否某条路径上的黑色节点总数和其他路径的黑色节点总数不一致</span>
    <span class="token keyword">return</span> <span class="token function">checkRedColor</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">checkBlackNum</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> blackNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_479"></a>主函数调用</h2> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">rbTree</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//int[] array = {16,3,7,11,9,26,18,14,15};</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">RBTree</span> rbTree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RBTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            rbTree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        rbTree<span class="token punctuation">.</span><span class="token function">inorder</span><span class="token punctuation">(</span>rbTree<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rbTree<span class="token punctuation">.</span><span class="token function">isRBTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dd/fc/f91kfg7P_o.png" alt="在这里插入图片描述"><br> 可以看到，我们的红黑树插入代码是正确的，最终的得到的红黑树是满足所有性质的</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cf6d369196ac9caff83717ef338e49a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用友u8 出现 由于目标机器积极拒绝，无法连接。192.168.2.206:11520</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/884bc2827608dccfa9e25982f9021864/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在windows系统中创建本地SSL证书</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>