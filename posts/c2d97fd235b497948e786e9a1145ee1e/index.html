<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python cv2 (一) 基础 参数 详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python cv2 (一) 基础 参数 详解" />
<meta property="og:description" content="摘要 OpenCV 图像读取,cv2图像创建,cv2图像复制,cv2图像拼接,np.hstack子图列表,plt子图列表显示,cv2图像色彩模式转换,cv2图像通道拆分,cv2图像加法,cv2图像add和addWeighted,cv2图像不同尺寸重叠,cv2图像图像加logo,掩膜ROI,mask,cv2图像渐变动画,圆形遮罩,cv2图像写字画画,cv2图像处理视频
OpenCV应用领域 1、计算机视觉领域方向
1、人机互动
2、物体识别
3、图像分割
4、人脸识别
5、动作识别
6、运动跟踪
7、机器人
8、运动分析
9、机器视觉
10、结构分析
11、汽车安全驾驶
2、计算机操作底层技术
一 图像基本 1 模块 #--*coding:utf-8*-- import cv2#基本 #opencv 读取的格式是BGR 非rgb import matplotlib.pyplot as plt #绘图展示 import numpy as np #基本计算 2 读取 创建 2.1 读取（cv2.imread） 图片=cv2.imread(&#34;a01.jpg&#34;) 灰度图片=cv2.imread(&#34;a01.jpg&#34;, cv2.IMREAD_GRAYSCALE) 2.2 创建 （np.zeros） np.zeros() 等方法创建指定大小、类型的图像对象
np.ones_like(img1) * 255 创建和 img 一样大小的 白色图片
白色图片100*300 = np.ones((100, 300), dtype=&#34;float&#34;) # 1.14 Numpy 创建图像 # 创建彩色图像(RGB) # (1) 通过宽度高度值创建多维数组 width, height, channels = 400, 300, 3 # 行/高度, 列/宽度, 通道数 imgEmpty = np." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c2d97fd235b497948e786e9a1145ee1e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-19T21:35:46+08:00" />
<meta property="article:modified_time" content="2021-11-19T21:35:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python cv2 (一) 基础 参数 详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>摘要 OpenCV 图像读取,cv2图像创建,cv2图像复制,cv2图像拼接,np.hstack子图列表,plt子图列表显示,cv2图像色彩模式转换,cv2图像通道拆分,cv2图像加法,cv2图像add和addWeighted,cv2图像不同尺寸重叠,cv2图像图像加logo,掩膜ROI,mask,cv2图像渐变动画,圆形遮罩,cv2图像写字画画,cv2图像处理视频</p> 
<h2><a id="OpenCV_2"></a>OpenCV应用领域</h2> 
<p>1、计算机视觉领域方向<br> 1、人机互动<br> 2、物体识别<br> 3、图像分割<br> 4、人脸识别<br> 5、动作识别<br> 6、运动跟踪<br> 7、机器人<br> 8、运动分析<br> 9、机器视觉<br> 10、结构分析<br> 11、汽车安全驾驶<br> 2、计算机操作底层技术</p> 
<h2><a id="__16"></a>一 图像基本</h2> 
<h3><a id="1__17"></a>1 模块</h3> 
<pre><code class="prism language-py"><span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2<span class="token comment">#基本                      #opencv 读取的格式是BGR  非rgb</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt    <span class="token comment">#绘图展示</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np                  <span class="token comment">#基本计算</span>
</code></pre> 
<h3><a id="2___24"></a>2 读取 创建</h3> 
<h6><a id="21_cv2imread_25"></a>2.1 读取（cv2.imread）</h6> 
<pre><code>图片=cv2.imread("a01.jpg")
灰度图片=cv2.imread("a01.jpg", cv2.IMREAD_GRAYSCALE)
</code></pre> 
<h6><a id="22__npzeros_28"></a>2.2 创建 （np.zeros）</h6> 
<p>np.zeros() 等方法创建指定大小、类型的图像对象<br> np.ones_like(img1) * 255 创建和 img 一样大小的 白色图片</p> 
<pre><code>白色图片100*300 = np.ones((100, 300), dtype="float")
</code></pre> 
<pre><code class="prism language-py"> <span class="token comment"># 1.14 Numpy 创建图像</span>
    <span class="token comment"># 创建彩色图像(RGB)</span>
    <span class="token comment"># (1) 通过宽度高度值创建多维数组</span>
    width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> channels <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">3</span>  <span class="token comment"># 行/高度, 列/宽度, 通道数</span>
    imgEmpty <span class="token operator">=</span> np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">3</span>  <span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>  <span class="token comment"># 创建空白数组</span>
    imgBlack <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> channels<span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>  <span class="token comment"># 创建黑色图像 RGB=0</span>
    imgWhite <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> channels<span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span>  <span class="token comment"># 创建白色图像 RGB=255</span>
    <span class="token comment"># (2) 创建相同形状的多维数组</span>
    img1 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgLena.tif"</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># flags=1 读取彩色图像(BGR)</span>
    imgBlackLike <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>img1<span class="token punctuation">)</span>  <span class="token comment"># 创建与 img1 相同形状的黑色图像</span>
    imgWhiteLike <span class="token operator">=</span> np<span class="token punctuation">.</span>ones_like<span class="token punctuation">(</span>img1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span>  <span class="token comment"># 创建与 img1 相同形状的白色图像</span>
    <span class="token comment"># (3) 创建彩色随机图像 RGB=random</span>
    <span class="token keyword">import</span> os
    randomByteArray <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>urandom<span class="token punctuation">(</span>width <span class="token operator">*</span> height <span class="token operator">*</span> channels<span class="token punctuation">)</span><span class="token punctuation">)</span>
    flatNumpyArray <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>randomByteArray<span class="token punctuation">)</span>
    imgRGBRand <span class="token operator">=</span> flatNumpyArray<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> channels<span class="token punctuation">)</span>

    <span class="token comment"># (4) 创建灰度图像</span>
    imgGrayWhite <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span>  <span class="token comment"># 创建白色图像 Gray=255</span>
    imgGrayBlack <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>  <span class="token comment"># 创建黑色图像 Gray=0</span>
    imgGrayEye <span class="token operator">=</span> np<span class="token punctuation">.</span>eye<span class="token punctuation">(</span>width<span class="token punctuation">)</span>  <span class="token comment"># 创建对角线元素为1 的单位矩阵    </span>
    randomByteArray <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>urandom<span class="token punctuation">(</span>width <span class="token operator">*</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>
    flatNumpyArray <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>randomByteArray<span class="token punctuation">)</span>
    imgGrayRand <span class="token operator">=</span> flatNumpyArray<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>  <span class="token comment"># 创建灰度随机图像 Gray=random  </span>
————————————————
版权声明：本文为CSDN博主「Python小白进阶」的原创文章，遵循CC <span class="token number">4.0</span> BY<span class="token operator">-</span>SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https<span class="token punctuation">:</span><span class="token operator">//</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>youcans<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">121174586</span>

</code></pre> 
<h3><a id="3___64"></a>3 复制 拼接</h3> 
<h6><a id="31npcopy_65"></a>3.1复制（np.copy）</h6> 
<pre><code>图片2=图片.copy()
</code></pre> 
<h6><a id="32__67"></a>3.2 拼接</h6> 
<pre><code>retval = numpy.hstack((img1, img2, …)) # 水平拼接   高度(行)相同
retval = numpy.vstack((img1, img2, …)) # 垂直拼接  宽度(列)相同
</code></pre> 
<ul><li>综合使用 np.hstack() 和 np.vstack() 函数，可以实现图像的矩阵拼接</li></ul> 
<h3><a id="4___72"></a>4 关闭 保存</h3> 
<p>cv2.destroyAllWindows()<br> cv2.imwrite(“z图像保存.jpg”,img1)</p> 
<h3><a id="5__78"></a>5 显示</h3> 
<h6><a id="51__79"></a>5.1 图片数据</h6> 
<p>print(“图片”,图片)<br> print(“图片”,图片[5,:,0]) #只显示 5行</p> 
<h6><a id="52___82"></a>5.2 图片信息 (宽\高和通道)</h6> 
<p>print(图片.shape,图片.size)</p> 
<h6><a id="54_____85"></a>5.4 图片显示 /视频</h6> 
<ul><li> <p>cv2.imshow("",图片)</p> </li><li> <p>cv2.imshow(“影片”,cv2.cvtColor(cv2.read(影片)[1]))</p> <pre><code>      打开,帧=影片.read()
      cv2.imshow("影片",帧)
</code></pre> </li></ul> 
<h3><a id="6__91"></a>6 停止</h3> 
<h6><a id="64___92"></a>6.4 停止图片</h6> 
<p>-cv2.waitKey(100)</p> 
<h6><a id="65____94"></a>6.5 停止 视频</h6> 
<ul><li>cv2.waitKey(25)&amp;0xFF==27: # 键盘ESC(27)退出, 否则等待25毫秒</li></ul> 
<h3><a id="7__96"></a>7 列表</h3> 
<h6><a id="71__nphstack_97"></a>7.1 np.hstack</h6> 
<p>展示=np.hstack((图片,图片2)) # 同尺寸<br> cv2.imshow(“zhanshi”,展示))<br> cv2.waitKey(0)</p> 
<h6><a id="72__plt_101"></a>7.2 plt</h6> 
<pre><code class="prism language-py"><span class="token comment"># 边界填充</span>
<span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

图片<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"a01.jpg"</span><span class="token punctuation">)</span>

复制边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REPLICATE<span class="token punctuation">)</span>
<span class="token comment"># 可以先规定 上下左右</span>
top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
反射边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REFLECT<span class="token punctuation">)</span>
反射边缘_101<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REFLECT_101<span class="token punctuation">)</span>
常量边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># 黑色 0</span>
</code></pre> 
<ul><li>b调整 颜色 顺序 bgr → rgb</li></ul> 
<pre><code class="prism language-py"><span class="token comment"># 另一种显示方式  列表显示</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment">###  调整 颜色 顺序   bgr → rgb</span>
<span class="token keyword">def</span> <span class="token function">bgr2rgb</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 灰度图直接返回</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img
    <span class="token comment"># 三通道图</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 三通道+明度</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 不明格式</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img

	<span class="token comment">#   列表显示</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">321</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>图片<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>复制边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"复制边缘"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">324</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>反射边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"反射边缘"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">325</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>反射边缘_101<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"反射边缘_101"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">326</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>常量边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"常量边缘"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/5e/UsZIJIdx_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="73__plt_____148"></a>7.3 plt 列表骚操作</h6> 
<pre><code class="prism language-py">plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>
<span class="token comment">#  总3行, 本行3列 第二列</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">332</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合相加"</span><span class="token punctuation">)</span>
<span class="token comment">#  总三行 本行2列 , 感觉应该是 4  5  但不行  只能 3  4</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_ROI"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">324</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_反_原logo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_反_原logo"</span><span class="token punctuation">)</span>
<span class="token comment">#  总 三行  本行4列  3*4  12  所以从  9-12,之所以用,隔开  是因为  10 11 12 两位数</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"ROI"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>logo_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"log原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask_反<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化-反"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/21/65/ctcyRpoZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="8__165"></a>8 色彩转换</h3> 
<h6><a id="81__166"></a>8.1 色彩转换</h6> 
<p>img3 = cv2.cvtColor(img,cv2.COLOR_GRAY2RGB</p> 
<h6><a id="82__170"></a>8.2 通道分合</h6> 
<pre><code>#  拆
b,g,r=cv2.split(图片)
#  合
图片通道合成rgb=cv2.merge(r,g,b)
</code></pre> 
<h6><a id="83_R_175"></a>8.3 R通道</h6> 
<p>img[:,:,0]=0<br> img[:,:,1]=0<br> cv2.imshow(“红色”,img)<br> cv2.waitKey(100)</p> 
<h6><a id="84_B_181"></a>8.4 B通道</h6> 
<p>img2=cv2.imread(“a01.jpg”)<br> img2[:,:,1]=0<br> img2[:,:,2]=0<br> cv2.imshow(“B”,img2)</p> 
<h3><a id="9__188"></a>9 大小</h3> 
<p>print(img1.size,img1.dtype)</p> 
<h6><a id="91__190"></a>9.1 缩放</h6> 
<p>图片2=cv2.resize(图片,(500,50))<br> 图片3=cv2.resize(图片,(0,0),fx=倍数,fy=倍数)<br> 图片3=cv2.resize(图片,(int(图片.shape[0]*0.5),int(图片.shape[1]*0.5))) # 好像必须是整数</p> 
<h6><a id="92__ROI_195"></a>9.2 截取 ROI</h6> 
<p>根据对图像的x轴和y轴 坐标设定</p> 
<pre><code>截图=img1[:d,:800]  #上边界 到 下500, 右边界 到800
截图=img[上:下,左:右]  # img[:,:] 冒号两边空时,为到边界
</code></pre> 
<p><img src="https://images2.imgbox.com/99/b5/y4FulV3A_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="93__204"></a>9.3 边界填充</h6> 
<pre><code class="prism language-py"><span class="token comment"># 边界填充</span>
<span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

图片<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"a01.jpg"</span><span class="token punctuation">)</span>

复制边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REPLICATE<span class="token punctuation">)</span>
<span class="token comment"># 可以先规定 上下左右</span>
top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
反射边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REFLECT<span class="token punctuation">)</span>
反射边缘_101<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_REFLECT_101<span class="token punctuation">)</span>
常量边缘<span class="token operator">=</span>cv2<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>图片<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right<span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># 黑色 0</span>

<span class="token comment"># 另一种显示方式  列表显示</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment">###  调整 颜色 顺序   bgr → rgb</span>
<span class="token keyword">def</span> <span class="token function">bgr2rgb</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 灰度图直接返回</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img
    <span class="token comment"># 三通道图</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">,</span><span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 三通道+明度</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 不明格式</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img

	<span class="token comment">#   列表显示</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">321</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>图片<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>复制边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"复制边缘"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">324</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>反射边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"反射边缘"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">325</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>反射边缘_101<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"反射边缘_101"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">326</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>常量边缘<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"常量边缘"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/89/91/ggd5OOPY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="10____Flip_251"></a>10 翻转 Flip</h3> 
<p>使用函数cv2.flip(img,flipcode)翻转图像，flipcode控制翻转效果。<br> flipcode = 0：沿x轴翻转<br> flipcode &gt; 0：沿y轴翻转<br> flipcode &lt; 0：x,y轴同时翻转</p> 
<pre><code>翻转的图片= cv2.flip(原始图片,1)
</code></pre> 
<h3><a id="11__259"></a>11 旋转</h3> 
<h6><a id="111__260"></a>11.1 圆心为中心</h6> 
<ul><li>由函数 cv2.warpAffine 可以实现任意角度和任意中心的旋转效果。</li><li>以图像中心作为旋转中心时，可以用 img.shape 获得图像的宽度和高度值，除以 2 就是图像中心点坐标。</li><li>旋转角度为 90，180，270 度时，可以用 cv2.rotate(src, rotateCode) 函数实现，该方法实际上是通过矩阵转置实现的，因此速度很快。</li></ul> 
<pre><code class="prism language-py">    <span class="token comment"># 1.35 图像旋转 (以原点 (0,0) 为中心旋转)</span>
    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgLena.tif"</span><span class="token punctuation">)</span>  <span class="token comment"># 读取彩色图像(BGR)</span>
    rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> ch <span class="token operator">=</span> img<span class="token punctuation">.</span>shape

    theta <span class="token operator">=</span> np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">8.0</span>  <span class="token comment"># 顺时针旋转角度</span>
    cosTheta <span class="token operator">=</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>theta<span class="token punctuation">)</span>
    sinTheta <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>theta<span class="token punctuation">)</span>
    MAT <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>cosTheta<span class="token punctuation">,</span> <span class="token operator">-</span>sinTheta<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>sinTheta<span class="token punctuation">,</span> cosTheta<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 构造旋转变换矩阵</span>
    <span class="token comment"># dst = cv2.warpAffine(img, MAT, (cols, rows))  # 默认为黑色填充</span>
    dst <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span> MAT<span class="token punctuation">,</span> <span class="token punctuation">(</span>cols<span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">,</span> borderValue<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置白色填充</span>

    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">121</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Origin"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">122</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>dst<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Rotation"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
————————————————
版权声明：本文为CSDN博主「Python小白进阶」的原创文章，遵循CC <span class="token number">4.0</span> BY<span class="token operator">-</span>SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https<span class="token punctuation">:</span><span class="token operator">//</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>youcans<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">121314279</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/77/94/1t6rI2xH_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="112__285"></a>11.2 任意点为中心</h6> 
<pre><code>cv2.getRotationMatrix2D(center, angle, scale) → M
</code></pre> 
<p>参数说明：</p> 
<p>center：旋转中心坐标，二元元组 (x0, y0)<br> angle：旋转角度，单位为角度，逆时针为正数，顺时针为负数<br> scale： 缩放因子<br> 返回值：M， 旋转变换矩阵，2行3列</p> 
<pre><code class="prism language-py"> <span class="token comment"># 1.36 图像旋转 (以任意点 (x0,y0) 为中心旋转)</span>
    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgGaia.tif"</span><span class="token punctuation">)</span>  <span class="token comment"># 读取彩色图像(BGR)</span>
    height<span class="token punctuation">,</span> width <span class="token operator">=</span> img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment"># 图片的高度和宽度</span>

    theta1<span class="token punctuation">,</span> theta2 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">45</span>  <span class="token comment"># 顺时针旋转角度，单位为角度</span>
    x0<span class="token punctuation">,</span> y0 <span class="token operator">=</span> width<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">//</span><span class="token number">2</span>  <span class="token comment"># 以图像中心作为旋转中心</span>
    MAR1 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">)</span><span class="token punctuation">,</span> theta1<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
    MAR2 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">)</span><span class="token punctuation">,</span> theta2<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
    imgR1 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span> MAR1<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 旋转变换，默认为黑色填充</span>
    imgR2 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span> MAR2<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">,</span> borderValue<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置白色填充</span>

    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">131</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">r"$Origin$"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">132</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">r"$Rotation {}^o$"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>theta1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>imgR1<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">133</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">r"$Rotation {}^o$"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>theta2<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>imgR2<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
————————————————
版权声明：本文为CSDN博主「Python小白进阶」的原创文章，遵循CC <span class="token number">4.0</span> BY<span class="token operator">-</span>SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https<span class="token punctuation">:</span><span class="token operator">//</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>youcans<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">121314339</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/9c/5jRzABQG_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__321"></a>12 扭曲</h3> 
<p>由函数 cv2.warpAffine 可以计算变换后的扭变图像。</p> 
<pre><code class="prism language-py">   <span class="token comment"># 1.41 图像的错切</span>
    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgB2.jpg"</span><span class="token punctuation">)</span>  <span class="token comment"># 读取彩色图像(BGR)</span>
    height<span class="token punctuation">,</span> width <span class="token operator">=</span> img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment"># 图片的高度和宽度</span>

    MAS <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 构造错切变换矩阵</span>
    imgShear <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span> MAS<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>

    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">121</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"imgOrigin"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">122</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>imgShear<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"imgShear"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8a/4c/R0IQb89r_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13__339"></a>13 加法</h3> 
<h6><a id="131__340"></a>13.1 像素的编辑</h6> 
<p>像素的编辑</p> 
<ul><li>读取<br> img[100,100] ,[155 118 2] =&gt;读取点[100,100]坐标值的bgr<br> img[100,100,0] # 155 =&gt; 点[100,100]的第0通道(b通道)的值 155</li><li>修改<br> img[100,100] = [255,255,255] =&gt; 直接修改这个点的 bgr<br> img.itemset((100,100,0),100) =&gt;用itenset 修改 0通道的值为100<br> <mark>直接读取的时候 用中括号, item时 用小括号</mark></li></ul> 
<pre><code class="prism language-py"><span class="token comment"># coding:utf8</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"Tim Walker (131).jpg"</span><span class="token punctuation">)</span>

<span class="token comment">#获取像素值</span>
px <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span>  <span class="token comment"># [155 118   2]  :[100,100]坐标值的bgr</span>
blue <span class="token operator">=</span> img<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 155 :[100,100]这个点的0通道,b通道的值 155</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>px<span class="token punctuation">,</span> blue<span class="token punctuation">)</span>  <span class="token comment">#[155 118   2] 155</span>
<span class="token comment">#修改像素值</span>
img<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">#[255 255 255]</span>

<span class="token comment">#使用item修改</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"[10,10]"</span><span class="token punctuation">,</span>img<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># [175 144  15]: 坐标[10,10]像素点的bgr</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 15:[10,10],这个点的2通道,r通道值是15</span>

img<span class="token punctuation">.</span>itemset<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment"># 修改 [10,10] 这个点的r通道值,为100</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#100</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment">#[100 255 255]</span>
</code></pre> 
<h6><a id="132__add_addWeighted_372"></a>13.2 同尺寸 add addWeighted</h6> 
<p>-图片的大小和类型（通道数）必须相同</p> 
<pre><code>	猫图 = cv2.imread('cat.jpg')
	狗图 = cv2.imread('dog.jpg')
	
	直接相加 = 狗图 + 猫图
	加标量 = 猫图 + 30
	add相加 = cv2.add(狗图, 猫图)
	权重混合相加 = cv2.addWeighted(狗图, 0.7, 猫图, 0.3, 0) # 0.7为权重, 0为gama值
</code></pre> 
<p><img src="https://images2.imgbox.com/84/00/MlJyQ7fY_o.png" alt="在这里插入图片描述"><br> 代码奉上</p> 
<pre><code class="prism language-py">  <span class="token comment"># --*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2  <span class="token comment"># 读取的格式 是BGR</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt  <span class="token comment"># 列表展示  rgb</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>

猫图 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'cat.jpg'</span><span class="token punctuation">)</span>
狗图 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'dog.jpg'</span><span class="token punctuation">)</span>

直接相加 <span class="token operator">=</span> 狗图 <span class="token operator">+</span> 猫图
加标量 <span class="token operator">=</span> 猫图 <span class="token operator">+</span> <span class="token number">30</span>
add相加 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>狗图<span class="token punctuation">,</span> 猫图<span class="token punctuation">)</span>
权重混合相加 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>狗图<span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> 猫图<span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># 0.7为权重, 0为gama值</span>

<span class="token keyword">def</span> <span class="token function">bgr2rgb</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span> <span class="token punctuation">:</span>
    <span class="token comment"># 灰度图片直接返回</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">:</span>
        <span class="token keyword">return</span> cv2_img
    <span class="token comment"># 3通道的BGR图片</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">:</span>  <span class="token comment"># 三位数,三通道</span>
        b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r <span class="token operator">=</span> cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 4通道的BGR图片</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">4</span> <span class="token punctuation">:</span>  <span class="token comment"># 三位数,三通道+明度</span>
        b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">,</span>a <span class="token operator">=</span> cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 未知格式</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token keyword">return</span> cv2_img
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">321</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>猫图<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"猫图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">322</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>狗图<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"猫图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>加标量<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"加标量+10"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">324</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>直接相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"直接相加"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">325</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>add相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"add相加,"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">326</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>权重混合相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"权重混合相加"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>扩展阅读 13.2 常量(常数)和标量</li><li>注意 cv2.add() 对图像与标量相加时，“常数” 与 “标量” 的区别：</li><li>将图像与一个常数 value 相加，只是将 B 通道即蓝色分量与常数相加，而 G、R 通道的数值不变，因此图像发蓝。</li><li>将图像与一个标量 scalar 相加，“标量” 是指一个 1x3 的 numpy 数组，此时 B/G/R 通道分别与数组中对应的常数相加，因此图像发白。</li><li>标量 numpy 数组的形式为：np.array([[c1, c2, c3]])，常数 c1,c2,c3 可以相同或不同。<br> ————————————————<br> 版权声明：本文为CSDN博主「Python小白进阶」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/youcans/article/details/121191469</li></ul> 
<pre><code class="prism language-py"><span class="token comment"># 1.23 图像的加法 (与标量相加)</span>
    img1 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgB1.jpg"</span><span class="token punctuation">)</span>  <span class="token comment"># 读取彩色图像(BGR)</span>
    img2 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"../images/imgB3.jpg"</span><span class="token punctuation">)</span>  <span class="token comment"># 读取彩色图像(BGR)</span>

    Value <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment"># 常数</span>
    <span class="token comment"># Scalar = np.array([[50., 100., 150.]])  # 标量</span>
    Scalar <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">"float"</span><span class="token punctuation">)</span> <span class="token operator">*</span> Value  <span class="token comment"># 标量</span>
    imgAddV <span class="token operator">=</span> cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> Value<span class="token punctuation">)</span>  <span class="token comment"># OpenCV 加法: 图像 + 常数</span>
    imgAddS <span class="token operator">=</span> cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> Scalar<span class="token punctuation">)</span>  <span class="token comment"># OpenCV 加法: 图像 + 标量</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/a2/wCSzQ3ze_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="133__444"></a>13.3 不同尺寸</h6> 
<h6><a id="134__445"></a>13.4 重叠加法</h6> 
<pre><code>目标图[:行_logo,:列_logo]=logo[:,:]
</code></pre> 
<pre><code class="prism language-py"><span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 1,读入图片</span>

logo<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"logo.jpg"</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>
目标图<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"jindi.jpg"</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>

行_logo<span class="token punctuation">,</span>列_logo<span class="token punctuation">,</span>通道<span class="token operator">=</span>logo<span class="token punctuation">.</span>shape

目标图<span class="token punctuation">[</span><span class="token punctuation">:</span>行_logo<span class="token punctuation">,</span><span class="token punctuation">:</span>列_logo<span class="token punctuation">]</span><span class="token operator">=</span>logo<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span>目标图<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/35/4e/fjjyQAa8_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="135__ROI_mask_467"></a>13.5 掩膜加法 ROI mask</h6> 
<h6><a id="136_logo_468"></a>13.6 加logo</h6> 
<ul><li>cv2.add(img,mask) 对被掩模图像遮蔽的黑色区域不进行处理，保持黑色。</li><li>掩膜 遮蔽区域为黑色,非遮蔽区域为透明,开窗区域</li><li>掩膜 与 原图 尺寸必须相同</li></ul> 
<p><a href="https://blog.csdn.net/sdgpcc2000/article/details/121548435">详见 本人 另一篇 文字 cv2 给图像加logo ,plt子图列表</a></p> 
<pre><code class="prism language-py"><span class="token comment"># coding:utf8</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 图像处理，将logo图标叠加到一张图片的右上角，要求有颜色的区域为不透明</span>

<span class="token comment"># 1，对logo进行缩放，按照20%进行</span>
logo_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"logo.png"</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>
logo_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>logo_img<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fx<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> fy<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span> interpolation<span class="token operator">=</span>cv2<span class="token punctuation">.</span>INTER_NEAREST<span class="token punctuation">)</span>  <span class="token comment"># inter..这个是为了对齐</span>

<span class="token comment"># 2，对logo做清洗，白色区域是255，其他区域置为黑色0</span>
logo_gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>logo_img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>  <span class="token comment"># 变成灰度图</span>
阈值<span class="token punctuation">,</span> 二值化_logo_mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>threshold<span class="token punctuation">(</span>logo_gray<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>THRESH_BINARY<span class="token punctuation">)</span>  <span class="token comment"># 二值化函数,大于200的当255,非黑即白</span>
二值化_logo_mask_反 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>bitwise_not<span class="token punctuation">(</span>二值化_logo_mask<span class="token punctuation">)</span>

<span class="token comment"># 3，提取目标图片的ROI</span>
目标图 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"wolf.jpg"</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>
行_logo<span class="token punctuation">,</span> 列_logo<span class="token punctuation">,</span> 通道 <span class="token operator">=</span> logo_img<span class="token punctuation">.</span>shape
行_目标图<span class="token punctuation">,</span> 列_目标图<span class="token punctuation">,</span> 通道<span class="token number">2</span> <span class="token operator">=</span> 目标图<span class="token punctuation">.</span>shape
ROI<span class="token operator">=</span>目标图<span class="token punctuation">[</span><span class="token punctuation">:</span>行_logo<span class="token punctuation">,</span>列_目标图<span class="token operator">-</span>列_logo<span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token comment"># 4，ROI和LOGO图像融合</span>
融合二值化_ROI<span class="token operator">=</span>cv2<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>ROI<span class="token punctuation">,</span>ROI<span class="token punctuation">,</span>mask<span class="token operator">=</span>二值化_logo_mask<span class="token punctuation">)</span>
融合二值化_反_原logo<span class="token operator">=</span>cv2<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>logo_img<span class="token punctuation">,</span>logo_img<span class="token punctuation">,</span>mask<span class="token operator">=</span>二值化_logo_mask_反<span class="token punctuation">)</span>
融合相加<span class="token operator">=</span>cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>融合二值化_反_原logo<span class="token punctuation">,</span>融合二值化_ROI<span class="token punctuation">)</span>
<span class="token comment"># 5, ROI 贴回目标图</span>
目标图<span class="token punctuation">[</span><span class="token punctuation">:</span>行_logo<span class="token punctuation">,</span>列_目标图<span class="token operator">-</span>列_logo<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">=</span>融合相加<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"wolf++.jpg"</span><span class="token punctuation">,</span>目标图<span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"++"</span><span class="token punctuation">,</span> 目标图<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">"""展示 勿删  plt"""</span>
<span class="token comment"># cv2与matplotlib的图像转换，cv2是bgr格式，matplotlib是rgb格式</span>
<span class="token keyword">def</span> <span class="token function">bgr2rgb</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span> <span class="token punctuation">:</span>
    <span class="token comment"># 灰度图片直接返回</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">:</span>
        <span class="token keyword">return</span> cv2_img
    <span class="token comment"># 3通道的BGR图片</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">:</span>  <span class="token comment"># 三位数,三通道</span>
        b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r <span class="token operator">=</span> cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 4通道的BGR图片</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">4</span> <span class="token punctuation">:</span>  <span class="token comment"># 三位数,三通道+明度</span>
        b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">,</span>a <span class="token operator">=</span> cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 未知格式</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token keyword">return</span> cv2_img

plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">441</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>logo_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"log原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">442</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>目标图<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"目标图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">443</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"ROI"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">445</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>logo_gray<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'gray'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"灰度图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">446</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">447</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask_反<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化-反"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">449</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_ROI"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_反_原logo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_反_原logo"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合相加"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>
<span class="token comment">#  总3行, 本行3列 第二列</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">332</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合相加<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合相加"</span><span class="token punctuation">)</span>
<span class="token comment">#  总三行 本行2列 , 感觉应该是 4  5  但不行  只能 3  4</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_ROI"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">324</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合二值化_反_原logo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合二值化_反_原logo"</span><span class="token punctuation">)</span>
<span class="token comment">#  总 三行  本行4列  3*4  12  所以从  9-12,之所以用,隔开  是因为  10 11 12 两位数</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>ROI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"ROI"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>logo_img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"log原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值化_logo_mask_反<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"gray"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值化-反"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span>
</code></pre> 
<h6><a id="137___addWeighted_557"></a>13.7 渐变动画 addWeighted</h6> 
<p>cv2.addWeighted(img1,权重, img2, (1 - 权重), gamma)<br> 注意事项：</p> 
<ul><li>图片的大小和类型（通道数）必须相同。</li><li>权重和gamma 可调，可推荐取, gamma=0</li><li>gamma： 灰度系数，图像校正的偏移量，用于调节亮度</li></ul> 
<pre><code class="prism language-py"><span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 1,读入图片</span>
猫图<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"cat.jpg"</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>
狗图<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"dog.jpg"</span><span class="token punctuation">,</span>cv2<span class="token punctuation">.</span>IMREAD_COLOR<span class="token punctuation">)</span>
渐变范围<span class="token operator">=</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span>  <span class="token comment">#开始 结束 步长</span>

<span class="token keyword">for</span> 权重 <span class="token keyword">in</span> 渐变范围<span class="token punctuation">:</span>
    渐变<span class="token operator">=</span>cv2<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>猫图<span class="token punctuation">,</span>权重<span class="token punctuation">,</span>狗图<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">-</span>权重<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span>渐变<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="138__580"></a>13.8 圆形遮罩</h6> 
<p>掩膜 头像,图标之类 常用<br> cv2.circle(图片, 圆心坐标, 半径, color, 粗细)</p> 
<pre><code class="prism language-py"><span class="token comment"># coding:utf8</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt

<span class="token triple-quoted-string string">"""
[思路]:1,用mask 扣一个圆形mask  2, 融合
"""</span>
<span class="token comment"># 读入</span>
照片  <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"duzong.jpg"</span><span class="token punctuation">)</span>

<span class="token comment"># 把3值照片,做成2值容器,并在容器上 画  mask 掩膜</span>
二值容器 <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>照片<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>  <span class="token comment"># [:2]二值相对于  ,必须指定  np.uint8,否则会报错</span>
容器<span class="token operator">=</span>二值容器<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>容器<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">#  二值掩膜  ##  参数  坐标,半径,颜色,粗细,-1实心</span>
<span class="token comment"># 掩膜图像白色区域是对需要处理图像像素的保留，黑色区域是对需要处理图像像素的剔除</span>

<span class="token comment"># 建白色蒙版</span>
蒙版 <span class="token operator">=</span> np<span class="token punctuation">.</span>ones_like<span class="token punctuation">(</span>照片<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span>

照片_mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>照片<span class="token punctuation">,</span> 照片<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">)</span>
蒙版_mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>蒙版<span class="token punctuation">,</span>蒙版 <span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token operator">~</span>mask<span class="token punctuation">)</span>  <span class="token comment"># 这个 =~   应该就是  反mask吧  </span>
融合 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>add<span class="token punctuation">(</span>照片_mask<span class="token punctuation">,</span> 蒙版_mask<span class="token punctuation">)</span>
</code></pre> 
<ul><li>显示</li></ul> 
<pre><code class="prism language-py">plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">"font.sans-serif"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"SimHei"</span><span class="token punctuation">]</span>  <span class="token comment"># 显示汉字</span>
plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>constrained_layout<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 子图自适应行距 constrained 受约束的</span>

<span class="token comment"># bgr--rgb</span>
<span class="token keyword">def</span> <span class="token function">bgr2rgb</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">3</span> <span class="token keyword">and</span> cv2_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">:</span>
        b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">,</span>a<span class="token operator">=</span>cv2<span class="token punctuation">.</span>split<span class="token punctuation">(</span>cv2_img<span class="token punctuation">)</span>
        <span class="token keyword">return</span> cv2<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">return</span> cv2_img
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">331</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>照片<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"原图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">332</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>二值容器<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"二值容器"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"mask"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>蒙版<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"蒙版"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>照片_mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"照片_mask"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>蒙版_mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"蒙版_mask"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">432</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>融合<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"融合"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">423</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>照片_mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"照片_mask"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">424</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>蒙版_mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"蒙版_mask"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">425</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"mask mask"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">426</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"mask mask"</span><span class="token punctuation">)</span>
<span class="token comment">#</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>照片<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"照片"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>照片<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"照片"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>蒙版<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"蒙版"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>bgr2rgb<span class="token punctuation">(</span>蒙版<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"蒙版"</span><span class="token punctuation">)</span>


plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/b7/69/rumsSWmI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="11____652"></a>11 画画</h3> 
<pre><code class="prism language-py"><span class="token comment"># 写字画画</span>
<span class="token comment">#--*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 创建一个数组,  画布</span>
画布<span class="token operator">=</span>np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span><span class="token string">"uint8"</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">88</span>    <span class="token comment"># 填充灰色</span>
<span class="token comment">#   线  型  面</span>
<span class="token comment"># 线=cv2.line(画布,(0,0),(10,10),390,390,10)</span>
线<span class="token operator">=</span>cv2<span class="token punctuation">.</span>line<span class="token punctuation">(</span>画布<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">390</span><span class="token punctuation">,</span><span class="token number">390</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
矩形<span class="token operator">=</span>cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>画布<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
矩形_实心<span class="token operator">=</span>cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>画布<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">420</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
圆形<span class="token operator">=</span>cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>画布<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
椭圆形<span class="token operator">=</span>cv2<span class="token punctuation">.</span>ellipse<span class="token punctuation">(</span>画布<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># 20,20,200  分别表示 x y轴 倾斜度数, 200表示扇形度数</span>
</code></pre> 
<h3><a id="12__671"></a>12 写字</h3> 
<h6><a id="121_672"></a>12.1英文</h6> 
<pre><code>引入字体# 图片对象，要写的内容，左边距，字的底部到画布上端的距离，字体，大小，颜色，粗细
</code></pre> 
<p>英文文字=cv2.putText(画布,“English”,(30,550),cv2.FONT_HERSHEY_DUPLEX,5,(125,0,200),5)<br> cv2.imwrite(“z600.jpg”,画布)</p> 
<pre><code>由于  cv2 不支持中文,  遇到中文的时候还是要用 PIL的,   两种方案的打开方式和 展现方式都不一样的	
</code></pre> 
<h6><a id="122__PIL____679"></a>12.2 PIL 中文字体 中文字体</h6> 
<pre><code class="prism language-py"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token punctuation">,</span>ImageDraw<span class="token punctuation">,</span>ImageFont

画布<span class="token number">2</span><span class="token operator">=</span>Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"z600.jpg"</span><span class="token punctuation">)</span>
画笔<span class="token operator">=</span>ImageDraw<span class="token punctuation">.</span>Draw<span class="token punctuation">(</span>画布<span class="token number">2</span><span class="token punctuation">)</span>
字体<span class="token operator">=</span>ImageFont<span class="token punctuation">.</span>truetype<span class="token punctuation">(</span><span class="token string">"C:\WINDOWS\FONTS\STHUPO.TTF"</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">)</span>
<span class="token comment"># 内容</span>
画笔<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"中文字体"</span><span class="token punctuation">,</span>fill<span class="token operator">=</span><span class="token string">"red"</span><span class="token punctuation">,</span>font<span class="token operator">=</span>字体<span class="token punctuation">)</span>

<span class="token comment">#显示  中文</span>
画布<span class="token number">2.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 显示  英文 cv2</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"English"</span><span class="token punctuation">,</span>画布<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

</code></pre> 
<h2><a id="__698"></a>二 视频</h2> 
<h3><a id="_699"></a>思路</h3> 
<p>VideoCapture读入影片 → ISOpend 判断是否能打开,并未下一步循环 准备 “打开”<br> 显示 每一帧, weitKey 25毫秒, 或者ESC退出</p> 
<h3><a id="_702"></a>和图片区别</h3> 
<pre><code>打开  图片=vc2.imread("图片.jpg")
		影片=VC2.cvtColor(影片.read()[1])
</code></pre> 
<pre><code class="prism language-py"><span class="token comment"># --*coding:utf-8*--</span>
<span class="token keyword">import</span> cv2  <span class="token comment"># 基本          #opencv 读取的格式是BGR  非rgb</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np  <span class="token comment"># 基本计算</span>

<span class="token comment"># 读入数据</span>
影片 <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token string">"v02 卡点.mp4"</span><span class="token punctuation">)</span>
<span class="token comment"># 图片读取  </span>
cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"图片名称.jpg"</span><span class="token punctuation">)</span>

<span class="token comment"># cv2.imshow("ship",影片)   #不能直接读视频</span>

<span class="token comment"># 要先拆开,在合成</span>

<span class="token comment">## 判断是否可以正确打开</span>
<span class="token keyword">if</span> 影片<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    打开<span class="token punctuation">,</span>帧<span class="token operator">=</span>影片<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>打开<span class="token operator">=</span><span class="token boolean">False</span>

<span class="token comment">## 拆分 组合</span>
<span class="token keyword">while</span> 打开<span class="token punctuation">:</span>
    打开<span class="token punctuation">,</span>帧<span class="token operator">=</span>影片<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> 帧 <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    <span class="token keyword">if</span> 打开 <span class="token keyword">is</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"gray"</span><span class="token punctuation">,</span>帧<span class="token punctuation">)</span>
        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0xFF</span><span class="token operator">==</span><span class="token number">27</span><span class="token punctuation">:</span> <span class="token comment"># 键盘ESC(27)退出, 否则等待25毫秒</span>
            <span class="token keyword">break</span>
影片<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 内存释放</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 关闭全部窗</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55e92784acf36e1f294aa5785a6c792b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">3090显卡跑Scene-Graph-Benchmark.pytorch(KaihuaTang)代码踩坑记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3eeba3ece08a38a625d00ef79433d736/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Makefile中常用的gcc选项</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>