<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3 &#43; elememt-plus 表单生成器 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3 &#43; elememt-plus 表单生成器" />
<meta property="og:description" content="title: vue3 &#43; elememt-plus 表单生成器
date: 2023-10-27 16:12:57
categorys: [“技术”]
tags: [“前端”, “vue3”] 缘由 昨天写一个表单十几个二十个字段，写起来有点麻烦，中途还出现了改动，一大串一大串 el-form-item 看起来有点烦，就算是用循环写也差点意思， 刚好今天有闲余的时间，就写了个生成器，自动生成表单。
生成器使用 支持组件类型 // 暂时支持这些类型（全是element-plus的组件，我把前面的el给省略了） export type fieldType = | &#34;input&#34; | &#34;number&#34; | &#34;select&#34; | &#34;textarea&#34; | &#34;date&#34; | &#34;time&#34; | &#34;datetime&#34; | &#34;cascader&#34; | &#34;tree-select&#34; | &#34;radio&#34; | &#34;checkbox&#34;; 表单渲染 &lt;!-- 每个formColumns子项目支持两个插槽 --&gt; &lt;!-- slot=${prop} 完全替代form-item --&gt; &lt;!-- slot=${prop}Component 替代该form-item下的组件, label不变动 --&gt; &lt;FormGenerator ref=&#34;formGeneratorRef&#34; :formColumns=&#34;formColumns&#34; :model=&#34;form&#34; :rules=&#34;rules&#34; :property=&#34;property&#34; &gt; &lt;template #nameComponent&gt; 这是个name &lt;/template&gt; &lt;template #number&gt; 数量组件取代 form-item &lt;/template&gt; &lt;/FormGenerator&gt; 表单绑定 // 绑定表单 const form = reactive({ name: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c84621efe4c684446013b25b61d62e3a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-30T17:57:26+08:00" />
<meta property="article:modified_time" content="2023-10-30T17:57:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3 &#43; elememt-plus 表单生成器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr> 
<h3><a id="title_vue3__elememtplus_%0Adate_20231027_161257%0Acategorys_%0Atags__vue3_2"></a>title: vue3 + elememt-plus 表单生成器<br> date: 2023-10-27 16:12:57<br> categorys: [“技术”]<br> tags: [“前端”, “vue3”]</h3> 
<h3><a id="_8"></a>缘由</h3> 
<p>昨天写一个表单十几个二十个字段，写起来有点麻烦，中途还出现了改动，一大串一大串 <code>el-form-item</code> 看起来有点烦，就算是用循环写也差点意思， 刚好今天有闲余的时间，就写了个生成器，自动生成表单。</p> 
<h3><a id="_12"></a>生成器使用</h3> 
<h4><a id="_14"></a>支持组件类型</h4> 
<pre><code class="prism language-ts"><span class="token comment">// 暂时支持这些类型（全是element-plus的组件，我把前面的el给省略了）</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">fieldType</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token string">"input"</span>
  <span class="token operator">|</span> <span class="token string">"number"</span>
  <span class="token operator">|</span> <span class="token string">"select"</span>
  <span class="token operator">|</span> <span class="token string">"textarea"</span>
  <span class="token operator">|</span> <span class="token string">"date"</span>
  <span class="token operator">|</span> <span class="token string">"time"</span>
  <span class="token operator">|</span> <span class="token string">"datetime"</span>
  <span class="token operator">|</span> <span class="token string">"cascader"</span>
  <span class="token operator">|</span> <span class="token string">"tree-select"</span>
  <span class="token operator">|</span> <span class="token string">"radio"</span>
  <span class="token operator">|</span> <span class="token string">"checkbox"</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_32"></a>表单渲染</h4> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 每个formColumns子项目支持两个插槽 --&gt;</span>
<span class="token comment">&lt;!-- slot=${prop} 完全替代form-item --&gt;</span>
<span class="token comment">&lt;!-- slot=${prop}Component 替代该form-item下的组件, label不变动 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FormGenerator</span>
  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formGeneratorRef<span class="token punctuation">"</span></span>
  <span class="token attr-name">:formColumns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formColumns<span class="token punctuation">"</span></span>
  <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span>
  <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rules<span class="token punctuation">"</span></span>
  <span class="token attr-name">:property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property<span class="token punctuation">"</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#nameComponent</span><span class="token punctuation">&gt;</span></span> 这是个name <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#number</span><span class="token punctuation">&gt;</span></span> 数量组件取代 form-item <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FormGenerator</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_50"></a>表单绑定</h4> 
<pre><code class="prism language-ts"><span class="token comment">// 绑定表单</span>
<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> number2<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_57"></a>表单列表数据</h4> 
<pre><code class="prism language-ts"><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"项目1"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 项目2不可选中</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"项目2"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> disabled<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> treeList <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"项目1"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    label<span class="token operator">:</span> <span class="token string">"项目2"</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"项目2子项1"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">21</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 项目2不可选中</span>
      <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"项目2子项2"</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span> disabled<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 表单数据</span>
<span class="token keyword">const</span> formColumns<span class="token operator">:</span> FormItemVO<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// label： form-item 组件的 label 属性</span>
  <span class="token comment">// fileType： 为上面支持的fieldType类型 必填</span>
  <span class="token comment">// prop：绑定的数据模型属性 必填</span>
  <span class="token comment">// 其他参数：和原本element-plus组件参数保持一致</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"名称"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"name"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"测试参数"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"filed1"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"测试参数2"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"select"</span><span class="token punctuation">,</span> options<span class="token operator">:</span> list<span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"filed2"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"测试参数3"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"radio"</span><span class="token punctuation">,</span> options<span class="token operator">:</span> list<span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"filed3"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"测试参数4"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"checkbox"</span><span class="token punctuation">,</span> options<span class="token operator">:</span> list<span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"filed4"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"测试参数5"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"textarea"</span><span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"filed5"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 测试参数6 树形选择器</span>
  <span class="token punctuation">{<!-- --></span>
    label<span class="token operator">:</span> <span class="token string">"测试参数6"</span><span class="token punctuation">,</span>
    fileType<span class="token operator">:</span> <span class="token string">"tree-select"</span><span class="token punctuation">,</span>
    <span class="token comment">// data为原本的数据</span>
    data<span class="token operator">:</span> treeList<span class="token punctuation">,</span>
    prop<span class="token operator">:</span> <span class="token string">"filed6"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_property__100"></a>额外属性配置 property 属性</h4> 
<pre><code class="prism language-ts"><span class="token keyword">interface</span> <span class="token class-name">FormAttributes</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 行内模式</span>
  inline<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// lable位置</span>
  labelPosition<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">"left"</span> <span class="token operator">|</span> <span class="token string">"right"</span> <span class="token operator">|</span> <span class="token string">"top"</span><span class="token punctuation">;</span>
  <span class="token comment">// label宽度</span>
  labelWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// 表单大小</span>
  size<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">""</span> <span class="token operator">|</span> <span class="token string">"large"</span> <span class="token operator">|</span> <span class="token string">"default"</span> <span class="token operator">|</span> <span class="token string">"small"</span><span class="token punctuation">;</span>
  <span class="token comment">// 栅格数 inline 为true时无效</span>
  col<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">// label 后缀</span>
  labelSuffix<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// label右边组件的宽度</span>
  componentWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> property <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormAttributes<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  col<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  labelSuffix<span class="token operator">:</span> <span class="token string">"："</span><span class="token punctuation">,</span>
  componentWidth<span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_128"></a>效果</h5> 
<p><img src="https://images2.imgbox.com/01/2f/40FPC5Wz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_132"></a>提交表单验证</h4> 
<pre><code class="prism language-ts"><span class="token comment">// 表单校验，与原本el-form rules书写一致</span>
<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">"请输入名称"</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">"blur"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formGeneratorRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormGeneratorRef<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取表单实例</span>
<span class="token keyword">const</span> formRef <span class="token operator">=</span> formGeneratorRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">getForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> valid <span class="token operator">=</span> <span class="token keyword">await</span> formRef<span class="token operator">?.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 其他Form Exposes 写法与原本一致</span>
<span class="token comment">// const valid = await formRef?.validateField("filed1")</span>
</code></pre> 
<h5><a id="_147"></a>效果</h5> 
<p><img src="https://images2.imgbox.com/81/34/KD3buOLq_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="onEnter_152"></a>onEnter</h5> 
<pre><code class="prism language-ts"><span class="token comment">// 因为项目有按下enter进行搜索的需求</span>
<span class="token comment">// 所以抛出了 onEnter方法 【@keyup.enter】</span>
<span class="token keyword">const</span> <span class="token function-variable function">onEnter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"onEnter"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> formColumns<span class="token operator">:</span> FormItemVO<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span> label<span class="token operator">:</span> <span class="token string">"名称"</span><span class="token punctuation">,</span> fileType<span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token string">"name"</span> onEnter <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/08/cf/tTwHPoFN_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_168"></a>表单生成器代码</h3> 
<h4><a id="_170"></a>目录结构</h4> 
<pre><code class="prism language-ts"><span class="token comment">// 目录结构</span>
<span class="token operator">-</span>FormGenerator 
  <span class="token operator">-</span>index<span class="token punctuation">.</span>vue 
  <span class="token operator">-</span>types<span class="token punctuation">.</span>ts
  <span class="token operator">-</span>components
    <span class="token operator">-</span>FormItemRenderer<span class="token punctuation">.</span>vue
</code></pre> 
<h4><a id="FormGeneratortypests_180"></a>FormGenerator/types.ts</h4> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> <span class="token constant">DICT_TYPE</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/dict'</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">fieldType</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token string">'input'</span>
  <span class="token operator">|</span> <span class="token string">'number'</span>
  <span class="token operator">|</span> <span class="token string">'select'</span>
  <span class="token operator">|</span> <span class="token string">'textarea'</span>
  <span class="token operator">|</span> <span class="token string">'date'</span>
  <span class="token operator">|</span> <span class="token string">'time'</span>
  <span class="token operator">|</span> <span class="token string">'datetime'</span>
  <span class="token operator">|</span> <span class="token string">'cascader'</span>
  <span class="token operator">|</span> <span class="token string">'tree-select'</span>
  <span class="token operator">|</span> <span class="token string">'radio'</span>
  <span class="token operator">|</span> <span class="token string">'checkbox'</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">OptionsPropsVO</span> <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  children<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">FormItemVO</span> <span class="token punctuation">{<!-- --></span>
  prop<span class="token operator">:</span> <span class="token builtin">string</span>
  label<span class="token operator">:</span> <span class="token builtin">string</span>
  fileType<span class="token operator">:</span> fieldType

  options<span class="token operator">?</span><span class="token operator">:</span> OptionVO<span class="token punctuation">[</span><span class="token punctuation">]</span>
  optionsProps<span class="token operator">?</span><span class="token operator">:</span> OptionsPropsVO

  <span class="token comment">// number 组件</span>
  min<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  max<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  precision<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>

  placeholder<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  rows<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  clearable<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
  multiple<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
  filterable<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
  allowCreate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>

  <span class="token comment">// 字典类型</span>
  dictType<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">DICT_TYPE</span>

  <span class="token comment">// tree-select 组件</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token comment">// functon 键盘enter事件</span>
  onEnter<span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

  <span class="token comment">// 还有很多element-plus组件的属性没写</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span>  <span class="token class-name">OptionVO</span> <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token builtin">string</span>
  value<span class="token operator">:</span> <span class="token builtin">any</span>
  children<span class="token operator">?</span><span class="token operator">:</span> OptionVO<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// [key: string]: any</span>
<span class="token punctuation">}</span>

<span class="token comment">// 默认options映射</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> defaultOptionsPropsVO<span class="token operator">:</span> OptionsPropsVO <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token string">'label'</span><span class="token punctuation">,</span>
  value<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token string">'children'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// element-plus组件本身的type，使用fiedType</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> unchangedTypes<span class="token operator">:</span> fieldType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"textarea"</span><span class="token punctuation">,</span> <span class="token string">"date"</span><span class="token punctuation">,</span> <span class="token string">"datetime"</span><span class="token punctuation">,</span> <span class="token string">"time"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 【placeholder】提示词为 请选择${label}的 组件类型</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> selectPlaceholder<span class="token operator">:</span> fieldType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"select"</span><span class="token punctuation">,</span> <span class="token string">"cascader"</span><span class="token punctuation">,</span> <span class="token string">"tree-select"</span><span class="token punctuation">]</span>

</code></pre> 
<h4><a id="FormGeneratorcomponentsFormItemRenderervue_255"></a>FormGenerator/components/FormItemRenderer.vue</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ElFormItem</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useLabel<span class="token punctuation">"</span></span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.prop<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
      <span class="token attr-name">@keyup.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useOnEnter<span class="token punctuation">"</span></span>
      <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>componentType<span class="token punctuation">"</span></span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useValue<span class="token punctuation">"</span></span>
      <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bindItem<span class="token punctuation">"</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{ width: property?.componentWidth }<span class="token punctuation">"</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
        <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itemComponentType<span class="token punctuation">"</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(option, index) in useOptions<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
        <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>option<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ElFormItem</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span>script setup name<span class="token operator">=</span><span class="token string">"FormItemRenderer"</span> lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token comment">// 字典</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> getDictOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/dict"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  ElFormItem<span class="token punctuation">,</span>
  ElInputNumber<span class="token punctuation">,</span>
  ElSelect<span class="token punctuation">,</span>
  ElOption<span class="token punctuation">,</span>
  ElInput<span class="token punctuation">,</span>
  ElDatePicker<span class="token punctuation">,</span>
  ElTimePicker<span class="token punctuation">,</span>
  ElCascader<span class="token punctuation">,</span>
  ElRadioGroup<span class="token punctuation">,</span>
  ElRadio<span class="token punctuation">,</span>
  ElCheckboxGroup<span class="token punctuation">,</span>
  ElCheckbox<span class="token punctuation">,</span>
  ElTreeSelect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> FormItemVO<span class="token punctuation">,</span> OptionVO <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  unchangedTypes<span class="token punctuation">,</span>
  selectPlaceholder<span class="token punctuation">,</span>
  defaultOptionsPropsVO<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">PropertyVO</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// label 后缀</span>
  labelSuffix<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  componentWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PropsVO</span> <span class="token punctuation">{<!-- --></span>
  item<span class="token operator">:</span> FormItemVO<span class="token punctuation">;</span>
  value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  property<span class="token operator">?</span><span class="token operator">:</span> PropertyVO<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>PropsVO<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"update:value"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// label</span>
<span class="token keyword">const</span> useLabel <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> item <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
  <span class="token keyword">const</span> property <span class="token operator">=</span> props<span class="token punctuation">.</span>property<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>property<span class="token operator">?.</span>labelSuffix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> item<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> item<span class="token punctuation">.</span>label <span class="token operator">+</span> property<span class="token punctuation">.</span>labelSuffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useValue <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> props<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 触发 update:page 事件，更新 limit 属性，从而更新 pageNo</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"update:value"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// element-plus 组件所需的参数</span>
<span class="token keyword">const</span> bindItem <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> item <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span>item<span class="token punctuation">,</span>
    rows<span class="token operator">:</span> useRows<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    type<span class="token operator">:</span> useType<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    placeholder<span class="token operator">:</span> usePlaceholder<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    clearable<span class="token operator">:</span> useClearable<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> useOptionsPops <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> optionsProps <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>defaultOptionsPropsVO<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span>optionsProps <span class="token operator">||</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/** 组件列表数据 */</span>
<span class="token keyword">const</span> useOptions <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> list<span class="token operator">:</span> OptionVO<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> options<span class="token punctuation">,</span> dictType <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> list <span class="token operator">=</span> options<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dictType<span class="token punctuation">)</span> list <span class="token operator">=</span> <span class="token function">getIntDictOptions</span><span class="token punctuation">(</span>dictType<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value<span class="token punctuation">,</span> label<span class="token punctuation">,</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> useOptionsPops<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token comment">//字段映射</span>
  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token operator">...</span>item<span class="token punctuation">,</span>
      label<span class="token operator">:</span> item<span class="token punctuation">[</span>label <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> item<span class="token punctuation">[</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> item<span class="token punctuation">[</span>children <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> componentType <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>fileType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token string">"number"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElInputNumber<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"select"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElSelect<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"date"</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token string">"datetime"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElDatePicker<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"time"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElTimePicker<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"cascader"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElCascader<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"radio"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElRadioGroup<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"checkbox"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElCheckboxGroup<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"tree-select"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElTreeSelect<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElInput<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> itemComponentType <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>fileType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token string">"select"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElOption<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"radio"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElRadio<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">"checkbox"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> ElCheckbox<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 组件本身的type</span>
<span class="token class-name"><span class="token keyword">const</span></span> useType <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> fileType <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>unchangedTypes<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>fileType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> fileType<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 默认行数为 3</span>
<span class="token keyword">const</span> useRows <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>rows<span class="token punctuation">)</span> <span class="token keyword">return</span> props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isUndefine</span> <span class="token operator">=</span> <span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> val <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 默认清空 为true</span>
<span class="token keyword">const</span> useClearable <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isUndefine</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>clearable<span class="token punctuation">)</span><span class="token punctuation">)</span> props<span class="token punctuation">.</span>item<span class="token punctuation">.</span>clearable<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 默认提示 请输入${label} | 请选择${label}</span>
<span class="token keyword">const</span> usePlaceholder <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> placeholder<span class="token punctuation">,</span> label<span class="token punctuation">,</span> fileType <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>item<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isUndefine</span><span class="token punctuation">(</span>placeholder<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> placeholder<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>selectPlaceholder<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>fileType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请选择</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请输入</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getIntDictOptions</span> <span class="token operator">=</span> <span class="token punctuation">(</span>dictType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 根据 dictType 获取选项列表，返回一个包含 label 和 value 属性的对象数组</span>
  <span class="token comment">// 请根据你的应用需求完善这个函数</span>
  <span class="token keyword">return</span> <span class="token function">getDictOptions</span><span class="token punctuation">(</span>dictType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">useOnEnter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token operator">?.</span>item<span class="token operator">?.</span>onEnter<span class="token punctuation">)</span> <span class="token keyword">return</span> fn
  <span class="token keyword">return</span> props<span class="token punctuation">.</span>item<span class="token punctuation">.</span><span class="token function">onEnter</span><span class="token punctuation">(</span>useValue<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<h4><a id="FormGeneratorindexvue_449"></a>FormGenerator/index.vue</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span>
  <span class="token attr-name">@submit.prevent</span>
  <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>model<span class="token punctuation">"</span></span>
  <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rules<span class="token punctuation">"</span></span>
  <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useColClass<span class="token punctuation">"</span></span>
  <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property?.size<span class="token punctuation">"</span></span>
  <span class="token attr-name">:inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property?.inline<span class="token punctuation">"</span></span>
  <span class="token attr-name">:label-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property?.labelWidth<span class="token punctuation">"</span></span>
  <span class="token attr-name">:label-position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property?.labelPosition<span class="token punctuation">"</span></span>
  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formRef<span class="token punctuation">"</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in formColumns<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.prop<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.prop<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FormItemRenderer</span>
        <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
        <span class="token attr-name">:property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>property<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useModel[item.prop]<span class="token punctuation">"</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 渲染组件的slot --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.prop + 'Component'<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FormItemRenderer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span> name<span class="token operator">=</span><span class="token string">"FormGenerator"</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> FormItemRenderer <span class="token keyword">from</span> <span class="token string">"./components/FormItemRenderer.vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ElForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> FormRules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"element-plus"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> FormItemVO <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">FormAttributes</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 行内模式</span>
  inline<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// lable位置</span>
  labelPosition<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">"left"</span> <span class="token operator">|</span> <span class="token string">"right"</span> <span class="token operator">|</span> <span class="token string">"top"</span><span class="token punctuation">;</span>
  <span class="token comment">// label宽度</span>
  labelWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// 表单大小</span>
  size<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">""</span> <span class="token operator">|</span> <span class="token string">"large"</span> <span class="token operator">|</span> <span class="token string">"default"</span> <span class="token operator">|</span> <span class="token string">"small"</span><span class="token punctuation">;</span>
  <span class="token comment">// 栅格数 inline 为true时无效</span>
  col<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">// ------ 渲染组件所使用的参数 ------</span>
  <span class="token comment">// label 后缀</span>
  labelSuffix<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// label右边组件的宽度</span>
  componentWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PropsVO</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/** 表单数据 */</span>
  formColumns<span class="token operator">:</span> FormItemVO<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  model<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  rules<span class="token operator">?</span><span class="token operator">:</span> FormRules<span class="token punctuation">;</span>
  property<span class="token operator">?</span><span class="token operator">:</span> FormAttributes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>PropsVO<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"update:model"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useModel <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> props<span class="token punctuation">.</span>model<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 触发 update:page 事件，更新 limit 属性，从而更新 pageNo</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"update:model"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 栅格class</span>
<span class="token class-name"><span class="token keyword">const</span></span> useColClass <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> inline<span class="token punctuation">,</span> col <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>property <span class="token operator">||</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 行内模式 | 栅格数为空 跳出</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>inline <span class="token operator">||</span> <span class="token operator">!</span>col<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">grid items-start grid-gap-0-20 grid-cols-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>col<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 表单实例</span>
<span class="token keyword">const</span> <span class="token function-variable function">getForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> formRef<span class="token punctuation">.</span>value
<span class="token punctuation">}</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> getForm <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-scss">// 栅格相关scss代码
.grid {
  display: -ms-grid;
  display: grid;
}
.grid-gap-0-20 {
  gap: 0 20px;
}
.items-start {
  -webkit-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}
@for $i from 1 through 4 {
  .grid-cols-#{$i} {
    grid-template-columns: repeat($i, minmax(0, 1fr));
  }
}

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5ed633710f2bcc05f5fd11d1e68f2e6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BEVFusion（北大&amp;阿里）环境搭建教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/242e15c8b238b3f7baf699357e7349b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">记录Unity和C#遇到的坑(持续更新)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>