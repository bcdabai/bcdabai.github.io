<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>无限循环动画实现 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="无限循环动画实现" />
<meta property="og:description" content="先来个效果图
示例代码是先缩小移动，然后无限循环左右晃动，希望能够帮助到你，点个赞吧~
实现代码
&lt;image class=&#34;element1&#34; @load=&#34;element1_load&#34; :animation=&#34;animationData&#34; src=&#34;../../static/element1.png&#34; mode=&#34;widthFix&#34;&gt;&lt;/image&gt; JS
var animation, that, ani_start_time=600; data() { return { animationData: {}, animation: {}, } }, onLoad(option) { that = this }, methods: { element1_load() { var animation = wx.createAnimation({}) var data = { duration: 150, timingFunction: &#39;linear&#39;, delay: 1 } //设置循环动画 animation.translateX(80).scale(.34, .34).step({ duration: ani_start_time, delay: 10 }) this.animationData = animation.export() var next = true; setTimeout(() =&gt; { setInterval(() =&gt; { if (next) { animation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6e8ff354eb657d6d91702d67705059a0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-23T11:14:28+08:00" />
<meta property="article:modified_time" content="2021-03-23T11:14:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">无限循环动画实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>先来个效果图</p> 
<p><img alt="" height="167" src="https://images2.imgbox.com/21/19/jndhmqoU_o.gif" width="155"></p> 
<p>示例代码是先缩小移动，然后无限循环左右晃动，希望能够帮助到你，点个赞吧~</p> 
<p>实现代码</p> 
<pre><code>	&lt;image class="element1" @load="element1_load" :animation="animationData" src="../../static/element1.png" mode="widthFix"&gt;&lt;/image&gt;</code></pre> 
<p>JS</p> 
<pre><code>
	var animation, that, ani_start_time=600;

		data() {
			return {
				animationData: {},
				animation: {},
			}
		},
		onLoad(option) {
			that = this
		},
		methods: {
			element1_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				//设置循环动画
				animation.translateX(80).scale(.34, .34).step({
					duration: ani_start_time,
					delay: 10
				})
				this.animationData = animation.export()
				var next = true;
				setTimeout(() =&gt; {
					setInterval(() =&gt; {
						if (next) {
							animation.rotate(3).step(data)
						} else {
							animation.rotate(-3).step(data)
						}
						next = !next;
						this.animationData = animation.export()
					}, 150)
				}, ani_start_time)
			},
    }</code></pre> 
<p>看一下完整代码页面的效果图</p> 
<p> </p> 
<p><img alt="" height="663" src="https://images2.imgbox.com/17/60/GLVEJZJ6_o.gif" width="373"></p> 
<p>代码</p> 
<pre><code>&lt;template&gt;
	&lt;view&gt;
		&lt;!-- &lt;sliderBar max='90' min='20' @change='change'&gt;&lt;/sliderBar&gt; --&gt;

		&lt;image class="bg" mode="widthFix"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_bg.png"&gt;&lt;/image&gt;

		&lt;image class="title_img" @load="title_load" :animation="animationData_title_img"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_title.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="a_show" class="element1" @load="element1_load" :animation="animationData"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element1.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="b_show" class="element2" @load="element2_load" :animation="animationData2"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element2.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="c_show" class="element3" @load="element3_load" :animation="animationData3"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element3.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="d_show" class="element4" @load="element4_load" :animation="animationData4"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element4.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image @load="btn_load" :animation="animationData_btn"  class="btnImg" mode="widthFix" @click="nav"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_btn.png"&gt;&lt;/image&gt;
	&lt;/view&gt;

&lt;/template&gt;

&lt;script&gt;
	var that;
	var ani_start_time = 400,delay=300;
	import sliderBar from "@/components/sliderBar.vue"
	export default {
		components: {
			sliderBar
		},
		data() {
			return {
				a_show:false,
				b_show:false,
				c_show:false,
				d_show:false,
				animationData_btn:false,
				animationData: {},
				animationData2: {},
				animationData3: {},
				animationData4: {},
				anima_if: false,
				show_gou: false,
				animationData_title_img: {},
			}
		},
		onLoad(option) {
			that = this
			setTimeout(()=&gt;{
				this.a_show=true
			},500)
			setTimeout(()=&gt;{
				this.b_show=true
			},1000)
			setTimeout(()=&gt;{
				this.c_show=true
			},1500)
			setTimeout(()=&gt;{
				this.d_show=true
			},2000)
		},
		methods: {
			// 按钮加载完成
			btn_load() {
				console.log('按钮加载完成')
				setTimeout(()=&gt;{
					var animation_btn = uni.createAnimation({
						duration: ani_start_time*7.5,
						timingFunction: 'linear',
						delay: delay
					})
					animation_btn.translateY(-120).step()
					this.animationData_btn = animation_btn.export()
					
					var data = {
						duration: 450,
						timingFunction: 'linear',
						delay: 1
					}
					var next = true;
					setTimeout(() =&gt; {
						setInterval(() =&gt; {
							if (next) {
								animation_btn.scale(1.05).step(data)
							} else {
								animation_btn.scale(0.95).step(data)
							}
							next = !next;
							this.animationData_btn = animation_btn.export()
						}, 450)
					}, ani_start_time*7.5)
				},2300)
			},
			// 标题图片加载完成
			title_load() {
				console.log('标题图片加载完成')
				setTimeout(()=&gt;{
					var animation_title_img = uni.createAnimation({
						duration: ani_start_time,
						timingFunction: 'linear',
						delay: delay
					})
					animation_title_img.translateX(-510).step()
					animation_title_img.translateX(-500).step()
					animation_title_img.translateX(-505).step()
					this.animationData_title_img = animation_title_img.export()
					
				},2100)
			},
			element2_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				//设置循环动画
				animation.translateX(50).scale(.34, .34).step({
					duration: ani_start_time,
					delay: delay
				})
				var next = true;
				setTimeout(() =&gt; {
					setInterval(() =&gt; {
						if (next) {
							animation.rotate(3).step(data)
						} else {
							animation.rotate(-3).step(data)
						}
						next = !next;
						this.animationData2 = animation.export()
					}, 150)
				}, ani_start_time)
			},
			element3_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				//设置循环动画
				animation.translateX(-80).scale(.34, .34).step({
					duration: ani_start_time,
					delay: delay
				})
				var next = true;
				setTimeout(() =&gt; {
					setInterval(() =&gt; {
						if (next) {
							animation.rotate(3).step(data)
						} else {
							animation.rotate(-3).step(data)
						}
						next = !next;
						this.animationData3 = animation.export()
					}, 150)
				}, ani_start_time)
			},
			element4_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				//设置循环动画
				animation.translateX(-40).scale(.34, .34).step({
					duration: ani_start_time,
					delay: delay
				})
				var next = true;
				setTimeout(() =&gt; {
					setInterval(() =&gt; {
						if (next) {
							animation.rotate(3).step(data)
						} else {
							animation.rotate(-3).step(data)
						}
						next = !next;
						this.animationData4 = animation.export()
					}, 150)
				}, ani_start_time)
			},
			// 元素1加载完成
			element1_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				//设置循环动画
				this.animation = animation
				this.animation.translateX(80).scale(.34, .34).step({
					duration: ani_start_time,
					delay: delay
				})
				this.animationData = animation.export()
				var next = true;
				setTimeout(() =&gt; {
					setInterval(() =&gt; {
						if (next) {
							this.animation.rotate(3).step(data)
						} else {
							this.animation.rotate(-3).step(data)
						}
						next = !next;
						this.animationData = animation.export()
					}, 150)
				}, ani_start_time)
			},
			nav() {
				this.$request(this.$api.Baby.babyList).then(res =&gt; {
					console.log(res)
					if (res.data.baby_list.length &gt; 0) {
						var id = res.data.baby_list[0].id;
						let data = {
							baby_id: id
						}
						uni.setStorageSync('baby_id', id)
						this.$request(this.$api.Baby.babyGrowList, data).then(ress =&gt; {
							console.log('aaaaaaaaa', ress)
							if (ress.data.grow_info_list.length &gt; 0) {
								var baby_birthday = ress.data.baby_info.baby_birthday
								uni.setStorageSync('baby_birthday', baby_birthday)
								uni.navigateTo({
									url: '../babyGrowthRecord/babyGrowthRecord'
								})
							} else {
								uni.navigateTo({
									url: '../addGrowthRecord/addGrowthRecord'
								})
							}
						})
					} else {
						uni.reLaunch({
							url: '../addInfo/addInfo'
						})
					}
				})
			},
		}
	}
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;


	.bg {
		width: 100%;
	}

	img {
		display: block;
	}

	.element1 {
		position: absolute;
		top: 140rpx;
		right: 0;
		width: 420rpx;
		height: 420rpx;
		z-index: 2;
	}

	.element2 {
		position: absolute;
		top: 490rpx;
		right: 30rpx;
		width: 320rpx;
		height: 320rpx;
		z-index: 2;
	}

	.element3 {
		position: absolute;
		top: 740rpx;
		left: 180rpx;
		width: 280rpx;
		height: 280rpx;
		z-index: 2;
	}

	.element4 {
		position: absolute;
		top: 690rpx;
		left: 0;
		width: 240rpx;
		height: 240rpx;
		z-index: 2;
	}

	.title_img {
		position: absolute;
		top: 30rpx;
		right: -950rpx;
		width: 96%;
		z-index: 2;
	}

	.btnImg {
		position: absolute;
		bottom: -100rpx;
		left: 15%;
		width: 70%;
		height: 80rpx;
		z-index: 2;
		// background-color: red;

	}

	.bottomBlock {
		position: relative;

		.gou_block {
			position: absolute;
			bottom: 20rpx;
			width: 40%;
			left: 30%;
			height: 60rpx;

		}

		.home_gou {
			width: 46rpx;
			position: absolute;
			bottom: 20rpx;
			left: 11%;
		}
	}
&lt;/style&gt;
</code></pre> 
<p>第三版本</p> 
<p>效果图</p> 
<p><img alt="" height="665" src="https://images2.imgbox.com/b8/c1/YweHw7dR_o.gif" width="374"></p> 
<pre><code>&lt;template&gt;
	&lt;view&gt;
		&lt;!-- &lt;sliderBar max='90' min='20' @change='change'&gt;&lt;/sliderBar&gt; --&gt;
		&lt;image class="bg" mode="widthFix"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_bg1.png"&gt;&lt;/image&gt;

		&lt;image class="bg3" mode="widthFix"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_bg33.gif"&gt;&lt;/image&gt;
		&lt;image class="bg2" mode="widthFix"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_bg2.png"&gt;&lt;/image&gt;

		&lt;image class="title_img" @load="title_load" :animation="animationData_title_img"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_title.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="a_show" :class="!animationData?'anima':''" class="element1 " @load="element1_load" :animation="animationData"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element1.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="b_show" :class="!animationData2?'anima':''" class="element2 " @load="element2_load" :animation="animationData2"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element2.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="c_show" :class="!animationData3?'anima':''" class="element3 " @load="element3_load" :animation="animationData3"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element3.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="d_show" :class="!animationData4?'anima':''" class="element4 " @load="element4_load" :animation="animationData4"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/element4.png" mode="widthFix"&gt;
		&lt;/image&gt;

		&lt;image v-if="btn_show" class="btnImg anima" mode="widthFix" @click="nav"
			src="cloud://yun-6g7hq5oz4c910180.7975-yun-6g7hq5oz4c910180-1305191802/static/1_btn.png"&gt;&lt;/image&gt;
	&lt;/view&gt;

&lt;/template&gt;

&lt;script&gt;
	var that;
	var ani_start_time = 400,
		delay = 300;
	import sliderBar from "@/components/sliderBar.vue"
	export default {
		components: {
			sliderBar
		},
		data() {
			return {
				a_show: false,
				b_show: false,
				c_show: false,
				d_show: false,
				btn_show: false,
				animationData_btn: false,
				animationData: {},
				animationData2: {},
				animationData3: {},
				animationData4: {},
				anima_if: false,
				show_gou: false,
				animationData_title_img: {},
			}
		},
		onLoad(option) {
			that = this
			setTimeout(() =&gt; {
				this.a_show = true
			}, 500)
			setTimeout(() =&gt; {
				this.b_show = true
			}, 1000)
			setTimeout(() =&gt; {
				this.c_show = true
			}, 1500)
			setTimeout(() =&gt; {
				this.d_show = true
			}, 2000)
			setTimeout(() =&gt; {
				this.btn_show = true
			}, 4400)
		},
		methods: {
			// 元素1加载完成
			element1_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				animation.translateX(-510).step(data)
				this.animationData = animation.export()
				setTimeout(() =&gt; {
					animation.translateX(0).step(data)
					this.animationData = animation.export()
				}, 150)
				setTimeout(() =&gt; {				
					this.animationData=false
				}, 300)
			},
			// 标题图片加载完成
			title_load() {
				console.log('标题图片加载完成')
				setTimeout(() =&gt; {
					var animation_title_img = uni.createAnimation({
						duration: ani_start_time,
						timingFunction: 'linear',
						delay: delay
					})
					animation_title_img.translateX(-500).step()
					animation_title_img.translateX(-490).step()
					animation_title_img.translateX(-495).step()
					this.animationData_title_img = animation_title_img.export()

				}, 2000)
			},
			element2_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				animation.translateX(-510).step(data)
				this.animationData2 = animation.export()
				setTimeout(() =&gt; {
					animation.translateX(0).step(data)
					this.animationData2 = animation.export()
				}, 150)
				setTimeout(() =&gt; {				
					this.animationData2 =false
				}, 300)
			},
			element3_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 1
				}
				animation.translateX(-510).step(data)
				this.animationData3 = animation.export()
				setTimeout(() =&gt; {
					animation.translateX(0).step(data)
					this.animationData3 = animation.export()
				}, 150)
				setTimeout(() =&gt; {				
					this.animationData3=false
				}, 300)
			},
			element4_load() {
				var animation = wx.createAnimation({})
				var data = {
					duration: 150,
					timingFunction: 'linear',
					delay: 0
				}
				animation.translateX(-510).step(data)
				this.animationData4 = animation.export()
				setTimeout(() =&gt; {
					animation.translateX(0).step(data)
					this.animationData4 = animation.export()
				}, 150)
				setTimeout(() =&gt; {				
					this.animationData4=false
				}, 300)
			},
			nav() {
				this.$request(this.$api.Baby.babyList).then(res =&gt; {
					console.log(res)
					if (res.data.baby_list.length &gt; 0) {
						var id = res.data.baby_list[0].id;
						let data = {
							baby_id: id
						}
						uni.setStorageSync('baby_id', id)
						this.$request(this.$api.Baby.babyGrowList, data).then(ress =&gt; {
							console.log('aaaaaaaaa', ress)
							if (ress.data.grow_info_list.length &gt; 0) {
								var baby_birthday = ress.data.baby_info.baby_birthday
								uni.setStorageSync('baby_birthday', baby_birthday)
								uni.navigateTo({
									url: '../babyGrowthRecord/babyGrowthRecord'
								})
							} else {
								uni.navigateTo({
									url: '../addGrowthRecord/addGrowthRecord'
								})
							}
						})
					} else {
						uni.reLaunch({
							url: '../addInfo/addInfo'
						})
					}
				})
			},
		}
	}
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.bg {
		width: 100%;
		z-index: -1;
		position: absolute;
		top: 0;
	}

	.bg3 {
		width: 100%;
		z-index: 1;
		position: absolute;
		top: 240rpx;
	}

	.bg2 {
		width: 100%;
		z-index: 1;
		position: absolute;
		top: 310rpx;
	}

	img {
		display: block;
	}

	.element1 {
		position: absolute;
		top: 260rpx;
		right: 0;
		width: 120rpx;
		height: 120rpx;
		z-index: 2;
	}

	.element2 {
		position: absolute;
		top: 640rpx;
		right: 40rpx;
		width: 100rpx;
		height: 100rpx;
		z-index: 2;
	}

	.element3 {
		position: absolute;
		top: 820rpx;
		left: 100rpx;
		width: 110rpx;
		height: 110rpx;
		z-index: 2;
	}

	.element4 {
		position: absolute;
		top: 790rpx;
		left: 0;
		width: 90rpx;
		height: 90rpx;
		z-index: 2;
	}

	.title_img {
		position: absolute;
		top: 30rpx;
		right: -950rpx;
		width: 96%;
		z-index: 2;
	}

	.btnImg {
		position: absolute;
		top: 990rpx;
		left: 15%;
		width: 70%;
		height: 80rpx;
		z-index: 2;
		// background-color: red;

	}

	.anima {
		animation-name: likes; // 动画名称
		animation-direction: alternate; // 动画在奇数次（1、3、5...）正向播放，在偶数次（2、4、6...）反向播放。
		animation-timing-function: linear; // 动画执行方式，linear：匀速；ease：先慢再快后慢；ease-in：由慢速开始；ease-out：由慢速结束；ease-in-out：由慢速开始和结束；
		animation-delay: 0s; // 动画延迟时间
		animation-iteration-count: infinite; //  动画播放次数，infinite：一直播放
		animation-duration: 1s; // 动画完成时间
	}

	@keyframes likes {
		0% {
			transform: scale(1);
		}

		25% {
			transform: scale(0.9);
		}

		50% {
			transform: scale(0.85);
		}

		75% {
			transform: scale(0.9);
		}

		100% {
			transform: scale(1);
		}
	}

	.bottomBlock {
		position: relative;

		.gou_block {
			position: absolute;
			bottom: 20rpx;
			width: 40%;
			left: 30%;
			height: 60rpx;

		}

		.home_gou {
			width: 46rpx;
			position: absolute;
			bottom: 20rpx;
			left: 11%;
		}
	}
&lt;/style&gt;
</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/799d18ded5a79008c14112a6d5c7d88a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于C语言的机械按键模块化软件开发（2）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a74055a5dc8bef0729eade936d386b93/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mysql-8.0.11.,MySQL 8.0.11安装配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>