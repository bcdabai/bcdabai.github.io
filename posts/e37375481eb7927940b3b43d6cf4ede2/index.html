<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python的__del__()方法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python的__del__()方法" />
<meta property="og:description" content="创建对象后，Python解释器默认调用__init__()方法。当删除一个对象时，Python解释器也会默认调用一个方法，这个方法为__del__()方法。在Python中，对于开发者来说很少会直接销毁对象(如果需要，应该使用del关键字销毁)。Python的内存管理机制能够很好的胜任这份工作。也就是说,不管是手动调用del还是由Python自动回收都会触发__del__方法执行。 1. 创建多个对象的时候触发__del__方法 Python解释器释放实例对象的时候，调用该对象的__del__方法
各个对象被被Python解释器释放对象的时候调用__del__方法
class Person(object): def __init__(self,name): self.name = name def __del__(self): print(&#34;实例对象:%s&#34;%self.name,id(self)) print(&#34;python解释器开始回收%s对象了&#34; % self.name) print(&#34;类对象&#34;,id(Person)) zhangsan = Person(&#34;张三&#34;) print(&#34;实例对象张三:&#34;,id(zhangsan)) print(&#34;------------&#34;) lisi = Person(&#34;李四&#34;) print(&#34;实例对象李四:&#34;,id(lisi)) 执行效果
2. 使用del删除引用时的调用情况 当使用del 把内存的所有应用删除，立刻调用__del__方法
执行效果
创建对象后，Python解释器默认调用__init__()方法；
当删除一个对象时，python解释器也会默认调用一个方法，这个方法为__del__()方法
3. 创建多个实例对象并且删除 import time class Animal(object): # 初始化方法 # 创建完对象后会自动被调用 def __init__(self, name): print(&#39;__init__方法被调用&#39;) self.__name = name # 析构方法 # 当对象被删除时，会自动被调用 def __del__(self): print(&#34;__del__方法被调用&#34;) print(&#34;%s对象马上被干掉了...&#34;%self.__name) # 创建对象 dog = Animal(&#34;哈皮狗&#34;) # 删除对象 del dog cat = Animal(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e37375481eb7927940b3b43d6cf4ede2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-19T08:37:35+08:00" />
<meta property="article:modified_time" content="2018-05-19T08:37:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python的__del__()方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h5><span style="font-weight:normal;">创建对象后，Python解释器默认调用__init__()方法。当删除一个对象时，Python解释器也会默认调用一个方法，这个方法为__del__()方法。在Python中，对于开发者来说很少会直接销毁对象(如果需要，应该使用del关键字销毁)。Python的内存管理机制能够很好的胜任这份工作。也就是说,不管是手动调用del还是由Python自动回收都会触发__del__方法执行。</span></h5> 
<h3>1. 创建多个对象的时候触发__del__方法</h3> 
<p>Python解释器释放实例对象的时候，调用该对象的__del__方法</p> 
<p>各个对象被被Python解释器释放对象的时候调用__del__方法</p> 
<pre style="background:#C0DBC5;"><strong><span style="color:#000080;background:#C0DBC5;">class </span></strong><span style="color:#000000;background:#C0DBC5;">Person(</span><span style="color:#000080;background:#C0DBC5;">object</span><span style="color:#000000;background:#C0DBC5;">):
    </span><strong><span style="color:#000080;background:#C0DBC5;">def </span></strong><span style="color:#B200B2;background:#C0DBC5;">__init__</span><span style="color:#000000;background:#C0DBC5;">(</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">,name):
  </span>      <span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">.name = name
    </span><strong><span style="color:#000080;background:#C0DBC5;">def </span></strong><span style="color:#B200B2;background:#C0DBC5;">__del__</span><span style="color:#000000;background:#C0DBC5;">(</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">):
        </span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">实例对象</span><span style="color:#008080;background:#C0DBC5;">:%s"</span></strong><span style="color:#000000;background:#C0DBC5;">%</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">.name,</span><span style="color:#000080;background:#C0DBC5;">id</span><span style="color:#000000;background:#C0DBC5;">(</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">))
        </span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"python</span><span style="color:#008080;background:#C0DBC5;">解释器开始回收</span><span style="color:#008080;background:#C0DBC5;">%s</span><span style="color:#008080;background:#C0DBC5;">对象了</span><span style="color:#008080;background:#C0DBC5;">" </span></strong><span style="color:#000000;background:#C0DBC5;">% </span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">.name)

</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">类对象</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">,</span><span style="color:#000080;background:#C0DBC5;">id</span><span style="color:#000000;background:#C0DBC5;">(Person))
zhangsan  </span>= Person(<strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">张三</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">实例对象张三</span><span style="color:#008080;background:#C0DBC5;">:"</span></strong><span style="color:#000000;background:#C0DBC5;">,</span><span style="color:#000080;background:#C0DBC5;">id</span><span style="color:#000000;background:#C0DBC5;">(zhangsan))
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"------------"</span></strong><span style="color:#000000;background:#C0DBC5;">)
lisi  </span>= Person(<strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">李四</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">实例对象李四</span><span style="color:#008080;background:#C0DBC5;">:"</span></strong><span style="color:#000000;background:#C0DBC5;">,</span><span style="color:#000080;background:#C0DBC5;">id</span><span style="color:#000000;background:#C0DBC5;">(lisi))</span></pre> 
<p>执行效果</p> 
<p><img src="https://images2.imgbox.com/ca/32/bJWMOqpq_o.png" alt=""></p> 
<p> </p> 
<h3>2. 使用del删除引用时的调用情况</h3> 
<p>当使用del 把内存的所有应用删除，立刻调用__del__方法</p> 
<p><img src="https://images2.imgbox.com/0a/a0/HHI37rQx_o.png" alt=""></p> 
<p>执行效果</p> 
<p><img src="https://images2.imgbox.com/c1/2a/WZBlBGr8_o.png" alt=""></p> 
<p> 创建对象后，Python解释器默认调用__init__()方法；</p> 
<p>当删除一个对象时，python解释器也会默认调用一个方法，这个方法为__del__()方法</p> 
<h3>3. 创建多个实例对象并且删除</h3> 
<pre style="background:#C0DBC5;"><span style="color:#000000;background:#C0DBC5;">
</span><strong><span style="color:#000080;background:#C0DBC5;">import </span></strong><span style="color:#000000;background:#C0DBC5;">time
</span><strong><span style="color:#000080;background:#C0DBC5;">class </span></strong><span style="color:#000000;background:#C0DBC5;">Animal(</span><span style="color:#000080;background:#C0DBC5;">object</span><span style="color:#000000;background:#C0DBC5;">):

    </span><em><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">初始化方法
    </span><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">创建完对象后会自动被调用
    </span></em><strong><span style="color:#000080;background:#C0DBC5;">def </span></strong><span style="color:#B200B2;background:#C0DBC5;">__init__</span><span style="color:#000000;background:#C0DBC5;">(</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">, name):
        </span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">'__init__</span><span style="color:#008080;background:#C0DBC5;">方法被调用</span><span style="color:#008080;background:#C0DBC5;">'</span></strong><span style="color:#000000;background:#C0DBC5;">)
        </span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">.__name = name
    </span><em><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">析构方法
    </span><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">当对象被删除时，会自动被调用
    </span></em><strong><span style="color:#000080;background:#C0DBC5;">def </span></strong><span style="color:#B200B2;background:#C0DBC5;">__del__</span><span style="color:#000000;background:#C0DBC5;">(</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">):
        </span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"__del__</span><span style="color:#008080;background:#C0DBC5;">方法被调用</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
        </span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"%s</span><span style="color:#008080;background:#C0DBC5;">对象马上被干掉了</span><span style="color:#008080;background:#C0DBC5;">..."</span></strong><span style="color:#000000;background:#C0DBC5;">%</span><span style="color:#94558D;background:#C0DBC5;">self</span><span style="color:#000000;background:#C0DBC5;">.__name)
</span><em><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">创建对象
</span></em><span style="color:#000000;background:#C0DBC5;">dog = Animal(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">哈皮狗</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><em><span style="color:#808080;background:#C0DBC5;"># </span><span style="color:#808080;background:#C0DBC5;">删除对象
</span></em><strong><span style="color:#000080;background:#C0DBC5;">del </span></strong><span style="color:#000000;background:#C0DBC5;">dog
cat = Animal(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">波斯猫</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
cat2 = cat
cat3 = cat
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"---</span><span style="color:#008080;background:#C0DBC5;">马上 删除</span><span style="color:#008080;background:#C0DBC5;">cat</span><span style="color:#008080;background:#C0DBC5;">对象</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><strong><span style="color:#000080;background:#C0DBC5;">del </span></strong><span style="color:#000000;background:#C0DBC5;">cat
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"---</span><span style="color:#008080;background:#C0DBC5;">马上 删除</span><span style="color:#008080;background:#C0DBC5;">cat2</span><span style="color:#008080;background:#C0DBC5;">对象</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><strong><span style="color:#000080;background:#C0DBC5;">del </span></strong><span style="color:#000000;background:#C0DBC5;">cat2
</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"---</span><span style="color:#008080;background:#C0DBC5;">马上 删除</span><span style="color:#008080;background:#C0DBC5;">cat3</span><span style="color:#008080;background:#C0DBC5;">对象</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
</span><strong><span style="color:#000080;background:#C0DBC5;">del </span></strong><span style="color:#000000;background:#C0DBC5;">cat3

</span><span style="color:#000080;background:#C0DBC5;">print</span><span style="color:#000000;background:#C0DBC5;">(</span><strong><span style="color:#008080;background:#C0DBC5;">"</span><span style="color:#008080;background:#C0DBC5;">程序</span><span style="color:#008080;background:#C0DBC5;">2</span><span style="color:#008080;background:#C0DBC5;">秒钟后结束</span><span style="color:#008080;background:#C0DBC5;">"</span></strong><span style="color:#000000;background:#C0DBC5;">)
time.sleep(</span><span style="color:#0000FF;background:#C0DBC5;">2</span><span style="color:#000000;background:#C0DBC5;">)</span></pre> 
<p><span style="color:#333333;">结果:</span></p> 
<p><img src="https://images2.imgbox.com/cb/3b/RKviB2zK_o.png" alt=""></p> 
<h3>4. 测量对应引用个数</h3> 
<p><img src="https://images2.imgbox.com/30/16/PYEhiH8c_o.png" alt=""></p> 
<h3>5. 小结</h3> 
<p>当有1个变量保存了对象的引用时，此对象的引用计数就会加1。</p> 
<p>当使用del删除变量指向的对象时，如果对象的引用计数不会1，比如3，那么此时只会让这个引用计数减1，即变为2，当再次调用del时，变为1，如果再调用1次del，此时会真的把对象进行删除</p> 
<h4> 注意</h4> 
<p><strong style="background-color:rgb(255,255,255);"><span style="color:#000000;">del xxx </span><span style="color:#000000;">不会主动调用__del__方法，只有引用计数 == 0时</span>，__del__()才会被执行，并且定义了__del_()的实例无法被Python的循环垃圾收集器收集，所以尽量不要自定义__del__()<span style="color:#000000;">。一般情况下，__del__() </span>不会破坏垃圾处理器。</strong></p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/62ad707f117ebe7eeb8162a6bde267ae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Bootstrap3 datetimepicker控件之smalot的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23acd0d9710fca4c5918885ebcf51ce8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">git pull失败 error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>