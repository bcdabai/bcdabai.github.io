<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>qmake 手册：qmake 入门 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="qmake 手册：qmake 入门" />
<meta property="og:description" content="文章目录 qmake 入门从简单开始使应用程序可调试添加平台特定的源文件如果文件不存在则停止 qmake检查多个条件 官方链接：https://doc.qt.io/qt-6/qmake-tutorial.html
qmake 入门 本教程教您 qmake 的基础知识。本手册中的其他主题包含有关使用 qmake 的更多详细信息。
从简单开始 假设您刚刚完成了应用程序的基本实现，并且创建了以下文件：
hello.cpphello.hmain.cpp 您将在 Qt 发行版的 examples/qmake/tutorial 目录中找到这些文件。关于应用程序的设置，您唯一知道的另一件事是它是用 Qt 编写的。首先，使用您最喜欢的纯文本编辑器在 examples/qmake/tutorial 目录中创建一个名为 hello.pro 的文件。 您需要做的第一件事是添加告诉 qmake 关于您的开发项目的源文件和头文件的行。
我们将首先将源文件添加到项目文件中。为此，您需要使用 SOURCES 变量。只需开始一个新行SOURCES &#43;=并将 hello.cpp 放在它之后。像下面这样：
SOURCES &#43;= hello.cpp 我们对项目中的每个源文件重复此操作，直到得到以下内容：
SOURCES &#43;= hello.cpp SOURCES &#43;= main.cpp 如果您更喜欢使用类似 Make 的语法，那么您可以一次性使用换行符转义所有文件，如下所示：
SOURCES = hello.cpp \ main.cpp 现在源文件已在项目文件中列出，必须添加头文件。它们的添加方式与源文件完全相同，只是我们使用的变量名称是 HEADERS。
完成此操作后，您的项目文件应如下所示：
HEADERS &#43;= hello.h SOURCES &#43;= hello.cpp SOURCES &#43;= main.cpp 目标名称是自动设置的。它与项目文件名相同，但带有适合平台的后缀。例如，如果项目文件被叫作hello.pro，则目标名称在 Windows 上为 hello.exe，在 Unix 上为 hello。如果要使用不同的名称，可以在项目文件中设置：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4c7956c2c951414fcfd639de917f3da6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-12T22:48:01+08:00" />
<meta property="article:modified_time" content="2022-08-12T22:48:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">qmake 手册：qmake 入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#qmake__4" rel="nofollow">qmake 入门</a></li><li><ul><li><a href="#_7" rel="nofollow">从简单开始</a></li><li><a href="#_61" rel="nofollow">使应用程序可调试</a></li><li><a href="#_73" rel="nofollow">添加平台特定的源文件</a></li><li><a href="#_qmake_99" rel="nofollow">如果文件不存在则停止 qmake</a></li><li><a href="#_124" rel="nofollow">检查多个条件</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>官方链接：<a href="https://doc.qt.io/qt-6/qmake-tutorial.html" rel="nofollow">https://doc.qt.io/qt-6/qmake-tutorial.html</a></p> 
<h2><a id="qmake__4"></a>qmake 入门</h2> 
<p>本教程教您 qmake 的基础知识。本手册中的其他主题包含有关使用 qmake 的更多详细信息。</p> 
<h3><a id="_7"></a>从简单开始</h3> 
<p>假设您刚刚完成了应用程序的基本实现，并且创建了以下文件：</p> 
<ul><li>hello.cpp</li><li>hello.h</li><li>main.cpp</li></ul> 
<p>您将在 Qt 发行版的 examples/qmake/tutorial 目录中找到这些文件。关于应用程序的设置，您唯一知道的另一件事是它是用 Qt 编写的。首先，使用您最喜欢的纯文本编辑器在 examples/qmake/tutorial 目录中创建一个名为 hello.pro 的文件。 您需要做的第一件事是添加告诉 qmake 关于您的开发项目的源文件和头文件的行。</p> 
<p>我们将首先将源文件添加到项目文件中。为此，您需要使用 <a href="https://doc.qt.io/qt-6/qmake-variable-reference.html#sources" rel="nofollow">SOURCES</a> 变量。只需开始一个新行SOURCES +=并将 hello.cpp 放在它之后。像下面这样：</p> 
<pre><code>SOURCES += hello.cpp
</code></pre> 
<p>我们对项目中的每个源文件重复此操作，直到得到以下内容：</p> 
<pre><code>SOURCES += hello.cpp
SOURCES += main.cpp
</code></pre> 
<p>如果您更喜欢使用类似 Make 的语法，那么您可以一次性使用换行符转义所有文件，如下所示：</p> 
<pre><code>SOURCES = hello.cpp \
          main.cpp
</code></pre> 
<p>现在源文件已在项目文件中列出，必须添加头文件。它们的添加方式与源文件完全相同，只是我们使用的变量名称是 <a href="https://doc.qt.io/qt-6/qmake-variable-reference.html#headers" rel="nofollow">HEADERS</a>。</p> 
<p>完成此操作后，您的项目文件应如下所示：</p> 
<pre><code>HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
</code></pre> 
<p>目标名称是自动设置的。它与项目文件名相同，但带有适合平台的后缀。例如，如果项目文件被叫作hello.pro，则目标名称在 Windows 上为 hello.exe，在 Unix 上为 hello。如果要使用不同的名称，可以在项目文件中设置：</p> 
<pre><code>TARGET = helloworld
</code></pre> 
<p>完成的项目文件应如下所示：</p> 
<pre><code>HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
</code></pre> 
<p>您现在可以使用 qmake 为您的应用程序生成 Makefile。在命令行的项目目录中，键入以下内容：</p> 
<pre><code class="prism language-shell">qmake -o Makefile hello.pro
</code></pre> 
<blockquote> 
 <p>注意：如果您通过包管理器安装 Qt，则二进制文件可能是 qmake6.</p> 
</blockquote> 
<p>然后键入 make 或 nmake 取决于您使用的编译器。</p> 
<p>对于 Visual Studio 用户，qmake 还可以生成 Visual Studio 项目文件。例如：</p> 
<pre><code class="prism language-shell">qmake -tp vc hello.pro
</code></pre> 
<h3><a id="_61"></a>使应用程序可调试</h3> 
<p>应用程序的发布版本不包含任何调试符号或其他调试信息。在开发过程中，生成具有相关信息的应用程序的调试版本很有用。这很容易通过添加 debug 到项目文件中的 <a href="https://doc.qt.io/qt-6/qmake-variable-reference.html#config" rel="nofollow">CONFIG</a> 变量来实现。</p> 
<p>例如：</p> 
<pre><code>CONFIG += debug
HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
</code></pre> 
<p>像以前一样使用 qmake 生成 Makefile。现在，在调试环境中运行应用程序时，您将获得有关应用程序的有用信息。</p> 
<h3><a id="_73"></a>添加平台特定的源文件</h3> 
<p>经过几个小时的编码，您可能已经开始着手应用程序的特定于平台的部分，并决定将平台相关的代码分开。因此，您现在有两个新文件要包含到您的项目文件中：hellowin.cpp 和 hellounix.cpp. 我们不能只将这些添加到 SOURCES 变量中，因为这会将两个文件都放在 Makefile 中。因此，我们需要在这里做的是使用一个作用域，该作用域将根据我们正在构建的平台进行处理。</p> 
<p>为 Windows 添加平台相关文件的简单作用域如下所示：</p> 
<pre><code>win32 {
    SOURCES += hellowin.cpp
}
</code></pre> 
<p>在为 Windows 构建时，qmake 添加 hellowin.cpp 到源文件列表中。在为任何其他平台构建时，qmake 会简单地忽略它。现在剩下要做的就是为 Unix 特定文件创建一个作用域。</p> 
<p>完成后，您的项目文件应如下所示：</p> 
<pre><code>CONFIG += debug
HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
win32 {
    SOURCES += hellowin.cpp
}
unix {
    SOURCES += hellounix.cpp
}
</code></pre> 
<p>像以前一样使用 qmake 生成 Makefile。</p> 
<h3><a id="_qmake_99"></a>如果文件不存在则停止 qmake</h3> 
<p>如果某个文件不存在，您可能不想创建 Makefile。我们可以使用 <a href="https://doc.qt.io/qt-6/qmake-test-function-reference.html#exists-filename" rel="nofollow">exists()</a> 函数检查文件是否存在。我们可以使用 <a href="https://doc.qt.io/qt-6/qmake-test-function-reference.html#error-string" rel="nofollow">error()</a> 函数停止 qmake 的处理。这与作用域的工作方式相同。只需将作用域条件替换为函数即可。检查名为 main.cpp 的文件如下所示：</p> 
<pre><code>!exists( main.cpp ) {
    error( "No main.cpp file found" )
}
</code></pre> 
<p>该 ! 符号用于否定测试。也就是说，如果文件存在 exists( main.cpp ) 为真，如果文件不存在 !exists( main.cpp ) 则为真。</p> 
<pre><code>CONFIG += debug
HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
win32 {
    SOURCES += hellowin.cpp
}
unix {
    SOURCES += hellounix.cpp
}
!exists( main.cpp ) {
    error( "No main.cpp file found" )
}
</code></pre> 
<p>像以前一样使用 qmake 生成一个 makefile。如果您临时重命名 main.cpp，您将看到该消息并且 qmake 将停止处理。</p> 
<h3><a id="_124"></a>检查多个条件</h3> 
<p>假设您使用 Windows，并且希望能够在命令行上运行应用程序时看到 qDebug() 输出的语句。要查看输出，您必须使用适当的控制台设置构建应用程序。我们可以很容易地将 console 加在 CONFIG 行上包含在 Windows 上的 Makefile 中。但是，假设我们只想在 Windows 上运行并且 debug 已经在 CONFIG 上时添加该 CONFIG 行。这需要使用两个嵌套作用域。首先创建一个作用域，然后在其中创建另一个。将要处理的设置放在第二个作用域内，如下所示：</p> 
<pre><code>win32 {
    debug {
        CONFIG += console
    }
}
</code></pre> 
<p>嵌套作用域可以使用冒号连接在一起，因此最终的项目文件如下所示：</p> 
<pre><code>CONFIG += debug
HEADERS += hello.h
SOURCES += hello.cpp
SOURCES += main.cpp
win32 {
    SOURCES += hellowin.cpp
}
unix {
    SOURCES += hellounix.cpp
}
!exists( main.cpp ) {
    error( "No main.cpp file found" )
}
win32:debug {
    CONFIG += console
}
</code></pre> 
<p>您现在已经完成了 qmake 的教程，并准备为您的开发项目编写项目文件吧。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0bb6e549949615f25cd5c54514979b00/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ubantu运行skynet初体验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6ad35c5a137833d435bc53cfc8757278/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">WiFi知识点大总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>