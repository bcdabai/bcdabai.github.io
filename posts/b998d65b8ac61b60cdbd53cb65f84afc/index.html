<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于图片文件旋转JPEG与EXIF信息 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于图片文件旋转JPEG与EXIF信息" />
<meta property="og:description" content="关于图片文件旋转JPEG与EXIF信息
比如某相机拍摄出来的相片，文件分辨率比如宽度7360像素，高度4912像素
十进制表示为 DEC : 7360 * 4912
十六进制则为 HEX : 1CC0 * 1330
默认情况下，会在00000030:07标志位（不同设备或程序生成的图片的标志位会有所不同，由EXIF内容而定）上存放01值表示原始文件的位置，无论这张图是横着拍的还是坚着拍的，初始值为01
那么图片，在Windows 10操作系统下，通过操作系统自带的“相片”程序进行旋转时，仅仅对此标志位进行改变，而图片的内容不会做任何改变，包括旋转后的宽度与高度也不会做改变，包括JPEG和EXIF中的宽度与高度信息。
1、向右旋转90度，标志位为06
2、再向右旋转90度，即旋转了180度，标志位为03
3、再向右旋转90度，即旋转了270度，标志位为08
4、再向右旋转90度，即旋转了360度，回到原图，标志位还原为01
然而，在Windows 10进行旋转的图片，如果在Windows XP或Windows 7上面通过“相片”进行查看仍然显示为未旋转前的图片，因为不识别这个标志位。
资源管理器在显示分辨率那一栏中也自然是无法识别，低版本的程序无法识别高版本的标志位导致的问题。
于是，在处理旋转过后的图片，通过JDK 8.0版本去读取javax.imageio.ImageIO.read(new File(fileName)).getWidth/getHeight宽度和高度时，也是无法获知到底是不是旋转过的。
包括其他比如HypeSnap 5.6.0版本的一些旧程序，在打开时都会由于不支持这种方式而导致仍是未旋转的问题。
但是，如果是在Windows XP或Windows 7当中，对图片文件进行旋转时，文件的内容做了全面的变化。旋转后的宽度与高度也会改变并保存到EXIF中，图片内容的改变。这样旋转后的文件在其他操作系统上进行打开时都是正确的旋转后的结果。
解法：比如新版本的HypeSnap 8.16.17版本已经可以支持这个特殊的标志位，能够正确识别并展现。
试过JDK 8.0/9.0/10.0均无法识别，目前最新版本的OpenJDK 13.0版本也没能识别出来旋转后的分辨率。
关于JPEG/EXIF文件格式说明
https://www.media.mit.edu/pia/Research/deepview/exif.html
Description of Exif file format
0x0112 Orientation unsigned short 1 The orientation of the camera relative to the scene, when the image was captured. The start point of stored data is, &#39;1&#39; means upper left, &#39;3&#39; lower right, &#39;6&#39; upper right, &#39;8&#39; lower left, &#39;9&#39; undefined." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b998d65b8ac61b60cdbd53cb65f84afc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-30T21:43:12+08:00" />
<meta property="article:modified_time" content="2019-10-30T21:43:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于图片文件旋转JPEG与EXIF信息</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>关于图片文件旋转JPEG与EXIF信息</p> 
<p>比如某相机拍摄出来的相片，文件分辨率比如宽度7360像素，高度4912像素</p> 
<p>十进制表示为 DEC : 7360 * 4912<br> 十六进制则为 HEX : 1CC0 * 1330</p> 
<p>默认情况下，会在00000030:07标志位（不同设备或程序生成的图片的标志位会有所不同，由EXIF内容而定）上存放01值表示原始文件的位置，无论这张图是横着拍的还是坚着拍的，初始值为01<br> 那么图片，在Windows 10操作系统下，通过操作系统自带的“相片”程序进行旋转时，仅仅对此标志位进行改变，而图片的内容不会做任何改变，包括旋转后的宽度与高度也不会做改变，包括JPEG和EXIF中的宽度与高度信息。</p> 
<p>1、向右旋转90度，标志位为06<br> 2、再向右旋转90度，即旋转了180度，标志位为03<br> 3、再向右旋转90度，即旋转了270度，标志位为08<br> 4、再向右旋转90度，即旋转了360度，回到原图，标志位还原为01</p> 
<p>然而，在Windows 10进行旋转的图片，如果在Windows XP或Windows 7上面通过“相片”进行查看仍然显示为未旋转前的图片，因为不识别这个标志位。<br> 资源管理器在显示分辨率那一栏中也自然是无法识别，低版本的程序无法识别高版本的标志位导致的问题。</p> 
<p>于是，在处理旋转过后的图片，通过JDK 8.0版本去读取javax.imageio.ImageIO.read(new File(fileName)).getWidth/getHeight宽度和高度时，也是无法获知到底是不是旋转过的。</p> 
<p>包括其他比如HypeSnap 5.6.0版本的一些旧程序，在打开时都会由于不支持这种方式而导致仍是未旋转的问题。</p> 
<p><br> 但是，如果是在Windows XP或Windows 7当中，对图片文件进行旋转时，文件的内容做了全面的变化。旋转后的宽度与高度也会改变并保存到EXIF中，图片内容的改变。这样旋转后的文件在其他操作系统上进行打开时都是正确的旋转后的结果。</p> 
<p><br> 解法：比如新版本的HypeSnap 8.16.17版本已经可以支持这个特殊的标志位，能够正确识别并展现。</p> 
<p>试过JDK 8.0/9.0/10.0均无法识别，目前最新版本的OpenJDK 13.0版本也没能识别出来旋转后的分辨率。</p> 
<p>关于JPEG/EXIF文件格式说明<br><a href="https://www.media.mit.edu/pia/Research/deepview/exif.html" rel="nofollow">https://www.media.mit.edu/pia/Research/deepview/exif.html</a><br> Description of Exif file format</p> 
<p>0x0112    Orientation    unsigned short    1    The orientation of the camera relative to the scene, when the image was captured. The start point of stored data is, '1' means upper left, '3' lower right, '6' upper right, '8' lower left, '9' undefined.</p> 
<p>看规范文件的时间：<br> rev. 1.1 Dec.19,1999<br> rev. 1.0 May.28,1999<br> 这是大家都偷懒么？</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42b9cffe7cd270b227f76515184d0076/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Wireshark 无法找到接口解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/674b5b771170669f4b6c51b5b8bee3e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Fatal NI connect error 12547, connecting to:  (LOCAL=NO)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>