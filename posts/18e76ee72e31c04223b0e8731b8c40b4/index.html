<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>手机浏览器下怎么打开app应用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="手机浏览器下怎么打开app应用" />
<meta property="og:description" content="今天在做前端输出的时候，需要和app的做些对接工作。就是在手机浏览器中下载某app时，能判断该用户是否安装了该应用。如果安装了该应用，就直接打开该应用；如果没有安装该应用，就下载该应用。那么下面就对在浏览器中，用js判断某用户是否安装了该应用，并判断是否打开该应用做个简单的介绍。
那么，怎么判断某用户是否安装了某应用呢？
在这里，先写段html代码，如下：
&lt;!doctype html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&#34;utf-8&#34;&gt; &lt;/head&gt; &lt;body&gt; &lt;a href=&#34;某app下载链接&#34; class=&#34;down_app&#34; onclick=&#34;isInstalled()&#34;&gt;&lt;/a&gt; &lt;/body&gt; &lt;/html&gt; 判断手机端是否安装某应用，并打开该应用的js代码如下：
function isInstalled(){ var the_href=$(&#34;.down_app&#34;).attr(&#34;href&#34;);//获得下载链接 window.location.href=&#34;apps custom url schemes&#34;;//打开某手机上的某个app应用 setTimeout(function(){ window.location.href=the_href;//如果超时就跳转到app下载页 },500); } 下面对这段js代码做一个简单的解析：首先试着打开手机端某个app的本地协议；如果超时就转到app下载页，下载该app。
说到这里，有人就要问了，这个本地协议又是怎么建立的呢？好了，下面也就这个做个简单的介绍：
其实就是在app中将http协议转换为本地协议，具体怎么转换，不在本讨论范围。但需要在app里面对配置文件做一下设置（一般是在manifest.xml文件的activity的intent filter里面）：
&lt;span&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.VIEW&#34; /&gt; &lt;category android:name=&#34;android.intent.category.DEFAULT&#34; /&gt; &lt;category android:name=&#34;android.intent.category.BROWSABLE&#34; /&gt; &lt;data android:scheme=&#34;**&#34; android:host=&#34;**.**&#34; android:pathPrefix=&#34;/**&#34;&gt; &lt;/data&gt; &lt;/intent-filter&gt; &lt;/span&gt; apps custom url schemes是什么呢？
其实就是你与app约定的一个协议URL，在IOS客户端或者Android客户端中可以设置一个URL Scheme。例如，设置URL Scheme：app，然后其他的程序就可以通过“URLString=app://”调用该应用。还可以传参数，如：app://reaction/?uid=1
以上介绍了怎么创建该本地协议及调用该本地协议的方法。但这里还有个关键就是怎么判断用户是否安装了该app呢？原理如下：
在手机浏览器中用js代码请求该协议，如果在500ms内，如果有应用程序能解析这个协议，那么就能打开该应用；如果超过500ms就跳转到app下载页。
但最近也发现了一些问题，在iPhone、华为、小米及酷派等手机下，都能正确打开app。但当用户手机没有安装app时，iPhone、华为等手机可以打开app应用，小米就打不开。页面会显示所请求的地址有错等，没能跳转到app下载页面。在网上找了些资料，有以下两种解决方法：
1.将setTimeOut的时间缩短，我这里设置的是500ms，觉得时间有点长了，那么我就设置30ms；
2.另外，iOS下将连接协议改成itms://itunes.apple.com/cn/app可以避免。（至于Android能不能这么搞，还待测试后才知）。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/18e76ee72e31c04223b0e8731b8c40b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-07-13T22:24:07+08:00" />
<meta property="article:modified_time" content="2015-07-13T22:24:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">手机浏览器下怎么打开app应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>      今天在做前端输出的时候，需要和app的做些对接工作。就是在手机浏览器中下载某app时，能判断该用户是否安装了该应用。如果安装了该应用，就直接打开该应用；如果没有安装该应用，就下载该应用。那么下面就对在浏览器中，用js判断某用户是否安装了该应用，并判断是否打开该应用做个简单的介绍。</p> 
<p>      那么，怎么判断某用户是否安装了某应用呢？</p> 
<p>      在这里，先写段html代码，如下：</p> 
<pre class="has"><code class="language-html">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset="utf-8"&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;a href="某app下载链接" class="down_app" onclick="isInstalled()"&gt;&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>      判断手机端是否安装某应用，并打开该应用的js代码如下：</p> 
<pre class="has"><code class="language-js">	function isInstalled(){
		var the_href=$(".down_app").attr("href");//获得下载链接
		window.location.href="apps custom url schemes";//打开某手机上的某个app应用
		setTimeout(function(){
			window.location.href=the_href;//如果超时就跳转到app下载页
		},500);
	}</code></pre> 
<p>      下面对这段js代码做一个简单的解析：首先试着打开手机端某个app的本地协议；如果超时就转到app下载页，下载该app。</p> 
<p>      说到这里，有人就要问了，这个本地协议又是怎么建立的呢？好了，下面也就这个做个简单的介绍：</p> 
<p>      其实就是在app中将http协议转换为本地协议，具体怎么转换，不在本讨论范围。但需要在app里面对配置文件做一下设置（一般是在manifest.xml文件的activity的intent filter里面）：</p> 
<pre class="has"><code class="language-xml">&lt;span&gt;
&lt;intent-filter&gt;  
               &lt;action android:name="android.intent.action.VIEW" /&gt;  
               &lt;category android:name="android.intent.category.DEFAULT" /&gt;  
               &lt;category android:name="android.intent.category.BROWSABLE" /&gt;  
               &lt;data   
            android:scheme="**"   
            android:host="**.**"   
            android:pathPrefix="/**"&gt;  
         &lt;/data&gt;  
&lt;/intent-filter&gt;
&lt;/span&gt;</code></pre> 
<p>      <strong>apps custom url schemes</strong>是什么呢？</p> 
<p>      其实就是你与app约定的一个协议URL，在IOS客户端或者Android客户端中可以设置一个URL Scheme。例如，设置URL Scheme：app，然后其他的程序就可以通过“<strong>URLString=app://</strong>”调用该应用。还可以传参数，如：app://reaction/?uid=1</p> 
<p>      以上介绍了怎么创建该本地协议及调用该本地协议的方法。但这里还有个关键就是怎么判断用户是否安装了该app呢？原理如下：</p> 
<p>      <strong>在手机浏览器中用js代码请求该协议，如果在500ms内，如果有应用程序能解析这个协议，那么就能打开该应用；如果超过500ms就跳转到app下载页。</strong></p> 
<p><strong>      但最近也发现了一些问题，在iPhone、华为、小米及酷派等手机下，都能正确打开app。但当用户手机没有安装app时，iPhone、华为等手机可以打开app应用，小米就打不开。页面会显示所请求的地址有错等，没能跳转到app下载页面。在网上找了些资料，有以下两种解决方法：</strong></p> 
<p><strong>1.将setTimeOut的时间缩短，我这里设置的是500ms，觉得时间有点长了，那么我就设置30ms；</strong></p> 
<p><strong>2.另外，iOS下将连接协议改成itms://itunes.apple.com/cn/app可以避免。（至于Android能不能这么搞，还待测试后才知）。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1dc7a95892a088b9550759da79e8907b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">leetCode 39.Combination Sum(组合总和) 解题思路和方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cab759e15df5d11b8f691b7dc7f5f7e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">离职员工揭露腾讯微博之死：因为No zuo所以Die</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>