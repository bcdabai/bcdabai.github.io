<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu20.04 nerf开山之作 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu20.04 nerf开山之作" />
<meta property="og:description" content="源码
GitHub - yenchenlin/nerf-pytorch: A PyTorch implementation of NeRF (Neural Radiance Fields) that reproduces the results.
代码的相关解读
NeRF代码解读-相机参数与坐标系变换 - 知乎
原文题目：NeRF: Representing Scenes as Neural Radiance Fields for View Synthesis
git：
git clone https://github.com/yenchenlin/nerf-pytorch.git2 cd nerf-pytorch 环境配置(建议先跳到下面miniconda，不用conda的直接去github)
#########################################################################
在终端输入
pip install -r requirements.txt
（注意这个requirements.txt最好是用tab补全，我直接复制执行会报错）
pip的时候会经常timeout
可参考
Python下载库超时Connection to files.pythonhosted.org timed out问题解决（换源）-CSDN博客
总结就是
pip命令&#43; -i &#43;镜像地址。（可独立安装requirements.txt各自的库）例如 pip install numpy -i https://mirrors.aliyun.com/pypi/simple/
正常用阿里云就可以，有条件的可以挂tizi
正常后面会有cuda版本和gpu显卡的问题
这里提前处理
首先点开自己的软件与更新，选择附加驱动里自己适合的nvidia驱动，我的535或者525都可以，那我就装低版本的525。因为后面cuda的版本是跟这个相对应，我选择535后要选择cuda12.2,但是pytorch现在才到cuda12.1。导致我们没法成功安装pytorch。所以只能525&#43;cuda12.0&#43;pytorch(支持的cuda12.1)
先安装好nvidia驱动，然后在终端输入
nvidia-smi
查看对应的cuda版本
然后在官网(下cuda)
CUDA Toolkit Archive | NVIDIA Developer" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/283b6e2b878156abf3d7a6186acb9ddd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-17T20:26:08+08:00" />
<meta property="article:modified_time" content="2023-10-17T20:26:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu20.04 nerf开山之作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>源码</p> 
<p><a href="https://github.com/yenchenlin/nerf-pytorch" title="GitHub - yenchenlin/nerf-pytorch: A PyTorch implementation of NeRF (Neural Radiance Fields) that reproduces the results.">GitHub - yenchenlin/nerf-pytorch: A PyTorch implementation of NeRF (Neural Radiance Fields) that reproduces the results.</a></p> 
<p>代码的相关解读</p> 
<p><a href="https://zhuanlan.zhihu.com/p/593204605" rel="nofollow" title="NeRF代码解读-相机参数与坐标系变换 - 知乎">NeRF代码解读-相机参数与坐标系变换 - 知乎</a></p> 
<p>原文题目：<strong>NeRF: Representing Scenes as Neural Radiance Fields for View Synthesis</strong></p> 
<p>git：</p> 
<pre><code class="language-cpp">git clone https://github.com/yenchenlin/nerf-pytorch.git2 
cd nerf-pytorch</code></pre> 
<p></p> 
<p></p> 
<p><br> 环境配置(建议先跳到下面miniconda，不用conda的直接去github)<br> #########################################################################</p> 
<p></p> 
<p>在终端输入<br> pip install -r requirements.txt</p> 
<p>（注意这个requirements.txt最好是用tab补全，我直接复制执行会报错）</p> 
<p><br> pip的时候会经常timeout<br> 可参考</p> 
<p><a href="https://blog.csdn.net/weixin_44407699/article/details/104769272?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=python%20time%20out%20%E6%8D%A2%E6%BA%90-i&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-104769272.142%5Ev96%5Epc_search_result_base6&amp;spm=1018.2226.3001.4187" title="Python下载库超时Connection to files.pythonhosted.org timed out问题解决（换源）-CSDN博客">Python下载库超时Connection to files.pythonhosted.org timed out问题解决（换源）-CSDN博客</a><br> 总结就是<br> pip命令+ -i  +镜像地址。（可独立安装requirements.txt各自的库）例如 pip install numpy -i https://mirrors.aliyun.com/pypi/simple/</p> 
<p>正常用阿里云就可以，有条件的可以挂tizi</p> 
<p></p> 
<p></p> 
<p>正常后面会有cuda版本和gpu显卡的问题<br> 这里提前处理<br> 首先点开自己的软件与更新，选择附加驱动里自己适合的nvidia驱动，我的535或者525都可以，那我就装低版本的525。因为后面cuda的版本是跟这个相对应，我选择535后要选择cuda12.2,但是pytorch现在才到cuda12.1。导致我们没法成功安装pytorch。所以只能525+cuda12.0+pytorch(支持的cuda12.1)</p> 
<p></p> 
<p>先安装好nvidia驱动，然后在终端输入<br><strong>nvidia-smi</strong><br> 查看对应的cuda版本</p> 
<p></p> 
<p>然后在官网(下cuda)</p> 
<p><a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow" title="CUDA Toolkit Archive | NVIDIA Developer">CUDA Toolkit Archive | NVIDIA Developer</a></p> 
<p>下载对应的cuda版本（4G左右）<br> 具体nvidia驱动和cuda安装可以参考我这篇</p> 
<p><a href="https://blog.csdn.net/mengshenglo/article/details/133786393?spm=1001.2014.3001.5501" title="ubuntu20.04 nerf Instant-ngp-CSDN博客">ubuntu20.04 nerf Instant-ngp-CSDN博客</a></p> 
<p></p> 
<p>然后去官网(下pytorch)</p> 
<p><a href="https://pytorch.org/get-started/locally/" rel="nofollow" title="Start Locally | PyTorch">Start Locally | PyTorch</a></p> 
<p>选择对应的pytorch torchvision torchaudio（可高于cuda安装的版本，尽量在网络好下）</p> 
<pre><code class="language-cpp">conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia</code></pre> 
<p>###############################################################################</p> 
<p></p> 
<p></p> 
<p>然后安装miniconda（便于管理环境，可以不安装）<br> 参考<a href="https://blog.csdn.net/weixin_45910027/article/details/128735635?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522169754344516800226582131%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=169754344516800226582131&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-128735635-null-null.142%5Ev96%5Epc_search_result_base6&amp;utm_term=ubuntu%E5%AE%89%E8%A3%85miniconda3&amp;spm=1018.2226.3001.4187" title="Ubuntu 20.04 安装 Miniconda3_ubuntu安装miniconda3-CSDN博客">Ubuntu 20.04 安装 Miniconda3_ubuntu安装miniconda3-CSDN博客</a></p> 
<p>conda创建环境</p> 
<pre><code class="language-cpp">conda create -n nerf python=3.8

source activate nerf</code></pre> 
<p>跳回前面</p> 
<p></p> 
<p><br> ###<br> —————————————————————————————————————————————<br> 当然前面的配置都可以不用，官网就给了下面的。上面只是为了管理环境和提前处理cuda的错误</p> 
<pre><code class="language-cpp">pip install -r requirements.txt</code></pre> 
<p><br> （这个配置要在conda的nerf环境下）</p> 
<p>数据下载</p> 
<pre><code class="language-cpp">bash download_example_data.sh</code></pre> 
<p><br> 执行</p> 
<pre><code class="language-cpp">python run_nerf.py --config configs/lego.txt
python run_nerf.py --config configs/fern.txt</code></pre> 
<p>—————————————————————————————————————————————<br> ###</p> 
<p>上面那个我4G的显存报溢出，但是第二行的可以跑</p> 
<p></p> 
<p><br> 然后就会报错<br><span style="color:#fe2c24;">cuda和显卡的问题</span>就看前面，已经解决。</p> 
<p></p> 
<p><span style="color:#fe2c24;">错误2</span>，assert not step_t.is_cuda, "If capturable=False, state_steps should not be CUDA<br> tensors</p> 
<p>在run_nerf.py的 optimizer = torch...下一行加上</p> 
<pre><code class="language-cpp">optimizer.param_groups[0]['capturable'] = True</code></pre> 
<p></p> 
<p><span style="color:#fe2c24;">错误3</span><br> OMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.<br> 参考这篇博客<br> https://blog.csdn.net/qq_45266796/article/details/109028605，<br> 在run_nerf.py加上：</p> 
<pre><code class="language-cpp">import os
os.environ["KMP_DUPLICATE_LIB_OK"]  =  "TRUE"</code></pre> 
<p></p> 
<p></p> 
<p><span style="color:#fe2c24;">错误4</span><br> TypeError: read() got an unexpected keyword argument 'ignoregamma'</p> 
<p>作者查阅很久没有找到，最终找了imageio的doc来尝试修改，改了之后可以运行；目前认为应该是imageio这个库更新导致识别格式不同的后果。根据打印的栈，在load_llff.py的相应错误处改为：</p> 
<pre><code class="language-cpp">return imageio.imread(f, format="PNG-PIL", ignoregamma=True)</code></pre> 
<p><br> 错误3，4来源于<a href="https://zhuanlan.zhihu.com/p/630948914" rel="nofollow" title="NeRF运行遇到的两个错误 - 知乎">NeRF运行遇到的两个错误 - 知乎</a></p> 
<p></p> 
<p>至此，nerf可以跑通，但是就是有点费显卡和电脑（跑了40分钟才5%，还要13小时。亏我还是12代i7，3050Ti，别人还是2020年的论文，不过看到3090和20G显存，nvidia460也跑了8个小时，我就让他跑一页吧）</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0f/6b/oribSx2B_o.png"></p> 
<p></p> 
<p style="text-align:center;"><img alt="" height="352" src="https://images2.imgbox.com/7e/44/ytxp6WaL_o.jpg" width="469"></p> 
<p></p> 
<p>2023.10.17<br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c723c66a2d7e1d7abf0fe6662a11d141/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">苹果笔记本磁盘工具怎样分区 苹果电脑系统u盘读不出来</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/142f4904f8113127b7edb8c6aa96647a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pycharm中对于包的操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>