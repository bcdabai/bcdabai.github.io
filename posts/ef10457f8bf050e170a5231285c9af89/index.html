<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>h5新特性localstorage的简单应用（记住登录名和密码） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="h5新特性localstorage的简单应用（记住登录名和密码）" />
<meta property="og:description" content="我们在制作登录界面的时候回出现一个勾选框，询问我们是否记住账号和密码，当我们勾选了之后下次进来就是上次登录的账号密码，可以直接登录。那这个功能是如何实现的呢？下面我们就是用h5的新特性localstorage来实现。
首先，我们需要了解下localstorage的含义和用法。在客户端h5提供了两种存储方式；一种是localstorage，一种是sessionstorage
下面我们详细介绍下这两种方式的优缺点。
localstorage的有点：1、拓展了cookie的4k限制2、可以将第一次接收的数据存储到本地，这个相当于5M大小的前端页面数据库，但是只能在高版本的浏览器中使用。
localstorage的局限性：1、浏览器版本不统一，localstorage只支持ie8及以上的版本2、目前浏览器只能讲localstorage的数据类型限定为strinf，对于我们现在用的JSON格式需要进行转换。3、在浏览器的隐私模式下是不可读的4、本质上是对字符串的读取，如果数量太多会造成页面的卡的情况5、不能被爬虫抓取到
localstorage与sessionstorage的本质区别是localstorage是永久存储而sessionstorage是回话存储（页面关闭数据消失）
那如何创建localstorage呢？有三种创建方法如下：
if(！window.localStorage){ alert(&#34;浏览器支持localstorage&#34;); return false; }else{ var storage=window.localStorage; //写入a字段 storage[&#34;a&#34;]=1; //写入b字段 storage.b=1; //写入c字段 storage.setItem(&#34;c&#34;,3); console.log(typeof storage[&#34;a&#34;]); console.log(typeof storage[&#34;b&#34;]); console.log(typeof storage[&#34;c&#34;]); } 读取localstorage
if(!window.localStorage){ alert(&#34;浏览器支持localstorage&#34;); }else{ var storage=window.localStorage; //写入a字段 storage[&#34;a&#34;]=1; //写入b字段 storage.a=1; //写入c字段 storage.setItem(&#34;c&#34;,3); console.log(typeof storage[&#34;a&#34;]); console.log(typeof storage[&#34;b&#34;]); console.log(typeof storage[&#34;c&#34;]); //第一种方法读取 var a=storage.a; console.log(a); //第二种方法读取 var b=storage[&#34;b&#34;]; console.log(b); //第三种方法读取 var c=storage.getItem(&#34;c&#34;); console.log(c); }修改localstorage的值 if(!window.localStorage){ alert(&#34;浏览器支持localstorage&#34;); }else{ var storage=window.localStorage; //写入a字段 storage[&#34;a&#34;]=1; //写入b字段 storage.b=1; //写入c字段 storage.setItem(&#34;c&#34;,3); console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ef10457f8bf050e170a5231285c9af89/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-09-08T10:12:10+08:00" />
<meta property="article:modified_time" content="2017-09-08T10:12:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">h5新特性localstorage的简单应用（记住登录名和密码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>  我们在制作登录界面的时候回出现一个勾选框，询问我们是否记住账号和密码，当我们勾选了之后下次进来就是上次登录的账号密码，可以直接登录。那这个功能是如何实现的呢？下面我们就是用h5的新特性localstorage来实现。</p> 
<p> 首先，我们需要了解下localstorage的含义和用法。在客户端h5提供了两种存储方式；一种是localstorage，一种是sessionstorage</p> 
<p>        下面我们详细介绍下这两种方式的优缺点。</p> 
<p><span style="white-space:pre"></span>localstorage的有点：1、拓展了cookie的4k限制2、可以将第一次接收的数据存储到本地，这个相当于5M大小的前端页面数据库，但是只能在高版本的浏览器中使用。</p> 
<p><span style="white-space:pre"></span>localstorage的局限性：1、浏览器版本不统一，localstorage只支持ie8及以上的版本2、目前浏览器只能讲localstorage的数据类型限定为strinf，对于我们现在用的JSON格式需要进行转换。3、在浏览器的隐私模式下是不可读的4、本质上是对字符串的读取，如果数量太多会造成页面的卡的情况5、不能被爬虫抓取到</p> 
<p><span style="white-space:pre"></span>localstorage与sessionstorage的本质区别是localstorage是永久存储而sessionstorage是回话存储（页面关闭数据消失）</p> 
<p><span style="white-space:pre"></span>那如何创建localstorage呢？有三种创建方法如下：</p> 
<p><span style="white-space:pre"></span></p> 
<pre><code class="language-html">if(！window.localStorage){
            alert("浏览器支持localstorage");
            return false;
        }else{
            var storage=window.localStorage;
            //写入a字段
            storage["a"]=1;
            //写入b字段
            storage.b=1;
            //写入c字段
            storage.setItem("c",3);
            console.log(typeof storage["a"]);
            console.log(typeof storage["b"]);
            console.log(typeof storage["c"]);
        }</code></pre> 
<br> 
<p>读取localstorage</p> 
<p></p> 
<pre><code class="language-html">if(!window.localStorage){
            alert("浏览器支持localstorage");
        }else{
            var storage=window.localStorage;
            //写入a字段
            storage["a"]=1;
            //写入b字段
            storage.a=1;
            //写入c字段
            storage.setItem("c",3);
            console.log(typeof storage["a"]);
            console.log(typeof storage["b"]);
            console.log(typeof storage["c"]);
            //第一种方法读取
            var a=storage.a;
            console.log(a);
            //第二种方法读取
            var b=storage["b"];
            console.log(b);
            //第三种方法读取
            var c=storage.getItem("c");
            console.log(c);
        }</code></pre>修改localstorage的值 
<p></p> 
<p></p> 
<pre><code class="language-html">if(!window.localStorage){
            alert("浏览器支持localstorage");
        }else{
            var storage=window.localStorage;
            //写入a字段
            storage["a"]=1;
            //写入b字段
            storage.b=1;
            //写入c字段
            storage.setItem("c",3);
            console.log(storage.a);
            // console.log(typeof storage["a"]);
            // console.log(typeof storage["b"]);
            // console.log(typeof storage["c"]);
            /*分割线*/
            storage.a=4;
            console.log(storage.a);
        }</code></pre>localstorage的删除 
<p></p> 
<p>1、删除所有的内容</p> 
<pre><code class="language-html">var storage=window.localStorage;
            storage.a=1;
            storage.setItem("c",3);
            console.log(storage);
            storage.clear();
            console.log(storage);</code></pre>2、删除某个键值对 
<br> 
<br> 
<p></p> 
<pre style='margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:"Courier New"!important'><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">var</span> storage=<span style="margin:0px; padding:0px; line-height:1.5!important">window.localStorage;
            storage.a</span>=1<span style="margin:0px; padding:0px; line-height:1.5!important">;
            storage.setItem(</span>"c",3<span style="margin:0px; padding:0px; line-height:1.5!important">);
            console.log(storage);
            storage.removeItem(</span>"a"<span style="margin:0px; padding:0px; line-height:1.5!important">);
            console.log(storage.a);</span></pre> 
<span style='margin:0px; padding:0px; font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'>localStorage的键获取</span> 
<br> 
<p></p> 
<p></p> 
<pre><code class="language-html">var storage=window.localStorage;
            storage.a=1;
            storage.setItem("c",3);
            for(var i=0;i&lt;storage.length;i++){
                var key=storage.key(i);
                console.log(key);
            }</code></pre> 
<br> 
<span style='font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'>使用key()方法，向其中出入索引即可获取对应的键</span> 
<br> 
<strong><span style="color:#ff6666">JSON和字符串的转换</span></strong> 
<p></p> 
<p></p> 
<p style='margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'> 一般我们会将JSON存入localStorage中，但是在localStorage会自动将localStorage转换成为字符串形式</p> 
<p style='margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'> 这个时候我们可以使用JSON.stringify()这个方法，来将JSON转换成为JSON字符串</p> 
<pre><code class="language-html">if(!window.localStorage){
            alert("浏览器支持localstorage");
        }else{
            var storage=window.localStorage;
            var data={
                name:'xiecanyong',
                sex:'man',
                hobby:'program'
            };
            var d=JSON.stringify(data);
            storage.setItem("data",d);
            console.log(storage.data);
        }</code></pre> 
<span style='font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'>读取之后要将JSON字符串转换成为JSON对象，使用JSON.parse()方法</span> 
<br> 
<pre><code class="language-html">var storage=window.localStorage;
            var data={
                name:'xiecanyong',
                sex:'man',
                hobby:'program'
            };
            var d=JSON.stringify(data);
            storage.setItem("data",d);
            //将JSON字符串转换成为JSON对象输出
            var json=storage.getItem("data");
            var jsonObj=JSON.parse(json);
            console.log(typeof jsonObj);</code></pre> 
<br> 
<p style='margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'> 打印出来是Object对象</p> 
<p style='margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:"Helvetica Neue",Helvetica,Verdana,Arial,sans-serif; font-size:14px'> 另外还有一点要注意的是，其他类型读取出来也要进行转换</p> 
<br> 
<p><br> </p> 
<p>下面我们就实际应用一下h5的新特性，用来存储登录界面的用户名和密码。代码如下可以复制之后测试下效果，验证的时候是要刷新页面的。</p> 
<p>html部分，简单写一个登录样式</p> 
<p></p> 
<pre><code class="language-html">用户名:  &lt;input type="text" id="user"&gt;&lt;br&gt;
	密码:    &lt;input type="password" style="margin-left:15px" id="password"&gt;&lt;br&gt;
	&lt;input type="checkbox" style="margin-left:55px" id="check"&gt;是否记住密码&lt;br&gt;
	&lt;button id="btn" style="margin-left:75px"&gt;登录&lt;/button&gt;</code></pre>js部分 
<p></p> 
<p><span style="white-space:pre"></span></p> 
<pre><code class="language-html">var user = document.getElementById('user');
		var password = document.getElementById('password');
		var check = document.getElementById('check');
		var btn = document.getElementById('btn');
		// 获取设置的本地存储的用户名的值
		var loUser = localStorage.getItem('user');
		// 获取设置的本地存储的密码的值
		var loPass = localStorage.getItem('pass');
		// 将本地存储的值设置给用户名和密码
		user.value= loUser;
		password.value = loPass;
		// 判断本地存储值不为空的时候将勾选的checked设置为空
		if(loUser!==''&amp;&amp;loPass!==''){
			check.setAttribute('checked','');
		}
		btn.οnclick=function(){
			if(check.checked){
				// alert("选中");
				// 勾选框勾选的时候设置本地的用户名和密码的val为输入的值
				localStorage.setItem('user',user.value);
				localStorage.setItem('pass',password.value);
			}else{
				// alert('未勾选');
				// 勾选框未勾选的时候设置本地的用户名和密码为空
				localStorage.setItem("user","");
            	localStorage.setItem("pass","");
			}
		}</code></pre> 
<br> 
<br> 
<br> 
<p></p> 
<p><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13e261c7d018fa98963ef0ea34241a63/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微服务的4个设计原则和19个解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5bad5b9a2df969a37a73d63e90b7f9f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络编程中常见问题以及解决思路</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>