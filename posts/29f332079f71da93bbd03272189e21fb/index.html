<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[蓝桥杯学习] 线段树 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[蓝桥杯学习] 线段树" />
<meta property="og:description" content=" 学习blibli
定义 线段树是一种特殊的平衡二叉查找树，使用线段树，可以实现数据的添加、查找和删除。
树的根结点表示了一个完整的单元区间，左右孩子的区间是将父结点的区间进行二分，左右孩子的区间之和，就是他们的根结点。
叶子结点是区间间隔为1的单位区间（存放的是单个数字），当区间[a,b]的a=b时，就是叶子结点了。
如果用线段树来存储一个区间 [a,b]，叶结点的个数就是(b-a&#43;1)，并且存储数字从a到b
实现方法 由于线段树是一棵平衡二叉树，可以使用一个数组来实现（虽然不是严格意义上的完全二叉树，但是可以为了实现和使用方便，就看成是一棵完全二叉树，不存在的结点在数组里空着就好）。
区间长度为 [0,5] 的线段树，要用到的数组区间是从 a[0] 到 a[2*5&#43;2]，其中一些空间是不存储数据的。
根存储在a[0]
结点 i ，父结点：(i-2)/2，左孩子结点：2*i&#43;1 ，右孩子结点：2*i&#43;2
一个结点的信息包括该结点的 value 以及区间左右端点，通常是不将区间左右端点显示地表示出来，因为可以在查找中计算出来。
应用示例 示例：线段树中，结点值是该区间里的数字个数
如果添加数字3，从区间[0,5] 和 [3,5] [3,4] [3,3]对应的结点值都要加1
代码实现 数据插入 //线段树的数据插入 void tree_inset(int pos,int left,int right,int num) { a[pos]&#43;&#43;; //进行要计算的操作 if(num == left &amp;&amp; num == right) return; //找到数字所在的叶子 int mid = (left &#43; right)&gt;&gt;1; //把num和mid进行比较 if(num &lt;= mid) tree_inset(pos*2&#43;1,left,mid,num); //到左孩子去 else tree_inset(pos*2&#43;2,mid&#43;1,right,num); //到右孩子去 } 对叶子的查找类似于二分查找。
查询 //线段树的数据查询 int tree_search(int pos,int left,int right,int num) { if(num == left &amp;&amp; num == right) return a[pos]; int mid = (left &#43; right)&gt;&gt;1; if(num &lt;= mid) return tree_search(pos*2&#43;1,left,mid,num); else return tree_search(pos*2&#43;2,mid&#43;1,right,num); } 打印线段树 //打印线段树 void tree_print(int pos,int left,int right) { cout &lt;&lt; &#39;[&#39; &lt;&lt; left &lt;&lt; &#39;,&#39; &lt;&lt; right &lt;&lt; &#39;]&#39; &lt;&lt; &#39; &#39; &lt;&lt; a[pos] &lt;&lt; &#39;\n&#39;; if(left == right) return; int mid = (left&#43;right)&gt;&gt;1; tree_print(pos*2&#43;1,left,mid); tree_print(pos*2&#43;2,mid&#43;1,right); return; } " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/29f332079f71da93bbd03272189e21fb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T13:47:50+08:00" />
<meta property="article:modified_time" content="2024-01-07T13:47:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[蓝桥杯学习] 线段树</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>学习blibli</p> 
<h2>定义</h2> 
<p>线段树是一种特殊的平衡二叉查找树，使用线段树，可以实现数据的添加、查找和删除。</p> 
<p>树的根结点表示了一个完整的单元区间，左右孩子的区间是将父结点的区间进行二分，左右孩子的区间之和，就是他们的根结点。</p> 
<p>叶子结点是区间间隔为1的单位区间（存放的是单个数字），当区间[a,b]的a=b时，就是叶子结点了。</p> 
<p><img alt="" height="303" src="https://images2.imgbox.com/96/1a/U7lAHzCo_o.png" width="1200"></p> 
<p><img alt="" height="992" src="https://images2.imgbox.com/3c/c7/8xUMSj4R_o.png" width="1200"></p> 
<p><img alt="" height="985" src="https://images2.imgbox.com/9e/29/UIMu31XY_o.png" width="1200"></p> 
<p><img alt="" height="994" src="https://images2.imgbox.com/01/b2/YaUKLpOZ_o.png" width="1200"></p> 
<p>如果用线段树来存储一个区间 [a,b]，叶结点的个数就是(b-a+1)，并且存储数字从a到b</p> 
<h2>实现方法</h2> 
<p>由于线段树是一棵平衡二叉树，可以使用一个数组来实现（虽然不是严格意义上的完全二叉树，但是可以为了实现和使用方便，就看成是一棵完全二叉树，不存在的结点在数组里空着就好）。</p> 
<p>区间长度为 [0,5] 的线段树，要用到的数组区间是从 a[0] 到 a[2*5+2]，其中一些空间是不存储数据的。</p> 
<p>根存储在a[0]</p> 
<p>结点 i ，父结点：(i-2)/2，左孩子结点：2*i+1 ，右孩子结点：2*i+2</p> 
<p><img alt="" height="988" src="https://images2.imgbox.com/ec/ad/IurRD4Vy_o.png" width="1200"></p> 
<p><img alt="" height="1083" src="https://images2.imgbox.com/b8/76/KdBxS4Cq_o.png" width="1200"></p> 
<p>一个结点的信息包括该结点的 value 以及区间左右端点，通常是不将区间左右端点显示地表示出来，因为可以在查找中计算出来。</p> 
<h2>应用示例</h2> 
<p>示例：线段树中，结点值是该区间里的数字个数</p> 
<p>如果添加数字3，从区间[0,5] 和 [3,5] [3,4] [3,3]对应的结点值都要加1</p> 
<p><img alt="" height="1083" src="https://images2.imgbox.com/79/fd/XeIt1dNQ_o.png" width="1200"></p> 
<p><img alt="" height="1083" src="https://images2.imgbox.com/2f/a9/J7fcDYzO_o.png" width="1200"></p> 
<h2>代码实现</h2> 
<h3>数据插入</h3> 
<pre><code class="language-cpp">//线段树的数据插入
void tree_inset(int pos,int left,int right,int num)
{
    a[pos]++;  //进行要计算的操作
    if(num == left &amp;&amp; num == right) return;  //找到数字所在的叶子
    int mid = (left + right)&gt;&gt;1;
    //把num和mid进行比较
    if(num &lt;= mid) tree_inset(pos*2+1,left,mid,num);  //到左孩子去
    else tree_inset(pos*2+2,mid+1,right,num);  //到右孩子去
}</code></pre> 
<p>对叶子的查找类似于二分查找。</p> 
<h3>查询</h3> 
<pre><code class="language-cpp">//线段树的数据查询
int tree_search(int pos,int left,int right,int num)
{
    if(num == left &amp;&amp; num == right) return a[pos];
    int mid = (left + right)&gt;&gt;1;
    if(num &lt;= mid) return tree_search(pos*2+1,left,mid,num);
    else return tree_search(pos*2+2,mid+1,right,num);
}</code></pre> 
<h3>打印线段树</h3> 
<pre><code class="language-cpp">//打印线段树
void tree_print(int pos,int left,int right)
{
    cout &lt;&lt; '[' &lt;&lt; left &lt;&lt; ',' &lt;&lt; right &lt;&lt; ']' &lt;&lt; ' ' &lt;&lt; a[pos] &lt;&lt; '\n';
    if(left == right) return;
    int mid = (left+right)&gt;&gt;1;
    tree_print(pos*2+1,left,mid);
    tree_print(pos*2+2,mid+1,right);
    return;
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/12942ebdf73c336baa43ab031929f3aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用redis时快速考虑的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/057d7b6c1f827a9ffaed4b27ee09a8a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">leetcode困难题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>