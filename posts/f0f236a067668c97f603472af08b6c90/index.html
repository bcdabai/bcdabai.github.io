<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Android入门到项目实战-- 9.1】—— 传感器的使用教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Android入门到项目实战-- 9.1】—— 传感器的使用教程" />
<meta property="og:description" content="目录
传感器的定义
三大类型传感器
1、运动传感器
2、环境传感器
3、位置传感器
传感器开发框架
1、SensorManager
2、Sensor
3、SensorEvent
4、SensorEventListener
一、使用传感器开发步骤
1、获取传感器信息
1)、获取传感器管理器
2)、获取设备的传感器对象列表
3)、迭代获取Sensor对象，调用对应方法获取相关信息
2、获取传感器传回数据
1）获得传感器管理器
2）调用特定方法获得需要的传感器
3）实现SensorEventListener接口，重写onSensorChanged和onAccuracyChanged方法
4）SensorManager对象调用registerListener注册监听器
5）监听器的取消注册
二、获取传感器信息的实例
三、获取传感器传回数据的实例
原理
传感器的应用如微信的摇一摇功能、NFC、手机自带的指南针等等。下面将学习Android传感器的使用。
传感器的定义 一种物理设备或者生物器官，能够探测、感受外界的信号，物理条件(如光，热， 湿度)或化学组成（如烟雾），并将探知的信息传递给其他的设备或者器官。
三大类型传感器 1、运动传感器 –运动传感器测量加速力和旋转力，它们包括加速度计，重力传感器，陀螺仪和旋转矢量传感器。
2、环境传感器 –环境传感器测量各种周围环境情况，如环境温度、气压、光强、湿度等。包括气压计，光度计和温度计。
3、位置传感器 –位置传感器测量设备的物理位置信息，包括方向传感器和磁力计。
传感器开发框架 1、SensorManager –可以使用此类创建传感器服务的实例。这个类提供了多种方法来访问和列出传感器，注册和注销传感器事件监听器，并获取方向信息。该类还提供了几个传感器常量，用于报告传感器的精度，设置数据采集速率和校准传感器。
2、Sensor –可以使用此类创建特定传感器的实例。这个类提供了各种方法，让你确定一个传感器的能力。
3、SensorEvent –系统使用此类创建传感器事件对象，该对象提供有关传感器事件的信息。传感器事件对象包括以下信息：原始传感器数据，生成事件的传感器类型，数据的准确性以及事件的时间戳。
4、SensorEventListener –可以使用此界面创建两种回传方法，当传感器值更改或传感器准确度发生变化时，会接收通知（传感器事件）。
一、使用传感器开发步骤 1、获取传感器信息 传感器的开发首先需要获取传感器的一些信息，获取信息需要以下步骤：
1)、获取传感器管理器 Android提供了一个sensorManager管理器，通过这个类可以获取到都有哪些传感器，获取sensorManager对象代码如下：
SensorManager sm = (SensorManager)getSystemService(SENSOR_SERVICE); 2)、获取设备的传感器对象列表 通过sensorManager管理器的getSensorList()方法，可以获取传感器对象列表，具体代码如下：
List&lt;Sensor&gt; allSensors = sm.getSensorList(Sensor.TYPE_ALL); 3)、迭代获取Sensor对象，调用对应方法获取相关信息 for(Sensor s:allSensors){ sensor.getName(); //获得传感器名称 sensor.getType(); //获得传感器种类 sensor.getVendor(); //获得传感器供应商 sensor." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f0f236a067668c97f603472af08b6c90/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-05T22:11:42+08:00" />
<meta property="article:modified_time" content="2023-05-05T22:11:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Android入门到项目实战-- 9.1】—— 传感器的使用教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E5%AE%9A%E4%B9%89-toc" style="margin-left:0px;"><a href="#%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E5%AE%9A%E4%B9%89" rel="nofollow">传感器的定义</a></p> 
<p id="%E4%B8%89%E5%A4%A7%E7%B1%BB%E5%9E%8B%E4%BC%A0%E6%84%9F%E5%99%A8-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E5%A4%A7%E7%B1%BB%E5%9E%8B%E4%BC%A0%E6%84%9F%E5%99%A8" rel="nofollow">三大类型传感器</a></p> 
<p id="1%E3%80%81%E8%BF%90%E5%8A%A8%E4%BC%A0%E6%84%9F%E5%99%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%BF%90%E5%8A%A8%E4%BC%A0%E6%84%9F%E5%99%A8" rel="nofollow">1、运动传感器</a></p> 
<p id="2%E3%80%81%E7%8E%AF%E5%A2%83%E4%BC%A0%E6%84%9F%E5%99%A8-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E7%8E%AF%E5%A2%83%E4%BC%A0%E6%84%9F%E5%99%A8" rel="nofollow">2、环境传感器</a></p> 
<p id="3%E3%80%81%E4%BD%8D%E7%BD%AE%E4%BC%A0%E6%84%9F%E5%99%A8-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E4%BD%8D%E7%BD%AE%E4%BC%A0%E6%84%9F%E5%99%A8" rel="nofollow">3、位置传感器</a></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6-toc" style="margin-left:0px;"><a href="#%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6" rel="nofollow">传感器开发框架</a></p> 
<p id="1%E3%80%81SensorManager-toc" style="margin-left:40px;"><a href="#1%E3%80%81SensorManager" rel="nofollow">1、SensorManager</a></p> 
<p id="2%E3%80%81Sensor-toc" style="margin-left:40px;"><a href="#2%E3%80%81Sensor" rel="nofollow">2、Sensor</a></p> 
<p id="3%E3%80%81SensorEvent-toc" style="margin-left:40px;"><a href="#3%E3%80%81SensorEvent" rel="nofollow">3、SensorEvent</a></p> 
<p id="4%E3%80%81SensorEventListener-toc" style="margin-left:40px;"><a href="#4%E3%80%81SensorEventListener" rel="nofollow">4、SensorEventListener</a></p> 
<p id="%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4" rel="nofollow">一、使用传感器开发步骤</a></p> 
<p id="1%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF" rel="nofollow">1、获取传感器信息</a></p> 
<p id="1)%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8-toc" style="margin-left:80px;"><a href="#1%29%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8" rel="nofollow">1)、获取传感器管理器</a></p> 
<p id="2)%E3%80%81%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8%E5%AF%B9%E8%B1%A1%E5%88%97%E8%A1%A8-toc" style="margin-left:80px;"><a href="#2%29%E3%80%81%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8%E5%AF%B9%E8%B1%A1%E5%88%97%E8%A1%A8" rel="nofollow">2)、获取设备的传感器对象列表</a></p> 
<p id="3)%E3%80%81%E8%BF%AD%E4%BB%A3%E8%8E%B7%E5%8F%96Sensor%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%B0%83%E7%94%A8%E5%AF%B9%E5%BA%94%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#3%29%E3%80%81%E8%BF%AD%E4%BB%A3%E8%8E%B7%E5%8F%96Sensor%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%B0%83%E7%94%A8%E5%AF%B9%E5%BA%94%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF" rel="nofollow">3)、迭代获取Sensor对象，调用对应方法获取相关信息</a></p> 
<p id="2%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE" rel="nofollow">2、获取传感器传回数据</a></p> 
<p id="1%EF%BC%89%E8%8E%B7%E5%BE%97%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8-toc" style="margin-left:80px;"><a href="#1%EF%BC%89%E8%8E%B7%E5%BE%97%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8" rel="nofollow">1）获得传感器管理器</a></p> 
<p id="2%EF%BC%89%E8%B0%83%E7%94%A8%E7%89%B9%E5%AE%9A%E6%96%B9%E6%B3%95%E8%8E%B7%E5%BE%97%E9%9C%80%E8%A6%81%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8-toc" style="margin-left:80px;"><a href="#2%EF%BC%89%E8%B0%83%E7%94%A8%E7%89%B9%E5%AE%9A%E6%96%B9%E6%B3%95%E8%8E%B7%E5%BE%97%E9%9C%80%E8%A6%81%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8" rel="nofollow">2）调用特定方法获得需要的传感器</a></p> 
<p id="3%EF%BC%89%E5%AE%9E%E7%8E%B0SensorEventListener%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%87%8D%E5%86%99onSensorChanged%E5%92%8ConAccuracyChanged%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#3%EF%BC%89%E5%AE%9E%E7%8E%B0SensorEventListener%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%87%8D%E5%86%99onSensorChanged%E5%92%8ConAccuracyChanged%E6%96%B9%E6%B3%95" rel="nofollow">3）实现SensorEventListener接口，重写onSensorChanged和onAccuracyChanged方法</a></p> 
<p id="4%EF%BC%89SensorManager%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8registerListener%E6%B3%A8%E5%86%8C%E7%9B%91%E5%90%AC%E5%99%A8-toc" style="margin-left:80px;"><a href="#4%EF%BC%89SensorManager%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8registerListener%E6%B3%A8%E5%86%8C%E7%9B%91%E5%90%AC%E5%99%A8" rel="nofollow">4）SensorManager对象调用registerListener注册监听器</a></p> 
<p id="5%EF%BC%89%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E5%8F%96%E6%B6%88%E6%B3%A8%E5%86%8C-toc" style="margin-left:80px;"><a href="#5%EF%BC%89%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E5%8F%96%E6%B6%88%E6%B3%A8%E5%86%8C" rel="nofollow">5）监听器的取消注册</a></p> 
<p id="%E4%BA%8C%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF%E7%9A%84%E5%AE%9E%E4%BE%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF%E7%9A%84%E5%AE%9E%E4%BE%8B" rel="nofollow">二、获取传感器信息的实例</a></p> 
<p id="%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%9E%E4%BE%8B-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%9E%E4%BE%8B" rel="nofollow">三、获取传感器传回数据的实例</a></p> 
<p id="%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#%E5%8E%9F%E7%90%86" rel="nofollow">原理</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>        传感器的应用如微信的摇一摇功能、NFC、手机自带的指南针等等。下面将学习Android传感器的使用。</p> 
<h2 id="%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E5%AE%9A%E4%B9%89">传感器的定义</h2> 
<blockquote> 
 <p>        一种物理设备或者生物器官，能够探测、感受外界的信号，物理条件(如光，热， 湿度)或化学组成（如烟雾），并将探知的信息传递给其他的设备或者器官。</p> 
</blockquote> 
<p></p> 
<h2 id="%E4%B8%89%E5%A4%A7%E7%B1%BB%E5%9E%8B%E4%BC%A0%E6%84%9F%E5%99%A8">三大类型传感器</h2> 
<h3 id="1%E3%80%81%E8%BF%90%E5%8A%A8%E4%BC%A0%E6%84%9F%E5%99%A8">1、运动传感器</h3> 
<blockquote> 
 <p>        –运动传感器测量加速力和旋转力，它们包括加速度计，重力传感器，陀螺仪和旋转矢量传感器。</p> 
</blockquote> 
<h3 id="2%E3%80%81%E7%8E%AF%E5%A2%83%E4%BC%A0%E6%84%9F%E5%99%A8">2、环境传感器</h3> 
<blockquote> 
 <p>        –环境传感器测量各种周围环境情况，如环境温度、气压、光强、湿度等。包括气压计，光度计和温度计。</p> 
</blockquote> 
<h3 id="3%E3%80%81%E4%BD%8D%E7%BD%AE%E4%BC%A0%E6%84%9F%E5%99%A8">3、位置传感器</h3> 
<blockquote> 
 <p>        –位置传感器测量设备的物理位置信息，包括方向传感器和磁力计。</p> 
</blockquote> 
<h2></h2> 
<h2 id="%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6">传感器开发框架</h2> 
<h3 id="1%E3%80%81SensorManager">1、SensorManager</h3> 
<blockquote> 
 <p>        –可以使用此类创建传感器服务的实例。这个类提供了多种方法来访问和列出传感器，注册和注销传感器事件监听器，并获取方向信息。该类还提供了几个传感器常量，用于报告传感器的精度，设置数据采集速率和校准传感器。</p> 
</blockquote> 
<h3 id="2%E3%80%81Sensor">2、Sensor</h3> 
<blockquote> 
 <p>        –可以使用此类创建特定传感器的实例。这个类提供了各种方法，让你确定一个传感器的能力。</p> 
</blockquote> 
<h3 id="3%E3%80%81SensorEvent">3、SensorEvent</h3> 
<blockquote> 
 <p>        –系统使用此类创建传感器事件对象，该对象提供有关传感器事件的信息。传感器事件对象包括以下信息：原始传感器数据，生成事件的传感器类型，数据的准确性以及事件的时间戳。</p> 
</blockquote> 
<h3 id="4%E3%80%81SensorEventListener">4、SensorEventListener</h3> 
<blockquote> 
 <p>        –可以使用此界面创建两种回传方法，当传感器值更改或传感器准确度发生变化时，会接收通知（传感器事件）。</p> 
</blockquote> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4">一、使用传感器开发步骤</h2> 
<h3 id="1%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF">1、获取传感器信息</h3> 
<p>        传感器的开发首先需要获取传感器的一些信息，获取信息需要以下步骤：</p> 
<h4 id="1)%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8">1)、获取传感器管理器</h4> 
<blockquote> 
 <p>        Android提供了一个sensorManager管理器，通过这个类可以获取到都有哪些传感器，获取sensorManager对象代码如下：</p> 
</blockquote> 
<pre><code class="hljs">SensorManager sm = (SensorManager)getSystemService(SENSOR_SERVICE); 
</code></pre> 
<h4 id="2)%E3%80%81%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8%E5%AF%B9%E8%B1%A1%E5%88%97%E8%A1%A8">2)、获取设备的传感器对象列表</h4> 
<blockquote> 
 <p>        通过sensorManager管理器的getSensorList()方法，可以获取传感器对象列表，具体代码如下：</p> 
</blockquote> 
<pre><code class="hljs">List&lt;Sensor&gt; allSensors = sm.getSensorList(Sensor.TYPE_ALL);
</code></pre> 
<h4 id="3)%E3%80%81%E8%BF%AD%E4%BB%A3%E8%8E%B7%E5%8F%96Sensor%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%B0%83%E7%94%A8%E5%AF%B9%E5%BA%94%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF">3)、迭代获取Sensor对象，调用对应方法获取相关信息</h4> 
<pre><code class="hljs">for(Sensor s:allSensors){
    sensor.getName();   //获得传感器名称
    sensor.getType();     //获得传感器种类
    sensor.getVendor();    //获得传感器供应商
    sensor.getVersion();    //获得传感器版本
    sensor.getResolution();  //获得精度值
    sensor.getMaximumRange(); //获得最大范围
    sensor.getPower();        //传感器使用时的耗电量 
}
</code></pre> 
<h3 id="2%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE">2、获取传感器传回数据</h3> 
<h4 id="1%EF%BC%89%E8%8E%B7%E5%BE%97%E4%BC%A0%E6%84%9F%E5%99%A8%E7%AE%A1%E7%90%86%E5%99%A8">1）获得传感器管理器</h4> 
<pre><code class="hljs">SensorManager sm = (SensorManager)getSystemService(SENSOR_SERVICE);
</code></pre> 
<h4 id="2%EF%BC%89%E8%B0%83%E7%94%A8%E7%89%B9%E5%AE%9A%E6%96%B9%E6%B3%95%E8%8E%B7%E5%BE%97%E9%9C%80%E8%A6%81%E7%9A%84%E4%BC%A0%E6%84%9F%E5%99%A8">2）调用特定方法获得需要的传感器</h4> 
<blockquote> 
 <p>        调用SensorManager 对象的getDefaultSensor方法，获取指定类型的传感器，例如这里使用光线传感器，具体代码:</p> 
</blockquote> 
<pre><code class="hljs">Sensor mSensorOrientation = sm.getDefaultSensor(Sensor.TYPE_ORIENTATION);
</code></pre> 
<h4 id="3%EF%BC%89%E5%AE%9E%E7%8E%B0SensorEventListener%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%87%8D%E5%86%99onSensorChanged%E5%92%8ConAccuracyChanged%E6%96%B9%E6%B3%95">3）实现SensorEventListener接口，重写onSensorChanged和onAccuracyChanged方法</h4> 
<blockquote> 
 <p>①：onSensorChanged(SensorEvent event);该方法在传感器的值发生改变的时候调用，其参数是一个SensorEvent 对象，通过该对象的values属性可以获取传感器的值，该值是一个数组，该变量最多有三个元素，而且传感器不同，对应元素代表的含义也不同<br> ②：onAccuracyChanged(Sensor sensor , int accuracy);当传感器的进度发生改变时会回调，<br> 参数说明：<br> sensor：传感器对象<br> accuracy：表示传感器新的精度</p> 
</blockquote> 
<pre><code class="hljs">@Override
public void onSensorChanged(SensorEvent event) {
     final float[] _Data = event.values;
     this.mService.onSensorChanged(_Data[0],_Data[1],_Data[2]);
}
@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
}
</code></pre> 
<h4 id="4%EF%BC%89SensorManager%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8registerListener%E6%B3%A8%E5%86%8C%E7%9B%91%E5%90%AC%E5%99%A8">4）SensorManager对象调用registerListener注册监听器</h4> 
<blockquote> 
 <p>        为传感器注册监听事件，通过调用sensorManager对象的registerListener（）方法来注册监听事件。</p> 
 <p>        第一个参数是上下文对象，第二个是传感器对象，第三个是传感器的延时时间的精密程 度，越精密越耗电。</p> 
 <p>        </p> 
 <ul><li>SENSOR_DELAY_FASTEST——延时：0ms</li><li>SENSOR_DELAY_GAME——延时：20ms</li><li>SENSOR_DELAY_UI——延时：60ms</li><li>SENSOR_DELAY_NORMAL——延时：200ms</li></ul> 
 <p>具体代码如下：</p> 
</blockquote> 
<pre><code class="hljs">sm.registerListener(mContext, mSensorOrientation, android.hardware.SensorManager.SENSOR_DELAY_UI);
</code></pre> 
<h4 id="5%EF%BC%89%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E5%8F%96%E6%B6%88%E6%B3%A8%E5%86%8C">5）监听器的取消注册</h4> 
<pre><code class="hljs">sm. unregisterListener(this);
</code></pre> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BF%A1%E6%81%AF%E7%9A%84%E5%AE%9E%E4%BE%8B">二、获取传感器信息的实例</h2> 
<p>        先将前面第一个步骤：获取传感器信息，实例演示一下如何使用。</p> 
<p>新建项目<strong>SensorDemo1。</strong></p> 
<p>修改activity_main.xml代码如下：</p> 
<pre><code class="hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"&gt;
        &lt;TextView
            android:id="@+id/txt_show"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /&gt;
    &lt;/ScrollView&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>修改MainActivity代码如下：</p> 
<pre><code class="hljs">public class MainActivity extends AppCompatActivity {

    private TextView txt_show;
    private SensorManager sm;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        txt_show = (TextView) findViewById(R.id.txt_show);
        List&lt;Sensor&gt; allSensors = sm.getSensorList(Sensor.TYPE_ALL);
        StringBuilder sb = new StringBuilder();
        sb.append("此手机有" + allSensors.size() + "个传感器，分别有：\n\n");
        for(Sensor s:allSensors){
            switch (s.getType()){
                case Sensor.TYPE_ACCELEROMETER:
                    sb.append(s.getType() + " 加速度传感器(Accelerometer sensor)" + "\n");
                    break;
                case Sensor.TYPE_GYROSCOPE:
                    sb.append(s.getType() + " 陀螺仪传感器(Gyroscope sensor)" + "\n");
                    break;
                case Sensor.TYPE_LIGHT:
                    sb.append(s.getType() + " 光线传感器(Light sensor)" + "\n");
                    break;
                case Sensor.TYPE_MAGNETIC_FIELD:
                    sb.append(s.getType() + " 磁场传感器(Magnetic field sensor)" + "\n");
                    break;
                case Sensor.TYPE_ORIENTATION:
                    sb.append(s.getType() + " 方向传感器(Orientation sensor)" + "\n");
                    break;
                case Sensor.TYPE_PRESSURE:
                    sb.append(s.getType() + " 气压传感器(Pressure sensor)" + "\n");
                    break;
                case Sensor.TYPE_PROXIMITY:
                    sb.append(s.getType() + " 距离传感器(Proximity sensor)" + "\n");
                    break;
                case Sensor.TYPE_TEMPERATURE:
                    sb.append(s.getType() + " 温度传感器(Temperature sensor)" + "\n");
                    break;
                default:
                    sb.append(s.getType() + " 其他传感器" + "\n");
                    break;
            }
            sb.append("设备名称：" + s.getName() + "\n 设备版本：" + s.getVersion() + "\n 供应商："
                    + s.getVendor() + "\n\n");
        }
        txt_show.setText(sb.toString());
    }
}</code></pre> 
<p>效果如下：</p> 
<p><img alt="" height="551" src="https://images2.imgbox.com/58/76/j4WLaAOx_o.png" width="327"></p> 
<p> </p> 
<h2 id="%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E4%BC%A0%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%9E%E4%BE%8B">三、获取传感器传回数据的实例</h2> 
<p>           实现前面第二个步骤：获取传感器传回数据，实例演示一下如何使用。下面实现采集方向传感器数据。</p> 
<h3 id="%E5%8E%9F%E7%90%86">原理</h3> 
<p><img alt="" height="269" src="https://images2.imgbox.com/be/f0/yCyC3c3Q_o.png" width="225"><img alt="" height="257" src="https://images2.imgbox.com/c8/e2/BlD2SVGF_o.png" width="368"></p> 
<p> </p> 
<div style="margin-left:.81in;text-align:left;">
  – 
 <span style="color:#FF0000;"><strong>X</strong></span> 
 <span style="color:#FF0000;"><strong>轴的方向</strong></span> 
 <span style="color:#000000;">：沿着屏幕水平方向从左到右，如果手机如果不是是正方形的话，较短的边需要水平 放置，较长的边需要垂直放置。值域</span> 
 <span style="color:#000000;">[-180, 180]</span> 
</div> 
<div style="margin-left:.81in;text-align:left;">
  – 
 <span style="color:#FF0000;"><strong>Y</strong></span> 
 <span style="color:#FF0000;"><strong>轴的方向</strong></span> 
 <span style="color:#000000;">：从屏幕的左下角开始沿着屏幕的的垂直方向指向屏幕的顶端。值域</span> 
 <span style="color:#000000;">[-90, 90]</span> 
</div> 
<div style="margin-left:.81in;text-align:left;">
  – 
 <span style="color:#FF0000;"><strong>Z</strong></span> 
 <span style="color:#FF0000;"><strong>轴的方向</strong></span> 
 <span style="color:#000000;">：当水平放置时，指向天空的方向。值域</span> 
 <span style="color:#000000;">[0, 360]</span> 
</div> 
<p> </p> 
<p>新建项目<strong>SensorDemo2。</strong></p> 
<p>修改activity_main.xml代码如下：</p> 
<pre><code class="hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:padding="5dp"&gt;

        &lt;TextView
            android:id="@+id/tv_value1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="方位角"
            android:textSize="18sp"
            android:textStyle="bold" /&gt;

        &lt;TextView
            android:id="@+id/tv_value2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="倾斜角"
            android:textSize="18sp"
            android:textStyle="bold" /&gt;

        &lt;TextView
            android:id="@+id/tv_value3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="滚动角"
            android:textSize="18sp"
            android:textStyle="bold" /&gt;

    &lt;/LinearLayout&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>修改MainActivity代码如下：</p> 
<blockquote> 
 <p>        </p> 
 <p style="margin-left:0in;text-align:center;"><span style="color:#000000;">SENSOR_DELAY_FASTEST</span><span style="color:#000000;">最灵敏</span></p> 
 <p style="margin-left:0in;text-align:center;"><span style="color:#000000;">SENSOR_DELAY_GAME </span><span style="color:#000000;">游戏的时候，不过一般用这个就够了</span></p> 
 <p style="margin-left:0in;text-align:center;"><span style="color:#000000;">SENSOR_DELAY_NORMAL </span><span style="color:#000000;">比较慢。</span></p> 
 <p style="margin-left:0in;text-align:center;"><span style="color:#000000;">SENSOR_DELAY_UI </span><span style="color:#000000;">最慢的</span></p> 
</blockquote> 
<pre><code class="hljs">public class MainActivity extends AppCompatActivity implements SensorEventListener {

    private TextView tv_value1;
    private TextView tv_value2;
    private TextView tv_value3;
    private SensorManager sManager;
    private Sensor mSensorOrientation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        mSensorOrientation = sManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
        sManager.registerListener(this, mSensorOrientation, SensorManager.SENSOR_DELAY_UI);
        bindViews();
    }

    private void bindViews() {
        tv_value1 = (TextView) findViewById(R.id.tv_value1);
        tv_value2 = (TextView) findViewById(R.id.tv_value2);
        tv_value3 = (TextView) findViewById(R.id.tv_value3);
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        tv_value1.setText("方位角(沿Z轴)：" + (float) (Math.round(event.values[0] * 100)) / 100);
        tv_value2.setText("倾斜角(沿X轴)：" + (float) (Math.round(event.values[1] * 100)) / 100);
        tv_value3.setText("滚动角(沿Y轴)：" + (float) (Math.round(event.values[2] * 100)) / 100);
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        sManager.unregisterListener(this);
    }
}</code></pre> 
<p>效果如下：</p> 
<p><img alt="" height="441" src="https://images2.imgbox.com/61/2d/sQ6uYQTv_o.png" width="264"></p> 
<p> </p> 
<p>下篇文章将通过靠近屏幕黑屏和计步器两个案例实践一下传感器的应用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74ba53a59296443233ede9bc129ff90d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows环境下NVM安装后Node/NPM命令无法使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cd3d99c98f79acd57021808767973f97/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">遥感影像深度学习样本对制作教程3——从GEE下载训练数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>