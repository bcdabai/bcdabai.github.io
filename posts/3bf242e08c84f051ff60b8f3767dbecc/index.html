<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【shell脚本实战案例】awk、sed提取数据常用的各种小技巧 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【shell脚本实战案例】awk、sed提取数据常用的各种小技巧" />
<meta property="og:description" content="目录
1. #!/bin/bash的含义
2. 使用echo输出空行与空格
3. shell按行和按列追加文件内容
4. 查找文件中特定关键字所在行
5. 取特定关键字所在的行号
6. 写if语句时注意左右方括号中间要空一格，否则报错
7. sed中使用变量，使用双引号
8. if中整数比较和字符串比较
9. awk输出换行or不换行
10. 插入换行符
11. 替换文本字段，并打印替换后的整行文本
12. 从文件中读取程序命令
13. awk取字符串前几位
14. awk中使用变量，双引号包单引号
15. 行转列
1. #!/bin/bash的含义 指定了shell脚本解释器的路径，只能放在文件的第一行
2. 使用echo输出空行与空格 输出空行: echo &#34; &#34; &gt;&gt; temp （自动换行）
输出空格:echo -n &#34; &#34; &gt;&gt; temp （不换行）
3. shell按行和按列追加文件内容 按列: paste a b &gt; c 将文件a b 以列的形式合并
按行:cat a&gt;&gt;b 将文件a追加到文件b的尾部
4. 查找文件中特定关键字所在行 cat -n file | grep &#39;keywords&#39;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3bf242e08c84f051ff60b8f3767dbecc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-16T09:40:57+08:00" />
<meta property="article:modified_time" content="2023-12-16T09:40:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【shell脚本实战案例】awk、sed提取数据常用的各种小技巧</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B-toc" style="margin-left:80px;"><a href="#1.%20%23!%2Fbin%2Fbash%E7%9A%84%E5%90%AB%E4%B9%89" rel="nofollow">1. #!/bin/bash的含义</a></p> 
<p id="2.%20%E4%BD%BF%E7%94%A8echo%E8%BE%93%E5%87%BA%E7%A9%BA%E8%A1%8C%E4%B8%8E%E7%A9%BA%E6%A0%BC-toc" style="margin-left:80px;"><a href="#2.%20%E4%BD%BF%E7%94%A8echo%E8%BE%93%E5%87%BA%E7%A9%BA%E8%A1%8C%E4%B8%8E%E7%A9%BA%E6%A0%BC" rel="nofollow">2. 使用echo输出空行与空格</a></p> 
<p id="3.%20shell%E6%8C%89%E8%A1%8C%E5%92%8C%E6%8C%89%E5%88%97%E8%BF%BD%E5%8A%A0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9-toc" style="margin-left:80px;"><a href="#3.%20shell%E6%8C%89%E8%A1%8C%E5%92%8C%E6%8C%89%E5%88%97%E8%BF%BD%E5%8A%A0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9" rel="nofollow">3. shell按行和按列追加文件内容</a></p> 
<p id="4.%20%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E8%A1%8C-toc" style="margin-left:80px;"><a href="#4.%20%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E8%A1%8C" rel="nofollow">4. 查找文件中特定关键字所在行</a></p> 
<p id="5.%20%E5%8F%96%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E7%9A%84%E8%A1%8C%E5%8F%B7-toc" style="margin-left:80px;"><a href="#5.%20%E5%8F%96%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E7%9A%84%E8%A1%8C%E5%8F%B7" rel="nofollow">5. 取特定关键字所在的行号</a></p> 
<p id="6.%20%E5%86%99if%E8%AF%AD%E5%8F%A5%E6%97%B6%E6%B3%A8%E6%84%8F%E5%B7%A6%E5%8F%B3%E6%96%B9%E6%8B%AC%E5%8F%B7%E4%B8%AD%E9%97%B4%E8%A6%81%E7%A9%BA%E4%B8%80%E6%A0%BC%EF%BC%8C%E5%90%A6%E5%88%99%E6%8A%A5%E9%94%99-toc" style="margin-left:80px;"><a href="#6.%20%E5%86%99if%E8%AF%AD%E5%8F%A5%E6%97%B6%E6%B3%A8%E6%84%8F%E5%B7%A6%E5%8F%B3%E6%96%B9%E6%8B%AC%E5%8F%B7%E4%B8%AD%E9%97%B4%E8%A6%81%E7%A9%BA%E4%B8%80%E6%A0%BC%EF%BC%8C%E5%90%A6%E5%88%99%E6%8A%A5%E9%94%99" rel="nofollow">6. 写if语句时注意左右方括号中间要空一格，否则报错</a></p> 
<p id="7.%20sed%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7-toc" style="margin-left:80px;"><a href="#7.%20sed%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7" rel="nofollow">7. sed中使用变量，使用双引号</a></p> 
<p id="8.%20if%E4%B8%AD%E6%95%B4%E6%95%B0%E6%AF%94%E8%BE%83%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83-toc" style="margin-left:80px;"><a href="#8.%20if%E4%B8%AD%E6%95%B4%E6%95%B0%E6%AF%94%E8%BE%83%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83" rel="nofollow">8. if中整数比较和字符串比较</a></p> 
<p id="9.%20awk%E8%BE%93%E5%87%BA%E6%8D%A2%E8%A1%8Cor%E4%B8%8D%E6%8D%A2%E8%A1%8C-toc" style="margin-left:80px;"><a href="#9.%20awk%E8%BE%93%E5%87%BA%E6%8D%A2%E8%A1%8Cor%E4%B8%8D%E6%8D%A2%E8%A1%8C" rel="nofollow">9. awk输出换行or不换行</a></p> 
<p id="10.%20%E6%8F%92%E5%85%A5%E6%8D%A2%E8%A1%8C%E7%AC%A6-toc" style="margin-left:80px;"><a href="#10.%20%E6%8F%92%E5%85%A5%E6%8D%A2%E8%A1%8C%E7%AC%A6" rel="nofollow">10. 插入换行符</a></p> 
<p id="11.%20%E6%9B%BF%E6%8D%A2%E6%96%87%E6%9C%AC%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E6%89%93%E5%8D%B0%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E6%95%B4%E8%A1%8C%E6%96%87%E6%9C%AC-toc" style="margin-left:80px;"><a href="#11.%20%E6%9B%BF%E6%8D%A2%E6%96%87%E6%9C%AC%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E6%89%93%E5%8D%B0%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E6%95%B4%E8%A1%8C%E6%96%87%E6%9C%AC" rel="nofollow">11. 替换文本字段，并打印替换后的整行文本</a></p> 
<p id="12.%20%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%A8%8B%E5%BA%8F%E5%91%BD%E4%BB%A4-toc" style="margin-left:80px;"><a href="#12.%20%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%A8%8B%E5%BA%8F%E5%91%BD%E4%BB%A4" rel="nofollow">12. 从文件中读取程序命令</a></p> 
<p id="13.%20awk%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%89%8D%E5%87%A0%E4%BD%8D-toc" style="margin-left:80px;"><a href="#13.%20awk%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%89%8D%E5%87%A0%E4%BD%8D" rel="nofollow">13. awk取字符串前几位</a></p> 
<p id="14.%20awk%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E5%8F%8C%E5%BC%95%E5%8F%B7%E5%8C%85%E5%8D%95%E5%BC%95%E5%8F%B7-toc" style="margin-left:80px;"><a href="#14.%20awk%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E5%8F%8C%E5%BC%95%E5%8F%B7%E5%8C%85%E5%8D%95%E5%BC%95%E5%8F%B7" rel="nofollow">14. awk中使用变量，双引号包单引号</a></p> 
<p id="15.%20%E8%A1%8C%E8%BD%AC%E5%88%97-toc" style="margin-left:80px;"><a href="#15.%20%E8%A1%8C%E8%BD%AC%E5%88%97" rel="nofollow">15. 行转列</a></p> 
<hr id="hr-toc"> 
<ul><li> <h4 id="1.%20%23!%2Fbin%2Fbash%E7%9A%84%E5%90%AB%E4%B9%89"><strong>1. #!/bin/bash的含义</strong></h4> </li></ul> 
<blockquote> 
 <p>指定了shell脚本解释器的路径，只能放在文件的第一行</p> 
</blockquote> 
<ul><li> <h4 id="2.%20%E4%BD%BF%E7%94%A8echo%E8%BE%93%E5%87%BA%E7%A9%BA%E8%A1%8C%E4%B8%8E%E7%A9%BA%E6%A0%BC"><strong>2. 使用echo输出空行与空格</strong></h4> </li></ul> 
<blockquote> 
 <p><strong>输出空行:</strong> echo " " &gt;&gt; temp （自动换行）<br><strong>输出空格</strong>:echo -n " " &gt;&gt; temp （不换行）</p> 
</blockquote> 
<ul><li> <h4 id="3.%20shell%E6%8C%89%E8%A1%8C%E5%92%8C%E6%8C%89%E5%88%97%E8%BF%BD%E5%8A%A0%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><strong>3. shell按行和按列追加文件内容</strong></h4> </li></ul> 
<blockquote> 
 <p>按列: paste a b &gt; c 将文件a b 以列的形式合并<br> 按行:cat a&gt;&gt;b 将文件a追加到文件b的尾部</p> 
</blockquote> 
<ul><li> <h4 id="4.%20%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E8%A1%8C"><strong>4. 查找文件中特定关键字所在行</strong></h4> </li></ul> 
<blockquote> 
 <p>cat -n file | grep 'keywords'</p> 
</blockquote> 
<ul><li> <h4 id="5.%20%E5%8F%96%E7%89%B9%E5%AE%9A%E5%85%B3%E9%94%AE%E5%AD%97%E6%89%80%E5%9C%A8%E7%9A%84%E8%A1%8C%E5%8F%B7"><strong>5. 取特定关键字所在的行号</strong></h4> </li></ul> 
<blockquote> 
 <p>num=`cat file | grep -n 'kewords'| awk -F":" '{print $1}'`<br> ps:第一对为键盘左上角的点号</p> 
</blockquote> 
<ul><li> <h4 id="6.%20%E5%86%99if%E8%AF%AD%E5%8F%A5%E6%97%B6%E6%B3%A8%E6%84%8F%E5%B7%A6%E5%8F%B3%E6%96%B9%E6%8B%AC%E5%8F%B7%E4%B8%AD%E9%97%B4%E8%A6%81%E7%A9%BA%E4%B8%80%E6%A0%BC%EF%BC%8C%E5%90%A6%E5%88%99%E6%8A%A5%E9%94%99"><strong>6. 写if语句时注意左右方括号中间要空一格，否则报错</strong></h4> </li></ul> 
<blockquote> 
 <p>if [ -f $content ]</p> 
</blockquote> 
<ul><li> <h4 id="7.%20sed%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7"><strong>7. sed中使用变量，使用双引号</strong></h4> </li></ul> 
<blockquote> 
 <p>cat $content | sed -n "$num,$(($num+10))p"</p> 
 <p>sed "/$x/d/" file 或 sed -n "$i"p file</p> 
</blockquote> 
<ul><li> <h4 id="8.%20if%E4%B8%AD%E6%95%B4%E6%95%B0%E6%AF%94%E8%BE%83%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><strong>8. if中整数比较和字符串比较</strong></h4> </li></ul> 
<blockquote> 
 <p>整数比较： if [ "$a" -eq "$b" ] a,b为整数<br> 字符串比较：if [ "$a" = "$b" ] a,b为字符串</p> 
</blockquote> 
<ul><li> <h4 id="9.%20awk%E8%BE%93%E5%87%BA%E6%8D%A2%E8%A1%8Cor%E4%B8%8D%E6%8D%A2%E8%A1%8C"><strong>9. awk输出换行or不换行</strong></h4> </li></ul> 
<blockquote> 
 <p>cat file | awk '{print $0}' print有换行<br> cat file | awk '{printf $0}' printf不换行</p> 
</blockquote> 
<ul><li> <h4 id="10.%20%E6%8F%92%E5%85%A5%E6%8D%A2%E8%A1%8C%E7%AC%A6"><strong>10. 插入换行符</strong></h4> </li></ul> 
<blockquote> 
 <p>echo $'\n' &gt;&gt;file</p> 
</blockquote> 
<ul><li> <h4 id="11.%20%E6%9B%BF%E6%8D%A2%E6%96%87%E6%9C%AC%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E6%89%93%E5%8D%B0%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E6%95%B4%E8%A1%8C%E6%96%87%E6%9C%AC"><strong>11. 替换文本字段，并打印替换后的整行文本</strong></h4> </li></ul> 
<blockquote> 
 <p>awk -F":" '{$1="Demo:";print $0}' file</p> 
</blockquote> 
<ul><li> <h4 id="12.%20%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96%E7%A8%8B%E5%BA%8F%E5%91%BD%E4%BB%A4"><strong>12. 从文件中读取程序命令</strong></h4> </li></ul> 
<blockquote> 
 <p>awk -F":" -f script file<br> script内容<br> {<!-- --><br> $1=“Demo:”<br> print $0<br> }</p> 
</blockquote> 
<ul><li> <h4 id="13.%20awk%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%89%8D%E5%87%A0%E4%BD%8D"><strong>13. awk取字符串前几位</strong></h4> </li></ul> 
<blockquote> 
 <p>cat file | awk '{print substr($1,1,5)}' 分别是第1个字段，第1个字符到第5个字符</p> 
</blockquote> 
<ul><li> <h4 id="14.%20awk%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E5%8F%8C%E5%BC%95%E5%8F%B7%E5%8C%85%E5%8D%95%E5%BC%95%E5%8F%B7"><strong>14. awk中使用变量，双引号包单引号</strong></h4> </li></ul> 
<blockquote> 
 <p>awk -F" " '{print $"'$i'"}'</p> 
</blockquote> 
<ul><li> <h4 id="15.%20%E8%A1%8C%E8%BD%AC%E5%88%97"><strong>15. 行转列</strong></h4> </li></ul> 
<blockquote> 
 <p>cat file | awk -F" " '{for(i=1;i&lt;=NF;i++) print $i}'</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/714b09416450243381fc075af962e6ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Github 2023-12-16开源项目日报Top10</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f5df218726f3596b324fcdca8660ff7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">error: too many arguments to function ‘system‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>