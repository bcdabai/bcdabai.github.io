<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JMX获取jvm参数，cpu使用率，内存，线程，类等信息,实现一个简单的web版jvisualvm - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JMX获取jvm参数，cpu使用率，内存，线程，类等信息,实现一个简单的web版jvisualvm" />
<meta property="og:description" content="一 什么是JMX JMX（英语：Java Management Extensions，即Java管理扩展）是Java平台上为应用程序、设备、系统等植入管理功能的框架。JMX可以跨越一系列异构操作系统平台、系统体系结构和网络传输协议，灵活的开发无缝集成的系统、网络和服务管理应用。
以上是维基百科的介绍
JMX即Java Management Extensions（Java管理扩展），是Java SE的一部分，在Java2的时候加入到Java SE平台中，但Java5才正式发布。JMX提供了一个非常简单的途径去管理应用程序的资源，这里的所说的资源包括内存资源，磁盘资源等，而且因为JMX相关技术是动态的，所以可以在应用程序运行时监控和管理资源。
想必大家都听说过 jconsole或jvisualvm，它们就是用jmx实现的。
二 MBean 具体可参阅oracle官网
MBean是类似于JavaBeans组件的托管Java对象，它遵循JMX规范中阐明的设计模式。MBean可以代表设备，应用程序或任何需要管理的资源。MBean公开了一个包含以下内容的管理接口：
一组可读或可写的属性，或两者兼而有之。一组可调用的操作。自我描述。 在MBean实例的整个生命周期中，管理界面都不会更改。当某些预定义事件发生时，MBeans也可以发出通知。
JMX规范定义了五种类型的MBean：
Standard MBeansDynamic MBeansOpen MBeansModel MBeansMXBeans 下面介绍了一种特殊的MBean类型，称为MXBeans。
一个的MXBean是一种MBean的只引用一组预定义的数据类型。这样，您可以确保您的MBean可被任何客户端（包括远程客户端）使用，而无需客户端有权访问代表MBean类型的特定于模型的类。MXBean提供了一种方便的方法来将相关值捆绑在一起，而无需将客户端特别配置为处理捆绑。
以与标准MBean相同的方式，通过编写称为的Java接口SomethingMXBean和实现该接口的Java类来定义MXBean 。但是，与标准MBean不同，MXBean不需要调用Java类Something。接口中的每个方法都定义MXBean中的属性或操作。注释@MXBean也可以用于注释Java接口，而不是要求接口名称后跟MXBean后缀。
软件包中的Java 2 Platform Standard Edition（J2SE）5.0软件中存在MXBean java.lang.management。
包里提供了许多MXBean的接口类，可以很方便的获取到JVM的内存、GC、线程、锁、class、甚至操作系统层面的各种信息,本文就简单的介绍 一种利用JMX对JAVA进程进行CPU、堆内存使用的监控。咱们经常使用jsconsole中的（概述/内存/线程/类/vm概要）就是通过java.lang.management中的定义的MXBean 获取到的。·
目前java平台主要提供了下图所示的9个MXBean, 各个MXBean的作用根据类名大概能猜出几分，具体可查API。
java.lang.management包中的mxbean提供了基本的功能，在sum.com.management中对某些功能有所增强，当然我们也可以根据JMX规范提供自己的MXBean。
三 获取MXBean 获取MXBean有本地调用和jmxrmi(远程调用)两种方式，通过ManagementFactory（java.lang.management.ManagementFactory）工厂类获取。
ManagementFactory类是用于获取Java平台的受管Bean的工厂类。 该类由静态方法组成，每个方法返回一个或多个表示Java虚拟机组件的管理接口的平台MXBeans 。 1 本地调用 本地调用自能获取当前程序所运行的jvm所加载的MXBean信息
//获取内存 MemoryMXBean memoryMXBean = ManagementFactory.getMemoryMXBean(); //获取编译信息 CompilationMXBean compilationMXBean = ManagementFactory.getCompilationMXBean(); //获取系统信息 OperatingSystemMXBean operatingSystemMXBean = ManagementFactory.getOperatingSystemMXBean(); //获取运行时信息 RuntimeMXBean runtimeMXBean = ManagementFactory." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c779280bcb0efabe92cc718877648d95/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-17T16:51:04+08:00" />
<meta property="article:modified_time" content="2020-07-17T16:51:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JMX获取jvm参数，cpu使用率，内存，线程，类等信息,实现一个简单的web版jvisualvm</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_JMX_1"></a>一 什么是JMX</h4> 
<p><strong>JMX</strong>（英语：Java Management Extensions，即Java管理扩展）是<a href="https://zh.wikipedia.org/wiki/Java" rel="nofollow">Java</a>平台上为应用程序、设备、系统等植入管理功能的框架。JMX可以跨越一系列异构<a href="https://zh.wikipedia.org/wiki/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F" rel="nofollow">操作系统</a>平台、系统<a href="https://zh.wikipedia.org/wiki/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" rel="nofollow">体系结构</a>和<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" rel="nofollow">网络传输协议</a>，灵活的开发无缝集成的系统、网络和服务管理应用。</p> 
<p>以上是<a href="https://zh.wikipedia.org/wiki/JMX" rel="nofollow">维基百科</a>的介绍</p> 
<p>JMX即Java Management Extensions（Java管理扩展），是Java SE的一部分，在Java2的时候加入到Java SE平台中，但Java5才正式发布。JMX提供了一个非常简单的途径去管理应用程序的资源，这里的所说的资源包括内存资源，磁盘资源等，而且因为JMX相关技术是动态的，所以可以在应用程序运行时监控和管理资源。</p> 
<p>想必大家都听说过 jconsole或jvisualvm，它们就是用jmx实现的。</p> 
<h4><a id="__MBean_13"></a>二 MBean</h4> 
<p>具体可参阅<a href="https://docs.oracle.com/javase/tutorial/jmx/mbeans/index.html" rel="nofollow">oracle官网</a></p> 
<p>MBean是类似于JavaBeans组件的托管Java对象，它遵循JMX规范中阐明的设计模式。MBean可以代表设备，应用程序或任何需要管理的资源。MBean公开了一个包含以下内容的管理接口：</p> 
<ul><li>一组可读或可写的属性，或两者兼而有之。</li><li>一组可调用的操作。</li><li>自我描述。</li></ul> 
<p>在MBean实例的整个生命周期中，管理界面都不会更改。当某些预定义事件发生时，MBeans也可以发出通知。</p> 
<p>JMX规范定义了五种类型的MBean：</p> 
<ul><li>Standard MBeans</li><li>Dynamic MBeans</li><li>Open MBeans</li><li>Model MBeans</li><li>MXBeans</li></ul> 
<p>下面介绍了一种特殊的MBean类型，称为<em>MXBeans</em>。</p> 
<p>一个<em>的MXBean</em>是一种MBean的只引用一组预定义的数据类型。这样，您可以确保您的MBean可被任何客户端（包括远程客户端）使用，而无需客户端有权访问代表MBean类型的特定于模型的类。MXBean提供了一种方便的方法来将相关值捆绑在一起，而无需将客户端特别配置为处理捆绑。</p> 
<p>以与标准MBean相同的方式，通过编写称为的Java接口<code>SomethingMXBean</code>和实现该接口的Java类来定义MXBean 。但是，与标准MBean不同，MXBean不需要调用Java类<code>Something</code>。接口中的每个方法都定义MXBean中的属性或操作。注释<code>@MXBean</code>也可以用于注释Java接口，而不是要求接口名称后跟MXBean后缀。</p> 
<p>软件包中的Java 2 Platform Standard Edition（J2SE）5.0软件中存在MXBean <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/management/package-summary.html" rel="nofollow"><code>java.lang.management</code></a>。</p> 
<p>包里提供了许多MXBean的接口类，可以很方便的获取到JVM的内存、GC、线程、锁、class、甚至操作系统层面的各种信息,本文就简单的介绍 一种利用JMX对JAVA进程进行CPU、堆内存使用的监控。咱们经常使用jsconsole中的（概述/内存/线程/类/vm概要）就是通过java.lang.management中的定义的MXBean 获取到的。·<br> <img src="https://images2.imgbox.com/5a/e3/KPbEaGrM_o.png" alt="在这里插入图片描述"><br> 目前java平台主要提供了下图所示的9个MXBean, 各个MXBean的作用根据类名大概能猜出几分，具体可查API。<br> <img src="https://images2.imgbox.com/9f/c7/SvKJ0lkF_o.jpg" alt="在这里插入图片描述"><br> java.lang.management包中的mxbean提供了基本的功能，在sum.com.management中对某些功能有所增强，当然我们也可以根据JMX规范提供自己的MXBean。</p> 
<h4><a id="_MXBean_49"></a>三 获取MXBean</h4> 
<p>获取MXBean有本地调用和jmxrmi(远程调用)两种方式，通过ManagementFactory（java.lang.management.ManagementFactory）工厂类获取。</p> 
<ul><li><code>ManagementFactory</code>类是用于获取Java平台的受管Bean的工厂类。 该类由静态方法组成，每个方法返回一个或多个表示Java虚拟机组件的管理接口的<em>平台MXBeans</em> 。</li></ul> 
<h6><a id="1__55"></a>1 本地调用</h6> 
<p>本地调用自能获取当前程序所运行的jvm所加载的MXBean信息</p> 
<pre><code class="prism language-java"><span class="token comment">//获取内存</span>
MemoryMXBean memoryMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getMemoryMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取编译信息</span>
CompilationMXBean compilationMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getCompilationMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取系统信息</span>
OperatingSystemMXBean operatingSystemMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getOperatingSystemMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取运行时信息</span>
RuntimeMXBean runtimeMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getRuntimeMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取线程信息</span>
ThreadMXBean threadMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getThreadMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取类加载信息</span>
ClassLoadingMXBean classLoadingMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getClassLoadingMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取内存池的管理(如堆，元空间)信息</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>MemoryPoolMXBean<span class="token punctuation">&gt;</span></span> memoryPoolMXBeans <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getMemoryPoolMXBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取gc信息</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>GarbageCollectorMXBean<span class="token punctuation">&gt;</span></span> garbageCollectors <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getGarbageCollectorMXBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h6><a id="2_jmxrmi_79"></a>2 jmxrmi远程调用</h6> 
<pre><code class="prism language-java"><span class="token comment">//远程服务器地址</span>
<span class="token keyword">final</span> String HOSTNAME <span class="token operator">=</span> <span class="token string">"172.36.0.231"</span><span class="token punctuation">;</span>
<span class="token comment">//远程服务器端口</span>
<span class="token keyword">final</span> <span class="token keyword">int</span> PORT <span class="token operator">=</span> <span class="token number">60001</span><span class="token punctuation">;</span>
<span class="token comment">//1.构建JMX API连接器服务器的初始化地址</span>
String serviceURL <span class="token operator">=</span> <span class="token string">"service:jmx:rmi:///jndi/rmi://"</span> <span class="token operator">+</span> HOSTNAME <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> PORT <span class="token operator">+</span> <span class="token string">"/jmxrmi"</span><span class="token punctuation">;</span>
JMXServiceURL jmxServiceURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JMXServiceURL</span><span class="token punctuation">(</span>serviceURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.初始化客户端JMX API连接器,创建与给定地址的连接器服务器的连接。</span>
JMXConnector jmxConnector <span class="token operator">=</span> JMXConnectorFactory<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>jmxServiceURL<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.启动管理bean服务器连接,获取远程MBean服务器的 MBeanServerConnection对象</span>
<span class="token comment">//MBeanServerConnection 此接口表示与MBean服务器通信的方式，无论是本地还是远程。 代表本地MBean服务器的MBeanServer接口扩展了此接口。</span>
MBeanServerConnection mBeanServerConnection <span class="token operator">=</span> jmxConnector<span class="token punctuation">.</span><span class="token function">getMBeanServerConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.拿到MBeanServerConnection后就可以通过它来获取对应的MXBean</span>

<span class="token comment">//获取内存</span>
MemoryMXBean memoryMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span>newPlatformMXBeanProxy
                <span class="token punctuation">(</span>mBeanServerConnection<span class="token punctuation">,</span> ManagementFactory<span class="token punctuation">.</span>MEMORY_MXBEAN_NAME<span class="token punctuation">,</span> MemoryMXBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取编译信息</span>
CompilationMXBean compilationMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span>newPlatformMXBeanProxy
                <span class="token punctuation">(</span>mBeanServerConnection<span class="token punctuation">,</span> ManagementFactory<span class="token punctuation">.</span>COMPILATION_MXBEAN_NAME<span class="token punctuation">,</span> CompilationMXBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取系统信息</span>
OperatingSystemMXBean systemMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">newPlatformMXBeanProxy</span><span class="token punctuation">(</span>
    mBeanServerConnection<span class="token punctuation">,</span>
    ManagementFactory<span class="token punctuation">.</span>OPERATING_SYSTEM_MXBEAN_NAME<span class="token punctuation">,</span>
    com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>OperatingSystemMXBean<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取运行时信息</span>
RuntimeMXBean runtimeMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">newPlatformMXBeanProxy</span><span class="token punctuation">(</span>
    mBeanServerConnection<span class="token punctuation">,</span>
    ManagementFactory<span class="token punctuation">.</span>RUNTIME_MXBEAN_NAME<span class="token punctuation">,</span>
    RuntimeMXBean<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取线程信息</span>
ThreadMXBean threadMXBean <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">newPlatformMXBeanProxy</span><span class="token punctuation">(</span>
    mBeanServerConnection<span class="token punctuation">,</span>
    ManagementFactory<span class="token punctuation">.</span>THREAD_MXBEAN_NAME<span class="token punctuation">,</span>
    ThreadMXBean<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取类加载信息</span>
ClassLoadingMXBean classLoading <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">newPlatformMXBeanProxy</span><span class="token punctuation">(</span>
    mBeanServerConnection<span class="token punctuation">,</span>
    ManagementFactory<span class="token punctuation">.</span>CLASS_LOADING_MXBEAN_NAME<span class="token punctuation">,</span>
    ClassLoadingMXBean<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取内存信息</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>MemoryPoolMXBean<span class="token punctuation">&gt;</span></span> memoryPool <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getPlatformMXBeans</span><span class="token punctuation">(</span>mBeanServerConnection<span class="token punctuation">,</span> MemoryPoolMXBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取gc信息</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>GarbageCollectorMXBean<span class="token punctuation">&gt;</span></span> garbageCollectors <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getPlatformMXBeans</span><span class="token punctuation">(</span>mBeanServerConnection<span class="token punctuation">,</span> GarbageCollectorMXBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_MXBean_135"></a>四 MXBean使用</h4> 
<p>这个基本就是些api的调用,除了 获取cpu使用情况/gc垃圾回收活动情况需要少量计算，其他信息基本都可以拿到。</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>jmx<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>ClassLoadingMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>CompilationMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>GarbageCollectorMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>ManagementFactory<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>MemoryPoolMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>MemoryUsage<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>OperatingSystemMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>RuntimeMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>management<span class="token punctuation">.</span>ThreadMXBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>DecimalFormat<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>DecimalFormatSymbols<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>NumberFormat<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Locale<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>TimeUnit<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeapMain</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> NumberFormat fmtI <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormat</span><span class="token punctuation">(</span><span class="token string">"###,###"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormatSymbols</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>ENGLISH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> NumberFormat fmtD <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormat</span><span class="token punctuation">(</span><span class="token string">"###,##0.000"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormatSymbols</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>ENGLISH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//运行时情况</span>
        RuntimeMXBean runtime <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getRuntimeMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//操作系统情况</span>
        com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>OperatingSystemMXBean  os <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getPlatformMXBean</span><span class="token punctuation">(</span>com<span class="token punctuation">.</span>sun<span class="token punctuation">.</span>management<span class="token punctuation">.</span>OperatingSystemMXBean<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//线程使用情况</span>
        ThreadMXBean threads <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getThreadMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//堆内存使用情况</span>
        MemoryUsage heapMemoryUsage <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getMemoryMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeapMemoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//非堆内存使用情况</span>
        MemoryUsage nonHeapMemoryUsage <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getMemoryMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNonHeapMemoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//类加载情况</span>
        ClassLoadingMXBean cl <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getClassLoadingMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//内存池对象</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>MemoryPoolMXBean<span class="token punctuation">&gt;</span></span> pools <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getMemoryPoolMXBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//编译器和编译情况</span>
        CompilationMXBean cm <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getCompilationMXBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取GC对象</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>GarbageCollectorMXBean<span class="token punctuation">&gt;</span></span> gcmList <span class="token operator">=</span> ManagementFactory<span class="token punctuation">.</span><span class="token function">getGarbageCollectorMXBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//运行时情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.name (JVM名称-版本号-供应商):%s | version: %s | vendor: %s  %n"</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getVmName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getVmVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getVmVendor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.spec.name (JVM规范名称-版本号-供应商):%s | version: %s | vendor: %s  %n"</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getSpecName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getSpecVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getSpecVendor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.java.version (JVM JAVA版本):%s%n"</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"java.version"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.start.time (Java虚拟机的启动时间):%s%n"</span><span class="token punctuation">,</span> <span class="token function">toDuration</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.uptime (Java虚拟机的正常运行时间):%s%n"</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getInputArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.uptime (Java虚拟机的正常运行时间):%s%n"</span><span class="token punctuation">,</span> <span class="token function">toDuration</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">getUptime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.getInputArguments (JVM 启动参数):%s%n"</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getInputArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.getSystemProperties (获取系统属性):%s%n"</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">getSystemProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取cpu使用情况/gc垃圾回收活动情况</span>
        Thread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">showCpu</span><span class="token punctuation">(</span>runtime<span class="token punctuation">,</span> os<span class="token punctuation">,</span> gcmList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//编译情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"compilation.name(编译器名称)：%s%n"</span><span class="token punctuation">,</span>cm<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"compilation.total.time(编译器耗时)：%d毫秒%n"</span><span class="token punctuation">,</span>cm<span class="token punctuation">.</span><span class="token function">getTotalCompilationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> isSupport<span class="token operator">=</span>cm<span class="token punctuation">.</span><span class="token function">isCompilationTimeMonitoringSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isSupport<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"支持即时编译器编译监控"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"不支持即时编译器编译监控"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//JVM 线程情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.threads.total.count (总线程数(守护+非守护)):%d%n"</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">getThreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.threads.daemon.count (守护进程线程数):%d%n"</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">getDaemonThreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.threads.peak.count (峰值线程数):%d%n"</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">getPeakThreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.threads.total.start.count(Java虚拟机启动后创建并启动的线程总数):%d%n"</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">getTotalStartedThreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Long threadId <span class="token operator">:</span> threads<span class="token punctuation">.</span><span class="token function">getAllThreadIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"threadId: %d | threadName: %s%n"</span><span class="token punctuation">,</span> threadId<span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">getThreadInfo</span><span class="token punctuation">(</span>threadId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getThreadName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取GC信息</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>GarbageCollectorMXBean collectorMXBean <span class="token operator">:</span> gcmList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"collectorMXBean.getCollectionCount(%s 垃圾回收器执行次数):%d%n"</span><span class="token punctuation">,</span>collectorMXBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> collectorMXBean<span class="token punctuation">.</span><span class="token function">getCollectionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"collectorMXBean.getCollectionTime(%s 垃圾回收器执行时间):%d%n"</span><span class="token punctuation">,</span>collectorMXBean<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> collectorMXBean<span class="token punctuation">.</span><span class="token function">getCollectionTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//堆内存情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.heap.init (初始化堆内存):%s %n"</span><span class="token punctuation">,</span>  <span class="token function">bytesToMB</span><span class="token punctuation">(</span>heapMemoryUsage<span class="token punctuation">.</span><span class="token function">getInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.heap.used (已使用堆内存):%s %n"</span><span class="token punctuation">,</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>heapMemoryUsage<span class="token punctuation">.</span><span class="token function">getUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.heap.committed (可使用堆内存):%s %n"</span><span class="token punctuation">,</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>heapMemoryUsage<span class="token punctuation">.</span><span class="token function">getCommitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.heap.max (最大堆内存):%s %n"</span><span class="token punctuation">,</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>heapMemoryUsage<span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//非堆内存使用情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.noheap.init (初始化非堆内存):%s %n"</span><span class="token punctuation">,</span>  <span class="token function">bytesToMB</span><span class="token punctuation">(</span>nonHeapMemoryUsage<span class="token punctuation">.</span><span class="token function">getInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.noheap.used (已使用非堆内存):%s %n"</span><span class="token punctuation">,</span>  <span class="token function">bytesToMB</span><span class="token punctuation">(</span>nonHeapMemoryUsage<span class="token punctuation">.</span><span class="token function">getUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.noheap.committed (可使用非堆内存):%s %n"</span><span class="token punctuation">,</span>  <span class="token function">bytesToMB</span><span class="token punctuation">(</span>nonHeapMemoryUsage<span class="token punctuation">.</span><span class="token function">getCommitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"jvm.noheap.max (最大非堆内存):%s %n"</span><span class="token punctuation">,</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>nonHeapMemoryUsage<span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//系统概况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"os.name(操作系统名称-版本号):%s %s %s %n"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"version"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"os.arch(操作系统内核):%s%n"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">getArch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"os.cores(可用的处理器数量):%s %n"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">getAvailableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"os.loadAverage(系统负载平均值):%s %n"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">getSystemLoadAverage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//类加载情况</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"class.current.load.count(当前加载类数量):%s %n"</span><span class="token punctuation">,</span> cl<span class="token punctuation">.</span><span class="token function">getLoadedClassCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"class.unload.count(未加载类数量):%s %n"</span><span class="token punctuation">,</span> cl<span class="token punctuation">.</span><span class="token function">getUnloadedClassCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"class.total.load.count(总加载类数量):%s %n"</span><span class="token punctuation">,</span> cl<span class="token punctuation">.</span><span class="token function">getTotalLoadedClassCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span>MemoryPoolMXBean pool <span class="token operator">:</span> pools<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">final</span> String kind <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> MemoryUsage usage <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">getUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内存模型： "</span> <span class="token operator">+</span> <span class="token function">getKindName</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 内存空间名称： "</span> <span class="token operator">+</span> <span class="token function">getPoolName</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", jvm."</span> <span class="token operator">+</span> pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".init(初始化):"</span> <span class="token operator">+</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>usage<span class="token punctuation">.</span><span class="token function">getInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内存模型： "</span> <span class="token operator">+</span> <span class="token function">getKindName</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 内存空间名称： "</span> <span class="token operator">+</span> <span class="token function">getPoolName</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", jvm."</span> <span class="token operator">+</span> pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".used(已使用): "</span> <span class="token operator">+</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>usage<span class="token punctuation">.</span><span class="token function">getUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内存模型： "</span> <span class="token operator">+</span> <span class="token function">getKindName</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 内存空间名称： "</span> <span class="token operator">+</span> <span class="token function">getPoolName</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", jvm."</span> <span class="token operator">+</span> pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">".committed(可使用):"</span> <span class="token operator">+</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>usage<span class="token punctuation">.</span><span class="token function">getCommitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"内存模型： "</span> <span class="token operator">+</span> <span class="token function">getKindName</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 内存空间名称： "</span> <span class="token operator">+</span> <span class="token function">getPoolName</span><span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", jvm."</span> <span class="token operator">+</span> pool<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".max(最大):"</span> <span class="token operator">+</span> <span class="token function">bytesToMB</span><span class="token punctuation">(</span>usage<span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------------------------------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showCpu</span><span class="token punctuation">(</span>RuntimeMXBean runtime<span class="token punctuation">,</span>OperatingSystemMXBean os<span class="token punctuation">,</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>GarbageCollectorMXBean<span class="token punctuation">&gt;</span></span> gcmList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//上一个cpu运行记录时间点</span>
        <span class="token keyword">long</span> prevUpTime <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">getUptime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//当时cpu运行时间</span>
        <span class="token keyword">long</span> upTime<span class="token punctuation">;</span>
        <span class="token comment">//上一次cpu运行总时间</span>
        <span class="token keyword">long</span> prevProcessCpuTime <span class="token operator">=</span>  os<span class="token punctuation">.</span><span class="token function">getProcessCpuTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//当前cpu运行总时间</span>
        <span class="token keyword">long</span> processCpuTime<span class="token punctuation">;</span>
        <span class="token comment">//上一次gc运行总时间</span>
        <span class="token keyword">long</span> prevProcessGcTime <span class="token operator">=</span> <span class="token function">getTotalGarbageCollectionTime</span><span class="token punctuation">(</span>gcmList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//当前gc运行总时间</span>
        <span class="token keyword">long</span> processGcTime<span class="token punctuation">;</span>
        <span class="token comment">//可用内核数量</span>
        <span class="token keyword">int</span> processorCount <span class="token operator">=</span>os<span class="token punctuation">.</span><span class="token function">getAvailableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            processCpuTime <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">getProcessCpuTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            processGcTime <span class="token operator">=</span> <span class="token function">getTotalGarbageCollectionTime</span><span class="token punctuation">(</span>gcmList<span class="token punctuation">)</span><span class="token punctuation">;</span>
            upTime <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">getUptime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> upTimeDiff <span class="token operator">=</span> upTime <span class="token operator">-</span> prevUpTime<span class="token punctuation">;</span>
            <span class="token comment">//计算cpu使用率</span>
            <span class="token keyword">long</span> processTimeDiff <span class="token operator">=</span> processCpuTime <span class="token operator">-</span> prevProcessCpuTime<span class="token punctuation">;</span>
            <span class="token comment">//processTimeDiff 取到得是纳秒数  1ms = 1000000ns</span>
            <span class="token keyword">double</span> cpuDetail <span class="token operator">=</span> processTimeDiff <span class="token operator">*</span> <span class="token number">100.0</span> <span class="token operator">/</span><span class="token number">1000000</span><span class="token operator">/</span> processorCount <span class="token operator">/</span> upTimeDiff<span class="token punctuation">;</span>
            <span class="token comment">//计算gccpu使用率</span>
            <span class="token keyword">long</span> processGcTimeDiff <span class="token operator">=</span> processGcTime <span class="token operator">-</span> prevProcessGcTime<span class="token punctuation">;</span>
            <span class="token keyword">double</span> gcDetail <span class="token operator">=</span> processGcTimeDiff <span class="token operator">*</span> <span class="token number">100.0</span> <span class="token operator">/</span><span class="token number">1000000</span><span class="token operator">/</span> processorCount <span class="token operator">/</span> upTimeDiff<span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"cpu使用率：%s ,gc使用率：%s %n"</span><span class="token punctuation">,</span>cpuDetail<span class="token punctuation">,</span>gcDetail<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            prevProcessCpuTime <span class="token operator">=</span> processCpuTime<span class="token punctuation">;</span>
            prevUpTime <span class="token operator">=</span> upTime<span class="token punctuation">;</span>
            prevProcessGcTime <span class="token operator">=</span>processGcTime<span class="token punctuation">;</span>
            i<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 垃圾回收期总耗时
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">getTotalGarbageCollectionTime</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>GarbageCollectorMXBean<span class="token punctuation">&gt;</span></span> gcmList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>L<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>GarbageCollectorMXBean collectorMXBean <span class="token operator">:</span> gcmList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            total<span class="token operator">+=</span>collectorMXBean<span class="token punctuation">.</span><span class="token function">getCollectionTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> total<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> String <span class="token function">getKindName</span><span class="token punctuation">(</span>String kind<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"NON_HEAP"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token string">"NON_HEAP(非堆内存)"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token string">"HEAP(堆内存)"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> String <span class="token function">getPoolName</span><span class="token punctuation">(</span>String poolName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>poolName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> <span class="token string">"Code Cache"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(代码缓存区)"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"Metaspace"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(元空间)"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"Compressed Class Space"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(类指针压缩空间)"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"PS Eden Space"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(伊甸园区)"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"PS Survivor Space"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(幸存者区)"</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">"PS Old Gen"</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName <span class="token operator">+</span><span class="token string">"(老年代)"</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">return</span> poolName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">protected</span> <span class="token keyword">static</span> String <span class="token function">bytesToMB</span><span class="token punctuation">(</span><span class="token keyword">long</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token punctuation">(</span>bytes <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" MB"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> String <span class="token function">printSizeInKb</span><span class="token punctuation">(</span><span class="token keyword">double</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>size <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" kbytes"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> String <span class="token function">toDuration</span><span class="token punctuation">(</span><span class="token keyword">double</span> uptime<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        uptime <span class="token operator">/=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uptime <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> fmtD<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>uptime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" seconds"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        uptime <span class="token operator">/=</span> <span class="token number">60</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uptime <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">long</span> minutes <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> uptime<span class="token punctuation">;</span>
            String s <span class="token operator">=</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>minutes<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>minutes <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">" minutes"</span> <span class="token operator">:</span> <span class="token string">" minute"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        uptime <span class="token operator">/=</span> <span class="token number">60</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uptime <span class="token operator">&lt;</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">long</span> hours <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> uptime<span class="token punctuation">;</span>
            <span class="token keyword">long</span> minutes <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uptime <span class="token operator">-</span> hours<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String s <span class="token operator">=</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>hours<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">" hours"</span> <span class="token operator">:</span> <span class="token string">" hour"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>minutes <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                s <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>minutes<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>minutes <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">" minutes"</span> <span class="token operator">:</span> <span class="token string">" minute"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> s<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        uptime <span class="token operator">/=</span> <span class="token number">24</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> days <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> uptime<span class="token punctuation">;</span>
        <span class="token keyword">long</span> hours <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>uptime <span class="token operator">-</span> days<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>days<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>days <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">" days"</span> <span class="token operator">:</span> <span class="token string">" day"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            s <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> fmtI<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>hours<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">" hours"</span> <span class="token operator">:</span> <span class="token string">" hour"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="__jconsolejvisualvm_395"></a>五 自己来实现一个 jconsole或jvisualvm</h4> 
<p>掌握了api后，掌握一点前端技能，或者swing,JavaFXML可视化技能，基本就可以来自己实现一个 jconsole或jvisualvm。</p> 
<p>下面是我用vue(近年来很火的前端框架)+echarts(前端可视化库)+springBoot实现的一个<strong>简陋</strong>的jvisualvm，感兴趣的可与去看看 <a href="https://github.com/AndsGo/JmsWeb">源码</a></p> 
<p><img src="https://images2.imgbox.com/52/24/R5Ygsbmy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e0/73/7EJYirKX_o.png" alt="在这里插入图片描述"></p> 
<p>参考文章</p> 
<p><a href="https://www.cnblogs.com/zhengah/p/4962352.html" rel="nofollow">https://www.cnblogs.com/zhengah/p/4962352.html</a></p> 
<p><a href="http://blog.kail.xyz/post/2018-07-08/java/jmx-monitoring-data.html" rel="nofollow">http://blog.kail.xyz/post/2018-07-08/java/jmx-monitoring-data.html</a></p> 
<p><a href="https://blog.csdn.net/tian6318/article/details/86485899">https://blog.csdn.net/tian6318/article/details/86485899</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f161ffca53a758404e9e706cae322b1b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">.net core 3.1  webapi接口项目框架搭建二：JWT 身份验证</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48bf19f2afcf250366939573da427f7b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Elasticsearch Java API使用详解（基本操作增删改、条件查询QueryBuilders、映射mapping）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>