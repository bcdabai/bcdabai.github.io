<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python画相关性可视化图_Python可视化matplotlib&amp;seborn16-相关性热图 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python画相关性可视化图_Python可视化matplotlib&amp;seborn16-相关性热图" />
<meta property="og:description" content="本文速览普通相关性heatmap聚类相关性heatmap
本文将了解到什么？
1、数据准备
2、seaborn.heatmap绘制correlation heatmap
默认参数绘制correlation heatmap
vmax设置颜色深浅
cmp参数变换colormap
annot、fmt、annot_kws设置格子中文本
mask设置部分数据显示
3、seaborn.clustermap绘制correlation clustermap
1、数据准备
关键一步，使用pandas的corr函数生成相关矩阵。
from string import ascii_letters
import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import palettable
# 生成随机数
rs = np.random.RandomState(33)#类似np.random.seed，即每次括号中的种子33不变，每次可获得相同的随机数
d = pd.DataFrame(data=rs.normal(size=(100, 26)),#normal生成高斯分布的概率密度随机数，需要在变量rs下使用
columns=list(ascii_letters[26:]))
# corr函数计算相关性矩阵(correlation matrix)
dcorr = d.corr(method=&#39;pearson&#39;)#默认为&#39;pearson&#39;检验，可选&#39;kendall&#39;,&#39;spearman&#39;
简单看下原始数据集，如下：可以简单理解为一个具有26个变量（A-Z）,每个变量具有100个平行的矩阵。
经过corr函数变换后 ，变成26x26的方形矩阵。
2、seaborn.heatmap绘制correlation heatmap
默认参数绘制correlation heatmap
plt.figure(figsize=(11, 9),dpi=100)
sns.heatmap(data=dcorr,
)
vmax设置颜色深浅
plt.figure(figsize=(11, 9),dpi=100)
sns.heatmap(data=dcorr,
vmax=0.3, #上图颜色太深，不美观，让整体颜色变浅点" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6d89496a7542d6e135e72a64297bdc33/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-20T22:34:53+08:00" />
<meta property="article:modified_time" content="2020-11-20T22:34:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python画相关性可视化图_Python可视化matplotlib&amp;seborn16-相关性热图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="center">本文速览普通相关性heatmap聚类相关性heatmap</p> 
<p>本文将了解到什么？</p> 
<p>1、数据准备</p> 
<p>2、seaborn.heatmap绘制correlation heatmap</p> 
<p>默认参数绘制correlation heatmap</p> 
<p>vmax设置颜色深浅</p> 
<p>cmp参数变换colormap</p> 
<p>annot、fmt、annot_kws设置格子中文本</p> 
<p>mask设置部分数据显示</p> 
<p>3、seaborn.clustermap绘制correlation clustermap</p> 
<p>1、数据准备</p> 
<p>关键一步，使用pandas的corr函数生成相关矩阵。</p> 
<p>from string import ascii_letters</p> 
<p>import numpy as np</p> 
<p>import pandas as pd</p> 
<p>import seaborn as sns</p> 
<p>import matplotlib.pyplot as plt</p> 
<p>import palettable</p> 
<p># 生成随机数</p> 
<p>rs = np.random.RandomState(33)#类似np.random.seed，即每次括号中的种子33不变，每次可获得相同的随机数</p> 
<p>d = pd.DataFrame(data=rs.normal(size=(100, 26)),#normal生成高斯分布的概率密度随机数，需要在变量rs下使用</p> 
<p>columns=list(ascii_letters[26:]))</p> 
<p># corr函数计算相关性矩阵(correlation matrix)</p> 
<p>dcorr = d.corr(method='pearson')#默认为'pearson'检验，可选'kendall','spearman'</p> 
<p align="center">简单看下原始数据集，如下：可以简单理解为一个具有26个变量（A-Z）,每个变量具有100个平行的矩阵。</p> 
<p align="center">经过corr函数变换后 ，变成26x26的方形矩阵。</p> 
<p>2、seaborn.heatmap绘制correlation heatmap</p> 
<p>默认参数绘制correlation heatmap</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p align="center"> )</p> 
<p>vmax设置颜色深浅</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p>vmax=0.3, #上图颜色太深，不美观，让整体颜色变浅点</p> 
<p align="center"> )</p> 
<p>cmp参数变换colormap</p> 
<p>关于colormap可参考：</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors, #换个colormap</p> 
<p align="center"> )</p> 
<p>annot、fmt、annot_kws设置格子中文本</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors,</p> 
<p>annot=True,#图中数字文本显示</p> 
<p>fmt=".2f",#格式化输出图中数字，即保留小数位数等</p> 
<p>annot_kws={'size':8,'weight':'normal', 'color':'#253D24'},#数字属性设置，例如字号、磅值、颜色</p> 
<p align="center"> )</p> 
<p>mask设置部分数据显示</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors,</p> 
<p>annot=True,</p> 
<p>fmt=".2f",</p> 
<p>annot_kws={'size':8,'weight':'normal', 'color':'#253D24'},</p> 
<p>mask=np.triu(np.ones_like(dcorr,dtype=np.bool))#显示对脚线下面部分图</p> 
<p align="center"> )</p> 
<p>square、linewidths、 cbar_kws设置方格外框、图例设置</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.heatmap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors,</p> 
<p>annot=True,</p> 
<p>fmt=".2f",</p> 
<p>annot_kws={'size':8,'weight':'normal', 'color':'#253D24'},</p> 
<p>mask=np.triu(np.ones_like(dcorr,dtype=np.bool)),#显示对脚线下面部分图</p> 
<p>square=True, linewidths=.5,#每个方格外框显示，外框宽度设置</p> 
<p>cbar_kws={"shrink": .5}</p> 
<p align="center"> )</p> 
<p>3、seaborn.clustermap绘制correlation clustermap</p> 
<p>plt.figure(figsize=(11, 9),dpi=100)</p> 
<p>sns.clustermap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors,</p> 
<p>linewidths=.75,</p> 
<p>)</p> 
<p align="center"></p> 
<p>注意左上方分类条</p> 
<p>row_c = dict(zip(list(ascii_letters[26:]), plt.get_cmap('RdPu')(np.linspace(0, 1, 26))))</p> 
<p>index_c = dict(zip(list(ascii_letters[26:]), plt.get_cmap('RdPu')(np.linspace(0, 1, 26))))</p> 
<p>sns.set(style="ticks")</p> 
<p>plt.figure(figsize=(13, 13))</p> 
<p>sns.clustermap(data=dcorr,</p> 
<p>vmax=0.3,</p> 
<p>cmap=palettable.cmocean.diverging.Curl_10.mpl_colors,</p> 
<p>linewidths=.75,</p> 
<p>row_colors=pd.Series(dcorr.columns.get_level_values(None), index=dcorr.columns).map(row_c), #行方向聚类用颜色区分不同类</p> 
<p>col_colors=pd.Series(dcorr.columns.get_level_values(None), index=dcorr.columns).map(index_c),</p> 
<p>dendrogram_ratio=0.15,# 图放大缩小</p> 
<p align="center"> )</p> 
<p>相关性热图（correlation heatmap&amp; correlation clustermap）是heatmap和clustermap的变种，更多参数设置请戳：</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae87ea086530d1da8fb48859c7224983/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用python计算圆球的体积_python中球体的体积</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/482cb262b9fe3c55061b4e53b5844c21/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python machine learning_开源《Python 机器学习》-Python Machine Learning第一版&#43;第二版（附电子版 pdf）...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>