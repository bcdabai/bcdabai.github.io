<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>set_multicycle_path - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="set_multicycle_path" />
<meta property="og:description" content="多周期路径 利用这一约束可以修改STA时序分析的建立和保持关系。
单周期路径 默认情况下Vivado执行单周期的检查。
setup 一个周期hold零个周期 如下图所示：
建立 建立关系是发送沿和捕获沿的关系。建立要求 = 捕获沿 - 发送沿 STA实际会找到所有的建立要求，在图中仅画出最严苛的情况，因为STA时序只计算最严苛的情况，也就是建立要求的最小值，我们知道正常情况下，setup是正数才对，而正得越多建立的松弛（建立后的余量，越容易达到建立条件）越多，对应数值越大，所以这里要选择小的，即建立松弛小的。
保持 这里有两个保持要求：
hold1 保持关系的发送沿==（默认就是上图的发送沿）发的数据不能被到达沿(默认是上图捕获沿的前一个周期)==捕获。保持要求 = 到达沿 - 保持关系发送沿。保持关系是到达沿与保持关系发送沿的关系。因为保持关系发送沿可以根据约束移动，所以不一定保持关系发送沿的下一个周期就是源时钟的下一个发送沿。 hold2 保持关系的发送沿的下一个发送沿==（默认就是发送沿的下一个周期即上图的下一个发送沿）==发送的数据不能被捕获沿捕获。保持要求 = 捕获沿 - 保持关系的发送沿的下一个发送沿。保持关系是到达沿下一个周期==（默认是捕获沿）与保持关系的发送沿的下一个发送沿（默认就是发送沿的下一个周期即上图的下一个发送沿）==关系。因为到达沿可以根据约束移动，所以不一定到达沿下一个周期就是目的时钟捕获沿。 STA时序只计算最严苛的情况，也就是两个保持要求的最大值，我们知道正常情况下，hold1和hold2都是负数才对，因此而负得越多保持的松弛（保持后的余量，越容易达到保持条件）越多，而对应数值越小，所以这里要选择大的，即保持松弛小的。实际上第二个保持关系与第一个保持关系是同一个意思，发送沿当作下个发送沿，则到达沿就是捕获沿。每个建立条件都有两个保持关系，而建立条件的最严苛不一定对应于保持关系的最严苛，STA是单独计算的。换句话就是STA会找一个公共周期（在0位置对齐的相位开始，还有相同的对齐相位）内的所有建立关系，并选择最小的为关注点，每一个建立关系都有两个保持关系，STA会选择最大的为关注点，最大关注点保持关系不一定对应于最小关注点的建立关系。
建立保持检查 默认的STA将执行以下的建立与保持关系检查。
建立检查
TDatapath(max) &lt; TCLK(t=Period) - TSetup 保持检查
TDatapath(min) &gt; TCLK(t=0) &#43; THold 对于其他情况下，可能需要多个周期或者为了让终端接收到稳定的数据，需要多个时钟周期才能将数据稳定。
用法 set_multicycle_path &lt;path_multiplier&gt; [-setup|-hold] [-start|-end] [-from &lt;startpoints&gt;] [-to &lt;endpoints&gt;] [-through &lt;pins|cells|nets&gt;] 保持关系在大多数情况下跟着建立关系走，且有下面的公式，默认情况下 setup path multiplier = 1，hold path multiplier = 0
h o l d _ c y c l e s = &lt; s e t u p p a t h m u l t i p l i e r &gt; − 1 − &lt; h o l d p a t h m u l t i p l i e r &gt; = 1 − 1 − 0 = 0 \begin{aligned} hold\_cycles &amp;= &lt;setup path multiplier&gt; - 1 - &lt;hold path multiplier&gt;\\ &amp;= 1 - 1 -0\\ &amp;= 0 \end{aligned} hold_cycles​=&lt;setuppathmultiplier&gt;−1−&lt;holdpathmultiplier&gt;=1−1−0=0​" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5830aca4d097e35e380c1777852a6218/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-13T08:36:49+08:00" />
<meta property="article:modified_time" content="2021-06-13T08:36:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">set_multicycle_path</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_2"></a>多周期路径</h2> 
<p>利用这一约束可以修改STA时序分析的建立和保持关系。</p> 
<h3><a id="_6"></a>单周期路径</h3> 
<p>默认情况下Vivado执行单周期的检查。</p> 
<ul><li>setup 一个周期</li><li>hold零个周期</li></ul> 
<p>如下图所示：</p> 
<p><img src="https://images2.imgbox.com/91/5f/15LTxuay_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_19"></a>建立</h4> 
<ul><li>建立关系是发送沿和捕获沿的关系。</li><li>建立要求 = 捕获沿 - 发送沿</li></ul> 
<p>STA实际会找到所有的建立要求，在图中仅画出最严苛的情况，因为STA时序只计算最严苛的情况，也就是建立要求的最小值，我们知道正常情况下，setup是正数才对，而正得越多建立的松弛（建立后的余量，越容易达到建立条件）越多，对应数值越大，所以这里要选择小的，即建立松弛小的。</p> 
<h4><a id="_26"></a>保持</h4> 
<p>这里有两个保持要求：</p> 
<ul><li>hold1 
  <ul><li>保持关系的发送沿==（默认就是上图的发送沿）<mark>发的数据不能被到达沿</mark>(默认是上图捕获沿的前一个周期)==捕获。</li><li>保持要求 = 到达沿 - 保持关系发送沿。</li><li>保持关系是到达沿与保持关系发送沿的关系。</li><li>因为保持关系发送沿可以根据约束移动，所以不一定保持关系发送沿的下一个周期就是源时钟的下一个发送沿。</li></ul> </li><li>hold2 
  <ul><li>保持关系的发送沿的下一个发送沿==（默认就是发送沿的下一个周期即上图的下一个发送沿）==发送的数据不能被捕获沿捕获。</li><li>保持要求 = 捕获沿 - 保持关系的发送沿的下一个发送沿。</li><li>保持关系是到达沿下一个周期==（默认是捕获沿）<mark>与保持关系的发送沿的下一个发送沿</mark>（默认就是发送沿的下一个周期即上图的下一个发送沿）==关系。</li><li>因为到达沿可以根据约束移动，所以不一定到达沿下一个周期就是目的时钟捕获沿。</li></ul> </li></ul> 
<p>STA时序只计算最严苛的情况，也就是两个保持要求的最大值，我们知道正常情况下，hold1和hold2都是负数才对，因此而负得越多保持的松弛（保持后的余量，越容易达到保持条件）越多，而对应数值越小，所以这里要选择大的，即保持松弛小的。实际上第二个保持关系与第一个保持关系是同一个意思，发送沿当作下个发送沿，则到达沿就是捕获沿。每个建立条件都有两个保持关系，而建立条件的最严苛不一定对应于保持关系的最严苛，STA是单独计算的。换句话就是STA会找一个公共周期（在0位置对齐的相位开始，还有相同的对齐相位）内的所有建立关系，并选择最小的为关注点，每一个建立关系都有两个保持关系，STA会选择最大的为关注点，最大关注点保持关系不一定对应于最小关注点的建立关系。</p> 
<h4><a id="_43"></a>建立保持检查</h4> 
<p>默认的STA将执行以下的建立与保持关系检查。</p> 
<ul><li> <p>建立检查</p> 
  <ul><li>TDatapath(max) &lt; TCLK(t=Period) - TSetup</li></ul> </li><li> <p>保持检查</p> 
  <ul><li>TDatapath(min) &gt; TCLK(t=0) + THold</li></ul> </li></ul> 
<p>对于其他情况下，可能需要多个周期或者为了让终端接收到稳定的数据，需要多个时钟周期才能将数据稳定。</p> 
<h2><a id="_55"></a>用法</h2> 
<pre><code class="prism language-verilog">set_multicycle_path &lt;path_multiplier&gt; [-setup|-hold] [-start|-end] [-from &lt;startpoints&gt;] [-to &lt;endpoints&gt;] [-through &lt;pins|cells|nets&gt;]
</code></pre> 
<p>保持关系在大多数情况下跟着建立关系走，且有下面的公式，默认情况下 setup path multiplier = 1，hold path multiplier = 0<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
           
            
            
              h 
             
            
              o 
             
            
              l 
             
            
              d 
             
            
              _ 
             
            
              c 
             
            
              y 
             
            
              c 
             
            
              l 
             
            
              e 
             
            
              s 
             
            
           
          
          
           
            
             
            
              = 
             
            
              &lt; 
             
            
              s 
             
            
              e 
             
            
              t 
             
            
              u 
             
            
              p 
             
            
              p 
             
            
              a 
             
            
              t 
             
            
              h 
             
            
              m 
             
            
              u 
             
            
              l 
             
            
              t 
             
            
              i 
             
            
              p 
             
            
              l 
             
            
              i 
             
            
              e 
             
            
              r 
             
            
              &gt; 
             
            
              − 
             
            
              1 
             
            
              − 
             
            
              &lt; 
             
            
              h 
             
            
              o 
             
            
              l 
             
            
              d 
             
            
              p 
             
            
              a 
             
            
              t 
             
            
              h 
             
            
              m 
             
            
              u 
             
            
              l 
             
            
              t 
             
            
              i 
             
            
              p 
             
            
              l 
             
            
              i 
             
            
              e 
             
            
              r 
             
            
              &gt; 
             
            
           
          
         
         
          
           
            
           
          
          
           
            
             
            
              = 
             
            
              1 
             
            
              − 
             
            
              1 
             
            
              − 
             
            
              0 
             
            
           
          
         
         
          
           
            
           
          
          
           
            
             
            
              = 
             
            
              0 
             
            
           
          
         
        
       
         \begin{aligned} hold\_cycles &amp;= &lt;setup path multiplier&gt; - 1 - &lt;hold path multiplier&gt;\\ &amp;= 1 - 1 -0\\ &amp;= 0 \end{aligned} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 4.5em; vertical-align: -2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span><br> 因此 setup 1 周期，hold 0 周期。</p> 
<h3><a id="path_multiplier_71"></a>&lt;path_multiplier&gt;</h3> 
<p>设置检查的周期的个数</p> 
<h3><a id="setuphold_75"></a>[-setup|-hold]</h3> 
<p>修改建立或者保持关系</p> 
<h3><a id="startend_79"></a>[-start|-end]</h3> 
<h4><a id="setup_81"></a>setup</h4> 
<p>建立关系默认是与目的时钟相关联的，在设置&lt;path_multiplier&gt;建立检查将会移动目的时钟的捕获沿。</p> 
<pre><code class="prism language-verilog">set_multicycle_path &lt;path_multiplier&gt; -setup -end 等价于 set_multicycle_path &lt;path_multiplier&gt; -setup
</code></pre> 
<p>想让建立关系与源时钟相关联的，则加上[-start]建立检查将会移动源时钟的发送沿。</p> 
<pre><code class="prism language-verilog">set_multicycle_path &lt;path_multiplier&gt; -setup -start
</code></pre> 
<h4><a id="hold_95"></a>hold</h4> 
<p>保持关系默认是与源时钟相关联的，在设置&lt;path_multiplier&gt;保持检查将会移动源时钟的发送沿。</p> 
<pre><code class="prism language-verilog">set_multicycle_path &lt;path_multiplier&gt; -hold -start 等价于 set_multicycle_path &lt;path_multiplier&gt; -hold
</code></pre> 
<p>想让保持关系与目的时钟相关联的，则加上[-end]保持检查移动目的时钟的到达沿（捕获沿的前一个周期）。</p> 
<pre><code class="prism language-verilog">set_multicycle_path &lt;path_multiplier&gt; -hold -end
</code></pre> 
<p>很绕口，随后有例子详细解释。</p> 
<h3><a id="from_startpoints_to_endpoints_111"></a>[-from &lt;startpoints&gt;] [-to &lt;endpoints&gt;]</h3> 
<p>设置一个合适的路径起点和终点</p> 
<h3><a id="through_pinscellsnets_115"></a>[-through &lt;pins|cells|nets&gt;]</h3> 
<p>或者所有通过这个节点（引脚/单元/网络）的所有路径</p> 
<h2><a id="_119"></a>例子</h2> 
<h3><a id="_121"></a>单周期的多周期路径</h3> 
<p>模型如下：</p> 
<p><img src="https://images2.imgbox.com/59/f6/Ua6XHlhc_o.png" alt="在这里插入图片描述"></p> 
<p>如下图，由于使能时钟的作用，两个时钟周期data1_reg才寄存data0_reg的数据。</p> 
<p><img src="https://images2.imgbox.com/d0/50/2QtYYVCg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_135"></a>默认建立保持关系</h4> 
<p><img src="https://images2.imgbox.com/2f/7c/YPFxmU29_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_140"></a>建立关系修改</h4> 
<p>使用约束改变建立周期为2。</p> 
<pre><code class="prism language-verilog">set_multicycle_path 2 -setup -from [get_pins data0_reg/C] -to [get_pins data1_reg/D]
</code></pre> 
<p>增加建立周期约束是2后的建立保持关系：</p> 
<p><img src="https://images2.imgbox.com/7e/cb/T26Bxsj1_o.png" alt="在这里插入图片描述"></p> 
<p>在未修改保持关系的时候，保持关系是跟着建立关系走，（目的时钟捕获沿前一个周期是到达沿）<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
           
            
            
              h 
             
            
              o 
             
            
              l 
             
            
              d 
             
            
              _ 
             
            
              c 
             
            
              y 
             
            
              c 
             
            
              l 
             
            
              e 
             
            
              s 
             
            
           
          
          
           
            
             
            
              = 
             
            
              &lt; 
             
            
              s 
             
            
              e 
             
            
              t 
             
            
              u 
             
            
              p 
             
            
              p 
             
            
              a 
             
            
              t 
             
            
              h 
             
            
              m 
             
            
              u 
             
            
              l 
             
            
              t 
             
            
              i 
             
            
              p 
             
            
              l 
             
            
              i 
             
            
              e 
             
            
              r 
             
            
              &gt; 
             
            
              − 
             
            
              1 
             
            
              − 
             
            
              &lt; 
             
            
              h 
             
            
              o 
             
            
              l 
             
            
              d 
             
            
              p 
             
            
              a 
             
            
              t 
             
            
              h 
             
            
              m 
             
            
              u 
             
            
              l 
             
            
              t 
             
            
              i 
             
            
              p 
             
            
              l 
             
            
              i 
             
            
              e 
             
            
              r 
             
            
              &gt; 
             
            
           
          
         
         
          
           
            
           
          
          
           
            
             
            
              = 
             
            
              2 
             
            
              − 
             
            
              1 
             
            
              − 
             
            
              0 
             
            
           
          
         
         
          
           
            
           
          
          
           
            
             
            
              = 
             
            
              1 
             
            
           
          
         
        
       
         \begin{aligned} hold\_cycles &amp;= &lt;setup path multiplier&gt; - 1 - &lt;hold path multiplier&gt;\\ &amp;= 2 - 1 -0\\ &amp;= 1 \end{aligned} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 4.5em; vertical-align: -2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord" style="margin-right: 0.02778em;">_</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.5em;"><span class="" style="top: -4.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span></span></span><span class="" style="top: -3.16em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span></span></span><span class="" style="top: -1.66em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<h4><a id="_164"></a>保持关系修改</h4> 
<p>为了满足保持关系的要求，那么发送沿发的数据必须延迟一个周期以上才能保证发送沿不被到达沿捕获。而实际上这里有时钟使能信号，不需要担心这个问题，因此可以修改保持关系，以免多余的逻辑用来延时。</p> 
<pre><code class="prism language-verilog">set_multicycle_path 1 -hold -end -from [get_pins data0_reg/C] \ -to [get_pins data1_reg/D]
</code></pre> 
<p>这样将会移动目的时钟的到达沿向左一个周期。最终的STA时序将会按照如下进行建立和保持检查。</p> 
<ul><li>-hold -end</li></ul> 
<p><img src="https://images2.imgbox.com/76/52/zYzYwEyJ_o.png" alt="在这里插入图片描述"></p> 
<p>保持关系发送沿未移动，因此发送沿就是保持关系发送沿。</p> 
<ul><li> <p>hold1:保持关系发送沿与到达沿的关系。</p> </li><li> <p>hold2:保持关系发送沿下一个发送沿与到达沿的下一个周期关系。</p> </li></ul> 
<p>保持关系与上文所说的一致</p> 
<ul><li>-hold -start，未加[-end]将会使得保持关系发送沿向右移动1个周期。也是-hlod默认的选项。</li></ul> 
<p><img src="https://images2.imgbox.com/34/e0/MQxMYXzM_o.png" alt="在这里插入图片描述"></p> 
<p>到达沿未移动，因此到达沿的下一个周期就是捕获沿。</p> 
<ul><li> <p>hold1:保持关系发送沿与到达沿的关系。</p> </li><li> <p>hold2:保持关系发送沿下一个发送沿与到达沿的下一个周期关系。</p> </li></ul> 
<p>对于目的和源时钟一致的情况下，-start]与[-end]效果是一致的，因为它们的保持检查的相对关系是一致的。</p> 
<p>这里其实很绕口,但是只要记住保持关系是保持关系发送沿，保持关系发送沿下一个发送沿、到达沿、到达沿下一个周期的关系，建立关系是发送沿与捕获沿的关系</p> 
<h3><a id="_202"></a>多周期慢时钟域到快时钟域</h3> 
<p>模型如下：</p> 
<p><img src="https://images2.imgbox.com/7a/58/bFlMMEir_o.png" alt="在这里插入图片描述"></p> 
<ul><li>CLK2是CLK1时钟频率的2倍。</li><li>在时钟使能的情况下，使得采样能够正确，需要正确约束。</li></ul> 
<h4><a id="_212"></a>默认建立保持关系</h4> 
<p>默认建立保持检查情况如下：</p> 
<p><img src="https://images2.imgbox.com/35/ff/OWXadhZL_o.png" alt="在这里插入图片描述"></p> 
<ul><li>hold1: 
  <ul><li>0 - 0 = 0ns</li></ul> </li><li>hold2: 
  <ul><li>4 - 8 = -4ns</li></ul> </li></ul> 
<p>前面说了这里只考虑最严苛的情况下，这里只需要考虑hold1。</p> 
<h4><a id="_226"></a>建立关系修改</h4> 
<p>假设在时钟使能的情况下，为了正确约束：</p> 
<pre><code class="prism language-verilog">set_multicycle_path 4 -setup -from [get_clocks CLK1] -to [get_clocks CLK2] 
</code></pre> 
<p>这相当于移动捕获沿4个周期，此时的建立保持检查如下：</p> 
<p><img src="https://images2.imgbox.com/65/bc/ehzpuXVX_o.png" alt="在这里插入图片描述"></p> 
<ul><li>hold1： 
  <ul><li>12 - 0 = 12 ns</li></ul> </li><li>hold2： 
  <ul><li>16 - 8 = 8 ns</li></ul> </li></ul> 
<p>这里的保持要求时间为12ns，但由于时钟的使能存在，因此不需要为了满足保持关系，额外增加逻辑来满足延时，我们选择移动目的时钟的到达沿。</p> 
<h4><a id="_246"></a>保持关系修改</h4> 
<pre><code class="prism language-verilog">set_multicycle_path 3 -hold -end -from [get_clocks CLK1] -to [get_clocks CLK2] 
</code></pre> 
<p><img src="https://images2.imgbox.com/68/16/tjIKpNRC_o.png" alt="在这里插入图片描述"></p> 
<ul><li>hold1： 
  <ul><li>0 - 0 = 0 ns</li></ul> </li><li>hold2： 
  <ul><li>4 - 8 = -4 ns</li></ul> </li></ul> 
<p>STA只选择最严苛的，因此这里的保持要求时间为0ns，符合正确情况。</p> 
<h3><a id="_262"></a>多周期快时钟域到慢时钟域</h3> 
<p>模型如下：</p> 
<p><img src="https://images2.imgbox.com/b9/d2/gRXgPI9T_o.png" alt="在这里插入图片描述"></p> 
<ul><li>CLK1是CLK2时钟的频率2倍。</li><li>在时钟使能的情况下，使得采样能够正确，需要正确约束。</li></ul> 
<h4><a id="_272"></a>默认建立保持关系</h4> 
<p>默认建立保持检查情况如下：</p> 
<p><img src="https://images2.imgbox.com/ed/28/cdtpzean_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_279"></a>建立检查</h5> 
<ul><li>setup1: 
  <ul><li>8 - 0 = 8</li></ul> </li><li>setup2: 
  <ul><li>8 - 4 = 4</li></ul> </li></ul> 
<p>STA建立检查要求4ns。即step2。</p> 
<h5><a id="_288"></a>保持检查</h5> 
<p>setup1对应的保持关系</p> 
<ul><li>1hold1: 
  <ul><li>0 - 0 = 0ns</li></ul> </li><li>1hold2: 
  <ul><li>8 - 4 = 4ns</li></ul> </li></ul> 
<p>setup2对应的保持关系</p> 
<ul><li>2hold1: 
  <ul><li>0 - 4 = -4ns</li></ul> </li><li>2hold2: 
  <ul><li>8 - 8 = 0ns</li></ul> </li></ul> 
<p>STA建立检查要求4ns。即1hold2。最终如下图：</p> 
<p><img src="https://images2.imgbox.com/84/79/pFBDMJXZ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_309"></a>建立关系修改</h4> 
<p>这并不符合我们的要求，因此我们希望建立要求的路径是step1，因此要求对建立检查在目的时钟向左移动发送沿。需要加[-start]，确保向左移动发送沿。</p> 
<pre><code class="prism language-verilog">set_multicycle_path 2 -setup -start -from [get_clocks CLK1] -to [get_clocks CLK2] 
</code></pre> 
<p><img src="https://images2.imgbox.com/01/5a/yaL7YF7m_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_320"></a>建立检查</h5> 
<ul><li>setup: 
  <ul><li>8 - 0 = 8</li></ul> </li></ul> 
<p>STA建立检查要求8ns。</p> 
<h5><a id="_327"></a>保持检查</h5> 
<p>setup对应的保持关系</p> 
<ul><li>hold1: 
  <ul><li>0 - 0 = 0ns</li></ul> </li><li>hold2: 
  <ul><li>8 - 4 = 4ns</li></ul> </li></ul> 
<p>STA保持检查要求4ns。</p> 
<p>同样由于时钟使能的情况下，没有必要因为要满足hold2的保持要求，将数据延迟，增加额外延时逻辑，这里我们继续修改保持检查</p> 
<h4><a id="_340"></a>保持关系修改</h4> 
<p>保持关系默认是相对源时钟的，因此默认移动发送沿，将保持关系发送沿向右移动一个周期。</p> 
<pre><code class="prism language-verilog">set_multicycle_path 1 -hold -start -from [get_clocks CLK1] -to [get_clocks CLK2] 
set_multicycle_path 1 -hold -from [get_clocks CLK1] -to [get_clocks CLK2] 
这两个约束是一样的
</code></pre> 
<p><img src="https://images2.imgbox.com/38/a8/JtZg10Be_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_353"></a>保持检查</h5> 
<p>此时的保持关系如下</p> 
<ul><li>hold1: 
  <ul><li>0 - 4 = -4 ns</li></ul> </li><li>hold2: 
  <ul><li>0 - 0= 0ns</li></ul> </li></ul> 
<p>STA保持检查要求0ns。因此不需要额外的延时了。</p> 
<h3><a id="_364"></a>总结</h3> 
<ul><li> <p>保持关系总是默认跟随着建立关系走，因此仅仅修改建立关系，保持关系也跟着变。</p> </li><li> <p>在某些情况下，需要释放保持关系的要求，需要额外对保持关系修改。</p> </li><li> <p>注意保持关系发送沿、保持关系下一个发送沿、到达沿、捕获沿、发送沿、下一个发送沿。未修改保持关系，保持关系发送沿 = 发送沿 保持关系下一个发送沿 = 下一个发送沿</p> </li><li> <p>捕获沿是通过以STA找到的建立关系确定，到达沿是捕获沿的前一个周期。</p> </li></ul> 
<h3><a id="_372"></a>关系表</h3> 
<p>-start -end -setup -hold 关系如下</p> 
<table><thead><tr><th></th><th><strong>- start（源时钟）发送沿移动</strong></th><th><strong>-stop（目的时钟）捕获沿移动</strong></th></tr></thead><tbody><tr><td><strong>-setup</strong></td><td><strong>(&lt;—)(向左移动）</strong></td><td><strong>(–&gt;)(向右移动）(默认移动方向)</strong></td></tr><tr><td><strong>-hold</strong></td><td><strong>(—&gt;)(向右移动）（默认移动方向）</strong></td><td><strong>(&lt;—)(向左移动</strong></td></tr></tbody></table> 
<p>。</p> 
<h3><a id="_383"></a>关系表</h3> 
<p>-start -end -setup -hold 关系如下</p> 
<table><thead><tr><th></th><th><strong>- start（源时钟）发送沿移动</strong></th><th><strong>-stop（目的时钟）捕获沿移动</strong></th></tr></thead><tbody><tr><td><strong>-setup</strong></td><td><strong>(&lt;—)(向左移动）</strong></td><td><strong>(–&gt;)(向右移动）(默认移动方向)</strong></td></tr><tr><td><strong>-hold</strong></td><td><strong>(—&gt;)(向右移动）（默认移动方向）</strong></td><td><strong>(&lt;—)(向左移动</strong></td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f80dada49548bdeba30567aa0a1c201b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot 集成 mybatis-plus</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/698f7f9650079889c1b67e554ac5441c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">为什么有人劝别选计算机专业?</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>