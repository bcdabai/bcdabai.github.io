<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux安装部署zabbix运维监控平台，实操，步骤明晰&#43;常见问题解决方案 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux安装部署zabbix运维监控平台，实操，步骤明晰&#43;常见问题解决方案" />
<meta property="og:description" content="Linux安装部署zabbix运维监控平台，实操，步骤明晰&#43;常见问题解决方案
工作中，如果服务器多且需要对服务器进行24小时不间断的监控，保证业务的正常运行，那么就需要一款高效的监控管理工具，那么zabbix运维监控平台必不可少。
首先准备lnmp环境和相关安装包文件zabbix-5.0.0.tar.gz。
1、关闭防火墙和selinux。　systemctl stop firewalld systemctl disable firewalld setenforce 0 # 设置临时关闭selinux　sed -i &#39;s/SELINUX=enforcing/SELINUX=disabled/&#39; /etc/selinux/config #设置永久关闭selinux reboot #重启 2、为zabbix新建用户和组（可以不用）
groupadd --system zabbix useradd --system -g zabbix -d /usr/lib/zabbix -s /sbin/nologin -c &#34;Zabbix Monitoring System&#34; zabbix 为zabbix家目录修改权限
2、安装依赖
yum -y install gcc gcc-c&#43;&#43; mysql-devel libdbi-dbd-mysql net-snmp-devel curl-devel net-snmp libcurl-devel libxml2-devel libevent-devel 3、编译
./configure --prefix=/usr/local/zabbix --enable-server --enable-agent --with-mysql=/usr/local/mysql/bin/mysql_config --enable-ipv6 --with-net-snmp --with-libcurl --with-libxml2 4、安装
make install
5、进入数据库配置 zabbix 数据库和用户" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e87cf5928ec7e6a13a78a13e34f192be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-29T22:18:16+08:00" />
<meta property="article:modified_time" content="2023-10-29T22:18:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux安装部署zabbix运维监控平台，实操，步骤明晰&#43;常见问题解决方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Linux安装部署zabbix运维监控平台，实操，步骤明晰+常见问题解决方案</p> 
<p>工作中，如果服务器多且需要对服务器进行24小时不间断的监控，保证业务的正常运行，那么就需要一款高效的监控管理工具，那么zabbix运维监控平台必不可少。</p> 
<p>首先准备lnmp环境和相关安装包文件zabbix-5.0.0.tar.gz。</p> 
<p>1、关闭防火墙和selinux。　</p> 
<pre><code class="language-bash">　systemctl stop firewalld

　　systemctl disable firewalld</code></pre> 
<p>　　setenforce 0 # 设置临时关闭selinux　　</p> 
<pre><code class="language-bash">sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config #设置永久关闭selinux

　　reboot #重启</code></pre> 
<p>2、为zabbix新建用户和组（可以不用）<br>    </p> 
<pre><code class="language-bash"> groupadd --system zabbix
    useradd --system -g zabbix -d /usr/lib/zabbix -s /sbin/nologin -c "Zabbix Monitoring System" zabbix</code></pre> 
<p><br> 为zabbix家目录修改权限<br> 2、安装依赖</p> 
<p></p> 
<pre><code class="language-bash"> yum -y install gcc gcc-c++ mysql-devel  libdbi-dbd-mysql net-snmp-devel curl-devel net-snmp libcurl-devel libxml2-devel  libevent-devel</code></pre> 
<p>3、编译</p> 
<pre><code class="language-bash"> ./configure --prefix=/usr/local/zabbix  --enable-server --enable-agent --with-mysql=/usr/local/mysql/bin/mysql_config --enable-ipv6 --with-net-snmp --with-libcurl --with-libxml2</code></pre> 
<p>4、安装<br> make install</p> 
<p>5、进入数据库配置 zabbix 数据库和用户</p> 
<pre><code class="language-bash">  mysql  -uroot  -p      输入密码
 create database zabbix character set utf8 collate utf8_bin;
 create user 'zabbix'@'localhost' identified by '123456';
 grant all privileges on zabbix.* to 'zabbix'@'localhost';
  flush privileges;</code></pre> 
<p><br> 导入数据</p> 
<pre><code class="language-bash">mysql -uzabbix -p zabbix &lt; database/mysql/schema.sql
mysql -uzabbix -p zabbix &lt;  database/mysql/images.sql
mysql -uzabbix -p zabbix &lt;  database/mysql/data.sql</code></pre> 
<p><br> 6.配置zabbix_server 配置件中的加上数据库密码</p> 
<pre><code class="language-bash">cd  /usr/local/zabbix/etc
vim   zabbix_server.conf
DBPassword=123456</code></pre> 
<p><br> 7、把zabbix网址文件复制到nginx网站发布目录下，在html目录下新建zabbix文件夹</p> 
<pre><code class="language-bash">cd /usr/local/nginx/html 
mkdir   zabbix
mv   /usr/local/zabbix-5.0.0/ui/* /usr/local/nginx/html/zabbix/</code></pre> 
<p><br> 8、把配置文件zabbix.conf.php（在Linux\项目实施\zabbix安装部署  目录下）文件放到<br>   /usr/local/nginx/html/zabbix/conf（这个是你的zabbix网站页面存放路径）<br> zabbix.conf.php 此文件要根据你的实际情况进行修改，例如数据库的IP账号和密码等</p> 
<p>9、创建server启动脚本</p> 
<p>1<br>  vim /etc/init.d/zabbix_server</p> 
<pre><code class="language-bash"> #!/bin/sh
 #chkconfig: 2345  10  90
# Zabbix
# Copyright (C) 2001-2018 Zabbix SIA
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 
# Start/Stop the Zabbix server daemon.
# Place a startup script in /sbin/init.d, and link to it from /sbin/rc[023].d
 
SERVICE="Zabbix server"
DAEMON=/usr/local/zabbix/sbin/zabbix_server
PIDFILE=/tmp/zabbix_server.pid
 
case $1 in
  'start')
    if [ -x ${DAEMON} ]
    then
      $DAEMON
      # Error checking here would be good...
      echo "${SERVICE} started."
    else
      echo "Can't find file ${DAEMON}."
      echo "${SERVICE} NOT started."
    fi
  ;;
  'stop')
    if [ -s ${PIDFILE} ]
    then
      if kill `cat ${PIDFILE}` &gt;/dev/null 2&gt;&amp;1
      then
        echo "${SERVICE} terminated."
        rm -f ${PIDFILE}
      fi
    fi
  ;;
  'restart')
    $0 stop
    sleep 10
    $0 start
  ;;
  *)
    echo "Usage: $0 start|stop|restart"
    ;;
esac

exit 0</code></pre> 
<p> 给文件授权</p> 
<pre><code class="language-bash">chmod +x /etc/init.d/zabbix_server

chkconfig  --add  zabbix_server   加入服务列表
chkconfig  zabbix_server  on   添加开机启动

service    zabbix_server  start   启动服务


netstat -tnlp| grep 10051 或者   ps  -ef|grep   zabbix</code></pre> 
<p>######################################</p> 
<p> 创建自带agent的启动脚本<br>  vim /etc/init.d/zabbix_agentd</p> 
<pre><code class="language-bash">#!/bin/sh
#chkconfig: 2345   10  90
# Zabbix
# Copyright (C) 2001-2018 Zabbix SIA
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 
# Start/Stop the Zabbix agent daemon.
# Place a startup script in /sbin/init.d, and link to it from /sbin/rc[023].d
 
SERVICE="Zabbix agent"
DAEMON=/usr/local/zabbix/sbin/zabbix_agentd
PIDFILE=/tmp/zabbix_agentd.pid
 
case $1 in
  'start')
    if [ -x ${DAEMON} ]
    then
      $DAEMON
      # Error checking here would be good...
      echo "${SERVICE} started."
    else
      echo "Can't find file ${DAEMON}."
      echo "${SERVICE} NOT started."
    fi
  ;;
  'stop')
    if [ -s ${PIDFILE} ]
    then
      if kill `cat ${PIDFILE}` &gt;/dev/null 2&gt;&amp;1
      then
        echo "${SERVICE} terminated."
        rm -f ${PIDFILE}
      fi
    fi
  ;;
  'restart')
    $0 stop
    sleep 10
    $0 start
  ;;
  *)
    echo "Usage: $0 start|stop|restart"
    ;;
esac

exit  0</code></pre> 
<p>授予文件执行权限</p> 
<pre><code class="language-bash">chmod +x /etc/init.d/zabbix_agentd
chkconfig --add   zabbix_agentd
chkconfig  zabbix_agentd  on

service    zabbix_agentd  start 

service    zabbix_server  start</code></pre> 
<p>################################常见问题解决方案##############################</p> 
<p><br> 1、报错处理</p> 
<pre><code class="language-bash">/application/zabbix/sbin/zabbix_server: error while loading shared libraries: libmysqlclient.so.20: cannot open shared object file: No such file or directory</code></pre> 
<p><br>  此时需要配置一个软连接指向该位置。</p> 
<pre><code class="language-bash">ln -s /usr/local/mysql/lib/libmysqlclient.so.21 /usr/lib64</code></pre> 
<p><br> 2、页面报    zabbix Cannot connect to the database</p> 
<p>原因是php页面文件conf目录下缺少一个数据库配置文件（zabbix.conf.php）：<br>   解决方法：<br>  cd /usr/local/nginx/html/zabbix/conf    #进入网页根目录下，目录地址根据自己的实际情况来<br>  cp zabbix.conf.php.example zabbix.conf.php #重命名文件<br>  vim zabbix.conf.php #修改正确的端口、账号及密码</p> 
<p><br> 3、 报error while loading shared libraries: libcrypto.so.1.1: cannot open shared object file: No such fil</p> 
<p> 检查原命令对应包情况</p> 
<pre><code class="language-bash"> ldd $(which /usr/local/zabbix/sbin/zabbix_server)
ln -s /usr/local/lib64/libssl.so.1.1 /usr/lib64/libssl.so.1.1 
ln -s /usr/local/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1</code></pre> 
<p><br> 执行上边命令还报错的话</p> 
<pre><code class="language-bash">find  / -name   libssl.so.1.1 
find  / -name   libcrypto.so.1.1</code></pre> 
<p><br> 找到这个文件目录，直接拷贝到    /usr/lib64   目录下</p> 
<pre><code class="language-bash">cp   /usr/local/mysql/lib/private/libssl.so.1.1   /usr/lib64

cp   /usr/local/mysql/lib/private/libcrypto.so.1.1   /usr/lib64</code></pre> 
<p>启动PHP服务</p> 
<pre><code class="language-bash">service php-fpm start
service php-fpm stop
service php-fpm reload</code></pre> 
<p><br> 启动zabbix服务</p> 
<pre><code class="language-bash">service    zabbix_server  start
service    zabbix_agentd  start 

systemctl start nginx.service    启动nginx

systemctl stop nginx.service    结束nginx

systemctl restart nginx.service    重启nginx</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a22e1d6695773fe5684b24e02b36edcb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RPC与HTTP的关系</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6649460365c93345660ac7d18f8689c7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mybatis特殊SQL的执行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>