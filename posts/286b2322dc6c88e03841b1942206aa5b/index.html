<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>达梦数据库用户和表空间常用SQL语句 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="达梦数据库用户和表空间常用SQL语句" />
<meta property="og:description" content="达梦数据库用户和表空间常用SQL语句 我使用的环境是DM7，达梦数据库默认情况下可以使用SYSDBA用户使用默认表空间进行数据库操作。但是对于业务开发来说，使用普通用户和表空间进行使用保证数据的区分。
1、表空间 达梦数据库创建表空间的语法
CREATE TABLESPACE &lt;表空间名&gt; &lt;数据文件子句&gt;[&lt;数据页缓冲池子句&gt;][&lt;存储加密子句&gt;] &lt;数据文件子句&gt; ::= DATAFILE &lt;文件说明项&gt;{,&lt;文件说明项&gt;} &lt;文件说明项&gt; ::= &lt;文件路径&gt; [ MIRROR &lt;文件路径&gt;] SIZE &lt;文件大小&gt;[&lt;自动扩展子句&gt;] &lt;自动扩展子句&gt; ::= AUTOEXTEND &lt;ON [&lt;每次扩展大小子句&gt;][&lt;最大大小子句&gt; |OFF&gt; &lt;每次扩展大小子句&gt; ::= NEXT &lt;扩展大小&gt; &lt;最大大小子句&gt; ::= MAXSIZE &lt;文件最大大小&gt; &lt;数据页缓冲池子句&gt; ::= CACHE = &lt;缓冲池名&gt; &lt;存储加密子句&gt; ::= ENCRYPT WITH &lt;加密算法&gt; [[BY] &lt;加密密码&gt;] 达梦数据库表空间操作常用语句
--创建表空间 CREATE TABLESPACE TS_TEST DATAFILE &#39;TEST01.DBF&#39; SIZE 256; --修改表空间名 ALTER TABLESPACE TS_TEST RENAME TO TS_TEST_BAK; --修改表空间状态为脱机 ALTER TABLESPACE TS_TEST OFFLINE; --修改表空间状态为联机 ALTER TABLESPACE TS_TEST ONLINE; --为表空间增加数据文件 ALTER TABLESPACE TS_TEST ADD DATAFILE &#39;TEST02." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/286b2322dc6c88e03841b1942206aa5b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-06T16:31:54+08:00" />
<meta property="article:modified_time" content="2021-04-06T16:31:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">达梦数据库用户和表空间常用SQL语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>达梦数据库用户和表空间常用SQL语句</h2> 
<p style="text-indent:33px;">我使用的环境是DM7，达梦数据库默认情况下可以使用SYSDBA用户使用默认表空间进行数据库操作。但是对于业务开发来说，使用普通用户和表空间进行使用保证数据的区分。</p> 
<h4>1、表空间</h4> 
<p>达梦数据库创建表空间的语法</p> 
<pre><code class="language-sql">CREATE TABLESPACE &lt;表空间名&gt; &lt;数据文件子句&gt;[&lt;数据页缓冲池子句&gt;][&lt;存储加密子句&gt;]
&lt;数据文件子句&gt; ::= DATAFILE &lt;文件说明项&gt;{,&lt;文件说明项&gt;}
&lt;文件说明项&gt; ::= &lt;文件路径&gt; [ MIRROR &lt;文件路径&gt;] SIZE &lt;文件大小&gt;[&lt;自动扩展子句&gt;]
&lt;自动扩展子句&gt; ::= AUTOEXTEND &lt;ON [&lt;每次扩展大小子句&gt;][&lt;最大大小子句&gt; |OFF&gt;
&lt;每次扩展大小子句&gt; ::= NEXT &lt;扩展大小&gt;
&lt;最大大小子句&gt; ::= MAXSIZE &lt;文件最大大小&gt;
&lt;数据页缓冲池子句&gt; ::= CACHE = &lt;缓冲池名&gt;
&lt;存储加密子句&gt; ::= ENCRYPT WITH &lt;加密算法&gt; [[BY] &lt;加密密码&gt;]</code></pre> 
<p> 达梦数据库表空间操作常用语句</p> 
<pre><code class="language-sql">--创建表空间
CREATE TABLESPACE TS_TEST DATAFILE 'TEST01.DBF' SIZE 256;
--修改表空间名
ALTER TABLESPACE TS_TEST RENAME TO TS_TEST_BAK;
--修改表空间状态为脱机
ALTER TABLESPACE TS_TEST OFFLINE;
--修改表空间状态为联机
ALTER TABLESPACE TS_TEST  ONLINE;
--为表空间增加数据文件
ALTER TABLESPACE TS_TEST ADD DATAFILE 'TEST02.DBF' SIZE 256;
--删除表空间
DROP TABLESPACE TS_TEST;
--扩展表空间文件大小
ALTER TABLESPACE TS_TEST RESIZE DATAFILE 'TEST02.DBF' TO 512；
--创建表空间时可指定文件的扩展属性，如创建表空间时指定数据文件的扩展属性为可自动扩展，每次扩展大小为 10M，最大可扩展到 100M
CREATE TABLESPACE TS_TEST  DATAFILE 'TEST01.DBF' SIZE 32 AUTOEXTEND ON NEXT 10 MAXSIZE 100;
--可以修改用户表空间中已存在数据文件的路径，待修改的数据文件所在表空间必须处于脱机状态并且只可修改用户创建的表空间中文件的路径
ALTER TABLESPACE TS_TEST RENAME DATAFILE 'TEST01.DBF' TO '/home/dmdba/DAMENG/TEST01.DBF';</code></pre> 
<h4>2.用户</h4> 
<p>达梦数据库创建用户的语法</p> 
<pre><code class="language-sql">CREATE USER &lt;用户名&gt; IDENTIFIED &lt;身份验证模式&gt; [PASSWORD_POLICY &lt;口令策略&gt;][&lt;
锁定子句&gt;][&lt;存储加***&gt;][&lt;空间限制子句&gt;][&lt;只读标志&gt;][&lt;资源限制子句&gt;][&lt;允许 IP 子句&gt;][&lt;第 3 章 数据定义语句
54
禁止 IP 子句&gt;][&lt;允许时间子句&gt;][&lt;禁止时间子句&gt;][&lt;TABLESPACE 子句&gt;][&lt;INDEX_TABLESPACE 子
句&gt;]
&lt;身份验证模式&gt; ::= &lt;数据库身份验证模式&gt;|&lt;外部身份验证模式&gt;
&lt;数据库身份验证模式&gt; ::= BY &lt;口令&gt;
&lt;外部身份验证模式&gt; ::= EXTERNALLY | EXTERNALLY AS &lt;用户 DN&gt;
&lt;口令策略&gt; ::= 口令策略项的任意组合
&lt;锁定子句&gt; ::= ACCOUNT LOCK | ACCOUNT UNLOCK
&lt;存储加***&gt; ::= ENCRYPT BY &lt;口令&gt;
&lt;空间限制子句&gt; ::= DISKSPACE LIMIT &lt;空间大小&gt;| DISKSPACE UNLIMITED
&lt;只读标志&gt; ::= READ ONLY | NOT READ ONLY
&lt;资源限制子句&gt; ::= LIMIT &lt;资源设置项&gt;{,&lt;资源设置项&gt;}
&lt;资源设置项&gt; ::= SESSION_PER_USER &lt;参数设置&gt;|
CONNECT_IDLE_TIME &lt;参数设置&gt;|
CONNECT_TIME &lt;参数设置&gt;|
CPU_PER_CALL &lt;参数设置&gt;|
CPU_PER_SESSION &lt;参数设置&gt;|
MEM_SPACE &lt;参数设置&gt;|
READ_PER_CALL &lt;参数设置&gt;|
READ_PER_SESSION &lt;参数设置&gt;|
FAILED_LOGIN_ATTEMPS &lt;参数设置&gt;|
PASSWORD_LIFE_TIME &lt;参数设置&gt;|
PASSWORD_REUSE_TIME &lt;参数设置&gt;|
PASSWORD_REUSE_MAX &lt;参数设置&gt;|
PASSWORD_LOCK_TIME &lt;参数设置&gt;|
PASSWORD_GRACE_TIME &lt;参数设置&gt;
&lt;参数设置&gt; ::=&lt;参数值&gt;| UNLIMITED
&lt;允许 IP 子句&gt; ::= ALLOW_IP &lt;IP 项&gt;{,&lt;IP 项&gt;}
&lt;禁止 IP 子句&gt; ::= NOT_ALLOW_IP &lt;IP 项&gt;{,&lt;IP 项&gt;}
&lt;IP 项&gt; ::= &lt;具体 IP&gt;|&lt;网段&gt;
&lt;允许时间子句&gt; ::= ALLOW_DATETIME &lt;时间项&gt;{,&lt;时间项&gt;}
&lt;禁止时间子句&gt; ::= NOT_ALLOW_DATETIME &lt;时间项&gt;{,&lt;时间项&gt;}
&lt;时间项&gt; ::= &lt;具体时间段&gt; | &lt;规则时间段&gt;
&lt;具体时间段&gt; ::= &lt;具体日期&gt; &lt;具体时间&gt; TO &lt;具体日期&gt; &lt;具体时间&gt;
&lt;规则时间段&gt; ::= &lt;规则时间标志&gt; &lt;具体时间&gt; TO &lt;规则时间标志&gt; &lt;具体时间&gt;
&lt;规则时间标志&gt; ::= MON | TUE | WED | THURS | FRI | SAT | SUN
&lt;TABLESPACE 子句&gt; ::= DEFAULT TABLESPACE &lt;表空间名&gt;
&lt;INDEX_TABLESPACE 子句&gt; ::= DEFAULT INDEX TABLESPACE &lt;表空间名&gt;</code></pre> 
<p>达梦数据库用户操作语法 </p> 
<pre><code class="language-sql">--创建用户并授权
CREATE USER TEST IDENTIFIED BY "TEST1234";
GRANT DBA TO TEST;
--修改用户
ALTER  USER SYSDBA IDENTIFIED BY "TEST"; 
--创建用户并指定默认表空间
CREATE USER TEST IDENTIFIED BY "TEST1234" DEFAULT TABLESPACE TS_TEST ; 
--创建用户时可指定该用户使用的最大磁盘空间为50M
CREATE USER TEST IDENTIFIED BY "TEST1234" DISKSPACE LIMIT 50;
--对用户的空间限制也可进行更改，如修改用户的磁盘空间限制为无限制
ALTER USER TEST DISKSPACE UNLIMITED;
--可以使用系统函数USER_USED_SPACE得到用户占用空间的大小，函数参数为用户名，返回值为占用的页的数目
SELECT USER_USED_SPACE('TEST');
--修改用户会话空闲期为无限制，最大连接数为 10
ALTER USER TEST LIMIT SESSION_PER_USER 10, CONNECT_IDLE_TIME UNLIMITED;
--删除用户
DROP USER TEST CASCADE;</code></pre> 
<div>
    
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4bf9f8719fb99558e1658ecec5b87e45/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">oracle recs,Oracle SQL精妙SQL语句讲解（转）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/029da4c9c7a3d5fe3ced93b20f5a250d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">消息中间件-RabbitMQ持久化机制、内存磁盘控制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>