<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在线长图片自动裁剪工具 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在线长图片自动裁剪工具" />
<meta property="og:description" content="介绍 一个可将图片自动分段裁剪成多张图片的工具。
举个栗子 在线地址 Github站点：https://hu243285237.github.io/PictureCutter_Web/
国内站点： http://hu243285237.gitee.io/picturecutter_web
项目地址 https://hu243285237.github.io/PictureCutter_Web/
兼容性 请在 PC 端使用 Chrome、Firefox、Edge 等浏览器，不支持 IE 浏览器。
原理 主要使用了 Canvas Context 的 drawImage 方法，对图片进行分段绘制。
图片选取、分段绘制和导出都在本地浏览器执行，无额外请求资源消耗。
主要代码 /** * 以像素裁剪图片 * @param imgURL 图片 * @param pixelWidth 像素宽度 * @param pixelHeight 像素高度 * @param format 裁剪后的图片格式 * @returns 裁剪后的图片数组 */ export function pixelCut( imgURL: string, pixelWidth: number, pixelHeight: number, format: string ): Array&lt;string&gt; { const res = new Array&lt;string&gt;(); const img = new Image(); img." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6e9acbfc8e31364849e12acc980b86dd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-02T18:04:09+08:00" />
<meta property="article:modified_time" content="2023-03-02T18:04:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在线长图片自动裁剪工具</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>介绍</h3> 
<p>一个可将图片自动分段裁剪成多张图片的工具。</p> 
<h3>举个栗子</h3> 
<p><img alt="" height="339" src="https://images2.imgbox.com/93/ba/BSGwTnEW_o.jpg" width="450"></p> 
<p><img alt="" height="202" src="https://images2.imgbox.com/89/04/hYcuNX83_o.jpg" width="450"></p> 
<p><img alt="" height="466" src="https://images2.imgbox.com/e2/5f/PdBb5a4H_o.jpg" width="450"></p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/17/77/YEYlE4f3_o.jpg" width="450"></p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/cd/c6/KfIhmkpF_o.png" width="450"></p> 
<h3>在线地址</h3> 
<p>Github站点：<a class="link-info" href="https://hu243285237.github.io/PictureCutter_Web/" rel="nofollow" title="https://hu243285237.github.io/PictureCutter_Web/">https://hu243285237.github.io/PictureCutter_Web/</a></p> 
<p>国内站点： <a href="http://hu243285237.gitee.io/picturecutter_web" rel="nofollow" title="http://hu243285237.gitee.io/picturecutter_web">http://hu243285237.gitee.io/picturecutter_web</a></p> 
<h3>项目地址</h3> 
<p><a href="https://github.com/hu243285237/PictureCutter_Web" title="GitHub - hu243285237/PictureCutter_Web: 长图片自动裁剪工具">https://hu243285237.github.io/PictureCutter_Web/</a></p> 
<h3>兼容性</h3> 
<p>请在 PC 端使用 Chrome、Firefox、Edge 等浏览器，不支持 IE 浏览器。</p> 
<h3>原理</h3> 
<p>主要使用了 Canvas Context 的 drawImage 方法，对图片进行分段绘制。</p> 
<p>图片选取、分段绘制和导出都在本地浏览器执行，无额外请求资源消耗。</p> 
<h2>主要代码</h2> 
<div> 
 <pre><code class="language-TypeScript hljs"><span class="hljs-comment">/**
 * 以像素裁剪图片
 * <span class="hljs-doctag">@param</span> imgURL 图片
 * <span class="hljs-doctag">@param</span> pixelWidth 像素宽度
 * <span class="hljs-doctag">@param</span> pixelHeight 像素高度
 * <span class="hljs-doctag">@param</span> format 裁剪后的图片格式
 * <span class="hljs-doctag">@returns</span> 裁剪后的图片数组
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="function_ hljs-title">pixelCut</span>(<span class="hljs-params">
  imgURL: <span class="hljs-built_in">string</span>,
  pixelWidth: <span class="hljs-built_in">number</span>,
  pixelHeight: <span class="hljs-built_in">number</span>,
  format: <span class="hljs-built_in">string</span>
</span>): <span class="class_ hljs-title">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;();
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Image</span>();
  img.<span class="hljs-property">src</span> = imgURL;
  <span class="hljs-keyword">const</span> amountRow = <span class="class_ hljs-title">Math</span>.<span class="function_ hljs-title">ceil</span>(img.<span class="hljs-property">width</span> / pixelWidth);
  <span class="hljs-keyword">const</span> amountCol = <span class="class_ hljs-title">Math</span>.<span class="function_ hljs-title">ceil</span>(img.<span class="hljs-property">height</span> / pixelHeight);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; amountCol; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; amountRow; j++) {
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="function_ hljs-title">createElement</span>(<span class="hljs-string">'canvas'</span>);
      [canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>] = [pixelWidth, pixelHeight];
      <span class="hljs-keyword">const</span> context = canvas.<span class="function_ hljs-title">getContext</span>(<span class="hljs-string">'2d'</span>);
      context?.<span class="function_ hljs-title">drawImage</span>(
        img,
        pixelWidth * j,
        pixelHeight * i,
        pixelWidth,
        pixelHeight,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        pixelWidth,
        pixelHeight
      );
      res.<span class="function_ hljs-title">push</span>(canvas.<span class="function_ hljs-title">toDataURL</span>(<span class="hljs-string">'image/'</span> + format, <span class="hljs-number">1.0</span>));
    }
  }
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">/**
 * 以数量均等裁剪
 * <span class="hljs-doctag">@param</span> imgURL 图片
 * <span class="hljs-doctag">@param</span> amountRow 横向切割成几份
 * <span class="hljs-doctag">@param</span> amountCol 纵向切割成几份
 * <span class="hljs-doctag">@param</span> format 裁剪后的图片格式
 * <span class="hljs-doctag">@returns</span> 裁剪后的图片数组
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="function_ hljs-title">amountCut</span>(<span class="hljs-params">
  imgURL: <span class="hljs-built_in">string</span>,
  amountRow: <span class="hljs-built_in">number</span>,
  amountCol: <span class="hljs-built_in">number</span>,
  format: <span class="hljs-built_in">string</span>
</span>): <span class="class_ hljs-title">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;();
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Image</span>();
  img.<span class="hljs-property">src</span> = imgURL;
  <span class="hljs-keyword">const</span> pixelWidth = img.<span class="hljs-property">width</span> / amountRow;
  <span class="hljs-keyword">const</span> pixelHeight = img.<span class="hljs-property">height</span> / amountCol;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; amountCol; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; amountRow; j++) {
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="function_ hljs-title">createElement</span>(<span class="hljs-string">'canvas'</span>);
      [canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>] = [pixelWidth, pixelHeight];
      <span class="hljs-keyword">const</span> context = canvas.<span class="function_ hljs-title">getContext</span>(<span class="hljs-string">'2d'</span>);
      context?.<span class="function_ hljs-title">drawImage</span>(
        img,
        pixelWidth * j,
        pixelHeight * i,
        pixelWidth,
        pixelHeight,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        pixelWidth,
        pixelHeight
      );
      res.<span class="function_ hljs-title">push</span>(canvas.<span class="function_ hljs-title">toDataURL</span>(<span class="hljs-string">'image/'</span> + format, <span class="hljs-number">1.0</span>));
    }
  }
  <span class="hljs-keyword">return</span> res;
}</code></pre> 
</div> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf9664a4cd9e8f0cc2f9c5feaa393c05/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">报错:You may use special comments to disable some warnings. Use // eslint-disable-next-line to ignore</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9be67e5c41834aafb78464fcefa19f54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">运行显示“process finished with exit code 0”的解决办法（pycharm）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>