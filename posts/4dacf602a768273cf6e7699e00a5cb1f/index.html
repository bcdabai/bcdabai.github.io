<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FastDFS-5.11安装配置指南 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FastDFS-5.11安装配置指南" />
<meta property="og:description" content="1、简介 FastDFS是一个开源的轻量级分布式文件系统，它对文件进行管理，功能包括：文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和负载均衡的问题。特别适合以文件为载体的在线服务，如相册网站、视频网站等等。 FastDFS由跟踪服务器(Tracker Server)、存储服务器(Storage Server)和客户端(Client)构成。 2、基础环境
3、 依赖安装 yum install gcc-c&#43;&#43; pcre pcre-devel openssl ssl-devel perl-devel -y
安装FastDFS依赖包libfastcommon
cd /usr/local/src
wget https://github.com/happyfish100/libfastcommon/archive/V1.0.38.tar.gz tar xf V1.0.38.tar.gz cd libfastcommon-1.0.38/
./make.sh
./make.sh install
4、组件编译安装 安装FastDFS cd /usr/local/src
wget https://github.com/happyfish100/fastdfs/archive/V5.11.tar.gz
tar -zxvf V5.11.tar.gz
cd fastdfs-5.11/
./make.sh
.make.sh install
5、系统配置 将配置文件复制到系统为fdfs预设的目录
cd /usr/local/src/fastdfs-5.11/conf
cp mime.types http.conf /etc/fdfs/
#查看安装FastDFS过程中产生的可执行文件。
ls -la /usr/bin/fdfs*
配置FastDFS 分别对tracker，storage，client进行配置。 创建目录
mkdir /home/fastdfs/tracker -p
mkdir /home/fastdfs/storage -p
cd /etc/fdfs/
配置tracker cp tracker." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4dacf602a768273cf6e7699e00a5cb1f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-11T11:18:49+08:00" />
<meta property="article:modified_time" content="2023-04-11T11:18:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FastDFS-5.11安装配置指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="1%E3%80%81%E7%AE%80%E4%BB%8B">1、简介</h2> 
<blockquote> 
 <h4 id="%C2%A0%C2%A0%20%C2%A0FastDFS%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E7%9A%84%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%AE%83%E5%AF%B9%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86%EF%BC%8C%E5%8A%9F%E8%83%BD%E5%8C%85%E6%8B%AC%EF%BC%9A%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E3%80%81%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5%E3%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%EF%BC%88%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%EF%BC%89%E7%AD%89%EF%BC%8C%E8%A7%A3%E5%86%B3%E4%BA%86%E5%A4%A7%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8%E5%92%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82%E7%89%B9%E5%88%AB%E9%80%82%E5%90%88%E4%BB%A5%E6%96%87%E4%BB%B6%E4%B8%BA%E8%BD%BD%E4%BD%93%E7%9A%84%E5%9C%A8%E7%BA%BF%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%A6%82%E7%9B%B8%E5%86%8C%E7%BD%91%E7%AB%99%E3%80%81%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E7%AD%89%E7%AD%89%E3%80%82">    FastDFS是一个开源的轻量级分布式文件系统，它对文件进行管理，功能包括：文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和负载均衡的问题。特别适合以文件为载体的在线服务，如相册网站、视频网站等等。</h4> 
 <h4 id="%C2%A0%C2%A0%20%C2%A0FastDFS%E7%94%B1%E8%B7%9F%E8%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8(Tracker%20Server)%E3%80%81%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%E5%99%A8(Storage%20Server)%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF(Client)%E6%9E%84%E6%88%90%E3%80%82">    FastDFS由跟踪服务器(Tracker Server)、存储服务器(Storage Server)和客户端(Client)构成。</h4> 
</blockquote> 
<h2 id="2%E3%80%81%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E2%80%8B%E7%BC%96%E8%BE%91">2、基础环境<br><img alt="" src="https://images2.imgbox.com/95/ac/lNnVh1et_o.png"></h2> 
<h2 id="3%E3%80%81%20%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85">3、 依赖安装</h2> 
<blockquote> 
 <p> yum install  gcc-c++ pcre pcre-devel openssl ssl-devel perl-devel -y</p> 
 <p>安装FastDFS依赖包libfastcommon<br> cd /usr/local/src<br> wget https://github.com/happyfish100/libfastcommon/archive/V1.0.38.tar.gz <br> tar xf V1.0.38.tar.gz <br> cd libfastcommon-1.0.38/<br> ./make.sh<br> ./make.sh install</p> 
</blockquote> 
<h2 id="4%E3%80%81%E7%BB%84%E4%BB%B6%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%23%23%23%23%20%E5%AE%89%E8%A3%85FastDFS">4、组件编译安装</h2> 
<h4>安装FastDFS</h4> 
<blockquote> 
 <p>cd /usr/local/src</p> 
 <p>wget https://github.com/happyfish100/fastdfs/archive/V5.11.tar.gz</p> 
 <p>tar -zxvf V5.11.tar.gz</p> 
 <p>cd fastdfs-5.11/</p> 
 <p>./make.sh</p> 
 <p>.make.sh install</p> 
</blockquote> 
<h2><strong>5</strong><strong>、</strong><strong>系统配置</strong></h2> 
<blockquote> 
 <p>将配置文件复制到系统为fdfs预设的目录</p> 
 <p>cd /usr/local/src/fastdfs-5.11/conf</p> 
 <p>cp mime.types http.conf /etc/fdfs/</p> 
 <p>#查看安装FastDFS过程中产生的可执行文件。</p> 
 <p>ls -la /usr/bin/fdfs*</p> 
</blockquote> 
<h4>配置FastDFS</h4> 
<h4>分别对tracker，storage，client进行配置。</h4> 
<blockquote> 
 <p>创建目录</p> 
 <p>mkdir /home/fastdfs/tracker -p</p> 
 <p>mkdir /home/fastdfs/storage -p</p> 
 <p>cd /etc/fdfs/</p> 
</blockquote> 
<p></p> 
<h4> 配置tracker</h4> 
<blockquote> 
 <p>cp tracker.conf.sample tracker.conf</p> 
 <p>vi tracker.conf  //标红部分</p> 
 <p># the base path to store data and log files</p> 
 <p><span style="color:#fe2c24;">base_path=/home/fastdfs/tracker</span></p> 
 <p>......</p> 
 <p># thread stack size, should &gt;= 64KB</p> 
 <p># default value is 64KB</p> 
 <p><span style="color:#fe2c24;">thread_stack_size = 128KB</span></p> 
 <p>启动tracker。</p> 
 <p>/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf start</p> 
</blockquote> 
<p></p> 
<h4> 配置storage </h4> 
<blockquote> 
 <p>cd /etc/fdfs/</p> 
 <p>cp storage.conf.sample storage.conf</p> 
 <p>vi storage.conf</p> 
 <p># the base path to store data and log files</p> 
 <p><span style="color:#fe2c24;">base_path=/home/fastdfs/storage</span></p> 
 <p>...</p> 
 <p># store_path#, based 0, if store_path0 not exists, it's value is base_path</p> 
 <p># the paths must be exist</p> 
 <p><span style="color:#fe2c24;">store_path0=/home/fastdfs/storage</span></p> 
 <p>#store_path1=/home/yuqing/fastdfs2</p> 
 <p>.....</p> 
 <p># tracker_server can ocur more than once, and tracker_server format is</p> 
 <p>#  "host:port", host can be hostname or ip address</p> 
 <p><span style="color:#fe2c24;">tracker_server=192.168.0.166:22122</span></p> 
 <p>启动storage。</p> 
 <p>/usr/bin/fdfs_storaged /etc/fdfs/storage.conf start</p> 
 <p>查看storage启动日志。</p> 
 <p>vi /home/fastdfs/storage/logs/storaged.log</p> 
</blockquote> 
<p></p> 
<h4> 配置client</h4> 
<blockquote> 
 <p>cd /etc/fdfs/</p> 
 <p>cp client.conf.sample client.conf</p> 
 <p>vi  client.conf</p> 
 <p># the base path to store log files</p> 
 <p><span style="color:#fe2c24;">base_path=/home/fastdfs/tracker</span></p> 
 <p>......</p> 
 <p># tracker_server can ocur more than once, and tracker_server format is</p> 
 <p>#  "host:port", host can be hostname or ip address</p> 
 <p><span style="color:#fe2c24;">tracker_server=192.168.0.166:22122</span></p> 
</blockquote> 
<h4>安装和配置fastdfs-nginx-module </h4> 
<blockquote> 
 <p>cd /usr/local/src</p> 
 <p>wget  https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.20.tar.gz</p> 
 <p>tar -zxvf V1.20.tar.gz</p> 
 <p>配置fastdfs-nginx-module的“config”文件。</p> 
 <p>cd /usr/local/src/fastdfs-nginx-module-1.20/src/</p> 
 <p>vi config</p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">ngx_module_incs="/usr/include/fastdfs /usr/include/fastcommon/"</span></p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">CORE_INCS="$CORE_INCS /usr/include/fastdfs /usr/include/fastcommon/"</span></p> 
 <p></p> 
 <p>配置fastdfs-nginx-module的“mod_fastdfs.conf”文件。</p> 
 <p>cp /usr/local/src/fastdfs-nginx-module-1.20/src/mod_fastdfs.conf /etc/fdfs/</p> 
 <p>vi /etc/fdfs/mod_fastdfs.conf</p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">base_path=/home/fastdfs</span></p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">tracker_server=192.168.0.166:22122</span></p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">url_have_group_name = true</span></p> 
 <p>…</p> 
 <p><span style="color:#fe2c24;">store_path0=/home/fastdfs/storage</span></p> 
</blockquote> 
<h4> 安装和配置Nginx</h4> 
<blockquote> 
 <p>安装Nginx</p> 
 <p>cd /usr/local/src/</p> 
 <p>wget http://nginx.org/download/nginx-1.15.2.tar.gz</p> 
 <p>tar -zxvf nginx-1.15.2.tar.gz</p> 
 <p>cd nginx-1.15.2</p> 
 <p>./configure --prefix=/usr/local/nginx --add-module=/usr/local/src/fastdfs-nginx-module-1.20/src/</p> 
 <p>make &amp;&amp;make install</p> 
 <p>配置Nginx</p> 
 <p>cd /usr/local/nginx/conf/</p> 
 <p>vi nginx.conf</p> 
 <p><span style="color:#fe2c24;">location ~/M00{<!-- --></span></p> 
 <p><span style="color:#fe2c24;">root   /home/fastdfs/storage/data;</span></p> 
 <p><span style="color:#fe2c24;">ngx_fastdfs_module;</span></p> 
 <p><span style="color:#fe2c24;">}</span></p> 
</blockquote> 
<h2>6、<strong>测试</strong> </h2> 
<h4> 测试已完成编译的软件 </h4> 
<blockquote> 
 <p>启动nginx</p> 
 <p>/usr/local/nginx/sbin/nginx</p> 
 <p>a生成测试文件</p> 
 <p>cd /usr/local/src</p> 
 <p>touch a.txt</p> 
 <p>vi a.txt</p> 
 <p>**如下内容并保存。</p> 
 <p>kungpeng test fastdfs ok!</p> 
 <p>b.生成文件链接</p> 
 <p>/usr/bin/fdfs_upload_file  /etc/fdfs/client.conf a.txt</p> 
 <p>预期：</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e3/99/q3CWJ4hd_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong>注:问题描述</strong></p> 
<p> make: *** 没有规则可以创建“default”需要的目标“build”。 停止。</p> 
<p>解决方法:</p> 
<ul><li>安装依赖</li></ul> 
<pre><code>yum -y install gcc openssl openssl-devel pcre-devel zlib zlib-devel</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/5b/7b/FlKKXhCU_o.png"></p> 
<p><strong>查看所有端口号</strong></p> 
<blockquote> 
 <p>netstat -nultp</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3a4e7804bbd6a98fcff275ff5be9756b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Springboot框架</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3daf641dfe90616601fb135934a2c5cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【记录】算法 - 算法基础c&#43;&#43;</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>