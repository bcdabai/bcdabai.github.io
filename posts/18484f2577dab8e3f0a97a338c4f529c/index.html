<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【leetcode】剑指 Offer（专项突击版）汇总 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【leetcode】剑指 Offer（专项突击版）汇总" />
<meta property="og:description" content="文章目录 002. 二进制加法（反转相加 / 位运算）006. 排序数组中两个数字之和（二分查找 / 双指针）007. 数组中和为 0 的三个数（双指针）008. 和大于等于 target 的最短子数组（滑动窗口 / 双指针）009. 乘积小于 K 的子数组（滑动窗口 / 双指针）010. 和为 k 的子数组（前缀和&#43;哈希表）011. 0 和 1 个数相同的子数组（前缀和&#43;哈希表）012. 左右两边子数组的和相等（前缀和）013. 二维子矩阵的和（前缀和）014. 字符串中的变位词（滑动窗口 / 双指针）015. 字符串中的所有变位词（滑动窗口 / 双指针）016. 不含重复字符的最长子字符串（滑动窗口 / 双指针） 002. 二进制加法（反转相加 / 位运算） 题目：剑指 Offer II 002. 二进制加法
给定两个 01 字符串 a 和 b ，请计算它们的和，并以二进制字符串的形式输出。
输入为 非空 字符串且只包含数字 1 和 0。
示例 1:
输入: a = &#34;11&#34;, b = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/18484f2577dab8e3f0a97a338c4f529c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-17T02:39:17+08:00" />
<meta property="article:modified_time" content="2022-08-17T02:39:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【leetcode】剑指 Offer（专项突击版）汇总</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#002____2" rel="nofollow">002. 二进制加法（反转相加 / 位运算）</a></li><li><a href="#006____124" rel="nofollow">006. 排序数组中两个数字之和（二分查找 / 双指针）</a></li><li><a href="#007__0__213" rel="nofollow">007. 数组中和为 0 的三个数（双指针）</a></li><li><a href="#008__target____290" rel="nofollow">008. 和大于等于 target 的最短子数组（滑动窗口 / 双指针）</a></li><li><a href="#009__K____380" rel="nofollow">009. 乘积小于 K 的子数组（滑动窗口 / 双指针）</a></li><li><a href="#010__k__459" rel="nofollow">010. 和为 k 的子数组（前缀和+哈希表）</a></li><li><a href="#011_0__1__540" rel="nofollow">011. 0 和 1 个数相同的子数组（前缀和+哈希表）</a></li><li><a href="#012__612" rel="nofollow">012. 左右两边子数组的和相等（前缀和）</a></li><li><a href="#013__692" rel="nofollow">013. 二维子矩阵的和（前缀和）</a></li><li><a href="#014____804" rel="nofollow">014. 字符串中的变位词（滑动窗口 / 双指针）</a></li><li><a href="#015____959" rel="nofollow">015. 字符串中的所有变位词（滑动窗口 / 双指针）</a></li><li><a href="#016____1047" rel="nofollow">016. 不含重复字符的最长子字符串（滑动窗口 / 双指针）</a></li></ul> 
</div> 
<p></p> 
<h2><a id="002____2"></a>002. 二进制加法（反转相加 / 位运算）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/JFETK5/" rel="nofollow">剑指 Offer II 002. 二进制加法</a></p> 
<p>给定两个 01 字符串 a 和 b ，请计算它们的和，并以二进制字符串的形式输出。<br> 输入为 非空 字符串且只包含数字 1 和 0。</p> 
<p>示例 1:</p> 
<pre><code>输入: a = "11", b = "10"
输出: "101"
</code></pre> 
<p>示例 2:</p> 
<pre><code>输入: a = "1010", b = "1011"
输出: "10101"
</code></pre> 
<p>提示：</p> 
<ul><li>每个字符串仅由字符 ‘0’ 或 ‘1’ 组成。</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          a 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          , 
         
        
          b 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= a.length, b.length &lt;= 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">a</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">b</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li>字符串如果不是 “0” ，就都不含前导零。</li></ul> 
<p><font size="5"><strong>方法一：从后到前每位依次加</strong></font></p> 
<p>类似于把多位数字以链表的形式存储后来实现加法（如123+456=579，但是存储数字是以链表的形式存，即<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         1 
        
       
         → 
        
       
         2 
        
       
         → 
        
       
         3 
        
       
         + 
        
       
         4 
        
       
         → 
        
       
         5 
        
       
         → 
        
       
         6 
        
       
         = 
        
       
         5 
        
       
         → 
        
       
         7 
        
       
         → 
        
       
         9 
        
       
      
        1\to2\to3 + 4\to5\to6 = 5\to7\to9 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">7</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">9</span></span></span></span></span>）的一种思路。</p> 
<p>步骤（以 a = “11”, b = “10” 为例）：</p> 
<ol><li>把数字反转 —— a = “11”, b = “01”</li><li>将反转后的两个数字从前往后 每位 进行加。</li></ol> 
<p>之所以需要反转就是因为可能出现最前面进位的情况，就如这个例子，加完后进位需要前面再补个 1。当然这道题以字符串的形式存储数字，自然不反转倒也可以，因为在前面补 1很方便，每位计算也不难。但如果是链表存多位数的话，首先每位计算时都要遍历链表到后面的位，假如两个4位数相加，就需要遍历4+3+2+1次两个链表，这样时间复杂度很高；其次，在进位时也比较复杂。不过这道题的话这么做确实没有必要，可以更简化一些，这里只是提供个思路。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">addBinary</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        a <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        b <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token string">""</span>
        jinwei <span class="token operator">=</span> <span class="token number">0</span>
        min_len <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>min_len<span class="token punctuation">)</span><span class="token punctuation">:</span>
            c <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> jinwei
            <span class="token keyword">if</span> c <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> jinwei<span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>jinwei<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        longer <span class="token operator">=</span> a <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">else</span> b
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>min_len<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>longer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            c <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>longer<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> jinwei
            <span class="token keyword">if</span> c <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> jinwei<span class="token punctuation">:</span>
            <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>jinwei<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

</code></pre> 
<p>上面的代码有些繁杂，改变一下，这样可能更容易理解。不过经过多次提交后这个用时一直都大于上面代码的用时，上面的代码一般是击败80%-90%（32ms，36ms），下面这个只能击败30%左右（40ms，44ms）</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">addBinary</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        i <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        j <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token string">""</span>
        jinwei <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">or</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            add_a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
            add_b <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
            c <span class="token operator">=</span> add_a <span class="token operator">+</span> add_b <span class="token operator">+</span> jinwei
            <span class="token keyword">if</span> c <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>
                jinwei <span class="token operator">=</span> <span class="token number">1</span>
            i <span class="token operator">-=</span> <span class="token number">1</span>
            j <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> jinwei<span class="token punctuation">:</span>
            <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token string">"1"</span>
        <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

</code></pre> 
<p><font size="5"><strong>方法二：位运算</strong></font></p> 
<p>我们可以设计这样的算法来计算：</p> 
<ul><li>把 a 和 b 转换成整型数字 x 和 y，在接下来的过程中，x 保存结果，y 保存进位。</li><li>当进位不为 0 时<br> 计算当前 x 和 y 的无进位相加结果：<code>answer = x ^ y</code><br> 计算当前 x 和 y 的进位：<code>carry = (x &amp; y) &lt;&lt; 1</code><br> 完成本次循环，更新 <code>x = answer，y = carry</code></li><li>返回 x 的二进制形式</li></ul> 
<p>为什么这个方法是可行的呢？在第一轮计算中，answer 的最后一位是 x 和 y 相加之后的结果，carry 的倒数第二位是 x 和 y 最后一位相加的进位。接着每一轮中，由于 carry 是由 x 和 y 按位与并且左移得到的，那么最后会补零，所以在下面计算的过程中后面的数位不受影响，而每一轮都可以得到一个低 i 位的答案和它向低 i + 1 位的进位，也就模拟了加法的过程。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">addBinary</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">while</span> y<span class="token punctuation">:</span>
            <span class="token builtin">sum</span> <span class="token operator">=</span> x <span class="token operator">^</span> y
            jinwei <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;</span> y<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span>
            x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">,</span> jinwei
        <span class="token keyword">return</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre> 
<h2><a id="006____124"></a>006. 排序数组中两个数字之和（二分查找 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/kLl5u1/" rel="nofollow">剑指 Offer II 006. 排序数组中两个数字之和</a></p> 
<p>给定一个已按照 <strong>升序排列</strong> 的整数数组 <code>numbers</code> ，请你从数组中找出两个数满足相加之和等于目标数 <code>target</code> 。</p> 
<p>函数应该以长度为 2 的整数数组的形式返回这两个数的下标值。numbers 的下标 从 0 开始计数 ，所以答案数组应当满足 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0 
        
       
         &lt; 
        
       
         = 
        
       
         a 
        
       
         n 
        
       
         s 
        
       
         w 
        
       
         e 
        
       
         r 
        
       
         [ 
        
       
         0 
        
       
         ] 
        
       
         &lt; 
        
       
         a 
        
       
         n 
        
       
         s 
        
       
         w 
        
       
         e 
        
       
         r 
        
       
         [ 
        
       
         1 
        
       
         ] 
        
       
         &lt; 
        
       
         n 
        
       
         u 
        
       
         m 
        
       
         b 
        
       
         e 
        
       
         r 
        
       
         s 
        
       
         . 
        
       
         l 
        
       
         e 
        
       
         n 
        
       
         g 
        
       
         t 
        
       
         h 
        
       
      
        0 &lt;= answer[0] &lt; answer[1] &lt; numbers.length 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mord mathnormal" style="margin-right: 0.0278em;">er</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mord mathnormal" style="margin-right: 0.0278em;">er</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">mb</span><span class="mord mathnormal">ers</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span></span></span> 。</p> 
<p>假设数组中存在且只存在一对符合条件的数字，同时一个数字不能使用两次。</p> 
<p>示例 1：</p> 
<pre><code>输入：numbers = [1,2,4,6,10], target = 8
输出：[1,3]
解释：2 与 6 之和等于目标数 8 。因此 index1 = 1, index2 = 3 。
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入：numbers = [2,3,4], target = 6
输出：[0,2]
</code></pre> 
<p>示例 3：</p> 
<pre><code>输入：numbers = [-1,0], target = -1
输出：[0,1]
</code></pre> 
<p>提示：</p> 
<ul><li>2 &lt;= numbers.length &lt;= 3 * <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li>-1000 &lt;= numbers[i] &lt;= 1000</li><li>numbers 按 递增顺序 排列</li><li>-1000 &lt;= target &lt;= 1000</li><li>仅存在一个有效答案</li></ul> 
<p><font size="5"><strong>方法一：穷举</strong></font></p> 
<p>具体实现略。</p> 
<p><font size="5"><strong>方法二：二分法</strong></font></p> 
<p>二分查找相关讲解：<a href="https://blog.csdn.net/qq_45978890/article/details/116094046">【二分查找】详细图解</a></p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> numbers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            low <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
            high <span class="token operator">=</span> length <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">while</span> low <span class="token operator">&lt;=</span> high<span class="token punctuation">:</span>
                mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>
                <span class="token keyword">if</span> numbers<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target <span class="token operator">-</span> numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> mid<span class="token punctuation">]</span>
                <span class="token keyword">elif</span> numbers<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target <span class="token operator">-</span> numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    high <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>
</code></pre> 
<p>时间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         log 
        
       
         ⁡ 
        
       
         n 
        
       
         ) 
        
       
      
        O(n \log n) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中 n 是数组的长度。需要遍历数组一次确定第一个数，时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         ) 
        
       
      
        O(n) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，寻找第二个数使用二分查找，时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         log 
        
       
         ⁡ 
        
       
         n 
        
       
         ) 
        
       
      
        O(\log n) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，因此总时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         log 
        
       
         ⁡ 
        
       
         n 
        
       
         ) 
        
       
      
        O(n \log n) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>。</p> 
<p>空间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         1 
        
       
         ) 
        
       
      
        O(1) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</p> 
<p><font size="5"><strong>方法三：双指针</strong></font></p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> numbers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        low <span class="token operator">=</span> <span class="token number">0</span>
        high <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>
            <span class="token builtin">sum</span> <span class="token operator">=</span> numbers<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">+</span> numbers<span class="token punctuation">[</span>high<span class="token punctuation">]</span>
            <span class="token keyword">if</span> <span class="token builtin">sum</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">[</span>low<span class="token punctuation">,</span> high<span class="token punctuation">]</span>
            <span class="token keyword">elif</span> <span class="token builtin">sum</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                high <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                low <span class="token operator">+=</span> <span class="token number">1</span>
</code></pre> 
<p>时间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         n 
        
       
         ) 
        
       
      
        O(n) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 是数组的长度。两个指针移动的总次数最多为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 次。</p> 
<p>空间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         1 
        
       
         ) 
        
       
      
        O(1) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</p> 
<h2><a id="007__0__213"></a>007. 数组中和为 0 的三个数（双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/1fGaJU/" rel="nofollow">剑指 Offer II 007. 数组中和为 0 的三个数</a></p> 
<p>给定一个包含 n 个整数的数组 <code>nums</code>，判断 <code>nums</code> 中是否存在三个元素 a ，b ，c ，使得 a + b + c = 0 ？请找出所有和为 0 且 不重复 的三元组。</p> 
<p>示例 1：</p> 
<pre><code>输入：nums = [-1,0,1,2,-1,-4]
输出：[[-1,-1,2],[-1,0,1]]
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入：nums = []
输出：[]
</code></pre> 
<p>示例 3：</p> 
<pre><code class="prism language-python">输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
输出：<span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          0 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          3000 
         
        
       
         0 &lt;= nums.length &lt;= 3000 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3000</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          − 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
       
         -10^5 &lt;= nums[i] &lt;= 10^5 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></li></ul> 
<p>这道题其实是 <strong>006. 排序数组中两个数字之和</strong> 的进阶版，可以参考上道题的思路来进一步解决这道题。</p> 
<p><font size="5"><strong>方法一：穷举</strong></font></p> 
<p>具体实现略。</p> 
<p><font size="5"><strong>方法二：固定一个值 + 双指针</strong></font></p> 
<p>可以先看懂上一道题的双指针方法再看这道题。</p> 
<p>首先把 <code>nums</code> 按从小到大排列，固定第一个值 i，<code>0 - nums[i]</code> 即为上一题的 <code>target</code>，然后剩下两个数的查找方法就用上一题双指针的方法即可。此外，这里还要注意去重的问题，因为题目中要求是 <strong>不重复 的三元组</strong>。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">threeSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 从小到大排序</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 去重</span>
                <span class="token keyword">continue</span>
            low <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
            high <span class="token operator">=</span> length <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>
                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>high<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>  <span class="token comment"># 去重</span>
                        low <span class="token operator">+=</span> <span class="token number">1</span>
                        <span class="token keyword">if</span> nums<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>low <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                            <span class="token keyword">break</span>
                    <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>  <span class="token comment"># 去重</span>
                        high <span class="token operator">-=</span> <span class="token number">1</span>
                        <span class="token keyword">if</span> nums<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>high <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                            <span class="token keyword">break</span>
                <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    high <span class="token operator">-=</span> <span class="token number">1</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    low <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> res
</code></pre> 
<p>在上一道题中还有个二分查找的方法，不过这题用二分法就需要遍历两次，且去重等条件的实现有些复杂，不推荐使用。</p> 
<h2><a id="008__target____290"></a>008. 和大于等于 target 的最短子数组（滑动窗口 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/2VG8Kg/" rel="nofollow">剑指 Offer II 008. 和大于等于 target 的最短子数组</a></p> 
<p>给定一个含有 n 个正整数的数组和一个正整数 target 。</p> 
<p>找出该数组中满足其和 ≥ target 的长度最小的 连续子数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         [ 
        
       
         n 
        
       
         u 
        
       
         m 
        
        
        
          s 
         
        
          l 
         
        
       
         , 
        
       
         n 
        
       
         u 
        
       
         m 
        
        
        
          s 
         
         
         
           l 
          
         
           + 
          
         
           1 
          
         
        
       
         , 
        
       
         . 
        
       
         . 
        
       
         . 
        
       
         , 
        
       
         n 
        
       
         u 
        
       
         m 
        
        
        
          s 
         
         
         
           r 
          
         
           − 
          
         
           1 
          
         
        
       
         , 
        
       
         n 
        
       
         u 
        
       
         m 
        
        
        
          s 
         
        
          r 
         
        
       
         ] 
        
       
      
        [nums_l, nums_{l+1}, ..., nums_{r-1}, nums_r] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2083em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2083em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span> ，并返回其长度。如果不存在符合条件的子数组，返回 0 。</p> 
<p>示例 1：</p> 
<pre><code>输入：target = 7, nums = [2,3,1,2,4,3]
输出：2
解释：子数组 [4,3] 是该条件下的长度最小的子数组。
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入：target = 4, nums = [1,4,4]
输出：1
</code></pre> 
<p>示例 3：</p> 
<pre><code>输入：target = 11, nums = [1,1,1,1,1,1,1,1]
输出：0
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          t 
         
        
          a 
         
        
          r 
         
        
          g 
         
        
          e 
         
        
          t 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           9 
          
         
        
       
         1 &lt;= target &lt;= 10^9 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
       
         1 &lt;= nums.length &lt;= 10^5 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
       
         1 &lt;= nums[i] &lt;= 10^5 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></li></ul> 
<p><font size="5"><strong>方法一：滑动窗口</strong></font></p> 
<p>最简单的滑动窗口，类似枚举，不过这个超时了。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minSubArrayLen</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> window_size <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> window_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
                sum_window  <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">:</span> i <span class="token operator">+</span> window_size<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">:</span>
                    <span class="token keyword">return</span> window_size 
        <span class="token keyword">return</span> <span class="token number">0</span>
</code></pre> 
<p><font size="5"><strong>方法二：双指针</strong></font></p> 
<p>双指针left，right</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minSubArrayLen</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        left <span class="token operator">=</span> <span class="token number">0</span>
        sum_window <span class="token operator">=</span> <span class="token number">0</span>
        min_len <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">for</span> right<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sum_window <span class="token operator">+=</span> value
            <span class="token keyword">while</span> sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">:</span>
                min_len <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>min_len<span class="token punctuation">,</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                sum_window <span class="token operator">-=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span>
                left <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> min_len <span class="token keyword">if</span> min_len <span class="token operator">&lt;=</span> <span class="token number">1e5</span> <span class="token keyword">else</span> <span class="token number">0</span>
</code></pre> 
<p>以 <code>target = 7, nums = [2,3,1,2,4,3]</code> 为例：</p> 
<pre><code class="prism language-python"><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">3</span>    sum_window <span class="token operator">&lt;</span> target
<span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">3</span><span class="token punctuation">]</span> <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">3</span>    sum_window <span class="token operator">&lt;</span> target
<span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">3</span>    sum_window <span class="token operator">&lt;</span> target
<span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">4</span>  <span class="token number">3</span>    sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">,</span> min_len <span class="token operator">=</span> <span class="token number">4</span> 
 <span class="token number">2</span> <span class="token punctuation">[</span><span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">4</span>  <span class="token number">3</span>    sum_window <span class="token operator">&lt;</span> target
 <span class="token number">2</span> <span class="token punctuation">[</span><span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">3</span>    sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">,</span> min_len <span class="token operator">=</span> <span class="token number">4</span> 
 <span class="token number">2</span>  <span class="token number">3</span> <span class="token punctuation">[</span><span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">3</span>    sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">,</span> min_len <span class="token operator">=</span> <span class="token number">3</span> 
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span> <span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">3</span>    sum_window <span class="token operator">&lt;</span> target
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span> <span class="token punctuation">[</span><span class="token number">2</span>  <span class="token number">4</span>  <span class="token number">3</span><span class="token punctuation">]</span>   sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">,</span> min_len <span class="token operator">=</span> <span class="token number">3</span> 
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span> <span class="token punctuation">[</span><span class="token number">4</span>  <span class="token number">3</span><span class="token punctuation">]</span>   sum_window <span class="token operator">&gt;=</span> target<span class="token punctuation">,</span> min_len <span class="token operator">=</span> <span class="token number">2</span>
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">4</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>   sum_window <span class="token operator">&lt;</span> target 
</code></pre> 
<img src="https://images2.imgbox.com/ad/6e/aQ3xAG5F_o.png" width="50%"> 
<h2><a id="009__K____380"></a>009. 乘积小于 K 的子数组（滑动窗口 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/ZVAVXX/" rel="nofollow">剑指 Offer II 009. 乘积小于 K 的子数组</a></p> 
<p>给定一个正整数数组 <code>nums</code> 和整数 <code>k</code> ，请找出该数组内乘积小于 <code>k</code> 的连续的子数组的个数。</p> 
<p>示例 1:</p> 
<pre><code>输入: nums = [10,5,2,6], k = 100
输出: 8
解释: 8 个乘积小于 100 的子数组分别为: [10], [5], [2], [6], [10,5], [5,2], [2,6], [5,2,6]。
需要注意的是 [10,5,2] 并不是乘积小于100的子数组。
</code></pre> 
<p>示例 2:</p> 
<pre><code>输入: nums = [1,2,3], k = 0
输出: 0
</code></pre> 
<p>提示:</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          3 
         
        
          ∗ 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= nums.length &lt;= 3 * 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1000 
         
        
       
         1 &lt;= nums[i] &lt;= 1000 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1000</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          0 
         
        
          &lt; 
         
        
          = 
         
        
          k 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           6 
          
         
        
       
         0 &lt;= k &lt;= 10^6 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.0391em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></li></ul> 
<p><font size="5"><strong>方法一：滑动窗口枚举</strong></font></p> 
<p>不出意外，这个又超时了</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numSubarrayProductLessThanK</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">multiply</span><span class="token punctuation">(</span>num_list<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 累乘</span>
            res <span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">for</span> num <span class="token keyword">in</span> num_list<span class="token punctuation">:</span>
                res <span class="token operator">*=</span> num
            <span class="token keyword">return</span> res
        num <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> size <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>
                sum_window <span class="token operator">=</span> multiply<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">:</span> i <span class="token operator">+</span> size<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> sum_window <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>
                    num <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> num
</code></pre> 
<p><font size="5"><strong>方法二：双指针</strong></font></p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numSubarrayProductLessThanK</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        num <span class="token operator">=</span> <span class="token number">0</span>
        left <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">for</span> right<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token builtin">sum</span> <span class="token operator">*=</span> value
            <span class="token keyword">while</span> <span class="token builtin">sum</span> <span class="token operator">&gt;=</span> k <span class="token keyword">and</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>
                <span class="token builtin">sum</span> <span class="token operator">/=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span>
                left <span class="token operator">+=</span> <span class="token number">1</span>
            num <span class="token operator">+=</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> num
</code></pre> 
<p>以 <code>nums = [10,5,2,6], k = 100</code> 为例：</p> 
<pre><code class="prism language-python">right <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token number">5</span>  <span class="token number">2</span>  <span class="token number">6</span>    <span class="token builtin">sum</span> <span class="token operator">&lt;</span> k    num <span class="token operator">+=</span> <span class="token number">0</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
right <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">[</span><span class="token number">10</span>  <span class="token number">5</span><span class="token punctuation">]</span> <span class="token number">2</span>  <span class="token number">6</span>    <span class="token builtin">sum</span> <span class="token operator">&lt;</span> k    num <span class="token operator">+=</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">10</span> <span class="token number">5</span><span class="token punctuation">]</span>
right <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">10</span>  <span class="token number">5</span>  <span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">6</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> k
 <span class="token number">10</span> <span class="token punctuation">[</span><span class="token number">5</span>  <span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">6</span>    <span class="token builtin">sum</span> <span class="token operator">&lt;</span> k    num <span class="token operator">+=</span> <span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">2</span><span class="token punctuation">]</span>
right <span class="token operator">=</span> <span class="token number">3</span> 
 <span class="token number">10</span> <span class="token punctuation">[</span><span class="token number">5</span>  <span class="token number">2</span>  <span class="token number">6</span><span class="token punctuation">]</span>   <span class="token builtin">sum</span> <span class="token operator">&lt;</span> k    num <span class="token operator">+=</span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>  <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">2</span> <span class="token number">6</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token number">5</span> <span class="token number">2</span> <span class="token number">6</span><span class="token punctuation">]</span>
</code></pre> 
<img src="https://images2.imgbox.com/64/f4/OI8WedCa_o.png" width="50%"> 
<h2><a id="010__k__459"></a>010. 和为 k 的子数组（前缀和+哈希表）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/QTMn0o/" rel="nofollow">剑指 Offer II 010. 和为 k 的子数组</a></p> 
<p>给定一个整数数组 <code>nums</code> 和一个整数 <code>k</code> ，请找到该数组中和为 <code>k</code> 的连续子数组的个数。</p> 
<p>示例 1：</p> 
<pre><code>输入:nums = [1,1,1], k = 2
输出: 2
解释: 此题 [1,1] 与 [1,1] 为两种不同的情况
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入:nums = [1,2,3], k = 3
输出: 2
</code></pre> 
<p>提示:</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          2 
         
        
          ∗ 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= nums.length &lt;= 2 * 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          − 
         
        
          1000 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1000 
         
        
       
         -1000 &lt;= nums[i] &lt;= 1000 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">1000</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1000</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          − 
         
        
          1 
         
         
         
           0 
          
         
           7 
          
         
        
          &lt; 
         
        
          = 
         
        
          k 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           7 
          
         
        
       
         -10^7 &lt;= k &lt;= 10^7 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.0391em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span></span></li></ul> 
<p><font size="5"><strong>方法一：枚举法</strong></font></p> 
<p>这里我使用了 cumsum 计算累加和，Counter 计数。<br> 相关讲解：<a href="https://blog.csdn.net/cunchi4221/article/details/107473148">Python中的numpy.cumsum（）</a>；<a href="https://blog.csdn.net/Flag_ing/article/details/124026747">python Counter() 函数</a><br> 方法很简单，不过超时了。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">subarraySum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        num <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> left <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            accumulate <span class="token operator">=</span> np<span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            counter <span class="token operator">=</span> Counter<span class="token punctuation">(</span>accumulate<span class="token punctuation">)</span>
            num <span class="token operator">+=</span> counter<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
        <span class="token keyword">return</span> num
</code></pre> 
<p><font size="5"><strong>方法二：前缀和+哈希表</strong></font></p> 
<p>以 <code>nums = [1, 3, 2, 4, 1, 1, -2], k = 6</code> 为例：</p> 
<table><thead><tr><th>终点</th><th>前缀和</th><th>前缀和 - k</th><th>解释</th></tr></thead><tbody><tr><td>(0) 起点</td><td><font color="#006400">0</font></td><td></td><td></td></tr><tr><td>(1) num = 1</td><td>1</td><td>-5</td><td></td></tr><tr><td>(2) num = 3</td><td><font color="#FF0000">4</font></td><td>-2</td><td></td></tr><tr><td>(3) num = 2</td><td><font color="#0000FF">6</font></td><td><font color="#006400">0</font></td><td>以 (3) 为终点，从起点 (0) 开始，存在距离目标为 0 的路径为<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            1 
           
          
            → 
           
          
            2 
           
          
            → 
           
          
            3 
           
          
         
           1\to2\to3 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span></td></tr><tr><td>(4) num = 4</td><td>10</td><td><font color="#FF0000">4</font></td><td>以 (4) 为终点，从起点 (0) 开始，比目标k多出距离 4；<br>而从起点 (0) 开始到点 (2) 的距离正好为 4，因此解为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            3 
           
          
            → 
           
          
            4 
           
          
         
           3\to4 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span></span></span></span></span></td></tr><tr><td>(5) num = 1</td><td>11</td><td>5</td><td></td></tr><tr><td>(6) num = 1</td><td>12</td><td><font color="#0000FF">6</font></td><td>以 (6) 为终点，从起点 (0) 开始，比目标 k 多出距离 6；<br>而从起点 (0) 开始到点 (3) 的距离正好为 6，因此解为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            4 
           
          
            → 
           
          
            5 
           
          
            → 
           
          
            6 
           
          
         
           4\to5\to6 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span></span></span></span></span></td></tr><tr><td>(7) num = -2</td><td>10</td><td><font color="#FF0000">4</font></td><td>以 (4) 为终点，从起点 (0) 开始，比目标 k 多出距离 4；<br>而从起点 (0) 开始到点 (2) 的距离正好为 4，<br>因此解为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            3 
           
          
            → 
           
          
            4 
           
          
            → 
           
          
            5 
           
          
            → 
           
          
            6 
           
          
            → 
           
          
            7 
           
          
         
           3\to4\to5\to6\to7 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">7</span></span></span></span></span></td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">subarraySum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        num <span class="token operator">=</span> <span class="token number">0</span>
        prefix_sum <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 前缀和</span>
        prefix_dic <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>  <span class="token comment"># 统计各个前缀和的个数</span>
        <span class="token keyword">for</span> value <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
            prefix_sum <span class="token operator">+=</span> value
            <span class="token comment"># 统计</span>
            <span class="token keyword">if</span> prefix_sum <span class="token operator">-</span> k <span class="token keyword">in</span> prefix_dic<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                num <span class="token operator">+=</span> prefix_dic<span class="token punctuation">[</span>prefix_sum <span class="token operator">-</span> k<span class="token punctuation">]</span>
            <span class="token comment"># 更新字典</span>
            <span class="token keyword">if</span> prefix_sum <span class="token keyword">not</span> <span class="token keyword">in</span> prefix_dic<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                prefix_dic<span class="token punctuation">[</span>prefix_sum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                prefix_dic<span class="token punctuation">[</span>prefix_sum<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> num
</code></pre> 
<img src="https://images2.imgbox.com/c8/41/H7IIbIQq_o.png" width="50%"> 
<h2><a id="011_0__1__540"></a>011. 0 和 1 个数相同的子数组（前缀和+哈希表）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/A1NYOS/" rel="nofollow">剑指 Offer II 011. 0 和 1 个数相同的子数组</a></p> 
<p>给定一个二进制数组 <code>nums</code> , 找到含有相同数量的 <strong>0</strong> 和 <strong>1</strong> 的<strong>最长连续子数组</strong>，并返回该子数组的长度。</p> 
<p>示例 1：</p> 
<pre><code>输入: nums = [0,1]
输出: 2
说明: [0, 1] 是具有相同数量 0 和 1 的最长连续子数组。
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入: nums = [0,1,0]
输出: 2
说明: [0, 1] (或 [1, 0]) 是具有相同数量 0 和 1 的最长连续子数组。
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
       
         1 &lt;= nums.length &lt;= 10^5 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
       
         nums[i] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 不是 <strong>0</strong> 就是 <strong>1</strong></li></ul> 
<p><font size="5"><strong>方法一：前缀和+哈希表</strong></font></p> 
<p>思路与上一题相似。</p> 
<p>「0 和 1 的数量相同」等价于「1 的数量减去 0 的数量等于 0」，我们可以将数组中的 0 视作 −1，则原问题转换成「求最长的连续子数组，其元素和为 0」。</p> 
<p>即 <code>nums[i] == 0</code> 时，将其改为 <code>nums[i] == -1</code>；<code>nums[i] == 1</code> 时不变，仍为 <code>nums[i] == 1</code>。<br> 这样就将「0 和 1 的数量相同」问题转化为「求<strong>和为 0</strong> 的 <strong>最长</strong> 子数组的长度」</p> 
<p>与上一道题的区别在于这题要得到 <strong>最长</strong>字数组的<strong>长度</strong>，因此字典（哈希表）中的 value 不再存储个数，而是变成 <strong>这个前缀和第一次出现的位置</strong>（即只有第一次出现时更新字典）。至于为什么是 <strong>第一次</strong>，毫无疑问，越靠前的位置长度越长。</p> 
<p>以 <code>nums = [0, 1, 1, 0, 1]</code> 为例，等价于上一题的 <code>nums = [-1, 1, 1, -1, 1], target = 0</code>：</p> 
<table><thead><tr><th>终点</th><th>前缀和</th><th>前缀和 - target<br>(=前缀和)</th><th>解释</th></tr></thead><tbody><tr><td>(-1)起点</td><td>0</td><td></td><td></td></tr><tr><td>(0) num = -1</td><td>-1</td><td>-1</td><td></td></tr><tr><td>(1) num = 1</td><td>0</td><td>0</td><td>以 (1) 为终点，从起点 (-1) 开始，<br>存在距离目标为 0 的路径为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            0 
           
          
            → 
           
          
            1 
           
          
         
           0\to1 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span></td></tr><tr><td>(2) num = 1</td><td>1</td><td>1</td><td></td></tr><tr><td>(3) num = -1</td><td>0</td><td>0</td><td>以 (3) 为终点，从起点 (-1) 开始，存在距离目标为 0 的<br>路径为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            0 
           
          
            → 
           
          
            1 
           
          
            → 
           
          
            2 
           
          
            → 
           
          
            3 
           
          
         
           0\to1\to2\to3 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            2 
           
          
            → 
           
          
            3 
           
          
         
           2\to3 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>，显然最长的是<br><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            0 
           
          
            → 
           
          
            1 
           
          
            → 
           
          
            2 
           
          
            → 
           
          
            3 
           
          
         
           0\to1\to2\to3 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>，这也是为什么字典中的 value 存储<br>的是 这个前缀和第一次出现的位置（即只有第一次出现<br>时才更新字典)</td></tr><tr><td>(4) num = 1</td><td>1</td><td>1</td><td>以 (4) 为终点，从起点 (-1) 开始，比目标 target 多出距离 1；<br>而从起点 (-1) 开始到点 (2) 的距离正好为 1，因此满足条件的<br>路径为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            3 
           
          
            → 
           
          
            4 
           
          
         
           3\to4 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span></span></span></span></span></td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMaxLength</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
        prefix_sum <span class="token operator">=</span> <span class="token number">0</span>
        prefix_dic <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>  <span class="token comment"># 前缀和: 首次出现的位置; 0设为-1</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            prefix_sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">if</span> prefix_sum <span class="token keyword">in</span> prefix_dic<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> i <span class="token operator">-</span> prefix_dic<span class="token punctuation">[</span>prefix_sum<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                prefix_dic<span class="token punctuation">[</span>prefix_sum<span class="token punctuation">]</span> <span class="token operator">=</span> i
        <span class="token keyword">return</span> res
</code></pre> 
<img src="https://images2.imgbox.com/47/be/zrVdIfVO_o.png" width="50%"> 
<h2><a id="012__612"></a>012. 左右两边子数组的和相等（前缀和）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/tvdfij/" rel="nofollow">剑指 Offer II 012. 左右两边子数组的和相等</a></p> 
<p>给你一个整数数组 <code>nums</code> ，请计算数组的 <strong>中心下标</strong> 。</p> 
<p>数组 <strong>中心下标</strong> 是数组的一个下标，<strong>其左侧所有元素相加的和等于右侧所有元素相加的和</strong>。</p> 
<p>如果中心下标位于数组最左端，那么左侧数之和视为 0 ，因为在下标的左侧不存在元素。这一点对于中心下标位于数组最右端同样适用。</p> 
<p>如果数组有多个中心下标，应该返回 <strong>最靠近左边</strong> 的那一个。如果数组不存在中心下标，返回 -1 。</p> 
<p>示例 1：</p> 
<pre><code>输入：nums = [1,7,3,6,5,6]
输出：3
解释：
中心下标是 3 。
左侧数之和 sum = nums[0] + nums[1] + nums[2] = 1 + 7 + 3 = 11 ，
右侧数之和 sum = nums[4] + nums[5] = 5 + 6 = 11 ，二者相等。
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入：nums = [1, 2, 3]
输出：-1
解释：
数组中不存在满足此条件的中心下标。
</code></pre> 
<p>示例 3：</p> 
<pre><code>输入：nums = [2, 1, -1]
输出：0
解释：
中心下标是 0 。
左侧数之和 sum = 0 ，（下标 0 左侧不存在元素），
右侧数之和 sum = nums[1] + nums[2] = 1 + -1 = 0 。
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= nums.length &lt;= 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          − 
         
        
          1000 
         
        
          &lt; 
         
        
          = 
         
        
          n 
         
        
          u 
         
        
          m 
         
        
          s 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1000 
         
        
       
         -1000 &lt;= nums[i] &lt;= 1000 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">1000</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1000</span></span></span></span></span></li></ul> 
<p><font size="5"><strong>方法一：枚举法</strong></font></p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">pivotIndex</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">if</span> length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token keyword">if</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> i
        <span class="token keyword">if</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token punctuation">:</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> length <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre> 
<img src="https://images2.imgbox.com/0e/3f/sItwO2ZZ_o.png" width="50%"> 
<p><font size="5"><strong>方法二：前缀和</strong></font></p> 
<p>记数组的全部元素之和为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         total 
        
       
      
        \textit{total} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">total</span></span></span></span></span></span>，当遍历到第 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
      
        i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> 个元素时，设其左侧元素之和为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         sum 
        
       
      
        \textit{sum} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sum</span></span></span></span></span></span>，则其右侧元素之和为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         total 
        
       
         − 
        
        
        
          nums 
         
        
          i 
         
        
       
         − 
        
       
         sum 
        
       
      
        \textit{total}-\textit{nums}_i-\textit{sum} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord textit">total</span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">nums</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sum</span></span></span></span></span></span>。左右侧元素相等即为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         sum 
        
       
         = 
        
       
         total 
        
       
         − 
        
        
        
          nums 
         
        
          i 
         
        
       
         − 
        
       
         sum 
        
       
      
        \textit{sum}=\textit{total}-\textit{nums}_i-\textit{sum} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sum</span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord textit">total</span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">nums</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sum</span></span></span></span></span></span>，即 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         2 
        
       
         × 
        
       
         sum 
        
       
         + 
        
        
        
          nums 
         
        
          i 
         
        
       
         = 
        
       
         total 
        
       
      
        2\times\textit{sum}+\textit{nums}_i=\textit{total} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord textit">sum</span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">nums</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">total</span></span></span></span></span></span>。</p> 
<p>当中心下标左侧或右侧没有元素时，即为零个项相加，这在数学上称作「空和」（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         empty sum 
        
       
      
        \text{empty sum} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord">empty sum</span></span></span></span></span></span>）。在程序设计中我们约定「空和是零」。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">pivotIndex</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        total <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        prefix_sum <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token number">2</span> <span class="token operator">*</span> prefix_sum <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> total<span class="token punctuation">:</span>
                <span class="token keyword">return</span> i
            prefix_sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre> 
<img src="https://images2.imgbox.com/0a/94/gG61hobH_o.png" width="50%"> 
<h2><a id="013__692"></a>013. 二维子矩阵的和（前缀和）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/O4NDxx/" rel="nofollow">剑指 Offer II 013. 二维子矩阵的和</a></p> 
<p>给定一个二维矩阵 <code>matrix</code>，以下类型的多个请求：</p> 
<p>计算其子矩形范围内元素的总和，该子矩阵的左上角为 (row1, col1) ，右下角为 (row2, col2) 。<br> 实现 NumMatrix 类：</p> 
<p><code>NumMatrix(int[][] matrix)</code> 给定整数矩阵 matrix 进行初始化<br> <code>int sumRegion(int row1, int col1, int row2, int col2)</code> 返回左上角 (row1, col1) 、右下角 (row2, col2) 的子矩阵的元素总和。</p> 
<p>示例 1：<br> <img src="https://images2.imgbox.com/b3/89/B0XYLJZ8_o.png" width="20%"></p> 
<pre><code>输入: 
["NumMatrix","sumRegion","sumRegion","sumRegion"]
[[[[3,0,1,4,2],[5,6,3,2,1],[1,2,0,1,5],[4,1,0,1,7],[1,0,3,0,5]]],[2,1,4,3],[1,1,2,2],[1,2,2,4]]
输出: 
[null, 8, 11, 12]

解释:
NumMatrix numMatrix = new NumMatrix([[3,0,1,4,2],[5,6,3,2,1],[1,2,0,1,5],[4,1,0,1,7],[1,0,3,0,5]]]);
numMatrix.sumRegion(2, 1, 4, 3); // return 8 (红色矩形框的元素总和)
numMatrix.sumRegion(1, 1, 2, 2); // return 11 (绿色矩形框的元素总和)
numMatrix.sumRegion(1, 2, 2, 4); // return 12 (蓝色矩形框的元素总和)
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          m 
         
        
          = 
         
        
          = 
         
        
          m 
         
        
          a 
         
        
          t 
         
        
          r 
         
        
          i 
         
        
          x 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
       
         m == matrix.length 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">==</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          n 
         
        
          = 
         
        
          = 
         
        
          m 
         
        
          a 
         
        
          t 
         
        
          r 
         
        
          i 
         
        
          x 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
       
         n == matrix[i].length 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">==</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          m 
         
        
          , 
         
        
          n 
         
        
          &lt; 
         
        
          = 
         
        
          200 
         
        
       
         1 &lt;= m, n &lt;= 200 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">200</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          − 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
          &lt; 
         
        
          = 
         
        
          m 
         
        
          a 
         
        
          t 
         
        
          r 
         
        
          i 
         
        
          x 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          [ 
         
        
          j 
         
        
          ] 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           5 
          
         
        
       
         -10^5 &lt;= matrix[i][j] &lt;= 10^5 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          0 
         
        
          &lt; 
         
        
          = 
         
        
          r 
         
        
          o 
         
        
          w 
         
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          r 
         
        
          o 
         
        
          w 
         
        
          2 
         
        
          &lt; 
         
        
          m 
         
        
       
         0 &lt;= row1 &lt;= row2 &lt; m 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          0 
         
        
          &lt; 
         
        
          = 
         
        
          c 
         
        
          o 
         
        
          l 
         
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          c 
         
        
          o 
         
        
          l 
         
        
          2 
         
        
          &lt; 
         
        
          n 
         
        
       
         0 &lt;= col1 &lt;= col2 &lt; n 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          最多调用 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
          次 
         
        
          s 
         
        
          u 
         
        
          m 
         
        
          R 
         
        
          e 
         
        
          g 
         
        
          i 
         
        
          o 
         
        
          n 
         
        
          方法 
         
        
       
         最多调用 10^4 次 sumRegion 方法 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0085em; vertical-align: -0.1944em;"></span><span class="mord cjk_fallback">最多调用</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">次</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">方法</span></span></span></span></span></li></ul> 
<p><font size="5"><strong>方法一：一维前缀和</strong></font></p> 
<p>初始化时对矩阵的每一行计算前缀和，检索时对二维区域中的每一行计算子数组和，然后对每一行的子数组和计算总和。</p> 
<p>具体实现方面，创建 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         m 
        
       
      
        m 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 行 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         + 
        
       
         1 
        
       
      
        n+1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> 列的二维数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         sums 
        
       
      
        \textit{sums} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sums</span></span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         m 
        
       
      
        m 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         matrix 
        
       
      
        \textit{matrix} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         sums 
        
       
         [ 
        
       
         i 
        
       
         ] 
        
       
      
        \textit{sums}[i] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">sums</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         matrix 
        
       
         [ 
        
       
         i 
        
       
         ] 
        
       
      
        \textit{matrix}[i] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">matrix</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 的前缀和数组。将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         sums 
        
       
      
        \textit{sums} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sums</span></span></span></span></span></span> 的列数设为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         + 
        
       
         1 
        
       
      
        n+1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> 的目的是为了方便计算每一行的子数组和，不需要对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          col 
         
        
          1 
         
        
       
         = 
        
       
         0 
        
       
      
        \textit{col}_1=0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">col</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span> 的情况特殊处理。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">NumMatrix</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> matrix <span class="token keyword">else</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>sums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># m * (n+1) 的二维矩阵</span>
        <span class="token comment"># 无法用[[0] * (n-1)] * m 替代</span>
        <span class="token comment"># 原因可查看：https://blog.csdn.net/hq_cjj/article/details/86659589</span>

        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">sumRegion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> row1<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> col1<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> row2<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> col2<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        total <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col1<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>row1<span class="token punctuation">,</span> row2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> total

<span class="token comment"># Your NumMatrix object will be instantiated and called as such:</span>
<span class="token comment"># obj = NumMatrix(matrix)</span>
<span class="token comment"># param_1 = obj.sumRegion(row1,col1,row2,col2)</span>
</code></pre> 
<ul><li> <p>时间复杂度：初始化 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>，每次检索 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           ) 
          
         
        
          O(m) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
        
          n 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数。<br> 初始化需要遍历矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 计算二维前缀和，时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>。<br> 每次检索需要对二维区域中的每一行计算子数组和，二维区域的行数不超过 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>，计算每一行的子数组和的时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           1 
          
         
           ) 
          
         
        
          O(1) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>，因此每次检索的时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           ) 
          
         
        
          O(m) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>。</p> </li><li> <p>空间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
        
          n 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数。需要创建一个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 行 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
           + 
          
         
           1 
          
         
        
          n+1 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> 列的前缀和数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           sums 
          
         
        
          \textit{sums} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sums</span></span></span></span></span></span>。</p> </li></ul> 
<img src="https://images2.imgbox.com/fa/d4/ISjOS3kf_o.png" width="50%"> 
<p><font size="5"><strong>方法二：二维前缀和</strong></font></p> 
<p>假设 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         m 
        
       
      
        m 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         matrix 
        
       
      
        \textit{matrix} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数。定义当 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0 
        
       
         ≤ 
        
       
         i 
        
       
         &lt; 
        
       
         m 
        
       
      
        0 \le i&lt;m 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7804em; vertical-align: -0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6986em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 且 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0 
        
       
         ≤ 
        
       
         j 
        
       
         &lt; 
        
       
         n 
        
       
      
        0 \le j&lt;n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7804em; vertical-align: -0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.854em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         f 
        
       
         ( 
        
       
         i 
        
       
         , 
        
       
         j 
        
       
         ) 
        
       
      
        f(i,j) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span></span></span></span></span> 为矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         matrix 
        
       
      
        \textit{matrix} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
       
         i 
        
       
         , 
        
       
         j 
        
       
         ) 
        
       
      
        (i,j) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span></span></span></span></span> 为右下角的子矩阵的元素之和：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
         
         
           ∑ 
          
          
          
            p 
           
          
            = 
           
          
            0 
           
          
         
           i 
          
         
         
         
           ∑ 
          
          
          
            q 
           
          
            = 
           
          
            0 
           
          
         
           j 
          
         
        
          matrix 
         
        
          [ 
         
        
          p 
         
        
          ] 
         
        
          [ 
         
        
          q 
         
        
          ] 
         
        
       
         f(i,j)=\sum\limits_{p=0}^i \sum\limits_{q=0}^j \textit{matrix}[p][q] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 3.262em; vertical-align: -1.4032em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8117em;"><span class="" style="top: -1.8829em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.4032em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.8588em;"><span class="" style="top: -1.8829em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">q</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3471em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.4032em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord textit">matrix</span></span><span class="mopen">[</span><span class="mord mathnormal">p</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mclose">]</span></span></span></span></span></span></p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         f 
        
       
         ( 
        
       
         i 
        
       
         , 
        
       
         j 
        
       
         ) 
        
       
      
        f(i,j) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span></span></span></span></span> 的计算如下：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          = 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          ) 
         
        
          + 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          1 
         
        
          ) 
         
        
          − 
         
        
          f 
         
        
          ( 
         
        
          i 
         
        
          − 
         
        
          1 
         
        
          , 
         
        
          j 
         
        
          − 
         
        
          1 
         
        
          ) 
         
        
          + 
         
        
          matrix 
         
        
          [ 
         
        
          i 
         
        
          ] 
         
        
          [ 
         
        
          j 
         
        
          ] 
         
        
       
         f(i,j)=f(i-1,j)+f(i,j-1)-f(i-1,j-1)+\textit{matrix}[i][j] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.854em; vertical-align: -0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">matrix</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span></span></span></span></span></span></p> 
<center> 
 <img src="https://images2.imgbox.com/67/31/mDhYWkXm_o.png" width="70%"> 
</center> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">NumMatrix</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> matrix <span class="token keyword">else</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>sums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># (m+1) * (n+1) 的二维矩阵</span>

        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">sumRegion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> row1<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> col1<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> row2<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> col2<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        total <span class="token operator">=</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>row2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>col2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>row1<span class="token punctuation">]</span><span class="token punctuation">[</span>col2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>row2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>col1<span class="token punctuation">]</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>sums<span class="token punctuation">[</span>row1<span class="token punctuation">]</span><span class="token punctuation">[</span>col1<span class="token punctuation">]</span>
        <span class="token keyword">return</span> total
</code></pre> 
<ul><li> <p>时间复杂度：初始化 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>，每次检索 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           1 
          
         
           ) 
          
         
        
          O(1) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
        
          n 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数。<br> 初始化需要遍历矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 计算二维前缀和，时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>。<br> 每次检索的时间复杂度是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           1 
          
         
           ) 
          
         
        
          O(1) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>。</p> </li><li> <p>空间复杂度：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           O 
          
         
           ( 
          
         
           m 
          
         
           n 
          
         
           ) 
          
         
        
          O(mn) 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
        
          m 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
        
          n 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 分别是矩阵 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           matrix 
          
         
        
          \textit{matrix} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6679em;"></span><span class="mord text"><span class="mord textit">matrix</span></span></span></span></span></span> 的行数和列数。需要创建一个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
           + 
          
         
           1 
          
         
        
          m+1 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> 行 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           n 
          
         
           + 
          
         
           1 
          
         
        
          n+1 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> 列的二维前缀和数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           sums 
          
         
        
          \textit{sums} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord text"><span class="mord textit">sums</span></span></span></span></span></span>。</p> </li></ul> 
<img src="https://images2.imgbox.com/b0/99/m8hVaXWZ_o.png" width="50%"> 
<h2><a id="014____804"></a>014. 字符串中的变位词（滑动窗口 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/MPnaiL/" rel="nofollow">剑指 Offer II 014. 字符串中的变位词</a></p> 
<p>给定两个字符串 <code>s1</code> 和 <code>s2</code>，写一个函数来判断 <code>s2</code> 是否包含 <code>s1</code> 的某个变位词。</p> 
<p>换句话说，第一个字符串的排列之一是第二个字符串的 <strong>子串</strong> 。</p> 
<p>示例 1：</p> 
<pre><code>输入: s1 = "ab" s2 = "eidbaooo"
输出: True
解释: s2 包含 s1 的排列之一 ("ba").
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入: s1= "ab" s2 = "eidboaoo"
输出: False
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          s 
         
        
          1. 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          , 
         
        
          s 
         
        
          2. 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= s1.length, s2.length &lt;= 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord">1.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord">2.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li>s1 和 s2 仅包含小写字母</li></ul> 
<p><font size="5"><strong>方法1：滑动窗口</strong></font></p> 
<p>固定窗口大小为 <code>s1</code> 的长度，利用 Counter 统计各个字母的数量，当两个Counter（Counter内部无先后顺序） 相同时，则返回True。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">checkInclusion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
        counter1 <span class="token operator">=</span> Counter<span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token operator">-</span> size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            counter2 <span class="token operator">=</span> Counter<span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">:</span> i<span class="token operator">+</span>size<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> counter1 <span class="token operator">==</span> counter2<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre> 
<img src="https://images2.imgbox.com/f9/ed/WFjMxqWH_o.png" width="50%"> 
<p>另一种滑动窗口，不同的是这里统计用的是长为26的列表。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">checkInclusion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        size1<span class="token punctuation">,</span> size2 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size1 <span class="token operator">&gt;</span> size2<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        list1<span class="token punctuation">,</span> list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size1<span class="token punctuation">)</span><span class="token punctuation">:</span>
            list1<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            list2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> list1 <span class="token operator">==</span> list2<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size1<span class="token punctuation">,</span> size2<span class="token punctuation">)</span><span class="token punctuation">:</span>
            list2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            list2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token operator">-</span>size1<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> list1 <span class="token operator">==</span> list2<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre> 
<img src="https://images2.imgbox.com/36/a8/xYBGxJxl_o.png" width="50%"> 
<p><strong>优化</strong></p> 
<p>注意到每次窗口滑动时，只统计了一进一出两个字符，却比较了整个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          1 
         
        
       
      
        \textit{cnt}_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 数组。（上面代码中的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         1 
        
       
         , 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         2 
        
       
      
        list1,list2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord">2</span></span></span></span></span> 即是这里的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          1 
         
        
       
      
        \textit{cnt}_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>）</p> 
<p>从这个角度出发，我们可以用一个变量 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         diff 
        
       
      
        \textit{diff} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">diff</span></span></span></span></span></span> 来记录 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          1 
         
        
       
      
        \textit{cnt}_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 与 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 的不同值的个数，这样判断 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          1 
         
        
       
      
        \textit{cnt}_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 是否相等就转换成了判断 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         diff 
        
       
      
        \textit{diff} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">diff</span></span></span></span></span></span> 是否为 0.</p> 
<p>每次窗口滑动，记一进一出两个字符为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
      
        x 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         y 
        
       
      
        y 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span></span></span></span></span>.</p> 
<p>若 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
         = 
        
       
         y 
        
       
      
        x=y 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span></span></span></span></span> 则对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 无影响，可以直接跳过。</p> 
<p>若 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
         ≠ 
        
       
         y 
        
       
      
        x\ne y 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span></span></span></span></span>，对于字符 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
      
        x 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span>，在修改 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 之前若有 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         = 
        
        
        
          cnt 
         
        
          1 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}_2[x]=\textit{cnt}_1[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span>，则将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         diff 
        
       
      
        \textit{diff} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">diff</span></span></span></span></span></span> 加一；在修改 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
      
        \textit{cnt}_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7651em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 之后若有 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         = 
        
        
        
          cnt 
         
        
          1 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}_2[x]=\textit{cnt}_1[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span>，则将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         diff 
        
       
      
        \textit{diff} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">diff</span></span></span></span></span></span> 减一。字符 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         y 
        
       
      
        y 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span></span></span></span></span> 同理。</p> 
<p>此外，为简化上述逻辑，我们可以只用一个数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span>cnt，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         = 
        
        
        
          cnt 
         
        
          2 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         − 
        
        
        
          cnt 
         
        
          1 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}[x]=\textit{cnt}_2[x]-\textit{cnt}_1[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">cnt</span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span>，将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          1 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}_1[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span> 与 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          cnt 
         
        
          2 
         
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}_2[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord text"><span class="mord textit">cnt</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span> 的比较替换成 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
      
        \textit{cnt}[x] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">cnt</span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span></span> 与 0 的比较。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">checkInclusion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        size1<span class="token punctuation">,</span> size2 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size1 <span class="token operator">&gt;</span> size2<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        cnt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size1<span class="token punctuation">)</span><span class="token punctuation">:</span>
            cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
            cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
        diff <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> c <span class="token keyword">in</span> cnt<span class="token punctuation">:</span>
            <span class="token keyword">if</span> c <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                diff <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">if</span> diff <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size1<span class="token punctuation">,</span> size2<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
            y <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>i<span class="token operator">-</span>size1<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> x <span class="token operator">==</span> y<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            <span class="token comment"># 右边</span>
            <span class="token keyword">if</span> cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                diff <span class="token operator">+=</span> <span class="token number">1</span>
            cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                diff <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token comment"># 左边</span>
            <span class="token keyword">if</span> cnt<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                diff <span class="token operator">+=</span> <span class="token number">1</span>
            cnt<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> cnt<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                diff <span class="token operator">-=</span> <span class="token number">1</span>

            <span class="token keyword">if</span> diff <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre> 
<img src="https://images2.imgbox.com/4b/91/VQ6JbVyv_o.png" width="50%"> 
<p><font size="5"><strong>方法2：双指针</strong></font></p> 
<p>回顾方法一的思路，我们在保证区间长度为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 的情况下，去考察是否存在一个区间使得 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的值全为 0。</p> 
<p>反过来，还可以在保证 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的值不为正的情况下，去考察是否存在一个区间，其长度恰好为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>。</p> 
<p>初始时，仅统计 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          s 
         
        
          1 
         
        
       
      
        s_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>​ 中的字符，则 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的值均不为正，且元素值之和为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         − 
        
       
         n 
        
       
      
        -n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord mathnormal">n</span></span></span></span></span>。</p> 
<p>然后用两个指针 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         left 
        
       
      
        \textit{left} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord text"><span class="mord textit">left</span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         right 
        
       
      
        \textit{right} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord textit">right</span></span></span></span></span></span> 表示考察的区间 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         [ 
        
       
         left 
        
       
         , 
        
       
         right 
        
       
         ] 
        
       
      
        [\textit{left},\textit{right}] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord text"><span class="mord textit">left</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord textit">right</span></span><span class="mclose">]</span></span></span></span></span>。<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         right 
        
       
      
        \textit{right} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord textit">right</span></span></span></span></span></span> 每向右移动一次，就统计一次进入区间的字符 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
      
        x 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span>。为保证 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的值不为正，若此时 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         &gt; 
        
       
         0 
        
       
      
        \textit{cnt}[x]&gt;0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">cnt</span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>，则向右移动左指针，减少离开区间的字符的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 值直到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
         [ 
        
       
         x 
        
       
         ] 
        
       
         ≤ 
        
       
         0 
        
       
      
        \textit{cnt}[x] \le 0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord textit">cnt</span></span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>。</p> 
<p>注意到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         [ 
        
       
         left 
        
       
         , 
        
       
         right 
        
       
         ] 
        
       
      
        [\textit{left},\textit{right}] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord text"><span class="mord textit">left</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord textit">right</span></span><span class="mclose">]</span></span></span></span></span> 的长度每增加 1，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的元素值之和就增加 1。当 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         [ 
        
       
         left 
        
       
         , 
        
       
         right 
        
       
         ] 
        
       
      
        [\textit{left},\textit{right}] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord text"><span class="mord textit">left</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord textit">right</span></span><span class="mclose">]</span></span></span></span></span> 的长度恰好为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
      
        n 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 时，就意味着 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的元素值之和为 0。由于 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         cnt 
        
       
      
        \textit{cnt} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord text"><span class="mord textit">cnt</span></span></span></span></span></span> 的值不为正，元素值之和为 0 就意味着所有元素均为 0，这样我们就找到了一个目标子串。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">checkInclusion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        size1<span class="token punctuation">,</span> size2 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size1 <span class="token operator">&gt;</span> size2<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        cnt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size1<span class="token punctuation">)</span><span class="token punctuation">:</span>
            cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
        left <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> right <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size2<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
            cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">while</span> cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
                left <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> size1<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
</code></pre> 
<img src="https://images2.imgbox.com/a0/d8/NV3hNYm3_o.png" width="50%"> 
<h2><a id="015____959"></a>015. 字符串中的所有变位词（滑动窗口 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/VabMRr/" rel="nofollow">剑指 Offer II 015. 字符串中的所有变位词</a></p> 
<p>给定两个字符串 s 和 p，找到 s 中所有 p 的 变位词 的子串，返回这些子串的起始索引。不考虑答案输出的顺序。</p> 
<p>变位词 指字母相同，但排列不同的字符串。</p> 
<p>示例 1：</p> 
<pre><code>输入: s = "cbaebabacd", p = "abc"
输出: [0,6]
解释:
起始索引等于 0 的子串是 "cba", 它是 "abc" 的变位词。
起始索引等于 6 的子串是 "bac", 它是 "abc" 的变位词。
</code></pre> 
<p>示例 2：</p> 
<pre><code>输入: s = "abab", p = "ab"
输出: [0,1,2]
解释:
起始索引等于 0 的子串是 "ab", 它是 "ab" 的变位词。
起始索引等于 1 的子串是 "ba", 它是 "ab" 的变位词。
起始索引等于 2 的子串是 "ab", 它是 "ab" 的变位词。
</code></pre> 
<p>提示:</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          1 
         
        
          &lt; 
         
        
          = 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          , 
         
        
          p 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          3 
         
        
          ∗ 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         1 &lt;= s.length, p.length &lt;= 3 * 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">p</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          s 
         
        
       
         s 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
       
         p 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> 仅包含小写字母</li></ul> 
<p><font size="5"><strong>方法1：滑动窗口</strong></font></p> 
<p>与上一题思路一样</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findAnagrams</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> p<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        size_s<span class="token punctuation">,</span> size_p <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size_s <span class="token operator">&lt;</span> size_p<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        cnt1<span class="token punctuation">,</span> cnt2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size_p<span class="token punctuation">)</span><span class="token punctuation">:</span>
            cnt1<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            cnt2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> cnt1 <span class="token operator">==</span> cnt2<span class="token punctuation">:</span>
            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size_p<span class="token punctuation">,</span> size_s<span class="token punctuation">)</span><span class="token punctuation">:</span>
            cnt2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            cnt2<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span>size_p<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> cnt1 <span class="token operator">==</span> cnt2<span class="token punctuation">:</span>
                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token operator">-</span>size_p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
</code></pre> 
<img src="https://images2.imgbox.com/cf/93/GUoOIbkM_o.png" width="50%"> 
<p><font size="5"><strong>方法2：双指针</strong></font></p> 
<p>与上一题思路相同</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findAnagrams</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> p<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        size_s<span class="token punctuation">,</span> size_p <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size_s <span class="token operator">&lt;</span> size_p<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        cnt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">26</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size_p<span class="token punctuation">)</span><span class="token punctuation">:</span>
            cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        left <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> right <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size_s<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
            cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">while</span> cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                cnt<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
                left <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> size_p<span class="token punctuation">:</span>
                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">)</span>
        <span class="token keyword">return</span> res
</code></pre> 
<img src="https://images2.imgbox.com/ea/f5/lED7wnZV_o.png" width="50%"> 
<h2><a id="016____1047"></a>016. 不含重复字符的最长子字符串（滑动窗口 / 双指针）</h2> 
<p>题目：<a href="https://leetcode.cn/problems/wtcaE1/" rel="nofollow">剑指 Offer II 016. 不含重复字符的最长子字符串</a></p> 
<p>给定一个字符串 s ，请你找出其中不含有重复字符的 最长连续子字符串 的长度。</p> 
<p>示例 1:</p> 
<pre><code>输入: s = "abcabcbb"
输出: 3 
解释: 因为无重复字符的最长子字符串是 "abc"，所以其长度为 3。
</code></pre> 
<p>示例 2:</p> 
<pre><code>输入: s = "bbbbb"
输出: 1
解释: 因为无重复字符的最长子字符串是 "b"，所以其长度为 1。
</code></pre> 
<p>示例 3:</p> 
<pre><code>输入: s = "pwwkew"
输出: 3
解释: 因为无重复字符的最长子串是 "wke"，所以其长度为 3。
     请注意，你的答案必须是 子串 的长度，"pwke" 是一个子序列，不是子串。
</code></pre> 
<p>示例 4:</p> 
<pre><code>输入: s = ""
输出: 0
</code></pre> 
<p>提示：</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          0 
         
        
          &lt; 
         
        
          = 
         
        
          s 
         
        
          . 
         
        
          l 
         
        
          e 
         
        
          n 
         
        
          g 
         
        
          t 
         
        
          h 
         
        
          &lt; 
         
        
          = 
         
        
          5 
         
        
          ∗ 
         
        
          1 
         
         
         
           0 
          
         
           4 
          
         
        
       
         0 &lt;= s.length &lt;= 5 * 10^4 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6835em; vertical-align: -0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">5</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          s 
         
        
       
         s 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span> 由英文字母、数字、符号和空格组成</li></ul> 
<p><font size="5"><strong>方法1：双指针/滑动窗口</strong></font></p> 
<p>找出从每一个字符开始的，不包含重复字符的最长子串，那么其中最长的那个字符串即为答案。对于示例一中的字符串，我们列举出这些结果，其中括号中表示选中的字符以及最长的字符串：</p> 
<p>以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         (a)bcabcbb 
        
       
      
        \texttt{(a)bcabcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">(a)bcabcbb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         (abc)abcbb 
        
       
      
        \texttt{(abc)abcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">(abc)abcbb</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a(b)cabcbb 
        
       
      
        \texttt{a(b)cabcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">a(b)cabcbb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a(bca)bcbb 
        
       
      
        \texttt{a(bca)bcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">a(bca)bcbb</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ab(c)abcbb 
        
       
      
        \texttt{ab(c)abcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">ab(c)abcbb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ab(cab)cbb 
        
       
      
        \texttt{ab(cab)cbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">ab(cab)cbb</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abc(a)bcbb 
        
       
      
        \texttt{abc(a)bcbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abc(a)bcbb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abc(abc)bb 
        
       
      
        \texttt{abc(abc)bb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abc(abc)bb</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abca(b)cbb 
        
       
      
        \texttt{abca(b)cbb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abca(b)cbb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abca(bc)bb 
        
       
      
        \texttt{abca(bc)bb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abca(bc)bb</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcab(c)bb 
        
       
      
        \texttt{abcab(c)bb} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcab(c)bb</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcab(cb)b 
        
       
      
        \texttt{abcab(cb)b} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcab(cb)b</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcabc(b)b 
        
       
      
        \texttt{abcabc(b)b} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcabc(b)b</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcabc(b)b 
        
       
      
        \texttt{abcabc(b)b} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcabc(b)b</span></span></span></span></span></span>；<br> 以 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcabcb(b) 
        
       
      
        \texttt{abcabcb(b)} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcabcb(b)</span></span></span></span></span></span> 开始的最长字符串为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         abcabcb(b) 
        
       
      
        \texttt{abcabcb(b)} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord text"><span class="mord texttt">abcabcb(b)</span></span></span></span></span></span>。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token keyword">if</span> length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        min_len <span class="token operator">=</span> <span class="token number">1</span>
        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
        occ <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> length <span class="token operator">-</span> min_len<span class="token punctuation">:</span>  <span class="token comment"># 左指针到length-min_len-1就够了，再往后min_len也不会超过先前的了，不用到length</span>
            <span class="token keyword">if</span> left <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                occ<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">[</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 左指针向右移动一格</span>
            <span class="token keyword">while</span> right <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> length <span class="token keyword">and</span> s<span class="token punctuation">[</span>right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> occ<span class="token punctuation">:</span>
                right <span class="token operator">+=</span> <span class="token number">1</span> 
                occ<span class="token punctuation">.</span>add<span class="token punctuation">(</span>s<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;</span> min_len<span class="token punctuation">:</span>
                min_len <span class="token operator">=</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span>
            left <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">return</span> min_len
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b63ab717aeebaf24ff4d6a90b9eb5a56/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">App逆向入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d39411ed34055da2ad8a36ece4f1d06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小白学习Cobalt Strike4.5（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>