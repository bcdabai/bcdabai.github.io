<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>双端队列（数据结构作业第七周的一道题目） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="双端队列（数据结构作业第七周的一道题目）" />
<meta property="og:description" content="6-2 双端队列 (25 分) 双端队列（deque，即double-ended queue的缩写）是一种具有队列和栈性质的数据结构，即可以（也只能）在线性表的两端进行插入和删除。若以顺序存储方式实现双端队列，请编写例程实现下列操作：
Push(X,D)：将元素X插入到双端队列D的头；
Pop(D)：删除双端队列D的头元素，并返回；
Inject(X,D)：将元素X插入到双端队列D的尾部；
Eject(D)：删除双端队列D的尾部元素，并返回。
函数接口定义：
bool Push( ElementType X, Deque D ); ElementType Pop( Deque D ); bool Inject( ElementType X, Deque D ); ElementType Eject( Deque D ); 其中Deque结构定义如下：
typedef int Position; typedef struct QNode *PtrToQNode; struct QNode { ElementType *Data; /* 存储元素的数组 */ Position Front, Rear; /* 队列的头、尾指针 */ int MaxSize; /* 队列最大容量 */ }; typedef PtrToQNode Deque; 注意：Push和Inject应该在正常执行完操作后返回true，或者在出现非正常情况时返回false。当Front和Rear相等时队列为空，Pop和Eject必须返回由裁判程序定义的ERROR。
裁判测试程序样例：
#include &lt;stdio." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/50b432a0a5018d79da7bba0b4b77dfcd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-11T23:59:35+08:00" />
<meta property="article:modified_time" content="2019-10-11T23:59:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">双端队列（数据结构作业第七周的一道题目）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="62__25__0"></a>6-2 双端队列 (25 分)</h3> 
<p>双端队列（deque，即double-ended queue的缩写）是一种具有队列和栈性质的数据结构，即可以（也只能）在线性表的两端进行插入和删除。若以顺序存储方式实现双端队列，请编写例程实现下列操作：</p> 
<p>Push(X,D)：将元素X插入到双端队列D的头；<br> Pop(D)：删除双端队列D的头元素，并返回；<br> Inject(X,D)：将元素X插入到双端队列D的尾部；<br> Eject(D)：删除双端队列D的尾部元素，并返回。<br> 函数接口定义：</p> 
<pre><code>bool Push( ElementType X, Deque D );
ElementType Pop( Deque D );
bool Inject( ElementType X, Deque D );
ElementType Eject( Deque D );
</code></pre> 
<p>其中Deque结构定义如下：</p> 
<pre><code>typedef int Position;
typedef struct QNode *PtrToQNode;
struct QNode {
    ElementType *Data;      /* 存储元素的数组   */
    Position Front, Rear;   /* 队列的头、尾指针 */
    int MaxSize;            /* 队列最大容量     */
};
typedef PtrToQNode Deque; 
</code></pre> 
<p>注意：Push和Inject应该在正常执行完操作后返回true，或者在出现非正常情况时返回false。当Front和Rear相等时队列为空，Pop和Eject必须返回由裁判程序定义的ERROR。</p> 
<p>裁判测试程序样例：</p> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define ERROR -1
typedef int ElementType;
typedef enum { push, pop, inject, eject, end } Operation;
typedef enum { false, true } bool;
typedef int Position;
typedef struct QNode *PtrToQNode;
struct QNode {
    ElementType *Data;      /* 存储元素的数组   */
    Position Front, Rear;   /* 队列的头、尾指针 */
    int MaxSize;            /* 队列最大容量     */
};
typedef PtrToQNode Deque; 

Deque CreateDeque( int MaxSize )
{   /* 注意：为区分空队列和满队列，需要多开辟一个空间 */
    Deque D = (Deque)malloc(sizeof(struct QNode));
    MaxSize++;
    D-&gt;Data = (ElementType *)malloc(MaxSize * sizeof(ElementType));
    D-&gt;Front = D-&gt;Rear = 0;
    D-&gt;MaxSize = MaxSize;
    return D;
}

bool Push( ElementType X, Deque D );
ElementType Pop( Deque D );
bool Inject( ElementType X, Deque D );
ElementType Eject( Deque D );

Operation GetOp();          /* 裁判实现，细节不表 */
void PrintDeque( Deque D ); /* 裁判实现，细节不表 */

int main()
{
    ElementType X;
    Deque D;
    int N, done = 0;

    scanf("%d", &amp;N);
    D = CreateDeque(N);
    while (!done) {
        switch(GetOp()) {
        case push: 
            scanf("%d", &amp;X);
            if (!Push(X, D)) printf("Deque is Full!\n");
            break;
        case pop:
            X = Pop(D);
            if ( X==ERROR ) printf("Deque is Empty!\n");
            else printf("%d is out\n", X);
            break;
        case inject: 
            scanf("%d", &amp;X);
            if (!Inject(X, D)) printf("Deque is Full!\n");
            break;
        case eject:
            X = Eject(D);
            if ( X==ERROR ) printf("Deque is Empty!\n");
            else printf("%d is out\n", X);
            break;
        case end:
            PrintDeque(D);
            done = 1;
            break;
        }
    }
    return 0;
}

/* 你的代码将被嵌在这里 */
输入样例：
3
Pop
Inject 1
Pop
Eject
Push 2
Push 3
Eject
Inject 4
Inject 5
Inject 6
Push 7
Pop
End
输出样例：
Deque is Empty!
1 is out
Deque is Empty!
2 is out
Deque is Full!
Deque is Full!
3 is out
Inside Deque: 4 5
</code></pre> 
<h2><a id="_126"></a>我的想法</h2> 
<p>第一次碰到这个题目，真的研究了将近一个小时才把题目看懂。也第一次知道，STL里面有deque这个东西，从来没用过，以后也会尝试着使用。而这道题目就是给deque写四个子函数。<br> 题目其实比较简单，主要是得看懂题目。如果经常使用STL的人可能十来分钟就能搞定这个题目。我的不幸是我不仅没用过STL里的deque，我甚至都不知道STL里面有这个东西，所以完全不知道deque的概念和定义，只能看着题目猜测，于是读题读了将近一个小时。</p> 
<h3><a id="_129"></a>需要注意的地方</h3> 
<ol><li>MaxSize的值。</li></ol> 
<pre><code>Deque D = (Deque)malloc(sizeof(struct QNode));
   MaxSize++;
   D-&gt;Data = (ElementType *)malloc(MaxSize * sizeof(ElementType));
   D-&gt;Front = D-&gt;Rear = 0;
   D-&gt;MaxSize = MaxSize;
</code></pre> 
<p>这段代码要特别注意一下，用户输入了MaxSize，裁判会在创建函数中将其扩大一个，这将直接影响到判满和双端队列的容量。</p> 
<ol start="2"><li>空出来的数组快。<br> 空出来的一个块，要跟着一个索引走。换句话说，Front和Rear要有一个索引指向一个空的数组成员。<br> 事实证明，这个空出来的一块，应该跟着Rear走。换句话说，就是Rear索引对应的数组成员应该一直是这个空值NULL，而Front索引对应的内容应该不为NULL，除非deque是空的。<br> 为什么呢？<s>呵呵，我抄的别人的CSDN发现的。</s><br> 其实我第一次让Front索引一直指向NULL的，为什么呢？因为第一感觉，如果Front指向一个成员，那么计算循环的数字关系应该会很麻烦。但是这样一直WA。<br> 然而事实证明，NULL跟着Front亦或者是Rear，处理循环的数字关系都差不多，所以我觉得都行。但是我就是做不对。<br> 网上找了一篇博客看，比对我俩的区别，就是他是NULL跟着Rear，而我跟着Front。他对，我错。<br> 关键在这：</li></ol> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">PrintDeque</span><span class="token punctuation">(</span> Deque D <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 裁判实现，细节不表 */</span>
</code></pre> 
<p>我们不知道输出函数是怎样输出的，他不给看。</p> 
<h6><a id="_154"></a><s>卧槽，太过分了！！</s></h6> 
<p>所以说它输出的时候从Front开始输出，和从Front的下一个索引开始输出，就会出现以上两种情况不一样的结果，气鼓鼓。<br> 下面是AC代码：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">Push</span><span class="token punctuation">(</span> ElementType X<span class="token punctuation">,</span> Deque D <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token punctuation">)</span><span class="token operator">==</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">=</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            D<span class="token operator">-</span><span class="token operator">&gt;</span>Data<span class="token punctuation">[</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token punctuation">]</span><span class="token operator">=</span>X<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">--</span><span class="token punctuation">;</span>
            D<span class="token operator">-</span><span class="token operator">&gt;</span>Data<span class="token punctuation">[</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token punctuation">]</span><span class="token operator">=</span>X<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ElementType <span class="token function">Pop</span><span class="token punctuation">(</span> Deque D <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">==</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token punctuation">)</span>
    <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        ElementType a<span class="token operator">=</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Data<span class="token punctuation">[</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token punctuation">]</span><span class="token punctuation">;</span>
        D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">=</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token function">Inject</span><span class="token punctuation">(</span> ElementType X<span class="token punctuation">,</span> Deque D <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token punctuation">)</span><span class="token operator">==</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        D<span class="token operator">-</span><span class="token operator">&gt;</span>Data<span class="token punctuation">[</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token punctuation">]</span><span class="token operator">=</span>X<span class="token punctuation">;</span>
        D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">=</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ElementType <span class="token function">Eject</span><span class="token punctuation">(</span> Deque D <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Front<span class="token operator">==</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token punctuation">)</span>
    <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
        D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">=</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>MaxSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token operator">--</span><span class="token punctuation">;</span>
        ElementType a<span class="token operator">=</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Data<span class="token punctuation">[</span>D<span class="token operator">-</span><span class="token operator">&gt;</span>Rear<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d012edbcbeede2b2e45251e4eb99051e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LGB、XGB、CBT参数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3b66b52c06fa4405186ed23e10e181b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Flink API介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>