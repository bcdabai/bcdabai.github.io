<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS7-搭建-Vulhub靶场(安装包方式) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS7-搭建-Vulhub靶场(安装包方式)" />
<meta property="og:description" content="1.Vulhub靶场介绍 Vulhub：是一个面向大众的开源漏洞靶场，无需docker知识，仅需要执行两条简单的命令即可编译、运行一个完整的漏洞靶场镜像。让漏洞复现更加简单，让入门小白可以更加专注于漏洞本身。
官网：Vulhub - Docker-Compose file for vulnerability environment
2.资源准备 由于整个过程都是采用安装包进行安装的，原因在安装步骤的也进行解释了，这里提供一下各个资源的下载地址吧，若下载慢，也可以使用我的百度网盘中的资源进行安装。
资源包：百度网盘 请输入提取码提取码：ko3a
下载.tgz格式的docker离线安装包：Index of linux/static/stable/x86_64/
下载.rpm格式的docker离线安装包：Index of linux/centos/7/x86_64/stable/Packages/
下载Vulhub靶场压缩包：GitHub - vulhub/vulhub: Pre-Built Vulnerable Environments Based on Docker-Compose
3.靶场安装步骤 这里采用的均是使用安装包进行安装，由于在安装docker、docker-Compose和Vulhub的时候可能会存在下载很长时间的情况，而这样就无需下载，直接进行安装就快很多了。
3.1.安装Docker 3.1.1.新建Docker目录 新建/usr/docker/目录，这个目录是用于 Docker离线安装包存放和安装的。
命令：mkdir /usr/docker/ 3.1.2.上传Docker安装包 如果使用xshell连接的话，使用rz即可进行上传，若输入rz后无法进行上传，那么就是由于未安装，使用yum install lrzsz即可安装。
3.1.3.安装Docker服务 使用yum进行安装。
命令：yum install docker-ce-17.12.1.ce-1.el7.centos.x86_64.rpm -y 3.1.4.设置Docker服务 这里需要开启docker服务以及设置开机自启动。
命令：systemctl start docker &amp;&amp; systemctl enable docker 3.1.5.查看Docker状态 这里需要查看一下刚刚设置过的docker服务的状态。
命令：systemctl | grep docker 3.2.安装Docker-compose 3.2.1.进入相关目录 这里需要进入/usr/local/bin/目录。
命令：cd /usr/local/bin/ 3.2.2.上传Docker-compose安装包 这里的上传方式和上传docker安装包一样，都使用rz。
3.2.3.添加执行权限 这里需要为docker-compose安装包添加执行权限。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f3e2b8c93e00494b593ed489d9d6092e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-08T08:22:06+08:00" />
<meta property="article:modified_time" content="2023-02-08T08:22:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS7-搭建-Vulhub靶场(安装包方式)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="h2-1">1.<strong>Vulhub靶场介绍</strong></h3> 
<p>        Vulhub：是一个面向大众的开源漏洞靶场，无需docker知识，仅需要执行两条简单的命令即可编译、运行一个完整的漏洞靶场镜像。让漏洞复现更加简单，让入门小白可以更加专注于漏洞本身。</p> 
<p>        官网：<a href="https://vulhub.org/#/environments/struts2/s2-005/" rel="nofollow" title="Vulhub - Docker-Compose file for vulnerability environment">Vulhub - Docker-Compose file for vulnerability environment</a></p> 
<h2>2.<strong>资源准备</strong></h2> 
<p>        由于整个过程都是采用安装包进行安装的，原因在安装步骤的也进行解释了，这里提供一下各个资源的下载地址吧，若下载慢，也可以使用我的百度网盘中的资源进行安装。</p> 
<p>        资源包：<a href="https://pan.baidu.com/s/1qyDGbO-nm_Yj4IRRPKWvrA?pwd=ko3a" rel="nofollow" title="百度网盘 请输入提取码">百度网盘 请输入提取码</a>提取码：ko3a</p> 
<p>        下载.tgz格式的docker离线安装包：<a href="https://download.docker.com/linux/static/stable/x86_64/" rel="nofollow" title="Index of linux/static/stable/x86_64/">Index of linux/static/stable/x86_64/</a></p> 
<p>        下载.rpm格式的docker离线安装包：<a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/" rel="nofollow" title="Index of linux/centos/7/x86_64/stable/Packages/">Index of linux/centos/7/x86_64/stable/Packages/</a></p> 
<p>        下载Vulhub靶场压缩包：<a href="https://github.com/vulhub/vulhub.git" title="GitHub - vulhub/vulhub: Pre-Built Vulnerable Environments Based on Docker-Compose">GitHub - vulhub/vulhub: Pre-Built Vulnerable Environments Based on Docker-Compose</a></p> 
<h2>3.<strong>靶场安装步骤</strong></h2> 
<p>        这里采用的均是使用安装包进行安装，由于在安装docker、docker-Compose和Vulhub的时候可能会存在下载很长时间的情况，而这样就无需下载，直接进行安装就快很多了。</p> 
<h3 id="h2-2">3.1.<strong>安装</strong><strong>D</strong><strong>ocker</strong></h3> 
<h4 id="h3-1">3.1.1.<strong>新建</strong><strong>D</strong><strong>ocker目录</strong></h4> 
<p>        新建/usr/docker/目录，这个目录是用于 Docker离线安装包存放和安装的。</p> 
<pre><code class="language-bash">命令：mkdir /usr/docker/</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ea/04/yaQgIv5H_o.jpg"></p> 
<h4 id="h3-2">3.1.2.<strong>上传</strong><strong>D</strong><strong>ocker安装包</strong></h4> 
<p>        如果使用xshell连接的话，使用rz即可进行上传，若输入rz后无法进行上传，那么就是由于未安装，使用yum install lrzsz即可安装。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/80/d4/9ra0UI0H_o.jpg"></p> 
<h4 id="h3-3">3.1.3.<strong>安装</strong><strong>D</strong><strong>ocker服务</strong></h4> 
<p>        使用yum进行安装。</p> 
<pre><code class="language-bash">命令：yum install docker-ce-17.12.1.ce-1.el7.centos.x86_64.rpm -y</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/78/f6/qApHSxmV_o.jpg"></p> 
<h4 id="h3-4">3.1.4.<strong>设置</strong><strong>D</strong><strong>ocker服务</strong></h4> 
<p>        这里需要开启docker服务以及设置开机自启动。</p> 
<pre><code class="language-bash">命令：systemctl start docker &amp;&amp; systemctl enable docker</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/12/61/1NLXgEqp_o.jpg"></p> 
<h4 id="h3-5">3.1.5.<strong>查看Docker状态</strong></h4> 
<p>        这里需要查看一下刚刚设置过的docker服务的状态。</p> 
<pre><code class="language-bash">命令：systemctl | grep docker</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c2/9d/AgSrXH9K_o.jpg"></p> 
<h3 id="h2-3">3.2.<strong>安装Docker-compose</strong></h3> 
<h4 id="h3-6">3.2.1.<strong>进入相关目录</strong></h4> 
<p>        这里需要进入/usr/local/bin/目录。</p> 
<pre><code class="language-bash">命令：cd /usr/local/bin/</code></pre> 
<p><img alt="" height="51" src="https://images2.imgbox.com/0b/d3/MA0ZS0E0_o.png" width="640"></p> 
<h4 id="h3-7">3.2.2.<strong>上传Docker-compose安装包</strong></h4> 
<p>        这里的上传方式和上传docker安装包一样，都使用rz。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a6/d0/rrX0LcjY_o.jpg"></p> 
<h4 id="h3-8">3.2.3.<strong>添加执行权限</strong></h4> 
<p>        这里需要为docker-compose安装包添加执行权限。</p> 
<pre><code class="language-bash">命令：sudo chmod +x /usr/local/bin/docker-compose</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e9/b9/ZvxeOXxI_o.jpg"></p> 
<h4 id="h3-9">3.2.4.<strong>验证Docker-compose版本</strong></h4> 
<p>        这里需要验证一下docker-compose的版本。</p> 
<pre><code class="language-bash">命令：docker-compose version</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c8/a7/UEUTi5JR_o.jpg"></p> 
<h3 id="h2-4">3.3.<strong>安装Vulhub靶场</strong></h3> 
<h4 id="h3-10">3.3.1.<strong>切换目录</strong></h4> 
<p>        这里切换目录，是为了方便安装Vulhub靶场，这里建议切换到root目录下。</p> 
<pre><code class="language-bash">命令：cd /root/</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/61/c5/JWPk7Cu6_o.jpg"></p> 
<h4 id="h3-11">3.3.2.<strong>上传Vulhub靶场压缩包</strong></h4> 
<p>        这里还是使用rz将压缩包上传上去。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/00/b7/rQ26mzF0_o.jpg"></p> 
<h4 id="h3-12">3.3.3.<strong>创建目录并移动压缩包</strong></h4> 
<p>        这里其实可以在进入root的时候，直接创建一个目录，然后将靶场的压缩包直接上传至该目录下。</p> 
<pre><code class="language-bash">命令：mkdir vulhub &amp;&amp; mv vulhub-master.zip vulhub/ &amp;&amp; cd vulhub/</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/51/99/wVYaasJb_o.jpg"></p> 
<h4 id="h3-13">3.3.4.<strong>解压Vulhub压缩包</strong></h4> 
<p>        在/root/vulhub目录下解压。</p> 
<pre><code class="language-bash">命令：unzip vulhub-master.zip</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c6/3c/AViaXPnZ_o.jpg"></p> 
<h4 id="h3-14">3.3.5.<strong>移动整个Vulhub文件</strong></h4> 
<p>        这里由于存在多层目录，为了方便我们把文件都给移动到Vulhub目录下，其它的删除即可，这里需要先进入压缩包解压完的那个目录下，然后再执行移动命令。</p> 
<pre><code class="language-bash">命令：mv * /root/vulhub</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d0/00/Fl7aXefM_o.jpg"></p> 
<h4 id="h3-15">3.3.6.<strong>删除无用目录及文件</strong></h4> 
<p>        这里只需要将vulhub-master目录与vulhub-master.zip压缩包删除即可，这样我们就完成了所有的安装了。</p> 
<pre><code class="language-bash">命令：rm -rf vulhub-master &amp;&amp; rm -rf vulhub-master.zip</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7e/0f/bPMNVQj1_o.jpg"></p> 
<h2>4.<strong>靶场测试</strong></h2> 
<p>        这里我们随机开启一个靶场测试是否能够正常打开，关于部分命令，可以执行上官网查看，并且获取解释。</p> 
<h3 id="h2-5">4.1.<strong>靶场测试S2-005漏洞</strong></h3> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/16/5f/j4f54v2O_o.jpg"></p> 
<h3 id="h2-6">4.2.<strong>进入某个靶场</strong></h3> 
<p>        这里首先要先进入靶场编号所在的目录下面，然后在进行开启，例如这个S2-005漏洞就是在struts2目录下面，然后找到S2-005。</p> 
<pre><code class="language-bash">命令：cd struts2/s2-005</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e8/32/JZtNIrUI_o.jpg"></p> 
<h4 id="h3-16">4.2.1.<strong>开启靶场</strong></h4> 
<p>        在开启靶场的过程中可能会存在无法开启的情况，这是由于更新了配置文件需要手动执行docker-compose build来重新编译靶场环境。具体看官网解释，像整个漏洞就需要使用docker-compose build来重新编译靶场环境，然后再开启，不一定所有就需要这样操作，具体要求还需求要按照官网的来。</p> 
<p>4.2.1.1.<strong>编译靶场环境</strong></p> 
<p>        不管是再编译环境还是在开启环境，都可能会出现无法执行的情况，遇到这个情况，大概率是源不行或者网络不行，重新编译或者打开几次，实在不行就放弃吧，这个有时候挺看运气的。</p> 
<pre><code class="language-bash">命令：docker-compose build</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/30/ec/csdwYdU3_o.jpg"></p> 
<p>4.2.1.2.<strong>启动靶场</strong></p> 
<p>        一般看到下面有蓝色了，并且没有报错，基本上就是成功了。</p> 
<pre><code class="language-bash">命令：docker-compose up -d</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/88/fb/3DEbQNvw_o.jpg"></p> 
<h3 id="h2-7">4.3.<strong>查看端口</strong></h3> 
<p>        关于查看端口，通常在官网文档就能看到，还有就是使用命令进行查看。</p> 
<pre><code class="language-bash">命令：docker-compose ps</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c6/cf/GJ4YWEsW_o.jpg"></p> 
<h3 id="h2-8">4.4.<strong>浏览器打开靶场</strong></h3> 
<pre><code class="language-bash">URL：靶场服务器IP地址:端口</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/48/2f/Wu1huYu8_o.jpg"></p> 
<h3 id="h2-9">4.5.<strong>关闭靶场</strong></h3> 
<p>        在每次测试完靶场后一定要及时的关闭靶场，否则在下次使用的时候会出现端口占用的情况，不过Vulhub靶场有一个问题就是编译后的靶场所占用的空间在关闭后，并不会释放，而会一直占用，若靶机硬盘小就会存在空间不足的情况，如果是虚拟机的话，尽量拍摄一个快照吧，不够的时候还原一下。</p> 
<pre><code class="language-bash">命令：docker-compose down</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a1/07/pCt3L2Mr_o.jpg"></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3a8bfc941aad7e8452411d5f973dacd1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Cadence Allegro 17.4学习记录开始01-原理图Capture CIS 17.4</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1afd421bcb4f404a80b2f90a463115a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows 鼠标键盘不可用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>