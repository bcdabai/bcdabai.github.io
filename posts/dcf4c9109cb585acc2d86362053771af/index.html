<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rocky Linux 安装图解（替代centos）服务器&#43;桌面 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Rocky Linux 安装图解（替代centos）服务器&#43;桌面" />
<meta property="og:description" content="centos自从20年底转变为不稳定版本后，有很多替代方案
经过近3年的发展，rocky linux算是一个比较好的选择，一是依照red hat企业版来做，二是rocky的发起者也是centos的创始人
如果想安装debian，可以参考：debian图解安装
如果想安装ubuntu，可以参考：ubuntu图解安装
2023.9.17更新教程，rocky版本9.2
一、下载烧录镜像 1.下载 下载rocky linux镜像
官方: rocky linux
如果下载较慢，复制链接到下载工具
用作服务器的，下载minimal最合适
如果用作桌面的，下载DVD的选项，大概8.8g左右，如果下载最小的，则没有桌面环境
2.烧录 如果使用虚拟机安装，就不需要烧录到U盘了
可以使用rufus烧录镜像
官方: rufus
选择下载的.ios镜像，选择烧录到的U盘，开始，中间如果杀毒软件报警，请放行。
所有都选默认即可，如果烧录的时候提示下载额外组件，请务必确定。
选择gpt分区类型和uefi引导类型
二、开机和设备启动 虚拟机安装直接挂载.ios文件即可
1.插入U盘 将U盘在开机前插入usb接口。
不同主板引导选择界面不同，通常是detele、f10、f11、f2几个中的一个（开机时通常也会提示）
这几个，在开机的时候会提示。我演示的这个是超微的，f11进入选择
2.使用U盘进行引导 rocky linux默认用uefi引导，推荐用这种方式（如果是debian的话可以选择传统方式）
三、安装 1.直接选择第一个 Install Rocky Linux 9.2 如果安装桌面版的，可以尝试第二个，进入桌面环境然后安装
2.安装过程中语言选择 服务器建议选择English
桌面默认的中文即可，这个只是安装过程的，后面可以加语言。
3.设置root密码和创建用户 设置root密码，允许ssh登录
这个后期可以改，先允许，方便初期的维护。设置完成后左上角done
设置普通用户
建议设置，如果设置了root，也可以省略这一步
4.设置分区 我这里是2块硬盘&#43;1个安装U盘，选择需要分区的硬盘，选择手动分区，然后done
注意一点，rocky的默认文件系统是xfs，也可以选择ext4
注意，如果有多个硬盘，可以一并勾选，这样可以一次性分区完成，进入系统后就不用再分区或者挂载了
删除旧分区
我这里原本装的有系统，所以先删除原来的分区（如果之前没装过系统，就跳过这一步）
会提示是否删除所有分区，直接点是，原来系统的分区就不见了
创建分区
如果是安装桌面的，直接使用自动分区即可，分的很合理。
桌面端最大的分区为/home,这个分区用来放各种用户数据
除了/boot和/boot/efi分区，其余都可以进行encrypt加密，默认不加密，建议不熟悉的不要加密
如果是服务器用户，建议手动调整
关于分区，简单说一下，/boot引导分区和/根分区是必须要有的，其它的不分会挂载在/根分区下。
swap类似于windows的虚拟内存，我这台是128g内存，就给swap 32g吧（不分也行）
/var通常作为服务器存放数据的地方（每个人的习惯不同，但是通常在这个目录），所以剩余的空间都给/var（如果是桌面的，就分给/home），使用默认的lvm即可，这样后面可以方便扩容。当然也可以用非lvm模式
注意：lvm是逻辑磁盘，如果想要了解使用可以看这篇：lvm和raid，我这里不再说明
提示是否应用修改
5.选择安装类型 如果是桌面端，选择workstation" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dcf4c9109cb585acc2d86362053771af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-17T14:00:56+08:00" />
<meta property="article:modified_time" content="2023-09-17T14:00:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Rocky Linux 安装图解（替代centos）服务器&#43;桌面</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>centos自从20年底转变为不稳定版本后，有很多替代方案</strong><br> <strong>经过近3年的发展，rocky linux算是一个比较好的选择，一是依照red hat企业版来做，二是rocky的发起者也是centos的创始人</strong></p> 
<p>如果想安装debian，可以参考：<a href="https://blog.csdn.net/ziqibit/article/details/130060173">debian图解安装</a><br> 如果想安装ubuntu，可以参考：<a href="https://blog.csdn.net/ziqibit/article/details/129932038">ubuntu图解安装</a></p> 
<p><strong>2023.9.17更新教程，rocky版本9.2</strong></p> 
<h2><a id="_7"></a>一、下载烧录镜像</h2> 
<h4><a id="1_9"></a>1.下载</h4> 
<p>下载rocky linux镜像<br> 官方: <a href="https://rockylinux.org" rel="nofollow">rocky linux</a><br> 如果下载较慢，复制链接到下载工具<br> <strong>用作服务器的，下载minimal最合适</strong><br> <strong>如果用作桌面的，下载DVD的选项，大概8.8g左右，如果下载最小的，则没有桌面环境</strong></p> 
<p><img src="https://images2.imgbox.com/db/58/tf6cETrY_o.png" alt="在这里插入图片描述" height="400"></p> 
<h4><a id="2_17"></a>2.烧录</h4> 
<p><strong>如果使用虚拟机安装，就不需要烧录到U盘了</strong><br> 可以使用rufus烧录镜像<br> 官方: <a href="http://rufus.ie/en/" rel="nofollow">rufus</a><br> 选择下载的.ios镜像，选择烧录到的U盘，开始，中间如果杀毒软件报警，请放行。<br> 所有都选默认即可，如果烧录的时候提示下载额外组件，请务必确定。<br> 选择gpt分区类型和uefi引导类型</p> 
<p><img src="https://images2.imgbox.com/e6/65/KtnIf7MN_o.png" alt="在这里插入图片描述" height="500"></p> 
<h2><a id="_28"></a>二、开机和设备启动</h2> 
<p><code>虚拟机安装直接挂载.ios文件即可</code></p> 
<h4><a id="1U_30"></a>1.插入U盘</h4> 
<p>将U盘在开机前插入usb接口。<br> 不同主板引导选择界面不同，通常是detele、f10、f11、f2几个中的一个（开机时通常也会提示）<br> 这几个，在开机的时候会提示。我演示的这个是超微的，f11进入选择</p> 
<h4><a id="2U_36"></a>2.使用U盘进行引导</h4> 
<p>rocky linux默认用uefi引导，推荐用这种方式（如果是debian的话可以选择传统方式）<br> <img src="https://images2.imgbox.com/d9/cc/CS6EIao3_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_40"></a>三、安装</h2> 
<h4><a id="1_Install_Rocky_Linux_92_42"></a>1.直接选择第一个 Install Rocky Linux 9.2</h4> 
<p>如果安装桌面版的，可以尝试第二个，进入桌面环境然后安装<br> <img src="https://images2.imgbox.com/73/63/fVvp4WAI_o.png" alt="在这里插入图片描述" height="360"></p> 
<h4><a id="2_45"></a>2.安装过程中语言选择</h4> 
<p>服务器建议选择English<br> 桌面默认的中文即可，这个只是安装过程的，后面可以加语言。<br> <img src="https://images2.imgbox.com/c5/81/ChWmjL0z_o.png" alt="在这里插入图片描述" height="400"></p> 
<h4><a id="3root_49"></a>3.设置root密码和创建用户</h4> 
<p><img src="https://images2.imgbox.com/8f/37/5JwS8BtW_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><code>设置root密码，允许ssh登录</code><br> 这个后期可以改，先允许，方便初期的维护。设置完成后左上角done</p> 
<p><img src="https://images2.imgbox.com/e0/3c/ngC5RgIb_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><code>设置普通用户</code><br> <strong>建议设置，如果设置了root，也可以省略这一步</strong></p> 
<p><img src="https://images2.imgbox.com/f1/a3/XFe4QnHH_o.png" alt="在这里插入图片描述" height="400"></p> 
<h4><a id="4_62"></a>4.设置分区</h4> 
<p>我这里是2块硬盘+1个安装U盘，选择需要分区的硬盘，选择手动分区，然后done<br> 注意一点，rocky的默认文件系统是xfs，也可以选择ext4<br> <img src="https://images2.imgbox.com/aa/14/l3aw2UHt_o.png" alt="在这里插入图片描述" height="400"><strong>注意，如果有多个硬盘，可以一并勾选，这样可以一次性分区完成，进入系统后就不用再分区或者挂载了</strong></p> 
<p><code>删除旧分区</code><br> 我这里原本装的有系统，所以先删除原来的分区（如果之前没装过系统，就跳过这一步）<br> 会提示是否删除所有分区，直接点是，原来系统的分区就不见了<br> <img src="https://images2.imgbox.com/26/7c/ErcoKiTu_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><code>创建分区</code><br> 如果是安装桌面的，直接使用自动分区即可，分的很合理。<br> 桌面端最大的分区为/home,这个分区用来放各种用户数据<br> <strong>除了/boot和/boot/efi分区，其余都可以进行encrypt加密，默认不加密，建议不熟悉的不要加密</strong><br> <img src="https://images2.imgbox.com/04/7f/PJaqgyX2_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><strong>如果是服务器用户，建议手动调整</strong><br> 关于分区，简单说一下，/boot引导分区和/根分区是必须要有的，其它的不分会挂载在/根分区下。<br> swap类似于windows的虚拟内存，我这台是128g内存，就给swap 32g吧（不分也行）<br> /var通常作为服务器存放数据的地方（每个人的习惯不同，但是通常在这个目录），所以剩余的空间都给/var（如果是桌面的，就分给/home），使用默认的lvm即可，这样后面可以方便扩容。当然也可以用非lvm模式<br> 注意：lvm是逻辑磁盘，如果想要了解使用可以看这篇：<a href="https://blog.csdn.net/ziqibit/article/details/129966942">lvm和raid</a>，我这里不再说明</p> 
<p><img src="https://images2.imgbox.com/a1/85/Y98LlNwp_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><code>提示是否应用修改</code><br> <img src="https://images2.imgbox.com/50/b4/Up3C61ZL_o.png" alt="在这里插入图片描述" height="400"></p> 
<h4><a id="5_89"></a>5.选择安装类型</h4> 
<p><img src="https://images2.imgbox.com/e3/25/1xpCqoie_o.png" alt="在这里插入图片描述" height="400"><img src="https://images2.imgbox.com/09/8b/nNojgpLN_o.png" alt="在这里插入图片描述" height="400"></p> 
<p>如果是桌面端，选择workstation<br> 如果是服务器端，选择minimal install<br> 如果是服务器端新手，建议用server with gui，方便学习<br> 等熟悉了也可以选别的（我这里给没有经验的写的，所以简单些）</p> 
<h4><a id="6secutiry_profile_99"></a>6.secutiry profile安全配置</h4> 
<p>这个如果设置，需要专门挂载/home等几个目录，这里默认不设置即可。<br> 需要手动分区并挂载/home /srv /tmp /var /var/log /var/tmp /opt /var/log/audit<br> <strong>这是我的分区</strong><br> <img src="https://images2.imgbox.com/23/0c/WfOe5VW9_o.png" alt="在这里插入图片描述" height="400"></p> 
<h4><a id="7_108"></a>7.开始安装</h4> 
<p><img src="https://images2.imgbox.com/75/e4/luMeNiw5_o.png" alt="在这里插入图片描述" height="400"></p> 
<p><img src="https://images2.imgbox.com/27/ff/Qi0mI4eD_o.png" alt="在这里插入图片描述" height="400">如果出现安装时黑屏，见最下面的问题解决</p> 
<h4><a id="8_113"></a>8.完成安装</h4> 
<p>安装完成后reboot system即可<br> <img src="https://images2.imgbox.com/e2/72/fxdOAN9O_o.png" alt="在这里插入图片描述" height="400"></p> 
<h2><a id="_118"></a>四、安装后的操作</h2> 
<p>如果是不带gui的，默认进的是命令行，大概如下<br> <img src="https://images2.imgbox.com/6e/73/rAqy7hmn_o.png" alt="在这里插入图片描述">如果是桌面版的，就当windows来用吧</p> 
<h3><a id="_122"></a>（一）作为服务器</h3> 
<h4><a id="1ssh_123"></a>1.测试ssh连接</h4> 
<p>如果根据我上面的操作，可以直接连接ssh，可以设置两个连接，一个是root的，一个是普通用户的</p> 
<h4><a id="2_126"></a>2.更新系统、软件</h4> 
<pre><code class="prism language-bash">dnf <span class="token parameter variable">-y</span> update
</code></pre> 
<h4><a id="3selinux_132"></a>3.selinux和防火墙</h4> 
<p>很多教程建议关闭，我不建议关闭，如果不想用selinux和防火墙，去安装debian系统更好，red hat系列的一个特点就是seliunx这套安全体系，防火墙一定要开的，即使是内网。</p> 
<h3><a id="_136"></a>（二）作为桌面端</h3> 
<h4><a id="1_137"></a>1.调整语言和输入法</h4> 
<p>选择语言为中文，开启中文输入法<br> 如果觉得这里的输入法不好用，可以去下载一款叫“小狼毫”的开源输入法，支持简体和繁体中文，非常方便。</p> 
<h2><a id="_145"></a>五、问题解决</h2> 
<h4><a id="1_146"></a>1.安装时出现黑屏</h4> 
<p>有些教程说是开启了安全boot或者驱动问题，我根据个人经验说一下，安全boot通常不会导致黑屏，而市面上能买到的设备，通常不会出现没有驱动（因为都是产量很大的，很通用的）。我遇到的这类问题通常是在服务器主板上出现的，原因是可以调整的bios太多，这时候重置bios即可。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ed0a28c9fe4274c7a091b5e049a4968/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何实现Web应用、网站状态的监控？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e70dddab9f85436c9c046431139ec489/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序 动漫游戏资讯推荐系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>