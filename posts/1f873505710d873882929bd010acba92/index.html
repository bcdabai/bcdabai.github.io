<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python代码循环执行exe文件，并传入命令参数实现批量处理数据。 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python代码循环执行exe文件，并传入命令参数实现批量处理数据。" />
<meta property="og:description" content="python调用exe程序 传入命令参数，并实现循环批处理文件 1、问题背景2、面临的问题3、代码实现（案例）4、总结 1、问题背景 参加MARS数据医疗赛道进行计算机视觉的比赛，比赛内容为赛题提供一批病理数字切片，由专业医师给出切片区域内T分期指标的标注。选手需要使用计算机视觉相关技术，按照TNM分期指标中“T”指标对切片内的区域进行分类预测，辅助医生进行识别，提高病理诊断效率。
使用TNM分期进行肿瘤评估时，T0代表无证据表明存在原发肿瘤、T1~T3代表癌细胞的侵入程度逐渐加深，Tis代表原位癌（上皮内肿瘤，未侵及固有层，高度不典型增生）。在初赛中，选手需要根据给定的kfb图片及json文件，对切片内划定的区域进行侵入程度的分类预测，共分为五类，包括T0、T1、T2、T3和Tis。
2、面临的问题 由于病理切片图像为医院专业器械得出，赛题方提供的是KFB格式的病理切片图像，在自己计算机上显示不出来，所以需要使用赛题方提供的exe文件（第三方提供）对kfb格式的图片进行转换，赛题方提供的可执行文件可以把kfb格式转换为tiff格式。由于我们需要用深度学习去对数据进行预测，这里的图片数据非常多、并且一个图片就400M&#43;，显然一张一张照片转换是非常费时的，所以需要写一个python脚本去给我们批量转换我们的数据。 3、代码实现（案例） 比如需要在命令行输入一下命令
python代码
下面展示 用Python循环执行exe可执行文件达到批量处理文件的需求。
import os path = &#34;D:\\BaiduNetdiskDownload\\MARS\\data\\T0\\&#34; main = &#34;D:\\BaiduNetdiskDownload\\MARS\\tool\\KFbioConverter.exe&#34; suffixs = [] for file_name in os.listdir(path): if file_name.endswith(&#34;.kfb&#34;): suffix = file_name.split(&#34;.&#34;)[0] # os.startfile(main &#43; path &#43; file_name &#43; toPath &#43; suffix &#43; &#34;.tif 3&#34;) path1 = &#34;D:\\BaiduNetdiskDownload\\MARS\\data\\T0\\&#34; &#43; file_name toPath = &#34;D:\\BaiduNetdiskDownload\\MARS\\data\\TIF0\\&#34; &#43; suffix &#43; &#34;.tif 3&#34; # 运行参数格式化 para = &#34;%s %s %s&#34; % (main, path1, toPath) # 注意是temp." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1f873505710d873882929bd010acba92/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-08T13:36:41+08:00" />
<meta property="article:modified_time" content="2022-11-08T13:36:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python代码循环执行exe文件，并传入命令参数实现批量处理数据。</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>python调用exe程序 传入命令参数，并实现循环批处理文件</h4> 
 <ul><li><a href="#1_2" rel="nofollow">1、问题背景</a></li><li><a href="#2_8" rel="nofollow">2、面临的问题</a></li><li><a href="#3_13" rel="nofollow">3、代码实现（案例）</a></li><li><a href="#4_43" rel="nofollow">4、总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_2"></a>1、问题背景</h2> 
<p>参加MARS数据医疗赛道进行计算机视觉的比赛，比赛内容为赛题提供一批病理数字切片，由专业医师给出切片区域内T分期指标的标注。选手需要使用计算机视觉相关技术，按照TNM分期指标中“T”指标对切片内的区域进行分类预测，辅助医生进行识别，提高病理诊断效率。<br> 使用TNM分期进行肿瘤评估时，T0代表无证据表明存在原发肿瘤、T1~T3代表癌细胞的侵入程度逐渐加深，Tis代表原位癌（上皮内肿瘤，未侵及固有层，高度不典型增生）。在初赛中，选手需要根据给定的kfb图片及json文件，对切片内划定的区域进行侵入程度的分类预测，共分为五类，包括T0、T1、T2、T3和Tis。</p> 
<h2><a id="2_8"></a>2、面临的问题</h2> 
<ol><li>由于病理切片图像为医院专业器械得出，赛题方提供的是KFB格式的病理切片图像，在自己计算机上显示不出来，所以需要使用赛题方提供的exe文件（<strong>第三方提供</strong>）对kfb格式的图片进行转换，赛题方提供的可执行文件可以把kfb格式转换为tiff格式。</li><li>由于我们需要用深度学习去对数据进行预测，这里的图片数据非常多、并且一个图片就400M+，显然一张一张照片转换是非常费时的，所以需要写一个python脚本去给我们批量转换我们的数据。</li></ol> 
<h2><a id="3_13"></a>3、代码实现（案例）</h2> 
<ul><li> <p>比如需要在命令行输入一下命令<br> <img src="https://images2.imgbox.com/07/ed/95UzkdX7_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>python代码</strong><br> 下面展示 <code>用Python循环执行exe可执行文件</code>达到批量处理文件的需求。</p> </li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> os

path <span class="token operator">=</span> <span class="token string">"D:\\BaiduNetdiskDownload\\MARS\\data\\T0\\"</span>
main <span class="token operator">=</span> <span class="token string">"D:\\BaiduNetdiskDownload\\MARS\\tool\\KFbioConverter.exe"</span>
suffixs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> file_name <span class="token keyword">in</span> os<span class="token punctuation">.</span><span class="token function">listdir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token operator">:</span>

    <span class="token keyword">if</span> file_name<span class="token punctuation">.</span><span class="token function">endswith</span><span class="token punctuation">(</span><span class="token string">".kfb"</span><span class="token punctuation">)</span><span class="token operator">:</span>
        suffix <span class="token operator">=</span> file_name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    #   os<span class="token punctuation">.</span><span class="token function">startfile</span><span class="token punctuation">(</span>main <span class="token operator">+</span> path <span class="token operator">+</span> file_name <span class="token operator">+</span> toPath <span class="token operator">+</span> suffix <span class="token operator">+</span> <span class="token string">".tif 3"</span><span class="token punctuation">)</span>
    path1 <span class="token operator">=</span> <span class="token string">"D:\\BaiduNetdiskDownload\\MARS\\data\\T0\\"</span> <span class="token operator">+</span> file_name
    toPath <span class="token operator">=</span> <span class="token string">"D:\\BaiduNetdiskDownload\\MARS\\data\\TIF0\\"</span> <span class="token operator">+</span> suffix <span class="token operator">+</span> <span class="token string">".tif 3"</span>
    # 运行参数格式化
    para <span class="token operator">=</span> <span class="token string">"%s %s %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>main<span class="token punctuation">,</span> path1<span class="token punctuation">,</span> toPath<span class="token punctuation">)</span>  # 注意是temp<span class="token punctuation">.</span>bat不是exe

    os<span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>para<span class="token punctuation">)</span>
</code></pre> 
<ul><li>转换结果<br> <img src="https://images2.imgbox.com/98/ca/obLpbmKF_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="4_43"></a>4、总结</h2> 
<ul><li>开始在命令框中转换第一个图片的时候就感受到了绝望，因为图片极大都是45000*45000左右的图像（上面文件都加载不出来），这样的话一个T0数据集就需要转换一天，不过有了Python脚本就方便很多。</li><li>还有三个训练集数据和一个测试集数据还没有去下载，希望硬盘够用。</li><li>这么大的图片后面需要进行特殊的图像压缩处理，但又不能让图像失去原有图像的病理特征，然后再喂入深度学习的神经网络中。这里数据压缩还一头雾水，如果大神有好的方法请多多指教。</li><li>感兴趣的伙伴们可以一起交流交流u。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8586c4efde46fc579b01b0c7a186b73d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTML/樱花爱心网页/</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8229121d296b5c6a31d45c3524c7ee1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis-Server安装包&amp;依赖包On Ubuntu-Server</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>