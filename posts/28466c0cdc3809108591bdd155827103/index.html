<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3组件通信五种方式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3组件通信五种方式" />
<meta property="og:description" content="方式一：props props是实现父组件向子组件传递信息，props的数据是只读的。
使用实例：
父组件：
&lt;template&gt; &lt;div class=&#34;box&#34;&gt; &lt;h1&gt;我是父组件&lt;/h1&gt; &lt;hr /&gt; &lt;Child info=&#34;我是父组件参数&#34; :money=&#34;money&#34;&gt;&lt;/Child&gt; &lt;/div&gt; &lt;/template&gt; 子组件：需要使用到defineProps方法去接受父组件传递过来的数据
&lt;script setup lang=&#34;ts&#34;&gt; //defineProps是Vue3提供方法,不需要引入直接使用 let props = defineProps([&#39;info&#39;,&#39;money&#39;]); //数组|对象写法都可以 &lt;/script&gt; 方法二：全局总线事件 全局事件总线$bus可以实现兄弟之间的通信
实例：
子组件1：接受子组件2传递的参数
&lt;script setup lang=&#34;ts&#34;&gt; import $bus from &#34;../../bus&#34;; import { onMounted } from &#34;vue&#34;; //组件挂载完毕的时候绑定一个事件,受将接来兄弟组件传递的数据 onMounted(() =&gt; { $bus.on(&#34;money&#34;, (money) =&gt; { console.log(car); }); }); &lt;/script&gt; 子组件2：给子组件1传递参数
&lt;script setup lang=&#34;ts&#34;&gt; import $bus from &#39;../../bus&#39;; //点击按钮回调 const handler = ()=&gt;{ $bus.emit(&#39;money&#39;,{money:&#34;1个w&#34;}); } &lt;/script&gt; 方法3：v-model进行通信 相当于给子组件绑定props，同时也相当于绑定了自定义事件" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/28466c0cdc3809108591bdd155827103/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-23T16:47:16+08:00" />
<meta property="article:modified_time" content="2023-05-23T16:47:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3组件通信五种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>方式一：props</h4> 
<p>props是实现父组件向子组件传递信息，props的数据是只读的。</p> 
<p><strong>使用实例：</strong></p> 
<p>父组件：</p> 
<pre><code>&lt;template&gt;
  &lt;div class="box"&gt;
    &lt;h1&gt;我是父组件&lt;/h1&gt;
    &lt;hr /&gt;
    &lt;Child info="我是父组件参数" :money="money"&gt;&lt;/Child&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>子组件：需要使用到defineProps方法去接受父组件传递过来的数据</p> 
<pre><code>&lt;script setup lang="ts"&gt;
//defineProps是Vue3提供方法,不需要引入直接使用
let props = defineProps(['info','money']); //数组|对象写法都可以
&lt;/script&gt;</code></pre> 
<h3> 方法二：全局总线事件</h3> 
<p>全局事件总线$bus可以实现兄弟之间的通信</p> 
<p><strong>实例：</strong></p> 
<p>子组件1：接受子组件2传递的参数</p> 
<pre><code>&lt;script setup lang="ts"&gt;
import $bus from "../../bus";
import { onMounted } from "vue";
//组件挂载完毕的时候绑定一个事件,受将接来兄弟组件传递的数据
onMounted(() =&gt; {
  $bus.on("money", (money) =&gt; {
    console.log(car);
  });
});
&lt;/script&gt;</code></pre> 
<p>子组件2：给子组件1传递参数</p> 
<pre><code>&lt;script setup lang="ts"&gt;
import $bus from '../../bus';
//点击按钮回调
const handler = ()=&gt;{
  $bus.emit('money',{money:"1个w"});
}
&lt;/script&gt;</code></pre> 
<h3>方法3：v-model进行通信</h3> 
<p>相当于给子组件绑定props，同时也相当于绑定了自定义事件</p> 
<p><strong>实例</strong></p> 
<p>父组件：（可以在传递多个参数）</p> 
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;v-model:{<!-- -->{pageNo}}{<!-- -->{pageSize}}&lt;/h1&gt;
    &lt;hr /&gt;
    &lt;Child1 v-model:pageNo="pageNo" v-model:pageSize="pageSize"&gt;&lt;/Child1&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>子组件：</p> 
<pre><code>&lt;template&gt;
  &lt;div class="child2"&gt;
    &lt;button @click="handler"&gt;pageNo{<!-- -->{ pageNo }}&lt;/button&gt;
    &lt;button @click="$emit('update:pageSize', pageSize + 4)"&gt;
      pageSize{<!-- -->{ pageSize }}
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
let props = defineProps(["pageNo", "pageSize"]);
let $emit = defineEmits(["update:pageNo", "update:pageSize"]);
//第一个按钮的事件回调
const handler = () =&gt; {
  $emit("update:pageNo", props.pageNo + 3);
};
&lt;/script&gt;</code></pre> 
<p><strong>方法四：useAttrs</strong></p> 
<p><span style="color:#fe2c24;">  如果和props同时使用的话props接受了的属性，useAttrs接受不到了就。</span></p> 
<p>父组件：</p> 
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;useAttrs&lt;/h1&gt;
    &lt;ButtonTitle type="primary" size="small" :icon="Edit" title="编辑按钮" &gt;&lt;/ButtonTitle &gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>子组件：</p> 
<pre><code>&lt;template&gt;
  &lt;div :title="title"&gt;
     &lt;el-button :="$attrs"&gt;&lt;/el-button&gt;   
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import {useAttrs} from 'vue';
let $attrs = useAttrs();
let props =defineProps(['title']);
//但是props接受了useAttrs方法就获取不到了
console.log($attrs);
&lt;/script&gt;</code></pre> 
<p><strong>方法五：provide与inject</strong></p> 
<p>实现隔代之间的数据传递</p> 
<p>爷爷组件：</p> 
<pre><code>&lt;template&gt;
  &lt;div class="box"&gt;
    &lt;h1&gt;爷爷组件{<!-- -->{money}}&lt;/h1&gt;
    &lt;hr /&gt;
    &lt;Child&gt;&lt;/Child&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import Child from "./Child.vue";
import { ref, provide } from "vue";
let money= ref("1000");
//祖先组件给后代组件提供数据
provide("MONEY", money);
&lt;/script&gt;</code></pre> 
<p> 孙子组件：（可以对接受到的数据进行修改）</p> 
<pre><code>&lt;template&gt;
  &lt;div class="child1"&gt;
    &lt;h1&gt;孙子组件&lt;/h1&gt;
    &lt;p&gt;{<!-- -->{money}}&lt;/p&gt;
    &lt;button @click="updateMoney"&gt;更新数据&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import {inject} from 'vue';
//注入祖先组件提供数据
let money = inject('MONEY');
const updateMoney = ()=&gt;{
   money.value  = '自行车';
}
&lt;/script&gt;</code></pre> 
<p><a class="link-info" href="http://xxxx" rel="nofollow" title="利用pinia实现组件之间的通信（和vuex类似）">利用pinia实现组件之间的通信（和vuex类似）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/21a87eda0342f556370b908d93954eb2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vim使用技巧 多行注释、取消注释</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/81d965fa00077d6a6a5ac5c5b75a2fb6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL数据库存储过程(基础)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>