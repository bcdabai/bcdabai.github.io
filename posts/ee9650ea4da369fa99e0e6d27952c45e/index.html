<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>乌班图安装 Kalibr - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="乌班图安装 Kalibr" />
<meta property="og:description" content="安装ROS Melodic 1 Installation 1.1 Configure your Ubuntu repositories http://www.360doc.com/content/18/0417/15/54525756_746389833.shtml
2.2 Setup your sources.list sudo sh -c &#39;echo &#34;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&#34; &gt; /etc/apt/sources.list.d/ros-latest.list&#39; 2.3 Set up your keys sudo apt install curl # if you haven&#39;t already installed curl curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add - 如果出现“您希望继续执行吗？ [Y/n] y 中止。”
再次执行，需要输入 [Y/n]时，输入 yes| 回车即可。
2.4 Installation 首先
sudo apt update 这里遇到了问题：
命中:1 http://archive.ubuntu.com/ubuntu bionic InRelease
命中:2 http://cn." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ee9650ea4da369fa99e0e6d27952c45e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-11T20:56:42+08:00" />
<meta property="article:modified_time" content="2021-09-11T20:56:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">乌班图安装 Kalibr</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ROS_Melodic_0"></a>安装ROS Melodic</h2> 
<h3><a id="1_Installation_1"></a>1 Installation</h3> 
<h4><a id="11_Configure_your_Ubuntu_repositories_2"></a>1.1 Configure your Ubuntu repositories</h4> 
<p>http://www.360doc.com/content/18/0417/15/54525756_746389833.shtml</p> 
<h4><a id="22_Setup_your_sourceslist_5"></a>2.2 Setup your sources.list</h4> 
<pre><code>sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'
</code></pre> 
<h4><a id="23_Set_up_your_keys_11"></a>2.3 Set up your keys</h4> 
<pre><code>sudo apt install curl # if you haven't already installed curl
curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -
</code></pre> 
<blockquote> 
 <p>如果出现“您希望继续执行吗？ [Y/n] y 中止。”<br> 再次执行，需要输入 [Y/n]时，输入 yes| 回车即可。</p> 
</blockquote> 
<h4><a id="24_Installation_20"></a>2.4 Installation</h4> 
<p>首先</p> 
<pre><code>sudo apt update
</code></pre> 
<p>这里遇到了问题：</p> 
<blockquote> 
 <p>命中:1 http://archive.ubuntu.com/ubuntu bionic InRelease<br> 命中:2 http://cn.archive.ubuntu.com/ubuntu bionic InRelease<br> 命中:3 http://security.ubuntu.com/ubuntu bionic-security InRelease<br> 命中:5 http://archive.canonical.com/ubuntu bionic InRelease<br> 命中:6 http://cn.archive.ubuntu.com/ubuntu bionic-updates InRelease<br> 获取:4 http://packages.ros.org/ros/ubuntu bionic InRelease [4,680 B]<br> 命中:7 http://cn.archive.ubuntu.com/ubuntu bionic-backports InRelease<br> 错误:4 http://packages.ros.org/ros/ubuntu bionic InRelease<br> 下列签名无效： EXPKEYSIG F42ED6FBAB17C654 Open Robotics <a href="mailto:info@osrfoundation.org" rel="nofollow">info@osrfoundation.org</a><br> 命中:8 https://download.sublimetext.com apt/stable/ InRelease<br> 已下载 4,680 B，耗时 22秒 (208 B/s)<br> 正在读取软件包列表… 完成<br> 正在分析软件包的依赖关系树<br> 正在读取状态信息… 完成<br> 有 531 个软件包可以升级。请执行 ‘apt list --upgradable’ 来查看它们。<br> W: 校验数字签名时出错。此仓库未被更新，所以仍然使用此前的索引文件。GPG 错误：http://packages.ros.org/ros/ubuntu bionic InRelease: 下列签名无效： EXPKEYSIG F42ED6FBAB17C654 Open Robotics <a href="mailto:info@osrfoundation.org" rel="nofollow">info@osrfoundation.org</a><br> W: 无法下载 http://packages.ros.org/ros/ubuntu/dists/bionic/InRelease 下列签名无效： EXPKEYSIG F42ED6FBAB17C654 Open Robotics <a href="mailto:info@osrfoundation.org" rel="nofollow">info@osrfoundation.org</a><br> W: 部分索引文件下载失败。如果忽略它们，那将转而使用旧的索引文件。</p> 
</blockquote> 
<p>解决办法：</p> 
<blockquote> 
 <p>xxxx@xxx:~$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys F42ED6FBAB17C654<br> Executing: /tmp/apt-key-gpghome.bc8KU2TwXU/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys F42ED6FBAB17C654<br> gpg: 密钥 F42ED6FBAB17C654：“Open Robotics <a href="mailto:info@osrfoundation.org" rel="nofollow">info@osrfoundation.org</a>”1 个新的签名<br> gpg: 合计被处理的数量：1<br> gpg: 新的签名：1<br> Desktop-Full Install: (Recommended) : ROS, rqt, rviz, robot-generic libraries, 2D/3D simulators and 2D/3D perception</p> 
</blockquote> 
<p>然后运行：</p> 
<pre><code>sudo apt install ros-melodic-desktop-full
</code></pre> 
<h4><a id="15_Environment_setup_61"></a>1.5 Environment setup</h4> 
<pre><code>echo "source /opt/ros/melodic/setup.bash" &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre> 
<h4><a id="16_Dependencies_for_building_packages_67"></a>1.6 Dependencies for building packages</h4> 
<p>到目前为止，我们已经安装了运行核心 ROS 包所需的东西。有许多工具和库，能够帮助我们创建和管理ROS工作区。如：rosinstall，一个可以帮助我们下载ROS包的源代码的命令行工具</p> 
<p>安装这些工具和依赖：</p> 
<pre><code>sudo apt install python-rosdep python-rosinstall python-rosinstall-generator python-wstool build-essential
</code></pre> 
<p>Before you can use many ROS tools, you will need to initialize rosdep. <strong>rosdep enables you to easily install system dependencies for source you want to compile and is required to run some core components in ROS</strong>. If you have not yet installed rosdep, do so as follows.</p> 
<pre><code>sudo apt install python-rosdep
</code></pre> 
<p>With the following, you can initialize rosdep.</p> 
<pre><code>sudo rosdep init
</code></pre> 
<p>这里遇到了问题：</p> 
<pre><code>pkg_resources.DistributionNotFound: The 'rospkg&gt;=1.3.0' distribution was not found and is required by rosdep
</code></pre> 
<p>解决办法：</p> 
<pre><code>sudo pip install rosdep
</code></pre> 
<p>然后运行</p> 
<pre><code>rosdep update
</code></pre> 
<p>第二次安装时，这里遇到问题，<a href="https://zhuanlan.zhihu.com/p/392082731" rel="nofollow">解决办法</a></p> 
<blockquote> 
 <p>虽然这个办法能成功，但是我还是试了几次才成功</p> 
</blockquote> 
<h4><a id="17_ros_101"></a>1.7 测试ros安装成功</h4> 
<p><a href="https://blog.csdn.net/dd_Mr/article/details/114323752">测试小乌龟</a></p> 
<h2><a id="kalibr_106"></a>安装kalibr</h2> 
<h3><a id="1_Install_the_build_and_run_dependencies_108"></a>1. Install the build and run dependencies:</h3> 
<pre><code>sudo apt-get install python-setuptools python-rosinstall ipython libeigen3-dev libboost-all-dev doxygen libopencv-dev ros-melodic-vision-opencv ros-melodic-image-transport-plugins ros-melodic-cmake-modules python-software-properties software-properties-common libpoco-dev python-matplotlib python-scipy python-git python-pip ipython libtbb-dev libblas-dev liblapack-dev python-catkin-tools libv4l-dev
</code></pre> 
<p>这里遇到了问题：</p> 
<blockquote> 
 <p>没有可用的软件包 python-software-properties，但是它被其它的软件包引用了。<br> 这可能意味着这个缺失的软件包可能已被废弃，<br> 或者只能在其他发布源中找到<br> 然而下列软件包会取代它：<br> software-properties-common<br> E: 软件包 python-software-properties 没有可安装候选</p> 
</blockquote> 
<p>解决办法：</p> 
<blockquote> 
 <p><a href="https://qastack.cn/ubuntu/422975/e-package-python-software-properties-has-no-installation-candidate" rel="nofollow">E: 软件包 python-software-properties 没有可安装候选</a></p> 
</blockquote> 
<p>然后把<code>python-software-properties</code>删除后再运行：</p> 
<pre><code>sudo apt-get install python-setuptools python-rosinstall ipython libeigen3-dev libboost-all-dev doxygen libopencv-dev ros-melodic-vision-opencv ros-melodic-image-transport-plugins ros-melodic-cmake-modules software-properties-common libpoco-dev python-matplotlib python-scipy python-git python-pip ipython libtbb-dev libblas-dev liblapack-dev python-catkin-tools libv4l-dev
</code></pre> 
<p>再安装<code>igraph</code></p> 
<pre><code>sudo pip install python-igraph --upgrade
</code></pre> 
<p>这里遇到问题：</p> 
<blockquote> 
 <p>Command “python setup.py egg_info” failed with error code 1 in /tmp/pip-build-POF3SC/python-igraph/</p> 
</blockquote> 
<p>解决办法:</p> 
<blockquote> 
 <p>我首先到<a href="https://pypi.org/project/python-igraph/#files" rel="nofollow">pypi</a>去下载适配的轮子。根据我的python版本以及系统，我选择了<code>python_igraph-0.9.6-cp36-cp36m-manylinux2010_x86_64.whl</code>。<br> 然后在利用<code>pip install python_igraph-0.9.6-cp36-cp36m-manylinux2010_x86_64.whl</code>进行安装时，仍然报错。原因在于<code>manylinux2010_x86_64</code>和<code>manylinux1_x86_64</code><a href="https://stackoverflow.com/questions/61796811/difference-between-manylinux1-vs-manylinux2020-wheel-files-in-pip-installer" rel="nofollow">区别</a>是<strong>manylinux2010 要求 pip &gt;= 19.0</strong>。然后升级以下pip就可以顺利安装了。</p> 
</blockquote> 
<table><thead><tr><th>manylinux tag</th><th>Client-side pip version required</th></tr></thead><tbody><tr><td>manylinux2014</td><td>pip &gt;= 19.3</td></tr><tr><td>manylinux2010</td><td>pip &gt;= 19.0</td></tr><tr><td>manylinux1</td><td>pip &gt;= 8.1.0</td></tr></tbody></table> 
<p>这样就完成了依赖的安装。</p> 
<h3><a id="2_Create_a_catkin_workspace_152"></a>2. Create a catkin workspace</h3> 
<pre><code>mkdir -p ~/kalibr_workspace/src
cd ~/kalibr_workspace
source /opt/ros/melodic/setup.bash
catkin init
catkin config --extend /opt/ros/indigo
catkin config --merge-devel # Necessary for catkin_tools &gt;= 0.4.
catkin config --cmake-args -DCMAKE_BUILD_TYPE=Release
</code></pre> 
<h3><a id="3Clone_the_source_repo_into_your_catkin_workspace_src_folder_163"></a>3.Clone the source repo into your catkin workspace src folder</h3> 
<pre><code>cd ~/kalibr_workspace/src
git clone https://github.com/ethz-asl/Kalibr.git
</code></pre> 
<h3><a id="4_Build_the_code_using_the_Release_configuration_depending_on_the_available_memory_you_might_need_to_reduce_the_build_threads_eg_add_j2_to_catkin_make_169"></a>4. Build the code using the Release configuration. depending on the available memory, you might need to reduce the build threads (e.g. add -j2 to catkin_make)</h3> 
<pre><code>cd ~/kalibr_workspace
catkin build -DCMAKE_BUILD_TYPE=Release -j4
</code></pre> 
<h3><a id="5Once_the_build_is_finished_you_have_to_source_the_catkin_workspace_setup_to_use_Kalibr_175"></a>5.Once the build is finished you have to source the catkin workspace setup to use Kalibr</h3> 
<pre><code>source ~/kalibr_workspace/devel/setup.bash
</code></pre> 
<p><strong>注意：</strong><br> 在每次打开新的终端时，都需要上述source以下。<br> 将上述source命令，通过</p> 
<pre><code>gedit ~/.bashrc
</code></pre> 
<p>打开文件，然后在<code>.bashrc</code>中将上述source命令添加进去，保存。然后</p> 
<pre><code>source ~/.bashrc
</code></pre> 
<h2><a id="Kalibr_192"></a>测试Kalibr</h2> 
<p>首先在官方<a href="https://github.com/ethz-asl/kalibr/wiki/downloads">github</a>上下载测试数据。</p> 
<p>下载Sample datasets中的Multiple camera calibration和IMU-camera calibration都可以。</p> 
<h3><a id="Multiple_camera_calibration_197"></a>Multiple camera calibration</h3> 
<p>文件下载后解压后，文件包含：</p> 
<pre><code>april_6x6.yaml
README
static.bag
</code></pre> 
<p>在README文件中有：</p> 
<pre><code>kalibr_calibrate_cameras --target april_6x6.yaml --bag static.bag --models pinhole-equi pinhole-equi omni-radtan omni-radtan --topics /cam0/image_raw /cam1/image_raw /cam2/image_raw /cam3/image_raw
</code></pre> 
<p>打开终端，移动到上述数据所在的文件夹内。<br> 上面我们已经在<code>.bashrc</code>文件中添加了脚本路径，因此可以直接运行上述README中的命令行即可。<br> 运行后的结果：</p> 
<p><img src="https://images2.imgbox.com/79/d5/5PtdFVhI_o.png" alt="这些图片保存在report-cam-static.pdf文件中"><br> 这些图片保存在report-cam-static.pdf文件中。<br> 标定的结果文件还包括：</p> 
<blockquote> 
 <p>report-cam-static.pdf<br> report-cam-static.txt<br> camchain-static.yaml</p> 
</blockquote> 
<h3><a id="IMUcamera_calibration_220"></a>IMU-camera calibration</h3> 
<p>同上，在终端中运行：</p> 
<pre><code>kalibr_calibrate_imu_camera --target april_6x6.yaml --cam camchain.yaml --imu imu_adis16448.yaml --bag dynamic.bag --bag-from-to 5 45
</code></pre> 
<p><img src="https://images2.imgbox.com/38/d6/6mVDrJF7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_228"></a>其他问题</h3> 
<p>首次运行的时候，报错<code>ImportError: No module named igraph</code>。<br> 但是上述明明已经安装了<code>igraph</code>。根据报错定位找到了相应的代码，发现在<code>ObsDp.py</code>代码是python2.0代码。<br> 因此，需要安装对应的<code>igraph</code>，即</p> 
<pre><code>sudo apt-get install python2.7-igraph
</code></pre> 
<h2><a id="_236"></a>最后</h2> 
<h3><a id="_237"></a>参考链接</h3> 
<p><a href="https://github.com/ethz-asl/kalibr/wiki/installation">kalibr官方安装方法</a><br> <a href="http://wiki.ros.org/melodic/Installation/Ubuntu" rel="nofollow">ROS官方安装方法</a></p> 
<p>以上记录了首次安装kalibr的流程，由于环境的差异，在安装的过程中遇到的问题也不一样。<br> 首先根据官方的教程进行安装，以上流程也主要从官方教程中搬运过来的，遇到问题再搜索就行了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/82013287804dab20e382be904ce6e860/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">window系统下使用qt命令行开发c&#43;&#43;图像用户界面程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0eb9032d7cfa40bc97b7d9d734900b42/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JS的输入与输出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>