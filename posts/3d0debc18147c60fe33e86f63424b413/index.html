<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot 中的 @FeignClient 注解是什么，原理，如何使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring Boot 中的 @FeignClient 注解是什么，原理，如何使用" />
<meta property="og:description" content="Spring Boot 中的 @FeignClient 注解是什么，原理，如何使用 在微服务架构中，服务之间的调用是非常频繁的。为了简化服务之间的调用，Spring Boot 提供了一个叫做 Feign 的组件。Feign 可以帮助我们定义和实现服务之间的 RESTful 接口，使得服务之间的调用更加方便和可靠。在本文中，我们将深入探讨 Spring Boot 中的 @FeignClient 注解是什么，原理以及如何使用。
什么是 @FeignClient 注解？ @FeignClient 注解是 Spring Cloud 中的一个组件，它是基于 Netflix Feign 实现的。@FeignClient 注解可以帮助我们定义和实现服务之间的 RESTful 接口，使得服务之间的调用更加方便和可靠。@FeignClient 注解可以用于客户端的 API 接口定义，它可以将一个 HTTP API 接口转化为一个 Java 接口，从而使得我们可以像调用本地方法一样调用远程服务。
@FeignClient 注解原理 @FeignClient 注解的原理非常简单，它基于 Spring Cloud 和 Netflix Feign 实现。@FeignClient 注解可以将一个 HTTP API 接口转化为一个 Java 接口，并生成一个代理对象来实现服务之间的调用。@FeignClient 注解可以自动注入 Ribbon 进行负载均衡，从而使得服务之间的调用更加稳定和可靠。
@FeignClient 注解的核心组件包括 Feign.Builder、FeignClientFactoryBean 和 FeignClientsRegistrar。
Feign.Builder：用于生成 Feign 的代理对象。Feign.Builder 可以根据指定的 HTTP API 接口生成一个 Java 接口，并自动注入 Ribbon 进行负载均衡。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3d0debc18147c60fe33e86f63424b413/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-02T23:35:36+08:00" />
<meta property="article:modified_time" content="2023-07-02T23:35:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot 中的 @FeignClient 注解是什么，原理，如何使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Spring_Boot__FeignClient__0"></a>Spring Boot 中的 @FeignClient 注解是什么，原理，如何使用</h2> 
<p>在微服务架构中，服务之间的调用是非常频繁的。为了简化服务之间的调用，Spring Boot 提供了一个叫做 Feign 的组件。Feign 可以帮助我们定义和实现服务之间的 RESTful 接口，使得服务之间的调用更加方便和可靠。在本文中，我们将深入探讨 Spring Boot 中的 @FeignClient 注解是什么，原理以及如何使用。</p> 
<h3><a id="_FeignClient__4"></a>什么是 @FeignClient 注解？</h3> 
<p>@FeignClient 注解是 Spring Cloud 中的一个组件，它是基于 Netflix Feign 实现的。@FeignClient 注解可以帮助我们定义和实现服务之间的 RESTful 接口，使得服务之间的调用更加方便和可靠。@FeignClient 注解可以用于客户端的 API 接口定义，它可以将一个 HTTP API 接口转化为一个 Java 接口，从而使得我们可以像调用本地方法一样调用远程服务。</p> 
<p><img src="https://images2.imgbox.com/a3/e8/RiidirEb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="FeignClient__11"></a>@FeignClient 注解原理</h3> 
<p>@FeignClient 注解的原理非常简单，它基于 Spring Cloud 和 Netflix Feign 实现。@FeignClient 注解可以将一个 HTTP API 接口转化为一个 Java 接口，并生成一个代理对象来实现服务之间的调用。@FeignClient 注解可以自动注入 Ribbon 进行负载均衡，从而使得服务之间的调用更加稳定和可靠。</p> 
<p>@FeignClient 注解的核心组件包括 Feign.Builder、FeignClientFactoryBean 和 FeignClientsRegistrar。</p> 
<ul><li> <p>Feign.Builder：用于生成 Feign 的代理对象。Feign.Builder 可以根据指定的 HTTP API 接口生成一个 Java 接口，并自动注入 Ribbon 进行负载均衡。</p> </li><li> <p>FeignClientFactoryBean：用于创建 Feign 的代理对象。FeignClientFactoryBean 可以根据指定的 HTTP API 接口和 Feign.Builder 生成一个代理对象，并将其注入到 Spring 容器中。</p> </li><li> <p>FeignClientsRegistrar：用于注册 @FeignClient 注解。FeignClientsRegistrar 可以扫描项目中所有的 @FeignClient 注解，并将其注册到 Spring 容器中。</p> </li></ul> 
<h3><a id="_FeignClient__23"></a>如何使用 @FeignClient 注解？</h3> 
<p>下面我们来看一下如何在 Spring Boot 中使用 @FeignClient 注解。为了演示简单，我们将创建一个服务提供者和一个服务消费者，并使用 @FeignClient 注解进行服务调用。</p> 
<h4><a id="_27"></a>创建服务提供者</h4> 
<p>首先，我们需要创建一个 Spring Boot 项目，并添加 Spring Web 相关依赖。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>然后，我们需要创建一个 RESTful 接口，并返回一个字符串。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello, World!"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_50"></a>创建服务消费者</h4> 
<p>接下来，我们需要创建一个服务消费者，并使用 @FeignClient 注解进行服务调用。我们可以使用 Feign 来简化服务调用的代码。</p> 
<p>首先，我们需要添加 Spring Cloud 和 Feign 的依赖。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>然后，我们需要在配置文件中添加 Feign 的配置。下面的配置文件中，我们设置了 Feign 的日志记录级别为 FULL。</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> full
</code></pre> 
<p>接下来，我们可以创建一个 Feign 接口来调用服务提供者的接口。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"provider"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProviderClient</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后，我们可以在服务消费者中注入 ProviderClient，并调用它的 hello() 方法来调用服务提供者的接口。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsumerController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ProviderClient</span> providerClient<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ConsumerController</span><span class="token punctuation">(</span><span class="token class-name">ProviderClient</span> providerClient<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>providerClient <span class="token operator">=</span> providerClient<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> providerClient<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_101"></a>测试服务调用</h4> 
<p>现在，我们已经完成了服务提供者和服务消费者的创建，接下来我们可以启动服务提供者和服务消费者，并进行服务调用的测试。</p> 
<p>首先，我们需要启动服务提供者。在服务提供者的启动类中，我们需要添加 @EnableEurekaClient 注解，并在配置文件中添加 Eureka 的配置。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ProviderApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> provider

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">serviceUrl</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka/
</code></pre> 
<p>然后，我们需要启动服务消费者。在服务消费者的启动类中，我们需要添加 @EnableFeignClients 注解，并在配置文件中添加 Feign 的配置。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsumerApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConsumerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> consumer

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">serviceUrl</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka/

<span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> full
</code></pre> 
<p>最后，我们可以在浏览器中访问服务消费者的接口，来测试服务调用是否成功。</p> 
<pre><code>http://localhost:8080/hello
</code></pre> 
<p>如果服务调用成功，我们应该能够在浏览器中看到如下输出：</p> 
<pre><code>Hello, World!
</code></pre> 
<h3><a id="_170"></a>总结</h3> 
<p>@FeignClient 注解是 Spring Boot 中的一个非常重要的组件，它可以帮助我们定义和实现服务之间的 RESTful 接口，使得服务之间的调用更加方便和可靠。在本文中，我们深入探讨了 @FeignClient 注解的原理和如何在 Spring Boot 中使用它来实现服务之间的调用。通过本文的学习，相信读者已经掌握了 @FeignClient 注解的基本原理和使用方法，可以在实际项目中灵活运用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57617e3f5ce45b730986be97f025db5a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小波变换原理及matlab代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f034356c0f2bde86011c04a779551b80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Linux常用命令】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>