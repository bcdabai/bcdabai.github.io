<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>redhat7 mysql_Mysql8.0安装（Redhat7） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="redhat7 mysql_Mysql8.0安装（Redhat7）" />
<meta property="og:description" content="下载tar包(一般是手动下载tar包)：
wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz
将文件移动到 /usr/local/mysql下解压
mv /usr/local/src/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz /usr/local/mysql/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz
进入mysql目录：cd /usr/local/mysql;
解压;tar -zxvf mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz 得到mysql-8.0.11-linux-glibc2.12-x86_64
重命名; mv mysql-8.0.11-linux-glibc2.12-x86_64 mysql8.0;
# 创建文件夹data,存储文件;
cd /usr/local/mysql8.0/
mkdir ./data
2.2 创建用户及用户组
# 用户组
groupadd mysql
# 用户 (用户名/密码)
useradd -g mysql mysql
2.3 授权
chown -R mysql.mysql /usr/local/mysql8.0/ # 亲测
2.4 初始化数据库：
# 查看当前所在目录
pwd # 若显示/usr/local/mysql8.0,请继续执行，否则请先进入此目录/usr/local/mysql8.0
# 初始化 注意查看是否存在相关目录,若不存在,请新建
./bin/mysqld --user=mysql --basedir=/usr/local/mysql8.0/ --datadir=/usr/local/mysql/mysql8.0/data/ --initialize ; # 亲测
得到临时密码
2.5 Mysql配置(按照自己的文件路径配置，关于其他配置，可自行搜索，若有【mysql-safe】的配置，可以先注释掉)
没有my.cnf，mysql.sock文件的话，手工创建，并设置相应的mysql，mysql用户权限
chown -R mysql." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/686a83af55a1598ea53053a51e7fe4dc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-19T02:48:30+08:00" />
<meta property="article:modified_time" content="2021-01-19T02:48:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">redhat7 mysql_Mysql8.0安装（Redhat7）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p align="center"><img src="https://images2.imgbox.com/23/a0/WqDiXtGX_o.png" alt="fe3cbf35b158492c4cd31ec854f0f831.png"></p> 
 <p>下载tar包(一般是手动下载tar包)：</p> 
 <p>wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz</p> 
 <p>将文件移动到 /usr/local/mysql下解压</p> 
 <p>mv /usr/local/src/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz /usr/local/mysql/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz</p> 
 <p>进入mysql目录：cd /usr/local/mysql;</p> 
 <p>解压;tar -zxvf mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz  得到mysql-8.0.11-linux-glibc2.12-x86_64</p> 
 <p>重命名; mv mysql-8.0.11-linux-glibc2.12-x86_64 mysql8.0;</p> 
 <p># 创建文件夹data,存储文件;</p> 
 <p>cd /usr/local/mysql8.0/</p> 
 <p>mkdir ./data</p> 
 <p>2.2 创建用户及用户组</p> 
 <p># 用户组</p> 
 <p>groupadd mysql</p> 
 <p># 用户 (用户名/密码)</p> 
 <p>useradd -g mysql mysql</p> 
 <p>2.3 授权</p> 
 <p>chown -R mysql.mysql /usr/local/mysql8.0/ # 亲测</p> 
 <p>2.4 初始化数据库：</p> 
 <p># 查看当前所在目录</p> 
 <p>pwd # 若显示/usr/local/mysql8.0,请继续执行，否则请先进入此目录/usr/local/mysql8.0</p> 
 <p># 初始化 注意查看是否存在相关目录,若不存在,请新建</p> 
 <p>./bin/mysqld --user=mysql --basedir=/usr/local/mysql8.0/ --datadir=/usr/local/mysql/mysql8.0/data/ --initialize ; # 亲测</p> 
 <p>得到临时密码</p> 
 <p>2.5 Mysql配置(按照自己的文件路径配置，关于其他配置，可自行搜索，若有【mysql-safe】的配置，可以先注释掉)</p> 
 <p>没有my.cnf，mysql.sock文件的话，手工创建，并设置相应的mysql，mysql用户权限</p> 
 <p>chown -R mysql.mysql mysql.sock</p> 
 <p>vi /etc/my.cnf</p> 
 <p align="center"><img src="https://images2.imgbox.com/4d/8b/eetGeaIJ_o.png" alt="ae639b5e606c089f202860eea8789136.png"></p> 
 <p>2.6 建立MySQL服务(注意当前路径应该在mysql8.0,即support-files的根目录)</p> 
 <p># 添加Mysql到系统服务(设置开机启动)</p> 
 <p>cp -a ./support-files/mysql.server /etc/init.d/mysql # 若mysqld，以下mysql相应的修改mysqld,如下图所示</p> 
 <p>chmod +x /etc/init.d/mysql</p> 
 <p>chkconfig --add mysql</p> 
 <p># 检查服务是否生效</p> 
 <p>chkconfig --list mysql</p> 
 <p align="center"><img src="https://images2.imgbox.com/a1/19/XvOjwgzj_o.png" alt="ae639b5e606c089f202860eea8789136.png"></p> 
 <p>3、启动Mysql服务</p> 
 <p># 启动</p> 
 <p>service mysql start;</p> 
 <p># 查看启动状态</p> 
 <p>service mysql status;</p> 
 <p>ln -s /usr/local/mysql8.0/bin/mysql /usr/bin</p> 
 <p align="center"><img src="https://images2.imgbox.com/0e/5a/27gVTCNN_o.png" alt="966708931bc65448951f47dc9541ccbd.png"></p> 
 <p>登陆Mysql:(登录后只能先修改密码)</p> 
 <p># 登陆</p> 
 <p>mysql -uroot -p</p> 
 <p># 输入"初始化数据库"操作时的"临时密码"</p> 
 <p align="center"><img src="https://images2.imgbox.com/ac/cf/M0QgreZY_o.png" alt="ae639b5e606c089f202860eea8789136.png"></p> 
 <p>修改密码：</p> 
 <p>ALTER USER "root"@"localhost" IDENTIFIED WITH mysql_native_password BY "新密码";</p> 
 <p># MySQL 配置文件，</p> 
 <p># 数据库目录 /data/mysql</p> 
 <p>[client]</p> 
 <p>port=3306</p> 
 <p># mysql socket 文件存放地址</p> 
 <p>socket=/tmp/mysql.sock</p> 
 <p># 默认字符集</p> 
 <p>default-character-set=utf8</p> 
 <p>[mysqld]</p> 
 <p>server-id=1</p> 
 <p># 端口</p> 
 <p>port=3306</p> 
 <p># 运行用户</p> 
 <p>user=mysql</p> 
 <p># 最大连接</p> 
 <p>max_connections=200</p> 
 <p>socket=/tmp/mysql.sock</p> 
 <p># mysql 安装目录(解压后文件的目录)</p> 
 <p>basedir=/usr/local/mysql</p> 
 <p># 数据目录(这里放在我们新建的 /data/mysql 下)</p> 
 <p>datadir=/data/mysql</p> 
 <p>pid-file=/data/mysql/mysql.pid</p> 
 <p>init-connect="SET NAMES utf8"</p> 
 <p>character-set-server=utf8</p> 
 <p># 数据库引擎</p> 
 <p>default-storage-engine=INNODB</p> 
 <p>log_error=/data/mysql/mysql-error.log</p> 
 <p>slow_query_log_file=/data/mysql/mysql-slow.log</p> 
 <p># 跳过验证密码</p> 
 <p>#skip-grant-tables</p> 
 <p>[mysqldump]</p> 
 <p>quick</p> 
 <p>max_allowed_packet=16M</p> 
 <p>EOF</p> 
 <p>可能会有好几个地方有 mysql 的配置文件，它的读取顺序是这样的</p> 
 <p>/etc/my.cnf</p> 
 <p>basedir/my.cnf</p> 
 <p>datadir/my.cnf</p> 
 <p>–defaults-extra-file #在读取全局配置文件之后，读取用户配置文件 (~/.my.cnf)之前，读取extra指定的参数文件</p> 
 <p>~/.my.cnf</p> 
 <p>所以我们在 /etc 下的配置文件 my.cnf 是第一个读取的文件，读到这个文件后就不会在读后面路劲中的配置文件。</p> 
 <p>4、远程连接</p> 
 <p>1.在 my.cnf 的mysqld 下增加</p> 
 <p>default_authentication_plugin=mysql_native_password</p> 
 <p>远程连接操作不应该修改mysql中user表中用户为root的记录，而是创建一条root记录</p> 
 <p>updateuserset host ="%"whereuser="root";</p> 
 <p>ALTERUSER"root"@"%"IDENTIFIEDWITH mysql_native_passwordBY"root";</p> 
 <p>FLUSHPRIVILEGES;</p> 
 <p>若为以上操作，则可能导致本机无法登录(即使密码准确)</p> 
 <p>4.授权 root 用户的所有权限并设置远程访问</p> 
 <p>CREATE USER</p> 
 <p>"root"@"%" IDENTIFIED BY "111111";</p> 
 <p>ALTER USER</p> 
 <p>"root"@"%" IDENTIFIED WITH mysql_native_password BY "111111";(修改加密规则并更新密码)</p> 
 <p>设置为远程登录</p> 
 <p>GRANT ALL PRIVILEGES ON *.* TO "root"@"%" IDENTIFIED BY "root" WITH GRANT OPTION;(操作报语法错误)</p> 
 <p>GRANT ALL PRIVILEGES ON *.* TO "root"@"%" WITH GRANT OPTION ;(这个命令ok)</p> 
 <p>GRANT ALL ON 表示所有权限，% 表示通配所有 host，可以访问远程。</p> 
 <p>5.刷新权限</p> 
 <p>所有操作后，应执行</p> 
 <p>flush privileges;</p> 
 <p>关键的三个命令：</p> 
 <p>&gt; mysql&gt;CREATE USER "root"@"%" IDENTIFIED BY "root"; //这个操作是mysql 8.0中得加的</p> 
 <p>&gt; mysql&gt; GRANT ALL PRIVILEGES ON *.* TO "root"@"%"WITH GRANT OPTION; //任何远程主机都可以访问数据库</p> 
 <p>&gt; mysql&gt; FLUSH PRIVILEGES; //需要输入次命令使修改生效</p> 
 <p>2.进入mysql安装目录bin/ 使用safe模式(跳过密码登录)，进行重启：</p> 
 <p>./mysqld_safe --skip-grant-tables</p> 
 <p>8.修改加密规则</p> 
 <p>ALTER USER "root"@"localhost" IDENTIFIED BY "password" PASSWORD EXPIRE NEVER;</p> 
 <p>8.0版本</p> 
 <p>ALTER USER "root"@"localhost" IDENTIFIED WITH mysql_native_password BY "你的密码";</p> 
 <p>password 为你当前密码。</p> 
 <p>9.更新 root 用户密码</p> 
 <p>ALTER USER "root"@"%" IDENTIFIED WITH mysql_native_password BY "password";</p> 
 <p>password 为你新设置的密码。</p> 
 <p>10.刷新权限</p> 
 <p>FLUSH PRIVILEGES;</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/caf7e9035d27e7ea155fb08e1fa4f2e9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql排序null_Mysql实现null值排在最前/最后的方法示例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e7d4cbe98abb1e0c5e98a953d2eb45e3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c语言使用easyx实现扫雷_C语言扫雷小游戏演示和说明</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>