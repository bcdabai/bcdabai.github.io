<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Angular基础 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Angular基础" />
<meta property="og:description" content="一、创建应用 首先需要系统中有node环境 其次安装npm
安装angular-cli npm install @angular/cli -g
创建应用 ng new angular-test --minimal --inline-template false
--skipGit=true
--minimal=true 创建没有单元测试的简易脚手架
--skip-install
--style=css
--routing=false
--inlineTemplate
--inlineStyle
--prefix
运行应用 ng serve
--open=true 应用构建完成后在浏览器中运行
--hmr=true 开启热更新
hmrWarning=false 禁用热更新警告
--port 更改应用运行端口
二、组件 命令创建模板 ng g c &lt;component-name&gt; // ng g c user// 一个模板一般拥有以下内容import { Component } from&#39;@angular/core&#39;; @Component({ selector: &#39;app-user&#39;, template: ` &lt;h1&gt; user works! &lt;/h1&gt; `, styles: [&#39;h1 { font-weight: normal; }&#39;] }) exportclassUserComponent { } // template 为单独文件时 改为templateUrl: &#39;&#39;// styles 为单个或多个文件时 styleUrls: [] 组件生命周期（按以下顺序执行） constructor 实例化组件类的构造函数，用于接收注入服务" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bb1971f66a1c4f4b2d1503fc598811b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-08T17:13:14+08:00" />
<meta property="article:modified_time" content="2023-02-08T17:13:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Angular基础</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">一、创建应用</span></h2> 
 <p style="text-align:null;">首先需要系统中有node环境 其次安装npm</p> 
 <p style="text-align:null;">安装angular-cli npm install @angular/cli -g</p> 
 <p style="text-align:null;">创建应用 ng new angular-test --minimal --inline-template false</p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--skipGit=true</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--minimal=true 创建没有单元测试的简易脚手架</p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--skip-install</p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--style=css</p></li></ol> 
 <ol start="5"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--routing=false</p></li></ol> 
 <ol start="6"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--inlineTemplate</p></li></ol> 
 <ol start="7"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--inlineStyle</p></li></ol> 
 <ol start="8"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--prefix</p></li></ol> 
 <p style="text-align:null;">运行应用 ng serve</p> 
 <ol start="9"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--open=true 应用构建完成后在浏览器中运行</p></li></ol> 
 <ol start="10"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--hmr=true 开启热更新</p></li></ol> 
 <ol start="11"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>hmrWarning=false 禁用热更新警告</p></li></ol> 
 <ol start="12"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>--port 更改应用运行端口</p></li></ol> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">二、组件</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">命令创建模板</span></h3> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">ng g c &lt;component-name&gt;

// ng g c user// 一个模板一般拥有以下内容import { Component } from'@angular/core';

@Component({
  selector: 'app-user',
  template: `
    &lt;h1&gt;
      user works!
    &lt;/h1&gt;
  `,
  styles: ['h1 { font-weight: normal; }']
})
exportclassUserComponent {
}

// template 为单独文件时 改为templateUrl: ''// styles 为单个或多个文件时 styleUrls: []</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">组件生命周期（按以下顺序执行）</span></h3> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>constructor 实例化组件类的构造函数，用于接收注入服务</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngOnChanges() 输入属性值发生变化时调用 ngOnInit()之前会调用一次</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngOnInit() 只调用一次，第一次显示数据绑定和设置指令/组件输入属性之后，初始化指令/组件</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngDoCheck() 紧跟ngOnChanges和首次执行ngOnInit()后调用</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngAfterContentInit() 当angular把外部内容投影进组件视图或指令所在的视图后调用（只调用一次）</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngAfterContentChecked() 当检查完被投影到组件或指令中的内容之后 ngAfterContentInit() 和每次 ngDoCheck() 之后调用。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngAfterViewInit() 初始化完组件视图及其子视图或指令视图后 第一次 ngAfterContentChecked() 之后调用，只调用一次。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngAfterViewChecked() ngAfterViewInit() 和每次 ngAfterContentChecked() 之后调用。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>ngOnDestory()</p></li></ul> 
 <p style="text-align:null;">ngOnInit() 执行http请求 获取初始化数据 设置指令 绑定数据等操作</p> 
 <p style="text-align:null;">ngOnDestory() 取消订阅可观察对象和Dom事件 停止计时器 反注册该指令在全局或应用服务中注册过的所有回调。</p> 
 <p style="text-align:null;">@<a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/core/ViewChild" rel="nofollow noopener noreferrer" target="_blank">ViewChild</a>(ChildViewComponent) viewChild!: ChildViewComponent; 获取子视图的组件实例</p> 
 <p style="text-align:null;">@<a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/core/ContentChild" rel="nofollow noopener noreferrer" target="_blank">ContentChild</a>(ChildComponent) contentChild!: ChildComponent; 获取子组件内容投影的实例</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">视图封装</span></h3> 
 <p style="text-align:null;"><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/core/Component" rel="nofollow noopener noreferrer" target="_blank">Component</a> 的装饰器提供了 <a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/core/Component#encapsulation" rel="nofollow noopener noreferrer" target="_blank">encapsulation</a> 选项</p> 
 <p style="text-align:null;">ViewEncapsulation.ShadowDom：Angular 使用浏览器内置的 Shadow DOM API 将组件的视图包含在 ShadowRoot（用作组件的宿主元素）中，并以隔离的方式应用所提供的样式。</p> 
 <p style="text-align:null;">ViewEncapsulation.Emulated 只应用于组件的视图</p> 
 <p style="text-align:null;">ViewEncapsulation.None 全局应用样式</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">组件交互</span></h3> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">父子组件传值</span></h4> 
 <p style="text-align:null;">子组件接受父组件的传值</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@Input('master') masterName = '';</code></pre> 
 <p style="text-align:null;">通过setter截听输入属性的变化</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">import { Component, Input } from'@angular/core';

@Component({
  selector: 'app-name-child',
  template: '&lt;h3&gt;"{<!-- -->{name}}"&lt;/h3&gt;'
})
exportclassNameChildComponent {
  @Input()
  getname(): string { returnthis._name; }
  setname(name: string) {
    this._name = (name &amp;&amp; name.trim()) || '&lt;no name set&gt;';
  }
  private _name = '';
}</code></pre> 
 <p style="text-align:null;">通过onChanges()监听输入属性的变化</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">ngOnChanges(changes: SimpleChanges) {}</code></pre> 
 <p style="text-align:null;">父组件传值</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;child [master]="value"&gt;&lt;/child&gt;</code></pre> 
 <p style="text-align:null;">父组件接收子组件发出的通知</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// 子组件@Output() voted = newEventEmitter&lt;boolean&gt;();
vote(agreed: boolean) {
    this.voted.emit(agreed);
  }
// 父组件
&lt;child (vote)="onVote($event)"&gt;&lt;/child&gt;
onVoted(agreed: boolean) {}</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">父组件获取子组件的数据方法</span></h4> 
 <p style="text-align:null;">1.组件模板中获取</p> 
 <p style="text-align:null;">&lt;app-countdown-timer #timer&gt;</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">import { Component } from'@angular/core';
import { CountdownTimerComponent } from'./countdown-timer.component';

@Component({
  selector: 'app-countdown-parent-lv',
  template: `
    &lt;h3&gt;Countdown to Liftoff (via local variable)&lt;/h3&gt;
    &lt;button type="button" (click)="timer.start()"&gt;Start&lt;/button&gt;
    &lt;button type="button" (click)="timer.stop()"&gt;Stop&lt;/button&gt;
    &lt;div class="seconds"&gt;{<!-- -->{timer.seconds}}&lt;/div&gt;
    &lt;app-countdown-timer #timer&gt;&lt;/app-countdown-timer&gt;
  `,
  styleUrls: ['../assets/demo.css']
})
export classCountdownLocalVarParentComponent { }</code></pre> 
 <p style="text-align:null;">2.本地变量的方法 （组件类获取 ViewChild）</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@ViewChild(CountdownTimerComponent)  private timerComponent!: CountdownTimerComponent;
start() { this.timerComponent.start(); }  
stop() { this.timerComponent.stop(); }</code></pre> 
 <p style="text-align:null;">3.通过服务进行通讯</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// 在构造函数中注入服务constructor(private missionService: MissionService) {}</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">组件样式</span></h3> 
 <p style="text-align:null;">:host</p> 
 <p style="text-align:null;">:host-context</p> 
 <p style="text-align:null;">:host ::ng-deep h3 {}</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">内容投影</span></h3> 
 <p style="text-align:null;">单插槽内容投影</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;ng-content&gt;&lt;/ng-content&gt;</code></pre> 
 <p style="text-align:null;">多插槽内容投影</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;ng-contentselect="[question]"&gt;&lt;/ng-content&gt;
//父组件： 
&lt;child&gt;&lt;pquestion&gt;&lt;/p&gt;&lt;/child&gt;

或者
&lt;ng-contentselect=".question"&gt;&lt;/ng-content&gt;&lt;child&gt;&lt;pclass="question"&gt;&lt;/p&gt;&lt;/child&gt;</code></pre> 
 <p style="text-align:null;">有条件的内容投影</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext"> </code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">动态组件</span></h3> 
 <p style="text-align:null;">先创建一个指令</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// ad.directive.ts// viewContainerRef 获取对容器视图的访问权import { Directive, ViewContainerRef } from'@angular/core';

@Directive({
  selector: '[adHost]',
})
exportclassAdDirective {
  constructor(public viewContainerRef: ViewContainerRef) { }
}</code></pre> 
 <p style="text-align:null;">加载组件</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// ad-banner.component.ts
template: `
  &lt;div class="ad-banner-example"&gt;
    &lt;h3&gt;Advertisements&lt;/h3&gt;
    &lt;ng-template adHost&gt;&lt;/ng-template&gt;
  &lt;/div&gt;
`
export classAdBannerComponentimplementsOnInit, OnDestroy {@Input() ads: AdItem[] = [];

  currentAdIndex = -1;

  @ViewChild(AdDirective, {static: true}) adHost!: AdDirective;
  interval: number|undefined;

  ngOnInit(): void {
    this.loadComponent();
    this.getAds();
  }

  ngOnDestroy() {
    clearInterval(this.interval);
  }

  loadComponent() {
    this.currentAdIndex = (this.currentAdIndex + 1) % this.ads.length;
    const adItem = this.ads[this.currentAdIndex];

    const viewContainerRef = this.adHost.viewContainerRef;
    viewContainerRef.clear();

    const componentRef = viewContainerRef.createComponent&lt;AdComponent&gt;(adItem.component);
    componentRef.instance.data = adItem.data;
  }

  getAds() {
    this.interval = setInterval(() =&gt; {
      this.loadComponent();
    }, 3000);
  }
}</code></pre> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">三、模板</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">文本插值</span></h3> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;p&gt;{<!-- -->{title}}&lt;/p&gt;
&lt;div&gt;&lt;img alt="item" src="{<!-- -->{itemImageUrl}}"&gt;&lt;/div</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">模板语句</span></h3> 
 <p style="text-align:null;">模板上下文中的名称优先于组件上下文中的名称</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;button type="button" (click)="deleteHero($event)"&gt;Delete hero&lt;/button&gt;</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">绑定</span></h3> 
 <p style="text-align:null;">属性绑定：&lt;p [attr.attribute-you-are-targeting]="expression"&gt;</p> 
 <p style="text-align:null;">类和样式绑定：</p> 
 <p style="text-align:null;">绑定到单个类：[class.sale]="onSave" onSave为真时添加类</p> 
 <p style="text-align:null;">绑定到多个类： [class]="classExpression" classExpression: 数组，对象，字符串(空格分割)</p> 
 <p style="text-align:null;">绑定到单一样式： [style.background-color]="expression"</p> 
 <p style="text-align:null;">绑定到多个样式： [style]="styleExpression"</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>样式的字符串列表，比如 "width: 100px; height: 100px; background-color: cornflowerblue;"。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>一个对象，其键名是样式名，其值是样式值，比如 {width: '100px', height: '100px', backgroundColor: 'cornflowerblue'}。</p></li></ul> 
 <p style="text-align:null;">事件绑定：（click）="eventHandler" (keydown.shift.t)="eventHandler"</p> 
 <p style="text-align:null;">属性绑定： [src]="imgSrc" [disabled]="isDisabled"</p> 
 <p style="text-align:null;">双向绑定： [(size)] = "fontSize"</p> 
 <p style="text-align:null;">双向绑定的原理：@OutPut()属性的名称必须遵循inputChange模式，其中input是@Input()属性的名称，比如@Input()属性为size,则@Output属性必须为sizeChange</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">管道</span></h3> 
 <p style="text-align:null;">使用管道去转换字符串，货币金额，日期等数据</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/DatePipe" rel="nofollow noopener noreferrer" target="_blank">DatePipe</a>：根据本地环境中的规则格式化日期值。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/UpperCasePipe" rel="nofollow noopener noreferrer" target="_blank">UpperCasePipe</a>：把文本全部转换成大写。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/LowerCasePipe" rel="nofollow noopener noreferrer" target="_blank">LowerCasePipe</a> ：把文本全部转换成小写。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/CurrencyPipe" rel="nofollow noopener noreferrer" target="_blank">CurrencyPipe</a> ：把数字转换成货币字符串，根据本地环境中的规则进行格式化。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/DecimalPipe" rel="nofollow noopener noreferrer" target="_blank">DecimalPipe</a>：把数字转换成带小数点的字符串，根据本地环境中的规则进行格式化。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/PercentPipe" rel="nofollow noopener noreferrer" target="_blank">PercentPipe</a> ：把数字转换成百分比字符串，根据本地环境中的规则进行格式化。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>JsonPipe 格式化json数据</p></li></ul> 
 <p style="text-align:null;">{<!-- -->{ birthday | <a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/common/DatePipe" rel="nofollow noopener noreferrer" target="_blank">date</a>:'YYYY-MM-DD' }} 多个参数用:分割</p> 
 <p style="text-align:null;">{<!-- -->{ birthday | date | uppercase}}</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">自定义管道</span></h3> 
 <p style="text-align:null;">指定字符串长度不能超过规定长度</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// summary.pipe.tsimport { Pipe, PipeTransform } from'@angular/core';

@Pipe({
  name: 'summary'
})
exportclassSummaryPipeimplementsPipeTransform {

  transform(value: string, ...args: number[]): unknown {
    if (!value) returnnull;
    let actualLimit = args.length &gt; 0 ? args[0] : 20;
    return value.substring(0, actualLimit) + '...';
  }

}

// app.module.tsimport { SummaryPipe } from'./summary.pipe'@NgModule({
declarations: [
SummaryPipe
]
});</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">模板引用变量</span></h3> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;input #phoneplaceholder="phone number" /&gt;&lt;buttontype="button" (click)="callPhone(phone.value)"&gt;Call&lt;/button&gt;</code></pre> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>如果在组件上声明变量，该变量就会引用该组件实例。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>如果在标准的 HTML 标记上声明变量，该变量就会引用该元素。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>如果你在 元素上声明变量，该变量就会引用一个 TemplateRef 实例来代表此模板</p></li></ul> 
 <p style="text-align:null;">如果该变量在右侧指定了一个名字，比如 #var="<a class="kdocs-link" style="color:#0A6CFF;" href="https://angular.cn/api/forms/NgModel" rel="nofollow noopener noreferrer" target="_blank">ngModel</a>"，那么该变量就会引用所在元素上具有这个 exportAs 名字的指令或组件。</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;form #itemForm="ngForm" (ngSubmit)="onSubmit(itemForm)"&gt;&lt;labelfor="name"&gt;Name&lt;/label&gt;&lt;inputtype="text"id="name"class="form-control"name="name"ngModelrequired /&gt;&lt;buttontype="submit"&gt;Submit&lt;/button&gt;&lt;/form&gt;&lt;div [hidden]="!itemForm.form.valid"&gt;&lt;p&gt;{<!-- -->{ submitMessage }}&lt;/p&gt;&lt;/div&gt;</code></pre> 
 <p style="text-align:null;">模板输入变量</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;ng-template ngFor let-hero let-i="index" [ngForOf]="heroes"&gt;
    &lt;li&gt;Hero number {<!-- -->{i}}: {<!-- -->{hero.name}}
  &lt;/ng-template&gt;</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">SVG作为模板</span></h3> 
 <p style="text-align:null;">可生成动态交互式图形</p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">四、指令</span></h2> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>组件</p></li></ul> 
 <p style="text-align:null;">带有模板的指令。这种指令类型是最常见的指令类型。</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>属性型指令</p></li></ul> 
 <p style="text-align:null;">更改元素、组件或其他指令的外观或行为的指令</p> 
 <p style="text-align:null;">NgClass 添加和删除一组CSS类</p> 
 <p style="text-align:null;">添加或删除单个类使用类绑定</p> 
 <p style="text-align:null;">This div is special</p> 
 <p style="text-align:null;">NgStyle 添加和删除一组HTML样式</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;div [ngStyle]="currentStyles"&gt;
  This div is initially italic, normal weight, and extra large (24px).
&lt;/div&gt;    
this.currentStyles = {
    'font-style':  this.canSave      ? 'italic' : 'normal',
    'font-weight': !this.isUnchanged ? 'bold'   : 'normal',
    'font-size':   this.isSpecial    ? '24px'   : '12px'
  };</code></pre> 
 <p style="text-align:null;">NgModel 将双向绑定数据添加到HTML表单</p> 
 <p style="text-align:null;">&lt;input [(ngModel)]="currentItem.name" id="example-ngModel"&gt;</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>结构型指令</p></li></ul> 
 <p style="text-align:null;">通过添加和删除 DOM 元素来更改 DOM 布局</p> 
 <p style="text-align:null;">*ngIf *ngFor *ngSwitch [hidden]</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;div *ngIf="nullCustomer"&gt;Hello, &lt;span&gt;{<!-- -->{nullCustomer}}&lt;/span&gt;&lt;/div&gt;&lt;div *ngFor="let item of items; let i=index"&gt;{<!-- -->{i + 1}} - {<!-- -->{item.name}}&lt;/div&gt;&lt;li
*ngFor="
let item of list;
let i = index;
let isEven = even;
let isOdd = odd;
let isFirst = first;
let isLast = last;
"
&gt;&lt;/li&gt;&lt;div [hidden]="data.length == 0"&gt;课程列表&lt;/div&gt;&lt;div [ngSwitch]="currentItem.feature"&gt;&lt;app-stout-item    *ngSwitchCase="'stout'"    [item]="currentItem"&gt;&lt;/app-stout-item&gt;&lt;app-device-item   *ngSwitchCase="'slim'"     [item]="currentItem"&gt;&lt;/app-device-item&gt;&lt;app-lost-item     *ngSwitchCase="'vintage'"  [item]="currentItem"&gt;&lt;/app-lost-item&gt;&lt;app-best-item     *ngSwitchCase="'bright'"   [item]="currentItem"&gt;&lt;/app-best-item&gt;&lt;!-- . . . --&gt;&lt;app-unknown-item  *ngSwitchDefault           [item]="currentItem"&gt;&lt;/app-unknown-item&gt;&lt;/div&gt;

// *ngFor和ngFor的对比
&lt;div
  *ngFor="let hero of heroes; let i=index; let odd=odd; trackBy: trackById"
  [class.odd]="odd"&gt;
  ({<!-- -->{i}}) {<!-- -->{hero.name}}
&lt;/div&gt;&lt;ng-templatengForlet-hero [ngForOf]="heroes"let-i="index"let-odd="odd" [ngForTrackBy]="trackById"&gt;&lt;div [class.odd]="odd"&gt;
    ({<!-- -->{i}}) {<!-- -->{hero.name}}
  &lt;/div&gt;&lt;/ng-template&gt;</code></pre> 
 <p style="text-align:null;">当没有单个元素承载指令时，可以使用 。</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">自定义指令</span></h3> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">// hightlight.directive.tsimport { Directive, ElementRef, HostListener, Input } from'@angular/core';

@Directive({
  selector: '[appHighlight]'
})
exportclassHighlightDirective {
  @Input() appHighlight = '';

  constructor(private el: ElementRef) { }

  @HostListener('mouseenter') onMouseEnter() {
    this.highlight(this.appHighlight || 'red');
  }

  @HostListener('mouseleave') onMouseLeave() {
    this.highlight('');
  }

  privatehighlight(color: string) {
    this.el.nativeElement.style.backgroundColor = color;
  }

}

// &lt;p [appHighlight]="color"&gt;Highlight me!&lt;/p&gt;// 与组件一样，你可以将指令的多个属性绑定添加到宿主元素上</code></pre> 
 <p style="text-align:null;">指令组合API</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@Component({
  selector: 'admin-menu',
  template: 'admin-menu.html',
  hostDirectives: [{
    directive: MenuBehavior,
    inputs: ['menuId'], // 别名  ['menuId: id'],outputs: ['menuClosed'],
  }],
})
export class AdminMenu { }

&lt;admin-menu menuId="top-menu" (menuClosed)="logMenuClosed()"&gt;</code></pre> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">五、依赖注入</span></h2> 
 <p style="text-align:null;">依赖注入简称DI, 是面向对象编程中的一种设计原则，用来减少代码之间的耦合度。 在 Angular 的 DI 框架中有四个核心概念：</p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>Dependency：组件要依赖的实例对象，服务实例对象</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>Token：获取服务实例对象的标识</p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>Injector：注入器，负责创建维护服务类的实例对象并向组件中注入服务实例对象。</p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>Provider：配置注入器的对象，指定创建服务实例对象的服务类和获取实例对象的标识。</p></li></ol> 
 <p style="text-align:null;">在组件中：</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@Component({
  selector: 'hero-list',
  template: '...',
  providers: [HeroService]
})</code></pre> 
 <p style="text-align:null;">在模块中</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@NgModule({
  declarations: [HeroListComponent]
  providers: [HeroService]
})</code></pre> 
 <p style="text-align:null;">注入依赖项</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@Component({ … })classHeroListComponent{
  constructor(private service: HeroService) {}
}</code></pre> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">六、服务</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">创建服务</span></h3> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">ng g s xxx/xxx</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">服务的作用域</span></h3> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>在根注入器中注册服务，所有模块使用同一个服务实例对象。</p></li></ol> 
 <pre class="kdocs-plaintext"><code class="language-plaintext"> @Injectable({
    providedIn: 'root', //root表示所有模块使用
    })</code></pre> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>在模块级别注册服务 providedIn: CarModule 或 @NgModule({ providers: [CarListService], })</p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>在组件级别注入服务 providers: [ CarListService ]</p></li></ol> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">七、表单</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">模板驱动</span></h3> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>引入依赖模块FormsModule</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>将DOM表单转换为ngForm <span class="kdocs-fontSize" style="font-size:9pt;">&lt;form #f="ngForm" (submit)="onSubmit(f)"&gt;&lt;/form&gt;</span></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>声明表单字段为ngModel <span class="kdocs-fontSize" style="font-size:9pt;">&lt;input type="text" name="username" ngModel&gt;</span></p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>获取表单字段值</p></li></ol> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">onSubmit(form: NgForm) {
     console.log(form.value)
  }</code></pre> 
 <ol start="5"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>表单分组</p></li></ol> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;form #f="ngForm" (submit) = "onSubmit(f)"&gt;&lt;divngModelGroup="user"&gt;&lt;inputtype="text"name="username"ngModel /&gt;&lt;/div&gt;&lt;divngModelGroup="contact"&gt;&lt;inputtype="text"name="phone"ngModel /&gt;&lt;/div&gt;&lt;/form&gt;</code></pre> 
 <ol start="6"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>表单验证</p></li></ol> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>required 必填字段</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>minlength 字段最小长度</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>maxlength 字段最大长度</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:null;"><p>pattern 验证正则 例如：pattern="\d" 匹配一个数值</p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">模型驱动</span></h3> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">概念</span></h4> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">1. FormControl: 表单项
2. FormGroup: 表单组
3. FormArray: 表单列表</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">快速上手</span></h4> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>引入 ReactiveFormsModule</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>在组件类中创建FormGroup <span class="kdocs-fontSize" style="font-size:9pt;">contactForm: FormGroup = new FormGroup({ name: new FormControl('xxx')})</span></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>关联组件模板中的表单</p></li></ol> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;form [formGroup]="contactForm"&gt;&lt;inputformControlName="name"/&gt;&lt;/form&gt;</code></pre> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>获取表单值 <span class="kdocs-fontSize" style="font-size:9pt;">this.cntactForm.value</span></p></li></ol> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">表单验证器</span></h4> 
 <p style="text-align:null;">内置表单验证器 Validators.required, minLength等 <span class="kdocs-fontSize" style="font-size:9pt;">name: new FormControl('xxx', [Validators.required])</span> 自定义同步表单验证器</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { AbstractControl, ValidationErrors } from"@angular/forms"
export class NameValidators {
// 字段值中不能包含空格
static cannotContainSpace(control: AbstractControl): ValidationErrors | null {
// 验证未通过
if (/\s/.test(control.value)) return { cannotContainSpace: true }
// 验证通过
return null
}
}  </code></pre> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { NameValidators } from"./Name.validators"
contactForm: FormGroup = newFormGroup({
name: newFormControl("", [
Validators.required,
NameValidators.cannotContainSpace
])
})</code></pre> 
 <p style="text-align:null;">自定义异步表单验证器</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { AbstractControl, ValidationErrors } from"@angular/forms"
export class NameValidators {
static shouldBeUnique(control: AbstractControl): Promise&lt;ValidationErrors |
null&gt; {
returnnewPromise(resolve =&gt; {
if (control.value == "admin") {
resolve({ shouldBeUnique: true })
} else {
resolve(null)
}
})
}
}</code></pre> 
 <pre class="kdocs-typescript"><code class="language-typescript">contactForm: FormGroup = newFormGroup({
name: newFormControl("",
[Validators.required],
NameValidators.shouldBeUnique
)
})   </code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">FormBuilder 创建表单的快捷方式</span></h4> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>this.fb.control ：表单项</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>this.fb.group ：表单组，表单至少是一个 FormGroup</p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>this.fb.array ：用于复杂表单，可以动态添加表单项或表单组，在表单验证时，FormArray 中有一项没通过，整体没通过。</p></li></ol> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { FormBuilder, FormGroup, Validators } from "@angular/forms"
export classAppComponent{
contactForm: FormGroup
constructor(private fb: FormBuilder) {
this.contactForm = this.fb.group({
fullName: this.fb.group({
firstName: ["😝", [Validators.required]],
lastName: [""]
}),
phone: []
})
}
}</code></pre> 
 <p style="text-align:null;">方法：</p> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>patchValue：设置表单控件的值（可以设置全部，也可以设置其中某一个，其他不受影响）</p></li></ol> 
 <ol start="5"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>setValue：设置表单控件的值 (设置全部，不能排除任何一个)</p></li></ol> 
 <ol start="6"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>valueChanges：当表单控件的值发生变化时被触发的事件</p></li></ol> 
 <ol start="7"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;text-align:null;"><p>reset：表单内容置空</p></li></ol> 
 <h2 style="">八、路由</h2> 
 <p style="">路由是以模块为单位的，每个模块都可以有自己的路由</p> 
 <h3 style="">快速上手</h3> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>创建组件</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>创建路由规则</p></li></ol> 
 <pre class="kdocs-typescript"><code class="language-typescript">// app.module.ts
import { Routes } from "@angular/router"
const routes: Routes = [
{
path: "home",
component: HomeComponent
},
{
path: "about",
component: AboutComponent
}
]</code></pre> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>引入路由模块</p></li></ol> 
 <pre class="kdocs-typescript"><code class="language-typescript">// app.module.ts
import { RouterModule, Routes } from "@angular/router"
@NgModule({
imports: [RouterModule.forRoot(routes, { useHash: true })],
})
export class AppModule {}</code></pre> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>添加路由插座</p></li></ol> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></p> 
 <ol start="5"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>导航组件中定义链接</p></li></ol> 
 <pre class="kdocs-typescript"><code class="language-typescript">&lt;a routerLink="/home"&gt;首页&lt;/a&gt;
&lt;a routerLink="/about"&gt;关于我们&lt;/a&gt;</code></pre> 
 <h3 style="">匹配规则</h3> 
 <p style="">重定向：</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">{
path: "",
// 重定向
redirectTo: "home",
// 完全匹配
pathMatch: "full"
}</code></pre> 
 <p style="">匹配符</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">{
path: "**",
component: NotFoundComponent
}</code></pre> 
 <h3 style="">路由传参</h3> 
 <p style="">查询参数</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">&lt;a routerLink="/about" [queryParams]="{ name: 'kitty' }"&gt;关于我们&lt;/a&gt;

import { ActivatedRoute } from "@angular/router"
export class AboutComponent implements OnInit {
constructor(private route: ActivatedRoute) {}
ngOnInit(): void {
this.route.queryParamMap.subscribe(query =&gt; {
query.get("name")
})
}
}</code></pre> 
 <p style="">动态参数</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">// 在路由参数上体现：
path: "about/:name",
&lt;a [routerLink]="['/about', 'zhangsan']"&gt;关于我们&lt;/a&gt;

import { ActivatedRoute } from "@angular/router"
export class AboutComponent implements OnInit {
constructor(private route: ActivatedRoute) {}
ngOnInit(): void {
this.route.paramMap.subscribe(params =&gt; {
params.get("name")
})
}
}</code></pre> 
 <h3 style="">导航路由</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">// app.component.ts
import { Router } from "@angular/router"
export class HomeComponent {
constructor(private router: Router) {}
jump() {
this.router.navigate(["/about/history"], {
queryParams: {
name: "Kitty"
}
})
}
}</code></pre> 
 <h3 style="">路由懒加载</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">// app-routing.module.ts
const routes: Routes = [
{
path: "user",
loadChildren: () =&gt; import("./user/user.module").then(m =&gt; m.UserModule)
}
]</code></pre> 
 <h3 style="">路由守卫</h3> 
 <p style="">路由可以应用多个守卫，所有守卫方法都允许，路由才被允许访问，有一个守卫方法不允许，则路由不</p> 
 <p style="">允许被访问</p> 
 <h4 style="">canActivate</h4> 
 <p style="">检查用户是否可以访问某一个路由</p> 
 <p style="">创建路由守卫 ng g guard guards/auth</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { Injectable } from "@angular/core"
import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree,
Router } from "@angular/router"
@Injectable({providedIn: "root"})
export class AuthGuard implements CanActivate {
constructor(private router: Router) {}
canActivate(): boolean | UrlTree {
// 用于实现跳转
return this.router.createUrlTree(["/user/login"])
// 禁止访问目标路由
return false
// 允许访问目标路由
return true
}
}</code></pre> 
 <h4 style="">canActivateChild</h4> 
 <p style="">检查用户是否方可访问某个子路由。</p> 
 <p style="">创建路由守卫： ng g guard guards/admin 注意：选择 CanActivateChild</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { Injectable } from "@angular/core"
import { CanActivateChild, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree
} from "@angular/router"
@Injectable({providedIn: "root"})
export class AdminGuard implements CanActivateChild {
canActivateChild(): boolean | UrlTree {
return true
}</code></pre> 
 <h4 style="">canDeactivate</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">检查用户是否可以退出路由。比如用户在表单中输入的内容没有保存，用户又要离开路由，此时可以调</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">用该守卫提示用户。</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { Injectable } from "@angular/core"
import {
CanDeactivate,
ActivatedRouteSnapshot,
RouterStateSnapshot,
UrlTree
} from "@angular/router"
import { Observable } from "rxjs"
export interface CanComponentLeave {
canLeave: () =&gt; boolean
}
@Injectable({
providedIn: "root"
})
export class UnsaveGuard implements CanDeactivate&lt;CanComponentLeave&gt; {
canDeactivate(component: CanComponentLeave): boolean {
if (component.canLeave()) {
return true
}
return false
}
}</code></pre> 
 <h4 style="">Resolve</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">允许在进入路由之前先获取数据，待数据获取完成之后再进入路由</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">ng g resolver &lt;name&gt;</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { Injectable } from "@angular/core"
import { Resolve } from "@angular/router"
type returnType = Promise&lt;{ name: string }&gt;
@Injectable({
providedIn: "root"
})
export class ResolveGuard implements Resolve&lt;returnType&gt; {
resolve(): returnType {
return new Promise(function (resolve) {
setTimeout(() =&gt; {
resolve({ name: "张三" })
}, 2000)
})
}
}

// 获取到的数据在组件中使用
export class HomeComponent {
constructor(private route: ActivatedRoute) {}
ngOnInit(): void {
console.log(this.route.snapshot.data.user)
}
}</code></pre> 
 <p style="">在路由表中，路由守卫的写法：</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">{
path: "about",
component: AboutComponent,
canActivate: [AuthGuard],
canActivateChild: [AdminGuard],
canDeactivate: [UnsaveGuard],
resolve: {
user: ResolveGuard
},
children: [
{
  path: 'test',
  ...
}
]
}</code></pre> 
 <h2 style="">九、RxJS</h2> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">RxJS 是一个用于处理异步编程的 JavaScript 库，目标是使编写异步和基于回调的代码更容易。</span></p> 
 <h3 style="">基本概念</h3> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Observable：可观察对象，是一个可调用的未来值或事件的集合</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Observe:观察者，一个回调函数的集合，它知道如何去监听由Observable提供的值</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Subscription：订阅，主要用于取消Observable的执行</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Operators: 操作符，采用函数式编程风格的纯函数</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Subject：主体，相当于EventEmitter,并且是将值或事件多路推送给多个Observer的唯一方式</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-fontSize" style="font-size:9pt;">Schedulers:调度器，用来控制并发并且是中央集权的调度员，允许我们在发生计算时进行协调，比如setTimeout,requestAnimationFrame等</span></p></li></ul> 
 <h3 style="">可观察对象</h3> 
 <h4 style="">Observable</h4> 
 <p style="">Observable对象内部可多次调用next方法向外发送数据</p> 
 <p style="">可使用complete方法停止数据的发送</p> 
 <p style="">可使用error方法发送错误消息</p> 
 <p style="">可观察对象是惰性的，只有被订阅才会执行</p> 
 <p style="">可观察对象可以有很多的订阅者</p> 
 <p style=""></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">const observable = new Observable(observer =&gt; {
   let index = 0;
   let timer = setInterval(() =&gt; {
        observer.next(index++);
        if(index === 3) {
           observer.complete()
           // 发生错误 发送错误消息
           // observer.error('xxx')  clearInterval(timer)
        }
   }, 1000)
})

const observer = {
  next: function(value) {
    console.log(value)
  },
  complete: function() { // 数据发送完成}
}

observable.subscribe(observer)</code></pre> 
 <h4 style="">Subject</h4> 
 <p style="">创建空的可观察对象，在订阅后不会立即执行，next方法可以在可观察对象外部调用</p> 
 <p style="">每个 Subject 都是观察者</p> 
 <p style="">每个 Subject 都是 Observable 。</p> 
 <p style="">这个 Subject 可能有多个订阅者，然而普通的 “单播 Observable” 只发送通知给单个观察者。</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { Subject } from "rxjs"
const demoSubject = new Subject()
demoSubject.subscribe({next: function (value) {console.log(value)}})
demoSubject.subscribe({next: function (value) {console.log(value)}})
setTimeout(function () {
demoSubject.next("hahaha")
}, 3000)</code></pre> 
 <h4 style="">BehaviorSubject</h4> 
 <p style="">拥有Subject的全部功能，但是在创建Observable对象时可传默认值，观察者订阅后可以直接拿到默认值</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { BehaviorSubject } from "rxjs"
const demoBehavior = new BehaviorSubject("默认值")
demoBehavior.subscribe({next: function (value) {console.log(value)}})
demoBehavior.next("Hello")</code></pre> 
 <h4 style="">ReplaySubject</h4> 
 <p style="">功能类似 Subject，但有新订阅者时两者处理方式不同，Subject 不会广播历史结果，而 ReplaySubject</p> 
 <p style="">会广播所有历史结果。</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { ReplaySubject } from "rxjs"
const rSubject = new ReplaySubject()
rSubject.subscribe(value =&gt; {
console.log(value)
})
rSubject.next("Hello 1")
rSubject.next("Hello 2")
setTimeout(function () {
rSubject.subscribe({next: function (value) {console.log(value)}})
}, 3000)</code></pre> 
 <h3 style="">辅助方法</h3> 
 <h4 style="">of:参数列表作为数据流返回</h4> 
 <pre class="kdocs-typescript"><code class="language-typescript">of("a", "b", [], {}, true, 20).subscribe(v =&gt; console.log(v))</code></pre> 
 <h4 style="">form：将Array,Promise,Iterator转为Observable对象</h4> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { from } from "rxjs"
function p() {
return new Promise(function (resolve) {
resolve([100, 200])
})
}
from(p()).subscribe(v =&gt; console.log(v)) 
// [100, 200]</code></pre> 
 <h4 style="">interval,timer</h4> 
 <p style="">timer：间隔时间过去以后发出数值，行为终止，或间隔时间发出数值后，继续按第二个参数的时间间</p> 
 <p style="">隔继续发出值 timer(1000,2000)</p> 
 <h4 style="">zip 组合数据</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">将多个 Observable 中的数据流进行组合。和将来最新的进行组合。</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { zip, of } from "rxjs"
import { map } from "rxjs/operators"
let age = of(27, 25, 29)
let name = of("Foo", "Bar", "Beer")
let isDev = of(true, true, false)
zip(name, age, isDev)
.pipe(map(([name, age, isDev]) =&gt; ({ name, age, isDev })))
.subscribe(console.log)
// { name: 'Foo', age: 27, isDev: true }
// { name: 'Bar', age: 25, isDev: true }
// { name: 'Beer', age: 29, isDev: false }</code></pre> 
 <h4 style="">forkJoin 类似Promise.all</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">forkJoin 是 Rx 版本的 Promise.all()，即表示等到所有的 Observable 都完成后，才一次性返回值。</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import axios from "axios"
import { forkJoin, from } from "rxjs"
axios.interceptors.response.use(response =&gt; response.data)
forkJoin({
goods: from(axios.get("http://localhost:3005/goods")),
category: from(axios.get("http://localhost:3005/category"))
}).subscribe(console.log)</code></pre> 
 <h4 style="">retry:重试次数</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">如果 Observable 对象抛出错误，则该辅助方法会重新订阅 Observable 以获取数据流，参数为重新订</span></p> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">阅次数。</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { interval, of, throwError } from "rxjs"
import { mergeMap, retry } from "rxjs/operators"
interval(1000)
.pipe(
mergeMap(val =&gt; {
if (val &gt; 2) {
return throwError("Error!")
}
return of(val)
}),
retry(2)
)
.subscribe({
next: console.log,
error: console.log
})</code></pre> 
 <h4 style="">race</h4> 
 <p style=""><span class="kdocs-fontSize" style="font-size:9pt;">接收并同时执行多个可观察对象，只将最快发出的数据流传递给订阅者。</span></p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { race, timer } from "rxjs"
import { mapTo } from "rxjs/operators"
const obs1 = timer(1000).pipe(mapTo("fast one"))
const obs2 = timer(3000).pipe(mapTo("medium one"))
const obs3 = timer(5000).pipe(mapTo("slow one"))
race(obs3, obs1, obs2).subscribe(console.log)</code></pre> 
 <h4 style=""><span class="kdocs-bold" style="font-weight:bold;">fromEvent</span></h4> 
 <p style="">将事件转换为 Observable。</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { fromEvent } from "rxjs"
const btn = document.getElementById("btn")
// 可以将 Observer 简写成一个函数，表示 next
fromEvent(btn, "click").subscribe(e =&gt; console.log(e))</code></pre> 
 <h3 style="">操作符</h3> 
 <p style="">当操作符被调用时，它们不会改变已经存在的 Observable 实例。相反，它们返回一个新的 Observable </p> 
 <p style="">操作符本质上是一个纯函数 (pure function)，它接收一个 Observable 作为输入，并生成一个新的 Observable 作为输出。</p> 
 <h4 style="">操作符分类</h4> 
 <h5 style="">创建操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>ajax</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-bindCallback" rel="nofollow noopener noreferrer" target="_blank">bindCallback</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-bindNodeCallback" rel="nofollow noopener noreferrer" target="_blank">bindNodeCallback</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-create" rel="nofollow noopener noreferrer" target="_blank">create</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-defer" rel="nofollow noopener noreferrer" target="_blank">defer</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-empty" rel="nofollow noopener noreferrer" target="_blank">empty</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-from" rel="nofollow noopener noreferrer" target="_blank">from</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-fromEvent" rel="nofollow noopener noreferrer" target="_blank">fromEvent</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-fromEventPattern" rel="nofollow noopener noreferrer" target="_blank">fromEventPattern</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-fromPromise" rel="nofollow noopener noreferrer" target="_blank">fromPromise</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-generate" rel="nofollow noopener noreferrer" target="_blank">generate</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-interval" rel="nofollow noopener noreferrer" target="_blank">interval</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-never" rel="nofollow noopener noreferrer" target="_blank">never</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-of" rel="nofollow noopener noreferrer" target="_blank">of</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-repeat" rel="nofollow noopener noreferrer" target="_blank">repeat</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-repeatWhen" rel="nofollow noopener noreferrer" target="_blank">repeatWhen</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-range" rel="nofollow noopener noreferrer" target="_blank">range</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-throw" rel="nofollow noopener noreferrer" target="_blank">throw</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-timer" rel="nofollow noopener noreferrer" target="_blank">timer</a></p></li></ul> 
 <h5 style="">转换操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-buffer" rel="nofollow noopener noreferrer" target="_blank">buffer</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-bufferCount" rel="nofollow noopener noreferrer" target="_blank">bufferCount</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-bufferTime" rel="nofollow noopener noreferrer" target="_blank">bufferTime</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-bufferToggle" rel="nofollow noopener noreferrer" target="_blank">bufferToggle</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-bufferWhen" rel="nofollow noopener noreferrer" target="_blank">bufferWhen</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-concatMap" rel="nofollow noopener noreferrer" target="_blank">concatMap</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-concatMapTo" rel="nofollow noopener noreferrer" target="_blank">concatMapTo</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-exhaustMap" rel="nofollow noopener noreferrer" target="_blank">exhaustMap</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-expand" rel="nofollow noopener noreferrer" target="_blank">expand</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-groupBy" rel="nofollow noopener noreferrer" target="_blank">groupBy</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-map" rel="nofollow noopener noreferrer" target="_blank">map</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-mapTo" rel="nofollow noopener noreferrer" target="_blank">mapTo</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-mergeMap" rel="nofollow noopener noreferrer" target="_blank">mergeMap</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-mergeMapTo" rel="nofollow noopener noreferrer" target="_blank">mergeMapTo</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-mergeScan" rel="nofollow noopener noreferrer" target="_blank">mergeScan</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-pairwise" rel="nofollow noopener noreferrer" target="_blank">pairwise</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-partition" rel="nofollow noopener noreferrer" target="_blank">partition</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-pluck" rel="nofollow noopener noreferrer" target="_blank">pluck</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-scan" rel="nofollow noopener noreferrer" target="_blank">scan</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-switchMap" rel="nofollow noopener noreferrer" target="_blank">switchMap</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-switchMapTo" rel="nofollow noopener noreferrer" target="_blank">switchMapTo</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-window" rel="nofollow noopener noreferrer" target="_blank">window</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-windowCount" rel="nofollow noopener noreferrer" target="_blank">windowCount</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-windowTime" rel="nofollow noopener noreferrer" target="_blank">windowTime</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-windowToggle" rel="nofollow noopener noreferrer" target="_blank">windowToggle</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-windowWhen" rel="nofollow noopener noreferrer" target="_blank">windowWhen</a></p></li></ul> 
 <h5 style="">过滤操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-debounce" rel="nofollow noopener noreferrer" target="_blank">debounce</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-debounceTime" rel="nofollow noopener noreferrer" target="_blank">debounceTime</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-distinct" rel="nofollow noopener noreferrer" target="_blank">distinct</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-distinctKey" rel="nofollow noopener noreferrer" target="_blank">distinctKey</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-distinctUntilChanged" rel="nofollow noopener noreferrer" target="_blank">distinctUntilChanged</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-distinctUntilKeyChanged" rel="nofollow noopener noreferrer" target="_blank">distinctUntilKeyChanged</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-elementAt" rel="nofollow noopener noreferrer" target="_blank">elementAt</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-filter" rel="nofollow noopener noreferrer" target="_blank">filter</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-first" rel="nofollow noopener noreferrer" target="_blank">first</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-ignoreElements" rel="nofollow noopener noreferrer" target="_blank">ignoreElements</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-audit" rel="nofollow noopener noreferrer" target="_blank">audit</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-auditTime" rel="nofollow noopener noreferrer" target="_blank">auditTime</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-last" rel="nofollow noopener noreferrer" target="_blank">last</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-sample" rel="nofollow noopener noreferrer" target="_blank">sample</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-sampleTime" rel="nofollow noopener noreferrer" target="_blank">sampleTime</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-single" rel="nofollow noopener noreferrer" target="_blank">single</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-skip" rel="nofollow noopener noreferrer" target="_blank">skip</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-skipLast" rel="nofollow noopener noreferrer" target="_blank">skipLast</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-skipUntil" rel="nofollow noopener noreferrer" target="_blank">skipUntil</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-skipWhile" rel="nofollow noopener noreferrer" target="_blank">skipWhile</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-take" rel="nofollow noopener noreferrer" target="_blank">take</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-takeLast" rel="nofollow noopener noreferrer" target="_blank">takeLast</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-takeUntil" rel="nofollow noopener noreferrer" target="_blank">takeUntil</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-takeWhile" rel="nofollow noopener noreferrer" target="_blank">takeWhile</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-throttle" rel="nofollow noopener noreferrer" target="_blank">throttle</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-throttleTime" rel="nofollow noopener noreferrer" target="_blank">throttleTime</a></p></li></ul> 
 <h5 style="">组合操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-combineAll" rel="nofollow noopener noreferrer" target="_blank">combineAll</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-combineLatest" rel="nofollow noopener noreferrer" target="_blank">combineLatest</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-concat" rel="nofollow noopener noreferrer" target="_blank">concat</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-concatAll" rel="nofollow noopener noreferrer" target="_blank">concatAll</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-exhaust" rel="nofollow noopener noreferrer" target="_blank">exhaust</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-forkJoin" rel="nofollow noopener noreferrer" target="_blank">forkJoin</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-merge" rel="nofollow noopener noreferrer" target="_blank">merge</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-mergeAll" rel="nofollow noopener noreferrer" target="_blank">mergeAll</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-race" rel="nofollow noopener noreferrer" target="_blank">race</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-startWith" rel="nofollow noopener noreferrer" target="_blank">startWith</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-switch" rel="nofollow noopener noreferrer" target="_blank">switch</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-withLatestFrom" rel="nofollow noopener noreferrer" target="_blank">withLatestFrom</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#static-method-zip" rel="nofollow noopener noreferrer" target="_blank">zip</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-zipAll" rel="nofollow noopener noreferrer" target="_blank">zipAll</a></p></li></ul> 
 <h5 style="">多播操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-cache" rel="nofollow noopener noreferrer" target="_blank">cache</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-multicast" rel="nofollow noopener noreferrer" target="_blank">multicast</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-publish" rel="nofollow noopener noreferrer" target="_blank">publish</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-publishBehavior" rel="nofollow noopener noreferrer" target="_blank">publishBehavior</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-publishLast" rel="nofollow noopener noreferrer" target="_blank">publishLast</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-publishReplay" rel="nofollow noopener noreferrer" target="_blank">publishReplay</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-share" rel="nofollow noopener noreferrer" target="_blank">share</a></p></li></ul> 
 <h5 style="">错误处理操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-catch" rel="nofollow noopener noreferrer" target="_blank">catch</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-retry" rel="nofollow noopener noreferrer" target="_blank">retry</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-retryWhen" rel="nofollow noopener noreferrer" target="_blank">retryWhen</a></p></li></ul> 
 <h5 style="">工具操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-do" rel="nofollow noopener noreferrer" target="_blank">do</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-delay" rel="nofollow noopener noreferrer" target="_blank">delay</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-delayWhen" rel="nofollow noopener noreferrer" target="_blank">delayWhen</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-dematerialize" rel="nofollow noopener noreferrer" target="_blank">dematerialize</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>finally</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>let</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-materialize" rel="nofollow noopener noreferrer" target="_blank">materialize</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-observeOn" rel="nofollow noopener noreferrer" target="_blank">observeOn</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-subscribeOn" rel="nofollow noopener noreferrer" target="_blank">subscribeOn</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-timeInterval" rel="nofollow noopener noreferrer" target="_blank">timeInterval</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-timestamp" rel="nofollow noopener noreferrer" target="_blank">timestamp</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-timeout" rel="nofollow noopener noreferrer" target="_blank">timeout</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-timeoutWith" rel="nofollow noopener noreferrer" target="_blank">timeoutWith</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-toArray" rel="nofollow noopener noreferrer" target="_blank">toArray</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-toPromise" rel="nofollow noopener noreferrer" target="_blank">toPromise</a></p></li></ul> 
 <h5 style="">条件布尔操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-defaultIfEmpty" rel="nofollow noopener noreferrer" target="_blank">defaultIfEmpty</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-every" rel="nofollow noopener noreferrer" target="_blank">every</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-find" rel="nofollow noopener noreferrer" target="_blank">find</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-findIndex" rel="nofollow noopener noreferrer" target="_blank">findIndex</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-isEmpty" rel="nofollow noopener noreferrer" target="_blank">isEmpty</a></p></li></ul> 
 <h5 style="">数学和聚合操作符</h5> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-count" rel="nofollow noopener noreferrer" target="_blank">count</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-max" rel="nofollow noopener noreferrer" target="_blank">max</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-min" rel="nofollow noopener noreferrer" target="_blank">min</a></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-reduce" rel="nofollow noopener noreferrer" target="_blank">reduce</a></p></li></ul> 
 <h2 style="">十、HttpClientModule</h2> 
 <h3 style="">快速开始</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">// 引入模块
import { httpClientModule } from '@angular/common/http';
imports: [
httpClientModule
]
//注入http服务在component里
// app.component.ts
import { HttpClient } from '@angular/common/http';
export class AppComponent {
constructor(private http: HttpClient) {}
}
// 发送请求
import { HttpClient } from "@angular/common/http"
export class AppComponent implements OnInit {
constructor(private http: HttpClient) {}
ngOnInit() {
this.getUsers().subscribe(console.log)
}
getUsers() {
return this.http.get("https://jsonplaceholder.typicode.com/users")
}
}</code></pre> 
 <h3 style="">请求方法</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">this.http.get(url [, options]);
this.http.post(url, data [, options]);
this.http.delete(url [, options]);
this.http.put(url, data [, options]);</code></pre> 
 <h3 style="">请求参数</h3> 
 <p style="">使用HttpParams类</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { HttpParams } from '@angular/common/http';
let params = new HttpParams({ fromObject: {name: "zhangsan", age: "20"}})
params = params.append("sex", "male")
let params = new HttpParams({ fromString: "name=zhangsan&amp;age=20"})

// 类定义
export declare class HttpParams {
constructor(options?: HttpParamsOptions);
has(param: string): boolean;
get(param: string): string | null;
getAll(param: string): string[] | null;
keys(): string[];
append(param: string, value: string): HttpParams;
set(param: string, value: string): HttpParams;
delete(param: string, value?: string): HttpParams;
toString(): string;
}
declare interface HttpParamsOptions {
fromString?: string;
fromObject?: {
[param: string]: string | ReadonlyArray&lt;string&gt;;
};
encoder?: HttpParameterCodec;
}</code></pre> 
 <h3 style="">请求头</h3> 
 <p style="">使用HttpHeaders类</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">let headers = new HttpHeaders({ test: "Hello" })
// 类定义
export declare class HttpHeaders {
constructor(headers?: string | {
[name: string]: string | string[];
});
has(name: string): boolean;
get(name: string): string | null;
keys(): string[];
getAll(name: string): string[] | null;
append(name: string, value: string | string[]): HttpHeaders;
set(name: string, value: string | string[]): HttpHeaders;
delete(name: string, value?: string | string[]): HttpHeaders;
}</code></pre> 
 <h3 style="">响应内容</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">declare type HttpObserve = 'body' | 'response';
// response 读取完整响应体
// body 读取服务器端返回的数据

this.http.get(
"https://jsonplaceholder.typicode.com/users",
{ observe: "body" }
).subscribe(console.log)</code></pre> 
 <h3 style="">拦截器</h3> 
 <p style="">拦截器是 Angular 应用中全局捕获和修改 HTTP 请求和响应的方式。（Token、Error）</p> 
 <p style="">拦截器将只拦截使用 HttpClientModule 模块发出的请求。</p> 
 <p style="">ng g interceptor &lt;name&gt;</p> 
 <h4 style="">请求拦截器</h4> 
 <pre class="kdocs-typescript"><code class="language-typescript">@Injectable()
export class AuthInterceptor implements HttpInterceptor {
constructor() {}
// 拦截方法
intercept(
// unknown 指定请求体 (body) 的类型
request: HttpRequest&lt;unknown&gt;,
next: HttpHandler
// unknown 指定响应内容 (body) 的类型
): Observable&lt;HttpEvent&lt;unknown&gt;&gt; {
// 克隆并修改请求头
const req = request.clone({
setHeaders: {
Authorization: "Bearer xxxxxxx"
}
})
// 通过回调函数将修改后的请求头回传给应用
return next.handle(req)
}
}</code></pre> 
 <h4 style="">响应拦截器</h4> 
 <pre class="kdocs-typescript"><code class="language-typescript">@Injectable()
export class AuthInterceptor implements HttpInterceptor {
constructor() {}
// 拦截方法
intercept(
request: HttpRequest&lt;unknown&gt;,
next: HttpHandler
): Observable&lt;any&gt; {
return next.handle(request).pipe(
retry(2),
catchError((error: HttpErrorResponse) =&gt; throwError(error))
)
}
}</code></pre> 
 <h3 style="">拦截器注入</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { AuthInterceptor } from "./auth.interceptor"
import { HTTP_INTERCEPTORS } from "@angular/common/http"
@NgModule({
providers: [
{
provide: HTTP_INTERCEPTORS,
useClass: AuthInterceptor,
multi: true
}
]
})</code></pre> 
 <h3 style="">Proxy</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">// 在项目的根目录下创建 proxy.conf.json 文件并加入如下代码
{
"/api/*": {
"target": "http://localhost:3070",
"secure": false,
"changeOrigin": true
}
}

// secure：如果服务器端 URL 的协议是 https，此项需要为 true
// changeOrigin：如果服务器端不是 localhost， 此项需要为 true

// 指定proxy配置文件
"scripts": {
"start": "ng serve --proxy-config proxy.conf.json",
}
// 或
"serve": {
"options": {
"proxyConfig": "proxy.conf.json"
},</code></pre> 
 <h2 style="">NgRx状态管理器</h2> 
 <h3 style="">1. 下载 NgRx</h3> 
 <p style="">npm install @ngrx/store @ngrx/effects @ngrx/entity @ngrx/router-store</p> 
 <p style="">@ngrx/store-devtools @ngrx/schematics</p> 
 <h3 style="">2. 配置 NgRx CLI</h3> 
 <p style="">ng config cli.defaultCollection @ngrx/schematics</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">// angular.json
"cli": {
"defaultCollection": "@ngrx/schematics"
}</code></pre> 
 <h3 style="">3. 创建 Store</h3> 
 <p style="">ng g store State --root --module app.module.ts --statePath store --stateInterface</p> 
 <p style="">AppState</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { isDevMode } from '@angular/core';
import {
  ActionReducer,
  ActionReducerMap,
  createFeatureSelector,
  createSelector,
  MetaReducer
} from '@ngrx/store';
import * as fromList from './reducers/list.reducer';


export interface AppState {

  [fromList.listFeatureKey]: fromList.State;
}

export const reducers: ActionReducerMap&lt;AppState&gt; = {

  [fromList.listFeatureKey]: fromList.reducer,
};


export const metaReducers: MetaReducer&lt;AppState&gt;[] = isDevMode() ? [] : [];</code></pre> 
 <h3 style="">4. 创建 Action</h3> 
 <p style="">ng g action store/actions/counter --skipTests</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { createAction, props } from '@ngrx/store';

export const addList = createAction('addList', props&lt;{ value: string}&gt;());
export const deleteList = createAction('deleteList', props&lt;{ id: string }&gt;());</code></pre> 
 <h3 style="">5. 创建 Reducer</h3> 
 <p style="">ng g reducer store/reducers/counter --skipTests --reducers=../index.ts</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { createReducer, on } from '@ngrx/store';
import { addList, deleteList } from '../actions/list.actions';
import { v4 as uuidv4} from 'uuid';

export interface ToDo {
  id: string,
  value: string
}
export interface State {
  list: ToDo[]
}
export const listFeatureKey = 'list';


export const initialState: State = {
  list: [
    {
      id: '111', value: '122'
    },
    { id: 'ssd', value: 'dsds'}
  ]
};

export const reducer = createReducer(
  initialState,
  on(addList, (state, action) =&gt; {
    return {
      ...state,
      list: [
        ...state.list,
        {
          id: uuidv4(),
          value: action.value
        }
      ]
    }
  }),
  on(deleteList, (state, action) =&gt; {
    const index = state.list.findIndex(i =&gt; i.id === action.id);
    let newList = [...(state.list)]
    newList.splice(index, 1)
    return {
      ...state,
      list: newList
    }
  })
);
</code></pre> 
 <h3 style="">6.创建 Selector</h3> 
 <p style="">ng g selector store/selectors/counter --skipTests</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { createFeatureSelector, createSelector } from '@ngrx/store';
import { AppState } from '..';
import { listFeatureKey, State } from '../reducers/list.reducer';

export const selectList = createFeatureSelector&lt;AppState, State&gt;(listFeatureKey)
export const selectLists = createSelector(selectList, state =&gt; state.list)</code></pre> 
 <h3 style="">7.组件使用</h3> 
 <pre class="kdocs-typescript"><code class="language-typescript">import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';
import { select, Store } from '@ngrx/store';
import { fromEvent, Observable } from 'rxjs';
import { AppState } from 'src/app/store';
import { selectLists } from 'src/app/store/selectors/list.selectors';
import { filter, map } from 'rxjs/operators'
import { addList, deleteList } from 'src/app/store/actions/list.actions';
import { slide, todoAnimations } from 'src/app/animations';
@Component({
  selector: 'app-list',
  templateUrl: './list.component.html',
  styles: [
  ],
  animations: [slide, todoAnimations]
})
export class ListComponent implements AfterViewInit {
  @ViewChild('todoInput') todoInput!: ElementRef;
  todos: Observable&lt;{id: string, value: string}[]&gt;
  constructor(private store: Store&lt;AppState&gt;) {
    this.todos = this.store.pipe(select(selectLists))
  }
  
  removeItem(id: string) {
    console.log('id', id);
    this.store.dispatch(deleteList({ id }))
  };
  ngAfterViewInit(): void {
    fromEvent&lt;KeyboardEvent&gt;(this.todoInput.nativeElement, "keyup").pipe(
      filter(event =&gt; event.key === "Enter"),
      map(event =&gt; (&lt;HTMLInputElement&gt;event.target).value),
      map(value =&gt; value.trim()),
      filter(value =&gt; value !== "")
    ).subscribe(value =&gt; {
      console.log('input', this.todoInput)
      this.store.dispatch(addList({ value: value }))
      this.todoInput.nativeElement.value = ''
    })
  }
}
</code></pre> 
 <h3 style="">8.模板</h3> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;div class="container"&gt;
  &lt;h2&gt;TODO&lt;/h2&gt;
  &lt;div class="form-group"&gt;
    &lt;input #todoInput type="text" class="form-control" placeholder="add todo" /&gt;
  &lt;/div&gt;
  &lt;ul class="list-group"&gt;
    &lt;li
      @slide
      *ngFor="let item of todos | async; let i = index;"
      (click)="removeItem(item.id)"
      class="list-group-item"

    &gt;
      {<!-- -->{ item.value }}
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre> 
 <h2 style="">动画</h2> 
 <h3 style="">定义</h3> 
 <p style="">:enter | void =&gt; * 进入动画</p> 
 <p style="">:leave | * =&gt; void离开动画</p> 
 <p style="">trigger 方法用于创建动画，指定动画名称</p> 
 <p style="">transition 方法用于指定动画的运动状态，出场动画或者入场动画，或者自定义状态动画。</p> 
 <p style="">style 方法用于设置元素在不同的状态下所对应的样式</p> 
 <p style="">animate 方法用于设置运动参数，比如动画运动时间，延迟事件，运动形式</p> 
 <p style="">keyFrames 关键帧动画</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">transition(":leave", [
animate(
600,
keyframes([
style({ offset: 0.3, transform: "translateX(-80px)" }),
style({ offset: 1, transform: "translateX(100%)" })
])
)
])</code></pre> 
 <p style="">query查询元素</p> 
 <p style="">group 动画并行</p> 
 <p style="">stagger 在多个元素同时执行同一个动画时，让每个元素动画的执行依次延迟。</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">transition(":enter", [
group([
query("h2", [
style({ transform: "translateY(-30px)" }),
animate(300)
]),
query("@slide", stagger(200, animateChild()))
])
])</code></pre> 
 <p style="">state 定义状态</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">trigger("expandCollapse", [
// 使用 state 方法定义折叠状态元素对应的样式
state(
"collapsed",
style({
height: 0,
overflow: "hidden",
paddingTop: 0,
paddingBottom: 0
})
),
// 使用 state 方法定义展开状态元素对应的样式
state("expanded", style({ height: "*", overflow: "auto" })),
// 定义展开动画
transition("collapsed =&gt; expanded", animate("400ms ease-out")),
// 定义折叠动画
transition("expanded =&gt; collapsed", animate("400ms ease-in"))
])</code></pre> 
 <h3 style="">举例</h3> 
 <p style="">和NgRx例子一样，这里给出动画代码</p> 
 <pre class="kdocs-typescript"><code class="language-typescript">// animation.ts
import {
  animate,
  animateChild,
  animation,
  group,
  keyframes,
  query,
  style,
  transition,
  trigger,
  useAnimation,
  stagger,
} from "@angular/animations";

const slideUp = animation([
  style({ opacity: 0, transform: "translateY(40px)" }),
  animate(250),
]);

const slideOut = animation([
  //   animate(
  //     600,
  //     keyframes([
  //       style({ offset: 0.3, transform: "translateX(-80px)" }),
  //       style({ offset: 1, transform: "translateX(100%)" }),
  //     ])
  //   ),
  animate(600, style({ opacity: 0, transform: "translateX(100%)" })),
]);
export const slide = trigger("slide", [
  transition(":enter", useAnimation(slideUp)),
  transition(":leave", useAnimation(slideOut)),
]);

export const todoAnimations = trigger("todoAnimations", [
  transition(":enter", [
    group([
      query("h2", [style({ transform: "translateY(-30px)" }), animate(300)]),
      query("@slide", stagger(200, animateChild()), { optional: true }),
    ]),
  ]),
]);
</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d1d106f2b6785bfde2c539f11526c2a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue3 企业级优雅实战 - 组件库框架 - 10 实现组件库 cli - 下</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e7afa2979d962708c2c2b84504da1f3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">idea炫酷主题推荐（本人自用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>