<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot &#43; shiro 简单实例 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot &#43; shiro 简单实例" />
<meta property="og:description" content="本文属于原创，说明简介，如果有问题，可留言一起探讨 1.搭建springboot项目，这里不做概述 2.引入shiro 依赖 &lt;!-- apache shiro 权限框架 --&gt; &lt; dependency &gt; &lt; groupId &gt; org.apache.shiro &lt;/ groupId &gt; &lt; artifactId &gt; shiro-spring &lt;/ artifactId &gt; &lt; version &gt; 1.4.0 &lt;/ version &gt; &lt;/ dependency &gt; 3.创建 ShiroRealm package wx.milk.web.controller.admin; import org.apache.shiro.SecurityUtils; import org.apache.shiro.authc.*; import org.apache.shiro.authz.AuthorizationInfo; import org.apache.shiro.authz.SimpleAuthorizationInfo; import org.apache.shiro.realm.AuthorizingRealm; import org.apache.shiro.subject.PrincipalCollection; import org.springframework.beans.factory.annotation. Autowired ; import org.springframework.stereotype. Component ; import wx.milk.service.admin.IUserService; import wx.milk.web.utils.SpringBeanFactoryUtils; import wx.query.Query; import wx.query.Statement; import wx." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fe6a86beb6e6e631d87308fa2825104c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-14T10:04:18+08:00" />
<meta property="article:modified_time" content="2018-06-14T10:04:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot &#43; shiro 简单实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="white-space:pre-wrap;line-height:1.75;font-size:14px;">
  本文属于原创，说明简介，如果有问题，可留言一起探讨 
</div> 
<p></p> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;">
  1.搭建springboot项目，这里不做概述 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;">
  2.引入shiro 依赖 
</div> 
<div style="white-space:pre-wrap;text-indent:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>&lt;!-- apache shiro </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>权限框架 </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>--&gt;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>dependency</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>groupId</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro</span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;/</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>groupId</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>artifactId</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiro-spring</span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;/</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>artifactId</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>version</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">1.4.0</span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;/</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>version</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&lt;/</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(239,239,239);"><strong>dependency</strong></span> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">&gt;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:28px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(239,239,239);">3.创建</span> 
 <span style="font-size:16px;background-color:rgb(228,228,255);">ShiroRealm</span> 
</div> 
<div style="white-space:pre-wrap;text-indent:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>package </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.web.controller.admin;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.SecurityUtils;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.authc.*;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.authz.AuthorizationInfo;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.authz.SimpleAuthorizationInfo;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.realm.AuthorizingRealm;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.subject.PrincipalCollection;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.beans.factory.annotation.</span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">Autowired</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.stereotype.</span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">Component</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.service.admin.IUserService;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.web.utils.SpringBeanFactoryUtils;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.query.Query;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.query.Statement;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.security.User;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">java.util.HashSet;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">java.util.Set;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * Created by zhong.h on 2018/6/13/013.</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> */</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Component</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public class </strong></span> 
 <span style="font-size:16px;background-color:rgb(228,228,255);">ShiroRealm</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>extends </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">AuthorizingRealm {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Autowired</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>private </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">IUserService </span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><strong>service</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/* </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>认证</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>.</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>登录</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> */</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Override</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>protected </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>throws </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">AuthenticationException {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>if </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(</span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><strong>service </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">== </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>null</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><strong>service </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">= SpringBeanFactoryUtils.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getBean</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(IUserService.</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>class</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> UsernamePasswordToken userToken = (UsernamePasswordToken) token;</span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>获取用户输入的</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>token</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">String account = userToken.getUsername();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> Query query = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Query();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> Statement statement = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Statement();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> statement.setName(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"account"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> statement.setValue(account);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> query.and(statement);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> User user = </span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><strong>service</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">.findByParam(query);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SimpleAuthenticationInfo(user, user.getPassword(),</span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>this</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">.getClass().getName());</span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>放入</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>shiro.</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>调用</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>CredentialsMatcher</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>检验密码</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">}</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>授权用户权限</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>*/</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Override</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>protected </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">AuthorizationInfo doGetAuthorizationInfo(</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> PrincipalCollection principals) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>获取用户</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">User user = (User) SecurityUtils.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getSubject</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">().getPrincipal();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> SimpleAuthorizationInfo info = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SimpleAuthorizationInfo();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>获取用户角色</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Set&lt;String&gt; roleSet = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">HashSet&lt;String&gt;();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> roleSet.add(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"100002"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> info.setRoles(roleSet);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>获取用户权限</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Set&lt;String&gt; permissionSet = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">HashSet&lt;String&gt;();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> permissionSet.add(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"</strong></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>权限添加</strong></span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> permissionSet.add(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"</strong></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>权限删除</strong></span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> info.setStringPermissions(permissionSet);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">info;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">}</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">4.创建configuration</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>package </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.web.configuration;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.codec.Base64;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.web.mgt.CookieRememberMeManager;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.apache.shiro.web.servlet.SimpleCookie;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.context.annotation.</span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">Bean</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.context.annotation.</span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">Configuration</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.web.controller.admin.ShiroRealm;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">javax.servlet.Filter;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">java.util.LinkedHashMap;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">java.util.Map;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * Created by zhong.h on 2018/6/13/013.</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> */</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Configuration</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public class </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ShiroConfiguration {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ShiroRealm shiroRealm(){<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ShiroRealm();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * ShiroFilterFactoryBean </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>处理拦截资源文件问题。</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>注意：单独一个</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>ShiroFilterFactoryBean</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>配置是或报错的，以为在</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>初始化</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>ShiroFilterFactoryBean</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>的时候需要注入：</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>SecurityManager</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> *</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * Filter Chain</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>定义说明 </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>1</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>、一个</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>URL</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>可以配置多个</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Filter</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>，使用逗号分隔</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* 2</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>、当设置多个过滤器时，全部验证通过，才视为通过</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* 3</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>、部分过滤器可指定参数，如</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>perms</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>，</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>roles</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> *</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> */</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Bean</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ShiroFilterFactoryBean shiroFilter(DefaultWebSecurityManager securityManager) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> ShiroFilterFactoryBean shiroFilterFactoryBean = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ShiroFilterFactoryBean();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>必须设置</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> SecurityManager</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean.setSecurityManager(securityManager);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>如果不设置默认会自动寻找</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Web</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>工程根目录下的</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>"/login.jsp"</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>页面</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean.setLoginUrl(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"/admin/login"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>登录成功后要跳转的链接</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean.setSuccessUrl(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"/admin/index"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>未授权界面</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean.setUnauthorizedUrl(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"/error"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>自定义拦截器</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Map&lt;String, Filter&gt; filtersMap = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">LinkedHashMap&lt;String, Filter&gt;();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>限制同一帐号同时在线的个数。</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//filtersMap.put("kickout", kickoutSessionControlFilter());</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean.setFilters(filtersMap);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>权限控制</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>map.</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Map&lt;String, String&gt; filterChainDefinitionMap = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">LinkedHashMap&lt;String, String&gt;();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>配置不会被拦截的链接 顺序判断</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>配置退出过滤器</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>,</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>其中的具体的退出代码</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Shiro</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>已经替我们实现了</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>从数据库获取动态的权限</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// filterChainDefinitionMap.put("/add", "perms[</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>权限添加</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>]");</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> // &lt;!-- </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>过滤链定义，从上向下顺序执行，一般将</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> /**</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>放在最为下边</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> --&gt;:</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>这是一个坑呢，一不小心代码就不好使了</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> // &lt;!-- authc:</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>所有</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>url</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>都必须认证通过才可以访问</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>; anon:</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>所有</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>url</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>都都可以匿名访问</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>--&gt;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> //logout</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>这个拦截器是</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>shiro</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>已经实现好了的。</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>从数据库获取</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/*List&lt;SysPermissionInit&gt; list = sysPermissionInitService.selectAll();</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> for (SysPermissionInit sysPermissionInit : list) {<!-- --></em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> filterChainDefinitionMap.put(sysPermissionInit.getUrl(),</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> sysPermissionInit.getPermissionInit());</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> }*/</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> .setFilterChainDefinitionMap(filterChainDefinitionMap);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">shiroFilterFactoryBean;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Bean</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">DefaultWebSecurityManager securityManager() {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> DefaultWebSecurityManager securityManager = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">DefaultWebSecurityManager();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>设置</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>realm.</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">securityManager.setRealm(shiroRealm());</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>// </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>自定义缓存实现 使用</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>redis</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> //securityManager.setCacheManager(cacheManager());</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> // </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>自定义</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>session</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>管理 使用</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>redis</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> //securityManager.setSessionManager(sessionManager());</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> //</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>注入记住我管理器</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">securityManager.setRememberMeManager(rememberMeManager());</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">securityManager;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * cookie</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>对象</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><strong><em>@return</em></strong></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><strong><em> </em></strong></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>*/</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SimpleCookie rememberMeCookie(){<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>这个参数是</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>cookie</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>的名称，对应前端的</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>checkbox</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>的</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>name = rememberMe</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SimpleCookie simpleCookie = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SimpleCookie(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"rememberMe"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//&lt;!-- </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>记住我</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>cookie</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>生效时间</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>30</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>天</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> ,</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>单位秒</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;--&gt;</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">simpleCookie.setMaxAge(</span> 
 <span style="font-size:16px;color:rgb(0,0,255);background-color:rgb(255,255,255);">2592000</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">simpleCookie;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * cookie</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>管理对象</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>;</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>记住我功能</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><strong><em>@return</em></strong></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><strong><em> </em></strong></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>*/</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">CookieRememberMeManager rememberMeManager(){<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> CookieRememberMeManager cookieRememberMeManager = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">CookieRememberMeManager();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> cookieRememberMeManager.setCookie(rememberMeCookie());</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//rememberMe cookie</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>加密的密钥 建议每个项目都不一样 默认</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>AES</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>算法 密钥长度</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>(128 256 512 </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>位</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>)</em></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">cookieRememberMeManager.setCipherKey(Base64.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>decode</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"3AvVhmFLUs0KTA3Kprsdag=="</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">));</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">cookieRememberMeManager;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">}</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">5. 测试</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@RequestMapping</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(value = </span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"/signin"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">)</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">String login(HttpServletRequest request, HttpSession session,</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> String account, String password, String validatecode)</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>throws </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">JsonManagerException {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> String exception = (String) request.getAttribute(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"shiroLoginFailure"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>if </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(StringUtils.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>isEmpty</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(account) || StringUtils.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>isEmpty</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(password)) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return null</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>try </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">{<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> UsernamePasswordToken token = </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>new </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">UsernamePasswordToken(account, password);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> Subject subject = SecurityUtils.</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getSubject</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> subject.login(token);</span> 
</div> 
<div style="white-space:pre-wrap;text-indent:28px;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> User user=(User) subject.getPrincipal();</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> session.setAttribute(</span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"user"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">, user);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;color:rgb(0,128,0);background-color:rgb(255,255,255);"><strong>"/admin/index"</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> } </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>catch </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(Exception e) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><strong>logger</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">.error(e.getMessage(), e);</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>throw </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">e;</span> 
</div> 
<div style="white-space:pre-wrap;margin-left:56px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;">
  6。重要工具类 
</div> 
<div style="white-space:pre-wrap;text-indent:28px;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>package </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">wx.milk.web.utils;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.beans.BeansException;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.context.ApplicationContext;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.context.ApplicationContextAware;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>import </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">org.springframework.stereotype.</span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">Component</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>/**</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * spring</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>加载时候，注入的</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>bean </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>的顺序是 先是</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Lisener </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>然后是 </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Filter </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>最后是 </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>Servlet</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>因此如果在过滤器或者监听器里面注入</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>service</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>等会是空，因为在过滤器或者监听器加载的时候</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>* Servlet</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>，</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>service</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>等还没有加载，因此是空的，所以就手动注入</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>*</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> * Created by zhong.h on 2018/6/13/013.</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> */</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Component</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public class </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">SpringBeanFactoryUtils </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>implements </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ApplicationContextAware {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>private static </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ApplicationContext </span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><em>applicationContext</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);">@Override</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;color:rgb(128,128,0);background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public void </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">setApplicationContext(ApplicationContext applicationContext)</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>throws </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">BeansException {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>if </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">(SpringBeanFactoryUtils.</span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><em>applicationContext </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">== </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>null</strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> SpringBeanFactoryUtils.</span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><em>applicationContext </em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">= applicationContext;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public static </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">ApplicationContext getApplicationContext() {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;color:rgb(102,14,122);background-color:rgb(255,255,255);"><em>applicationContext</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">;</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>根据名称（</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>@Resource </em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>注解）</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public static </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">Object getBean(String name) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getApplicationContext</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">().getBean(name);</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>//</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>根据类型（</em></span> 
 <span style="font-size:16px;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>@Autowired</em></span> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em>）</em></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;font-family:SimSun, STSong;color:rgb(128,128,128);background-color:rgb(255,255,255);"><em> </em></span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public static </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&lt;</span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&gt; </span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T </span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">getBean(Class&lt;</span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&gt; clazz) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getApplicationContext</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">().getBean(clazz);</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <br> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>public static </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&lt;</span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&gt; </span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T </span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">getBean(String name, Class&lt;</span> 
 <span style="font-size:16px;color:rgb(32,153,157);background-color:rgb(255,255,255);">T</span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">&gt; clazz) {<!-- --></span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> </span> 
 <span style="font-size:16px;color:rgb(0,0,128);background-color:rgb(255,255,255);"><strong>return </strong></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"><em>getApplicationContext</em></span> 
 <span style="font-size:16px;background-color:rgb(255,255,255);">().getBean(name, clazz);</span> 
</div> 
<div style="white-space:pre-wrap;line-height:1.75;font-size:14px;"> 
 <span style="font-size:16px;background-color:rgb(255,255,255);"> }</span> 
</div> 
<p style="white-space:pre-wrap;line-height:1.75;font-size:14px;"><span style="font-size:16px;background-color:rgb(255,255,255);">}</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ae2542c0e1e182645a2e15e02857577/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">对C#的控件的Width等属性进行修改无效的解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9af78d888e621272d79b3248840db9a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">五.shiro表单拦截器FormAuthenticationFilter如何认证,登录成功后如何继续访问原请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>