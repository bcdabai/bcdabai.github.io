<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>哈希函数的构造和处理冲突的方法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="哈希函数的构造和处理冲突的方法" />
<meta property="og:description" content="哈希函数的构造 常用的哈希函数的构造方法有 6 种：直接定址法、数字分析法、平方取中法、折叠法、除留余数法和随机数法。
直接定址法：其哈希函数为一次函数，即以下两种形式： H（key）= key 或者 H（key）=a * key &#43; b
其中 H（key）表示关键字为 key 对应的哈希地址，a 和 b 都为常数。
例如有一个从 1 岁到 100 岁的人口数字统计表，如表 1 所示：
表 1 人口统计表
假设其哈希函数为第一种形式，其关键字的值表示最终的存储位置。若需要查找年龄为 25 岁的人口数量，将年龄 25 带入哈 希函数中，直接求得其对应的哈希地址为 25（求得的哈希地址表示该记录的位置在查找表的第 25 位）。
数字分析法:如果关键字由多位字符或者数字组成，就可以考虑抽取其中的 2 位或者多位作为该关键字对应的哈希地址，在取法上尽量选择变化较多的位，避免冲突发生。 例如表 2 中列举的是一部分关键字，每个关键字都是有 8 位十进制数组成：
表 2
通过分析关键字的构成，很明显可以看到关键字的第 1 位和第 2 位都是固定不变的，而第 3 位不是数字 3 就是 4，最后一位只可能取 2、7 和 5，只有中间的 4 位其取值近似随机，所以为了避免冲突，可以从 4 位中任意选取 2 位作为其哈希地址。
平方取中法是对关键字做平方操作，取中间得几位作为哈希地址。此方法也是比较常用的构造哈希函数的方法 例如关键字序列为{421，423，436}，对各个关键字进行平方后的结果为{177241，178929，190096}，则可以取中间的两位{72，89，00}作为其哈希地址。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7a95b6b35c5a137058785d40f48daedd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-06T14:39:22+08:00" />
<meta property="article:modified_time" content="2020-08-06T14:39:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">哈希函数的构造和处理冲突的方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>哈希函数的构造</h3> 
<p>常用的哈希函数的构造方法有 6 种：<strong>直接定址法、数字分析法、平方取中法、折叠法、除留余数法和随机数法。</strong></p> 
<ul><li>直接定址法：其哈希函数为一次函数，即以下两种形式：</li></ul> 
<p style="text-indent:33px;">H（key）= key 或者 H（key）=a * key + b</p> 
<p style="text-indent:33px;">其中 H（key）表示关键字为 key 对应的哈希地址，a 和 b 都为常数。<br><br>         例如有一个从 1 岁到 100 岁的人口数字统计表，如表 1 所示：</p> 
<p style="text-indent:33px;"><img alt="" src="https://images2.imgbox.com/f3/39/jB2CEgiE_o.png"><br>                                   表 1 人口统计表</p> 
<p style="text-indent:33px;">假设其哈希函数为第一种形式，其关键字的值表示最终的存储位置。若需要查找年龄为 25 岁的人口数量，将年龄 25 带入哈 希函数中，直接求得其对应的哈希地址为 25（求得的哈希地址表示该记录的位置在查找表的第 25 位）。</p> 
<ul><li>数字分析法:如果关键字由多位字符或者数字组成，就可以考虑抽取其中的 2 位或者多位作为该关键字对应的哈希地址，在取法上尽量选择变化较多的位，避免冲突发生。</li></ul> 
<p>        例如表 2 中列举的是一部分关键字，每个关键字都是有 8 位十进制<u><a href="http://data.biancheng.net/view/181.html" rel="nofollow">数组</a></u>成：</p> 
<p style="text-indent:33px;"><img alt="" src="https://images2.imgbox.com/5e/ff/xoT6CiW5_o.png"><br>                             表 2</p> 
<p>       通过分析关键字的构成，很明显可以看到关键字的第 1 位和第 2 位都是固定不变的，而第 3 位不是数字 3 就是 4，最后一位只可能取 2、7 和 5，只有中间的 4 位其取值近似随机，所以为了避免冲突，可以从 4 位中任意选取 2 位作为其哈希地址。</p> 
<ul><li>平方取中法是对关键字做平方操作，取中间得几位作为哈希地址。此方法也是比较常用的构造哈希函数的方法</li></ul> 
<p>        例如关键字序列为<code>{421，423，436}</code>，对各个关键字进行平方后的结果为<code>{177241，178929，190096}</code>，则可以取中间的两位<code>{72，89，00}</code>作为其哈希地址。</p> 
<ul><li>折叠法是将关键字分割成位数相同的几部分（最后一部分的位数可以不同），然后取这几部分的叠加和（舍去进位）作为哈希地址。此方法适合关键字位数较多的情况。</li></ul> 
<p>        例如，在<u><a href="http://data.biancheng.net/view/200.html" rel="nofollow">图</a></u>书馆中图书都是以一个 10 位的十进制数字为关键字进行编号的，若对其查找表建立哈希表时，就可以使用折叠法。<br><br>         若某书的编号为：0-442-20586-4，分割方式如图 1 中所示，在对其进行折叠时有两种方式：一种是移位折叠，另一种是间界折叠：</p> 
<p>        移位折叠是将分割后的每一小部分，按照其最低位进行对齐，然后相加，如图 1（a）；</p> 
<p>间界折叠是从一端向另一端沿分割线来回折叠，如图 1（b）。</p> 
<p><img alt="" src="https://images2.imgbox.com/9e/41/UOXkR2FB_o.png"><br> 图 1 移位折叠和间界折叠</p> 
<ul><li>除留余数法：若已知整个哈希表的最大长度 m，可以取一个不大于 m 的数 p，然后对该关键字 key 做取余运算，即：<code>H（key）= key % p</code>。</li></ul> 
<blockquote> 
 <p>在此方法中，对于 p 的取值非常重要，由经验得知 p 可以为不大于 m 的质数或者不包含小于 20 的质因数的合数。</p> 
</blockquote> 
<ul><li>随机数法：是取关键字的一个随机函数值作为它的哈希地址，即：<code>H（key）=random（key）</code>，此方法适用于关键字长度不等的情况。</li></ul> 
<p>注意：这里的随机函数其实是伪随机函数，随机函数是即使每次给定的 key 相同，但是 H（key）都是不同；而伪随机函数正好相反，每个 key 都对应的是固定的 H（key）。</p> 
<p>如此多的构建哈希函数的方法，在选择的时候，需要根据实际的查找表的情况采取适当的方法。通常考虑的因素有以下几方面：</p> 
<ul><li>关键字的长度。如果长度不等，就选用随机数法。如果关键字位数较多，就选用折叠法或者数字分析法；反之如果位数较短，可以考虑平方取中法；</li><li>哈希表的大小。如果大小已知，可以选用除留余数法；</li><li>关键字的分布情况；</li><li>查找表的查找频率；</li><li>计算哈希函数所需的时间（包括硬件指令的因素）</li></ul> 
<h3>处理冲突的方法</h3> 
<p>对于哈希表的建立，需要选取合适的哈希函数，但是对于无法避免的冲突，需要采取适当的措施去处理。<br><br> 通常用的处理冲突的方法有以下几种：<br>  </p> 
<ul><li>开放定址法</li></ul> 
<p>H（key）=（H（key）+ d）MOD m（其中 m 为哈希表的表长，d 为一个增量）</p> 
<p>当得出的哈希地址产生冲突时，选取以下 3 种方法中的一种获取 d 的值，然后继续计算，直到计算出的哈希地址不在冲突为止，这 3 种方法为：</p> 
<ul><li>线性探测法：d=1，2，3，…，m-1</li><li>二次探测法：d=12，-12，22，-22，32，…</li><li>伪随机数探测法：d=伪随机数</li></ul> 
<p>例如，在长度为 11 的哈希表中已填写好 17、60 和 29 这 3 个数据（如图 2（a） 所示），其中采用的哈希函数为：H（key）=key MOD 11，现有第 4 个数据 38 ，当通过哈希函数求得的哈希地址为 5，与 60 冲突，则分别采用以上 3 种方式求得插入位置如图 2（b）所示：</p> 
<p><img alt="" src="https://images2.imgbox.com/ba/bb/HrM2VQtE_o.png"></p> 
<p>图 2 开放定址法</p> 
<p>注释：在线性探测法中，当遇到冲突时，从发生冲突位置起，每次 +1，向右探测，直到有空闲的位置为止；二次探测法中，从发生冲突的位置起，按照 +12，-12，+22，…如此探测，直到有空闲的位置；伪随机探测，每次加上一个随机数，直到探测到空闲位置结束。</p> 
<ul><li>再哈希法</li></ul> 
<p>当通过哈希函数求得的哈希地址同其他关键字产生冲突时，使用另一个哈希函数计算，直到冲突不再发生。</p> 
<ul><li>链地址法</li></ul> 
<p>将所有产生冲突的关键字所对应的数据全部存储在同一个线性<u><a href="http://data.biancheng.net/view/160.html" rel="nofollow">链表</a></u>中。例如有一组关键字为<code>{19,14,23,01,68,20,84,27,55,11,10,79}</code>，其哈希函数为：<code>H(key)=key MOD 13</code>，使用链地址法所构建的哈希表如图 3 所示：</p> 
<p><img alt="" src="https://images2.imgbox.com/58/a3/Lo4LvLsY_o.png"><br> 图 3 链地址法构建的哈希表</p> 
<ul><li>建立一个公共溢出区</li></ul> 
<p>建立两张表，一张为基本表，另一张为溢出表。基本表存储没有发生冲突的数据，当关键字由哈希函数生成的哈希地址产生冲突时，就将数据填入溢出表。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cca9c1a25ac58de9218c6a21f3774595/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">多线程的例子 对int类型进行操作 开启十个线程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/08183fa54d9c9ee036c18f6f8011689b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端,JS排序,正序逆序,基数排序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>