<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>开发嵌入京东app h5| Hybrid | 微信小程序 ｜ 实践踩坑总结十六条 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="开发嵌入京东app h5| Hybrid | 微信小程序 ｜ 实践踩坑总结十六条" />
<meta property="og:description" content="一 前言 笔者最近一直在开发京东app嵌入的h5项目和微信小程序商城项目，在此期间遇到很多坑。这篇文章主要是针对 h5| Hybrid | 微信小程序 三个方向来讲述我遇到的坑，以及详细讲解我是如何解决问题的。
一直以来，移动端适配就是一个令人头疼的问题。如果想要吃透移动端，还需要不少的实践经验，有的时候在pc端调试没有问题，但是在m端就会出现问题。以下这16个问题是我在实际工作中遇到的，亲自奉上给大家。希望大家收藏一波，以备不时之需。
喜欢笔者的可以「点赞 &#43; 收藏 」 一波，持续更新前端硬核文章。
M端h5踩坑总结 以下是京东嵌入h5，h5落地页，遇到的问题。我用一个思维导图表示出来。
1 ios：:postion:fixed 定位抖动跳屏问题 背景 在开发京东app,Hybrid h5业务页面的时候，遇到一个非常棘手的问题，因为这个页面类似京东app商品详情页面的动画效果。 动画效果如下所示。安卓手机正常，但是ios手机出现，滑块抖动问题，图片会出现闪动的效果。这个问题困扰了很久，网上搜索了大量的解决方案，都没有实际解决问题，自己也尝试了几种方法，也没有成功，当时很奔溃😭😭😭，最后还是灵光一现，想到了一个巧妙的解决方案😂。
整个流程就是，当视图容器向上滑动的时候，商品卡片容器需要缓慢移动，首先需要将商品卡片需要脱离标准流，设置定位position:fixed 固定定位。然后控制top值来控制滑块的缓慢移动。但是在容器向上滑动的过程中，滑块会出现抖动，闪动的效果。
🤔分析这个原因，应该是ios对position表现不友好的原因，这种类似的原因在小程序里也很常见。
解决方案 网上搜索和自己探索的失败解决方案 ① 给顶级元素设置height:100% ( 并没有奏效 ) 。
② 增加 transform: translate(0) 属性 （ 并没有奏效 ）
③ 改变布局由fixed 定位,改成absolute定位，滚动条基于自身。（ 能够从根本上解决偶尔跳屏的问题，但是随之而来的就是ios 滚动条问题，基于document才能有效触发，遂放弃此方案）
④ 不改变布局的情况下，由fixed 定位,改成absolute定位，滚动条基于document,定位值完全取决于数据驱动。（能够从根本上解决偶尔跳屏的问题，但是随之而来的就是要不断改变自身的top值 ，导致更新会慢的情况 ，用户体验不好，流畅度欠佳，遂放弃此方案 ）
⑤ -webkit-overflow-scroll:touch解决滑动无惯性（ 并没有奏效 ）
⑥ background-attachment:fixed（ 并没有奏效 ）
解决方案 试了好久，终于想到了一个解决方法。继续使用 fixed 定位，因为我们这里需要通过定位，抖动不是单纯fixed定位的原因。和频繁改变top值也有很大关系。放弃改变top值 ，运用transform: translateY来使视图上下移动。
&lt;view class=&#34;scroll_box&#34; style={{ transform:`translateY(${ top }px)` }} &gt; &lt;!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c2a3a6f9ac54ee4563c2a8398c2dd898/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-01T23:20:29+08:00" />
<meta property="article:modified_time" content="2021-03-01T23:20:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">开发嵌入京东app h5| Hybrid | 微信小程序 ｜ 实践踩坑总结十六条</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__0"></a>一 前言</h2> 
<p>笔者最近一直在开发京东app嵌入的h5项目和微信小程序商城项目，在此期间遇到很多坑。这篇文章主要是针对 h5| Hybrid | 微信小程序 三个方向来讲述我遇到的坑，以及详细讲解我是如何解决问题的。</p> 
<p>一直以来，移动端适配就是一个令人头疼的问题。如果想要吃透移动端，还需要不少的实践经验，有的时候在<code>pc</code>端调试没有问题，但是在m端就会出现问题。以下这16个问题是我在实际工作中遇到的，亲自奉上给大家。希望大家收藏一波，以备不时之需。</p> 
<p>喜欢笔者的可以「<strong>点赞 + 收藏</strong> 」 一波，持续更新前端硬核文章。</p> 
<h2><a id="Mh5_10"></a>M端h5踩坑总结</h2> 
<p>以下是京东嵌入h5，h5落地页，遇到的问题。我用一个思维导图表示出来。</p> 
<p><img src="https://images2.imgbox.com/04/68/5LCM65bc_o.png" alt=""></p> 
<h3><a id="1_iospostionfixed__17"></a>1 ios：:postion:fixed 定位抖动跳屏问题</h3> 
<h4><a id="_19"></a>背景</h4> 
<p>在开发京东app,<code>Hybrid h5</code>业务页面的时候，遇到一个非常棘手的问题，因为这个页面类似京东app商品详情页面的动画效果。 动画效果如下所示。安卓手机正常，但是ios手机出现，滑块抖动问题，图片会出现闪动的效果。这个问题困扰了很久，网上搜索了大量的解决方案，都没有实际解决问题，自己也尝试了几种方法，也没有成功，当时很奔溃😭😭😭，最后还是灵光一现，想到了一个巧妙的解决方案😂。</p> 
<p><img src="https://images2.imgbox.com/43/2a/WJbdANo0_o.png" alt=""></p> 
<p>整个流程就是，当视图容器向上滑动的时候，商品卡片容器需要缓慢移动，首先需要将商品卡片需要脱离标准流，设置定位<code>position:fixed</code> 固定定位。然后控制<code>top</code>值来控制滑块的缓慢移动。但是在容器向上滑动的过程中，滑块会出现<code>抖动</code>，<code>闪动</code>的效果。</p> 
<p>🤔分析这个原因，应该是<code>ios</code>对<code>position</code>表现不友好的原因，这种类似的原因在小程序里也很常见。</p> 
<h4><a id="_29"></a>解决方案</h4> 
<h5><a id="_31"></a>网上搜索和自己探索的失败解决方案</h5> 
<p>① 给顶级元素设置<code>height:100%</code> ( <strong>并没有奏效</strong> ) 。</p> 
<p>② 增加 <code>transform: translate(0)</code> 属性 （ <strong>并没有奏效</strong> ）</p> 
<p>③ 改变布局由<code>fixed</code> 定位,改成<code>absolute</code>定位，滚动条基于自身。（ <strong>能够从根本上解决偶尔跳屏的问题，但是随之而来的就是<code>ios</code> 滚动条问题，基于<code>document</code>才能有效触发，遂放弃此方案</strong>）</p> 
<p>④ 不改变布局的情况下，由<code>fixed</code> 定位,改成<code>absolute</code>定位，滚动条基于<code>document</code>,定位值完全取决于数据驱动。（<strong>能够从根本上解决偶尔跳屏的问题，但是随之而来的就是要不断改变自身的top值 ，导致更新会慢的情况 ，用户体验不好，流畅度欠佳，遂放弃此方案</strong> ）</p> 
<p>⑤ <code>-webkit-overflow-scroll:touch</code>解决滑动无惯性（ <strong>并没有奏效</strong> ）</p> 
<p>⑥ <code>background-attachment:fixed</code>（ <strong>并没有奏效</strong> ）</p> 
<h5><a id="_45"></a>解决方案</h5> 
<p>试了好久，终于想到了一个解决方法。<strong>继续使用 <code>fixed</code> 定位，因为我们这里需要通过定位，抖动不是单纯<code>fixed</code>定位的原因。和频繁改变<code>top</code>值也有很大关系。放弃改变<code>top</code>值 ，运用<code>transform: translateY</code>来使视图上下移动。</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scroll_box<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation">=</span>{<!-- -->{<!-- --></span> <span class="token attr-name"><span class="token namespace">transform:</span>`translateY(${<!-- --></span> <span class="token attr-name">top</span> <span class="token attr-name">}px)`</span> <span class="token attr-name">}}</span>    <span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- 很多东西 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.scroll_box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_androidborderradius50__61"></a>2 android问题：border-radius：50% 圆角被拉伸问题</h3> 
<h4><a id="_63"></a>背景</h4> 
<p>当我们期望用 <code>border-radius：50%；</code> 来绘制圆点的时候。如果圆比较大可能不是很明显，但是如果圆比较小的时候，会出现明显的不圆，圆被拉伸的情况。</p> 
<p>大致效果如下所示。</p> 
<p><img src="https://images2.imgbox.com/82/7d/H4Fpk32W_o.png" alt=""></p> 
<p>🤔分析原因， 在移动端通常会适配不同的手机，所以使用<code>rem</code>布局，，<code>rem</code> 在换算为<code>px</code>时，会是一个带小数点的值，安卓对小于<code>1px</code>的做了处理（不同浏览器对小于<code>1px</code>的处理方式不同，有的采用四舍五入，有的大于某个值展示<code>1px</code>否则就舍去），从而导致圆角不圆；在<code>ios</code>下就没有这个问题。</p> 
<h4><a id="_73"></a>解决方案</h4> 
<p>我们先把已知视图宽高变成2倍 ,然后用 <code>transform: scale(.5)</code> 让视图缩小50% ,就可以在 <code>android</code>得到很圆的效果。亲测这个方法非常奏效，形成的圆非常的圆。</p> 
<p>我们举个例子🌰：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>round<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>没有做兼容之前的样式，</p> 
<pre><code class="prism language-css"><span class="token selector">.round</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
    <span class="token property">heigth</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>改成</p> 
<pre><code class="prism language-css"><span class="token selector">.round</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span>50%<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
    <span class="token property">heigth</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里用的<code>taro-h5</code>, <code>px</code> 会被自动转化成<code>rem</code>。</p> 
<h4><a id="_105"></a>问题演变</h4> 
<p>有的时候我们在给元素设置高度非常小的时候也会出现这个问题。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>box<span class="token punctuation">'</span></span>  <span class="token punctuation">/&gt;</span></span> 
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>1px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>因为我们高度设置为<code>height:1px</code>,当<code>taro</code>给转换成<code>rem</code>的时候，也会出现四舍五入的情况，结果将<code>1px</code>弄没了，变成了<code>0px</code>，于是乎就造成了<code>1px</code>元素无法显示的<code>bug</code>，解决方案和上述的原理一样。将高度变成原来的2倍，再通过<code>transform: scaleY(.5);</code> y方向变为原来的二分之一。</p> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_iOS_iosmarginbottom_129"></a>3 iOS问题 ：最后子元素ios底部设置margin-bottom无效</h3> 
<h4><a id="_131"></a>背景</h4> 
<p>这个问题在<code>ios</code>环境下，还是很容易发生的。当视图容器的最后一个元素设置 <code>margin-bottom</code> ,期望距离整个容器视图有一个距离的时候，发现在安卓手机正常，但是在<code>ios</code>下，会出现<code>margin-bottom</code>无效的情况。</p> 
<h4><a id="_137"></a>解决方案</h4> 
<p>这个的解决方案也非常非常的简单，将<code>margin-bottom</code>改成<code>padding-bottom</code>就能根本的解决问题。</p> 
<p><img src="https://images2.imgbox.com/03/06/ovLwpqkd_o.png" alt=""></p> 
<p>例子🌰：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 148px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>改成</p> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 148px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_ios__163"></a>4 ios 屏幕上拉下滑出现空白</h3> 
<h4><a id="_165"></a>背景</h4> 
<p>手指按住屏幕下拉，屏幕顶部会多出一块空白区域。手指按住屏幕上拉，底部多出一块空白区域。空白区域的颜色，在不同<code>app</code>平台打开，颜色会有差别，嵌入京东app h5中的空白背景色为白色，但是在微信中为灰色。</p> 
<p>🤔分析原因:<br> 在 <code>iOS</code> 中，手指按住屏幕上下拖动，会触发 <code>touchmove</code> 事件。这个事件触发的对象是整个 <code>webview</code> 容器，容器自然会被拖动，剩下的部分会成空白。</p> 
<p>效果如下：</p> 
<p><img src="https://images2.imgbox.com/b0/2b/bJbis8Pp_o.png" alt=""></p> 
<h4><a id="_178"></a>解决方案</h4> 
<h5><a id="1__180"></a>1 障眼法,很管用</h5> 
<p>比如对于京东app这种白色背景,如果我们<code>background</code>也是白色的，完全可以用整个顶端容器，定位填充整个容器来解决这个问题。这样视图不会跟随上拉下滑而移动。如果空白颜色和背景颜色一致，视觉上就会抵消滑动效果。根本上解决出现空白的问题。</p> 
<p>一言不合上代码😜。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- 此处省略很多内容  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">#root</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2__202"></a>2 监听事件，禁止上滑下滑</h5> 
<p>这种方法比较靠谱，俗话说<code>解铃还须系铃人</code>,这个问题根本原因是 <code>touchmove</code> 引起的，那么从根本上解决问题，还是要从<code>touchmove</code>这个事件入手。我们需要监听移动端<code>document</code> 的 <code>touchmove</code>然后通过 <code>preventDefault</code> 方法，阻止同一触点上所有默认行为，比如滚动事件。这里要注意的是什么时候，不让滑动，什么时候让滑动。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-js"><span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>root
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* 让视图容器正常滚动 */</span>
    e<span class="token punctuation">.</span>_isScroller <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">/* 禁止上滑，下滑 */</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>_isScroller<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token comment">/*  阻止默认事件 */</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
    passive<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="5__input__placeholder__226"></a>5 移动端问题： input 的 placeholder 垂直方向不居中问题</h3> 
<h4><a id="_228"></a>背景</h4> 
<p>在开发移动端的时候，会遇到 <code>input</code> 的 <code>placeholder</code> 垂直方向不居中的情况。</p> 
<h4><a id="_231"></a>解决方案</h4> 
<p><code>input</code>的<code>placeholder</code>会出现文本位置偏上的情况:PC端设置<code>line-height</code>等于<code>height</code>能够对齐,而移动端仍然是偏上,解决方案时是设置<code>css line-height:normal</code>;</p> 
<p>html:</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>input<span class="token punctuation">"</span></span>  <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>样式：</p> 
<pre><code class="prism language-css"><span class="token selector">.input</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">line-height</span><span class="token punctuation">:</span>normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_IOS__webkitoverflowscrolling__touch__246"></a>6 IOS 滑动问题 -webkit-overflow-scrolling : touch 卡住不动问题</h3> 
<h4><a id="_248"></a>背景</h4> 
<p>在<code>ios</code>页面向上向下滑动的过程中，会出现卡顿，不流畅的现象,具体问题如下:</p> 
<p>1 在<code>safari</code>上，使用了<code>-webkit-overflow-scrolling:touch</code>之后，页面偶尔会卡住不动。(中招)<br> 2 在<code>safari</code>上，点击其他区域，再在滚动区域滑动，滚动条无法滚动的(中招)。</p> 
<p>在解决这个问题之前，我们先理解<code>-webkit-overflow-scrolling</code>的两个属性</p> 
<p><strong>1 <code>auto</code>: 使用普通滚动, 当手指从触摸屏上移开，滚动会立即停止。</strong><br> <strong>2 <code>touch</code>: 使用具有回弹效果的滚动,当手指从触摸屏上移开，内容会继续保持一段时间的滚动效果。继续滚动的速度和持续的时间和滚动手势的强烈程度成正比。同时也会创建一个新的堆栈上下文。</strong></p> 
<h4><a id="_260"></a>解决方案</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span> </span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">min-height</span><span class="token punctuation">:</span>101%</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>或</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span> </span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span><span class="token function">calc</span><span class="token punctuation">(</span>100%+1px<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>方法就是在<code>webkit-overflow-scrolling:touch</code>属性的下一层子元素上，<br> 将<code>height</code>加1%或1px。从而主动触发<code>scrollbar</code>。</p> 
<h3><a id="7__279"></a>7 移动端适配：页面放大缩小</h3> 
<h4><a id="_281"></a>背景</h4> 
<p>如果没有使用<code>taro</code>等跨平台框架构建的h5,当在M端展示h5的时候，双击或者双指张开手指页面元素，页面会放大或缩小。</p> 
<p>针对这个情况，实际不算一个<code>bug</code>，因为<code>html</code>本身就支持缩放。在<code>pc</code>端的时候，我们可以控制鼠标滚轮控制页面缩放，但是在移动端这个行为也存在。但是对于嵌入的 M端 h5页面，我们不需要这个功能。</p> 
<h4><a id="_287"></a>解决方案</h4> 
<p>我们可以通过 <code>meta</code> 元标签标准中有个 中 <code>viewport</code> 属性，用来控制页面的缩放，一般用于移动端。</p> 
<p>我们先看看<code>taro-h5</code>是怎么适配的.</p> 
<pre><code class="prism language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width,initial-scale=1,user-scalable=no<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>核心<code>user-scalable=no</code> ,没错，就是通过这个属性来阻止缩放行为的。</p> 
<h3><a id="8_taroH5_swiper_300"></a>8 taro跨平台开发H5: swiper组件横向滚动平铺问题</h3> 
<h4><a id="_302"></a>背景</h4> 
<p>在用<code>taro-vue</code>构建 <code>h5</code>应用的时候，对于<code>banner</code>轮播图部分，出现一个诡异的问题，就是水平方向轮播的时候，期望图片是正常的轮播效果，但是初始化的时候，图片垂直方向平铺。</p> 
<p>大致效果如下图所示：</p> 
<p><strong>期望结果</strong></p> 
<p><img src="https://images2.imgbox.com/ac/2c/iFQ3khno_o.png" alt=""></p> 
<p><strong>实际结果</strong></p> 
<p><img src="https://images2.imgbox.com/b9/cd/rw9X8Xo2_o.png" alt=""></p> 
<h4><a id="_316"></a>解决方案</h4> 
<p><strong>大致代码如下：</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-wrap<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(v,idx) in renderList<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>idx<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-item<span class="token punctuation">"</span></span>
    <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-wrap-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
            <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>widthFix<span class="token punctuation">"</span></span>
            <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>v.path<span class="token punctuation">"</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-image<span class="token punctuation">"</span></span>
            <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>这个棘手的问题在于不是每次都复现，由于这个页面是商品详情页，问题会根据某一个商品出现。因为 <code>renderList</code> 是通过后台获取的图片列表，所以判断问题是由<strong>渲染<code>swiper</code> -&gt; 请求数据赋值<code>renderList</code> -&gt; 再到<code>swiper-item</code>渲染图片列表的过程中</strong>，某一个环节出了问题。遂改变了渲染方案， 所以采用 <strong>获取数据 -&gt; 渲染swiper -&gt;渲染swiperItem</strong>的方案。</p> 
<p><strong>改进后的代码如下：</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-wrap<span class="token punctuation">"</span></span>  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>renderList.length &gt; 0<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(v,idx) in renderList<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>idx<span class="token punctuation">"</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-item<span class="token punctuation">"</span></span>
    <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-wrap-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
            <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>widthFix<span class="token punctuation">"</span></span>
            <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>v.path<span class="token punctuation">"</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swiper-image<span class="token punctuation">"</span></span>
            <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>当 <code>renderList</code>获取到数据之后，在依次渲染<code>swiper</code>，<code>swiper-item</code>。根本解决了这个问题。</p> 
<h2><a id="_364"></a>微信小程序</h2> 
<p>以下在开发小程序的过程中遇到的兼容问题。</p> 
<p><img src="https://images2.imgbox.com/a3/3f/NnDbmrpp_o.png" alt=""></p> 
<h3><a id="1_androidwebview_370"></a>1 android问题：打开webview被微信拦截问题</h3> 
<h4><a id="_372"></a>背景</h4> 
<p>在微信小程序里开发<code>webview h5</code>的时候，在配置了合法域名，域名备案的情况下，出现了 <code>ios</code> 上正常打开，但是在 <code>android</code> 手机上出现了被拦截的情况。而且这些情况都是因为打开<code>webview</code>的 <code>url</code>中存在汉字的情况。</p> 
<p>效果图片</p> 
<p><img src="https://images2.imgbox.com/16/d5/6WknTqHh_o.png" alt=""></p> 
<h4><a id="_381"></a>分析原因，解决方案</h4> 
<p>实际原因很简单，安卓手机对于 <code>http / https</code> url如果存在汉字，需要用<code>encodeURI</code>对汉字进行编码处理就可以了。</p> 
<pre><code class="prism language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-view</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>webViewUrl<span class="token punctuation">"</span></span> <span class="token attr-name">@message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handerMessage<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<pre><code class="prism language-js"> <span class="token keyword">this</span><span class="token punctuation">.</span>webViewUrl  <span class="token operator">=</span> commonUrl <span class="token operator">+</span> <span class="token string">'/pages/goods/index?name='</span> <span class="token operator">+</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'外星人'</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果是接口请求，就这么写</p> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
   url<span class="token punctuation">:</span> commonUrl <span class="token operator">+</span> <span class="token string">'/pages/goods/index?name='</span> <span class="token operator">+</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'外星人'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   method<span class="token punctuation">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>完美解决了问题。</p> 
<h4><a id="webview__403"></a>webview 被微信拦截，详细解决方案。</h4> 
<p>关于微信小程序中<code>webview</code>被拦截。我总结了一个详细的方案，供大家参考，也是开发中踩坑实录。</p> 
<p>如果在微信小程序开发<code>webview</code>中 ， 被微信拦截，你需要这样逐一排查。</p> 
<h5><a id="__411"></a>① 首先检查域名是否备案</h5> 
<p>首先检查域名是否备案，如果域名没有备案，是无法正常打开<code>webview</code>的，如果当前域名是<code>二级域名</code>，那就看主域名有没有备案，二级域名无需独立备案。</p> 
<h5><a id="__415"></a>② 配置业务域名</h5> 
<p>配置业务域名流程很简单，首先登陆小程序后台 -&gt; 开发，开发管理 - &gt; 开发设置。</p> 
<p>然后选择业务域名 -&gt; 点击修改 -&gt; 添加业务域名。</p> 
<p>注意上边这部分，需要按这上面的操作添加。添加成功后，会自动添加到，合法域名列表中。</p> 
<h5><a id="______424"></a>③ 如果 ① 和 ② 完成后，仍然被拦截</h5> 
<p>如果走完上边的两步，仍然被拦截。在2020年之前的域名，一般不会被拦截，但是微信对新申请的域名比较严格，需要先点击申诉试试，如果申诉还不行的话，需要联系微信团队相关人员解决问题，因为我们公司有与微信团队联系的部门，所以无须我们联系。</p> 
<h5><a id="__429"></a>④ 如果只有安卓手机被拦截</h5> 
<p>如果只有安卓手机被拦截的情况，请按照上面的方法，编码带汉字的<code>url</code>。</p> 
<h3><a id="2_iOS_1rpx_border_ios_434"></a>2 iOS问题： 微信小程序1rpx border ios真机显示不全问题</h3> 
<h4><a id="_436"></a>背景</h4> 
<p>微信小程序在iphone低版本手机(iphone6 ,6p),如果多个视图容器排列(水平和竖直方向都会存在)，可能会出现个别边框显示不全的问题。</p> 
<p>效果如下图所示：</p> 
<p><img src="https://images2.imgbox.com/b7/e4/o5MxKXV6_o.png" alt=""></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.father</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">width</span><span class="token punctuation">:</span> 696rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span> 
    <span class="token property">font-size</span><span class="token punctuation">:</span> 28rpx<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #01b5b5<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>  
   <span class="token punctuation">}</span>
   <span class="token selector">.item</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1rpx solid #01b5b5<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 20rpx<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 16rpx<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 16rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_474"></a>解决方案</h4> 
<p>经过测试得来一组数据 ,注意步骤1中加粗的文本.label-con类中width:696rpx,将标签的父容器宽度设置为下面的值都会出现这个692 693 696 697 700 701 704 705 708 709。我们把这组数字除以2。</p> 
<p><code>692/2=346</code>,<code>693/2=346.5</code>,<code>696/2=348</code>,<code>697/2=348.5</code>,<code>700/2=350</code>,<code>701/2=350.5</code>,<code>704/2=352</code>,<code>705/2=352.5</code>,<code>708/2=354</code>,<code>709/2=354.5</code></p> 
<p>**分析结果:**当标签的父容器宽度(单位rpx)÷2的值为偶数或偶数.5的时候会出现该bug,那么我们可以推到出用200.5<em>2=401,302</em>2=604等等都会重现这个bug。那么解决方案油然而生。</p> 
<h5><a id="__482"></a>第一种： 设置高度/宽度到安全的值</h5> 
<p>第一种方式是设置标签父容器的宽度到无bug值，即(奇数或奇数.5)<em>2,例如281</em>2rpx,281.5*2rpx可以解决;</p> 
<h5><a id="1rpx_486"></a>第二种：放一个1rpx的元素占位。(亲测有效)</h5> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hold<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>商品4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.hold</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">width</span><span class="token punctuation">:</span> 1rpx<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果如下，完美的解决了这个问题。</p> 
<p><img src="https://images2.imgbox.com/32/4b/k0Mutddc_o.png" alt=""></p> 
<h3><a id="3__scrollview__510"></a>3 小程序问题: scroll-view 不滑动问题</h3> 
<h4><a id="_513"></a>背景</h4> 
<p>相信很多同学在开发微信小程序的时候都会遇到<code>scroll-view</code>不滑动的情况，造成<code>scroll-view</code>不滑动的原因有会多，横向和竖向不滑动的原因也不同，接下来我会分别从横向和竖向分别介绍造成滑动的原因。</p> 
<p>横向：</p> 
<p><img src="https://images2.imgbox.com/c4/59/pLGcuVlP_o.png" alt=""></p> 
<p>竖向：</p> 
<p><img src="https://images2.imgbox.com/0a/f7/UwK5HiJV_o.png" alt=""></p> 
<h4><a id="_527"></a>解决方案</h4> 
<h5><a id="1__529"></a>1 竖直方向</h5> 
<p>对于竖直方向的滑动，造成原因如下:</p> 
<p>① <code>scroll-view</code> 的 <code>scroll-y</code> 是否为 <code>true</code></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>② <code>scroll-view</code> 必须设置<strong>具体的高度</strong>，如果没有设置高度，或者直接继承父元素高度<code>100%</code>,那么 <code>scroll-view</code>竖直方向将无效。我们必须动态获取<code>scroll-height</code>因为在不同型号手机，都要达到完美的效果</p> 
<p><strong>如何正确获取<code>scroll-view</code>高度</strong></p> 
<p>情况一 <code>scroll-view</code> 在中间的情况：</p> 
<p><img src="https://images2.imgbox.com/a2/1d/ZmmS6IjL_o.png" alt=""></p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> scrollHeight <span class="token operator">=</span> windowHeight <span class="token operator">-</span> scrollTop <span class="token operator">-</span> scrollBottom 
</code></pre> 
<p>情况二 <code>scroll-view</code> 靠底部的情况 ：</p> 
<p><img src="https://images2.imgbox.com/74/09/xUpueNHX_o.png" alt=""></p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> scrollHeight <span class="token operator">=</span> windowHeight <span class="token operator">-</span> scrollTop  
</code></pre> 
<p>③ 检查 scroll-view 是否设置了 <code>overflow-y: auto;</code> 等滑动属性。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scroll_box<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.scroll_box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">height</span><span class="token punctuation">:</span>500px<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2__579"></a>2 水平方向</h5> 
<p>对于水平方向的滑动，造成原因如下:</p> 
<p>① <code>scroll-view</code> 的 <code>scroll-x</code> 是否为 <code>true</code></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>② 不要设置 <code>display:flex;</code> 等情况 ,让子元素设置 <code>display:inline-block</code></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scroll_box<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>  <span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 此处省略很多东西 --&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- .... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.scroll_box</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* display:flex; 不要这么做 */</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.item</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">display</span><span class="token punctuation">:</span>inline-block； <span class="token comment">/* 这么做 */</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>③ <code>scroll-view</code> 设置样式 <code>white-space: nowrap;</code></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name">  <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="4_android_618"></a>4 低版本android手机：原生组件层级问题</h3> 
<h4><a id="_620"></a>背景</h4> 
<p>这个是很久之前做的一个类似地图的项目，在地图组件上，有一个<code>view</code>,在高版本手机上，正常显示，但是在低版本安卓手机上，会出现<code>view</code>只有文字能看见，背景完全被原生组件覆盖，设置层级也没有效果。</p> 
<h4><a id="_624"></a>解决方案</h4> 
<p>后来差了微信文档，才明白原生组件和原生组件的限制。</p> 
<p>小程序中的部分组件是由客户端创建的原生组件，这些组件有：</p> 
<p><strong>camera</strong><br> <strong>canvas</strong><br> <strong>input（仅在focus时表现为原生组件）</strong><br> <strong>live-player</strong><br> <strong>live-pusher</strong><br> <strong>map</strong><br> <strong>textarea</strong><br> <strong>video</strong></p> 
<h5><a id="_639"></a>原生组件的使用限制</h5> 
<p>由于原生组件脱离在 WebView 渲染流程外，因此在使用时有以下限制：</p> 
<p>①原生组件的层级是最高的，所以页面中的其他组件无论设置 z-index 为多少，都无法盖在原生组件上。后插入的原生组件可以覆盖之前的原生组件。</p> 
<p>②原生组件还无法在 picker-view 中使用。基础库 2.4.4 以下版本，原生组件不支持在 scroll-view、swiper、movable-view 中使用。</p> 
<p>③部分CSS样式无法应用于原生组件，例如：无法对原生组件设置 CSS 动画，无法定义原生组件为 position: fixed，不能在父级节点使用 overflow: hidden 来裁剪原生组件的显示区域。</p> 
<p>④原生组件的事件监听不能使用 bind:eventname 的写法，只支持 bindeventname。原生组件也不支持 catch 和 capture 的事件绑定方式。原生组件会遮挡 vConsole 弹出的调试面板。 在工具上，原生组件是用web组件模拟的，因此很多情况并不能很好的还原真机的表现，建议开发者在使用到原生组件时尽量在真机上进行调试。*</p> 
<h5><a id="_652"></a>替代方案</h5> 
<p><strong><code>cover-view</code> 与 <code>cover-image</code></strong><br> 为了解决原生组件层级最高的限制。小程序专门提供了 <code>cover-view</code> 和 <code>cover-image</code> 组件，可以覆盖在部分原生组件上面。这两个组件也是原生组件，但是使用限制与其他原生组件有所不同。</p> 
<h3><a id="5_ios__scrollview_658"></a>5 ios问题: 微信scroll-view内部定位元素抖动问题</h3> 
<h4><a id="_660"></a>背景</h4> 
<p><code>ios</code>环境下，<code>scroll-view</code>标签里面如果有，<code>position:absolute</code>的元素。当<code>scroll-view</code>滑动的过程中，定位的元素会出现抖动的情况。</p> 
<p>🤔分析原因，还是 <code>scroll-view</code> 和 <code>ios</code>兼容性的原因造成的。</p> 
<h4><a id="_666"></a>解决方案</h4> 
<p>针对这个抖动问题，解决方案也是很简单，我们把定位的元素从<code>scroll-view</code>拿出来。就能根本解决这个问题。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scroll_box<span class="token punctuation">"</span></span>  <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>我是定位元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
  
<span class="token punctuation">}</span>
<span class="token selector">.scroll_box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">height</span><span class="token punctuation">:</span>500px<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.current</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
   <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
   <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>改成</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scroll_box<span class="token punctuation">"</span></span>  <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>我是定位元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-css"><span class="token selector">.box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span>relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.scroll_box</span><span class="token punctuation">{<!-- --></span>
    <span class="token property">height</span><span class="token punctuation">:</span>500px<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.current</span><span class="token punctuation">{<!-- --></span>
   <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
   <span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
   <span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6__718"></a>6 微信小程序跳转微信小程序，第二次跳转无效</h3> 
<h4><a id="_720"></a>背景</h4> 
<p>在开发小程序的时候，有一个<strong>小程序跳转另外一个小程序的场景</strong>，第一次的时候没有任何问题，但是当从跳转的目标小程序，返回到当前小程序之后，第二次跳转的时候，发现跳转功能失效了，无法再次跳转。我们的跳转逻辑是写在一个小程序过渡页面的生命周期中的。具体流程图如下所示：</p> 
<p><img src="https://images2.imgbox.com/e2/6f/X1wp8117_o.png" alt=""></p> 
<h4><a id="_726"></a>解决方案</h4> 
<p>先看看跳转小程序方法</p> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">navigateToMiniProgram</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    appId<span class="token punctuation">:</span><span class="token string">'appId'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span><span class="token string">'路径'</span><span class="token punctuation">,</span>
    extraData<span class="token punctuation">:</span><span class="token string">'需要传递给小程序的数据'</span><span class="token punctuation">,</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 成功回调</span>
    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//失败回调</span>
    <span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">//无论成功/失败，都会执行完成方法。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>🤔这到底是为什么呢，这个问题困扰我很久，查阅了相关资料，微信文档都没找到相关的解决方案。但是微信文档有这么一句话，需要用户触发跳转，从 2.3.0 版本开始，若用户未点击小程序页面任意位置，则开发者将无法调用此接口自动跳转至其他小程序<br> 最后发现是第二次跳转的过程中，由于不是用户<strong>主动行为(点击事件等人为主动的行为)</strong>，而是又过渡页面的生命周期执行的跳转小程序，所以微信被判定无效的跳转，就会直接走跳转失败的逻辑,<code>webview</code>里面的点击跳转事件不算是用户的主动行为😂😂。</p> 
<p>所以我们在过渡页进行一判断，如果是第二次跳转，先弹出弹窗，让用户主动点击，触发用户主动行为。然后再跳转小程序。</p> 
<h3><a id="7_taro_scrollview__745"></a>7 taro小程序 scroll-view 下滑，突然置顶问题</h3> 
<h4><a id="_747"></a>背景</h4> 
<p>在用<code>taro-vue</code>搭建小程序的时候，在<code>scroll-view</code>向下滑动的时候，会出现一个诡异情况，就是<code>scroll-view</code>会因为一个兄弟元素的显示隐藏，而突然置顶。</p> 
<p>结构是这样的。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!-- 此处省略很多 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>currentShow<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>当<code>scroll-view</code>滑动的时候，想用变量<code>currentShow</code>控制<code>scroll-view</code>显示隐藏，但是 <code>currentShow</code>一旦改变，就会引起 <code>scroll-view</code> 突然置顶。</p> 
<h4><a id="_764"></a>解决方案</h4> 
<p><code>scroll-view</code>的问题还真是多呀，这个问题曾困扰笔者很久,<code>taro3.0 taro-vue</code>毕竟不够成熟，会有很多想象不到的问题，如果想用<code>taro</code>,我这里推荐<code>taro2.0</code>比较成熟。</p> 
<p>废话不多说，这里介绍两个解决方案。</p> 
<p>1 将当前元素节点放在 <code>scroll-view</code>元素内部。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!-- 此处省略很多 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>currentShow<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>2 将<code>v-if</code>改变成 <code>v-show</code></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!-- 此处省略很多 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>currentShow<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="8_cavans_793"></a>8 小程序cavans问题，生成二维码问题。</h3> 
<h4><a id="_795"></a>问题汇总</h4> 
<h5><a id="canvas__797"></a>canvas 遇到的坑</h5> 
<p><strong>① 关于canvas 宽高以及缩放比问题，绘制的元素变形，画布的高度真得等于cavans标签设置的宽高么？</strong></p> 
<p><strong>② canvas怎么绘制叠在一起的两张图片，并控制层级？</strong></p> 
<p><strong>③ 如何用canvas绘制，多行文本？</strong></p> 
<p><strong>④ 如何根据设计稿，精确还原海报各个元素位置问题。</strong></p> 
<p><strong>⑤ canvas怎么绘制base64的图片？</strong></p> 
<p><strong>⑥ 如何绘制网络的图片,两种canvas画布api，绘制图片有什么区别完成？</strong></p> 
<h5><a id="_812"></a>生成二维码遇到的坑</h5> 
<p><strong>① 如何正确选型生成二维码工具？</strong></p> 
<p><strong>② 生成的二维码，识别不出来怎么办？</strong></p> 
<p><strong>③ 如何绘制二维码上的logo？</strong></p> 
<h4><a id="_822"></a>解决方案</h4> 
<p>这些问题都会在笔者的另一篇文章中找到答案，<strong>文章的传送门是：</strong></p> 
<p><a href="https://juejin.cn/post/6930404573043490830" rel="nofollow">建议收藏」小程序canvas绘制海报全流程</a></p> 
<h2><a id="_828"></a>总结</h2> 
<p>这些问题都是笔者在实际工作中遇到的问题，吐血总结踩坑实录，为了让大家少走弯路。送人玫瑰，手留余香，阅读的朋友可以给笔者<strong>点赞，关注一波</strong> ，陆续更新前端超硬核文章。</p> 
<p>顺便透露一下，接下来会发布一篇，<code>react-keepalive-router</code>系列第二篇文章，完善功能。</p> 
<h3><a id="_836"></a>参考资料</h3> 
<p><a href="https://blog.csdn.net/c5211314963/article/details/80323443">微信小程序1rpx border ios真机显示不全问题分析及解决方案</a></p> 
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html" rel="nofollow">微信官方文档</a></p> 
<p><em><strong>微信扫码关注公众号，定期分享技术文章</strong></em></p> 
<p><img src="https://images2.imgbox.com/b5/df/i3e8lSdw_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b9c924fe101de776008919b5ea3af254/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">webpack 解析ts、tsx语法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/696039e3cad1376889327734258428c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">我的世界java版forge怎么用_我的世界forge怎么安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>