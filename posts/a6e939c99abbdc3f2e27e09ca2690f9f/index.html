<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库系统概论 ---- 第四章 -- 数据库安全性 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库系统概论 ---- 第四章 -- 数据库安全性" />
<meta property="og:description" content="文章目录 4.1 数据库安全性概述4.1.1 数据库的不安全因素 4.2 数据库安全性控制4.2.1 用户身份识别4.2.2 存取控制4.2.3 自主存取控制4.2.4 授权：授权与收回1. GRANT2. 创建用户3. 查看用户权限4. 删除用户5. 查看所有用户的信息6. REVOKE7. 创建数据库模式的权限8. MySQL授予创建权限： 4.2.5 数据库角色1. 角色的创建2. 给角色授权3. 将一个角色授予其他的角色或用户4. 角色权限的收回 4.3 视图机制4.4 审计4.5 数据加密4.6 其他安全保护 4.1 数据库安全性概述 数据库的安全性是指保护数据库以防止不合法使用所造成的数据泄露、更改或破坏。
4.1.1 数据库的不安全因素 非授权用户对数据库的恶意存取和破坏数据库中重要或敏感的数据被泄露安全环境的脆弱性 4.2 数据库安全性控制 与数据库安全性有关的技术，主要包括：
用户身份识别多层存取控制审计视图数据加密… 4.2.1 用户身份识别 用户身份识别是数据库管理系统提供的最外层安全保护措施。
4.2.2 存取控制 存取控制机制主要包括：
定义用户权限
定义用户权限，并将用户权限登记到数据字典中。
用户对某一数据对象的操作权利称为权限。合法权限检查 定义用户权限和合法权限检查机制一起组成了数据库管理系统的存取控制子系统。
C2级数据库管理系统支持自主存取控制。
B1级数据库管理系统支持强制存取控制。
自主存取控制：
用户对于不同的数据库对象有不同的存取权限，不同用户对同一对象也有不同的权限，用户可以将拥有的存取权限转授给其他用户。
自主存取控制非常灵活。强制存取控制：
每一个数据库对象被标以一定的密级，每一个用户也被授予一个级别的许可证，对于任意一个对象，只有具有合法许可证的用户才可以存取。
强制存取控制相对比较严格。 4.2.3 自主存取控制 主要通过SQL的 GRANT 和 REVOKE 来实现。
用户权限由两个要素组成：
数据库对象操作类型 定义一个用户的存取权限就是要定义这个用户可以在哪些数据库对象上进行哪些类型的操作。
在数据库系统中，定义存取权限称为授权。
关系数据库系统中的存取权限：
4.2.4 授权：授权与收回 SQL中使用GRANT向用户授予权限，使用REVOKE向用户收回权限。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a6e939c99abbdc3f2e27e09ca2690f9f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-12T23:40:41+08:00" />
<meta property="article:modified_time" content="2022-06-12T23:40:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库系统概论 ---- 第四章 -- 数据库安全性</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p></p> 
 <div class="toc"> 
  <h4>文章目录</h4> 
  <ul><li><ul><li><a href="#41__3" rel="nofollow">4.1 数据库安全性概述</a></li><li><ul><li><a href="#411__6" rel="nofollow">4.1.1 数据库的不安全因素</a></li></ul> 
    </li><li><a href="#42__11" rel="nofollow">4.2 数据库安全性控制</a></li><li><ul><li><a href="#421__20" rel="nofollow">4.2.1 用户身份识别</a></li><li><a href="#422__23" rel="nofollow">4.2.2 存取控制</a></li><li><a href="#423__42" rel="nofollow">4.2.3 自主存取控制</a></li><li><a href="#424__56" rel="nofollow">4.2.4 授权：授权与收回</a></li><li><ul><li><a href="#1_GRANT_59" rel="nofollow">1. GRANT</a></li><li><a href="#2__74" rel="nofollow">2. 创建用户</a></li><li><a href="#3__86" rel="nofollow">3. 查看用户权限</a></li><li><a href="#4__92" rel="nofollow">4. 删除用户</a></li><li><a href="#5__98" rel="nofollow">5. 查看所有用户的信息</a></li><li><a href="#6_REVOKE_213" rel="nofollow">6. REVOKE</a></li><li><a href="#7__258" rel="nofollow">7. 创建数据库模式的权限</a></li><li><a href="#8_MySQL_270" rel="nofollow">8. MySQL授予创建权限：</a></li></ul> 
     </li><li><a href="#425__297" rel="nofollow">4.2.5 数据库角色</a></li><li><ul><li><a href="#1__308" rel="nofollow">1. 角色的创建</a></li><li><a href="#2__323" rel="nofollow">2. 给角色授权</a></li><li><a href="#3__343" rel="nofollow">3. 将一个角色授予其他的角色或用户</a></li><li><a href="#4__368" rel="nofollow">4. 角色权限的收回</a></li></ul> 
    </li></ul> 
    </li><li><a href="#43__422" rel="nofollow">4.3 视图机制</a></li><li><a href="#44__458" rel="nofollow">4.4 审计</a></li><li><a href="#45__463" rel="nofollow">4.5 数据加密</a></li><li><a href="#46__468" rel="nofollow">4.6 其他安全保护</a></li></ul> 
  </li></ul> 
 </div> 
 <p></p> 
</blockquote> 
<hr> 
<h3><a id="41__3"></a>4.1 数据库安全性概述</h3> 
<p><strong>数据库的安全性</strong>是指<strong>保护数据库以防止不合法使用所造成的数据泄露、更改或破坏</strong>。</p> 
<h4><a id="411__6"></a>4.1.1 数据库的不安全因素</h4> 
<ol><li>非授权用户对数据库的恶意存取和破坏</li><li>数据库中重要或敏感的数据被泄露</li><li>安全环境的脆弱性</li></ol> 
<h3><a id="42__11"></a>4.2 数据库安全性控制</h3> 
<p>与数据库安全性有关的技术，主要包括：</p> 
<ul><li>用户身份识别</li><li>多层存取控制</li><li>审计</li><li>视图</li><li>数据加密</li><li>…</li></ul> 
<h4><a id="421__20"></a>4.2.1 用户身份识别</h4> 
<p>用户身份识别是数据库管理系统提供的最外层安全保护措施。</p> 
<h4><a id="422__23"></a>4.2.2 存取控制</h4> 
<p>存取控制机制主要包括：</p> 
<ul><li>定义用户权限<br> 定义用户权限，并将用户权限登记到数据字典中。<br> 用户对某一数据对象的操作权利称为<strong>权限</strong>。</li><li>合法权限检查</li></ul> 
<p><strong>定义用户权限和合法权限检查机制</strong>一起组成了<strong>数据库管理系统的存取控制子系统</strong>。</p> 
<p><strong>C2</strong>级数据库管理系统支持<strong>自主存取控制</strong>。<br> <strong>B1</strong>级数据库管理系统支持<strong>强制存取控制</strong>。</p> 
<ol><li><strong>自主存取控制</strong>：<br> 用户对于不同的数据库对象有不同的存取权限，不同用户对同一对象也有不同的权限，用户可以将拥有的存取权限转授给其他用户。<br> <strong>自主存取控制非常灵活</strong>。</li><li><strong>强制存取控制</strong>：<br> 每一个数据库对象被标以一定的密级，每一个用户也被授予一个级别的许可证，对于任意一个对象，只有具有合法许可证的用户才可以存取。<br> <strong>强制存取控制相对比较严格</strong>。</li></ol> 
<h4><a id="423__42"></a>4.2.3 自主存取控制</h4> 
<p>主要通过<strong>SQL的 GRANT 和 REVOKE</strong> 来实现。</p> 
<p><strong>用户权限由两个要素组成</strong>：</p> 
<ol><li>数据库对象</li><li>操作类型</li></ol> 
<p>定义一个用户的存取权限就是要定义这个用户可以在哪些数据库对象上进行哪些类型的操作。</p> 
<p>在数据库系统中，<strong>定义存取权限称为授权</strong>。</p> 
<p>关系数据库系统中的存取权限：<br> <img src="https://images2.imgbox.com/fa/05/en6PmxN6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="424__56"></a>4.2.4 授权：授权与收回</h4> 
<p>SQL中使用<strong>GRANT</strong>向用户<strong>授予</strong>权限，使用<strong>REVOKE</strong>向用户<strong>收回</strong>权限。</p> 
<h5><a id="1_GRANT_59"></a>1. GRANT</h5> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> 权限 <span class="token punctuation">[</span><span class="token punctuation">,</span>权限<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">ON</span> 对象类型 对象名 <span class="token punctuation">[</span><span class="token punctuation">,</span>对象类型 对象名 <span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">TO</span> 用户 <span class="token punctuation">[</span><span class="token punctuation">,</span> 用户<span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>语义：将指定操作对象的指定操作权限授予指定的用户</li><li>发出GRANt语句的可以是数据库管理员，也可以是数据库对象的创建者，还可以是拥有该权限的用户</li><li>接受权限的用户可以是一个或多个具体用户</li><li>指定了 <strong>WITH GRANT OPTION</strong> 子句，获得某种权限的用户<strong>可以把权限授予其他用户</strong>，没有指定 WITH GRANT OPTION 字句，只能使用该权限，不能转授权限。</li><li>具有 WITH GRANT OPTION 的用户可以把相应的权限或其子集转授给其他用户，但是<strong>不允许循环授权</strong>。<br> <img src="https://images2.imgbox.com/36/76/J7J2AwEL_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="2__74"></a>2. 创建用户</h5> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'host'</span> 
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>username：用户名</li><li>host：指定用户可以登录MySQL数据库的主机地址<br> localhost代表本机的地址<br> % 为所有主机均可登录数据库</li><li>password：用户登录数据库密码</li></ul> 
<h5><a id="3__86"></a>3. 查看用户权限</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'username'</span><span class="token variable">@'host'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="4__92"></a>4. 删除用户</h5> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'host'</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="5__98"></a>5. 查看所有用户的信息</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> 
<p>创建用户：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U1'</span><span class="token variable">@'localhost'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U4'</span><span class="token variable">@'localhost'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> Host<span class="token punctuation">,</span> <span class="token keyword">User</span>
<span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/94/d3/89gp8HMH_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>[例4.1]把查询Student表的权限授给用户 U1。</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student
<span class="token keyword">TO</span> <span class="token string">'U1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ef/f9/YqmcaRhm_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>usage 官方解释："无权限"的同义词</p> 
</blockquote> 
<p>[例4.2]把对 Student表和 Course表的全部操作权限授予用户U2和U3。</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student
<span class="token keyword">TO</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span><span class="token punctuation">,</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> course
<span class="token keyword">TO</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span><span class="token punctuation">,</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>mysql一次赋予多个表的权限会报错<br> 其中，PRIVILEGES 可以省略</p> 
</blockquote> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/70/1a/aDDSgc4E_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>[例4.3]把对表SC的查询权限赋予所有用户</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> sc
<span class="token keyword">TO</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>mysql不支持</p> 
</blockquote> 
<p>[例4.4] 把查询Student表和修改学生学号的权限授给用户U4。</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student
<span class="token keyword">TO</span> <span class="token string">'U4'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U4'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ed/b0/7pOljO8i_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>[例4.5]把对表SC的 INSERT权限授予U5用户，并允许将此权限再授予其他</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">INSERT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> sc
<span class="token keyword">TO</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span>
<span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span> <span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/8a/07/u9VBslEd_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>由U5用户发上述GRANT命令给其他用户,U5可以将此权限授予U6</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'U6'</span><span class="token variable">@'localhost'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p>使用U5登录数据库</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/61/6c/aG7w9E1g_o.png" alt="在这里插入图片描述"><br> 由于U5前面只被授予了sc表插入的权限，所以只能看见mydb1下sc表<br> <img src="https://images2.imgbox.com/31/a9/1goPYzWR_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">INSERT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> sc
<span class="token keyword">TO</span> <span class="token string">'U6'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p>在root用户下查看U6的权限：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U6'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ec/f2/1Lhdi7Yr_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>由于U5没有给U6转授权限的权限，所以U6只能使用权限，不能授予其他用户权限。</p> 
</blockquote> 
<h5><a id="6_REVOKE_213"></a>6. REVOKE</h5> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> 权限 <span class="token punctuation">[</span><span class="token punctuation">,</span>权限<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">ON</span> 对象类型 对象名 <span class="token punctuation">[</span><span class="token punctuation">,</span>对象类型 对象名 <span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> 用户 <span class="token punctuation">[</span><span class="token punctuation">,</span> 用户<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span> <span class="token operator">|</span> <span class="token keyword">RESTRICT</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>[例4.8]把用户U4修改学生学号的权限收回。</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">UPDATE</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> student
<span class="token keyword">FROM</span> <span class="token string">'U4'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U4'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/c3/71/gjl9nHZI_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>[例4.9]收回所有用户对表SC的查询权限。</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> sc
<span class="token keyword">FROM</span> <span class="token keyword">PUBLIC</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>mysql不支持</p> 
</blockquote> 
<p>[例4.10]把用户U5对SC表的INSERT权限收回。</p> 
<blockquote> 
 <p>级联收回U6，mysql不支持cascade | restrict</p> 
</blockquote> 
<blockquote> 
 <p>mysql默认不会级联收回</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">INSERT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> sc
<span class="token keyword">FROM</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U6'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/7a/dc/6WbaVTWu_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/19/4f/bkvKjN64_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>用户可以 <strong>“自主”地决定</strong> 将数据的存取权限授予何人、决定是否也将“授权”的权限授予别人。因此称这样的存取控制是 <strong>自主存取控制</strong>。</p> 
<h5><a id="7__258"></a>7. 创建数据库模式的权限</h5> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> username <span class="token punctuation">[</span><span class="token keyword">WITH</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>DBA <span class="token operator">|</span> RESOURCE <span class="token operator">|</span> <span class="token keyword">CONNECT</span><span class="token punctuation">]</span>
</code></pre> 
<blockquote> 
 <p>mysql不支持</p> 
</blockquote> 
<ul><li>新创建的数据库用户有三种权限: CONNECT、 RESOURCE和DBA。</li><li>默认该用户拥有CONNECT权限。拥有CONNECT权限的用户不能创建新用户，不能创建模式，也不能创建基本表，只能登录数据库。</li><li>拥有RESOURCE权限的用户能创建基本表和视图，成为所创建对象的属主，但不能创建模式，不能创建新的用户。</li><li>拥有DBA权限的用户是系统中的超级用户，可以创建新的用户、创建模式、创建基本表和视图等: DBA拥有对所有数据库对象的存取权限，还可以把这些权限授予一般用户。</li></ul> 
<h5><a id="8_MySQL_270"></a>8. MySQL授予创建权限：</h5> 
<ul><li><strong>创建数据库权限，但是无删除权限</strong>：</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">CREATE</span>
<span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">TO</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U2'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/28/20/1lqd9F5z_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>第一个 * 表示数据库，第二个 * 表示表格</p> 
</blockquote> 
<ul><li>授予用户最高权限：</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span>
<span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">TO</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/40/7a/rXdKi0kD_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h4><a id="425__297"></a>4.2.5 数据库角色</h4> 
<blockquote> 
 <p>mysql8.0 以上才支持角色<br> mysql用户被授予角色还要激活(授予角色的授予者进行激活)<br> `set default role all to 用户</p> 
</blockquote> 
<p><strong>数据库角色</strong>是被命名的一组与数据库操作相关的权限，<strong>角色是权限的集合</strong>。</p> 
<p>可以<strong>为一组具有相同权限的用户创建一个角色</strong>，使用角色来管理数据库权限可以简化授权的过程。</p> 
<p>在SQL中首先<strong>用CREATE ROLE语句创建角色</strong>，然后<strong>用GRANT语句给角色授权</strong>，<strong>用REVOKE语句收回授予角色的权限</strong>。</p> 
<h5><a id="1__308"></a>1. 角色的创建</h5> 
<p>创建角色的SQL语句格式是：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE 角色名<span class="token punctuation">;</span>
</code></pre> 
<p><strong>刚刚创建的角色是空的</strong>，没有任何内容。</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE r1<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> r1<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/2e/d0/1uesHw0j_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h5><a id="2__323"></a>2. 给角色授权</h5> 
<p>数据库管理员和用户可以利用GRANT语句将权限授予某一个或几个角色。</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> 权限
<span class="token keyword">ON</span> 对象类型 对象名
<span class="token keyword">TO</span> 角色<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE r2<span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> mydb1<span class="token punctuation">.</span>sc
<span class="token keyword">TO</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> r2<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/a6/84/FXr3WzA7_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h5><a id="3__343"></a>3. 将一个角色授予其他的角色或用户</h5> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> 角色
<span class="token keyword">TO</span> 角色 <span class="token operator">|</span> 用户
<span class="token keyword">WITH</span> ADMIN <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>该语句把角色授予某用户，或授予另一个角色。</li><li>一个角色所拥有的权限就是授予它的全部角色所包含的权限的总和。</li><li>授予者或者是角色的创建者，或者是拥有在这个角色上的ADMIN OPTION。</li><li>如果指定了<strong>WITH ADMIN OPTION</strong>子句，则获得某种权限的角色或用户还<strong>可以把这种权限再授予其他的角色</strong>。</li><li>一个角色包含的权限包括直接授予这个角色的全部权限加上其他角色授予这个角色的全部权限。</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> r1
<span class="token keyword">TO</span> <span class="token string">'U1'</span><span class="token variable">@'localhost'</span>
<span class="token keyword">WITH</span> ADMIN <span class="token keyword">OPTION</span> <span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'U1'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/d2/c6/QrrlWEfi_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>mysql8.0 以上才支持角色<br> mysql用户被授予角色还要激活(授予角色的授予者进行激活)<br> `set default role all to 用户</p> 
</blockquote> 
<h5><a id="4__368"></a>4. 角色权限的收回</h5> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> 权限 <span class="token punctuation">[</span><span class="token punctuation">,</span> 权限<span class="token punctuation">]</span>
<span class="token keyword">ON</span> 对象类型 对象名
<span class="token keyword">FROM</span> 角色 <span class="token punctuation">[</span><span class="token punctuation">,</span> 角色<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>用户可以收回角色的权限，从而修改角色拥有的权限。</p> 
<p>REVOKE 的执行者是角色的创建者或拥有这个角色上ADMIN OPTION</p> 
<p>例：通过角色来实现一组权限授予一个用户<br> 创建角色role1</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> ROLE role1<span class="token punctuation">;</span>
</code></pre> 
<p>给角色role1授予Student表的查询、更新、插入权限</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student
<span class="token keyword">TO</span> role1<span class="token punctuation">;</span>
</code></pre> 
<p>将role1授予U3，U5</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> role1
<span class="token keyword">TO</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">,</span> <span class="token string">'U5'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<p>收回U3的role1角色</p> 
<pre><code class="prism language-sql"><span class="token keyword">REVOKE</span> role1
<span class="token keyword">FROM</span> <span class="token string">'U3'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/a8/72/AZoCq9Jl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b0/2a/tn4UgqAK_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>修改role1的权限</p> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">DELETE</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student
<span class="token keyword">TO</span> role1<span class="token punctuation">;</span>

<span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> student
<span class="token keyword">FROM</span> role1<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> role1<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/3b/a3/xnYQkgO1_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h3><a id="43__422"></a>4.3 视图机制</h3> 
<p>可以为不同的用户定义不同的视图，把数据对象限制在一定的范围内。</p> 
<p>也就是说，<strong>通过视图机制把要保密的数据对无权存取的用户隐藏起来</strong>，从而自动对数据提供一定程度的安全保护。</p> 
<p>视图机制间接地实现支持存取谓词的用户权限定义。</p> 
<p>[例4.14] 建立计算机系学生的视图，把对该视图的SELECT 权限授予王平，把该视图上的所有操作权限授予张明。</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> CS_stu
<span class="token keyword">AS</span>
    <span class="token keyword">SELECT</span> <span class="token operator">*</span>
    <span class="token keyword">FROM</span> student
    <span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span> <span class="token string">'CS'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'王平'</span><span class="token variable">@'%'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'张明'</span><span class="token variable">@'%'</span>
IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span>
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> CS_stu
<span class="token keyword">TO</span> <span class="token string">'王平'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span>
<span class="token keyword">ON</span> CS_stu
<span class="token keyword">TO</span> <span class="token string">'张明'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'王平'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">'张明'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/b9/c2/GA4UYDP5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/80/b1/gMpd28VX_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h3><a id="44__458"></a>4.4 审计</h3> 
<p><strong>审计功能</strong>把用户对数据库的所有操作自动记录下来放入审计日志中。</p> 
<p>审计员可以利用审计日志监控数据库中的各种行为，重现导致数据库现有状况的一系列事件，找出非法存取数据的人、时间和内容等。</p> 
<h3><a id="45__463"></a>4.5 数据加密</h3> 
<p>数据加密主要包括：</p> 
<ul><li>存储加密</li><li>传输加密</li></ul> 
<h3><a id="46__468"></a>4.6 其他安全保护</h3> 
<ul><li>推理控制</li><li>隐蔽信道</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1da2e6436f9304bdfe4abff6b70d0633/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">线性规划简单理解（LP问题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/371c3d0289fe96c0ab36f038ebba073c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决：由于找不到MSVCP140.dll，无法继续执行代码。重新安装程序可能会解决次问题。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>