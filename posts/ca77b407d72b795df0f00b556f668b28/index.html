<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>详解package.json和package-lock - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="详解package.json和package-lock" />
<meta property="og:description" content="详解package.json和package-lock package.json和package-lock.json作用 首先要明确一点，package.json不会自动生成，需要我们使用 npm init 创建。package-lock.json是自动生成的，我们使用 npm install 安装包后就会自动生成。
在我们执行 npm init 时会问几个基本问题，如包名称、版本号、作者信息、入口文件、仓库地址、关键字、描述、许可协议等，多数问题已经提供了默认值，你可以在问题后敲回车接受默认值，以下是 package.json常见字段解析 和 package-lock.json的dependencies：（通常我们不会关注package-lock.json的内容，所以这里也就不做赘述了，这里只讲一下其中 dependencies 属性）
/* package.json常见字段解析 */ { &#34;name&#34;: &#34;npm&#34;, // 项目名称 &#34;version&#34;: &#34;1.0.0&#34;, // 该项目的版本 建议遵从semver版本规范 &#34;description&#34;: &#34;&#34;, // 项目说明 &#34;main&#34;: &#34;index.js&#34;, // 入口文件 /** * 脚本配置文件 * 配置后可以通过 npm run 执行该脚本脚本文件 * 对于常用的 start、test、stop、restart 等可以省略掉run，如：npm start; */ &#34;scripts&#34;: { &#34;test&#34;: &#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34; }, &#34;author&#34;: &#34;&#34;, // 作者名 /** * 开源协议 * 字段用于指定软件的开源协议，开源协议表述了其他人获得代码后拥有的权利，可以对代码进行何种操作，何种操作又是被禁止的。常见的协议如下： * MIT ：只要用户在项目副本中包含了版权声明和许可声明，他们就可以拿你的代码做任何想做的事情，你也无需承担任何责任。 * Apache ：类似于 MIT ，同时还包含了贡献者向用户提供专利授权相关的条款。 * GPL ：修改项目代码的用户再次分发源码或二进制代码时，必须公布他的相关修改。 */ &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ca77b407d72b795df0f00b556f668b28/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-09T11:28:33+08:00" />
<meta property="article:modified_time" content="2023-03-09T11:28:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">详解package.json和package-lock</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">详解package.json和package-lock</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">package.json和package-lock.json作用</span></h3> 
 <p style="text-align:left;">首先要明确一点，package.json不会自动生成，需要我们使用 npm init 创建。package-lock.json是自动生成的，我们使用 npm install 安装包后就会自动生成。</p> 
 <p style="text-align:left;">在我们执行 npm init 时会问几个基本问题，如包名称、版本号、作者信息、入口文件、仓库地址、关键字、描述、许可协议等，多数问题已经提供了默认值，你可以在问题后敲回车接受默认值，以下是 package.json常见字段解析 和 package-lock.json的dependencies：（通常我们不会关注package-lock.json的内容，所以这里也就不做赘述了，这里只讲一下其中 dependencies 属性）</p> 
 <pre class="kdocs-javascript"><code class="language-javascript">/* package.json常见字段解析 */
{
  "name": "npm", // 项目名称
  "version": "1.0.0", // 该项目的版本 建议遵从semver版本规范
  "description": "", // 项目说明
  "main": "index.js", // 入口文件
  /**
   * 脚本配置文件 
   * 配置后可以通过 npm run 执行该脚本脚本文件
   * 对于常用的 start、test、stop、restart 等可以省略掉run，如：npm start;
  */
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "", // 作者名
  /**
   * 开源协议
   * 字段用于指定软件的开源协议，开源协议表述了其他人获得代码后拥有的权利，可以对代码进行何种操作，何种操作又是被禁止的。常见的协议如下：
   * MIT ：只要用户在项目副本中包含了版权声明和许可声明，他们就可以拿你的代码做任何想做的事情，你也无需承担任何责任。
   * Apache ：类似于 MIT ，同时还包含了贡献者向用户提供专利授权相关的条款。
   * GPL ：修改项目代码的用户再次分发源码或二进制代码时，必须公布他的相关修改。
  */
  "license": "ISC",
  /**
   * 开发生成环境依赖
   * 通常是我们项目实际开发用到的一些库模块vue、vuex、vue-router、react、react-dom、axios等等;
  */
  "dependencies": {
    "axios": "^1.2.1", // package的版本
  },
  /**
   * 开发环境依赖
   * 一些包在生成环境是不需要的,比如webpack、babel等
   * 我们可以通过 npm i package -D 只往开发依赖 devDependencies 中添加版本而不往 dependencies 开发生产依赖中添加
  */
  "devDependencies": {},
  /**
   * 对等依赖
   * 也就是你依赖的一个包，它必须是以另外一个宿主包为前提的
   * 比如element-plus是依赖于vue3的， ant design是依赖于react、react-dom
  */
  "peerDependencies": {}
}

/* package-lock.json的dependencies */
"dependencies": { // 与package.json类似 就是开发生产依赖
  "axios": { // packageName
    "version": "1.2.1", // 版本
    // 该包远程仓库的地址
    "resolved": "https://registry.npmjs.org/axios/-/axios-1.2.1.tgz", 
    // 本地缓存地址 npm可以解析为本地路径 下文中的查找缓存就会通过这个字段w
    "integrity": "sha512-I88cFiGu9ryt/tfVEi4kX2SITsvDddTajXTOFmt2uK1ZVA8LytjtdeyefdQWEf5PU8w+4SSJDoYnggflB5tW4A==",
    "requires": { // 当前包依赖的其他包及其版本
      "follow-redirects": "^1.15.0",
      "form-data": "^4.0.0",
      "proxy-from-env": "^1.1.0"
    }
  }
}</code></pre> 
 <p style="text-align:left;">通过以上解析后这里给大家总结一下：</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>package.json的作用是记录当前项目所依赖模块的版本信息，更新模块时锁定模块的大版本号（版本号的第一位），默认为大版本也可以npm i xxx@x.x.x锁定版本，还有npm run的脚本，项目的基本信息等</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>package-lock.json文件会保存 node_modules 中所有包的信息（详细版本、下载地址、缓存地址）等，重新 npm install 的时候会通过记录的信息提示安装速度，如通过 integrity 查找本地缓存而不使用远程仓库</p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">package-lock.json什么时候会变</span></h3> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>修改依赖位置，比如将部分包的位置从 dependencies 移动到 devDependencies 这种操作，虽然包未变，但是也会影响 package-lock.json，会将部分包的 dev 字段设置为 true。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>安装源 registry 不同，执行 npm install 时也会修改 package-lock.json。因为他是会记录我们的依赖包地址的。</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>使用 npm install 添加或 npm uninstall 移除包的时</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>更新某个包的版本的时</p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">那些情况下package.json和package-lock.json里面的版本号一致</span></h3> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>当package.json里面不再使用最优版本，而是一个特定有效版本，也就是版本号前不带修饰符</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>通过 npm install xxx@x.x.x 固定版本号安装 </p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>package.json的package 与 package-lock.json 的版本相同</p></li></ul> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">semver版本规范</span></h3> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>npm的包通常需要遵从semver版本规范:</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>semver: <a class="kdocs-link" style="color:#0A6CFF;" href="https://semver.org/lang/zh-CN/" rel="nofollow noopener noreferrer" target="_blank">https://semver.org/lang/zh-CN/</a></p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>npm semver: <a class="kdocs-link" style="color:#0A6CFF;" href="https://docs.npmjs.com/misc/semver" rel="nofollow noopener noreferrer" target="_blank">https://docs.npmjs.com/misc/semver</a> </p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>semver版本规范是X.Y.Z:</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>X主版本号 (major) :当你做了不兼容的API修改(可能不兼容之前的版本)； </p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>Y次版本号 (minor) :当你做了向下兼容的功能性新增(新功能增加，俱是兼容之前的版本)；</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>Z修订号 (patch):当你做了向下兼容的问题修正(没有新功能，修复了之前版本的bug) ；</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;text-align:left;"><p>^和~的区别:</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>x.y.z:表示一个明确的版本号；</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>^x.y.z:表示x是保持不变的，y和z永远安装最新的版本；</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;text-align:left;"><p>~x.y.z:表示x和y保持不变的，z永远安装最新的版本；</p></li></ul> 
 <p style="text-align:left;"><span class="kdocs-color" style="background-color:#FBF5B3;">其他包管理工具也会生成类似package-lock的文件如：yarn为：yarn.lock、pnpm为：pnpm-lock.yaml，但其实他们的作用都是大同小异的</span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5519bda536935e8377a107b2e29fe677/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java 开发打飞机小游戏（附完整源码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/010730aca6a0c6eaf4bdb42ae6e0dfab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小徐科研日记——深度学习视频分类方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>