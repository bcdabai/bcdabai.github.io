<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Idea &#43; Springboot 下  java 对Redis的基本操作。 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Idea &#43; Springboot 下  java 对Redis的基本操作。" />
<meta property="og:description" content="一、引入redis pom依赖，代码如下：
&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;version&gt;2.0.0.RELEASE&lt;/version&gt; &lt;/dependency&gt; 二、建立config包，在包下建立RedisConfig类，代码如下：
@Configuration @EnableCaching public class RedisConfig { @Bean public RedisTemplate&lt;Serializable,Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory){ RedisTemplate&lt;Serializable,Object&gt; template = new RedisTemplate&lt;&gt;(); template.setConnectionFactory(redisConnectionFactory); template.afterPropertiesSet(); template.setKeySerializer(new StringRedisSerializer()); template.setValueSerializer(new ObjectRadisSerializer()); return template; } } 注意：
1、@Configuration和@EnableCaching注解，声明是springboot配置类，和springboot启动缓存的，@Bean是声明此方法是一个依赖。
2、而RedisTemplate&lt;Serializable,Object&gt; 是用来操作redis 的一个类，RedisConnectionFactory是用来连接redis的一个类，Serializable是可序列化对象，因为redis存储是以二进制形式存储的。
3、template.afterPropertiesSet()是表面在application.properties(在下面会给出)配置文件加载完成后再执行下面的程序。
三、application.properties配置文件代码如下：
spring.redis.database=0 spring.redis.host=127.0.0.1 spring.redis.port=6379 spring.redis.password= spring.redis.timeout=2000ms 注意这是redis数据库的一些配置，在执行上面方法之前先执行此配置连接到redis数据库。
四、在util包下建立一个序列化POJO对象的类ObjectRedisSerializer，代码如下：
public class ObjectRadisSerializer implements RedisSerializer&lt;Object&gt; { /** * ObjectRadisSerializer序列化VO对象的类，要实现RedisSerializer接口 * */ /** * 新建序列化和反序列化对象 * */ private Converter&lt;Object,byte[]&gt; serializer = new SerializingConverter(); private Converter&lt;byte[],Object&gt; deSerializer = new DeserializingConverter(); /*** * 定义一个字节空数组 */ private static final byte[] EMPTY_ARRAY = new byte[0]; /** * 下面为序列化方法 * @param obj * @return * @throws SerializationException */ @Override public byte[] serialize(Object obj) throws SerializationException { byte[] byteArray = null; if (obj == null){ byteArray = EMPTY_ARRAY; }else { try { byteArray = serializer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/54cbf6a41c560cf8c177cbbeb4b82f19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-23T19:17:15+08:00" />
<meta property="article:modified_time" content="2018-07-23T19:17:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Idea &#43; Springboot 下  java 对Redis的基本操作。</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、引入redis pom依赖，代码如下：</p> 
<pre class="has"><code>&lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p>二、建立config包，在包下建立RedisConfig类，代码如下：</p> 
<pre class="has"><code class="language-java">@Configuration
@EnableCaching
public class RedisConfig {

    @Bean
    public RedisTemplate&lt;Serializable,Object&gt;  redisTemplate(RedisConnectionFactory redisConnectionFactory){

        RedisTemplate&lt;Serializable,Object&gt; template = new RedisTemplate&lt;&gt;();
        template.setConnectionFactory(redisConnectionFactory);
        template.afterPropertiesSet();
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new ObjectRadisSerializer());
        return template;

    }
}</code></pre> 
<p>注意：</p> 
<p>1、@Configuration和@EnableCaching注解，声明是springboot配置类，和springboot启动缓存的，@Bean是声明此方法是一个依赖。</p> 
<p>2、而RedisTemplate&lt;Serializable,Object&gt; 是用来操作redis 的一个类，RedisConnectionFactory是用来连接redis的一个类，Serializable是可序列化对象，因为redis存储是以二进制形式存储的。</p> 
<p>3、template.afterPropertiesSet()是表面在application.properties(在下面会给出)配置文件加载完成后再执行下面的程序。</p> 
<p> </p> 
<p>三、application.properties配置文件代码如下：</p> 
<pre class="has"><code class="language-bash">spring.redis.database=0
spring.redis.host=127.0.0.1
spring.redis.port=6379
spring.redis.password=
spring.redis.timeout=2000ms</code></pre> 
<p>注意这是redis数据库的一些配置，在执行上面方法之前先执行此配置连接到redis数据库。</p> 
<p>四、在util包下建立一个序列化POJO对象的类ObjectRedisSerializer，代码如下：</p> 
<pre class="has"><code class="language-java">public class ObjectRadisSerializer implements RedisSerializer&lt;Object&gt; {

    /**
     * ObjectRadisSerializer序列化VO对象的类，要实现RedisSerializer接口
     * */
    /**
    * 新建序列化和反序列化对象
    * */
    private Converter&lt;Object,byte[]&gt; serializer = new SerializingConverter();
    private Converter&lt;byte[],Object&gt; deSerializer = new DeserializingConverter();
    /***
     * 定义一个字节空数组
     */
    private static final byte[] EMPTY_ARRAY = new byte[0];

    /**
     * 下面为序列化方法
     * @param obj
     * @return
     * @throws SerializationException
     */
    @Override
    public byte[] serialize(Object obj) throws SerializationException {

        byte[] byteArray = null;
        if (obj == null){
            byteArray = EMPTY_ARRAY;
        }else {
            try {
                byteArray = serializer.convert(obj);
            } catch (Exception e){
                System.out.print("==============&gt;redis序列化失败=======");
                byteArray = EMPTY_ARRAY;
            }

        }

        return byteArray;
    }

    /**
     * 这是反序列化的方法
     * @param datas
     * @return
     * @throws SerializationException
     */
    @Override
    public Object deserialize(byte[] datas) throws SerializationException {
        Object object = null;
        if (datas == null || datas.length ==0){
            System.out.print("=================&gt;redis待反序列化对象为空");
        }else {
            object = deSerializer.convert(datas);
        }
        return object;
    }
}
</code></pre> 
<p>注意：要实现RedisSerializer接口，这是redis序列化的一个类。</p> 
<p>四、建立POJO对象，此处用User，代码如下：</p> 
<pre class="has"><code class="language-java">public class User implements Serializable {

    private  String id;
    private String name;
    private String password;
    private String nickname;
    private String gender;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getNickname() {
        return nickname;
    }

    public void setNickname(String nickname) {
        this.nickname = nickname;
    }

    public String getGender() {
        return gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }
}</code></pre> 
<p>五、测试，代码如下：</p> 
<pre class="has"><code class="language-java"> /**
     * 定义操作redis的对象redisTemplate，序列化设置值时要用set,取值要有get
     */
    @Autowired
    private RedisTemplate&lt;Serializable,Object&gt; redisTemplate;

    @RequestMapping("/setPOJO")
    public  String setPOJO(){
        User user = new User();
        user.setName("cjx");
        user.setPassword("123");
        user.setNickname("lhy");
        user.setGender("16");
        user.setId("001");
        redisTemplate.opsForValue().set("love",user);
        return "设置成功";
    }
    @RequestMapping("/getPOJO")
    public Object getPOJO(){
        if (!redisTemplate.hasKey("love")){
            return null;
        }else {
            return  redisTemplate.opsForValue().get("love");
        }
    }</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c4e9c1aa19edf9ac1e403ed2a3cb4d4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">对比两张表的数据并筛选出数据不同的</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/33062c4120a340b608e186498a2cea1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在电脑上看微信阅读</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>