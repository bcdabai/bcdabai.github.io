<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>分布式系统架构常识：CAP理论。 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="分布式系统架构常识：CAP理论。" />
<meta property="og:description" content="什么是CAP理论？ 2000年7月，加州大学伯克利分校的Eric Brewer教授在ACM PODC会议上提出CAP猜想。2年后麻省理工学院的Seth Gilbert和NancyLynch从理论上证明了CAP，之后CAP理论正式成为分布式计算领域的公认定理。
CAP理论是由下面三个概念组成的，且在分布式系统中三者不能兼得，只能同时满足两种条件。
一致性（C）
All nodes see the same data at the same time
所有数据库集群节点在同一时间点看到的数据完全一致，即所有节点能实时保持数据同步。
可用性（A）
Reads and writes always succeed
读写操作永远是成功的。即服务一直是可用的，即使集群一部分节点故障，集群整体还能正常响应客户端的读写请求。
分区容错性（P）
The system continues to operate despite arbitrary message loss or failure of part of the system
尽管系统中有任意的信息丢失或故障，系统仍在继续运行。以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。
CAP权衡使用 1、保留CA，放弃P
如果想避免分区容错性问题的发生，一种做法是将所有的数据（与事务相关的）都放在一台机器上。虽然无法100%保证系统不会出错，但不会碰到由分区带来的负面效果。当然这个选择会严重的影响系统的扩展性。
作为一个分布式系统，放弃P，即相当于放弃了分布式，一旦并发性很高，单机服务根本不能承受压力。
像很多银行服务，确确实实就是舍弃了P，只用单台小型机&#43;ORACLE保证服务可用性。
2、保留CP，放弃A
相对于放弃“分区容错性“来说，其反面就是放弃可用性。一旦遇到分区容错故障，那么受到影响的服务需要等待一定的时间，因此在等待期间系统无法对外提供服务。
作为分布式系统，有分区服务发生问题很有可能，如果因为某些服务不能用，导致整个服务都不能用，这个根本不是好的分布式系统。
3、保留AP，舍弃C
这里所说的放弃一致性，并不是完全放弃数据一致性，而是放弃数据的强一致性。即放弃了同一时刻的数据一致性，而保留数据的最终一致性。
以网络购物为例，对只剩下一件库存的商品，如果同时接受到了两份订单，那么较晚的订单将被告知商品告罄。
通常情况下，很多分布式服务系统都是采用该方案，保证可用性性，分布式服务，因为某些分区服务发生问题，先容忍，最终通过一些折中的方法达到最终数据一致性。
推荐阅读 去BAT面试完的Mysql面试题总结（55道，带完整答案）
阿里高级Java面试题（首发，70道，带详细答案）
2017派卧底去阿里、京东、美团、滴滴带回来的面试题及答案
Spring面试题（70道，史上最全）
通往大神之路，百度Java面试题前200页。
分享Java干货，高并发编程，热门技术教程，微服务及分布式技术，架构设计，区块链技术，人工智能，大数据，Java面试题，以及前沿热门资讯等。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dcd39ee8bee2fe35bde460309dda6368/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-20T08:53:00+08:00" />
<meta property="article:modified_time" content="2017-12-20T08:53:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">分布式系统架构常识：CAP理论。</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="content-detail markdown-body"> 
 <div class="show-content-free"> 
  <div class="image-package"> 
   <div class="image-container"> 
    <div class="image-container-fill"></div> 
    <div class="image-view"></div> 
   </div> 
   <div class="image-caption"></div> 
  </div> 
  <h5>什么是CAP理论？</h5> 
  <p>2000年7月，加州大学伯克利分校的Eric Brewer教授在ACM PODC会议上提出CAP猜想。2年后麻省理工学院的Seth Gilbert和NancyLynch从理论上证明了CAP，之后CAP理论正式成为分布式计算领域的公认定理。</p> 
  <p>CAP理论是由下面三个概念组成的，且在分布式系统中三者不能兼得，只能同时满足两种条件。</p> 
  <p><strong>一致性（C）</strong></p> 
  <blockquote> 
   <p>All nodes see the same data at the same time</p> 
  </blockquote> 
  <p>所有数据库集群节点在同一时间点看到的数据完全一致，即所有节点能实时保持数据同步。</p> 
  <p><strong>可用性（A）</strong></p> 
  <blockquote> 
   <p>Reads and writes always succeed</p> 
  </blockquote> 
  <p>读写操作永远是成功的。即服务一直是可用的，即使集群一部分节点故障，集群整体还能正常响应客户端的读写请求。</p> 
  <p><strong>分区容错性（P）</strong></p> 
  <blockquote> 
   <p>The system continues to operate despite arbitrary message loss or failure of part of the system</p> 
  </blockquote> 
  <p>尽管系统中有任意的信息丢失或故障，系统仍在继续运行。以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。</p> 
  <h5>CAP权衡使用</h5> 
  <p><strong>1、保留CA，放弃P</strong></p> 
  <p>如果想避免分区容错性问题的发生，一种做法是将所有的数据（与事务相关的）都放在一台机器上。虽然无法100%保证系统不会出错，但不会碰到由分区带来的负面效果。当然这个选择会严重的影响系统的扩展性。</p> 
  <p>作为一个分布式系统，放弃P，即相当于放弃了分布式，一旦并发性很高，单机服务根本不能承受压力。</p> 
  <p>像很多银行服务，确确实实就是舍弃了P，只用单台小型机+ORACLE保证服务可用性。</p> 
  <p><strong>2、保留CP，放弃A</strong></p> 
  <p>相对于放弃“分区容错性“来说，其反面就是放弃可用性。一旦遇到分区容错故障，那么受到影响的服务需要等待一定的时间，因此在等待期间系统无法对外提供服务。</p> 
  <p>作为分布式系统，有分区服务发生问题很有可能，如果因为某些服务不能用，导致整个服务都不能用，这个根本不是好的分布式系统。</p> 
  <p><strong>3、保留AP，舍弃C</strong></p> 
  <p>这里所说的放弃一致性，并不是完全放弃数据一致性，而是放弃数据的强一致性。即放弃了同一时刻的数据一致性，而保留数据的最终一致性。</p> 
  <p>以网络购物为例，对只剩下一件库存的商品，如果同时接受到了两份订单，那么较晚的订单将被告知商品告罄。</p> 
  <p>通常情况下，很多分布式服务系统都是采用该方案，保证可用性性，分布式服务，因为某些分区服务发生问题，先容忍，最终通过一些折中的方法达到最终数据一致性。</p> 
  <h5><strong>推荐阅读</strong></h5> 
  <hr> 
  <p><a href="http://mp.weixin.qq.com/s/5H22f_XirkbYMfIUfRuyGA" rel="nofollow">去BAT面试完的Mysql面试题总结（55道，带完整答案）</a></p> 
  <p><a href="http://mp.weixin.qq.com/s/Y2lxsucvkWsXbmOKPPfFjQ" rel="nofollow">阿里高级Java面试题（首发，70道，带详细答案）</a></p> 
  <p><a href="http://mp.weixin.qq.com/s/TarTEBF3NTGbMx6XzN8pSA" rel="nofollow">2017派卧底去阿里、京东、美团、滴滴带回来的面试题及答案</a></p> 
  <p><a href="https://mp.weixin.qq.com/s/aPSOH1VoL9JRLuVamFgO4Q" rel="nofollow">Spring面试题（70道，史上最全）</a></p> 
  <p><a href="https://mp.weixin.qq.com/s/bc4cc6OUEc3QA6-lf91wpQ" rel="nofollow">通往大神之路，百度Java面试题前200页。</a></p> 
  <blockquote> 
   <p>分享Java干货，高并发编程，热门技术教程，微服务及分布式技术，架构设计，区块链技术，人工智能，大数据，Java面试题，以及前沿热门资讯等。</p> 
   <br> 
   <div class="image-package"> 
    <div class="image-container"> 
     <div class="image-container-fill"></div> 
     <div class="image-view"></div> 
    </div> 
    <div class="image-caption"></div> 
   </div> 
  </blockquote> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7e44ce39f45e4cc255ab8b649cde2cdc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[Objective C] objc_setAssociatedObject 关联详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa847ff4761f863514c309b74342e5ea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HTML表单颜色选择器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>