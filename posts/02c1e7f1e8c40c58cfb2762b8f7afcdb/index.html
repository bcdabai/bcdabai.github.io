<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于element UI 中输入框禁止输入空格的实现 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于element UI 中输入框禁止输入空格的实现" />
<meta property="og:description" content="关于element UI 中输入框禁止输入空格的实现 在项目开发过程中会遇到输入框禁止输入空格或者特殊字符之类的需求，其中禁止输入空格的实现方法如下所示。
1、使用vue框架中的.trim修饰符
&lt;el-input class=&#34;nameInput&#34; maxlength=&#34;20&#34; v-model.trim=&#34;form.teamName&#34; placeholder=&#34;请输入团队名称&#34;&gt;&lt;/el-input&gt; 2、使用原生input标签自带的keyup事件监听方法
// 实现一，简单 &lt;el-input class=&#34;nameInput&#34; maxlength=&#34;20&#34; v-model=&#34;form.teamName&#34; @keyup.native=&#34;$event.target.value = $event.target.value.replace(/^\s&#43;|\s&#43;$/gm,&#39;&#39;)&#34; placeholder=&#34;请输入团队名称&#34;&gt;&lt;/el-input&gt; // 实现二，更符合WEB标准，结构,表现和行为分离原则 &lt;el-input class=&#34;nameInput&#34; maxlength=&#34;20&#34; v-model=&#34;form.teamName&#34; @keyup.native=&#34;trimLR&#34; placeholder=&#34;请输入团队名称&#34;&gt;&lt;/el-input&gt; //js部分 trimLR() { this.form.teamName = this.form.teamName.replace(/^\s&#43;|\s&#43;$/gm,&#39;&#39;) } 以上实现方法，需要注意，原生事件onkeyup，改成了@keyup，并且需要在后边追加修饰符.native，这样就是告诉vue使用input的原生事件监听方法，此外，在方法的数据处理中，使用的是$event.target.value来代表input框的value值，不是this.value，也不是document.getElementById(‘XXX’).value。
在方法一中，虽然最终formData.title字段的值，过滤掉了首尾的空格，但是实践发现，在input框的展示上，并没有将空格过滤掉，还是展示的是有空格的数据。因此，更提倡第二种方法，使得数据和展示保持一致性，也方便后续问题的排查和维护。
尝试在方法二中，将keyup事件方法改为input或者change，虽然最终结果，value值过滤掉了空格，但是在页面展示上，value值还是保留了空格，以及光标的位置显示，有些混乱的问题，与方法一的表现差不多。所以还是提倡使用keyup事件来处理禁止输入的问题。
3、使用element UI 的表单验证功能
&lt;el-form ref=&#34;myForm&#34; :model=&#34;formData&#34; :rules=&#34;rules&#34; label-width=&#34;100px&#34;&gt; ... ... &lt;el-form-item label=&#34;名称&#34; prop=&#34;title&#34;&gt; &lt;el-input placeholder=&#34;请输入名称&#34; v-model=&#34;formData.title&#34; maxlength=30&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; ... ... &lt;el-form-item&gt; &lt;el-button type=&#34;primary&#34; @click=&#34;submitForm(&#39;ruleForm&#39;)&#34;&gt;立即创建&lt;/el-button&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; ----------------- // 实现一 data() { // 自定义title验证规则 var validateTitle = (rule, value, callback) =&gt; { const reg = /^[a-zA-Z_\u4e00-\u9fa5]&#43;$/ if (!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/02c1e7f1e8c40c58cfb2762b8f7afcdb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-20T11:07:08+08:00" />
<meta property="article:modified_time" content="2019-11-20T11:07:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于element UI 中输入框禁止输入空格的实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="element_UI__0"></a>关于element UI 中输入框禁止输入空格的实现</h3> 
<p>在项目开发过程中会遇到输入框禁止输入空格或者特殊字符之类的需求，其中禁止输入空格的实现方法如下所示。<br> <strong>1、使用vue框架中的.trim修饰符</strong></p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>el-input class<span class="token operator">=</span><span class="token string">"nameInput"</span> maxlength<span class="token operator">=</span><span class="token string">"20"</span> v-model.trim<span class="token operator">=</span><span class="token string">"form.teamName"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入团队名称"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-input<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>2、使用原生input标签自带的keyup事件监听方法</strong></p> 
<pre><code class="prism language-bash">// 实现一，简单
<span class="token operator">&lt;</span>el-input class<span class="token operator">=</span><span class="token string">"nameInput"</span> maxlength<span class="token operator">=</span><span class="token string">"20"</span> v-model<span class="token operator">=</span><span class="token string">"form.teamName"</span> 
@keyup.native<span class="token operator">=</span><span class="token string">"<span class="token variable">$event</span>.target.value = <span class="token variable">$event</span>.target.value.replace(/^\s+|\s+$/gm,'')"</span>
 placeholder<span class="token operator">=</span><span class="token string">"请输入团队名称"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-input<span class="token operator">&gt;</span>
// 实现二，更符合WEB标准，结构,表现和行为分离原则
<span class="token operator">&lt;</span>el-input class<span class="token operator">=</span><span class="token string">"nameInput"</span> maxlength<span class="token operator">=</span><span class="token string">"20"</span> v-model<span class="token operator">=</span><span class="token string">"form.teamName"</span> @keyup.native<span class="token operator">=</span><span class="token string">"trimLR"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入团队名称"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-input<span class="token operator">&gt;</span>
//js部分
trimLR<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            this.form.teamName <span class="token operator">=</span> this.form.teamName.replace<span class="token punctuation">(</span>/^\s+<span class="token operator">|</span>\s+$/gm,<span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>以上实现方法，需要注意，原生事件onkeyup，改成了@keyup，并且需要在后边追加修饰符.native，这样就是告诉vue使用input的原生事件监听方法，此外，在方法的数据处理中，使用的是$event.target.value来代表input框的value值，不是this.value，也不是document.getElementById(‘XXX’).value。</p> 
<p>在方法一中，虽然最终formData.title字段的值，过滤掉了首尾的空格，但是实践发现，在input框的展示上，并没有将空格过滤掉，还是展示的是有空格的数据。因此，更提倡第二种方法，使得数据和展示保持一致性，也方便后续问题的排查和维护。</p> 
<p>尝试在方法二中，将keyup事件方法改为input或者change，虽然最终结果，value值过滤掉了空格，但是在页面展示上，value值还是保留了空格，以及光标的位置显示，有些混乱的问题，与方法一的表现差不多。所以还是提倡使用keyup事件来处理禁止输入的问题。<br> <strong>3、使用element UI 的表单验证功能</strong></p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>el-form ref<span class="token operator">=</span><span class="token string">"myForm"</span> :model<span class="token operator">=</span><span class="token string">"formData"</span> :rules<span class="token operator">=</span><span class="token string">"rules"</span> label-width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">&gt;</span>
     <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
     <span class="token operator">&lt;</span>el-form-item label<span class="token operator">=</span><span class="token string">"名称"</span> prop<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el-input placeholder<span class="token operator">=</span><span class="token string">"请输入名称"</span> v-model<span class="token operator">=</span><span class="token string">"formData.title"</span> maxlength<span class="token operator">=</span>30<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/el-input<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>/el-form-item<span class="token operator">&gt;</span>
     <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
     <span class="token operator">&lt;</span>el-form-item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el-button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitForm('ruleForm')"</span><span class="token operator">&gt;</span>立即创建<span class="token operator">&lt;</span>/el-button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>/el-form-item<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/el-form<span class="token operator">&gt;</span>
 
-----------------
 
// 实现一
 
data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        // 自定义title验证规则
        var validateTitle <span class="token operator">=</span> <span class="token punctuation">(</span>rule, value, callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
            const reg <span class="token operator">=</span> /^<span class="token punctuation">[</span>a-zA-Z_\u4e00-\u9fa5<span class="token punctuation">]</span>+$/
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reg.test<span class="token punctuation">(</span>value<span class="token punctuation">))</span> <span class="token punctuation">{<!-- --></span>
                callback<span class="token punctuation">(</span>new Error<span class="token punctuation">(</span><span class="token string">'只允许填写汉字、字母、下划线'</span><span class="token punctuation">))</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                callback<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
            //表单验证规则
            rules: <span class="token punctuation">{<!-- --></span>
                <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
                title: <span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span> required: true, message: <span class="token string">'请输入名称'</span>, trigger: <span class="token string">'change'</span> <span class="token punctuation">}</span>,
                    <span class="token punctuation">{<!-- --></span> validator: validateTitle, trigger: <span class="token string">'change'</span> <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>,
                <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
            <span class="token punctuation">}</span>,
            <span class="token punctuation">..</span>. <span class="token punctuation">..</span>. 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
 
// 实现二
data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
            //表单验证规则
            rules: <span class="token punctuation">{<!-- --></span>
                <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
                title: <span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span> 
                        required: true, 
                        validator: <span class="token punctuation">(</span>rule, value, callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
                            const reg <span class="token operator">=</span> /^<span class="token punctuation">[</span>a-zA-Z_\u4e00-\u9fa5<span class="token punctuation">]</span>+$/
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                callback<span class="token punctuation">(</span>new Error<span class="token punctuation">(</span><span class="token string">'请填写必填项'</span><span class="token punctuation">))</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reg.test<span class="token punctuation">(</span>value<span class="token punctuation">))</span> <span class="token punctuation">{<!-- --></span>
                                callback<span class="token punctuation">(</span>new Error<span class="token punctuation">(</span><span class="token string">'只允许填写汉字、字母、下划线'</span><span class="token punctuation">))</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                                callback<span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>,
                        trigger: <span class="token string">'change'</span> 
                     <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>,
                <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
            <span class="token punctuation">}</span>,
            <span class="token punctuation">..</span>. <span class="token punctuation">..</span>. 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
---------------------
 
methods: <span class="token punctuation">{<!-- --></span>
   <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
   submitForm<span class="token punctuation">(</span>formName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       this.<span class="token variable">$refs</span><span class="token punctuation">[</span>formName<span class="token punctuation">]</span>.validate<span class="token punctuation">((</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            alert<span class="token punctuation">(</span><span class="token string">'submit!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            console.log<span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token punctuation">..</span>. <span class="token punctuation">..</span>.
 
<span class="token punctuation">}</span>
</code></pre> 
<p>该方法，需要使用element UI 的Form表单el-form标签，ref属性用来指定表单的名称，用于在代码中使用this.$ref.XXX方法寻找表单所在的DOM节点；rules属性用来指定验证规则；在el-form-item标签中，添加prop属性，属性值与rules验证规则中需验证的字段保持一致。以上两种实现方法，请注意区别和各自的特点。如果考虑复用性，可以使用实现一的写法，如果代码比较多，并且也不会复用的，可以参考实现二的写法，方便规则的寻找。</p> 
<p>结合确定按钮的点击事件，将表单ref的属性值传递给submitForm方法，通过this.$refs[formName].validate()方法来判定表单中所有的验证是否都通过了，valid为false，表示未通过的会在表单的相应位置展示自定义的message信息，提示用户按照规则输入。如果valid为true，表明验证通过，执行相关逻辑。这里要注意的一点是，在验证规则rules中，非验证条件下，必须返回callback()方法，使得表单验证形成闭合，否则虽然表单中都展示绿色边框，表示验证通过，但是valid还是false。</p> 
<p>此外，第三种方法，只会实时提示警告，展示给用户，所输入的内容不符合自定义的验证规则，但是不会将输入的内容进行过滤，如果有完全禁止输入，而不是只提示用户的需求时，需要结合方法二来进行处理。</p> 
<p>举一反三，其他禁止输入的需求，比如只允许输入数字，不允许输入特殊字符等需求，也可以按照上述方法进行处理，并保持数据与展示一致。<br> ————————————————<br> 版权声明：本文为CSDN博主「rushichunqiu」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/rushichunqiu/article/details/95939612</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6995a60deb724815842ba09edb081ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Arduino之坑（一）——serial.println 、serial.write、Serial.print()</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/25c0abc02d382d92fee9d6f0b56cddcd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">设计模式概述篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>