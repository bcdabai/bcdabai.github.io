<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>跟我学Android之九  日期时间组件 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="跟我学Android之九  日期时间组件" />
<meta property="og:description" content="本章内容
第1节 AnalogClock和DigitalClock
第2节 CalendarView
第3节 DatePicker和TimerPicker
第4节 Chronometer
第5节 Timer类
本章目标 掌握图形时钟和数字时钟的用法。
掌握日历视图的用法。
熟练掌握日期和时间选择器的用法。
熟练掌握Chronometer的用法。
熟练掌握Timer类的用法。
AnalogClock是一个模拟时钟视图，使用AnalogClock标签进行布局，除了长宽外基本需要其他属性，对应的Java类是android.widget.AnalogClock，布局示例如下： &lt;AnalogClock android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; /&gt; DigitalClock是一个数字时钟视图，使用DigitalClock标签进行布局，除了长宽外基本需要其他属性，对应的Java类是android.widget.DigitalClock，布局示例如下：
&lt;DigitalClock android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; /&gt; 日历视图CalendarView，可用于显示和选择日期
&lt;CalendarView android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:firstDayOfWeek=&#34;3&#34; android:shownWeekCount=&#34;4&#34; android:selectedWeekBackgroundColor=&#34;#aff&#34; android:focusedMonthDateColor=&#34;#f00&#34; android:weekSeparatorLineColor=&#34;#ff0&#34; android:unfocusedMonthDateColor=&#34;#f9f&#34; android:id=&#34;@&#43;id/calendarView&#34; /&gt; 事件，选项改变事件 public void onSelectedDayChange(CalendarView view, int year, int month, int dayOfMonth) { // 使用Toast显示用户选择的日期 Toast.makeText(CalendarViewTest.this, &#34;你生日是&#34; &#43; year &#43; &#34;年&#34; &#43; month &#43; &#34;月&#34; &#43; dayOfMonth &#43; &#34;日&#34; , Toast.LENGTH_SHORT).show(); } }); DatePicker是一个用于日期选择的控件，使用DatePicker进行布局，常用属性如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ad68189931d01bc51c337f8cc62c9803/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-07-05T20:06:00+08:00" />
<meta property="article:modified_time" content="2016-07-05T20:06:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">跟我学Android之九  日期时间组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>本章内容</p> 
 <p></p> 
 <blockquote style="border:none;"> 
  <p>第1节 AnalogClock和DigitalClock<br> 第2节  CalendarView<br> 第3节  DatePicker和TimerPicker<br> 第4节  Chronometer<br> 第5节   Timer类<br></p> 
 </blockquote> 本章目标 
 <br> 
 <p></p> 
 <p></p> 
 <blockquote style="border:none;"> 
  <p>掌握图形时钟和数字时钟的用法。<br> 掌握日历视图的用法。<br> 熟练掌握日期和时间选择器的用法。<br> 熟练掌握Chronometer的用法。<br> 熟练掌握Timer类的用法。<br></p> 
  <p><br></p> 
 </blockquote> 
 <strong>AnalogClock</strong>是一个模拟时钟视图，使用AnalogClock标签进行布局，除了长宽外基本需要其他属性，对应的Java类是android.widget.AnalogClock，布局示例如下： 
 <br> 
 <p></p> 
 <p></p> 
 <pre><code class="language-html">&lt;AnalogClock
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /&gt;
</code></pre> 
 <br> 
 <br> 
 <p><img src="https://images2.imgbox.com/f3/0e/7aURT0HU_o.png" alt=""><br></p> 
 <p><strong>DigitalCloc</strong>k是一个数字时钟视图，使用DigitalClock标签进行布局，除了长宽外基本需要其他属性，对应的Java类是android.widget.DigitalClock，布局示例如下：<br></p> 
 <p></p> 
 <pre><code class="language-html">&lt;DigitalClock
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /&gt;
</code></pre> 
 <br> 
 <img src="https://images2.imgbox.com/48/2d/QXcbRfP6_o.png" alt=""> 
 <br> 
 <p><strong><br></strong></p> 
 <p><strong>日历视图CalendarView</strong>，可用于显示和选择日期<br></p> 
 <p></p> 
 <pre><code class="language-html">&lt;CalendarView
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:firstDayOfWeek="3"
		android:shownWeekCount="4"
		android:selectedWeekBackgroundColor="#aff"
		android:focusedMonthDateColor="#f00"
		android:weekSeparatorLineColor="#ff0"
		android:unfocusedMonthDateColor="#f9f"
		android:id="@+id/calendarView" /&gt;
</code></pre> 
 <br> 事件，选项改变事件 
 <br> 
 <p></p> 
 <pre><code class="language-java">public void onSelectedDayChange(CalendarView view, int year,
					int month, int dayOfMonth)
	 {
// 使用Toast显示用户选择的日期
	Toast.makeText(CalendarViewTest.this,
"你生日是" + year + "年" + month + "月" + dayOfMonth + "日" ,
	Toast.LENGTH_SHORT).show();
	}
});
</code></pre> 
 <br> 
 <br> 
 <p><img src="https://images2.imgbox.com/0a/d5/Se8u6FUz_o.jpg" alt=""><br></p> 
 <p><br></p> 
 <p><strong>DatePicker</strong>是一个用于日期选择的控件，使用DatePicker进行布局，常用属性如下：<br> android:calendarViewShown 表示是否显示完整日历<br> android:endYear 表示可以选择的最大年份<br> android:maxDate 表示日历显示的最大日期<br> android:spinnerShown 表示是否显示调节箭头按钮<br></p> 
 <p><img src="https://images2.imgbox.com/45/60/wrfoeSqx_o.png" alt="">    <img src="https://images2.imgbox.com/5a/f0/pW1tBbvY_o.png" alt=""><br></p> 
 <p><br></p> 
 <p><strong>DatePicker</strong>是一个用于日期选择的控件，对应的类是android.widget.DatePicker，常用方法如下：<br></p> 
 <blockquote style="border:none;"> 
  <p>init() 用于初始化显示日期和注册日期选择变化的监听器</p> 
  <p>getYear() 用于提取选中的年份</p> 
  <p>getMonth() 用于提取选中的月份</p> 
  <p>getDayOfMonth()  用于提取选中的日</p> 
  <p>布局示例如下：</p> 
 </blockquote> 
 <p></p> 
 <pre><code class="language-html">&lt;DatePicker 
        android:id="@+id/datepick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:calendarViewShown="true"
        /&gt;
</code></pre> 
 <br> 
 <strong>TimePicker</strong>是一个用于时间选择的控件，使用TimePicker进行布局，除了长宽外基本不用设置其他属性 
 <br> 
 <blockquote style="border:none;"> 
  <p>对应的类是android.widget.TimePicker，常用方法如下：</p> 
  <p>getCurrentHour() 获取当前小时</p> 
  <p>getCurrentMinute() 获取当前分钟</p> 
  <p>android.widget.TimePicker.OnTimeChangedListener为事件监听接口</p> 
 </blockquote> 
 <p><img src="https://images2.imgbox.com/2b/e8/Z5laTCOj_o.png" alt=""><br></p> 
 <p><br></p> 
 <p><strong>计时器Chronometer</strong>，该组件与DigitalClock都继承自TextView，因此它们都会显示一段文本。但Chronometer并不显示当前时间，它显示的是从某个起始时间开始，一共过去了多长时间。<br> Chronometer支持如下常用方法。<br> setBase(long base)：设置计时器的起始时间。<br> setFormat(String format)：设置显示时间的格式。<br> start()：开始计时。<br> stop()：停止计时。<br> setOnChronometerTickListener(Chronometer.OnChronometerTickListener   listener)：为计时器绑定事件监听器，当计时器改变时触发该监听器。<br></p> 
 <p><br></p> 
 <p>使用Chronometer控件实现计器的操作，开始<br></p> 
 <p>// 设置开始计时时间   <br>                 chronometer.setBase(SystemClock.elapsedRealtime());   <br>                 // 开始记时   <br>                 chronometer.start();   <br></p> 
 <blockquote style="border:none;"> 
  <p>chronometer.stop(); //停止 </p> 
 </blockquote> 
 <p><br></p> 
 <p>计时器定时触发的事件<br></p> 
 <p><br></p> 
 <p></p> 
 <pre><code class="language-java"> chronometer.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {   
public void onChronometerTick(Chronometer chronometer) {   
                        // 如果开始计时到现在超过了startime秒   
                        if (SystemClock.elapsedRealtime()   
                                - chronometer.getBase() &gt; startTime * 1000) {   
                            chronometer.stop();   
                            // 给用户提示   
                            showDialog();   
                        }
                    }   
                }); 
</code></pre> 
 <br> 
 <br> 
 <p>基于Chronometer制作幻灯片<br></p> 
 <p><br></p> 
 <p><img src="https://images2.imgbox.com/38/c2/xJobVDIv_o.jpg" alt=""><br></p> 
 <p><br></p> 
 <p>Timer类<br> Timer类的功能与Chronometer组件类似，可以每隔特定时间执行程序代码，且功能比Chronometer组件强大<br> 语法<br></p> 
 <p><br></p> 
 <p><br></p> 
 <p>Timer对象是以schedule方法执行<br></p> 
 <p>Timer对象名称.schedule(TimerTask对象，延迟时间，间隔时间);<br><br><br></p> 
 <p><strong>TimerTask对象</strong>：是Timer对象定时执行的程序代码所在，开发者必须自己编写要执行的程序代码。延迟时间：设置多长时间后才开始执行Timer对象，单位是毫秒。间隔时间：设置间隔多长时间执行TimerTask对象一次，单位是毫秒。<br></p> 
 <p><br></p> 
 <p>TimerTask类<br> TimerTask对象是Timer对象的主体，也就是用来定义Timer对象定时要执行的工作内容。在TimerTask对象中run方法里的程序代码就是重复执行的代码块，语法为<br><br><br></p> 
 <p></p> 
 <pre><code class="language-java">private TimerTask变量名称=new  TimerTask() {
    public void run()
    {
    	执行程序代码…
    }
)；
</code></pre> 
 <br> Handler对象是应用程序中不同线程之间的消息中介，在TimerTask对象中使用Message对象送出消息。 
 <br> 
 <p></p> 
 <pre><code class="language-java">public void run ()
 {
          Message message=new Message () ; 
          message.what=送出消息;
          handler.sendMessage (message) ;
 }
</code></pre> 
 <br> Handler对象接收消息的语法为： 
 <br> 
 <p><br></p> 
 <p></p> 
 <pre><code class="language-java">private Handler变量名称=new  Handler(){
    public void handleMessage(Message msg
    {    super.handleMessage (msg);
    	switch (msg.what){
    	case接收消息： 	程序代码
    	break;
   )   }}；
</code></pre>计时秒表初始化计时器 
 <p><br></p> 
 <p></p> 
 <pre><code class="language-java">Timer timer=new Timer();//创建Timer对象
timer.schedule(new TimerTask() {//创建TimerTask对象
public void run() {
	if(flag){
	tSec++;
	Message msg=new Message();//创建消息对象
	msg.what=1;//设定类型
	handler.sendMessage(msg);//传送消息给Handler
	}
}
}, 0,1000);//立刻开始执行，时间间隔为1000毫秒</code></pre> 
 <br> 计时秒表，接受消息 
 <br> 
 <p><br></p> 
 <pre><code class="language-java">public void handleMessage(Message msg){//接受消息
super.handleMessage(msg);
switch(msg.what){//判断消息类型
	case 1:
		cSec=tSec%60;//获取秒数
		cMin=tSec/60;//获取分钟数
	String str=String.format("%02d:%02d", cMin,cSec);//以00：00的格式显示数据
	txtClock.setText(str);
	break;
}
}</code></pre> 
 <br> 
 <br> 
 <p><img src="https://images2.imgbox.com/4b/4f/X1Hcy9ws_o.jpg" alt=""><br></p> 
 <p><br></p> 
 <p><br></p> 
</div> 
<p>转载于:https://www.cnblogs.com/mjsn/p/6150845.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b87d1bf4060493a15439f5ffb9331dc2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">bean的加载（二） FactoryBean的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a716980e462002798c67085bc5ba953e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows 10 连接 Zune 直接拷歌的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>