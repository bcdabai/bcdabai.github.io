<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python列表生成器 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python列表生成器" />
<meta property="og:description" content="1.语法格式： 基础语法格式
[exp for iter_var in iterable] 工作过程：
迭代iterable中的每个元素；每次迭代都先把结果赋值给iter_var，然后通过exp得到一个新的计算值；最后把所有通过exp得到的计算值以一个新列表的形式返回。 相当于这样的过程：
L = [] for iter_var in iterable: L.append(exp) 带过滤功能语法格式
[exp for iter_var in iterable if_exp] 工作过程：
迭代iterable中的每个元素，每次迭代都先判断if_exp表达式结果为真，如果为真则进行下一步，如果为假则进行下一次迭代；把迭代结果赋值给iter_var，然后通过exp得到一个新的计算值；最后把所有通过exp得到的计算值以一个新列表的形式返回。 相当于这样的过程：
L = [] for iter_var in iterable: if_exp: L.append(exp) 循环嵌套语法格式
[exp for iter_var_A in iterable_A for iter_var_B in iterable_B] 工作过程： 每迭代iterable_A中的一个元素，就把ierable_B中的所有元素都迭代一遍。
相当于这样的过程：
L = [] for iter_var_A in iterable_A: for iter_var_B in iterable_B: L.append(exp) 应用场景 其实列表生成式也是Python中的一种“语法糖”，也就是说列表生成式应该是Python提供的一种生成列表的简洁形式，应用列表生成式可以快速生成一个新的list。它最主要的应用场景是：根据已存在的可迭代对象推导出一个新的list。
使用实例 我们可以对几个生成列表的要求分别通过“不使用列表生成式”和“使用列表生成式”来实现，然后做个对比总结。
实例1：生成一个从3到10的数字列表
不使用列表生成式实现 list1 = list(range(3, 11)) 使用列表生成式实现 list2 = [x for x in range(3, 11)] 实例2：生成一个2n&#43;1的数字列表，n为从3到11的数字" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ea45ac8a0a3ff0567f37c5400201f081/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-26T14:12:21+08:00" />
<meta property="article:modified_time" content="2018-02-26T14:12:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python列表生成器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1.语法格式： <br> 基础语法格式</p> 
<pre class="prettyprint"><code class=" hljs glsl">[<span class="hljs-built_in">exp</span> <span class="hljs-keyword">for</span> iter_var <span class="hljs-keyword">in</span> iterable]</code></pre> 
<p>工作过程：</p> 
<ul><li>迭代iterable中的每个元素；</li><li>每次迭代都先把结果赋值给iter_var，然后通过exp得到一个新的计算值；</li><li>最后把所有通过exp得到的计算值以一个新列表的形式返回。</li></ul> 
<p>相当于这样的过程：</p> 
<pre class="prettyprint"><code class=" hljs glsl">L = []
<span class="hljs-keyword">for</span> iter_var <span class="hljs-keyword">in</span> iterable:
    L.append(<span class="hljs-built_in">exp</span>)</code></pre> 
<p>带过滤功能语法格式</p> 
<pre class="prettyprint"><code class=" hljs bash">[exp <span class="hljs-keyword">for</span> iter_var <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span>_exp]</code></pre> 
<p>工作过程：</p> 
<ul><li>迭代iterable中的每个元素，每次迭代都先判断if_exp表达式结果为真，如果为真则进行下一步，如果为假则进行下一次迭代；</li><li>把迭代结果赋值给iter_var，然后通过exp得到一个新的计算值；</li><li>最后把所有通过exp得到的计算值以一个新列表的形式返回。</li></ul> 
<p>相当于这样的过程：</p> 
<pre class="prettyprint"><code class=" hljs bash">L = []
<span class="hljs-keyword">for</span> iter_var <span class="hljs-keyword">in</span> iterable:
    <span class="hljs-keyword">if</span>_exp:
        L.append(exp)</code></pre> 
<p>循环嵌套语法格式</p> 
<pre class="prettyprint"><code class=" hljs glsl">[<span class="hljs-built_in">exp</span> <span class="hljs-keyword">for</span> iter_var_A <span class="hljs-keyword">in</span> iterable_A <span class="hljs-keyword">for</span> iter_var_B <span class="hljs-keyword">in</span> iterable_B]</code></pre> 
<p>工作过程： <br> 每迭代iterable_A中的一个元素，就把ierable_B中的所有元素都迭代一遍。</p> 
<p>相当于这样的过程：</p> 
<pre class="prettyprint"><code class=" hljs glsl">L = []
<span class="hljs-keyword">for</span> iter_var_A <span class="hljs-keyword">in</span> iterable_A:
    <span class="hljs-keyword">for</span> iter_var_B <span class="hljs-keyword">in</span> iterable_B:
        L.append(<span class="hljs-built_in">exp</span>)</code></pre> 
<ol><li><p>应用场景 <br> 其实列表生成式也是Python中的一种“语法糖”，也就是说列表生成式应该是Python提供的一种生成列表的简洁形式，应用列表生成式可以快速生成一个新的list。它最主要的应用场景是：根据已存在的可迭代对象推导出一个新的list。</p></li><li><p>使用实例 <br> 我们可以对几个生成列表的要求分别通过“不使用列表生成式”和“使用列表生成式”来实现，然后做个对比总结。</p></li></ol> 
<p>实例1：生成一个从3到10的数字列表</p> 
<h2 id="不使用列表生成式实现">不使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs fix"><span class="hljs-attribute">list1 </span>=<span class="hljs-string"> list(range(3, 11))</span></code></pre> 
<h2 id="使用列表生成式实现">使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs vhdl">list2 = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-keyword">range</span>(<span class="hljs-number">3</span>, <span class="hljs-number">11</span>)]</code></pre> 
<p>实例2：生成一个2n+1的数字列表，n为从3到11的数字</p> 
<h2 id="不使用列表生成式实现-1">不使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs vhdl">list3 = []
<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">range</span>(<span class="hljs-number">3</span>, <span class="hljs-number">11</span>):
    list3.append(<span class="hljs-number">2</span>*n + <span class="hljs-number">1</span>)</code></pre> 
<h2 id="使用列表生成式实现-1">使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs vhdl">list4 = [<span class="hljs-number">2</span>*n + <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-keyword">range</span>(<span class="hljs-number">3</span>, <span class="hljs-number">11</span>)]</code></pre> 
<p>实例3：过滤掉一个指定的数字列表中值大于20的元素 <br> L = [3， 7， 11， 14，19， 33， 26， 57， 99]</p> 
<h2 id="不使用列表生成式实现-2">不使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs bash">list5 = []
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> L:
    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">20</span>:
        list5.append(x)</code></pre> 
<h2 id="使用列表生成式实现-2">使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs bash">list6 = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> L <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">20</span>]</code></pre> 
<p>实例4：计算两个集合的全排列，并将结果作为保存至一个新的列表中 <br> L1 = [‘香蕉’, ‘苹果’, ‘橙子’] <br> L2 = [‘可乐’, ‘牛奶’]</p> 
<h2 id="不使用列表生成式实现-3">不使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs bash">list7 = []
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> L1:
    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> L2:
        list7.append((x, y))</code></pre> 
<h2 id="使用列表生成式实现-3">使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs bash">list8 = [(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> L1 <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> L2]</code></pre> 
<p>实例5：将一个字典转换成由一组元组组成的列表，元组的格式为(key, value) <br> D = {‘Tom’: 15, ‘Jerry’: 18, ‘Peter’: 13}</p> 
<h2 id="不使用列表生成式实现-4">不使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs livecodeserver">list9 = []
<span class="hljs-keyword">for</span> k, v <span class="hljs-operator">in</span> D.<span class="hljs-keyword">items</span>():
    list9.append((k, v))</code></pre> 
<h2 id="使用列表生成式实现-4">使用列表生成式实现</h2> 
<pre class="prettyprint"><code class=" hljs livecodeserver">list10 = [(k, v) <span class="hljs-keyword">for</span> k, v <span class="hljs-operator">in</span> D.<span class="hljs-keyword">items</span>()]</code></pre> 
<p>可见，使用列表生成式确实要方便、简洁很多，使用一行代码就搞定了。</p> 
<ol><li>列表生成式与map()、filter()等高阶函数功能对比 <br> 我觉得，大家应该已经发现这里说的列表生成式的功能与之前 这篇文章 中讲到的map()和filter()高阶函数的功能很像，比如下面两个例子：</li></ol> 
<p>实例1：把一个列表中所有的字符串转换成小写，非字符串元素原样保留 <br> L = [‘TOM’, ‘Peter’, 10, ‘Jerry’]</p> 
<h2 id="用列表生成式实现">用列表生成式实现</h2> 
<p>list1 = [x.lower() if isinstance(x, str) else x for x in L]</p> 
<h2 id="用map函数实现">用map()函数实现</h2> 
<p>list2 = list(map(lambda x: x.lower() if isinstance(x, str) else x, L)) <br> 实例2：把一个列表中所有的字符串转换成小写，非字符串元素移除 <br> L = [‘TOM’, ‘Peter’, 10, ‘Jerry’]</p> 
<h2 id="用列表生成">用列表生成</h2> 
<pre class="prettyprint"><code class=" hljs livecodeserver">list3 = [x.<span class="hljs-built_in">lower</span>() <span class="hljs-keyword">for</span> x <span class="hljs-operator">in</span> L <span class="hljs-keyword">if</span> isinstance(x, str)]map()和<span class="hljs-built_in">filter</span>()</code></pre> 
<h2 id="函数实现">函数实现</h2> 
<pre class="prettyprint"><code class=" hljs python">list4 = list(map(<span class="hljs-keyword">lambda</span> x: x.lower(), filter(<span class="hljs-keyword">lambda</span> x: isinstance(x, str), L)))</code></pre> 
<p>对于大部分需求来讲，使用列表生成式和使用高阶函数都能实现。但是map()和filter()等一些高阶函数在Python3中的返回值类型变成了Iteraotr（迭代器）对象（在Python2中的返回值类型为list），这对于那些元素数量很大或无限的可迭代对象来说显然是更合适的，因为可以避免不必要的内存空间浪费。</p> 
<p><strong>四、可迭代对象（Iterable）</strong> <br> 我们经常在Python的文档中看到“Iterable”这个此，它的意思是“可迭代对象”。那么什么是可迭代对象呢？ <br> 可直接用于for循环的对象统称为可迭代对象（Iterable）。</p> 
<p>目前我们已经知道的可迭代（可用于for循环）的数据类型有：</p> 
<p>集合数据类型：如list、tuple、dict、set、str等 <br> 生成器（Generator） <br> 可以使用isinstance()来判断一个对象是否是Iterable对象：</p> 
<p>from collections import Iterable <br> print(isinstance([], Iterable)) <br> <strong>五、迭代器（Iterator）</strong> <br> 1. 迭代器的定义 <br> 可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator。</p> 
<p>很明显上面讲的生成器也是迭代器。当然，我们可以使用isinstance()来验证一下：</p> 
<p>from collections import Iterator <br> print(isinstance((x for x in range(5)), Iterator)) <br> 输出结果为：True</p> 
<ol><li>对迭代器的理解 <br> 实际上，Python中的Iterator对象表示的是一个数据流，Iterator可以被next()函数调用被不断返回下一个数据，直到没有数据可以返回时抛出StopIteration异常错误。可以把这个数据流看做一个有序序列，但我们无法提前知道这个序列的长度。同时，Iterator的计算是惰性的，只有通过next()函数时才会计算并返回下一个数据。（此段内容来自 这里）</li></ol> 
<p>生成器也是这样的，因为生成器也是迭代器。</p> 
<p><strong>六、Iterable、Iterator与Generator之间的关系</strong> <br> 生成器对象既是可迭代对象，也是迭代器： 我们已经知道，生成器不但可以作用与for循环，还可以被next()函数不断调用并返回下一个值，直到最后抛出StopIteration错误表示无法继续返回下一个值了。也就是说，生成器同时满足可迭代对象和迭代器的定义； <br> 迭代器对象一定是可迭代对象，反之则不一定： 例如list、dict、str等集合数据类型是可迭代对象，但不是迭代器，但是它们可以通过iter()函数生成一个迭代器对象。 <br> 也就是说：迭代器、生成器和可迭代对象都可以用for循环去迭代，生成器和迭代器还可以被next()方函数调用并返回下一个值。</p> 
<p>转自：<a href="https://www.cnblogs.com/yyds/p/6281453.html" rel="nofollow">https://www.cnblogs.com/yyds/p/6281453.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7bc402b130d1204913839e1c816c2792/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">设计模式--单例模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69948a23bac2aa2c6428d7bebc9e8628/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[LeetCode] Count and Say 数数并说</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>