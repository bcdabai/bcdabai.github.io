<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT中用Qpainter的drawText方法程序crash的可能原因 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT中用Qpainter的drawText方法程序crash的可能原因" />
<meta property="og:description" content="QT中用Qpainter的drawText方法程序crash的可能原因 (2010-11-17 11:43:20)
转载▼
标签：
杂谈
分类： c/cpp 早上遇到这个很神奇的问题，之所以说神奇，是因为以前drawText完全没问题。
google到这个：http://bugreports.qt.nokia.com/browse/QTBUG-5634
原来是因为我们是在dll中drawText，而dll中没有实例化QApplication对象导致的。简单地给dll加个QApplication全局变量？这个我喜欢。但是程序直接罢工了。
只能再google，发现原来是QT与dll之间的龌龊导致的。解决方法可参考：http://blog.csdn.net/tingsking18/archive/2009/12/08/4967172.aspx
于是下载了QTWinmigrate进行了一番折腾。终于搞定了这个问题。
搞定是搞定了。但我反思了下，qt&#43;dll这种方式其实有不合理之处。最好还是不要这么做。
分享： 分享到新浪Qing 喜欢
阅读┊ 评论 ┊收藏 ┊转载 ┊ 喜欢▼ ┊打印┊举报 加载中，请稍候......
前一篇：QT4.6中将QImage保存为JPG格式
后一篇：我不可能像对待老婆一样去对待客户" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1b0fd634c1f8813638ec4b983df18555/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-04-03T11:19:03+08:00" />
<meta property="article:modified_time" content="2013-04-03T11:19:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT中用Qpainter的drawText方法程序crash的可能原因</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><span style="color:#464646">QT</span><span style="color:#464646">中用Qpainter</span>的drawText方法程序crash的可能原因</h3> 
<p><span style="color:#464646">(2010-11-17 11:43:20)</span></p> 
<p><span style="color:#464646"><a href="" rel="nofollow"><cite>转载</cite></a></span><em>▼</em></p> 
<table border="0" cellpadding="0"><tbody><tr><td> <p>标签：</p> <p><span style="color:#464646"><a href="http://search.sina.com.cn/?c=blog&amp;q=%D4%D3%CC%B8&amp;by=tag" rel="nofollow noopener noreferrer" target="_blank">杂谈</a></span></p> </td><td> <p>分类：<span style="color:#464646"> <a href="http://blog.sina.com.cn/s/articlelist_1221906221_1_1.html" rel="nofollow noopener noreferrer" target="_blank"> c/cpp</a> </span></p> </td></tr></tbody></table> 
<p><span style="color:#464646"> <wbr></wbr> <wbr></wbr> <wbr></wbr> </span><span style="color:#464646">早上遇到这个很神奇的问题，之所以说神奇，是因为以前drawText</span>完全没问题。<br>  <wbr></wbr> <wbr></wbr> <wbr></wbr> google到这个：http://bugreports.qt.nokia.com/browse/QTBUG-5634<br>  <wbr></wbr> <wbr></wbr> <wbr></wbr> 原来是因为我们是在dll中drawText，而dll中没有实例化QApplication对象导致的。简单地给dll加个QApplication全局变量？这个我喜欢。但是程序直接罢工了。<br>  <wbr></wbr> <wbr></wbr> <wbr></wbr> 只能再google，发现原来是QT与dll之间的龌龊导致的。解决方法可参考：http://blog.csdn.net/tingsking18/archive/2009/12/08/4967172.aspx<br>  <wbr></wbr> <wbr></wbr> <wbr></wbr> 于是下载了QTWinmigrate进行了一番折腾。终于搞定了这个问题。<br>  <wbr></wbr> <wbr></wbr> <br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> 搞定是搞定了。但我反思了下，qt+dll这种方式其实有不合理之处。最好还是不要这么做。</p> 
<p><span style="color:#464646">分享： <a href="" rel="nofollow" id="shareqing">分享到新浪Qing</a></span> </p> 
<p><span style="color:#464646"><a href="" rel="nofollow" title="分享到新浪微博"></a><a href="" rel="nofollow" title="分享到MSN"></a><a href="" rel="nofollow" title="分享到开心网"></a><a href="" rel="nofollow" title="分享到人人网"></a><a href="" rel="nofollow" title="分享到QQ空间"></a><a href="" rel="nofollow" title="分享到豆瓣"></a></span></p> 
<p id="dbox2_48d4cf2d0100mx4b">喜欢</p> 
<p><span style="color:#464646">阅读</span><span id="r_48d4cf2d0100mx4b">┊ <a href="http://blog.sina.com.cn/s/blog_48d4cf2d0100mx4b.html#commonComment" rel="nofollow"> 评论</a></span> ┊<a href="" rel="nofollow">收藏</a> ┊转载 ┊ <a href="" rel="nofollow"><cite id="d1_digg_48d4cf2d0100mx4b">喜欢</cite></a><a href="" rel="nofollow" id="d1_digg_down_48d4cf2d0100mx4b"><strong>▼</strong></a> ┊<a href="http://blog.sina.com.cn/main_v5/ria/print.html?blog_id=blog_48d4cf2d0100mx4b" rel="nofollow noopener noreferrer" target="_blank">打印</a>┊举报 </p> 
<table border="0" cellpadding="0"><tbody><tr><td> <p><span style="color:#464646"> </span></p> </td></tr></tbody></table> 
<p><span style="color:#464646">加载中，请稍候......</span></p> 
<p>前一篇：<span style="color:#464646"><a href="http://blog.sina.com.cn/s/blog_48d4cf2d0100mx4c.html" rel="nofollow">QT4.6中将QImage</a></span>保存为JPG格式</p> 
<p>后一篇：<span style="color:#464646"><a href="http://blog.sina.com.cn/s/blog_48d4cf2d0100n1qm.html" rel="nofollow">我不可能像对待老婆一样去对待客户</a></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a11f67e335061ca9d680a9178fcdeae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">扩展OSGi控制台，通过web访问操作console，支持3.4、3.6</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e48b2e2d1d1a57e24b11d4aab0e4ca2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows下的双显的设置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>