<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Windows操作系统上使用rtsp simple server和ffmpeg推送录屏视频流 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Windows操作系统上使用rtsp simple server和ffmpeg推送录屏视频流" />
<meta property="og:description" content="大纲 1 搭建启动rtsp server2 推送录屏视频流下载FFmpeg 3 检验3.1 获取本机IP3.2 检测 1 搭建启动rtsp server 从https://github.com/aler9/rtsp-simple-server/releases下载Windows版本的编译结果。
解压，然后启动该程序
2 推送录屏视频流 下载FFmpeg 从https://ffmpeg.org/download.html下载Windows版本的编译结果。
解压后，通过cmd进入FFmpeg所在的目录，执行下面的命令（其中rtsp://localhost:8554/mystream是上一步生成的地址）。
ffmpeg -f gdigrab -framerate 10 -i desktop -f rtsp -g 5 -an rtsp://localhost:8554/mystream
我们可以看到console会出现下面的变化。
rstp simple server的窗口会发生下面的变化。
3 检验 3.1 获取本机IP 在cmd中使用ipconfig获取本机IP
3.2 检测 可以使用VLC播放器测试流地址是否有效。
填入rtsp://172.168.1.218:8554/mystream。注意此处不能再使用localhost了，而是要用本机的IP。
在VCL中能看到屏幕就代表我们方案是通过的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/966da154ba37a4edb70ee91a50904eb9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-05T12:46:03+08:00" />
<meta property="article:modified_time" content="2023-12-05T12:46:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Windows操作系统上使用rtsp simple server和ffmpeg推送录屏视频流</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>大纲</h4> 
 <ul><li><a href="#1_rtsp_server_2" rel="nofollow">1 搭建启动rtsp server</a></li><li><a href="#2__7" rel="nofollow">2 推送录屏视频流</a></li><li><ul><li><a href="#FFmpeg_8" rel="nofollow">下载FFmpeg</a></li></ul> 
  </li><li><a href="#3__19" rel="nofollow">3 检验</a></li><li><ul><li><a href="#31_IP_20" rel="nofollow">3.1 获取本机IP</a></li><li><a href="#32__23" rel="nofollow">3.2 检测</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_rtsp_server_2"></a>1 搭建启动rtsp server</h2> 
<p>从https://github.com/aler9/rtsp-simple-server/releases下载Windows版本的编译结果。<br> <img src="https://images2.imgbox.com/12/9d/XbOoHHFB_o.png" alt="在这里插入图片描述"><br> 解压，然后启动该程序<br> <img src="https://images2.imgbox.com/51/e6/vXjLGCRd_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2__7"></a>2 推送录屏视频流</h2> 
<h3><a id="FFmpeg_8"></a>下载FFmpeg</h3> 
<p>从https://ffmpeg.org/download.html下载Windows版本的编译结果。<br> <img src="https://images2.imgbox.com/84/72/VRpLe1Ap_o.png" alt="在这里插入图片描述"><br> 解压后，通过cmd进入FFmpeg所在的目录，执行下面的命令（其中rtsp://localhost:8554/mystream是上一步生成的地址）。</p> 
<blockquote> 
 <p>ffmpeg -f gdigrab -framerate 10 -i desktop -f rtsp -g 5 -an rtsp://localhost:8554/mystream</p> 
</blockquote> 
<p>我们可以看到console会出现下面的变化。<br> <img src="https://images2.imgbox.com/ae/77/NCfRijMD_o.png" alt="在这里插入图片描述"><br> rstp simple server的窗口会发生下面的变化。<br> <img src="https://images2.imgbox.com/ba/21/m8Odqjkc_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__19"></a>3 检验</h2> 
<h3><a id="31_IP_20"></a>3.1 获取本机IP</h3> 
<p>在cmd中使用ipconfig获取本机IP<br> <img src="https://images2.imgbox.com/75/91/HnWDr6ql_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__23"></a>3.2 检测</h3> 
<p>可以使用<a href="https://www.videolan.org/vlc/" rel="nofollow">VLC播放器</a>测试流地址是否有效。<br> <img src="https://images2.imgbox.com/97/be/Cz96q0WK_o.png" alt="在这里插入图片描述"><br> 填入rtsp://172.168.1.218:8554/mystream。注意此处不能再使用localhost了，而是要用本机的IP。<br> <img src="https://images2.imgbox.com/88/3f/GRx1P7Op_o.png" alt="在这里插入图片描述"><br> 在VCL中能看到屏幕就代表我们方案是通过的。<br> <img src="https://images2.imgbox.com/4f/e4/DNxghTTr_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6b1544031b4f86e65b303f9fdef93da/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在AWS Lambda中使用FFmpeg处理m3u8视频流</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1d07390d60c1f2229c576d568af25c9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springboot集成阿里云短信服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>