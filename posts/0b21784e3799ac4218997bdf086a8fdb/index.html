<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot默认包扫描机制及使用@ComponentScan指定扫描路径 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot默认包扫描机制及使用@ComponentScan指定扫描路径" />
<meta property="og:description" content="SpringBoot默认包扫描机制 标注了@Component和@Component的衍生注解如@Controller,@Service,@Repository就可以把当前的Bean加入到IOC容器中。那么SpringBoot是如何知道要去扫描@Component注解的呢。@ComponentScan做的事情就是告诉Spring从哪里找到bean
SpringBoot默认包扫描机制： 从启动类所在包开始，扫描当前包及其子级包下的所有文件。
我们可以通过以下的测试来验证一下。
启动应用并访问BannerController这个控制器，目录结构如图
访问结果正常
当把BannerController移动到上一级目录，应用可以正常启动
但是再次访问刚才的路径时却出现了如下错误，代码是没有变动的，是Controller扫描 不到了。
实际上SpringBoot是通过@ComponentScan进行扫描。默认情况下，入口类上面的@SpringBootApplication里面有一个@ComponentScan,也就相当于@ComponentScan标注在入口类上。所以默认情况下，扫描入口类同级及其子级包下的所有文件。当我们想自己制定包扫描路径就需要加一个@ComponentScan
@ComponentScan的使用 常用参数含义 basePackages与value: 用于指定包的路径，进行扫描(默认参数)
basePackageClasses: 用于指定某个类的包的路径进行扫描
includeFilters: 包含的过滤条件
FilterType.ANNOTATION：按照注解过滤
FilterType.ASSIGNABLE_TYPE：按照给定的类型
FilterType.ASPECTJ：使用ASPECTJ表达式
FilterType.REGEX：正则
FilterType.CUSTOM：自定义规则
excludeFilters: 排除的过滤条件，用法和includeFilters一样
nameGenerator: bean的名称的生成器
useDefaultFilters: 是否开启对@Component，@Repository，@Service，@Controller的类进行检测
指定要扫描的包 上述例子，如果想扫描启动类上一级包，使用@ComponentScan指定包扫描路径,即可将BannerController加入到容器
@SpringBootApplication@ComponentScan(&#34;com.lin&#34;)publicclassMissyouApplication{publicstaticvoidmain(String[] args){ SpringApplication.run(MissyouApplication.class, args);}}1234567 excludeFilters 排除某些包的扫描 测试类准备：
@ControllerpublicclassBannerController{BannerController(){ System.out.println(&#34;Hello BannerController&#34;);}}--------------------------------------------------------------------@ServicepublicclassTestService{TestService(){ System.out.println(&#34;Hello TestService&#34;);}}12345678910111213 目录结构如下：
启动类上加@ComponentScan指定扫描lin这个包并排除@Controller这个注解标注的类
@SpringBootApplication@ComponentScan(value =&#34;com.lin&#34;, excludeFilters ={@ComponentScan.Filter(type = FilterType.ANNOTATION,value ={Controller.class})})publicclassMissyouApplication{publicstaticvoidmain(String[] args){ SpringApplication.run(MissyouApplication.class, args);}}123456789 启动应用，控制台打印出了TestService而没有BannerController
@Component与@ComponentScan 在某个类上使用@Component注解，表明当需要创建类时，这个被注解标注的类是一个候选类。就像是有同学在举手。
@ComponentScan 用于扫描指定包下的类。就像看都有哪些举手了。
原文链接：https://blog.csdn.net/xfx_1994/article/details/103976575" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0b21784e3799ac4218997bdf086a8fdb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-08T01:54:03+08:00" />
<meta property="article:modified_time" content="2023-01-08T01:54:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot默认包扫描机制及使用@ComponentScan指定扫描路径</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">SpringBoot默认包扫描机制</span></h2> 
 <p style="text-align:null;">标注了@<a class="kdocs-link" style="color:#0A6CFF;" href="https://so.csdn.net/so/search?q=Component&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">Component</a>和@Component的衍生注解如@Controller,@Service,@Repository就可以把当前的Bean加入到IOC容器中。那么SpringBoot是如何知道要去扫描@Component注解的呢。<span class="kdocs-bold" style="font-weight:bold;">@ComponentScan做的事情就是告诉Spring从哪里找到bean</span></p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">SpringBoot默认包扫描机制：</span> 从启动类所在包开始，扫描当前包及其子级包下的所有文件。</p> 
 <p style="text-align:null;">我们可以通过以下的测试来验证一下。</p> 
 <p style="text-align:null;">启动应用并访问<span class="kdocs-fontSize" style="font-size:9pt;">BannerController</span>这个控制器，目录结构如图</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:740;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:52.837837%;height:0;"> 
    <img src="https://images2.imgbox.com/d0/a6/o2Zub9DD_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-52.837837%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">访问结果正常</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:577;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:21.317158%;height:0;"> 
    <img src="https://images2.imgbox.com/ba/c7/czQK8qo5_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-21.317158%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">当把<span class="kdocs-fontSize" style="font-size:9pt;">BannerController</span>移动到上一级目录，应用可以正常启动</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:740;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:72.16216%;height:0;"> 
    <img src="https://images2.imgbox.com/72/36/ml4Vn02F_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-72.16216%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">但是再次访问刚才的路径时却出现了如下错误，代码是没有变动的，是Controller扫描 不到了。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:703;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:36.55761%;height:0;"> 
    <img src="https://images2.imgbox.com/62/f5/klQIyk2o_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-36.55761%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">实际上SpringBoot是通过@ComponentScan进行扫描。默认情况下，入口类上面的<span class="kdocs-fontSize" style="font-size:9pt;">@SpringBootApplication</span>里面有一个<span class="kdocs-fontSize" style="font-size:9pt;">@ComponentScan</span>,也就相当于@ComponentScan标注在入口类上。所以默认情况下，扫描入口类同级及其子级包下的所有文件。当我们想自己制定包扫描路径就需要加一个@ComponentScan</p> 
 <h2 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">@ComponentScan的使用</span></h2> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">常用参数含义</span></h3> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">basePackages</span>与<span class="kdocs-bold" style="font-weight:bold;">value</span>: 用于指定包的路径，进行扫描(默认参数)</p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">basePackageClasses</span>: 用于指定某个类的包的路径进行扫描</p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">includeFilters</span>: 包含的过滤条件</p> 
 <p style="text-align:null;">FilterType.ANNOTATION：按照注解过滤</p> 
 <p style="text-align:null;">FilterType.ASSIGNABLE_TYPE：按照给定的类型</p> 
 <p style="text-align:null;">FilterType.ASPECTJ：使用ASPECTJ表达式</p> 
 <p style="text-align:null;">FilterType.REGEX：正则</p> 
 <p style="text-align:null;">FilterType.CUSTOM：自定义规则</p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">excludeFilters</span>: 排除的过滤条件，用法和includeFilters一样</p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">nameGenerator</span>: bean的名称的生成器</p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">useDefaultFilters</span>: 是否开启对@Component，@Repository，@Service，@Controller的类进行检测</p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">指定要扫描的包</span></h4> 
 <p style="text-align:null;">上述例子，如果想扫描启动类上一级包，使用@ComponentScan指定包扫描路径,即可将<span class="kdocs-fontSize" style="font-size:9pt;">BannerController</span>加入到容器</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@SpringBootApplication@ComponentScan("com.lin")publicclassMissyouApplication{publicstaticvoidmain(String[] args){
        SpringApplication.run(MissyouApplication.class, args);}}1234567</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">excludeFilters 排除某些包的扫描</span></h4> 
 <p style="text-align:null;">测试类准备：</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@ControllerpublicclassBannerController{BannerController(){
        System.out.println("Hello BannerController");}}--------------------------------------------------------------------@ServicepublicclassTestService{TestService(){
        System.out.println("Hello TestService");}}12345678910111213</code></pre> 
 <p style="text-align:null;">目录结构如下：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:347;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:51.29683%;height:0;"> 
    <img src="https://images2.imgbox.com/d3/59/I5UPTnHk_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-51.29683%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">启动类上加@ComponentScan指定扫描<span class="kdocs-fontSize" style="font-size:9pt;">lin</span>这个包并排除<span class="kdocs-fontSize" style="font-size:9pt;">@Controller</span>这个注解标注的类</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">@SpringBootApplication@ComponentScan(value ="com.lin",
        excludeFilters ={@ComponentScan.Filter(type = FilterType.ANNOTATION,value ={Controller.class})})publicclassMissyouApplication{publicstaticvoidmain(String[] args){
        SpringApplication.run(MissyouApplication.class, args);}}123456789</code></pre> 
 <p style="text-align:null;">启动应用，控制台打印出了<span class="kdocs-fontSize" style="font-size:9pt;">TestService</span>而没有<span class="kdocs-fontSize" style="font-size:9pt;">BannerController</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:584;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:31.164383%;height:0;"> 
    <img src="https://images2.imgbox.com/c6/83/Vdy4epAl_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-31.164383%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">@Component与@ComponentScan</span></h3> 
 <p style="text-align:null;">在某个类上使用@Component注解，表明当需要创建类时，这个被注解标注的类是一个候选类。就像是有同学在举手。</p> 
 <p style="text-align:null;">@ComponentScan 用于扫描指定包下的类。就像看都有哪些举手了。</p> 
 <p style=""></p> 
 <p style="">原文链接：<a class="kdocs-link" style="color:#0A6CFF;" href="https://blog.csdn.net/xfx_1994/article/details/103976575" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/xfx_1994/article/details/103976575</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4d8ff57147895c78d2e1271528a5e94f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【算法笔记】最近公共祖先（LCA）问题求解——倍增算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e3688cb1752f0f90bf7d883a36c1bf9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Mac上配置Vue开发环境</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>