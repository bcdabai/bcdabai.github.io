<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7安装docker - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos7安装docker" />
<meta property="og:description" content="一丶先了解下，什么是 Docker？为什么会有 Docker？Docker 的优势？docker的组成？ 1.为什么会有 Docker？ 我们知道一款产品从开发到上线，从开发环境到生成环境。作为开发和运维人员之间协作需要考虑很多问题，尤其是当我们的产品多版本迭代之后，不同环境之间的兼容就会成为一个大问题;
这时 Docker 的出现就解决了这一难题，Docker 的出现使我们开发的软件可以“带环境安装”，即安装的时候，可以把原始环境一模一样的的复制过来，不用在担心环境不一致导致“开发时可以正常运行，生成环境就会出问题”，“在我的机器上可以正常运行，在别人的机器上就不能运行”的问题了。
2.什么是docker？
（1）Docker 就像是一个轻量级的虚拟机，Docker是一个轻量级的容器，我们可以将环境交给 Docker 来管理，当我们需要移植我们的产品的时候，就可以将环境整个的迁移到另一台主机上，而不向虚拟机一样，迁移一台虚拟机极其资源；
（2）Docker 是一个开源的应用容器引擎，基于 Go 语言开发。
（3）Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。
总之：Docker相较于虚拟机来说具有更加轻量，启动更快，效率更高，可移植性更强等优势，实现了“一次封装，到处运行”，不用在关心环境的不一致问题。
3.docker的优势
（1）运行环境的一致性：Docker 的镜像提供了除了内核之外完整的运行环境，确保了应用运行的一致性；
（2）更快速地启动部署：可以做到秒级，甚至毫秒级的的启动时间。大大节约了开发、测试、部署的时间；
（3）更好的隔离性：每个服务器都是独立运行的、完全隔离的。避免公用的服务器，资源会容易受到其他用户的影响；
（4）弹性伸缩、快速扩展：能够更好的处理集中爆发式的服务器使用压力；
（5）迁移更加方便：“带环境安装”；
（6）持续交付和部署：使用 Docker 可以通过定制镜像来实现持续集成，交付，部署；
4.docker的组成
​Docker 是一个 C/S 架构程序。Docker 客户端只需要向 Docker 服务器或者守护进程发出请求，服务器或者守护进程将完成所有工作并返回结果。Docker 提供了一个命令行工具 Docker 以及一整套 RESTful API。你可以在同一台宿主机上运行 Docker 守护进程和客户端，也可以从本地的 Docker 客户端连接到运行在另一台宿主机上的远程 Docker 守护进程。
名称说明Docker镜像（images）用于容器创建的模板。基于联合文件系统的一种层式结构，由一系列指令一步一步构建出来。Docker容器（Container）容器是独立运行的一个或一组应用，镜像相当于类，容器相当于类的实例Docker客户端（Client）通过命令行或其他工具使用Docker API 与Docker的守护进程通信Docker主机（Host）一个物理或虚拟机用于执行Docker守护进程和容器Docker守护进程是Docker服务器端进程。负责支撑Docker容器的运行和镜像的管理Docker仓库 DockerHub（Registry） 用来保存镜像，可以理解代码控制中心的代码仓库，可以将自己的镜像推送仓库上供他人下载 5. 基本概念
Docker 包括三个基本概念：
（1）镜像（Image）：Docker 镜像（Image），就相当于是一个 root 文件系统。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/16e06d627987acef32912036d75f2225/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-14T17:31:19+08:00" />
<meta property="article:modified_time" content="2023-03-14T17:31:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7安装docker</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><img alt="" height="218" src="https://images2.imgbox.com/df/a2/rM1S9JBM_o.png" width="675"></h2> 
<h2>一丶先了解下，什么是 <a href="https://so.csdn.net/so/search?q=Docker&amp;spm=1001.2101.3001.7020" title="Docker">Docker</a>？为什么会有 Docker？Docker 的优势？docker的组成？</h2> 
<p> 1.为什么会有 Docker？ </p> 
<blockquote> 
 <p>    我们知道一款产品从开发到上线，从开发环境到生成环境。作为开发和运维人员之间协作需要考虑很多问题，尤其是当我们的产品多版本迭代之后，不同环境之间的兼容就会成为一个大问题;<br>      这时 Docker 的出现就解决了这一难题，Docker 的出现使我们开发的软件可以“带环境安装”，即安装的时候，可以把原始环境一模一样的的复制过来，不用在担心环境不一致导致“开发时可以正常运行，生成环境就会出问题”，“在我的机器上可以正常运行，在别人的机器上就不能运行”的问题了。</p> 
</blockquote> 
<p>2.什么是docker？</p> 
<blockquote> 
 <p>  （1）Docker 就像是一个轻量级的虚拟机，Docker是一个轻量级的容器，我们可以将环境交给 Docker 来管理，当我们需要移植我们的产品的时候，就可以将环境整个的迁移到另一台主机上，而不向虚拟机一样，迁移一台虚拟机极其资源；</p> 
 <p>  （2）Docker 是一个开源的应用容器引擎，基于 Go 语言开发。</p> 
 <p>  （3）Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p> 
 <p>总之：Docker相较于虚拟机来说具有更加轻量，启动更快，效率更高，可移植性更强等优势，实现了“一次封装，到处运行”，不用在关心环境的不一致问题。</p> 
</blockquote> 
<p>3.docker的优势</p> 
<blockquote> 
 <p>（1）运行环境的一致性：Docker 的镜像提供了除了内核之外完整的运行环境，确保了应用运行的一致性；<br> （2）更快速地启动部署：可以做到秒级，甚至毫秒级的的启动时间。大大节约了开发、测试、部署的时间；<br> （3）更好的隔离性：每个服务器都是独立运行的、完全隔离的。避免公用的服务器，资源会容易受到其他用户的影响；<br> （4）弹性伸缩、快速扩展：能够更好的处理集中爆发式的服务器使用压力；<br> （5）迁移更加方便：“带环境安装”；<br> （6）持续交付和部署：使用 Docker 可以通过定制镜像来实现持续集成，交付，部署；</p> 
</blockquote> 
<p>4.docker的组成</p> 
<blockquote> 
 <p>   ​Docker 是一个 C/S 架构程序。Docker 客户端只需要向 Docker 服务器或者守护进程发出请求，服务器或者守护进程将完成所有工作并返回结果。Docker 提供了一个命令行工具 Docker 以及一整套 RESTful API。你可以在同一台宿主机上运行 Docker 守护进程和客户端，也可以从本地的 Docker 客户端连接到运行在另一台宿主机上的远程 Docker 守护进程。</p> 
</blockquote> 
<p><img alt="" height="217" src="https://images2.imgbox.com/ba/6a/mz5kmc9h_o.png" width="701"></p> 
<p></p> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td style="width:110px;"><strong>名称</strong></td><td style="width:587px;"><strong>说明</strong></td></tr><tr><td style="width:110px;">Docker镜像（images）</td><td style="width:587px;">用于容器创建的模板。基于联合文件系统的一种层式结构，由一系列指令一步一步构建出来。</td></tr><tr><td style="width:110px;">Docker容器（Container）</td><td style="width:587px;">容器是独立运行的一个或一组应用，镜像相当于类，容器相当于类的实例</td></tr><tr><td style="width:110px;">Docker客户端（Client）</td><td style="width:587px;">通过命令行或其他工具使用Docker API 与Docker的守护进程通信</td></tr><tr><td style="width:110px;">Docker主机（Host）</td><td style="width:587px;">一个物理或虚拟机用于执行Docker守护进程和容器</td></tr><tr><td style="width:110px;">Docker守护进程</td><td style="width:587px;">是Docker服务器端进程。负责支撑Docker容器的运行和镜像的管理</td></tr><tr><td style="width:110px;">Docker仓库 DockerHub（Registry） </td><td style="width:587px;">用来保存镜像，可以理解代码控制中心的代码仓库，可以将自己的镜像推送仓库上供他人下载</td></tr></tbody></table> 
<p><strong>5. 基本概念</strong><br> Docker 包括三个基本概念：</p> 
<p>（1）镜像（<span style="background-color:#fff5e6;">Image</span>）：Docker 镜像（Image），就相当于是一个 root 文件系统。<br> （2）容器（<span style="background-color:#fff5e6;">Container</span>）：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计  中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。容器与镜像的关系类似于面向对象编程中的对象与类。Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。Docker 容器通过 Docker 镜像来创建。也可以这样做类比，镜像理解为静态的程序，而容器理解为运行起来后的进程。容器使用写时复制技术，修改后容器的文件是独立的。<br> （3）仓库（<span style="background-color:#fff5e6;">Repository</span>）：仓库可看成一个代码控制中心，用来保存镜像。</p> 
<p></p> 
<h3 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85%E5%89%8D%E5%BF%85%E8%AF%BB">二、安装前必读</h3> 
<p>在安装 <a href="https://so.csdn.net/so/search?q=Docker&amp;spm=1001.2101.3001.7020" title="Docker">Docker</a> 之前，先说一下配置，我这里是Centos7<br> Linux 内核：官方建议 3.10 以上，3.8以上貌似也可。</p> 
<p>1.请用root用户登录虚拟机，以保证有足够的权限进行操作。</p> 
<p>2.可以使用第三方终端连接虚拟机，这样会让我们配置的效率更高。（推荐CRT）</p> 
<p>3.了解： Docker 分为docker SE（社区版，免费）以及docker EE（企业版，收费），因此我们这里安装的是docker SE。</p> 
<p><strong>1.查看当前的内核版本</strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">uname -r</span></strong></p> 
</blockquote> 
<p> <img alt="" height="97" src="https://images2.imgbox.com/bf/a4/OD5Ze2gy_o.png" width="667"></p> 
<p>我这里是3.10 ，满足条件。</p> 
<p><strong>2.使用 root 权限更新 yum 包（生产环境中此步操作需慎重，看自己情况，学习的话随便搞）</strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">yum -y update</span></strong></p> 
 <p></p> 
 <p>这个命令不是必须执行的，看个人情况，后面出现不兼容的情况的话就必须update了 </p> 
 <ol><li> <p>注意​</p> </li><li> <p><strong><span style="background-color:#fff5e6;">yum -y update</span></strong>：升级所有包同时也升级软件和系统内核；​</p> </li><li> <p><strong><span style="background-color:#fff5e6;">yum -y upgrade</span></strong>：只升级所有包，不升级软件和系统内核</p> </li><li> <p>也可以其他的命令，更新yum软件包索引：<strong><span style="background-color:#fff5e6;">yum maakecache fast</span></strong></p> </li></ol> 
</blockquote> 
<p> <strong>3.卸载旧版本（如果之前安装过的话）</strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">yum remove docker  docker-common docker-selinux docker-engine</span></strong></p> 
</blockquote> 
<p> <img alt="" height="390" src="https://images2.imgbox.com/1c/95/i4k0Lifs_o.png" width="713"></p> 
<h3></h3> 
<h3 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85Docker%E7%9A%84%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4">三、安装Docker的详细步骤</h3> 
<p><strong>1.安装需要的软件包， yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖</strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">yum install -y yum-utils device-mapper-persistent-data lvm2</span></strong></p> 
</blockquote> 
<p></p> 
<p><strong>2.设置 yum 源</strong></p> 
<p>设置一个<a href="https://so.csdn.net/so/search?q=yum&amp;spm=1001.2101.3001.7020" title="yum">yum</a>源，也就是docker ce软件源（看个人习惯，我喜欢用阿里云的）</p> 
<blockquote> 
 <ol><li> <p><strong><span style="background-color:#fff5e6;">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></strong>  （阿里仓库）</p> </li></ol> 
</blockquote> 
<p><img alt="" height="142" src="https://images2.imgbox.com/0c/d7/Nb3ZeaTd_o.png" width="719"></p> 
<p></p> 
<p><strong> 3.选择docker版本并安装（安装 docker-ce（社区版））</strong><br> （1）查看可用版本有哪些</p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">yum list docker-ce --showduplicates | sort -r</span></strong></p> 
</blockquote> 
<p><img alt="" height="428" src="https://images2.imgbox.com/1d/b4/55h8dB6N_o.png" width="717"></p> 
<p>（2）选择一个版本并安装：<strong><code><span style="background-color:#fff5e6;">yum install docker-ce-版本号</span></code><span style="background-color:#fff5e6;"> </span></strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">yum -y install docker-ce-18.03.1.ce                    ---我是下载了这个版本好根据自己喜欢。</span></strong></p> 
 <p></p> 
 <p><strong><span style="background-color:#fff5e6;">提醒：如果没有指定版本号的话，系统是默认下载最新的版本号</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">命令：yum -y  install docker-ce</span></strong></p> 
</blockquote> 
<p><img alt="" height="428" src="https://images2.imgbox.com/d9/50/OjjvDHDS_o.png" width="720"></p> 
<p>  （3）查看是否安装成功</p> 
<blockquote> 
 <p>查看镜像：<strong><span style="background-color:#fff5e6;">docker images</span></strong></p> 
 <p>查看版本：<strong><span style="background-color:#fff5e6;">docker version</span></strong></p> 
</blockquote> 
<p><img alt="" height="371" src="https://images2.imgbox.com/90/10/Nyg1MSlw_o.png" width="723"></p> 
<p> （4）查看Docker的运行状态（一般刚安装好的话都是running状态的）</p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">systemctl status docker</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">启动命令：systemctl start docker</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">停止命令：systemctl stop docker</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">设置开机启动：systemctl enable docker</span></strong></p> 
</blockquote> 
<p><strong>4.配置Docker镜像加速器（阿里云）</strong></p> 
<p><strong><span style="background-color:#fff5e6;"> ！！因为docker下载镜像是从docker hub中下载，是国外的，所以下载比较慢，可以看作maven</span></strong></p> 
<p>（1）去到阿里云官方网址，找到容器镜像服务：<span style="background-color:#fff5e6;">https://www.aliyun.com</span><br> （2）进入管理控制台（这里没有开通服务的需要开通一下容器服务）</p> 
<p>（3）点击镜像加速器，选择CentOS</p> 
<p><img alt="" height="557" src="https://images2.imgbox.com/b1/9d/1XT0b81Q_o.png" width="678"></p> 
<p><img alt="" height="564" src="https://images2.imgbox.com/c1/1d/EhdLClNl_o.png" width="743"></p> 
<p>（4）<span style="background-color:#fff5e6;">（注意每个人的配置加速器的都会随机生成的，所以根据你打开后阿里云镜像加速器提供的代码进行配置）</span><strong><span style="background-color:#fff5e6;">（执行文件后会自动生成daemon.json文件）</span></strong></p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">mkdir -p /etc/docker</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">tee /etc/docker/daemon.json &lt;&lt;-'EOF' </span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">{<!-- --></span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">"registry-mirrors": ["https://kskdqwg1.mirror.aliyuncs.com"] </span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">}</span></strong></p> 
 <p><strong><span style="background-color:#fff5e6;">EOF</span></strong></p> 
 <p></p> 
 <p>启动docker后台线程：<strong><span style="background-color:#fff5e6;">sudo systemctl daemon-reload</span></strong></p> 
 <p>重启docker服务 ：<strong><span style="background-color:#fff5e6;">sudo systemctl daemon-reload</span></strong></p> 
</blockquote> 
<p><strong>5.使用hello-world镜像测试docker</strong>  </p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">运行命令：docker run hello-world</span></strong><img alt="" height="455" src="https://images2.imgbox.com/28/39/1XOaVST7_o.png" width="996"></p> 
</blockquote> 
<p><span style="background-color:#fff5e6;">（1）docker run运行思维导图 </span></p> 
<p><img alt="" height="417" src="https://images2.imgbox.com/27/8b/MB6Uf2LI_o.png" width="531"></p> 
<p>（2）查看镜像</p> 
<blockquote> 
 <p><strong><span style="background-color:#fff5e6;">      docker images</span></strong></p> 
 <p> </p> 
 <p><img alt="" height="115" src="https://images2.imgbox.com/eb/0e/94kC1BMr_o.png" width="762"></p> 
</blockquote> 
<p> 可以看到刚才在执行docker run hello-world的时候，已经将hello-world镜像拉去到本地镜像中了。</p> 
<h2 id="%C2%A0">四丶常用的操作命令</h2> 
<p>1.启动与停止命令</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:699px;"><tbody><tr><td>命令    </td><td style="width:444px;">解释</td></tr><tr><td>systemctl start docker</td><td style="width:444px;"> 启动 Docker</td></tr><tr><td>systemctl stop docker</td><td style="width:444px;">停止docker</td></tr><tr><td>systemctl status docker</td><td style="width:444px;">查看docker状态</td></tr><tr><td>systemctl restart docker</td><td style="width:444px;">重启docker</td></tr><tr><td>systemctl enable docker    </td><td style="width:444px;">开机启动</td></tr><tr><td>docker info   </td><td style="width:444px;">查看docker概要信息</td></tr><tr><td>docker --help    </td><td style="width:444px;">查看docker帮助文档</td></tr></tbody></table> 
<p> 2.镜像相关命令</p> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td style="width:308px;"><strong>命令 </strong></td><td style="width:396px;"><strong>   解释</strong></td></tr><tr><td style="width:308px;">docker images</td><td style="width:396px;">查看本地存在的镜像</td></tr><tr><td style="width:308px;">docker search 镜像名称</td><td style="width:396px;">从网络中查找需要的镜像</td></tr><tr><td style="width:308px;">docker pull 镜像名称</td><td style="width:396px;">将远程镜像拉取到本地</td></tr><tr><td style="width:308px;">docker rmi [-f] 镜像ID </td><td style="width:396px;">（强制）删除本地镜像</td></tr><tr><td style="width:308px;">docker rmi -f 镜像名1:TAG 镜像名2:TAG </td><td style="width:396px;">删除多个镜像</td></tr><tr><td style="width:308px;">docker rmi -f $(docker images -qa) </td><td style="width:396px;">删除所有镜像</td></tr></tbody></table> 
<p></p> 
<p></p> 
<h2>至此centos7安装Docker就完成了。后面将会讲讲如何配置私人仓库，Docker 的应用容器部署，如何构建镜像，部署hadoop集群。</h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8bc6089026e638320860ef81479ec173/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32移植LVGL过程中，一种RGB颜色转十六进制颜色的算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/576c64d6272746115727d6f69ab70d4c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">NLP(V)：实战分析推特及若干网站文本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>