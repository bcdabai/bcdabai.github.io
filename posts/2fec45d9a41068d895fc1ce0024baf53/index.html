<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ROS踩坑记录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ROS踩坑记录" />
<meta property="og:description" content="ROS踩坑记录 问题：ubuntu 没有 /dev/ttyUSB0问题：运行 launch 文件或 ROS 节点时出现 exit code -9 错误提示问题：windows使用vscode远程连接（ssh）ubuntu时出现 “过程试图写入的管道不存在”或者出现“Bad owner or permissions on C:\\Users\\ASUS/.ssh/config”问题：AMCL 过程中出现 Request for map failed; trying again...问题：AMCL 过程中，在rviz里粒子分布（即那些红色箭头）没有显示问题：车身静止时，rviz中显示的机器人模型在几个定点位置上快速闪动，但odom坐标系一直不变问题：出现警告 MessageFilter问题：ubuntu 卡死 问题：ubuntu 没有 /dev/ttyUSB0 1、跟换数据线，有些数据线是仅充电的，没有数据传输功能
2、没有CH340或CP2102驱动。
CH340驱动下载：http://www.wch.cn/download/CH341SER_LINUX_ZIP.html
CP2102驱动下载：https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers
问题：运行 launch 文件或 ROS 节点时出现 exit code -9 错误提示 exit code -9含义：
错误码为linux系统的错误码，并非ros系统的，-9含义为memory使用相关的错误。
使用 htop 命令检测运行 roslaunch 时的内容占用情况，监测内存状态，如果内存爆满，那就是内存不够而造成的
解决：可以扩大swap虚拟内存。参考教程：点这里。
问题：windows使用vscode远程连接（ssh）ubuntu时出现 “过程试图写入的管道不存在”或者出现“Bad owner or permissions on C:\Users\ASUS/.ssh/config” 解决：把C:\Users\ASUS\.ssh路径下的config文件删掉，然后在vscode重新ssh，这个时候会自动重新创建config文件。
如果还是不能ssh，或者弹出operation not permitted错误提示，就右键config文件-&gt;属性-&gt;安全，查看当前用户是否有权限，如下图：
如果没有，点击编辑-&gt;添加，把你的用户名称添加进去，然后确定，如下图：
添加完成后，把权限全部勾选：
然后确定就可以了。
问题：AMCL 过程中出现 Request for map failed; trying again… 这是因为AMCL需要订阅map话题，尽管你通过rostopic list看到map话题已经被发布，也会弹出这个错误。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2fec45d9a41068d895fc1ce0024baf53/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-30T11:31:58+08:00" />
<meta property="article:modified_time" content="2023-05-30T11:31:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ROS踩坑记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ROS踩坑记录</h4> 
 <ul><li><a href="#ubuntu__devttyUSB0_2" rel="nofollow">问题：ubuntu 没有 /dev/ttyUSB0</a></li><li><a href="#_launch__ROS__exit_code_9__12" rel="nofollow">问题：运行 launch 文件或 ROS 节点时出现 exit code -9 错误提示</a></li><li><a href="#windowsvscodesshubuntu_Bad_owner_or_permissions_on_CUsersASUSsshconfig_19" rel="nofollow">问题：windows使用vscode远程连接（ssh）ubuntu时出现 “过程试图写入的管道不存在”或者出现“Bad owner or permissions on C:\\Users\\ASUS/.ssh/config”</a></li><li><a href="#AMCL__Request_for_map_failed_trying_again_30" rel="nofollow">问题：AMCL 过程中出现 Request for map failed; trying again...</a></li><li><a href="#AMCL_rviz_35" rel="nofollow">问题：AMCL 过程中，在rviz里粒子分布（即那些红色箭头）没有显示</a></li><li><a href="#rvizodom_39" rel="nofollow">问题：车身静止时，rviz中显示的机器人模型在几个定点位置上快速闪动，但odom坐标系一直不变</a></li><li><a href="#_MessageFilter_47" rel="nofollow">问题：出现警告 MessageFilter</a></li><li><a href="#ubuntu__78" rel="nofollow">问题：ubuntu 卡死</a></li></ul> 
</div> 
<p></p> 
<h2><a id="ubuntu__devttyUSB0_2"></a>问题：ubuntu 没有 /dev/ttyUSB0</h2> 
<p>1、跟换数据线，有些数据线是仅充电的，没有数据传输功能</p> 
<p>2、没有CH340或CP2102驱动。<br> CH340驱动下载：http://www.wch.cn/download/CH341SER_LINUX_ZIP.html<br> CP2102驱动下载：https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers<br> <img src="https://images2.imgbox.com/53/5e/TiVBtjPo_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/72/c6/eFK7Cgl6_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_launch__ROS__exit_code_9__12"></a>问题：运行 launch 文件或 ROS 节点时出现 exit code -9 错误提示</h2> 
<p>exit code -9含义：<br> 错误码为linux系统的错误码，并非ros系统的，-9含义为memory使用相关的错误。</p> 
<p>使用 <code>htop</code> 命令检测运行 roslaunch 时的内容占用情况，监测内存状态，如果内存爆满，那就是内存不够而造成的</p> 
<p>解决：可以扩大swap虚拟内存。参考教程：点<a href="https://blog.csdn.net/littleRpl/article/details/92626436?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&amp;utm_relevant_index=1">这里</a>。</p> 
<h2><a id="windowsvscodesshubuntu_Bad_owner_or_permissions_on_CUsersASUSsshconfig_19"></a>问题：windows使用vscode远程连接（ssh）ubuntu时出现 “过程试图写入的管道不存在”或者出现“Bad owner or permissions on C:\Users\ASUS/.ssh/config”</h2> 
<p>解决：把<code>C:\Users\ASUS\.ssh</code>路径下的<code>config</code>文件删掉，然后在vscode重新ssh，这个时候会自动重新创建<code>config</code>文件。</p> 
<p>如果还是不能ssh，或者弹出<code>operation not permitted</code>错误提示，就<code>右键config文件-&gt;属性-&gt;安全</code>，查看当前用户是否有权限，如下图：<br> <img src="https://images2.imgbox.com/f9/a9/jhnDoCKB_o.png" alt="在这里插入图片描述"><br> 如果没有，点击<code>编辑-&gt;添加</code>，把你的用户名称添加进去，然后确定，如下图：<br> <img src="https://images2.imgbox.com/f2/85/ExFknarl_o.png" alt="在这里插入图片描述">添加完成后，把权限全部勾选：<br> <img src="https://images2.imgbox.com/c2/13/YqoBVlAS_o.png" alt="在这里插入图片描述"><br> 然后确定就可以了。</p> 
<h2><a id="AMCL__Request_for_map_failed_trying_again_30"></a>问题：AMCL 过程中出现 Request for map failed; trying again…</h2> 
<p>这是因为AMCL需要订阅map话题，尽管你通过<code>rostopic list</code>看到map话题已经被发布，也会弹出这个错误。</p> 
<p>解决：使用map_saver保存地图文件（保存的这个地图可以是通过gmapping建立的），并使用map_server导入地图，就可以解决这个错误了。</p> 
<h2><a id="AMCL_rviz_35"></a>问题：AMCL 过程中，在rviz里粒子分布（即那些红色箭头）没有显示</h2> 
<p>可能是map话题订阅失败（即上一问题），需要启动map_server节点导入地图才可以看到粒子分布。</p> 
<h2><a id="rvizodom_39"></a>问题：车身静止时，rviz中显示的机器人模型在几个定点位置上快速闪动，但odom坐标系一直不变</h2> 
<p>因为gmapping节点与AMCL节点都可以对机器人进行定位，如果同时运行了gmapping节点与AMCL定位节点的话，出现这种情况是由于tf坐标变换冲突导致的。因为gmapping节点会发布map-&gt;odom的tf坐标变换，而AMCL节点都会发布odom-&gt;map的tf坐标变换，所以在rviz中的机器人模型会一直变化。</p> 
<p>解决方法：建图时只使用gmapping节点，地图构建完毕后通过map_saver节点保存地图。而在导航时，通过map_server节点导入地图，仅使用AMCL节点进行定位。</p> 
<h2><a id="_MessageFilter_47"></a>问题：出现警告 MessageFilter</h2> 
<pre><code class="prism language-powershell"><span class="token punctuation">[</span> WARN<span class="token punctuation">]</span> <span class="token punctuation">[</span>1444300130<span class="token punctuation">.</span>237434289<span class="token punctuation">]</span>: MessageFilter <span class="token namespace">[target=odom ]</span>: Dropped 100<span class="token punctuation">.</span>00% of messages so far<span class="token punctuation">.</span> Please turn the <span class="token namespace">[ros.gmapping.message_notifier]</span> rosconsole logger to DEBUG <span class="token keyword">for</span> more information<span class="token punctuation">.</span>
</code></pre> 
<p>出现了MessageFilter警告，如下图所示：<br> <img src="https://images2.imgbox.com/04/a8/ssfiJusI_o.png" alt="在这里插入图片描述">警告提示：有100条消息被隐藏了，并引导我们要到rosconsole logger处查看详细的DEBUG信息。</p> 
<p>所以我们运行下面命令：</p> 
<pre><code class="prism language-powershell">rosrun rqt_logger_level rqt_logger_level 
</code></pre> 
<p>改为Debug，如下图：<br> <img src="https://images2.imgbox.com/21/29/KfyOz81B_o.png" alt="在这里插入图片描述">看回到终端，详细信息显示出来了，如下图：</p> 
<pre><code class="prism language-powershell"><span class="token namespace">[DEBUG]</span> <span class="token punctuation">[</span>1444300178<span class="token punctuation">.</span>106273471<span class="token punctuation">]</span>: MessageFilter <span class="token namespace">[target=odom ]</span>: Added message in frame laser at time 1444300192<span class="token punctuation">.</span>911<span class="token punctuation">,</span> count now 5
<span class="token namespace">[DEBUG]</span> <span class="token punctuation">[</span>1444300178<span class="token punctuation">.</span>210528915<span class="token punctuation">]</span>: MessageFilter <span class="token namespace">[target=odom ]</span>: Removed oldest message because buffer is full<span class="token punctuation">,</span> count now 5 <span class="token punctuation">(</span>frame_id=laser<span class="token punctuation">,</span> stamp=1444300192<span class="token punctuation">.</span>508830<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/aa/qtTuzN28_o.png" alt="在这里插入图片描述">大概意思就是，在launch文件中提及到了frame_id为laser的语句，但是laser的坐标变换不存在。</p> 
<p>这个时候在rviz中，如果TF-&gt;tree处确实没有laser的话，或者laser没有跟其他坐标建立联系的，那就说明你的确缺了laser的TF坐标变换，添加上即可。</p> 
<p>但是，如果在坐标树中显示有laser并且TF坐标变换正常的话（如下图），那可能是节点运行顺序的问题。比如说，在gmapping节点中，需要odom坐标系，所以一定要在gmapping节点运行之前建立好odom坐标系并且进行正确的TF变化，否则有可能就会报错。<br> <img src="https://images2.imgbox.com/81/04/mYGwZlx6_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="ubuntu__78"></a>问题：ubuntu 卡死</h2> 
<p>解决：安全重启</p> 
<p>首先，无论Ubuntu出现什么状况，千万不要强制重启，可以尝试以下步骤进行安全重启。</p> 
<ol><li> <p>同时按住 Ctrl 和 Alt 键，按住不要放</p> </li><li> <p>按一下 SysRq 键（有的键盘是PrtSc，也有的是PS）</p> </li><li> <p>依次按下 R, E, I , S , U , B 键</p> </li></ol> 
<p>这些步骤做完后，系统就会安全重启。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3f331aae1025bd10931622fe2e71d0d9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows平台下，YOLOX目标检测环境部署教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df0a60fcdbb137c56baff51a81e6750a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">chrome的插件升级</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>