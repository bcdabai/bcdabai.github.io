<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用 AppleALC 驱动黑苹果声卡 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用 AppleALC 驱动黑苹果声卡" />
<meta property="og:description" content="概述
近来发现很多新手似乎不太明白驱动声卡的流程，也有同学清楚需要使用 AppleALC.kext，也知道要注入 id，可是就在启动参数那里扔一个 alcid=1 就觉得“我完事了”?，这个其实还没完，还有一些步骤要做，本篇将详细介绍一下驱动声卡的详细方法。
瑞昱 ALC 芯片
对于主流的 瑞昱 ALC 芯片（Realtek ALC），推荐使用 AppleALC.kext，它由 acidanthera 团队开发维护，是一个开放源代码内核扩展（Kernel Extension，缩写 kext），可以无需进行任何文件系统修改就可以为不受苹果官方支持的编解码器提供 HD 音频服务。目前来看，市面上大多数主板均板载了瑞昱的 ALC 芯片，所以 AppleALC.kext 也成为了主流驱动方案。
如何确认你的音频芯片是不是瑞昱，具体是 ALC 哪一款，可以通过以下几种方法：
鲁大师经典版，硬件检测标签下，声卡一栏在大部分情况下可以直接看到瑞昱以及具体 ALC 型号：
或者到主板的官方查看具体参数，比如微星 MPG Z490M
，一般情况下主板厂商会在参数页面明确标注出具体芯片的型号：
此外，如果你已经安装好了 macOS，还可以使用 Hackintool → 音频 进行查看。
仅在极少数情况下，可能存在显示芯片型号和实际芯片型号不一致的情况，常见于 OEM 产品，比如联想的启天 M420 部分机型，此类情况请先百度自己的芯片型号以确定真实的型号。
最后，除了瑞昱的 ALC 系列芯片外，AppleALC 还支持部分其他品牌的芯片（但型号都比较老旧），例如 AnalogDevices、Conexant，IDT 等，具体可参考下面的表格。
黑苹果系列之alc声卡id速查表
厂家 型号 id参数 AnalogDevices AD1984 0x100400, layout 11 ...
推荐 2021-12-22
找到合适的布局 ID
下一步，根据你得到的 ALC 芯片型号信息，在上面的表中找到对应的布局 ID（layout-id），例如 ALC1220 的对应 id 有 1, 2, 3, 5, 7, 11, 13, 15, 16, 21, 27, 28, 29, 34 ，前面可能还有一个修订号，这个指的是硬件版本，个别型号就会有这类情况，就是布局 ID 特别多，不知道用哪个，这个时候推荐优先尝试 11 以下的 id，因为 1-10 是为基本补丁资源预留的布局 ID：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5d8d0b19cef511819028acd5861f021b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-26T15:01:31+08:00" />
<meta property="article:modified_time" content="2022-06-26T15:01:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用 AppleALC 驱动黑苹果声卡</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>概述</p> 
<p></p> 
<p>近来发现很多新手似乎不太明白驱动声卡的流程，也有同学清楚需要使用 AppleALC.kext，也知道要注入 id，可是就在启动参数那里扔一个 alcid=1 就觉得“我完事了”?，这个其实还没完，还有一些步骤要做，本篇将详细介绍一下驱动声卡的详细方法。</p> 
<p></p> 
<p>瑞昱 ALC 芯片</p> 
<p>对于主流的 瑞昱 ALC 芯片（Realtek ALC），推荐使用 AppleALC.kext，它由 acidanthera 团队开发维护，是一个开放源代码内核扩展（Kernel Extension，缩写 kext），可以无需进行任何文件系统修改就可以为不受苹果官方支持的编解码器提供 HD 音频服务。目前来看，市面上大多数主板均板载了瑞昱的 ALC 芯片，所以 AppleALC.kext 也成为了主流驱动方案。</p> 
<p>如何确认你的音频芯片是不是瑞昱，具体是 ALC 哪一款，可以通过以下几种方法：</p> 
<p>鲁大师经典版，硬件检测标签下，声卡一栏在大部分情况下可以直接看到瑞昱以及具体 ALC 型号：</p> 
<p></p> 
<p>或者到主板的官方查看具体参数，比如微星 MPG Z490M</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4e/1c/SgBSOd4M_o.png"></p> 
<p>，一般情况下主板厂商会在参数页面明确标注出具体芯片的型号：</p> 
<p><img alt="" height="1" src="https://images2.imgbox.com/29/ab/SdcMeYt8_o.gif" width="1"></p> 
<p>此外，如果你已经安装好了 macOS，还可以使用 <a href="http://www.imacosx.cn/2706.html" rel="nofollow" title="Hackintool">Hackintool</a> → 音频 进行查看。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/0c/f6/YzluTPWt_o.png"></p> 
<p></p> 
<p>仅在极少数情况下，可能存在显示芯片型号和实际芯片型号不一致的情况，常见于 OEM 产品，比如联想的启天 M420 部分机型，此类情况请先百度自己的芯片型号以确定真实的型号。</p> 
<p>最后，除了瑞昱的 ALC 系列芯片外，AppleALC 还支持部分其他品牌的芯片（但型号都比较老旧），例如 AnalogDevices、Conexant，IDT 等，具体可参考下面的表格。</p> 
<p><a href="http://www.imacosx.cn/5206.html" rel="nofollow" title="黑苹果系列之alc声卡id速查表">黑苹果系列之alc声卡id速查表</a></p> 
<p>厂家 型号 id参数 AnalogDevices AD1984 0x100400, layout 11   ...</p> 
<p> 推荐 2021-12-22</p> 
<p></p> 
<p>找到合适的布局 ID</p> 
<p>下一步，根据你得到的 ALC 芯片型号信息，在上面的表中找到对应的布局 ID（layout-id），例如 ALC1220 的对应 id 有 1, 2, 3, 5, 7, 11, 13, 15, 16, 21, 27, 28, 29, 34 ，前面可能还有一个修订号，这个指的是硬件版本，个别型号就会有这类情况，就是布局 ID 特别多，不知道用哪个，这个时候推荐优先尝试 11 以下的 id，因为 1-10 是为基本补丁资源预留的布局 ID：</p> 
<ul><li>台式机优先 1, 2, 3, 5, 7</li><li>笔记本优先 1, 2, 3, 4, 5, 6, 7, 8</li></ul> 
<p></p> 
<p>注入启动参数测试布局 ID</p> 
<p>这里分为 OpenCore 和 Clover 两种情况。为了快速测出哪个布局 ID 适用你的硬件，推荐使用启动参数注入法。需要注意的是，无论使用 OpenCore 引导还是 Clover 引导，都不要使用下面的 ACPI 重命名补丁，因为 AppleALC 自己可以处理这些问题：</p> 
<ul><li>HDAS to HDEF</li><li>B0D3 to HDAU</li></ul> 
<p>OpenCore</p> 
<p><a href="http://www.imacosx.cn/2397.html" rel="nofollow" title="下载 AppleALC.kext">下载 AppleALC.kext</a>，把文件放到 /EFI/OC/Kexts/ 目录，然后使用你喜欢的编辑器编辑 config.plist 文件，找到以下位置：</p> 
<pre><code>NVRAM → 7C436110-AB2A-4BBB-A880-FE41995C9F82 → boot-args</code></pre> 
<p>以 ALC1220 为例，计划测试 1, 2, 3, 5, 7 这几个 ID，直接添加启动参数 alcid=1，重启后若没有效果则修改为 alcid=2，以此类推，直到找到适合使用的布局 ID。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4b/a3/DdsoRrbg_o.png"></p> 
<p>Clover</p> 
<p>使用三叶草引导的用户注意，注意需要先关闭以下选项：</p> 
<ul><li>ACPI → Fixes → FixHDA</li><li>ACPI → Fixes → AddHDMI</li><li>Devices → UseIntelHDMI</li><li>Devices → Audio → Inject 的值设置为 No</li></ul> 
<p>下载 AppleALC.kext，把文件放到 /EFI/Clover/Kexts/Other/ 目录，然后找到以下位置：</p> 
<pre><code>Boot → Arguments</code></pre> 
<p>以 ALC1220 为例，计划测试 1, 2, 3, 5, 7 这几个 ID，直接添加启动参数 alcid=1，重启后若没有效果则修改为 alcid=2，以此类推，直到找到适合使用的布局 ID。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d3/c0/cf4Zpw6F_o.png"></p> 
<p>固定注入 ALC 布局 ID</p> 
<p>经过上一步确定了要使用的 id 以后，就可以把信息固定到设备属性（DeviceProperties）中，这里分为 OpenCore 和 Clover 两种情况。</p> 
<p>OpenCore</p> 
<p>使用你中意的编辑器编辑 config.plist 文件，找到以下位置：</p> 
<pre><code>DeviceProperties → Devices</code></pre> 
<p>添加以下 Pci 位置：</p> 
<pre><code>PciRoot(0x0)/Pci(0x1F,0x3)</code></pre> 
<p>在大多数情况下，板载音频硬件位置就是上述位置，如果不是则可以使用下面的工具来确定具体位置。</p> 
<p> 可以通过 <a href="http://www.imacosx.cn/2706.html" rel="nofollow" title="Hackintool">Hackintool</a>进行查看</p> 
<p></p> 
<p></p> 
<p>图中红线箭头位置即是板载音频芯片所在的 Pci 位置，右键复制即可。</p> 
<p></p> 
<p>接下来，注入能让 AppleALC 正确运行的信息，以 OpenCore Configurator 为例，设置内容如下图：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b9/f2/Mn7Q8xpW_o.png"></p> 
<p>参数解释：</p> 
<p></p> 
<ul><li>AAPL,slot-name 指的是插槽名称，设置为 Built-in 的意思是“内建”，此项非必须；</li><li>device_type 指的是设备类型，设置为 Audio Device 的意思是“音频设备”，此项非必须；</li><li>model 指的是模型，设置为 300 Series PCH Audio 的意思是“300 系南桥音频”，此项非必须，可根据你自己主板的情况填写，具体可使用工具 Hackintool → PCIe 中查看 Multimedia Controller 类型的设备名称；</li><li>alc-delay 是一个较为特别的属性。在某些特定的情况下，硬件设备未能及时为 AppleHDAController 初始化，导致没有音频输出，较为常见的情况就是从休眠中唤醒。设置 alc-delay 在绝大多数情况下可以解决此类问题，值类型是 NUMBER，设置为 500 的意思是延时 500 毫秒。这个值可以设置为 3000 以内的数值（即最大延时不能超过 3 秒），此项非必须；</li><li>No-hda-gfx 用于不需要显卡音频输出的情况，设置此属性，并将值设置为 0，即可屏蔽独立显卡上的 HDMI/DP 音频输出，此项非必须；</li><li>layout-id 是 AppleALC 最核心的属性，可以使用 DATA 和 NUMBER 两种类型，但是不能同时存在两个 layout-id 属性，如果不熟悉十六进制就照图用 NUMBER 类型即可，此项必须。</li><li>「注意」如果你的声卡不是板载而是 PCI 或者外置的，需要再增加一个 external-audio 属性，值类型为 DATA，值设置为 01000000。</li></ul> 
<p></p> 
<p>Clover</p> 
<p>使用三叶草引导的用户注意，注意需要先关闭以下选项：</p> 
<ul><li>ACPI → Fixes → FixHDA</li><li>ACPI → Fixes → AddHDMI</li><li>Devices → UseIntelHDMI</li><li>Devices → Audio → Inject 的值设置为 No</li></ul> 
<p>然后找到下图中的位置进行设置：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/de/28/1LBkZImv_o.png"></p> 
<p></p> 
<p>参数解释：</p> 
<p></p> 
<ul><li>layout-id 是 AppleALC 最核心的属性，可以使用 DATA 和 NUMBER 两种类型，但是不能同时存在两个 layout-id 属性，如果不熟悉十六进制就照图用 NUMBER 类型即可，此项必须；</li><li>其它可注入内容可参考 OpenCore 的设置方法；</li><li>「注意」如果你的声卡不是板载而是 PCI 或者外置的，需要再增加一个 external-audio 属性，值类型为 DATA，值设置为 01000000。</li></ul> 
<p></p> 
<p>最后，删除启动参数中的 alcid=N，重启计算机即可。至此，使用 AppleALC.kext 驱动声卡的流程结束。</p> 
<p></p> 
<p>常见问题</p> 
<p><strong>Q：注入了所有列出的 id，都没有用。</strong></p> 
<p>A：打开终端，输入以下命令，检查 AppleALC 是否正确加载：</p> 
<pre><code>kextstat | grep -E "AppleHDA | AppleALC | Lilu"
</code></pre> 
<p>如果你看到三行分别包含 AppleHDA、AppleALC、Lilu 的输出结果，那么 AppleALC.kext 就是正常加载状态，注意，Lilu.kext 需要在 config 中排到第一位置，否则你的 macOS 系统会出现很多莫名其妙的问题。另外，请勿同时启用下面的 kexts，因为它们和 AppleALC 是冲突的：</p> 
<ul><li>RealtekALC.kext</li><li>CloverALC.kext</li><li>VoodooHDA.kext</li><li>HDABlocker.kext</li><li>HDAEnabler.kext</li></ul> 
<p></p> 
<p><strong>Q：我的芯片是 ALC，但是不在任何一个列表里怎么办？</strong></p> 
<p>A：这种情况先在网上搜索一下你得到的 ALC 芯片型号，有一些控制器是主板厂商自己重新更换了马甲的，例如 ALC3601，其真身是 ALC671。</p> 
<p></p> 
<p><strong>Q：从 Windows 热重启切换到 macOS 后音频丢失怎么办？</strong></p> 
<p>A：可以尝试添加启动参数 alctsel=1 或添加以下设备属性：</p> 
<pre><code>alctsel | Data | 01000000
</code></pre> 
<p><strong>Q：我的声卡无法用 AppleALC 驱动，怎么办？</strong></p> 
<p>A：可使用万能声卡驱动 VoodooHDA.kext，效果比 AppleALC 要差一些，不过至少解决了从无到有的问题。</p> 
<p><a class="link-info" href="http://www.imacosx.cn" rel="nofollow" title="黑苹果资源">黑苹果资源</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3c962c7ff41bfd86ca583a8d8cd10daf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python后端Flask学习项目实践---搭建一个问答网站</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b98377a70712880af6609285d3760f19/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">调试笔记1：UART&#43;DMA(串口&#43;dma)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>