<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring事务的传播：PROPAGATION_REQUIRED - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring事务的传播：PROPAGATION_REQUIRED" />
<meta property="og:description" content="PROPAGATION_REQUIRED-- 支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。 ServiceA { void methodA() { ServiceB.methodB(); } } ServiceB { void methodB() { } } PROPAGATION_REQUIRED 假如当前正要执行的事务不在另外一个事务里，那么就起一个新的事务 比如说，ServiceB.methodB的事务级别定义为PROPAGATION_REQUIRED, 那么由于执行ServiceA.methodA的时候 1、如果ServiceA.methodA已经起了事务，这时调用ServiceB.methodB，ServiceB.methodB看到自己已经运行在ServiceA.methodA的事务内部，就不再起新的事务。这时只有外部事务并且他们是共用的，所以这时ServiceA.methodA或者ServiceB.methodB无论哪个发生异常methodA和methodB作为一个整体都将一起回滚。 2、如果ServiceA.methodA没有事务，ServiceB.methodB就会为自己分配一个事务。这样，在ServiceA.methodA中是没有事务控制的。只是在ServiceB.methodB内的任何地方出现异常，ServiceB.methodB将会被回滚，不会引起ServiceA.methodA的回滚 -----------------以上为重点内容----------------以下为引用全文------------ 事务的嵌套概念 所谓事务的嵌套就是两个事务方法之间相互调用。spring事务开启 ，或者是基于接口的或者是基于类的代理被创建（ 注意一定要是代理，不能手动new 一个对象，并且此类（有无接口都行）一定要被代理——spring中的bean只要纳入了IOC管理都是被代理的 ）。所以在同一个类中一个方法调用另一个方法有事务的方法，事务是不会起作用的。 ### Spring默认情况下会对运行期例外(RunTimeException)，即uncheck异常，进行事务回滚。
如果遇到checked异常就不回滚。
如何改变默认规则：
1 让checked例外也回滚：在整个方法前加上 @Transactional(rollbackFor=Exception.class)
2 让unchecked例外不回滚： @Transactional(notRollbackFor=RunTimeException.class)
3 不需要事务管理的(只查询的)方法：@Transactional(propagation=Propagation.NOT_SUPPORTED)
上面三种方式也可在xml配置 spring事务传播属性 在 spring的 TransactionDefinition接口中一共定义了六种事务传播属性： PROPAGATION_REQUIRED -- 支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。 PROPAGATION_SUPPORTS -- 支持当前事务，如果当前没有事务，就以非事务方式执行。 PROPAGATION_MANDATORY -- 支持当前事务，如果当前没有事务，就抛出异常。 PROPAGATION_REQUIRES_NEW -- 新建事务，如果当前存在事务，把当前事务挂起。 PROPAGATION_NOT_SUPPORTED -- 以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。 PROPAGATION_NEVER -- 以非事务方式执行，如果当前存在事务，则抛出异常。 PROPAGATION_NESTED -- 如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。 前六个策略类似于EJB CMT，第七个（PROPAGATION_NESTED）是Spring所提供的一个特殊变量。 它要求事务管理器或者使用JDBC 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/25c1074106cb6ef494ea9c79deb6129b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-16T15:45:37+08:00" />
<meta property="article:modified_time" content="2018-05-16T15:45:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring事务的传播：PROPAGATION_REQUIRED</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:rgb(51,51,51);font-family:'Microsoft YaHei';font-size:18px;white-space:pre;background-color:rgb(255,255,255);"><span style="color:rgb(51,51,51);font-family:'Microsoft YaHei';font-size:18px;white-space:pre;background-color:rgb(255,255,255);">PROPAGATION_REQUIRED</span>-- 支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。 </span></p> 
<p><span style="color:rgb(51,51,51);font-family:'Microsoft YaHei';font-size:18px;white-space:pre;background-color:rgb(255,255,255);"></span></p> 
<ol start="1" class="dp-j" style="border-top:none;border-right:1px solid rgb(231,229,220);border-bottom:none;border-left:none;background-color:rgb(255,255,255);color:rgb(92,92,92);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;text-align:left;"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">ServiceA {  </span></span>         </li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     <span class="keyword" style="margin:0px;padding:0px;border:none;color:rgb(0,102,153);background-color:inherit;font-weight:bold;">void</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> methodA() {  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">         ServiceB.methodB();  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     }  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">}  </span>    </li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">ServiceB {  </span>         </li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     <span class="keyword" style="margin:0px;padding:0px;border:none;color:rgb(0,102,153);background-color:inherit;font-weight:bold;">void</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> methodB() {  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     }  </span>         </li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">}  </span></li></ol> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_REQUIRED</span></span></h3> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">假如当前正要执行的事务不在另外一个事务里，那么就起一个新的事务 <br>比如说，ServiceB.methodB的事务级别定义为PROPAGATION_REQUIRED, 那么由于执行ServiceA.methodA的时候</span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">  1、如果ServiceA.methodA已经起了事务，这时调用ServiceB.methodB，ServiceB.methodB看到自己已经运行在ServiceA.methodA的事务内部，就不再起新的事务。这时只有外部事务并且他们是共用的，所以这时<span style="line-height:26px;"><span style="color:rgb(255,0,0);">ServiceA.methodA或者</span><span style="line-height:26px;"><span style="color:rgb(255,0,0);">ServiceB.methodB无论哪个发生异常</span><span style="line-height:26px;"><span style="color:rgb(255,0,0);">methodA和<span style="line-height:26px;">methodB作为一个整体都将一起回滚。</span></span></span></span></span></span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">  2、如果ServiceA.methodA没有事务，<span style="line-height:26px;">ServiceB.methodB</span>就会为自己分配一个事务。这样，在ServiceA.methodA中是没有事务控制的。<span style="color:rgb(255,0,0);">只是在ServiceB.methodB内的任何地方出现异常，<span style="line-height:26px;">ServiceB.methodB将</span>会被回滚，不会引起<span style="line-height:26px;">ServiceA.methodA的</span>回滚</span></span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="color:rgb(255,0,0);">-----------------以上为重点内容----------------以下为引用全文------------</span></span></span> 
</div> 
<p></p> 
<h2 style="padding:0px;background-color:rgb(255,255,255);"><br></h2> 
<h2 style="padding:0px;background-color:rgb(255,255,255);">事务的嵌套概念</h2> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="white-space:pre;"></span> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;">所谓事务的嵌套就是两个事务方法之间相互调用。<span style="color:rgb(255,0,0);">spring事务开启 ，或者是基于接口的或者是基于类的代理被创建（</span></span> 
 <span style="font-family:'Microsoft YaHei';color:rgb(0,0,153);"><span style="font-weight:700;">注意一定要是代理，不能手动new 一个对象，并且此类（有无接口都行）一定要被代理——spring中的bean只要纳入了IOC管理都是被代理的</span></span> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="color:rgb(255,0,0);">）。所以在同一个类中一个方法调用另一个方法有事务的方法，事务是不会起作用的</span>。</span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;">###</span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;">Spring默认情况下会对运行期例外(RunTimeException)，即uncheck异常，进行事务回滚。<br></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;">如果遇到checked异常就不回滚。<br>如何改变默认规则：<br><br>1 让checked例外也回滚：在整个方法前加上 @Transactional(rollbackFor=Exception.class)<br><br><br>2 让unchecked例外不回滚： @Transactional(notRollbackFor=RunTimeException.class)<br><br><br>3 不需要事务管理的(只查询的)方法：@Transactional(propagation=Propagation.NOT_SUPPORTED)<br></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;">上面三种方式也可在xml配置</span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span> 
</div> 
<h2 style="padding:0px;background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';font-size:18px;">spring事务传播属性</span></h2> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="white-space:pre;"> 在 spring</span>的 TransactionDefinition接口<span style="white-space:pre;">中一共定义了六种事务传播属性</span>：</span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="white-space:pre;">PROPAGATION_REQUIRED -- 支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择。 <br>PROPAGATION_SUPPORTS -- 支持当前事务，如果当前没有事务，就以非事务方式执行。 <br>PROPAGATION_MANDATORY -- 支持当前事务，如果当前没有事务，就抛出异常。 <br>PROPAGATION_REQUIRES_NEW -- 新建事务，如果当前存在事务，把当前事务挂起。 <br>PROPAGATION_NOT_SUPPORTED -- 以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。 <br>PROPAGATION_NEVER -- 以非事务方式执行，如果当前存在事务，则抛出异常。 <br>PROPAGATION_NESTED -- 如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。 <br>前六个策略类似于EJB CMT，第七个（PROPAGATION_NESTED）是Spring所提供的一个特殊变量。 <br>它要求事务管理器或者使用JDBC 3.0 Savepoint API提供嵌套事务行为（如Spring的DataSourceTransactionManager） </span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <br> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <br> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">举例浅析Spring嵌套事务</span></span> 
 <br> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';"><span style="font-weight:700;"><span style="color:rgb(51,102,255);">ServiceA#methodA(我们称之为外部事务)，<span style="line-height:26px;">ServiceB#methodB(我们称之为外部事务)</span></span></span><br></span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"> </span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"></span></span> 
 <div class="dp-highlighter bg_java" style="padding:1px 0px 0px;margin:0px 0px 24px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:rgb(231,229,220);width:843.469px;"> 
  <div class="bar" style="padding:0px 0px 0px 45px;margin:0px;"> 
   <div class="tools" style="padding:3px 8px 10px 10px;margin:0px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;background-color:rgb(248,248,248);border-left:3px solid rgb(108,226,108);border-right:1px solid rgb(231,229,220);"> 
    [java]  
    <a href="https://blog.csdn.net/yuanlaishini2010/article/details/45792069#" class="ViewSource" title="view plain" style='background-image:url("https://csdnimg.cn/release/phoenix/images/ico_plain.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;font-size:9px;width:16px;height:16px;text-indent:-2000px;'>view plain</a> 
     <a href="https://blog.csdn.net/yuanlaishini2010/article/details/45792069#" class="CopyToClipboard" title="copy" style='background-image:url("https://csdnimg.cn/release/phoenix/images/ico_copy.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;font-size:9px;width:16px;height:16px;text-indent:-2000px;'>copy</a> 
    <div style="padding:0px;margin:0px;width:16px;height:16px;"></div> 
    <div style="padding:0px;margin:0px;width:16px;height:16px;"></div> 
     
   </div> 
  </div> 
  <ol start="1" class="dp-j" style="border-top:none;border-right:1px solid rgb(231,229,220);border-bottom:none;border-left:none;background-color:rgb(255,255,255);color:rgb(92,92,92);"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;"><span style="margin:0px;padding:0px;border:none;background-color:inherit;">ServiceA {  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">         </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     <span class="keyword" style="margin:0px;padding:0px;border:none;color:rgb(0,102,153);background-color:inherit;font-weight:bold;">void</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> methodA() {  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">         ServiceB.methodB();  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     }  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">}  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">ServiceB {  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">         </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     <span class="keyword" style="margin:0px;padding:0px;border:none;color:rgb(0,102,153);background-color:inherit;font-weight:bold;">void</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> methodB() {  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">     }  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">         </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">}  </span></li></ol> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_REQUIRED</span></span></h3> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">假如当前正要执行的事务不在另外一个事务里，那么就起一个新的事务 <br>比如说，ServiceB.methodB的事务级别定义为PROPAGATION_REQUIRED, 那么由于执行ServiceA.methodA的时候</span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">  1、如果ServiceA.methodA已经起了事务，这时调用ServiceB.methodB，ServiceB.methodB看到自己已经运行在ServiceA.methodA的事务内部，就不再起新的事务。这时只有外部事务并且他们是共用的，所以这时<span style="line-height:26px;"><span style="color:rgb(255,0,0);">ServiceA.methodA或者</span><span style="line-height:26px;"><span style="color:rgb(255,0,0);">ServiceB.methodB无论哪个发生异常</span><span style="line-height:26px;"><span style="color:rgb(255,0,0);">methodA和<span style="line-height:26px;">methodB作为一个整体都将一起回滚。</span></span></span></span></span></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">  2、如果ServiceA.methodA没有事务，<span style="line-height:26px;">ServiceB.methodB</span>就会为自己分配一个事务。这样，在ServiceA.methodA中是没有事务控制的。<span style="color:rgb(255,0,0);">只是在ServiceB.methodB内的任何地方出现异常，<span style="line-height:26px;">ServiceB.methodB将</span>会被回滚，不会引起<span style="line-height:26px;">ServiceA.methodA的</span>回滚</span><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_SUPPORTS</span></span></h3> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">如果当前在事务中，即以事务的形式运行，如果当前不再一个事务中，那么就以非事务的形式运行 <br></span></span> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_MANDATORY</span></span></h3> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">必须在一个事务中运行。也就是说，他只能被一个父事务调用。否则，他就要抛出异常<br></span></span> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_REQUIRES_NEW</span></span></h3> 
  <div style="padding:0px;margin:0px;"> 
   <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="color:rgb(51,51,255);">启动一个新的, 不依赖于环境的 "内部" 事务. 这个事务将被完全 commited 或 rolled back 而不依赖于外部事务, 它拥有自己的隔离范围, 自己的锁, 等等. 当内部事务开始执行时, 外部事务将被挂起, 内务事务结束时, 外部事务将继续执行. </span><br></span></span> 
  </div> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"> 比如我们设计ServiceA.methodA的事务级别为PROPAGATION_REQUIRED，ServiceB.methodB的事务级别为PROPAGATION_REQUIRES_NEW，那么当执行到ServiceB.methodB的时候，ServiceA.methodA所在的事务就会挂起，ServiceB.methodB会起一个新的事务，等待ServiceB.methodB的事务完成以后，他才继续执行。他与PROPAGATION_REQUIRED 的事务区别在于事务的回滚程度了。因为ServiceB.methodB是新起一个事务，那么就是存在两个不同的事务。</span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;color:rgb(51,51,255);">1、如果ServiceB.methodB已经提交，那么ServiceA.methodA失败回滚，ServiceB.methodB</span><span style="font-family:'Microsoft YaHei';font-size:18px;color:rgb(255,0,0);">是不会回滚的</span><span style="font-family:'Microsoft YaHei';font-size:18px;color:rgb(51,51,255);">。</span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="color:rgb(51,51,255);">2、如果ServiceB.methodB失败回滚，如果他抛出的异常被ServiceA.methodA的try..catch捕获并处理，ServiceA.methodA事务仍然可能提交；<span style="line-height:26px;">如果他抛出的异常未被<span style="line-height:26px;">ServiceA.methodA捕获处理，<span style="line-height:26px;">ServiceA.methodA事务将回滚。</span></span></span></span><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;">
   使用场景： 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="white-space:pre;">不管业务逻辑的service是否有异常，Log Service都应该能够记录成功</span>，所以Log Service的传播属性可以配为此属性。最下面将会贴出配置代码。 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_NOT_SUPPORTED</span></span></h3> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">当前不支持事务。比如ServiceA.methodA的事务级别是PROPAGATION_REQUIRED ，而ServiceB.methodB的事务级别是PROPAGATION_NOT_SUPPORTED ，那么当执行到ServiceB.methodB时，ServiceA.methodA的事务挂起，而他以非事务的状态运行完，再继续ServiceA.methodA的事务。<br></span></span> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_NEVER</span></span></h3> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">不能在事务中运行。假设ServiceA.methodA的事务级别是PROPAGATION_REQUIRED， 而ServiceB.methodB的事务级别是PROPAGATION_NEVER ，那么ServiceB.methodB就要抛出异常了。 <br></span></span> 
  <h3 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_NESTED</span></span></h3> 
  <div style="padding:0px;margin:0px;"> 
   <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><span style="color:rgb(0,0,153);">开始一个 "嵌套的" 事务,  它是已经存在事务的一个真正的子事务. 潜套事务开始执行时,  它将取得一个 savepoint. 如果这个嵌套事务失败, 我们将回滚到此 savepoint. 潜套事务是外部事务的一部分, 只有外部事务结束后它才会被提交. </span><br></span></span> 
  </div> 
  <div style="padding:0px;margin:0px;"> 
   <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
  </div> 
  <div style="padding:0px;margin:0px;"> 
   <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"></span></span> 
   <div style="padding:0px;margin:0px;font-family:'Microsoft YaHei';font-size:18px;line-height:26px;"> 
    比如我们设计ServiceA.methodA的事务级别为PROPAGATION_REQUIRED，ServiceB.methodB的事务级别为PROPAGATION_NESTED，那么当执行到ServiceB.methodB的时候，ServiceA.methodA所在的事务就会挂起，ServiceB.methodB会起一个<span style="font-weight:700;">新的子事务并设置savepoint</span>，等待ServiceB.methodB的事务完成以后，他才继续执行。。因为ServiceB.methodB是外部事务的子事务，那么 
   </div> 
   <div style="padding:0px;margin:0px;font-family:'Microsoft YaHei';font-size:18px;line-height:26px;"> 
    <span style="color:rgb(51,51,255);">1、如果ServiceB.methodB已经提交，那么ServiceA.methodA失败回滚，</span><span style="color:rgb(255,0,0);">ServiceB.methodB也将回滚。</span> 
   </div> 
   <div style="padding:0px;margin:0px;font-family:'Microsoft YaHei';font-size:18px;line-height:26px;"> 
    <span style="color:rgb(51,51,255);">2、如果ServiceB.methodB失败回滚，如果他抛出的异常被ServiceA.methodA的try..catch捕获并处理，ServiceA.methodA事务仍然可能提交；如果他抛出的异常未被ServiceA.methodA捕获处理，ServiceA.methodA事务将回滚。</span> 
   </div> 
   <br> 
  </div> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">理解Nested的关键是savepoint。他与PROPAGATION_REQUIRES_NEW的区别是：<br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">PROPAGATION_REQUIRES_NEW 完全是一个新的事务,它与外部事务相互独立； 而 PROPAGATION_NESTED 则是外部事务的子事务, 如果外部事务 commit, 嵌套事务也会被 commit, 这个规则同样适用于 roll back. <br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <h4 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">在 spring 中使用 PROPAGATION_NESTED的前提：</span></span></h4> 
 <div style="padding:0px;margin:0px;"> 
  <h5 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">1. 我们要设置 transactionManager 的 nestedTransactionAllowed 属性为 true, 注意, 此属性默认为 false!!! </span></span></h5> 
  <h5 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">2. java.sql.Savepoint 必须存在, 即 jdk 版本要 1.4+ </span></span></h5> 
  <h5 style="padding:0px;"><span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">3. Connection.getMetaData().supportsSavepoints() 必须为 true, 即 jdbc drive 必须支持 JDBC 3.0 </span></span></h5> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br>确保以上条件都满足后, 你就可以尝试使用 PROPAGATION_NESTED 了. <br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></span> 
 </div>############################################################################## 
</div> 
<h2 style="padding:0px;background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';font-size:18px;line-height:26px;">Log Service配置事务传播</span></h2> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;">不管业务逻辑的service是否有异常，Log Service都应该能够记录成功，通常有异常的调用更是用户关心的。Log Service如果沿用业务逻辑Service的事务的话在抛出异常时将没有办法记录日志(事实上是回滚了)。所以希望Log Service能够有独立的事务。日志和普通的服务应该具有不同的策略。Spring 配置文件transaction.xml:</span></span> 
</div> 
<div style="padding:0px;margin:0px;color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
 <span style="line-height:26px;"><span style="font-family:'Microsoft YaHei';font-size:18px;"></span></span> 
 <div class="dp-highlighter bg_html" style="padding:1px 0px 0px;margin:0px 0px 24px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;background-color:rgb(231,229,220);width:843.469px;"> 
  <div class="bar" style="padding:0px 0px 0px 45px;margin:0px;"> 
   <div class="tools" style="padding:3px 8px 10px 10px;margin:0px;font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;background-color:rgb(248,248,248);border-left:3px solid rgb(108,226,108);border-right:1px solid rgb(231,229,220);"> 
    [html]  
    <a href="https://blog.csdn.net/yuanlaishini2010/article/details/45792069#" class="ViewSource" title="view plain" style='background-image:url("https://csdnimg.cn/release/phoenix/images/ico_plain.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;font-size:9px;width:16px;height:16px;text-indent:-2000px;'>view plain</a> 
     <a href="https://blog.csdn.net/yuanlaishini2010/article/details/45792069#" class="CopyToClipboard" title="copy" style='background-image:url("https://csdnimg.cn/release/phoenix/images/ico_copy.gif");background-position:left top;background-repeat:no-repeat;background-color:inherit;border:none;padding:1px;margin:0px 10px 0px 0px;font-size:9px;width:16px;height:16px;text-indent:-2000px;'>copy</a> 
    <div style="padding:0px;margin:0px;width:16px;height:16px;"></div> 
    <div style="padding:0px;margin:0px;width:16px;height:16px;"></div> 
     
   </div> 
  </div> 
  <ol start="1" class="dp-xml" style="border-top:none;border-right:1px solid rgb(231,229,220);border-bottom:none;border-left:none;background-color:rgb(255,255,255);color:rgb(92,92,92);"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;"><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;?</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">xml</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">version</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"1.0"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">encoding</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"UTF-8"</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">?&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;"><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">beans</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">xmlns</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"http://www.springframework.org/schema/beans"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">xmlns:xsi</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">xmlns:aop</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"http://www.springframework.org/schema/aop"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">xmlns:tx</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"http://www.springframework.org/schema/tx"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">xsi:schemaLocation</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd"</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="comments" style="margin:0px;padding:0px;border:none;color:rgb(0,130,0);background-color:inherit;">&lt;!-- configure transaction --&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">  </span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:advice</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">id</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"defaultTxAdvice"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">transaction-manager</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"transactionManager"</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:attributes</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"get*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"query*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"find*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">propagation</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"REQUIRED"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">rollback-for</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"java.lang.Exception"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:attributes</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:advice</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:advice</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">id</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"logTxAdvice"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">transaction-manager</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"transactionManager"</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:attributes</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"get*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"query*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"find*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">read-only</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"true"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:method</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">name</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"*"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">propagation</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"REQUIRES_NEW"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">                <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">rollback-for</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"java.lang.Exception"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:attributes</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">tx:advice</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">  </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:config</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:pointcut</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">id</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"defaultOperation"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">expression</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"@within(com.homent.util.DefaultTransaction)"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:pointcut</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">id</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"logServiceOperation"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">            <span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">expression</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"execution(* com.homent.service.LogService.*(..))"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">              </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:advisor</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">advice-ref</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"defaultTxAdvice"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">pointcut-ref</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"defaultOperation"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">        <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:advisor</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">advice-ref</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"logTxAdvice"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="attribute" style="margin:0px;padding:0px;border:none;color:#FF0000;background-color:inherit;">pointcut-ref</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">=</span><span class="attribute-value" style="margin:0px;padding:0px;border:none;color:#0000FF;background-color:inherit;">"logServiceOperation"</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;"> </span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">/&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);color:inherit;line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;">    <span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">aop:config</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(108,226,108);background-color:rgb(248,248,248);line-height:18px;padding:0px 3px 0px 10px;margin-right:0px;margin-bottom:0px;list-style-position:outside;"><span style="margin:0px;padding:0px;border:none;color:#000000;background-color:inherit;"><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">beans</span><span class="tag" style="margin:0px;padding:0px;border:none;color:rgb(153,51,0);background-color:inherit;font-weight:bold;">&gt;</span><span style="margin:0px;padding:0px;border:none;background-color:inherit;">  </span></span></li></ol> 
 </div> 
 <div style="padding:0px;margin:0px;"> 
  <br> 
 </div> 
 <span style="font-family:'Microsoft YaHei';font-size:18px;"> 如上面的Spring配置文件所示，日志服务的事务策略配置为propagation="REQUIRES_NEW"，告诉Spring不管上下文是否有事务，Log Service被调用时都要求一个完全新的只属于Log Service自己的事务。通过该事务策略，Log Service可以独立的记录日志信息，不再受到业务逻辑事务的干扰。</span> 
 <br> 
 <br> 
 <br> 
</div> 
<p></p> 
<br> 
<p><span style="color:rgb(51,51,51);font-family:'Microsoft YaHei';font-size:18px;white-space:pre;background-color:rgb(255,255,255);"><br></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/21e782a2e1464ef3e33e5dfbd99f8149/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网站随机页面随机时间出现违规外链</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51f52e2fc7a0036fa00d40371aae46db/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue.js axios 加载数据到table</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>