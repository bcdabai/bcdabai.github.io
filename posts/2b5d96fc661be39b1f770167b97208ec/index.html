<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pycharm使用阿里云SDK发送短信（超详细&#43;避坑！！） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Pycharm使用阿里云SDK发送短信（超详细&#43;避坑！！）" />
<meta property="og:description" content="文章目录 1. 注册阿里云2. 创建签名3. 创建模板4. 创建AccessKey5. API发送测试6. 获取示例7. pycharm发送验证码7.1 安装sdk7.2 参数修改7.3 发送随机四位数字7.4 验证码信息返回7.5 简易版代码： 1. 注册阿里云 访问阿里云官网，进行注册
https://www.aliyun.com/ 同时进行实名认证
2. 创建签名 按下列顺序来到阿里云的短信服务
这里自行填入：
签名：就是你发送短信的标签，比如：【签名】您的验证码为：1234，您正在登录，若非本人操作，请勿泄露。
签名来源：我选择的是“测试或学习”（因为我本身也是用来做项目测试用的）
场景说明：也可以说明一下是自己用来学习测试用的。
更多资料：可以不用上传。
提交后等待审核即可，若审核未通过，就看看是什么原因造成的，再重新修改并添加。
3. 创建模板 这里需要等待签名审核通过后再创建模板。
模板类型：选择不同的类型，下面模板内容的提示描述不同。
模板名称：就是简单描述你这个模板是干嘛的，比如上图我创建了两个模板“用户注册”和“登录验证码”，一个就是拿来登录用的，另一个就是拿来注册用的。
模板内容：就是短信具体的内容了，比如我前面举的例子（您的验证码为：1234，您正在登录，若非本人操作，请勿泄露。）注意，【签名】是它自动帮你生成的，不用管。还要注意下面说的变量，看看它提供的变量格式就明白了。
应用场景：就自己填写了，我之前自己创建了一个公众号，就用了公众号的名字。
场景说明：就按照它说明的，写上用来测试账号即可。
创建好后等待审核通过即可。
4. 创建AccessKey 我这里选择的是继续使用AccessKey
创建好后就会显示你的ID和Secret，一定要保存好AccessKey Secret，因为一旦关掉这个后后面就找不到它了。
这样AccessKey就创建好了。
5. API发送测试 提前购买一些短信套餐，新人有折扣挺便宜的，也就几块钱，这里不多说。
就是在这个页面往上拉一点就能看到“购买国内套餐包”。
点击“调用API发送短信”后来到这个页面
直接点击“发送调用”，它会提示你会产生费用，所以我们最好提前购买好套餐。
然后就可以从手机上看到了
6. 获取示例 测试后我们回到刚刚的网页，按顺序点击
第三个步骤是复制上面的python代码，复制后的代码我放在下面了。
# -*- coding: utf-8 -*- # This file is auto-generated, don&#39;t edit it. Thanks. import os import sys from typing import List from alibabacloud_dysmsapi20170525." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2b5d96fc661be39b1f770167b97208ec/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-31T14:13:21+08:00" />
<meta property="article:modified_time" content="2023-10-31T14:13:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Pycharm使用阿里云SDK发送短信（超详细&#43;避坑！！）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1. 注册阿里云</a></li><li><a href="#2__16" rel="nofollow">2. 创建签名</a></li><li><a href="#3__44" rel="nofollow">3. 创建模板</a></li><li><a href="#4_AccessKey_68" rel="nofollow">4. 创建AccessKey</a></li><li><a href="#5_API_90" rel="nofollow">5. API发送测试</a></li><li><a href="#6__113" rel="nofollow">6. 获取示例</a></li><li><a href="#7_pycharm_209" rel="nofollow">7. pycharm发送验证码</a></li><li><ul><li><a href="#71_sdk_213" rel="nofollow">7.1 安装sdk</a></li><li><a href="#72__235" rel="nofollow">7.2 参数修改</a></li><li><a href="#73__247" rel="nofollow">7.3 发送随机四位数字</a></li><li><a href="#74__255" rel="nofollow">7.4 验证码信息返回</a></li><li><a href="#75__261" rel="nofollow">7.5 简易版代码：</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1__2"></a>1. 注册阿里云</h2> 
<p>访问阿里云官网，进行注册</p> 
<pre><code>https://www.aliyun.com/
</code></pre> 
<p>同时进行实名认证</p> 
<h2><a id="2__16"></a>2. 创建签名</h2> 
<p>按下列顺序来到阿里云的短信服务</p> 
<p><img src="https://images2.imgbox.com/70/0a/TOdPTI4d_o.png" alt="image-20231029231134350"></p> 
<p><img src="https://images2.imgbox.com/5a/4b/GVwLcDJI_o.png" alt="image-20231029231247418"></p> 
<p><img src="https://images2.imgbox.com/4b/c4/142tKo2f_o.png" alt="image-20231029231345049"></p> 
<p>这里自行填入：</p> 
<ul><li> <p>签名：就是你发送短信的标签，比如：【签名】您的验证码为：1234，您正在登录，若非本人操作，请勿泄露。</p> </li><li> <p>签名来源：我选择的是“测试或学习”（因为我本身也是用来做项目测试用的）</p> </li><li> <p>场景说明：也可以说明一下是自己用来学习测试用的。</p> </li><li> <p>更多资料：可以不用上传。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/61/ce/qdXRQUho_o.png" alt="image-20231029231440151"></p> 
<p>提交后等待审核即可，若审核未通过，就看看是什么原因造成的，再重新修改并添加。</p> 
<h2><a id="3__44"></a>3. 创建模板</h2> 
<p><img src="https://images2.imgbox.com/c4/17/L7aHFjA4_o.png" alt="image-20231029231911946"></p> 
<p>这里需要等待签名审核通过后再创建模板。</p> 
<ul><li> <p>模板类型：选择不同的类型，下面模板内容的提示描述不同。</p> </li><li> <p>模板名称：就是简单描述你这个模板是干嘛的，比如上图我创建了两个模板“用户注册”和“登录验证码”，一个就是拿来登录用的，另一个就是拿来注册用的。</p> </li><li> <p>模板内容：就是短信具体的内容了，比如我前面举的例子（您的验证码为：1234，您正在登录，若非本人操作，请勿泄露。）注意，【签名】是它自动帮你生成的，不用管。还要注意下面说的变量，看看它提供的变量格式就明白了。</p> </li><li> <p>应用场景：就自己填写了，我之前自己创建了一个公众号，就用了公众号的名字。</p> </li><li> <p>场景说明：就按照它说明的，写上用来测试账号即可。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/4e/45/Lo82taPb_o.png" alt="image-20231029231952798"></p> 
<p>创建好后等待审核通过即可。</p> 
<h2><a id="4_AccessKey_68"></a>4. 创建AccessKey</h2> 
<p><img src="https://images2.imgbox.com/c3/13/GXJIxcgj_o.png" alt="image-20231029232928780"></p> 
<p>我这里选择的是继续使用AccessKey</p> 
<p><img src="https://images2.imgbox.com/e5/db/1NDr8XUf_o.png" alt="image-20231029233054083"></p> 
<p><img src="https://images2.imgbox.com/d0/b4/JWKsix0K_o.png" alt="image-20231029233201930"></p> 
<p>创建好后就会显示你的ID和Secret，一定要保存好AccessKey Secret，因为一旦关掉这个后后面就找不到它了。</p> 
<p><img src="https://images2.imgbox.com/28/d3/r8cPSorZ_o.png" alt="image-20231029233303887"></p> 
<p>这样AccessKey就创建好了。</p> 
<h2><a id="5_API_90"></a>5. API发送测试</h2> 
<p>提前购买一些短信套餐，新人有折扣挺便宜的，也就几块钱，这里不多说。</p> 
<p><img src="https://images2.imgbox.com/e9/1e/VR6DqVBC_o.png" alt="image-20231029233554117"></p> 
<p>就是在这个页面往上拉一点就能看到“购买国内套餐包”。</p> 
<p><img src="https://images2.imgbox.com/69/e8/pGbHcdyW_o.png" alt="image-20231029233730491"></p> 
<p>点击“调用API发送短信”后来到这个页面</p> 
<p><img src="https://images2.imgbox.com/4d/6f/MakHNMzV_o.png" alt="image-20231029233925841"></p> 
<p>直接点击“发送调用”，它会提示你会产生费用，所以我们最好提前购买好套餐。</p> 
<p><img src="https://images2.imgbox.com/39/56/AjN3iB9u_o.png" alt="image-20231029234244669"></p> 
<p>然后就可以从手机上看到了</p> 
<p><img src="https://images2.imgbox.com/f1/1b/vgRC9FRV_o.jpg" alt=""></p> 
<h2><a id="6__113"></a>6. 获取示例</h2> 
<p>测试后我们回到刚刚的网页，按顺序点击</p> 
<p><img src="https://images2.imgbox.com/98/2e/XJClTHdi_o.png" alt="image-20231029234356890"></p> 
<p>第三个步骤是复制上面的python代码，复制后的代码我放在下面了。</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># This file is auto-generated, don't edit it. Thanks.</span>
<span class="token keyword">import</span> os
<span class="token keyword">import</span> sys

<span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">from</span> alibabacloud_dysmsapi20170525<span class="token punctuation">.</span>client <span class="token keyword">import</span> Client <span class="token keyword">as</span> Dysmsapi20170525Client
<span class="token keyword">from</span> alibabacloud_tea_openapi <span class="token keyword">import</span> models <span class="token keyword">as</span> open_api_models
<span class="token keyword">from</span> alibabacloud_dysmsapi20170525 <span class="token keyword">import</span> models <span class="token keyword">as</span> dysmsapi_20170525_models
<span class="token keyword">from</span> alibabacloud_tea_util <span class="token keyword">import</span> models <span class="token keyword">as</span> util_models
<span class="token keyword">from</span> alibabacloud_tea_util<span class="token punctuation">.</span>client <span class="token keyword">import</span> Client <span class="token keyword">as</span> UtilClient


<span class="token keyword">class</span> <span class="token class-name">Sample</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">create_client</span><span class="token punctuation">(</span>
        access_key_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
        access_key_secret<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Dysmsapi20170525Client<span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        使用AK&amp;SK初始化账号Client
        @param access_key_id:
        @param access_key_secret:
        @return: Client
        @throws Exception
        """</span>
        config <span class="token operator">=</span> open_api_models<span class="token punctuation">.</span>Config<span class="token punctuation">(</span>
            <span class="token comment"># 必填，您的 AccessKey ID,</span>
            access_key_id<span class="token operator">=</span>access_key_id<span class="token punctuation">,</span>
            <span class="token comment"># 必填，您的 AccessKey Secret,</span>
            access_key_secret<span class="token operator">=</span>access_key_secret
        <span class="token punctuation">)</span>
        <span class="token comment"># Endpoint 请参考 https://api.aliyun.com/product/Dysmsapi</span>
        config<span class="token punctuation">.</span>endpoint <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'dysmsapi.aliyuncs.com'</span></span>
        <span class="token keyword">return</span> Dysmsapi20170525Client<span class="token punctuation">(</span>config<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>
        args<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token comment"># 请确保代码运行环境设置了环境变量 ALIBABA_CLOUD_ACCESS_KEY_ID 和 ALIBABA_CLOUD_ACCESS_KEY_SECRET。</span>
        <span class="token comment"># 工程代码泄露可能会导致 AccessKey 泄露，并威胁账号下所有资源的安全性。以下代码示例使用环境变量获取 AccessKey 的方式进行调用，仅供参考，建议使用更安全的 STS 方式，更多鉴权访问方式请参见：https://help.aliyun.com/document_detail/378659.html</span>
        client <span class="token operator">=</span> Sample<span class="token punctuation">.</span>create_client<span class="token punctuation">(</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'ALIBABA_CLOUD_ACCESS_KEY_ID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'ALIBABA_CLOUD_ACCESS_KEY_SECRET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        send_sms_request <span class="token operator">=</span> dysmsapi_20170525_models<span class="token punctuation">.</span>SendSmsRequest<span class="token punctuation">(</span>
            sign_name<span class="token operator">=</span><span class="token string">'零贰IT'</span><span class="token punctuation">,</span>
            template_code<span class="token operator">=</span><span class="token string">'SMS_463629337'</span><span class="token punctuation">,</span>
            phone_numbers<span class="token operator">=</span><span class="token string">'15723267119'</span><span class="token punctuation">,</span>
            template_param<span class="token operator">=</span><span class="token string">'{"code":"1234"}'</span>
        <span class="token punctuation">)</span>
        runtime <span class="token operator">=</span> util_models<span class="token punctuation">.</span>RuntimeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 复制代码运行请自行打印 API 的返回值</span>
            client<span class="token punctuation">.</span>send_sms_with_options<span class="token punctuation">(</span>send_sms_request<span class="token punctuation">,</span> runtime<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
            <span class="token comment"># 如有需要，请打印 error</span>
            UtilClient<span class="token punctuation">.</span>assert_as_string<span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main_async</span><span class="token punctuation">(</span>
        args<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token comment"># 请确保代码运行环境设置了环境变量 ALIBABA_CLOUD_ACCESS_KEY_ID 和 ALIBABA_CLOUD_ACCESS_KEY_SECRET。</span>
        <span class="token comment"># 工程代码泄露可能会导致 AccessKey 泄露，并威胁账号下所有资源的安全性。以下代码示例使用环境变量获取 AccessKey 的方式进行调用，仅供参考，建议使用更安全的 STS 方式，更多鉴权访问方式请参见：https://help.aliyun.com/document_detail/378659.html</span>
        client <span class="token operator">=</span> Sample<span class="token punctuation">.</span>create_client<span class="token punctuation">(</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'ALIBABA_CLOUD_ACCESS_KEY_ID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'ALIBABA_CLOUD_ACCESS_KEY_SECRET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        send_sms_request <span class="token operator">=</span> dysmsapi_20170525_models<span class="token punctuation">.</span>SendSmsRequest<span class="token punctuation">(</span>
            sign_name<span class="token operator">=</span><span class="token string">'零贰IT'</span><span class="token punctuation">,</span>
            template_code<span class="token operator">=</span><span class="token string">'SMS_463629337'</span><span class="token punctuation">,</span>
            phone_numbers<span class="token operator">=</span><span class="token string">'15723267119'</span><span class="token punctuation">,</span>
            template_param<span class="token operator">=</span><span class="token string">'{"code":"1234"}'</span>
        <span class="token punctuation">)</span>
        runtime <span class="token operator">=</span> util_models<span class="token punctuation">.</span>RuntimeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># 复制代码运行请自行打印 API 的返回值</span>
            <span class="token keyword">await</span> client<span class="token punctuation">.</span>send_sms_with_options_async<span class="token punctuation">(</span>send_sms_request<span class="token punctuation">,</span> runtime<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
            <span class="token comment"># 如有需要，请打印 error</span>
            UtilClient<span class="token punctuation">.</span>assert_as_string<span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    Sample<span class="token punctuation">.</span>main<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="7_pycharm_209"></a>7. pycharm发送验证码</h2> 
<h3><a id="71_sdk_213"></a>7.1 安装sdk</h3> 
<p>打开pycharm，新建一个py文件，将刚刚复制的代码粘贴上去</p> 
<p><img src="https://images2.imgbox.com/77/25/OVKzt2nA_o.png" alt="image-20231029234603245"></p> 
<p>此时可以看到有很多报错，这是因为我们还没有安装sdk。下面进行安装</p> 
<p>直接pip install的话很多会报错，而且速度比较慢，这里用清华镜像源安装。</p> 
<pre><code>pip install alibabacloud_dysmsapi20170525 -i https://pypi.tuna.tsinghua.edu.cn/simple

pip install alibabacloud_tea_openapi -i https://pypi.tuna.tsinghua.edu.cn/simple

pip install alibabacloud_tea_util -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre> 
<p>安装了前两个后发现第三个也不是非要安装0.0，所以我们安装前两个就好。</p> 
<h3><a id="72__235"></a>7.2 参数修改</h3> 
<p><img src="https://images2.imgbox.com/f9/39/fH0xHzwQ_o.png" alt="image-20231029235450896"></p> 
<p>注意，不止这一处的代码需要修改，下面的代码也有这样的参数需要修改。</p> 
<p>修改好后运行就能发送验证码了。</p> 
<h3><a id="73__247"></a>7.3 发送随机四位数字</h3> 
<p>添加如下代码即可：</p> 
<p><img src="https://images2.imgbox.com/fe/f0/QIg3EAV0_o.png" alt="image-20231029235706101"></p> 
<p><img src="https://images2.imgbox.com/eb/6b/EwHs7OKY_o.png" alt="image-20231030000527990"></p> 
<h3><a id="74__255"></a>7.4 验证码信息返回</h3> 
<p>在main函数里将send_sms_request返回即可</p> 
<p><img src="https://images2.imgbox.com/cb/82/XAkytwxz_o.png" alt="image-20231030000011893"></p> 
<h3><a id="75__261"></a>7.5 简易版代码：</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> alibabacloud_dysmsapi20170525<span class="token punctuation">.</span>client <span class="token keyword">import</span> Client <span class="token keyword">as</span> Dysmsapi20170525Client
<span class="token keyword">from</span> alibabacloud_tea_openapi <span class="token keyword">import</span> models <span class="token keyword">as</span> open_api_models
<span class="token keyword">from</span> alibabacloud_dysmsapi20170525 <span class="token keyword">import</span> models <span class="token keyword">as</span> dysmsapi_20170525_models
<span class="token keyword">from</span> alibabacloud_tea_util <span class="token keyword">import</span> models <span class="token keyword">as</span> util_models
<span class="token keyword">from</span> alibabacloud_tea_util<span class="token punctuation">.</span>client <span class="token keyword">import</span> Client <span class="token keyword">as</span> UtilClient

<span class="token keyword">import</span> random

code <span class="token operator">=</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">create_client</span><span class="token punctuation">(</span>access_key_id<span class="token punctuation">,</span> access_key_secret<span class="token punctuation">)</span><span class="token punctuation">:</span>
    config <span class="token operator">=</span> open_api_models<span class="token punctuation">.</span>Config<span class="token punctuation">(</span>
        access_key_id<span class="token operator">=</span>access_key_id<span class="token punctuation">,</span>
        access_key_secret<span class="token operator">=</span>access_key_secret
    <span class="token punctuation">)</span>
    config<span class="token punctuation">.</span>endpoint <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'dysmsapi.aliyuncs.com'</span></span>
    <span class="token keyword">return</span> Dysmsapi20170525Client<span class="token punctuation">(</span>config<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">send_sms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    client <span class="token operator">=</span> create_client<span class="token punctuation">(</span><span class="token string">'AccessKey ID'</span><span class="token punctuation">,</span> <span class="token string">'AccessKey Secret'</span><span class="token punctuation">)</span>
    send_sms_request <span class="token operator">=</span> dysmsapi_20170525_models<span class="token punctuation">.</span>SendSmsRequest<span class="token punctuation">(</span>
        sign_name<span class="token operator">=</span>'签名<span class="token punctuation">,</span>
        template_code<span class="token operator">=</span><span class="token string">'模板号'</span><span class="token punctuation">,</span>
        phone_numbers<span class="token operator">=</span><span class="token string">'手机号'</span><span class="token punctuation">,</span>
        <span class="token comment"># template_param='{"code":"4567"}'</span>
        template_param<span class="token operator">=</span><span class="token string">'{"code":"'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"}'</span>
    <span class="token punctuation">)</span>
    runtime <span class="token operator">=</span> util_models<span class="token punctuation">.</span>RuntimeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 复制代码运行请自行打印 API 的返回值</span>
        client<span class="token punctuation">.</span>send_sms_with_options<span class="token punctuation">(</span>send_sms_request<span class="token punctuation">,</span> runtime<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
        <span class="token comment"># 如有需要，请打印 error</span>
        UtilClient<span class="token punctuation">.</span>assert_as_string<span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token keyword">return</span> send_sms_request

<span class="token keyword">print</span><span class="token punctuation">(</span>send_sms<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26ed4edc2251a7bd23e1ca7cf88933c8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">轻量级gif制作工具 GIFfun中文 for mac</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb71e98fa7132267a73e437cb8fd9634/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Fastjson与Gson的简单使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>