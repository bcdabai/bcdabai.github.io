<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Java】节点流 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Java】节点流" />
<meta property="og:description" content="节点流 文件节点流 FileInputStream和FileOutputStream是文件字节流，是一种节点流
文件字节输入流的构造方法：
FileInputStream(“文件名称”)，如果文件不存在则FileNotFoundExceptionFileInputStream(File)
文件字节输出流的构造方法:FileOutputStream(“文件名称”) 如果文件不存在则新建文件，如果文件存在则覆盖文件内容FileOutputStream(String name文件名称, boolean append是否采用追加方式)
FileReader和FileWriter类似 FileInputStream和FileOutputStream两个类属于结点流，第一个类的源端和第二个类的目的端都是磁盘文件，它们的构造方法允许通过文件的路径名来构造相应的流。
如：
FileInputStream infile = new FileInputStream(“myfile.dat”);
FileOutputStream outfile = new FileOutputStream(“results.dat”);
要注意的是，构造FileInputStream, 对应的文件必须存在并且是可读的，而构造FileOutputStream时，如输出文件已存在，则必须是可覆盖的。
要求：将d盘上的TestFile.java拷贝到e盘，并命名为dd.txt
try (InputStream is = new FileInputStream(&#34;d:/TestFile.java&#34;); OutputStream os=new FileOutputStream(&#34;e:\\dd.txt&#34;); ) { byte[] buffer=new byte[8192]; int len=is.read(buffer); while(len&gt;0){ os.write(buffer,0,len); len=is.read(buffer); } }catch(IOException e){ e.printStackTrace(); } 构造输出文件流时可以使用两种不同的方式 OutputStream os=new FileOutputStream(&#34;e:\\dd.txt&#34;); 如果文件不存在则自动创建；如 果文件存在则进行覆盖 OutputStream os=new FileOutputStream(&#34;e:\\dd.txt&#34;,true),这里的boolean类型参数 表示是否采用追加的方式写入文件 需求1：拷贝c:\windows到d:\ddd文件夹
需求2：设计程序将aa.java和bb.java两个文件合并成一个文件，命名为cc.txt。
需求3：设计程序将cc.txt按尺寸等分拆分成两个文件c1.txt和c2.txt。
内存数组节点 如果文本则使用char[]，如果二进制则使用byte[]
构造器方法
CharArrayReader(char[] buf)其中char[]就是数据的来源，也就是说Reader就是从char[]中读取数据CharArrayRead(char[] buf, int offset, int length)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8543486158dcaa93589308d1fffcfc77/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-03T19:53:54+08:00" />
<meta property="article:modified_time" content="2022-08-03T19:53:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Java】节点流</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>节点流</h3> 
<p><img src="https://images2.imgbox.com/5a/41/1VxvR1Py_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_2"></a>文件节点流</h4> 
<p>FileInputStream和FileOutputStream是文件字节流，是一种节点流<br> 文件字节输入流的构造方法：</p> 
<ul><li>FileInputStream(“文件名称”)，如果文件不存在则FileNotFoundException</li><li>FileInputStream(File)<br> 文件字节输出流的构造方法:</li><li>FileOutputStream(“文件名称”) 如果文件不存在则新建文件，如果文件存在则覆盖文件内容</li><li>FileOutputStream(String name文件名称, boolean append是否采用追加方式)<br> FileReader和FileWriter类似</li></ul> 
<p>FileInputStream和FileOutputStream两个类属于结点流，第一个类的源端和第二个类的目的端都是磁盘文件，它们的构造方法允许通过文件的路径名来构造相应的流。<br> 如：<br> FileInputStream infile = new FileInputStream(“myfile.dat”);<br> FileOutputStream outfile = new FileOutputStream(“results.dat”);<br> 要注意的是，构造FileInputStream, 对应的文件必须存在并且是可读的，而构造FileOutputStream时，如输出文件已存在，则必须是可覆盖的。<br> 要求：将d盘上的TestFile.java拷贝到e盘，并命名为dd.txt</p> 
<pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:/TestFile.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">OutputStream</span> os<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"e:\\dd.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">8192</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
len<span class="token operator">=</span>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
构造输出文件流时可以使用两种不同的方式
<span class="token class-name">OutputStream</span> os<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"e:\\dd.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 如果文件不存在则自动创建；如
果文件存在则进行覆盖
<span class="token class-name">OutputStream</span> os<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"e:\\dd.txt"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>这里的<span class="token keyword">boolean</span>类型参数
表示是否采用追加的方式写入文件
</code></pre> 
<p>需求1：拷贝c:\windows到d:\ddd文件夹<br> 需求2：设计程序将aa.java和bb.java两个文件合并成一个文件，命名为cc.txt。<br> 需求3：设计程序将cc.txt按尺寸等分拆分成两个文件c1.txt和c2.txt。</p> 
<h4><a id="_40"></a>内存数组节点</h4> 
<p>如果文本则使用char[]，如果二进制则使用byte[]<br> 构造器方法</p> 
<ul><li>CharArrayReader(char[] buf)其中char[]就是数据的来源，也就是说Reader就是从char[]中读取数据</li><li>CharArrayRead(char[] buf, int offset, int length)<br> CharArrayWriter用于实现向一个字符数组中写入数据，这个数组可以自动调整大小<br> ByteArrayInputStream、ByteArrayOutputStream和CharArrayReader以及CharArrayWriter类似，支持操作的内容不同而已，操作byte[]与char[]</li></ul> 
<h4><a id="_47"></a>内存字串流</h4> 
<p>StringReader用于从一个字串String中读取数据</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> str<span class="token operator">=</span><span class="token string">"亚洲说：‘我爱小黑’"</span><span class="token punctuation">;</span>
<span class="token class-name">StringReader</span> sr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> cc<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cc<span class="token operator">=</span>sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>cc<span class="token punctuation">)</span><span class="token punctuation">;</span>
sr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>StringWriter用于给一个StringBuffer中写入数据，实现一个可边长的字串</p> 
<pre><code class="prism language-java"><span class="token class-name">Scanner</span> sc<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span><span class="token punctuation">(</span>
<span class="token class-name">StringWriter</span> sw<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Writer</span> fw<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"c:/console.txt"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token class-name">String</span> temp<span class="token operator">=</span>sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>temp<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"quit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> temp<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span>
sw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>temp<span class="token operator">+</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
temp<span class="token operator">=</span>sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_73"></a>总结</h4> 
<ul><li>读写文件使用节点流FileInputStream/FileOutputStream和FileReader/FileWriter，如果操作文本文件，建议使用FileReader/FileWriter，如果操作二进制文件建议使用<br> FileInputStream/FileOutputStream</li><li>需要建立缓冲区(建立临时文件的方式效率低),可以考虑使用内存节点，例如<br> CharArrayReader/CharArrayWriter、StringReader/StringWriter和<br> ByteArrayInputStream/ByteArrayOutputStream</li><li>如果需要一个二进制缓冲区可以使用ByteArrayInputStream/ByteArrayOutputStream，如果需要一个字符缓存可以使用CharArrayReader/CharArrayWriter、StringReader/StringWriter</li><li>如果数据量不是特别大使用CharArrayReader/CharArrayWriter更为方便，如果数据量大而且可能需要直接操作缓冲区则使用StringReader/StringWriter</li><li>StringWriter中提供了方法getBuffer():StringBuffer</li></ul> 
<h3><a id="_82"></a>过滤流类型</h3> 
<p>过滤流就是在节点流的基础上附加功能<br> <img src="https://images2.imgbox.com/32/5c/hVh68oHI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_85"></a>过滤流</h4> 
<p>就是decorate模式中的抽象装饰角色<br> FilterInputStream/FilterOutputStream和FilterReader/FilterWriter</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterInputStream</span> <span class="token keyword">extends</span> <span class="token class-name">InputStream</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//典型的装饰模式</span>
<span class="token keyword">protected</span> <span class="token keyword">volatile</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">;</span> <span class="token comment">//被装饰目标</span>
<span class="token keyword">protected</span> <span class="token class-name">FilterInputStream</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> in<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//通过构造器组装被装饰对象</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>in <span class="token operator">=</span> in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//调用Filter中的read方法时实际操作是由</span>
被装饰对象实现的
<span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>所谓的过滤流实际上就是类似上面的加密处理，在输入之后（后置处理，被装饰对象先执行）或者输出之前（前置处理，先处理然后被装饰对象执行）进行一下额外的处理，最终实际操作是调用被装饰对象的方法完成工作，依靠这种装饰模式实现在节点流的基础上附加额外功能.当然也允许多个过滤流嵌套从而达到功能累加的目的</p> 
<p>FilterInputStream实际上就是一个装饰抽象角色<br> 自定义流实现循环13加密:<br> 读取数据不变:FileReader—BufferedReader<br> 写出数据自定义过滤流SecurityWriter(FilterWriter)</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityWriter</span> <span class="token keyword">extends</span> <span class="token class-name">FilterWriter</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">protected</span> <span class="token class-name">SecurityWriter</span><span class="token punctuation">(</span><span class="token class-name">Writer</span> out<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">super</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token char">'a'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token char">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">-</span> <span class="token char">'a'</span> <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token char">'a'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token char">'A'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">-</span> <span class="token char">'A'</span> <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token char">'A'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityReader</span> <span class="token keyword">extends</span> <span class="token class-name">FilterReader</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">protected</span> <span class="token class-name">SecurityReader</span><span class="token punctuation">(</span><span class="token class-name">Reader</span> in<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">super</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token char">'a'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token char">'z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">-</span> <span class="token char">'a'</span> <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token char">'a'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token char">'A'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">-</span> <span class="token char">'A'</span> <span class="token operator">+</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token char">'A'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<p>加密算法：<br> 数字：如果不是9的数字，在原来的基础上加1，比如5变成6, 3变成4，如果是9的数字，变成0。<br> 字母字符：如果是非z字符，向右移动一个，比如d变成e, G变成H，如果是z，z-&gt;a, Z-A。字符需要保留大小写<br> 非字母字符：比如‘,&amp;^ 保留不变，中文也保留不变<br> 数字字符解密-1可以等价于+9，字母解密-1可以等价于+25</p> 
<h4><a id="_141"></a>桥接转换流</h4> 
<p>InputStreamReader和OutputStreamWriter是java.io包中用于处理字符流的最基本的类，用来在字节流和字符流之间作为中介：从字节输入流读入字节，并按编码规范转换为字符；往字节输出流写字符时先将字符按编码规范转换为字节。使用这两者进行字符处理时，在构造方法中应指定一定的平台规范，以便把以字节方式表示的流转换为特定平台上的字符表示。</p> 
<p>转换流可以在构造时指定其编码字符集</p> 
<p>InputStreamReader用于将一个InputStream类型的输入流自动转换为Reader字符流<br> OutputStreamWriter用于将一个Writer字符输出流转换为OutputStream字节输出流</p> 
<h5><a id="InputStreamReader_148"></a>InputStreamReader构造器</h5> 
<ul><li>InputStreamReader(InputStream)</li><li>InputStreamReader(InputStream, String)</li><li>InputStreamReader(InputStream, Charset)</li><li>InputStreamReader(InputStream, CharsetDecorder)</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">Reader</span> r<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> kk<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//例如输入的是“中国”，这里实际读取的是"中"</span>
<span class="token comment">//因为这里读取的是一个字节，所以输入"中国"，实际读取的是"中"的一个字节，输出显示为?</span>
kk<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入的是："</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>kk<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>InputSteram is=new InputStreamReader(System.in,”iso8859-1”);</p> 
<pre><code class="prism language-java"><span class="token class-name">Reader</span> r<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">,</span> <span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> kk<span class="token operator">=</span>r<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//例如输入的是"中国"，实际读取的是"中"</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入的是："</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>kk<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>注意：一般不建议自行设置编码字符集，除非是必须的</strong><br> <img src="https://images2.imgbox.com/d3/a7/2miMoAZS_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_168"></a>缓冲流</h4> 
<p>缓冲流是套接在响应的节点流之上，对续写的数据提供缓冲的功能，提高读写的效率，同时增加了一些新方法<br> 以介质是硬盘为例，字节流和字符流的弊端：在每一次读写的时候，都会访问硬盘。 如果读写的频率比较高的时候，其性能表现不佳。为了解决以上弊端，采用缓存流。<br> 缓存流在读取的时候，会一次性读较多的数据到缓存中，以后每一次的读取，都是在缓存中访问，直到缓存中的数据读取完毕，再到硬盘中读取。</p> 
<pre><code class="prism language-java"><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\FileTest.java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> start<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取从1970-1-1 0:0:0到当前的毫米值</span>
<span class="token keyword">int</span> con <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>con <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
con <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">long</span> end<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"统计时间为:"</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">60</span>ms
</code></pre> 
<h5><a id="_185"></a>构造方法</h5> 
<ul><li>BufferedReader(Reader)不定义缓存大小，默认8192</li><li>BufferedReader(Reader in, int size)size为自定义缓冲区的大小</li><li>BufferedWriter(Writer)</li><li>BufferedWriter(Writer out, int size)size为自定义缓冲区的大小</li><li>BufferedInputStream(InputStream)</li><li>BufferedInputStream(InputStream in, int size)size为自定义缓冲区的大小</li><li>BufferedOutputStream(OutputStream)</li><li>BufferedOutputStream(OuputStream out, int size)size为自定义缓冲区的大小</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\FileTest.java"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> start<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> con <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里并不是直接从文件中进行读取，而是从缓存中进行读</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>con <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
con <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">long</span> end<span class="token operator">=</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"统计时间为:"</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">10</span>ms
</code></pre> 
<h5><a id="_209"></a>缓冲输入流的方法</h5> 
<p>BuffedReader提供了一个方法readLine():String，但是BufferedInputStream中并没有这个</p> 
<ul><li>BufferedReader提供了readLine方法用于读取一行字符串，以\r或\n分割（换行符） 
  <ul><li>如果读取内容为null，则表示读取到了流的末尾</li><li>readLine方法会自动剔除本行内容末尾的换行符</li></ul> </li><li>BufferedWriter提供了newLine方法用于写入一个行分隔符<br> 对于输出的缓冲流，写入的数据会先在内存中缓存，使用flush方法会使内存中的数据立即写出</li></ul> 
<h6><a id="_216"></a>键盘录入</h6> 
<p>System.in:InputStream用于指代系统默认的输入设备—键盘<br> 方法read():int 可以实现代码执行到这里则会阻塞等待，只要输入数据为止</p> 
<pre><code class="prism language-java"><span class="token class-name">BufferedReader</span> br<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入数据"</span><span class="token punctuation">)</span>；
<span class="token class-name">String</span> temp<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>temp<span class="token operator">=</span>br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"quit"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token class-name">BufferedWriter</span> bw<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"只有缓冲区满才自动进行输出显示"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//刷新缓冲区，否则看不到输出内容</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//关闭输出时会首先自动进行刷新缓冲区</span>
</code></pre> 
<p>强调：使用缓存流并没有添加什么额外方法，只是它能够在执行过程中自动引入缓存，从而提高执行效率<br> 过滤流使用必须有对应的节点流，因为过滤流是装饰节点流，不是有具体的操作目标<br> new BufferedReader(new FileReader(…))或new BufferedWriter(new FileWriter())实际上使用的还是Reader/Writer那些方法，这里从编码的角度上说，没有任何区别，但是从执行性能上说，比FileReader/Writer效率高，可以减少磁盘的读写次数<br> 执行close方法会自动关闭被装饰的对象，所以不需要再关闭FileReader和FileWriter<br> 执行flush会自动刷新数据到节点流上，但是并没有执行关闭流。针对输出流关闭时会自动先flush缓存再执行关闭</p> 
<h4><a id="_241"></a>数据流</h4> 
<p>DataInputStream和DataOutputStream两个类创建的对象分别被称为数据输入流和数据输出流。这是很有用的两个流，它们允许程序按与机器无关的风格读写Java数据。所以比较适合于网络上的数据传输。这两个流也是过滤器流，常以其它流如InputStream或OutputStream作为它们的输入或输出<br> DataInputStram和DataOutputStream分别继承自InputStream和OuputStream，属于过滤流，需要分别套接在InputStream和OutputStream类型的节点流上</p> 
<ul><li>只有字节流，没有对应的字符流<br> DataInputStream和DataOutputStream提供了可以存取与机器无关的Java原始类型数据的方法<br> DataInputSteram和DataOutputStream构造方法为</li><li>DataInputStream(InputStream)</li><li>DataOutputStream(OutputStream)</li></ul> 
<p>1、用数据输出流将菲波那契级数的前二十项存放在fei.dat文件中。<br> 2、从fei.dat文件中读出数列，显示输出，并计算累加和。<br> 读取、写出一个double数据到文件中</p> 
<pre><code class="prism language-java"><span class="token comment">//使用数据流就可以直接操作简单类型数据</span>
<span class="token keyword">double</span> dd<span class="token operator">=</span><span class="token number">123.4567</span><span class="token punctuation">;</span>
<span class="token class-name">FileOutputStream</span> fos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\a.data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dd<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//如果不使用数据流，则需要额外编码进行数据类型转换</span>
<span class="token class-name">FileInputStream</span> fis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:/a.data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">8192</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span>fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> dd<span class="token operator">=</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dd<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>加入需要写一个double，然后一个String，然后再一个int<br> 需要将输入内容转换为String，并且为了区分数据需要引入特殊符号，例如@@，输入数据为<br> 123.456@@shi ya zhou@@12。从功能角度上说没问题，但是编码太复杂了，所以引入Data类型的输入输出流</p> 
<pre><code class="prism language-java">\<span class="token operator">/</span><span class="token operator">/</span>这里不使用<span class="token class-name">OutputStream</span>定义变量的原因是：需要使用<span class="token class-name">DataOutputStream</span>中定义的特殊方法，而
不是父类中定义的通用方法
<span class="token class-name">DataOutputStream</span> dos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\a.data"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeChars</span><span class="token punctuation">(</span><span class="token string">"赵天爱小猴!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>由于读取出现问题，针对中间的String数据引入一个额外的数据，其中存储String的char个数<br> 写出数据</p> 
<pre><code class="prism language-java"><span class="token keyword">double</span> salary<span class="token operator">=</span><span class="token number">123.456</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> ss<span class="token operator">=</span><span class="token string">"赵天爱小猴，小猿爱小主，小胡招小天"</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">;</span>
<span class="token class-name">DataOutputStream</span> dos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\aa.data"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>ss<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeChars</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>读取数据</p> 
<pre><code class="prism language-java"><span class="token keyword">double</span> salary<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> age<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//读取数据的前提是必须知道数据的结构</span>
<span class="token class-name">DataInputStream</span> dis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\aa.data"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
salary<span class="token operator">=</span>dis<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">StringBuilder</span> sb<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span>dis<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dis<span class="token punctuation">.</span><span class="token function">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token operator">=</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
age<span class="token operator">=</span>dis<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>salary<span class="token operator">+</span><span class="token string">"---"</span><span class="token operator">+</span>str<span class="token operator">+</span><span class="token string">"---"</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意：读取数据判断文件结束EOFException，这里没有-1<br> 在具体应用中建议针对字串使用readUTF和writeUTF</p> 
<pre><code class="prism language-java"><span class="token class-name">DataOutputStream</span> dos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"data2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">1234.56</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str<span class="token operator">=</span><span class="token string">"猴子愛小終，小終愛信心"</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"data2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> d1 <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> ss<span class="token operator">=</span>dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> kk <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d1 <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> ss <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> kk<span class="token punctuation">)</span><span class="token punctuation">;</span>
dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_329"></a>打印流</h4> 
<p>PrintStream和PrintWriter都属于输出流，分别针对字节和字符<br> PrintWriter和PrintStream都提供了重载的print和println方法用于输出多种类型数据<br> print(Object):void</p> 
<ul><li>输出引用类型，实际上是调用对象的toString方法转换为String进行输出</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Object</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用String类中的静态方法将object类型的</span>
数据转换为字符串
<span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//print('\n')</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//String中的valueOf方法的定义</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"null"</span> <span class="token operator">:</span> obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果输出对象非空，则</span>
调用对象的toString方法
<span class="token punctuation">}</span>
</code></pre> 
<p>println表示输出后自动换行</p> 
<ul><li>PrintWriter和PrintStream的输出操作不会抛出异常，用户通过检测错误状态获取错误信息</li><li>PrintWriter和PrintStream有自动的flush功能 textOut.flushBuffer();<br> PrintWriter(Writer)<br> PrintWriter(Writer out, boolean autoFlush)自动刷新----println</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out<span class="token punctuation">)</span> <span class="token comment">//参数是一个字节流，但是不需要通过桥接处理</span>
<span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out<span class="token punctuation">,</span> <span class="token keyword">boolean</span> autoFlush<span class="token punctuation">)</span>
<span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span><span class="token punctuation">)</span>
<span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out<span class="token punctuation">,</span> <span class="token keyword">boolean</span> autoFlush<span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b5db5523312ebbbee59ca0038012c239/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python setup.py install安装setuptools，pip踩坑记录（下载，配置环境变量）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/06d14962dcffb574844a13adb3b5a964/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">html&#43;css&#43;jQuery写的选择题答题页面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>