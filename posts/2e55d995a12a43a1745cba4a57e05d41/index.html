<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序自定义tabBar以及图标-使用vant-weapp - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序自定义tabBar以及图标-使用vant-weapp" />
<meta property="og:description" content="小程序整合vant weapp可以看《微信小程序vant weapp安装与使用》
微信官方文档有介绍自定义tabBar
1、在小程序根目录下创建custom-tab-bar文件夹，并创建以下文件。（这个是作为入口文件的） custom-tab-bar/index.js
custom-tab-bar/index.json
custom-tab-bar/index.wxml
custom-tab-bar/index.wxss
2、修改custom-tab-bar/index.js （清除初始化的内容） Component({ data: { selected: 0, list: [ { pagePath: &#34;/pages/checkin/checkin&#34;, text: &#34;打卡&#34;, normal: &#39;/images/tabbar/position.png&#39;, active: &#39;/images/tabbar/position-green.png&#39; }, { pagePath: &#34;/pages/idcard/idcard&#34;, text: &#34;上传&#34;, normal: &#39;/images/tabbar/idcard.png&#39;, active: &#39;/images/tabbar/idcard-green.png&#39; } ] }, methods: { onChange(e) { console.log(e,&#39;e&#39;) this.setData({ active: e.detail }); wx.switchTab({ url: this.data.list[e.detail].pagePath }); }, init() { const page = getCurrentPages().pop(); this.setData({ active: this.data.list.findIndex(item =&gt; item.pagePath === `/${page.route}`) }); } } }) 3、修改custom-tab-bar/index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2e55d995a12a43a1745cba4a57e05d41/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-11T09:42:25+08:00" />
<meta property="article:modified_time" content="2020-12-11T09:42:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序自定义tabBar以及图标-使用vant-weapp</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>小程序整合vant weapp可以看《<a href="https://blog.csdn.net/Utopia_Zq/article/details/110981059">微信小程序vant weapp安装与使用</a>》</p> 
<p>微信官方文档有介绍<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html" rel="nofollow">自定义tabBar</a></p> 
<h4>1、在小程序根目录下创建custom-tab-bar文件夹，并创建以下文件。（<span style="color:#f33b45;">这个是作为入口文件的</span>）</h4> 
<p>custom-tab-bar/index.js<br> custom-tab-bar/index.json<br> custom-tab-bar/index.wxml<br> custom-tab-bar/index.wxss</p> 
<p><img alt="" height="437" src="https://images2.imgbox.com/c5/94/5NetTInI_o.png" width="329"></p> 
<h4>2、修改custom-tab-bar/index.js （清除初始化的内容）</h4> 
<pre><code class="language-javascript">Component({
  data: { 
    selected: 0,
    list: [
      {
        pagePath: "/pages/checkin/checkin",
        text: "打卡",
        normal: '/images/tabbar/position.png',
        active: '/images/tabbar/position-green.png'
      },
      {
        pagePath: "/pages/idcard/idcard",
        text: "上传",
        normal: '/images/tabbar/idcard.png',
        active: '/images/tabbar/idcard-green.png'
      }
    ]
  },
  methods: {
    onChange(e) {
       console.log(e,'e')
       this.setData({ active: e.detail });
       wx.switchTab({
         url: this.data.list[e.detail].pagePath
       });
    },
    init() {
        const page = getCurrentPages().pop();
        this.setData({
       　  active: this.data.list.findIndex(item =&gt; item.pagePath === `/${page.route}`)
        });
       }
    }
})</code></pre> 
<h4>3、修改custom-tab-bar/index.json</h4> 
<pre><code class="language-javascript">{
  "component": true,
    "usingComponents": {
      "van-tabbar": "@vant/weapp/tabbar/index",
      "van-tabbar-item": "@vant/weapp/tabbar-item/index",
      "van-icon": "@vant/weapp/icon/index"
    }
}</code></pre> 
<h4>4、 修改custom-tab-bar/index.wxml</h4> 
<p>       代码中两个imgage是自定义图标的，未选中是item.normal图片，选中了是item.active</p> 
<pre><code class="language-html">&lt;van-tabbar active="{<!-- -->{ active }}" bind:change="onChange" active-color="#07c160" inactive-color="gainsboro"&gt;
  &lt;van-tabbar-item wx:for="{<!-- -->{ list }}" wx:key="index" &gt;
    &lt;image
      slot="icon"
      src="{<!-- -->{ item.normal }}"
      mode="aspectFit"
      style="width: 30px; height: 18px;"
    /&gt;
    &lt;image
      slot="icon-active"
      src="{<!-- -->{ item.active }}"
      mode="aspectFit"
      style="width: 30px; height: 18px;"
    /&gt; 
    {<!-- -->{item.text}}
  &lt;/van-tabbar-item&gt;
&lt;/van-tabbar&gt;</code></pre> 
<h4>5、在app.json添加tabBar</h4> 
<pre><code class="language-javascript">"tabBar": {
    "custom": true,
    "color": "#000000",
    "selectedColor": "#000000",
    "backgroundColor": "#000000",
    "list": [
      {
        "pagePath": "pages/checkin/checkin",
        "text": "打卡"
      },
      {
        "pagePath": "pages/idcard/idcard",
        "text": "上传"
      }
    ]
  }</code></pre> 
<h4> 6、每个tabBar页面的onShow()方法添加</h4> 
<pre><code class="language-javascript">  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {
    this.getTabBar().init();
  },
</code></pre> 
<p>效果图如下</p> 
<p><img alt="" height="674" src="https://images2.imgbox.com/7c/c0/uOl5XYlb_o.png" width="380"> <img alt="" height="672" src="https://images2.imgbox.com/68/d1/YZDxyfoa_o.png" width="379"></p> 
<p>源码下载：<a href="https://gitee.com/zqingcpu/wx-vant-weapp-demo/tree/master" rel="nofollow">自定义tabBar</a></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bbfbf7cc40be171867d5da95cc23d3f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">产品经理岗位职责说明_研发部：职能概述、组织结构、职能分解、岗位职责、考核制度...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01f5804d420d5204d352f5c27bc5b4f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Win8怎么加快桌面图标刷新速度？提高图标刷新速度的方法解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>