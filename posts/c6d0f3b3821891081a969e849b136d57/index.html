<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python-Django的“日志功能-日志模块(logging模块)-日志输出”的功能详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python-Django的“日志功能-日志模块(logging模块)-日志输出”的功能详解" />
<meta property="og:description" content="提前说明：如果是简单的日志输出，看我的另一篇博客就够，链接如下：
提前说明：如果是简单的日志输出，看我的另一篇博客就够，链接如下：
https://blog.csdn.net/wenhao_ir/article/details/134872372
01-综述 可以使用Python内置的logging模块来实现Django项目的日志记录。
所以与其说这篇文章在讲Django的“日志功能-日志模块-日志输出”，不如说是在讲Pthon的“日志功能-日志模块-日志输出”，即Python的logging模块。
下面用一个实例来进行讲解。
02-实例代码及运行效果 现在我要在Django的视图函数index()中输出之前用print()输出的信息。
用logging模块改写前的视图函数index()的代码如下：
def index(request): year = 2023 month = 11 day = 22 day_of_week = &#39;Wednesday&#39; print(f&#34;Today&#39;s date is:{year}-{month}-{day}-{day_of_week}&#34;) return render(request, &#39;index.html&#39;) # 将渲染结果输出到index.html模板中 在上面的代码中，print()语句根据上面设置的相关变量值输出下面的字符串：
Today&#39;s date is:2023-11-22-Wednesday 接下来，我们就根据Python内置的logging模块的使用方法来将上面的这个字符串输出到日志文件 logfile666.log 中。
首先我把完整的代码给出来，然后再慢慢讲。
视图函数index()的完整代码如下：
from django.shortcuts import render # 默认导入的模块 import logging # 导入日志记录模块 # 创建一个名为&#39;index_log&#39;的日志记录器 logger01 = logging.getLogger(&#39;index_log&#39;) # Create your views here. def index(request): year = 2023 month = 11 day = 22 day_of_week = &#39;Wednesday&#39; logger01." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c6d0f3b3821891081a969e849b136d57/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T11:02:10+08:00" />
<meta property="article:modified_time" content="2023-12-08T11:02:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python-Django的“日志功能-日志模块(logging模块)-日志输出”的功能详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><font color="red">提前说明：如果是简单的日志输出，看我的另一篇博客就够，链接如下：</font><br> <font color="red">提前说明：如果是简单的日志输出，看我的另一篇博客就够，链接如下：</font><br> <a href="https://blog.csdn.net/wenhao_ir/article/details/134872372">https://blog.csdn.net/wenhao_ir/article/details/134872372</a></p> 
<h2><a id="01_4"></a>01-综述</h2> 
<p>可以使用Python内置的logging模块来实现Django项目的日志记录。</p> 
<p>所以与其说这篇文章在讲Django的“日志功能-日志模块-日志输出”，不如说是在讲Pthon的“日志功能-日志模块-日志输出”，即Python的logging模块。</p> 
<p>下面用一个实例来进行讲解。</p> 
<h2><a id="02_12"></a>02-实例代码及运行效果</h2> 
<p>现在我要在Django的视图函数index()中输出之前用print()输出的信息。</p> 
<p>用logging模块改写前的视图函数index()的代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    year <span class="token operator">=</span> <span class="token number">2023</span>
    month <span class="token operator">=</span> <span class="token number">11</span>
    day <span class="token operator">=</span> <span class="token number">22</span>
    day_of_week <span class="token operator">=</span> <span class="token string">'Wednesday'</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Today's date is:</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day_of_week<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>  <span class="token comment"># 将渲染结果输出到index.html模板中</span>
</code></pre> 
<p>在上面的代码中，print()语句根据上面设置的相关变量值输出下面的字符串：</p> 
<pre><code class="prism language-bash">Today's <span class="token function">date</span> is:2023-11-22-Wednesday
</code></pre> 
<p>接下来，我们就根据Python内置的logging模块的使用方法来将上面的这个字符串输出到日志文件 logfile666.log 中。</p> 
<p>首先我把完整的代码给出来，然后再慢慢讲。</p> 
<p>视图函数index()的完整代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render  <span class="token comment"># 默认导入的模块</span>
<span class="token keyword">import</span> logging  <span class="token comment"># 导入日志记录模块</span>

<span class="token comment"># 创建一个名为'index_log'的日志记录器</span>
logger01 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'index_log'</span><span class="token punctuation">)</span>

<span class="token comment"># Create your views here.</span>

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    year <span class="token operator">=</span> <span class="token number">2023</span>
    month <span class="token operator">=</span> <span class="token number">11</span>
    day <span class="token operator">=</span> <span class="token number">22</span>
    day_of_week <span class="token operator">=</span> <span class="token string">'Wednesday'</span>
    logger01<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Today's date is:</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day_of_week<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>  <span class="token comment"># 将渲染结果输出到index.html模板中</span>

</code></pre> 
<p>setting.py中添加如下代码：</p> 
<pre><code class="prism language-python"><span class="token comment"># 设置日志记录器</span>
LOGGING <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'file01'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile666.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径，相对路径时以Django项目的根目录为此路径的根路径，当然也可用绝对路径，比如E:/log/logfile666.log</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'index_log'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file01'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>用下面的命令开启Django的web服务后：</p> 
<pre><code class="prism language-bash">python manage.py runserver <span class="token number">127.0</span>.0.1:8010
</code></pre> 
<p>访问URL:</p> 
<pre><code class="prism language-bash">http://127.0.0.1:8010/index/
</code></pre> 
<p>发现控制台没有字符串：<code>Today's date is:2023-11-22-Wednesday</code>的输出。</p> 
<p>而在目录 BASE_DIR下出现了日志文件：logfile666.log<br> <img src="https://images2.imgbox.com/8d/06/26vIHo01_o.png" alt="在这里插入图片描述"><br> 其内容如下：<br> <img src="https://images2.imgbox.com/7b/79/BHF4j6Fo_o.png" alt="在这里插入图片描述"><br> 可见，实现了我们的需求。</p> 
<p><font color="blue">接下来，对上面这个实例中的相关代码进行详解。</font></p> 
<h2><a id="03_101"></a>03-整个例子的思路</h2> 
<p>首先用语句<code>import logging</code> 导入日志记录模块，然后利用语句<code>logger01 = logging.getLogger('index_log')</code>创建一个名为<code>index_log</code>的logger对象，这个logger对象的实例化变量名为<code>logger01</code>。<br> 然后使用语句<code>logger01.debug(f"Today's date is:{year}-{month}-{day}-{day_of_week}")</code>进行日志信息的输出。<br> 语句<code>logger01.debug(f"Today's date is:{year}-{month}-{day}-{day_of_week}")</code>在进行日志信息输出时，因为这是一个名叫<code>index_log</code>的logger对象，所以去调用名叫<code>index_log</code>的logger的配置，具体代码如下：</p> 
<pre><code class="prism language-python">    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'index_log'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file01'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>而名叫<code>index_log</code>的logger具体在执行日志信息的输出时，调用的是句柄<code>file01</code>，句柄<code>file01</code>的设置如下：</p> 
<pre><code class="prism language-python">    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'file01'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile666.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径，相对路径时以Django项目的根目录为此路径的根路径，当然也可用绝对路径，比如E:/log/logfile666.log</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>整个过程的大致介绍如上。</p> 
<p>接下来对关键代码进行详细解释。</p> 
<h2><a id="04viewpy_130"></a>04-视图函数view.py中的关键代码详解</h2> 
<p>视图函数index()的完整代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render  <span class="token comment"># 默认导入的模块</span>
<span class="token keyword">import</span> logging  <span class="token comment"># 导入日志记录模块</span>

<span class="token comment"># 创建一个名为'index_log'的日志记录器</span>
logger01 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'index_log'</span><span class="token punctuation">)</span>

<span class="token comment"># Create your views here.</span>

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    year <span class="token operator">=</span> <span class="token number">2023</span>
    month <span class="token operator">=</span> <span class="token number">11</span>
    day <span class="token operator">=</span> <span class="token number">22</span>
    day_of_week <span class="token operator">=</span> <span class="token string">'Wednesday'</span>
    logger01<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Today's date is:</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day_of_week<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>  <span class="token comment"># 将渲染结果输出到index.html模板中</span>

</code></pre> 
<p><font color="blue">第01句关键代码:</font></p> 
<pre><code class="prism language-python">logger01 <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'index_log'</span><span class="token punctuation">)</span>
</code></pre> 
<p>在这里面，注意参数<code>'index_log'</code>，这是我们在setting.py中设置的记录器的名字，setting.py的相关截图如下：<br> <img src="https://images2.imgbox.com/20/8e/oNQq6DjU_o.png" alt="在这里插入图片描述"></p> 
<p><font color="blue">第02句关键代码：</font></p> 
<pre><code class="prism language-python">logger01<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Today's date is:</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>year<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>month<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day<span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>day_of_week<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p>logging模块一共有五个日志输出方法，对应于五个日志级别，分别如下：</p> 
<pre><code class="prism language-python">logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 调试级别的日志输出语句</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 信息级别的日志输出语句</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 警告级别的日志输出语句</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 错误级别的日志输出语句</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 严重错误级别的日志输出语句</span>
</code></pre> 
<p>上面这个五个日志级别的级别由低到高的顺序为：<br> <font color="green">debug→info→warning→error→critical</font><br> 一条日志，该用哪个级别，由用户自己定义。<br> <font color="red">值得注意的是：</font><br> 方法级别越高，那么要想输出相应的日志信息，那么对应的logger的级别应等于或小于其级别，而logger的级别又应比相应的hander级别高才行。<br> 举个例子：<br> <font color="green">假如用方法logger.warning()输出日志信息，那么logger的级别(level)可以为WARNING或比WARNING小于的INFO、DEBUG，但不能为ERROR、CRITICAL。<br> 假如logger的级别(level)设置为INFO，那么要先想其对应的handler能最终输出日志信息到日志文件，那么就需要handler的级别为INFO或比INFO级别小的DEBUG，但不能为WARNING、ERROR、CRITICAL。</font></p> 
<p>另外，上面提到的五个日志输出方法：</p> 
<pre><code class="prism language-python">logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 调试级别的日志输出语句</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 信息级别的日志输出语句</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 警告级别的日志输出语句</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 错误级别的日志输出语句</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 严重错误级别的日志输出语句</span>
</code></pre> 
<p><font color="red">其用法和print()一模一样。</font></p> 
<h2><a id="05settingpy_193"></a>05-setting.py中对日志器的设置语句详解</h2> 
<p>相关代码如下：</p> 
<pre><code class="prism language-python"><span class="token comment"># 设置日志记录器</span>
LOGGING <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'file01'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile666.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径，相对路径时以Django项目的根目录为此路径的根路径，当然也可用绝对路径，比如E:/log/logfile666.log</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'index_log'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file01'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="font_colorblue01disable_existing_loggers_Falsefont_217"></a><font color="blue">第01句代码：<code>'disable_existing_loggers': False</code></font></h3> 
<pre><code class="prism language-python"><span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
</code></pre> 
<p><code>'disable_existing_loggers'</code> 是 Django 中配置日志的一个选项。它是一个布尔值，用于指定是否禁用已经存在的日志记录器（loggers）。</p> 
<p>当 <code>'disable_existing_loggers'</code> 设置为 <code>True</code> 时，Django 将禁用所有已经存在的根记录器（root logger）和在 <code>'loggers'</code> 部分中未明确指定的其他记录器。这样可以确保日志记录器的配置是全新的，不受之前的全局配置的影响。</p> 
<p>而当 <code>'disable_existing_loggers'</code> 设置为 <code>False</code> 时，Django 会保留已经存在的日志记录器，不禁用它们。这意味着在 <code>'loggers'</code> 部分中配置的记录器只是添加到已经存在的记录器列表中，而不是替换它们。这样的配置可能会导致全局的日志配置不够清晰，因为它们可能受到之前配置的影响。</p> 
<p>以下是一个示例，演示了 <code>'disable_existing_loggers'</code> 设置为 <code>True</code> 和 <code>False</code> 时的不同行为：</p> 
<pre><code class="prism language-python">LOGGING <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># 或者 False</span>

    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'console'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.StreamHandler'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'django'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'INFO'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'my_app'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果 <code>'disable_existing_loggers'</code> 设置为 <code>True</code>，那么所有已经存在的根记录器和未明确指定的其他记录器将被禁用。只有 <code>'django'</code> 和 <code>'my_app'</code> 记录器会生效。而如果设置为 <code>False</code>，那么已经存在的记录器仍然有效，所有的记录器都会生效，可能受到全局配置的影响。</p> 
<p><font color="red">在这里，我们设置为False，以避免影响别的日志输出，实践证明，如果这里设置为True，那么除了这里设置的日志输出，别的日志输出全没有了。</font></p> 
<h3><a id="font_colorblue02level_DEBUGfont_257"></a><font color="blue">第02句代码：<code>'level': 'DEBUG'</code></font></h3> 
<p>handlers里面的level设置语句：</p> 
<pre><code class="prism language-python"><span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
</code></pre> 
<p>这个level的作用已经在本文的“04-视图函数view.py中的关键代码详解”里进行了详细的说明，这里就不再叙述了。</p> 
<h3><a id="font_colorblue03class_loggingFileHandlerfont_264"></a><font color="blue">第03句代码：<code>'class': 'logging.FileHandler'</code></font></h3> 
<p>handlers里面的class设置语句：</p> 
<pre><code class="prism language-bash"><span class="token string">'class'</span><span class="token builtin class-name">:</span> <span class="token string">'logging.FileHandler'</span>
</code></pre> 
<p><code>'class': 'logging.FileHandler'</code> 是配置 <code>logging</code> 模块中的处理器（handler）的一部分。这个配置指定了使用 <code>FileHandler</code> 类来处理日志消息，并将这些消息写入到文件中。</p> 
<p>在 Python 的 <code>logging</code> 模块中，处理器是用于指定日志消息的输出目的地的对象。<code>FileHandler</code> 是一种处理器（handler），它将日志消息写入到文件中。</p> 
<p>让我们来详细解释这个配置：</p> 
<ul><li><code>'class'</code>: 这个键指定了使用的处理器类的名称。在这里，<code>'logging.FileHandler'</code> 表示我们使用 <code>FileHandler</code> 类。<code>FileHandler</code> 类是 <code>logging</code> 模块提供的标准处理器之一，专门用于将日志消息写入到文件。</li></ul> 
<p>使用 <code>FileHandler</code> 处理器的一个典型配置可能如下：</p> 
<pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'logfile.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定处理器的日志级别</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>在上面的配置中，我们创建了一个名为 ‘file’ 的处理器，指定了使用 <code>FileHandler</code> 类。配置还包括了 <code>'filename'</code> 键，用于指定日志文件的路径，以及 <code>'level'</code> 键，用于指定处理器的日志级别。 <code>'level'</code> 的设置将影响处理器接受的日志消息的最低级别，低于该级别的消息将被忽略。</p> 
<p>总体而言，<code>'class': 'logging.FileHandler'</code> 是用于将日志消息写入文件的标准配置。如果你需要将日志记录到文件中，可以使用这个配置，并根据需要添加其他相关的设置，比如 <code>'filename'</code> 和 <code>'level'</code>。</p> 
<p><font color="blue">问：除了FileHandler类，还有哪些类，请分别介绍。</font></p> 
<p>在 Python 的 <code>logging</code> 模块中，除了 <code>FileHandler</code> 类之外，还有一些其他常用的处理器类。以下是其中一些类的介绍：</p> 
<ol><li> <p><strong>StreamHandler</strong>:</p> 
  <ul><li><code>StreamHandler</code> 类用于将日志消息输出到流（例如，标准输出或标准错误）。可以通过配置 <code>'class': 'logging.StreamHandler'</code> 来使用它。</li></ul> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'console'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.StreamHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> </li><li> <p><strong>RotatingFileHandler</strong>:</p> 
  <ul><li><code>RotatingFileHandler</code> 类用于将日志消息写入到文件，并支持日志文件的滚动（回滚），即在达到一定大小时创建新的日志文件。可以通过配置 <code>'class': 'logging.handlers.RotatingFileHandler'</code> 来使用它。</li></ul> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'rotating_file'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.RotatingFileHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'logfile.log'</span><span class="token punctuation">,</span>
        <span class="token string">'maxBytes'</span><span class="token punctuation">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>  <span class="token comment"># 指定单个日志文件的最大大小</span>
        <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment"># 指定保留的旧日志文件数量</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <p><font color="blue"> 对于类logging.handlers.RotatingFileHandler，假如日志文字的名字为 logfile.log 并超过指定大小后，会创建新的日志文件，之前的日志文件会被命名为什么呢？</font><br> 答：<code>RotatingFileHandler</code> 类在创建新的日志文件时，会为旧的日志文件添加一个后缀，以标识其顺序。这个后缀通常是一个数字，表示日志文件的旋转顺序。在默认情况下，后缀从 1 开始，每次创建新的日志文件，后缀递增。</p> <p>例如，假设你配置了一个 <code>RotatingFileHandler</code> 如下：</p> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'rotating_file'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.RotatingFileHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'logfile.log'</span><span class="token punctuation">,</span>
        <span class="token string">'maxBytes'</span><span class="token punctuation">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>  <span class="token comment"># 指定单个日志文件的最大大小</span>
        <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment"># 指定保留的旧日志文件数量</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <p>如果 <code>logfile.log</code> 超过了 <code>1024</code> 字节，<code>RotatingFileHandler</code> 会创建一个新的日志文件，原始的 <code>logfile.log</code> 会被重命名为 <code>logfile.log.1</code>，而新的日志文件将继续使用 <code>logfile.log</code> 的文件名。</p> <p>如果再次超过最大大小，会创建另一个新的日志文件 <code>logfile.log</code>，而原来的 <code>logfile.log.1</code> 会被重命名为 <code>logfile.log.2</code>。以此类推，旧的日志文件会依次向后移动并重命名。</p> <p>这样，<code>backupCount</code> 参数指定了保留的旧日志文件数量。在上面的例子中，设置为 <code>3</code> 表示会保留最新的 3 个旧日志文件，即 <code>logfile.log.1</code>、<code>logfile.log.2</code>、<code>logfile.log.3</code>。超过这个数量后，最旧的日志文件会被删除。</p> </li><li> <p><strong>TimedRotatingFileHandler</strong>:</p> 
  <ul><li><code>TimedRotatingFileHandler</code> 类也用于将日志消息写入到文件，但支持基于时间的日志文件滚动。可以通过配置 <code>'class': 'logging.handlers.TimedRotatingFileHandler'</code> 来使用它。</li></ul> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'timed_rotating_file'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.TimedRotatingFileHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'logfile.log'</span><span class="token punctuation">,</span>
        <span class="token string">'when'</span><span class="token punctuation">:</span> <span class="token string">'midnight'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定滚动周期，可以是 'midnight', 'H', 'MIDNIGHT', 'D', 'S', 'W0' 等</span>
        <span class="token string">'interval'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># 滚动周期的时间间隔</span>
        <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment"># 指定保留的旧日志文件数量</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <p><font color="blue">问：对于类ogging.handlers.TimedRotatingFileHandler，假如日志文字的名字为 logfile.log 并超过指定大小后，会创建新的日志文件，之前的日志文件会被命名为什么呢？请举一个具体的例子并假设周期为天。</font><br> 答：<code>TimedRotatingFileHandler</code> 类与 <code>RotatingFileHandler</code> 类不同，它的日志文件滚动是基于时间的。在配置 <code>TimedRotatingFileHandler</code> 时，你需要指定 <code>when</code> 参数来定义滚动周期。常见的值包括 <code>'midnight'</code>（每天的午夜滚动）以及其他时间单位，如 <code>'H'</code>（每小时滚动）等。</p> <p>假设你的配置如下：</p> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'timed_rotating_file'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.TimedRotatingFileHandler'</span><span class="token punctuation">,</span>
        <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'logfile.log'</span><span class="token punctuation">,</span>
        <span class="token string">'when'</span><span class="token punctuation">:</span> <span class="token string">'midnight'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定滚动周期为每天的午夜</span>
        <span class="token string">'interval'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># 滚动周期的时间间隔</span>
        <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment"># 指定保留的旧日志文件数量</span>
        <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <p>在这个例子中，如果 <code>logfile.log</code> 超过指定的大小，<code>TimedRotatingFileHandler</code> 会创建一个新的日志文件，并在当前日志文件名上附加日期后缀，而不是简单地增加数字序列。每天午夜时，会创建一个新的日志文件，之前的日志文件会被重命名为带有日期后缀的形式。</p> <p>例如，如果当前日期是 <code>2023-01-01</code>，并且 <code>logfile.log</code> 超过了指定的大小，那么会创建一个新的日志文件，同时原来的 <code>logfile.log</code> 会被重命名为 <code>logfile.log.2023-01-01</code>。</p> <p>下一天（<code>2023-01-02</code>），再次创建新的日志文件，同时原来的 <code>logfile.log</code> 会被重命名为 <code>logfile.log.2023-01-02</code>。依此类推，每天都会创建一个新的日志文件，并按照日期后缀的形式重命名之前的日志文件。</p> <p>这样，<code>backupCount</code> 参数指定了保留的旧日志文件数量，而 <code>when</code> 和 <code>interval</code> 参数则定义了滚动的时间周期。</p> </li><li> <p><strong>NullHandler</strong>:</p> 
  <ul><li><code>NullHandler</code> 类用于禁用日志记录，即将所有接收到的日志消息忽略。可以通过配置 <code>'class': 'logging.NullHandler'</code> 来使用它。</li></ul> <pre><code class="prism language-python"><span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'null_handler'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.NullHandler'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> </li></ol> 
<p>这些处理器类提供了不同的日志记录方式和选项，可以根据项目的需求选择合适的处理器。在配置文件中，通过 <code>'class'</code> 键来指定使用的处理器类，然后可以根据处理器类的不同，配置相应的参数。</p> 
<h3><a id="font_colorblue04propagate_Falsefont_406"></a><font color="blue">第04句代码：<code>'propagate': False</code></font></h3> 
<pre><code class="prism language-python"><span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
</code></pre> 
<p><code>'propagate'</code> 是配置日志记录器是否传递日志消息给其父记录器的一个属性。当 <code>'propagate'</code> 设置为 <code>True</code> 时，表示该记录器的日志消息将会传递给其父记录器，而父记录器的处理程序也将处理这些消息。如果设置为 <code>False</code>，则该记录器的消息将不会传递给其父记录器。</p> 
<p>在 Django 中，默认情况下，<code>'propagate'</code> 属性被设置为 <code>True</code>。这意味着除非明确地指定为 <code>False</code>，否则日志消息会被传递给更高级别的记录器。这种设置允许你在项目的不同部分使用不同的日志记录器，同时确保日志消息能够在整个应用程序中传递。</p> 
<p><code>'propagate'</code> 设置为 <code>True</code>时，如果在记录器中记录了一条日志消息，它将传递给其父记录器（如果有的话），以便在整个日志体系中处理。</p> 
<p>如果你希望某个特定记录器的日志消息不传递给其父记录器，可以将 <code>'propagate'</code> 设置为 <code>False</code>。这通常在配置多个记录器时用于避免重复记录相同的日志消息。</p> 
<h2><a id="06_419"></a>06-如何按大小或时间分割日志</h2> 
<p>这个问题已经在本篇本文第05点的第03句代码中说得很清楚了，这里不再赘述。</p> 
<h2><a id="07_422"></a>07-修改代码给每一条日志添加时间戳</h2> 
<p>Python 的 <code>logging</code> 模块可以自动在每一条日志消息的前面加上时间。这是通过在日志记录器（logger）的格式化字符串中添加时间信息来实现的。</p> 
<p>在配置日志处理器时，你可以指定一个格式化字符串，该字符串中可以包含各种信息，包括时间。常用的时间格式占位符包括：</p> 
<ul><li><code>%asctime</code>: 人类可读的时间，其具体格式由 <code>formatter</code> 参数指定。</li><li><code>%created</code>: 创建日志记录的时间戳。</li><li><code>%msecs</code>: 毫秒部分。</li><li><code>%relativeCreated</code>: 日志记录创建时的时间戳，以毫秒为单位，相对于日志系统启动时间。</li><li><code>%thread</code>: 线程ID。</li><li><code>%levelname</code>: 日志级别的文本表示。</li></ul> 
<p><font color="blue">接下来我们把本文中的例子加上时间戳。</font></p> 
<p>其实就是把setting.py中对日志记录器的配置改成下面这段代码：</p> 
<pre><code class="prism language-python"><span class="token comment"># 设置日志记录器</span>
LOGGING <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'file01'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile888.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径</span>
            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'verbose'</span><span class="token punctuation">,</span>  <span class="token comment"># 将格式化器设置为 'verbose'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'index_log'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file01'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'formatters'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'verbose'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'format'</span><span class="token punctuation">:</span> <span class="token string">'%(asctime)s - %(message)s'</span><span class="token punctuation">,</span>
            <span class="token string">'datefmt'</span><span class="token punctuation">:</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">,</span>  <span class="token comment"># 人类可读的时间格式</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上面这段代码中：<br> 我添加了 <code>'formatters'</code> 部分，定义了一个名为 <code>'verbose'</code> 的格式化器，其中包含人类可读时间的占位符 <code>%asctime</code>，并通过<code>'datefmt'</code>指定了具体的人类可读的时间格式。<br> 然后，我在 <code>'handlers'</code> 部分的 <code>'file01'</code> 处将格式化器设置为 <code>'verbose'</code>。<br> 这样，便可以实现在每条日志的前面加上时间戳了。</p> 
<p>值得注意的是：如果不通过<code>'datefmt'</code>指定具体的格式，那么默认情况下，<code>%asctime</code> 使用的是计算机友好的时间格式，即包含日期和时间的完整字符串。这种格式对于机器解析是方便的，但对人类来说不够友好。</p> 
<p>修改完成后，我们再访问：</p> 
<pre><code class="prism language-bash">http://127.0.0.1:8010/index/
</code></pre> 
<p>就产生了日志文件：logfile888.log<br> <img src="https://images2.imgbox.com/ce/bf/oAnVenB1_o.png" alt="在这里插入图片描述"><br> 其内容如下：<br> <img src="https://images2.imgbox.com/14/ef/MKSZSlTw_o.png" alt="在这里插入图片描述"><br> 可见，我们成功实现了在日志前面加上时间戳的需求。</p> 
<h2><a id="08logging_485"></a>08-一个既包含有时间输出也包含无时间输出的logging模块配置</h2> 
<p>在下面的代码中：<br> logger_time是有时间戳输出的logger，对应绑定的handler为handler01；<br> logger_no_time是无时间输出的looger，对应绑定的handler为handler02；</p> 
<pre><code class="prism language-python"><span class="token comment"># 设置日志记录器</span>
LOGGING <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'handler01'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile-time-2013-11-23-05.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径,注意,在Centos服务器中要用绝对路径</span>
            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'verbose1'</span><span class="token punctuation">,</span>  <span class="token comment"># 将格式化器设置为 'verbose1'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'handler02'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.FileHandler'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> <span class="token string">'log/logfile-no-time-2023-11-23-05.log'</span><span class="token punctuation">,</span>  <span class="token comment"># 指定日志文件的路径,注意,在Centos服务器中要用绝对路径</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'logger_time'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'handler01'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'logger_no_time'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'handler02'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'formatters'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'verbose1'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'format'</span><span class="token punctuation">:</span> <span class="token string">'%(asctime)s - %(message)s'</span><span class="token punctuation">,</span>
            <span class="token string">'datefmt'</span><span class="token punctuation">:</span> <span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">,</span>  <span class="token comment"># 人类可读的时间格式</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上面的代码中：<br> logger_time是有时间戳输出的logger，对应绑定的handler为handler01；<br> logger_no_time是无时间输出的looger，对应绑定的handler为handler02；</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8b62185f9a863ed8dfbadd63e5b73c98/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTTP响应状态码大全：从100到511，全面解析HTTP请求的各种情况</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3dcacd8861cb10e6f9c22e089ca9b698/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多线程并发Ping脚本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>