<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>简单的个人健康记录系统（Android&#43;Web） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="简单的个人健康记录系统（Android&#43;Web）" />
<meta property="og:description" content="开发工具及环境：
Eclipse、SQL Server、JDK、JRE、Android SDK、ADT；
前期工作准备：
1.搭配Java开发环境；
2.配置Android开发环境；
3.在Eclipse里安装ADT插件；
开发的个人健康记录系统是个什么样子呢？A（病人）通过客户端将个人健康数据发送给服务器端上的B（医生），B查看信息后及时反馈一些医疗建议给A；在发送数据的同时，服务器将数据存入SQL数据库；客户端与JSP网站都可以对数据库进行操作。
1.客户端布局：
布局比较简单，整体用的ScrollView滚动视图来显示全部内容，除去文字用的TextView，剩下的是Button以一定间隔排列；Button左右都是图片，中间是文字。
用户点击不同的Button出现的窗口也不同，点击Filter时进行数据库内容筛选，可以选择显示一条记录里的某几项数据或者选择某个时段内的个人健康记录。
响应点击事件的代码如下：
suggest7.setOnClickListener(new Button.OnClickListener() { @Override public void onClick(View arg0) { // get prompts.xml view LayoutInflater li = LayoutInflater.from(context); View promptsView = li.inflate(R.layout.prompts6, null); AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder( context); // set prompts.xml to alertdialog builder alertDialogBuilder.setView(promptsView); final EditText userInput = (EditText) promptsView .findViewById(R.id.editTextDialogUserInput); // set dialog message alertDialogBuilder .setCancelable(false) .setPositiveButton(&#34;OK&#34;, new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialog,int id) { // get user input and set it to result // edit text ed07_msg." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1a66869d2ab98e158c7e951bb10c761e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-16T15:59:56+08:00" />
<meta property="article:modified_time" content="2017-06-16T15:59:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">简单的个人健康记录系统（Android&#43;Web）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-size:14px"></span> 
<pre><code class="language-java"></code></pre> 
<p><code class="language-java"><span style="font-size:14px;">开发工具及环境：</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       Eclipse、SQL Server、JDK、JRE、Android SDK、ADT；</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">前期工作准备：</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       1.搭配Java开发环境；</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       2.配置Android开发环境；</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       3.在Eclipse里安装ADT插件；</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;"><br></span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">开发的个人健康记录系统是个什么样子呢？A（病人）通过客户端将个人健康数据发送给服务器端上的B（医生），B查看信息后及时反馈一些医疗建议给A；在发送数据的同时，服务器将数据存入SQL数据库；客户端与JSP网站都可以对数据库进行操作。</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;"><br></span></code></p> 
<p><code class="language-java"><span style="font-size:14px;"><br></span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">1.客户端布局：</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       布局比较简单，整体用的ScrollView滚动视图来显示全部内容，除去文字用的TextView，剩下的是Button以一定间隔排列；Button左右都是图片，中间是文字。</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;"><img alt="" src="https://images2.imgbox.com/db/ce/pyZ6H6H0_o.png"><br></span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       用户点击不同的Button出现的窗口也不同，点击Filter时进行数据库内容筛选，可以选择显示一条记录里的某几项数据或者选择某个时段内的个人健康记录。</span></code></p> 
<p><code class="language-java"><span style="font-size:14px;">       响应点击事件的代码如下：</span></code></p> 
<pre class="cpp" name="code"><code class="language-java">		suggest7.setOnClickListener(new Button.OnClickListener() {

			@Override
			public void onClick(View arg0) {

				// get prompts.xml view
				LayoutInflater li = LayoutInflater.from(context);
				View promptsView = li.inflate(R.layout.prompts6, null);

				AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
						context);

				// set prompts.xml to alertdialog builder
				alertDialogBuilder.setView(promptsView);

				final EditText userInput = (EditText) promptsView
						.findViewById(R.id.editTextDialogUserInput);

				// set dialog message
				alertDialogBuilder
					.setCancelable(false)
					.setPositiveButton("OK",
					  new DialogInterface.OnClickListener() {
					    @Override
						public void onClick(DialogInterface dialog,int id) {
						// get user input and set it to result
						// edit text
						ed07_msg.setText(userInput.getText());
					    }
					  })
					.setNegativeButton("Cancel",
					  new DialogInterface.OnClickListener() {
					    @Override
						public void onClick(DialogInterface dialog,int id) {
						dialog.cancel();
					    }
					  });

				// create alert dialog
				AlertDialog alertDialog = alertDialogBuilder.create();

				// show it
				alertDialog.show();

			}
		});	</code></pre> 
<p><span style="font-size:14px"><span lang="EN-US" style="font-family:'Times New Roman',serif; font-size:10.5pt"><span lang="EN-US" style="font-family:'Times New Roman',serif; font-size:10.5pt"><img alt="" src="https://images2.imgbox.com/c8/04/MpkxvcVm_o.png"></span></span></span></p> 
<p><span style="font-size:14px">服务器网站：</span></p> 
<p><span style="font-size:14px">       网站布局上简单用了表格显示数据库查询的数据，数据筛选用了个时间控件；我的服务器代码与JSP网站是用的Eclipse的WEB项目完成的，servlet里写服务器代码，当访问网站时，根据URL-pattern映射关系调用servlet执行服务器代码；SQL数据库操作在JSP网页里（使用了JDBC，百度一下，数据库操作代码很简单的）。</span></p> 
<p><span style="font-family:Times New Roman"><img alt="" src="https://images2.imgbox.com/f1/11/CJt41sn3_o.png"><br> </span></p> 
<p><span style="font-size:14px"><span lang="EN-US" style="font-size:14px">Scoket通信：</span></span></p> 
<p><span style="font-size:14px">       Android 4.0之后，socket通信不能放在主线程中，需要新开一个子线程；</span></p> 
<pre><code class="language-java">    private Thread getThread = new Thread(){
    	@Override
		public void run() {
      try {
    	  
      socket = new Socket(HOST, PORT);
      in = new BufferedReader(new InputStreamReader(socket.getInputStream(),"UTF-8"));
      out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(
              socket.getOutputStream(),"UTF-8")), true);
	
      while(true){
    	  content=in.readLine();//一直接收socket通信数据
      }
  } catch (IOException ex) {
      ex.printStackTrace();
      ShowDialog("login exception" + ex.getMessage());
  }
      
    };
    
    };</code></pre> 
<p><span style="font-size:14px"><span lang="EN-US" style="font-size:14px">多线程技术：</span></span></p> 
<p><span style="font-size:14px">       开一个线程池，当一个手机客户端与服务器端连接时，将用户添加进链表存储并放入线程池；如此便实现一个服务器对应多个客户端进行socket通信，将用户存入链表也可以方便服务器对每个客户端进行遍历。</span></p> 
<pre><code class="language-java">	public void init() throws ServletException
	{

		new Thread() {
			public void run()
			{
				try
				{
					ServerSocket server = new ServerSocket(1245);
					mExecutorService = Executors.newCachedThreadPool(); //线程池
					Socket socket = null;
					while (true)
					{
						socket = server.accept();
						SocketServer.mList.add(socket);
						mExecutorService.execute(new SocketServer(socket));	
					}
				}
				catch (IOException ex)
				{
					System.out.println(ex.getMessage());
				}
			}
		}.start();

  }</code></pre> 
<p><span style="font-size:14px"><span lang="EN-US" style="font-size:14px">发送与接收数据上的处理：</span></span></p> 
<p></p> 
<pre><code class="language-java">//发送
                String msg = ed01_msg.getText().toString() +"@"
                		   + ed02_msg.getText().toString() +"@"
                		   + ed03_msg.getText().toString() +"@" 
                		   + ed04_msg.getText().toString() +"@"
                		   + ed05_msg.getText().toString() +"@"
                		   + ed06_msg.getText().toString() +"@"
                		   + ed07_msg.getText().toString() +"@"
                		   + ed001_msg.getText().toString() +"@"
                		   + ed002_msg.getText().toString() +"@"
                		   + ed003_msg.getText().toString() +"@"
                		   + ed004_msg.getText().toString();


//接收
            while(true) {
                if((msg = in.readLine())!= null) {

                	 date =SocketServer.msg.split("@",11);
                	 msg1=date[0];
                	 msg2=date[1];
                	 msg3=date[2];
                	 msg4=date[3];
                	 msg5=date[4];
                	 msg6=date[5];
                	 msg7=date[6];
                	 msg01=date[7];
                	 msg02=date[8];
                	 msg03=date[9];
                	 msg04=date[10];
                       }</code></pre> 
<p>﻿﻿</p> 
<span style="font-size:14px">       至此，简单的个人健康记录系统的基本流程叙述完了；这是我第一次写博客，写的不好请多多见谅；我的程序表达能力不是很好，希望通过写博客来慢慢加强自己的表达能力！﻿﻿</span>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/626252d5cbafe4acba59419eafe251dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">离散数学中关于自反与反自反的通俗解释</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/27a663d71c014975691c321923744c60/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">移动端唤起键盘时取消position:fixed定位</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>