<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java基础进阶02-xml - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java基础进阶02-xml" />
<meta property="og:description" content="一、XML（可拓展标记语言） 1.学习网站： https://www.w3schoo1.com.cn
标记语言:通过标签来描述数据的一门语言(标签有时我们也将其称之为元素)
可扩展:标签的名字是可以自定义的
2.作用 用于进行存储数据和传输数据
作为软件的配置文件
3.XML标签 标签由一对尖括号和合法标识符组成 &lt; user &gt;
标签必须成对出现&lt; user &gt;&lt; user/&gt;
特殊的标签可以不成对，但是必须有结束标记&lt; user/ &gt;
标签中可以定义属性，属性和标签名空格隔开属性值必须用引号(单/双)引起来&lt; user id = &#34;100&#34;/&gt;
标签需要正确的嵌套
4.XML语法 后缀名为.xml
文档声明必须是第一行第一列
&lt;?xmlversion=&#34;1.0”encoding=&#34;UTF-8&#34; standalone= “yes”?&gt; 其中 version属性必须存在 encoding属性不是必须的，作用：打开当前xml文件的时候应该是使用什么字符编码表（默认都是UTF-8） standalone属性不是必须的，作用：描述XML文件是否依赖其他的xml文件，取值为yes/no 必须存在根标签
XML文件中可以定义注释信息
XML文件中可以存在以下特殊字符
&amp;lt;-----------------小于 &amp;gt;-----------------大于 &amp;amp;----------------和号（&amp;） &amp;apos;---------------单引号 &amp;quot;---------------引号 XML可以存在CDATA区
&lt;![CDATA[ ...内容...]]&gt; 5.解析XML （1）常见解析思想DOM DOM(DocumentObject Model)文档对象模型：
就是把文档的各个组成部分看做成对应的对象，会把xmI文件全部加载到内存在内存中形成一个树形结构，再获取对应的值
其中DOM对象主要有以下部分
Document对象:整个xml文档
Element对象:所有标签
Attribute对象:所有属性
Text对象:所有文本内容
其中Element，Attribute，Text有一个共同的父类：Node对象
6.常见的解析工具 JAXP：SUN公司提供的一套XML的解析的API
JDOM：开源组织提供了一套XML的解析的API-jdom
DOM4J：开源组织提供了一套XML的解析的API-dom4j
pull ：主要应用在Android手机端解析XML
7.DOM4j的使用 首先下载jar包
xml文件
&lt;?xml version=&#34;1.0&#34; encoding=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/70d6c28a5431006efa1a159e11938c4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-24T19:31:07+08:00" />
<meta property="article:modified_time" content="2024-01-24T19:31:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java基础进阶02-xml</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、XML（可拓展标记语言）</h2> 
<h4>1.学习网站：</h4> 
<p><a href="https://www.w3schoo1.com.cn" rel="nofollow" title="https://www.w3schoo1.com.cn">https://www.w3schoo1.com.cn</a></p> 
<ul><li> <p>标记语言:通过标签来描述数据的一门语言(标签有时我们也将其称之为元素)</p> </li><li> <p>可扩展:标签的名字是可以自定义的</p> </li></ul> 
<p></p> 
<h4>2.作用</h4> 
<ul><li> <p>用于进行存储数据和传输数据</p> </li><li> <p>作为软件的配置文件</p> </li></ul> 
<p></p> 
<h4>3.XML标签</h4> 
<ul><li> <p>标签由一对尖括号和合法标识符组成 &lt; user &gt;</p> </li><li> <p>标签必须成对出现&lt; user &gt;&lt; user/&gt;</p> </li><li> <p>特殊的标签可以不成对，但是必须有结束标记&lt; user/ &gt;</p> </li><li> <p>标签中可以定义属性，属性和标签名空格隔开属性值必须用引号(单/双)引起来&lt; user id = "100"/&gt;</p> </li><li> <p>标签需要正确的嵌套</p> </li></ul> 
<p></p> 
<h4>4.XML语法</h4> 
<ul><li> <p>后缀名为.xml</p> </li><li> <p>文档声明必须是第一行第一列</p> </li></ul> 
<pre>&lt;?xmlversion="1.0”encoding="UTF-8" standalone= “yes”?&gt;
其中
version属性必须存在
encoding属性不是必须的，作用：打开当前xml文件的时候应该是使用什么字符编码表（默认都是UTF-8）
standalone属性不是必须的，作用：描述XML文件是否依赖其他的xml文件，取值为yes/no</pre> 
<ul><li> <p>必须存在根标签</p> </li><li> <p>XML文件中可以定义注释信息</p> </li><li> <p>XML文件中可以存在以下特殊字符</p> </li></ul> 
<pre>&amp;lt;-----------------小于
&amp;gt;-----------------大于
&amp;amp;----------------和号（&amp;）
&amp;apos;---------------单引号
&amp;quot;---------------引号</pre> 
<ul><li> <p>XML可以存在CDATA区</p> </li></ul> 
<pre><code class="language-XML">&lt;![CDATA[ ...内容...]]&gt;</code></pre> 
<p></p> 
<h4>5.解析XML</h4> 
<h5 style="background-color:transparent;">（1）常见解析思想DOM</h5> 
<ul><li> <p>DOM(DocumentObject Model)文档对象模型：</p> </li></ul> 
<p>就是把文档的各个组成部分看做成对应的对象，会把xmI文件全部加载到内存在内存中形成一个树形结构，再获取对应的值</p> 
<p>其中DOM对象主要有以下部分</p> 
<ul><li> <p>Document对象:整个xml文档</p> </li><li> <p>Element对象:所有标签</p> </li><li> <p>Attribute对象:所有属性</p> </li><li> <p>Text对象:所有文本内容</p> </li></ul> 
<p>其中Element，Attribute，Text有一个共同的父类：Node对象</p> 
<p></p> 
<h4>6.常见的解析工具</h4> 
<ul><li> <p>JAXP：SUN公司提供的一套XML的解析的API</p> </li><li> <p>JDOM：开源组织提供了一套XML的解析的API-jdom</p> </li><li> <p>DOM4J：开源组织提供了一套XML的解析的API-dom4j</p> </li><li> <p>pull ：主要应用在Android手机端解析XML</p> </li></ul> 
<p></p> 
<p></p> 
<h4>7.DOM4j的使用</h4> 
<p>首先下载jar包</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/39/68/Ti86kwB2_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/66/31/Nh1xQs2H_o.png"></p> 
<p></p> 
<p></p> 
<p>xml文件</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;books&gt;
    &lt;book id="1"&gt;
        &lt;name&gt;语文&lt;/name&gt;
        &lt;versions&gt;人教版&lt;/versions&gt;
    &lt;/book&gt;
    &lt;book id="2"&gt;
        &lt;name&gt;数学&lt;/name&gt;
        &lt;versions&gt;人教版&lt;/versions&gt;
    &lt;/book&gt;
    &lt;book id="3"&gt;
        &lt;name&gt;数学&lt;/name&gt;
        &lt;versions&gt;苏教版&lt;/versions&gt;
    &lt;/book&gt;
    
    &lt;user id="1"&gt;
        &lt;name&gt;小明&lt;/name&gt;
        &lt;studentID&gt;1235354&lt;/studentID&gt;
    &lt;/user&gt;
&lt;/books&gt;</code></pre> 
<p>需求：</p> 
<ul><li> <p>解析这个xmI文件</p> </li><li> <p>将解析到的Book标签数据封装到Book对象中并将其存储到ArrayList集合中</p> </li><li> <p>遍历集合</p> </li></ul> 
<p></p> 
<p>解析类：</p> 
<pre><code class="language-java">public class Analysis {
​
    public Document parseUrl(String url) throws DocumentException {
        SAXReader reader = new SAXReader();
        return reader.read(url);
    }
    public Document parseUrl(File file) throws DocumentException {
        SAXReader reader = new SAXReader();
        return reader.read(file);
    }
​
}</code></pre> 
<p>Book类</p> 
<pre><code class="language-java">public class Book {
    private String name;
    private String version;
    private Long id;
​
    public Book() {
    }
​
    public Book(String name, String version, Long id) {
        this.name = name;
        this.version = version;
        this.id = id;
    }
​
    public String getName() {
        return name;
    }
​
    public void setName(String name) {
        this.name = name;
    }
​
    public String getVersion() {
        return version;
    }
​
    public void setVersion(String version) {
        this.version = version;
    }
​
    public Long getId() {
        return id;
    }
​
    public void setId(Long id) {
        this.id = id;
    }
​
    @Override
    public String toString() {
        return "Book{" +
                "name='" + name + '\'' +
                ", version='" + version + '\'' +
                ", id=" + id +
                '}';
    }
}</code></pre> 
<p></p> 
<p>测试类</p> 
<pre><code class="language-java">public class Application {
    public static void main(String[] args) throws  DocumentException {
​
        File file = new File("reflection\\src\\xml\\bookstores.xml");
        Analysis analysis = new Analysis();
        Document document = analysis.parseUrl(file);
​
        //获取根标签
        Element rootElement = document.getRootElement();
        //通过根标签获取book标签
        //无参elements（）获取所有子标签
        List&lt;Element&gt; elements = rootElement.elements();
        System.out.println(elements.size());
        elements.forEach(book -&gt; {
            System.out.println(book.getName());
        });
​
        //有参elements（标签名）可以获取所有的指定子标签
        List&lt;Element&gt; books = rootElement.elements("book");
        System.out.println(books.size());
​
        books.forEach(book -&gt; {
            System.out.println("=====================================");
            //获取属性对应的属性值
            System.out.println(book.attribute("id").getValue());
            //获取该标签下的子标签
            book.elements("name").forEach(name -&gt; {
                //获取标签体的内容
                System.out.println(name.getText());
            });
​
            book.elements("version").forEach(v -&gt; {
                //获取标签体的内容
                System.out.println(v.getText());
            });
        });
        System.out.println("------------------------------------");
​
        //准备封装
        ArrayList&lt;Book&gt; bookArrayList = new ArrayList&lt;&gt;();
        books.forEach(book -&gt; {
            Book book1 = new Book(book.element("name").getText(),
                                    book.element("version").getText(),
                                    Long.valueOf(book.attribute("id").getValue()));
            System.out.println(book1);
            bookArrayList.add(book1);
        });
        //最后检查"
        System.out.println("+++++++++++++++++++++++++++++++++++++++++++++++++++++");
        bookArrayList.forEach(book -&gt; System.out.println(book.toString()));
​
​
​
    }
}</code></pre> 
<p></p> 
<h4>8.文档约束</h4> 
<h5>（1）概述</h5> 
<p>用来限定xml文件中可使用的标签以及属性</p> 
<h5>（2）分类</h5> 
<ul><li> <p>DTD</p> </li><li> <p>schema</p> </li></ul> 
<h5>（3）DTD约束</h5> 
<ul><li> <p>创建一个文件，后缀名为.dtd</p> </li><li> <p>看xml文件中使用了哪些元素（&lt;!ELEMENT&gt;可以定义元素）</p> </li><li> <p>判断元素是简单元素还是复杂元素</p> 
  <ul><li> <p>简单元素：没有子元素</p> </li><li> <p>复杂元素：有子元素的</p> </li></ul></li></ul> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4e/65/OWfBWre7_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8b/c4/PPxG1ck3_o.png"></p> 
<p>根据上面的xml写一个DTD约束文件</p> 
<pre><code class="language-XML">&lt;!ELEMENT books (book,user)&gt;
&lt;!ELEMENT book (name,version)&gt;
&lt;!ELEMENT user (name,studentID)&gt;
​
&lt;!ELEMENT studentID (#PCDATA)&gt;
&lt;!ELEMENT name (#PCDATA)&gt;
&lt;!ELEMENT version (#PCDATA)&gt;</code></pre> 
<p></p> 
<p>需要掌握：</p> 
<ul><li> <p>能在xml文件中引入dtd约束文档</p> </li><li> <p>能够简单阅读约束文档</p> </li><li> <p>能根据约束文档写xml文件</p> </li></ul> 
<p></p> 
<h5>（4）引入约束</h5> 
<p>方式一：引入本地dtd</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;!--在xml文件中的第二行写入 &lt;!DOCTYPE 根标签名字 SYSTEM（表示引入本地DTD） ‘DTD文件路径’&gt;--&gt;
&lt;!DOCTYPE books SYSTEM 'restrain.dtd'&gt;</code></pre> 
<p>方式二：在xml文件内部引入</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;!--在xml文件中的第二行写入 &lt;!DOCTYPE 根标签名字 []（表示内部引入dtd，[]内写约束内容）&gt;--&gt;
&lt;!DOCTYPE books [] &gt;</code></pre> 
<p>方式三：引入网络dtd</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;!--在xml文件中的第二行写入 &lt;!DOCTYPE 根标签名字 PUBLIC（表示引入网络DTD） “dtd文件名” “dtd文档的url”&gt;--&gt;
&lt;!DOCTYPE books PUBLIC “dtd文件名” “dtd文档的url”&gt;</code></pre> 
<p></p> 
<h5>（5）DTD语法</h5> 
<h6>①定义元素</h6> 
<pre>&lt;!ELEMENT元素名 元素类型&gt;</pre> 
<ul><li> <p>简单元素</p> 
  <ul><li> <p>EMPTY：表示标签体为空</p> </li><li> <p>ANY：表示标签体可以为空也可以不为空</p> </li><li> <p>PCDATA：表示该元素的内容部分为字符串</p> </li></ul></li><li> <p>复杂元素</p> 
  <ul><li> <p><strong>直接写子元素名称。</strong></p> </li><li> <p><strong>多个子元素可以使用”，“或者 ”|" 隔开;</strong></p> 
    <ul><li> <p><strong>” , "：表示定义子元素的顺序</strong></p> </li><li> <p><strong>”|”： 表示子元素只能出现任意一个</strong></p> 
      <ul><li> <p><strong>"?“：零次或一次</strong></p> </li><li> <p><strong>” + "：一次或多次</strong></p> </li><li> <p><strong>" * "：零次或多次;</strong></p> </li><li> <p>如果不写则表示出现一次</p> </li></ul></li></ul></li></ul><p></p> </li></ul> 
<h6>②定义属性</h6> 
<pre>&lt;!ATTLIST 元素名称 属性名称 属性的类型 属性的约束&gt;</pre> 
<ul><li> <p>属性的类型</p> 
  <ul><li> <p>CDATA类型:普通的字符串</p> </li></ul></li><li> <p>属性的约束：</p> 
  <ul><li> <p>#REQUIRED：属性是必须的</p> </li><li> <p>#IMPLIED：属性不是必需的</p> </li><li> <p>#FIXED value：属性值是固定的value值</p> </li></ul></li></ul> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5dac9a66574e5a8ea630d490be1925e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">设计模式三(原型模式)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7db3b75947395620d3370c33c3452f61/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实习记录——第三天</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>