<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>unity实现坦克对战 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="unity实现坦克对战" />
<meta property="og:description" content="AI坦克建模 感知
在游戏中，程序是可以获得游戏世界任意信息的，设计一个杀死玩家的算法通常是比较容易的，因此如何限制信息获取是设计不同级别 agent 的核心问题。在AI坦克大战的游戏中，AI坦克获取的信息是通过视觉（Vision）得到的。每个AI坦克获取的信息是导航信息，但是因为有障碍物的阻挡，使得AI坦克不会“一窝蜂”的同时涌向玩家。同时，AI坦克并不能实时瞄准玩家，也增加了游戏的可玩性。
思考
主要使用了Unity自带的寻路组件Navigation 进行“思考”寻路。
行动
每个AI坦克都会发射子弹，但是不能让AI坦克一直发射子弹，这样就没得玩了。所以会有一个子弹的准备时间，每间隔一段时间再发射子弹。同时地形凹凸不平，也会使得子弹的轨迹有所偏差。
游戏实现 1. 下载资源 从Assets Store下载tanks tutorial资源
2.动作状态机 3. 制作地图 将想要的颜色所对应的材质拖到地图上
最终地图为
4. 制作子弹 Bullet 实现了子弹的相关设计，设置了子弹的爆炸范围，对于玩家和敌方坦克，子弹会有不同的伤害
using System.Collections; using System.Collections.Generic; using UnityEngine; // 子弹设置 √ public class Bullet : MonoBehaviour { // 设置爆炸范围 public float range = 3.0f; private TankType tankType; // 设置坦克的类型 public void setTankType (TankType type) { tankType = type; } // 设置碰撞事件 private void OnCollisionEnter (Collision collision) { // 打到自己不算 if (collision." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b87c422b4b56d36a523cc6977cbaf4f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-27T15:11:53+08:00" />
<meta property="article:modified_time" content="2022-11-27T15:11:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">unity实现坦克对战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="AI_0"></a>AI坦克建模</h5> 
<ul><li> <p>感知<br> 在游戏中，程序是可以获得游戏世界任意信息的，设计一个杀死玩家的算法通常是比较容易的，因此如何限制信息获取是设计不同级别 agent 的核心问题。在AI坦克大战的游戏中，AI坦克获取的信息是通过视觉（Vision）得到的。每个AI坦克获取的信息是导航信息，但是因为有障碍物的阻挡，使得AI坦克不会“一窝蜂”的同时涌向玩家。同时，AI坦克并不能实时瞄准玩家，也增加了游戏的可玩性。</p> </li><li> <p>思考<br> 主要使用了Unity自带的寻路组件Navigation 进行“思考”寻路。</p> </li><li> <p>行动<br> 每个AI坦克都会发射子弹，但是不能让AI坦克一直发射子弹，这样就没得玩了。所以会有一个子弹的准备时间，每间隔一段时间再发射子弹。同时地形凹凸不平，也会使得子弹的轨迹有所偏差。</p> </li></ul> 
<h5><a id="_9"></a>游戏实现</h5> 
<h6><a id="1__10"></a>1. 下载资源</h6> 
<p>从<code>Assets Store</code>下载<code>tanks tutorial</code>资源</p> 
<h6><a id="2_12"></a>2.动作状态机</h6> 
<p><img src="https://images2.imgbox.com/34/14/HBJmfB4t_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="3__14"></a>3. 制作地图</h6> 
<p><img src="https://images2.imgbox.com/8f/94/ofXY36zN_o.png" alt="在这里插入图片描述"><br> 将想要的颜色所对应的材质拖到地图上<br> <img src="https://images2.imgbox.com/e0/15/NpPgu1Rm_o.png" alt="在这里插入图片描述"><br> 最终地图为<br> <img src="https://images2.imgbox.com/58/ee/pHddhz22_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4__20"></a>4. 制作子弹</h6> 
<p><img src="https://images2.imgbox.com/9a/06/9z7U19hZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2d/e9/Vp7wCfX0_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="Bullet_23"></a>Bullet</h6> 
<p>实现了子弹的相关设计，设置了子弹的爆炸范围，对于玩家和敌方坦克，子弹会有不同的伤害</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 子弹设置 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bullet</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 设置爆炸范围</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> range <span class="token operator">=</span> <span class="token number">3.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TankType</span> tankType<span class="token punctuation">;</span>

    <span class="token comment">// 设置坦克的类型</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> setTankType <span class="token punctuation">(</span><span class="token class-name">TankType</span> type<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        tankType <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置碰撞事件</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> OnCollisionEnter <span class="token punctuation">(</span><span class="token class-name">Collision</span> collision<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 打到自己不算</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>collision<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">"Enemy"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tankType <span class="token operator">==</span> TankType<span class="token punctuation">.</span>ENEMY <span class="token operator">||</span>
            collision<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">"Player"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tankType <span class="token operator">==</span> TankType<span class="token punctuation">.</span>PLAYER<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token class-name">Factory</span> factory <span class="token operator">=</span> Singleton<span class="token operator">&lt;</span>Factory<span class="token operator">&gt;</span><span class="token punctuation">.</span>Instance<span class="token punctuation">;</span>
        <span class="token class-name">ParticleSystem</span> explosion <span class="token operator">=</span> factory<span class="token punctuation">.</span>getParticleSystem <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        explosion<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

        <span class="token comment">// 爆炸范围内的所有物体都受到伤害</span>
        <span class="token class-name">Collider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> colliders <span class="token operator">=</span> Physics<span class="token punctuation">.</span>OverlapSphere <span class="token punctuation">(</span>gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> range<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> collider <span class="token keyword">in</span> colliders<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 设置范围伤害</span>
            <span class="token class-name"><span class="token keyword">float</span></span> dis <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>Distance <span class="token punctuation">(</span>collider<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> damage<span class="token punctuation">;</span>

            <span class="token comment">// 玩家和敌人设置不同的伤害</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>collider<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">"Enemy"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tankType <span class="token operator">==</span> TankType<span class="token punctuation">.</span>PLAYER<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                damage <span class="token operator">=</span> <span class="token number">50.0f</span> <span class="token operator">/</span> dis<span class="token punctuation">;</span>
                collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Tank<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setHP <span class="token punctuation">(</span>collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Tank<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getHP <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>collider<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">"Player"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tankType <span class="token operator">==</span> TankType<span class="token punctuation">.</span>ENEMY<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                damage <span class="token operator">=</span> <span class="token number">20.0f</span> <span class="token operator">/</span> dis<span class="token punctuation">;</span>
                collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Tank<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setHP <span class="token punctuation">(</span>collider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Tank<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getHP <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            explosion<span class="token punctuation">.</span>Play <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>gameObject<span class="token punctuation">.</span>activeSelf<span class="token punctuation">)</span> factory<span class="token punctuation">.</span>recycleBullet <span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="5_76"></a>5.制作玩家</h6> 
<p><img src="https://images2.imgbox.com/34/a2/LtwTOZlc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/13/1e/8cMuQYn1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d4/66/nkZOlyCx_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="Player_80"></a>Player</h6> 
<p>实现了玩家的设计，设置了一个代理事件，主要控制玩家坦克被销毁；设置了玩家坦克初始的生命值，当坦克的生命值低于0则被销毁；控制坦克的移动；控制坦克的左右转向</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 玩家设置 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Tank</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 玩家坦克被摧毁</span>
    <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> DestroyPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">event</span> <span class="token class-name">DestroyPlayer</span> destroyEvent<span class="token punctuation">;</span>

    <span class="token comment">// 设置初始生命值</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> Start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> setHP <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> Update <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>getHP <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            destroyEvent <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 前后方向移动</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> moveForWard <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> moveBackWard <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 实现左右转向</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> turn <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> turnX<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">float</span></span> x <span class="token operator">=</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localEulerAngles<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">float</span></span> y <span class="token operator">=</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localEulerAngles<span class="token punctuation">.</span>y <span class="token operator">+</span> turnX <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localEulerAngles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="6_119"></a>6.制作敌方坦克</h6> 
<p><img src="https://images2.imgbox.com/4b/aa/ybOHGVgm_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/91/e0/wNSyeYyQ_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="Enemy_122"></a>Enemy</h6> 
<p>实现了敌人坦克的设置。由于用到了工厂模式，所以在坦克被销毁的时候需要进行回收；并且实现了 AI 功能，启动了协程，控制坦克的运动和射击操作；在坦克看到玩家的时候会进行跟踪移动，然后在射程范围内进行攻击。</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AI</span><span class="token punctuation">;</span>

<span class="token comment">// 敌人坦克设置 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Enemy</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Tank</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 敌人坦克被摧毁，进行回收</span>
    <span class="token keyword">public</span> <span class="token keyword">delegate</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> RecycleEnemy <span class="token punctuation">(</span><span class="token class-name">GameObject</span> enemy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">event</span> <span class="token class-name">RecycleEnemy</span> recycleEnemy<span class="token punctuation">;</span>

    <span class="token comment">// 玩家位置</span>
    <span class="token keyword">private</span> <span class="token class-name">Vector3</span> playerPos<span class="token punctuation">;</span>

    <span class="token comment">// 游戏是否结束</span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> gameover<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> Start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        playerPos <span class="token operator">=</span> GameDirector<span class="token punctuation">.</span>getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentSceneController<span class="token punctuation">.</span>getPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
        <span class="token comment">// 启动协程</span>
        StartCoroutine <span class="token punctuation">(</span>shoot <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> Update <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        playerPos <span class="token operator">=</span> GameDirector<span class="token punctuation">.</span>getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentSceneController<span class="token punctuation">.</span>getPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
        gameover <span class="token operator">=</span> GameDirector<span class="token punctuation">.</span>getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentSceneController<span class="token punctuation">.</span>GameOver <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gameover<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>getHP <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> recycleEnemy <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> recycleEnemy <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 向玩家移动</span>
                <span class="token class-name">NavMeshAgent</span> agent <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                agent<span class="token punctuation">.</span>SetDestination <span class="token punctuation">(</span>playerPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 游戏结束后停止运动</span>
            <span class="token class-name">NavMeshAgent</span> agent <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavMeshAgent<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            agent<span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
            agent<span class="token punctuation">.</span>ResetPath <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 控制射击</span>
    <span class="token return-type class-name">IEnumerator</span> shoot <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>gameover<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">-=</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

            <span class="token comment">// 射程</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>Distance <span class="token punctuation">(</span>playerPos<span class="token punctuation">,</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> shoot <span class="token punctuation">(</span>TankType<span class="token punctuation">.</span>ENEMY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="7_Factory_177"></a>7. Factory</h6> 
<p>实现了工厂模式，来生产和销毁坦克和子弹；主要设计了初始化游戏物体；生产坦克，生产子弹；回收坦克，回收子弹</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">TankType</span> <span class="token punctuation">{<!-- --></span> PLAYER<span class="token punctuation">,</span> ENEMY <span class="token punctuation">}</span>

<span class="token comment">// 工厂模式</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> player<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> enemy<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> bullet<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">ParticleSystem</span> explosion<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> usedTanks<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> freeTanks<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> usedBullets<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> freeBullets<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">GameObject</span> player_t<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>ParticleSystem<span class="token punctuation">&gt;</span></span> particles<span class="token punctuation">;</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> Awake <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        usedTanks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeTanks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        usedBullets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeBullets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        particles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ParticleSystem<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        player_t <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Instantiate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span>player<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
        player_t<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        player_t<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> Start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> Enemy<span class="token punctuation">.</span>recycleEnemy <span class="token operator">+=</span> recycleEnemy<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 获取玩家</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> getPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> player_t<span class="token punctuation">;</span><span class="token punctuation">}</span>

    <span class="token comment">// 获取敌人</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> getEnemys <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">GameObject</span> newT <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>freeTanks<span class="token punctuation">.</span>Count <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            newT <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Instantiate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span>enemy<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
            usedTanks<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>newT<span class="token punctuation">)</span><span class="token punctuation">;</span>
            newT<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span> <span class="token punctuation">(</span>Random<span class="token punctuation">.</span>Range <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Random<span class="token punctuation">.</span>Range <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            newT <span class="token operator">=</span> freeTanks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            freeTanks<span class="token punctuation">.</span>RemoveAt <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            usedTanks<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>newT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        newT<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newT<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取子弹</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> getBullets <span class="token punctuation">(</span><span class="token class-name">TankType</span> type<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">GameObject</span> newBullet<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>freeBullets<span class="token punctuation">.</span>Count <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            newBullet <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Instantiate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span>bullet<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">GameObject</span><span class="token punctuation">;</span>
            usedBullets<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>newBullet<span class="token punctuation">)</span><span class="token punctuation">;</span>
            newBullet<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span> <span class="token punctuation">(</span>Random<span class="token punctuation">.</span>Range <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Random<span class="token punctuation">.</span>Range <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            newBullet <span class="token operator">=</span> freeBullets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            freeBullets<span class="token punctuation">.</span>RemoveAt <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            usedBullets<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>newBullet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        newBullet<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Bullet<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setTankType <span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newBullet<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newBullet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取粒子系统</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ParticleSystem</span> getParticleSystem <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> particle <span class="token keyword">in</span> particles<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>particle<span class="token punctuation">.</span>isPlaying<span class="token punctuation">)</span> <span class="token keyword">return</span> particle<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">ParticleSystem</span> newT <span class="token operator">=</span> GameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Instantiate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ParticleSystem<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span>explosion<span class="token punctuation">)</span><span class="token punctuation">;</span>
        particles<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>newT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newT<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 回收坦克</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> recycleEnemy <span class="token punctuation">(</span><span class="token class-name">GameObject</span> enemyTank<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        usedTanks<span class="token punctuation">.</span>Remove <span class="token punctuation">(</span>enemyTank<span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeTanks<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>enemyTank<span class="token punctuation">)</span><span class="token punctuation">;</span>
        enemyTank<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
        enemyTank<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 回收子弹</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> recycleBullet <span class="token punctuation">(</span><span class="token class-name">GameObject</span> Bullet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        usedBullets<span class="token punctuation">.</span>Remove <span class="token punctuation">(</span>Bullet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        freeBullets<span class="token punctuation">.</span>Add <span class="token punctuation">(</span>Bullet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Bullet<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
        Bullet<span class="token punctuation">.</span>SetActive <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="GameDirector_285"></a>GameDirector</h6> 
<p>实现了总导演的设计，主要是得到实例化</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 总导演 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameDirector</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>Object</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">GameDirector</span> _instance<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">SceneController</span> currentSceneController <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">private</span> GameDirector <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">GameDirector</span> getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> _instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameDirector</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="IUserAction_308"></a>IUserAction</h6> 
<p>实现了动作的接口；主要有控制玩家坦克的转动以及行进；控制射击；控制游戏是否结束</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 动作接口 √</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserAction</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 控制转动和行进</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> moveForWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> moveBackWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> turn <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> turnX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 控制射击</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> shoot <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 控制游戏结束</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> GameOver <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="IUserGUI_329"></a>IUserGUI</h6> 
<p>实现了游戏界面的设置；主要是设计了监听键盘的输入，来控制坦克的行进以及攻击的操作；并且在游戏结束后显示 Game Over!</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 设置界面 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IUserGUI</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">IUserAction</span> action<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> Start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        action <span class="token operator">=</span> GameDirector<span class="token punctuation">.</span>getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentSceneController <span class="token keyword">as</span> <span class="token class-name">IUserAction</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> Update <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>action<span class="token punctuation">.</span>GameOver <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 监听键盘</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span>GetKey <span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span> action<span class="token punctuation">.</span>moveForWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span>GetKey <span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span> action<span class="token punctuation">.</span>moveBackWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span>GetKeyDown <span class="token punctuation">(</span>KeyCode<span class="token punctuation">.</span>Space<span class="token punctuation">)</span><span class="token punctuation">)</span> action<span class="token punctuation">.</span>shoot <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> turnX <span class="token operator">=</span> Input<span class="token punctuation">.</span>GetAxis <span class="token punctuation">(</span><span class="token string">"Horizontal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            action<span class="token punctuation">.</span>turn <span class="token punctuation">(</span>turnX<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> OnGUI <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 游戏结束</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>GameOver <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">GUIStyle</span> font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIStyle</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            font<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
            font<span class="token punctuation">.</span>normal<span class="token punctuation">.</span>textColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>red<span class="token punctuation">;</span>
            GUI<span class="token punctuation">.</span>Label <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span> <span class="token punctuation">(</span>Screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">,</span> Screen<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Game Over!"</span><span class="token punctuation">,</span> font<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="SceneController_369"></a>SceneController</h6> 
<p>实现了场景控制器。用来生产玩家和敌人；并且实现了第一视角的设置，将相机的位置始终跟随玩家；可以获取玩家的物体；控制玩家进行移动；控制玩家进行设计；返回游戏的状态并且可以设置游戏的状态</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 场景控制器 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SceneController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span><span class="token punctuation">,</span> <span class="token class-name">IUserAction</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">GameDirector</span> director<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> player<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Factory</span> myFactory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">GameObject<span class="token punctuation">[</span><span class="token punctuation">]</span></span> enemies<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> enemyCount <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> gameOver <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> Awake <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        director <span class="token operator">=</span> GameDirector<span class="token punctuation">.</span>getInstance <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        director<span class="token punctuation">.</span>currentSceneController <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

        myFactory <span class="token operator">=</span> Singleton<span class="token operator">&lt;</span>Factory<span class="token operator">&gt;</span><span class="token punctuation">.</span>Instance<span class="token punctuation">;</span>
        enemies <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">[</span>enemyCount<span class="token punctuation">]</span><span class="token punctuation">;</span>

        gameOver <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 生产玩家和敌人 </span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> Start <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        player <span class="token operator">=</span> myFactory<span class="token punctuation">.</span>getPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> enemyCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> enemies<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> myFactory<span class="token punctuation">.</span>getEnemys <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Player<span class="token punctuation">.</span>destroyEvent <span class="token operator">+=</span> setGameOver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置相机的位置</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> Update <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Camera<span class="token punctuation">.</span>main<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span> <span class="token punctuation">(</span>player<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> player<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取玩家游戏物体</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">GameObject</span> getPlayer <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> player<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 控制玩家移动</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> moveForWard <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>moveForWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> moveBackWard <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>moveBackWard <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> turn <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> turnX<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>turn <span class="token punctuation">(</span>turnX<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 控制玩家射击</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> shoot <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Player<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shoot <span class="token punctuation">(</span>TankType<span class="token punctuation">.</span>PLAYER<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 返回游戏状态</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> GameOver <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> gameOver<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// 游戏结束</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> setGameOver <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> gameOver <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>将<code>IUserGUI</code>、<code>SceneController</code>、<code>Factory</code>挂载到相机上<br> <img src="https://images2.imgbox.com/ce/00/doeS9RUv_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="Singleton_430"></a>Singleton</h6> 
<p>实现了单实例模式</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 场景单实例模式 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token class-name">T</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">T</span> Instance <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">get</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> instance <span class="token operator">=</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> FindObjectOfType <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="Tank_451"></a>Tank</h6> 
<p>实现了坦克的相关属性；主要设置了坦克初始的生命值为100；并且设置了 get/set 方法。以及设置被攻击后生命值的减少；射击子弹射击的方向以及力度</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token comment">// 设置坦克相关属性 √</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tank</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">float</span></span> health <span class="token operator">=</span> <span class="token number">100.0f</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化生命值</span>
    <span class="token keyword">public</span> Tank <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> health <span class="token operator">=</span> <span class="token number">100.0f</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 设置/获取生命值</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> setHP <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> health<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">this</span><span class="token punctuation">.</span>health <span class="token operator">=</span> health<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> getHP <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> health<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 被攻击</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> Attacked <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> health <span class="token operator">-=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// 设置子弹射击</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> shoot <span class="token punctuation">(</span><span class="token class-name">TankType</span> type<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">GameObject</span> bullet <span class="token operator">=</span> Singleton<span class="token operator">&lt;</span>Factory<span class="token operator">&gt;</span><span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>getBullets <span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置子弹射的方向</span>
        bullet<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span> <span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">1.5f</span><span class="token punctuation">,</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">+</span> transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token number">1.5f</span><span class="token punctuation">;</span>
        bullet<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>forward <span class="token operator">=</span> transform<span class="token punctuation">.</span>forward<span class="token punctuation">;</span>
        bullet<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AddForce <span class="token punctuation">(</span>bullet<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">,</span> ForceMode<span class="token punctuation">.</span>Impulse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h6><a id="8__485"></a>8. 导航</h6> 
<p>之前已经给玩家和敌方坦克添加了<code>Nav Mesh Agent</code>组件，在菜单栏点击窗口-AI-导航，在右侧窗口点击烘培，点击下方<code>Bake</code>按钮，生成导航网格图<br> <img src="https://images2.imgbox.com/9a/21/jurDrY9g_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a3/0b/qJqXYPIR_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_490"></a>游戏说明</h5> 
<p>玩家通过键盘上的<code>wsad</code>按键控制坦克的移动，玩家是蓝色坦克，敌人是绿色坦克，当玩家暴露在敌人的视野中，敌人就会跟踪玩家，并向玩家发送子弹，玩家要尽可能躲避子弹，按空格键可以向敌人发射子弹。每个坦克都有自己的生命值，当生命值小于零时会被销毁，当玩家坦克被销毁时，游戏结束。</p> 
<h5><a id="_492"></a>实现效果</h5> 
<ul><li>游戏地图<br> <img src="https://images2.imgbox.com/8a/8a/zJN0TLQA_o.png" alt="在这里插入图片描述"></li><li>游戏进行中<br> <img src="https://images2.imgbox.com/1e/8b/AUBrmQlf_o.png" alt="在这里插入图片描述"></li><li>游戏结束<br> <img src="https://images2.imgbox.com/04/57/QVHNkgzf_o.png" alt="在这里插入图片描述"></li></ul> 
<h6><a id="_499"></a>视频效果</h6> 
<p><a href="https://www.bilibili.com/video/BV1gG411F7c6/" rel="nofollow">视频效果</a></p> 
<h6><a id="_502"></a>项目地址</h6> 
<p><a href="https://pan.baidu.com/s/1Naf9CT8xudhf0nO-gC1_Cg?pwd=llqi" rel="nofollow">项目地址</a></p> 
<p>将<code>Assets</code>文件夹下载到本地，然后直接通过unity打开即可成功运行，或者新建一个项目，用<code>Assets</code>覆盖原来的文件夹，打开后即可正常运行。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5693546ed7e321b0d8cf7fccbcdbf4b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">排序算法简述</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b36fc3711463e2892c9cf4cb7aa35981/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DIFFUSIONCLIP: TEXT-GUIDED IMAGE MANIPULATION USING DIFFUSION MODELS</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>