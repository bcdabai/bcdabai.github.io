<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>package.json 详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="package.json 详解" />
<meta property="og:description" content="文章目录 package.json1. name2. version3. description4. homepage5. bugs6. license7. author, contributors8. funding9. files10. main11. module12. browser13. bin14. man15. directories15.1 directories.bin15.2 directories.man 16. repository17. scripts18. config19. dependencies19.1 URLs as Dependencies19.2 Git URLs as Dependencies19.3 GitHub URLs19.4 Local Paths 20. devDependencies21. peerDependencies22. peerDependenciesMeta23. bundleDependencies24. optionalDependencies25. overrides26. engines27. os28. cpu29. private30. publishConfig31. workspaces32. DEFAULT VALUES33. 更多 package.json npm package.json 文件的详细说明。
Version:9.8.1
本文档包含了关于 package.json 文件中所需内容的所有信息。它必须是有效的 JSON 格式，而不仅仅是 JavaScript 对象字面量。
1. name 如果您计划发布您的包，那么 package.json 文件中最重要的字段是 name 和 version，它们是必需的。name 和 version 共同形成一个被认为是完全唯一的标识符。对包的更改应该伴随着版本的更改。如果您不打算发布您的包，name 和 version 字段是可选的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fc662a0e794aff042b9ea3c13552439e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-28T16:03:51+08:00" />
<meta property="article:modified_time" content="2023-08-28T16:03:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">package.json 详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#packagejson_1" rel="nofollow">package.json</a></li><li><ul><li><a href="#1_name_13" rel="nofollow">1. name</a></li><li><a href="#2_version_34" rel="nofollow">2. version</a></li><li><a href="#3_description_40" rel="nofollow">3. description</a></li><li><a href="#4_homepage_44" rel="nofollow">4. homepage</a></li><li><a href="#5_bugs_54" rel="nofollow">5. bugs</a></li><li><a href="#6_license_70" rel="nofollow">6. license</a></li><li><a href="#7_author_contributors_152" rel="nofollow">7. author, contributors</a></li><li><a href="#8_funding_178" rel="nofollow">8. funding</a></li><li><a href="#9_files_211" rel="nofollow">9. files</a></li><li><a href="#10_main_246" rel="nofollow">10. main</a></li><li><a href="#11_module_256" rel="nofollow">11. module</a></li><li><a href="#12_browser_275" rel="nofollow">12. browser</a></li><li><a href="#13_bin_291" rel="nofollow">13. bin</a></li><li><a href="#14_man_337" rel="nofollow">14. man</a></li><li><a href="#15_directories_391" rel="nofollow">15. directories</a></li><li><ul><li><a href="#151_directoriesbin_397" rel="nofollow">15.1 directories.bin</a></li><li><a href="#152_directoriesman_402" rel="nofollow">15.2 directories.man</a></li></ul> 
   </li><li><a href="#16_repository_405" rel="nofollow">16. repository</a></li><li><a href="#17_scripts_446" rel="nofollow">17. scripts</a></li><li><a href="#18_config_452" rel="nofollow">18. config</a></li><li><a href="#19_dependencies_489" rel="nofollow">19. dependencies</a></li><li><ul><li><a href="#191_URLs_as_Dependencies_538" rel="nofollow">19.1 URLs as Dependencies</a></li><li><a href="#192_Git_URLs_as_Dependencies_544" rel="nofollow">19.2 Git URLs as Dependencies</a></li><li><a href="#193_GitHub_URLs_580" rel="nofollow">19.3 GitHub URLs</a></li><li><a href="#194_Local_Paths_598" rel="nofollow">19.4 Local Paths</a></li></ul> 
   </li><li><a href="#20_devDependencies_622" rel="nofollow">20. devDependencies</a></li><li><a href="#21_peerDependencies_651" rel="nofollow">21. peerDependencies</a></li><li><a href="#22_peerDependenciesMeta_678" rel="nofollow">22. peerDependenciesMeta</a></li><li><a href="#23_bundleDependencies_705" rel="nofollow">23. bundleDependencies</a></li><li><a href="#24_optionalDependencies_732" rel="nofollow">24. optionalDependencies</a></li><li><a href="#25_overrides_757" rel="nofollow">25. overrides</a></li><li><a href="#26_engines_844" rel="nofollow">26. engines</a></li><li><a href="#27_os_870" rel="nofollow">27. os</a></li><li><a href="#28_cpu_899" rel="nofollow">28. cpu</a></li><li><a href="#29_private_925" rel="nofollow">29. private</a></li><li><a href="#30_publishConfig_931" rel="nofollow">30. publishConfig</a></li><li><a href="#31_workspaces_953" rel="nofollow">31. workspaces</a></li><li><a href="#32_DEFAULT_VALUES_972" rel="nofollow">32. DEFAULT VALUES</a></li><li><a href="#33__988" rel="nofollow">33. 更多</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="packagejson_1"></a>package.json</h2> 
<p>npm <em>package.json</em> 文件的详细说明。</p> 
<blockquote> 
 <p>Version:9.8.1</p> 
</blockquote> 
<p>本文档包含了关于 <em>package.json</em> 文件中所需内容的所有信息。它必须是有效的 JSON 格式，而不仅仅是 JavaScript 对象字面量。</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/42/32/hDPCIWSG_o.png" alt="npm"> 
</div> 
<h3><a id="1_name_13"></a>1. name</h3> 
<p>如果您计划发布您的包，那么 <em>package.json</em> 文件中最重要的字段是 <code>name</code> 和 <code>version</code>，它们是必需的。<code>name</code> 和 <code>version</code> 共同形成一个被认为是完全唯一的标识符。对包的更改应该伴随着版本的更改。如果您不打算发布您的包，<code>name</code> 和 <code>version</code> 字段是可选的。</p> 
<p><code>name</code> 字段表示您项目的名称。</p> 
<p>一些规则：</p> 
<ul><li>名称必须小于等于 214 个字符，包括作用域（对于有作用域的包）。</li><li>有作用域的包的名称可以以点（.）或下划线（_）开头，但没有作用域时不允许这样。</li><li>新的包名称中不能包含大写字母。</li><li>名称最终会成为 URL 的一部分、命令行的参数以及文件夹的名称。因此，名称不能包含任何非 URL 安全的字符。</li></ul> 
<p>一些建议：</p> 
<ul><li>不要使用与 Node 的核心模块相同的名称。</li><li>不要在名称中使用 “js” 或 “node”。因为您正在编写 <em>package.json</em> 文件，所以默认是 <em>JavaScript</em>，您可以使用 <code>engines</code> 字段来指定引擎（请参阅下文）。</li><li>名称可能会作为 <code>require()</code> 函数的参数传递，因此它应该是简短的，但也要有一定的描述性。</li><li>在您确定名称之前，最好希望在 npm 注册表中检查是否已经有同名的包存在<a href="https://www.npmjs.com/" rel="nofollow">https://www.npmjs.com/</a>。</li><li>名称可以选择性地添加作用域前缀，例如 <code>@myorg/mypackage</code>。有关更多详细信息，请参阅<a href="https://docs.npmjs.com/cli/v9/using-npm/scope/" rel="nofollow">作用域</a>。</li></ul> 
<h3><a id="2_version_34"></a>2. version</h3> 
<p>如果您计划发布您的包，那么 <em>package.json</em> 文件中最重要的字段是 <code>name</code> 和 <code>version</code>，它们是必需的。<code>name</code> 和 <code>version</code> 共同形成一个被认为是完全唯一的标识符。对包的更改应该伴随着版本的更改。如果您不打算发布您的包，<code>name</code> 和 <code>version</code> 字段是可选的。</p> 
<p>版本号必须符合 <a href="https://github.com/npm/node-semver">node-semver</a> 的解析规则，npm 默认包含了 <a href="https://github.com/npm/node-semver">node-semver</a> （您可以使用<code>npm install semver</code>自行使用它）。</p> 
<h3><a id="3_description_40"></a>3. description</h3> 
<p>对于您的包的描述，这将帮助开发者发现您的软件包，在 <code>npm search</code> 时，它将一同显示。</p> 
<h3><a id="4_homepage_44"></a>4. homepage</h3> 
<p>项目的首页地址。</p> 
<p>例如：</p> 
<pre><code class="prism language-json"><span class="token string-property property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://github.com/owner/project#readme"</span>
</code></pre> 
<h3><a id="5_bugs_54"></a>5. bugs</h3> 
<p>指向项目的 issue 报告网址和或电子邮件地址。当使用您的包的开发者发现问题时，他可以及时地提交 issue。</p> 
<p>例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"https://github.com/owner/project/issues"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"project@hostname.com"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>您可以指定一个或两个值。如果您只想提供一个网址，您可以将 <code>bugs</code> 的值指定为简单的字符串，而不是对象。</p> 
<p>如果提供了网址，它将用于 <code>npm bugs</code> 命令。</p> 
<h3><a id="6_license_70"></a>6. license</h3> 
<p>为了让用户知道如何使用您的包以及您对其使用的任何限制，请为您的软件包指定一个许可证。</p> 
<p>如果您使用的是常见的许可证，如 BSD-2-Clause 或 MIT，请添加一个当前的SPDX许可证标识符，示例如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span> <span class="token operator">:</span> <span class="token string">"BSD-3-Clause"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>您可以查看<a href="https://spdx.org/licenses/" rel="nofollow">完整的 SPDX 许可证标识符列表</a>。最好选择一个经过 <a href="https://opensource.org/licenses/" rel="nofollow">OSI</a> 批准的标识符。</p> 
<p>如果您的软件包使用多个常见的许可证，请使用 <a href="https://spdx.dev/specifications/" rel="nofollow">SPDX 许可证表达式语法版本 2.0 的字符串</a>，示例如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span> <span class="token operator">:</span> <span class="token string">"(ISC OR GPL-3.0)"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果您使用的是尚未分配 SPDX 标识符的许可证，或者您使用的是自定义许可证，请使用以下字符串值：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span> <span class="token operator">:</span> <span class="token string">"SEE LICENSE IN &lt;filename&gt;"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后，在软件包的顶级目录中包含一个名为 <code>&lt;filename&gt;</code> 的文件。</p> 
<p>一些旧的软件包使用许可证对象或包含许可证对象数组的 “licenses” 属性：</p> 
<pre><code class="prism language-json"><span class="token comment">// Not valid metadata</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"type"</span> <span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"https://opensource.org/licenses/ISC"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Not valid metadata</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"licenses"</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.opensource.org/licenses/mit-license.php"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"Apache-2.0"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"url"</span><span class="token operator">:</span> <span class="token string">"https://opensource.org/licenses/apache2.0.php"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这种方式现在已被弃用。请改用SPDX表达式，示例如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"(MIT OR Apache-2.0)"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后，如果您不希望以任何条件授予他人使用私有或未发布的软件包的权利，请使用以下方式：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"license"</span><span class="token operator">:</span> <span class="token string">"UNLICENSED"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>考虑将 <code>private</code> 设置为 true，以防止意外发布。</p> 
<h3><a id="7_author_contributors_152"></a>7. author, contributors</h3> 
<p>作者和贡献者信息。</p> 
<p>在 <em>package.json</em> 文件中，<code>author</code> 用于表示作者，<code>contributors</code> 用于表示贡献者，是一个包含多个人的数组。可用一个对象来记录人的信息，包含一个 <code>name</code> 字段，还可以添加 <code>url</code> 和 <code>name</code> 字段（这两个字段为可选），示例如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span> <span class="token operator">:</span> <span class="token string">"Barney Rubble"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span> <span class="token operator">:</span> <span class="token string">"b@rubble.com"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"http://barnyrubble.tumblr.com/"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>或者您可以将所有信息缩写为一个字符串，npm 将为您解析它：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"author"</span><span class="token operator">:</span> <span class="token string">"Barney Rubble &lt;b@rubble.com&gt; (http://barnyrubble.tumblr.com/)"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>无论哪种方式，<code>email</code> 和 <code>url</code> 都是可选的。</p> 
<p>此外，npm 还会在顶级的 <code>maintainers</code> 字段中设置您的 npm 用户信息。</p> 
<h3><a id="8_funding_178"></a>8. funding</h3> 
<p>资助开发信息。</p> 
<p>您可以指定一个包含提供关于如何资助您的软件包开发的最新信息的 URL 的对象，或者一个 URL 字符串，或者这些的数组形式组合：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"funding"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"type"</span> <span class="token operator">:</span> <span class="token string">"individual"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"http://example.com/donate"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"funding"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"type"</span> <span class="token operator">:</span> <span class="token string">"patreon"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"https://www.patreon.com/my-account"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"funding"</span><span class="token operator">:</span> <span class="token string">"http://example.com/donate"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"funding"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"type"</span> <span class="token operator">:</span> <span class="token string">"individual"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"http://example.com/donate"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"http://example.com/donateAlso"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"type"</span> <span class="token operator">:</span> <span class="token string">"patreon"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"url"</span> <span class="token operator">:</span> <span class="token string">"https://www.patreon.com/my-account"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>用户可以使用 <code>npm fund</code> 命令列出其项目的所有直接和间接依赖项的资助 URL。当提供项目名称时，还可以使用快捷方式访问每个资助 URL，例如：<code>npm fund &lt;projectname&gt;</code>（当存在多个URL时，将访问第一个URL）。</p> 
<h3><a id="9_files_211"></a>9. files</h3> 
<p><code>files</code> 字段是包含一个文件匹配模式的数组，用于描述在将您的软件包安装为依赖项时应包含的条目。文件匹配模式遵循类似于 <em>.gitignore</em> 的语法，被 <code>files</code> 字段匹配的文件、目录或通配符模式（如<code>*</code>、<code>**/*</code>等）会在 npm 打包时包含在 tarball 中。如果省略该字段，将默认为<code>["*"]</code>，表示将包含所有文件。</p> 
<p>无论文件在 <code>files</code> 数组中是否匹配，某些特殊文件和目录始终会被包含或排除（见下文）。</p> 
<p>您还可以在软件包的根目录或子目录中提供一个 <em>.npmignore</em> 文件，以防止文件被包含。在软件包的根目录中，它不会覆盖 <code>files</code> 字段，但在子目录中会。<em>.npmignore</em> 文件的工作方式与 <em>.gitignore</em> 类似。如果存在 <em>.gitignore</em> 文件但没有发现 <em>.npmignore</em> 文件，则会将 <em>.gitignore</em> 视为 <em>.npmignore</em> 文件。</p> 
<p>某些文件始终被包含，无论设置如何：</p> 
<ul><li><em>package.json</em></li><li><em>README</em></li><li><em>LICENSE</em> / <em>LICENCE</em></li><li><em>main</em> 字段指定的文件</li></ul> 
<p><em>README</em> 和 <em>LICENSE</em> 可以具有任何大小写和扩展名。</p> 
<p>相反地，某些文件始终被忽略：</p> 
<ul><li><em>.git</em></li><li><em>CVS</em></li><li><em>.svn</em></li><li><em>.hg</em></li><li><em>.lock-wscript</em></li><li><em>.wafpickle-N</em></li><li><em>.*.swp</em></li><li><em>.DS_Store</em></li><li><em>.</em>*_</li><li><em>npm-debug.log</em></li><li><em>.npmrc</em></li><li><em>node_modules</em></li><li><em>config.gypi</em></li><li><em>*.orig</em></li><li><em>package-lock.json</em>（如果希望发布，请使用 <a href="https://docs.npmjs.com/cli/v9/configuring-npm/npm-shrinkwrap-json/" rel="nofollow"><em>npm-shrinkwrap.json</em></a>）</li></ul> 
<h3><a id="10_main_246"></a>10. main</h3> 
<p><code>main</code> 字段是一个模块 ID，它是您程序的主要入口点。也就是说，如果您的软件包名为 foo，用户安装了它，然后使用 <code>require("foo")</code> 进行引入，那么您的主要模块导出的对象将被返回。</p> 
<p>该字段应该是相对于您软件包文件夹根目录的模块路径。</p> 
<p>对于大多数模块来说，最合理的做法是只有一个主要脚本文件。</p> 
<p>如果未设置 <code>main</code> 字段，会默认将软件包根目录中的 <code>index.js</code> 文件作为包主入口。</p> 
<h3><a id="11_module_256"></a>11. module</h3> 
<p><code>module</code> 字段用于指定模块的入口文件。这个字段通常在库或包中使用，以便构建工具（如 Webpack 和 Rollup）可以找到并使用模块的 ES6 模块版本。ES6 模块允许更好的静态分析（例如 tree-shaking），从而使构建工具可以优化生成的代码。</p> 
<p>当构建工具处理一个包时，会首先查看 <code>module</code> 字段。如果不存在这个字段，那么它们会回退到其他字段，如 <code>main</code>。</p> 
<p>例如，在 <em>package.json</em> 中，您可以将 <code>module</code> 字段设置为指向 ES6 模块版本的入口文件：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-library"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"dist/index.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"module"</span><span class="token operator">:</span> <span class="token string">"src/index.js"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个例子中，<code>main</code> 字段指向的是通常的 CommonJS 版本的入口文件，而 <code>module</code> 字段指向的是 ES6 模块版本的入口文件。这样，支持 ES6 模块的构建工具可以使用 <code>module</code> 字段，而其他工具可以继续使用 <code>main</code> 字段。</p> 
<h3><a id="12_browser_275"></a>12. browser</h3> 
<p>如果您的模块用于客户端浏览器环境，应该使用 <code>browser</code> 字段而不是 <code>main</code> 字段。这有助于提示用户，该模块可能依赖于在 Node.js 环境下不可用的一些原始对象（例如 <code>window</code> 对象）。</p> 
<p>您可以在 <em>package.json</em> 文件中添加一个 <code>browser</code> 字段来指定客户端浏览器环境下的模块入口点。示例如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"browser"</span><span class="token operator">:</span> <span class="token string">"dist/browser.js"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上述示例中，<code>dist/browser.js</code>是相对于软件包根目录的模块路径，它将作为在浏览器环境中使用该模块时的入口点。</p> 
<p>请注意，<code>browser</code> 字段只在浏览器环境中生效，在 Node.js 环境中不生效。</p> 
<h3><a id="13_bin_291"></a>13. bin</h3> 
<p>在 npm 中，大量的包都希望将一个或多个可执行文件安装到 <code>PATH</code> 中。npm 使这变得相当容易（事实上，它使用这个功能来安装 “npm” 可执行文件）。</p> 
<p>要使用这个功能，在 <em>package.json</em> 文件中提供一个 <code>bin</code> 字段，它是一个命令名称到本地文件名的映射。当这个包被全局安装时，该文件将被链接到全局的 bins 目录中，或者将创建一个 cmd（Windows 命令文件），该文件会执行 bin 字段中指定的文件，以便通过名称或 name.cmd（在 Windows PowerShell 中）来运行。当这个包作为另一个包的依赖项安装时，该文件将被链接到该包中，可以通过 <code>npm exec</code> 直接访问，或者通过 <code>npm run-script</code> 在其他脚本中通过名称调用。</p> 
<p>例如，myapp 可以这样配置：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"bin"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"myapp"</span><span class="token operator">:</span> <span class="token string">"./cli.js"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>因此，当你安装 myapp 时，在类 Unix 的操作系统上，它会创建一个从 <em>cli.js</em> 脚本到 <em>/usr/local/bin/myapp</em> 的符号链接；在 Windows 上，它会创建一个 cmd 文件，通常位于 <em>C:\Users{Username}\AppData\Roaming\npm\myapp.cmd</em>，该文件运行 <em>cli.js</em> 脚本。</p> 
<p>如果你只有一个可执行文件，且其名称是包名时，那么你可以直接将其提供为字符串。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-program"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.2.5"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"bin"</span><span class="token operator">:</span> <span class="token string">"./path/to/program"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>与以下配置等效：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-program"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.2.5"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"bin"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"my-program"</span><span class="token operator">:</span> <span class="token string">"./path/to/program"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>请确保在 <code>bin</code> 字段中引用的文件以 <code>#!/usr/bin/env node</code> 开头，否则脚本将在没有 node 可执行文件的情况下启动！</p> 
<p>注意，你也可以使用 <a href="https://docs.npmjs.com/cli/v9/configuring-npm/package-json#directoriesbin" rel="nofollow"><code>directories.bin</code></a> 来设置可执行文件的目录。</p> 
<p>有关可执行文件的更多信息，请参阅 <a href="https://docs.npmjs.com/cli/v9/configuring-npm/folders#executables" rel="nofollow">folders</a>。</p> 
<h3><a id="14_man_337"></a>14. man</h3> 
<p>man 字段是用来指定包的文档文件的位置和名称的，为单个文件或文件数组。这个字段通常被用于 Node.js 模块的文档生成工具，比如 man 命令。</p> 
<blockquote> 
 <p>man 命令是一个用于查看 Unix/Linux 系统上的帮助文档的命令，可以通过 man 命令查看 Node.js 模块的文档</p> 
</blockquote> 
<p>如果只提供了单个文件，则安装方式是将其作为 <code>man &lt;pkgname&gt;</code> 的结果，而不考虑其实际文件名。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.2.3"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"A packaged foo fooer for fooing foos"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"foo.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"man"</span><span class="token operator">:</span> <span class="token string">"./man/doc.1"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这将链接 <code>./man/doc.1</code> 文件，使其成为 <code>man foo</code> 的目标。</p> 
<p>如果文件名不以包名开头，则会添加包名前缀。因此，以下示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.2.3"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"A packaged foo fooer for fooing foos"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"foo.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"man"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./man/foo.1"</span><span class="token punctuation">,</span>
    <span class="token string">"./man/bar.1"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>将创建用于执行 <code>man foo</code> 和 <code>man foo-bar</code> 的文件。</p> 
<p>man 文件必须以数字结尾，如果被压缩，则可以选择添加 <code>.gz</code> 后缀。该数字指定将文件安装到哪个 man 节。</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.2.3"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"A packaged foo fooer for fooing foos"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"main"</span><span class="token operator">:</span> <span class="token string">"foo.js"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"man"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./man/foo.1"</span><span class="token punctuation">,</span>
    <span class="token string">"./man/foo.2"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>将创建 <code>man foo</code> 和 <code>man 2 foo</code> 的条目。</p> 
<h3><a id="15_directories_391"></a>15. directories</h3> 
<p>在 CommonJS <a href="https://wiki.commonjs.org/wiki/Packages/1.0" rel="nofollow">Packages</a> 规范中，可以使用 <code>directories</code> 对象来表明包的结构。如果查看 <a href="https://registry.npmjs.org/npm/latest" rel="nofollow">npm 的 <em>package.json</em></a> 文件，你会看到它有 <code>doc、lib</code> 和 <code>man</code> 的目录。</p> 
<p>将来，这些信息可能会以其他耿局创造性的方式被使用。</p> 
<h4><a id="151_directoriesbin_397"></a>15.1 directories.bin</h4> 
<p>如果在 <code>directories.bin</code> 中指定了一个 <code>bin</code> 目录，该目录中的所有文件都将被添加。</p> 
<p>由于 <code>bin</code> 指令的工作方式，同时指定 <code>bin</code> 路径和设置 <code>directories.bin</code> 将会发生一个错误。如果你想指定单个文件，请使用 <code>bin</code> 字段；如果你想使用现有<code>bin</code> 目录中的所有文件，请使用 <code>directories.bin</code>。</p> 
<h4><a id="152_directoriesman_402"></a>15.2 directories.man</h4> 
<p>一个包含 <code>man</code> 页的文件夹。可以通过遍历该文件夹生成一个 <code>man</code> 数组的快捷方式。</p> 
<h3><a id="16_repository_405"></a>16. repository</h3> 
<p>在 <em>package.json</em> 中，可以使用 <code>repository</code> 字段来指定代码存放的位置，这对于希望来参与贡献的人来说非常有帮助。如果代码存储库在 GitHub 上，<code>npm docs</code> 命令将能够直接找到。</p> 
<p>使用以下格式：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/npm/cli.git"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>URL 应该是一个公开可访问的（可能是只读的）URL，可以直接提供给版本控制系统程序，不需要进行任何修改。</p> 
<p>对于 GitHub、GitHub Gist、Bitbucket 或 GitLab 存储库，你可以使用与<code>npm install</code> 相同的简化语法：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token string">"npm/npm"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token string">"github:user/repo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token string">"gist:11081aaa281"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token string">"bitbucket:user/repo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token string">"gitlab:user/repo"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果你的包的 <em>package.json</em> 文件不在根目录中（例如，如果它是一个 monorepo 的一部分），你可以指定它所在的目录：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/facebook/react.git"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"directory"</span><span class="token operator">:</span> <span class="token string">"packages/react-dom"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="17_scripts_446"></a>17. scripts</h3> 
<p>“scripts” 属性是一个包含脚本命令的字典，这些脚本命令在包的生命周期的不同阶段运行。一般而言，键是生命周期事件，值是在该事件发生时要运行的命令。</p> 
<p>有关编写包脚本的更多信息，请查看 <a href="https://docs.npmjs.com/cli/v8/using-npm/scripts" rel="nofollow">scripts</a>。</p> 
<h3><a id="18_config_452"></a>18. config</h3> 
<p><code>config</code> 字段通常用于存储项目中的一些通用配置参数，这些参数可以在 <code>scripts</code> 字段中的命令脚本里通过环境变量的形式访问。这样可以让项目更加灵活，方便在不同环境下使用不同的配置。</p> 
<p>下面是一个简单的 <code>package.json</code> 文件示例，包含了 <code>config</code> 字段：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"config"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"port"</span><span class="token operator">:</span> <span class="token number">3000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"node server.js"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，<code>config</code> 字段包含一个名为 <code>port</code> 的参数，值为 3000。可以在项目的脚本中通过 <code>process.env.npm_package_config_port</code> 访问这个参数值：</p> 
<pre><code class="prism language-javascript"><span class="token comment">// server.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_package_config_port <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Server is running on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这样，在运行 <code>npm start</code> 命令时，服务器会监听 <code>config</code> 字段中指定的端口号。如果需要更改端口号，只需修改 <code>package.json</code> 文件中的 <code>config</code> 字段即可，无需修改代码。</p> 
<h3><a id="19_dependencies_489"></a>19. dependencies</h3> 
<p><code>dependencies</code> 字段是 <em>package.json</em> 文件中的一个关键字段，它用于列出项目所需的依赖包及其版本。当你使用 Node.js 和 npm（Node Package Manager）进行项目开发时，通常会使用许多来自第三方的包（libraries 或 modules）以便更快地实现项目功能。这些包通常来自 npm 仓库，可以通过 <code>npm install</code> 命令安装。</p> 
<p><code>dependencies</code> 字段是一个对象，其键（key）是依赖包的名称，值（value）是所需的版本号。版本范围是一个字符串，其中包含一个或多个以空格分隔的描述符。依赖项也可以使用 tarball 或 git URL 来标识。</p> 
<blockquote> 
 <p>请不要将测试工具、转译工具或其他开发时工具放在 “dependencies” 对象中。请参阅下面的 “devDependencies”。</p> 
</blockquote> 
<p>有关指定版本范围的更多详细信息，请参阅 <a href="https://semver.org/lang/zh-CN/" rel="nofollow">semver</a>。</p> 
<ul><li>version：必须与指定版本完全匹配</li><li><code>&gt;version</code>：必须大于指定版本</li><li><code>&gt;=version</code>：等于或大于指定版本</li><li><code>&lt;version</code>：必须小于指定版本</li><li><code>&lt;=version</code>：小于或等于指定版本</li><li><code>~version</code>：“大约等于指定版本”，参见 <a href="https://github.com/npm/node-semver#versions">semver</a></li><li><code>^version</code>：“与指定版本兼容”，参见 <a href="https://github.com/npm/node-semver#versions">semver</a></li><li><code>1.2.x</code>：1.2.0、1.2.1等，但不包括 1.3.0</li><li><code>http://...</code>：参见下面的 “URL 作为依赖项”</li><li><code>*</code>：匹配任何版本</li><li><code>""</code>（空字符串）：与 <code>*</code> 相同</li><li><code>version1 - version2</code>：与 <code>&gt;=version1 &lt;=version2</code> 相同</li><li><code>range1 || range2</code>：如果满足 <code>range1</code> 或 <code>range2</code>，则通过</li><li><code>git...</code>：参见下面的 “Git URL 作为依赖项”</li><li><code>user/repo</code>：参见下面的"GitHub URL"</li><li><code>tag</code>：特定版本的标签，以 <code>tag</code>形式发布，参见 <a href="https://docs.npmjs.com/cli/v9/commands/npm-dist-tag" rel="nofollow"><code>npm dist-tag</code></a></li><li><code>path/path/path</code>：参见下面的"本地路径"</li></ul> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"1.0.0 - 2.9999.9999"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token string">"&gt;=1.0.2 &lt;2.1.2"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"baz"</span><span class="token operator">:</span> <span class="token string">"&gt;1.0.2 &lt;=2.3.4"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"boo"</span><span class="token operator">:</span> <span class="token string">"2.0.1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"qux"</span><span class="token operator">:</span> <span class="token string">"&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"asd"</span><span class="token operator">:</span> <span class="token string">"http://asdf.com/asdf.tar.gz"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"til"</span><span class="token operator">:</span> <span class="token string">"~1.2"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"elf"</span><span class="token operator">:</span> <span class="token string">"~1.2.3"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"two"</span><span class="token operator">:</span> <span class="token string">"2.x"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"thr"</span><span class="token operator">:</span> <span class="token string">"3.3.x"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"lat"</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"dyl"</span><span class="token operator">:</span> <span class="token string">"file:../dyl"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="191_URLs_as_Dependencies_538"></a>19.1 URLs as Dependencies</h4> 
<p>您可以在版本范围的位置指定一个 tarball URL。</p> 
<p>该 tarball 将在安装时下载并安装到本地。</p> 
<h4><a id="192_Git_URLs_as_Dependencies_544"></a>19.2 Git URLs as Dependencies</h4> 
<p>Git URL 允许你直接从 Git 仓库（如 GitHub、GitLab 等）安装依赖包，而不仅限于从 npm 仓库获取。</p> 
<p>Git URL 的格式如下：</p> 
<pre><code>&lt;protocol&gt;://[&lt;user&gt;[:&lt;password&gt;]@]&lt;hostname&gt;[:&lt;port&gt;][:][/]&lt;path&gt;[#&lt;commit-ish&gt; | #semver:&lt;semver&gt;]
</code></pre> 
<p>其中，<code>&lt;protocol&gt;</code> 可以是 git、git+ssh、git+http、git+https 或 git+file。</p> 
<p>如果提供了 <code>#&lt;commit-ish&gt;</code>，将会克隆指定的提交。如果 commit-ish 的格式为 <code>#semver:&lt;semver&gt;</code>，<code>&lt;semver&gt;</code> 可以是任何有效的 semver 范围或确切版本，npm 会在远程仓库中查找与该范围匹配的标签或引用，就像它在注册表依赖项中所做的那样。如果既没有指定 <code>#&lt;commit-ish&gt;</code> 也没有指定 <code>#semver:&lt;semver&gt;</code>，则使用默认分支。</p> 
<p>示例：</p> 
<pre><code>git+ssh://git@github.com:npm/cli.git#v1.0.27
git+ssh://git@github.com:npm/cli#semver:^5.0
git+https://isaacs@github.com/npm/cli.git
git://github.com/npm/cli.git#v1.0.27
</code></pre> 
<p>当从 Git 仓库安装依赖包时，<code>package.json</code> 中某些字段的存在会导致 npm 认为需要执行构建。为此，你的仓库将被克隆到临时目录，安装所有依赖项，运行相关脚本，然后将生成的目录打包并安装。</p> 
<p>如果你的 Git 依赖项使用工作区（workspaces），或者存在以下任何脚本，将触发此流程：</p> 
<ul><li>build</li><li>prepare</li><li>prepack</li><li>preinstall</li><li>install</li><li>postinstall</li></ul> 
<p>如果你的 Git 仓库包含预构建的工件，你可能需要确保上述脚本都未定义，否则你的依赖项将在每次安装时重新构建。</p> 
<h4><a id="193_GitHub_URLs_580"></a>19.3 GitHub URLs</h4> 
<p>从版本 1.1.65 开始，您可以将 GitHub URL 简化为 “user/foo-project” 的形式。与 git URL 一样，可以包含提交标识后缀。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"express"</span><span class="token operator">:</span> <span class="token string">"expressjs/express"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"mocha"</span><span class="token operator">:</span> <span class="token string">"mochajs/mocha#4727d357ea"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"module"</span><span class="token operator">:</span> <span class="token string">"user/repo#feature\/branch"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上述示例中，“express"依赖项引用了GitHub仓库"expressjs/express”，“mocha"依赖项引用了GitHub仓库"mochajs/mocha"的特定提交"4727d357ea”，“module"依赖项引用了GitHub仓库"user/repo"的特定分支"feature/branch”。</p> 
<h4><a id="194_Local_Paths_598"></a>19.4 Local Paths</h4> 
<p>从版本 2.0.0 开始，您可以提供指向包含包的本地目录的路径。本地路径可以通过以下形式使用 <code>npm install -S</code> 或 <code>npm install --save</code> 命令保存：</p> 
<ul><li><code>../foo/bar</code></li><li><code>~/foo/bar</code></li><li><code>./foo/bar</code></li><li><code>/foo/bar</code></li></ul> 
<p>在这种情况下，路径将被规范化为相对路径，并添加到您的 <code>package.json</code> 文件中。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"baz"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token string">"file:../foo/bar"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个特性对于本地离线开发和创建需要进行 <code>npm install</code> 的测试非常有用，以避免访问外部服务器。但是，在将包发布到公共注册表时，不应使用本地路径作为依赖项。</p> 
<p>注意：当以本地路径链接的包在运行 <code>npm install</code> 时，它们自己的依赖项不会被自动安装。您必须在本地路径本身内部运行 <code>npm install</code> 命令。</p> 
<h3><a id="20_devDependencies_622"></a>20. devDependencies</h3> 
<p><code>devDependencies</code> 字段用于列出项目在开发和测试过程中所需的依赖包及其版本。这些依赖包通常仅在开发环境中使用，而在生产环境中则不需要。</p> 
<p><code>devDependencies</code> 字段与 <code>dependencies</code> 字段类似，也是一个对象，其键（key）是依赖包的名称，值（value）是所需的版本号。区别在于，<code>dependencies</code> 字段中的依赖包适用于生产环境，而 <code>devDependencies</code> 字段中的依赖包仅在开发环境中使用。</p> 
<p>以下是一个包含 <code>devDependencies</code> 字段的 <code>package.json</code> 示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"example"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"An example project"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"start"</span><span class="token operator">:</span> <span class="token string">"node server.js"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"test"</span><span class="token operator">:</span> <span class="token string">"mocha"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"express"</span><span class="token operator">:</span> <span class="token string">"^4.17.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"mocha"</span><span class="token operator">:</span> <span class="token string">"^9.1.3"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"chai"</span><span class="token operator">:</span> <span class="token string">"^4.3.4"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，项目的开发依赖包包括 <code>mocha</code> 和 <code>chai</code>，它们通常用于项目的测试。当你在项目中运行 <code>npm install</code> 命令时，这些依赖包将被安装到 <code>node_modules</code> 目录下。然而，在生产环境中部署项目时，你可以使用 <code>npm install --production</code> 命令来仅安装 <code>dependencies</code> 字段中的依赖包，跳过 <code>devDependencies</code> 字段中的依赖包。这样可以减小生产环境的依赖包大小，提高部署速度。</p> 
<h3><a id="21_peerDependencies_651"></a>21. peerDependencies</h3> 
<p><code>peerDependencies</code> 用于指定当前项目所依赖的包及其版本范围。但与 <code>dependencies</code> 和 <code>devDependencies</code> 不同的是，<code>peerDependencies</code> 中的依赖包不会被自动安装。它们主要用于插件、库和工具等场景，表示这些项目需要与其它特定的包一起使用，但不会直接导入这些依赖包。</p> 
<p><code>peerDependencies</code> 的主要作用是确保一些共享依赖包只被安装一次，避免不同版本的依赖包同时存在，导致潜在的冲突和错误。当你的项目被其他项目安装时，如果它们已经安装了 <code>peerDependencies</code> 中指定的依赖包，npm 会检查这些依赖包的版本是否兼容。如果不兼容，npm 会给出警告，提示用户更新依赖包版本。</p> 
<p>以下是一个包含 <code>peerDependencies</code> 字段的 <code>package.json</code> 示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-plugin"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"A plugin for example-framework"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"example-framework"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，<code>my-plugin</code> 插件需要与 <code>example-framework</code> 一起使用，且 <code>example-framework</code> 的版本应在 <code>2.0.0</code> 以上。当用户安装 <code>my-plugin</code> 时，如果他们的项目中没有安装 <code>example-framework</code>，或者已安装的 <code>example-framework</code> 版本不兼容，npm 会给出警告。用户需要自行安装或更新 <code>example-framework</code> 以满足 <code>peerDependencies</code> 中的要求。</p> 
<blockquote> 
 <p>在 npm 的 3 到 6 版本中，<code>peerDependencies</code> 不会自动安装，并且如果在树中找到不合法版本的 peer 依赖项，会引发警告。从 npm v7 开始，默认情况下会安装 <code>peerDependencies</code>。</p> 
</blockquote> 
<p>如果依赖树无法正确解析，尝试安装与其它插件相冲突的依赖时可能会导致错误。因此，请确保你的插件需求尽可能宽泛，不要将其限制在特定的补丁版本上。</p> 
<p>假设宿主程序遵循 semver 规范，那么只有在宿主程序的主版本发生变化时才会破坏你的插件。因此，如果你已经使用过宿主程序的每个 <code>1.x</code> 版本，请使用 <code>^1.0</code> 或 <code>1.x</code> 来表示这一点。如果你依赖于 <code>1.5.2</code> 中引入的功能，请使用 <code>^1.5.2</code>。</p> 
<h3><a id="22_peerDependenciesMeta_678"></a>22. peerDependenciesMeta</h3> 
<p><code>peerDependenciesMeta</code> 用于提供关于 <code>peerDependencies</code> 字段中依赖项的附加元数据。它可以用于指定某些 <code>peerDependencies</code> 是可选的，这意味着即使它们没有被安装或版本不兼容，也不会导致安装失败或警告。</p> 
<p><code>peerDependenciesMeta</code> 是一个对象，其键（key）是 <code>peerDependencies</code> 中的依赖包名称，值（value）是一个包含 <code>optional</code> 属性的对象。将 <code>optional</code> 属性设置为 <code>true</code> 可以将对应的依赖项标记为可选。</p> 
<p>以下是一个包含 <code>peerDependenciesMeta</code> 字段的 <code>package.json</code> 示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-plugin"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"A plugin for example-framework"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"example-framework"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"optional-dependency"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"peerDependenciesMeta"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"optional-dependency"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"optional"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，<code>my-plugin</code> 插件依赖于 <code>example-framework</code> 和 <code>optional-dependency</code>。通过在 <code>peerDependenciesMeta</code> 字段中将 <code>optional-dependency</code> 标记为可选，即使用户没有安装 <code>optional-dependency</code> 或其版本不兼容，也不会在安装过程中产生错误或警告。这对于提供可选功能的插件和库非常有用，允许它们在没有特定依赖项的情况下正常工作。</p> 
<h3><a id="23_bundleDependencies_705"></a>23. bundleDependencies</h3> 
<p><code>bundleDependencies</code> 用于定义一个包名数组，这些包将在发布时捆绑在一起。这意味着当其他人安装你的包时，这些捆绑的依赖项将作为一个整体与你的包一起分发，而不需要从 npm 仓库单独下载。这对于在离线环境中使用 npm 包或确保特定依赖版本始终可用非常有用。</p> 
<p>你可以通过在 <code>bundleDependencies</code> 数组中指定包名，并执行 <code>npm pack</code> 命令将这些包捆绑到一个 tarball 文件中。</p> 
<p>例如：</p> 
<p>如果我们定义了如下的 <code>package.json</code>：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"awesome-web-framework"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"bundleDependencies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"renderized"</span><span class="token punctuation">,</span>
    <span class="token string">"super-streams"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们可以通过运行 <code>npm pack</code> 命令获得 <code>awesome-web-framework-1.0.0.tgz</code> 文件。这个文件包含了 <code>renderized</code> 和 <code>super-streams</code> 这两个依赖，可以通过执行 <code>npm install awesome-web-framework-1.0.0.tgz</code> 将它们安装到新项目中。请注意，包名中不包含任何版本信息，因为这些信息已在 <code>dependencies</code> 中指定。</p> 
<p>注意，<code>bundleDependencies</code> 字段有时也会拼写为 <code>bundledDependencies</code>，这两种拼写都是有效的。</p> 
<p>另外，<code>bundleDependencies</code> 也可以定义为布尔值。<code>true</code> 值表示捆绑所有依赖项，<code>false</code> 值表示不捆绑任何依赖项。</p> 
<h3><a id="24_optionalDependencies_732"></a>24. optionalDependencies</h3> 
<p><code>optionalDependencies</code> 用于列出项目中可选的依赖包及其版本。这些依赖包不是项目运行所必需的，但在某些情况下，它们可以为项目提供额外的功能或性能优化。</p> 
<p><code>optionalDependencies</code> 的一个重要特性是，当安装这些依赖包时，如果出现任何问题（例如编译错误或不兼容的平台），npm 会继续安装过程而不是中断。这使得你可以在不同的环境中灵活地使用可选依赖包，而不会影响项目的正常安装和使用。</p> 
<p>以下是一个包含 <code>optionalDependencies</code> 字段的 <code>package.json</code> 示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-project"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"library-a"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"optionalDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"library-b"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，<code>library-a</code> 是项目的必需依赖项，而 <code>library-b</code> 是可选依赖项。当你运行 <code>npm install</code> 时，npm 会尝试安装 <code>library-b</code>，但如果安装失败，安装过程仍会继续，不会影响项目的其他部分。</p> 
<p>请注意，如果一个依赖包同时出现在 <code>dependencies</code> 和 <code>optionalDependencies</code> 中，<code>optionalDependencies</code> 中的设置将优先生效，所以最好只放一个地方。</p> 
<h3><a id="25_overrides_757"></a>25. overrides</h3> 
<p>如果你需要对依赖项的依赖项进行特定更改，例如将具有已知安全问题的依赖项版本替换为其他版本，或用分支替换现有依赖项，或确保在所有地方都使用相同的包版本，那么你可以添加一个覆盖 <code>override</code>。</p> 
<p>覆盖提供了一种用另一个版本或完全不同的包替换依赖关系树中的包的方法。这些更改可以根据需要进行特定或模糊的限制。</p> 
<p>如果要确保无论依赖项依赖的版本如何，始终将包 <code>foo</code> 安装为版本 <code>1.0.0</code>，可按照如下写法：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面是一个简写表示法，可以使用完整的对象形式来允许覆盖包本身以及包的子项。这将使 <code>foo</code> 始终为 <code>1.0.0</code>，同时使 <code>foo</code> 之外的任何深度的 <code>bar</code> 也为 <code>1.0.0</code>：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"."</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>要仅在 <code>foo</code> 作为包 <code>bar</code> 的子项（或子子项，或子子子项等）时将其覆盖为 <code>1.0.0</code>：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>键可以嵌套到任意长度。要在 <code>foo</code> 作为 <code>bar</code> 的子项且 <code>bar</code> 作为 <code>baz</code> 的子项时覆盖 <code>foo</code>：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"baz"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>覆盖的键还可以包括版本或版本范围。要将 <code>foo</code> 覆盖为 <code>1.0.0</code>，但仅当它是 <code>bar@2.0.0</code> 的子项时：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"bar@2.0.0"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>除非依赖项和覆盖本身共享完全相同的规范，否则你不得为直接依赖的包设置覆盖。为了更容易处理这个限制，覆盖也可以通过在希望版本匹配的包名称前加上 <code>$</code> 来定义为对直接依赖项的规范的引用。</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// BAD, will throw an EOVERRIDE error</span>
    <span class="token comment">// "foo": "^2.0.0"</span>
    <span class="token comment">// GOOD, specs match so override is allowed</span>
    <span class="token comment">// "foo": "^1.0.0"</span>
    <span class="token comment">// BEST, the override is defined as a reference to the dependency</span>
    <span class="token string-property property">"foo"</span><span class="token operator">:</span> <span class="token string">"$foo"</span><span class="token punctuation">,</span>
    <span class="token comment">// the referenced package does not need to match the overridden one</span>
    <span class="token string-property property">"bar"</span><span class="token operator">:</span> <span class="token string">"$foo"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="26_engines_844"></a>26. engines</h3> 
<p>通过 <code>engines</code> 字段可以指定您的项目适用的 Node.js 版本：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"engines"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"node"</span><span class="token operator">:</span> <span class="token string">"&gt;=0.10.3 &lt;15"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>与 <code>dependencies</code> 类似，如果你不指定版本（或者将版本指定为 <code>*</code>），那么任何版本的 Node.js 都可以使用。</p> 
<p>你还可以使用 <code>engines</code> 字段来指定哪些版本的 npm 能够正确安装你的程序。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"engines"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"npm"</span><span class="token operator">:</span> <span class="token string">"~1.0.20"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>除非用户已设置 <a href="https://docs.npmjs.com/cli/v9/using-npm/config#engine-strict" rel="nofollow"><code>engine-strict</code></a> 配置，否则此字段仅具有建议性，当你的包作为依赖项安装时，只会产生警告。</p> 
<h3><a id="27_os_870"></a>27. os</h3> 
<p>通过 <code>os</code> 字段可以指定你的模块可以在哪些操作系统上运行：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"os"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"darwin"</span><span class="token punctuation">,</span>
    <span class="token string">"linux"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>你还可以添加不被允许的操作系统，只需在被阻止的操作系统前加上 <code>!</code>：</p> 
<blockquote> 
 <p>所谓的不被允许，一般值您的项目无法在对应的操作系统上运行起来</p> 
</blockquote> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"os"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"!win32"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>一般宿主操作系统由 <code>process.platform</code> 可确定。</p> 
<p>允许同时阻止和允许，尽管这样做无什么意义。</p> 
<h3><a id="28_cpu_899"></a>28. cpu</h3> 
<p>如果您的代码只在特定的 CPU 架构上运行，可在配置文件中指定相应的架构。</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"cpu"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"x64"</span><span class="token punctuation">,</span>
    <span class="token string">"ia32"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上述配置表示您的代码可以在 x64 和 ia32 架构上运行。您还可以使用 “!” 符号来阻止特定的架构。例如，如果您希望阻止 arm 和 mips 架构，可以这样配置：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"cpu"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"!arm"</span><span class="token punctuation">,</span>
    <span class="token string">"!mips"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>一般宿主的架构可以通过 <code>process.arch</code> 来确定。</p> 
<h3><a id="29_private_925"></a>29. private</h3> 
<p>如果在您的 <em>package.json</em> 文件中设置了 <code>"private": true</code>，那么 npm 将拒绝发布它。</p> 
<p>这是一种防止私有存储库意外发布的方式。如果您希望确保特定的软件包仅发布到特定的注册表（例如，内部注册表），那么可以使用下面描述的 <code>publishConfig</code> 字段来覆盖发布时的注册表配置参数。</p> 
<h3><a id="30_publishConfig_931"></a>30. publishConfig</h3> 
<p><code>publishConfig</code> 是一个在发布时将被使用的配置值集合。如果你想设置标签（tag）、注册表（registry）或访问权限（access），它特别方便，这样你可以确保给定的包不会被标记为 “latest”，不会发布到公共注册表，或者默认情况下一个作用域模块是私有的。</p> 
<p>请查看 <a href="https://docs.npmjs.com/cli/v7/using-npm/config" rel="nofollow">config</a> 以查看可以被覆盖的配置选项列表。</p> 
<p>以下是一个包含 <code>publishConfig</code> 字段的 <em>package.json</em> 示例：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"my-package"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"publishConfig"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"tag"</span><span class="token operator">:</span> <span class="token string">"beta"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"registry"</span><span class="token operator">:</span> <span class="token string">"https://my-private-registry.example.com/"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"access"</span><span class="token operator">:</span> <span class="token string">"restricted"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，当你发布 <code>my-package</code> 时，它将被标记为 “beta”（而非 “latest”），发布到指定的私有注册表（而非公共注册表），并且访问权限被限制为 “restricted”（私有）。</p> 
<h3><a id="31_workspaces_953"></a>31. workspaces</h3> 
<p>可选的 <code>workspaces</code> 字段是一个文件模式数组，它描述了安装时应在本地文件系统中查找的位置，以找到需要链接到顶层 <code>node_modules</code> 文件夹的每个工作区。</p> 
<p>它可以描述用作工作区的文件夹的直接路径，也可以定义将解析为这些相同文件夹的通配符（globs）。</p> 
<p>在以下示例中，只要位于 <code>./packages</code> 文件夹内的所有文件夹中都有有效的 <em>package.json</em> 文件，它们都将被视为工作区：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"workspace-example"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"workspaces"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./packages/*"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>有关更多示例，请参阅 <a href="https://docs.npmjs.com/cli/v9/using-npm/workspaces" rel="nofollow">workspaces</a>。</p> 
<h3><a id="32_DEFAULT_VALUES_972"></a>32. DEFAULT VALUES</h3> 
<p>npm 会根据包内容为一些值设置默认值。</p> 
<ul><li> <p><code>"scripts": {"start": "node server.js"}</code></p> <p>如果在包的根目录中有一个 <code>server.js</code> 文件，那么 npm 会将 <code>start</code> 命令默认设置为 <code>node server.js</code>。</p> </li><li> <p><code>"scripts":{"install": "node-gyp rebuild"}</code></p> <p>如果在包的根目录中有一个 <code>binding.gyp</code> 文件，并且你没有定义 <code>install</code> 或 <code>preinstall</code> 脚本，npm 会将 <code>install</code> 命令默认设置为使用 <code>node-gyp</code> 编译。</p> </li><li> <p><code>"contributors": [...]</code></p> <p>如果在包的根目录中有一个 <code>AUTHORS</code> 文件，npm 会将每一行视为 <code>Name &lt;email&gt; (url)</code> 格式，其中 email 和 url 是可选的。以 # 开头的行或空行将被忽略。</p> </li></ul> 
<h3><a id="33__988"></a>33. 更多</h3> 
<ul><li><a href="https://github.com/npm/node-semver#versions">semver</a></li><li><a href="https://docs.npmjs.com/cli/v9/using-npm/workspaces" rel="nofollow">workspaces</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-init" rel="nofollow">npm init</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-version" rel="nofollow">npm version</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-config" rel="nofollow">npm config</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-help" rel="nofollow">npm help</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-install" rel="nofollow">npm install</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-publish" rel="nofollow">npm publish</a></li><li><a href="https://docs.npmjs.com/cli/v9/commands/npm-uninstall" rel="nofollow">npm uninstall</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/62f27c4cf398a90bd0984b82ef16682b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">四维图新 minemap实现地图漫游效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4614705cb21fdf6c5f0b410d2ccca9ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Python】requests实现cookie 登陆</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>