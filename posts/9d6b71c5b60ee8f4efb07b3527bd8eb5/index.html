<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot定时任务 @Scheduled详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot定时任务 @Scheduled详解" />
<meta property="og:description" content="博主在最近的开发中又遇到了关于定时调度的开发任务，在定时调度其实有很多的第三方平台可以接入，但是其实在SpringBoot有自带的定时任务注解@Scheduled。@Scheduled可以通过注解配置快速实现方法的定时调度，直接在方法加上@Scheduled注解即可。
一.@Scheduled注解参数 1.cron参数 这个参数是最经常使用的参数，表示接收一个cron参数，cron它是一个表达式，最多接收7个参数，从左到右分别表示：秒 分 时 天 月 周 年；参数以空格隔开，其中年不是必须参数，可以省略。
/** * cron 一共可以有7个参数 以空格分开 其中年不是必须参数 * [秒] [分] [小时] [日] [月] [周] [年] * 一下表示 */ @Scheduled(cron =&#34;0 0 0 * * * ?&#34;) public void testScheduledCron(){ } 注意！！！ 在使用时需要在类上添加注解@EnableScheduling，表示开启定时任务。
cron参数意义： 序号含义是否必填入参范围可填通配符1秒是0-59, - * /2分是0-59, - * /3时是0-23, - * /4日是1-31, - * ? / L W5月是1-12, - * /6周（周一 ~ 周日）是1-7 , - * ? / L #8年否1970-2099, - * / 常用通配符： *：表示所有值 比如用在日 表示每一天。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9d6b71c5b60ee8f4efb07b3527bd8eb5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-11T22:03:06+08:00" />
<meta property="article:modified_time" content="2022-07-11T22:03:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot定时任务 @Scheduled详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>博主在最近的开发中又遇到了关于定时调度的开发任务，在定时调度其实有很多的第三方平台可以接入，但是其实在SpringBoot有自带的定时任务注解@Scheduled。@Scheduled可以通过注解配置快速实现方法的定时调度，直接在方法加上@Scheduled注解即可。</p> 
<h2>一.@Scheduled注解参数</h2> 
<h3>1.cron参数</h3> 
<p>这个参数是最经常使用的参数，表示接收一个cron参数，cron它是一个表达式，最多接收7个参数，从左到右分别表示：秒 分 时 天 月 周 年；参数以空格隔开，其中年不是必须参数，可以省略。</p> 
<pre><code class="language-java">/**
* cron 一共可以有7个参数 以空格分开 其中年不是必须参数
* [秒] [分] [小时] [日] [月] [周] [年]
* 一下表示
*/
@Scheduled(cron ="0 0 0 * * * ?")
public void testScheduledCron(){
}</code></pre> 
<p><strong>注意！！！ 在使用时需要在类上添加注解@EnableScheduling，表示开启定时任务。</strong></p> 
<h4> cron参数意义：</h4> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:650px;"><thead><tr><th>序号</th><th>含义</th><th>是否必填</th><th>入参范围</th><th>可填通配符</th></tr></thead><tbody><tr><td>1</td><td>秒</td><td>是</td><td>0-59</td><td>, - * /</td></tr><tr><td>2</td><td>分</td><td>是</td><td>0-59</td><td>, - * /</td></tr><tr><td>3</td><td>时</td><td>是</td><td>0-23</td><td>, - * /</td></tr><tr><td>4</td><td>日</td><td>是</td><td>1-31</td><td>, - * ? / L W</td></tr><tr><td>5</td><td>月</td><td>是</td><td>1-12</td><td>, - * /</td></tr><tr><td>6</td><td>周（周一 ~ 周日）</td><td>是</td><td>1-7 </td><td>, - * ? / L #</td></tr><tr><td>8</td><td>年</td><td>否</td><td>1970-2099</td><td>, - * /</td></tr></tbody></table> 
<h4>常用通配符：</h4> 
<p>*：表示所有值 比如用在日 表示每一天。</p> 
<p>?：表示不指定值 比如周配置  表示不指定星期几执行。</p> 
<p>/：表示递增触发 比如  用在分 5/20 从第五分钟开始 每增加20分钟执行一次。</p> 
<p> -：表示区间 比如用在 1-6  表示一月到六月执行。</p> 
<h4>示例：</h4> 
<p>每天凌晨零点执行</p> 
<pre><code class="language-java">@Scheduled(cron ="0 0 0 * * * ?")</code></pre> 
<p>每隔五分钟执行</p> 
<pre><code class="language-java">@Scheduled(cron ="0 */5 0 * * * ?")</code></pre> 
<h3>2.zone参数</h3> 
<p>zone能够指定获取的时区，默认是空，表示使用服务器所在时区，比如Asia/BeiJingi或者Asia/Shanghai。</p> 
<h3>3.fixedDelay</h3> 
<p>fixedDelay表示上次调用结束后与下次调用之间的固定时间，单位是毫秒。</p> 
<pre><code class="language-java"> @Scheduled(fixedDelay= 3000)</code></pre> 
<p>表示距离上次调用后三秒再执行</p> 
<h3>4.fixedDelayString</h3> 
<p>fixedDelayString与fixedDelay是几乎一样的，唯一的差异是fixedDelayString是支持占位符的。</p> 
<h3>5.fixedRate</h3> 
<p>fixedRate表示多久执行一次，单位是毫秒。与<strong>cron</strong>的/通配符用法相似；</p> 
<pre><code class="language-java"> @Scheduled(fixedRate= 3000)</code></pre> 
<p>表示每三秒执行一次 </p> 
<h3>6.fixedRateString</h3> 
<p>fixedRate的升级，支持占位符</p> 
<h3>7.initialDelay </h3> 
<p>表示第一次延迟多少毫秒执行，单位是毫秒</p> 
<pre><code class="language-java">@Scheduled(initialDelay= 3000)</code></pre> 
<p>表示第一次执行时，延迟3秒执行</p> 
<h3>8.initialDelayString</h3> 
<p>initialDelay的升级，支持占位符。</p> 
<h2>二.注意</h2> 
<p>@Scheduled使用时，是在本机进行任务调度，但是目前几乎所有的应用为了增加发负载量，都是使用多机部署。这就导致了一个非常严重的分布式问题：<strong>在每一台机器上都会在同时执行定时调度任务，可能产生很多重复数据或者导致系统出现其他的业务逻辑BUG</strong>，所以在使用@Scheduled进行任务调度时，一定要配合<strong>redis的分布式锁</strong>来使用，让定时调度任务只在一台机器上执行，避免BUG出现。同时对于可能出现的失败任务一定要做好日志记录，方便排查和改错哟~</p> 
<p>如有帮助请点赞支持~     感谢阅读~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae08c5bf310ca3c2e3ef2030e2247354/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一文搞定Java注解和注解处理器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/608b37d62c38c735d7393258ef58c56c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VIm自动生成python的文件头</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>