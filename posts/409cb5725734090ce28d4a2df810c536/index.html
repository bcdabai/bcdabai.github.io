<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>nginx的使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="nginx的使用" />
<meta property="og:description" content="目录
1.何为nginx
2.如何使用
3.关于nginx配置文件
4.nginx三大核心
4.1 反向代理
4.2 负载均衡
4.3 动静分离
4.4 高可用
4.4.1 安装keepalived
代理服务器--使用比较多的为nginx代理服务器。
1.何为nginx Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器,其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好。开源软件,服务器软件.能够支持高达 50,000 个并发连接数的响应。
2.如何使用 (1) 安装nginx软件所需的依赖插件
yum install -y gcc-c&#43;&#43;
yum install -y pcre pcre-devel
yum install -y zlib zlib-devel
yum install -y openssl openssl-devel
(2) 把我们的nginx安装包上传到linux中并解压
(3) 创建一个目录作为nginx的安装目录
mkdir /usr/nginx
(4) 进入nginx的解压目录
(5) 设置nginx的安装路径为上面/usr/nginx
(6) 编译--安装
make
make install ---安装
conf: 配置目录
html: 放置静态资源的。
logs: 日志
sbin: 启动和关闭nginx的脚本" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/409cb5725734090ce28d4a2df810c536/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-30T13:44:48+08:00" />
<meta property="article:modified_time" content="2022-07-30T13:44:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">nginx的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E4%BD%95%E4%B8%BAnginx-toc" style="margin-left:0px;"><a href="#1.%E4%BD%95%E4%B8%BAnginx" rel="nofollow">1.何为nginx</a></p> 
<p id="2.%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#2.%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8" rel="nofollow">2.如何使用</a></p> 
<p id="%C2%A0%E4%B8%BA%E6%96%B9%E4%BE%BF%E6%9F%A5%E7%9C%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84html%E9%A1%B5%E9%9D%A2%E2%80%8B%E7%BC%96%E8%BE%91%204.nginx%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83-toc" style="margin-left:0px;"><a href="#%C2%A03.%E5%85%B3%E4%BA%8Enginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">3.关于nginx配置文件</a></p> 
<p style="margin-left:0px;"><a href="#%C2%A0%E4%B8%BA%E6%96%B9%E4%BE%BF%E6%9F%A5%E7%9C%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84html%E9%A1%B5%E9%9D%A2%E2%80%8B%E7%BC%96%E8%BE%91%204.nginx%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83" rel="nofollow">4.nginx三大核心</a></p> 
<p id="4.1%20%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86-toc" style="margin-left:40px;"><a href="#4.1%20%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86" rel="nofollow">4.1 反向代理</a></p> 
<p id="4.2%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-toc" style="margin-left:40px;"><a href="#4.2%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1" rel="nofollow">4.2 负载均衡</a></p> 
<p id="4.3%20%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB-toc" style="margin-left:40px;"><a href="#4.3%20%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB" rel="nofollow">4.3 动静分离</a></p> 
<p id="%C2%A04.4%20%E9%AB%98%E5%8F%AF%E7%94%A8-toc" style="margin-left:40px;"><a href="#%C2%A04.4%20%E9%AB%98%E5%8F%AF%E7%94%A8" rel="nofollow"> 4.4 高可用</a></p> 
<p id="%C2%A04.4.1%20%E5%AE%89%E8%A3%85keepalived-toc" style="margin-left:80px;"><a href="#%C2%A04.4.1%20%E5%AE%89%E8%A3%85keepalived" rel="nofollow"> 4.4.1 安装keepalived</a></p> 
<hr id="hr-toc"> 
<p><img alt="" height="444" src="https://images2.imgbox.com/f2/8d/e1XEvEa4_o.png" width="1144"></p> 
<p>代理服务器--使用比较多的为nginx代理服务器。</p> 
<h2 id="1.%E4%BD%95%E4%B8%BAnginx">1.何为nginx</h2> 
<p>        Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器,其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好。开源软件,服务器软件.能够支持高达 50,000 个并发连接数的响应。</p> 
<h2 id="2.%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8">2.如何使用</h2> 
<p>(1) 安装nginx软件所需的依赖插件</p> 
<blockquote> 
 <p>yum install -y gcc-c++<br> yum install -y pcre pcre-devel</p> 
 <p>yum install -y zlib zlib-devel</p> 
 <p>yum install -y openssl openssl-devel</p> 
</blockquote> 
<p>(2) 把我们的nginx安装包上传到linux中并解压</p> 
<p><img alt="" height="422" src="https://images2.imgbox.com/3f/a4/8s8khYF0_o.png" width="1200"></p> 
<p>(3) 创建一个目录作为nginx的安装目录</p> 
<blockquote> 
 <p>mkdir /usr/nginx</p> 
</blockquote> 
<p>(4) 进入nginx的解压目录</p> 
<p><img alt="" height="177" src="https://images2.imgbox.com/6b/bb/S9H6D8Jl_o.png" width="1171">(5) 设置nginx的安装路径为上面/usr/nginx</p> 
<p><img alt="" height="399" src="https://images2.imgbox.com/5a/1a/tM3s5L1s_o.png" width="1153"></p> 
<p>(6) 编译--安装</p> 
<blockquote> 
 <p>make</p> 
 <p>make install ---安装</p> 
</blockquote> 
<p><img alt="" height="152" src="https://images2.imgbox.com/2c/cb/iLHgFjcj_o.png" width="831"></p> 
<blockquote> 
 <p>conf: 配置目录</p> 
 <p>html: 放置静态资源的。</p> 
 <p>logs: 日志</p> 
 <p>sbin: 启动和关闭nginx的脚本</p> 
</blockquote> 
<p>（7）启动nginx（注意要在sbin此路径下）</p> 
<p class="img-center"><img alt="" height="60" src="https://images2.imgbox.com/4b/39/fzo7y9H5_o.png" width="366"></p> 
<blockquote> 
 <p>./nginx 开启nginx</p> 
 <p></p> 
 <p>./nginx -s stop 关闭nginx</p> 
 <p></p> 
 <p>./nginx -s reload 重新加载配置文件---修改完配置文件后使用该命令</p> 
</blockquote> 
<p>(8) 访问nginx服务器（注意防火墙）</p> 
<p>未关防火墙时</p> 
<p><img alt="" height="770" src="https://images2.imgbox.com/4c/05/LU6MYZJn_o.png" width="1200"></p> 
<p>关闭防火墙后</p> 
<p><img alt="" height="501" src="https://images2.imgbox.com/07/90/GQX5fQpf_o.png" width="1200"></p> 
<h2 id="%C2%A03.%E5%85%B3%E4%BA%8Enginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"> 3.关于nginx配置文件</h2> 
<p><img alt="" height="371" src="https://images2.imgbox.com/dc/85/5eoNriiE_o.png" width="1197"></p> 
<p id="%C2%A0%E4%B8%BA%E6%96%B9%E4%BE%BF%E6%9F%A5%E7%9C%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84html%E9%A1%B5%E9%9D%A2%E2%80%8B%E7%BC%96%E8%BE%91%204.nginx%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83"> 为方便查看，可以重新定义一个新的html页面<img alt="" height="256" src="https://images2.imgbox.com/17/f0/7q6eXRNR_o.png" width="1144"> 4.nginx三大核心</p> 
<h3 id="4.1%20%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86">4.1 反向代理</h3> 
<p class="img-center"><img alt="" height="381" src="https://images2.imgbox.com/e0/c7/wrjT6GsW_o.png" width="598"></p> 
<p> 如何使用nginx完成反向代理</p> 
<p><img alt="" height="446" src="https://images2.imgbox.com/59/fe/7VHiMFkP_o.png" width="1179"></p> 
<p> 准备一个真实项目和Tomcat服务器 并把项目部署到Tomcat.---springboot项目</p> 
<p>jar包打包方式：</p> 
<p class="img-center"><img alt="" height="293" src="https://images2.imgbox.com/2d/04/2Qnc6uNW_o.png" width="228"></p> 
<p class="img-center"><img alt="" height="156" src="https://images2.imgbox.com/94/eb/WNV3hYu7_o.png" width="390"></p> 
<p>启动真实项目</p> 
<blockquote> 
 <p>java -jar 真实文件名 .jar</p> 
</blockquote> 
<p> 修改nginx配置文件</p> 
<p class="img-center"><img alt="" height="154" src="https://images2.imgbox.com/b4/a8/EBgnAxdI_o.png" width="455"></p> 
<p> 重新加载nginx</p> 
<blockquote> 
 <p>./nginx -s reload</p> 
</blockquote> 
<p><img alt="" height="102" src="https://images2.imgbox.com/bb/58/Lib0KJ9y_o.png" width="999"></p> 
<h3 id="4.2%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">4.2 负载均衡</h3> 
<p><img alt="" height="517" src="https://images2.imgbox.com/b9/bf/5SYPPjke_o.png" width="1141"></p> 
<p> <img alt="" height="791" src="https://images2.imgbox.com/8b/ff/JGKfTQlY_o.png" width="1200"></p> 
<p> 修改nginx配置文件</p> 
<p class="img-center"><img alt="" height="315" src="https://images2.imgbox.com/a9/c1/tj5zcrqS_o.png" width="460"></p> 
<p> 测试:</p> 
<p>注意要开启nginx:</p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/c0/fb/G6EwHyrW_o.png" width="789"></p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/6d/3c/Kfi459ru_o.png" width="823"></p> 
<p></p> 
<p> 默认负载均衡的策略为轮询策略。</p> 
<blockquote> 
 <p>1)、轮询（默认）</p> 
 <p>　　每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。</p> 
 <p>2)、weight</p> 
 <p>　　指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。</p> 
 <p>3)、ip_hash</p> 
 <p>　　每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</p> 
 <p>4)、fair（第三方）</p> 
 <p>　　按后端服务器的响应时间来分配请求，响应时间短的优先分配。</p> 
 <p>5)、url_hash（第三方）</p> 
</blockquote> 
<p><img alt="" height="178" src="https://images2.imgbox.com/a7/0d/1Msrr7VA_o.png" width="935"></p> 
<p><img alt="" height="202" src="https://images2.imgbox.com/ab/5c/lLQ34MsX_o.png" width="1017"></p> 
<h3 id="4.3%20%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB">4.3 动静分离</h3> 
<p>静态资源的统一管理</p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/5d/2c/Q4pUXqb0_o.png" width="1200"></p> 
<p> <img alt="" height="232" src="https://images2.imgbox.com/a5/6c/ulMuxl55_o.png" width="1170"></p> 
<p>注意springboot中的tomcat不支持jsp模板引擎，默认支持的模板引擎为Thymeleaf，依赖：</p> 
<pre><code class="language-XML">&lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<p>前端可以使用视图解析方法</p> 
<p><img alt="" height="272" src="https://images2.imgbox.com/ba/0d/6TPdVENx_o.png" width="790"></p> 
<h3 id="%C2%A04.4%20%E9%AB%98%E5%8F%AF%E7%94%A8"> 4.4 高可用</h3> 
<blockquote> 
 <p>准备条件:<br>    192.168.227.175 [master]<br>    192.168.227.176 [backup]</p> 
</blockquote> 
<p><img alt="" height="460" src="https://images2.imgbox.com/4a/42/3HS4T1ga_o.png" width="1200"></p> 
<h4 id="%C2%A04.4.1%20%E5%AE%89%E8%A3%85keepalived"> 4.4.1 安装keepalived</h4> 
<p>        在每个nginx所在的主机上都要安装</p> 
<blockquote> 
 <p>yum install -y keepalived 安装keepalived</p> 
 <p></p> 
 <p>rpm -q -a keepalived  检查是否安装keepalived</p> 
</blockquote> 
<p>        默认在/etc/keepalived目录</p> 
<p><img alt="" height="590" src="https://images2.imgbox.com/83/22/EpYRbKOT_o.png" width="869"></p> 
<p>         注意存放地址为：/usr/local/src</p> 
<p><img alt="" height="441" src="https://images2.imgbox.com/5b/d7/dNaaPQSX_o.png" width="1187"></p> 
<p>        两台启动nginx</p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/92/8e/rZI1FqAR_o.png" width="789"></p> 
<p>        启动keepalived</p> 
<blockquote> 
 <p>systemctl start keepalived</p> 
</blockquote> 
<p>测试：这里的地址为虚拟ip的地址。</p> 
<p><img alt="" height="410" src="https://images2.imgbox.com/40/78/Jb5fTWX7_o.png" width="1188"></p> 
<p> 主的nginx关闭:</p> 
<blockquote> 
 <p>nginx -s stop</p> 
 <p><br> systemctl stop keepalived</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a7c0ad3fe585a2de4fce11142f3a03f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">YOLOv5在验证集上进行测试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/46dfc8df1ccd0aae710c593c0755f8a6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Your idea evaluation has expired. Your session will be limited to 30 minutes</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>