<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C#执行数据加密的DES.Create 方法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C#执行数据加密的DES.Create 方法" />
<meta property="og:description" content="目录
一、重载
二、Create()
1.定义 2.实例1，加密和解密文件中的数据
3.实例2，加密和解密内存中的数据
三、Create(String)
四、关于DES加密
命名空间：
System.Security.Cryptography
数据集：
System.Security.Cryptography.dll
创建加密对象的实例以执行数据加密标准 (DES) 算法。
一、重载 Create()创建加密对象的实例以执行数据加密标准 (DES) 算法。Create(String)创建加密对象的实例以执行数据加密标准 (DES) 算法的指定实现。 二、Create() 创建加密对象的实例以执行数据加密标准 (DES) 算法。
1.定义 public static System.Security.Cryptography.DES Create (); 返回 DES 一个加密对象。 2.实例1，加密和解密文件中的数据 // DES.Create() // 创建和使用 DES 对象来加密和解密文件中的数据。 using System.Security.Cryptography; using System.Text; namespace ConsoleApp8 { class DESSample { static void Main() { try { byte[] key; byte[] iv; using (DES des = DES.Create()) // 以随机秘钥创建加密流对象，初始化IV { key = des." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/786f78299792189bbdefbe865b1cb03a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-13T11:16:15+08:00" />
<meta property="article:modified_time" content="2024-01-13T11:16:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C#执行数据加密的DES.Create 方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E9%87%8D%E8%BD%BD-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E9%87%8D%E8%BD%BD" rel="nofollow">一、重载</a></p> 
<p id="%E4%BA%8C%E3%80%81Create()-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81Create%28%29" rel="nofollow">二、Create()</a></p> 
<p id="1.%E5%AE%9A%E4%B9%89%C2%A0-toc" style="margin-left:40px;"><a href="#1.%E5%AE%9A%E4%B9%89%C2%A0" rel="nofollow">1.定义 </a></p> 
<p id="2.%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#2.%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE" rel="nofollow">2.实例1，加密和解密文件中的数据</a></p> 
<p id="3.%E5%AE%9E%E4%BE%8B2%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#3.%E5%AE%9E%E4%BE%8B2%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE" rel="nofollow">3.实例2，加密和解密内存中的数据</a></p> 
<p id="%E4%B8%89%E3%80%81Create(String)-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Create%28String%29" rel="nofollow">三、Create(String)</a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%85%B3%E4%BA%8EDES%E5%8A%A0%E5%AF%86-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E5%85%B3%E4%BA%8EDES%E5%8A%A0%E5%AF%86" rel="nofollow">四、关于DES加密</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>        命名空间：<br>         System.Security.Cryptography<br>         数据集：<br>         System.Security.Cryptography.dll</p> 
<p>        创建加密对象的实例以执行数据加密标准 (DES) 算法。</p> 
<h2 id="%E4%B8%80%E3%80%81%E9%87%8D%E8%BD%BD">一、重载</h2> 
<table cellspacing="0" style="width:367.52pt;"><tbody><tr><td style="background-color:#c70f00;border-color:#c70f00 #c70f00 #ffffff;vertical-align:middle;width:71.25pt;"><span style="color:#ffffff;">Create()</span></td><td style="background-color:#ffe5e5;border-color:#c70f00;vertical-align:middle;width:296.25pt;"><span style="color:#000000;">创建加密对象的实例以执行数据加密标准<span style="color:#000000;"> (DES) </span><span style="color:#000000;">算法。</span></span></td></tr><tr><td style="background-color:#c70f00;border-color:#ffffff #c70f00 #c70f00;vertical-align:middle;"><span style="color:#ffffff;">Create(String)</span></td><td style="border-color:#c70f00;vertical-align:middle;"><span style="color:#000000;">创建加密对象的实例以执行数据加密标准<span style="color:#000000;"> (DES) </span><span style="color:#000000;">算法的指定实现。</span></span></td></tr></tbody></table> 
<h2 id="%E4%BA%8C%E3%80%81Create()">二、Create()</h2> 
<p>        创建加密对象的实例以执行数据加密标准 (DES) 算法。</p> 
<h3 id="1.%E5%AE%9A%E4%B9%89%C2%A0">1.定义 </h3> 
<pre><code class="language-cs">public static System.Security.Cryptography.DES Create ();

返回
DES
一个加密对象。</code></pre> 
<h3 id="2.%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE">2.实例1，加密和解密文件中的数据</h3> 
<pre><code class="language-cpp">// DES.Create()
// 创建和使用 DES 对象来加密和解密文件中的数据。
using System.Security.Cryptography;
using System.Text;

namespace ConsoleApp8
{
    class DESSample
    {
        static void Main()
        {
            try
            {
                byte[] key;
                byte[] iv;
                using (DES des = DES.Create())        // 以随机秘钥创建加密流对象，初始化IV                                          
                {
                    key = des.Key;
                    iv = des.IV;
                }
                string original = "大海航行靠舵手";    //要加密的原始字符串                                     
                string filename = "CText.enc";        //加密后要文件名和路径默认当前工作目录                                             
                EncryptTextToFile(original, filename, key, iv);//把字符串加密成文件
                string decrypted = DecryptTextFromFile(filename, key, iv);//从文件中解密出字符串
                Console.WriteLine(decrypted);         //输出解密后的字符串                                           
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
        /// &lt;summary&gt;
        /// 自定义加密方法：
        /// 创建并打开文件流；
        /// 创建DES对象；
        /// 以随机秘钥创建DES加密器；
        /// 创建加密流；
        /// &lt;/summary&gt;
        /// &lt;param name="text"&gt;
        /// 把输入参数转成字节数组；
        /// 遍历字节数组并写入加密流&lt;/param&gt;
        /// &lt;param name="path"&gt;
        /// 文件路径，默认当前工作路径&lt;/param&gt;
        /// &lt;param name="key"&gt;
        /// 随机秘钥&lt;/param&gt;
        /// &lt;param name="iv"&gt;
        /// 随机矢量&lt;/param&gt;
        public static void EncryptTextToFile(string text, string path, byte[] key, byte[] iv)
        {
            try
            {
                using FileStream fStream = File.Open(path, FileMode.Create);
                using DES des = DES.Create();
                using ICryptoTransform encryptor = des.CreateEncryptor(key, iv);
                using var cStream = new CryptoStream(fStream, encryptor, CryptoStreamMode.Write);
                byte[] toEncrypt = Encoding.UTF8.GetBytes(text);
                cStream.Write(toEncrypt, 0, toEncrypt.Length);
            }
            catch (CryptographicException e)
            {
                Console.WriteLine("A Cryptographic error occurred: {0}", e.Message);
                throw;
            }
        }
        /// &lt;summary&gt;
        /// 自定义的解密方法：
        /// 创建文件流对象并打开加密后的文件；
        /// 创建DES解密器；
        /// 创建加密流。
        /// 创建文件流阅读器对象，并把加密流转UTF8文本：
        /// 从 StreamReader 读回所有文本；
        /// StreamReader 从 CryptoStream 接收解密的字节；
        /// CryptoStream 从 FileStream 接收加密的字节。
        /// &lt;/summary&gt;
        /// &lt;param name="path"&gt;
        /// 文件路径，默认当前工作路径&lt;/param&gt;
        /// &lt;param name="key"&gt;
        /// 随机秘钥&lt;/param&gt;
        /// &lt;param name="iv"&gt;
        /// 矢量&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public static string DecryptTextFromFile(string path, byte[] key, byte[] iv)
        {
            try
            {
                using FileStream fStream = File.OpenRead(path);
                using DES des = DES.Create();
                using ICryptoTransform decryptor = des.CreateDecryptor(key, iv);
                using var cStream = new CryptoStream(fStream, decryptor, CryptoStreamMode.Read);
                using StreamReader reader = new(cStream, Encoding.UTF8);
                return reader.ReadToEnd();
            }
            catch (CryptographicException e)
            {
                Console.WriteLine("A Cryptographic error occurred: {0}", e.Message);
                throw;
            }
        }
    }
}
//运行结果：
/*
大海航行靠舵手

 */</code></pre> 
<h3 id="3.%E5%AE%9E%E4%BE%8B2%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%92%8C%E8%A7%A3%E5%AF%86%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE">3.实例2，加密和解密内存中的数据</h3> 
<pre><code class="language-cs">// DES.Create()
// 创建和使用 DES 对象来加密和解密内存中的数据。
using System.Security.Cryptography;
using System.Text;

namespace ConsoleApp9
{
    class DESSample2
    {
        static void Main()
        {
            try
            {
                byte[] key;
                byte[] iv;
                using (DES des = DES.Create())
                {
                    key = des.Key;
                    iv = des.IV;
                }
                string original = "海燕在大海上飞翔";
                byte[] encrypted = EncryptToMemory(original, key, iv);      // 加密字符串到缓存
                string decrypted = DecryptFromMemory(encrypted, key, iv);   //自缓存解密到字符串
                Console.WriteLine(decrypted);                               //输出解密的字符串                                               
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
        /// &lt;summary&gt;
        /// 自定义的加密方法：
        /// 从内存流中获取字节数组；
        /// 加密流读取内容并完成加密。
        /// &lt;/summary&gt;
        public static byte[] EncryptToMemory(string text, byte[] key, byte[] iv)
        {
            try
            {
                using MemoryStream mStream = new();             //创建内存流
                using DES des = DES.Create();                   //创建DES对象
                using ICryptoTransform encryptor = des.CreateEncryptor(key, iv);//创建加密器
                using var cStream = new CryptoStream(mStream, encryptor,
                    CryptoStreamMode.Write);                    //创建加密流
                byte[] toEncrypt = Encoding.UTF8.GetBytes(text);//把输入字符串转字节数组
                cStream.Write(toEncrypt, 0, toEncrypt.Length);  //将字节数组写入加密流并刷新
                byte[] ret = mStream.ToArray();
                return ret;                                     //返回加密的内存数据
            }
            catch (CryptographicException e)
            {
                Console.WriteLine("A Cryptographic error occurred: {0}", e.Message);
                throw;
            }
        }
        /// &lt;summary&gt;
        /// 自缓存中解密：
        /// 创建缓存用于装载解密的数据，
        /// 注意：DES 加密的数据总是比解密的数据稍大；
        /// 用刚创建的缓存创建内存流；
        /// 不断地从 CryptoStream 中读取数据，直到完成（返回 0）。
        /// &lt;/summary&gt;
        public static string DecryptFromMemory(byte[] encrypted, byte[] key, byte[] iv)
        {
            try
            {
                byte[] decrypted = new byte[encrypted.Length];
                int offset = 0;
                using DES des = DES.Create();                              //创建DES对象                                              
                using MemoryStream mStream = new(decrypted);               //创建内存流
                using var cStream = new CryptoStream(mStream, des.
                    CreateDecryptor(key, iv), CryptoStreamMode.Read);      //创建解密流对象

                int read = 1;
                while (read &gt; 0)
                 {
                     read = cStream.Read(decrypted, offset, decrypted.Length - offset);
                     offset += read;
                 }
                return Encoding.UTF8.GetString(decrypted, 0, offset);      // 把解密的转文本并返回
            }
            catch (CryptographicException e)
            {
                Console.WriteLine("A Cryptographic error occurred: {0}", e.Message);
                throw;
            }
        }
    }
}</code></pre> 
<h2 id="%E4%B8%89%E3%80%81Create(String)">三、Create(String)</h2> 
<p>        创建加密对象的实例以执行数据加密标准 (DES) 算法的指定实现。</p> 
<pre><code class="language-cs">public static DES Create (string algName);

参数
algName String
要使用的 DES 的特定实现的名称。

返回
DES
一个加密对象。</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E5%85%B3%E4%BA%8EDES%E5%8A%A0%E5%AF%86">四、关于DES加密</h2> 
<p>        DES，全称Data Encryption Standard，是一种对称加密算法。DES加密算法是以8字节为一个块进行加密，一个数据块一个数据块的加密，一个8字节的明文加密后的密文也是8字节。如果明文长度不为8字节的整数倍，添加值为0的字节凑满8字节整数倍。所以加密后的密文长度一定为8字节的整数倍。</p> 
<p>        DES使用的密钥key为8字节，初始向量IV也是8字节。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae20a219ae0964377ef7d5b6eaf052df/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【嵌入式——QT】QT静态编译</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32eab75896425315e970974a2711bbfe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;力扣题目617--合并二叉树</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>