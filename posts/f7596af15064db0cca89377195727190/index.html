<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>URAL 1244 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="URAL 1244" />
<meta property="og:description" content="题目大意：给出一个正整数M，给出N个正整数ai，让你在这些数中挑出一些数组成M的一个划分，如果符合条件的划分数超过两个，输出：-1，如果没有输出：0，如果有且仅有一个：则按顺序输出剩下的数的序号。
例如：
input output 270 4 100 110 170 200 2 4 270 4 100 110 160 170 -1 270 4 100 120 160 180 0 测例1中，有且仅有100&#43;170=270，所以输出110与200的序号2 4。测例2中，100&#43;170=160&#43;110=270，所以输出-1。测例3中，没有任何两个数的和为270，所以输出0。
Time Limit:500MS Memory Limit:65536KB 64bit IO Format:%I64d &amp; %I64u
数据规模：0&lt;ai&lt;=1000,2&lt;=N&lt;=100。
理论基础：无。
题目分析：我们用dp[i][j]表示仅用前i个数可以挑出的j的划分的个数。pre[i][j]表示第i个数被选择或者未被选择，用于最后输出结果。
我们可以得出如果需要输出时，那么方案数就是唯一的，所以途径的所有的状态的数都只能是被选或者未被选择，所以我们不用担心，a[i]被选与未被选都有解的情况。因为这时我们不需要输出。
下来是状态转移方程：dp[i][j]=dp[i-1][j]&#43;(j&gt;=a[i])*(dp[i-1][j-a[i]]);在每一层dp时，只要发现dp[i][M]大于等于2即可输出-1退出程序。
如果dp[N][M]为0，则输出0。否则，回溯找回答案并输出。
代码如下：
#include&lt;iostream&gt; #include&lt;cstring&gt; #include&lt;string&gt; #include&lt;cstdlib&gt; #include&lt;cstdio&gt; #include&lt;cmath&gt; #include&lt;algorithm&gt; #include&lt;queue&gt; #include&lt;ctime&gt; #include&lt;vector&gt; using namespace std; typedef double db; #define DBG 0 #define maa (1&lt;&lt;31) #define mii ((1&lt;&lt;31)-1) #define ast(b) if(DBG &amp;&amp; !" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f7596af15064db0cca89377195727190/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-08-24T10:39:26+08:00" />
<meta property="article:modified_time" content="2013-08-24T10:39:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">URAL 1244</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-family:FangSong_GB2312; font-size:18px"><strong>题目大意：</strong>给出一个正整数M，给出N个正整数ai，让你在这些数中挑出一些数组成M的一个划分，如果符合条件的划分数超过两个，输出：-1，如果没有输出：0，如果有且仅有一个：则按顺序输出剩下的数的序号。</span></p> 
<p><span style="font-family:FangSong_GB2312; font-size:18px">例如：</span></p> 
<p><span style="font-family:FangSong_GB2312; font-size:18px"></span> </p> 
<table class="sample   " style="border-collapse:collapse; border:1px solid rgb(26,92,200); color:rgb(51,51,51); font-family:'times new roman'; font-size:17px"><tbody><tr><th width="350" style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px; color:rgb(26,92,200)"> input</th><th width="350" style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px; color:rgb(26,92,200)"> output</th></tr><tr><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">270
4
100
110
170
200
</pre> </td><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">2 4
</pre> </td></tr><tr><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">270
4
100
110
160
170
</pre> </td><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">-1
</pre> </td></tr><tr><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">270
4
100
120
160
180
</pre> </td><td style="border:1px solid rgb(26,92,200); vertical-align:top; padding:3px"> <pre class="intable" style="white-space:pre-wrap; word-wrap:break-word">0</pre> </td></tr></tbody></table> 
<span style="font-family:FangSong_GB2312; font-size:18px">    </span> 
<p></p> 
<p><span style="font-family:FangSong_GB2312; font-size:18px">    测例1中，有且仅有100+170=270，所以输出110与200的序号2 4。测例2中，100+170=160+110=270，所以输出-1。测例3中，没有任何两个数的和为270，所以输出0。</span></p> 
<p><span style="font-family:FangSong_GB2312; font-size:18px"><strong><em><span style="color:rgb(51,51,51); text-align:center">Time Limit:</span><span id="timeLimit" style="color:rgb(51,51,51); text-align:center">500</span><span style="color:rgb(51,51,51); text-align:center">MS     </span><span style="color:rgb(51,51,51); text-align:center">Memory Limit:</span><span id="memoryLimit" style="color:rgb(51,51,51); text-align:center">65536</span><span style="color:rgb(51,51,51); text-align:center">KB     </span><span style="color:rgb(51,51,51); text-align:center">64bit IO Format:</span><span id="_64IOFormat" style="color:rgb(51,51,51); text-align:center">%I64d &amp; %I64u</span></em></strong><br> </span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333"><strong>数据规模：</strong>0&lt;ai&lt;=1000,2&lt;=N&lt;=100。</span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333"><strong>理论基础：</strong>无。</span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333"><strong>题目分析：</strong>我们用dp[i][j]表示仅用前i个数可以挑出的j的划分的个数。pre[i][j]表示第i个数被选择或者未被选择，用于最后输出结果。</span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333">我们可以得出如果需要输出时，那么方案数就是唯一的，所以途径的所有的状态的数都只能是被选或者未被选择，所以我们不用担心，a[i]被选与未被选都有解的情况。因为这时我们不需要输出。</span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333">下来是状态转移方程：dp[i][j]=dp[i-1][j]+(j&gt;=a[i])*(dp[i-1][j-a[i]]);在每一层dp时，只要发现dp[i][M]大于等于2即可输出-1退出程序。<br> </span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333">如果dp[N][M]为0，则输出0。否则，回溯找回答案并输出。</span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333"><strong>代码如下：</strong></span></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;cstdlib&gt;
#include&lt;cstdio&gt;
#include&lt;cmath&gt;
#include&lt;algorithm&gt;
#include&lt;queue&gt;
#include&lt;ctime&gt;
#include&lt;vector&gt;
using namespace std;
typedef double db;
#define DBG 0
#define maa (1&lt;&lt;31)
#define mii ((1&lt;&lt;31)-1)
#define ast(b) if(DBG &amp;&amp; !(b)) { printf("%d!!|\n", __LINE__); while(1) getchar(); }  //调试
#define dout DBG &amp;&amp; cout &lt;&lt; __LINE__ &lt;&lt; "&gt;&gt;| "
#define pr(x) #x"=" &lt;&lt; (x) &lt;&lt; " | "
#define mk(x) DBG &amp;&amp; cout &lt;&lt; __LINE__ &lt;&lt; "**| "#x &lt;&lt; endl
#define pra(arr, a, b)  if(DBG) {\
    dout&lt;&lt;#arr"[] |" &lt;&lt;endl; \
    for(int i=a,i_b=b;i&lt;=i_b;i++) cout&lt;&lt;"["&lt;&lt;i&lt;&lt;"]="&lt;&lt;arr[i]&lt;&lt;" |"&lt;&lt;((i-(a)+1)%8?" ":"\n"); \
    if((b-a+1)%8) puts("");\
}
template&lt;class T&gt; inline bool updateMin(T&amp; a, T b) { return a&gt;b? a=b, true: false; }
template&lt;class T&gt; inline bool updateMax(T&amp; a, T b) { return a&lt;b? a=b, true: false; }
typedef long long LL;
typedef long unsigned int LU;
typedef long long unsigned int LLU;
#define N 100
#define M 100000
int dp[N+1][M+1];
int a[N+1],sum,n,cnt,ans[N+1];
bool pre[N+1][M+1];
int main()
{
    scanf("%d%d",&amp;sum,&amp;n);
    for(int i=1;i&lt;=n;i++)scanf("%d",a+i);
    dp[1][0]=1,dp[1][a[1]]=1,pre[1][a[1]]=true;
    for(int i=2;i&lt;=n;i++)
    {
        for(int j=0;j&lt;=sum;j++)
        {
            dp[i][j]=dp[i-1][j]+(j&gt;=a[i])*dp[i-1][j-a[i]];
            if(dp[i-1][j-a[i]])pre[i][j]=true;
        }
        if(dp[i][sum]&gt;=2)
        {
            printf("-1\n");
            return 0;
        }
    }
    if(dp[n][sum]==0)
    {
        printf("0\n");
        return 0;
    }
    if(dp[n][sum]==1)
    {
        for(int i=n;i&gt;=1;i--)
        {
            if(!pre[i][sum])ans[++cnt]=i;
            sum=sum-a[i]*pre[i][sum];
        }
        pra(ans,1,cnt)
        for(int i=cnt;i&gt;=1;i--)
        {
            printf("%d%c",ans[i],i==1?'\n':' ');
        }
    }
	return 0;
}</code></pre> 
<p><span style="font-family:FangSong_GB2312; font-size:18px">   </span><span style="font-family:FangSong_GB2312; font-size:18px">其中的初始化细节处理很容易理解，所以不用再细说了。</span></p> 
<p><span style="color:rgb(51,51,51); font-family:FangSong_GB2312; font-size:18px">by:Jsun_moon </span><a target="_blank" href="http://blog.csdn.net/jsun_moon" style="font-family:FangSong_GB2312; font-size:18px" rel="noopener noreferrer">http://blog.csdn.net/jsun_moon</a></p> 
<p style="text-align:left"><span style="font-family:FangSong_GB2312; font-size:18px; color:rgb(51,51,51)"><br> </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/788874d5ad96a4328197031e6319a377/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">oracle err 959,oracle 错误 959 处理办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ec16135dcf2dca8eba0da1715141c61/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">URAL 1501</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>