<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>lucene&amp;solr入门（一） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="lucene&amp;solr入门（一）" />
<meta property="og:description" content="一、 Lucene概述 1.1 Lucene是什么 Lucene是apache软件基金会4 jakarta项目组的一个子项目，是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎（英文与德文两种西方语言）。
Lucene的目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者是以此为基础建立起完整的全文检索引擎。
目前已经有很多应用程序的搜索功能是基于 Lucene 的，比如 Eclipse 的帮助系统的搜索功能。Lucene 能够为文本类型的数据建立索引，所以你只要能把你要索引的数据格式转化的文本的，Lucene 就能对你的文档进行索引和搜索。比如你要对一些 HTML 文档，PDF 文档进行索引的话你就首先需要把 HTML 文档和 PDF 文档转化成文本格式的，然后将转化后的内容交给 Lucene 进行索引，然后把创建好的索引文件保存到磁盘或者内存中，最后根据用户输入的查询条件在索引文件上进行查询。不指定要索引的文档的格式也使 Lucene 能够几乎适用于所有的搜索应用程序。
简单概括：
Lucene是一套用于全文检索和搜寻的开源程式库，由Apache软件基金会支 持和提供；Lucene提供了一个简单却强大的应用程式接口，能够做全文索引和搜寻， 在Java开发环境里Lucene是一个成熟的免费开放源代码工具；Lucene并不是现成的搜索引擎产品，但可以用来制作搜索引擎产品； 官网地址： http://lucene.apache.org/
1.2 Lucene的工作流程 索引：绿色部分表示索引。在搜索前需要先对原始内容进行索引，构建索引库。
索引过程：确定原始内容 &gt; 获得文档 &gt; 创建文档 &gt; 分析文档 &gt; 索引文档。
搜索：红色部分代表搜索。搜索即从索引库中搜索内容。
搜索过程：创建查询 &gt; 执行搜索 &gt; 从索引库搜索 &gt; 渲染搜索结果。
二、Lucene环境安装 开发环境：
JDK： 1.8.0_144
IDE： eclipse Luna
数据库： MySQL5.6.38
2.1 创建Maven工程，引入lucene相关坐标。 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-core&lt;/artifactId&gt; &lt;version&gt;8.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/59bc0a0d5f96c05321c808928e59bfed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-04T21:45:30+08:00" />
<meta property="article:modified_time" content="2019-09-04T21:45:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">lucene&amp;solr入门（一）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_Lucene_0"></a>一、 Lucene概述</h2> 
<h3><a id="11_Lucene_1"></a>1.1 Lucene是什么</h3> 
<p>Lucene是apache软件基金会4 jakarta项目组的一个子项目，是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎（英文与德文两种西方语言）。</p> 
<p>Lucene的目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者是以此为基础建立起完整的全文检索引擎。</p> 
<p>目前已经有很多应用程序的搜索功能是基于 Lucene 的，比如 Eclipse 的帮助系统的搜索功能。Lucene 能够为文本类型的数据建立索引，所以你只要能把你要索引的数据格式转化的文本的，Lucene 就能对你的文档进行索引和搜索。比如你要对一些 HTML 文档，PDF 文档进行索引的话你就首先需要把 HTML 文档和 PDF 文档转化成文本格式的，然后将转化后的内容交给 Lucene 进行索引，然后把创建好的索引文件保存到磁盘或者内存中，最后根据用户输入的查询条件在索引文件上进行查询。不指定要索引的文档的格式也使 Lucene 能够几乎适用于所有的搜索应用程序。</p> 
<p>简单概括：</p> 
<ul><li>Lucene是一套用于全文检索和搜寻的开源程式库，由Apache软件基金会支 持和提供；</li><li>Lucene提供了一个简单却强大的应用程式接口，能够做全文索引和搜寻， 在Java开发环境里Lucene是一个成熟的免费开放源代码工具；</li><li>Lucene并不是现成的搜索引擎产品，但可以用来制作搜索引擎产品；</li></ul> 
<p>官网地址： http://lucene.apache.org/<br> <img src="https://images2.imgbox.com/29/ce/urdHwSGW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12_Lucene_18"></a>1.2 Lucene的工作流程</h3> 
<p><img src="https://images2.imgbox.com/ec/11/fzCyJUVR_o.png" alt="在这里插入图片描述"><br> 索引：绿色部分表示索引。在搜索前需要先对原始内容进行索引，构建索引库。</p> 
<blockquote> 
 <p>索引过程：确定原始内容 &gt; 获得文档 &gt; 创建文档 &gt; 分析文档 &gt; 索引文档。</p> 
</blockquote> 
<p>搜索：红色部分代表搜索。搜索即从索引库中搜索内容。</p> 
<blockquote> 
 <p>搜索过程：创建查询 &gt; 执行搜索 &gt; 从索引库搜索 &gt; 渲染搜索结果。</p> 
</blockquote> 
<h2><a id="Lucene_29"></a>二、Lucene环境安装</h2> 
<p><strong>开发环境：</strong></p> 
<p>JDK： 1.8.0_144<br> IDE： eclipse Luna<br> 数据库： MySQL5.6.38</p> 
<h3><a id="21_Mavenlucene_36"></a>2.1 创建Maven工程，引入lucene相关坐标。</h3> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.lucene<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lucene-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.lucene<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lucene-queryparser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="22__68"></a>2.2 创建数据库</h3> 
<pre><code class="prism language-sql"><span class="token comment"># 创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> solr<span class="token punctuation">;</span>

<span class="token comment"># 选定数据库</span>
<span class="token keyword">use</span> solr<span class="token punctuation">;</span>

<span class="token comment"># 创建图书表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>book<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>price<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>pic<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>remark<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">5</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token comment"># 初始化数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>book<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'jvm原理'</span><span class="token punctuation">,</span> <span class="token string">'49'</span><span class="token punctuation">,</span> <span class="token string">'/uploads/1.jpg'</span><span class="token punctuation">,</span> <span class="token string">'深入浅出介绍jvm的实现原理'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>book<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'程序员基本功'</span><span class="token punctuation">,</span> <span class="token string">'149'</span><span class="token punctuation">,</span> <span class="token string">'/uploads/2.jpg'</span><span class="token punctuation">,</span> <span class="token string">'学习jvm基本功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>book<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'lucene搜索引擎'</span><span class="token punctuation">,</span> <span class="token string">'79'</span><span class="token punctuation">,</span> <span class="token string">'/uploads/3.jpg'</span><span class="token punctuation">,</span> <span class="token string">'深入浅出蜘蛛 爬虫 lutch 数据分析'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>book<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'搜索引擎内部剖析'</span><span class="token punctuation">,</span> <span class="token string">'59'</span><span class="token punctuation">,</span> <span class="token string">'/uploads/4.jpg'</span><span class="token punctuation">,</span> <span class="token string">'呵呵'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="23_Beans_94"></a>2.3 创建Beans</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 图书ID</span>
	<span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>
	<span class="token comment">// 图书名称</span>
	<span class="token keyword">private</span> String name<span class="token punctuation">;</span>
	<span class="token comment">// 图书价格</span>
	<span class="token keyword">private</span> Float price<span class="token punctuation">;</span>
	<span class="token comment">// 图书图片</span>
	<span class="token keyword">private</span> String pic<span class="token punctuation">;</span>
	<span class="token comment">// 图书描述</span>
	<span class="token keyword">private</span> String remark<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="24_Dao_112"></a>2.4 创建Dao接口</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>

	List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> <span class="token function">queryBookList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="25_Dao_121"></a>2.5 创建Dao实现类</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> <span class="token function">queryBookList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 数据库链接</span>
		Connection connection <span class="token operator">=</span> null<span class="token punctuation">;</span>
		<span class="token comment">// 预编译statement</span>
		PreparedStatement preparedStatement <span class="token operator">=</span> null<span class="token punctuation">;</span>
		<span class="token comment">// 结果集</span>
		ResultSet resultSet <span class="token operator">=</span> null<span class="token punctuation">;</span>
		<span class="token comment">// 图书列表</span>
		List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 加载数据库驱动</span>
			Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 连接数据库</span>
			connection <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/solr"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// SQL语句</span>
			String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM book"</span><span class="token punctuation">;</span>
			<span class="token comment">// 创建preparedStatement</span>
			preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取结果集</span>
			resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 结果集解析</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				Book book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				book<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				book<span class="token punctuation">.</span><span class="token function">setPic</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"pic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				book<span class="token punctuation">.</span><span class="token function">setRemark</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"remark"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> list<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_168"></a>三、实现索引</h3> 
<p>第一步：创建Document对象；</p> 
<p>第二步：创建解析器对象；</p> 
<p>第三步：创建Directory对象，该对象声明了索引库的位置；</p> 
<p>第四步：创建IndexWriter对象，该对象负责把Document写入索引库文件中；</p> 
<p>第五步：释放资源；</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 采集数据</span>
	BookDao bookDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	List<span class="token generics function"><span class="token punctuation">&lt;</span>Book<span class="token punctuation">&gt;</span></span> bookList <span class="token operator">=</span> bookDao<span class="token punctuation">.</span><span class="token function">queryBookList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建Document对象，每一个Document对象对应数据库表的一行记录</span>
	List<span class="token generics function"><span class="token punctuation">&lt;</span>Document<span class="token punctuation">&gt;</span></span> documents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>Book book <span class="token operator">:</span> bookList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		Document document <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Document</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 添加Field域</span>
		document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 图书名称</span>
		document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 图书价格</span>
		document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 图书图片地址</span>
		document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"pic"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 图书描述</span>
		document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"remark"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getRemark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 把Document放到list中</span>
		documents<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 创建Analyzer分词器,分析文档，对文档进行分词</span>
	Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 构建创建文件目录</span>
	Directory directory <span class="token operator">=</span> FSDirectory<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"d:/lucene/index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建IndexWriteConfig对象，写入索引需要的配置</span>
	IndexWriterConfig config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriterConfig</span><span class="token punctuation">(</span>analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建IndexWriter写入对象</span>
	IndexWriter indexWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriter</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 把Document写入到索引库</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>Document doc <span class="token operator">:</span> documents<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		indexWriter<span class="token punctuation">.</span><span class="token function">addDocument</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 8.释放资源</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行程序，可以在d:/lucene/index目录下看到创建的索引文件。<br> <img src="https://images2.imgbox.com/ec/7a/JsSqOdRl_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_231"></a>四、搜索索引</h3> 
<h3><a id="41__232"></a>4.1 搜索分词</h3> 
<p>和索引过程的分词一样，这里要对用户输入的关键字进行分词，一般情况索引和搜索使用的分词器一致。比如搜索“java培训”，分词处理后变成了“java”和“培训”两个词。这时候与java和培训相关的内容都会被查询出来。</p> 
<h3><a id="42_QueryParser_236"></a>4.2 使用QueryParser对象实现搜索</h3> 
<p>第一步：读取索引文件；<br> 第二步：创建搜索器；<br> 第三步：创建解析器对象；<br> 第四步：创建查询解析器对象，该对象会使用刚创建的解析器对象对指定查询内容进行解析；<br> 第五步：执行搜索；<br> 第六步：处理搜索结果；<br> 第七部：关闭资源；</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchIndex2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ParseException <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建Directory流对象,声明索引库位置</span>
	Directory directory <span class="token operator">=</span> FSDirectory<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"d:/lucene/index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建索引读取对象IndexReader</span>
	IndexReader reader <span class="token operator">=</span> DirectoryReader<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建索引搜索对象</span>
	IndexSearcher searcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexSearcher</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建分词器</span>
	Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">// 创建搜索解析器，第一个参数：默认Field域，第二个参数：分词器</span>
	QueryParser queryParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryParser</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query query <span class="token operator">=</span> queryParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"name:jvm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 使用索引搜索对象，执行搜索，返回结果集TopDocs</span>
	TopDocs topDocs <span class="token operator">=</span> searcher<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"查询到的数据总条数是："</span> <span class="token operator">+</span> topDocs<span class="token punctuation">.</span>totalHits<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 获取查询结果集</span>
	ScoreDoc<span class="token punctuation">[</span><span class="token punctuation">]</span> docs <span class="token operator">=</span> topDocs<span class="token punctuation">.</span>scoreDocs<span class="token punctuation">;</span>
	<span class="token comment">// 6. 解析结果集</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>ScoreDoc scoreDoc <span class="token operator">:</span> docs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"============================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 获取文档ID</span>
		<span class="token keyword">int</span> docID <span class="token operator">=</span> scoreDoc<span class="token punctuation">.</span>doc<span class="token punctuation">;</span>
		<span class="token comment">// 根据文档ID获取文档</span>
		Document doc <span class="token operator">=</span> searcher<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>docID<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 获取文档中的每一个字段内容</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"bookId:"</span> <span class="token operator">+</span> doc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> doc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"price:"</span> <span class="token operator">+</span> doc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"pic:"</span> <span class="token operator">+</span> doc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"pic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"remark:"</span> <span class="token operator">+</span> doc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"remark"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// 7. 释放资源</span>
	reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面search方法返回一个TopDocs对象，该对象封装了查询结果信息。 该对象包含两个常用属性：<br> totalHits：匹配搜索条件的总记录数；<br> scoreDocs：返回匹配度最高的记录；<br> 比如：indexSearcher.search(query, 10)，那么最多匹配10条记录。</p> 
<p>查询结果如下图所示：<br> <img src="https://images2.imgbox.com/b1/96/PNTD8kS8_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_299"></a>五、分词器</h2> 
<h3><a id="51__300"></a>5.1 什么是分词</h3> 
<p>分词就是把采集到的数据存储到document对象的Field域中，分词就是将Document中Field的value值切分成一个一个的词。</p> 
<h3><a id="52__304"></a>5.2 分词器的执行过程</h3> 
<p>分词（Tokenizer）的主要过程就是先分词后过滤（TokenFilter）。过滤的工作主要包括：去除标点符号过滤、去除停用词过滤（的、是、a、an、the等）、大写转小写、词形还原（复数形式转成单数形参、过去式转成现在式）等等。</p> 
<p>分词器的执行过程如下图所示：<br> <img src="https://images2.imgbox.com/7a/8f/1KL4n4ms_o.png" alt="在这里插入图片描述"><br> 从图上可以看到，分词完成后会经过一系列的过滤，最后才得到一个个的Token。我们可以把token理解为一个个的单词。</p> 
<p>例如：<br> 原文：Lucene is a full-text search enginie.<br> 分词后：lucene、is、a、full、text、search、engine，一共7个词。</p> 
<h3><a id="53__315"></a>5.3 中文分词器</h3> 
<p>虽然lucene自带了中文分词器，但是许多人使用后都觉得lucene自带的中文分词功能比较弱，分词的效果不太令人满意。所以建议使用第三方的分词器。例如：IkAnalyzer。</p> 
<p>下面列出一些常见的分词器：</p> 
<table><thead><tr><th>分词器</th><th>描述</th></tr></thead><tbody><tr><td>StandardAnalyzer</td><td>按照中文一个字一个字地进行分词，比如：中国，效果：中、国</td></tr><tr><td>CJKAnalyzer</td><td>按两个字进行切分。如：“我是中国人”，效果：“我是”、“是中”、“中国”“国人”</td></tr><tr><td>SmartChineseAnalyzer</td><td>相对来说对中文支持较好，但扩展性差，扩展词库，禁用词库等不好处理</td></tr><tr><td>IK-analyzer</td><td>对中文支持较好，实现了简单的分词 ，歧义排除算法，而且版本还不断更新，推荐使用</td></tr></tbody></table> 
<h3><a id="54_IkAnalyzer_326"></a>5.4 使用IkAnalyzer</h3> 
<p>第一步：引入坐标。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.jianggujin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>IKAnalyzer-lucene<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>第二步：创建分词器；</p> 
<pre><code class="prism language-java"><span class="token comment">//Analyzer analyzer = new StandardAnalyzer();</span>
Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IKAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="Field_342"></a>六、Field详解</h2> 
<p>Lucene中的Field相当于数据库表中的字段，一个文档可以包括多个Field，Document只是Field的一个承载体，Field值即为要索引的内容，也是要搜索的内容。</p> 
<ul><li>是否分词</li></ul> 
<p>如果是，则进行分词处理。比如：商品名称、商品描述等，这些内容用户要输入关键字搜索，由于搜索的内容格式大、内容多需要分词后将语汇单元建立索引。</p> 
<p>如果否，则不进行分词处理。比如：商品id、订单号、身份证号等。</p> 
<ul><li>是否索引</li></ul> 
<p>如果是，则将分词后的词或整个Field值进行索引，存储到索引域。索引的目的是为了搜索。比如：商品名称、商品描述。订单号、身份证号不用分词但也要索引，这些将来都要作为查询条件。</p> 
<p>如果否，则不进行索引。比如：图片路径、文件路径等，不用作为查询条件的不用索引。</p> 
<ul><li>是否存储</li></ul> 
<p>如果是，则将Field值存储在文档域中。存储在文档域中的Field才可以从Document中获取。比如：商品名称、订单号，凡是将来要从Document中获取的Field都要存储。</p> 
<p>如果否，则不存储Field的值。比如：商品描述，内容较大不用存储。</p> 
<h3><a id="61_Field_364"></a>6.1 常见Field类型</h3> 
<table><thead><tr><th>Field</th><th>数据类型</th><th>是否分词</th><th>是否索引</th><th>是否存储</th><th>说明</th></tr></thead><tbody><tr><td>StringField</td><td>字符串</td><td>N</td><td>Y</td><td>Y或N</td><td>这个Field用来构建一个字符串Field，但是不会进行分词，会将整个串存储在索引中，比如(订单号,身份证号等),是否存储在文档中用Store.YES或Store.NO决定</td></tr><tr><td>NumericDocValuesField</td><td>long</td><td>Y</td><td>Y</td><td>Y或N</td><td>这个Field用来构建一个Long数字型Field，进行分词和索引，比如(价格)，是否存储在文档中用Store.YES或Store.NO决定</td></tr><tr><td>StoredField</td><td>支持多种类型</td><td>N</td><td>N</td><td>Y</td><td>这个Field用来构建不同类型Field不分析，不索引，但要Field存储在文档中</td></tr><tr><td>TextField</td><td>字符串或流</td><td>Y</td><td>Y</td><td>Y或N</td><td>如果是一个Reader, lucene猜测内容比较多,会采用Unstored的策略</td></tr></tbody></table> 
<h3><a id="62_Field_373"></a>6.2 Field改造</h3> 
<pre><code class="prism language-java"><span class="token comment">// 图书ID，不分词，不索引，储存</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StoredField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 图书名称，分词，索引，储存</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 图书价格，分词，索引，不储存</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DoublePoint</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 图片地址，不分词，不索引，储存</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StoredField</span><span class="token punctuation">(</span><span class="token string">"pic"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 图书描述，分词，索引，不储存</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"remark"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getRemark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>NO<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_391"></a>七、索引维护</h3> 
<h3><a id="71__392"></a>7.1 删除索引</h3> 
<p>IndexWriter提供了两个方法实现索引的删除：</p> 
<p>1）deleteDocuments：根据条件删除索引；<br> 2）deleteAll：删除所有索引；</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIndexDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建Directory流对象</span>
	Directory directory <span class="token operator">=</span> FSDirectory<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"d:/lucene/index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建分词器</span>
	Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IKAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建IndexWriterConfig对象，该对象封装了IndexWriter的配置信息</span>
	IndexWriterConfig config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriterConfig</span><span class="token punctuation">(</span>analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建IndexWriter对象</span>
	IndexWriter indexWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriter</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 根据Term删除索引库，name:lucene</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">deleteDocuments</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Term</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"lucene"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 释放资源</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>删除所有索引：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIndexAllDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建Directory流对象</span>
	Directory directory <span class="token operator">=</span> FSDirectory<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"d:/lucene/index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	IndexWriterConfig config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriterConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建写入对象</span>
	IndexWriter indexWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriter</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 根据Term删除索引库，name:lucene</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 释放资源</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="72__441"></a>7.2 修改索引</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIndexUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 创建分词器</span>
	Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IKAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建Directory流对象</span>
	Directory directory <span class="token operator">=</span> FSDirectory<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>Paths<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"d:/lucene/index"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 配置分词器</span>
	IndexWriterConfig config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriterConfig</span><span class="token punctuation">(</span>analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建写入对象</span>
	IndexWriter indexWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexWriter</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 创建Document</span>
	Document document <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Document</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 设置要更新的字段</span>
	document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StoredField</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"全文搜索"</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>YES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 执行更新</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">updateDocument</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Term</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"lucene"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 释放资源</span>
	indexWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>实际上，updateDocument方法会把所有符合条件的Document先删除，再执行添加操作。</p> 
<h2><a id="_476"></a>八、搜索</h2> 
<h3><a id="81_Query_477"></a>8.1 通过Query子类实现搜索</h3> 
<h4><a id="811_TermQuery_478"></a>8.1.1 TermQuery</h4> 
<p>词项查询，TermQuery不使用分析器，搜索关键词进行精确匹配Field域中的词，比如订单号、分类ID号等。</p> 
<pre><code class="prism language-java">Query query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TermQuery</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Term</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"lucene"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="812_TermRangeQuery_483"></a>81.2 TermRangeQuery</h4> 
<p>多条件查询，通过一组Term来查找索引文档。</p> 
<pre><code class="prism language-java">Query query2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TermRangeQuery</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BytesRef</span><span class="token punctuation">(</span><span class="token string">"50"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BytesRef</span><span class="token punctuation">(</span><span class="token string">"99"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>参数说明：</li></ul> 
<p>参数一：要查询的Field；<br> 参数二：Field的下限，不支持数值类型；<br> 参数三：Field的上限，不支持数值类型；<br> 参数四：是否包含下限值，如果true代表包含，否则不包含；<br> 参数五：是否包含上限值，如果true代表包含，否则不包含；</p> 
<h4><a id="813_BooleanQuery_497"></a>8.1.3 BooleanQuery</h4> 
<p>布尔查询，实现组合条件查询。例如：</p> 
<pre><code class="prism language-java">Query query1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TermQuery</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Term</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"lucene"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query query2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TermRangeQuery</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BytesRef</span><span class="token punctuation">(</span><span class="token string">"50"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BytesRef</span><span class="token punctuation">(</span><span class="token string">"99"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">// 组合多个条件</span>
Query query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BooleanQuery<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>query1<span class="token punctuation">,</span> Occur<span class="token punctuation">.</span>SHOULD<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>query2<span class="token punctuation">,</span> Occur<span class="token punctuation">.</span>SHOULD<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>组合关系有：</li></ul> 
<table><thead><tr><th></th><th>MUST</th><th>MUST_NOT</th><th>SHOULD</th></tr></thead><tbody><tr><td><strong>MUST</strong></td><td>交集</td><td>减集</td><td>MUST</td></tr><tr><td><strong>MUST_NOT</strong></td><td>减集</td><td>没意义</td><td>减集</td></tr><tr><td><strong>SHOULD</strong></td><td>MUST</td><td>减集</td><td>并集</td></tr></tbody></table> 
<p>1）MUST和MUST表示“与”的关系，即“交集”<br> 2）MUST和MUST_NOT前者包含后者不包含<br> 3）MUST_NOT和MUST_NOT没意义<br> 4）SHOULD与MUST表示MUST，SHOULD失去意义<br> 5）SHOULD与MUST_NOT相当于MUST与MUST_NOT<br> 6）SHOULD与SHOULD表示“或”的关系，即“并集”</p> 
<h3><a id="82_QueryParser_526"></a>8.2 通过QueryParser实现搜索</h3> 
<h4><a id="821__527"></a>8.2.1 查询语法</h4> 
<p>基本查询：Field + “:” + 搜索的关键字<br> 例如：name:java</p> 
<p>范围查询：Field + “:” + [最小值 TO 最大值]<br> 例如：size:[1 TO 1000]</p> 
<p>组合条件查询：<br> +加号：相当于AND<br> 空（没有字符）：相当于OR<br> <code>-</code>减号：相当于NOT</p> 
<h4><a id="822_QueryParser_539"></a>8.2.2 QueryParser</h4> 
<pre><code class="prism language-java"><span class="token comment">// 创建分词解析器</span>
Analyzer analyzer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IKAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建搜索解析器，第一个参数：默认Field域，第二个参数：分词器</span>
QueryParser queryParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryParser</span><span class="token punctuation">(</span><span class="token string">"remark"</span><span class="token punctuation">,</span> analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建搜索对象</span>
Query query <span class="token operator">=</span> queryParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"remark:java AND lucene"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打印生成的搜索语句</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="823_MultiFieldQueryParser_554"></a>8.2.3 MultiFieldQueryParser</h4> 
<pre><code class="prism language-java">String<span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"remark"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
MultiFieldQueryParser multiFieldQueryParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiFieldQueryParser</span><span class="token punctuation">(</span>fields<span class="token punctuation">,</span> analyzer<span class="token punctuation">)</span><span class="token punctuation">;</span>
Query query <span class="token operator">=</span> multiFieldQueryParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"jvm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上面MultiFieldQueryParser解析器生成的查询条件：</p> 
<pre><code class="prism language-java">name<span class="token operator">:</span>jvm remark<span class="token operator">:</span>jvm
</code></pre> 
<h2><a id="_565"></a>九、相关度排序</h2> 
<h3><a id="91__566"></a>9.1 相关度描述</h3> 
<p>相关度排序是查询结果按照与查询关键字的相关性进行排序，相关度越高的记录就越容易被查询到。比如搜索“Lucene”关键字，与该关键字最相关的文章应该排在前边。</p> 
<p>Lucene对查询关键字和索引文档的相关度进行打分，得分高的就排在前边。</p> 
<blockquote> 
 <p>问题：如何打分呢？</p> 
</blockquote> 
<p>Lucene是在用户进行检索时实时根据搜索的关键字计算出来的。计算步骤分为：<br> 1）计算词（Term）的权重；<br> 2）根据词的权重值，计算出文档相关度得分；</p> 
<p>影响词权重的两个重要因素：<br> 1）Term Frequency(tf)：此Term在此文档中出现的次数。次数越多，tf的值就越大，此词对于该文档就越重要；<br> 2）Document Frequency(df)：指有多少文档包含此Term。df的值越大，代表此词对于该文档越不重要；</p> 
<h3><a id="92_boost_582"></a>9.2 设置boost</h3> 
<p>boost是一个加权值（默认加权值为1.0f），它可以影响权重的计算。在索引时对某个文档中的field设置加权值，设置越高，在搜索时匹配到这个文档就可能排在前边。</p> 
<p>例如：给id为1的文档设置加权值。</p> 
<pre><code class="prism language-java">TextField descField <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string">"desc"</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span>NO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	descField<span class="token punctuation">.</span><span class="token function">setBoost</span><span class="token punctuation">(</span><span class="token number">100f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>descField<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fe4fb24da65c75bc260d27369ae8c79/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端 发送请求时，同时出现两次请求</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d1e404bd2ccc88578fc9fd330b2ab122/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Eclipse_彻底删除多余的工作空间</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>