<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>软件测试进阶篇----移动端测试 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="软件测试进阶篇----移动端测试" />
<meta property="og:description" content="一、移动端测试概述 移动端测试不是一个新的领域，所采用的测试的理论、原则和方法、技术和之前web的是一样的。
移动端的手工测试，和web端的点点点是一样的。
移动端的自动化测试，python&#43;appium&#43;unittest/pytest&#43;ddt&#43;BeautifulReport/allure&#43;git/gitee&#43;jenkins
1、移动端设备 当前大部分移动端测试是属于嵌入式测试范畴的，包括移动端的应用（app，小程序）测试以及移动端设备测试
手机（手机终端测试）智能穿戴设备（手环、手表、眼镜、AR设备）车机交互、车载pad、扫地机器人 2、移动端操作系统（os） Androidios鸿蒙os4xiaomi澎湃os黑莓windows phone塞班4、5/米狗 3、移动端应用（app） 这个是软件测试工程师的主要测试对象，以Android为例：
原生app：以Android、iOS、鸿蒙提供的开发环境直接开发的app，数据处理能力比较强混合开发app：数据处理使用Android，页面展示用的H5技术（更好看）web app：纯H5技术开发的app小程序： 微信小程序：随用随装、不同卸载支付宝小程序今日头条小程序百度小程序 二、移动端测试的要点（重点） 1、安装和卸载测试 web端也是需要安装和卸载测试的：
测试环境下，可以根据用户安装手册完成一次部署上线之前的预发布环境中，要完整的执行一次安装过程（预演），上线安装就安全了。内存不足的时候有没有提示是否安装在了指定的文件夹下、是否有多余的文件夹生成在安装过程中有电话打入、短信、消息、闹钟等事件的中断服务器端的安装：金丝雀发布/灰度发布的方式客户端app的安装：（重点） Android： 通过各种渠道获取apk文件，即可安装 iOS： 安装包的后缀是ipa文件app已经获取到苹果发的企业证书，是可以随便装的**上线appstore，下载安装****在测试环境中，将iphone收集的udid编号，给开发，开发打包在app中，该iphone就可以安装了****testflight是苹果提供内测工具，开发组通过testflight给对应测试人员账号发邮件，获取验证码并下载安装** web端的系统卸载：
应用程序包（文件夹），直接删除即可对应的数据库也要手动卸载redis软件支持，也需要删除 移动端的app卸载：
直接卸载检查卸载是否完整、干净（不能有多余的文件夹、缓存数据） 2、UI测试点 在UI页面展示上的不合理的内容、测试点：
要检查页面上是否有错别字要检查页面布局风格：横向上风格要一致，按钮、标签、图片大小和样式要相同页面颜色不能三种以上比较艳丽的颜色文字不能超出所在标签的位置：文字超出文本框的范围，overlap标签与标签之间叠加在一起了，cutoff不允许出现违法、敏感的文字和图片中文字符的支持一些英文单词不能过度翻译：logo 3、app功能性测试（重点） app安装完成之后是否能正常启动app启动时的广告页显示是否正常、倒计时、跳过功能是否正常注册功能登录功能注销功能前后端切换app，检查是否可用 先正常使用app，切到后台，再从后台切回到前台先正常使用app，切到后台，锁屏，解开屏幕，再从后台切回到前台正常使用app，接电话，回来继续使用正常使用app，弹窗了，切回后台，再回来… 登录及免登录的测试数据更新软件更新相机、通讯录、录音机等功能的使用push消息通知测试交叉事件测试 打电话发短信发邮件闹钟 4、兼容性测试（重点） 做兼容性测试的目的是：app可以在不同的手机能正常使用（覆盖市场主流的50&#43;手机以上）
1）需要兼容的要素
和软件的兼容和硬件的兼容 品牌（华为、小米、苹果等）屏幕大小不同：6.X网络制式os系统兼容 iOS：14、15、16等最新三个版本Android：13、14、15版本鸿蒙：1、2、3、4澎湃os：基于Android深度开发的 2）怎么做兼容性测试
兼容性测试一定要采用真实的设备进行测试。
公司没钱买：借手机没钱不想借：租手机，在线的云测平台（20&#43;自备和50&#43;平台租赁）。 testin腾讯wetest优测蒲公英 公司不差钱：买，买最新的（可以是二手的） 3）兼容性测试关注的三个主要问题
Exception：异常ANR：应用程序未响应Crash：崩溃、闪退 4）app专项测试数据（记住）
app耗电量测试app流量测试app内存占用app的cpu占用游戏app测试关注帧率电池温度测试 三、Android系统概述 1、Android系统架构 应用程序层：计算器、qq、微信、支付宝等，主要用的是Android、H5应用程序框架层：进行Android开发的支持的框架，java函数库层（c&#43;&#43;、java）Linux内核层 进程调度（SCHED）内存管理（MM）虚拟文件系统（VFS）网络接口（NET）进行间通信（IPC） 2、Android app的四个组件 每一个Android的app都是由四部分组成的。
1）activity：活动
每个app的一屏内容就称之为活动，相当于web中的一个页面，负责页面展示效果
2）service：服务
在app第一次启动的时候启动起来，主要负责数据的处理
3）content-provide：内容提供者
Android系统中的一个数据中转站
4）broadcast receiver：广播接收器
消息推送到Android系统
四、移动端测试环境搭建 本章讲的是Android环境的搭建，实现对Android移动端app的手工测试环境和自动化测试环境。
jdk环境和环境变量配置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d16ea05c5137ff255bb5fb6a42816e7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-06T20:45:52+08:00" />
<meta property="article:modified_time" content="2023-11-06T20:45:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">软件测试进阶篇----移动端测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、移动端测试概述</h2> 
<p>移动端测试不是一个新的领域，所采用的测试的理论、原则和方法、技术和之前web的是一样的。</p> 
<p>移动端的手工测试，和web端的点点点是一样的。</p> 
<p>移动端的自动化测试，python+appium+unittest/pytest+ddt+BeautifulReport/allure+git/gitee+jenkins</p> 
<h3><a id="1_8"></a>1、移动端设备</h3> 
<p>当前大部分移动端测试是属于嵌入式测试范畴的，包括移动端的应用（app，小程序）测试以及移动端设备测试</p> 
<ul><li>手机（手机终端测试）</li><li>智能穿戴设备（手环、手表、眼镜、AR设备）</li><li>车机交互、车载</li><li>pad、扫地机器人</li></ul> 
<h3><a id="2os_17"></a>2、移动端操作系统（os）</h3> 
<ul><li>Android</li><li>ios</li><li>鸿蒙os4</li><li>xiaomi澎湃os</li><li>黑莓</li><li>windows phone</li><li>塞班4、5/米狗</li></ul> 
<h3><a id="3app_27"></a>3、移动端应用（app）</h3> 
<p>这个是软件测试工程师的主要测试对象，以Android为例：</p> 
<ul><li>原生app：以Android、iOS、鸿蒙提供的开发环境直接开发的app，数据处理能力比较强</li><li>混合开发app：数据处理使用Android，页面展示用的H5技术（更好看）</li><li><strong>web app：纯H5技术开发的app</strong></li><li><strong>小程序：</strong> 
  <ul><li>微信小程序：随用随装、不同卸载</li><li>支付宝小程序</li><li>今日头条小程序</li><li>百度小程序</li></ul> </li></ul> 
<h2><a id="_40"></a>二、移动端测试的要点（重点）</h2> 
<h3><a id="1_42"></a>1、安装和卸载测试</h3> 
<p>web端也是需要安装和卸载测试的：</p> 
<ul><li>测试环境下，可以根据用户安装手册完成一次部署</li><li>上线之前的预发布环境中，要完整的执行一次安装过程（预演），上线安装就安全了。</li><li>内存不足的时候有没有提示</li><li>是否安装在了指定的文件夹下、是否有多余的文件夹生成</li><li>在安装过程中有电话打入、短信、消息、闹钟等事件的中断</li><li>服务器端的安装：金丝雀发布/灰度发布的方式</li><li><code>客户端app的安装：（重点）</code> 
  <ul><li>Android： 
    <ul><li>通过各种渠道获取apk文件，即可安装</li></ul> </li><li>iOS： 
    <ul><li>安装包的后缀是ipa文件</li><li>app已经获取到苹果发的企业证书，是可以随便装的</li><li><code>**上线appstore，下载安装**</code></li><li><code>**在测试环境中，将iphone收集的udid编号，给开发，开发打包在app中，该iphone就可以安装了**</code></li><li><code>**testflight是苹果提供内测工具，开发组通过testflight给对应测试人员账号发邮件，获取验证码并下载安装**</code></li></ul> </li></ul> </li></ul> 
<p>web端的系统卸载：</p> 
<ul><li>应用程序包（文件夹），直接删除即可</li><li>对应的数据库也要手动卸载</li><li>redis软件支持，也需要删除</li></ul> 
<p>移动端的app卸载：</p> 
<ul><li>直接卸载</li><li>检查卸载是否完整、干净（不能有多余的文件夹、缓存数据）</li></ul> 
<h3><a id="2UI_73"></a>2、UI测试点</h3> 
<p>在UI页面展示上的不合理的内容、测试点：</p> 
<ul><li>要检查页面上是否有错别字</li><li>要检查页面布局风格：横向上风格要一致，按钮、标签、图片大小和样式要相同</li><li>页面颜色不能三种以上比较艳丽的颜色</li><li>文字不能超出所在标签的位置：文字超出文本框的范围，overlap</li><li>标签与标签之间叠加在一起了，cutoff</li><li>不允许出现违法、敏感的文字和图片</li><li>中文字符的支持</li><li>一些英文单词不能过度翻译：logo</li></ul> 
<h3><a id="3app_86"></a>3、app功能性测试（重点）</h3> 
<ul><li>app安装完成之后是否能正常启动</li><li>app启动时的广告页显示是否正常、倒计时、跳过功能是否正常</li><li>注册功能</li><li>登录功能</li><li>注销功能</li><li>前后端切换app，检查是否可用 
  <ul><li>先正常使用app，切到后台，再从后台切回到前台</li><li>先正常使用app，切到后台，锁屏，解开屏幕，再从后台切回到前台</li><li>正常使用app，接电话，回来继续使用</li><li>正常使用app，弹窗了，切回后台，再回来</li><li>…</li></ul> </li><li>登录及免登录的测试</li><li>数据更新</li><li>软件更新</li><li>相机、通讯录、录音机等功能的使用</li><li>push消息通知测试</li><li>交叉事件测试 
  <ul><li>打电话</li><li>发短信</li><li>发邮件</li><li>闹钟</li></ul> </li></ul> 
<h3><a id="4_110"></a>4、兼容性测试（重点）</h3> 
<p>做兼容性测试的目的是：app可以在不同的手机能正常使用（覆盖市场主流的50+手机以上）</p> 
<p>1）需要兼容的要素</p> 
<ul><li>和软件的兼容</li><li>和硬件的兼容 
  <ul><li>品牌（华为、小米、苹果等）</li><li>屏幕大小不同：6.X</li><li>网络制式</li><li>os系统兼容 
    <ul><li>iOS：14、15、16等最新三个版本</li><li>Android：13、14、15版本</li><li>鸿蒙：1、2、3、4</li><li>澎湃os：基于Android深度开发的</li></ul> </li></ul> </li></ul> 
<p>2）怎么做兼容性测试</p> 
<p>兼容性测试一定要采用<strong>真实的设备</strong>进行测试。</p> 
<ul><li>公司没钱买：借手机</li><li>没钱不想借：租手机，在线的云测平台（20+自备和50+平台租赁）。 
  <ul><li><strong>testin</strong></li><li>腾讯wetest</li><li>优测</li><li>蒲公英</li></ul> </li><li>公司不差钱：买，买最新的（可以是二手的）</li></ul> 
<p>3）兼容性测试关注的三个主要问题</p> 
<ul><li>Exception：异常</li><li>ANR：应用程序未响应</li><li>Crash：崩溃、闪退</li></ul> 
<p>4）app专项测试数据（记住）</p> 
<ul><li><strong>app耗电量测试</strong></li><li><strong>app流量测试</strong></li><li><strong>app内存占用</strong></li><li><strong>app的cpu占用</strong></li><li><strong>游戏app测试关注帧率</strong></li><li><strong>电池温度测试</strong></li></ul> 
<h2><a id="Android_154"></a>三、Android系统概述</h2> 
<h3><a id="1Android_156"></a>1、Android系统架构</h3> 
<ul><li>应用程序层：计算器、qq、微信、支付宝等，主要用的是Android、H5</li><li>应用程序框架层：进行Android开发的支持的框架，java</li><li>函数库层（c++、java）</li><li>Linux内核层 
  <ul><li>进程调度（SCHED）</li><li>内存管理（MM）</li><li>虚拟文件系统（VFS）</li><li>网络接口（NET）</li><li>进行间通信（IPC）</li></ul> </li></ul> 
<h3><a id="2Android_app_168"></a>2、Android app的四个组件</h3> 
<p>每一个Android的app都是由四部分组成的。</p> 
<p>1）activity：活动</p> 
<p>每个app的一屏内容就称之为活动，相当于web中的一个页面，负责页面展示效果</p> 
<p>2）service：服务</p> 
<p>在app第一次启动的时候启动起来，主要负责数据的处理</p> 
<p>3）content-provide：内容提供者</p> 
<p>Android系统中的一个数据中转站</p> 
<p>4）broadcast receiver：广播接收器</p> 
<p>消息推送到Android系统</p> 
<h2><a id="_188"></a>四、移动端测试环境搭建</h2> 
<p>本章讲的是Android环境的搭建，实现对Android移动端app的手工测试环境和自动化测试环境。</p> 
<ol><li> <p>jdk环境和环境变量配置</p> <p>jdk：java开发工具包，是java语言开发的基础环境，也是java开发的程序运行的环境</p> <p>环境变量：jdk的bin目录；jdk下jre的bin目录配置到环境变量path里面</p> </li><li> <p>adt工具</p> <p>adt：Android开发工具，包括Android模拟器和开发工具（adb的工具）</p> <p>解压压缩包即可使用。</p> </li><li> <p>安装夜神模拟器</p> <p>把夜神模拟器下的bin\adb.exe文件复制到adt-bundle-windows/sdk/platform-tooks下替换adb.exe</p> <p>验证环境：cmd输入adb—显示版本号1.0.36即成功</p> </li></ol> 
<h3><a id="adb_210"></a>一、adb工具的使用</h3> 
<p>adb：android debug bridge，作用是通过电脑端控制Android设备端的一个工具。</p> 
<p>通过adb，就可以在pc端方便地进行手机/模拟器的操作了</p> 
<h4><a id="1_216"></a>1、连接设备</h4> 
<p>设备可以是Android的模拟器、Android手机、Android的其他移动端设备，不能是iOS的，可以是鸿蒙的（兼容Android）</p> 
<p>连接设备：adb connect 127.0.0.1:62001，提示—already connected to 127.0.0.1:62001</p> 
<p>断开连接设备：adb disconnect 127.0.0.1:62001，提示—disconnected 127.0.0.1:62001</p> 
<h4><a id="2adbAndroid_224"></a>2、查看连接到adb的Android设备名称信息（必背）</h4> 
<p><strong><code>adb devices</code></strong>，提示—List of devices attached<br> 127.0.0.1:62001 device</p> 
<p>127.0.0.1:62001：设备名，序列名</p> 
<p>device：当前设备的状态，是正常连接状态</p> 
<h4><a id="3_233"></a>3、查看设备状态</h4> 
<p>adb get-state</p> 
<p>设备的状态有4种，device，offline，unknown，unauthorizathion</p> 
<ul><li>device：设备正常连接</li><li>offline：连接出现异常，设备无响应</li><li>unknown：没有连接设备</li><li>unauthorizathion：未授权，连接手机的时候会出现</li></ul> 
<h4><a id="4adb_244"></a>4、开启/关闭adb服务</h4> 
<p>adb start-server</p> 
<p>adb kill-server</p> 
<h4><a id="5Android_250"></a>5、获取Android日志文件</h4> 
<ul><li><strong>adb logcat -v time</strong> *<strong>:E &gt; d:\aa.log</strong></li><li>-v time：在日志文件中添加日志记录的时间戳</li><li>*:E：过滤日志等级为Error等级以上</li><li>. &gt; ：重定向符号，是将cmd命令行的数据写入到外部文件</li></ul> 
<h4><a id="6adbAndroidLinux_257"></a>6、adb挂载到Android底层Linux内核上</h4> 
<p>adb shell</p> 
<h4><a id="7app_261"></a>7、app的安装和卸载</h4> 
<p>安装的命令：从PC端通过adb的命令推送apk文件到Android设备并完成安装的过程</p> 
<p>安装的命令：adb install PC端本地的apk文件的全路径</p> 
<p>卸载的命令：adb uninstall 包名（在Android中包名就是指的进程、软件名）</p> 
<h4><a id="8_269"></a>8、文件推送（下载和上传）</h4> 
<p>将PC端本地文件上传到Android模拟器或者手机上、将模拟器、手机的文件下载到PC端。</p> 
<p>上传命令：adb push 本地文件全路径 远程存放文件的目录</p> 
<p>下载命令：adb pull 远程文件的全路径 本地存放目录（不要是根目录）</p> 
<h4><a id="9activity_277"></a>9、获取包名/activity名</h4> 
<p>1）adb shell —&gt;cd /data/data</p> 
<p>获取Android设备中安装的所有的api的包名</p> 
<p>2）获取处于焦点状态的某个app的包名</p> 
<p>需要先将app打开，并处于焦点状态</p> 
<p><strong><code>adb shell dumpsys window | findstr mCurrentFocus</code></strong></p> 
<p>3）获取Android设备安装的包名、第三方包名</p> 
<p>adb shell pm list package</p> 
<p>adb shell pm list package -3</p> 
<h4><a id="10app_295"></a>10、启动app</h4> 
<p>adb shell am start -n 包名/活动名</p> 
<h3><a id="monkey_298"></a>二、monkey工具的使用</h3> 
<h4><a id="1monkey_299"></a>1、monkey简介</h4> 
<p>monkey测试：猴子测试、随机测试，在不清晰测试技术、不懂软件系统业务的情况的随意测试</p> 
<p>monkey工具：其实是Android系统自带的一个小工具，也是可以通过adb命令启动，生成大量<strong>随机事件</strong>对Android设备的app页面进行操作，比如大量的点击事件、滑动事件、旋转事件、手势事件、按键等，最终想实现的是对app前端应用的稳定性测试（大量事件、长时间、不间断）、性能测试。</p> 
<p>主要监控的指标：</p> 
<ul><li>Exception：异常</li><li>ANR：应用程序未响应</li><li>Crash：崩溃、闪退</li></ul> 
<h4><a id="2monkey_311"></a>2、monkey工具随机测试（掌握）</h4> 
<p>参考文章：https://zhuanlan.zhihu.com/p/133858779</p> 
<p>1）查看monkey帮助文档</p> 
<p>基本的格式：adb shell monkey <strong>参数列表</strong> 随机事件数量</p> 
<p>2）-p指定可以操作的包</p> 
<ul><li>不指定-p：所有的包都可以被随机操作</li><li>指定一个-p：只能操作指定的这个包名的应用</li><li>指定多个-p：给指定的多个应用发送随机事件</li></ul> 
<p>3）-v日志详情</p> 
<p>-v：显示注入事件比例及列表等</p> 
<p>-v -v：显示更多的信息</p> 
<p>4）-s：种子数</p> 
<p>monkey是随机的，如果出现了bug，如何复现怎么搞？</p> 
<p>如果指定固定的-s值，随机事件的类型和顺序就是固定了</p> 
<p>5）–throttle 数字，单位ms</p> 
<p>主要是在事件之间增加了延时作用。</p> 
<p>下面的是事件比例调整的参数：</p> 
<p>6）触摸事件调整参数：- -pct-touch 比例值（0~100）</p> 
<p>触摸事件不单单是按键，它泛指发生在某一位置的一个down-up事件。</p> 
<p>7）手势事件：- -pct-motion 比例值</p> 
<p>手势事件是在屏幕上的滑动</p> 
<p>8）- -pct-appswitch：更改用于切换app的不同页面的事件比例</p> 
<p>9）- -pct-rotation 后面接屏幕旋转事件的比例值</p> 
<p>10）- -ignore-timeouts</p> 
<p>在monkey运行过程中如果出现超时异常，需要忽略异常，继续发送事件直到所有的事件发完</p> 
<p>11）- -ignore-crashes</p> 
<p>在monkey运行过程中如果出现闪退异常，需要忽略异常，继续发送事件直到所有的事件发完</p> 
<h3><a id="monkeyapp_363"></a>三、monkey进行app的自动化测试（自定义脚本测试）了解</h3> 
<p>移动端自动化测试的常见测试工具：</p> 
<ul><li>Appium工具：非常主流的免费的自动化工具，支持Android和iOS端的自动化</li><li>uiautomator工具：录制脚本</li><li>airtest：网易的一个自动化框架，支持python语言，支持录制和编程</li></ul> 
<h4><a id="1_371"></a>1、简介</h4> 
<ul><li>appium包括两部分： 
  <ul><li>appium客户端：appium是封装了selenium（webdriver api）方法的一个客户端软件（专有的方法），支持多种语言的，python、java、js等</li><li>appium服务器端：处理客户端请求的，转交请求给Android设备的app去执行 
    <ul><li>windows版本</li><li>Linux版本</li><li>macOS版本</li></ul> </li></ul> </li></ul> 
<h4><a id="2appium_380"></a>2、appium进行自动化测试的环境搭建</h4> 
<ol><li> <p>node.js的安装</p> <p>是appium server的支持语言环境。安装指定版本即可</p> </li><li> <p>appium的服务器端</p> 
  <ol><li> <p>配置jdk和sdk的家目录</p> </li><li> <p>设置host端口（127.0.0.1和4723）</p> </li><li> <p>启动服务</p> <p>最小化放在任务栏即可，不能关闭</p> </li></ol> </li><li> <p>appium客户端的安装</p> <p>cmd—&gt;pip install appium-python-client</p> </li><li> <p>夜神模拟器</p> </li><li> <p>jdk环境安装和环境配置</p> </li><li> <p>pycharm ide集成开发环境</p> </li></ol> 
<h4><a id="3_406"></a>3、自动化测试脚本开发</h4> 
<p>selenium+appium+jdk的版本不同可能导致执行结果不同。</p> 
<h5><a id="1_410"></a>1、老版本组合</h5> 
<p>selenium（4.9版本及以前）、appium-python-client(2.6.0及以前)、jdk8，appium-server管理员权限运行。</p> 
<pre><code class="prism language-python"><span class="token comment"># android模拟器上的计算器app的自动化脚本：1+1=2</span>
<span class="token comment"># 导包</span>
<span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>appiumby <span class="token keyword">import</span> AppiumBy
<span class="token keyword">import</span> time
<span class="token keyword">import</span> appium

<span class="token comment"># 实现逻辑代码</span>
<span class="token comment"># 先定义测试对象的参数，定义在一个字典中</span>
desired_capabilities <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment"># 定义被测对象所处的平台名是什么：Android、iOS、FirefoxOS</span>
    <span class="token string">"platformName"</span><span class="token punctuation">:</span><span class="token string">"Android"</span><span class="token punctuation">,</span>
    <span class="token comment"># 定义android系统的版本号</span>
    <span class="token string">"platformVersion"</span><span class="token punctuation">:</span><span class="token string">"5.1.1"</span><span class="token punctuation">,</span>
    <span class="token comment"># 定义你的被测对象是手机设备还是模拟器，也可以填adb devices</span>
    <span class="token string">"deviceName"</span><span class="token punctuation">:</span><span class="token string">"Android Emulator"</span><span class="token punctuation">,</span>
    <span class="token comment"># 不允许app重置数据</span>
    <span class="token string">"noReset"</span><span class="token punctuation">:</span><span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token comment"># 要操作的app的包名</span>
    <span class="token string">"appPackage"</span><span class="token punctuation">:</span><span class="token string">"com.lilysgame.calculatorjw"</span><span class="token punctuation">,</span>
    <span class="token comment"># 要操作的acitvity名</span>
    <span class="token string">"appActivity"</span><span class="token punctuation">:</span><span class="token string">"com.lilysgame.calculator.MainActivity"</span>
<span class="token punctuation">}</span>


<span class="token comment"># 创建appiumdriver对象</span>
<span class="token comment"># 将定义好des的参数发送给appium server，帮我们找到当前环境下是否有可用的设备和app并能连上设备</span>
<span class="token comment"># 到目前位置，是可以实现模拟器上的app正常启动</span>
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">r"http://127.0.0.1:4723/wd/hub"</span><span class="token punctuation">,</span>desired_capabilities<span class="token operator">=</span> desired_capabilities<span class="token punctuation">)</span>

time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment"># 对app的操作：1+1=2</span>
<span class="token comment"># 识别并点击按钮1</span>
<span class="token comment"># 使用id属性定位按钮1，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮+，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnAdd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮1，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮=，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnEqual'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 断言</span>
yq <span class="token operator">=</span> <span class="token string">"2"</span>
sj <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/et_show'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> yq<span class="token operator">==</span>sj

<span class="token comment"># 关闭appium driver对象</span>
driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2_474"></a>2、新版本组合</h5> 
<p>selenium（4.9以后）、appium-python-client(3.1.0及以后)、jdk8，appium-server管理员权限运行。</p> 
<pre><code class="prism language-python"><span class="token comment"># android模拟器上的计算器app的自动化脚本：1+1=2</span>
<span class="token comment"># 导包</span>
<span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>appiumby <span class="token keyword">import</span> AppiumBy
<span class="token keyword">import</span> time
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>options<span class="token punctuation">.</span>common <span class="token keyword">import</span> AppiumOptions
<span class="token keyword">import</span> appium

option <span class="token operator">=</span> AppiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformName"</span><span class="token punctuation">,</span><span class="token string">"Android"</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformVersion"</span><span class="token punctuation">,</span><span class="token string">"5.1.1"</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"deviceName"</span><span class="token punctuation">,</span><span class="token string">"Android Emulator"</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"noReset"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appPackage"</span><span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw"</span><span class="token punctuation">)</span>
option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appActivity"</span><span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculator.MainActivity"</span><span class="token punctuation">)</span>


<span class="token comment"># 创建appiumdriver对象</span>
<span class="token comment"># 将定义好des的参数发送给appium server，帮我们找到当前环境下是否有可用的设备和app并能连上设备</span>
<span class="token comment"># 到目前位置，是可以实现模拟器上的app正常启动</span>
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">r"http://127.0.0.1:4723/wd/hub"</span><span class="token punctuation">,</span>options<span class="token operator">=</span>option<span class="token punctuation">)</span>


<span class="token comment"># 对app的操作：1+1=2</span>
<span class="token comment"># 识别并点击按钮1</span>
<span class="token comment"># 使用id属性定位按钮1，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮+，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnAdd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮1，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnOne'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 使用id属性定位按钮=，并执行点击操作</span>
driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/btnEqual'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 断言</span>
yq <span class="token operator">=</span> <span class="token string">"2"</span>
sj <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.lilysgame.calculatorjw:id/et_show'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
<span class="token keyword">assert</span> yq<span class="token operator">==</span>sj

<span class="token comment"># 关闭appium driver对象</span>
driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="3unittest_529"></a>3、结合unittest框架实现</h5> 
<pre><code class="prism language-python"><span class="token comment"># selenium4.9以后版本AppiumOptions()\ChromeOpthons()</span>
<span class="token comment"># appium-python-client用最新的3.1版本以上了</span>
<span class="token comment"># jdk还是采用jdk8版本</span>
<span class="token comment"># unittest框架</span>

<span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver
<span class="token comment"># selenium4.9以上需要</span>
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>options<span class="token punctuation">.</span>common <span class="token keyword">import</span> AppiumOptions
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>appiumby <span class="token keyword">import</span> AppiumBy
<span class="token keyword">import</span> time
<span class="token keyword">import</span> unittest

<span class="token keyword">class</span> <span class="token class-name">calctest02</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 创建option对象</span>
        self<span class="token punctuation">.</span>option <span class="token operator">=</span> AppiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformName"</span><span class="token punctuation">,</span><span class="token string">"Android"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformVersion"</span><span class="token punctuation">,</span><span class="token string">"5.1.1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"deviceName"</span><span class="token punctuation">,</span><span class="token string">"Android Emulator"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"noReset"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appPackage"</span><span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appActivity"</span><span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculator.MainActivity"</span><span class="token punctuation">)</span>

        <span class="token comment"># 创建Appium服务器的对象</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">r"http://127.0.0.1:4723/wd/hub"</span><span class="token punctuation">,</span>options<span class="token operator">=</span>self<span class="token punctuation">.</span>option<span class="token punctuation">)</span>
        <span class="token comment"># 隐式等待</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">test_01</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">'''实现计算器应用的加法运算'''</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw:id/btnOne"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw:id/btnAdd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw:id/btnTwo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw:id/btnEqual"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

        <span class="token comment"># 断言</span>
        yq <span class="token operator">=</span> <span class="token string">"3"</span>
        sj <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.lilysgame.calculatorjw:id/et_show"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>yq<span class="token punctuation">,</span>sj<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="4pytest_585"></a>4、结合pytest框架实现</h5> 
<pre><code class="prism language-python"><span class="token comment"># selenium4.9以后版本AppiumOptions()\ChromeOpthons()</span>
<span class="token comment"># appium-python-client用最新的3.1版本以上了</span>
<span class="token comment"># jdk还是采用jdk8版本</span>
<span class="token comment"># pytest框架实现代码</span>


<span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver
<span class="token comment"># selenium4.9以上需要</span>
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>options<span class="token punctuation">.</span>common <span class="token keyword">import</span> AppiumOptions
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>appiumby <span class="token keyword">import</span> AppiumBy
<span class="token keyword">import</span> time
<span class="token keyword">import</span> pytest
<span class="token keyword">import</span> os

<span class="token keyword">class</span> <span class="token class-name">Test_qq</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setup</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 创建option对象</span>
        self<span class="token punctuation">.</span>option <span class="token operator">=</span> AppiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformName"</span><span class="token punctuation">,</span><span class="token string">"Android"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"platformVersion"</span><span class="token punctuation">,</span><span class="token string">"5.1.1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"deviceName"</span><span class="token punctuation">,</span><span class="token string">"Android Emulator"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"noReset"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appPackage"</span><span class="token punctuation">,</span><span class="token string">"com.tencent.mobileqq"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>option<span class="token punctuation">.</span>set_capability<span class="token punctuation">(</span><span class="token string">"appActivity"</span><span class="token punctuation">,</span><span class="token string">"com.tencent.mobileqq.activity.LoginActivity"</span><span class="token punctuation">)</span>

        <span class="token comment"># 创建Appium服务器的对象</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">r"http://127.0.0.1:4723/wd/hub"</span><span class="token punctuation">,</span>options<span class="token operator">=</span>self<span class="token punctuation">.</span>option<span class="token punctuation">)</span>
        <span class="token comment"># 隐式等待</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">test_01</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">'''实现计算器应用的加法运算'''</span>
        <span class="token comment"># 使用id定位，定位登录按钮</span>
        <span class="token comment"># resource-id属性对应id定位方法</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.tencent.mobileqq:id/btn_login"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

        <span class="token comment"># content-desc属性对应的是ACCESSIBILITY_ID定位方法</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ACCESSIBILITY_ID<span class="token punctuation">,</span><span class="token string">"请输入QQ号码或手机或邮箱"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"2659160000"</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token comment"># xpath定位</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>XPATH<span class="token punctuation">,</span><span class="token string">'//android.widget.EditText[@content-desc="密码 安全"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"1234567890"</span><span class="token punctuation">)</span>
        <span class="token comment"># id定位登录按钮</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">"com.tencent.mobileqq:id/login"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>


        <span class="token comment"># 断言</span>
        yq <span class="token operator">=</span> <span class="token string">"验证码"</span>
        sj <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>AppiumBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span><span class="token string">'com.tencent.mobileqq:id/ivTitleName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
        <span class="token keyword">assert</span>  yq<span class="token operator">==</span>sj

    <span class="token keyword">def</span> <span class="token function">teardown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># pytest.main(["--alluredir","./testresult"])</span>
    <span class="token comment"># os.system("allure generate ./testresult -o ./testreport --clean")</span>
    pytest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"-v"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="ADB_653"></a>五、ADB连接手机真机</h2> 
<p>每个品牌手机的设置不尽相同，</p> 
<p>1）开启手机的开发者模式（设置-系统-全部参数-miui14，连续点击3次以上，显示已经开启了开发者模式）</p> 
<p>2）进入开发者模式（设置中搜索：开发者）</p> 
<p>3）开启USB调试，会弹出一个授权框，一定要确认授权。</p> 
<p>4）PC端，就可以使用adb devices查看手机设备了</p> 
<p>5）其他的adb命令就可以使用了（不是所有的，因为有手机的权限问题）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/05c0a404ef3341883735381333d56ac0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用layui实现模拟考试页面，完成做题，得分，错题详解等功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6bc7053241d148fd7d5d0bf7f4853d7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">R语言零基础基因/数据差异分析（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>