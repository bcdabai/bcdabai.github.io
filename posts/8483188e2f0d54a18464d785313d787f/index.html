<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt-AES加密库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt-AES加密库" />
<meta property="og:description" content="Qt-AES加密库 AES在线加解密工具[1] Qt-AES加密库[2] Qt AES/DES加密算法库 软件/文件/任意长度字符串加密 试用期许可使用方法软件试用期算法对称加密和非对称加密非对称加密（Asymmetric Cryptography）实例总结加密算法 [3] Qt笔记-AES加密[4] AES 加密和解密 AES在线加解密工具 http://tool.chacuo.net/cryptaes/
[1] Qt-AES加密库 原文链接：https://blog.csdn.net/joyopirate/article/details/108746223
Qt_AES加密库源码下载
https://github.com/bricke/Qt-AES
从gitee上找到一个封装代码，https://gitee.com/BlueBuger/Qt-AES.git
将代码克隆到本地
git clone https://gitee.com/BlueBuger/Qt-AES.git 这个库支持：
密钥长度：
AES_128
AES_192
AES_256加密方式：
ECB
CBC
CFB
OFB填充方式：
ZERO
PKCS7
ISO 使用方法
http://www.lgwimonday.cn/archives/1976
/*加密步骤： * 1、设置字符串负载load、密码key、偏移量iv； * 2、字符串转字节数组； * 3、encryption.encode(input, key,iv)加密； * 4、base64编码输出； * 解密步骤： * 1、设置字符串密码key、偏移量iv、密文code； * 2、字符串转字节数组； * 3、密文base64解码； * 4、encryption.decode(code, key,iv)解密； * 5、QByteArray decode = QAESEncryption::RemovePadding(decodedText,QAESEncryption::PKCS7)移除填充； * 6、转字符串输出； */ 使用时只需要AES加密库的源代码中的这三部分，拷贝到自己的源代码文件夹，然后将 qaesencryption.h、qaesencryption.cpp加入到工程中就可以了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8483188e2f0d54a18464d785313d787f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-10T22:24:48+08:00" />
<meta property="article:modified_time" content="2023-05-10T22:24:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt-AES加密库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Qt-AES加密库</h4> 
 <ul><li><a href="#AES_4" rel="nofollow">AES在线加解密工具</a></li><li><a href="#1_QtAES_7" rel="nofollow">[1] Qt-AES加密库</a></li><li><a href="#2_Qt_AESDES___69" rel="nofollow">[2] Qt AES/DES加密算法库 软件/文件/任意长度字符串加密 试用期许可</a></li><li><ul><li><a href="#_78" rel="nofollow">使用方法</a></li><li><a href="#_93" rel="nofollow">软件试用期算法</a></li><li><a href="#_102" rel="nofollow">对称加密和非对称加密</a></li><li><a href="#Asymmetric_Cryptography_108" rel="nofollow">非对称加密（Asymmetric Cryptography）</a></li><li><a href="#_111" rel="nofollow">实例</a></li><li><a href="#_128" rel="nofollow">总结</a></li><li><a href="#_135" rel="nofollow">加密算法</a></li></ul> 
  </li><li><a href="#3_QtAES_146" rel="nofollow">[3] Qt笔记-AES加密</a></li><li><a href="#4_AES__192" rel="nofollow">[4] AES 加密和解密</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="AES_4"></a>AES在线加解密工具</h2> 
<p><a href="http://tool.chacuo.net/cryptaes/" rel="nofollow">http://tool.chacuo.net/cryptaes/</a></p> 
<h2><a id="1_QtAES_7"></a>[1] Qt-AES加密库</h2> 
<p>原文链接：<a href="https://blog.csdn.net/joyopirate/article/details/108746223">https://blog.csdn.net/joyopirate/article/details/108746223</a></p> 
<p>Qt_AES加密库源码下载<br> <a href="https://github.com/bricke/Qt-AES">https://github.com/bricke/Qt-AES</a></p> 
<p>从gitee上找到一个封装代码，<a href="https://gitee.com/BlueBuger/Qt-AES.git" rel="nofollow">https://gitee.com/BlueBuger/Qt-AES.git</a></p> 
<p>将代码克隆到本地</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> clone https://gitee.com/BlueBuger/Qt-AES.git
</code></pre> 
<p><strong>这个库支持：</strong></p> 
<ul><li><strong>密钥长度：</strong><br> AES_128<br> AES_192<br> AES_256</li><li><strong>加密方式：</strong><br> ECB<br> CBC<br> CFB<br> OFB</li><li><strong>填充方式：</strong><br> ZERO<br> PKCS7<br> ISO</li></ul> 
<p>使用方法<br> <a href="http://www.lgwimonday.cn/archives/1976" rel="nofollow">http://www.lgwimonday.cn/archives/1976</a></p> 
<pre><code class="prism language-cpp"> <span class="token comment">/*加密步骤：
     * 1、设置字符串负载load、密码key、偏移量iv；
     * 2、字符串转字节数组；
     * 3、encryption.encode(input, key,iv)加密；
     * 4、base64编码输出；
     * 解密步骤：
     * 1、设置字符串密码key、偏移量iv、密文code；
     * 2、字符串转字节数组；
     * 3、密文base64解码；
     * 4、encryption.decode(code, key,iv)解密；
     * 5、QByteArray decode = QAESEncryption::RemovePadding(decodedText,QAESEncryption::PKCS7)移除填充；
     * 6、转字符串输出；
     */</span>
</code></pre> 
<p>使用时只需要AES加密库的源代码中的这三部分，拷贝到自己的源代码文件夹，然后将 qaesencryption.h、qaesencryption.cpp加入到工程中就可以了。<br> <img src="https://images2.imgbox.com/82/71/oddzB9mw_o.png" alt="在这里插入图片描述"><br> <font color="red"><strong>经过测试，在Qt5.12.9上可用；但是在Qt5.15.2上不可用，具体原因不明，可能是Qt内部的函数发生了更改。<br> 又测试了一下，发现只要key超过24byte，在Qt5.15.2也可以用了。</strong><br> <img src="https://images2.imgbox.com/b9/51/llMvKDf8_o.png" alt="在这里插入图片描述"><br> <font color="red"><strong>报__asm__错误的</strong><br> C:\Users\Administrator\Desktop\AesTest\untitled4\DemoAES\AES\aesni\aesni-key-exp.h:14: error: C2065: “asm”: 未声明的标识符<br> 看看是不是什么地方使用了 宏定义<br> USE_INTEL_AES_IF_AVAILABLE<br> 把他去掉就行<br> <img src="https://images2.imgbox.com/ce/ca/esFXOfrD_o.png" alt="在这里插入图片描述"></font></font></p> 
<h2><a id="2_Qt_AESDES___69"></a>[2] Qt AES/DES加密算法库 软件/文件/任意长度字符串加密 试用期许可</h2> 
<p><a href="http://www.lgwimonday.cn/archives/1976" rel="nofollow">http://www.lgwimonday.cn/archives/1976</a></p> 
<p>我的需求：将任意长度的明文字符串加密后生成密文字符串，保存在文件中，并可以从文件中读取密文字符串，解密得到明文字符串。同时，具有源码，可以跨平台编译。</p> 
<p>昨天花了一天时间去做Qt的加密算法，希望通过加密许可信息完成软件的试用期功能。java自带AES/DES加密算法库，网上找到C++加密算法源码基本依赖msvc编译，无法做到跨平台，同时，网上的加密算法大多会将密文输出到控制台，或者密文转成字符串就会乱码，我试了去修改，但AES/DES算法太复杂，我只想去搞个加密功能，花时间研究这些成熟的算法有些偏离我的原初的目的了，于是继续找找合适的算法库，果然，被我找到了。</p> 
<p>Qt-AES: https://github.com/bricke/Qt-AES</p> 
<h3><a id="_78"></a>使用方法</h3> 
<pre><code class="prism language-cpp">QString <span class="token function">key</span><span class="token punctuation">(</span><span class="token string">"ddddddddd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ECB<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ZERO<span class="token punctuation">)</span><span class="token punctuation">;</span>
QByteArray hashKey <span class="token operator">=</span> <span class="token class-name">QCryptographicHash</span><span class="token double-colon punctuation">::</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> QCryptographicHash<span class="token double-colon punctuation">::</span>Md5<span class="token punctuation">)</span><span class="token punctuation">;</span>
QByteArray encodedText <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"20200302-20200909"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hashKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
QString miwen <span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLatin1</span><span class="token punctuation">(</span>encodedText<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"密文"</span><span class="token operator">&lt;&lt;</span>miwen<span class="token punctuation">;</span>
QByteArray decodedText <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>miwen<span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hashKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
QString mingwen <span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromUtf8</span><span class="token punctuation">(</span>decodedText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"明文"</span><span class="token operator">&lt;&lt;</span>mingwen<span class="token punctuation">;</span>
</code></pre> 
<p>附赠上我不知道什么时候整理的软件试用期算法等干货</p> 
<h3><a id="_93"></a>软件试用期算法</h3> 
<p>1.在系统第一次运行时，在一个隐蔽的地方（如“c :\windows\system”），建立一个用以记录系统信息的数据库文件，如date.mdb，使用一张表date，有三个字段first_time，last_time和times。其中first_time为系统第一次启动时的日期，即试用期的第一天。last_time为系统最近一次启动的时间，而times为记录系统启动的次数。</p> 
<p>2.系统每次启动会检测当前的日期同last_time做比较，如果当前的日期（如2000/09/30）在last_time（如2000/10/01）之前，说明系统的日期被推后，显示信息，不予启动系统。反之，则转入第三步。</p> 
<p>3.取出数据库中的first_time同当前的日期做减法运算，看所用的天数是否在使用期限内。如果在，则转入第四步“否则显示信息”不予启动系统</p> 
<p>4.修改数据库的last_time字段为当前的日期，显示系统已经使用的情况，正常启动系统。</p> 
<h3><a id="_102"></a>对称加密和非对称加密</h3> 
<p>对称加密（Symmetric Cryptography）<br> 形容：对称加密是最快速、最简单的一种加密方式，加密（encryption）与解密（decryption）用的是同样的密钥（secret key）。对称加密有很多种算法，由于它效率很高，所以被广泛使用在很多加密协议的核心当中。</p> 
<p>缺点：对称加密的一大缺点是密钥的管理与分配，换句话说，如何把密钥发送到需要解密你的消息的人的手里是一个问题。在发送密钥的过程中，密钥有很大的风险会被黑客们拦截。现实中通常的做法是将对称加密的密钥进行非对称加密，然后传送给需要它的人</p> 
<h3><a id="Asymmetric_Cryptography_108"></a>非对称加密（Asymmetric Cryptography）</h3> 
<p>非对称加密为数据的加密与解密提供了一个非常安全的方法，它使用了一对密钥，公钥（public key）和私钥（private key）。私钥只能由一方安全保管，不能外泄，而公钥则可以发给任何请求它的人。非对称加密使用这对密钥中的一个进行加密，而解密则需要另一个密钥。比如，你向银行请求公钥，银行将公钥发给你，你使用公钥对消息加密，那么只有私钥的持有人–银行才能对你的消息解密。与对称加密不同的是，银行不需要将私钥通过网络发送出去，因此安全性大大提高。</p> 
<h3><a id="_111"></a>实例</h3> 
<p>虽然非对称加密很安全，但是和对称加密比起来，它非常的慢，所以我们还是要用对称加密来传送消息，但对称加密所使用的密钥我们可以通过非对称加密的方式发送出去。为了解释这个过程，请看下面的例子：</p> 
<p>（1） Alice需要在银行的网站做一笔交易，她的浏览器首先生成了一个随机数作为对称密钥。</p> 
<p>（2） Alice的浏览器向银行的网站请求公钥。</p> 
<p>（3） 银行将公钥发送给Alice。</p> 
<p>（4） Alice的浏览器使用银行的公钥将自己的对称密钥加密。</p> 
<p>（5） Alice的浏览器将加密后的对称密钥发送给银行。</p> 
<p>（6） 银行使用私钥解密得到Alice浏览器的对称密钥。</p> 
<p>（7） Alice与银行可以使用对称密钥来对沟通的内容进行加密与解密了。</p> 
<h3><a id="_128"></a>总结</h3> 
<p>（1） 对称加密加密与解密使用的是同样的密钥，所以速度快，但由于需要将密钥在网络传输，所以安全性不高。</p> 
<p>（2） 非对称加密使用了一对密钥，公钥与私钥，所以安全性高，但加密与解密速度慢。</p> 
<p>（3） 解决的办法是将对称加密的密钥使用非对称加密的公钥进行加密，然后发送出去，接收方使用私钥进行解密得到对称加密的密钥，然后双方可以使用对称加密来进行沟通。</p> 
<h3><a id="_135"></a>加密算法</h3> 
<p>Android开发中，最让人头疼的莫过于对数据的保密了。谁也不希望自己辛辛苦苦做的服务器被人利用，也不希望自己的数据资源被免费泄露。另外，对于核心代码的保护，也是件头疼的事情，保护不好，显然会被盗版和破解，恶意添加或去除广告。</p> 
<p>异或加密是最容易理解最简单的加密方法了，简单到很容易破解的地步。只要能拦截到服务器发回来的数据，并看到解密后的数据，就很容易计算出密码。像这样坑爹的加密方法，当然不在考虑范围内。<br> 　　MD5和SHA加密是不可逆的，相当于指纹，常用作验证。对于数据加密的话，不做考虑。<br> 　　RSA、AES、DES加密方法都是可逆的，而且都可以使用密钥，可以用作数据加密。不过DES所能使用的密钥相对较小（56位），几年前有人采用网络联合运算的方式成功地破译了DES加密的数据，新版本的DES加密效率又太低。相对来说，AES使用的密钥更长，内部有更简洁精确的数学算法，而加密数据只需一次通过（即加密过程只需要遍历一次数据，新版的DES需要三次）。RSA公司是已广泛运用的数据加密算法和开发工具包的开发商，已经宣布支持AES。当然，三种加密方法都是很不错的，都可以选用。至于哪个最好，看了上面的介绍，估计也不言而喻了吧。<br> 　　不管使用哪种加密方法，凡是写在Java里的代码，都是不安全的。即便是混淆过，通过报错上溯法，还是可以找到的。<br> 　　所以加密算法和其他核心代码要写在底层，通过NDK来调用，这样才算安全。关键是写在底层，如何保证调用方是自己的应用，而不是被别人盗版的或是破解的，这也是一个问题。<br> 　　我们知道，签名是不可伪造的，这就为我们提供了解决的方案。我们在底层获得签名的哈希值，并用此哈希值与自己签名应有的哈希值比较，成功则允许调用核心代码，不成功则不允许调用，返回空即可。<br> 　　至于如何获得自身签名，以及RSA、AES、DES加密方法，另有文件（JNI获得签名及加密方法）详述。</p> 
<h2><a id="3_QtAES_146"></a>[3] Qt笔记-AES加密</h2> 
<p><a href="https://it1995.blog.csdn.net/article/details/121925466?spm=1001.2101.3001.6650.8&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-8-121925466-blog-115294472.235%5Ev35%5Epc_relevant_increate_t0_download_v2_base&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-8-121925466-blog-115294472.235%5Ev35%5Epc_relevant_increate_t0_download_v2_base&amp;utm_relevant_index=15" rel="nofollow">原文链接</a></p> 
<p>Qt5.5.1好像没有，用了三方老外大神的。</p> 
<p><a href="https://github.com/bricke/Qt-AES">https://github.com/bricke/Qt-AES</a></p> 
<p>下载下来后，将对应的源码拷贝到项目中就可以了。<br> <img src="https://images2.imgbox.com/5b/ce/czqzlLhq_o.png" alt="在这里插入图片描述"><br> 这里提供个示例代码：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCryptographicHash&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"QAesEncryption.h"</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    QString key <span class="token operator">=</span> <span class="token string">"0123456789012345"</span><span class="token punctuation">;</span>
 
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"key.size : "</span> <span class="token operator">&lt;&lt;</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    QString string <span class="token operator">=</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
 
    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ECB<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBABase64 <span class="token operator">=</span> enBA<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"string : "</span> <span class="token operator">&lt;&lt;</span> string<span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"enBA : "</span> <span class="token operator">&lt;&lt;</span> enBABase64<span class="token punctuation">;</span>
 
    enBA <span class="token operator">=</span> <span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>enBABase64<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray deBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>enBA<span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//移除填充</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"deBA : "</span> <span class="token operator">&lt;&lt;</span> <span class="token class-name">QAESEncryption</span><span class="token double-colon punctuation">::</span><span class="token function">RemovePadding</span><span class="token punctuation">(</span>deBA<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下：<br> <img src="https://images2.imgbox.com/8a/76/WRMsh94I_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_AES__192"></a>[4] AES 加密和解密</h2> 
<p><a href="https://blog.csdn.net/chen1231985111/article/details/125748534">https://blog.csdn.net/chen1231985111/article/details/125748534</a></p> 
<p><strong>1. 下载库</strong>：<a href="https://github.com/bricke/Qt-AES">https://github.com/bricke/Qt-AES</a></p> 
<p>下载后需要下面5个文件，把这些文件复制出来放到一个文件夹下：<br> <img src="https://images2.imgbox.com/9a/75/pEF9ygCG_o.png" alt="在这里插入图片描述"><br> <strong>2. qt 工程添加这些文件</strong><br> <img src="https://images2.imgbox.com/29/86/qIYvU2j4_o.png" alt="在这里插入图片描述"><br> <strong>3. 编写加密解密代码</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"aesni/qaesencryption.h"</span></span>

<span class="token comment">// 加密</span>
QString <span class="token class-name">Dialog_login</span><span class="token double-colon punctuation">::</span><span class="token function">AES_encryption</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ECB<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLatin1</span><span class="token punctuation">(</span>enBA<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 解密</span>
QString <span class="token class-name">Dialog_login</span><span class="token double-colon punctuation">::</span><span class="token function">AES_decryption</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ECB<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray  enBA <span class="token operator">=</span> <span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray deBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>enBA<span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLatin1</span><span class="token punctuation">(</span><span class="token class-name">QAESEncryption</span><span class="token double-colon punctuation">::</span><span class="token function">RemovePadding</span><span class="token punctuation">(</span>deBA<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>ECB模式（不需要初始IV向量）</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">testAESCrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QString key <span class="token operator">=</span> <span class="token string">"0123456789012345"</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"key.size : "</span> <span class="token operator">&lt;&lt;</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QString string <span class="token operator">=</span> <span class="token string">"odfgoerhgeajgoierjhnao;jfoerihgoeraijgoerdfdfddf"</span><span class="token punctuation">;</span>

    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>ECB<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBABase64 <span class="token operator">=</span> enBA<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"string : "</span> <span class="token operator">&lt;&lt;</span> string<span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"enBA : "</span> <span class="token operator">&lt;&lt;</span> enBABase64<span class="token punctuation">;</span>

    enBA <span class="token operator">=</span> <span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>enBABase64<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray deBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>enBA<span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//移除填充</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"deBA : "</span> <span class="token operator">&lt;&lt;</span> <span class="token class-name">QAESEncryption</span><span class="token double-colon punctuation">::</span><span class="token function">RemovePadding</span><span class="token punctuation">(</span>deBA<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><strong>CBC模式（必须要有初始IV向量）</strong></p> 
<pre><code class="prism language-cpp">QString <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">AES_encryption</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>CBC<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray iv <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"1234567812345678"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//CBC模式（必须要有初始IV向量）</span>
    <span class="token keyword">return</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLatin1</span><span class="token punctuation">(</span>enBA<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

QString <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">AES_decryption</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>CBC<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray iv <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"1234567812345678"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray  enBA <span class="token operator">=</span> <span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray deBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>enBA<span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//CBC模式（必须要有初始IV向量）</span>
    <span class="token keyword">return</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLatin1</span><span class="token punctuation">(</span><span class="token class-name">QAESEncryption</span><span class="token double-colon punctuation">::</span><span class="token function">RemovePadding</span><span class="token punctuation">(</span>deBA<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">testAESCrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QString key <span class="token operator">=</span> <span class="token string">"0123456789012345"</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"key.size : "</span> <span class="token operator">&lt;&lt;</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QString string <span class="token operator">=</span> <span class="token string">"odfgoerhgeajgoierjhnao;jfoerihgoeraijgoerdfdfddf"</span><span class="token punctuation">;</span>

    QAESEncryption <span class="token function">encryption</span><span class="token punctuation">(</span>QAESEncryption<span class="token double-colon punctuation">::</span>AES_128<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>CBC<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray iv <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"1234567812345678"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray enBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//CBC模式（必须要有初始IV向量）</span>
    QByteArray enBABase64 <span class="token operator">=</span> enBA<span class="token punctuation">.</span><span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"string : "</span> <span class="token operator">&lt;&lt;</span> string<span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"enBA : "</span> <span class="token operator">&lt;&lt;</span> enBABase64<span class="token punctuation">;</span>

    enBA <span class="token operator">=</span> <span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">fromBase64</span><span class="token punctuation">(</span>enBABase64<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QByteArray deBA <span class="token operator">=</span> encryption<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>enBA<span class="token punctuation">,</span> key<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//CBC模式（必须要有初始IV向量）</span>
    <span class="token comment">//移除填充</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"deBA : "</span> <span class="token operator">&lt;&lt;</span> <span class="token class-name">QAESEncryption</span><span class="token double-colon punctuation">::</span><span class="token function">RemovePadding</span><span class="token punctuation">(</span>deBA<span class="token punctuation">,</span> QAESEncryption<span class="token double-colon punctuation">::</span>PKCS7<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/99/42/DZ5KXwpO_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7ee54ee6e997e976bd12332a4b5d8718/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">希冀大数据spark词频统计上传文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/96bb5263da58d78bfc8a7328d572a796/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【项目展示】Unity 海洋场景渲染（Boat Attack Water、光谱渲染）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>