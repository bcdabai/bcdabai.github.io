<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32CubeMX学习笔记五 《GPIO 外部中断》 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32CubeMX学习笔记五 《GPIO 外部中断》" />
<meta property="og:description" content="前言 废话： 黑曼巴、新冠疫情反复、中印冲突国内经济民生都受到相应的影响，这个2020注定不平凡啊！不管怎样，我们都要以积极的心态去生活，“阳光怎在风雨后”。来吧学习吧！这个歌词暴露年龄了 haha。
前面我们已经初步学习了STM32CubeMX软件怎样去建立工程及配置GPIO的输入输出，到目前相信对软件的使用方法已经相对熟悉了很多，最起码知道该去做什么。本节我们继续学习用STM32CubeMX软件去配置GPIO的外部中断这个功能，下一节看看串口的配置方法。
本博主使用的STM32F7这款芯片，正好上次项目中用到了就顺手用它来复习一下STM32CubeMX的配置方法。芯片不重要方法很重要。
外部中断简介：
STM32F7 的每个 IO 都可以作为外部中断的中断输入口（除去电源和GND等特殊的IO）， STM32F7 的中断控制器支持 22 个外部中断/事件请求。每个中断设有状态位，每个中断/事件都有独立的触发和屏蔽设置。
STM32F7的 23 个外部中断为：
EXTI 线 0~15：对应外部 IO 口的输入中断。
EXTI 线 16：连接到 PVD 输出。
EXTI 线 17：连接到 RTC 闹钟事件。
EXTI 线 18：连接到 USB OTG FS 唤醒事件。
EXTI 线 19：连接到以太网唤醒事件。
EXTI 线 20：连接到 USB OTG HS(在 FS 中配置)唤醒事件。
EXTI 线 21：连接到 RTC 入侵和时间戳事件。
EXTI 线 22：连接到 RTC 唤醒事件。
EXTI 线 23：连接到 LPTIM1 异步事件。
本节通过STM32F7这款芯片外部 IO 口的中断功能，通过中断的功能，实现上一节中按键控制LED灯的亮灭。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3aa9533c2062c9f528c0aaae7ad5c2e6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-17T00:07:49+08:00" />
<meta property="article:modified_time" content="2020-06-17T00:07:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32CubeMX学习笔记五 《GPIO 外部中断》</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>前言</h3> 
<p><strong>废话：</strong> 黑曼巴、新冠疫情反复、中印冲突国内经济民生都受到相应的影响，这个2020注定不平凡啊！不管怎样，我们都要以积极的心态去生活，“阳光怎在风雨后”。来吧学习吧！这个歌词暴露年龄了 haha。</p> 
<p>前面我们已经初步学习了STM32CubeMX软件怎样去建立工程及配置GPIO的输入输出，到目前相信对软件的使用方法已经相对熟悉了很多，最起码知道该去做什么。<strong>本节我们继续学习用STM32CubeMX软件去配置GPIO的外部中断这个功能，下一节看看串口的配置方法。</strong></p> 
<p>本博主使用的STM32F7这款芯片，正好上次项目中用到了就顺手用它来复习一下STM32CubeMX的配置方法。<strong><mark>芯片不重要方法很重要。</mark></strong></p> 
<p><strong><mark>外部中断简介：</mark></strong><br> STM32F7 的每个 IO 都可以作为外部中断的中断输入口（除去电源和GND等特殊的IO）， STM32F7 的中断控制器支持 22 个外部中断/事件请求。每个中断设有状态位，每个中断/事件都有独立的触发和屏蔽设置。<br> <strong>STM32F7的 23 个外部中断为：</strong><br> EXTI 线 0~15：对应外部 IO 口的输入中断。<br> EXTI 线 16：连接到 PVD 输出。<br> EXTI 线 17：连接到 RTC 闹钟事件。<br> EXTI 线 18：连接到 USB OTG FS 唤醒事件。<br> EXTI 线 19：连接到以太网唤醒事件。<br> EXTI 线 20：连接到 USB OTG HS(在 FS 中配置)唤醒事件。<br> EXTI 线 21：连接到 RTC 入侵和时间戳事件。<br> EXTI 线 22：连接到 RTC 唤醒事件。<br> EXTI 线 23：连接到 LPTIM1 异步事件。</p> 
<p><strong>本节通过STM32F7这款芯片外部 IO 口的中断功能，通过中断的功能，实现上一节中按键控制LED灯的亮灭。</strong></p> 
<h3><a id="___22"></a>第一步 创建工程</h3> 
<ol><li> <p><strong>前面我们也已经说过了点击这两处都可以创建一个新的工程文件，在此再重复一遍，为了从没接触过这款软件，也给懒得看前面的使用方法的小伙伴提供方法。</strong><br> <img src="https://images2.imgbox.com/ac/3f/W7Ee8vf0_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>在<mark>①</mark>上面选择自己用的芯片系列，点击<mark>②</mark>中的芯片对应封装。</strong> <img src="https://images2.imgbox.com/08/8b/aluROa43_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>如下图便进入了配置界面，点击下面的芯片引脚进行选择我们需要配置的功能，我们在本节中选择GPIO的GPIO_EXTI功能。根据自己硬件支持去配置相应引脚的功能。</strong>（题外话：在工作的实际项目中，我们做软件编写的并不能天马行空的去选择引脚配置，毕竟我们不是一个人在战斗，我们也要考虑硬件工程师在设计的一些限制，对软件工程师来说，仅仅只是改个引脚的代码，如果改硬件成本等都是问题，我们是一个团队！）<br> <img src="https://images2.imgbox.com/5d/f2/VwrhvIHb_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>在选择完GPIO的功能之后，想必也知道了下一步就是去配置GPIO的初始化参数。如下图所示，点击<mark>①</mark>处，然后在<mark>②</mark>处依次点击每个引脚后，在<mark>③</mark>中根据自己的硬件支持去配置初始化参数，</strong> 特别要注意一下引脚上下拉，这对我们后来写代码有一定的影响还特别不容易发现这个问题。<br> <img src="https://images2.imgbox.com/77/a7/8CuHr5jC_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>配置完GPIO的初始化参数后，我就应该去配置IO的外部中断了，点击<mark>①</mark>处NVIC（这个记住就是中断），之后点击<mark>②</mark>处进行配置中断优先级分组，最后在<mark>③</mark>处根据自己的需求去配置外部中断的优先级。</strong><br> <img src="https://images2.imgbox.com/45/8c/H2vdRse1_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>完成GPIO的外部中断优先级配置之后点击下图<mark>①</mark>处进行配置外部高速时钟输入源配置。</strong><br> <img src="https://images2.imgbox.com/52/19/TEGRLAXf_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>配置系统的时钟树</strong>，前面已经详细讲过了。到此GPIO外部中断基本上就算配置完了，下面的步骤就是输出项目工程的配置。<br> <img src="https://images2.imgbox.com/99/5e/WyhwqYhO_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>配置项目工程的名称，编辑器，堆栈大小等。</strong><br> <img src="https://images2.imgbox.com/63/eb/VJq6EkXX_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>设置项目的固件相关参数，完成后点击右上角生成项目工程</strong><br> <img src="https://images2.imgbox.com/85/c4/IM1Sy7Kp_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>打开我们的项目工程看看gpio.c中的引脚看看STM32CubeMX是怎样自己配置的</strong>，对比一下看看有没有出入，顺便学习一下人家的规范代码书写风格。<br> <img src="https://images2.imgbox.com/c9/55/GcsFvrBP_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>我们在gpio.c中的用户编写代码区编写我们的外部按键中控制LED的闪烁</strong>（在用户区编写代码是为了下次编辑工程不会删掉我们编写的代码）<br> <img src="https://images2.imgbox.com/96/58/exBNsD3F_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>我们已经在外部中断回调函数中编写了控制逻辑，所以main.c的while循环中就不用写了。当外部按键按下，会根据我们自己配置的是上升沿还是下降沿触发外部中断，然后在中断回调函数中判断是哪个按键按下进行相应的控制。</strong><br> <img src="https://images2.imgbox.com/a0/11/gL8chJiO_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h3><a id="___48"></a>第二步 下载验证</h3> 
<p>将我们的项目编译然后下载到自己的开发板中验证程序是否满足项目要求。本博主给的项目工程代码都是亲测完成的，如果在自己的配置过程中出现问题欢迎留言，相互学习！</p> 
<p>GPIO 外部中断工程如下：<br> 百度链接：<a href="https://www.csdn.net/">https://pan.baidu.com/s/1p0Vg7WtiUjPZ6DzGHo-1zw</a><br> 提取码：q61o</p> 
<h3><a id="_55"></a>总结</h3> 
<p>本节通过GPIO的外部中断功能，实现了上一节中按键输入控制LED等闪烁。具体的操作不是很繁琐，多练习几遍，熟能生巧。再重复一遍，一定要自己亲自上手去尝试，这样的好处慢慢就会体会到了！本节就到这里。</p> 
<p><a href="https://blog.csdn.net/weixin_43123205/article/details/106878923">STM32CubeMX学习笔记六 《USART 串口通信》</a><br> <mark><em>作者：Cary.chen</em></mark></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5bef70d0416c88217d597ac6e793c18/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">面试官问：你熟悉哪些HashMap的封装扩展类？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/86139ee120ce4076d0249c73689dbd12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hive 函数大全（吐血整理）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>