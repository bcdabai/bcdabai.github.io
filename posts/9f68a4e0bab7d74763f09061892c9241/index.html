<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot&#43;Vue前后端跨域问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot&#43;Vue前后端跨域问题" />
<meta property="og:description" content="随着分布式微服务的兴起，越来越多的公司在开发web项目的时候选择前后端分离的模式开发，前后端分开部署，使得分工更加明确，彻底解放了前端。
我们知道，http请求都是无状态，现在比较流行的都是jwt的形式处理无状态的请求，在请求头上带上认证参数（token等），前后端分离有好处，也有坏处，第一次开发前后端分离项目的人，肯定会遇到前端请求跨域的问题，这个怎么处理呢？在说处理方案前，有必要说明一下为什么会跨域和什么是跨域？
一、为什么会跨域？ 出于浏览器的同源策略限制。同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。可以说Web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。同源策略会阻止一个域的 javascript 脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）
二、什么是跨域？ 当一个请求url的协议、域名、端口三者之间任意一个与当前页面url不同即为跨域
当前页面url(即浏览器地址)被请求页面url(即后端接口地址)是否跨域原因https://www.site.com/https://www.site.com/index.html否同源（协议、域名、端口号相同）https://www.site.com/http://www.site.com/index.html是协议不同（https/http）https://www.site.com/https://www.baidu.com/是主域名不同（site/baidu）https://www.site.com/https://layui.site.com/是子域名不同（www/layui）https://www.site.com:8080/https://www.site.com:8081/是端口不同（8080/8081） 三、实现跨域访问 两种方面来解决
前端解决（不是根本解决方案，打包后还是得由后端解决）后端解决代理服务器 3.1 前端代理访问 在vue的开发环境中跨域，通过代理的方式来实现，类似于nginx。
比如以下范例，访问 csdn 的测试接口api。
// config/index.js module.exports = { dev: { // Paths assetsSubDirectory: &#39;static&#39;, assetsPublicPath: &#39;/&#39;, proxyTable: { &#39;/api&#39;: { // 真实接口域名 target: &#39;https://www.csdn.net&#39;, // 开启代理 changeOrigin: true, pathRewrite: { // 重写请求地址，即将字符串^/api替换成你想要的字符串，拼接到target &#39;^/api&#39;: &#39;/api&#39; } }, &#39;/v1&#39;: { target: &#39;https://suggest-follow-api-ms.juejin.im&#39;, changeOrigin: true, pathRewrite: { &#39;^/v1&#39;: &#39;/v1&#39; } } }, }, } 代码中的请求方式
method: { ajaxFun() { var url = &#39;/api/articles?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9f68a4e0bab7d74763f09061892c9241/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-25T16:47:13+08:00" />
<meta property="article:modified_time" content="2022-03-25T16:47:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot&#43;Vue前后端跨域问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>随着分布式微服务的兴起，越来越多的公司在开发web项目的时候选择前后端分离的模式开发，前后端分开部署，使得分工更加明确，彻底解放了前端。</p> 
<p>我们知道，http请求都是无状态，现在比较流行的都是jwt的形式处理无状态的请求，在请求头上带上认证参数（token等），前后端分离有好处，也有坏处，第一次开发前后端分离项目的人，肯定会遇到前端请求<code>跨域</code>的问题，这个怎么处理呢？在说处理方案前，有必要说明一下为什么会跨域和什么是跨域？</p> 
<h3><a id="_4"></a>一、为什么会跨域？</h3> 
<p>出于浏览器的同源策略限制。<code>同源策略</code>（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。可以说Web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。同源策略会阻止一个域的 <strong>javascript</strong> 脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）</p> 
<h3><a id="_8"></a>二、什么是跨域？</h3> 
<blockquote> 
 <p>当一个请求url的协议、域名、端口三者之间任意一个与当前页面url不同即为跨域</p> 
</blockquote> 
<table><thead><tr><th align="left">当前页面url(即浏览器地址)</th><th align="left">被请求页面url(即后端接口地址)</th><th align="left">是否跨域</th><th align="left">原因</th></tr></thead><tbody><tr><td align="left">https://www.site.com/</td><td align="left">https://www.site.com/index.html</td><td align="left">否</td><td align="left">同源（协议、域名、端口号相同）</td></tr><tr><td align="left">https://www.site.com/</td><td align="left">http://www.site.com/index.html</td><td align="left">是</td><td align="left">协议不同（https/http）</td></tr><tr><td align="left">https://www.site.com/</td><td align="left">https://www.baidu.com/</td><td align="left">是</td><td align="left">主域名不同（site/baidu）</td></tr><tr><td align="left">https://www.site.com/</td><td align="left">https://layui.site.com/</td><td align="left">是</td><td align="left">子域名不同（www/layui）</td></tr><tr><td align="left">https://www.site.com:8080/</td><td align="left">https://www.site.com:8081/</td><td align="left">是</td><td align="left">端口不同（8080/8081）</td></tr></tbody></table> 
<h3><a id="_20"></a>三、实现跨域访问</h3> 
<blockquote> 
 <p>两种方面来解决</p> 
</blockquote> 
<ul><li>前端解决（不是根本解决方案，打包后还是得由后端解决）</li><li>后端解决</li><li>代理服务器</li></ul> 
<h4><a id="31__28"></a>3.1 前端代理访问</h4> 
<p>在vue的开发环境中跨域，通过代理的方式来实现，类似于nginx。</p> 
<p>比如以下范例，访问 csdn 的测试接口api。</p> 
<pre><code class="prism language-vue">// config/index.js

module.exports = {
  dev: {
    // Paths
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {
      '/api': {
        // 真实接口域名
        target: 'https://www.csdn.net',
        // 开启代理
        changeOrigin: true,
        pathRewrite: {
          // 重写请求地址，即将字符串^/api替换成你想要的字符串，拼接到target
          '^/api': '/api'
        }
      },
      '/v1': {
        target: 'https://suggest-follow-api-ms.juejin.im',
        changeOrigin: true,
        pathRewrite: {
          '^/v1': '/v1'
        }
      }
    },
  },

}
</code></pre> 
<p>代码中的请求方式</p> 
<pre><code class="prism language-vue">method: {
  ajaxFun() {
    var url = '/api/articles?type=more&amp;category=home&amp;shown_offset=1524276761019196&amp;first_view=false';
    this.$axios.get(url)
      .then(res =&gt; {
        this.articles = res.data.articles;
        console.log(res);
      })
  }
}
</code></pre> 
<p>通过 <code>npm run dev</code> 之后，访问完这个接口，在控制台中显示的地址是 <code>http://localhost:8080/api/articles?type=more&amp;category=home&amp;shown_offset=1524276761019196&amp;first_view=false</code><br> 相当于 <code>https://www.csdn.net/api/articles?type=more&amp;category=home&amp;shown_offset=1524276761019196&amp;first_view=false</code></p> 
<p><mark>这就实现了开发环境下的跨域请求。但我们打包上线：用 <strong>npm run build</strong> 打包成dist文件。发到线上后，还是得再次解决跨域。</mark></p> 
<h4><a id="32_CORS_86"></a>3.2 后端CORS实现跨域访问</h4> 
<blockquote> 
 <p>授权方式</p> 
</blockquote> 
<ul><li>方式1：注册新的CorsFilter</li><li>方式2：重写WebMvcConfigurer</li><li>方式3：使用注解（@CrossOrigin）</li><li>方式4：手工设置响应头（HttpServletResponse ）</li></ul> 
<blockquote> 
 <p>注：CorsFilter / WebMvcConfigurer / @CrossOrigin 需要SpringMVC 4.2 以上的版本才支持，对应SpringBoot 1.3 版本以上都支持这些CORS特性。不过，使用SpringMVC4.2 以下版本的小伙伴也不用慌，直接使用方式4通过手工添加响应头来授权CORS跨域访问也是可以的。附：在SpringBoot 1.2.8 + SpringMVC 4.1.9 亲测成功。</p> 
</blockquote> 
<blockquote> 
 <p>注：方式1和方式2属于全局CORS配置，方式3和方式4属于局部CORS配置。如果使用了局部跨域是会覆盖全局跨域的规则，所以可以通过@CrossOrigin注解来进行细粒度更高的跨域资源控制。</p> 
</blockquote> 
<h5><a id="321_CorsFilter_99"></a>3.2.1 注册CorsFilter（全局跨域）</h5> 
<blockquote> 
 <p><strong>Spring</strong>框架还提供了一个 <strong>CorsFilter</strong> 。在这种情况下，您可以按如下方式在 <strong>SpringBoot</strong> 应用程序中声明过滤器。</p> 
</blockquote> 
<p>在任意配置类，返回一个新的<strong>CorsFilter Bean</strong>，并添加映射路径和具体的CORS配置信息。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalCorsConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//1.添加CORS配置信息</span>
        <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//是否发送Cookie信息</span>
          config<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域(请求方式)</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//放行哪些原始域(头部信息)</span>
          config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//暴露哪些头部信息（因为跨域访问默认不能获取全部头部信息）</span>
          config<span class="token punctuation">.</span><span class="token function">addExposedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.添加映射路径</span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> configSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configSource<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.返回新的CorsFilter.</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>configSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="322_WebMvcConfigurer_133"></a>3.2.2 重写WebMvcConfigurer（全局跨域）</h5> 
<blockquote> 
 <p>类似于使用过滤器，可以使用Spring MVC声明，并与细粒度配置结合使用。缺省情况下，允许所有源和方法。</p> 
</blockquote> 
<p>在任意配置类，返回一个新的<strong>WebMvcConfigurer Bean</strong>，并重写其提供的跨域请求处理的接口，目的是添加映射路径和具体的CORS配置信息。</p> 
<p>为整个应用程序启用 CORS 非常简单，例如：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">{<!-- --></span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果您使用的是 <strong>Spring Boot</strong>，建议只声明 <strong>Bean</strong> 如下：<code>WebMvcConfigurer</code></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalCorsConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">corsConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token comment">//重写父类提供的跨域请求处理的接口</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//添加映射路径</span>
                registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>您可以轻松更改任何属性，也可以仅将此 CORS 配置应用于特定的路径模式：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token comment">//重写父类提供的跨域请求处理的接口</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//添加映射路径</span>
    registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>
            <span class="token comment">//放行哪些原始域</span>
            <span class="token comment">//.allowedOrigins("*")</span>
            <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"http://domain2.com"</span><span class="token punctuation">)</span>
            <span class="token comment">//是否发送Cookie信息</span>
            <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token comment">//放行哪些原始域(请求方式)</span>
            <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"PUT"</span><span class="token punctuation">,</span> <span class="token string">"DELETE"</span><span class="token punctuation">)</span>
            <span class="token comment">//放行哪些原始域(头部信息)</span>
            <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>
            <span class="token comment">//暴露哪些头部信息（因为跨域访问默认不能获取全部头部信息）</span>
            <span class="token punctuation">.</span><span class="token function">exposedHeaders</span><span class="token punctuation">(</span><span class="token string">"Header1"</span><span class="token punctuation">,</span> <span class="token string">"Header2"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="323_CrossOrigin_195"></a>3.2.3 使用注解@CrossOrigin（局部跨域）</h5> 
<p>在方法上（<strong>@RequestMapping</strong>）使用注解 <strong>@CrossOrigin</strong> ：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/account"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountController</span> <span class="token punctuation">{<!-- --></span>    
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span> 
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>或者在控制器（<strong>@RestController</strong>）上使用注解 <strong>@CrossOrigin</strong> ：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/account"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">"http://xx-domain.com"</span><span class="token punctuation">,</span> maxAge <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="324___226"></a>3.2.4 手工设置响应头（局部跨域 ）</h5> 
<p>使用 <strong>HttpServletResponse</strong> 对象添加响应头（<strong>Access-Control-Allow-Origin</strong>）来授权原始域，这里 <strong>Origin</strong> 的值也可以设置为"*" ，表示全部放行。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/account"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountController</span> <span class="token punctuation">{<!-- --></span>    
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="34_nginx__243"></a>3.4 通过nginx 代理访问</h4> 
<p>设置nginx配置文件：</p> 
<pre><code class="prism language-ini">location / {
    root   /dist/;
    index  index.html;
}

location /api/ {
    proxy_pass http://xxx.xxx.xxx.xxx:8090/;
    client_max_body_size 100m; 
    client_body_buffer_size 512k;
    proxy_send_timeout 300;
    proxy_read_timeout 300;
    proxy_connect_timeout 300;			
    proxy_buffer_size 64k;
    proxy_buffers 16 64k; 
    proxy_busy_buffers_size 64k;
    proxy_temp_file_write_size 64k;			
    proxy_set_header Host $host:$server_port;  
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header REMOTE-HOST $remote_addr;			
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept";
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
}
</code></pre> 
<h3><a id="_276"></a>四、源码和文档</h3> 
<p>源码地址：<a href="https://github.com/yizhiwazi/springboot-socks/tree/master/springboot-cross-orgin">SpringBoot-Cross-Orgin </a></p> 
<p>专题阅读：<a href="https://www.jianshu.com/p/964370d9374e" rel="nofollow">《SpringBoot 布道系列》</a></p> 
<p>官方文档：<a href="https://www.w3.org/TR/cors/" rel="nofollow">W3C规范-CORS</a></p> 
<p>Spring传统文档：<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-cors" rel="nofollow">SpringMVC-CORS 使用手册</a></p> 
<p>推荐阅读：<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" rel="nofollow">跨域资源共享 CORS 详解 - 阮一峰</a></p> 
<blockquote> 
 <p>扩展</p> 
</blockquote> 
<p>参考博客：<a href="https://www.jianshu.com/p/477e7eaa6c2f" rel="nofollow">SpringBoot 实现前后端分离的跨域访问（CORS）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c7df9de7ebf80de54bc2e4410594c6f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vulhub靶场搭建及漏洞复现教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10ac086b54cb757314f16c7557446a92/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java中的@PostConstruct注解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>