<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>初创公司的项目网络搭建：web服务，samba服务，NFS服务，DNS服务的混合搭建实验 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="初创公司的项目网络搭建：web服务，samba服务，NFS服务，DNS服务的混合搭建实验" />
<meta property="og:description" content="目录 一. 公司业务的需求二.公司网络拓扑图三. 网络的构建与服务的搭建3.1 首先打通所有网络，让网络数据能联通3.11 1.对于三层交换机的设置3.12 出口路由的配置3.13 运营商路由器R2的配置 3.2 公司内部的web服务器的搭建3.3 samba,NFS服务器搭建，绑定vm1网卡3.31 搭建NFS存储共享服务3.32 搭建samba存储数据管理服务 3.4 外网web服务器，搭建apache3.5 外网的DNS解析服务器配置3.51 DNS的基本配置文件修改3.52 各个网站服务器做域名解析映射3.53 DNS 域名解析的测试内网和外网进行验证 一. 公司业务的需求 1.搭建HTTP服务，让外网服务器能访问出去公网IP
2.NFS服务创建挂在目录/opt/www 和公司web服务器/var/www/htm1/关联挂载
3.Samba服务器创建不同团队的共享目录，主账户分别是t1,t2 对应的共享目录是/opt/t1和/opt/t2,团队1下面有一个子账户tom，对t1目录只能读，不能写。团队下面有一个子账户jack 对t2目录只能读，不能写
4.要求团队1和团队2的成员能访问公司外网服务（测试用samba服务器来访问）
5.DNS服务 202.0.0.100 www.51xit.top
203.0.0.03 www.kgc.com
二.公司网络拓扑图 三. 网络的构建与服务的搭建 3.1 首先打通所有网络，让网络数据能联通 3.11 1.对于三层交换机的设置 1）交换机接口的配置
interface GigabitEthernet0/0/1 port link-type access port default vlan 10 interface GigabitEthernet0/0/2 port link-type access port default vlan 20 #interface GigabitEthernet0/0/3 port link-type access port default vlan 30 #interface GigabitEthernet0/0/4 port link-type access port default vlan 50 #interface GigabitEthernet0/0/5 port link-type access port default vlan 30 2）各个vlan配置网关地址" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/93d890d429469e2a594bc0f9af663ceb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-10T01:05:55+08:00" />
<meta property="article:modified_time" content="2020-08-10T01:05:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">初创公司的项目网络搭建：web服务，samba服务，NFS服务，DNS服务的混合搭建实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#__2" rel="nofollow">一. 公司业务的需求</a></li><li><a href="#_10" rel="nofollow">二.公司网络拓扑图</a></li><li><a href="#__13" rel="nofollow">三. 网络的构建与服务的搭建</a></li><li><ul><li><a href="#31__15" rel="nofollow">3.1 首先打通所有网络，让网络数据能联通</a></li><li><ul><li><a href="#311_1_16" rel="nofollow">3.11 1.对于三层交换机的设置</a></li><li><a href="#312__52" rel="nofollow">3.12 出口路由的配置</a></li><li><a href="#313_R2_91" rel="nofollow">3.13 运营商路由器R2的配置</a></li></ul> 
   </li><li><a href="#32_web_105" rel="nofollow">3.2 公司内部的web服务器的搭建</a></li><li><a href="#33_sambaNFSvm1_126" rel="nofollow">3.3 samba,NFS服务器搭建，绑定vm1网卡</a></li><li><ul><li><a href="#331_NFS_127" rel="nofollow">3.31 搭建NFS存储共享服务</a></li><li><a href="#332_samba_171" rel="nofollow">3.32 搭建samba存储数据管理服务</a></li></ul> 
   </li><li><a href="#34_webapache_250" rel="nofollow">3.4 外网web服务器，搭建apache</a></li><li><a href="#35_DNS_256" rel="nofollow">3.5 外网的DNS解析服务器配置</a></li><li><ul><li><a href="#351_DNS_257" rel="nofollow">3.51 DNS的基本配置文件修改</a></li><li><a href="#352__325" rel="nofollow">3.52 各个网站服务器做域名解析映射</a></li><li><a href="#353_DNS__334" rel="nofollow">3.53 DNS 域名解析的测试内网和外网进行验证</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="__2"></a>一. 公司业务的需求</h2> 
<p>1.搭建HTTP服务，让外网服务器能访问出去公网IP<br> 2.NFS服务创建挂在目录/opt/www 和公司web服务器/var/www/htm1/关联挂载<br> 3.Samba服务器创建不同团队的共享目录，主账户分别是t1,t2 对应的共享目录是/opt/t1和/opt/t2,团队1下面有一个子账户tom，对t1目录只能读，不能写。团队下面有一个子账户jack 对t2目录只能读，不能写<br> 4.要求团队1和团队2的成员能访问公司外网服务（测试用samba服务器来访问）<br> 5.DNS服务 202.0.0.100 www.51xit.top<br> 203.0.0.03 www.kgc.com</p> 
<h2><a id="_10"></a>二.公司网络拓扑图</h2> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/91/9c/xrcKOrkY_o.png"></p> 
<h2><a id="__13"></a>三. 网络的构建与服务的搭建</h2> 
<h3><a id="31__15"></a>3.1 首先打通所有网络，让网络数据能联通</h3> 
<h4><a id="311_1_16"></a>3.11 1.对于三层交换机的设置</h4> 
<p>1）交换机接口的配置</p> 
<pre><code class="prism language-bash">interface GigabitEthernet0/0/1 
port link-type access 
port default vlan 10
interface GigabitEthernet0/0/2 
port link-type access 
port default vlan 20
<span class="token comment">#interface GigabitEthernet0/0/3 port link-type access </span>
port default vlan 30
<span class="token comment">#interface GigabitEthernet0/0/4 port link-type access </span>
port default vlan 50
<span class="token comment">#interface GigabitEthernet0/0/5 port link-type access </span>
port default vlan 30</code></pre> 
<p>2）各个vlan配置网关地址</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#vlanif 10 192.168.10.1/24</span>
<span class="token macro property">#vlanif 20 192.168.20.1/24</span>
<span class="token macro property">#vlanif 30 192.168.30.1/24</span>
<span class="token macro property">#vlanif 50 11.0.0.2/30(互联地址)</span>
interface Vlanif10 ip address <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
<span class="token macro property">#interface Vlanif20 ip address 192.168.20.1 255.255.255.0</span>
<span class="token macro property">#interface Vlanif30 ip address 192.168.30.1 255.255.255.0</span>
<span class="token macro property">#interface Vlanif50 ip address 11.0.0.2 255.255.255.252</span></code></pre> 
<p>3)交换机向上的方向配置一个默认路由，向下由于是直连网段，不需要配置路由</p> 
<pre><code class="prism language-c">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">11.0</span><span class="token number">.0</span><span class="token number">.1</span></code></pre> 
<h4><a id="312__52"></a>3.12 出口路由的配置</h4> 
<p>1）端口IP地址配置</p> 
<pre><code class="prism language-bash">interface GigabitEthernet0/0/0 
ip address 11.0.0.1 255.255.255.252 <span class="token comment">#interface GigabitEthernet0/0/1 </span>
ip address 201.0.0.1 255.255.255.252 </code></pre> 
<p>2）路由设置</p> 
<p>向下内网的静态路由设置</p> 
<pre><code class="prism language-cpp">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">11.0</span><span class="token number">.0</span><span class="token number">.2</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">11.0</span><span class="token number">.0</span><span class="token number">.2</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">11.0</span><span class="token number">.0</span><span class="token number">.2</span></code></pre> 
<p>向外的公网拥有膨大的IP地址，需设置一个默认路由</p> 
<pre><code class="prism language-cpp">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">201.0</span><span class="token number">.0</span><span class="token number">.2</span></code></pre> 
<p>3）nat easy-ip设置，公司内网只用一个公网IP地址</p> 
<pre><code class="prism language-cpp">acl <span class="token number">3000</span>   
rule  permit ip source <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>  
rule  permit ip source <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>  
rule  permit ip source <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> 
<span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> 
nat outbound <span class="token number">3000</span></code></pre> 
<p>4）nat server设置，公司WEB服务器要被公网访问，将以公网IP地址映射出去</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
nat server protocol tcp global <span class="token number">202.0</span><span class="token number">.0</span><span class="token number">.100</span> www inside <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.100</span> www</code></pre> 
<h4><a id="313_R2_91"></a>3.13 运营商路由器R2的配置</h4> 
<p>1)路由器的端口IP地址配置</p> 
<pre><code class="prism language-cpp">interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> 
ip address <span class="token number">201.0</span><span class="token number">.0</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.252</span> 
<span class="token macro property">#interface GigabitEthernet0/0/2 </span>
ip address <span class="token number">203.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span></code></pre> 
<p>2）配置一个nat server 的回程路由</p> 
<pre><code class="prism language-bash">ip route-static 202.0.0.100 255.255.255.255 201.0.0.1</code></pre> 
<h3><a id="32_web_105"></a>3.2 公司内部的web服务器的搭建</h3> 
<p>关闭防火墙</p> 
<pre><code class="prism language-bash">systemctl stop firewalld
systemctl disable firewalld</code></pre> 
<p>关闭核心防护</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/selinux/config	SELINUX<span class="token operator">=</span>disabled</code></pre> 
<p>安装apache网站浏览器</p> 
<pre><code class="prism language-bash">yum -y <span class="token function">install</span> httpd
systemctl restart httpd
systemctl <span class="token function">enable</span> httpd</code></pre> 
<h3><a id="33_sambaNFSvm1_126"></a>3.3 samba,NFS服务器搭建，绑定vm1网卡</h3> 
<h4><a id="331_NFS_127"></a>3.31 搭建NFS存储共享服务</h4> 
<p>服务器端</p> 
<pre><code class="prism language-bash"><span class="token comment">#yum -y install nfs</span>
<span class="token comment">#yum -y install rpcbind</span>
<span class="token comment">#mkdir /opt/www</span>
<span class="token comment">#vi /etc/exports</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
/opt/www        192.168.30.100<span class="token punctuation">(</span>rw,sync,no_root_squash<span class="token punctuation">)</span>
<span class="token comment">#systemctl restart nfs</span>
<span class="token comment">#systemctl restart rpcbind</span>
<span class="token comment">#showmount -e </span>
Export list <span class="token keyword">for</span> localhost.localdomain:
/opt/www 192.168.30.100</code></pre> 
<p>客户机端（公司内网web服务器）</p> 
<pre><code class="prism language-bash"><span class="token comment">#yum -y install nfs</span>
<span class="token comment">#yum -y install rpcbind</span>
<span class="token comment">#showmount -e 192.168.30.10</span>
<span class="token comment">#mount 192.168.30.10:/opt/www /var/www/htm1</span>
<span class="token comment">#vi /etc/fstab</span>
192.168.30.10:/opt/www /var/www/htm1 nfs defaults,_netdev 0 0
<span class="token comment">#systemctl restart nfs</span>
<span class="token comment">#systemctl restart rpcbind</span></code></pre> 
<p>测试nfs服务搭建成功服务器端</p> 
<pre><code class="prism language-bash"><span class="token comment">#cd /opt/www</span>
<span class="token comment">#touch 1.txt</span></code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/85/1e/IqzeWaao_o.png"><br> 客户端</p> 
<pre><code class="prism language-bash"><span class="token comment">#cd /var/www/htm1</span>
<span class="token comment">#vi 1.txt</span></code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/29/35/ic3DHzdM_o.png"></p> 
<blockquote> 
 <p>实现了服务端与客户端之间的文件共享，除上诉操作外，在客户端对已关联的目录编辑也会同步到服务器端的关联目录</p> 
</blockquote> 
<h4><a id="332_samba_171"></a>3.32 搭建samba存储数据管理服务</h4> 
<blockquote> 
 <p>Samba服务器创建不同团队的共享目录，主账户分别是t1,t2对应的共享目录是/opt/t1和/opt/t2,团队1下面有一个子账户tom，对t1目录只能读，不能写。团队下面有一个子账户jack对t2目录只能读，不能写</p> 
</blockquote> 
<p>#yum -y install samba<br> #rpm -qa | grep samba</p> 
<blockquote> 
 <p>samba-common-tools-4.8.3-4.el7.x86_64<br> samba-client-libs-4.8.3-4.el7.x86_64 samba-common-4.8.3-4.el7.noarch<br> samba-client-4.8.3-4.el7.x86_64 samba-4.8.3-4.el7.x86_64<br> samba-common-libs-4.8.3-4.el7.x86_64 samba-libs-4.8.3-4.el7.x86_64</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token comment">#cd /etc/samba/</span>
<span class="token comment">#grep -v "^#" smb.conf &gt; smb.conf1</span>
<span class="token comment">#grep -v "^$" smb.conf1 &gt; smb.conf2</span>
<span class="token comment">#grep -v "^;" smb.conf2 &gt; smb.conf3</span>
<span class="token comment">#mv smb.conf smb.conf2020.8.7bak</span>
<span class="token comment">#mv smb.conf3 smb.conf</span></code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#mkdir /opt/t1</span>
<span class="token comment">#mkdir /opt/t2</span>
<span class="token comment">#useradd t1</span>
<span class="token comment">#useradd t2</span>
<span class="token comment">#useradd tom</span>
<span class="token comment">#useradd jack</span></code></pre> 
<pre><code class="prism language-cpp"><span class="token macro property">#vi /etc/samba/smb.conf</span></code></pre> 
<p>[t1]<br> path = /opt/t1<br> public = no<br> valid users = t1,tom<br> write list = t1<br> [t2]<br> path = /opt/t2<br> public = no<br> valid users = t2,jack<br> write list = t2</p> 
<pre><code class="prism language-cpp"><span class="token macro property">#pdbedit -a -u t1</span>
<span class="token macro property">#pdbedit -a -u tom</span>
<span class="token macro property">#pdbedit -a -u jack</span>
<span class="token macro property">#systemctl restart smb</span>
<span class="token macro property">#systemctl enable smb</span>
<span class="token macro property">#chown t1:tom /opt/t1</span>
<span class="token macro property">#chown t2:jack /opt/t2</span>
<span class="token macro property">#chmod 750 /opt/t1 /opt/t2</span></code></pre> 
<p>对samba服务的测试<br> 客户端测试（公司web服务器）</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/c6/6d/Qp5W5CT9_o.png"></p> 
<blockquote> 
 <p>可以看到t1 t2的目录</p> 
</blockquote> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/8d/15/bD5EQPoz_o.png"></p> 
<blockquote> 
 <p>利用t1账号登陆进t1目录</p> 
</blockquote> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/05/35/tRBXjNBb_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/e5/da/iCdhk4VS_o.png"></p> 
<blockquote> 
 <p>利用jack登陆t2目录</p> 
</blockquote> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/08/5a/XTsM3rpP_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/04/95/y2y3Etor_o.png"></p> 
<h3><a id="34_webapache_250"></a>3.4 外网web服务器，搭建apache</h3> 
<pre><code class="prism language-cpp"><span class="token macro property">#yum -y -install httpd</span></code></pre> 
<h3><a id="35_DNS_256"></a>3.5 外网的DNS解析服务器配置</h3> 
<h4><a id="351_DNS_257"></a>3.51 DNS的基本配置文件修改</h4> 
<pre><code class="prism language-cpp"><span class="token macro property">#yum -y install named</span>
<span class="token macro property">#vi /etc/named.conf</span></code></pre> 
<pre><code class="prism language-cpp">options <span class="token punctuation">{<!-- --></span>        listen<span class="token operator">-</span>on port <span class="token number">53</span> <span class="token punctuation">{<!-- --></span> <span class="token number">203.0</span><span class="token number">.0</span><span class="token number">.2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        listen<span class="token operator">-</span>on<span class="token operator">-</span>v6 port <span class="token number">53</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">::</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
       directory       <span class="token string">"/var/named"</span><span class="token punctuation">;</span>       
       dump<span class="token operator">-</span>file       <span class="token string">"/var/named/data/cache_dump.db"</span><span class="token punctuation">;</span>        
       statistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named_stats.txt"</span><span class="token punctuation">;</span>        
       memstatistics<span class="token operator">-</span>file <span class="token string">"/var/named/data/named_mem_stats.txt"</span><span class="token punctuation">;</span>                         recursing<span class="token operator">-</span>file  <span class="token string">"/var/named/data/named.recursing"</span><span class="token punctuation">;</span>        
       secroots<span class="token operator">-</span>file   <span class="token string">"/var/named/data/named.secroots"</span><span class="token punctuation">;</span>        
       allow<span class="token operator">-</span>query     <span class="token punctuation">{<!-- --></span> any<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#vi /etc/named.rfc1912.zones</span></code></pre> 
<pre><code class="prism language-bash">zone <span class="token string">"51xit.top"</span> IN <span class="token punctuation">{<!-- --></span>        
               <span class="token function">type</span> master<span class="token punctuation">;</span>        
               <span class="token function">file</span> <span class="token string">"51xit.top.zone"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span> 
               
zone <span class="token string">"kgc.com"</span> IN <span class="token punctuation">{<!-- --></span>        
              <span class="token function">type</span> master<span class="token punctuation">;</span>        
              <span class="token function">file</span> <span class="token string">"kgc.com.zone"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#vi /var/named/kgc.com</span></code></pre> 
<pre><code class="prism language-bash">TTL 1D@       IN SOA kgc.com. admin.kgc.com. <span class="token punctuation">(</span>
                                0       <span class="token punctuation">;</span> serial                                
                                1D      <span class="token punctuation">;</span> refresh                                
                                1H      <span class="token punctuation">;</span> retry                                
                                1W      <span class="token punctuation">;</span> expire                                
                                3H <span class="token punctuation">)</span>    <span class="token punctuation">;</span> minimum        
                                NS        @       
                                 A           203.0.0.3
www IN  A           203.0.0.3
<span class="token function">ftp</span>    IN       A   203.0.0.4
mail IN CNAME   www</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#vi /var/named/51xit.top</span></code></pre> 
<pre><code class="prism language-bash">VTTL 1D@       IN SOA kgc.com. admin.kgc.com. <span class="token punctuation">(</span>
                                0       <span class="token punctuation">;</span> serial                                
                                1D      <span class="token punctuation">;</span> refresh                                
                                1H      <span class="token punctuation">;</span> retry                                
                                1W      <span class="token punctuation">;</span> expire                                
                                3H <span class="token punctuation">)</span>    <span class="token punctuation">;</span> minimum        

 NS        @        A           203.0.0.3
 www IN  A           203.0.0.3
 <span class="token function">ftp</span>    IN       A           203.0.0.4
 mail IN CNAME   www</code></pre> 
<h4><a id="352__325"></a>3.52 各个网站服务器做域名解析映射</h4> 
<pre><code class="prism language-bash"><span class="token comment">#vi /etc/resolv.conf</span></code></pre> 
<blockquote> 
 <p>#Generated by NetworkManager<br> nameserver 203.0.0.2</p> 
</blockquote> 
<h4><a id="353_DNS__334"></a>3.53 DNS 域名解析的测试内网和外网进行验证</h4> 
<p>1）在内网的一个IP=192.168.30.10的服务器上进行测试<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/e2/8b/RyMwGFDe_o.png"></p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/c8/af/V9qgw5lx_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/f1/f5/qIh4Ee8U_o.png"></p> 
<p>2）在外网的选择一个IP=20.0.0.2的服务器上进行测试</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/f8/d5/lTbfJPbQ_o.png"></p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/28/6f/DDvXQRTW_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/3a/1d/LBZSP0gI_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6c47706ccc3414e197fd48b73068135/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2020-08-09</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3dbdfb671e59e58ba604170b930f3623/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA 启动找不到或无法加载主类两种解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>