<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL】多表查询策略（多表联查&amp;子查询） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MySQL】多表查询策略（多表联查&amp;子查询）" />
<meta property="og:description" content="目录
一、MySQL多表查询
二、准备工作
1.运行环境
2.创建公司表
3.创建员工表
三、多表查询
（一）多表联查—同时查询多张表
1.联结
2.左连接
3.右连接
4.内连接
（二）子查询
1.SELECT子查询
2.WHERE子查询
3.FROM子查询
总结
一、MySQL多表查询 MySQL语句学习的难点和重点就在于多表查询，同时MySQL也有诸多方法供大家选择，不论是多表联查（联结表、左连接、右连接……）还是子查询（SELECT子查询、WHERE子查询、FROM子查询），掌握一种方法达到目的即可，当然其他方法也需要理解，本文将阐述完整的多表查询方法。
首先分享下学习链接，大家可以在看完本文后选择以下链接巩固学习成果，我相信如果都给掌握的话，MySQL语句中80%的问题都将迎刃而解！！
视频学习链接：SQL学习之道_哔哩哔哩_bilibili
在线编程链接：SQL必知必会__牛客在线编程
二、准备工作 1.运行环境 本文在MySQL在线运行网址操作，模拟MySQL运行，若大家有条件也可在MySQL或navicat中操作运行
2.创建公司表 以下是创建数据表、新增数据等基础操作，这些语句都是固定的，这是创建的第一个表（company表），id为主键。
#创建数据库，可忽略，一般用不到 CREATE DATABASE test; use test; #创建数据表company CREATE TABLE company ( id INT PRIMARY KEY, name VARCHAR(255) NOT NULL ); #新增数据 INSERT INTO company VALUES(1,&#39;IBM&#39;); INSERT INTO company VALUES(2,&#39;HP&#39;); #单表查询数据 SELECT * FROM company; 运行结果：
3.创建员工表 创建第二个表（menber表），增删改查基础操作都在下边了，希望能帮助大家加深对于基础操作的理解，id为主键。
#创建数据表menber CREATE TABLE menber( id INT PRIMARY KEY, name VARCHAR(255) NOT NULL, sal DOUBLE(10,2), comid INT ); #新增数据 INSERT INTO menber VALUES(101,&#39;小李&#39;,3000,1); INSERT INTO menber VALUES(102,&#39;小王&#39;,4000,1); INSERT INTO menber VALUES(103,&#39;小刘&#39;,5000,2); INSERT INTO menber VALUES(104,&#39;小孙&#39;,5000,2); INSERT INTO menber VALUES(105,&#39;小明&#39;,7000,3); #删除数据 DELETE FROM menber WHERE comid = 3; #修改数据 UPDATE menber SET sal=6000 WHERE id=104; #单表查询数据 SELECT * FROM menber; 运行结果：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bc8809ff4d1a236441d5aa222887e967/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-23T18:44:49+08:00" />
<meta property="article:modified_time" content="2023-03-23T18:44:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL】多表查询策略（多表联查&amp;子查询）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81MySQL%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81MySQL%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2" rel="nofollow">一、MySQL多表查询</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow">二、准备工作</a></p> 
<p id="1.%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83-toc" style="margin-left:80px;"><a href="#1.%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83" rel="nofollow">1.运行环境</a></p> 
<p id="2.%E5%88%9B%E5%BB%BA%E5%85%AC%E5%8F%B8%E8%A1%A8-toc" style="margin-left:80px;"><a href="#2.%E5%88%9B%E5%BB%BA%E5%85%AC%E5%8F%B8%E8%A1%A8" rel="nofollow">2.创建公司表</a></p> 
<p id="3.%E5%88%9B%E5%BB%BA%E5%91%98%E5%B7%A5%E8%A1%A8-toc" style="margin-left:80px;"><a href="#3.%E5%88%9B%E5%BB%BA%E5%91%98%E5%B7%A5%E8%A1%A8" rel="nofollow">3.创建员工表</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2" rel="nofollow">三、多表查询</a></p> 
<p id="%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5%E2%80%94%E5%90%8C%E6%97%B6%E6%9F%A5%E8%AF%A2%E5%A4%9A%E5%BC%A0%E8%A1%A8-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5%E2%80%94%E5%90%8C%E6%97%B6%E6%9F%A5%E8%AF%A2%E5%A4%9A%E5%BC%A0%E8%A1%A8" rel="nofollow">（一）多表联查—同时查询多张表</a></p> 
<p id="1.%E8%81%94%E7%BB%93-toc" style="margin-left:80px;"><a href="#1.%E8%81%94%E7%BB%93" rel="nofollow">1.联结</a></p> 
<p id="2.%E5%B7%A6%E8%BF%9E%E6%8E%A5-toc" style="margin-left:80px;"><a href="#2.%E5%B7%A6%E8%BF%9E%E6%8E%A5" rel="nofollow">2.左连接</a></p> 
<p id="3.%E5%8F%B3%E8%BF%9E%E6%8E%A5-toc" style="margin-left:80px;"><a href="#3.%E5%8F%B3%E8%BF%9E%E6%8E%A5" rel="nofollow">3.右连接</a></p> 
<p id="4.%E5%8F%B3%E8%BF%9E%E6%8E%A5-toc" style="margin-left:80px;"><a href="#4.%E5%8F%B3%E8%BF%9E%E6%8E%A5" rel="nofollow">4.内连接</a></p> 
<p id="%EF%BC%88%E4%BA%8C%EF%BC%89%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">（二）子查询</a></p> 
<p id="1.SELECT%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:80px;"><a href="#1.SELECT%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">1.SELECT子查询</a></p> 
<p id="2.WHERE%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:80px;"><a href="#2.WHERE%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">2.WHERE子查询</a></p> 
<p id="3.FROM%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:80px;"><a href="#3.FROM%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">3.FROM子查询</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81MySQL%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><strong>一、MySQL多表查询</strong></h2> 
<p style="text-align:justify;">MySQL语句学习的难点和重点就在于多表查询，同时MySQL也有诸多方法供大家选择，不论是多表联查（联结表、左连接、右连接……）还是子查询（SELECT子查询、WHERE子查询、FROM子查询），掌握一种方法达到目的即可，当然其他方法也需要理解，本文将阐述完整的多表查询方法。</p> 
<p>首先分享下学习链接，大家可以在看完本文后选择以下链接巩固学习成果，我相信如果都给掌握的话，MySQL语句中80%的问题都将迎刃而解！！</p> 
<p>视频学习链接：<a href="https://www.bilibili.com/video/BV1Na411r7Z1/?spm_id_from=333.788" rel="nofollow" title="SQL学习之道_哔哩哔哩_bilibili">SQL学习之道_哔哩哔哩_bilibili</a></p> 
<p>在线编程链接：<a href="https://www.nowcoder.com/exam/oj/ta?tpId=298" rel="nofollow" title="SQL必知必会__牛客在线编程">SQL必知必会__牛客在线编程</a></p> 
<h2><a id="_19"></a></h2> 
<h2 id="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">二、准备工作</h2> 
<h4 id="1.%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><a id="1_20"></a>1.运行环境</h4> 
<p>本文在<a href="http://mysql.jsrun.net/" rel="nofollow" title="MySQL在线运行">MySQL在线运行</a>网址操作，模拟MySQL运行，若大家有条件也可在MySQL或navicat中操作运行</p> 
<p><img alt="" height="315" src="https://images2.imgbox.com/d9/04/orIJxUsE_o.png" width="649"></p> 
<h4 id="2.%E5%88%9B%E5%BB%BA%E5%85%AC%E5%8F%B8%E8%A1%A8"><a id="2_34"></a>2.创建公司表</h4> 
<p style="text-align:justify;">以下是创建数据表、新增数据等基础操作，这些语句都是固定的，这是创建的第一个表（company表），id为主键。</p> 
<pre><code class="language-sql">#创建数据库，可忽略，一般用不到
CREATE DATABASE test;
use test;
#创建数据表company
CREATE TABLE company (
	id INT PRIMARY KEY,
	name VARCHAR(255) NOT NULL
);
#新增数据
INSERT INTO company VALUES(1,'IBM');
INSERT INTO company VALUES(2,'HP');
#单表查询数据
SELECT * FROM company;</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="288" src="https://images2.imgbox.com/69/e9/OqoEeFqS_o.png" width="663"></p> 
<h4 id="3.%E5%88%9B%E5%BB%BA%E5%91%98%E5%B7%A5%E8%A1%A8">3.创建员工表</h4> 
<p>创建第二个表（menber表），增删改查基础操作都在下边了，希望能帮助大家加深对于基础操作的理解，id为主键。</p> 
<pre><code class="language-sql">#创建数据表menber
CREATE TABLE menber(
    id INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    sal DOUBLE(10,2),
    comid INT
);
#新增数据
INSERT INTO menber VALUES(101,'小李',3000,1);
INSERT INTO menber VALUES(102,'小王',4000,1);
INSERT INTO menber VALUES(103,'小刘',5000,2);
INSERT INTO menber VALUES(104,'小孙',5000,2);
INSERT INTO menber VALUES(105,'小明',7000,3);
#删除数据
DELETE FROM menber WHERE comid = 3;
#修改数据
UPDATE menber SET sal=6000 WHERE id=104;
#单表查询数据
SELECT * FROM menber;</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="336" src="https://images2.imgbox.com/d1/22/x4KmzFkx_o.png" width="666"></p> 
<p></p> 
<p><img alt="" height="174" src="https://images2.imgbox.com/50/ab/QKFzMxEi_o.png" width="645"></p> 
<p> 注：company表和menber表中的id、name不是一回事，id和conmid是公共列</p> 
<h2></h2> 
<h2 id="%E4%B8%89%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2">三、多表查询</h2> 
<p style="text-align:justify;">创建完公司表和员工表后就具备进行多表查询的条件了，主要分为多表联查和子查询两部分，也是本文的重点。</p> 
<h3 id="%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5%E2%80%94%E5%90%8C%E6%97%B6%E6%9F%A5%E8%AF%A2%E5%A4%9A%E5%BC%A0%E8%A1%A8">（一）多表联查—同时查询多张表</h3> 
<p>本人常用的是联结，左右连接、内连接一般都能解决问题，只需要添加WHERE条件即可。</p> 
<h4 id="1.%E8%81%94%E7%BB%93">1.联结</h4> 
<p>若查询n张表，必须查询指定n-1个公共列的条件</p> 
<pre><code class="language-sql">SELECT c.name 公司名, m.name 员工名,m.sal, company公司信息
FROM company c, menber m
WHERE c.id = m.comid;
</code></pre> 
<p><strong>应用：查询IBM的员工信息</strong></p> 
<pre><code class="language-sql">SELECT m.*
FROM company c, menber m
WHERE c.id = m.comid AND c.name = ‘IBM’
</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/82/2b/mhGd2fxD_o.png" width="598"></p> 
<p><span style="color:#fe2c24;">拓展：笛卡尔积（A表有m条记录，B表有n条记录，结果m*n条）</span></p> 
<pre><code class="language-sql">SELECT * FROM company, menber</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="193" src="https://images2.imgbox.com/c9/25/q1GWLaih_o.png" width="324"></p> 
<h4 id="2.%E5%B7%A6%E8%BF%9E%E6%8E%A5">2.左连接</h4> 
<p>左表是主表、左表中满足条件的记录会查询出来、左表中【不满足】条件的也会查出来，运行结果也以左表为主。</p> 
<pre><code class="language-sql">SELECT *
FROM company c LEFT JOIN menber m ON c.id = m.comid</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="252" src="https://images2.imgbox.com/74/c3/BaWMeq1B_o.png" width="624"></p> 
<h4 id="3.%E5%8F%B3%E8%BF%9E%E6%8E%A5">3.右连接</h4> 
<p>右表是主表、右表中所有的记录会查询出来，运行结果以右表为主。</p> 
<pre><code class="language-sql">SELECT *
FROM menber m RIGHT JOIN company c ON c.id = m.comid</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="257" src="https://images2.imgbox.com/d5/09/Kp9bHpMP_o.png" width="636"></p> 
<h4 id="4.%E5%8F%B3%E8%BF%9E%E6%8E%A5">4.内连接</h4> 
<p>查询的是满足条件的记录</p> 
<pre><code class="language-sql">SELECT *
FROM menber m INNER JOIN company c ON c.id = m.comid</code></pre> 
<p><strong>运行结果：</strong><br><img alt="" height="261" src="https://images2.imgbox.com/32/2f/xQoGAtER_o.png" width="624"></p> 
<p></p> 
<h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89%E5%AD%90%E6%9F%A5%E8%AF%A2">（二）子查询</h3> 
<p>把一个查询的结果当作另一个查询的条件，可以说是一步步解决问题，较符合逻辑。</p> 
<p><strong>应用：查询小刘的公司名  #HP</strong></p> 
<h4 id="1.SELECT%E5%AD%90%E6%9F%A5%E8%AF%A2">1.SELECT子查询</h4> 
<pre><code class="language-sql">SELECT  (SELECT name from company WHERE id =conid)
FROM menber 
WHERE name = '小刘'
</code></pre> 
<p>逻辑：先取menber表这一列包含小刘的数据，再对该行数据进行联结</p> 
<p><img alt="" height="153" src="https://images2.imgbox.com/9c/37/Xm4Nlggn_o.png" width="274"><img alt="" height="96" src="https://images2.imgbox.com/3b/83/13qOysu6_o.png" width="210"></p> 
<p> 左：menber表，右：company表</p> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/9e/d1/4hozNHeP_o.png" width="646"></p> 
<h4 id="2.WHERE%E5%AD%90%E6%9F%A5%E8%AF%A2">2.WHERE子查询</h4> 
<pre><code class="language-sql">SELECT name 
FROM company
WHERE id = (SELECT comid FROM menber WHERE name = '小刘')
</code></pre> 
<p>WHERE子查询相比前一个逻辑更为简单，先在menber表中找出小刘的comid，由于menber表的comid和company的id是公共列，可直接用于company表的查询。</p> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/4e/dc/CNKBAqRm_o.png" width="648"></p> 
<h4 id="3.FROM%E5%AD%90%E6%9F%A5%E8%AF%A2"><strong>3.FROM子查询</strong></h4> 
<p>用于3张表以上的连接查询较多，有A、B、C三张表，先查询A和B两张表、再用查询结果和c表连接查询，select子查询和where子查询是把子查询的结果当成【数据】，<span style="color:#fe2c24;">from子查询是把查询结果当成【表】</span></p> 
<pre><code class="language-sql">SELECT c.name  
FROM (SELECT * FROM menber WHERE name = '小刘') t1,company c
WHERE t1.comid = c.id
</code></pre> 
<p><strong>运行结果：</strong></p> 
<p><img alt="" height="187" src="https://images2.imgbox.com/58/a4/nwUeWey9_o.png" width="665"></p> 
<p></p> 
<hr> 
<p></p> 
<h2 id="%E6%80%BB%E7%BB%93"><a id="_45"></a>总结</h2> 
<p>大家如果有疑问都可以评论提出，有不足之处请大家批评指正，希望能多结识这方面的朋友，共同学习、共同进步。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/087204bbb202f8704cdbe7e43859f529/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在Vue3项目中使用 Echarts 绘制股票图表的分享（一）：引入Echarts</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5a474745b0aff950ad339cb82ddd550/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">模型复杂度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>