<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GPIO（通用输入/输出端口） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GPIO（通用输入/输出端口）" />
<meta property="og:description" content="参考STM32G0x0系列
目录
1、GPIO介绍
2、GPIO的基础知识
2.1 GPIO的定义和作用
3、GPIO的工作原理
3.1 GPIO寄存器
3.2 GPIO的工作模式
3.2.1 输入模式 3.2.2 输出模式
推挽输出：两个MOS管都使用
开漏输出：PMOS不使用
4、GPIO常见应用场景
5、GPIO点灯
5.1 查看原理图
5.2 代码实现
6、GPIO总结
1、GPIO介绍 GPIO（General Purpose Input/Output）是通用输入输出引脚的缩写，是嵌入式系统中非常重要的基本硬件资源之一。GPIO是一种非常灵活的接口，可以实现数字输入、数字输出、模拟输入、模拟输出等多种功能。
在嵌入式系统中，GPIO通常在芯片引脚和外部电路之间起到了一个桥梁的作用。通过GPIO，我们可以将内部的信号或数据与外部的设备或传感器进行连接和交互。例如，可以通过GPIO读取按键的状态、控制LED的亮灭，或者连接各种传感器读取温度、湿度、光强等物理量。
因为GPIO非常通用，所以几乎所有的微控制器都具有GPIO功能。在开发嵌入式系统时，我们通常会使用GPIO来实现各种基本的输入输出功能，因此对GPIO的掌握是非常必要的。
在实际应用中，GPIO的使用非常灵活，并且需要根据具体的场景和需求进行配置和操作。掌握GPIO的基本概念、寄存器结构和操作方法，是开发嵌入式系统的重要基础之一。
2、GPIO的基础知识 2.1 GPIO的定义和作用 GPIO（General Purpose Input/Output）是一种通用的输入输出接口，用于连接微控制器、嵌入式系统或其他电子设备与外部世界进行交互。它通过引脚（Pin）来提供数字输入和输出功能。
数字输入：GPIO可以读取外部设备或传感器的数字信号。例如，读取按键状态、检测外部开关状态、接收来自其他设备的数据等。
数字输出：GPIO可以控制外部设备或执行器的状态。例如，控制LED灯的亮灭、驱动蜂鸣器发声、控制继电器开关等。
中断功能：通过将GPIO配置为中断模式，可以在外部事件触发时产生中断请求，以实现实时响应或处理特定事件。
模拟输入/输出：某些GPIO引脚支持模拟信号输入输出，可以读取或输出模拟量信号，如读取光强传感器的光照值、控制电机的转速等。
多功能引脚：有些GPIO引脚具有多种功能，可以通过配置选择不同的工作模式，如串行通信接口（SPI、I2C、UART）、定时器输入/输出等。
3、GPIO的工作原理 3.1 GPIO寄存器 当我们说到操作一个外设或者是完成某一个功能时，其实都是在操作寄存器，那么到底什么是寄存器呢？简单说：寄存器就是一个内存单元，一个具有特殊功能的内存单元。比方说，这一块地址的功能是管理输出能力的，那么我们为了方便，就给它起一个名字，叫做输出寄存器。目前可能还不是很好理解，下面我会给出详解。先看一张图片：
图3-1 存储器映像图
简单说说这张图，最左边的八大块，每一块都有一个地址范围，大小都是512M，那么加起来刚好是4G，也就是2^32，这刚好就是STM32刚好是32位，类比，你一个8位的单片机，内存可能就是1G。上面提到过，为了方便管理以及使用，将每一个内存单元划分为不同的模块，每个模块的功能各有不同。举个例子：一栋楼，每一层楼都是一个部门，每个部门负责的任务不一样，那么为了方便，出现研发部，市场部……寄存器划分同样如此。
那么到底是怎么规定的呢？或者说到底怎么就说实质是在操作寄存器呢？看看下面两张图，需要结合起来看。
图3-2 寄存器配置图
图3-3 引脚视图
你可以想象一下，一个32位的小盒子，管理0~15，16个部门，那么也就是说两个盒子控制一个部门。配置1号盒子，也就是图中划出的部分，我将二三位配置为00，代表我的一号引脚就是输出模式，这样说应该很清楚吧？对于如何将某两位配置为00，你可以参考以下的过程
图3-4 配置过程图 在不改变以前每一位数的情况下（3向左移位2再取反），将二三位都改成了0，代表一号引脚的模式就是输出模式。上述还给给出了一个叫偏移地址的东西，那么这么理解呢？
图3-5 结构体地址偏移图 定义一个结构体，那么这个结构体会在内存单元中存储下来，比如这个结构体存储在0x22222222这个内存单元 ，那么对于b成员的首地址，它就是0x22222226，里面的0x04就是偏移地址，偏移这个结构体的地址，也就是相对于这个结构体而言。最后在过一下“操作外设就是操作寄存器这句话”。倘若你有一个结构体，
图3-6 寄存器访问图
比如我定义一个结构体，名字就叫GPIOA，当你GPIOA-&gt;MODER &amp;= (~(3&lt;&lt;2))的时候，是不是很熟悉？这个不就是在操作寄存器吗？你结合结构体想一想，我通过宏定义取到一个地址，这个地址就是寄存器的地址，直接给寄存器赋值，你使用的时候就是通过一个结构体成员来赋值，其实是一样的，只是为什么使用结构体，这个结构体怎么来的，你真的知道吗？分析一下，为什么我使用无符号32位int，为什么我使用32位？以及*号是否可以去掉？我就说一句：16号引脚，每个引脚占两位，刚好就是32位，为什么取地址，因为我要的就是某个寄存器的地址，不加*号怎么能是地址呢？不还是一个数字吗？
结合以上的图，多看两遍，我相信你对这句话一定会有自己独特的认识。
3.2 GPIO的工作模式 图3-7 GPIO引脚输入/输出" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/906157690e8ffa0bfb206513b8423139/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-29T22:14:52+08:00" />
<meta property="article:modified_time" content="2023-09-29T22:14:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GPIO（通用输入/输出端口）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>                                                                                                                      <u>  参考STM32G0x0系列</u></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81GPIO%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#1%E3%80%81GPIO%E4%BB%8B%E7%BB%8D" rel="nofollow">1、GPIO介绍</a></p> 
<p id="2%E3%80%81GPIO%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-toc" style="margin-left:0px;"><a href="#2%E3%80%81GPIO%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" rel="nofollow">2、GPIO的基础知识</a></p> 
<p id="2.1%20GPIO%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%9C%E7%94%A8-toc" style="margin-left:40px;"><a href="#2.1%20GPIO%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%9C%E7%94%A8" rel="nofollow">2.1 GPIO的定义和作用</a></p> 
<p id="3%E3%80%81GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:0px;"><a href="#3%E3%80%81GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">3、GPIO的工作原理</a></p> 
<p id="3.1%20GPIO%E5%AF%84%E5%AD%98%E5%99%A8-toc" style="margin-left:40px;"><a href="#3.1%20GPIO%E5%AF%84%E5%AD%98%E5%99%A8" rel="nofollow">3.1 GPIO寄存器</a></p> 
<p id="3.2%20GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#3.2%20GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" rel="nofollow">3.2 GPIO的工作模式</a></p> 
<p id="3.2.1%20%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F%C2%A0-toc" style="margin-left:80px;"><a href="#3.2.1%20%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F%C2%A0" rel="nofollow">3.2.1 输入模式 </a></p> 
<p id="3.2.2%20%E8%BE%93%E5%87%BA%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#3.2.2%20%E8%BE%93%E5%87%BA%E6%A8%A1%E5%BC%8F" rel="nofollow">3.2.2 输出模式</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%EF%BC%9A%E4%B8%A4%E4%B8%AAMOS%E7%AE%A1%E9%83%BD%E4%BD%BF%E7%94%A8-toc" style="margin-left:120px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%EF%BC%9A%E4%B8%A4%E4%B8%AAMOS%E7%AE%A1%E9%83%BD%E4%BD%BF%E7%94%A8" rel="nofollow">        推挽输出：两个MOS管都使用</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA%EF%BC%9APMOS%E4%B8%8D%E4%BD%BF%E7%94%A8-toc" style="margin-left:120px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA%EF%BC%9APMOS%E4%B8%8D%E4%BD%BF%E7%94%A8" rel="nofollow">        开漏输出：PMOS不使用</a></p> 
<p id="4%E3%80%81GPIO%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#4%E3%80%81GPIO%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">4、GPIO常见应用场景</a></p> 
<p id="5%E3%80%81GPIO%E7%82%B9%E7%81%AF-toc" style="margin-left:0px;"><a href="#5%E3%80%81GPIO%E7%82%B9%E7%81%AF" rel="nofollow">5、GPIO点灯</a></p> 
<p id="5.1%20%E6%9F%A5%E7%9C%8B%E5%8E%9F%E7%90%86%E5%9B%BE-toc" style="margin-left:40px;"><a href="#5.1%20%E6%9F%A5%E7%9C%8B%E5%8E%9F%E7%90%86%E5%9B%BE" rel="nofollow">5.1 查看原理图</a></p> 
<p id="5.2%20%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-toc" style="margin-left:40px;"><a href="#5.2%20%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" rel="nofollow">5.2 代码实现</a></p> 
<p id="6%E3%80%81GPIO%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#6%E3%80%81GPIO%E6%80%BB%E7%BB%93" rel="nofollow">6、GPIO总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1%E3%80%81GPIO%E4%BB%8B%E7%BB%8D">1、GPIO介绍</h2> 
<p>        GPIO（General Purpose Input/Output）是通用输入输出引脚的缩写，是嵌入式系统中非常重要的基本硬件资源之一。GPIO是一种非常灵活的接口，可以实现数字输入、数字输出、模拟输入、模拟输出等多种功能。</p> 
<p>        在嵌入式系统中，GPIO通常在芯片引脚和外部电路之间起到了一个桥梁的作用。通过GPIO，我们可以将内部的信号或数据与外部的设备或传感器进行连接和交互。例如，可以通过GPIO读取按键的状态、控制LED的亮灭，或者连接各种传感器读取温度、湿度、光强等物理量。</p> 
<p>        因为GPIO非常通用，所以几乎所有的微控制器都具有GPIO功能。在开发嵌入式系统时，我们通常会使用GPIO来实现各种基本的输入输出功能，因此对GPIO的掌握是非常必要的。</p> 
<p>        在实际应用中，GPIO的使用非常灵活，并且需要根据具体的场景和需求进行配置和操作。掌握GPIO的基本概念、寄存器结构和操作方法，是开发嵌入式系统的重要基础之一。</p> 
<p></p> 
<h2 id="2%E3%80%81GPIO%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">2、GPIO的基础知识</h2> 
<h3 id="2.1%20GPIO%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%9C%E7%94%A8">2.1 GPIO的定义和作用</h3> 
<p>        GPIO（General Purpose Input/Output）是一种通用的输入输出接口，用于连接微控制器、嵌入式系统或其他电子设备与外部世界进行交互。它通过引脚（Pin）来提供数字输入和输出功能。</p> 
<ol><li> <p>数字输入：GPIO可以读取外部设备或传感器的数字信号。例如，读取按键状态、检测外部开关状态、接收来自其他设备的数据等。</p> </li><li> <p>数字输出：GPIO可以控制外部设备或执行器的状态。例如，控制LED灯的亮灭、驱动蜂鸣器发声、控制继电器开关等。</p> </li><li> <p>中断功能：通过将GPIO配置为中断模式，可以在外部事件触发时产生中断请求，以实现实时响应或处理特定事件。</p> </li><li> <p>模拟输入/输出：某些GPIO引脚支持模拟信号输入输出，可以读取或输出模拟量信号，如读取光强传感器的光照值、控制电机的转速等。</p> </li><li> <p>多功能引脚：有些GPIO引脚具有多种功能，可以通过配置选择不同的工作模式，如串行通信接口（SPI、I2C、UART）、定时器输入/输出等。</p> </li></ol> 
<p></p> 
<h2 id="3%E3%80%81GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3、GPIO的工作原理</h2> 
<h3 id="3.1%20GPIO%E5%AF%84%E5%AD%98%E5%99%A8">3.1 GPIO寄存器</h3> 
<p>        当我们说到操作一个外设或者是完成某一个功能时，其实都是在操作寄存器，那么到底什么是<strong>寄存器呢</strong>？简单说：寄存器就是一个内存单元，一个具有特殊功能的内存单元。比方说，这一块地址的功能是管理输出能力的，那么我们为了方便，就给它起一个名字，叫做输出寄存器。目前可能还不是很好理解，下面我会给出详解。先看一张图片：<img alt="" height="890" src="https://images2.imgbox.com/9e/f8/609jnCTR_o.png" width="634"></p> 
<p>                                                        图3-1 存储器映像图</p> 
<p></p> 
<p>         简单说说这张图，最左边的八大块，每一块都有一个地址范围，大小都是512M，那么加起来刚好是4G，也就是2^32，这刚好就是STM32刚好是32位，类比，你一个8位的单片机，内存可能就是1G。上面提到过，为了方便管理以及使用，将每一个内存单元划分为不同的模块，每个模块的功能各有不同。举个例子：一栋楼，每一层楼都是一个部门，每个部门负责的任务不一样，那么为了方便，出现研发部，市场部……寄存器划分同样如此。</p> 
<p>        那么到底是怎么规定的呢？或者说到底怎么就说实质是在操作寄存器呢？看看下面两张图，需要结合起来看。</p> 
<p><img alt="" height="393" src="https://images2.imgbox.com/48/ee/TrBwnkZ6_o.png" width="796"></p> 
<p>                                                       图3-2 寄存器配置图</p> 
<p> <img alt="" height="435" src="https://images2.imgbox.com/e9/99/ggzuD91r_o.png" width="992"></p> 
<p style="text-align:justify;">                                                         图3-3 引脚视图</p> 
<p></p> 
<p>        你可以想象一下，一个32位的小盒子，管理0~15，16个部门，那么也就是说两个盒子控制一个部门。配置1号盒子，也就是图中划出的部分，我将二三位配置为00，代表我的一号引脚就是输出模式，这样说应该很清楚吧？对于如何将某两位配置为00，你可以参考以下的过程</p> 
<p><img alt="" height="301" src="https://images2.imgbox.com/a2/1d/lz35vgF1_o.png" width="719"></p> 
<p style="text-align:justify;">                                                        图3-4 配置过程图 </p> 
<p></p> 
<p>       在不改变以前每一位数的情况下（3向左移位2再取反），将二三位都改成了0，代表一号引脚的模式就是输出模式。上述还给给出了一个叫偏移地址的东西，那么这么理解呢？</p> 
<p><img alt="" height="657" src="https://images2.imgbox.com/76/50/QcQD3Ex4_o.png" width="836"></p> 
<p style="text-align:justify;">                                                  图3-5 结构体地址偏移图 </p> 
<p>        定义一个结构体，那么这个结构体会在内存单元中存储下来，比如这个结构体存储在0x22222222这个内存单元 ，那么对于b成员的首地址，它就是0x22222226，里面的0x04就是偏移地址，偏移这个结构体的地址，也就是相对于这个结构体而言。最后在过一下“操作外设就是操作寄存器这句话”。倘若你有一个结构体，</p> 
<p><img alt="" height="583" src="https://images2.imgbox.com/5c/cd/wOyQ0jPK_o.png" width="1200"></p> 
<p style="text-align:justify;">                                                        图3-6 寄存器访问图</p> 
<p>        比如我定义一个结构体，名字就叫GPIOA，当你GPIOA-&gt;MODER &amp;= (~(3&lt;&lt;2))的时候，是不是很熟悉？这个不就是在操作寄存器吗？你结合结构体想一想，我通过宏定义取到一个地址，这个地址就是寄存器的地址，直接给寄存器赋值，你使用的时候就是通过一个结构体成员来赋值，其实是一样的，只是为什么使用结构体，这个结构体怎么来的，你真的知道吗？分析一下，为什么我使用无符号32位int，为什么我使用32位？以及*号是否可以去掉？我就说一句：16号引脚，每个引脚占两位，刚好就是32位，为什么取地址，因为我要的就是某个寄存器的地址，不加*号怎么能是地址呢？不还是一个数字吗？</p> 
<p>        结合以上的图，多看两遍，我相信你对这句话一定会有自己独特的认识。</p> 
<p></p> 
<h3 id="3.2%20GPIO%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F">3.2 GPIO的工作模式</h3> 
<p><img alt="" height="322" src="https://images2.imgbox.com/4f/ce/kMKlowke_o.png" width="799"></p> 
<p>                                                        图3-7 GPIO引脚输入/输出</p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/bd/06/9w0YYUap_o.png" width="801">                                                 图3-8 GPIO功能描述</p> 
<p></p> 
<h4 id="3.2.1%20%E8%BE%93%E5%85%A5%E6%A8%A1%E5%BC%8F%C2%A0">3.2.1 输入模式 </h4> 
<ul><li id="VktlQ"><strong>浮空输入</strong></li></ul> 
<p id="ua9f3c8e3">        <strong>IO端口 - 施密特触发器 - 输入数据寄存器 - 读（信号路径）</strong></p> 
<p>        由于浮空输入一般多用于外部按键输入，浮空输入状态下，IO的电平状态是不确定的，完全由外部输入决定，如果在该引脚悬空的情况下，读取该端口的电平是不确定的，易受干扰。</p> 
<p id="ub0476da3">        优点：这一种输入模式的电平会完全取决于外部电路而与内部电路无关。</p> 
<p id="u2bf9ae17">        缺点：在没有外部电路接入的时候，IO脚浮空会使得电平不确定</p> 
<p id="u249e56e4">        应用：该模式是STM32复位之后的默认模式，一般用作对开关按键的读取或用于标准的通讯协议，比如IIC、USART的等。</p> 
<ul><li id="FINpC"><strong>上拉输入</strong></li></ul> 
<p id="u5b61e96b">       <strong> IO端口 - 上拉电阻 - 施密特触发器 - 输入数据寄存器 - 读（信号路径）</strong></p> 
<p><strong>        </strong>输入的电平不会因上下浮动而导致输入信号不稳定，当外部没有信号输入时，上拉电阻会将输入信号钳在高电平，此时引脚始终读到高电平信号。</p> 
<ul><li><strong>下拉输入</strong></li></ul> 
<p id="u1e26f08f">       <strong> IO端口 - 下拉电阻 - 施密特触发器 - 输入数据寄存器 - 读（信号路径）</strong></p> 
<p>        输入的电平不会因上下浮动而导致输入信号不稳定，当外部没有信号输入时，下拉电阻会将输入信号钳在低电平，此时引脚始终读到低电平信号。</p> 
<ul><li><strong>模拟输入</strong></li></ul> 
<p id="uaea154f1">     <strong>   IO端口 - 片上外设模块(电压信号)（信号路径）</strong></p> 
<p id="u22b272eb">        信号进入后不经过上拉电阻或者下拉电阻，关闭施密特触发器，经由另一线路把电压信号传送到片上外设模块。 所以可以理解为模拟输入的信号是未经处理的信号，是原汁原味的信号。</p> 
<p id="u4f0e75af"><strong>        </strong>应用：当 GPIO 引脚用于 ADC 采集电压的输入通道时，则需要选择“模拟输入”功能，因为经过施密特触发器后信号只有 0、1 两种状态，所以 ADC 外设要采集到原始的模拟信号，信号源输入必须在施密特触发器之前。</p> 
<h4 id="3.2.2%20%E8%BE%93%E5%87%BA%E6%A8%A1%E5%BC%8F">3.2.2 输出模式</h4> 
<h5 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%EF%BC%9A%E4%B8%A4%E4%B8%AAMOS%E7%AE%A1%E9%83%BD%E4%BD%BF%E7%94%A8">      <strong>  推挽输出：两个MOS管都使用</strong></h5> 
<p id="ub523a055">        输出数据寄存器'0'——&gt;输出控制‘1’——&gt;NMOS激活</p> 
<p><img alt="" height="660" src="https://images2.imgbox.com/08/5a/o7qmWYnu_o.png" width="1139"></p> 
<p>                                                图3-9 推挽输出低电平 </p> 
<p></p> 
<p id="ub65a9fab">        输出数据寄存器'1'——&gt;输出控制‘0’——&gt;PMOS激活</p> 
<p><img alt="" height="674" src="https://images2.imgbox.com/ca/e3/1mE7TNHq_o.png" width="1157"></p> 
<p style="text-align:justify;">                                                        图3-10 推挽输出高电平 </p> 
<p></p> 
<p id="u709738dd">        输出寄存器上的’0’激活N-MOS，而输出寄存器上的’1’将激活P-MOS。具备输出高低电平的能力。推挽输出就是可以需要利用两个不同的MOS管来实现输出。推挽输出模式下（P-MOS管+N-MOS管），通过设置位设置/清除寄存器或者输出数据寄存器的值，途经P-MOS管和N-MOS管，最终输出到I/O端口。</p> 
<p></p> 
<h5 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA%EF%BC%9APMOS%E4%B8%8D%E4%BD%BF%E7%94%A8">       <strong> 开漏输出：PMOS不使用</strong></h5> 
<p id="u883f5e16">        输出寄存器上的的’0’激活 N-MOS，输出寄存器上的’1’将端口置于高阻状态 (P-MOS 从不被激活 )。</p> 
<p><img alt="" height="493" src="https://images2.imgbox.com/03/f1/Eq2oqblX_o.png" width="1200"></p> 
<p>                                                        图3-11 开漏输出低电平</p> 
<p></p> 
<p><img alt="" height="726" src="https://images2.imgbox.com/12/ef/GPASuKaR_o.png" width="1200"></p> 
<p id="u437b5f25">                                                   图3-12 开漏外接上拉电阻 </p> 
<p></p> 
<p>        开漏输出无法真正输出高电平，即高电平时没有驱动能力，需要借助外部上拉电阻完成对外驱动。可以利用改变上拉电源的电压来适应所需，进而提高外部电路的驱动能力。MOS管的漏极等于啥也没接，处于一个开路状态，所以这个模式称之为<strong>开漏模式</strong> 。</p> 
<p>        优势1：虽然我们可以看到开漏输出是没有办法在内部输出一个高电平，但是这一个看似是缺点。其实实际上是一种优点。当给一个低电平的时候，MOS管没有导通，此时电压不确定导致无法输出高电平，但是一旦我们在外部增加一个上拉，那么这一个缺点就会被有效避免。并且，因为是我们自己设计一个上拉，这个上拉的电压是由我们自己确定，这样我们就可以根据外部电路需要多少V的高电平来给这一个上拉的电压，可以更好的适应更多情况。</p> 
<p>        优势2：开漏输出的实质其实就是一个OD门（OD：漏极输出(Open Drain)）。而在数电中，OD门有一个非常重要的特性就是可以实现线与的功能，简单来说，就是在像IIC这样的总线协议中，只要有一个给低电平，那么总线都会被拉低。</p> 
<p></p> 
<h2 id="4%E3%80%81GPIO%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">4、GPIO常见应用场景</h2> 
<ol><li> <p>控制LED灯：GPIO可以用来控制LED灯的亮灭状态，通过设置GPIO引脚为输出模式，并控制引脚的电平状态，实现LED灯的开关和闪烁效果。</p> </li><li> <p>按键输入：GPIO可以作为输入接口，用于读取外部按键的状态。通过配置GPIO引脚为输入模式，并读取引脚的电平状态，可以实现按键的检测和触发相应的操作。</p> </li><li> <p>传感器接口：许多传感器（如温度传感器、湿度传感器等）可以通过GPIO与嵌入式系统进行通信。例如，通过I2C或SPI协议将传感器连接到特定的GPIO引脚，从而读取传感器提供的数据。</p> </li><li> <p>驱动电机：GPIO可以用作控制电机的引脚，通过控制引脚的电平状态和时序，实现电机的正转、反转、速度控制等功能。</p> </li><li> <p>触摸屏输入：某些嵌入式设备使用触摸屏作为主要的输入方式。GPIO可以用于读取触摸屏的输入信号，通过配置GPIO引脚为输入模式，并使用相应的驱动程序，实现触摸屏的触摸检测和坐标获取。</p> </li><li> <p>外部设备控制：除了上述应用场景，GPIO还可以用于与其他外部设备进行通信和控制。例如，与LCD显示屏、蜂鸣器、继电器等设备进行连接，通过GPIO控制这些设备的工作状态。</p> </li></ol> 
<p></p> 
<h2 id="5%E3%80%81GPIO%E7%82%B9%E7%81%AF">5、GPIO点灯</h2> 
<p>        关于使用GPIO实现点亮一盏灯，这是单片机入门的一个实验。首先要做的就是查看手册，找到相应的部件，会看电路原理图，一点不难，看懂应该输出高电平还是低电平，看懂连到哪一个GPIO端口就可以实现了。</p> 
<h3 id="5.1%20%E6%9F%A5%E7%9C%8B%E5%8E%9F%E7%90%86%E5%9B%BE">5.1 查看原理图</h3> 
<p><img alt="" height="707" src="https://images2.imgbox.com/89/6e/kHFWVQqL_o.png" width="1052"></p> 
<p>                                                            图5-1 LED原理图 </p> 
<p></p> 
<p> <img alt="" height="477" src="https://images2.imgbox.com/7a/20/ZEtx350b_o.png" width="1079"></p> 
<p>                                                        图5-2 核心板原理图 </p> 
<p></p> 
<p><img alt="" height="521" src="https://images2.imgbox.com/90/3c/pler1i0I_o.png" width="1109"></p> 
<p>                                                         图5-3 芯片原理图 </p> 
<p></p> 
<h3 id="5.2%20%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">5.2 代码实现</h3> 
<p>        操作寄存器为例：</p> 
<pre><code class="language-cs">    RCC-&gt;IOPENR |= 1&lt;&lt;1;			//使能时钟
	GPIOB-&gt;MODER  &amp;= ~(0x3&lt;&lt;4); 	//模式清零
	GPIOB-&gt;MODER   |= 1&lt;&lt;4;			//模式置位
	GPIOB-&gt;OTYPER  &amp;= ~(1&lt;&lt;2);		//输出类型
	GPIOB-&gt;ODR  &amp;= ~(1&lt;&lt;2);			//输出数据</code></pre> 
<p></p> 
<h2 id="6%E3%80%81GPIO%E6%80%BB%E7%BB%93">6、GPIO总结</h2> 
<ol><li> <p>GPIO是通用输入输出端口，常见于嵌入式系统和单片机中。它具有多种应用和扩展能力，通过控制引脚的输入输出状态，实现了与外部设备的交互和数据传输，扩展了系统的功能和灵活性。</p> </li><li> <p>GPIO的使用需要对引脚的输入输出模式、读取和写入状态、中断等概念进行理解和掌握，在使用过程中需要注意GPIO特性和限制，以及避免误触发等问题。</p> </li><li> <p>为了更好地应用GPIO进行嵌入式系统开发和硬件控制，大家可以借助系统提供的命令或编程语言的函数来实现GPIO引脚模式的设置、读取和写入状态等操作。同时，也可以参考GPIO的应用案例以及常见问题和解决方案，提高GPIO的使用技巧和问题解决能力。</p> </li><li> <p>总之，GPIO作为通用输入输出接口，在嵌入式系统和单片机中具有重要的地位。理解和掌握GPIO的使用方法和注意事项，对于嵌入式系统开发者来说是非常重要的。希望本篇GPIO能够帮助大家更好地了解和掌握GPIO的知识和应用方法。</p> </li></ol> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/89/b6/0mEPZ3r3_o.jpg"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f48e6703f449130278f87992da5b10f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">11-11 AEB 算法建模</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b34dd0c4ed75ba0f448ecc152143ce4b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springboot如何整合mongodb</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>