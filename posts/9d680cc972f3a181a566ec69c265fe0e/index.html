<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx模块参考手册：FastCGI模块(FastCGI)(3) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx模块参考手册：FastCGI模块(FastCGI)(3)" />
<meta property="og:description" content="fastcgi_pass
语法：fastcgi_pass fastcgi-server 默认值：none 使用字段：http, server, location 指定FastCGI服务器监听端口与地址，可以是本机或者其它：
fastcgi_pass localhost:9000; 使用Unix socket:
fastcgi_pass unix:/tmp/fastcgi.socket; 同样可以使用一个upstream字段名称：
upstream backend {server localhost:1234;}fastcgi_pass backend; fastcgi_pass_header
语法：fastcgi_pass_header name 默认值：none 使用字段：http, server, location
fastcgi_read_timeout
语法：fastcgi_read_timeout time 默认值：fastcgi_read_timeout 60 使用字段：http, server, location 前端FastCGI服务器的响应超时时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，或者在错误日志中出现前端服务器响应超时错误，可能需要调整这个值。
fastcgi_redirect_errors
语法：fastcgi_redirect_errors on|off 指令重命名为fastcgi_intercept_errors。
fastcgi_send_timeout
语法：fastcgi_send_timeout time 默认值：fastcgi_send_timeout 60 使用字段：http, server, location 指令为上游服务器设置等待一个FastCGI进程的传送数据时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，那么可以修改这个值，如果你在上游服务器的error log里面发现一些超时错误，那么可以恰当的增加这个值。
指令指定请求服务器的超时时间，指完成了2次握手的连接，而不是完整的连接，如果在这期间客户端没有进行数据传递，那么服务器将关闭这个连接。
fastcgi_split_path_info
语法：fastcgi_split_path_info regex 使用字段：location 可用版本：0.7.31以上
这个指令允许为CGI specification设置SCRIPT_FILENAME (SCRIPT_NAME)和PATH_INFO变量。正则包含两个组:
处理请求的脚本路径–对应$fastcgi_script_name。 脚本参数的值–对应$fastcgi_path_info。 下面是一个示例，脚本show.php接受字符串参数： article/0001，下面的例子将处理路径妥善分裂：
location ~ ^.&#43;\.php {(." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9d680cc972f3a181a566ec69c265fe0e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-04-11T11:22:46+08:00" />
<meta property="article:modified_time" content="2012-04-11T11:22:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx模块参考手册：FastCGI模块(FastCGI)(3)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>fastcgi_pass</strong></p> 
<p><strong>语法</strong>：fastcgi_pass fastcgi-server <br> <strong>默认值</strong>：none <br> <strong>使用字段</strong>：http, server, location <br> 指定FastCGI服务器监听端口与地址，可以是本机或者其它：</p> 
<pre>fastcgi_pass   localhost:9000;</pre> 
<p>使用Unix socket:</p> 
<pre>fastcgi_pass   unix:/tmp/fastcgi.socket;</pre> 
<p>同样可以使用一个upstream字段名称：</p> 
<pre>upstream backend  {
  server   localhost:1234;
}
 
fastcgi_pass   backend;</pre> 
<p><strong>fastcgi_pass_header</strong></p> 
<p><strong>语法</strong>：fastcgi_pass_header name <br> <strong>默认值</strong>：none <br> <strong>使用字段</strong>：http, server, location</p> 
<p><strong>fastcgi_read_timeout</strong></p> 
<p><strong>语法</strong>：fastcgi_read_timeout time <br> <strong>默认值</strong>：fastcgi_read_timeout 60 <br> <strong>使用字段</strong>：http, server, location <br> 前端FastCGI服务器的响应超时时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，或者在错误日志中出现前端服务器响应超时错误，可能需要调整这个值。</p> 
<p><strong>fastcgi_redirect_errors</strong></p> 
<p><strong>语法</strong>：fastcgi_redirect_errors on|off <br> 指令重命名为fastcgi_intercept_errors。</p> 
<p><strong>fastcgi_send_timeout</strong></p> 
<p><strong>语法</strong>：fastcgi_send_timeout time <br> <strong>默认值</strong>：fastcgi_send_timeout 60 <br> <strong>使用字段</strong>：http, server, location <br> 指令为上游服务器设置等待一个FastCGI进程的传送数据时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，那么可以修改这个值，如果你在上游服务器的error log里面发现一些超时错误，那么可以恰当的增加这个值。<br> 指令指定请求服务器的超时时间，指完成了2次握手的连接，而不是完整的连接，如果在这期间客户端没有进行数据传递，那么服务器将关闭这个连接。</p> 
<p><strong>fastcgi_split_path_info</strong></p> 
<p><strong>语法</strong>：fastcgi_split_path_info regex <br> <strong>使用字段</strong>：location <br> <strong>可用版本</strong>：0.7.31以上<br> 这个指令允许为CGI specification设置SCRIPT_FILENAME (SCRIPT_NAME)和PATH_INFO变量。正则包含两个组:</p> 
<ul><li class="level1"> 
  <div class="li">
    处理请求的脚本路径–对应$fastcgi_script_name。 
   <br>   
  </div> </li><li class="level1"> 
  <div class="li">
    脚本参数的值–对应$fastcgi_path_info。 
   <br>   
  </div> </li></ul> 
<p>下面是一个示例，脚本show.php接受字符串参数： article/0001，下面的例子将处理路径妥善分裂：</p> 
<pre>location ~ ^.+\.php {
  (...)
  fastcgi_split_path_info ^(.+\.php)(.*)$;
  fastcgi_param SCRIPT_FILENAME /path/to/php$fastcgi_script_name;
  fastcgi_param PATH_INFO $fastcgi_path_info;
  fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
  (...)
}</pre> 
<p>请求”/show.php/article/0001”的参数SCRIPT_FILENAME将设置为”/path/to/php/show.php”，参数PATH_INFO为”/article/0001”。</p> 
<p><strong>fastcgi_store</strong></p> 
<p><strong>语法</strong>：fastcgi_store [on | off | path] <br> <strong>默认值</strong>：fastcgi_store off <br> <strong>使用字段</strong>：http, server, location <br> 制定了存储前端文件的路径，参数on指定了将使用root和alias指令相同的路径，off禁止存储，此外，参数中可以使用变量使路径名更明确：</p> 
<pre>fastcgi_store   /data/www$original_uri;</pre> 
<p>应答中的”Last-Modified”头将设置文件的最后修改时间，为了使这些文件更加安全，可以将其在一个目录中存为临时文件，使用fastcgi_temp_path指令。<br> 这个指令可以用在为那些不是经常改变的后端动态输出创建本地拷贝的过程中。如：</p> 
<pre>location /images/ {
  root                 /data/www;
  error_page           404 = /fetch$uri;
}
 
location /fetch {
  internal;
 
  fastcgi_pass           fastcgi://backend;
  fastcgi_store          on;
  fastcgi_store_access   user:rw  group:rw  all:r;
  fastcgi_temp_path      /data/temp;
 
  alias                  /data/www;
}</pre> 
<p>fastcgi_store并不是缓存，某些需求下它更像是一个镜像。</p> 
<p><strong>fastcgi_store_access</strong></p> 
<p><strong>语法</strong>：fastcgi_store_access users:permissions [users:permission …] <br> <strong>默认值</strong>：fastcgi_store_access user:rw <br> <strong>使用字段</strong>：http, server, location <br> 这个参数指定创建文件或目录的权限，例如：</p> 
<pre>fastcgi_store_access  user:rw  group:rw  all:r;</pre> 
<p>如果要指定一个组的人的相关权限，可以不写用户，如：</p> 
<pre>fastcgi_store_access  group:rw  all:r;</pre> 
<p><strong>fastcgi_temp_path</strong></p> 
<p><strong>语法</strong>：fastcgi_temp_path path [level1 [level2 [level3]]] <br> <strong>默认值</strong>：fastcgi_temp_path fastcgi_temp <br> <strong>使用字段</strong>：http, server, location <br> 指令指定存储从别的服务器传送来的数据临时文件路径，同样可以指定三级目录已经哈希存储，level的值指定为哈希设置多少标记，例如，在下列配置中：</p> 
<pre>fastcgi_temp_path  /spool/nginx/fastcgi_temp 1 2;</pre> 
<p>临时文件类似如下：</p> 
<pre>/spool/nginx/fastcgi_temp/7/45/00000123457</pre> 
<p><strong>传送到FastCGI服务器的相关参数</strong></p> 
<p>请求头是以参数的形式传送到FastCGI服务器，以具体应用和脚本运行在FastCGI服务器上，这些参数通常以环境变量的形式取得，例如，”User-agent”头以HTTP_USER_AGENT参数传递，除此之外还有一些其他的http头，都可以用fastcgi_param指令自由传递。</p> 
<p><strong>变量</strong></p> 
<p><strong>$fastcgi_script_name</strong></p> 
<p>这个变量等于一个以斜线结尾的请求URI加上fastcgi_index给定的参数。可以用这个变量代替SCRIPT_FILENAME 和PATH_TRANSLATED，以确定php脚本的名称。<br> 如下例，请求”/info/”:</p> 
<pre> fastcgi_index  index.php;
 fastcgi_param  SCRIPT_FILENAME  /home/www/scripts/php$fastcgi_script_name;</pre> 
<p>SCRIPT_FILENAME等于”/home/www/scripts/php/info/index.php”。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b45314d7fb11dea826ef9036570f8ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">(asp.net)PayPal案例的关键源码代码__PayPal集成_API接口</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68d2793e83124cc2dd6c19d7798edc5a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">最全的OLE操作Excel的完整代码（2）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>