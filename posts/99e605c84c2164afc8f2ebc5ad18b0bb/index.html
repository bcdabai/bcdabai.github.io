<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库的基本使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库的基本使用" />
<meta property="og:description" content="一、常用数据类型和约束 1. 数据类型 整数：int，有符号范围（-2147483648 ~ 2147483647），无符号（unsigned）范围（0 ~ 4294967295）
小数：decimal，decimal(5,2)表示5位数，小数占2位，整数占3位
字符串：varchar，范围（0~65533），varchar(3)表示最多存3个字符，一个中文或字母都占一个字符
日期时间：datetime，如 ‘2022-11-24 16:56’
2. 约束 主键（Primay Key）： 唯一性，非空性，能唯一标识表中的每一条记录唯一（unique）：唯一性，可以空，不可以重复非空（not null）：不可以为空默认约束（default）：不填写此值时使用默认值外键约束（foreign key）：一个表中的一个字段引用另一个表的主键 二、数据库的操作 开始使用mysql：mysql -u 用户名 -p
1. 创建 语法格式：
creat database 数据库名 charset=[字符编码] collate=[校验规则];
mysql&gt; create database test_database charset=utf8 collate=utf8_general_ci;
查看创建结果: show create database 数据库名;
2. 使用 语法格式：
打开数据库
use 数据库名;
查看当前使用的数据库
mysql&gt; select database();
3. 修改 语法格式：
alter database [数据库名] default character set 字符集名 default collate 校对规则名
创建testpython数据库，并修改该数据库的字符集和校验规则
mysql&gt; create database testpython charset=gb2312;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/99e605c84c2164afc8f2ebc5ad18b0bb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-03T12:54:50+08:00" />
<meta property="article:modified_time" content="2022-12-03T12:54:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库的基本使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一、常用数据类型和约束</h3> 
<h4><a id="1__1"></a>1. 数据类型</h4> 
<p>整数：int，有符号范围（-2147483648 ~ 2147483647），无符号（unsigned）范围（0 ~ 4294967295）<br> 小数：decimal，decimal(5,2)表示5位数，小数占2位，整数占3位<br> 字符串：varchar，范围（0~65533），varchar(3)表示最多存3个字符，一个中文或字母都占一个字符<br> 日期时间：datetime，如 ‘2022-11-24 16:56’</p> 
<h4><a id="2__6"></a>2. 约束</h4> 
<ol><li>主键（Primay Key）： 唯一性，非空性，能唯一标识表中的每一条记录</li><li>唯一（unique）：唯一性，可以空，不可以重复</li><li>非空（not null）：不可以为空</li><li>默认约束（default）：不填写此值时使用默认值</li><li>外键约束（foreign key）：一个表中的一个字段引用另一个表的主键</li></ol> 
<h3><a id="_13"></a>二、数据库的操作</h3> 
<p>开始使用mysql：<code>mysql -u 用户名 -p</code></p> 
<h4><a id="1__15"></a>1. 创建</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p><code>creat database 数据库名 charset=[字符编码] collate=[校验规则];</code></p> 
</blockquote> 
<p><code>mysql&gt; create database test_database charset=utf8 collate=utf8_general_ci;</code><br> 查看创建结果: <code>show create database 数据库名;</code></p> 
<h4><a id="2__21"></a>2. 使用</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p>打开数据库<br> <code>use 数据库名;</code><br> 查看当前使用的数据库<br> <code>mysql&gt; select database();</code></p> 
</blockquote> 
<h4><a id="3__27"></a>3. 修改</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p><code>alter database [数据库名] default character set 字符集名 default collate 校对规则名</code></p> 
</blockquote> 
<p>创建testpython数据库，并修改该数据库的字符集和校验规则<br> <code>mysql&gt; create database testpython charset=gb2312;</code><br> <code>mysql&gt; alter database testpython default character set utf8mb4 default collate utf8mb4_general_ci;</code></p> 
<h4><a id="4__34"></a>4. 删除</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p><code>mysql&gt; drop database 数据库名;</code></p> 
</blockquote> 
<h4><a id="5__37"></a>5. 备份</h4> 
<p><code># mysqldump -uroot -p 数据库名 &gt; 备份名.sql;</code></p> 
<h4><a id="6__39"></a>6. 恢复</h4> 
<p>需要先创建一个新的数据库，再执行恢复操作<br> <code># mysql -uroot -p 新数据库名 &lt; tt.sql</code></p> 
<h3><a id="_43"></a>三、数据表的操作</h3> 
<h4><a id="1__44"></a>1. 创建表</h4> 
<p>语法格式：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
	字段名 类型 约束<span class="token punctuation">,</span>
	字段名 类型 约束
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	
<span class="token punctuation">)</span>
<span class="token comment"># 查看创建的表</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> students<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">NULL</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	age <span class="token keyword">int</span> <span class="token keyword">unsigned</span><span class="token punctuation">,</span>
	height <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2__64"></a>2. 查看表结构</h4> 
<p>语法格式：</p> 
<pre><code class="prism language-sql"><span class="token keyword">desc</span> students<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bd/43/fyqQr1qi_o.png" alt=""></p> 
<h4><a id="3__70"></a>3. 删除表</h4> 
<p><code>drop table 表名;</code><br> <code>drop table if exists 表名;</code> 如果表存在删除表</p> 
<h3><a id="_74"></a>四、数据的操作-增删改查</h3> 
<h4><a id="1__75"></a>1. 添加数据</h4> 
<h5><a id="11__76"></a>1.1 添加一行数据</h5> 
<p>格式一：所有字段设置值，值的顺序与表中字段的顺序一致<br> 备注：主键自动增长，插入时需要占位，通常使用0 \ default \ null 来占位</p> 
<blockquote> 
 <p>insert into 表名 values(…)</p> 
</blockquote> 
<p><code>insert into students values(0,'张飞',18,188.8);</code></p> 
<p>格式二：部分字段设置值，值的顺序与给出的字段顺序对应</p> 
<blockquote> 
 <p>insert into 表名(字段1, …) values(值1, …)</p> 
</blockquote> 
<p><code>insert into students(name) values('孙悟空');</code></p> 
<h5><a id="12__87"></a>1.2 添加多行数据</h5> 
<p>格式一：</p> 
<blockquote> 
 <p>insert into 表名 values(…),(…)…</p> 
</blockquote> 
<p><code>insert into students values(default,'猪八戒',17,180),(default,'沙和尚',17,186.87);</code><br> 格式二：</p> 
<blockquote> 
 <p>insert into 表名(字段1,…) values(值1,…),(值2,…)…</p> 
</blockquote> 
<p><code>insert into students(name,age) values('乔端阳',18),('李芳芳', 17);</code></p> 
<h4><a id="2__96"></a>2. 修改字段值</h4> 
<p>语法格式：</p> 
<blockquote> 
 <p>update 表名 set 字段1=值1, 字段2=值2,… where 条件</p> 
</blockquote> 
<p><code>update students set name='狄仁杰', age=20 where id=2;</code></p> 
<h4><a id="3__102"></a>3. 删除表记录</h4> 
<p>注：一旦删除无法恢复<br> 语法格式：</p> 
<blockquote> 
 <p>delete from 表名 where 条件;</p> 
</blockquote> 
<p><code>delete from students where name='沙和尚';</code><br> 一般在表中设置字段如 isdelete 默认值为0，1表示删除，0表示未删除，查询数据时只查询isdelete为0的数据。<br> <code>update students set isdelete=1 where id=3;</code></p> 
<h4><a id="4__110"></a>4. 查询数据</h4> 
<h5><a id="41__111"></a>4.1 查询所有数据</h5> 
<blockquote> 
 <p>select * from 表名;</p> 
</blockquote> 
<p><code>select * from goods;</code> 查询goods表中的所有数据</p> 
<h5><a id="42__115"></a>4.2 查询部分字段</h5> 
<blockquote> 
 <p>select 字段1,字段2,… from 表名;</p> 
</blockquote> 
<p><code>select tarde_name, price from goods;</code> 只查询tarde_name、price字段</p> 
<h5><a id="43__119"></a>4.3 字段起别名</h5> 
<blockquote> 
 <p>select 字段1 as别名1, 字段2 as 别名2… select from 表名;</p> 
</blockquote> 
<p><code>select tarde_name as 商品名, price as 价格 from goods;</code><br> <img src="https://images2.imgbox.com/fe/2c/Dez2AXMY_o.png" alt=""></p> 
<h5><a id="44__124"></a>4.4 查询结果去重</h5> 
<blockquote> 
 <p>select distinct(字段名) from 表名;<br> select distinct 字段名 from 表名;</p> 
</blockquote> 
<p><code>select distinct(platform) from goods;</code> 查询platform并去重<br> <img src="https://images2.imgbox.com/08/b4/gOaWciqr_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="45__130"></a>4.5 复杂查询</h5> 
<p>条件查询：</p> 
<blockquote> 
 <p>select 字段1,字段2,… from 表名 where 条件;</p> 
</blockquote> 
<h6><a id="451__133"></a>4.5.1 比较运算符</h6> 
<blockquote> 
 <p>等于：=<br> 大于：&gt;<br> 大于等于：&gt;=<br> 小于：&lt;<br> 小于等于：&lt;=<br> 不等于：!=或&lt;&gt;</p> 
</blockquote> 
<p><code>select * from goods where price &lt;= 50;</code> 筛选价格小于等于50的数据</p> 
<h6><a id="452___143"></a>4.5.2 逻辑运算符</h6> 
<blockquote> 
 <p>and<br> or<br> not</p> 
</blockquote> 
<p><code>select * from goods where price &lt;= 50 and platform = '拼多多';</code> 查询价格小于等于50并且平台为拼多多的数据</p> 
<h6><a id="453__149"></a>4.5.3 模糊查询</h6> 
<blockquote> 
 <p>like 表示模糊查询<br> % 表示任意多个任意字符<br> _ 表示一个任意字符</p> 
</blockquote> 
<p><code>select * from students where name like '乔%';</code> 查询姓“乔”的同学数据<br> <code>select * from students where name like '张_';</code> 查询姓“张”且名字只有一个字的同学<br> <code>select * from students where name like '%乔';</code> 查询名字以“乔”结尾的同学数据<br> <code>select * from students where name like '%乔%';</code> 查询姓名中包含“乔”的同学数据</p> 
<h6><a id="454__159"></a>4.5.4 范围查询</h6> 
<blockquote> 
 <p>in 表示在一个连续的范围内，格式 in(…,…)</p> 
</blockquote> 
<p><code>select * from students where age in(15,17,20);</code> 查询年龄为15、17、20的学生</p> 
<blockquote> 
 <p>betwween…and… 表示在一个连续的范围内</p> 
</blockquote> 
<p><code>select * from students where age between 17 and 20;</code> 查询年龄在17-20岁之间的学生，包含17和20</p> 
<h6><a id="455__167"></a>4.5.5 判断空</h6> 
<blockquote> 
 <p>判断为空 is NULL 或 is null<br> 判断不为空 is not null</p> 
</blockquote> 
<p><code>select * from students where height is null;</code></p> 
<h5><a id="46__173"></a>4.6 排序</h5> 
<p>语法格式：</p> 
<blockquote> 
 <p>select * from 表名 order by 列1 asc|desc,列2 asc|desc,…;</p> 
</blockquote> 
<p>默认按照列值从小到大排序<br> asc 从小到大，即升序<br> desc 从大到小，即降序</p> 
<p><code>select * from goods order by price desc;</code> 价格按照从大到小排序<br> <code>select * from goods order by price desc, count desc;</code> 价格按照从大到小排序，价格一样 count按从大到小排序</p> 
<h5><a id="47__184"></a>4.7 聚合函数</h5> 
<p>对一组数据进行计算，返回三个结果的实现过程。<br> 常用聚合函数：</p> 
<blockquote> 
 <p>count() 查询总记录数<br> max() 查询最大值<br> min() 查询最小值<br> sum() 求和<br> avg() 求平均值</p> 
</blockquote> 
<p><code>select count(*) from goods;</code> 查询总记录数<br> <code>select max(price) from goods;</code>查询最高价格<br> <code>select min(price) from goods;</code> 查询最低价格<br> <code>select sum(count) from students;</code> 查询数量总和<br> <code>select avg(age) from students;</code> 查询年龄平均值<br> <code>select count(*), max(price), min(price), avg(price) from goods;</code><br> <img src="https://images2.imgbox.com/54/9a/CZOavsgz_o.png" alt=""></p> 
<h5><a id="48__200"></a>4.8 分组</h5> 
<p>按照字段分组，字段相同的数据会被放到一个组中<br> 分组的目的是对每一组数据进行统计（使用聚合函数）<br> 语法格式：</p> 
<blockquote> 
 <p>select 字段1，… 聚合… from 表名 group by 字段1，字段2…</p> 
</blockquote> 
<p><code>select sex,count(*) from students group by sex;</code> 统计班级中各性别人数<br> <img src="https://images2.imgbox.com/34/4b/E4m97mg3_o.png" alt=""><br> 分组后数据筛选：</p> 
<blockquote> 
 <p>select 字段1,聚合… from 表名 group by 字段1,字段2… having 字段1,字段2<br> having后面的条件运算符与where相同</p> 
</blockquote> 
<p>查询班级中男生人数：<br> <code>select count(*) from students where sex='男';</code><br> <code>select count(*) from students group by sex having sex='男';</code></p> 
<blockquote> 
 <p>where和having：<br> where是对from后面指定的表进行数据筛选，属于对原始数据的筛选；<br> having是对group by的结果进行筛选；<br> having后面的条件中可以用聚合函数，where后面不可以；</p> 
</blockquote> 
<p><code>select class from students group by class having avg(age) &gt; 18;</code> 查询平均年龄大于18的班级</p> 
<h5><a id="49__222"></a>4.9 分页</h5> 
<p>语法格式：</p> 
<blockquote> 
 <p>select * from 表名 limit start,count;<br> 从start开始，获取count条数据<br> start索引从0开始</p> 
</blockquote> 
<p><code>select * from students limit 0,3;</code> 查询前3条数据<br> <code>select * from students limit 3;</code></p> 
<blockquote> 
 <p>limit典型应用场景就是实现分页查询<br> 每页显示m条数据，要求显示第n页的数据<br> <code>select * from students limit (n-1)*m, m;</code></p> 
</blockquote> 
<p><code>select * from students limit 4, 2;</code> 每页显示2条，显示第3页的数据<br> <code>select * from goods order by price desc limit 1;</code> 查询价格最贵的商品<br> <code>select * from goods where price = (select max(price) from goods);</code></p> 
<h4><a id="5__238"></a>5. 多表连接查询</h4> 
<p>MySQL 的连接查询，通常都是将来自两个或多个表的记录结合起来，基于这些表之间的共同字段，进行数据的拼接。<br> 首先，要确定一个主表作为结果集，然后将其他表的数据有选择性的连接到选定的主表结果集上。<br> <img src="https://images2.imgbox.com/5d/34/PkHaxaIM_o.png" alt=""><br> 注：如果要保证一张数据表的数据都存在，则一定不能选择内连接，可以选择左连接或右连接。</p> 
<h5><a id="51_inner_join_243"></a>5.1 内连接——inner join</h5> 
<p>内连接就是两张或多张表中同时符合某种条件的数据记录的组合；<br> 通常在 from 子句中使用关键字 inner join 来连接多张表，并使用 on 子句设置连接条件；<br> 内连接是系统默认的表连接，所以在 from 子句后可以省略 inner 关键字，只使用关键字 join ，同时有多个表时，也可以连续使用 inner join 来实现多表的内连接，不过为了更好的性能，建议最好不要超过三个表；</p> 
<blockquote> 
 <p>select 字段 from 表1 inner join 表2 on 表1.字段 = 表2.字段;</p> 
</blockquote> 
<p><code>select * from goods inner join category on goods.typeId = category.typeId;</code><br> <code>select * from goods as g inner join category as c on go.typeId = ca.typeId;</code> 给表起别名，缩短表名利于编写<br> <img src="https://images2.imgbox.com/fd/87/e9wmyCbn_o.png" alt=""></p> 
<h5><a id="52_left_join_252"></a>5.2 左连接——left join</h5> 
<p>左连接以左侧表为基础表，接收左表的所有行，并用这些行与右侧参考表中的记录进行匹配，也就是说匹配左表中的所有行以及右表中符合条件的行；<br> 左连接中，左表的记录会全部表示出来，而右表只会显示符合搜索条件的记录，无符合的数据右表字段都显示null；</p> 
<blockquote> 
 <p>select 字段 from 表1 left join 表2 on 表1.字段 = 表2.字段;</p> 
</blockquote> 
<p><code>select * from goods left join category on goods.typeId = category.typeId;</code><br> <img src="https://images2.imgbox.com/63/a3/1L998tsE_o.png" alt=""></p> 
<h5><a id="53_right_join_259"></a>5.3 右连接——right join</h5> 
<p>右连接也被称为右外连接，在 from 子句中用 right join 或者 right out join 关键字来表示。<br> 右连接跟左连接正好相反，它是以右表为基础表，用于接收右表中的所有行，并用这些记录与左表中的行进行匹配</p> 
<blockquote> 
 <p>select 字段 from 表1 right join 表2 on 表1.字段 = 表2.字段;</p> 
</blockquote> 
<p><code>select * from goods right join category on goods.typeId = category.typeId;</code><br> <img src="https://images2.imgbox.com/ac/af/CSxlG18S_o.png" alt=""></p> 
<h5><a id="54__266"></a>5.4. 自关联</h5> 
<p>数据表只有一张，表中至少有两个字段之间有某种联系<br> 通过给表起别名的形式，将原本只有一张的数据表变为2张，然后通过对应字段实现连接查询即可<br> <img src="https://images2.imgbox.com/27/88/0PpGjJJ2_o.png" alt=""><br> 查询表中河北省所有的市:<br> <code>select * from areas as a1 left join areas as a2 on a1.aid = a2.pid where a1.aid = 130000;</code><br> <img src="https://images2.imgbox.com/6a/8f/2fCaWAq8_o.png" alt=""><br> 查询河南省所有的市和区:<br> <code>select * from areas as a1 left join areas as a2 on a1.aid = a2.pid left join areas a3 on a2.aid = a3.pid where a1.atitle = '河南省'; </code><br> <img src="https://images2.imgbox.com/a5/4a/QRyEIyKB_o.png" alt=""></p> 
<h4><a id="6__276"></a>6. 子查询</h4> 
<p>在一个select中嵌入另外一个select语句，嵌入的select语句称之为子查询语句，外部的select语句称之为主查询语句。<br> 查询大于平均年龄的学生：<br> <code>select * from students where age &gt; (select avg(age) from students);</code><br> 查询拼多多的商品，并去分类表中查出对应分类：<br> <code>select * from (select * from goods where company = '拼多多') as g1 left join category on g1.typeId = category.id;</code><br> <img src="https://images2.imgbox.com/83/ae/EwKoOtAv_o.png" alt=""></p> 
<h3><a id="__283"></a>五. 数据库设计</h3> 
<h4><a id="1_ER_284"></a>1. ER模型</h4> 
<p>E-R模型的基本元素是：实体、联系、属性</p> 
<blockquote> 
 <p>E表示entry，实体：描述具有相同特征事物的抽象<br> 属性：每个实体具有的各种特征称之为属性<br> R表示relationship，联系：实体之间存在各种关系，关系的类型包括一对一、一对多、多对多</p> 
</blockquote> 
<p>学生为一个实体，其具有属性：学号、姓名、年龄、班级等<br> 学生与学生之间存在角色关系，组长和组员，他们之间有一对多的关系</p> 
<h5><a id="11__292"></a>1.1 一对一</h5> 
<p>实体A对实体B为1对1，则在表A或表B中创建一个字段，存储另一个表的主键值。<br> <img src="https://images2.imgbox.com/04/9a/32QtY82G_o.png" alt=""></p> 
<h5><a id="12__295"></a>1.2 一对多</h5> 
<p>实体A对实体B为1对多：表B中创建一个字段，存储表1的主键值。<br> <img src="https://images2.imgbox.com/56/c0/S202NoQR_o.png" alt=""></p> 
<h5><a id="13__298"></a>1.3 多对多</h5> 
<p>实体A对实体B为多对多：新建一张表C，这个表只有两个字段，一个用于存储A的主键值，一个用于存储B的主键值。<br> <img src="https://images2.imgbox.com/39/5e/i97dzED9_o.png" alt=""></p> 
<h4><a id="2__301"></a>2. 主键与外键</h4> 
<table><thead><tr><th></th><th>主键</th><th>外键</th></tr></thead><tbody><tr><td>作用</td><td>用来保证数据的完整性</td><td>用来和其他表建立联系</td></tr><tr><td>定义</td><td>一条记录的唯一标识，不能重复，不能为空</td><td>一个表的属性是另一个表的主键，可以重复，可以为空</td></tr><tr><td>个数</td><td>一个表主键只能有一个</td><td>一个表可以有多个外键</td></tr></tbody></table> 
<p>注意：如果大量增加外键设置，会严重影响除数据查询之外的其他操作（增/删/改）的操作效率，因此在实际项目中很少会被采用。</p> 
<p>设置主键：</p> 
<blockquote> 
 <p>创建数据表时，create table中指定主键<br> 字段名 数据类型 primary key</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> ss <span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除主键：</p> 
<blockquote> 
 <p>alter table 表名 drop primary key;</p> 
</blockquote> 
<p>删除主键需要先取消主键的自动递增:<br> <code>alter table ss change id id int;</code><br> <code>alter table ss drop primary key;</code></p> 
<p>设置外键：<br> 在创建数据表时，create table中设置外键：</p> 
<blockquote> 
 <p>constraint 外键名 foreign key(自己的字段) references 主表(主表字段);</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token comment"># 创建学生表，以班级编号关联班级表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	class_id <span class="token keyword">int</span> <span class="token keyword">unsigned</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> stu_fk <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">references</span> class<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除外键：</p> 
<blockquote> 
 <p>alter table 表名 drop foreign key 外键名称;</p> 
</blockquote> 
<p><code>alter table students drop foreign key stu_fk;</code></p> 
<h4><a id="3__344"></a>3. 索引</h4> 
<table><thead><tr><th></th><th>索引</th></tr></thead><tbody><tr><td>作用</td><td>提高查询排序的速度</td></tr><tr><td>定义</td><td>快速查询特定值的记录</td></tr><tr><td>个数</td><td>一个表索引只能有一个</td></tr></tbody></table> 
<p>可以大幅度提高查询语句的执行效率，如果大量增加索引设置，会影响其他操作的操作效率，不能添加过多索引。</p> 
<p>设置索引：</p> 
<blockquote> 
 <p>表已存在的时候创建索引<br> create index 索引名称 on 表名(字段名称(长度))</p> 
</blockquote> 
<p><code>create index name_index on students(name(10));</code><br> 删除索引：</p> 
<blockquote> 
 <p>drop index 索引名称 on 表名;</p> 
</blockquote> 
<p><code>create index name_index on students;</code></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8def3b51c716c924e9c345d71141fab2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">codeblocks 变成这样了怎么恢复成原本的样子。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e23e2afc9c38df4c3708b9d014721adb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">golang中日期操作之日期格式化及日期转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>