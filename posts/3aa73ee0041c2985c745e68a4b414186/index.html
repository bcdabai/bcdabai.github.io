<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot2：核心配置与注解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot2：核心配置与注解" />
<meta property="og:description" content="核心配置与注解 一、全局配置文件介绍1. application.properties配置文件1.1 编写实体类1.1.1引申：解决Spring Boot Configuration Annotation Processor not configured 未配置Spring引导配置注释处理器以及在配置时想出现代码提示 1.2 编写application.properties1.3 编写测试类：测试是否配置成功1.4 输出结果 2. application.yaml配置文件(推荐)介绍yaml配置属性时的写法2.1 编写application.yaml2.2 测试输出 二、配置文件中配置自定义的属性值介绍1. @ConfigurationProperties注入自定义属性2. @Value注入注入自定义属性对比：@ComponentProperties 和 @Value两个注解的选择 三、自定义配置文件介绍1. 使用@PropertySource加载自定义配置文件1.1 编写配置类1.2 编写自定义配置文件1.3 编写测试类1.4 测试输出 2. @ImportResource加载xml配置文件3. @Configuration编写自定义配置类3.1 @Configuration&#43;@Bean编写自定义配置类3.2 编写测试方法3.3 测试输出3.4 总结 一、全局配置文件 介绍 全局配置文件 可以对一些默认配置值进行修改。spring boot使用application.properties 或者 application.yaml 作为全局配置文件。=&gt; 定义spring boot项目的相关属性，包括：系统属性、环境变量、命令参数等信息，也可以是自定义配置文件名称和位置。
1. application.properties配置文件 用spring initializr构建项目时，会在src/main/resources目录下自动生成application.properties，并在项目启动时自动加载该配置文件
1.1 编写实体类 在主程序启动类所在的包下，创建domain(装实体类的包)，里面创建两个实体类：Pet和Person
编写Pet类
package com.wpz.chapter02.domain; /** * @author 王胖子 * @version 1.0 * 普通实体类：为了给Person类使用 */ public class Pet { private String type; private String name; public String getType() { return type; } public void setType(String type) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3aa73ee0041c2985c745e68a4b414186/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-03T23:03:33+08:00" />
<meta property="article:modified_time" content="2022-05-03T23:03:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot2：核心配置与注解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>核心配置与注解</h4> 
 <ul><li><a href="#_3" rel="nofollow">一、全局配置文件</a></li><li><ul><li><a href="#_4" rel="nofollow">介绍</a></li><li><a href="#1_applicationproperties_8" rel="nofollow">1. application.properties配置文件</a></li><li><ul><li><a href="#11__10" rel="nofollow">1.1 编写实体类</a></li><li><ul><li><a href="#111Spring_Boot_Configuration_Annotation_Processor_not_configured_Spring_159" rel="nofollow">1.1.1引申：解决Spring Boot Configuration Annotation Processor not configured 未配置Spring引导配置注释处理器以及在配置时想出现代码提示</a></li></ul> 
    </li><li><a href="#12_applicationproperties_174" rel="nofollow">1.2 编写application.properties</a></li><li><a href="#13__189" rel="nofollow">1.3 编写测试类：测试是否配置成功</a></li><li><a href="#14__212" rel="nofollow">1.4 输出结果</a></li></ul> 
   </li><li><a href="#2_applicationyaml_220" rel="nofollow">2. application.yaml配置文件(推荐)</a></li><li><ul><li><a href="#_221" rel="nofollow">介绍</a></li><li><a href="#yaml_224" rel="nofollow">yaml配置属性时的写法</a></li><li><a href="#21_applicationyaml_282" rel="nofollow">2.1 编写application.yaml</a></li><li><a href="#22__301" rel="nofollow">2.2 测试输出</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_306" rel="nofollow">二、配置文件中配置自定义的属性值</a></li><li><ul><li><a href="#_307" rel="nofollow">介绍</a></li><li><a href="#1_ConfigurationProperties_314" rel="nofollow">1. @ConfigurationProperties注入自定义属性</a></li><li><a href="#2_Value_331" rel="nofollow">2. @Value注入注入自定义属性</a></li><li><a href="#ComponentProperties__Value_350" rel="nofollow">对比：@ComponentProperties 和 @Value</a></li><li><a href="#_392" rel="nofollow">两个注解的选择</a></li></ul> 
  </li><li><a href="#_398" rel="nofollow">三、自定义配置文件</a></li><li><ul><li><a href="#_399" rel="nofollow">介绍</a></li><li><a href="#1_PropertySource_401" rel="nofollow">1. 使用@PropertySource加载自定义配置文件</a></li><li><ul><li><a href="#11__405" rel="nofollow">1.1 编写配置类</a></li><li><a href="#12__467" rel="nofollow">1.2 编写自定义配置文件</a></li><li><a href="#13__477" rel="nofollow">1.3 编写测试类</a></li><li><a href="#14__499" rel="nofollow">1.4 测试输出</a></li></ul> 
   </li><li><a href="#2_ImportResourcexml_504" rel="nofollow">2. @ImportResource加载xml配置文件</a></li><li><a href="#3_Configuration_534" rel="nofollow">3. @Configuration编写自定义配置类</a></li><li><ul><li><a href="#31_ConfigurationBean_545" rel="nofollow">3.1 @Configuration+@Bean编写自定义配置类</a></li><li><a href="#32__572" rel="nofollow">3.2 编写测试方法</a></li><li><a href="#33__594" rel="nofollow">3.3 测试输出</a></li><li><a href="#34__597" rel="nofollow">3.4 总结</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_3"></a>一、全局配置文件</h2> 
<h3><a id="_4"></a>介绍</h3> 
<p>全局配置文件 可以对一些<strong>默认配置值进行修改</strong>。spring boot使用<strong>application.properties 或者 application.yaml</strong> 作为全局配置文件。=&gt; 定义spring boot项目的相关属性，包括：系统属性、环境变量、命令参数等信息，也可以是自定义配置文件名称和位置。</p> 
<hr> 
<h3><a id="1_applicationproperties_8"></a>1. application.properties配置文件</h3> 
<p>用spring initializr构建项目时，会在src/main/resources目录下<strong>自动生成</strong>application.properties，并在项目启动时<strong>自动加载</strong>该配置文件</p> 
<h4><a id="11__10"></a>1.1 编写实体类</h4> 
<p>在主程序启动类所在的包下，创建domain(装实体类的包)，里面创建两个实体类：Pet和Person<br> <img src="https://images2.imgbox.com/6c/0c/w9VUWjFx_o.png" alt="在这里插入图片描述"><br> 编写Pet类</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author 王胖子
 * @version 1.0
 * 普通实体类：为了给Person类使用
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Pet{"</span> <span class="token operator">+</span>
                <span class="token string">"type='"</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>编写Person类</p> 
<blockquote> 
 <ol><li>需求：在配置文件中自定义属性值 注入到 Person实体类的属性中</li><li>步骤：<br> ① <code>@Component</code>：把Person类作为Spring容器的组件。<br> &amp; 目的：<strong>让spring boot可以自动扫描到该组件，然后对该组件进行其它功能的实现</strong>(比如：属性被@ConfigurationProperties注解赋值)<br> &amp; 说明：除了<code>@Component</code>，还可以使用<code>@Configuration、@Controller、@Service、@Repository</code>等<br> ② <code>ConfigurationProperties(prefix="person")</code><br> 目的：将<strong>配置文件中以person开头的key的value值 通过setter()方法 注入到 实体类对应的属性中</strong></li></ol> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author 王胖子
 * @version 1.0
 * 1. 需求：在配置文件中自定义属性值 注入到 Person实体类的属性中
 * 2. 步骤：
 * ① @Component：把Person类作为Spring容器的组件。
 * 目的：让spring boot可以自动扫描到该组件，然后对该组件进行其它功能的实现(比如：属性被@ConfigurationProperties注解赋值)
 * 说明：除了@Component，还可以使用@Configuration、@Controller、@Service、@Repository等
 * ② ConfigurationProperties(prefix="person")
 * 目的：将配置文件中以person开头的key的value值 通过setter()方法 注入到 实体类对应的属性中
 */</span>
<span class="token comment">//把Person类作为组件加入spring容器</span>
<span class="token annotation punctuation">@Component</span>
<span class="token comment">//配置：通过配置文件给Person类的属性赋值</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"person"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hobby<span class="token punctuation">;</span><span class="token comment">//爱好</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> family<span class="token punctuation">;</span><span class="token comment">//家庭成员</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span><span class="token comment">//宠物</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHobby</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> hobby<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHobby</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hobby<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hobby <span class="token operator">=</span> hobby<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getFamily</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> family<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFamily</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> family<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>family <span class="token operator">=</span> family<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>map <span class="token operator">=</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">getPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> pet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPet</span><span class="token punctuation">(</span><span class="token class-name">Pet</span> pet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pet <span class="token operator">=</span> pet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>
                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", hobby="</span> <span class="token operator">+</span> hobby <span class="token operator">+</span>
                <span class="token string">", family="</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>family<span class="token punctuation">)</span> <span class="token operator">+</span>
                <span class="token string">", map="</span> <span class="token operator">+</span> map <span class="token operator">+</span>
                <span class="token string">", pet="</span> <span class="token operator">+</span> pet <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="111Spring_Boot_Configuration_Annotation_Processor_not_configured_Spring_159"></a>1.1.1引申：解决Spring Boot Configuration Annotation Processor not configured 未配置Spring引导配置注释处理器以及在配置时想出现代码提示</h5> 
<p><img src="https://images2.imgbox.com/2e/1a/k2ucD3aw_o.png" alt="在这里插入图片描述"><br> 在pom.xml中编写后，需要重新运行项目启动类，或者按Ctrl+f9重构当前项目</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--配置处理器依赖：spring-boot-configuration-processor--&gt;</span>
<span class="token comment">&lt;!--在配置文件中配置Person对象的属性值时，spring boot无法自动识别，不会有任何书写提示，为了出现代码提示，就要写这个依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>重构项目后，编写配置文件就有提示了<br> <img src="https://images2.imgbox.com/94/e3/Eeb6WGiH_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="12_applicationproperties_174"></a>1.2 编写application.properties</h4> 
<p>打开src/main/resouces/application.properties</p> 
<pre><code class="prism language-properties">#对实体类对象Person进行属性值配置
#字符串不需要额外加双引号
person.id=1
person.name=wpz
person.hobby=play,read,sleep
person.family=father,mother,sister
person.map.k1=v1
person.map.k2=v2
person.pet.type=cat
person.pet.name=mimi
</code></pre> 
<h4><a id="13__189"></a>1.3 编写测试类：测试是否配置成功</h4> 
<p><img src="https://images2.imgbox.com/8b/84/4q0rpldT_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Person</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Chapter02ApplicationTests</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Person</span> person<span class="token punctuation">;</span><span class="token comment">//通过@Autowired注入</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="14__212"></a>1.4 输出结果</h4> 
<p>运行测试类中的<strong>测试方法</strong><br> <img src="https://images2.imgbox.com/ed/ad/5RuWBmNq_o.png" alt="在这里插入图片描述"><br> 控制台输出：<br> <img src="https://images2.imgbox.com/23/1d/QzLnTy2c_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6f/a7/2JyGo8k2_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_applicationyaml_220"></a>2. application.yaml配置文件(推荐)</h3> 
<h4><a id="_221"></a>介绍</h4> 
<p>YAML文件格式是springboot支持的一种<strong>json超集文件格式</strong>，以<strong>数据为核心</strong>，是一种更直观且容易被计算机识别的<strong>数据序列化格式</strong>。=&gt; <strong>更简洁方便</strong></p> 
<h4><a id="yaml_224"></a>yaml配置属性时的写法</h4> 
<blockquote> 
 <p>yaml文件配置属性的格式：<strong>key:(空格)value</strong>，使用<strong>缩进控制层级关系</strong>，对于<strong>String类型的属性值，不需要额外添加双引号</strong></p> 
</blockquote> 
<p>① 普通数据类型(数字、字符串、布尔等)</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
	port<span class="token punctuation">:</span><span class="token number">8081</span>
	path<span class="token punctuation">:</span>/hello
</code></pre> 
<p>② 数组和单列集合</p> 
<blockquote> 
 <p>有两种写法：缩进式和行内式</p> 
 <ul><li>其中缩进式又有两种表示形式：<br> ①"-(空格)属性值"<br> ② 直接赋值并使用英文逗号隔开属性值</li></ul> 
</blockquote> 
<p>缩进式</p> 
<pre><code class="prism language-yaml"><span class="token comment">#person为前缀，对person对象内的hobby赋值</span>
<span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">hobby</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> play
    <span class="token punctuation">-</span> read
    <span class="token punctuation">-</span> sleep
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">hobby</span><span class="token punctuation">:</span>
    play<span class="token punctuation">,</span>
    read<span class="token punctuation">,</span>
    sleep
</code></pre> 
<p>行内式(对缩进式进行简化) =&gt; [ ]可以省略</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>
  hobby<span class="token punctuation">:</span><span class="token punctuation">[</span>play<span class="token punctuation">,</span>read<span class="token punctuation">,</span>sleep<span class="token punctuation">]</span>
</code></pre> 
<p>③ Map集合和对象<br> 缩进式</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">map</span><span class="token punctuation">:</span>
    k1<span class="token punctuation">:</span>v1
    k2<span class="token punctuation">:</span>v2
</code></pre> 
<p>行内式 =&gt; 属性值用{ }包住</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>
  map<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>k1<span class="token punctuation">:</span>v1<span class="token punctuation">,</span>k2<span class="token punctuation">:</span>v2<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="21_applicationyaml_282"></a>2.1 编写application.yaml</h4> 
<p>还是引用前面的代码，使用前面的两个实体类和测试类</p> 
<blockquote> 
 <p><font color="red">注意：</font> 要将前面application.properties内容注释掉，因为application.properties的<strong>优先级高于application.yaml</strong></p> 
</blockquote> 
<p>在resources中新建application.yaml<br> <img src="https://images2.imgbox.com/3f/5a/JkiLdoxI_o.png" alt="在这里插入图片描述"><br> 编写yaml文件<br> <img src="https://images2.imgbox.com/73/76/YpUMlK86_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-yaml"><span class="token comment">#person为前缀，对person对象内的hobby赋值</span>
<span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> 王胖子
  <span class="token key atrule">hobby</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>sing<span class="token punctuation">,</span>read<span class="token punctuation">,</span>sleep<span class="token punctuation">]</span>
  <span class="token key atrule">family</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>father<span class="token punctuation">,</span>mother<span class="token punctuation">]</span>
  <span class="token key atrule">map</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>k1<span class="token punctuation">:</span>v1<span class="token punctuation">,</span>k2<span class="token punctuation">:</span>v2<span class="token punctuation">}</span>
  <span class="token key atrule">pet</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>type<span class="token punctuation">:</span>cat<span class="token punctuation">,</span>name<span class="token punctuation">:</span>zhuzhu<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="22__301"></a>2.2 测试输出</h4> 
<p>运行测试类中的测试方法<br> <img src="https://images2.imgbox.com/1e/f1/wHAYDuap_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_306"></a>二、配置文件中配置自定义的属性值</h2> 
<h3><a id="_307"></a>介绍</h3> 
<blockquote> 
 <p>如果<strong>配置的属性是</strong>spring boot<strong>默认提供的属性</strong>，则spring boot会<strong>自动扫描并读取属性值</strong><br> 如果配置的属性是<strong>用户自定义的属性</strong>，则需要<br> <font color="red">①通过注解使类成为spring容器的<strong>组件</strong>：让springboot能扫描到该类<br> ②再通过注解，来从配置文件中<strong>读取</strong>该类需要的属性值，然后注入到类的属性中</font></p> 
</blockquote> 
<h3><a id="1_ConfigurationProperties_314"></a>1. @ConfigurationProperties注入自定义属性</h3> 
<ol><li> <p>介绍：快速方便的将<strong>配置文件中自定义属性值批量注入</strong>某个Bean对象的多个对用属性中</p> </li><li> <p><strong>三个必须</strong>：①@Component(或者其它) ②@ConfigurationProperties(prefix = “person”) ③setter()方法</p> </li><li> <p>保证：配置文件中的属性<strong>与对应实体类的属性名一致</strong>，否则无法正确获取并注入属性值</p> </li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"person"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
   <span class="token comment">//setter()方法</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_Value_331"></a>2. @Value注入注入自定义属性</h3> 
<ol><li>介绍：@Value注解是spring框架提供的，用来<strong>读取</strong>配置文件中的属性值并<strong>逐个注入</strong>bean对象的<strong>对应属性</strong>中。spring boot对@Value进行了默认继承，所以在spring boot中也可以使用。</li><li>两个必须：①@Component ②Value</li><li>注意：<br> ①@Value 可以<strong>按配置文件</strong>把属性值注入到Person的属性，也可以<strong>直接</strong>为属性赋值<br> ②但是@Value<strong>只能给普通数据类型</strong>注入属性值</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${person.id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token comment">//省略toString()=&gt;为了测试输出结果</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出结果<br> <img src="https://images2.imgbox.com/5e/dc/ln2EUphD_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="ComponentProperties__Value_350"></a>对比：@ComponentProperties 和 @Value</h3> 
<table><thead><tr><th>对比点</th><th>@ComponentProperties</th><th>@Value</th></tr></thead><tbody><tr><td>底层框架</td><td>spring boot</td><td>spring</td></tr><tr><td>功能</td><td>批量注入配置文件中的属性</td><td>单个注入</td></tr><tr><td>setter()</td><td>Y</td><td>N</td></tr><tr><td>复杂属性注入</td><td>Y</td><td>N</td></tr><tr><td>松散绑定</td><td>Y</td><td>N</td></tr><tr><td>JSR303数据校验</td><td>Y</td><td>N</td></tr><tr><td>spEL表达式</td><td>N</td><td>Y</td></tr></tbody></table> 
<p>解读：</p> 
<ol><li>setter()：<br> ①@ComponentProperties中：如果配置文件中<strong>没有配置属性值</strong>，则自动将对应的Bean属性设置为<strong>空</strong><br> ②@Value中：如果配置文件中<strong>没有配置属性值</strong>，则进行属性注入时程序<strong>自动报错</strong>，因为该注解先<strong>通过表达式读取配置文件中指定的属性值，然后自动注入到下方的Bean属性</strong>上。<br> ③也就是该注解是<strong>指定表达式进行读取，如果配置文件中没有这个表达式，那就肯定报错了</strong><br> ④而上一个注解没有特定，只指定了前缀，那么在<strong>配置文件中读取时，只读取这个前缀的属性就好了</strong>，如果bean类中的某个属性没有在配置文件中设置过它的值，那它还是它的默认值，没有改变</li><li>松散绑定<br> <code>person.firstName</code> = <code>person.first-Name</code> = <code>person.first_Name</code><br> = <code>person.FIRST_NAME(常量)</code></li><li>JSR303数据校验<br> 校验配置文件中注入对应Bean属性的值是否符合<strong>相关值的规则</strong>(但是我这里不能用)</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"person"</span><span class="token punctuation">)</span>
<span class="token comment">//进行数据校验：引入spring框架支持的数据校验规则</span>
<span class="token annotation punctuation">@Validated</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//对属性进行规则匹配：邮件规则校验</span>
	<span class="token annotation punctuation">@Email</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span>  email<span class="token punctuation">;</span>
    <span class="token comment">//setter()方法</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span>  email<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>spEl表达式<br> “#{XX}”=&gt; 直接赋值<br> <code>@Value("#{5*2}")</code><br> <code>private int id;</code></li></ol> 
<h3><a id="_392"></a>两个注解的选择</h3> 
<ol><li>如果只针对某一个业务需求，要引入配置文件中的<strong>个别</strong>属性值，推荐用@Value</li><li>如果针对某个Bean类，需要<strong>批量注入</strong>属性值，推荐使用@ComponentProperties</li></ol> 
<hr> 
<h2><a id="_398"></a>三、自定义配置文件</h2> 
<h3><a id="_399"></a>介绍</h3> 
<p>spring boot会在启动时<strong>自动加载全局配置文件</strong>，但是spring boot<strong>无法识别我们自定义的配置文件</strong>，这时就需要我们<strong>手动加载</strong>了。</p> 
<h3><a id="1_PropertySource_401"></a>1. 使用@PropertySource加载自定义配置文件</h3> 
<blockquote> 
 <p>使用<code>@PropertySource+@Configuration+@EnableConfigurationProperties)</code>注解加载自定义配置文件</p> 
</blockquote> 
<h4><a id="11__405"></a>1.1 编写配置类</h4> 
<blockquote> 
 <ol><li><code>@Configuration</code>：<br> 标记当前类为<strong>自定义配置类</strong>，该类会作为Bean添加到spring容器中，这里<strong>等同于@Component</strong></li><li><code>@PropertySource</code>：<br> 指定<strong>自定义配置文件的位置和名称</strong><br> <code>@PropertySource("classpath:test.properties")</code></li><li><code>@ConfigurationProperties</code>：将配置文件中以test开头的属性值<strong>注入</strong>到配置类的属性中<br> <code>@ConfigurationProperties(prefix = "test")</code></li><li>@EnableConfigurationProperties(MyProperties.class):<br> <strong>开启</strong>配置类MyProperties的<strong>属性注入功能</strong>，该注解<strong>配合@Configuration使用</strong>，<br> <strong>使用@Component时，可以省略这个注解</strong><br> <code>@EnableConfigurationProperties(MyProperties.class)</code></li></ol> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span><span class="token punctuation">;</span>

<span class="token comment">//@Configuration：标记当前类为自定义配置类，该类会作为Bean添加到spring容器中，这里等同于@Component</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token comment">//@PropertySource：指定自定义配置文件的位置和名称</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">"classpath:test.properties"</span><span class="token punctuation">)</span>
<span class="token comment">//@ConfigurationProperties：将配置文件中以test开头的属性值注入到配置类的属性中</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">)</span>
<span class="token comment">//@EnableConfigurationProperties(MyProperties.class):开启配置类MyProperties的属性注入功能，该注解配合@Configuration使用，</span>
<span class="token comment">// 使用@Component时，可以省略这个注解</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">MyProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyProperties</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"MyProperties{"</span> <span class="token operator">+</span>
                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="12__467"></a>1.2 编写自定义配置文件</h4> 
<p>新建配置文件test.properties<br> <img src="https://images2.imgbox.com/65/09/sWs3dTrU_o.png" alt="在这里插入图片描述"><br> 编写</p> 
<pre><code class="prism language-yaml">test.id=1
test.name=test
</code></pre> 
<h4><a id="13__477"></a>1.3 编写测试类</h4> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">MyProperties</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Chapter02ApplicationTests</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MyProperties</span> myProperties<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">myPropertiesTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="14__499"></a>1.4 测试输出</h4> 
<p>运行myPropertiesTest()单元测试方法<br> <img src="https://images2.imgbox.com/eb/e7/By5Gbfit_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_ImportResourcexml_504"></a>2. @ImportResource加载xml配置文件</h3> 
<p>由于这个只在特殊情况下使用，一般使用配置类代替，所以这里简单介绍它的使用方式就好了</p> 
<blockquote> 
 <ol><li>前提：<br> spring boot中<strong>默认不再使用xml配置文件</strong>，且<strong>xml配置文件不会加载到spring容器中</strong>。</li><li>那如何将xml文件加载到项目中？<br> 使用 <strong>@ImportResource加载xml配置文件</strong> 或者 使用 <strong>@Configuration编写自定义配置类</strong></li></ol> 
</blockquote> 
<blockquote> 
 <p>模拟一下，不写代码<br> 需求：<strong>用xml文件</strong>将MyService类作为组件加入到spring容器<br> 注意：<code>@ImportResource</code>注解要<strong>加在主程序启动类上</strong></p> 
</blockquote> 
<p>① 写一个类MyService，里面什么都不写</p> 
<p>② <strong>编写xml文件</strong>，将MyService类作为组件加入到spring容器</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>XXX.XXX.XXX.MyService<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>③ 在主程序启动类上面加<code>@ImportResource</code>：<strong>因为springboot不会自动加载xml文件到spring容器中，所以需要注解来加载xml配置文件</strong></p> 
<p>④ 编写测试方法，测试容器中是否包含id为"myService"的组件=&gt;测试结果为true</p> 
<pre><code class="prism language-java"><span class="token comment">//用@Autowired注入了applicationContext对象</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span>myService<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h3><a id="3_Configuration_534"></a>3. @Configuration编写自定义配置类</h3> 
<blockquote> 
 <ol><li><strong>用自定义配置类来实现</strong>@ImportResource中的案例，<strong>将类作为组件加入Spring容器</strong></li><li>需求：用MyConfig自定义配置类 来实现 将MyService类作为组件加入到spring容器中 =&gt; <font color="red"> <strong>用自定义配置类代替xml文件</strong></font></li><li>解读：<br> ① 用 <strong><code>@Configuration</code>声明的</strong>MyConfig自定义<strong>配置类 类似与声明了一个xml配置文件</strong>，<strong>且能被spring boot自动扫描识别</strong>(相当于@ImportProperties加载xml文件，使springboot能够扫描到引入的xml文件)<br> ② <strong><code>@Bean</code>注解的</strong>myService()<strong>方法</strong>，<strong>其返回值对象作为组件添加到spring容器中，方法名为组件id</strong>(类似与XMl配置文件中的<code>&lt;bean id="myService" class="XXX.XXX.XXX.MyService"/&gt;</code>)</li><li>概括：<br> <font color="red">@Configuration替代引入xml文件<br> @Bean替代xml文件中的内容<code>&lt;bean id="myService" class="XXX.XXX.XXX.MyService"/&gt;</code></font></li></ol> 
</blockquote> 
<h4><a id="31_ConfigurationBean_545"></a>3.1 @Configuration+@Bean编写自定义配置类</h4> 
<p>在chapter02项目代码的基础上，创建MyConfig类和MyService类<br> MyService类什么都不写<br> <img src="https://images2.imgbox.com/68/39/rx73RuqY_o.png" alt="在这里插入图片描述"><br> 编写配置类</p> 
<blockquote> 
 <p>@Configuration+@Bean编写自定义配置类</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token comment">//使用@Configuration将MyConfig类声明为一个配置类</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//配置类中的@Bean注解标注的方法</span>
    <span class="token comment">//- 方法返回值：返回值对象作为Bean组件注入spring容器</span>
    <span class="token comment">//- 方法名：组件的组件名(id)</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MyService</span> <span class="token function">myService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="32__572"></a>3.2 编写测试方法</h4> 
<p>注意ApplicationContext导入的包：import org.springframework.context.ApplicationContext;</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wpz<span class="token punctuation">.</span>chapter02</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Chapter02ApplicationTests</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">myConfigTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断spring容器中是否有id为myService的组件</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"myService"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="33__594"></a>3.3 测试输出</h4> 
<p>运行myConfigTest()方法<br> <img src="https://images2.imgbox.com/ae/e9/fIENbOT2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="34__597"></a>3.4 总结</h4> 
<ol><li>我们想把某类注入spring容器，以前是通过xml文件配置的，现在通过自定义配置类来实现</li><li>使用@Configuration+@Bean进行配置，使得某类注入spring容器</li><li>spring boot项目启动时，会自动加载自定义配置类，不用导入xml文件再用@ImportProperties来手动加载xml文件了</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b6fd381aa3aa07b9a5d3bf2df6cfa69/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用蓝桥杯嵌入式旧板实现LCD显示波形和幅度谱</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e99655411f698aec2f4c0e7c1440a069/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux 系统级程序设计-1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>