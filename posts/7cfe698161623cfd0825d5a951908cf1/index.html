<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>利用反射，通过key获取value(所有枚举类） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="利用反射，通过key获取value(所有枚举类）" />
<meta property="og:description" content="public class EnumConvertTools { private EnumConvertTools() { throw new IllegalStateException(&#34;Utility class&#34;); } /** * @description:通用的枚举转换的工具类 * &lt;p&gt; * 通过传入的参数,获取枚举的信息 * clazz 为对象的class对象 * convertType 为枚举的信息 * value 为比对的Key值 * &lt;/p&gt; * @Date: 2022/12/4 23:24 * @jdk: 1.8 */ public static &lt;T&gt; String getEnumNameOrCodeByConvert(Class&lt;T&gt; clazz, String convertType, String value) { if (StringUtils.isNotBlank(value)) { //Enum接口中没有values()方法，我们仍然可以通过Class对象取得所有的enum实例 T[] arr = clazz.getEnumConstants(); //通过类型进行判定 if (EnumConvertEnum.ConvertTypeEnum.CODE_TO_NAME.getCode().equals(convertType)) { //通过code获取name return getNameByCode(clazz, arr, value); }else if (EnumConvertEnum.ConvertTypeEnum.NAME_TO_CODE.getCode().equals(convertType)) { //通过name获取code return getCodeByName(clazz, arr, value); }else { throw new YnetPlatformException(ErrorConstantPlatformVariable." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7cfe698161623cfd0825d5a951908cf1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-10T16:16:44+08:00" />
<meta property="article:modified_time" content="2023-05-10T16:16:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">利用反射，通过key获取value(所有枚举类）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-java">public class EnumConvertTools {

    private EnumConvertTools() {
        throw new IllegalStateException("Utility class");
    }
     /**
      * @description:通用的枚举转换的工具类
      * &lt;p&gt;
      *     通过传入的参数,获取枚举的信息
      *     clazz 为对象的class对象
      *     convertType 为枚举的信息
      *     value 为比对的Key值
      * &lt;/p&gt;
      * @Date: 2022/12/4 23:24
      * @jdk: 1.8
      */
    public static &lt;T&gt; String getEnumNameOrCodeByConvert(Class&lt;T&gt; clazz, String convertType, String value) {
        if (StringUtils.isNotBlank(value)) {
            //Enum接口中没有values()方法，我们仍然可以通过Class对象取得所有的enum实例
            T[] arr = clazz.getEnumConstants();
            //通过类型进行判定
            if (EnumConvertEnum.ConvertTypeEnum.CODE_TO_NAME.getCode().equals(convertType)) {
                //通过code获取name
                return getNameByCode(clazz, arr, value);
            }else if (EnumConvertEnum.ConvertTypeEnum.NAME_TO_CODE.getCode().equals(convertType)) {
                //通过name获取code
                return getCodeByName(clazz, arr, value);
            }else {
                throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"枚举的此种转换暂时不支持!");
            }
        }
        return null;
    }

     /**
      * @description:通过name获取code
      * @Date: 2022/12/5 8:58
      * @jdk: 1.8
      */
    private static  &lt;T&gt; String getCodeByName(Class&lt;T&gt; clazz, T[] arr, String value) {
        try {
            //获取执行的方法名称
            Method getCode = clazz.getDeclaredMethod("getCode");
            //获取getName的方法
            Method methodByConvert = getMethodByConvert(clazz);
            //定义获取到的名称
            for (T entity : arr) {
                //获取名称
                String name = methodByConvert.invoke(entity).toString();
                if (value.equals(name)) {
                    return getCode.invoke(entity).toString();
                }
            }
        }catch (Exception e) {
            throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"枚举方法获取失败!");
        }
        return null;
    }

     /**
      * @description:通过code获取name
      * @Date: 2022/12/4 23:31
      * @jdk: 1.8
      */
    private static &lt;T&gt; String getNameByCode(Class&lt;T&gt; clazz, T[] arr, String value) {
        try {
            //获取执行的方法名称
            Method getCode = clazz.getDeclaredMethod("getCode");
            //获取getName的方法
            Method methodByConvert = getMethodByConvert(clazz);
            for (T entity : arr) {
                //获取传过来方法的
                String typeCodeVal = getCode.invoke(entity).toString();
                if (typeCodeVal.equals(value)) {
                    return methodByConvert.invoke(entity).toString();
                }
            }
        }catch (Exception e) {
            throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"枚举方法获取失败!");
        }
        return null;
    }

     /**
      * @description:公共的获取method的方法
      * @Date: 2022/12/5 8:57
      * @jdk: 1.8
      */
    private static &lt;T&gt; Method getMethodByConvert(Class&lt;T&gt; clazz) {
        try {
            return clazz.getDeclaredMethod("getCnName");
        }catch (Exception e) {
            try {
                return clazz.getDeclaredMethod("getName");
            }catch (Exception ee) {
                throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"获取Name的方法异常,请联系管理员!");
            }
        }
    }

    /**
     * @description:通过枚举的方法获取到枚举的对象信息
     * &lt;p&gt;
     *     此方法通过传入枚举的方法与方法对应的Key做对比 返回匹配到的枚举对象
     * &lt;/p&gt;
     * @Date: 2022/12/5 9:04
     * @jdk: 1.8
     */
    public static &lt;T extends Enum&lt;T&gt;&gt; T getEnumObjectByInvoke(Class&lt;T&gt; clazz, String convertMethodName
            , String value) {
        //判空可以自由发挥
        judgeFiledByEnumObject(value);
        //定义返回值
        T result = null;
        try {
            //Enum接口中没有values()方法，我们仍然可以通过Class对象取得所有的enum实例
            T[] arr = clazz.getEnumConstants();
            //获取定义的方法
            Method targetMethod = clazz.getDeclaredMethod(convertMethodName);
            String typeCodeVal;
            //遍历枚举定义
            for (T entity : arr) {
                //获取传过来方法的
                typeCodeVal = targetMethod.invoke(entity).toString();
                //执行的方法的值等于参数传过来要判断的值
                if (value.equals(typeCodeVal)) {
                    result = entity;
                    break;
                }
            }
        } catch (IllegalAccessException | SecurityException | IllegalArgumentException | NoSuchMethodException |
                 InvocationTargetException e) {
            throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"枚举的对象信息转换失败!");
        }
        return result;
    }

     /**
      * @description:判空可以自由发挥
      * @Date: 2022/12/5 9:06
      * @jdk: 1.8
      */
    private static void judgeFiledByEnumObject(String value) {
        if (StringUtils.isBlank(value)) {
            throw new YnetPlatformException(ErrorConstantPlatformVariable.SYS_THROW_INFO_CODE,"传入转换的参数不能为空!");
        }

    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5673a7237e4bf8a5406a2c87bab676be/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VIVADO时序约束之时序例外(set_multicycle_path)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64e1df68d8b02df9e5471ef2c6387495/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Go语言设计模式之责任链模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>