<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle按日周月年自动分区 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Oracle按日周月年自动分区" />
<meta property="og:description" content="目录
1、分区键
2、初始分区
3、周月年自动分区
4、按日自动分区表建表语句
与普通建表语句相比，分区表多了一些分区信息；
1、分区键 以下面销售明细表为例，以data_dt为分区键，NUMTODSINTERVAL(1, &#39;day&#39;) 按日分区
PARTITION BY RANGE (data_dt) INTERVAL (NUMTODSINTERVAL(1, &#39;day&#39;))
2、初始分区 设置part_t01为初始的分区，可以根据实际需求设置初始分区的边界。
(PARTITION part_t01 VALUES LESS THAN(to_date(&#39;2020-01-01&#39;, &#39;yyyy-mm-dd&#39;)))
3、周月年自动分区 按其他周月年分区需要 替换 标黄部分。（前缀英文不一样注意区分）
PARTITION BY RANGE (data_dt) INTERVAL (NUMTODSINTERVAL(1, &#39;day&#39;))
--按日分区 NUMTODSINTERVAL(1, &#39;day&#39;)
--按周分区 NUMTODSINTERVAL (7, &#39;day&#39;)
--按月分区 NUMTOYMINTERVAL(1, &#39;month&#39;)
--按年分区 NUMTOYMINTERVAL(1, &#39;year&#39;) 4、按日自动分区表建表语句 -- Create table CREATE TABLE sales_info ( data_dt DATE, prod_id VARCHAR2(50), prod_num VARCHAR2(50), prod_nm VARCHAR2(100), prod_color VARCHAR2(20), prod_size VARCHAR2(10), quantity_sold INTEGER, data_tm TIMESTAMP ) PARTITION BY RANGE (data_dt) INTERVAL (NUMTODSINTERVAL(1, &#39;day&#39;)) (partition part_t01 values less than(to_date(&#39;2020-01-01&#39;, &#39;yyyy-mm-dd&#39;))); ; --按日分区 NUMTODSINTERVAL(1, &#39;day&#39;) --按周分区 NUMTODSINTERVAL (7, &#39;day&#39;) --按月分区 NUMTOYMINTERVAL(1, &#39;month&#39;) --按年分区 NUMTOYMINTERVAL(1, &#39;year&#39;) 【注】" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/57f70a32a6cbb629b5d122e21716a8a9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-25T19:41:50+08:00" />
<meta property="article:modified_time" content="2024-01-25T19:41:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle按日周月年自动分区</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81%E5%88%86%E5%8C%BA%E9%94%AE-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%86%E5%8C%BA%E9%94%AE" rel="nofollow">1、分区键</a></p> 
<p id="2%E3%80%81%E5%88%9D%E5%A7%8B%E5%88%86%E5%8C%BA-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%88%9D%E5%A7%8B%E5%88%86%E5%8C%BA" rel="nofollow">2、初始分区</a></p> 
<p id="3%E3%80%81%E5%91%A8%E6%9C%88%E5%B9%B4%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%91%A8%E6%9C%88%E5%B9%B4%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA" rel="nofollow">3、周月年自动分区</a></p> 
<p id="4%E3%80%81%E6%8C%89%E6%97%A5%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA%E8%A1%A8%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E6%8C%89%E6%97%A5%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA%E8%A1%A8%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5" rel="nofollow">4、按日自动分区表建表语句</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>与普通建表语句相比，分区表多了一些分区信息；</p> 
<h3 id="1%E3%80%81%E5%88%86%E5%8C%BA%E9%94%AE">1、分区键</h3> 
<p>以下面销售明细表为例，以<span style="background-color:#f9eda6;">data_dt</span>为分区键，<span style="background-color:#f9eda6;">NUMTODSINTERVAL(1, 'day') </span>按日分区</p> 
<blockquote> 
 <p>PARTITION BY RANGE (<span style="background-color:#f9eda6;">data_dt</span>) INTERVAL (<span style="background-color:#f9eda6;">NUMTODSINTERVAL(1, 'day')</span>)</p> 
</blockquote> 
<h3 id="2%E3%80%81%E5%88%9D%E5%A7%8B%E5%88%86%E5%8C%BA">2、初始分区</h3> 
<p>设置<span style="background-color:#f9eda6;">part_t01</span>为初始的分区，可以根据实际需求设置初始分区的边界。</p> 
<blockquote> 
 <p>(PARTITION <span style="background-color:#f9eda6;">part_t01 </span>VALUES LESS THAN(to_date('2020-01-01', 'yyyy-mm-dd')))</p> 
</blockquote> 
<h3 id="3%E3%80%81%E5%91%A8%E6%9C%88%E5%B9%B4%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA">3、周月年自动分区</h3> 
<p>按其他周月年分区需要 替换 标黄部分。（<span style="background-color:#f9eda6;">前缀英文不一样注意区分</span>）</p> 
<blockquote> 
 <p>PARTITION BY RANGE (data_dt) INTERVAL (<span style="background-color:#f9eda6;">NUMTODSINTERVAL(1, 'day')</span>)</p> 
 <p>--按日分区 NUMTODSINTERVAL(1, 'day')<br> --按周分区 NUMTODSINTERVAL (7, 'day')<br> --按月分区 NUMTOYMINTERVAL(1, 'month')<br> --按年分区 NUMTOYMINTERVAL(1, 'year') </p> 
</blockquote> 
<h3 id="4%E3%80%81%E6%8C%89%E6%97%A5%E8%87%AA%E5%8A%A8%E5%88%86%E5%8C%BA%E8%A1%A8%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5">4、按日自动分区表建表语句</h3> 
<pre><code class="language-sql">-- Create table
CREATE TABLE sales_info
(
  data_dt DATE,
  prod_id     VARCHAR2(50),
  prod_num VARCHAR2(50),
  prod_nm   VARCHAR2(100),
  prod_color VARCHAR2(20),
  prod_size VARCHAR2(10),
  quantity_sold   INTEGER,
  data_tm  TIMESTAMP
)
PARTITION BY RANGE (data_dt) INTERVAL (NUMTODSINTERVAL(1, 'day'))
(partition part_t01 values less than(to_date('2020-01-01', 'yyyy-mm-dd')));
;
--按日分区 NUMTODSINTERVAL(1, 'day')
--按周分区 NUMTODSINTERVAL (7, 'day')
--按月分区 NUMTOYMINTERVAL(1, 'month')
--按年分区 NUMTOYMINTERVAL(1, 'year') </code></pre> 
<p>【注】</p> 
<p>NUMTODSINTERVAL 常用单位为（'day','hour','minute','second'）</p> 
<p>NUMTOYMINTERVAL 常用单位为（'year','month'）</p> 
<p></p> 
<p>参考：<a href="https://www.cnblogs.com/gongshun/p/10620252.html" rel="nofollow" title="ORACLE创建按日期自动分区表 - 1只在路上的程序猿 - 博客园 (cnblogs.com)">ORACLE创建按日期自动分区表 - 1只在路上的程序猿 - 博客园 (cnblogs.com)</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa3fe039a985e1ca9a72f90526171f46/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">x-cmd pkg | sqlite3 - 轻量级的嵌入式关系型数据库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ddcced4d3a7833ca21e6c85e81e15e24/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C&#43;&#43;】list的模拟实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>