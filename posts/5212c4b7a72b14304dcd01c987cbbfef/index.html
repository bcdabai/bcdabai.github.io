<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker基本命令 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker基本命令" />
<meta property="og:description" content="目录
1.启动类命令
2.镜像命令
3.commit命令
3.1镜像
3.2commit操作
4.容器数据卷
4.1读写规则
4.2继承
1.启动类命令 systemctl start dock 启动
systemctl stop dockerer 停止
systemctl restart docker 重启
systemctl status docker 查看状态
systemctl enable docker 开机启动
docker info 查看概要信息
docker --help 查看帮助文档
docker 具体命令 --help 具体指令
2.镜像命令 docker update --restart=always [容器id] 更新自动启动
docker update --restart=no [容器id] (默认退出不自动重启) docker images [选项] 列出本机所有镜像 选项 -a列出所有本地镜像（包含映像层）-q只显示镜像ID
docker search [OPTIONS] 镜像名字 网站 Docker Hub 选项--limit 只列出第几个镜像 ，默认25个
docker pull 镜像名字[:TAG] 默认最新版" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5212c4b7a72b14304dcd01c987cbbfef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-29T08:35:13+08:00" />
<meta property="article:modified_time" content="2023-05-29T08:35:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker基本命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1.%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#1.%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%91%BD%E4%BB%A4" rel="nofollow">1.启动类命令</a></p> 
<p id="2.%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#2.%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4" rel="nofollow">2.镜像命令</a></p> 
<p id="3.commit%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#3.commit%E5%91%BD%E4%BB%A4" rel="nofollow">3.commit命令</a></p> 
<p id="3.1%E9%95%9C%E5%83%8F-toc" style="margin-left:40px;"><a href="#3.1%E9%95%9C%E5%83%8F" rel="nofollow">3.1镜像</a></p> 
<p id="%C2%A03.2commit%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%C2%A03.2commit%E6%93%8D%E4%BD%9C" rel="nofollow"> 3.2commit操作</a></p> 
<p id="4.%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7-toc" style="margin-left:0px;"><a href="#4.%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7" rel="nofollow">4.容器数据卷</a></p> 
<p id="4.1%E8%AF%BB%E5%86%99%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#4.1%E8%AF%BB%E5%86%99%E8%A7%84%E5%88%99" rel="nofollow">4.1读写规则</a></p> 
<p id="4.2%E7%BB%A7%E6%89%BF-toc" style="margin-left:40px;"><a href="#4.2%E7%BB%A7%E6%89%BF" rel="nofollow">4.2继承</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%91%BD%E4%BB%A4">1.启动类命令</h2> 
<p>systemctl start dock 启动</p> 
<p>systemctl stop dockerer 停止</p> 
<p>systemctl restart docker          重启</p> 
<p>systemctl status docker          查看状态</p> 
<p>systemctl enable docker         开机启动</p> 
<p>docker info 查看概要信息</p> 
<p>docker --help         查看帮助文档</p> 
<p>docker 具体命令 --help 具体指令</p> 
<h2 id="2.%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4">2.镜像命令</h2> 
<p><span style="color:#fe2c24;">docker update --restart=always [容器id]     </span>                        更新自动启动</p> 
<p><span style="color:#fe2c24;">docker update --restart=no [容器id]     </span>                               (默认退出不自动重启)                                                                                </p> 
<p><span style="color:#fe2c24;">docker images [选项] </span>         列出本机所有镜像 选项 -a列出所有本地镜像（包含映像层）-q只显示镜像ID</p> 
<p><img alt="" height="151" src="https://images2.imgbox.com/49/de/I3fhQwHr_o.png" width="769"></p> 
<p><span style="color:#fe2c24;">docker search [OPTIONS] 镜像名字 </span>             网站 <a href="https://hub.docker.com" rel="nofollow" title="Docker Hub">Docker Hub</a>  选项--limit 只列出第几个镜像 ，默认25个</p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/2d/b1/oZ3oIgcH_o.png" width="1200"></p> 
<p><span style="color:#fe2c24;"> docker pull 镜像名字[:TAG]</span>         默认最新版</p> 
<p>                                                        举例：docker pull redis:6.0.8</p> 
<p><span style="color:#fe2c24;">docker tag [镜像ID] [新镜像名称]:[Tag]</span>   镜像重新命名复制，之后还得把多余的删掉</p> 
<p><span style="color:#fe2c24;">docker system df</span>          查看镜像/容器/数据卷所占的空间</p> 
<p><span style="color:#fe2c24;">docker rmi  -f 镜像ID </span>        删除镜像</p> 
<p><span style="color:#fe2c24;">docker rmi -f 镜像名1:TAG 镜像名2:TAG          删除多个镜像</span></p> 
<p><span style="color:#fe2c24;">docker rmi -f $(docker images -qa</span>)         删除全部镜像</p> 
<p><span style="color:#fe2c24;">docker run [选项] IMAGE [COMMAND] [ARG...]   </span>       docker启动服务</p> 
<p>        选项：--name="容器新名字"</p> 
<p>                -d: 后台运行容器并返回容器ID，启动守护式容器(后台运行)；</p> 
<p>                -i：以交互模式运行容器，通常与 -t 同时使用；</p> 
<p>                -t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；</p> 
<p>                -P: 随机端口映射，大写P<br>                 -p: 指定端口映射，小写p         说明-p 端口1：端口2      <span style="color:#fe2c24;">端口1主机端口，端口2容器端</span> </p> 
<p>        举例：docker run -it ubuntu /bin/bash </p> 
<p><img alt="" height="216" src="https://images2.imgbox.com/1e/23/cjr3dD2S_o.png" width="880"></p> 
<p><span style="color:#fe2c24;"> 退出形式</span>：1.exit         run进去容器，exit退出，容器停止</p> 
<p>                        2.ctrl+p+q， run进去容器，容器不停止</p> 
<p><span style="color:#fe2c24;">docker start 容器ID或者容器者</span>         启动已停止运行的容器</p> 
<p><span style="color:#fe2c24;">docker restart 容器ID或容器明 </span>        重启重启</p> 
<p><span style="color:#fe2c24;">docker stop  容器ID或者容器名</span>          停止容器</p> 
<p><span style="color:#fe2c24;">docker kill 容器ID或容器名</span>         强制停止容器</p> 
<p><span style="color:#fe2c24;">docker rm 容器ID </span>        删除已经停止容器 举例：docker rm -f $(docker ps -a -q)   docker ps -a -q |                                         xargs docker rm</p> 
<p><span style="color:#fe2c24;">docker run -d容器</span>         在后台开启守护进程</p> 
<p>                                        ps:docker run -d redis:6.0.8</p> 
<p><span style="color:#fe2c24;">docker logs uid</span>        查看日志</p> 
<p>举例docker logs 2ad6d35b3de2</p> 
<p>        docker top UID查看容器内的进程</p> 
<p>ps:<img alt="" height="190" src="https://images2.imgbox.com/69/ce/Jl3A7fJ6_o.png" width="1198"></p> 
<p><span style="color:#fe2c24;"> docker inspect uid         </span>查看容器内部细节</p> 
<p>ps:</p> 
<p><img alt="" height="484" src="https://images2.imgbox.com/bc/5c/LjjNOH53_o.png" width="911"></p> 
<p><span style="color:#fe2c24;"> docker exec -it 容器ID bashShell         </span><span style="color:#0d0016;">退出ctrl+p+d的时候 可以再次进去</span></p> 
<p><span style="color:#fe2c24;">docker attach 容器ID         </span><span style="color:#0d0016;">重新进入</span></p> 
<p><span style="color:#0d0016;">ps :attach直接进入容器启动命令的终端，不会启动新的进程。用exit退出，会导致容器停止</span></p> 
<p><span style="color:#0d0016;">       </span><span style="color:#a2e043;">exec</span><span style="color:#0d0016;">在容器中打开新的终端，并且可以启动新的进程，不会导致容器停止（</span><span style="color:#a2e043;">多用这个</span><span style="color:#0d0016;">）</span></p> 
<p><span style="color:#fe2c24;">docker cp</span>  容器ID:容器内路径 目的主机路径         拷贝容器的内容</p> 
<p><span style="color:#fe2c24;">docker export </span>容器ID &gt; 文件名.tar       文件备份</p> 
<p>cat 文件名.tar | docker import - 镜像用户/镜像名:镜像版本号         把备份的文件进行恢复</p> 
<p><span style="color:#fe2c24;">docker update --restart=always</span> <span style="color:#fe2c24;">容器名字或ID   </span>       docker容器启动的时候默认开启</p> 
<p><span style="color:#fe2c24;">docker run  -it --name test --restart=always 容器id /bash    </span><span style="color:#0d0016;">在docker容器刚运行的时候设置自动启动</span></p> 
<h2 id="3.commit%E5%91%BD%E4%BB%A4">3.commit命令</h2> 
<h3 id="3.1%E9%95%9C%E5%83%8F">3.1镜像</h3> 
<p><strong>镜像概念</strong>：是一种轻量级、可执行的独立软件包，它包含运行某个软件所需的所有内容，我们把应用程序和配置依赖打包好形成一个可交付的运行环境(包括代码、运行时需要的库、环境变量和配置文件等)，这个打包好的运行环境就是image镜像文件。</p> 
<p>只有通过镜像才可以生成Docker容器实例</p> 
<p><strong>镜像分层： </strong></p> 
<p>docker镜像实际是由一层一层的文件系统生成，docker最底层是引导文件系统bootfs.</p> 
<p>镜像分层最大的一个好处是共享资源，方便复制迁移，方便复用</p> 
<p>比如说有多个镜像都从相同的 base 镜像构建而来，那么 Docker Host 只需在磁盘上保存一份 base 镜像；<br> 同时内存中也只需加载一份 base 镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。</p> 
<p>当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作<span style="color:#fe2c24;">“容器层”</span>，“容器层”之下的都叫<span style="color:#fe2c24;">“镜像层”</span>。</p> 
<p><span style="color:#fe2c24;">Docker镜像层只读，容器层可写</span></p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/ad/88/xG28pgH4_o.png" width="539"></p> 
<h3 id="%C2%A03.2commit%E6%93%8D%E4%BD%9C"> 3.2commit操作</h3> 
<p>ubuntu默认不带vim文本编辑器，重写下载再生成新的容器</p> 
<p>安装vim：</p> 
<p><span style="color:#fe2c24;">apt-get update</span></p> 
<p><span style="color:#fe2c24;">apt-get -y install vim</span></p> 
<p>下载完vim再进行打包</p> 
<p><span style="color:#fe2c24;">docker commit -m="add vim " -a="qing" 0e6971a99d41 qing/myubuntu:1.2 </span></p> 
<p>-m "提交信息" -a "作者"  UID 新的镜像名字</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/ae/48/Lb5fKCcs_o.png" width="1051"></p> 
<h2 id="4.%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7">4.容器数据卷</h2> 
<p>主要功能：</p> 
<p>运行镜像的时候，希望对里面的数据进行持久化</p> 
<p>特点：</p> 
<p>1.数据卷可在容器之间共享或重用数据</p> 
<p>2.卷中的更改可以直接实时生效</p> 
<p>3.数据卷中的更改不会包含在镜像的更新中</p> 
<p>4.数据卷的生命周期一直持续到没有容器使用它为止</p> 
<h3 id="4.1%E8%AF%BB%E5%86%99%E8%A7%84%E5%88%99">4.1读写规则</h3> 
<p> <span style="color:#fe2c24;">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录 镜像名</span>     -v表示挂载</p> 
<p>举例：</p> 
<p>docker run -it  --privileged=true -v /mydocker/u:/tmp<span style="color:#fe2c24;">[选项] </span>--name u1 ubuntu  </p> 
<p>解释：启动ubuntu容器，并把ubuntu中的<span style="color:#0d0016;">容器内目录地址映射到主机的</span>/mydocker/u的容器中</p> 
<p>参数：</p> 
<p>rw:     读写<span style="color:#fe2c24;">（默认）</span></p> 
<p>ro：只读</p> 
<h3 id="4.2%E7%BB%A7%E6%89%BF">4.2继承</h3> 
<p>--volumes-from ：继承</p> 
<p>举例：</p> 
<p>docker run -it  --privileged=true  --volumes-from  u1<span style="color:#fe2c24;"> </span>--name u2 ubuntu </p> 
<p>解释：</p> 
<p>u2继承u1，相当于一个主机上面挂了两个镜像，在主机上修改每个镜像都会有改变</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b794c99b2ca8cedd09ab1680d6ea1255/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git修改历史提交(commit)信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f846a0066d7f7017e6fd20936f55e90c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">axis = 0 &amp; axis = 1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>