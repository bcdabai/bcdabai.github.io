<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT笔记——初识QHostInfo、QHostAddress、QNetworkInterface - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT笔记——初识QHostInfo、QHostAddress、QNetworkInterface" />
<meta property="og:description" content="网络模块需要在.pro文件中添加 QT &#43;= network QHostInfo 利用操作系统提供的查询机制来查询与特定主机名相关联的主机的 IP 地址
头文件：#include&lt;QHostInfo&gt;
//获取本机的名称 QString loaclHostName = QHostInfo::localHostName(); qDebug()&lt;&lt;&#34;本机名称为：&#34;&lt;&lt;loaclHostName; QHostAddress类提供一个IP地址。 这个类提供一种独立于平台和协议的方式来保存IPv4和IPv6地址。
头文件：#include&lt;QHostAddress&gt;
//通过本机名获取本机对象 QHostInfo info = QHostInfo::fromName(loaclHostName); //获取所有的IP地址 QList&lt;QHostAddress&gt; allAddresslist = info.addresses(); foreach(QHostAddress address, allAddresslist) { //协议为IPv4时 if(address.protocol() == QAbstractSocket::IPv4Protocol) { qDebug()&lt;&lt;&#34;IP地址为：&#34;&lt;&lt;address.toString(); } } QNetworkInterface类提供了程序所运行时的主机的IP地址和网络接口信息的列表。在每一个网络接口信息中都包含了0个或多个IP地址，而每一个IP地址又包含了和它相关的子网掩码和广播地址，它们三者被封装在一个QNetworkAddressEntry对象中。
头文件：#include&lt;QNetworkInterface&gt;
QList&lt;QNetworkInterface&gt; list = QNetworkInterface::allInterfaces(); //遍历每一个网络接口 foreach(QNetworkInterface interface,list) { qDebug() &lt;&lt; &#34;设备名: &#34;&lt;&lt;interface.name(); qDebug() &lt;&lt; &#34;硬件地址: &#34;&lt;&lt;interface.hardwareAddress(); //获取IP地址条目列表，每个条目中包含一个IP地址，一个子网掩码和一个广播地址 QList&lt;QNetworkAddressEntry&gt; entryList = interface.addressEntries(); //遍历每一个IP地址条目 foreach(QNetworkAddressEntry entry,entryList) { qDebug()&lt;&lt;&#34;IP地址: &#34;&lt;&lt;entry.ip().toString(); qDebug()&lt;&lt;&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/860a42846ae839d31d9570485f6dc582/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-14T22:36:22+08:00" />
<meta property="article:modified_time" content="2021-06-14T22:36:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT笔记——初识QHostInfo、QHostAddress、QNetworkInterface</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="pro_QT__network_0"></a><strong>网络模块需要在.pro文件中添加 <code>QT += network</code></strong></h3> 
<blockquote> 
 <p>QHostInfo 利用操作系统提供的查询机制来查询与特定主机名相关联的主机的 IP 地址</p> 
</blockquote> 
<p>头文件：<code>#include&lt;QHostInfo&gt;</code></p> 
<pre><code class="prism language-cpp"><span class="token comment">//获取本机的名称</span>
QString loaclHostName <span class="token operator">=</span> <span class="token class-name">QHostInfo</span><span class="token operator">::</span><span class="token function">localHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"本机名称为："</span><span class="token operator">&lt;&lt;</span>loaclHostName<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>QHostAddress类提供一个IP地址。 这个类提供一种独立于平台和协议的方式来保存IPv4和IPv6地址。</p> 
</blockquote> 
<p>头文件：<code>#include&lt;QHostAddress&gt;</code></p> 
<pre><code class="prism language-cpp"><span class="token comment">//通过本机名获取本机对象</span>
QHostInfo info <span class="token operator">=</span> <span class="token class-name">QHostInfo</span><span class="token operator">::</span><span class="token function">fromName</span><span class="token punctuation">(</span>loaclHostName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取所有的IP地址</span>
QList<span class="token operator">&lt;</span>QHostAddress<span class="token operator">&gt;</span> allAddresslist <span class="token operator">=</span> info<span class="token punctuation">.</span><span class="token function">addresses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foreach</span><span class="token punctuation">(</span>QHostAddress address<span class="token punctuation">,</span> allAddresslist<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//协议为IPv4时</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">protocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QAbstractSocket<span class="token operator">::</span>IPv4Protocol<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
         <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"IP地址为："</span><span class="token operator">&lt;&lt;</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>QNetworkInterface类提供了程序所运行时的主机的IP地址和网络接口信息的列表。在每一个网络接口信息中都包含了0个或多个IP地址，而每一个IP地址又包含了和它相关的子网掩码和广播地址，它们三者被封装在一个QNetworkAddressEntry对象中。</p> 
</blockquote> 
<p>头文件：<code>#include&lt;QNetworkInterface&gt;</code></p> 
<pre><code class="prism language-cpp">     QList<span class="token operator">&lt;</span>QNetworkInterface<span class="token operator">&gt;</span> list <span class="token operator">=</span> <span class="token class-name">QNetworkInterface</span><span class="token operator">::</span><span class="token function">allInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//遍历每一个网络接口</span>
     <span class="token function">foreach</span><span class="token punctuation">(</span>QNetworkInterface interface<span class="token punctuation">,</span>list<span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"设备名: "</span><span class="token operator">&lt;&lt;</span>interface<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"硬件地址: "</span><span class="token operator">&lt;&lt;</span>interface<span class="token punctuation">.</span><span class="token function">hardwareAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取IP地址条目列表，每个条目中包含一个IP地址，一个子网掩码和一个广播地址</span>
        QList<span class="token operator">&lt;</span>QNetworkAddressEntry<span class="token operator">&gt;</span> entryList <span class="token operator">=</span> interface<span class="token punctuation">.</span><span class="token function">addressEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//遍历每一个IP地址条目</span>
        <span class="token function">foreach</span><span class="token punctuation">(</span>QNetworkAddressEntry entry<span class="token punctuation">,</span>entryList<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
           <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"IP地址: "</span><span class="token operator">&lt;&lt;</span>entry<span class="token punctuation">.</span><span class="token function">ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"子网掩码: "</span><span class="token operator">&lt;&lt;</span>entry<span class="token punctuation">.</span><span class="token function">netmask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"广播地址: "</span><span class="token operator">&lt;&lt;</span>entry<span class="token punctuation">.</span><span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/01/ae/5cuCn8Y9_o.png" alt="在这里插入图片描述"><br> 参考博客：<a href="https://blog.csdn.net/flowerspring/article/details/51001597">https://blog.csdn.net/flowerspring/article/details/51001597</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43e39aba01ef8561b2ef66c9e932fbf7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">#vue# 【二】本地电脑如何配置host文件？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5dcaa086be3c3d2c1f61112d89a42c37/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">thymeleaf依赖问题 通过thymeleaf和model传值无法在html中获取或显示 thymeleaf自动加html的后缀和路径前缀</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>