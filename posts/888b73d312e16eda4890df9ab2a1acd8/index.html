<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【学习笔记】vue3 ant design项目个性化编辑组件样式问题 ：不能将类型“string”分配给类型“CSSProperties” - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【学习笔记】vue3 ant design项目个性化编辑组件样式问题 ：不能将类型“string”分配给类型“CSSProperties”" />
<meta property="og:description" content="啊 发现问题的过程 在使用Card组件时有一个需求，就是需要将card组件的标题下方的横线缩短。
为了完成这一需求，首先只能是对card组件的标题栏进行自定义样式修改了。而修改也很简单，我只需要在页面绑定headStyle就行了。
//ChartCard组件 &lt;template&gt; &lt;Card :title=&#34;growDate &#43; &#39;最新情报&#39;&#34; :bordered=&#34;false&#34; :headStyle=&#34;headStyle&#34;&gt; &lt;div ref=&#34;chartRef&#34; :style=&#34;{ height, width }&#34;&gt;&lt;/div&gt; &lt;/Card&gt; &lt;/template&gt; &lt;script setup lang=&#39;ts&#39;&gt; const headStyle = ref(&#39;margin:0 20px;boxSizing:border-box&#39;) &lt;/script&gt; 但我发现其他组件也要改，于是我决定把headStyle写在父页面，然后通过props传入。如下：
//父页面 &lt;template&gt; &lt;div&gt; &lt;GrowCard :headStyle=&#34;headStyle&#34; /&gt; &lt;ChartCard :headStyle=&#34;headStyle&#34; /&gt; &lt;div &gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script setup lang=&#39;ts&#39;&gt; import GrowCard from &#39;./GrowCard.vue&#39; import ChartCard from &#39;./ChartCard.vue&#39; import { ref } from const headStyle = ref(&#39;margin:0 20px;box-sizing:border-box;&#39;) &lt;/script&gt; 这时ChartCard组件出现报错：
不能将类型“string”分配给类型“CSSProperties”。ts(2322)
index.d.ts(14, 13): 所需类型来自属性 &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/888b73d312e16eda4890df9ab2a1acd8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-27T20:00:00+08:00" />
<meta property="article:modified_time" content="2023-08-27T20:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【学习笔记】vue3 ant design项目个性化编辑组件样式问题 ：不能将类型“string”分配给类型“CSSProperties”</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>啊</h3> 
<h3>发现问题的过程</h3> 
<p>在使用Card组件时有一个需求，就是需要将card组件的标题下方的横线缩短。</p> 
<p> <img alt="" height="545" src="https://images2.imgbox.com/ae/e6/pMWyOaQW_o.png" width="1200"></p> 
<p></p> 
<p> <img alt="" height="474" src="https://images2.imgbox.com/00/86/3FW9eXiA_o.png" width="1200"></p> 
<p>为了完成这一需求，首先只能是对card组件的标题栏进行自定义样式修改了。而修改也很简单，我只需要在页面绑定headStyle就行了。</p> 
<pre><code class="language-html">//ChartCard组件
&lt;template&gt;
    &lt;Card :title="growDate + '最新情报'" :bordered="false" :headStyle="headStyle"&gt;
        &lt;div ref="chartRef" :style="{ height, width }"&gt;&lt;/div&gt;
    &lt;/Card&gt;
&lt;/template&gt;

&lt;script setup lang='ts'&gt;
    const headStyle = ref('margin:0 20px;boxSizing:border-box')
&lt;/script&gt;</code></pre> 
<p>但我发现其他组件也要改，于是我决定把headStyle写在父页面，然后通过props传入。如下：</p> 
<pre><code class="language-html">//父页面
&lt;template&gt;
  &lt;div&gt;
    &lt;GrowCard :headStyle="headStyle" /&gt;
    &lt;ChartCard :headStyle="headStyle" /&gt;
    &lt;div &gt;

    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
  
&lt;script setup lang='ts'&gt;
  import GrowCard from './GrowCard.vue'
  import ChartCard from './ChartCard.vue'
  import { ref } from 
  const headStyle = ref('margin:0 20px;box-sizing:border-box;')
&lt;/script&gt;
  </code></pre> 
<p>这时ChartCard组件出现报错：<img alt="" height="218" src="https://images2.imgbox.com/90/5e/ck32K0U5_o.png" width="1200"></p> 
<p> 不能将类型“string”分配给类型“CSSProperties”。ts(2322)</p> 
<p>index.d.ts(14, 13): 所需类型来自属性 "headStyle"，在此处的 "Partial&lt;{ loading: boolean; bordered: boolean; bodyStyle: CSSProperties; headStyle: CSSProperties; hoverable: boolean; }&gt; &amp; Omit&lt;Readonly&lt;ExtractPropTypes&lt;{ prefixCls: StringConstructor; ... 15 more ...; onTabChange: { ...; }; }&gt;&gt; &amp; VNodeProps &amp; AllowedComponentProps &amp; ComponentCustomProps, "loading" | ... 3 more ....." 类型上声明该属性</p> 
<h3>解决问题</h3> 
<p>我搜索了一下，CSSProperties是vue中带有的一种数据类型，在使用这个类型时需要先通过vue引入，然后该类型数据的书写方式同json，如下：</p> 
<pre><code class="language-html">//父页面
&lt;template&gt;
  &lt;div&gt;
    &lt;GrowCard :headStyle="headStyle" /&gt;
    &lt;ChartCard :headStyle="headStyle" /&gt;
    &lt;div &gt;

    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
  
&lt;script setup lang='ts'&gt;
  import GrowCard from './GrowCard.vue'
  import ChartCard from './ChartCard.vue'
  import { CSSProperties } from 'vue'
  const headStyle: CSSProperties = {
    margin:'0 20px',
    boxSizing:'border-box',
  }
&lt;/script&gt;</code></pre> 
<p>而且在引用时<em>不</em>需要使用ref声明，否则报错：<img alt="" height="227" src="https://images2.imgbox.com/a1/1b/406s7GKf_o.png" width="835"></p> 
<p> 当然，到这一步还没完成，系统还有一个报错：</p> 
<p><img alt="" height="477" src="https://images2.imgbox.com/4e/d6/BryECqvs_o.png" width="604"></p> 
<p>这个时候还需要修改ChartCard组件中的声明方式：</p> 
<pre><code class="language-javascript">//ChartCard组件
defineProps({
    headStyle:{
      //headStyle是个对象，并将其类型断言为CSSProperties
      type: Object as PropType&lt;CSSProperties&gt;,
      default:() =&gt; ({})
    },
  });</code></pre> 
<p> ChartCard组件整体代码：</p> 
<pre><code class="language-html">//ChartCard组件
&lt;template&gt;
    &lt;Card :title="growDate + '最新情报'" :bordered="false" :headStyle="headStyle"&gt;
      &lt;div ref="chartRef" :style="{ height, width }"&gt;&lt;/div&gt;
    &lt;/Card&gt;
&lt;/template&gt;


&lt;script setup lang='ts'&gt;
  import { basicProps } from './props';
  import { Card } from 'ant-design-vue'
  import { growDate } from '../data';
  import { useECharts } from '/@/hooks/web/useECharts';
  import { onMounted, ref, Ref , CSSProperties } from 'vue';

  defineProps({
    ...basicProps,
    loading: Boolean,
    width: {
      type: String as PropType&lt;string&gt;,
      default: '100%',
    },
    height: {
      type: String as PropType&lt;string&gt;,
      default: '300px',
    },
    headStyle:{
      type: Object as PropType&lt;CSSProperties&gt;,
      default:() =&gt; ({})
    },
  });
  ...
&lt;/script&gt;</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d177465a0db397068e663aae9214b51e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring系列第28篇：Bean循环依赖详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eaf446a2b9b2dac3ead7f51000da5f12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jquery 常用方法 -- 动画篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>