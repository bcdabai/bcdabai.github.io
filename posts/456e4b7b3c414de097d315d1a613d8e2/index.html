<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>中小型互联网公司如何搭建自己的技术架构 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="中小型互联网公司如何搭建自己的技术架构" />
<meta property="og:description" content="适用范围
本文主要针对中小型互联网公司，特别适用于手机APP或者pc的后台架构，基本可以支撑5万日活
本文会对可能用到的相关技术进行技术选型的说明，以及技术的架构介绍，技术架构的介绍课程后面有地址，可以点进去查看。
技术指标
说一下一些技术指标的计算过程可以作为其他同学的参考
QPS， 如果是5万日活，使用集中在每天的4小时，每个用户大概产生100的请求，那么平均下来，我们系统大概应该支撑的请求为：50000 100 / (4 60 * 60) = 350 qps/s
业务数据 业务量，我们自己是新闻业务，可能会有其他的业务，比如游戏，商城等等，基本每天新增的业务数据都会在同一个量级， 每日10000， 另外跟用户相关的信息也是比较大的一块，比如用户的订阅等行为，一共5万的用户，保存相关信息可能大概需要100条的数据。
缓存大小 主要业务数据和用户相关的热点数据限时保存在缓存中， 大概需要5个G左右。
日志大小 用户日志和请求日志。 大概每天3个G左右
技术架构
[img59cde995b396e.png]
整体架构因为是小公司，我们基于阿里云来搭建，对图中的内容和技术选型进行一下说明：
负载均衡
可选方案： SLB, Nginx.
SLB要收钱，但是比较便宜，有保证，不会挂。 但是可配置的很少，不能根据域名做ip映射
Nginx, 没啥缺点，需要一定的知识。
建议： SLB &#43; Nginx, SLB绑定域名作为统一的入口，然后每个服务器上再搭建Nginx.
CDN
用于缓存静态文件等等。 七牛和阿里的都还可以。
七牛要做的久一点， 各种图片处理的接口要完善一些
阿里的CDN要稍微好一点点， 但是没有不安全的访问方式，访问稍微没有那么灵活。 图片处理功能弱一点。
分布式调用框架
目前可选的有ZK &#43; dubbo. ZK &#43; Motan, ZK &#43; dubbox, edas。
dubbo, 阿里的服务治理框架，已经不维护了，切换反应有点慢
dubboX, 当当基于dubbo搞的，还在维护可以一用，推荐。
Motan, 微博的服务治理矿建， 刚开源，需要学习一下， 推荐。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/456e4b7b3c414de097d315d1a613d8e2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-20T10:36:05+08:00" />
<meta property="article:modified_time" content="2023-09-20T10:36:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">中小型互联网公司如何搭建自己的技术架构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>适用范围</strong></p> 
<p>本文主要针对中小型互联网公司，特别适用于手机APP或者pc的后台架构，基本可以支撑5万日活</p> 
<p>本文会对可能用到的相关技术进行技术选型的说明，以及技术的架构介绍，技术架构的介绍课程后面有地址，可以点进去查看。</p> 
<p></p> 
<p><strong>技术指标</strong></p> 
<p>说一下一些技术指标的计算过程可以作为其他同学的参考</p> 
<p>QPS， 如果是5万日活，使用集中在每天的4小时，每个用户大概产生100的请求，那么平均下来，我们系统大概应该支撑的请求为：50000 <em> 100 / (4 </em> 60 * 60) = 350 qps/s</p> 
<p>业务数据 业务量，我们自己是新闻业务，可能会有其他的业务，比如游戏，商城等等，基本每天新增的业务数据都会在同一个量级， 每日10000， 另外跟用户相关的信息也是比较大的一块，比如用户的订阅等行为，一共5万的用户，保存相关信息可能大概需要100条的数据。</p> 
<p>缓存大小 主要业务数据和用户相关的热点数据限时保存在缓存中， 大概需要5个G左右。</p> 
<p>日志大小 用户日志和请求日志。 大概每天3个G左右</p> 
<p></p> 
<p><strong>技术架构</strong></p> 
<p></p> 
<p class="img-center"><img alt="[img59cde995b396e.png]" height="691" src="https://images2.imgbox.com/33/fd/fKf4t6Ss_o.png" width="819"></p> 
<p>[img59cde995b396e.png]</p> 
<p>整体架构因为是小公司，我们基于阿里云来搭建，对图中的内容和技术选型进行一下说明：</p> 
<p></p> 
<p><a href="https://cloud.tencent.com/product/clb?from_column=20065&amp;from=20065" rel="nofollow" title="负载均衡">负载均衡</a></p> 
<p>可选方案： SLB, Nginx.</p> 
<p>SLB要收钱，但是比较便宜，有保证，不会挂。 但是可配置的很少，不能根据域名做ip映射</p> 
<p>Nginx, 没啥缺点，需要一定的知识。</p> 
<p>建议： SLB + Nginx, SLB绑定域名作为统一的入口，然后每个服务器上再搭建Nginx.</p> 
<p></p> 
<p><a href="https://cloud.tencent.com/product/cdn?from_column=20065&amp;from=20065" rel="nofollow" title="CDN">CDN</a></p> 
<p>用于缓存静态文件等等。 七牛和阿里的都还可以。</p> 
<p>七牛要做的久一点， 各种图片处理的接口要完善一些</p> 
<p>阿里的CDN要稍微好一点点， 但是没有不安全的访问方式，访问稍微没有那么灵活。 图片处理功能弱一点。</p> 
<p>分布式调用框架</p> 
<p>目前可选的有ZK + dubbo. ZK + Motan, ZK + dubbox, edas。</p> 
<p>dubbo, 阿里的服务治理框架，已经不维护了，切换反应有点慢</p> 
<p>dubboX, 当当基于dubbo搞的，还在维护可以一用，推荐。</p> 
<p>Motan, 微博的服务治理矿建， 刚开源，需要学习一下， 推荐。</p> 
<p>Edas, 阿里云服务，要收钱，侵入型很强，不推荐</p> 
<p></p> 
<p><strong>MQ</strong></p> 
<p>可选的有： ActiveMQ, rocketMQ， robbitMQ,Kafka</p> 
<p>各有好处， 但是考虑到运维的难度，推荐rocketMQ。</p> 
<p></p> 
<p><a href="https://cloud.tencent.com/product/crs?from_column=20065&amp;from=20065" rel="nofollow" title="Redis">Redis</a></p> 
<p>用来做缓存， 自建成本有点高，需要Codis, 分片，集群，主从等等，很麻烦。 建议直接用阿里的</p> 
<p>数据库</p> 
<p>主要基于读写分离和主从复制考虑，目前可以自建和选用阿里的DRDS。</p> 
<p>DRDS 要花钱，成本较高，没有必要</p> 
<p>自建， 不用中间件，直接1写2只读， 然后配置读写分离的数据源，内网SLB进行读集群。解决之。</p> 
<p></p> 
<p><strong>搜索</strong></p> 
<p>建议ELK， 可以自动同步数据库，除了搜索引擎的功能外，还可以做日志搜索，监控系统。</p> 
<p>一些典型的业务场景说明</p> 
<p>把业务底层做成SOA模块，通过分布式调用框架对外提供服务。</p> 
<p>后期进行SOA到微服务的改造都会涉及。</p> 
<p>单独做一个小的系统来运行定时任务</p> 
<p>热点数据放缓存，然后通过MQ来更新缓存</p> 
<p>日志等数据有必要可以考虑上个Mongo</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40ad32a53e902acf539c7149769266a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css3各种动画效果合集（二）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e951fe6594e4a63e4c1d51a193d38083/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于Python flask 的某招聘网站爬虫，招聘岗位可视化系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>