<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>22. Spring Boot 拦截器HandlerInterceptor【从零开始学Spring Boot】 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="22. Spring Boot 拦截器HandlerInterceptor【从零开始学Spring Boot】" />
<meta property="og:description" content="【视频 &amp; 交流平台】 à SpringBoot视频
http://study.163.com/course/introduction.htm?courseId=1004329008&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share
à SpringCloud视频
http://study.163.com/course/introduction.htm?courseId=1004638001&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share
à Spring Boot源码
https://gitee.com/happyangellxq520/spring-boot
à Spring Boot交流平台
http://412887952-qq-com.iteye.com/blog/2321532
上一篇对过滤器的定义做了说明，也比较简单。过滤器属于Servlet范畴的API，与Spring 没什么关系。 Web开发中，我们除了使用 Filter 来过滤请web求外，还可以使用Spring提供的HandlerInterceptor（拦截器）。
HandlerInterceptor 的功能跟过滤器类似，但是提供更精细的的控制能力：在request被响应之前、request被响应之后、视图渲染之前以及request全部结束之后。我们不能通过拦截器修改request内容，但是可以通过抛出异常（或者返回false）来暂停request的执行。
实现 UserRoleAuthorizationInterceptor 的拦截器有： ConversionServiceExposingInterceptor CorsInterceptor LocaleChangeInterceptor PathExposingHandlerInterceptor ResourceUrlProviderExposingInterceptor ThemeChangeInterceptor UriTemplateVariablesHandlerInterceptor UserRoleAuthorizationInterceptor
其中 LocaleChangeInterceptor 和 ThemeChangeInterceptor 比较常用。
配置拦截器也很简单，Spring 为此提供了基础类WebMvcConfigurerAdapter ，我们只需要重写addInterceptors 方法添加注册拦截器。
实现自定义拦截器只需要3步： 1、创建我们自己的拦截器类并实现 HandlerInterceptor接口。
2、创建一个Java类继承WebMvcConfigurerAdapter，并重写 addInterceptors 方法。
2、实例化我们自定义的拦截器，然后将对像手动添加到拦截器链中（在addInterceptors方法中添加）。
PS：本文重点在如何在Spring-Boot中使用拦截器，关于拦截器的原理请大家查阅资料了解。
代码示例：
com.kfit.interceptor.MyInterceptor1.java
package com.kfit.interceptor;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;
/**
* 自定义拦截器1
*
* @author Angel" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b068f099886ee92e27ed493dee08a625/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-07-29T23:48:09+08:00" />
<meta property="article:modified_time" content="2016-07-29T23:48:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">22. Spring Boot 拦截器HandlerInterceptor【从零开始学Spring Boot】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="left"><span style="color:#555555"></span></p> 
<p style='margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif'> <img title="点击查看原始大小图片" class="magplus" src="https://images2.imgbox.com/30/b1/paFfAMz7_o.jpg" height="388" alt="" width="700" style='border:0px; font-family:"Microsoft YaHei",微软雅黑,SimHei,tahoma,arial,helvetica,sans-serif'></p> 
<p style='margin-top:0px; margin-bottom:20px; padding-top:0px; padding-bottom:0px; font-family:"PingFang SC","Microsoft YaHei",SimHei,Arial,SimSun; color:rgb(51,51,51)'>  </p> 
<blockquote style='border-width:1px 1px 1px 4px; border-style:solid; border-color:rgb(204,204,204) rgb(204,204,204) rgb(204,204,204) rgb(226,227,228); margin:20px 0px; padding:10px 20px 10px 1.2em; font-family:"PingFang SC","Microsoft YaHei",SimHei,Arial,SimSun; color:rgb(51,51,51)'> 
 <span style="margin:0px; padding:0px; max-width:100%; font-family:宋体; color:rgb(192,0,0)">【视频</span> 
 <span style="margin:0px; padding:0px; max-width:100%; font-family:Helvetica,sans-serif; color:rgb(192,0,0)">&amp;</span> 
 <span style="margin:0px; padding:0px; max-width:100%; font-family:宋体; color:rgb(192,0,0)">交流平台】</span> 
</blockquote> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:Wingdings">à</span><a target="_blank" href="http://study.163.com/course/introduction.htm?courseId=1004329008&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)"><span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif"> <span style="margin:0px; padding:0px; max-width:100%">SpringBoot</span><span style="margin:0px; padding:0px; max-width:100%">视频</span></span></a></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif"><span style="margin:0px; padding:0px; max-width:100%; color:rgb(16,138,198)">http://study.163.com/course/introduction.htm?courseId=1004329008&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share</span></span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif"><span style="margin:0px; padding:0px; max-width:100%; color:rgb(16,138,198)">à <a target="_blank" href="http://study.163.com/course/introduction.htm?courseId=1004638001&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)">SpringCloud视频</a></span></span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif; color:rgb(16,138,198)">http://study.163.com/course/introduction.htm?courseId=1004638001&amp;utm_campaign=commission&amp;utm_source=400000000155061&amp;utm_medium=share</span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:Wingdings">à</span><span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif"> <a target="_blank" href="https://gitee.com/happyangellxq520/spring-boot" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)"><span style="margin:0px; padding:0px; max-width:100%">Spring Boot</span><span style="margin:0px; padding:0px; max-width:100%">源码</span></a></span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif; color:rgb(16,138,198)">https://gitee.com/happyangellxq520/spring-boot</span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:Wingdings">à</span><span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif"> <a target="_blank" href="http://412887952-qq-com.iteye.com/blog/2321532" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)"><span style="margin:0px; padding:0px; max-width:100%">Spring Boot</span><span style="margin:0px; padding:0px; max-width:100%">交流平台</span></a></span></p> 
<p style='margin-top:auto; margin-bottom:auto; padding-top:0px; padding-bottom:0px; font-size:16px; max-width:100%; clear:both; color:rgb(62,62,62); font-family:"Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif; line-height:21px; background:rgb(238,236,225)'> <span style="margin:0px; padding:0px; max-width:100%; font-size:12px; font-family:微软雅黑,sans-serif; color:rgb(16,138,198)">http://412887952-qq-com.iteye.com/blog/2321532</span></p> 
<p style="margin:11.25pt 0cm; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:21pt">  </p> 
<div> 
 <br> 
</div> 
<br> 
<p> </p> 
<p style="color:rgb(62,62,62); background:rgb(238,236,225)"><span style="color:rgb(16,138,198)"> </span></p> 
<br> 
<p align="left"><span style="color:#555555">上一篇对过滤器的定义做了说明，也比较简单。过滤器属于</span><span style="color:#555555">Servlet</span><span style="color:#555555">范畴的</span><span style="color:#555555">API</span><span style="color:#555555">，与</span><span style="color:#555555">Spring </span><span style="color:#555555">没什么关系。</span><span style="color:#555555"> <br>     Web</span><span style="color:#555555">开发中，我们除了使用</span><span style="color:#555555"> Filter </span><span style="color:#555555">来过滤请</span><span style="color:#555555">web</span><span style="color:#555555">求外，还可以使用</span><span style="color:#555555">Spring</span><span style="color:#555555">提供的</span><span style="color:#555555">HandlerInterceptor</span><span style="color:#555555">（拦截器）。</span></p> 
<p align="left"><span style="color:#555555">HandlerInterceptor </span><span style="color:#555555">的功能跟过滤器类似，但是提供更精细的的控制能力：在</span><span style="color:#555555">request</span><span style="color:#555555">被响应之前、</span><span style="color:#555555">request</span><span style="color:#555555">被响应之后、视图渲染之前以及</span><span style="color:#555555">request</span><span style="color:#555555">全部结束之后。我们不能通过拦截器修改</span><span style="color:#555555">request</span><span style="color:#555555">内容，但是可以通过抛出异常（或者返回</span><span style="color:#555555">false</span><span style="color:#555555">）来暂停</span><span style="color:#555555">request</span><span style="color:#555555">的执行。</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#555555">实现</span><span style="color:#555555"> UserRoleAuthorizationInterceptor </span><span style="color:#555555">的拦截器有：</span><span style="color:#555555"> <br> ConversionServiceExposingInterceptor <br> CorsInterceptor <br> LocaleChangeInterceptor <br> PathExposingHandlerInterceptor <br> ResourceUrlProviderExposingInterceptor <br> ThemeChangeInterceptor <br> UriTemplateVariablesHandlerInterceptor <br> UserRoleAuthorizationInterceptor</span></p> 
<p align="left"><span style="color:#555555">其中</span><span style="color:#555555"> LocaleChangeInterceptor </span><span style="color:#555555">和</span><span style="color:#555555"> ThemeChangeInterceptor </span><span style="color:#555555">比较常用。</span></p> 
<p align="left"><span style="color:#555555">配置拦截器也很简单，</span><span style="color:#555555">Spring </span><span style="color:#555555">为此提供了基础类</span><span style="color:#555555">WebMvcConfigurerAdapter </span><span style="color:#555555">，我们只需要重写</span><span style="color:#555555">addInterceptors </span><span style="color:#555555">方法添加注册拦截器。</span></p> 
<p align="left" style="background:rgb(219,229,241)"><span style="color:#555555">实现自定义拦截器只需要</span><span style="color:#555555">3</span><span style="color:#555555">步：</span><span style="color:#555555"> <br> 1</span><span style="color:#555555">、创建我们自己的拦截器类并实现</span><span style="color:#555555"> HandlerInterceptor</span><span style="color:#555555">接口。</span></p> 
<p align="left" style="background:rgb(219,229,241)"><span style="color:#555555">2</span><span style="color:#555555">、创建一个</span><span style="color:#555555">Java</span><span style="color:#555555">类继承</span><span style="color:#555555">WebMvcConfigurerAdapter</span><span style="color:#555555">，并重写</span><span style="color:#555555"> addInterceptors </span><span style="color:#555555">方法。</span></p> 
<p align="left" style="background:rgb(219,229,241)"><span style="color:#555555">2</span><span style="color:#555555">、实例化我们自定义的拦截器，然后将对像手动添加到拦截器链中（在</span><span style="color:#555555">addInterceptors</span><span style="color:#555555">方法中添加）。</span></p> 
<p align="left"><span style="color:#555555">PS</span><span style="color:#555555">：本文重点在如何在</span><span style="color:#555555">Spring-Boot</span><span style="color:#555555">中使用拦截器，关于拦截器的原理请大家查阅资料了解。</span></p> 
<p align="left"><span style="color:#555555">代码示例：</span></p> 
<p align="left"><span style="color:#555555">com.kfit.interceptor.MyInterceptor1.java</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">package</span><span style="color:#333333"> com.kfit.interceptor;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> javax.servlet.http.HttpServletRequest;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> javax.servlet.http.HttpServletResponse;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.HandlerInterceptor;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.ModelAndView;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000">/**</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> * </span><span style="color:#880000">自定义拦截器</span><span style="color:#880000">1</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> *</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> *</span><span style="color:#660066"> @author</span><span style="color:#880000">   Angel</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> */</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">publicclass </span><span style="color:#660066">MyInterceptor1 </span><span style="color:#000088">implements </span><span style="color:#660066">HandlerInterceptor</span><span style="color:#333333"> {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicboolean</span><span style="color:#333333"> preHandle(HttpServletRequestrequest, HttpServletResponse response, Object handler)</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">在请求处理之前进行调用（</span><span style="color:#008800">Controller</span><span style="color:#008800">方法调用之前）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#000088">returntrue</span><span style="color:#333333">;</span><span style="color:#880000">// </span><span style="color:#880000">只有返回</span><span style="color:#880000">true</span><span style="color:#880000">才会继续向下执行，返回</span><span style="color:#880000">false</span><span style="color:#880000">取消当前请求</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicvoid</span><span style="color:#333333"> postHandle(HttpServletRequestrequest, HttpServletResponse response, Object handler,</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            ModelAndViewmodelAndView) </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">请求处理之后进行调用，但是在视图被渲染之前（</span><span style="color:#008800">Controller</span><span style="color:#008800">方法调用之后）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicvoid</span><span style="color:#333333"> afterCompletion(HttpServletRequestrequest, HttpServletResponse response, Object handler, Exception ex)</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">在整个请求结束之后被调用，也就是在</span><span style="color:#008800">DispatcherServlet </span><span style="color:#008800">渲染了对应的视图之后执行（主要是用于进行资源清理工作）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">}</span></p> 
<p align="left"> </p> 
<p align="left"><span style="color:rgb(85,85,85)">com.kfit.</span><span style="color:#333333">interceptor</span><span style="color:rgb(85,85,85)">.MyInterceptor2.java</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">package</span><span style="color:#333333"> com.kfit.interceptor;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> javax.servlet.http.HttpServletRequest;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> javax.servlet.http.HttpServletResponse;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.HandlerInterceptor;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.ModelAndView;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000">/**</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> * </span><span style="color:#880000">自定义拦截器</span><span style="color:#880000">2</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> *</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> *</span><span style="color:#660066"> @author</span><span style="color:#880000">   Angel</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#880000"> */</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">public class </span><span style="color:#660066">MyInterceptor2 </span><span style="color:#000088">implements </span><span style="color:#660066">HandlerInterceptor</span><span style="color:#333333"> {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicboolean</span><span style="color:#333333"> preHandle(HttpServletRequestrequest, HttpServletResponse response, Object handler)</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">在请求处理之前进行调用（</span><span style="color:#008800">Controller</span><span style="color:#008800">方法调用之前）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#000088">returntrue</span><span style="color:#333333">;</span><span style="color:#880000">// </span><span style="color:#880000">只有返回</span><span style="color:#880000">true</span><span style="color:#880000">才会继续向下执行，返回</span><span style="color:#880000">false</span><span style="color:#880000">取消当前请求</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicvoid</span><span style="color:#333333"> postHandle(HttpServletRequestrequest, HttpServletResponse response, Object handler,</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            ModelAndViewmodelAndView) </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">请求处理之后进行调用，但是在视图被渲染之前（</span><span style="color:#008800">Controller</span><span style="color:#008800">方法调用之后）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicvoid</span><span style="color:#333333"> afterCompletion(HttpServletRequestrequest, HttpServletResponse response, Object handler, Exception ex)</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">            </span><span style="color:#000088">throws</span><span style="color:#333333"> Exception {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        System.out.println(</span><span style="color:#008800">"&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#008800">在整个请求结束之后被调用，也就是在</span><span style="color:#008800">DispatcherServlet </span><span style="color:#008800">渲染了对应的视图之后执行（主要是用于进行资源清理工作）</span><span style="color:#008800">"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">}</span></p> 
<p align="left"> </p> 
<p align="left"><span style="color:rgb(85,85,85)">Com.kfit.config.MyWebAppConfigurer.java</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">package</span><span style="color:#333333"> com.kfit.config;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> com.kfit.interceptor.MyInterceptor1;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> com.kfit.interceptor.MyInterceptor2;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.context.annotation.Configuration;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">import</span><span style="color:#333333"> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#9B859D">@Configuration</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#000088">public class </span><span style="color:#660066">MyWebAppConfigurer</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#000088">extends </span><span style="color:#660066">WebMvcConfigurerAdapter</span><span style="color:#333333"> {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#9B859D">@Override</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    </span><span style="color:#000088">publicvoid</span><span style="color:#333333"> addInterceptors(InterceptorRegistryregistry) {<!-- --></span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#880000">// </span><span style="color:#880000">多个拦截器组成一个拦截器链</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#880000">// addPathPatterns </span><span style="color:#880000">用于添加拦截规则</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#880000">// excludePathPatterns </span><span style="color:#880000">用户排除拦截</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        registry.addInterceptor(</span><span style="color:#000088">new</span><span style="color:#333333"> MyInterceptor1()).addPathPatterns(</span><span style="color:#008800">"/**"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        registry.addInterceptor(</span><span style="color:#000088">new</span><span style="color:#333333"> MyInterceptor2()).addPathPatterns(</span><span style="color:#008800">"/**"</span><span style="color:#333333">);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">        </span><span style="color:#000088">super</span><span style="color:#333333">.addInterceptors(registry);</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">    }</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333"> </span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">}</span></p> 
<p align="left"> </p> 
<p align="left"><span style="color:rgb(85,85,85)">然后在浏览器输入地址：</span><span style="color:rgb(85,85,85)"> </span><a target="_blank" href="http://localhost:8080/index" rel="nofollow noopener noreferrer"><span style="color:rgb(12,137,207)">http://localhost:8080/index</span></a><span style="color:rgb(85,85,85)"> </span><span style="color:rgb(85,85,85)">后，控制台的输出为：</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">在请求处理之前进行调用（</span><span style="color:#333333">Controller</span><span style="color:#333333">方法调用之前）</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">在请求处理之前进行调用（</span><span style="color:#333333">Controller</span><span style="color:#333333">方法调用之前）</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">请求处理之后进行调用，但是在视图被渲染之前（</span><span style="color:#333333">Controller</span><span style="color:#333333">方法调用之后）</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">请求处理之后进行调用，但是在视图被渲染之前（</span><span style="color:#333333">Controller</span><span style="color:#333333">方法调用之后）</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor2&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">在整个请求结束之后被调用，也就是在</span><span style="color:#333333">DispatcherServlet </span><span style="color:#333333">渲染了对应的视图之后执行（主要是用于进行资源清理工作）</span></p> 
<p align="left" style="background:rgb(242,242,242)"><span style="color:#333333">&gt;&gt;&gt;MyInterceptor1&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="color:#333333">在整个请求结束之后被调用，也就是在</span><span style="color:#333333">DispatcherServlet </span><span style="color:#333333">渲染了对应的视图之后执行（主要是用于进行资源清理工作）</span></p> 
<p align="left"> </p> 
<p><span style="color:#555555">根据输出可以了解拦截器链的执行顺序（具体原理介绍，大家找度娘一问便知）</span></p> 
<p><span style="color:#555555">最后强调一点：只有经过DispatcherServlet </span>的请求，才会走拦截器链，我们<span style="color:red">自定义的Servlet</span>请求是不会被拦截的<span style="color:#555555">，比如我们自定义的Servlet</span>地址<a target="_blank" href="http://localhost:8080/myServlet" rel="nofollow noopener noreferrer">http://localhost:8080/myServlet</a>1 是不会被拦截器拦截的。<span style="color:red">并且不管是属于哪个Servlet</span>只要复合过滤器的过滤规则，过滤器都会拦截。</p> 
<p><span style="color:#555555">最后说明下，我们上面用到的 WebMvcConfigurerAdapter </span>并非只是注册添加拦截器使用，其顾名思义是做Web配置用的，它还可以有很多其他作用，通过下面截图便可以大概了解，具体每个方法都是干什么用的，留给大家自己研究（其实都大同小异也很简单）。 </p> 
<p><br> </p> 
<p></p> 
<p><strong><span style="color:rgb(192,0,0)">【</span><span style="color:rgb(192,0,0)">Spring Boot </span><span style="color:rgb(192,0,0)">系列视频】</span></strong></p> 
<p><strong>视频&amp;交流平台：</strong></p> 
<p>à <a target="_blank" href="http://study.163.com/course/introduction.htm?courseId=1004329008" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)">Spring Boot网易云课堂视频</a></p> 
<p>http://study.163.com/course/introduction.htm?courseId=1004329008</p> 
<p>à <a target="_blank" href="http://412887952-qq-com.iteye.com/blog/2321532" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)">Spring Boot交流平台</a></p> 
<p>http://412887952-qq-com.iteye.com/blog/2321532</p> 
<p> </p> 
<p><span style="color:rgb(128,0,0)"><strong>网易云课堂视频最新更新</strong></span>：</p> 
<p><strong>第十一章 Spring Boot 日志</strong></p> 
<p><span style="color:rgb(16,138,198)">1、spring boot日志—理论</span></p> 
<p><span style="color:rgb(16,138,198)">2、Spring Boot日志-logback</span></p> 
<p><span style="color:rgb(16,138,198)">3、Spring Boot日志-log4j2</span></p> 
<p><strong>第十二章 Spring Boot 知识点2</strong></p> 
<p><span style="color:rgb(16,138,198)">1、spring boot 服务配置和部署</span></p> 
<p><span style="color:rgb(16,138,198)">2、Spring Boot 定制URL匹配规则</span></p> 
<p style="color:rgb(62,62,62); background:rgb(238,236,225)"><span style="color:rgb(16,138,198)"> </span></p> 
<p style="color:rgb(62,62,62)"> </p> 
<p><span style="color:rgb(255,0,0)">历史章节</span><span style="color:rgb(255,0,0)">：</span></p> 
<p> </p> 
<p><strong>第一章 快速开始</strong></p> 
<p>1、Spring Boot之Hello World</p> 
<p>2、Spring Boot之Hello World访问404</p> 
<p> </p> 
<p><strong>第二章 Spring Boot之JSON</strong></p> 
<p>1、spring boot返回json数据</p> 
<p>2、Spring Boot完美使用FastJson解析JSON数据</p> 
<p> </p> 
<p><strong>第三章 Spring Boot热部署</strong></p> 
<p>1、Spring Boot热部署(springloader)</p> 
<p>2、springboot + devtools（热部署）</p> 
<p> </p> 
<p><strong>第四章 Spring Boot数据库</strong></p> 
<p>1、Spring Boot JPA/Hibernate/Spring Data概念</p> 
<p>2、Spring Boot JPA-Hibernate</p> 
<p>3、Spring Boot Spring Data JPA介绍</p> 
<p>4、Spring Boot JdbcTemplate</p> 
<p>5、Spring Boot集成MyBatis</p> 
<p> </p> 
<p><strong>第五章 web开发</strong></p> 
<p>1、全局异常捕捉</p> 
<p>2、配置server信息</p> 
<p>3、spring boot使用thymeleaf</p> 
<p>4、Spring Boot 使用freemarker</p> 
<p>5、Spring Boot添加JSP支持</p> 
<p> </p> 
<p><strong>第六章 定时任务</strong></p> 
<p>1、Spring Boot定时任务</p> 
<p>2、Spring Boot 定时任务升级篇（动态修改cron参数）</p> 
<p>3、Spring Boot 定时任务升级篇（动态添加修改删除定时任务）</p> 
<p>4、Spring Boot 定时任务升级篇（集群/分布式下的定时任务说明）</p> 
<p>5、Spring Boot Quartz介绍</p> 
<p>6、Spring Boot Quartz在Java Project中使用</p> 
<p>7、Spring Boot 集成Quartz普通使用</p> 
<p>8、Spring Boot 集成Quartz升级版</p> 
<p>9、Spring Boot 集成Quartz二次升级版</p> 
<p>10、Spring Boot 集成Quartz-Job如何自动注入Spring容器托管的对象</p> 
<p> </p> 
<p><strong>第七章 Spring Boot MyBatis升级篇</strong></p> 
<p>1、Spring Boot MyBatis升级篇-注解</p> 
<p>2、Spring Boot MyBatis升级篇-注解-自增ID</p> 
<p>3、Spring Boot MyBatis升级篇-注解-增删改查</p> 
<p>4、Spring Boot MyBatis升级篇-注解-分页查询</p> 
<p>5、Spring Boot MyBatis升级篇-注解-分页PageHelper不生效</p> 
<p>6、Spring Boot MyBatis升级篇-注解- mybatic insert异常：BindingException: Parameter 'name' not found</p> 
<p>7、Spring Boot MyBatis升级篇-注解- #和$符号特别篇</p> 
<p>8、Spring Boot MyBatis升级篇-注解-@Result</p> 
<p>9、Spring Boot MyBatis升级篇-注解-动态SQL(if test)-方案一:&lt;script&gt;</p> 
<p>10、Spring Boot MyBatis升级篇-注解-动态SQL(if test)-方案二:@Provider</p> 
<p>11、Spring Boot MyBatis升级篇-注解-动态SQL-参数问题</p> 
<p>12、Spring Boot MyBatis升级篇-注解-特别篇：@MapperScan和@Mapper</p> 
<p>13、Spring Boot MyBatis升级篇-XML</p> 
<p>14、Spring Boot MyBatis升级篇-XML-自增ID</p> 
<p>15、Spring Boot MyBatis升级篇-XML-增删改查</p> 
<p>16、Spring Boot MyBatis升级篇-XML-分页查询</p> 
<p>17、Spring Boot MyBatis升级篇-XML-分页PageHelper不生效</p> 
<p>18、Spring Boot MyBatis升级篇-XML-动态SQL(if test)</p> 
<p>19、Spring Boot MyBatis升级篇-XML-注解-初尝试</p> 
<p>20、Spring Boot MyBatis升级篇- pagehelper替换为pagehelper-spring-boot-starter</p> 
<p> </p> 
<p><strong>第八章 Spring Boot 知识点1</strong></p> 
<p>1、Spring Boot 拦截器HandlerInterceptor</p> 
<p>2、Spring Boot启动加载数据CommandLineRunner</p> 
<p>3、Spring Boot环境变量读取和属性对象的绑定</p> 
<p>4、Spring Boot使用自定义的properties</p> 
<p>5、Spring Boot使用自定义的properties</p> 
<p>6、Spring Boot使用@SpringBootApplication</p> 
<p>7、Spring Boot 监控和管理生产环境</p> 
<p> </p> 
<p><strong>第十章 Spring Boot 打包部署</strong></p> 
<p>1、Spring Boot打包部署（(提供Linux的sh文件)）</p> 
<p> </p> 
<p><strong>第十一章 Spring Boot 日志</strong></p> 
<p>1、spring boot日志—理论</p> 
<p>2、Spring Boot日志-logback</p> 
<p style="background:rgb(242,242,242)"> </p> 
<p>3、Spring Boot日志-log4j2</p> 
<p></p> 
<p><span style="color:rgb(85,85,85)">更多查看博客： <a target="_blank" href="http://412887952-qq-com.iteye.com/" rel="nofollow noopener noreferrer" style="color:rgb(16,138,198)">http://412887952-qq-com.iteye.com/</a></span></p> 
<br> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a6d4605856337fef95172a7cb70b07d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ReportViewer 只报 “本地报表处理期间出错” 其它很多原因的！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74252865e31a716493ef1e90a30d6570/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java.io.EOFException: Unexpected end of ZLIB input stream异常处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>