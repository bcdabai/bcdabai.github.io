<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>web服务高级使用     Samba共享 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="web服务高级使用     Samba共享" />
<meta property="og:description" content="首先将防火墙改为trusted模式 前提案例:
为虚拟机 server 配置以下虚拟Web主机
实现三个网站的部署实现客户端访问server0.example.com网页内容为 卖女孩的小火柴实现客户端访问www0.example.com网页内容为 奔跑吧骆驼实现客户端访问webapp0.example.com网页内容为 20里春风不如你 服务端: [root@server0 ~]# yum -y install httpd root@server0 ~]# vim /etc/httpd/conf.d/zz.conf &lt;virtualhost *:80&gt; servername server0.example.com documentroot /var/www/abc01 &lt;/virtualhost&gt; &lt;virtualhost *:80&gt; servername www0.example.com documentroot /var/www/abc02 &lt;/virtualhost&gt; &lt;virtualhost *:80&gt; servername webapp0.example.com documentroot /var/www/abc03 &lt;/virtualhost&gt; [root@server0 ~]# cd /var/www [root@server0 www]# mkdir abc01 abc02 abc03 [root@server0 www]# echo &#39; &lt; h1 &gt;卖女孩的小火柴 &#39; &gt; abc01/index.html [root@server0 www]# echo &#39;&lt; h1&gt;奔跑吧骆驼&#39; &gt; abc02/index.html [root@server0 www]# echo &#39;&lt; h1&gt;20里春风不如你&#39; &gt; abc03/index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bafa6d49d13a32d54abfa9d12da48782/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-17T21:18:29+08:00" />
<meta property="article:modified_time" content="2019-12-17T21:18:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">web服务高级使用     Samba共享</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h6><a id="trusted_0"></a>首先将防火墙改为trusted模式</h6> 
<p>前提案例:<br> 为虚拟机 server 配置以下虚拟Web主机</p> 
<ul><li>实现三个网站的部署</li><li>实现客户端访问server0.example.com网页内容为 卖女孩的小火柴</li><li>实现客户端访问www0.example.com网页内容为 奔跑吧骆驼</li><li>实现客户端访问webapp0.example.com网页内容为 20里春风不如你</li></ul> 
<h6><a id="_7"></a>服务端:</h6> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># yum  -y  install  httpd</span>
root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/httpd/conf.d/zz.conf</span>
<span class="token operator">&lt;</span>virtualhost  *:80<span class="token operator">&gt;</span>
servername   server0.example.com
documentroot   /var/www/abc01
<span class="token operator">&lt;</span>/virtualhost<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>virtualhost  *:80<span class="token operator">&gt;</span>
servername   www0.example.com
documentroot   /var/www/abc02
<span class="token operator">&lt;</span>/virtualhost<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>virtualhost  *:80<span class="token operator">&gt;</span>
servername   webapp0.example.com
documentroot   /var/www/abc03
<span class="token operator">&lt;</span>/virtualhost<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cd  /var/www</span>
<span class="token punctuation">[</span>root@server0 www<span class="token punctuation">]</span><span class="token comment"># mkdir  abc01  abc02   abc03</span>
<span class="token punctuation">[</span>root@server0 www<span class="token punctuation">]</span><span class="token comment"># echo  ' &lt; h1 &gt;卖女孩的小火柴 '  &gt; abc01/index.html</span>
<span class="token punctuation">[</span>root@server0 www<span class="token punctuation">]</span><span class="token comment"># echo  '&lt; h1&gt;奔跑吧骆驼'  &gt; abc02/index.html</span>
<span class="token punctuation">[</span>root@server0 www<span class="token punctuation">]</span><span class="token comment"># echo  '&lt; h1&gt;20里春风不如你'  &gt; abc03/index.html</span>
<span class="token punctuation">[</span>root@server0 www<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  httpd</span>
</code></pre> 
<h6><a id="_31"></a>客户端:</h6> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># firefox  server0.example.com</span>
<span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># firefox  www0.example.com</span>
<span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># firefox  webapp0.example.com</span>
</code></pre> 
<h6><a id="_38"></a>配置目录文件</h6> 
<p>文件夹权限:<br> 针对documentroot网页目录权限<br> httpd运行身份(用户/组):apache</p> 
<p>客户机地址权限:<br> 使用&lt; directory &gt;配置区段<br> 每个文件夹自动继承其父目录的ACL访问权限<br> 除非针对子目录有明确设置</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>Directory <span class="token string">"目标的绝对路径"</span><span class="token operator">&gt;</span>
    <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
      Require all granted <span class="token operator">|</span> denied   <span class="token comment">#允许或拒绝所有人访问</span>
    Require   IP  IP地址或网段        <span class="token comment">#仅允许某IP或网段访问</span>
<span class="token operator">&lt;</span>/Directory<span class="token operator">&gt;</span>
</code></pre> 
<p>案例:<br> 在web网站http://server0.example.com的documentroot目录下创建private子目录<br> 要求:<br> 1)从http://classroom/pub/materials/private.html下载一个文件副本到这个目录,重命名为index.html<br> 2)不要对文件index.html的内容有任何修改<br> 3)从server0上任何人都可以浏览private的内容,但从其他系统上不可以访问这个目录的内容</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cat  /etc/httpd/conf.d/zz.conf    #先查看当前web的存放路径</span>
  virtualhost  *:80<span class="token operator">&gt;</span>
servername   server0.example.com
documentroot   /var/www/abc01
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># mkdir  /var/www/abc01/private     #在当前web路径下创建private子目录</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># echo '&lt;h1&gt;wo   shi  private'  &gt;   /var/www/abc01/index.html</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cat  /var/www/abc01/index.html</span>

<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/xxx.conf      #修改调用配置文件,只能让本机访问</span>
<span class="token operator">&lt;</span>Directory <span class="token string">"/var/www/abc01/private"</span><span class="token operator">&gt;</span>
    Require ip  172.25.0.11
<span class="token operator">&lt;</span>/Directory<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  httpd           #重起服务</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># firefox  server0.example.com/private    #本机访问(其他系统是无法访问的!!!)</span>
</code></pre> 
<p>案例2:使用自定Web根目录<br> 调整 Web 站点 http://server0.example.com 的网页目录,要求如下:<br> 1)新建目录 /webroot,作为此站点新的网页目录<br> 2)从http://classroom/pub/materials/private.html下载一个文件副本到这个目录,重命名为index.html<br> 3)不要对文件index.html的内容有任何修改<br> 4)确保站点hhtp://server0.example.com仍然可以访问</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># mkdir  /webroot　　　　　　#创建目录</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># echo  '&lt;h1&gt;wo shi webroot' &gt;  /webroot/index.html</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cat  /webroot/index.html         </span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>wo shi webroot
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/xx.conf       #针对/webroot网页进行访问控制</span>
<span class="token operator">&lt;</span>Directory <span class="token string">"/webroot"</span><span class="token operator">&gt;</span>
    Require all granted                               <span class="token comment">#允许所有人访问</span>
<span class="token operator">&lt;</span>/Directory<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/zz.conf      #修改调用配置文件</span>
<span class="token operator">&lt;</span>virtualhost  *:80<span class="token operator">&gt;</span>
servername  server0.example.com
documentroot  /webroot
<span class="token operator">&lt;</span>/virtualhost<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  httpd           #重起服务(此时服务无法启动,显示没有权限)</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># ls  -Zd  /webroot                    #查看该目录的上下文信息</span>
drwxr-xr-x. root root unconfined_u:object_r:default_t:s0 /webroot
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># ls  -Zd  /var/www                     #查看目录的上下文信息</span>
drwxr-xr-x. root root system_u:object_r:httpd_sys_content_t:s0 /var/www
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># chcon  -R  --reference=/var/www  /webroot    #重新设置目录属性</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># ls  -Zd  /var/www</span>
drwxr-xr-x. root root system_u:object_r:httpd_sys_content_t:s0 /var/www
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># ls  -Zd  /webroot</span>
drwxr-xr-x. root root system_u:object_r:httpd_sys_content_t:s0 /webroot
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart  httpd            #重起服务</span>
</code></pre> 
<h5><a id="SELinux_______118"></a>SELinux策略：布尔值 安全上下文值 非默认端口的开放</h5> 
<p>安全上下文值:非默认端口开放,类似于标签,起标识作用<br> chcon -R --reference=模板目录 新目录</p> 
<h2><a id="_122"></a>部署动态网站</h2> 
<h6><a id="_123"></a>静态网站的运行</h6> 
<p>• 服务端的原始网页 = 浏览器访问到的网页<br> – 由Web服务软件处理所有请求<br> – 文本(txt/html)、图片(jpg/png)等静态资源</p> 
<h6><a id="_128"></a>动态网站的运行</h6> 
<p>• 服务端的原始网页 ≠ 浏览器访问到的网页<br> – 由Web服务软件接受请求,动态程序转后端模块处理<br> – PHP网页、Python网页、JSP网页…</p> 
<p>一、下载Python页面文件<br> 为站点 webapp0.example.com 配置提供动态Web内容</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cat   /etc/httpd/conf.d/zz.conf    #查看当前网页文件默认路径</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cd  /var/www/qwe                   #切换到默认网页路径</span>
<span class="token punctuation">[</span>root@server0 qwe<span class="token punctuation">]</span><span class="token comment"># wget  http://classroom.example.com/pub/materials/webinfo.wsgi   #下载Python页面文件</span>
<span class="token punctuation">[</span>root@server0 qwe<span class="token punctuation">]</span><span class="token comment"># cat  webinfo.wsgi </span>
<span class="token comment">#!/usr/bin/env python</span>
<span class="token function">import</span> <span class="token function">time</span>
def application <span class="token punctuation">(</span>environ, start_response<span class="token punctuation">)</span>:
  response_body <span class="token operator">=</span> <span class="token string">'UNIX EPOCH time is now: %s\n'</span> % time.time<span class="token punctuation">(</span><span class="token punctuation">)</span>
  status <span class="token operator">=</span> <span class="token string">'200 OK'</span>
  response_headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span>, <span class="token string">'text/plain'</span><span class="token punctuation">)</span>,
                      <span class="token punctuation">(</span><span class="token string">'Content-Length'</span>, <span class="token string">'1'</span><span class="token punctuation">)</span>,
                      <span class="token punctuation">(</span><span class="token string">'Content-Length'</span>, str<span class="token punctuation">(</span>len<span class="token punctuation">(</span>response_body<span class="token punctuation">))</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  start_response<span class="token punctuation">(</span>status, response_headers<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>response_body<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@server0 qwe<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/zz.conf        #修改调用配置文件</span>
<span class="token operator">&lt;</span>VirtualHost  *:80<span class="token operator">&gt;</span>
  ServerName  webapp0.example.com
  DocumentRoot  /var/www/abc03
  Alias  /  /var/www/abc03/webinfo.wsgi
                         <span class="token comment">#当客户端直接访问 网页文件根目录时，呈现/var/www/abc03/webinfo.wsgi</span>
<span class="token operator">&lt;</span>/VirtualHost<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>root@server0 qwe<span class="token punctuation">]</span><span class="token comment"># systemctl restart  httpd</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># yum  -y  install  mod_wsgi       #安装mod_wsgi软件，可以翻译执行Python页面的代码</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/zz.conf     #修改调用配置文件</span>
Listen  8909                                   <span class="token comment">#设置httpd程序监听8909端口</span>
<span class="token operator">&lt;</span>VirtualHost  *:8909<span class="token operator">&gt;</span>                           <span class="token comment">#设置本虚拟Web主机将在8909端口呈现</span>
  ServerName  webapp0.example.com               
  DocumentRoot  /var/www/abc03
  WsgiScriptAlias / /var/www/abc03/webinfo.wsgi

<span class="token operator">&lt;</span>/VirtualHost<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># semanage   port  -a  -t  http_port_t  -p  tcp  8909    #修改非默认端口的开放策略     -a  添加    -t  类型   -p   协议</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart httpd      #重起服务</span>
</code></pre> 
<p>页面跳转：Alias 网络路径 实际呈现的网页文件路径<br> 网络路径 /：网页文件的根目录，匹配客户端浏览器中直接输入域名</p> 
<h2><a id="Web_176"></a>安全Web服务</h2> 
<p>http:超文本传输协议<br> https:安全的超文本传输协议</p> 
<p>PKI公钥基础设施<br> • Public Key Infrastructure,公钥基础设施<br> – 公钥:主要用来加密数据<br> – 私钥:主要用来解密数据(与相应的公钥匹配)<br> – 数字证书:证明拥有者的合法性/权威性(单位名称、有效期、公钥、颁发机构及签名、…)<br> – Certificate Authority,数字证书授权中心:负责证书<br> 的申请/审核/颁发/鉴定/撤销等管理工作<br> 虚拟机server：构建安全的Web，以www0.example.com为例<br> 1.下载网站证书（营业执照）</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># cd  /etc/pki/tls/certs/</span>
<span class="token punctuation">[</span>root@server0 certs<span class="token punctuation">]</span><span class="token comment"># wget   http://classroom/pub/tls/certs/server0.crt </span>
</code></pre> 
<p>2.下载根证书(工商局信息)</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 certs<span class="token punctuation">]</span><span class="token comment"># wget    http://classroom/pub/example-ca.crt</span>
</code></pre> 
<p>3.下载私钥(解密数据)</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 certs<span class="token punctuation">]</span><span class="token comment"># cd ..</span>
<span class="token punctuation">[</span>root@server0 tls<span class="token punctuation">]</span><span class="token comment"># cd  private/</span>
<span class="token punctuation">[</span>root@server0 private<span class="token punctuation">]</span><span class="token comment"># wget   http://classroom/pub/tls/private/server0.key </span>
</code></pre> 
<p>4.下载软件,支持安全的加密通信</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># yum  remove   mod_ssl</span>
</code></pre> 
<p>5.修改配置文件</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/httpd/conf.d/ssl.conf</span>
SSLCertificateFile /etc/pki/tls/certs/server0.crt
SSLCertificateKeyFile /etc/pki/tls/private/server0.key
SSLCACertificateFile /etc/pki/tls/certs/example-ca.crt
</code></pre> 
<p>6.重起服务</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  httpd</span>
</code></pre> 
<p>7.客户端访问</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># firefox  www0.example.com</span>
</code></pre> 
<h2><a id="Samba_230"></a>Samba共享(共享文件)</h2> 
<p>Samba共享服务,专门用于Windows和Linux跨平台的共享<br> NFS共享,专门用于Linux和Linux之间的共享</p> 
<p>服务端:<br> 1.安装Samba软件</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># yum  -y  install  samba</span>
</code></pre> 
<h6><a id="SambaSambaSamba_240"></a>建立Samba共享用户(账号):专用于访问Samba共享的时候,验证的用户,基于本地用户,需要设置Samba共享独立的密码</h6> 
<p>2.创建用户,将其加入Samba共享用户,为其设置密码</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># useradd  zzz</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># pdbedit  -a  zzz</span>
new password:
retype new password:
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># pdbedit  -L    #查看该用户是否存在</span>
zzz:1001:
</code></pre> 
<p>3.创建Samba共享的目录</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># mkdir  /asd</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># echo  1233465 &gt; /asd/a.txt</span>
</code></pre> 
<p>4.修改配置文件</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/samba/smb.conf</span>
<span class="token punctuation">[</span>haha<span class="token punctuation">]</span>         <span class="token comment">#在文件末尾书写</span>
path <span class="token operator">=</span>  /asd
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  smb</span>
</code></pre> 
<p>5.修改SELinux策略:布尔值(功能的开关)</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># getsebool  -a  | grep samba    #查看当前布尔值 </span>
samba_create_home_dirs --<span class="token operator">&gt;</span> off
samba_domain_controller --<span class="token operator">&gt;</span> off
samba_enable_home_dirs --<span class="token operator">&gt;</span> off
samba_export_all_ro --<span class="token operator">&gt;</span> off
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># setsebool samba_export_all_ro  on   #修改布尔值</span>
<span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># getsebool  -a  | grep samba   #再次查看布尔值</span>
samba_create_home_dirs --<span class="token operator">&gt;</span> off
samba_domain_controller --<span class="token operator">&gt;</span> off
samba_enable_home_dirs --<span class="token operator">&gt;</span> off
samba_export_all_ro --<span class="token operator">&gt;</span> on
</code></pre> 
<p>6.重起服务</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@server0 ~<span class="token punctuation">]</span><span class="token comment"># systemctl  restart  smb</span>
</code></pre> 
<p>客户端:<br> 1.安装软件</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># yum  -y  install  cifs-utils</span>
</code></pre> 
<p>2.挂载访问<br> NFS格式: mount IP地址:/共享的路径 挂载点目录<br> Samba格式:mount -o user=xxxxx,pass=xxxxx //IP地址/共享名 挂载点目录</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># mount  -o  user=zzz,pass=123   //172.25.0.11/haha  /mnt</span>
</code></pre> 
<p>3.设置开机自启</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/fstab</span>
//172.25.0.11/haha    /mnt  cifs  defaults,user<span class="token operator">=</span>zzz,pass<span class="token operator">=</span>123,_netdev  0  0
<span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># umount  /mnt</span>
<span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># mount -a</span>
<span class="token punctuation">[</span>root@desktop0 ~<span class="token punctuation">]</span><span class="token comment"># df  -h</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a7fa5db1a9b4d074891922de612c4f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python	[ pip ] 安装requests模块</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c5c96056a5d89d709f179127d3c70fb3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Hadoop】（七）Yarn 详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>