<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rust-Rocketæ¡†æ¶ç¬”è®° - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Rust-Rocketæ¡†æ¶ç¬”è®°" />
<meta property="og:description" content="Rust-Rocketæ¡†æ¶ç¬”è®° Rocket-Learn-docRocket Addrè§†é¢‘åœ°å€ What is RocketQuickStartä¸‹è½½Rocket-Rustè¿è¡ŒRust-Rocket-Hello-é”™è¯¯-ç«¯å£å ç”¨è§£å†³æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µæ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶æ›´æ”¹Rocketé»˜è®¤å¯åŠ¨ç«¯å£å¯åŠ¨æˆåŠŸ GetStart-Hello worldåˆ›å»ºé¡¹ç›®cargoIDEA æ·»åŠ ä¾èµ–æ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶main.rsres Rocket-ç”Ÿå‘½å‘¨æœŸRocket-è¯·æ±‚æ–¹æ³•åŠ¨æ€è·¯å¾„è·¯å¾„ä¿æŠ¤å¿½ç•¥è·¯å¾„è½¬å‘é€šè¿‡å‚æ•°ç±»å‹æ•è·ranké»˜è®¤ç­‰çº§ è¯·æ±‚å®ˆå«è½¬å‘å®ˆå« Cookieéšç§Cookieå¯†é’¥ æ ¼å¼Formatè¯·æ±‚ä½“æ•°æ®Jsonå¼€å¯jsonç‰¹æ€§å¼•å…¥useè®¾ç½®è¯·æ±‚ä½“æ•°æ®ä½“ï¼ˆstructï¼‰ç¼–å†™æ–¹æ³•ä¸´æ—¶æ–‡ä»¶æµåª’ä½“ QueryStringé™æ€å‚æ•°åŠ¨æ€å‚æ•°å°¾éšå‚æ•° é”™è¯¯å¤„ç†å™¨ Rocket-å“åº”ResponderåŒ…è£…ä¾‹å­ è‡ªå®šä¹‰åº”ç­”å™¨ç®€å•ç¤ºä¾‹å®Œæ•´ç¤ºä¾‹ Responderå®ç°OptionResult å“åº”Jsonæ¨¡æ¿æ·»åŠ ä¾èµ–ä¿®æ”¹Cargo.tomlmain.rsæ·»åŠ é¡µé¢æ¨¡æ¿ Rocket-çŠ¶æ€ç®¡ç†Rocket-è¿æ¥æ± è¿æ¥æ•°æ®åº“Mysqlæ·»åŠ ä¾èµ–è®¾ç½®æ•°æ®åº“è¿æ¥é…ç½®(Rocket.toml)main.rs ä½¿ç”¨Figmentæå–è‡ªå®šä¹‰é…ç½®æ·»åŠ ä¾èµ–è®¾ç½®app.tomlmain.rs Rocket-Learn-doc createTime:20230430author:syf20020816@outlook.comemail:syf20020816@outlook.com Rocket Addr åœ°å€ï¼šhttps://rocket.rs/v0.5-rc/guide/introduction/
è§†é¢‘åœ°å€ https://www.bilibili.com/video/BV14h41177Ga/?spm_id_from=333.999.0.0&amp;vd_source=9c2ae08297163e79152407c969f04717
What is Rocket Rocketæ˜¯Rustçš„Webæ¡†æ¶ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æŠŠç«ç®­çœ‹ä½œæ˜¯ä¸€ä¸ªæ›´çµæ´»ï¼Œæ›´å‹å¥½æ”¯æŒçƒ­æ’æ‹”,æˆ‘ä»¬æ›´æ„¿æ„æŠŠç«ç®­çœ‹ä½œæ˜¯ä¸€ç§æ–°çš„ä¸œè¥¿ã€‚Rocketçš„ç›®æ ‡æ˜¯å¿«é€Ÿã€ç®€å•å’Œçµæ´»ï¼ŒåŒæ—¶å°½å¯èƒ½æä¾›æœ‰ä¿è¯çš„å®‰å…¨æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒRocketè¿˜è‡´åŠ›äºæˆä¸ºä¹è¶£ï¼Œå®ƒé€šè¿‡ç¡®ä¿æ‚¨ç¼–å†™å°½å¯èƒ½å°‘çš„ä»£ç æ¥å®Œæˆä»»åŠ¡æ¥å®ç°è¿™ä¸€ç‚¹ã€‚
Rocketçš„è®¾è®¡å›´ç»•ç€ä¸‰ä¸ªæ ¸å¿ƒç†å¿µï¼š
å®‰å…¨æ€§ã€æ­£ç¡®æ€§å’Œå¼€å‘äººå‘˜ä½“éªŒè‡³å…³é‡è¦ã€‚
é˜»åŠ›æœ€å°çš„è·¯å¾„åº”è¯¥ä¼šå¼•å¯¼æ‚¨è·å¾—æœ€å®‰å…¨ï¼Œæœ€æ­£ç¡®çš„Webåº”ç”¨ç¨‹åºï¼Œå°½ç®¡å®‰å…¨æ€§å’Œæ­£ç¡®æ€§ä¸åº”è¯¥ä»¥é™ä½å¼€å‘äººå‘˜ä½“éªŒä¸ºä»£ä»·ã€‚Rocketæ˜“äºä½¿ç”¨ï¼ŒåŒæ—¶é‡‡å–äº†å¾ˆå¥½çš„æªæ–½æ¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºæ˜¯å®‰å…¨å’Œæ­£ç¡®çš„ï¼Œè€Œæ— éœ€è®¤çŸ¥å¼€é”€ã€‚
æ‰€æœ‰è¯·æ±‚å¤„ç†ä¿¡æ¯éƒ½åº”è¯¥æ˜¯ç±»å‹åŒ–çš„ï¼Œå¹¶ä¸”æ˜¯ç‹¬ç«‹çš„ã€‚
å› ä¸ºWebå’ŒHTTPæœ¬èº«æ˜¯æ— ç±»å‹çš„ï¼ˆæˆ–å¼¦åœ° ç±»å‹çš„ï¼Œæ­£å¦‚ä¸€äº›äººæ‰€è¯´çš„é‚£æ ·ï¼‰ï¼Œè¿™æ„å‘³ç€æŸäº›ä¸œè¥¿æˆ–æŸäººå¿…é¡»å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæœ¬åœ°ç±»å‹ã€‚Rocketå¯ä»¥ä¸ºä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œè€Œä¸”ç¼–ç¨‹å¼€é”€ä¸ºé›¶ã€‚æ›´ä½•å†µï¼Œç«ç®­çš„è¯·æ±‚å¤„ç†æ˜¯è‡ªè¶³çš„ é›¶å…¨å±€çŠ¶æ€ï¼šå¤„ç†ç¨‹åºæ˜¯å…·æœ‰å¸¸è§„å‚æ•°çš„å¸¸è§„å‡½æ•°ã€‚
ä¸åº”å¼ºè¿«ä½œå‡ºå†³å®šã€‚
æ¨¡æ¿ã€åºåˆ—åŒ–ã€ä¼šè¯ä»¥åŠå‡ ä¹æ‰€æœ‰å…¶ä»–ç»„ä»¶éƒ½æ˜¯å¯æ’æ‹”çš„å¯é€‰ç»„ä»¶ã€‚è™½ç„¶Rocketå¯¹æ¯ä¸€ä¸ªéƒ½æœ‰å®˜æ–¹æ”¯æŒå’Œåº“ï¼Œä½†å®ƒä»¬æ˜¯å®Œå…¨å¯é€‰å’Œå¯äº¤æ¢çš„ã€‚
è¿™ä¸‰ä¸ªæƒ³æ³•å†³å®šäº†Rocketçš„ç•Œé¢ï¼Œä½ ä¼šå‘ç°å®ƒä»¬éƒ½åµŒå…¥äº†Rocketçš„æ ¸å¿ƒåŠŸèƒ½
QuickStart ä¸‹è½½Rocket-Rust git clone https://github.com/SergioBenitez/Rocket cd Rocket/examples/hello cargo run è¿è¡ŒRust-Rocket-Hello-é”™è¯¯-ç«¯å£å ç”¨ Configured for debug. &gt;&gt; address: 127.0.0.1 &gt;&gt; port: 8000 &gt;&gt; workers: 8 &gt;&gt; max blocking threads: 512 &gt;&gt; ident: Rocket &gt;&gt; IP header: X-Real-IP &gt;&gt; limits: bytes = 8KiB, data-form = 2MiB, file = 1MiB, form = 32KiB, json = 1MiB, msgpack = 1MiB, string = 8KiB &gt;&gt; temp dir: C:\Users\SYF200~1\AppData\Local\Temp\ &gt;&gt; http/2: true &gt;&gt; keep-alive: 5s &gt;&gt; tls: disabled &gt;&gt; shutdown: ctrlc = true, force = true, grace = 2s, mercy = 3s &gt;&gt; log level: normal &gt;&gt; cli colors: true Routes: &gt;&gt; (hello) GET /?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e51ef23a4ee380d620d0003fe7242651/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-03T02:32:18+08:00" />
<meta property="article:modified_time" content="2023-05-03T02:32:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Rust-Rocketæ¡†æ¶ç¬”è®°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Rust-Rocketæ¡†æ¶ç¬”è®°</h4> 
 <ul><li><a href="#RocketLearndoc_1" rel="nofollow">Rocket-Learn-doc</a></li><li><a href="#Rocket_Addr_7" rel="nofollow">Rocket Addr</a></li><li><ul><li><a href="#_10" rel="nofollow">è§†é¢‘åœ°å€</a></li></ul> 
  </li><li><a href="#What_is_Rocket_12" rel="nofollow">What is Rocket</a></li><li><a href="#QuickStart_32" rel="nofollow">QuickStart</a></li><li><ul><li><a href="#RocketRust_34" rel="nofollow">ä¸‹è½½Rocket-Rust</a></li><li><a href="#RustRocketHello_42" rel="nofollow">è¿è¡ŒRust-Rocket-Hello-é”™è¯¯-ç«¯å£å ç”¨</a></li><li><ul><li><a href="#_79" rel="nofollow">è§£å†³</a></li><li><a href="#_81" rel="nofollow">æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</a></li><li><a href="#RockettomlRocket_87" rel="nofollow">æ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶æ›´æ”¹Rocketé»˜è®¤å¯åŠ¨ç«¯å£</a></li><li><a href="#_100" rel="nofollow">å¯åŠ¨æˆåŠŸ</a></li></ul> 
  </li></ul> 
  </li><li><a href="#GetStartHello_world_139" rel="nofollow">GetStart-Hello world</a></li><li><ul><li><a href="#_141" rel="nofollow">åˆ›å»ºé¡¹ç›®</a></li><li><ul><li><a href="#cargo_143" rel="nofollow">cargo</a></li><li><a href="#IDEA_149" rel="nofollow">IDEA</a></li></ul> 
   </li><li><a href="#_155" rel="nofollow">æ·»åŠ ä¾èµ–</a></li><li><a href="#Rockettoml_162" rel="nofollow">æ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶</a></li><li><a href="#mainrs_169" rel="nofollow">main.rs</a></li><li><ul><li><a href="#res_189" rel="nofollow">res</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Rocket_235" rel="nofollow">Rocket-ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#Rocket_239" rel="nofollow">Rocket-è¯·æ±‚</a></li><li><ul><li><a href="#_241" rel="nofollow">æ–¹æ³•</a></li><li><a href="#_263" rel="nofollow">åŠ¨æ€è·¯å¾„</a></li><li><a href="#_276" rel="nofollow">è·¯å¾„ä¿æŠ¤</a></li><li><a href="#_296" rel="nofollow">å¿½ç•¥è·¯å¾„</a></li><li><a href="#_312" rel="nofollow">è½¬å‘</a></li><li><ul><li><a href="#_344" rel="nofollow">é€šè¿‡å‚æ•°ç±»å‹æ•è·</a></li><li><a href="#rank_358" rel="nofollow">ranké»˜è®¤ç­‰çº§</a></li></ul> 
   </li><li><a href="#_371" rel="nofollow">è¯·æ±‚å®ˆå«</a></li><li><ul><li><a href="#_395" rel="nofollow">è½¬å‘å®ˆå«</a></li></ul> 
   </li><li><a href="#Cookie_433" rel="nofollow">Cookie</a></li><li><ul><li><a href="#Cookie_435" rel="nofollow">éšç§Cookie</a></li><li><a href="#_491" rel="nofollow">å¯†é’¥</a></li></ul> 
   </li><li><a href="#Format_499" rel="nofollow">æ ¼å¼Format</a></li><li><a href="#_519" rel="nofollow">è¯·æ±‚ä½“æ•°æ®</a></li><li><ul><li><a href="#Json_530" rel="nofollow">Json</a></li><li><ul><li><a href="#json_534" rel="nofollow">å¼€å¯jsonç‰¹æ€§</a></li><li><a href="#use_540" rel="nofollow">å¼•å…¥use</a></li><li><a href="#struct_546" rel="nofollow">è®¾ç½®è¯·æ±‚ä½“æ•°æ®ä½“ï¼ˆstructï¼‰</a></li><li><a href="#_557" rel="nofollow">ç¼–å†™æ–¹æ³•</a></li><li><a href="#_571" rel="nofollow">ä¸´æ—¶æ–‡ä»¶</a></li><li><a href="#_586" rel="nofollow">æµåª’ä½“</a></li></ul> 
   </li></ul> 
   </li><li><a href="#QueryString_611" rel="nofollow">QueryString</a></li><li><ul><li><a href="#_615" rel="nofollow">é™æ€å‚æ•°</a></li><li><a href="#_629" rel="nofollow">åŠ¨æ€å‚æ•°</a></li><li><a href="#_671" rel="nofollow">å°¾éšå‚æ•°</a></li></ul> 
   </li><li><a href="#_696" rel="nofollow">é”™è¯¯å¤„ç†å™¨</a></li></ul> 
  </li><li><a href="#Rocket_754" rel="nofollow">Rocket-å“åº”</a></li><li><ul><li><a href="#Responder_758" rel="nofollow">Responder</a></li><li><a href="#_762" rel="nofollow">åŒ…è£…</a></li><li><ul><li><a href="#_802" rel="nofollow">ä¾‹å­</a></li></ul> 
   </li><li><a href="#_820" rel="nofollow">è‡ªå®šä¹‰åº”ç­”å™¨</a></li><li><ul><li><a href="#_824" rel="nofollow">ç®€å•ç¤ºä¾‹</a></li><li><a href="#_839" rel="nofollow">å®Œæ•´ç¤ºä¾‹</a></li></ul> 
   </li><li><a href="#Responder_884" rel="nofollow">Responderå®ç°</a></li><li><ul><li><a href="#Option_897" rel="nofollow">Option</a></li><li><a href="#Result_912" rel="nofollow">Result</a></li></ul> 
   </li><li><a href="#Json_927" rel="nofollow">å“åº”Json</a></li><li><a href="#_944" rel="nofollow">æ¨¡æ¿</a></li><li><ul><li><a href="#_946" rel="nofollow">æ·»åŠ ä¾èµ–</a></li><li><a href="#Cargotoml_952" rel="nofollow">ä¿®æ”¹Cargo.toml</a></li><li><a href="#mainrs_959" rel="nofollow">main.rs</a></li><li><a href="#_980" rel="nofollow">æ·»åŠ é¡µé¢æ¨¡æ¿</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Rocket_996" rel="nofollow">Rocket-çŠ¶æ€ç®¡ç†</a></li><li><a href="#RocketMysql_1052" rel="nofollow">Rocket-è¿æ¥æ± è¿æ¥æ•°æ®åº“Mysql</a></li><li><ul><li><a href="#_1054" rel="nofollow">æ·»åŠ ä¾èµ–</a></li><li><a href="#Rockettoml_1060" rel="nofollow">è®¾ç½®æ•°æ®åº“è¿æ¥é…ç½®(Rocket.toml)</a></li><li><a href="#mainrs_1073" rel="nofollow">main.rs</a></li></ul> 
  </li><li><a href="#Figment_1113" rel="nofollow">ä½¿ç”¨Figmentæå–è‡ªå®šä¹‰é…ç½®</a></li><li><ul><li><a href="#_1115" rel="nofollow">æ·»åŠ ä¾èµ–</a></li><li><a href="#apptoml_1121" rel="nofollow">è®¾ç½®app.toml</a></li><li><a href="#mainrs_1127" rel="nofollow">main.rs</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="RocketLearndoc_1"></a>Rocket-Learn-doc</h2> 
<ul><li>createTime:20230430</li><li>author:syf20020816@outlook.com</li><li>email:syf20020816@outlook.com</li></ul> 
<h2><a id="Rocket_Addr_7"></a>Rocket Addr</h2> 
<p>åœ°å€ï¼šhttps://rocket.rs/v0.5-rc/guide/introduction/</p> 
<h3><a id="_10"></a>è§†é¢‘åœ°å€</h3> 
<p><a href="https://www.bilibili.com/video/BV14h41177Ga/?spm_id_from=333.999.0.0&amp;vd_source=9c2ae08297163e79152407c969f04717" rel="nofollow">https://www.bilibili.com/video/BV14h41177Ga/?spm_id_from=333.999.0.0&amp;vd_source=9c2ae08297163e79152407c969f04717</a></p> 
<h2><a id="What_is_Rocket_12"></a>What is Rocket</h2> 
<p>Rocketæ˜¯Rustçš„Webæ¡†æ¶ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æŠŠç«ç®­çœ‹ä½œæ˜¯ä¸€ä¸ªæ›´çµæ´»ï¼Œæ›´å‹å¥½æ”¯æŒçƒ­æ’æ‹”,æˆ‘ä»¬æ›´æ„¿æ„æŠŠç«ç®­çœ‹ä½œæ˜¯ä¸€ç§æ–°çš„ä¸œè¥¿ã€‚Rocketçš„ç›®æ ‡æ˜¯å¿«é€Ÿã€ç®€å•å’Œçµæ´»ï¼ŒåŒæ—¶å°½å¯èƒ½æä¾›æœ‰ä¿è¯çš„å®‰å…¨æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒRocketè¿˜è‡´åŠ›äºæˆä¸º<em>ä¹è¶£</em>ï¼Œå®ƒé€šè¿‡ç¡®ä¿æ‚¨ç¼–å†™å°½å¯èƒ½å°‘çš„ä»£ç æ¥å®Œæˆä»»åŠ¡æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p> 
<p>Rocketçš„è®¾è®¡å›´ç»•ç€ä¸‰ä¸ªæ ¸å¿ƒç†å¿µï¼š</p> 
<ul><li> <p><strong>å®‰å…¨æ€§ã€æ­£ç¡®æ€§å’Œå¼€å‘äººå‘˜ä½“éªŒè‡³å…³é‡è¦ã€‚</strong></p> <p>é˜»åŠ›æœ€å°çš„è·¯å¾„åº”è¯¥ä¼šå¼•å¯¼æ‚¨è·å¾—æœ€å®‰å…¨ï¼Œæœ€æ­£ç¡®çš„Webåº”ç”¨ç¨‹åºï¼Œå°½ç®¡å®‰å…¨æ€§å’Œæ­£ç¡®æ€§ä¸åº”è¯¥ä»¥é™ä½å¼€å‘äººå‘˜ä½“éªŒä¸ºä»£ä»·ã€‚Rocketæ˜“äºä½¿ç”¨ï¼ŒåŒæ—¶é‡‡å–äº†å¾ˆå¥½çš„æªæ–½æ¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºæ˜¯å®‰å…¨å’Œæ­£ç¡®çš„ï¼Œè€Œæ— éœ€è®¤çŸ¥å¼€é”€ã€‚</p> </li><li> <p><strong>æ‰€æœ‰è¯·æ±‚å¤„ç†ä¿¡æ¯éƒ½åº”è¯¥æ˜¯ç±»å‹åŒ–çš„ï¼Œå¹¶ä¸”æ˜¯ç‹¬ç«‹çš„ã€‚</strong></p> <p>å› ä¸ºWebå’ŒHTTPæœ¬èº«æ˜¯æ— ç±»å‹çš„ï¼ˆæˆ–<em>å¼¦åœ°</em> ç±»å‹çš„ï¼Œæ­£å¦‚ä¸€äº›äººæ‰€è¯´çš„é‚£æ ·ï¼‰ï¼Œè¿™æ„å‘³ç€æŸäº›ä¸œè¥¿æˆ–æŸäººå¿…é¡»å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæœ¬åœ°ç±»å‹ã€‚Rocketå¯ä»¥ä¸ºä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œè€Œä¸”ç¼–ç¨‹å¼€é”€ä¸ºé›¶ã€‚æ›´ä½•å†µï¼Œç«ç®­çš„è¯·æ±‚å¤„ç†æ˜¯<strong>è‡ªè¶³çš„</strong> é›¶å…¨å±€çŠ¶æ€ï¼šå¤„ç†ç¨‹åºæ˜¯å…·æœ‰å¸¸è§„å‚æ•°çš„å¸¸è§„å‡½æ•°ã€‚</p> </li><li> <p><strong>ä¸åº”å¼ºè¿«ä½œå‡ºå†³å®šã€‚</strong></p> <p>æ¨¡æ¿ã€åºåˆ—åŒ–ã€ä¼šè¯ä»¥åŠå‡ ä¹æ‰€æœ‰å…¶ä»–ç»„ä»¶éƒ½æ˜¯å¯æ’æ‹”çš„å¯é€‰ç»„ä»¶ã€‚è™½ç„¶Rocketå¯¹æ¯ä¸€ä¸ªéƒ½æœ‰å®˜æ–¹æ”¯æŒå’Œåº“ï¼Œä½†å®ƒä»¬æ˜¯å®Œå…¨å¯é€‰å’Œå¯äº¤æ¢çš„ã€‚</p> </li></ul> 
<p>è¿™ä¸‰ä¸ªæƒ³æ³•å†³å®šäº†Rocketçš„ç•Œé¢ï¼Œä½ ä¼šå‘ç°å®ƒä»¬éƒ½åµŒå…¥äº†Rocketçš„æ ¸å¿ƒåŠŸèƒ½</p> 
<h2><a id="QuickStart_32"></a>QuickStart</h2> 
<h3><a id="RocketRust_34"></a>ä¸‹è½½Rocket-Rust</h3> 
<pre><code class="prism language-bash"><span class="token function">git</span> clone https://github.com/SergioBenitez/Rocket
<span class="token builtin class-name">cd</span> Rocket/examples/hello
cargo run
</code></pre> 
<h3><a id="RustRocketHello_42"></a>è¿è¡ŒRust-Rocket-Hello-é”™è¯¯-ç«¯å£å ç”¨</h3> 
<pre><code class="prism language-bash">Configured <span class="token keyword">for</span> debug.
   <span class="token operator">&gt;&gt;</span> address: <span class="token number">127.0</span>.0.1
   <span class="token operator">&gt;&gt;</span> port: <span class="token number">8000</span>
   <span class="token operator">&gt;&gt;</span> workers: <span class="token number">8</span>
   <span class="token operator">&gt;&gt;</span> max blocking threads: <span class="token number">512</span>
   <span class="token operator">&gt;&gt;</span> ident: Rocket
   <span class="token operator">&gt;&gt;</span> IP header: X-Real-IP
   <span class="token operator">&gt;&gt;</span> limits: bytes <span class="token operator">=</span> 8KiB, data-form <span class="token operator">=</span> 2MiB, <span class="token function">file</span> <span class="token operator">=</span> 1MiB, form <span class="token operator">=</span> 32KiB, json <span class="token operator">=</span> 1MiB, msgpack
 <span class="token operator">=</span> 1MiB, string <span class="token operator">=</span> 8KiB
   <span class="token operator">&gt;&gt;</span> temp dir: C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>SYF200~1<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>
   <span class="token operator">&gt;&gt;</span> http/2: <span class="token boolean">true</span>
   <span class="token operator">&gt;&gt;</span> keep-alive: 5s
   <span class="token operator">&gt;&gt;</span> tls: disabled
   <span class="token operator">&gt;&gt;</span> shutdown: ctrlc <span class="token operator">=</span> true, force <span class="token operator">=</span> true, grace <span class="token operator">=</span> 2s, mercy <span class="token operator">=</span> 3s
   <span class="token operator">&gt;&gt;</span> log level: normal
   <span class="token operator">&gt;&gt;</span> cli colors: <span class="token boolean">true</span>
Routes:
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>hello<span class="token punctuation">)</span> GET /?<span class="token operator">&lt;</span>lang<span class="token operator">&gt;&amp;</span><span class="token operator">&lt;</span>opt<span class="token punctuation">..</span><span class="token operator">&gt;</span>
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>wave<span class="token punctuation">)</span> GET /wave/<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>age<span class="token operator">&gt;</span>
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>mir<span class="token punctuation">)</span> GET /hello/Ğ¼Ğ¸Ñ€
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>world<span class="token punctuation">)</span> GET /hello/world
Fairings:
   <span class="token operator">&gt;&gt;</span> Shield <span class="token punctuation">(</span>liftoff, response, singleton<span class="token punctuation">)</span>
   <span class="token operator">&gt;&gt;</span> Compatibility Normalizer <span class="token punctuation">(</span>request<span class="token punctuation">)</span>
Error: Rocket failed to <span class="token builtin class-name">bind</span> network socket to given address/port.
   <span class="token operator">&gt;&gt;</span> ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚ <span class="token punctuation">(</span>os error <span class="token number">10013</span><span class="token punctuation">)</span>
thread <span class="token string">'main'</span> panicked at <span class="token string">'aborting due to socket bind error'</span>, E:<span class="token punctuation">\</span>Rust<span class="token punctuation">\</span>rocket_learn<span class="token punctuation">\</span>Rocket<span class="token punctuation">\</span>co
re<span class="token punctuation">\</span>lib<span class="token punctuation">\</span>src<span class="token punctuation">\</span>error.rs:204:17
note: run with <span class="token variable"><span class="token variable">`</span><span class="token assign-left variable">RUST_BACKTRACE</span><span class="token operator">=</span><span class="token number">1</span><span class="token variable">`</span></span> environment variable to display a backtrace
error: process didn't <span class="token builtin class-name">exit</span> successfully: <span class="token variable"><span class="token variable">`</span>E:<span class="token punctuation">\</span>Rust<span class="token punctuation">\</span>rocket_learn<span class="token punctuation">\</span>Rocket<span class="token punctuation">\</span>examples<span class="token punctuation">\</span>target<span class="token punctuation">\</span>debug<span class="token punctuation">\</span>h
ello.exe<span class="token variable">`</span></span> <span class="token punctuation">(</span>exit code: <span class="token number">101</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_79"></a>è§£å†³</h4> 
<h4><a id="_81"></a>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</h4> 
<pre><code class="prism language-bash"><span class="token function">netstat</span> -ano <span class="token operator">|</span>findstr <span class="token number">8000</span>
</code></pre> 
<h4><a id="RockettomlRocket_87"></a>æ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶æ›´æ”¹Rocketé»˜è®¤å¯åŠ¨ç«¯å£</h4> 
<p><img src="https://images2.imgbox.com/26/72/dYkiBGiV_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ·»åŠ å¦‚ä¸‹å†…å®¹ä¿®æ”¹é»˜è®¤ç«¯å£ï¼š</p> 
<pre><code class="prism language-toml">[default]
address = "127.0.0.1"
port = 8080
</code></pre> 
<h4><a id="_100"></a>å¯åŠ¨æˆåŠŸ</h4> 
<pre><code class="prism language-bash">Configured <span class="token keyword">for</span> debug.
   <span class="token operator">&gt;&gt;</span> address: <span class="token number">127.0</span>.0.1
   <span class="token operator">&gt;&gt;</span> port: <span class="token number">8080</span>
   <span class="token operator">&gt;&gt;</span> workers: <span class="token number">8</span>
   <span class="token operator">&gt;&gt;</span> max blocking threads: <span class="token number">512</span>
   <span class="token operator">&gt;&gt;</span> ident: Rocket
   <span class="token operator">&gt;&gt;</span> IP header: X-Real-IP
   <span class="token operator">&gt;&gt;</span> limits: bytes <span class="token operator">=</span> 8KiB, data-form <span class="token operator">=</span> 2MiB, <span class="token function">file</span> <span class="token operator">=</span> 1MiB, form <span class="token operator">=</span> 32KiB, json <span class="token operator">=</span> 1MiB, msgpack
 <span class="token operator">=</span> 1MiB, string <span class="token operator">=</span> 8KiB
   <span class="token operator">&gt;&gt;</span> temp dir: C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>SYF200~1<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>
   <span class="token operator">&gt;&gt;</span> http/2: <span class="token boolean">true</span>
   <span class="token operator">&gt;&gt;</span> keep-alive: 5s
   <span class="token operator">&gt;&gt;</span> tls: disabled
   <span class="token operator">&gt;&gt;</span> shutdown: ctrlc <span class="token operator">=</span> true, force <span class="token operator">=</span> true, grace <span class="token operator">=</span> 2s, mercy <span class="token operator">=</span> 3s
   <span class="token operator">&gt;&gt;</span> log level: normal
   <span class="token operator">&gt;&gt;</span> cli colors: <span class="token boolean">true</span>
Routes:
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>hello<span class="token punctuation">)</span> GET /?<span class="token operator">&lt;</span>lang<span class="token operator">&gt;&amp;</span><span class="token operator">&lt;</span>opt<span class="token punctuation">..</span><span class="token operator">&gt;</span>
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>wave<span class="token punctuation">)</span> GET /wave/<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>age<span class="token operator">&gt;</span>
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>mir<span class="token punctuation">)</span> GET /hello/Ğ¼Ğ¸Ñ€
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>world<span class="token punctuation">)</span> GET /hello/world
Fairings:
   <span class="token operator">&gt;&gt;</span> Compatibility Normalizer <span class="token punctuation">(</span>request<span class="token punctuation">)</span>
   <span class="token operator">&gt;&gt;</span> Shield <span class="token punctuation">(</span>liftoff, response, singleton<span class="token punctuation">)</span>
Shield:
   <span class="token operator">&gt;&gt;</span> Permissions-Policy: interest-cohort<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token operator">&gt;&gt;</span> X-Frame-Options: SAMEORIGIN
   <span class="token operator">&gt;&gt;</span> X-Content-Type-Options: nosniff
Rocket has launched from http://127.0.0.1:8080

</code></pre> 
<p>è®¿é—®ï¼š<code>127.0.0.1:8080/?emoji&amp;lang=en</code><br> <img src="https://images2.imgbox.com/6d/4f/LmQJQR7B_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="GetStartHello_world_139"></a>GetStart-Hello world</h2> 
<h3><a id="_141"></a>åˆ›å»ºé¡¹ç›®</h3> 
<h4><a id="cargo_143"></a>cargo</h4> 
<pre><code class="prism language-bash">cargo new hello-rocket
</code></pre> 
<h4><a id="IDEA_149"></a>IDEA</h4> 
<p><img src="https://images2.imgbox.com/ee/5e/RwXNCmCS_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/ae/09/06cdjqVr_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_155"></a>æ·»åŠ ä¾èµ–</h3> 
<pre><code class="prism language-toml">[dependencies]
rocket = "=0.5.0-rc.3"
</code></pre> 
<h3><a id="Rockettoml_162"></a>æ·»åŠ Rocket.tomlé…ç½®æ–‡ä»¶</h3> 
<pre><code class="prism language-toml">[default]
port = 8080
</code></pre> 
<h3><a id="mainrs_169"></a>main.rs</h3> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[macro_use]</span> <span class="token keyword">extern</span> <span class="token keyword">crate</span> <span class="token module-declaration namespace">rocket</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/index"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token punctuation">{<!-- --></span>
    <span class="token string">"ğŸ™‚hello world"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span>_<span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/apiV1_4"</span><span class="token punctuation">,</span><span class="token macro property">routes!</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>#[get("/")]</code>:è¡¨ç¤ºè®¾ç½®ä¸€ä¸ªGetè¯·æ±‚çš„æ–¹æ³•ï¼Œåœ¨æ‹¬å·ä¸­è®¾ç½®è¯·æ±‚åœ°å€</li><li><code>#[launch]</code>ï¼šæ›¿ä»£äº†<code>fn main()</code>æˆä¸ºRocketçš„ä¸»å…¥å£</li><li><code>mount</code>ï¼šæ–¹æ³•ç»‘å®šè·¯ç”±ï¼Œå‰é¢ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯ç”±å‰ç¼€</li></ul> 
<h4><a id="res_189"></a>res</h4> 
<pre><code class="prism language-bash">E:<span class="token punctuation">\</span>Rust<span class="token punctuation">\</span>rocket_learn<span class="token punctuation">\</span>hello_rocket<span class="token operator">&gt;</span>cargo run
   Compiling hello_rocket v0.1.0 <span class="token punctuation">(</span>E:<span class="token punctuation">\</span>Rust<span class="token punctuation">\</span>rocket_learn<span class="token punctuation">\</span>hello_rocket<span class="token punctuation">)</span>
    Finished dev <span class="token punctuation">[</span>unoptimized + debuginfo<span class="token punctuation">]</span> target<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">2</span>.04s
     Running <span class="token variable"><span class="token variable">`</span>target<span class="token punctuation">\</span>debug<span class="token punctuation">\</span>hello_rocket.exe<span class="token variable">`</span></span>
Configured <span class="token keyword">for</span> debug.
   <span class="token operator">&gt;&gt;</span> address: <span class="token number">127.0</span>.0.1
   <span class="token operator">&gt;&gt;</span> port: <span class="token number">8080</span>
   <span class="token operator">&gt;&gt;</span> workers: <span class="token number">8</span>
   <span class="token operator">&gt;&gt;</span> max blocking threads: <span class="token number">512</span>
   <span class="token operator">&gt;&gt;</span> ident: Rocket
   <span class="token operator">&gt;&gt;</span> IP header: X-Real-IP
   <span class="token operator">&gt;&gt;</span> limits: bytes <span class="token operator">=</span> 8KiB, data-form <span class="token operator">=</span> 2MiB, <span class="token function">file</span> <span class="token operator">=</span> 1MiB, form <span class="token operator">=</span> 32KiB, json <span class="token operator">=</span> 1MiB, msgpack
 <span class="token operator">=</span> 1MiB, string <span class="token operator">=</span> 8KiB
   <span class="token operator">&gt;&gt;</span> temp dir: C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>SYF200~1<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>
   <span class="token operator">&gt;&gt;</span> http/2: <span class="token boolean">true</span>
   <span class="token operator">&gt;&gt;</span> keep-alive: 5s
   <span class="token operator">&gt;&gt;</span> tls: disabled
   <span class="token operator">&gt;&gt;</span> shutdown: ctrlc <span class="token operator">=</span> true, force <span class="token operator">=</span> true, grace <span class="token operator">=</span> 2s, mercy <span class="token operator">=</span> 3s
   <span class="token operator">&gt;&gt;</span> log level: normal
   <span class="token operator">&gt;&gt;</span> cli colors: <span class="token boolean">true</span>
Routes:
   <span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> GET /apiV1_4/index
Fairings:
   <span class="token operator">&gt;&gt;</span> Shield <span class="token punctuation">(</span>liftoff, response, singleton<span class="token punctuation">)</span>
Shield:
   <span class="token operator">&gt;&gt;</span> X-Frame-Options: SAMEORIGIN
   <span class="token operator">&gt;&gt;</span> X-Content-Type-Options: nosniff
   <span class="token operator">&gt;&gt;</span> Permissions-Policy: interest-cohort<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Rocket has launched from http://127.0.0.1:8080
GET /prefix/index text/html:
   <span class="token operator">&gt;&gt;</span> No matching routes <span class="token keyword">for</span> GET /prefix/index text/html.
   <span class="token operator">&gt;&gt;</span> No <span class="token number">404</span> catcher registered. Using Rocket default.
   <span class="token operator">&gt;&gt;</span> Response succeeded.
GET /apiV1_4/index text/html:
   <span class="token operator">&gt;&gt;</span> Matched: <span class="token punctuation">(</span>index<span class="token punctuation">)</span> GET /apiV1_4/index
   <span class="token operator">&gt;&gt;</span> Outcome: Success
   <span class="token operator">&gt;&gt;</span> Response succeeded.

</code></pre> 
<p><img src="https://images2.imgbox.com/97/00/F92ztNR5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="Rocket_235"></a>Rocket-ç”Ÿå‘½å‘¨æœŸ</h2> 
<p><img src="https://images2.imgbox.com/a8/6c/3toyag3S_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="Rocket_239"></a>Rocket-è¯·æ±‚</h2> 
<h3><a id="_241"></a>æ–¹æ³•</h3> 
<p>ä»¥ä¸‹æ–¹æ³•å‡æ”¯æŒï¼š</p> 
<pre><code>`get`ã€`put`ã€`post`ã€`delete`ã€`head`ã€`patch`ï¼Œæˆ–`options`
</code></pre> 
<p>å†™æ³•ï¼š</p> 
<pre><code>#[æ–¹æ³•ç±»å‹(è·¯å¾„)]
#[route(æ–¹æ³•ç±»å‹, uri=åœ°å€è·¯å¾„)]
</code></pre> 
<p>ä¾‹å­ï¼š</p> 
<pre><code>#[get("/")]
#[route(GET , uri = "/")]
</code></pre> 
<h3><a id="_263"></a>åŠ¨æ€è·¯å¾„</h3> 
<p>Restfulé£æ ¼APIï¼Œä½¿ç”¨<code>&lt;&gt;</code>è¿›è¡Œè®¾ç½®</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[get(<span class="token string">"/hello/&lt;name&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"Hello, {}!"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token attribute attr-name">#[get(<span class="token string">"/hello/&lt;name&gt;/&lt;age&gt;/&lt;cool&gt;"</span>)]</span>
</code></pre> 
<h3><a id="_276"></a>è·¯å¾„ä¿æŠ¤</h3> 
<p>é˜²æ­¢è·¯å¾„éå†æ”»å‡»ï¼Œå¿…é¡»å†™åœ¨æ‰€æœ‰è·¯å¾„çš„æœ€åé¢</p> 
<pre><code>&lt;path..&gt;
</code></pre> 
<p>ä¾‹å­ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>path<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Path</span><span class="token punctuation">,</span> <span class="token class-name">PathBuf</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token class-name">NamedFile</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/&lt;file..&gt;"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">files</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token class-name">PathBuf</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">NamedFile</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">NamedFile</span><span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token class-name">Path</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"static/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_296"></a>å¿½ç•¥è·¯å¾„</h3> 
<p>ä½¿ç”¨å ä½ç¬¦<code>_</code>å¯¹è·¯å¾„è¿›è¡Œå¿½ç•¥ï¼Œå¤šè·¯å¾„åˆ™ä½¿ç”¨<code>&lt;_..&gt;</code>è¡¨ç¤ºå¯¹è·¯å¾„è¿›è¡Œçš„å¿½ç•¥æ“ä½œ</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[get(<span class="token string">"/foo/&lt;_&gt;/bar"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">foo_bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Foo _____ bar!"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/&lt;_..&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">everything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Hey, you're here."</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_312"></a>è½¬å‘</h3> 
<p>è·¯å¾„ç›¸åŒï¼Œä½†æ˜¯åŠ¨æ€è·¯å¾„ç±»å‹ä¸åŒï¼Œæ­¤æ—¶ä¼šæ ¹æ®ç±»å‹è¿›è¡Œæ–¹æ³•çš„åŒ¹é…ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨rankæå‡ä¼˜å…ˆçº§<code>#[get("/user/&lt;id&gt;",rank=3)]</code></p> 
<p>rankè¶Šå°ä¼˜å…ˆçº§è¶Šå¤§</p> 
<pre><code class="prism language-rust"><span class="token comment">// #[macro_use] extern crate rocket;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>get<span class="token punctuation">,</span> launch<span class="token punctuation">,</span>routes<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//rankè¶Šå°ä¼˜å…ˆçº§è¶Šå¤§-&gt;@Order("1")</span>
<span class="token attribute attr-name">#[get(<span class="token string">"/user/&lt;id&gt;"</span>,rank=3)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"get_user"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/user/&lt;id&gt;"</span>, rank = 2)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">get_user1</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"get_user1"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/user/&lt;id&gt;"</span>, rank = 1)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">get_user2</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"get_user2"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token macro property">routes!</span><span class="token punctuation">[</span>get_user<span class="token punctuation">,</span> get_user1<span class="token punctuation">,</span> get_user2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_344"></a>é€šè¿‡å‚æ•°ç±»å‹æ•è·</h4> 
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨Resultæˆ–Optionç±»å‹åœ¨ä¼ å…¥å‚æ•°ä¸Šè¿›è¡Œæ•è·ï¼Œå¢åŠ å…¶é€»è¾‘</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[get(<span class="token string">"/user/&lt;id&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">get_user</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'a</span> <span class="token keyword">str</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'a</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">match</span> id<span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Ok</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token string">"res"</span><span class="token punctuation">,</span>
        <span class="token class-name">Err</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">=&gt;</span>e
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="rank_358"></a>ranké»˜è®¤ç­‰çº§</h4> 
<p>è·¯å¾„å’ŒæŸ¥è¯¢æœ‰ä¸‰ç§â€œé¢œè‰²â€ï¼š</p> 
<ol><li><code>static</code>ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯é™æ€çš„</li><li><code>partial</code>ï¼Œæ„å‘³ç€è‡³å°‘ä¸€ä¸ªç»„ä»¶æ˜¯åŠ¨æ€çš„</li><li><code>wild</code>ï¼Œæ„å‘³ç€æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯åŠ¨æ€çš„</li></ol> 
<p>é™æ€è·¯å¾„æ¯”é™æ€æŸ¥è¯¢å…·æœ‰æ›´å¤§çš„æƒé‡ã€‚å¯¹äºåè·¯å¾„å’Œé‡è·¯å¾„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™å°†äº§ç”Ÿä»¥ä¸‹é»˜è®¤æ’åè¡¨ï¼š</p> 
<p><img src="https://images2.imgbox.com/51/a2/Q4QHIj0o_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_371"></a>è¯·æ±‚å®ˆå«</h3> 
<p>æ ¸å¿ƒï¼š<code>FromRequest</code> trait</p> 
<p>æˆ‘ä»¬çš„å®ˆå«éœ€è¦å®ç°<code>FromRequest</code> traitï¼Œå®ˆå«ä¸è®¾ç½®åœ¨è·¯å¾„ä¸­ï¼Œè€Œæ˜¯ç›´æ¥æ”¾ç½®åˆ°å‚æ•°é‡Œ</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>request<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">Request</span><span class="token punctuation">,</span> <span class="token class-name">FromRequest</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[rocket::async_trait]</span>
<span class="token keyword">impl</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'r</span><span class="token operator">&gt;</span> <span class="token class-name">FromRequest</span> <span class="token keyword">for</span> <span class="token class-name">Security</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">type</span> <span class="token type-definition class-name">Error</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">from_request</span><span class="token punctuation">(</span>request<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'r</span> <span class="token class-name">Request</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Outcome</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">,</span> <span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Error</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token macro property">todo!</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token class-name">Security</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_395"></a>è½¬å‘å®ˆå«</h4> 
<p>è¯·æ±‚é˜²æŠ¤å’Œè½¬å‘æ˜¯å¼ºåˆ¶æ‰§è¡Œç­–ç•¥çš„å¼ºå¤§ç»„åˆã€‚ä¸ºäº†è¯´æ˜ï¼Œæˆ‘ä»¬è€ƒè™‘å¦‚ä½•ä½¿ç”¨è¿™äº›æœºåˆ¶æ¥å®ç°ä¸€ä¸ªç®€å•çš„æˆæƒç³»ç»Ÿã€‚</p> 
<p>æˆ‘ä»¬ä»ä¸¤ä¸ªè¯·æ±‚å®ˆå«å¼€å§‹ï¼š</p> 
<ul><li> <p><code>User</code>ï¼šç»è¿‡èº«ä»½éªŒè¯çš„å¸¸è§„ç”¨æˆ·ã€‚</p> <p>è¯¥<code>FromRequest</code> å®ç°<code>User</code> æ£€æŸ¥cookieæ˜¯å¦æ ‡è¯†ç”¨æˆ·å¹¶è¿”å›<code>User</code> å€¼å¦‚æœæ˜¯å¦‚æœæ²¡æœ‰ç”¨æˆ·å¯ä»¥é€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™é˜²æŠ¤è½¬å‘ã€‚</p> </li><li> <p><code>AdminUser</code>ï¼šå·²éªŒè¯ä¸ºç®¡ç†å‘˜çš„ç”¨æˆ·ã€‚</p> <p>è¯¥<code>FromRequest</code> å®ç°<code>AdminUser</code> æ£€æŸ¥cookieæ˜¯å¦æ ‡è¯†<em>è¡Œæ”¿çš„</em> ç”¨æˆ·å¹¶è¿”å›<code>AdminUser</code> å€¼å¦‚æœæ˜¯å¦‚æœæ²¡æœ‰ç”¨æˆ·å¯ä»¥é€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™é˜²æŠ¤è½¬å‘ã€‚</p> </li></ul> 
<p>æˆ‘ä»¬ç°åœ¨å°†è¿™ä¸¤ä¸ªå®ˆå«ä¸è½¬å‘ç»“åˆä½¿ç”¨ï¼Œå®ç°ä»¥ä¸‹ä¸‰æ¡è·¯ç”±ï¼Œæ¯æ¡è·¯ç”±éƒ½é€šå‘ä½äº<code>/admin</code>ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span></span><span class="token class-name">Redirect</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/login"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Template</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* .. */</span> <span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/admin"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">admin_panel</span><span class="token punctuation">(</span>admin<span class="token punctuation">:</span> <span class="token class-name">AdminUser</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Hello, administrator. This is the admin panel!"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/admin"</span>, rank = 2)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">admin_panel_user</span><span class="token punctuation">(</span>user<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Sorry, you must be an administrator to access this page."</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/admin"</span>, rank = 3)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">admin_panel_redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Redirect</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Redirect</span><span class="token punctuation">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token macro property">uri!</span><span class="token punctuation">(</span>login<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Cookie_433"></a>Cookie</h3> 
<h4><a id="Cookie_435"></a>éšç§Cookie</h4> 
<p>ä¸€èˆ¬æ¥è¯´æ˜¯ç”¨äºå­˜å‚¨ä¸€äº›éšç§ä¿¡æ¯ï¼Œä¾‹å¦‚Userçš„ä¿¡æ¯ï¼Œé˜²æ­¢æˆªè·</p> 
<p>å¿…é¡»åœ¨tomlä¸­å¼€å¯<code>features=["secrets"]</code></p> 
<pre><code>[dependencies]
rocket = { version = "=0.5.0-rc.3", features = ["secrets"] }
</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>get<span class="token punctuation">,</span> launch<span class="token punctuation">,</span> routes<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>request<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">Request</span><span class="token punctuation">,</span> <span class="token class-name">FromRequest</span><span class="token punctuation">,</span> <span class="token class-name">Outcome</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Cookie</span><span class="token punctuation">,</span> <span class="token class-name">CookieJar</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Flash</span><span class="token punctuation">,</span> <span class="token class-name">Redirect</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/user_id"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">user_id</span><span class="token punctuation">(</span>cookie<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">CookieJar</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    cookie<span class="token punctuation">.</span><span class="token function">get_private</span><span class="token punctuation">(</span><span class="token string">"user_id"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>res<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"user id:{}"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>


<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span>user_id<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Cookie</span><span class="token punctuation">,</span> <span class="token class-name">CookieJar</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Flash</span><span class="token punctuation">,</span> <span class="token class-name">Redirect</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/// Retrieve the user's ID, if any.</span>
<span class="token attribute attr-name">#[get(<span class="token string">"/user_id"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">user_id</span><span class="token punctuation">(</span>cookies<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">CookieJar</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    cookies<span class="token punctuation">.</span><span class="token function">get_private</span><span class="token punctuation">(</span><span class="token string">"user_id"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>crumb<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"User ID: {}"</span><span class="token punctuation">,</span> crumb<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/// Remove the `user_id` cookie.</span>
<span class="token attribute attr-name">#[post(<span class="token string">"/logout"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">logout</span><span class="token punctuation">(</span>cookies<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">CookieJar</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Flash</span><span class="token operator">&lt;</span><span class="token class-name">Redirect</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    cookies<span class="token punctuation">.</span><span class="token function">remove_private</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span><span class="token punctuation">::</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string">"user_id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Flash</span><span class="token punctuation">::</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Redirect</span><span class="token punctuation">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Successfully logged out."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_491"></a>å¯†é’¥</h4> 
<p>åœ¨Rocket.tomlä¸­é…ç½®<code>secret_key</code>è®¾ç½®éœ€è¦çš„å¯†é’¥ï¼Œè¯¥å‚æ•°çš„å€¼å¯ä»¥æ˜¯256ä½base64æˆ–åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯32å­—èŠ‚ç‰‡ã€‚</p> 
<p>é€šå¸¸é€šè¿‡ä»¥ä¸‹å·¥å…·å®Œæˆ<code>openssl</code>.ä½¿ç”¨<code>openssl</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ256ä½base64å¯†é’¥<code>openssl rand -base64 32</code>.</p> 
<p>https://api.rocket.rs/v0.5-rc/rocket/config/struct.SecretKey.html</p> 
<h3><a id="Format_499"></a>æ ¼å¼Format</h3> 
<p>æˆ‘ä»¬å¸¸ä½¿ç”¨çš„Formatï¼š</p> 
<ol><li>form-data</li><li>x-www-form-urlencoded</li><li>json</li><li>xml</li><li>raw</li><li>binary</li></ol> 
<p>https://api.rocket.rs/v0.5-rc/rocket/http/struct.ContentType.html#method.parse_flexible</p> 
<p>ç›´æ¥åœ¨ç±»å±æ€§å®ä¸­æ·»åŠ formatå±æ€§è¿›è¡Œè®¾ç½®å³å¯</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[post(<span class="token string">"/user"</span>, format = <span class="token string">"application/json"</span>, data = <span class="token string">"&lt;user&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">new_user</span><span class="token punctuation">(</span>user<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_519"></a>è¯·æ±‚ä½“æ•°æ®</h3> 
<p>å¯¹äºè¯·æ±‚ä½“æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>data="&lt;param&gt;"</code>è¿›è¡ŒåŒ¹é…</p> 
<pre><code>#[post("/", data = "&lt;input&gt;")]
fn new(input: T) { /* .. */ }
</code></pre> 
<p>æ³¨æ„æ‰€æœ‰èƒ½å¤Ÿè¢«Rocketæ‰€å¤„ç†çš„ä¼ å…¥æ•°æ®ä½“å¿…é¡»è¦å®ç°FromDataï¼Œä½†æ˜¯è¿™ä¸ªtraitåœ¨äººå·¥å®ç°ä¸‹è´¹æ—¶è´¹åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„å¤„ç†æ–¹å¼</p> 
<h4><a id="Json_530"></a>Json</h4> 
<p>ä½¿ç”¨Jsonå¯¹äº<code>application/json</code>çš„formatè¿›è¡Œå¤„ç†ï¼Œå¸¸è§äºPOSTå’ŒPUTæ–¹æ³•ä¸­</p> 
<h5><a id="json_534"></a>å¼€å¯jsonç‰¹æ€§</h5> 
<pre><code>rocket = { version = "=0.5.0-rc.3", features = ["secrets","json"] }
</code></pre> 
<h5><a id="use_540"></a>å¼•å…¥use</h5> 
<pre><code>use rocket::serde::{Serialize, Deserialize, json::Json};
</code></pre> 
<h5><a id="struct_546"></a>è®¾ç½®è¯·æ±‚ä½“æ•°æ®ä½“ï¼ˆstructï¼‰</h5> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[derive(Debug, Deserialize)]</span>
<span class="token attribute attr-name">#[serde(crate = <span class="token string">"rocket::serde"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{<!-- --></span>
    username<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_557"></a>ç¼–å†™æ–¹æ³•</h5> 
<p><code>Json&lt;User&gt;</code>å¸®åŠ©æˆ‘ä»¬å®ç°FromData</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[post(<span class="token string">"/login"</span>, format = <span class="token string">"json"</span>, data = <span class="token string">"&lt;user&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span>user<span class="token punctuation">:</span> <span class="token class-name">Json</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:#?}"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/40/23/dLcCmF6s_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="_571"></a>ä¸´æ—¶æ–‡ä»¶</h5> 
<p>è¯¥<a href="https://api.rocket.rs/v0.5-rc/rocket/fs/enum.TempFile.html" rel="nofollow"><code>TempFile</code></a> æ•°æ®ä¿æŠ¤ç›´æ¥å°†æ•°æ®æµä¼ è¾“åˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åè¯¥ä¸´æ—¶æ–‡ä»¶å¯ä»¥è¢«æŒä¹…åŒ–ã€‚å®ƒä½¿æ¥å—æ–‡ä»¶ä¸Šä¼ å˜å¾—å¾®ä¸è¶³é“ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token class-name">TempFile</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[post(<span class="token string">"/upload"</span>, format = <span class="token string">"plain"</span>, data = <span class="token string">"&lt;file&gt;"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">upload</span><span class="token punctuation">(</span><span class="token keyword">mut</span> file<span class="token punctuation">:</span> <span class="token class-name">TempFile</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    file<span class="token punctuation">.</span><span class="token function">persist_to</span><span class="token punctuation">(</span>permanent_location<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span>
<span class="token punctuation">}</span>


</code></pre> 
<h5><a id="_586"></a>æµåª’ä½“</h5> 
<p>æœ‰æ—¶å€™ä½ åªæƒ³ç›´æ¥å¤„ç†ä¼ å…¥çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†ä¼ å…¥æ•°æ®æµå¼ä¼ è¾“åˆ°æŸä¸ªæ¥æ”¶å™¨ã€‚Rocketé€šè¿‡<a href="https://api.rocket.rs/v0.5-rc/rocket/data/struct.Data.html" rel="nofollow"><code>Data</code></a> ç±»å‹ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span>tokio<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>data<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Data</span><span class="token punctuation">,</span> <span class="token class-name">ToByteUnit</span><span class="token punctuation">,</span> <span class="token class-name">FromData</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token attribute attr-name">#[post(<span class="token string">"/debug"</span>, data = <span class="token string">"&lt;data&gt;"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">debug</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> <span class="token class-name">Data</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Stream at most 512KiB all of the body data to stdout.</span>
    data<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">.</span><span class="token function">kibibytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stream_to</span><span class="token punctuation">(</span><span class="token namespace">tokio<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token function">stdout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>ä¸Šé¢çš„è·¯ç”±æ¥å—ä»»ä½•<code>POST</code> è¯·æ±‚<code>/debug</code> æœ€å¤š512 KiBçš„ä¼ å…¥æ•°æ®æµè¾“å‡ºåˆ°<code>stdout</code>å¦‚æœä¸Šä¼ å¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯å“åº”ã€‚ä¸Šé¢çš„å¤„ç†ç¨‹åºå·²å®Œæˆã€‚çœŸçš„å°±è¿™ä¹ˆç®€å•ï¼</p> 
<blockquote> 
 <p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> Rocketè¦æ±‚åœ¨é˜…è¯»ä¼ å…¥æ•°æ®æ—¶è®¾ç½®é™åˆ¶ã€‚</p> 
</blockquote> 
<blockquote> 
 <p>ä¸ºäº†å¸®åŠ©é˜²æ­¢DoSæ”»å‡»ï¼Œè¯·è®¾ç½®ä¸º128KBçš„æ•´æ•°å€</p> 
</blockquote> 
<h3><a id="QueryString_611"></a>QueryString</h3> 
<p>å‡ºç°åœ¨è¯·æ±‚URLä¸­çš„URLç¼–ç å½¢å¼ã€‚æŸ¥è¯¢å‚æ•°çš„å£°æ˜æ–¹å¼ç±»ä¼¼äºè·¯å¾„å‚æ•°ï¼Œä½†å¤„ç†æ–¹å¼ç±»ä¼¼äºå¸¸è§„çš„URLç¼–ç è¡¨å•å­—æ®µ</p> 
<h4><a id="_615"></a>é™æ€å‚æ•°</h4> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[get(<span class="token string">"/?hello&amp;cat=â™¥"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">cats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Hello, kittens!"</span>
<span class="token punctuation">}</span>

<span class="token comment">// The following GET requests match `cats`. `%E2%99%A5` is encoded `â™¥`.</span>
<span class="token string">"/?cat=%E2%99%A5&amp;hello"</span>
<span class="token string">"/?hello&amp;cat=%E2%99%A5"</span>
<span class="token string">"/?dogs=amazing&amp;hello&amp;there&amp;cat=%E2%99%A5"</span>
</code></pre> 
<h4><a id="_629"></a>åŠ¨æ€å‚æ•°</h4> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[derive(Debug, PartialEq, FromFormField)]</span>
<span class="token keyword">enum</span> <span class="token type-definition class-name">Color</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Red</span><span class="token punctuation">,</span>
    <span class="token class-name">Blue</span><span class="token punctuation">,</span>
    <span class="token class-name">Green</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[derive(Debug, PartialEq, FromForm)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Pet</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'r</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'r</span> <span class="token keyword">str</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token keyword">usize</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[derive(Debug, PartialEq, FromForm)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Person</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'r</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  pet<span class="token punctuation">:</span> <span class="token class-name">Pet</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'r</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/?&lt;name&gt;&amp;&lt;color&gt;&amp;&lt;person&gt;&amp;&lt;other&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Color</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> person<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token keyword">usize</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">"George"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">::</span><span class="token class-name">Red</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">::</span><span class="token class-name">Green</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">::</span><span class="token class-name">Green</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">::</span><span class="token class-name">Blue</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> <span class="token class-name">None</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
      pet<span class="token punctuation">:</span> <span class="token class-name">Pet</span> <span class="token punctuation">{<!-- --></span> name<span class="token punctuation">:</span> <span class="token string">"Fi Fo Alex"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// A request with these query segments matches as above.</span>
name<span class="token operator">=</span><span class="token class-name">George</span><span class="token operator">&amp;</span>\
color<span class="token operator">=</span>red<span class="token operator">&amp;</span>\
color<span class="token operator">=</span>green<span class="token operator">&amp;</span>\
person<span class="token punctuation">.</span>pet<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token class-name">Fi</span><span class="token operator">+</span><span class="token class-name">Fo</span><span class="token operator">+</span><span class="token class-name">Alex</span><span class="token operator">&amp;</span>\
color<span class="token operator">=</span>green<span class="token operator">&amp;</span>\
person<span class="token punctuation">.</span>pet<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>\
color<span class="token operator">=</span>blue<span class="token operator">&amp;</span>\
extra<span class="token operator">=</span>yes\
</code></pre> 
<h4><a id="_671"></a>å°¾éšå‚æ•°</h4> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>form<span class="token punctuation">::</span></span><span class="token class-name">Form</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(FromForm)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">User</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'r</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'r</span> <span class="token keyword">str</span><span class="token punctuation">,</span>
    active<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/?hello&amp;&lt;id&gt;&amp;&lt;user..&gt;"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">usize</span><span class="token punctuation">,</span> user<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'_</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token number">1337</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">"Bob Smith"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>active<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// A request with these query segments matches as above.</span>
hello<span class="token operator">&amp;</span>\
name<span class="token operator">=</span><span class="token class-name">Bob</span><span class="token operator">+</span><span class="token class-name">Smith</span><span class="token operator">&amp;</span>\
id<span class="token operator">=</span><span class="token number">1337</span><span class="token operator">&amp;</span>\
active<span class="token operator">=</span>yes\
</code></pre> 
<h3><a id="_696"></a>é”™è¯¯å¤„ç†å™¨</h3> 
<p>åº”ç”¨ç¨‹åºå¤„ç†æ˜¯ä¸å¯é çš„ã€‚é”™è¯¯æ¥è‡ªä»¥ä¸‹æ¥æºï¼š</p> 
<ul><li>å¤±è´¥çš„å®ˆå«ã€‚</li><li>ä¸€ä¸ªå¤±è´¥çš„å“åº”è€…ã€‚</li><li>è·¯ç”±å¤±è´¥ã€‚</li></ul> 
<p>å¦‚æœå‘ç”Ÿä»»ä½•è¿™äº›æƒ…å†µï¼ŒRocketä¼šå‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ä¸ºäº†ç”Ÿæˆé”™è¯¯ï¼ŒRocketè°ƒç”¨<em>æ•é›†å™¨</em> å¯¹åº”äºé”™è¯¯çš„çŠ¶æ€ä»£ç å’ŒèŒƒå›´ã€‚Catchersç±»ä¼¼äºroutesï¼Œé™¤äº†ï¼š</p> 
<ol><li>æ•è·å™¨ä»…åœ¨å‡ºç°é”™è¯¯æ—¶è°ƒç”¨ã€‚</li><li>æ•è·å™¨æ˜¯ç”¨<code>catch</code> å±æ€§</li><li>æ•æ‰‹æ˜¯<em>æ³¨å†Œçš„</em> ä¸<a href="https://api.rocket.rs/v0.5-rc/rocket/struct.Rocket.html#method.register" rel="nofollow"><code>register()</code></a> è€Œä¸æ˜¯<a href="https://api.rocket.rs/v0.5-rc/rocket/struct.Rocket.html#method.mount" rel="nofollow"><code>mount()</code></a>.</li><li>åœ¨è°ƒç”¨æ•è·å™¨ä¹‹å‰ï¼Œæ¸…é™¤å¯¹cookieçš„ä»»ä½•ä¿®æ”¹ã€‚</li><li>é”™è¯¯æ•è·å™¨ä¸èƒ½è°ƒç”¨é˜²æŠ¤ã€‚</li><li>é”™è¯¯æ•è·å™¨ä¸åº”è¯¥æ— æ³•äº§ç”Ÿå“åº”ã€‚</li><li>æ•è·å™¨çš„ä½œç”¨åŸŸä¸ºè·¯å¾„å‰ç¼€ã€‚</li></ol> 
<p>è‹¥è¦å£°æ˜ç»™å®šçŠ¶æ€ä»£ç çš„æ•æ‰å™¨ï¼Œè¯·ä½¿ç”¨<a href="https://api.rocket.rs/v0.5-rc/rocket/attr.catch.html" rel="nofollow"><code>catch</code></a> å±æ€§ï¼Œè¯¥å±æ€§æ¥å—ä¸è¦æ•è·çš„HTTPçŠ¶æ€ä»£ç å¯¹åº”çš„å•ä¸ªæ•´æ•°ã€‚ä¾‹å¦‚ï¼Œä¸º<code>404 Not Found</code> é”™è¯¯</p> 
<p>ä¾‹å­ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>get<span class="token punctuation">,</span> post<span class="token punctuation">,</span> launch<span class="token punctuation">,</span> routes<span class="token punctuation">,</span> catch<span class="token punctuation">,</span> catchers<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>request<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token class-name">Request</span><span class="token punctuation">,</span> <span class="token class-name">FromRequest</span><span class="token punctuation">,</span> <span class="token class-name">Outcome</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Cookie</span><span class="token punctuation">,</span> <span class="token class-name">CookieJar</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Flash</span><span class="token punctuation">,</span> <span class="token class-name">Redirect</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>serde<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Serialize</span><span class="token punctuation">,</span> <span class="token class-name">Deserialize</span><span class="token punctuation">,</span> <span class="token namespace">json<span class="token punctuation">::</span></span><span class="token class-name">Json</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token class-name">TempFile</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span>tokio<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>data<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Data</span><span class="token punctuation">,</span> <span class="token class-name">ToByteUnit</span><span class="token punctuation">,</span> <span class="token class-name">FromData</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/login"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"login"</span>
<span class="token punctuation">}</span>
<span class="token comment">//404çš„é”™è¯¯å¤„ç†å™¨</span>
<span class="token attribute attr-name">#[catch(404)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">not_found</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Error: Not Found"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ„å»ºé»˜è®¤é”™è¯¯å¤„ç†</span>
<span class="token attribute attr-name">#[catch(default)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">default_catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Error:Default catch"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span>login<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">,</span> <span class="token macro property">catchers!</span><span class="token punctuation">[</span>not_found<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//æ³¨å†Œé”™è¯¯å¤„ç†å™¨</span>
        <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">catchers!</span><span class="token punctuation">[</span>default_catch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//æ³¨å†Œå¤„ç†å™¨</span>
<span class="token punctuation">}</span>


</code></pre> 
<h2><a id="Rocket_754"></a>Rocket-å“åº”</h2> 
<p>æ–¹æ³•çš„ä»»ä½•ç±»å‹çš„å€¼<a href="https://api.rocket.rs/v0.5-rc/rocket/response/trait.Responder.html" rel="nofollow"><code>Responder</code></a> traitå¯ä»¥è¢«è¿”å›ï¼ŒåŒ…æ‹¬ä½ è‡ªå·±çš„</p> 
<h3><a id="Responder_758"></a>Responder</h3> 
<p>ä½œä¸ºRocketçš„å“åº”è¿”å›ï¼ŒåŒ…è£…æˆ‘ä»¬çš„æ¶ˆæ¯ä½“æ•°æ®ï¼Œä¸€ä¸ª<code>Response</code> åŒ…æ‹¬HTTPçŠ¶æ€ã€æŠ¥å¤´å’Œæ­£æ–‡ã€‚å°¸ä½“å¯èƒ½æ˜¯<em>å›ºå®šå°ºå¯¸çš„</em> æˆ–<em>æµ</em>.ç»™å®šçš„<code>Responder</code> å®ç°å†³å®šä½¿ç”¨å“ªä¸ª</p> 
<h3><a id="_762"></a>åŒ…è£…</h3> 
<p>ä»¥ä¸‹æ˜¯å®˜æ–¹æä¾›çš„å·²ç»ä¸ºæˆ‘ä»¬åŒ…è£…å¥½ï¼Œå¯ä»¥è‡ªå·±ç›´æ¥è°ƒç”¨çš„ï¼š</p> 
<ul><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Accepted.html" rel="nofollow">Accepted</a></p> <p>Sets the status of the response to 202 (Accepted).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.BadRequest.html" rel="nofollow">BadRequest</a></p> <p>Sets the status of the response to 400 (Bad Request).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Conflict.html" rel="nofollow">Conflict</a></p> <p>Sets the status of the response to 409 (Conflict).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Created.html" rel="nofollow">Created</a></p> <p>Sets the status of the response to 201 (Created).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Custom.html" rel="nofollow">Custom</a></p> <p>Creates a response with the given status code and underlying responder.</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Forbidden.html" rel="nofollow">Forbidden</a></p> <p>Sets the status of the response to 403 (Forbidden).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.NoContent.html" rel="nofollow">NoContent</a></p> <p>Sets the status of the response to 204 (No Content).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.NotFound.html" rel="nofollow">NotFound</a></p> <p>Sets the status of the response to 404 (Not Found).</p> </li><li> <p><a href="https://api.rocket.rs/v0.5-rc/rocket/response/status/struct.Unauthorized.html" rel="nofollow">Unauthorized</a></p> <p>Sets the status of the response to 401 (Unauthorized).</p> </li></ul> 
<h4><a id="_802"></a>ä¾‹å­</h4> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token class-name">Status</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>content<span class="token punctuation">,</span> status<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/test"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Accepted</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Accepted</span><span class="token punctuation">(</span><span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">"test-hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/custom"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">test_custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Custom</span><span class="token operator">&lt;</span><span class="token class-name">RawJson</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Custom</span><span class="token punctuation">(</span><span class="token class-name">Status</span><span class="token punctuation">::</span><span class="token class-name">Accepted</span><span class="token punctuation">,</span> <span class="token class-name">RawJson</span><span class="token punctuation">(</span><span class="token string">"{\"hi\":\"ä½ å¥½\"}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="_820"></a>è‡ªå®šä¹‰åº”ç­”å™¨</h3> 
<p>è¯¥<a href="https://api.rocket.rs/v0.5-rc/rocket/response/trait.Responder.html" rel="nofollow"><code>Responder</code></a> traitæ–‡æ¡£è¯¦ç»†è¯´æ˜äº†å¦‚ä½•é€šè¿‡æ˜¾å¼å®ç°traitæ¥å®ç°æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰å“åº”å™¨ã€‚ç„¶è€Œï¼Œå¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼ŒRocketä½¿å¾—è‡ªåŠ¨æ´¾ç”Ÿçš„å®ç°æˆä¸ºå¯èƒ½<code>Responder</code>ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœæ‚¨çš„è‡ªå®šä¹‰å“åº”ç¨‹åºåŒ…è£…äº†ç°æœ‰çš„å“åº”ç¨‹åºã€æ ‡å¤´æˆ–è®¾ç½®äº†è‡ªå®šä¹‰çŠ¶æ€æˆ–å†…å®¹ç±»å‹ï¼Œ<code>Responder</code> å¯ä»¥è‡ªåŠ¨å¯¼å‡ºï¼š</p> 
<h4><a id="_824"></a>ç®€å•ç¤ºä¾‹</h4> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Responder</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Responder)]</span>
<span class="token attribute attr-name">#[response(status = 200, content_type = <span class="token string">"json"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Response_default</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/json"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Response_default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Response_default</span><span class="token punctuation">(</span><span class="token string">"{ \"hi\": \"world\" }"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_839"></a>å®Œæ•´ç¤ºä¾‹</h4> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Responder</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Debug, Deserialize, Serialize)]</span>
<span class="token attribute attr-name">#[serde(crate = <span class="token string">"rocket::serde"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{<!-- --></span>
    username<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[derive(Responder)]</span>
<span class="token attribute attr-name">#[response(status = 200, content_type = <span class="token string">"json"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">MyResponse2</span> <span class="token punctuation">{<!-- --></span>
    inner<span class="token punctuation">:</span> <span class="token class-name">Json</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    headers<span class="token punctuation">:</span> <span class="token class-name">ContentType</span><span class="token punctuation">,</span>
    more<span class="token punctuation">:</span> <span class="token class-name">Header</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'static</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token attribute attr-name">#[response(ignore)]</span>
    unrelated<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/login"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">MyResponse2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">MyResponse2</span> <span class="token punctuation">{<!-- --></span>
        inner<span class="token punctuation">:</span> <span class="token class-name">Json</span><span class="token punctuation">(</span><span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
            username<span class="token punctuation">:</span> <span class="token string">"zhangsan"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            password<span class="token punctuation">:</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        headers<span class="token punctuation">:</span> <span class="token class-name">ContentType</span><span class="token punctuation">::</span><span class="token constant">JSON</span><span class="token punctuation">,</span>
        more<span class="token punctuation">:</span> <span class="token class-name">Header</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        unrelated<span class="token punctuation">:</span> <span class="token string">"test-ignore"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>äºä¸Šé¢çš„ç¤ºä¾‹ï¼ŒRocketç”Ÿæˆä¸€ä¸ª<code>Responder</code> å®æ–½æ–¹å¼ï¼š</p> 
<ul><li>å°†å“åº”çš„çŠ¶æ€è®¾ç½®ä¸º<code>200</code>.</li><li>å°†Content-Typeè®¾ç½®ä¸º<code>application/json</code>.</li><li>æ·»åŠ æ ‡é¢˜<code>self.header</code> å’Œ/æˆ–<code>self.more</code> åˆ°å›åº”ã€‚</li><li>å®Œæˆå“åº”ï¼Œä½¿ç”¨<code>self.inner</code>.</li></ul> 
<p>è¯·æ³¨æ„ï¼Œ<em>ç¬¬ä¸€</em> å­—æ®µç”¨ä½œå†…éƒ¨å“åº”è€…ï¼Œè€Œæ‰€æœ‰å‰©ä½™å­—æ®µï¼ˆé™¤éä½¿ç”¨<code>#[response(ignore)]</code>ï¼‰ä½œä¸ºå¤´æ·»åŠ åˆ°å“åº”ä¸­ã€‚å¯é€‰çš„<code>#[response]</code> å±æ€§å¯ç”¨äºè‡ªå®šä¹‰å“åº”çš„çŠ¶æ€å’Œå†…å®¹ç±»å‹ã€‚å› ä¸º<code>ContentType</code> å’Œ/æˆ–<code>Status</code> æœ¬èº«æ˜¯å¤´ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ç®€å•åœ°åŒ…å«è¿™äº›ç±»å‹çš„å­—æ®µæ¥åŠ¨æ€è®¾ç½®å†…å®¹ç±»å‹å’ŒçŠ¶æ€ã€‚</p> 
<h3><a id="Responder_884"></a>Responderå®ç°</h3> 
<p>åœ¨Rocketä¸­å·²ç»ä¸ºï¼š<code>String</code>ã€<code>&amp;str</code>ã€<code>File</code>ã€<code>Option</code>ï¼Œä»¥åŠ<code>Result</code>.å®ç°å¥½äº†</p> 
<p>æˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨ä¸­ç›´æ¥è¿›è¡Œä½¿ç”¨</p> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[get(<span class="token string">"/string"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Hello there! I'm a string!"</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Option_897"></a>Option</h4> 
<p>æˆåŠŸä½¿ç”¨Someåˆ™å“åº”ä¸º200ï¼Œè‹¥å‡ºç°é”™è¯¯åˆ™æ˜¯404 Not Found</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token class-name">NamedFile</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/&lt;file..&gt;"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">files</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token class-name">PathBuf</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">NamedFile</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">NamedFile</span><span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token class-name">Path</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"static/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Result_912"></a>Result</h4> 
<p>æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½æœ‰è¿”å›</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token class-name">NamedFile</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>response<span class="token punctuation">::</span>status<span class="token punctuation">::</span></span><span class="token class-name">NotFound</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/&lt;file..&gt;"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">files</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token class-name">PathBuf</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">NamedFile</span><span class="token punctuation">,</span> <span class="token class-name">NotFound</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"static/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">NamedFile</span><span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>e<span class="token closure-punctuation punctuation">|</span></span> <span class="token class-name">NotFound</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Json_927"></a>å“åº”Json</h3> 
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ˜¯ä½¿ç”¨ä¸ºæˆ‘ä»¬åŒ…è£…å¥½çš„<code>Json</code>è¿›è¡Œè¿”å›</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>serde<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Serialize</span><span class="token punctuation">,</span> <span class="token namespace">json<span class="token punctuation">::</span></span><span class="token class-name">Json</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[derive(Serialize)]</span>
<span class="token attribute attr-name">#[serde(crate = <span class="token string">"rocket::serde"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Task</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* .. */</span> <span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/todo"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">todo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Json</span><span class="token operator">&lt;</span><span class="token class-name">Task</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Json</span><span class="token punctuation">(</span><span class="token class-name">Task</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/* .. */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_944"></a>æ¨¡æ¿</h3> 
<h4><a id="_946"></a>æ·»åŠ ä¾èµ–</h4> 
<pre><code class="prism language-bash">cargo <span class="token function">add</span> rocket_dyn_templates
</code></pre> 
<h4><a id="Cargotoml_952"></a>ä¿®æ”¹Cargo.toml</h4> 
<pre><code class="prism language-toml">[dependencies]
rocket_dyn_templates = { version = "0.1.0-rc.3", features = ["handlebars", "tera"] }
</code></pre> 
<h4><a id="mainrs_959"></a>main.rs</h4> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket_dyn_templates<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Template</span><span class="token punctuation">,</span>context<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/index"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span><span class="token class-name">Template</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Template</span><span class="token punctuation">::</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">"index"</span><span class="token punctuation">,</span><span class="token macro property">context!</span> <span class="token punctuation">{<!-- --></span>
        foo<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Template</span><span class="token punctuation">::</span><span class="token function">fairing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="_980"></a>æ·»åŠ é¡µé¢æ¨¡æ¿</h4> 
<p>åœ¨templatesä¸‹åˆ›å»ºindex.teraï¼Œåå­—å¯¹åº”<code> Template::render('template_name',context!...)</code></p> 
<p><img src="https://images2.imgbox.com/c1/09/HeuapYrM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-tera">&lt;html&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;index tera&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h2><a id="Rocket_996"></a>Rocket-çŠ¶æ€ç®¡ç†</h2> 
<p>åœ¨ Rust çš„ Rocket æ¡†æ¶ä¸­ï¼ŒManaged Stateï¼ˆç®¡ç†çŠ¶æ€ï¼‰æ˜¯ä¸€ç§åœ¨åº”ç”¨ç¨‹åºå…¨å±€èŒƒå›´å†…å…±äº«æ•°æ®çš„æœºåˆ¶ã€‚å®ƒå…è®¸æ‚¨åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œå¹¶ä»å¤šä¸ªå¤„ç†ç¨‹åºä¸­è®¿é—®è¯¥æ•°æ®ï¼Œè€Œä¸å¿…æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½ä¼ é€’å®ƒã€‚</p> 
<p>Managed State åœ¨ä»¥ä¸‹æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼š</p> 
<ol><li><strong>ä¿å­˜å…¨å±€é…ç½®ä¿¡æ¯</strong>ï¼šå¦‚æœæ‚¨éœ€è¦å°†æŸäº›é…ç½®ä¿¡æ¯åœ¨åº”ç”¨ç¨‹åºçš„å¤šä¸ªéƒ¨åˆ†ä¹‹é—´å…±äº«ï¼Œé‚£ä¹ˆ Managed State æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¿å­˜æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æˆ–åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„å…¶ä»–é…ç½®å˜é‡ã€‚</li><li><strong>ç¼“å­˜æ•°æ®</strong>ï¼šManaged State è¿˜å¯ä»¥ç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºä¸­ç»å¸¸ä½¿ç”¨çš„æ•°æ®ï¼Œä»¥é¿å…åå¤æŸ¥è¯¢æ•°æ®åº“æˆ–é‡å¤æ‰§è¡Œæ˜‚è´µçš„æ“ä½œã€‚å°†è¿™äº›æ•°æ®å­˜å‚¨åœ¨ Managed State ä¸­å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚</li><li><strong>è·¨è¯·æ±‚å…±äº«æ•°æ®</strong>ï¼šç”±äº Managed State å­˜åœ¨äºæ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´å…±äº«æ•°æ®ã€‚è¿™ä½¿å¾—åœ¨ä¸åŒè¯·æ±‚ä¹‹é—´å…±äº«æ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</li></ol> 
<pre><code class="prism language-rust"><span class="token attribute attr-name">#[derive(Debug,Serialize,Deserialize)]</span>
<span class="token attribute attr-name">#[serde(crate=<span class="token string">"rocket::serde"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">SqlServer</span> <span class="token punctuation">{<!-- --></span>
    uri<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span>
    username<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    password<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    sqlType<span class="token punctuation">:</span> <span class="token constant">SQL</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token attribute attr-name">#[derive(Debug,Serialize,Deserialize)]</span>
<span class="token attribute attr-name">#[serde(crate=<span class="token string">"rocket::serde"</span>)]</span>
<span class="token keyword">enum</span> <span class="token type-definition class-name">SQL</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">MYSQL</span><span class="token punctuation">,</span>
    <span class="token constant">ORACLE</span><span class="token punctuation">,</span>
    <span class="token constant">REDIS</span><span class="token punctuation">,</span>
    <span class="token constant">MONGO</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">SqlServer</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new_mysql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span><span class="token class-name">SqlServer</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SqlServer</span><span class="token punctuation">{<!-- --></span>
            uri<span class="token punctuation">:</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            port<span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
            username<span class="token punctuation">:</span> <span class="token string">"root"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            password<span class="token punctuation">:</span> <span class="token string">"root"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            sqlType<span class="token punctuation">:</span> <span class="token constant">SQL</span><span class="token punctuation">::</span><span class="token constant">MYSQL</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[get(<span class="token string">"/state"</span>)]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">getState</span><span class="token punctuation">(</span>sql_server_data<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">State</span><span class="token operator">&lt;</span><span class="token class-name">SqlServer</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Json</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token class-name">SqlServer</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> tmp <span class="token operator">=</span> sql_server_data<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Json</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">manage</span><span class="token punctuation">(</span><span class="token class-name">SqlServer</span><span class="token punctuation">::</span><span class="token function">new_mysql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span>getState<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="RocketMysql_1052"></a>Rocket-è¿æ¥æ± è¿æ¥æ•°æ®åº“Mysql</h2> 
<h3><a id="_1054"></a>æ·»åŠ ä¾èµ–</h3> 
<pre><code class="prism language-toml">rocket_db_pools = {version ="0.1.0-rc.3",features = ["sqlx_mysql"]}
</code></pre> 
<h3><a id="Rockettoml_1060"></a>è®¾ç½®æ•°æ®åº“è¿æ¥é…ç½®(Rocket.toml)</h3> 
<pre><code class="prism language-toml">[default.databases.mysql_db]
url="mysql://username:password@localhost:3306/æ•°æ®åº“åç§°?ssl-mode=disabled"

#ä»¥ä¸‹éƒ½æ˜¯å¯ä»¥é…ç½®çš„
min_connections = 64
max_connections = 1024
connect_timeout = 5
idle_timeout = 120
</code></pre> 
<h3><a id="mainrs_1073"></a>main.rs</h3> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>launch<span class="token punctuation">,</span> get<span class="token punctuation">,</span> post<span class="token punctuation">,</span> <span class="token class-name">State</span><span class="token punctuation">,</span> routes<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>serde<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token namespace">json<span class="token punctuation">::</span></span><span class="token class-name">Json</span><span class="token punctuation">,</span> <span class="token class-name">Serialize</span><span class="token punctuation">,</span> <span class="token class-name">Deserialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket_db_pools<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Connection</span><span class="token punctuation">,</span> <span class="token class-name">Database</span><span class="token punctuation">,</span> <span class="token class-name">Pool</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket_db_pools<span class="token punctuation">::</span>sqlx<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">MySqlPool</span><span class="token punctuation">,</span> query<span class="token punctuation">,</span> <span class="token class-name">Row</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket_db_pools<span class="token punctuation">::</span>sqlx<span class="token punctuation">::</span>mysql<span class="token punctuation">::</span></span><span class="token class-name">MySqlRow</span><span class="token punctuation">;</span>


<span class="token attribute attr-name">#[derive(Database)]</span>
<span class="token attribute attr-name">#[database(<span class="token string">"mysql_db"</span>)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">MysqlDB</span><span class="token punctuation">(</span><span class="token class-name">MySqlPool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token attribute attr-name">#[get(<span class="token string">"/mysql"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect_mysql</span><span class="token punctuation">(</span><span class="token keyword">mut</span> connect<span class="token punctuation">:</span> <span class="token class-name">Connection</span><span class="token operator">&lt;</span><span class="token class-name">MysqlDB</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM rolelist"</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> rows<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">MySqlRow</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fetch_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token operator">*</span>connect<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> row <span class="token keyword">in</span> rows<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> id<span class="token punctuation">:</span><span class="token keyword">i32</span> <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> name<span class="token punctuation">:</span><span class="token class-name">String</span> <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"id:{}"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"role_name{}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">"testOK"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span>connect_mysql<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">MysqlDB</span><span class="token punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="Figment_1113"></a>ä½¿ç”¨Figmentæå–è‡ªå®šä¹‰é…ç½®</h2> 
<h3><a id="_1115"></a>æ·»åŠ ä¾èµ–</h3> 
<pre><code>figment = "0.10.8"
</code></pre> 
<h3><a id="apptoml_1121"></a>è®¾ç½®app.toml</h3> 
<pre><code class="prism language-toml">app_name="test-rocket"
</code></pre> 
<h3><a id="mainrs_1127"></a>main.rs</h3> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span>serde<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Serialize</span><span class="token punctuation">,</span> <span class="token class-name">Deserialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">State</span><span class="token punctuation">,</span> <span class="token namespace">fairing<span class="token punctuation">::</span></span><span class="token class-name">AdHoc</span><span class="token punctuation">,</span>launch<span class="token punctuation">,</span>get<span class="token punctuation">,</span>routes<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">figment<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Figment</span><span class="token punctuation">,</span> <span class="token class-name">Profile</span><span class="token punctuation">,</span> <span class="token namespace">providers<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Format</span><span class="token punctuation">,</span> <span class="token class-name">Toml</span><span class="token punctuation">,</span> <span class="token class-name">Serialized</span><span class="token punctuation">,</span> <span class="token class-name">Env</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token attribute attr-name">#[launch]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">rocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> _ <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token class-name">Figment</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">Toml</span><span class="token punctuation">::</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"app.toml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"rocket"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> app_name <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">extract_inner</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"app_name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>app_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token namespace">rocket<span class="token punctuation">::</span></span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token macro property">routes!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1fb7b57e1ece16e47089fe00a24ebf49/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€Dockerã€‘Nacos2.0.3çš„é…ç½®éƒ¨ç½²ä¸åŸºäºSpringBoot3.0.5çš„ä»£ç åŸºç¡€é…ç½®</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f55d1a5022d848af431eb5591bfde10c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">SpringCloudStreamé›†æˆRabbitMQå®ç°æ¶ˆæ¯æ”¶å‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>