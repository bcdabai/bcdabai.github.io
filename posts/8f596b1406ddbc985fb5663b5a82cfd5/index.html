<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用UART应用实例说明MicroPython-ESP32串口通信方式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用UART应用实例说明MicroPython-ESP32串口通信方式" />
<meta property="og:description" content="UART构造器 不同于其他MicroPython开发板，ESP32可以自定义管脚作为UART， 不过ESP32自身只有两个UART资源。
导入UART 模块
from machine import UART UART对象的构造器函数：
UART(id, baudrate, bits, parity, rx, tx, stop, timeout) id : 串口编号 ESP32的UART资源只有两个， id有效取值范围为1,2
bandrate: 波特率(时钟频率) 常用波特率为：
○ 9600 （默认）
○ 115200
信息接受双方的波特率必须一致，否则会乱码。
bits：单个字节的位数(比特数) ○ 8 (默认)
○ 7
○ 9
parity： 校验方式 ○ None 不进行校验（默认）
○ 0 偶校验
○ 1 奇校验
rx：接收口的GPIO编号 在ESP32上面很多个管脚都可以自定义为UART管脚有效GPIO编号如下：
0，2，4，5，9，10， 12-19， 21-23，25， 26， 34-36， 39 tx：发送口的GPIO编号 有效GPIO管脚编号同rx
stop: 停止位个数 ○ 1 （默认）
○ 2
timerout: 超时时间 取值范围： 0 &lt; timeout ≤ 2147483647" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8f596b1406ddbc985fb5663b5a82cfd5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-03T15:37:52+08:00" />
<meta property="article:modified_time" content="2021-08-03T15:37:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用UART应用实例说明MicroPython-ESP32串口通信方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="UART_0"></a>UART构造器</h4> 
<p>不同于其他MicroPython开发板，ESP32可以自定义管脚作为UART， 不过ESP32自身只有两个UART资源。</p> 
<p>导入UART 模块</p> 
<pre><code class="prism language-bash">from machine <span class="token function">import</span> UART
</code></pre> 
<p>UART对象的构造器函数：</p> 
<pre><code class="prism language-c"><span class="token function">UART</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> baudrate<span class="token punctuation">,</span> bits<span class="token punctuation">,</span> parity<span class="token punctuation">,</span> rx<span class="token punctuation">,</span> tx<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
</code></pre> 
<pre><code>id : 串口编号
</code></pre> 
<p>ESP32的UART资源只有两个， id有效取值范围为1,2</p> 
<pre><code>bandrate: 波特率(时钟频率)
</code></pre> 
<p>常用波特率为：<br> ○ 9600 （默认）<br> ○ 115200<br> 信息接受双方的波特率必须一致，否则会乱码。</p> 
<pre><code>bits：单个字节的位数(比特数)
</code></pre> 
<p>○ 8 (默认)<br> ○ 7<br> ○ 9</p> 
<pre><code>parity： 校验方式
</code></pre> 
<p>○ None 不进行校验（默认）<br> ○ 0 偶校验<br> ○ 1 奇校验</p> 
<pre><code>rx：接收口的GPIO编号
</code></pre> 
<p>在ESP32上面很多个管脚都可以自定义为UART管脚有效GPIO编号如下：</p> 
<pre><code class="prism language-bash"><span class="token number">0</span>，2，4，5，9，10， <span class="token number">12</span>-19， <span class="token number">21</span>-23，25， <span class="token number">26</span>， <span class="token number">34</span>-36， <span class="token number">39</span>
</code></pre> 
<pre><code>tx：发送口的GPIO编号
</code></pre> 
<p>有效GPIO管脚编号同rx</p> 
<pre><code>stop: 停止位个数
</code></pre> 
<p>○ 1 （默认）<br> ○ 2</p> 
<pre><code>timerout: 超时时间
</code></pre> 
<p>取值范围： 0 &lt; timeout ≤ 2147483647</p> 
<pre><code class="prism language-c">from machine import UART
uart <span class="token operator">=</span> <span class="token function">UART</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> baudrate<span class="token operator">=</span><span class="token number">115200</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span>tx<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

</code></pre> 
<pre><code class="prism language-c">uart<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>        # read <span class="token number">10</span> characters<span class="token punctuation">,</span> returns a bytes object
                    # 读入<span class="token number">10</span>个字符， 返回一个比特对象
uart<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            # read all available characters
                    # 读取所有的有效字符
uart<span class="token punctuation">.</span><span class="token function">readline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        # read a line
                    # 读入一行
uart<span class="token punctuation">.</span><span class="token function">readinto</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>  # read and store into the given buffer
                    # 读入并且保存在缓存中
uart<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span>    # write the <span class="token number">3</span> characters
                    # 向串口写入<span class="token number">3</span>个字符abc
uart<span class="token punctuation">.</span><span class="token function">readchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     # read <span class="token number">1</span> character and returns it as an integer
                    # 读入一个字符
uart<span class="token punctuation">.</span><span class="token function">writechar</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>  # write <span class="token number">1</span> character
                    # 写入ASCALL码为<span class="token number">42</span>的字符
uart<span class="token punctuation">.</span><span class="token function">writechar</span><span class="token punctuation">(</span><span class="token function">ord</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> # 等同于uart<span class="token punctuation">.</span><span class="token function">writechar</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>

#检测串口是否有数据
uart<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          # returns the number of characters waiting

</code></pre> 
<p>ESP32串口自发自收实验<br> 接线 将开发板的 13号引脚与12号引脚用杜邦线相连接</p> 
<pre><code class="prism language-c"><span class="token string">''</span>'
ESP32串口通信<span class="token operator">-</span>字符串数据自发实验

接线 将开发板的 <span class="token number">13</span>号引脚与<span class="token number">12</span>号引脚用杜邦线相连接。

<span class="token string">''</span>'
from machine import UART<span class="token punctuation">,</span>Pin
import utime

# 初始化一个UART对象
uart <span class="token operator">=</span> <span class="token function">UART</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> baudrate<span class="token operator">=</span><span class="token number">115200</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span>tx<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

count <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">while</span> True<span class="token operator">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'\n\n===============CNT {}==============='</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>

    # 发送一条消息
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Send: {}'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'hello {}\n'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Send Byte :'</span><span class="token punctuation">)</span> # 发送字节数
    uart<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hello {}\n'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>
    # 等待<span class="token number">1</span>s钟
    utime<span class="token punctuation">.</span><span class="token function">sleep_ms</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> uart<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
        # 如果有数据 读入一行数据返回数据为字节类型
        # 例如  b<span class="token string">'hello 1\n'</span>
        bin_data <span class="token operator">=</span> uart<span class="token punctuation">.</span><span class="token function">readline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        # 将手到的信息打印在终端
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Echo Byte: {}'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>bin_data<span class="token punctuation">)</span><span class="token punctuation">)</span>

        # 将字节数据转换为字符串 字节默认为UTF<span class="token operator">-</span><span class="token number">8</span>编码
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Echo String: {}'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>bin_data<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    # 计数器<span class="token operator">+</span><span class="token number">1</span>
    count <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'---------------------------------------'</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出</p> 
<pre><code class="prism language-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>CNT <span class="token assign-left variable">1</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Send: hello <span class="token number">1</span>

Send Byte <span class="token builtin class-name">:</span>
<span class="token number">8</span>
Echo Byte: b<span class="token string">'hello 1<span class="token entity" title="\n">\n</span>'</span>
Echo String: hello <span class="token number">1</span>

---------------------------------------


<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>CNT <span class="token assign-left variable">2</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Send: hello <span class="token number">2</span>

Send Byte <span class="token builtin class-name">:</span>
<span class="token number">8</span>
Echo Byte: b<span class="token string">'hello 2<span class="token entity" title="\n">\n</span>'</span>
Echo String: hello <span class="token number">2</span>

---------------------------------------


<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>CNT <span class="token assign-left variable">3</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Send: hello <span class="token number">3</span>

Send Byte <span class="token builtin class-name">:</span>
<span class="token number">8</span>
Echo Byte: b<span class="token string">'hello 3<span class="token entity" title="\n">\n</span>'</span>
Echo String: hello <span class="token number">3</span>

---------------------------------------

</code></pre> 
<p>转自：https://www.cirmall.com/bbs/thread-102657-1-1.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aa561aa39254d287ee2dcd45bfbadaba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">服务器无限火力时间,LOL十周年宣布无限火力开启时间 无限火力开启及持续时间详情...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23484f42d583a8283ccffbbda0d5859b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">车联网系统车载TBOX高级系统工程师架构，新能源汽车TBOX硬件设计与实现，车联网系统车载TBOX应用，</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>