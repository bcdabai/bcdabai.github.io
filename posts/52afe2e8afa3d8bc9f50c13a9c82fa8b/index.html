<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React Native - 持久化存储（AsyncStorage）的使用详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React Native - 持久化存储（AsyncStorage）的使用详解" />
<meta property="og:description" content="一，基本概念 1，AsyncStorage介绍 AsyncStorage 是一个简单的、异步的、持久化的 Key-Value 存储系统，它对于 App 来说是全局性的。它用来代替 LocalStorage。由于它的操作是全局的，官方建议我们最好针对 AsyncStorage 进行一下抽象的封装再使用，而且不是直接拿 AsyncStorage 进行使用。AsyncStorage 存储的位置根据系统的不同而有所差异。iOS 中的存储类似于 NSUserDefault，通过 plist 文件存放在设备中。Android 中会存储在 RocksDB 或者 SQLite 中，取决于你使用哪个。 2，相关方法 （1）根据键来获取值，获取的结果会放在回调函数中。 1 static getItem(key: string, callback:(error, result)) （2）根据键来设置值。 1 static setItem(key: string, value: string, callback:(error)) （3）根据键来移除项。 1 static removeItem(key: string, callback:(error)) （4）合并现有值和输入值。 1 static mergeItem(key: string, value: string, callback:(error)) （5）清除所有的项目 1 static clear(callback:(error)) （6）获取所有的键 1 static getAllKeys(callback:(error, keys)) （7）清除所有进行中的查询操作。 1 static flushGetRequests() （8）获取多项，其中 keys 是字符串数组，比如： [&#39;k1&#39;, &#39;k2&#39;] 1 static multiGet(keys, callback:(errors, result)) （9）设置多项，其中 keyValuePairs 是字符串的二维数组，比如： [[&#39;k1&#39;, &#39;val1&#39;], [&#39;k2&#39;, &#39;val2&#39;]] 1 static multiSet(keyValuePairs, callback:(errors)) （10）删除多项，其中 keys 是字符串数组，比如： [&#39;k1&#39;, &#39;k2&#39;] 1 static multiRemove(keys, callback:(errors)) （11）多个键值合并，其中 keyValuePairs 是字符串的二维数组，比如： [[&#39;k1&#39;, &#39;val1&#39;], [&#39;k2&#39;, &#39;val2&#39;]] 1 static multiMerge(keyValuePairs, callback:(errors)) 二、使用样例 1，效果图 （1）在文本输入框中输入姓名、电话后，点击“ 保存”按钮即可通过 AsyncStorage 存储起来。 （2）退出程序后再次打开，程序又会自动加载之前保存的信息。 （3）点击“ 清除”按钮则将本地保存的数据全部清除。 2，样例代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 import React , { Component } from &#39;react&#39; ; import { AppRegistry , StyleSheet , Text , View , TextInput , AsyncStorage } from &#39;react-native&#39; ; //用户信息填写组件 class UserInfo extends Component { //构造函数 constructor(props) { super (props); this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/52afe2e8afa3d8bc9f50c13a9c82fa8b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-09-20T18:42:44+08:00" />
<meta property="article:modified_time" content="2017-09-20T18:42:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React Native - 持久化存储（AsyncStorage）的使用详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0px;"> </h2> 
<div> 
 <br> 
 <span style="color:#333333;">一，基本概念</span> 
</div> 
<div> 
 <h4 style="margin-left:0px;"> </h4> 
 <h4 style="margin-left:0px;">1，AsyncStorage介绍</h4> 
 <div> 
  <ul style="margin-left:0em;"><li><span style="color:#008080;"><strong>AsyncStorage </strong></span>是一个简单的、异步的、持久化的 <span style="color:#008080;"><strong>Key-Value </strong></span>存储系统，它对于 <span style="color:#008080;"><strong>App </strong></span>来说是全局性的。它用来代替 <span style="color:#008080;"><strong>LocalStorage</strong></span>。</li><li>由于它的操作是全局的，官方建议我们最好针对 <span style="color:#008080;"><strong>AsyncStorage </strong></span>进行一下抽象的封装再使用，而且不是直接拿 <span style="color:#008080;"><strong>AsyncStorage </strong></span>进行使用。</li><li><span style="color:#008080;"><strong>AsyncStorage </strong></span>存储的位置根据系统的不同而有所差异。<span style="color:#008080;"><strong>iOS </strong></span>中的存储类似于 <span style="color:#008080;"><strong>NSUserDefault</strong></span>，通过 <span style="color:#008080;"><strong>plist </strong></span>文件存放在设备中。<span style="color:#008080;"><strong>Android </strong></span>中会存储在 <span style="color:#008080;"><strong>RocksDB </strong></span>或者 <span style="color:#008080;"><strong>SQLite </strong></span>中，取决于你使用哪个。</li></ul>   
  <h4 style="margin-left:0px;">2，相关方法</h4> （1）根据键来获取值，获取的结果会放在回调函数中。 
  <div> 
   <div id="highlighter_218467" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>getItem(key: string, callback:(error, result))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （2）根据键来设置值。 
  <div> 
   <div id="highlighter_578418" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>setItem(key: string, value: string, callback:(error))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （3）根据键来移除项。 
  <div> 
   <div id="highlighter_661839" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>removeItem(key: string, callback:(error))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （4）合并现有值和输入值。 
  <div> 
   <div id="highlighter_695888" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>mergeItem(key: string, value: string, callback:(error))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （5）清除所有的项目 
  <div> 
   <div id="highlighter_194131" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>clear(callback:(error))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （6）获取所有的键 
  <div> 
   <div id="highlighter_772670" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>getAllKeys(callback:(error, keys))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （7）清除所有进行中的查询操作。 
  <div> 
   <div id="highlighter_852483" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>flushGetRequests()</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （8）获取多项，其中  
  <span style="color:#008080;"><strong>keys </strong></span>是字符串数组，比如： 
  <span style="color:#008080;"><strong>['k1', 'k2']</strong></span> 
  <div> 
   <div id="highlighter_967165" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>multiGet(keys, callback:(errors, result))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （9）设置多项，其中  
  <span style="color:#008080;"><strong>keyValuePairs </strong></span>是字符串的二维数组，比如： 
  <span style="color:#008080;"><strong>[['k1', 'val1'], ['k2', 'val2']]</strong></span> 
  <div> 
   <div id="highlighter_444737" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>multiSet(keyValuePairs, callback:(errors))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （10）删除多项，其中  
  <span style="color:#008080;"><strong>keys </strong></span>是字符串数组，比如： 
  <span style="color:#008080;"><strong>['k1', 'k2']</strong></span> 
  <div> 
   <div id="highlighter_45304" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>multiRemove(keys, callback:(errors))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
  <br> （11）多个键值合并，其中  
  <span style="color:#008080;"><strong>keyValuePairs </strong></span>是字符串的二维数组，比如： 
  <span style="color:#008080;"><strong>[['k1', 'val1'], ['k2', 'val2']]</strong></span> 
  <div> 
   <div id="highlighter_158397" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>static</code>  
          <code>multiMerge(keyValuePairs, callback:(errors))</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div>   
  <h3 style="margin-left:0px;">二、使用样例</h3> 
  <h4 style="margin-left:0px;">1，效果图</h4> 
 </div> 
 <div>
   （1）在文本输入框中输入姓名、电话后，点击“ 
  <strong>保存</strong>”按钮即可通过  
  <span style="color:#008080;"><strong>AsyncStorage </strong></span>存储起来。 
 </div> 
 <div>
   （2）退出程序后再次打开，程序又会自动加载之前保存的信息。 
 </div> 
 <div>
   （3）点击“ 
  <strong>清除</strong>”按钮则将本地保存的数据全部清除。 
 </div> 
 <div> 
  <a href="http://www.hangge.com/blog/cache/detail_1567.html#" rel="nofollow"><img alt="原文:React Native - 持久化存储（AsyncStorage）的使用详解" src="https://images2.imgbox.com/2e/70/z6TmtwCl_o.png"></a> 
  <a href="http://www.hangge.com/blog/cache/detail_1567.html#" rel="nofollow"><img alt="原文:React Native - 持久化存储（AsyncStorage）的使用详解" src="https://images2.imgbox.com/97/8a/URCFPxyJ_o.png"></a> 
  <br>   
 </div> 
 <div> 
  <h4 style="margin-left:0px;">2，样例代码</h4> 
  <div> 
   <div id="highlighter_420452" style="margin-left:0px;"> 
    <table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;">
          1 
        </div> 
        <div style="margin-left:0px;">
          2 
        </div> 
        <div style="margin-left:0px;">
          3 
        </div> 
        <div style="margin-left:0px;">
          4 
        </div> 
        <div style="margin-left:0px;">
          5 
        </div> 
        <div style="margin-left:0px;">
          6 
        </div> 
        <div style="margin-left:0px;">
          7 
        </div> 
        <div style="margin-left:0px;">
          8 
        </div> 
        <div style="margin-left:0px;">
          9 
        </div> 
        <div style="margin-left:0px;">
          10 
        </div> 
        <div style="margin-left:0px;">
          11 
        </div> 
        <div style="margin-left:0px;">
          12 
        </div> 
        <div style="margin-left:0px;">
          13 
        </div> 
        <div style="margin-left:0px;">
          14 
        </div> 
        <div style="margin-left:0px;">
          15 
        </div> 
        <div style="margin-left:0px;">
          16 
        </div> 
        <div style="margin-left:0px;">
          17 
        </div> 
        <div style="margin-left:0px;">
          18 
        </div> 
        <div style="margin-left:0px;">
          19 
        </div> 
        <div style="margin-left:0px;">
          20 
        </div> 
        <div style="margin-left:0px;">
          21 
        </div> 
        <div style="margin-left:0px;">
          22 
        </div> 
        <div style="margin-left:0px;">
          23 
        </div> 
        <div style="margin-left:0px;">
          24 
        </div> 
        <div style="margin-left:0px;">
          25 
        </div> 
        <div style="margin-left:0px;">
          26 
        </div> 
        <div style="margin-left:0px;">
          27 
        </div> 
        <div style="margin-left:0px;">
          28 
        </div> 
        <div style="margin-left:0px;">
          29 
        </div> 
        <div style="margin-left:0px;">
          30 
        </div> 
        <div style="margin-left:0px;">
          31 
        </div> 
        <div style="margin-left:0px;">
          32 
        </div> 
        <div style="margin-left:0px;">
          33 
        </div> 
        <div style="margin-left:0px;">
          34 
        </div> 
        <div style="margin-left:0px;">
          35 
        </div> 
        <div style="margin-left:0px;">
          36 
        </div> 
        <div style="margin-left:0px;">
          37 
        </div> 
        <div style="margin-left:0px;">
          38 
        </div> 
        <div style="margin-left:0px;">
          39 
        </div> 
        <div style="margin-left:0px;">
          40 
        </div> 
        <div style="margin-left:0px;">
          41 
        </div> 
        <div style="margin-left:0px;">
          42 
        </div> 
        <div style="margin-left:0px;">
          43 
        </div> 
        <div style="margin-left:0px;">
          44 
        </div> 
        <div style="margin-left:0px;">
          45 
        </div> 
        <div style="margin-left:0px;">
          46 
        </div> 
        <div style="margin-left:0px;">
          47 
        </div> 
        <div style="margin-left:0px;">
          48 
        </div> 
        <div style="margin-left:0px;">
          49 
        </div> 
        <div style="margin-left:0px;">
          50 
        </div> 
        <div style="margin-left:0px;">
          51 
        </div> 
        <div style="margin-left:0px;">
          52 
        </div> 
        <div style="margin-left:0px;">
          53 
        </div> 
        <div style="margin-left:0px;">
          54 
        </div> 
        <div style="margin-left:0px;">
          55 
        </div> 
        <div style="margin-left:0px;">
          56 
        </div> 
        <div style="margin-left:0px;">
          57 
        </div> 
        <div style="margin-left:0px;">
          58 
        </div> 
        <div style="margin-left:0px;">
          59 
        </div> 
        <div style="margin-left:0px;">
          60 
        </div> 
        <div style="margin-left:0px;">
          61 
        </div> 
        <div style="margin-left:0px;">
          62 
        </div> 
        <div style="margin-left:0px;">
          63 
        </div> 
        <div style="margin-left:0px;">
          64 
        </div> 
        <div style="margin-left:0px;">
          65 
        </div> 
        <div style="margin-left:0px;">
          66 
        </div> 
        <div style="margin-left:0px;">
          67 
        </div> 
        <div style="margin-left:0px;">
          68 
        </div> 
        <div style="margin-left:0px;">
          69 
        </div> 
        <div style="margin-left:0px;">
          70 
        </div> 
        <div style="margin-left:0px;">
          71 
        </div> 
        <div style="margin-left:0px;">
          72 
        </div> 
        <div style="margin-left:0px;">
          73 
        </div> 
        <div style="margin-left:0px;">
          74 
        </div> 
        <div style="margin-left:0px;">
          75 
        </div> 
        <div style="margin-left:0px;">
          76 
        </div> 
        <div style="margin-left:0px;">
          77 
        </div> 
        <div style="margin-left:0px;">
          78 
        </div> 
        <div style="margin-left:0px;">
          79 
        </div> 
        <div style="margin-left:0px;">
          80 
        </div> 
        <div style="margin-left:0px;">
          81 
        </div> 
        <div style="margin-left:0px;">
          82 
        </div> 
        <div style="margin-left:0px;">
          83 
        </div> 
        <div style="margin-left:0px;">
          84 
        </div> 
        <div style="margin-left:0px;">
          85 
        </div> 
        <div style="margin-left:0px;">
          86 
        </div> 
        <div style="margin-left:0px;">
          87 
        </div> 
        <div style="margin-left:0px;">
          88 
        </div> 
        <div style="margin-left:0px;">
          89 
        </div> 
        <div style="margin-left:0px;">
          90 
        </div> 
        <div style="margin-left:0px;">
          91 
        </div> 
        <div style="margin-left:0px;">
          92 
        </div> 
        <div style="margin-left:0px;">
          93 
        </div> 
        <div style="margin-left:0px;">
          94 
        </div> 
        <div style="margin-left:0px;">
          95 
        </div> 
        <div style="margin-left:0px;">
          96 
        </div> 
        <div style="margin-left:0px;">
          97 
        </div> 
        <div style="margin-left:0px;">
          98 
        </div> 
        <div style="margin-left:0px;">
          99 
        </div> 
        <div style="margin-left:0px;">
          100 
        </div> 
        <div style="margin-left:0px;">
          101 
        </div> 
        <div style="margin-left:0px;">
          102 
        </div> 
        <div style="margin-left:0px;">
          103 
        </div> 
        <div style="margin-left:0px;">
          104 
        </div> 
        <div style="margin-left:0px;">
          105 
        </div> 
        <div style="margin-left:0px;">
          106 
        </div> 
        <div style="margin-left:0px;">
          107 
        </div> 
        <div style="margin-left:0px;">
          108 
        </div> 
        <div style="margin-left:0px;">
          109 
        </div> 
        <div style="margin-left:0px;">
          110 
        </div> 
        <div style="margin-left:0px;">
          111 
        </div> 
        <div style="margin-left:0px;">
          112 
        </div> 
        <div style="margin-left:0px;">
          113 
        </div> 
        <div style="margin-left:0px;">
          114 
        </div> 
        <div style="margin-left:0px;">
          115 
        </div> 
        <div style="margin-left:0px;">
          116 
        </div> 
        <div style="margin-left:0px;">
          117 
        </div> 
        <div style="margin-left:0px;">
          118 
        </div> 
        <div style="margin-left:0px;">
          119 
        </div> 
        <div style="margin-left:0px;">
          120 
        </div> 
        <div style="margin-left:0px;">
          121 
        </div> 
        <div style="margin-left:0px;">
          122 
        </div> 
        <div style="margin-left:0px;">
          123 
        </div> 
        <div style="margin-left:0px;">
          124 
        </div> 
        <div style="margin-left:0px;">
          125 
        </div> 
        <div style="margin-left:0px;">
          126 
        </div> 
        <div style="margin-left:0px;">
          127 
        </div> 
        <div style="margin-left:0px;">
          128 
        </div> 
        <div style="margin-left:0px;">
          129 
        </div> 
        <div style="margin-left:0px;">
          130 
        </div> 
        <div style="margin-left:0px;">
          131 
        </div> 
        <div style="margin-left:0px;">
          132 
        </div> 
        <div style="margin-left:0px;">
          133 
        </div> 
        <div style="margin-left:0px;">
          134 
        </div> 
        <div style="margin-left:0px;">
          135 
        </div> 
        <div style="margin-left:0px;">
          136 
        </div> 
        <div style="margin-left:0px;">
          137 
        </div> 
        <div style="margin-left:0px;">
          138 
        </div> 
        <div style="margin-left:0px;">
          139 
        </div> 
        <div style="margin-left:0px;">
          140 
        </div> 
        <div style="margin-left:0px;">
          141 
        </div> 
        <div style="margin-left:0px;">
          142 
        </div> 
        <div style="margin-left:0px;">
          143 
        </div> 
        <div style="margin-left:0px;">
          144 
        </div> 
        <div style="margin-left:0px;">
          145 
        </div> 
        <div style="margin-left:0px;">
          146 
        </div> 
        <div style="margin-left:0px;">
          147 
        </div> 
        <div style="margin-left:0px;">
          148 
        </div> 
        <div style="margin-left:0px;">
          149 
        </div> 
        <div style="margin-left:0px;">
          150 
        </div> 
        <div style="margin-left:0px;">
          151 
        </div> 
        <div style="margin-left:0px;">
          152 
        </div> 
        <div style="margin-left:0px;">
          153 
        </div> 
        <div style="margin-left:0px;">
          154 
        </div> 
        <div style="margin-left:0px;">
          155 
        </div> 
        <div style="margin-left:0px;">
          156 
        </div> 
        <div style="margin-left:0px;">
          157 
        </div> </td><td style="vertical-align:baseline;"> 
        <div style="margin-left:0px;"> 
         <div style="margin-left:0px;"> 
          <code>import</code>  
          <code>React</code> 
          <code>, { </code> 
          <code>Component</code>  
          <code>} from </code> 
          <code>'react'</code> 
          <code>;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>import</code>  
          <code>{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>AppRegistry</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>StyleSheet</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>Text</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>View</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>TextInput</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>AsyncStorage</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>} from </code> 
          <code>'react-native'</code> 
          <code>;</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>//用户信息填写组件</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>class</code>  
          <code>UserInfo</code>  
          <code>extends </code> 
          <code>Component</code>  
          <code>{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>//构造函数</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>constructor(props) {<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>super</code> 
          <code>(props);</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>this.state = {name: </code> 
          <code>''</code> 
          <code>, phone: </code> 
          <code>''</code> 
          <code>};</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>//页面的组件渲染完毕（render）之后执行</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>componentDidMount(){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>var</code>  
          <code>_that = this;</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>//需要查询的键值</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>var</code>  
          <code>keys = [</code> 
          <code>"name"</code> 
          <code>,</code> 
          <code>"phone"</code> 
          <code>];</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>//根据键数组查询保存的键值对</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>AsyncStorage</code> 
          <code>.multiGet(keys, function(errs, result){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>//如果发生错误，这里直接返回（return）防止进入下面的逻辑</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>if</code> 
          <code>(errs){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>return</code> 
          <code>;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>//得到的结果是二维数组（result[i][0]表示我们存储的键，result[i][1]表示我们存储的值）</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>_that.setState({<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>name: (result[0][1]!=null)?result[0][1]:</code> 
          <code>''</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>phone: (result[1][1]!=null)?result[1][1]:</code> 
          <code>''</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>//组件渲染</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>render() {<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>return</code>  
          <code>(</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.flex}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.row}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.head}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>Text</code>  
          <code>style={styles.label}&gt;姓名&lt;/</code> 
          <code>Text</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.flex}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>TextInput</code>  
          <code>style={styles.input}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>                </code> 
          <code>value={this.state.name}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>                </code> 
          <code>onChangeText={(name) =&gt; this.setState({name})}/&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.row}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.head}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>Text</code>  
          <code>style={styles.label}&gt;电话&lt;/</code> 
          <code>Text</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.flex}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>TextInput</code>  
          <code>style={styles.input}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>                </code> 
          <code>value={this.state.phone}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>                </code> 
          <code>onChangeText={(phone) =&gt; this.setState({phone})}/&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>            </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={styles.row}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>Text</code>  
          <code>style={styles.btn} onPress={this.save.bind(this)}&gt;保存&lt;/</code> 
          <code>Text</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>              </code> 
          <code>&lt;</code> 
          <code>Text</code>  
          <code>style={styles.btn} onPress={this.clear.bind(this)}&gt;清除&lt;/</code> 
          <code>Text</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>);</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>//保存数据</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>save() {<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>//设置多项</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>var</code>  
          <code>keyValuePairs = [[</code> 
          <code>'name'</code> 
          <code>, this.state.name], [</code> 
          <code>'phone'</code> 
          <code>, this.state.phone]]</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>AsyncStorage</code> 
          <code>.multiSet(keyValuePairs, function(errs){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>if</code> 
          <code>(errs){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>//TODO：存储出错</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>return</code> 
          <code>;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>alert(</code> 
          <code>'数据保存成功!'</code> 
          <code>);</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>//清除数据</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>clear() {<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>var</code>  
          <code>_that = this;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>AsyncStorage</code> 
          <code>.clear(function(err){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>if</code> 
          <code>(!err){<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>_that.setState({<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>name: </code> 
          <code>""</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>          </code> 
          <code>phone: </code> 
          <code>""</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>alert(</code> 
          <code>'存储的数据已清除完毕!'</code> 
          <code>);</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>//默认应用的容器组件</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>class</code>  
          <code>App</code>  
          <code>extends </code> 
          <code>Component</code>  
          <code>{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>   </code> 
          <code>render() {<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>return</code>  
          <code>(</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>&lt;</code> 
          <code>View</code>  
          <code>style={[styles.flex, styles.topStatus]}&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>         </code> 
          <code>&lt;</code> 
          <code>UserInfo</code> 
          <code>&gt;&lt;/</code> 
          <code>UserInfo</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>        </code> 
          <code>&lt;/</code> 
          <code>View</code> 
          <code>&gt;</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>      </code> 
          <code>);</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>   </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code> </code> 
          <code>}</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>//样式定义</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>const styles = </code> 
          <code>StyleSheet</code> 
          <code>.create({<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>flex:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>flex: 1,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>topStatus:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginTop:25,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>row:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>flexDirection:</code> 
          <code>'row'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>height:45,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginBottom:10</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>head:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>width:70,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginLeft:5,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>backgroundColor:</code> 
          <code>'#23BEFF'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>height:45,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>justifyContent:</code> 
          <code>'center'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>alignItems: </code> 
          <code>'center'</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>label:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>color:</code> 
          <code>'#fff'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>fontSize:15,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>fontWeight:</code> 
          <code>'bold'</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>input:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>height:45,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>borderWidth:1,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginRight: 5,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>paddingLeft: 10,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>borderColor: </code> 
          <code>'#ccc'</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>btn:{<!-- --></code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>flex:1,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>backgroundColor:</code> 
          <code>'#FF7200'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>height:45,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>textAlign:</code> 
          <code>'center'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>color:</code> 
          <code>'#fff'</code> 
          <code>,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginLeft:5,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>marginRight:5,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>lineHeight:45,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>    </code> 
          <code>fontSize:15,</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>  </code> 
          <code>},</code> 
         </div> 
         <div style="margin-left:0px;"> 
          <code>});</code> 
         </div> 
         <div style="margin-left:0px;">
             
         </div> 
         <div style="margin-left:0px;"> 
          <code>AppRegistry</code> 
          <code>.registerComponent(</code> 
          <code>'HelloWorld'</code> 
          <code>, () =&gt; </code> 
          <code>App</code> 
          <code>);</code> 
         </div> 
        </div> </td></tr></tbody></table> 
   </div> 
  </div> 
 </div> 
</div> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/760f03ef1e708a4a26910b3595e41f33/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQL Server报表服务</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c51c92eb23d77a08857a8061a94f62ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">统计学简介之十——样本量的确定</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>