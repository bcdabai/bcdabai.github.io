<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【01】mapbox js api加载arcgis切片服务 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【01】mapbox js api加载arcgis切片服务" />
<meta property="og:description" content="需求： 第三方的mapbox js api加载arcgis切片服务，同时叠加在天地图上，天地图坐标系web墨卡托。
效果图： 形如这种地址去加载http://zjq2022.gis.com:8080/demo/loadmapboxtdt.html
思路： 需要制作一个和天地图比例尺级别以及切片大小等一样的切片方案，可以通过arcmap或者arcgispro制作。如图：
具体的切片信息参数参考链接：
arcgis javascript api4.x加载天地图web墨卡托（wkid：3857）坐标系_acrgis 加载墨卡托地图-CSDN博客
制作出的切片方案见链接：
链接：https://pan.baidu.com/s/1fezUPJnp-G0g6cpcbsOuEw 提取码：gfwm 使用该切片方案去切片。
切片之后的效果：
mapbox加载arcgis切片服务示例代码： &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&#34;utf-8&#34; /&gt; &lt;title&gt;mapbox 添加arcgis rest切片地图服务&lt;/title&gt; &lt;meta name=&#34;viewport&#34; content=&#34;initial-scale=1,maximum-scale=1,user-scalable=no&#34; /&gt; &lt;script src=&#34;https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js&#34;&gt;&lt;/script&gt; &lt;link href=&#34;https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css&#34; rel=&#34;stylesheet&#34; /&gt; &lt;script src=&#34;https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js&#34;&gt;&lt;/script&gt; &lt;style&gt; body { margin: 0; padding: 0; } #map { position: absolute; top: 0; bottom: 0; width: 100%; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&#34;map&#34;&gt;&lt;/div&gt; &lt;script&gt; const vecUrl = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/54e4b76a8ed384324518239c19c8b8de/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-18T18:07:52+08:00" />
<meta property="article:modified_time" content="2024-01-18T18:07:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【01】mapbox js api加载arcgis切片服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>需求：</h2> 
<p>第三方的mapbox js api加载arcgis切片服务，同时叠加在天地图上，天地图坐标系web墨卡托。</p> 
<h2>效果图：</h2> 
<p>形如这种地址去加载<a href="http://zjq2022.gis.com:8080/demo/loadmapboxtdt.html" rel="nofollow" title="http://zjq2022.gis.com:8080/demo/loadmapboxtdt.html">http://zjq2022.gis.com:8080/demo/loadmapboxtdt.html</a></p> 
<p><img alt="" height="940" src="https://images2.imgbox.com/1d/72/pcN486PG_o.png" width="1200"></p> 
<h2>思路：</h2> 
<p>需要制作一个和天地图比例尺级别以及切片大小等一样的切片方案，可以通过arcmap或者arcgispro制作。如图：</p> 
<p>具体的切片信息参数参考链接：</p> 
<p><a href="https://blog.csdn.net/gislaozhang/article/details/135584558" title="arcgis javascript api4.x加载天地图web墨卡托（wkid：3857）坐标系_acrgis 加载墨卡托地图-CSDN博客">arcgis javascript api4.x加载天地图web墨卡托（wkid：3857）坐标系_acrgis 加载墨卡托地图-CSDN博客</a></p> 
<p><img alt="" height="921" src="https://images2.imgbox.com/c9/9f/8SgdWnv2_o.png" width="1200"></p> 
<p>制作出的切片方案见链接：</p> 
<p>链接：https://pan.baidu.com/s/1fezUPJnp-G0g6cpcbsOuEw <br> 提取码：gfwm <br> 使用该切片方案去切片。</p> 
<p>切片之后的效果：</p> 
<p><img alt="" height="921" src="https://images2.imgbox.com/a0/0d/xsut7E4Z_o.png" width="952"></p> 
<h2>mapbox加载arcgis切片服务示例代码：</h2> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;mapbox 添加arcgis rest切片地图服务&lt;/title&gt;
    &lt;meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    /&gt;
    &lt;script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"&gt;&lt;/script&gt;
    &lt;link
      href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css"
      rel="stylesheet"
    /&gt;
    &lt;script src="https://cdn.bootcdn.net/ajax/libs/axios/0.19.2/axios.js"&gt;&lt;/script&gt;
    &lt;style&gt;
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="map"&gt;&lt;/div&gt;
    &lt;script&gt;
      const vecUrl =
        "http://t0.tianditu.com/vec_w/wmts?tk=317e52a409b6b382957e09003ee7e235";
      const cvaUrl =
        "http://t0.tianditu.com/cva_w/wmts?tk=317e52a409b6b382957e09003ee7e235";
      var tdtVec = {
        type: "raster",
        tiles: [
          vecUrl +
            "&amp;SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION=1.0.0&amp;LAYER=vec&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&amp;FORMAT=tiles",
        ],
        tileSize: 256,
      };
      var tdtCva = {
        type: "raster",
        tiles: [
          cvaUrl +
            "&amp;SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION=1.0.0&amp;LAYER=cva&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&amp;FORMAT=tiles",
        ],
        tileSize: 256,
      };
      mapboxgl.accessToken =
        "pk.eyJ1IjoibHh0aWFudGlhbiIsImEiOiJjaXd2ZjlkYnQwMTZvMnRtYWZnM2lpbHFvIn0.ef3rFZTr9psmLWahrqap2A";
      var map = new mapboxgl.Map({
        container: "map", // container id
        center: [114.32021, 30.578322], // starting position
        style: {
          version: 8,
          glyphs: "mapbox://fonts/mapbox/{fontstack}/{range}.pbf",
          sources: {
            tdtVec: tdtVec,
            tdtCva: tdtCva,
          },
          layers: [
            {
              id: "tdtVec",
              type: "raster",
              source: "tdtVec",
            },
            {
              id: "tdtCva",
              type: "raster",
              source: "tdtCva",
            },
          ],
        },
        zoom: 12, // starting zoom
        minZoom: 1,
        maxZoom: 18,
      });

      map.on("load", function () {
        map.addSource("arcgissource", {
          type: "raster",
          tiles: [
            "https://ncportal.geoscene.cn/server/rest/services/wuhan3857/MapServer/tile/{z}/{y}/{x}",
          ],
          tileSize: 256,
        });
        map.addLayer({
          id: "tdt-img-tiles",
          type: "raster",
          minzoom: 0,
          maxzoom: 19,
          source: "arcgissource",
        });
      });

      // // 添加argis rest 动态地图服务
      // map.on("load", function () {
      //   map.addSource("city-source", {
      //     type: "raster",
      //     tiles: [
      //       "https://whgeoscene.hygt.com/server/rest/services/全国道路/MapServer/export?dpi=96&amp;transparent=true&amp;format=png8&amp;layers=&amp;bbox={bbox-epsg-3857}&amp;f=image&amp;bboxSR=102100&amp;imageSR=102100",
      //     ],
      //     // 'tiles':['http://localhost:6080/arcgis/rest/services/MyMapService/MapServer/export?dpi=96&amp;transparent=true&amp;format=png8&amp;layers=&amp;bbox={bbox-epsg-3857}&amp;f=image&amp;bboxSR=3857&amp;imageSR=3857'],
      //     // "tiles": ['http://221.239.0.144:6080/arcgis/rest/services/oceanname_vector/MapServer/export?bbox={bbox-epsg-3857}&amp;f=image&amp;transparent=true&amp;format=png8&amp;bboxSR=102100&amp;imageSR=102100'],
      //     tileSize: 256,
      //   });
      //   map.addLayer({
      //     id: "sity-layer",
      //     type: "raster",
      //     source: "city-source",
      //   });

      // });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h2>参考资料：</h2> 
<p><a href="https://docs.mapbox.com/style-spec/reference/sources/#raster" rel="nofollow" title="Sources | Mapbox Style Spec | Mapbox">Sources | Mapbox Style Spec | Mapbox</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/adc59ededb15387db2c4fe942b104680/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小白水平理解面试经典题目LeetCode 88 Merge Sorted Array【Java实现】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2e10acb0770cf7bcdbffb9fbfea72400/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人大金仓数据库KingbaseES 中的自治事务、子事务和长事务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>