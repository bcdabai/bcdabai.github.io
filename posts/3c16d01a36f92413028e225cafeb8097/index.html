<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于javaweb&#43;mysql的jsp&#43;servlet在线商城购物商城服装商城(前台、后台)(java&#43;jsp&#43;servlet&#43;mysql) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于javaweb&#43;mysql的jsp&#43;servlet在线商城购物商城服装商城(前台、后台)(java&#43;jsp&#43;servlet&#43;mysql)" />
<meta property="og:description" content="基于javaweb&#43;mysql的jsp&#43;servlet在线商城购物商城服装商城(前台、后台)(java&#43;jsp&#43;servlet&#43;mysql)
私信源码获取及调试交流
运行环境
Java≥8、MySQL≥5.7、Tomcat≥8
开发工具
eclipse/idea/myeclipse/sts等均可配置运行
适用
课程设计，大作业，毕业设计，项目练习，学习演示等
功能说明
在线商城，实现了商城的基本功能
如分类展示商品信息、搜索商品信息、用户注册登录、添加商品到购物车、提交订单、个人中心查看订单、留言板留言等
管理员登录后台后可以查看管理用户信息、商品分类信息、商品信息、新闻信息、留言信息、订单信息等。
商城模板通用，可修改为任意商城，如手机商城、鲜花商城等等
后台管理员
前台用户
技术框架
CSS JavaScript JSP Servlet JDBC MySQL
基于javaweb&#43;mysql的JSP&#43;Servlet在线商城购物商城服装商城(前台、后台)(java&#43;jsp&#43;servlet&#43;mysql)
Files fs = su.getFiles();//获得所有文件 File f = fs.getFile(0);//获得上传的文件 String fname = f.getFileName();//获得文件名 try { su.save(&#34;images/product&#34;);//保存图片到指定位置 } catch (SmartUploadException e) { e.printStackTrace(); } Request req1 = su.getRequest(); String pname = req1.getParameter(&#34;productName&#34;); String id = req1.getParameter(&#34;parentId&#34;); String price = req1.getParameter(&#34;productPrice&#34;); String desc = req1.getParameter(&#34;productDesc&#34;); String stock = req1.getParameter(&#34;productStock&#34;); EASYBUY_PRODUCT p = null; if(price!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3c16d01a36f92413028e225cafeb8097/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-12T13:57:08+08:00" />
<meta property="article:modified_time" content="2023-11-12T13:57:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于javaweb&#43;mysql的jsp&#43;servlet在线商城购物商城服装商城(前台、后台)(java&#43;jsp&#43;servlet&#43;mysql)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>基于javaweb+mysql的jsp+servlet在线商城购物商城服装商城(前台、后台)(java+jsp+servlet+mysql)</p> 
<blockquote> 
 <p><strong>私信</strong>源码获取及调试交流</p> 
</blockquote> 
<p>运行环境</p> 
<p>Java≥8、MySQL≥5.7、Tomcat≥8</p> 
<p>开发工具</p> 
<p>eclipse/idea/myeclipse/sts等均可配置运行</p> 
<p>适用</p> 
<p>课程设计，大作业，毕业设计，项目练习，学习演示等</p> 
<p>功能说明</p> 
<p>在线商城，实现了商城的基本功能</p> 
<p>如分类展示商品信息、搜索商品信息、用户注册登录、添加商品到购物车、提交订单、个人中心查看订单、留言板留言等</p> 
<p>管理员登录后台后可以查看管理用户信息、商品分类信息、商品信息、新闻信息、留言信息、订单信息等。</p> 
<p><strong>商城模板通用，可修改为任意商城，如手机商城、鲜花商城等等</strong></p> 
<p>后台管理员</p> 
<p>前台用户</p> 
<p>技术框架</p> 
<p>CSS JavaScript <strong>JSP</strong> <strong>Servlet</strong> JDBC <strong>MySQL</strong></p> 
<p>基于javaweb+mysql的JSP+Servlet在线商城购物商城服装商城(前台、后台)(java+jsp+servlet+mysql)</p> 
<pre><code class="prism language-java">		
		<span class="token class-name">Files</span> fs <span class="token operator">=</span> su<span class="token punctuation">.</span><span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得所有文件</span>
		<span class="token class-name">File</span> f <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得上传的文件</span>
		<span class="token class-name">String</span> fname <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得文件名</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			su<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">"images/product"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//保存图片到指定位置</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SmartUploadException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">Request</span> req1 <span class="token operator">=</span> su<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> pname <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> id <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"parentId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> price <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> desc <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productDesc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> stock <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productStock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">EASYBUY_PRODUCT</span> p <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>price<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> stock<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> id<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EASYBUY_PRODUCT</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pname<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> 
													<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">,</span> 
													<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>stock<span class="token punctuation">)</span><span class="token punctuation">,</span> 
													<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
													<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
													fname<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			count <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"productSelect"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectProductViewServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-html">}
}

public class RegisterInServlet extends HttpServlet {
@Override
protected void service(HttpServletRequest req, HttpServletResponse resp)
		throws ServletException, IOException {
	req.setCharacterEncoding("UTF-8");
	String username=req.getParameter("userName");
	String name=req.getParameter("name");
	String rePassWord=req.getParameter("rePassWord");
	String sex=req.getParameter("sex");
	String year=req.getParameter("birthday");
	String email=req.getParameter("email");
	String mobile=req.getParameter("mobile");
	String address=req.getParameter("address");
	String veryCode=req.getParameter("veryCode");
	
	HttpSession session = req.getSession();
	//获得系统生成的验证码
	String sysCode = (String)session.getAttribute("syscode");
	EASYBUY_USER u=new EASYBUY_USER(username, name, rePassWord, sex, year, null, email, mobile, address, 1);
	int count=EASYBUY_USERDao.insert(u);
	PrintWriter out=resp.getWriter();
	if(sysCode.equals(veryCode)){
		if(count&gt;0){
			resp.sendRedirect("reg-result.jsp");
		}else{
			out.write("<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">"<span class="token punctuation">)</span><span class="token punctuation">;</span>
			out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"alert('register error');"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"location.href='register.jsp'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>"</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>");
			out.close();
		}
	}
	
	
	}
}
</code></pre> 
<pre><code class="prism language-html">//	String birthday=request.getParameter("birthday");
	
//	String year=birthyear+"-"+birthmonth+"-"+birthday;
	String year=req.getParameter("birthday");
	String email=req.getParameter("email");
	String mobile=req.getParameter("mobile");
	String address=req.getParameter("address");
	
	EASYBUY_USER u=new EASYBUY_USER(username, name, pwd, sex, year, null, email, mobile, address, 1);
	int count=EASYBUY_USERDao.insert(u);
	PrintWriter out=resp.getWriter();
	if(count&gt;0){
		resp.sendRedirect("manage-result.jsp");
	}else{
		out.write("<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">"<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"alert('添加失败');"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"location.href='user-add.jsp'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>"</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>");
		out.close();
	}
}
}

public class RegisterInServlet extends HttpServlet {
@Override
protected void service(HttpServletRequest req, HttpServletResponse resp)
		throws ServletException, IOException {
	req.setCharacterEncoding("UTF-8");
	String username=req.getParameter("userName");
	String name=req.getParameter("name");
	String rePassWord=req.getParameter("rePassWord");
	String sex=req.getParameter("sex");
	String year=req.getParameter("birthday");
	String email=req.getParameter("email");
	String mobile=req.getParameter("mobile");
	String address=req.getParameter("address");
	String veryCode=req.getParameter("veryCode");
	
	HttpSession session = req.getSession();
</code></pre> 
<pre><code class="prism language-java">		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tpage"</span><span class="token punctuation">,</span> tpage<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//搜索关键字</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"search_words"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//父分类</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"selected_fid"</span><span class="token punctuation">,</span> fid<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"product-list.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> gmServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> arg0<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> arg1<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
	arg1<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">PrintWriter</span> out<span class="token operator">=</span>arg1<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">EncodeUtil</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>arg0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">HttpSession</span> session<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">EASYBUY_USER</span> list<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">EASYBUY_USER</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户id</span>
	<span class="token class-name">String</span> id<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_USER_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户姓名</span>
	<span class="token class-name">String</span> name<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_USER_NAME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户地址</span>
	<span class="token class-name">String</span> address<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_ADDRESS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//总价钱</span>
	<span class="token class-name">String</span> price<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"jstext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment"></span>
	<span class="token comment">//商品id</span>
</code></pre> 
<pre><code class="prism language-java">					<span class="token comment">//把当前页数传递给guestbook.jsp使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 跳</span>
				 	req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"guestbook.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把总页数传递给guestbook.jsp 使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"max_page"</span><span class="token punctuation">,</span> max_page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把当前页数传递给guestbook.jsp使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 跳</span>
				 	req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"guestbook.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
			
			<span class="token punctuation">}</span>
		 
		<span class="token punctuation">}</span>
  

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectDD</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
	req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//查询分类数据</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> tlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tlist"</span><span class="token punctuation">,</span> tlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">	req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//查询分类数据</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> tlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tlist"</span><span class="token punctuation">,</span> tlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> hlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByHot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hlist"</span><span class="token punctuation">,</span> hlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_NEWS<span class="token punctuation">&gt;</span></span> nlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_NEWSDao</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"nlist"</span><span class="token punctuation">,</span> nlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//查询最近浏览的商品</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> lastlylist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"lastlylist"</span><span class="token punctuation">,</span> lastlylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
		<span class="token class-name">EncodeUtil</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> dd<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EASYBUY_Ddan</span><span class="token punctuation">&gt;</span></span> dan<span class="token operator">=</span><span class="token class-name">EASYBUY_DdanDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>dd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"dan"</span><span class="token punctuation">,</span> dan<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"Dan.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DoProductUpdateServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
<span class="token class-name">SmartUpload</span> su <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		su<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
</code></pre> 
<pre><code class="prism language-java">	<span class="token class-name">EASYBUY_USER</span> list<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">EASYBUY_USER</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户id</span>
	<span class="token class-name">String</span> id<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_USER_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户姓名</span>
	<span class="token class-name">String</span> name<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_USER_NAME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用户地址</span>
	<span class="token class-name">String</span> address<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">getEU_ADDRESS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//总价钱</span>
	<span class="token class-name">String</span> price<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"jstext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment"></span>
	<span class="token comment">//商品id</span>
	<span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">EP_ID</span><span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"spID"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//购买数量</span>
	<span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> quantity<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"number"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//商品单价</span>
	<span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> sPPrice<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"sPPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//购买后对商品表的库存进行修改</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token constant">EP_ID</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> count5<span class="token operator">=</span><span class="token class-name">ESDao</span><span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>quantity<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token constant">EP_ID</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//商品单个总价</span>
	<span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> pprice<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token constant">EP_ID</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token constant">EP_ID</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		pprice<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>quantity<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sPPrice<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token comment">/得到序列</span>
	<span class="token comment">//往订单表里添加数据</span>
	<span class="token keyword">int</span> count<span class="token operator">=</span><span class="token class-name">ESDao</span><span class="token punctuation">.</span><span class="token function">insertDD</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> address<span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> getSequenceId<span class="token operator">=</span><span class="token class-name">ESDao</span><span class="token punctuation">.</span><span class="token function">getSequenceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//循环往订单详情添加</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token constant">EP_ID</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">EASYBUY_ORDER_DETAIL</span> eod<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">EASYBUY_ORDER_DETAIL</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>getSequenceId<span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token constant">EP_ID</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>quantity<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pprice<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> count2<span class="token operator">=</span><span class="token class-name">ESDao</span><span class="token punctuation">.</span><span class="token function">eodInsert</span><span class="token punctuation">(</span>eod<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	
	<span class="token comment"></span>
	<span class="token comment">// 开单后，修改购物车</span>
	<span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> esID<span class="token operator">=</span>arg0<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"esID"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>esID<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
</code></pre> 
<pre><code class="prism language-java">		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_NEWS<span class="token punctuation">&gt;</span></span> nlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_NEWSDao</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"nlist"</span><span class="token punctuation">,</span> nlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//查询最近浏览的商品</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> lastlylist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
			req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"lastlylist"</span><span class="token punctuation">,</span> lastlylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserNumServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> width<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> height<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">;</span>
		<span class="token class-name">BufferedImage</span> img<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span><span class="token class-name">BufferedImage</span><span class="token punctuation">.</span><span class="token constant">TYPE_INT_RGB</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Graphics2D</span> g<span class="token operator">=</span>img<span class="token punctuation">.</span><span class="token function">createGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">LIGHT_GRAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		g<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">YELLOW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Random</span> rand<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> x1<span class="token operator">=</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> y1<span class="token operator">=</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> x2<span class="token operator">=</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> y2<span class="token operator">=</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SmartUploadException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">Request</span> req1 <span class="token operator">=</span> su<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> id <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> pname <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> pid <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"parentId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> price <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productPrice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> desc <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productDesc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> stock <span class="token operator">=</span> req1<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"productStock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">EASYBUY_PRODUCT</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EASYBUY_PRODUCT</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span> 
												pname<span class="token punctuation">,</span> 
												desc<span class="token punctuation">,</span> 
												<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">,</span> 
												<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>stock<span class="token punctuation">)</span><span class="token punctuation">,</span> 
												<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pid<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
												<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pid<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
												fname<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			count <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"productSelect"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DoProductAddServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
</code></pre> 
<pre><code class="prism language-java">		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectProductViewServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		
		
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//查询最近浏览的商品</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			ids<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-html">	//商品单价
	String [] sPPrice=arg0.getParameterValues("sPPrice");
	
	//购买后对商品表的库存进行修改
	for(int i=0;i&lt;EP_ID.length;i++){
		int count5=ESDao.updateStock(Integer.parseInt(quantity[i]),Integer.parseInt(EP_ID[i]));
	}
	//商品单个总价
	int [] pprice=new int[EP_ID.length];
	for(int i=0;i&lt;EP_ID.length;i++){
		pprice[i]=Integer.parseInt(quantity[i])*Integer.parseInt(sPPrice[i]);
	} 
	/得到序列
	//往订单表里添加数据
	int count=ESDao.insertDD(id, name, address,Integer.parseInt(price));
	int getSequenceId=ESDao.getSequenceId();
	//循环往订单详情添加
	for(int i=0;i&lt;EP_ID.length;i++){
		EASYBUY_ORDER_DETAIL eod=new EASYBUY_ORDER_DETAIL(1,getSequenceId,Integer.parseInt(EP_ID[i]),Integer.parseInt(quantity[i]),pprice[i]);
		int count2=ESDao.eodInsert(eod);
	}
	
	
	
	// 开单后，修改购物车
	String [] esID=arg0.getParameterValues("esID");
	for(int i=0;i&lt;esID.length;i++){
		int count3 =ESDao.esdelete(Integer.parseInt(esID[i]));
	}
	/
	if(count&gt;0){
			
		out.print("<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">"<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"alert('购物成功');"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"location.href='shopping-result.jsp';"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>"</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>");
		out.close();
	}else{
		out.print("<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">"<span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"alert('购物失败，请重新选择商品');"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"location.href='ShopSelect';"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>"</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>");
		out.close();
	}
}
}

</code></pre> 
<pre><code class="prism language-java">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexSelectServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//查询分类数据</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> tlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tlist"</span><span class="token punctuation">,</span> tlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> hlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByHot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hlist"</span><span class="token punctuation">,</span> hlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_NEWS<span class="token punctuation">&gt;</span></span> nlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_NEWSDao</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"nlist"</span><span class="token punctuation">,</span> nlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//查询最近浏览的商品</span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> lastlylist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
			req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"lastlylist"</span><span class="token punctuation">,</span> lastlylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserNumServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-java">  

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectDD</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
	req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//查询分类数据</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> tlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tlist"</span><span class="token punctuation">,</span> tlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> hlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByHot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hlist"</span><span class="token punctuation">,</span> hlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_NEWS<span class="token punctuation">&gt;</span></span> nlist <span class="token operator">=</span> <span class="token class-name">EASYBUY_NEWSDao</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"nlist"</span><span class="token punctuation">,</span> nlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//查询最近浏览的商品</span>
	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ids"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>ids<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT<span class="token punctuation">&gt;</span></span> lastlylist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"lastlylist"</span><span class="token punctuation">,</span> lastlylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
</code></pre> 
<pre><code class="prism language-java">
 

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpManage</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> id<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> replyContent<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"replyContent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> <span class="token class-name">Content</span><span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"Content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Date</span> date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">SimpleDateFormat</span> sdf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> replyTime<span class="token operator">=</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">EASYBUY_COMMENT</span> comment<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">EASYBUY_COMMENT</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token class-name">Content</span><span class="token punctuation">,</span>replyTime<span class="token punctuation">,</span>replyContent<span class="token punctuation">,</span>replyTime<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
		<span class="token comment">//System.out.println(id+"--"+content+"--"+replyTime+"--"+replyContent+"--"+name);</span>
		comment<span class="token punctuation">.</span><span class="token function">setEC_ID</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> num<span class="token operator">=</span><span class="token class-name">EASYBUY_COMMENTDao</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"manage-result.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<pre><code class="prism language-java">			tpage <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">totalPage</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>fid<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>fid<span class="token punctuation">)</span><span class="token punctuation">;</span>
			list <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByFid</span><span class="token punctuation">(</span>cpage<span class="token punctuation">,</span> count<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			tpage <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">totalPageByFid</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEPC_NAME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>cid<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token punctuation">;</span>
			list <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByCid</span><span class="token punctuation">(</span>cpage<span class="token punctuation">,</span> count<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			tpage <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">totalPageByCid</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEPC_NAME</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			list <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">selectAllByName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			tpage <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCTDao</span><span class="token punctuation">.</span><span class="token function">totalPageByName</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token string">"搜索商品："</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> 
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//当前页数</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"cpage"</span><span class="token punctuation">,</span> cpage<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//总页数</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"tpage"</span><span class="token punctuation">,</span> tpage<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//搜索关键字</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"search_words"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//父分类</span>
		req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"selected_fid"</span><span class="token punctuation">,</span> fid<span class="token punctuation">)</span><span class="token punctuation">;</span>
		req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"product-list.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<pre><code class="prism language-java">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelallServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
			<span class="token annotation punctuation">@Override</span>
			<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
					<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
				req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> page<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//当前页数</span>
				<span class="token keyword">int</span> pagesize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">//每页行数</span>
				<span class="token class-name">String</span> spage<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"flist"</span><span class="token punctuation">,</span> flist<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_PRODUCT_CATEGORY<span class="token punctuation">&gt;</span></span> clist <span class="token operator">=</span> <span class="token class-name">EASYBUY_PRODUCT_CATEGORYDao</span><span class="token punctuation">.</span><span class="token function">selectChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"clist"</span><span class="token punctuation">,</span> clist<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>spage<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//如果页面上传递了页数,将当前页数改变掉</span>
					page<span class="token operator">=</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>spage<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
 
				<span class="token comment">//查出总页数</span>
				
				<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span>EASYBUY_COMMENT<span class="token punctuation">&gt;</span></span> list<span class="token operator">=</span><span class="token class-name">EASYBUY_COMMENTDao</span><span class="token punctuation">.</span><span class="token function">selPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pagesize<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> max_page<span class="token operator">=</span><span class="token class-name">EASYBUY_COMMENTDao</span><span class="token punctuation">.</span><span class="token function">getMax</span><span class="token punctuation">(</span>pagesize<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>max_page<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> 
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把总页数传递给guestbook.jsp 使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"max_page"</span><span class="token punctuation">,</span> max_page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把当前页数传递给guestbook.jsp使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 跳</span>
				 	req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"guestbook.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把总页数传递给guestbook.jsp 使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"max_page"</span><span class="token punctuation">,</span> max_page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//把当前页数传递给guestbook.jsp使用</span>
					req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 跳</span>
</code></pre> 
<pre><code class="prism language-java">	<span class="token punctuation">}</span>
	
	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDoupdate</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">EncodeUtil</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
		resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> username<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"userName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> name<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> pwd<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"passWord"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> sex<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> birthday<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"birthday"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> email<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> mobile<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"mobile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> address<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> userStatus<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"userStatus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>userStatus <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>userStatus<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			status <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>userStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">EASYBUY_USER</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">EASYBUY_USER</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> name<span class="token punctuation">,</span> pwd<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> email<span class="token punctuation">,</span> mobile<span class="token punctuation">,</span> address<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> count<span class="token operator">=</span><span class="token class-name">EASYBUY_USERDao</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"manage-result.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">PrintWriter</span> out<span class="token operator">=</span>resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/8e/dKHcTEIp_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/6f/7d/vR0zvzXu_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/b9/52/J5bH9cl6_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/21/c9/UysVdM9h_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/51/00/2p3E0n9h_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/3d/6f/riPWd273_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/b9/bd/qYY7CuLc_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/ab/68/MU5FhSk5_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/99/c5/kUzdICdb_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/02/a6/LWSwzyHD_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/4b/e6/wZRmQAB7_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/1e/8c/4Ztc0Sbi_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/b0/64/VmMLAPuW_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/0d/03/Fy23QNFf_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/cd/0c/1NqR2Atw_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/22/69/PFBoXRqi_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/7c/f3/R3xbNPd1_o.jpg" alt="请添加图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0327ebc14b3502bf71d0ffd321f3d2c4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matplotlib绘图一网打尽【持续更新ing】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/361211d90b3a613f9d2656a8e207096a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">单片机CC2530通用I/O端口（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>