<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python QCustomPlot使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python QCustomPlot使用" />
<meta property="og:description" content="文章目录 1 下载安装:2 基本折线图3 设置点样式4 Plot Screenshots: Item Demo5 RealtimeDataDemo 1 下载安装: pip install QCustomPlot2 2 基本折线图 效果如下：
#!/usr/bin/env python3 # -*- coding:GBK -*- import os,sys,re from PyQt5.QtWidgets import * from PyQt5.QtCore import Qt,QDateTime from PyQt5.QtGui import QBrush,QPen,QColor import sys,random import QCustomPlot2 from QCustomPlot2 import QCustomPlot,QCP,QCPAxisRect,QCPAxis,QCPGraph class QCustomPlotDemo(QWidget): def __init__(self): super(QCustomPlotDemo, self).__init__() self.resize(600,600) self.setWindowTitle(&#34;QCustomPlot折线图Demo&#34;) self.layout = QVBoxLayout(self) self.m_plot = QCustomPlot() self.layout.addWidget(self.m_plot) self.x = [ i for i in range(20)] self." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fb3155bef7b73408cf7f655083ee62b6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-05T16:07:10+08:00" />
<meta property="article:modified_time" content="2023-04-05T16:07:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python QCustomPlot使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#1___1" rel="nofollow">1 下载安装:</a></li><li><a href="#2____5" rel="nofollow">2 基本折线图</a></li><li><a href="#3___56" rel="nofollow">3 设置点样式</a></li><li><a href="#4__Plot_Screenshots_Item_Demo_138" rel="nofollow">4 Plot Screenshots: Item Demo</a></li><li><a href="#5__RealtimeDataDemo_288" rel="nofollow">5 RealtimeDataDemo</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1___1"></a>1 下载安装:</h3> 
<pre><code class="prism language-bash">pip <span class="token function">install</span>  QCustomPlot2
</code></pre> 
<h3><a id="2____5"></a>2 基本折线图</h3> 
<p>效果如下：<br> <img src="https://images2.imgbox.com/69/fb/DXrkUYCS_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python3 </span>
<span class="token comment"># -*- coding:GBK -*-</span>

<span class="token keyword">import</span> os<span class="token punctuation">,</span>sys<span class="token punctuation">,</span>re 
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span>  Qt<span class="token punctuation">,</span>QDateTime
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtGui  <span class="token keyword">import</span> QBrush<span class="token punctuation">,</span>QPen<span class="token punctuation">,</span>QColor
<span class="token keyword">import</span> sys<span class="token punctuation">,</span>random
<span class="token keyword">import</span> QCustomPlot2
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> QCustomPlot<span class="token punctuation">,</span>QCP<span class="token punctuation">,</span>QCPAxisRect<span class="token punctuation">,</span>QCPAxis<span class="token punctuation">,</span>QCPGraph


<span class="token keyword">class</span> <span class="token class-name">QCustomPlotDemo</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>QCustomPlotDemo<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"QCustomPlot折线图Demo"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout <span class="token operator">=</span> QVBoxLayout<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot <span class="token operator">=</span> QCustomPlot<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">[</span> i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">[</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>addGraph<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pen <span class="token operator">=</span> QPen<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#self.pen.setStyle(Qt.DotLine)</span>
        self<span class="token punctuation">.</span>pen<span class="token punctuation">.</span>setWidth<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pen<span class="token punctuation">.</span>setColor<span class="token punctuation">(</span>QColor<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>self<span class="token punctuation">.</span>pen<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setLineStyle<span class="token punctuation">(</span>QCPGraph<span class="token punctuation">.</span>lsLine <span class="token punctuation">)</span>
        <span class="token comment">#self.m_plot.graph(0).setBrush(QBrush(QColor(0, 0, 255, 20)))</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setData<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setVisible<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setVisible<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setLabel<span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setLabel<span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    test <span class="token operator">=</span> QCustomPlotDemo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    test<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3___56"></a>3 设置点样式</h3> 
<p><img src="https://images2.imgbox.com/aa/f7/1Fkvp79D_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python3 </span>
<span class="token comment"># -*- coding:GBK -*-</span>

<span class="token keyword">import</span> os<span class="token punctuation">,</span>sys<span class="token punctuation">,</span>re<span class="token punctuation">,</span>math
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span>  Qt<span class="token punctuation">,</span>QDateTime
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtGui  <span class="token keyword">import</span> QBrush<span class="token punctuation">,</span>QPen<span class="token punctuation">,</span>QColor
<span class="token keyword">import</span> sys<span class="token punctuation">,</span>random
<span class="token keyword">import</span> QCustomPlot2
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> QCustomPlot<span class="token punctuation">,</span>QCP<span class="token punctuation">,</span>QCPAxisRect<span class="token punctuation">,</span>QCPAxis<span class="token punctuation">,</span>QCPGraph<span class="token punctuation">,</span>QCPScatterStyle


<span class="token keyword">class</span> <span class="token class-name">QCustomPlotDemo</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>QCustomPlotDemo<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"ScatterStyleDemo"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout <span class="token operator">=</span> QVBoxLayout<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot <span class="token operator">=</span> QCustomPlot<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>legend<span class="token punctuation">.</span>setVisible<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>legend<span class="token punctuation">.</span>setRowSpacing<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>shapes <span class="token operator">=</span> <span class="token punctuation">[</span>QCPScatterStyle<span class="token punctuation">.</span>ssCross<span class="token punctuation">,</span> 
                       QCPScatterStyle<span class="token punctuation">.</span>ssPlus<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssCircle<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssDisc<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssSquare<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssDiamond<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssStar<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssTriangle<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssTriangleInverted<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssCrossSquare<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssPlusSquare<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssCrossCircle<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssPlusCircle<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssPeace<span class="token punctuation">,</span>
                       QCPScatterStyle<span class="token punctuation">.</span>ssCustom <span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>names <span class="token operator">=</span> <span class="token punctuation">[</span>
           <span class="token string">"ssCross"</span><span class="token punctuation">,</span> <span class="token string">"ssPlus"</span><span class="token punctuation">,</span>  <span class="token string">"ssCircle"</span><span class="token punctuation">,</span> <span class="token string">"ssDisc"</span><span class="token punctuation">,</span> <span class="token string">"ssSquare"</span><span class="token punctuation">,</span> <span class="token string">"ssDiamond"</span><span class="token punctuation">,</span> <span class="token string">"ssStar"</span><span class="token punctuation">,</span> <span class="token string">"ssTriangle"</span><span class="token punctuation">,</span>
           <span class="token string">"ssTriangleInverted"</span><span class="token punctuation">,</span> <span class="token string">"ssCrossSquare"</span><span class="token punctuation">,</span> <span class="token string">"ssPlusSquare"</span><span class="token punctuation">,</span> <span class="token string">"ssCrossCircle"</span><span class="token punctuation">,</span> <span class="token string">"ssPlusCircle"</span><span class="token punctuation">,</span>  <span class="token string">"ssPeace"</span><span class="token punctuation">,</span> <span class="token string">"ssCustom"</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>pen <span class="token operator">=</span> QPen<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>shapes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>addGraph<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>pen<span class="token punctuation">.</span>setColor<span class="token punctuation">(</span>QColor<span class="token punctuation">(</span> <span class="token builtin">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.6</span><span class="token operator">+</span><span class="token number">0.7</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.4</span><span class="token operator">+</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            x<span class="token punctuation">,</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span>  <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment">#x[k] = k/10*4*3.14 + 0.01</span>
                <span class="token comment">#y[k] = 7*math.sin(x[k])/x[k] + (len(self.shapes) - i)*5</span>
                x<span class="token punctuation">.</span>append<span class="token punctuation">(</span>k<span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">3.14</span> <span class="token operator">+</span> <span class="token number">0.01</span><span class="token punctuation">)</span>
                y<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">*</span>math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span>x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>shapes<span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setData<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rescaleAxes<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>self<span class="token punctuation">.</span>pen<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setName<span class="token punctuation">(</span>self<span class="token punctuation">.</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setLineStyle<span class="token punctuation">(</span>QCPGraph<span class="token punctuation">.</span>lsLine<span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>shapes <span class="token operator">!=</span> QCPGraph<span class="token punctuation">.</span>lsLine<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setScatterStyle<span class="token punctuation">(</span>QCPScatterStyle<span class="token punctuation">(</span>self<span class="token punctuation">.</span>shapes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">pass</span> 
        <span class="token comment">#set blank axis lines:</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>rescaleAxes<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setTicks<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setTicks<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setTickLabels<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setTickLabels<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>axisRect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setupFullAxesBox<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    test <span class="token operator">=</span> QCustomPlotDemo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    test<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="4__Plot_Screenshots_Item_Demo_138"></a>4 Plot Screenshots: Item Demo</h3> 
<p><img src="https://images2.imgbox.com/f3/8b/BhEsefBB_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python3 </span>
<span class="token comment"># -*- coding:GBK -*-</span>

<span class="token keyword">import</span> os<span class="token punctuation">,</span>sys<span class="token punctuation">,</span>re<span class="token punctuation">,</span>math
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span>  Qt<span class="token punctuation">,</span>QDateTime<span class="token punctuation">,</span> QMargins<span class="token punctuation">,</span>QTimer
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtGui  <span class="token keyword">import</span> QBrush<span class="token punctuation">,</span>QPen<span class="token punctuation">,</span>QColor<span class="token punctuation">,</span>QFont
<span class="token keyword">import</span> sys<span class="token punctuation">,</span>random
<span class="token keyword">import</span> QCustomPlot2
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> QCustomPlot<span class="token punctuation">,</span>QCP<span class="token punctuation">,</span>QCPAxisRect<span class="token punctuation">,</span>QCPAxis<span class="token punctuation">,</span>QCPGraph<span class="token punctuation">,</span>QCPScatterStyle<span class="token punctuation">,</span>QCPItemBracket<span class="token punctuation">,</span>QCPItemText<span class="token punctuation">,</span>QCPItemTracer
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> <span class="token operator">*</span>


M_PI <span class="token operator">=</span> <span class="token number">3.14159265358979323846</span>

<span class="token keyword">class</span> <span class="token class-name">QCustomPlotDemo</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>QCustomPlotDemo<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"ItemDemo"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout <span class="token operator">=</span> QVBoxLayout<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot <span class="token operator">=</span> QCustomPlot<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>setInteractions<span class="token punctuation">(</span>QCP<span class="token punctuation">.</span>iRangeDrag <span class="token operator">|</span> QCP<span class="token punctuation">.</span>iRangeZoom<span class="token punctuation">)</span>
        graph <span class="token operator">=</span> self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>addGraph<span class="token punctuation">(</span><span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token number">500</span>
        phase <span class="token operator">=</span> <span class="token number">0</span>
        k  <span class="token operator">=</span> <span class="token number">3</span>
        x<span class="token punctuation">,</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            x<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token operator">/</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">34</span><span class="token operator">-</span><span class="token number">17</span><span class="token punctuation">)</span>
            y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>k<span class="token operator">*</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>phase<span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        graph<span class="token punctuation">.</span>setData<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        graph<span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">)</span>
        graph<span class="token punctuation">.</span>rescaleKeyAxis<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>m_plot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.45</span><span class="token punctuation">,</span> <span class="token number">1.65</span><span class="token punctuation">)</span>
        <span class="token comment">#self.m_plot.xAxis.grid().setZeroLinePen(Qt.NoPen)</span>
        <span class="token comment">#add the bracket at the top:</span>
        bracket <span class="token operator">=</span>  QCPItemBracket<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        bracket<span class="token punctuation">.</span>left<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span>
        bracket<span class="token punctuation">.</span>right<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span>
        bracket<span class="token punctuation">.</span>setLength<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
        <span class="token comment">#add the text label at the top:</span>
        wavePacketText <span class="token operator">=</span>  QCPItemText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        wavePacketText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>bracket<span class="token punctuation">.</span>center<span class="token punctuation">)</span>
        wavePacketText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span>
        wavePacketText<span class="token punctuation">.</span>setPositionAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignBottom<span class="token operator">|</span>Qt<span class="token punctuation">.</span>AlignHCenter<span class="token punctuation">)</span>
        wavePacketText<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Wavepacket"</span><span class="token punctuation">)</span>
        <span class="token comment">#add the phase tracer (red circle) which sticks to the graph data (and gets updated in bracketDataSlot by timer event):</span>
        phaseTracer <span class="token operator">=</span>  QCPItemTracer<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        itemDemoPhaseTracer <span class="token operator">=</span> phaseTracer
        phaseTracer<span class="token punctuation">.</span>setGraph<span class="token punctuation">(</span>graph<span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setGraphKey<span class="token punctuation">(</span><span class="token punctuation">(</span>M_PI<span class="token operator">*</span><span class="token number">1.5</span><span class="token operator">-</span>phase<span class="token punctuation">)</span><span class="token operator">/</span>k<span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setInterpolating<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setStyle<span class="token punctuation">(</span>QCPItemTracer<span class="token punctuation">.</span>tsCircle<span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setBrush<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>red<span class="token punctuation">)</span>
        phaseTracer<span class="token punctuation">.</span>setSize<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token comment">#add label for phase tracer:</span>
        phaseTracerText <span class="token operator">=</span> QCPItemText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setType<span class="token punctuation">(</span>QCPItemPosition<span class="token punctuation">.</span>ptAxisRectRatio<span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>setPositionAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignRight<span class="token operator">|</span>Qt<span class="token punctuation">.</span>AlignBottom<span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.95</span><span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Points of fixed\nphase define\nphase velocity vp"</span><span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>setTextAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignLeft<span class="token punctuation">)</span>
        phaseTracerText<span class="token punctuation">.</span>setPadding<span class="token punctuation">(</span>QMargins<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#add arrow pointing at phase tracer, coming from label:</span>
        phaseTracerArrow <span class="token operator">=</span>  QCPItemCurve<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>start<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>phaseTracerText<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>startDir<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>phaseTracerArrow<span class="token punctuation">.</span>start<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>startDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># direction 30 pixels to the left of parent anchor (tracerArrow.start)</span>
        phaseTracerArrow<span class="token punctuation">.</span>end<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>phaseTracer<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>end<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>endDir<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>phaseTracerArrow<span class="token punctuation">.</span>end<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>endDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
        headarrow <span class="token operator">=</span> QCPLineEnding<span class="token punctuation">(</span><span class="token punctuation">)</span>
        headarrow<span class="token punctuation">.</span>setStyle<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">.</span>esSpikeArrow<span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>setHead<span class="token punctuation">(</span>headarrow<span class="token punctuation">)</span>
        tailarrow <span class="token operator">=</span> QCPLineEnding<span class="token punctuation">(</span> QCPLineEnding<span class="token punctuation">.</span>esBar<span class="token punctuation">,</span> phaseTracerText<span class="token punctuation">.</span>bottom<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>phaseTracerText<span class="token punctuation">.</span>top<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">0.85</span><span class="token punctuation">)</span>
        phaseTracerArrow<span class="token punctuation">.</span>setTail<span class="token punctuation">(</span>tailarrow<span class="token punctuation">)</span>
        <span class="token comment">#add the group velocity tracer (green circle):</span>
        groupTracer <span class="token operator">=</span>  QCPItemTracer<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setGraph<span class="token punctuation">(</span>graph<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setGraphKey<span class="token punctuation">(</span><span class="token number">5.5</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setInterpolating<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setStyle<span class="token punctuation">(</span>QCPItemTracer<span class="token punctuation">.</span>tsCircle<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>green<span class="token punctuation">)</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setBrush<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>green<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setSize<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>

        <span class="token comment">#add the group velocity tracer (green circle):</span>
        groupTracer <span class="token operator">=</span>  QCPItemTracer<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setGraph<span class="token punctuation">(</span>graph<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setGraphKey<span class="token punctuation">(</span><span class="token number">5.5</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setInterpolating<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setStyle<span class="token punctuation">(</span>QCPItemTracer<span class="token punctuation">.</span>tsCircle<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>green<span class="token punctuation">)</span><span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setBrush<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>green<span class="token punctuation">)</span>
        groupTracer<span class="token punctuation">.</span>setSize<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
  
        <span class="token comment">#add label for group tracer:</span>
        groupTracerText <span class="token operator">=</span>  QCPItemText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        groupTracerText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setType<span class="token punctuation">(</span>QCPItemPosition<span class="token punctuation">.</span>ptAxisRectRatio<span class="token punctuation">)</span>
        groupTracerText<span class="token punctuation">.</span>setPositionAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignRight<span class="token operator">|</span>Qt<span class="token punctuation">.</span>AlignTop<span class="token punctuation">)</span>
        groupTracerText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.20</span><span class="token punctuation">)</span> <span class="token comment"># lower right corner of axis rect</span>
        groupTracerText<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Fixed positions in\nwave packet define\ngroup velocity vg"</span><span class="token punctuation">)</span>
        groupTracerText<span class="token punctuation">.</span>setTextAlignment<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>AlignLeft<span class="token punctuation">)</span>
        <span class="token comment">#groupTracerText.setFont(QFont(font().family(), 9))</span>
        groupTracerText<span class="token punctuation">.</span>setPadding<span class="token punctuation">(</span>QMargins<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#add arrow pointing at group tracer, coming from label:</span>
        groupTracerArrow <span class="token operator">=</span>  QCPItemCurve<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>start<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>groupTracerText<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>startDir<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>groupTracerArrow<span class="token punctuation">.</span>start<span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>startDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># direction 30 pixels to the left of parent anchor (tracerArrow.start)</span>
        groupTracerArrow<span class="token punctuation">.</span>end<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">5.5</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>endDir<span class="token punctuation">.</span>setParentAnchor<span class="token punctuation">(</span>groupTracerArrow<span class="token punctuation">.</span>end<span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>endDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>setHead<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">.</span>esSpikeArrow<span class="token punctuation">)</span><span class="token punctuation">)</span>
        groupTracerArrow<span class="token punctuation">.</span>setTail<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">.</span>esBar<span class="token punctuation">,</span> <span class="token punctuation">(</span>groupTracerText<span class="token punctuation">.</span>bottom<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>groupTracerText<span class="token punctuation">.</span>top<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">0.85</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  
        <span class="token comment">#add dispersion arrow:</span>
        arrow <span class="token operator">=</span>  QCPItemCurve<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        arrow<span class="token punctuation">.</span>start<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span>
        arrow<span class="token punctuation">.</span>startDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.3</span><span class="token punctuation">)</span>
        arrow<span class="token punctuation">.</span>endDir<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">)</span>
        arrow<span class="token punctuation">.</span>end<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span>
        arrow<span class="token punctuation">.</span>setHead<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">(</span>QCPLineEnding<span class="token punctuation">.</span>esSpikeArrow<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#add the dispersion arrow label:</span>
        dispersionText <span class="token operator">=</span>  QCPItemText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>m_plot<span class="token punctuation">)</span>
        dispersionText<span class="token punctuation">.</span>position<span class="token punctuation">.</span>setCoords<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.9</span><span class="token punctuation">)</span>
        dispersionText<span class="token punctuation">.</span>setRotation<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
        dispersionText<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Dispersion with\nvp &lt; vg"</span><span class="token punctuation">)</span>
        <span class="token comment">#dispersionText.setFont(QFont(font().family(), 10))</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    test <span class="token operator">=</span> QCustomPlotDemo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    test<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="5__RealtimeDataDemo_288"></a>5 RealtimeDataDemo</h3> 
<p><img src="https://images2.imgbox.com/4d/36/9SDaPDkK_o.gif" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/env python3 </span>
<span class="token comment"># -*- coding:GBK -*-</span>

<span class="token keyword">import</span> os<span class="token punctuation">,</span>sys<span class="token punctuation">,</span>re<span class="token punctuation">,</span>math
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span>  Qt<span class="token punctuation">,</span>QDateTime<span class="token punctuation">,</span> QMargins<span class="token punctuation">,</span>QTimer<span class="token punctuation">,</span>QTime
<span class="token keyword">from</span>   PyQt5<span class="token punctuation">.</span>QtGui  <span class="token keyword">import</span> QBrush<span class="token punctuation">,</span>QPen<span class="token punctuation">,</span>QColor<span class="token punctuation">,</span>QFont
<span class="token keyword">import</span> sys<span class="token punctuation">,</span>random
<span class="token keyword">import</span> QCustomPlot2
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> QCustomPlot<span class="token punctuation">,</span>QCP<span class="token punctuation">,</span>QCPAxisRect<span class="token punctuation">,</span>QCPAxis<span class="token punctuation">,</span>QCPGraph<span class="token punctuation">,</span>QCPScatterStyle<span class="token punctuation">,</span>QCPItemBracket<span class="token punctuation">,</span>QCPItemText<span class="token punctuation">,</span>QCPItemTracer
<span class="token keyword">from</span>   QCustomPlot2 <span class="token keyword">import</span> <span class="token operator">*</span>

timeStart <span class="token operator">=</span> QTime<span class="token punctuation">.</span>currentTime<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">QCustomPlotDemo</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>QCustomPlotDemo<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Real Time Data Demo"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout <span class="token operator">=</span> QVBoxLayout<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot <span class="token operator">=</span> QCustomPlot<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>customPlot<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>addGraph<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># blue line</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>QColor<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>addGraph<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># red line</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setPen<span class="token punctuation">(</span>QPen<span class="token punctuation">(</span>QColor<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        timeTicker <span class="token operator">=</span> QCPAxisTickerTime<span class="token punctuation">(</span><span class="token punctuation">)</span>
        timeTicker<span class="token punctuation">.</span>setTimeFormat<span class="token punctuation">(</span><span class="token string">"%h:%m:%s"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setTicker<span class="token punctuation">(</span>timeTicker<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>axisRect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setupFullAxesBox<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
        <span class="token comment"># make left and bottom axes transfer their ranges to right and top axes:</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>rangeChanged<span class="token punctuation">[</span>QCPRange<span class="token punctuation">]</span><span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>xAxis2<span class="token punctuation">.</span>setRange<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>yAxis<span class="token punctuation">.</span>rangeChanged<span class="token punctuation">[</span>QCPRange<span class="token punctuation">]</span><span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>yAxis2<span class="token punctuation">.</span>setRange<span class="token punctuation">)</span>

        dataTimer <span class="token operator">=</span>  QTimer<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        dataTimer<span class="token punctuation">.</span>timeout<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>realtimeDataSlot<span class="token punctuation">)</span>
        dataTimer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">realtimeDataSlot</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        key <span class="token operator">=</span> timeStart<span class="token punctuation">.</span>msecsTo<span class="token punctuation">(</span>QTime<span class="token punctuation">.</span>currentTime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000.0</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>addData<span class="token punctuation">(</span>key<span class="token punctuation">,</span> math<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#print(key, math.sin(key)+ random.randint(0,5))</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>graph<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>addData<span class="token punctuation">(</span>key<span class="token punctuation">,</span> math<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>xAxis<span class="token punctuation">.</span>setRange<span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> Qt<span class="token punctuation">.</span>AlignRight<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>customPlot<span class="token punctuation">.</span>replot<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    test <span class="token operator">=</span> QCustomPlotDemo<span class="token punctuation">(</span><span class="token punctuation">)</span>
    test<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/36090e9778620b1bc1e4cf8ba72890e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OWOD复现过程总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b9eef667c9b03e6d499c37076aa59f2a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Golang 的 datetime 格式化</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>