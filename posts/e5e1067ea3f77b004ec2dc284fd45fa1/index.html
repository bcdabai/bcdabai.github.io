<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CH 白色情人节1(②第一天-KM算法) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CH 白色情人节1(②第一天-KM算法)" />
<meta property="og:description" content="背景 下过雨的夏天傍晚 我都会期待 唱歌的蝉 嘿 把星星都吵醒 月光晒了很凉快 就是这样回忆起来 第一次告白 尴尬的我 看 爱装得很哲学的你其实很可爱 你说活在明天 活在期待 不如活得今天很自在 我说我懂了 会不会太快 未来 第一天要展开 描述 时间回溯到男女主认识的第一天——女主同学举办的联谊会，男主迟到了那天的联谊会，而男主到达现场时女主也刚好没有男伴，这就是他们的第一次相遇。 男主回想起来不禁一阵感慨(为啥这么好的妹子你们都不搭讪呢)，突然男主想到，如果当时 已经配对的n对男女好感值之和不是 最大，会不会自己就遇不上女主了呢？ 输入格式 第一行两个正整数n和queen，表示已有n对男女可以配对和女主的编号queen。(男编号为X 1~X n，女编号为Y 1~Y n&#43;1) 接下来n*(n&#43;1)行，每行三个正整数X i，Y i，Z i，表示男X i女Y i之间的好感度为Z i， 保证每对(Xi,Yi)没有重复，即两人的关系至多一条。 不存在男与男、女与女之间的好感度！ 输出格式 前n行输出联谊会上n对男女的配对情况 (会多出来一名女生)，每行两个正整数X i和Y i(空格隔开)，任意一种符合条件的方案均可。 第n&#43;1行， 对于你输出的方案，如果女主未配对，输出&#34;YES&#34;(不含引号)，表示女主会遇到男主，否则输出&#34;NO&#34;(不含引号)。 样例输入 2 3 1 1 15 1 2 20 1 3 17 2 1 22 2 2 14 2 3 14 样例输出 1 2 2 1 YES 数据范围与约定 对于100%的数据， 。 样例解释 如图，已经配对的关系有是 男1号女2号和 男2号女1号。 来源 *****关系~ km算法" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e5e1067ea3f77b004ec2dc284fd45fa1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-03-25T15:45:35+08:00" />
<meta property="article:modified_time" content="2013-03-25T15:45:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CH 白色情人节1(②第一天-KM算法)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="color:rgb(51,51,51); font-family:微软雅黑,'Microsoft YaHei','WenQuanYi Micro Hei',宋体; font-size:14px; line-height:20px; background-color:rgb(240,240,240); width:980px"> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">背景</h5> 
 <div style="padding-left:10px">
   下过雨的夏天傍晚 我都会期待 
  <br> 唱歌的蝉 嘿 把星星都吵醒 月光晒了很凉快 
  <br> 就是这样回忆起来 第一次告白 
  <br> 尴尬的我 看 爱装得很哲学的你其实很可爱 
  <br> 你说活在明天 活在期待 不如活得今天很自在 
  <br> 我说我懂了 会不会太快 未来 第一天要展开 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">描述</h5> 
 <div style="padding-left:10px">
   时间回溯到男女主认识的第一天——女主同学举办的联谊会，男主迟到了那天的联谊会，而男主到达现场时女主也刚好没有男伴，这就是他们的第一次相遇。 
 </div> 
 <div style="padding-left:10px">
   男主回想起来不禁一阵感慨(为啥这么好的妹子你们都不搭讪呢)，突然男主想到，如果当时 
  <strong>已经配对的n对男女好感值之和</strong>不是 
  <strong>最大</strong>，会不会自己就遇不上女主了呢？ 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">输入格式</h5> 
 <div style="padding-left:10px">
   第一行两个正整数n和queen，表示已有n对男女可以配对和女主的编号queen。(男编号为X 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">1</sub>~X 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">n</sub>，女编号为Y 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">1</sub>~Y 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">n+1</sub>) 
 </div> 
 <div style="padding-left:10px">
   接下来n*(n+1)行，每行三个正整数X 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>，Y 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>，Z 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>，表示男X 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>女Y 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>之间的好感度为Z 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>， 
  <strong>保证每对(X<sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>,Y<sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>)没有重复，即两人的关系至多一条</strong>。 
 </div> 
 <div style="padding-left:10px"> 
  <strong>不存在男与男、女与女之间的好感度！</strong> 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">输出格式</h5> 
 <div style="padding-left:10px">
   前n行输出联谊会上n对男女的配对情况 
  <strong>(会多出来一名女生)</strong>，每行两个正整数X 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>和Y 
  <sub style="position:relative; font-size:12px; line-height:0; vertical-align:baseline; bottom:-0.25em">i</sub>(空格隔开)，任意一种符合条件的方案均可。 
 </div> 
 <div style="padding-left:10px">
   第n+1行， 
  <strong>对于你输出的方案</strong>，如果女主未配对，输出"YES"(不含引号)，表示女主会遇到男主，否则输出"NO"(不含引号)。 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">样例输入</h5> 
 <pre style="padding:9.5px; font-family:Monaco,Menlo,Consolas,'Courier New',monospace; font-size:13px; margin-top:0px; margin-bottom:10px; margin-left:10px; word-break:break-all; word-wrap:break-word; white-space:pre-wrap; background-color:rgb(245,245,245)">2 3
1 1 15
1 2 20
1 3 17
2 1 22
2 2 14
2 3 14

</pre> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">样例输出</h5> 
 <pre style="padding:9.5px; font-family:Monaco,Menlo,Consolas,'Courier New',monospace; font-size:13px; margin-top:0px; margin-bottom:10px; margin-left:10px; word-break:break-all; word-wrap:break-word; white-space:pre-wrap; background-color:rgb(245,245,245)">1 2
2 1
YES

</pre> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">数据范围与约定</h5> 
 <div style="padding-left:10px">
   对于100%的数据， 
  <img alt="1\leq n\leq 520,1\leq Z_{i}\leq 201314" src="https://images2.imgbox.com/92/71/yxNLlZEN_o.gif" style="height:auto; max-width:100%; vertical-align:middle; border:0px">。 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">样例解释</h5> 
 <div style="padding-left:10px"> 
  <img src="https://images2.imgbox.com/4f/61/Uu9iHIxO_o.png" alt="">如图，已经配对的关系有是 
  <strong>男1号女2号</strong>和 
  <strong>男2号女1号</strong>。 
 </div> 
 <h5 style="margin:10px 0px; font-family:inherit; color:inherit; font-size:18px">来源</h5> 
 <div style="padding-left:10px">
   *****关系~ 
 </div> 
</div> 
<p><br> </p> 
<p><span style="font-size:14px">km算法</span></p> 
<p><span style="font-size:14px">就是二分图匹配时维护lx[i],ly[i]</span></p> 
<p><span style="font-size:14px">满足</span></p> 
<p><span style="font-size:14px">1.对于任意边lx[i]+ly[i]&gt;=w[i,j]</span></p> 
<p><span style="font-size:14px">2.如果存在一组匹配，其中任意边满足lx[i]+ly[i]=w[i,j]，它一定是最大匹配（如果随意调换一边，必然出现lx[i]+ly[j]+lx[i']+ly[j']=w[i,j]+w[i',j']≥w[i,j']+w[i',j]</span></p> 
<p><span style="font-size:14px">于是每次找出slock，表示对所有找过的i,不为0的min(lx[i]+ly[j]-w[i,j])</span></p> 
<p><span style="font-size:14px">把slock的值从左移至右，既不改变原图能走的边，又能使图得到扩充。</span></p> 
<p><span style="font-size:14px">//一开始应该把lx[i]设成max(w[i,j],0),ly[i]设成0</span></p> 
<p><span style="font-size:14px">每次扩充必须保证图中的边满足<span style="font-size:14px">lx[i]+ly[i]=w[i,j]，否则用slock扩充</span></span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;cstdlib&gt;
#include&lt;iostream&gt;
#include&lt;functional&gt;
using namespace std;
#define INF (100000000)
#define MAXN (520+10)
#define MAXWi (201314)
int n,m,yi,slack;
int w[MAXN][MAXN],lx[MAXN],ly[MAXN],a[MAXN];//a=?-&gt;yi
bool vx[MAXN],vy[MAXN];
bool find(int x)
{
	vx[x]=1;
	for (int i=1;i&lt;=m;i++)
		if (!vy[i])
		{
			int t=lx[x]+ly[i]-w[x][i];
			if (t==0)
			{
				vy[i]=1;
				if (a[i]==0||find(a[i])) {a[i]=x;return 1;}			
			}else slack=min(slack,t);		
		}
	return 0;
}
int main()
{
//	freopen("input","r",stdin);
	scanf("%d%d",&amp;n,&amp;yi);m=n+1;
	memset(lx,0,sizeof(lx));
	memset(ly,0,sizeof(ly));
	memset(a,0,sizeof(a));
	for (int i=1;i&lt;=n*(n+1);i++)
	{
		int u,v,wei;scanf("%d%d%d",&amp;u,&amp;v,&amp;wei);w[u][v]=wei;
		lx[u]=max(lx[u],wei);
	}
	for (int i=1;i&lt;=n;i++)
	{
		memset(vx,0,sizeof vx);
		memset(vy,0,sizeof vy);
		slack=INF;
		while (!find(i))
		{
			for (int j=1;j&lt;=n;j++) if (vx[j]) lx[j]-=slack;
			for (int j=1;j&lt;=m;j++) if (vy[j]) ly[j]+=slack;
			memset(vx,0,sizeof vx);
			memset(vy,0,sizeof vy);
			slack=INF;
		//	find(i);		
		}
	}	
	for (int i=1;i&lt;=m;i++)
	{
		if (a[i]) printf("%d %d\n",a[i],i);
	}
	if (a[yi]) printf("NO\n");
	else printf("YES\n");
	return 0;
}</code></pre> 
<br> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1ec0a57dd962efa20464cddc3fa7b193/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络常用命令(三)ifconfig、ifup和ifdown</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bce355ce33d09071ce0c5a082bcbc955/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">各常见数据类型范围</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>