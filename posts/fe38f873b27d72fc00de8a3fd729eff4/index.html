<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>达梦DBLINK之DM访问Oracle配置步骤 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="达梦DBLINK之DM访问Oracle配置步骤" />
<meta property="og:description" content="达梦通过DBLINK访问Oracle数据库有两种方式一种是通过Oracle oci接口，一种是通过ODBC数据源的方式。
推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。
推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。
推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。
一、下载Oracle客户端驱动（Instant Client） 下载地址：Oracle Instant Client Downloads
目前Oracle Instant Client驱动包已经支持ARM架构平台环境。
选择对应平台的Basic和ODBC驱动包：
Basic Package（instantclient-basic） *必须
ODBC Package （instantclient-odbc）*可选
另外，还需要注意Oracle Instant Client高版本包对glibc版本有要求，需要glibc 2.14或者以上环境
本次测试环境：
操作系统版本：Centos 7
Oracle数据库版本：Oracle 11.2.0.4
DM数据库版本：DM V8 1-2-70 ENT
Oracle Instant Client包版本：19.13
数据库字符集：Oracle ZHS16GBK，DM GB18030
二、查看系统环境 1、检查glibc版本
[root@localhost ~]# rpm -qi glibc Name : glibc Version : 2.17 Release : 307.el7.1 Architecture: x86_64 Install Date: Mon 02 Aug 2021 03:28:10 PM CST Group : System Environment/Libraries Size : 14100570 License : LGPLv2&#43; and LGPLv2&#43; with exceptions and GPLv2&#43; Signature : RSA/SHA256, Sat 04 Apr 2020 04:52:25 AM CST, Key ID 24c6a8a7f4a80eb5 Source RPM : glibc-2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fe38f873b27d72fc00de8a3fd729eff4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-22T11:20:26+08:00" />
<meta property="article:modified_time" content="2022-10-22T11:20:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">达梦DBLINK之DM访问Oracle配置步骤</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>达梦通过DBLINK访问Oracle数据库有两种方式一种是通过Oracle oci接口，一种是通过ODBC数据源的方式。</p> 
<p><strong>推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。</strong><br> <strong>推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。</strong><br> <strong>推荐达梦DBLINK使用Oralce OCI的方式去访问Oracle数据库。</strong></p> 
<h3><a id="OracleInstant_Client_5"></a>一、下载Oracle客户端驱动（Instant Client）</h3> 
<p>下载地址：<a href="https://www.oracle.com/database/technologies/instant-client/downloads.html" rel="nofollow">Oracle Instant Client Downloads</a></p> 
<p>目前Oracle Instant Client驱动包已经支持ARM架构平台环境。</p> 
<p>选择对应平台的Basic和ODBC驱动包：</p> 
<p>Basic Package（instantclient-basic） *必须</p> 
<p>ODBC Package （instantclient-odbc）*可选</p> 
<p>另外，还需要注意Oracle Instant Client高版本包对glibc版本有要求，需要glibc 2.14或者以上环境</p> 
<p>本次测试环境：</p> 
<p>操作系统版本：Centos 7</p> 
<p>Oracle数据库版本：Oracle 11.2.0.4</p> 
<p>DM数据库版本：DM V8 1-2-70 ENT</p> 
<p>Oracle Instant Client包版本：19.13</p> 
<p>数据库字符集：Oracle ZHS16GBK，DM GB18030</p> 
<h3><a id="_31"></a>二、查看系统环境</h3> 
<p>1、检查glibc版本</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rpm -qi glibc</span>
Name        <span class="token builtin class-name">:</span> glibc
Version     <span class="token builtin class-name">:</span> <span class="token number">2.17</span>
Release     <span class="token builtin class-name">:</span> <span class="token number">307</span>.el7.1
Architecture: x86_64
Install Date: Mon 02 Aug <span class="token number">2021</span> 03:28:10 PM CST
Group       <span class="token builtin class-name">:</span> System Environment/Libraries
Size        <span class="token builtin class-name">:</span> <span class="token number">14100570</span>
License     <span class="token builtin class-name">:</span> LGPLv2+ and LGPLv2+ with exceptions and GPLv2+
Signature   <span class="token builtin class-name">:</span> RSA/SHA256, Sat 04 Apr <span class="token number">2020</span> 04:52:25 AM CST, Key ID 24c6a8a7f4a80eb5
Source RPM  <span class="token builtin class-name">:</span> glibc-2.17-307.el7.1.src.rpm
Build Date  <span class="token builtin class-name">:</span> Wed 01 Apr <span class="token number">2020</span> 06:33:57 AM CST
Build Host  <span class="token builtin class-name">:</span> x86-01.bsys.centos.org
Relocations <span class="token builtin class-name">:</span> <span class="token punctuation">(</span>not relocatable<span class="token punctuation">)</span>
Packager    <span class="token builtin class-name">:</span> CentOS BuildSystem <span class="token operator">&lt;</span>http://bugs.centos.org<span class="token operator">&gt;</span>
Vendor      <span class="token builtin class-name">:</span> CentOS
URL         <span class="token builtin class-name">:</span> http://www.gnu.org/software/glibc/
Summary     <span class="token builtin class-name">:</span> The GNU libc libraries
Description <span class="token builtin class-name">:</span>
The glibc package contains standard libraries <span class="token function">which</span> are used by
multiple programs on the system. In order to save disk space and
memory, as well as to <span class="token function">make</span> upgrading easier, common system code is
kept <span class="token keyword">in</span> one place and shared between programs. This particular package
contains the <span class="token function">most</span> important sets of shared libraries: the standard C
library and the standard math library. Without these two libraries, a
Linux system will not function.

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ldd --version</span>
ldd <span class="token punctuation">(</span>GNU libc<span class="token punctuation">)</span> <span class="token number">2.17</span>
Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2012</span> Free Software Foundation, Inc.
This is <span class="token function">free</span> software<span class="token punctuation">;</span> see the <span class="token builtin class-name">source</span> <span class="token keyword">for</span> copying conditions.  There is NO
warranty<span class="token punctuation">;</span> not even <span class="token keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Roland McGrath and Ulrich Drepper.

</code></pre> 
<p>2、检查是否有安装libaio包</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa|grep libaio</span>
libaio-0.3.109-13.el7.x86_64
</code></pre> 
<h3><a id="Oracle_Instant_Client_79"></a>三、解压安装Oracle Instant Client包</h3> 
<p>上传安装包到服务器，然后创建目录并解压</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /opt/oracle</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># unzip instantclient-basic-linux.x64-19.13.0.0.0dbru.zip -d /opt/oracle</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># unzip instantclient-odbc-linux.x64-19.13.0.0.0dbru.zip -d /opt/oracle</span>
<span class="token punctuation">[</span>root@localhost oracle<span class="token punctuation">]</span><span class="token comment"># cd instantclient_19_13/</span>
<span class="token punctuation">[</span>root@localhost instantclient_19_13<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/opt/oracle/instantclient_19_13
<span class="token comment">##所有的驱动包都在/opt/oracle/instantclient_19_13目录下</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1e/0d/UlNXKHAi_o.png" alt="image-20211025115130032"></p> 
<p><strong>注意：</strong></p> 
<blockquote> 
 <p>如果Instant Client安装包是18.3 之前的版本，还需要创建几个动态库的软链接。如下：</p> 
 <pre><code>cd /opt/oracle/instantclient_12_2
ln -s libclntsh.so.12.1 libclntsh.so
ln -s libocci.so.12.1 libocci.so
</code></pre> 
</blockquote> 
<h3><a id="_105"></a>四、配置环境变量</h3> 
<p>-添加到/etc/ld.so.conf.d目录下</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo /opt/oracle/instantclient_19_13 &gt; /etc/ld.so.conf.d/oracle-instantclient.conf</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/ld.so.conf.d/oracle-instantclient.conf</span>
/opt/oracle/instantclient_19_13
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ldconfig</span>
</code></pre> 
<p>-配置LD_LIBRARY_PATH环境变量</p> 
<p>修改dmdba用户下的.bash_profile文件，添加如下内容：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$LD_LIBRARY_PATH</span>:/opt/oracle/instantclient_19_13"</span>
</code></pre> 
<p>生效：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>dmdba@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">source</span> .bash_profile
</code></pre> 
<p>查看：</p> 
<p>env 或者env |grep LD_LIBRARY_PATH</p> 
<h3><a id="ORACLE_OCI_132"></a>五、通过ORACLE OCI接口的方式访问</h3> 
<p>上面配置成功完成后，达梦数据库可以使用Oracle OCI接口进行访问。创建语法以及使用方法可以参考《DM8 SQL语言使用手册》外部链接章节。Oracle OCI接口相关动态库文件在instantclient-basic包中，配置好上面的环境变量后可以直接创建DBLINK访问。</p> 
<p>DBLINK创建语句：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> link <span class="token string">"LINKORA"</span> <span class="token keyword">connect</span> <span class="token string">'oracle'</span> <span class="token keyword">with</span> <span class="token string">"SCOTT"</span> identified <span class="token keyword">by</span> <span class="token string">"oracle"</span>  <span class="token keyword">using</span> <span class="token string">'192.168.15.10:1521/orcl'</span><span class="token punctuation">;</span>
<span class="token comment">##注意用户名密码大小写</span>
</code></pre> 
<p>测试：</p> 
<pre><code class="prism language-sql"><span class="token comment">---Oracle数据库，创建测试表</span>
sqlplus <span class="token operator">/</span> <span class="token keyword">as</span> sysdba
<span class="token keyword">create</span> <span class="token keyword">user</span> scott identified <span class="token keyword">by</span> oracle<span class="token punctuation">;</span>
<span class="token keyword">grant</span> dba <span class="token keyword">to</span> scott<span class="token punctuation">;</span>
conn scott<span class="token operator">/</span>oracle
<span class="token keyword">create</span> <span class="token keyword">table</span> scott<span class="token punctuation">.</span>T1
<span class="token punctuation">(</span>
  name  VARCHAR2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  age   <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>
  sex   VARCHAR2<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  grade <span class="token keyword">INTEGER</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> scott<span class="token punctuation">.</span>t1 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'丽丽'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>


<span class="token comment">---DM数据库测试</span>
<span class="token comment">---重启数据库加载Oracle OCI驱动</span>
<span class="token punctuation">[</span>dmdba<span class="token variable">@localhost</span> <span class="token operator">~</span><span class="token punctuation">]</span>$ cd $DM_HOME<span class="token operator">/</span>bin
<span class="token punctuation">[</span>dmdba<span class="token variable">@localhost</span> bin<span class="token punctuation">]</span>$ <span class="token punctuation">.</span><span class="token operator">/</span>DmServiceDMSERVER restart
<span class="token punctuation">[</span>dmdba<span class="token variable">@localhost</span> bin<span class="token punctuation">]</span>$ <span class="token punctuation">.</span><span class="token operator">/</span>disql
disql V8
username:
password:

Server<span class="token punctuation">[</span>LOCALHOST:<span class="token number">5236</span><span class="token punctuation">]</span>:<span class="token keyword">mode</span> <span class="token operator">is</span> normal<span class="token punctuation">,</span> state <span class="token operator">is</span> <span class="token keyword">open</span>
login used <span class="token keyword">time</span> : <span class="token number">17.706</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
<span class="token comment">/***创建访问Oracle数据库的DBLINK***/</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> link <span class="token string">"LINKORA"</span> <span class="token keyword">connect</span> <span class="token string">'oracle'</span> <span class="token keyword">with</span> <span class="token string">"SCOTT"</span> identified <span class="token keyword">by</span> <span class="token string">"oracle"</span>  <span class="token keyword">using</span> <span class="token string">'192.168.15.10:1521/orcl'</span><span class="token punctuation">;</span>
executed successfully
used <span class="token keyword">time</span>: <span class="token number">224.920</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">53700.</span>

<span class="token comment">/***测试***/</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> v$version<span class="token variable">@linkora</span><span class="token punctuation">;</span>

LINEID     BANNER                                                                      
<span class="token comment">---------- ----------------------------------------------------------------------------</span>
<span class="token number">1</span>          Oracle <span class="token keyword">Database</span> <span class="token number">11</span>g Enterprise Edition <span class="token keyword">Release</span> <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> <span class="token number">64</span>bit Production
<span class="token number">2</span>          PL<span class="token operator">/</span><span class="token keyword">SQL</span> <span class="token keyword">Release</span> <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> Production
<span class="token number">3</span>          CORE <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> Production
<span class="token number">4</span>          TNS <span class="token keyword">for</span> Linux: Version <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> Production
<span class="token number">5</span>          NLSRTL Version <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> Production

used <span class="token keyword">time</span>: <span class="token number">38.224</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">54000.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t1<span class="token variable">@linkora</span><span class="token punctuation">;</span>

LINEID     NAME   AGE SEX GRADE
<span class="token comment">---------- ------ --- --- -----</span>
<span class="token number">1</span>          丽丽 <span class="token number">18</span>  女 <span class="token number">1000</span>

used <span class="token keyword">time</span>: <span class="token number">11.281</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">54004.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token variable">@linkora</span><span class="token punctuation">;</span>

LINEID     EMPNO ENAME  JOB       MGR  HIREDATE            SAL     COMM    DEPTNO
<span class="token comment">---------- ----- ------ --------- ---- ------------------- ------- ------- ------</span>
<span class="token number">1</span>          <span class="token number">7369</span>  SMITH  CLERK     <span class="token number">7902</span> <span class="token number">1980</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">800.00</span>  <span class="token boolean">NULL</span>    <span class="token number">20</span>
<span class="token number">2</span>          <span class="token number">7499</span>  ALLEN  SALESMAN  <span class="token number">7698</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">1600.00</span> <span class="token number">300.00</span>  <span class="token number">30</span>
<span class="token number">3</span>          <span class="token number">7521</span>  WARD   SALESMAN  <span class="token number">7698</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">1250.00</span> <span class="token number">500.00</span>  <span class="token number">30</span>
<span class="token number">4</span>          <span class="token number">7566</span>  JONES  MANAGER   <span class="token number">7839</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">2975.00</span> <span class="token boolean">NULL</span>    <span class="token number">20</span>
<span class="token number">5</span>          <span class="token number">7654</span>  MARTIN SALESMAN  <span class="token number">7698</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">1250.00</span> <span class="token number">1400.00</span> <span class="token number">30</span>
<span class="token number">6</span>          <span class="token number">7698</span>  BLAKE  MANAGER   <span class="token number">7839</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">2850.00</span> <span class="token boolean">NULL</span>    <span class="token number">30</span>
<span class="token number">7</span>          <span class="token number">7782</span>  CLARK  MANAGER   <span class="token number">7839</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">09</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">2450.00</span> <span class="token boolean">NULL</span>    <span class="token number">10</span>
<span class="token number">8</span>          <span class="token number">7839</span>  KING   PRESIDENT <span class="token boolean">NULL</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">5000.00</span> <span class="token boolean">NULL</span>    <span class="token number">10</span>
<span class="token number">9</span>          <span class="token number">7844</span>  TURNER SALESMAN  <span class="token number">7698</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">1500.00</span> <span class="token number">0</span>       <span class="token number">30</span>
<span class="token number">10</span>         <span class="token number">7900</span>  JAMES  CLERK     <span class="token number">7698</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">950.00</span>  <span class="token boolean">NULL</span>    <span class="token number">30</span>
<span class="token number">11</span>         <span class="token number">7902</span>  FORD   ANALYST   <span class="token number">7566</span> <span class="token number">1981</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">3000.00</span> <span class="token boolean">NULL</span>    <span class="token number">20</span>

LINEID     EMPNO ENAME  JOB   MGR  HIREDATE            SAL     COMM DEPTNO
<span class="token comment">---------- ----- ------ ----- ---- ------------------- ------- ---- ------</span>
<span class="token number">12</span>         <span class="token number">7934</span>  MILLER CLERK <span class="token number">7782</span> <span class="token number">1982</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">23</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token number">1300.00</span> <span class="token boolean">NULL</span> <span class="token number">10</span>

<span class="token number">12</span> <span class="token keyword">rows</span> got

used <span class="token keyword">time</span>: <span class="token number">7.949</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">54005.</span>
</code></pre> 
<h3><a id="ODBC_224"></a>六、通过ODBC数据源进行访问</h3> 
<p>使用ODBC方式访问Oracle需要Oracle ODBC驱动包，Oracle odbc驱动上面已解压。</p> 
<h4><a id="61_ODBC_228"></a>6.1 安装ODBC（如果未安装）</h4> 
<p>两种方式：源码编译和yum安装</p> 
<p>（1）源码编译安装（需要gcc环境）：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># tar -zxvf unixODBC-2.3.9.tar.gz</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd unixODBC-2.3.9</span>
<span class="token punctuation">[</span>root@localhost unixODBC-2.3.9<span class="token punctuation">]</span><span class="token comment"># ./configure --enable-gui=no</span>
<span class="token punctuation">[</span>root@localhost unixODBC-2.3.9<span class="token punctuation">]</span><span class="token comment"># make</span>
<span class="token punctuation">[</span>root@localhost unixODBC-2.3.9<span class="token punctuation">]</span><span class="token comment"># make install</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># odbcinst -j</span>
unixODBC <span class="token number">2.3</span>.9
DRIVERS<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>: /usr/local/etc/odbcinst.ini
SYSTEM DATA SOURCES: /usr/local/etc/odbc.ini
FILE DATA SOURCES<span class="token punctuation">..</span>: /usr/local/etc/ODBCDataSources
<span class="token environment constant">USER</span> DATA SOURCES<span class="token punctuation">..</span>: /root/.odbc.ini
SQLULEN Size<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.: <span class="token number">8</span>
SQLLEN Size<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>: <span class="token number">8</span>
SQLSETPOSIROW Size.: <span class="token number">8</span>
</code></pre> 
<p>源码编译安装完成之后，还需要检查oracle odbc的依赖是否正常。</p> 
<p>有的时候，将操作系统yum安装的unixODBC卸载之后，可能会导致Oracle的odbc动态库缺少依赖库。如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost instantclient_19_13<span class="token punctuation">]</span><span class="token comment"># ldd libsqora.so.19.1 </span>
	linux-vdso.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token punctuation">(</span>0x00007ffeef3cd000<span class="token punctuation">)</span>
	libdl.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libdl.so.2 <span class="token punctuation">(</span>0x00007ffafac45000<span class="token punctuation">)</span>
	libm.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libm.so.6 <span class="token punctuation">(</span>0x00007ffafa943000<span class="token punctuation">)</span>
	libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libpthread.so.0 <span class="token punctuation">(</span>0x00007ffafa727000<span class="token punctuation">)</span>
	libnsl.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libnsl.so.1 <span class="token punctuation">(</span>0x00007ffafa50d000<span class="token punctuation">)</span>
	librt.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/librt.so.1 <span class="token punctuation">(</span>0x00007ffafa305000<span class="token punctuation">)</span>
	libaio.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libaio.so.1 <span class="token punctuation">(</span>0x00007ffafa103000<span class="token punctuation">)</span>
	libresolv.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libresolv.so.2 <span class="token punctuation">(</span>0x00007ffaf9ee9000<span class="token punctuation">)</span>
	libclntsh.so.19.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /opt/oracle/instantclient_19_13/libclntsh.so.19.1 <span class="token punctuation">(</span>0x00007ffaf5d76000<span class="token punctuation">)</span>
	libclntshcore.so.19.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /opt/oracle/instantclient_19_13/libclntshcore.so.19.1 <span class="token punctuation">(</span>0x00007ffaf57d2000<span class="token punctuation">)</span>
	libodbcinst.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> not found        <span class="token comment">###这里缺少依赖</span>
	libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libc.so.6 <span class="token punctuation">(</span>0x00007ffaf5404000<span class="token punctuation">)</span>
	/lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007ffafb103000<span class="token punctuation">)</span>
	libnnz19.so <span class="token operator">=</span><span class="token operator">&gt;</span> /opt/oracle/instantclient_19_13/libnnz19.so <span class="token punctuation">(</span>0x00007ffaf4d92000<span class="token punctuation">)</span>
</code></pre> 
<p>所以在源码编译安装完成之后，需要将/usr/local/lib或者使用find命令查找系统上相关的库文件将对应路径目录加入到LD_LIBRARY_PATH系统环境变量，或者添加到 /etc/ld.so.conf.d目录下指定的配置文件中，如下：</p> 
<pre><code>[root@localhost ~]# echo /usr/local/lib &gt; /etc/ld.so.conf.d/libodbc.conf
[root@localhost ~]# ldconfig
</code></pre> 
<p>（2）yum安装，配置好yum源之后直接安装即可</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># yum install -y unixODBC unixODBC-devel</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># odbcinst -j</span>
unixODBC <span class="token number">2.3</span>.1
DRIVERS<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>: /etc/odbcinst.ini
SYSTEM DATA SOURCES: /etc/odbc.ini
FILE DATA SOURCES<span class="token punctuation">..</span>: /etc/ODBCDataSources
<span class="token environment constant">USER</span> DATA SOURCES<span class="token punctuation">..</span>: /root/.odbc.ini
SQLULEN Size<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.: <span class="token number">8</span>
SQLLEN Size<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>: <span class="token number">8</span>
SQLSETPOSIROW Size.: <span class="token number">8</span>
</code></pre> 
<h4><a id="62_ODBC_295"></a>6.2 配置ODBC数据源</h4> 
<p>1、配置tnsnames.ora，并配置TNS_ADMIN系统环境变量</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /opt/oracle/instantclient_19_13/network/admin/tnsnames.ora</span>
DB10 <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
    <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> <span class="token number">192.168</span>.15.10<span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
    <span class="token punctuation">(</span>CONNECT_DATA <span class="token operator">=</span>
      <span class="token punctuation">(</span>SERVER <span class="token operator">=</span> DEDICATED<span class="token punctuation">)</span>
      <span class="token punctuation">(</span>SERVICE_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

<span class="token comment">###配置TNS_ADMIN系统环境变量</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/profile    ---添加下面export</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">TNS_ADMIN</span><span class="token operator">=</span>/opt/oracle/instantclient_19_13/network/admin

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># source /etc/profile</span>
</code></pre> 
<p>2、配置odbcinst.ini</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>Oracle ODBC1913<span class="token punctuation">]</span>
Description     <span class="token operator">=</span> Oracle ODBC Driver
Driver          <span class="token operator">=</span> /opt/oracle/instantclient_19_13/libsqora.so.19.1
Setup           <span class="token operator">=</span>
FileUsage       <span class="token operator">=</span>
CPTimeout       <span class="token operator">=</span>
CPReuse         <span class="token operator">=</span> 

</code></pre> 
<p>3、配置odbc.ini</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>ORA11<span class="token punctuation">]</span>                ---主要配置项
DSN <span class="token operator">=</span> ORA11            ---主要配置项
Driver <span class="token operator">=</span> Oracle ODBC1913   ---主要配置项（odbcinst.ini中的驱动配置名称）
ServerName <span class="token operator">=</span> DB10    ---主要配置项  （tnsnames.ora网络服务名）
UserID <span class="token operator">=</span> 
AggregateSQLType <span class="token operator">=</span> FLOAT
Application Attributes <span class="token operator">=</span> T
Attributes <span class="token operator">=</span> W
BatchAutocommitMode <span class="token operator">=</span> IfAllSuccessful
BindAsFLOAT <span class="token operator">=</span> F
CacheBufferSize <span class="token operator">=</span> <span class="token number">20</span>
CloseCursor <span class="token operator">=</span> F
DisableDPM <span class="token operator">=</span> F
DisableMTS <span class="token operator">=</span> T
DisableRULEHint <span class="token operator">=</span> T
EXECSchemaOpt <span class="token operator">=</span>
EXECSyntax <span class="token operator">=</span> T
Failover <span class="token operator">=</span> T
FailoverDelay <span class="token operator">=</span> <span class="token number">10</span>
FailoverRetryCount <span class="token operator">=</span> <span class="token number">10</span>
FetchBufferSize <span class="token operator">=</span> <span class="token number">64000</span>
ForceWCHAR <span class="token operator">=</span> F
LobPrefetchSize <span class="token operator">=</span> <span class="token number">8192</span>
Lobs <span class="token operator">=</span> T
Longs <span class="token operator">=</span> T
MaxLargeData <span class="token operator">=</span> <span class="token number">0</span>
MaxTokenSize <span class="token operator">=</span> <span class="token number">8192</span>
MetadataIdDefault <span class="token operator">=</span> F
QueryTimeout <span class="token operator">=</span> T
ResultSets <span class="token operator">=</span> T
SQLGetData extensions <span class="token operator">=</span> F
SQLTranslateErrors <span class="token operator">=</span> F
StatementCache <span class="token operator">=</span> F
Translation DLL <span class="token operator">=</span>
Translation Option <span class="token operator">=</span> <span class="token number">0</span>
UseOCIDescribeAny <span class="token operator">=</span> F
</code></pre> 
<p>4、测试ODBC访问Oracle数据库</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>dmdba@localhost ~<span class="token punctuation">]</span>$ isql -v ORA11 scott oracle
+---------------------------------------+
<span class="token operator">|</span> Connected<span class="token operator">!</span>                            <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span>
<span class="token operator">|</span> sql-statement                         <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token builtin class-name">help</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span>                      <span class="token operator">|</span>
<span class="token operator">|</span> quit                                  <span class="token operator">|</span>
<span class="token operator">|</span>                                       <span class="token operator">|</span>
+---------------------------------------+
SQL<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from emp<span class="token punctuation">;</span>
+-------+-----------+----------+-------+--------------------+----------+----------+-------+
<span class="token operator">|</span> EMPNO <span class="token operator">|</span> ENAME     <span class="token operator">|</span> <span class="token environment constant">JOB</span>      <span class="token operator">|</span> MGR   <span class="token operator">|</span> HIREDATE           <span class="token operator">|</span> SAL      <span class="token operator">|</span> COMM     <span class="token operator">|</span> DEPTNO<span class="token operator">|</span>
+-------+-----------+----------+-------+--------------------+----------+----------+-------+
<span class="token operator">|</span> <span class="token number">7369</span>  <span class="token operator">|</span> SMITH     <span class="token operator">|</span> CLERK    <span class="token operator">|</span> <span class="token number">7902</span>  <span class="token operator">|</span> <span class="token number">1980</span>-12-17 00:00:00<span class="token operator">|</span> <span class="token number">800</span>      <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">20</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7499</span>  <span class="token operator">|</span> ALLEN     <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> <span class="token number">1981</span>-02-20 00:00:00<span class="token operator">|</span> <span class="token number">1600</span>     <span class="token operator">|</span> <span class="token number">300</span>      <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7521</span>  <span class="token operator">|</span> WARD      <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> <span class="token number">1981</span>-02-22 00:00:00<span class="token operator">|</span> <span class="token number">1250</span>     <span class="token operator">|</span> <span class="token number">500</span>      <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7566</span>  <span class="token operator">|</span> JONES     <span class="token operator">|</span> MANAGER  <span class="token operator">|</span> <span class="token number">7839</span>  <span class="token operator">|</span> <span class="token number">1981</span>-04-02 00:00:00<span class="token operator">|</span> <span class="token number">2975</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">20</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7654</span>  <span class="token operator">|</span> MARTIN    <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> <span class="token number">1981</span>-09-28 00:00:00<span class="token operator">|</span> <span class="token number">1250</span>     <span class="token operator">|</span> <span class="token number">1400</span>     <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> BLAKE     <span class="token operator">|</span> MANAGER  <span class="token operator">|</span> <span class="token number">7839</span>  <span class="token operator">|</span> <span class="token number">1981</span>-05-01 00:00:00<span class="token operator">|</span> <span class="token number">2850</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7782</span>  <span class="token operator">|</span> CLARK     <span class="token operator">|</span> MANAGER  <span class="token operator">|</span> <span class="token number">7839</span>  <span class="token operator">|</span> <span class="token number">1981</span>-06-09 00:00:00<span class="token operator">|</span> <span class="token number">2450</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">10</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7839</span>  <span class="token operator">|</span> KING      <span class="token operator">|</span> PRESIDENT<span class="token operator">|</span>       <span class="token operator">|</span> <span class="token number">1981</span>-11-17 00:00:00<span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">10</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7844</span>  <span class="token operator">|</span> TURNER    <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> <span class="token number">1981</span>-09-08 00:00:00<span class="token operator">|</span> <span class="token number">1500</span>     <span class="token operator">|</span> <span class="token number">0</span>        <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7900</span>  <span class="token operator">|</span> JAMES     <span class="token operator">|</span> CLERK    <span class="token operator">|</span> <span class="token number">7698</span>  <span class="token operator">|</span> <span class="token number">1981</span>-12-03 00:00:00<span class="token operator">|</span> <span class="token number">950</span>      <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">30</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7902</span>  <span class="token operator">|</span> FORD      <span class="token operator">|</span> ANALYST  <span class="token operator">|</span> <span class="token number">7566</span>  <span class="token operator">|</span> <span class="token number">1981</span>-12-03 00:00:00<span class="token operator">|</span> <span class="token number">3000</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">20</span>    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7934</span>  <span class="token operator">|</span> MILLER    <span class="token operator">|</span> CLERK    <span class="token operator">|</span> <span class="token number">7782</span>  <span class="token operator">|</span> <span class="token number">1982</span>-01-23 00:00:00<span class="token operator">|</span> <span class="token number">1300</span>     <span class="token operator">|</span>          <span class="token operator">|</span> <span class="token number">10</span>    <span class="token operator">|</span>
+-------+-----------+----------+-------+--------------------+----------+----------+-------+
SQLRowCount returns -1
<span class="token number">12</span> rows fetched
SQL<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from t1<span class="token punctuation">;</span>
+---------------------+-----------------------------------------+----+-----------------------------------------+
<span class="token operator">|</span> NAME                <span class="token operator">|</span> AGE                                     <span class="token operator">|</span> SEX<span class="token operator">|</span> GRADE                                   <span class="token operator">|</span>
+---------------------+-----------------------------------------+----+-----------------------------------------+
<span class="token operator">|</span> ??                  <span class="token operator">|</span> <span class="token number">18</span>                                      <span class="token operator">|</span> ?  <span class="token operator">|</span> <span class="token number">1000</span>                                    <span class="token operator">|</span>
+---------------------+-----------------------------------------+----+-----------------------------------------+
SQLRowCount returns -1
<span class="token number">1</span> rows fetched
SQL<span class="token operator">&gt;</span> 

<span class="token comment">###可以看到上面中文会显示乱码，主要与客户端字符集环境有关</span>
</code></pre> 
<h4><a id="63_ODBCDBLINKOracle_415"></a>6.3 使用ODBC数据源创建DBLINK访问Oracle</h4> 
<p>DBLINK创建语法：</p> 
<pre><code>create link "LINKODBC1" connect 'ODBC' with "SCOTT" identified by "oracle" using 'ORA11';
</code></pre> 
<p>测试：</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>dmdba<span class="token variable">@localhost</span> <span class="token operator">~</span><span class="token punctuation">]</span>$ cd $DM_HOME<span class="token operator">/</span>bin
<span class="token punctuation">[</span>dmdba<span class="token variable">@localhost</span> bin<span class="token punctuation">]</span>$ <span class="token punctuation">.</span><span class="token operator">/</span>disql
disql V8
username:
password:

Server<span class="token punctuation">[</span>LOCALHOST:<span class="token number">5236</span><span class="token punctuation">]</span>:<span class="token keyword">mode</span> <span class="token operator">is</span> normal<span class="token punctuation">,</span> state <span class="token operator">is</span> <span class="token keyword">open</span>
login used <span class="token keyword">time</span> : <span class="token number">3.101</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>

<span class="token comment">/***创建DBLINK***/</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> link <span class="token string">"LINKODBC1"</span> <span class="token keyword">connect</span> <span class="token string">'ODBC'</span> <span class="token keyword">with</span> <span class="token string">"SCOTT"</span> identified <span class="token keyword">by</span> <span class="token string">"oracle"</span> <span class="token keyword">using</span> <span class="token string">'ORA11'</span><span class="token punctuation">;</span>
executed successfully
used <span class="token keyword">time</span>: <span class="token number">7.763</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">800.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1<span class="token variable">@linkodbc1</span><span class="token punctuation">;</span>

LINEID     NAME AGE SEX GRADE
<span class="token comment">---------- ---- --- --- -----</span>
<span class="token number">1</span>          ??   <span class="token number">18</span>  ?   <span class="token number">1000</span>

used <span class="token keyword">time</span>: <span class="token number">678.249</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token keyword">Execute</span> id <span class="token operator">is</span> <span class="token number">801.</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> 
<span class="token comment">---上面中文问号是由于数据库启动时未加载NLS_LANG环境变量导致，需要在配置NLS_LANG环境变量并生效后重启数据库后可以正常显示</span>
</code></pre> 
<h3><a id="_451"></a>七、总结</h3> 
<p>DM DBLINK使用Oracle OCI方式和ODBC数据源的方式创建访问Oracle数据库，通过简单的测试对比发现，使用Oracle OCI方式兼容性等都要更好。</p> 
<p>使用Oracle OCI方式，如果数据库启动时未加载Oracle OCI驱动，需要重启数据库加载Oracle OCI驱动后，才能正常使用DBLINK。</p> 
<p>使用ODBC数据源方式，如果目的表数据有中文，那么需要在DM数据库服务器上配置正确的NLS_LANG环境变量并生效后在当前窗口重启DM数据库。</p> 
<p>通过测试对比，建议使用Oracle OCI方式来创建DM DBLINK访问Oracle数据库。</p> 
<p>更多资讯请上达梦技术社区了解：https://eco.dameng.com</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db552110b5075c80277c8cda5ed9b337/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">R语言基础数据类型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/42726aab056ece6efa4929ba624b676c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深度学习之物体检测算法yolov3</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>