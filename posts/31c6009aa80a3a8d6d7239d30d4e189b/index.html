<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos更改磁盘格式ext4--＞xfs - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos更改磁盘格式ext4--＞xfs" />
<meta property="og:description" content="lsblk ##查看磁盘信息
lsblk -f ##查看磁盘信息
此处以sdb为例
更改sdb1的格式为xfs
[root@ljd ~]# mkfs.xfs -f -n ftype=1 /dev/sdb1
结果如下
此时已经更改成功 可以挂载磁盘了
设置自动挂载
vim /etc/fstab
添加如下内容
/dev/sdb1 /tmp xfs defaults 0 0 保存退出后
执行mount -a生效
再次查看如下
其他操作
1.查看磁盘
fdisk -l
2.查看挂载
df -h
3.卸掉挂载
umount /dev/sd&lt;盘符&gt; // 注意在卸载前检查目录是否存在价值文件，再卸载
4.先注释掉/etc/fstab中卸载掉的信息
// 例： #/dev/sdb03 /data ext4 defaults 0 1 预防分区后自动挂载。
5.删掉磁盘分区
parted -s /dev/sd&lt;盘符&gt; rm 3 // 3,4 代表第几个分区,这里注意不要删除/根分区或BIOS分区， 一块磁盘情况下1，2一般有根/分区，
parted -s /dev/sd&lt;盘符&gt; rm 4
6.磁盘分区 按照实际情况进行分区 // !" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/31c6009aa80a3a8d6d7239d30d4e189b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-25T20:48:36+08:00" />
<meta property="article:modified_time" content="2023-07-25T20:48:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos更改磁盘格式ext4--＞xfs</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>lsblk ##查看磁盘信息<br> lsblk -f ##查看磁盘信息<br> <img src="https://images2.imgbox.com/f6/37/Lj6MVIKK_o.png" alt="在这里插入图片描述"><br> 此处以sdb为例<br> <img src="https://images2.imgbox.com/97/c7/w0X36Nb5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/a1/7l1Nr1U4_o.png" alt="在这里插入图片描述"><br> 更改sdb1的格式为xfs<br> [root@ljd ~]# mkfs.xfs -f -n ftype=1 /dev/sdb1<br> 结果如下<br> <img src="https://images2.imgbox.com/5a/cd/c1ArU7or_o.png" alt="在这里插入图片描述"><br> 此时已经更改成功 可以挂载磁盘了<br> 设置自动挂载<br> vim /etc/fstab<br> 添加如下内容</p> 
<pre><code class="prism language-bash">/dev/sdb1 /tmp xfs     defaults        <span class="token number">0</span> <span class="token number">0</span>
</code></pre> 
<p>保存退出后<br> 执行mount -a生效<br> 再次查看如下<br> <img src="https://images2.imgbox.com/64/48/TC4DCMWm_o.png" alt="在这里插入图片描述"></p> 
<p>其他操作<br> 1.查看磁盘<br> fdisk -l<br> 2.查看挂载<br> df -h<br> 3.卸掉挂载<br> umount /dev/sd&lt;盘符&gt; // 注意在卸载前检查目录是否存在价值文件，再卸载</p> 
<p>4.先注释掉/etc/fstab中卸载掉的信息<br> // 例： #/dev/sdb03 /data ext4 defaults 0 1 预防分区后自动挂载。</p> 
<p>5.删掉磁盘分区<br> parted -s /dev/sd&lt;盘符&gt; rm 3 // 3,4 代表第几个分区,这里注意不要删除/根分区或BIOS分区， 一块磁盘情况下1，2一般有根/分区，<br> parted -s /dev/sd&lt;盘符&gt; rm 4</p> 
<p>6.磁盘分区 按照实际情况进行分区 // !!超过1T以上的大磁盘不要用fdisk进行分区<br> parted -s /dev/sd&lt;盘符&gt; mkpart primary 100g 300g // -s指定磁盘 创建一个主分区 从100g开始到300g结束<br> parted -s /dev/sd&lt;盘符&gt; mkpart primary 300g 1000g // 预留的盘也要分出来</p> 
<p>7.格式化磁盘<br> mkfs.xfs -f -n ftype=1 /dev/s&lt;盘符&gt; // 单独格式化一块xfs格式磁盘，挂/docker-data下存放docker数据<br> mkfs.ext4 -F /dev/sd&lt;盘符&gt; // 其他的都格式化成ext4</p> 
<p>8.修改/etc/fstab加入以下<br> /dev/s&lt;盘符&gt; /mnt ext4 defaults 0 1 // 作用于日志存储<br> /dev/s&lt;盘符&gt; /data ext4 defaults 0 1 // 作用于工作目录<br> /dev/s&lt;盘符&gt; /docker-data xfs defaults,prjquota 0 1 // 作用于docker-data，必须是xfs,有prjquota<br> /dev/s&lt;盘符&gt; /glusterfs-registry ext4 defaults 0 1 // 作用于公共镜像仓库<br> /dev/s&lt;盘符&gt; /glusterfs-sys-data ext4 defaults 0 1 // 作用于系统依赖存储<br> /dev/s&lt;盘符&gt; /glusterfs-user-data ext4 defaults 0 1 // 作用于DB平台用户存储</p> 
<p>9.创建目录并挂载<br> mkdir -p /data /docker-data /glusterfs-registry /glusterfs-sys-data /glusterfs-user-data &amp;&amp; mount -a</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cddc7ae7d76622128df674755a2dca71/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI绘画核心技术你值得拥有</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e2ff7398be31ee1738c80dec0d55474e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OpenCV DNN模块推理YOLOv5 ONNX模型方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>