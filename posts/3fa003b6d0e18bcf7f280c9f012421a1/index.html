<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[零基础]用docker搭建Hadoop集群 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[零基础]用docker搭建Hadoop集群" />
<meta property="og:description" content="目录
前言：为什么要用docker搭建Hadoop集群？
准备：下载VMware、VMwareTools（或Xftp、Xshell）、Ubuntu或者CentOS映像文件、Hadoop和jdk压缩包
一、创建虚拟机
（1）点击新建虚拟机
（2）下一步
（3）下一步
（4）选择映像文件
（5）自定义信息
（6）自定义信息，位置最好放在非C盘
（7）设置处理器内核总数
（8） 后面五步都选下一步即可。
（9）设置磁盘大小
（10）点击下一步，再点击完成
（11）自动加载默认配置
二、安装docker并生成相关的镜像
（1）安装docker
（2）拉取CentOS镜像（Ubuntu镜像也行）
（3）通过build Dockfile生成带ssh功能的centos镜像
1、MAINTAINER hadoop
2、root:a123456
（4）将下载的文件上传虚拟机
1、在主机下载ssh，在终端输入：
2、 查看ip地址，在终端输入：
3、用Xshell和Xftp连接虚拟机主机
4、解压文件（把目录和文件名改成你自己的）
（5）生成带有ssh、hadoop和jdk环境的CentOS镜像
三、创建网桥，并启动docker容器
（1）创建网桥，在终端输入：
（2）查看网桥，在终端输入：
（3）启动三个容器并指定网桥
四、登录容器，配置ip地址映射和ssh免密登录
(1)登录容器（Hadoop服务器）
（2）在每个hadoop服务器中配置ip地址映射
(3)在每台hadoop服务器中配置ssh免密登录
（4）测试是否成功配置ssh免密登录，ssh &#43; hadoop服务器名：
五、修改Hadoop配置文件
（1）创建文件夹，配置时要用
（2）编辑hadoop_env.sh，修改下面三个参数，按照你自己的改
（3）编辑core-site.xml
(4)编辑mapred-site.xml
（5）编辑hdfs-site.xml
（6）编辑yarn-site.xml
（7）编辑workers,把原先的默认值localhost删除
（8）配置环境变量，在终端输入：
（9）把文件拷贝到hadoop2和hadoop3上
（10）给文件赋权
六、启动Hadoop集群
（1）在hadoop1上执行以下命令：
1、格式化hdfs
2、一键启动Hadoop集群
（2）测试Hadoop集群
（3）磁盘空间占用
前言：为什么要用docker搭建Hadoop集群？ 1、磁盘空间的占用
docker搭建的集群占用电脑磁盘空间较小，对电脑的硬件要求也不高，搭建一个Hadoop集群（一主两从）只需要17GB左右的磁盘空间，而常规的开启多台虚拟机搭建的方法，可能搭建一台Hadoop服务器就需要将近20GB的磁盘空间。
2、稳定性
docker搭建的Hadoop集群不容易宕机，用常规的方法搭建的话，可能会有一台或者多台虚拟机宕机，稳定性较差。
准备：下载VMware、VMwareTools（或Xftp、Xshell）、Ubuntu或者CentOS映像文件、Hadoop和jdk压缩包 给大家准备了Ubuntu映像文件、Hadoop和jdk压缩包，点击链接下载即可。没有Xftp和Xshell的同学可以用VMwareTools替代，只要把压缩包添加到虚拟机主机上即可。
链接：Ubuntu、jdk、Hadoop 提取码：2v56
一、创建虚拟机 用VMware创建一台新的虚拟机(CentOS或Ubuntu都可以）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3fa003b6d0e18bcf7f280c9f012421a1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-10T01:34:35+08:00" />
<meta property="article:modified_time" content="2022-12-10T01:34:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[零基础]用docker搭建Hadoop集群</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8docker%E6%90%AD%E5%BB%BA-toc" style="margin-left:80px;"><a href="#%E5%89%8D%E8%A8%80%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8docker%E6%90%AD%E5%BB%BA" rel="nofollow">前言：为什么要用docker搭建Hadoop集群？</a></p> 
<p id="%E5%87%86%E5%A4%87%EF%BC%9A%E4%B8%8B%E8%BD%BDVMware%E3%80%81Ubuntu%E6%88%96%E8%80%85CentOS%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E3%80%81Hadoop%E5%92%8Cjdk%E5%8E%8B%E7%BC%A9%E5%8C%85-toc" style="margin-left:80px;"><a href="#%E5%87%86%E5%A4%87%EF%BC%9A%E4%B8%8B%E8%BD%BDVMware%E3%80%81Ubuntu%E6%88%96%E8%80%85CentOS%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E3%80%81Hadoop%E5%92%8Cjdk%E5%8E%8B%E7%BC%A9%E5%8C%85" rel="nofollow">准备：下载VMware、VMwareTools（或Xftp、Xshell）、Ubuntu或者CentOS映像文件、Hadoop和jdk压缩包</a></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA" rel="nofollow">一、创建虚拟机</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a)%E7%82%B9%E5%87%BB%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a%29%E7%82%B9%E5%87%BB%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA" rel="nofollow">        （1）点击新建虚拟机</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b)%E4%B8%8B%E4%B8%80%E6%AD%A5-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b%29%E4%B8%8B%E4%B8%80%E6%AD%A5" rel="nofollow">       （2）下一步</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0c)%E4%B8%8B%E4%B8%80%E6%AD%A5-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0c%29%E4%B8%8B%E4%B8%80%E6%AD%A5" rel="nofollow">        （3）下一步</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0d)%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%EF%BC%88CentOS%E6%88%96%E8%80%85Ubuntu%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%89%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%AC%ACk%E6%AD%A5%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8F%AF%E8%83%BD%E8%A6%81%E5%8A%A0%E8%BD%BD20%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%EF%BC%8C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%E5%8F%AF%E4%BB%A5%E5%BF%AB%E4%B8%80%E7%82%B9%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0d%29%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%EF%BC%88CentOS%E6%88%96%E8%80%85Ubuntu%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%89%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%AC%ACk%E6%AD%A5%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8F%AF%E8%83%BD%E8%A6%81%E5%8A%A0%E8%BD%BD20%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%EF%BC%8C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%E5%8F%AF%E4%BB%A5%E5%BF%AB%E4%B8%80%E7%82%B9%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82" rel="nofollow">         （4）选择映像文件</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0e)%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0e%29%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF" rel="nofollow">        （5）自定义信息</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0f)%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%BD%8D%E7%BD%AE%E6%9C%80%E5%A5%BD%E6%94%BE%E5%9C%A8%E9%9D%9EC%E7%9B%98-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0f%29%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%BD%8D%E7%BD%AE%E6%9C%80%E5%A5%BD%E6%94%BE%E5%9C%A8%E9%9D%9EC%E7%9B%98" rel="nofollow">         （6）自定义信息，位置最好放在非C盘</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0g%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%20x%20%E6%AF%8F%E4%B8%AA%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E6%95%B0%E9%87%8F%20%3D%20%E5%A4%84%E7%90%86%E5%99%A8%E5%86%85%E6%A0%B8%E6%80%BB%E6%95%B0%EF%BC%8C%E4%BE%9D%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%AE%9A%EF%BC%8C%E5%9C%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%EF%BC%8C%E6%88%91%E7%9A%84%E6%98%AF8%E4%B8%AA%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8D%A1%E9%A1%BF%E3%80%82-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0g%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%20x%20%E6%AF%8F%E4%B8%AA%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E6%95%B0%E9%87%8F%20%3D%20%E5%A4%84%E7%90%86%E5%99%A8%E5%86%85%E6%A0%B8%E6%80%BB%E6%95%B0%EF%BC%8C%E4%BE%9D%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%AE%9A%EF%BC%8C%E5%9C%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%EF%BC%8C%E6%88%91%E7%9A%84%E6%98%AF8%E4%B8%AA%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8D%A1%E9%A1%BF%E3%80%82" rel="nofollow">        （7）设置处理器内核总数</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0h)%20%E5%90%8E%E9%9D%A2%E4%BA%94%E6%AD%A5%E9%83%BD%E9%80%89%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%E3%80%82-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0h%29%20%E5%90%8E%E9%9D%A2%E4%BA%94%E6%AD%A5%E9%83%BD%E9%80%89%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%E3%80%82" rel="nofollow">        （8） 后面五步都选下一步即可。</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0i)%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AA%E6%90%AD%E5%BB%BAHadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E8%AF%9D20GB%E5%B0%B1%E8%B6%B3%E5%A4%9F%E4%BA%86%EF%BC%8C%E4%BD%86%E5%90%8E%E9%9D%A2%E8%BF%98%E9%9C%80%E8%A6%81%E6%90%AD%E5%BB%BA%E5%85%B6%E4%BB%96%E9%9B%86%E7%BE%A4%E6%89%80%E4%BB%A5%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E9%9C%80%E6%B1%82%E8%AE%BE%E5%AE%9A%E3%80%82%E5%B0%86%E8%99%9A%E6%8B%9F%E7%A3%81%E7%9B%98%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0i%29%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AA%E6%90%AD%E5%BB%BAHadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E8%AF%9D20GB%E5%B0%B1%E8%B6%B3%E5%A4%9F%E4%BA%86%EF%BC%8C%E4%BD%86%E5%90%8E%E9%9D%A2%E8%BF%98%E9%9C%80%E8%A6%81%E6%90%AD%E5%BB%BA%E5%85%B6%E4%BB%96%E9%9B%86%E7%BE%A4%E6%89%80%E4%BB%A5%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E9%9C%80%E6%B1%82%E8%AE%BE%E5%AE%9A%E3%80%82%E5%B0%86%E8%99%9A%E6%8B%9F%E7%A3%81%E7%9B%98%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82" rel="nofollow">         （9）设置磁盘大小</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0j)%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%8C%E5%86%8D%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0j%29%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%8C%E5%86%8D%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90" rel="nofollow">         （10）点击下一步，再点击完成</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0k)%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E4%BA%8C%E5%8D%81%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%AC%ACd%E6%AD%A5%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E9%82%A3%E9%87%8C%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82%E6%88%90%E5%8A%9F%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%A1%B5%E9%9D%A2%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0k%29%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E4%BA%8C%E5%8D%81%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%AC%ACd%E6%AD%A5%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E9%82%A3%E9%87%8C%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82%E6%88%90%E5%8A%9F%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%A1%B5%E9%9D%A2%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A" rel="nofollow">         （11）自动加载默认配置</a></p> 
<p id="%C2%A0%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85docker%E5%B9%B6%E7%94%9F%E6%88%90%E7%9B%B8%E5%85%B3%E7%9A%84%E9%95%9C%E5%83%8F-toc" style="margin-left:40px;"><a href="#%C2%A0%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85docker%E5%B9%B6%E7%94%9F%E6%88%90%E7%9B%B8%E5%85%B3%E7%9A%84%E9%95%9C%E5%83%8F" rel="nofollow">二、安装docker并生成相关的镜像</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a%EF%BC%89%E5%AE%89%E8%A3%85docker-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a%EF%BC%89%E5%AE%89%E8%A3%85docker" rel="nofollow">        （1）安装docker</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b)%E6%8B%89%E5%8F%96CentOS%E9%95%9C%E5%83%8F%EF%BC%88Ubuntu%E9%95%9C%E5%83%8F%E4%B9%9F%E8%A1%8C%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b%29%E6%8B%89%E5%8F%96CentOS%E9%95%9C%E5%83%8F%EF%BC%88Ubuntu%E9%95%9C%E5%83%8F%E4%B9%9F%E8%A1%8C%EF%BC%89" rel="nofollow">        （2）拉取CentOS镜像（Ubuntu镜像也行）</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87build%20Dockfile%E7%94%9F%E6%88%90%E5%B8%A6ssh%E5%8A%9F%E8%83%BD%E7%9A%84centos%E9%95%9C%E5%83%8F%EF%BC%8C%E5%85%88%E5%88%9B%E5%BB%BADockfile%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87build%20Dockfile%E7%94%9F%E6%88%90%E5%B8%A6ssh%E5%8A%9F%E8%83%BD%E7%9A%84centos%E9%95%9C%E5%83%8F%EF%BC%8C%E5%85%88%E5%88%9B%E5%BB%BADockfile%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">         （3）通过build Dockfile生成带ssh功能的centos镜像</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81MAINTAINER%20hadoop-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81MAINTAINER%20hadoop" rel="nofollow">        1、MAINTAINER hadoop</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81root%3Aa123456-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81root%3Aa123456" rel="nofollow">        2、root:a123456</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%884%EF%BC%89%E5%B0%86%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%99%9A%E6%8B%9F%E6%9C%BA-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%884%EF%BC%89%E5%B0%86%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%99%9A%E6%8B%9F%E6%9C%BA" rel="nofollow">         （4）将下载的文件上传虚拟机</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01%E3%80%81%E5%9C%A8%E4%B8%BB%E6%9C%BA%E4%B8%8B%E8%BD%BDssh%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01%E3%80%81%E5%9C%A8%E4%B8%BB%E6%9C%BA%E4%B8%8B%E8%BD%BDssh%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">         1、在主机下载ssh，在终端输入：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%20%E6%9F%A5%E7%9C%8Bip%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%20%E6%9F%A5%E7%9C%8Bip%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">       2、 查看ip地址，在终端输入：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E7%94%A8Xshell%E5%92%8CXftp%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%BB%E6%9C%BA-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E7%94%A8Xshell%E5%92%8CXftp%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%BB%E6%9C%BA" rel="nofollow">        3、用Xshell和Xftp连接虚拟机主机</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%EF%BC%88%E6%8A%8A%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8D%E6%94%B9%E6%88%90%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%EF%BC%88%E6%8A%8A%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8D%E6%94%B9%E6%88%90%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%89" rel="nofollow">         4、解压文件（把目录和文件名改成你自己的）</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%885%EF%BC%89%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89ssh%E3%80%81hadoop%E5%92%8Cjdk%E7%8E%AF%E5%A2%83%E7%9A%84CentOS%E9%95%9C%E5%83%8F-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%885%EF%BC%89%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89ssh%E3%80%81hadoop%E5%92%8Cjdk%E7%8E%AF%E5%A2%83%E7%9A%84CentOS%E9%95%9C%E5%83%8F" rel="nofollow">        （5）生成带有ssh、hadoop和jdk环境的CentOS镜像</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%B9%B6%E5%90%AF%E5%8A%A8docker%E5%AE%B9%E5%99%A8-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%B9%B6%E5%90%AF%E5%8A%A8docker%E5%AE%B9%E5%99%A8" rel="nofollow">三、创建网桥，并启动docker容器</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">        （1）创建网桥，在终端输入：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">        （2）查看网桥，在终端输入：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%E4%B8%89%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%B9%B6%E6%8C%87%E5%AE%9A%E7%BD%91%E6%A1%A5-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%E4%B8%89%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%B9%B6%E6%8C%87%E5%AE%9A%E7%BD%91%E6%A1%A5" rel="nofollow">        （3）启动三个容器并指定网桥</a></p> 
<p id="%E5%9B%9B%E3%80%81%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%8C%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%92%8Cssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%8C%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%92%8Cssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95" rel="nofollow">四、登录容器，配置ip地址映射和ssh免密登录</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20(1)%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%88Hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%281%29%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%88Hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89" rel="nofollow">        (1)登录容器（Hadoop服务器）</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E5%9C%A8%E6%AF%8F%E4%B8%AAhadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E5%9C%A8%E6%AF%8F%E4%B8%AAhadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84" rel="nofollow">        （2）在每个hadoop服务器中配置ip地址映射</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0(3)%E5%9C%A8%E6%AF%8F%E5%8F%B0hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%283%29%E5%9C%A8%E6%AF%8F%E5%8F%B0hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95" rel="nofollow">         (3)在每台hadoop服务器中配置ssh免密登录</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%884%EF%BC%89%E6%B5%8B%E8%AF%95%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%EF%BC%8Cssh%20%2B%20hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%884%EF%BC%89%E6%B5%8B%E8%AF%95%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%EF%BC%8Cssh%20%2B%20hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%EF%BC%9A" rel="nofollow">        （4）测试是否成功配置ssh免密登录，ssh + hadoop服务器名：</a></p> 
<p id="%E4%BA%94%E3%80%81%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">五、修改Hadoop配置文件</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%97%B6%E8%A6%81%E7%94%A8-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%97%B6%E8%A6%81%E7%94%A8" rel="nofollow">        （1）创建文件夹，配置时要用</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E7%BC%96%E8%BE%91hadoop_env.sh%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%8B%E9%9D%A2%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E6%8C%89%E7%85%A7%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%94%B9-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E7%BC%96%E8%BE%91hadoop_env.sh%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%8B%E9%9D%A2%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E6%8C%89%E7%85%A7%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%94%B9" rel="nofollow">        （2）编辑hadoop_env.sh，修改下面三个参数，按照你自己的改</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%883%EF%BC%89%E7%BC%96%E8%BE%91core-site.xml-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%883%EF%BC%89%E7%BC%96%E8%BE%91core-site.xml" rel="nofollow">         （3）编辑core-site.xml</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0(4)%E7%BC%96%E8%BE%91mapred-site.xml-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%284%29%E7%BC%96%E8%BE%91mapred-site.xml" rel="nofollow">        (4)编辑mapred-site.xml</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%885%EF%BC%89%E7%BC%96%E8%BE%91hdfs-site.xml-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%885%EF%BC%89%E7%BC%96%E8%BE%91hdfs-site.xml" rel="nofollow">        （5）编辑hdfs-site.xml</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%886%EF%BC%89%E7%BC%96%E8%BE%91yarn-site.xml-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%886%EF%BC%89%E7%BC%96%E8%BE%91yarn-site.xml" rel="nofollow">        （6）编辑yarn-site.xml</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%887%EF%BC%89%E7%BC%96%E8%BE%91workers%2C%E6%8A%8A%E5%8E%9F%E5%85%88%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BClocalhost%E5%88%A0%E9%99%A4-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%887%EF%BC%89%E7%BC%96%E8%BE%91workers%2C%E6%8A%8A%E5%8E%9F%E5%85%88%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BClocalhost%E5%88%A0%E9%99%A4" rel="nofollow">        （7）编辑workers,把原先的默认值localhost删除</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A" rel="nofollow">        （8）配置环境变量，在终端输入：</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E6%8A%8A%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0hadoop2%E5%92%8Chadoop3%E4%B8%8A-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E6%8A%8A%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0hadoop2%E5%92%8Chadoop3%E4%B8%8A" rel="nofollow">        （9）把文件拷贝到hadoop2和hadoop3上</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%889%EF%BC%89%E7%BB%99%E6%96%87%E4%BB%B6%E8%B5%8B%E6%9D%83-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%889%EF%BC%89%E7%BB%99%E6%96%87%E4%BB%B6%E8%B5%8B%E6%9D%83" rel="nofollow">        （10）给文件赋权</a></p> 
<p id="%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4" rel="nofollow">六、启动Hadoop集群</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%9C%A8hadoop1%E4%B8%8A%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%9C%A8hadoop1%E4%B8%8A%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%EF%BC%9A" rel="nofollow">        （1）在hadoop1上执行以下命令：</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96hdfs-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96hdfs" rel="nofollow">        1、格式化hdfs</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03%E3%80%81%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03%E3%80%81%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4" rel="nofollow">        2、一键启动Hadoop集群</a></p> 
<p id="%EF%BC%882%EF%BC%89%E6%B5%8B%E8%AF%95Hadoop%E9%9B%86%E7%BE%A4-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E6%B5%8B%E8%AF%95Hadoop%E9%9B%86%E7%BE%A4" rel="nofollow">        （2）测试Hadoop集群</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8" rel="nofollow">        （3）磁盘空间占用</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h4 id="%E5%89%8D%E8%A8%80%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8docker%E6%90%AD%E5%BB%BA">前言：为什么要用docker搭建Hadoop集群？</h4> 
<p>        1、磁盘空间的占用</p> 
<p>        docker搭建的集群占用电脑磁盘空间较小，对电脑的硬件要求也不高，搭建一个Hadoop集群（一主两从）只需要17GB左右的磁盘空间，而常规的开启多台虚拟机搭建的方法，可能搭建一台Hadoop服务器就需要将近20GB的磁盘空间。</p> 
<p>        2、稳定性</p> 
<p>        docker搭建的Hadoop集群不容易宕机，用常规的方法搭建的话，可能会有一台或者多台虚拟机宕机，稳定性较差。</p> 
<h4 id="%E5%87%86%E5%A4%87%EF%BC%9A%E4%B8%8B%E8%BD%BDVMware%E3%80%81Ubuntu%E6%88%96%E8%80%85CentOS%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E3%80%81Hadoop%E5%92%8Cjdk%E5%8E%8B%E7%BC%A9%E5%8C%85">准备：下载VMware、VMwareTools（或Xftp、Xshell）、Ubuntu或者CentOS映像文件、Hadoop和jdk压缩包</h4> 
<p>给大家准备了Ubuntu映像文件、Hadoop和jdk压缩包，点击链接下载即可。没有Xftp和Xshell的同学可以用VMwareTools替代，只要把压缩包添加到虚拟机主机上即可。</p> 
<p id="">链接：<a class="link-info" href="https://pan.baidu.com/s/1rj-A9QmCD6qJzf7AQ9FeGQ?pwd=2v56" rel="nofollow" title="Ubuntu、jdk、Hadoop">Ubuntu、jdk、Hadoop</a> <br> 提取码：2v56</p> 
<h2></h2> 
<h2 id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA">一、创建虚拟机</h2> 
<p id="%EF%BC%881%EF%BC%89%E7%94%A8VMware%E5%88%9B%E5%BB%BA%E4%B8%80%E5%8F%B0%E6%96%B0%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA(CentOS%E6%88%96Ubuntu%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%89">用VMware创建一台新的虚拟机(CentOS或Ubuntu都可以）</p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a)%E7%82%B9%E5%87%BB%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA">        （1）点击新建虚拟机</h4> 
<p style="text-align:center;"><img alt="" height="221" src="https://images2.imgbox.com/8f/06/SD6K5jm0_o.png" width="185"></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b)%E4%B8%8B%E4%B8%80%E6%AD%A5">       （2）下一步</h4> 
<p style="text-align:center;"><img alt="" height="239" src="https://images2.imgbox.com/12/0a/BXHb4aUs_o.png" width="247"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0c)%E4%B8%8B%E4%B8%80%E6%AD%A5">       <br>         （3）下一步</h4> 
<p style="text-align:center;"><img alt="" height="272" src="https://images2.imgbox.com/74/75/KOCze7yb_o.png" width="281"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0d)%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%EF%BC%88CentOS%E6%88%96%E8%80%85Ubuntu%E9%83%BD%E5%8F%AF%E4%BB%A5%EF%BC%89%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%AC%ACk%E6%AD%A5%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8F%AF%E8%83%BD%E8%A6%81%E5%8A%A0%E8%BD%BD20%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%EF%BC%8C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%E5%8F%AF%E4%BB%A5%E5%BF%AB%E4%B8%80%E7%82%B9%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82">         （4）选择映像文件</h4> 
<p>        选择自己的映像文件（CentOS或者Ubuntu都可以），后面第11步开启虚拟机时可能要加载20分钟左右，不想等待加载的话，可以选择稍后安装操作系统，自定义安装可以快一点，不过很多东西得自己配置和下载，后续使用可能麻烦一点。</p> 
<p style="text-align:center;"><img alt="" height="336" src="https://images2.imgbox.com/f7/05/sMoUu6Hr_o.png" width="347"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0e)%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF">        （5）自定义信息</h4> 
<p style="text-align:center;"> <img alt="" height="347" src="https://images2.imgbox.com/75/5e/f5tzRZSL_o.png" width="359"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0f)%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%BD%8D%E7%BD%AE%E6%9C%80%E5%A5%BD%E6%94%BE%E5%9C%A8%E9%9D%9EC%E7%9B%98">         （6）自定义信息，位置最好放在非C盘</h4> 
<p style="text-align:center;"><img alt="" height="356" src="https://images2.imgbox.com/bd/a9/0pjqbhER_o.png" width="368"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0g%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%20x%20%E6%AF%8F%E4%B8%AA%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E6%95%B0%E9%87%8F%20%3D%20%E5%A4%84%E7%90%86%E5%99%A8%E5%86%85%E6%A0%B8%E6%80%BB%E6%95%B0%EF%BC%8C%E4%BE%9D%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%AE%9A%EF%BC%8C%E5%9C%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E7%94%B5%E8%84%91%E7%9A%84%E5%A4%84%E7%90%86%E5%99%A8%E6%95%B0%E9%87%8F%EF%BC%8C%E6%88%91%E7%9A%84%E6%98%AF8%E4%B8%AA%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E9%98%B2%E6%AD%A2%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%B6%E5%8D%A1%E9%A1%BF%E3%80%82">        （7）设置处理器内核总数</h4> 
<p>        处理器数量 x 每个处理器的内核数量 = 处理器内核总数，依据自己电脑的配置设定，在任务管理器的性能页面中可以查看自己电脑的处理器数量，我的是8个，直接设置最大值，防止后续使用虚拟机时卡顿。</p> 
<p style="text-align:center;"> <img alt="" height="420" src="https://images2.imgbox.com/42/80/Mn5A7AJr_o.png" width="467"><img alt="" height="284" src="https://images2.imgbox.com/c1/2e/YFS2vHoK_o.png" width="294"></p> 
<p></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0h)%20%E5%90%8E%E9%9D%A2%E4%BA%94%E6%AD%A5%E9%83%BD%E9%80%89%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%8D%B3%E5%8F%AF%E3%80%82">        （8） 后面五步都选下一步即可。</h4> 
<p style="text-align:center;"> <img alt="" height="304" src="https://images2.imgbox.com/bf/b7/Tm0FoiBv_o.png" width="314"></p> 
<p style="text-align:center;"><img alt="" height="307" src="https://images2.imgbox.com/6b/a5/P5xrLkHq_o.png" width="318"> <img alt="" height="303" src="https://images2.imgbox.com/ec/29/UmsRte4r_o.png" width="313"></p> 
<p style="text-align:center;"><img alt="" height="316" src="https://images2.imgbox.com/17/82/TNzQvYGu_o.png" width="327"><img alt="" height="313" src="https://images2.imgbox.com/6d/52/IruVqm7M_o.png" width="324"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0i)%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AA%E6%90%AD%E5%BB%BAHadoop%E9%9B%86%E7%BE%A4%E7%9A%84%E8%AF%9D20GB%E5%B0%B1%E8%B6%B3%E5%A4%9F%E4%BA%86%EF%BC%8C%E4%BD%86%E5%90%8E%E9%9D%A2%E8%BF%98%E9%9C%80%E8%A6%81%E6%90%AD%E5%BB%BA%E5%85%B6%E4%BB%96%E9%9B%86%E7%BE%A4%E6%89%80%E4%BB%A5%E8%AE%BE%E7%BD%AE%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%E4%B8%BA50GB%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E9%9C%80%E6%B1%82%E8%AE%BE%E5%AE%9A%E3%80%82%E5%B0%86%E8%99%9A%E6%8B%9F%E7%A3%81%E7%9B%98%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E3%80%82">         （9）设置磁盘大小</h4> 
<p>        设置磁盘大小为50GB，只搭建Hadoop集群的话20GB就足够了，但后面还需要搭建其他集群所以设置磁盘大小为50GB，可以根据自己的需求设定。将虚拟磁盘拆分成多个文件。</p> 
<p style="text-align:center;"> <img alt="" height="389" src="https://images2.imgbox.com/dc/0d/bttMM2br_o.png" width="402"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0j)%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5%EF%BC%8C%E5%86%8D%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90">         （10）点击下一步，再点击完成</h4> 
<p style="text-align:center;"> <img alt="" height="307" src="https://images2.imgbox.com/98/7c/IpbDCy2B_o.png" width="319"> <img alt="" height="303" src="https://images2.imgbox.com/1b/b9/iXtXB16g_o.png" width="313"></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0k)%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E4%BA%8C%E5%8D%81%E5%88%86%E9%92%9F%E5%B7%A6%E5%8F%B3%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%83%B3%E7%AD%89%E5%BE%85%E5%8A%A0%E8%BD%BD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%AC%ACd%E6%AD%A5%E9%80%89%E6%8B%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%98%A0%E5%83%8F%E6%96%87%E4%BB%B6%E9%82%A3%E9%87%8C%E9%80%89%E6%8B%A9%E7%A8%8D%E5%90%8E%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%BE%97%E8%87%AA%E5%B7%B1%E9%85%8D%E7%BD%AE%E5%92%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%BB%AD%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E9%BA%BB%E7%83%A6%E4%B8%80%E7%82%B9%E3%80%82%E6%88%90%E5%8A%9F%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%A1%B5%E9%9D%A2%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A">         （11）自动加载默认配置</h4> 
<p>        这个过程可能需要二十分钟左右。如果不想等待加载，可以在第4步选择自己的映像文件那里选择稍后安装操作系统，不过很多东西得自己配置和下载，后续使用可能麻烦一点。成功开启虚拟机页面如下所示：</p> 
<p style="text-align:center;"> <img alt="" height="280" src="https://images2.imgbox.com/98/74/zDo3FggA_o.png" width="488"></p> 
<h3 id="%C2%A0%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85docker%E5%B9%B6%E7%94%9F%E6%88%90%E7%9B%B8%E5%85%B3%E7%9A%84%E9%95%9C%E5%83%8F">二、安装docker并生成相关的镜像</h3> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20a%EF%BC%89%E5%AE%89%E8%A3%85docker">        （1）安装docker</h4> 
<p>        CentOS：<a href="https://docs.docker.com/engine/install/centos/" rel="nofollow" title="在 CentOS | 上安装 Docker 引擎码头工人文档">在 CentOS | 上安装 Docker 引擎码头工人文档</a></p> 
<p>        Ubuntu: <a href="https://docs.docker.com/engine/install/ubuntu/" rel="nofollow" title="在 Ubuntu | 上安装 Docker 引擎码头工人文档">在 Ubuntu | 上安装 Docker 引擎码头工人文档</a></p> 
<p>        只要在终端输入：<span style="background-color:#a2e043;">sudo docker run hello-world</span>，后出现如下图的内容就证明安装docker成功了</p> 
<p style="text-align:center;"><img alt="" height="392" src="https://images2.imgbox.com/28/0c/JU0t37V8_o.png" width="479"></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20b)%E6%8B%89%E5%8F%96CentOS%E9%95%9C%E5%83%8F%EF%BC%88Ubuntu%E9%95%9C%E5%83%8F%E4%B9%9F%E8%A1%8C%EF%BC%89">        （2）拉取CentOS镜像（Ubuntu镜像也行）</h4> 
<p>         在终端输入：<span style="background-color:#a2e043;">sudo docker pull centos</span><img alt="" height="128" src="https://images2.imgbox.com/4d/dd/HNtPqvM4_o.png" width="715"></p> 
<p>         在终端输入：<span style="background-color:#a2e043;">sudo docker images</span>，可以看到刚刚拉取的两个镜像</p> 
<p style="text-align:center;"><img alt="" height="70" src="https://images2.imgbox.com/03/61/WmSrL3J5_o.png" width="552"></p> 
<p>         每次执行docker语句都要在前面加sudo，比较麻烦，直接将hadoop用户加入docker用户组，就不用再输入sudo了。</p> 
<pre><code class="language-bash">sudo gpasswd -a $USER docker     #将当前用户加入到docker用户组中
newgrp docker     #重新加载docker用户组
</code></pre> 
<p>        一般安装时会自动创建docker用户组，如果docker用户组不存在的话，在终端输入： </p> 
<p><span style="background-color:#a2e043;">sudo groupadd docker     #创建docker用户组</span></p> 
<p>        注意，此时只有执行上述两条命令行的终端可以不用输入sudo，其他终端仍要输入，得重启虚拟机后所有终端才不用输入sudo。</p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87build%20Dockfile%E7%94%9F%E6%88%90%E5%B8%A6ssh%E5%8A%9F%E8%83%BD%E7%9A%84centos%E9%95%9C%E5%83%8F%EF%BC%8C%E5%85%88%E5%88%9B%E5%BB%BADockfile%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">         （3）通过build Dockfile生成带ssh功能的centos镜像</h4> 
<p>先创建Dockfile文件，在终端输入：</p> 
<p><span style="background-color:#a2e043;">vi Dockerfile</span></p> 
<p>在Dockfile文件中添加以下内容：</p> 
<pre><code class="language-bash">FROM centos
MAINTAINER hadoop

RUN cd /etc/yum.repos.d/
RUN sed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*
RUN sed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*
RUN yum makecache
RUN yum update -y
RUN yum install -y openssh-server sudo
RUN sed -i 's/UsePAM yes/UsePAM no/g' /etc/ssh/sshd_config
RUN yum install -y openssh-clients

RUN echo "root:a123456" | chpasswd
RUN echo "root   ALL=(ALL)       ALL" &gt;&gt; /etc/sudoers
RUN ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key

RUN mkdir /var/run/sshd
EXPOSE 22
CMD ["/usr/sbin/sshd", "-D"]
</code></pre> 
<p>Dockfile文件的内容解释：基于centos镜像，生成带有spenssh-server、openssh-clients的镜像，用户为root，密码为a123456，镜像维护者（作者）为hadoop。为了防止出现<span style="background-color:#fe2c24;">Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist</span><br> 错误，我更改了yum下载依赖的镜像baseurl。<span style="color:#fe2c24;">注意：如果拉取的镜像是Ubuntu的话，得修改下载spenssh-server、openssh-clients的命令行。</span></p> 
<p> 你可能需要<span style="background-color:#ff9900;">修改</span>的地方：</p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81MAINTAINER%20hadoop">        1、MAINTAINER hadoop</h4> 
<p>        MAINTAINER+空格+作者的信息，用于指定镜像作者的信息，我的用户名是hadoop，改成你自己的</p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81root%3Aa123456">        2、root:a123456</h4> 
<p>        设置镜像的密码，改成你自己的</p> 
<p>建好Dockerfile文件后，生成镜像，在终端输入：</p> 
<p><span style="background-color:#a2e043;">docker build -t="centos7-ssh" .</span><br> 查看生成的centos7-ssh镜像，在终端输入：</p> 
<p><span style="background-color:#a2e043;">docker images</span></p> 
<p style="text-align:center;"><img alt="" height="93" src="https://images2.imgbox.com/29/99/ZGcx6W5S_o.png" width="562"></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%EF%BC%884%EF%BC%89%E5%B0%86%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%99%9A%E6%8B%9F%E6%9C%BA">         （4）将下载的文件上传虚拟机</h4> 
<p>没有Xftp和Xshell的同学可以用VMwareTools替代，只要把压缩包添加到虚拟机主机上即可。安装VMwareTools后，复制本地主机的文件粘贴到虚拟机主机指定目录下。下面演示的是Xftp和Xshell的操作。</p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01%E3%80%81%E5%9C%A8%E4%B8%BB%E6%9C%BA%E4%B8%8B%E8%BD%BDssh%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">         1、在主机下载ssh，在终端输入：</h4> 
<p><span style="background-color:#a2e043;">sudo apt-get install -y openssh-server</span><br>         下载完后，查看ssh进程的运行状态，在终端输入：</p> 
<p><span style="background-color:#a2e043;">ps -e|grep ssh</span></p> 
<p style="text-align:center;">       <img alt="" height="53" src="https://images2.imgbox.com/e6/18/OhIdy9Nt_o.png" width="312"> </p> 
<p>        再查看ssh的运行状态，在终端输入：</p> 
<p><span style="background-color:#a2e043;">systemctl status sshd</span></p> 
<p style="text-align:center;"><img alt="" height="176" src="https://images2.imgbox.com/98/97/sgeY5JDL_o.png" width="500"></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%20%E6%9F%A5%E7%9C%8Bip%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">       2、 查看ip地址，在终端输入：</h4> 
<p><span style="background-color:#a2e043;">ip a</span></p> 
<p style="text-align:center;"><img alt="" height="282" src="https://images2.imgbox.com/9c/c6/0WFyroxq_o.png" width="499"></p> 
<p> 我的ip地址是：192.168.237.131</p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E7%94%A8Xshell%E5%92%8CXftp%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%BB%E6%9C%BA">        3、用Xshell和Xftp连接虚拟机主机</h4> 
<p>Xshell(测试是否能正常连接，其实只需要用Xftp传输文件）：</p> 
<p style="text-align:center;"><img alt="" height="446" src="https://images2.imgbox.com/bd/e2/vwhvGlPi_o.png" width="462"></p> 
<p>         用户名填hadoop（换成你自己的），root可能会登不上，如果ssh运行状态没问题，还连接不上的话，可能是防火墙没关。</p> 
<p> Xftp：</p> 
<p style="text-align:center;"><img alt="" height="299" src="https://images2.imgbox.com/b9/7d/wmf5QbTR_o.png" width="147"></p> 
<p>         将压缩包上传到/home/hadoop（有Dockerfile的目录），如果上传失败，可能是目录没有传输文件的权限，在终端输入：<span style="background-color:#38d8f0;">chmod 777 /home/hadoop/</span></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%EF%BC%88%E6%8A%8A%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8D%E6%94%B9%E6%88%90%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%89">         4、解压文件（把目录和文件名改成你自己的）</h4> 
<p>在终端输入：</p> 
<p><span style="color:#0d0016;"><span style="background-color:#a2e043;">tar -zxvf /home/hadoop/hadoop-3.1.3.tar.gz -C /home/hadoop</span></span></p> 
<p><span style="color:#0d0016;"><span style="background-color:#a2e043;">tar -zxvf /home/hadoop/jdk-8u212-linux-x64.tar.gz -C /home/hadoop</span></span></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%885%EF%BC%89%E7%94%9F%E6%88%90%E5%B8%A6%E6%9C%89ssh%E3%80%81hadoop%E5%92%8Cjdk%E7%8E%AF%E5%A2%83%E7%9A%84CentOS%E9%95%9C%E5%83%8F">        （5）生成带有ssh、hadoop和jdk环境的CentOS镜像</h4> 
<p>移除原有的Dockerfile文件，在终端输入：</p> 
<p><span style="background-color:#a2e043;">mv Dockerfile Dockerfile.bak</span></p> 
<p>再重新创建一个Dockerfile文件，在终端输入：</p> 
<p><span style="background-color:#a2e043;">vi Dockerfile</span></p> 
<p><span style="background-color:#38d8f0;">或者直接在Xftp上用记事本编辑原来的Dockerfile文件，更加方便（推荐）</span></p> 
<p style="text-align:center;"><img alt="" height="200" src="https://images2.imgbox.com/8a/0d/kl7orhGe_o.png" width="208"></p> 
<p>将下面内容填入Dockerfile文件(<span style="background-color:#fe2c24;">记得保存</span>)</p> 
<pre><code class="language-bash">FROM centos7-ssh

COPY jdk1.8.0_212 /usr/local/jdk
ENV JAVA_HOME /usr/local/jdk
ENV PATH $JAVA_HOME/bin:$PATH

COPY hadoop-3.1.3 /usr/local/hadoop
ENV HADOOP_HOME /usr/local/hadoop
ENV PATH $HADOOP_HOME/bin:$PATH
</code></pre> 
<p>构建Dockerfile,在终端输入：</p> 
<p><span style="background-color:#a2e043;">docker build -t="hadoop" .</span></p> 
<p style="text-align:center;"> <img alt="" height="288" src="https://images2.imgbox.com/dd/5f/ZIFBOFBm_o.png" width="284"></p> 
<p>        成功生成名字为hadoop的镜像。</p> 
<h2 id="%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%B9%B6%E5%90%AF%E5%8A%A8docker%E5%AE%B9%E5%99%A8">三、创建网桥，并启动docker容器</h2> 
<p>        因为集群的服务器之间需要通信，而且每次虚拟机给集群分配的ip地址都不一样，所以需要创建网桥，给每台服务器分配固定的ip映射，这样就可以通过使用服务器名进行通信了，而且ip地址也不会变动。</p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">        （1）创建网桥，在终端输入：</h3> 
<p>        <span style="background-color:#a2e043;">docker network create hadoop</span></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%BD%91%E6%A1%A5%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">        （2）查看网桥，在终端输入：</h3> 
<p>        <span style="background-color:#a2e043;">docker network ls</span></p> 
<p style="text-align:center;"><img alt="" height="109" src="https://images2.imgbox.com/68/f8/ITlKi9T0_o.png" width="367"></p> 
<p>        其他三个网桥是安装docker时自带的，hadoop是刚刚创建的。</p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%E4%B8%89%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%B9%B6%E6%8C%87%E5%AE%9A%E7%BD%91%E6%A1%A5">        （3）启动三个容器并指定网桥</h3> 
<p>依次在终端执行下面三条命令行：</p> 
<p><span style="background-color:#a2e043;">docker run -itd --network hadoop --name hadoop1 -p 50070:50070 -p 8088:8088 hadoop </span></p> 
<p><span style="background-color:#a2e043;">docker run -itd --network hadoop --name hadoop2 hadoop </span></p> 
<p><span style="background-color:#a2e043;">docker run -itd --network hadoop --name hadoop3 hadoop</span></p> 
<p>参数解释：</p> 
<p>        -itd：在后台运行交互式容器</p> 
<p>        --network：指定网桥</p> 
<p>        --name：指定生成的容器名</p> 
<p>        -p：指定端口映射，主机端口号：容器端口号，第一个是hdfs服务，第二个是yarn 服务</p> 
<p>        末尾的hadoop是运行的镜像名</p> 
<p>查看生成的容器，在终端输入：</p> 
<p><span style="background-color:#a2e043;">docker ps -a</span></p> 
<p><img alt="" height="202" src="https://images2.imgbox.com/ad/3c/IhVBlHSV_o.png" width="1200">查看网桥使用情况，在终端输入：</p> 
<p><span style="background-color:#a2e043;">docker network inspect hadoop</span></p> 
<p> <img alt="" height="616" src="https://images2.imgbox.com/29/20/PXixJ9FD_o.png" width="566"></p> 
<p> 记录每台服务器的ip地址，后面要用，每个人的可能不一样，换成你自己的</p> 
<p><span style="background-color:#fefcd8;">172.18.0.2 hadoop1</span></p> 
<p><span style="background-color:#fefcd8;">172.18.0.3 hadoop2</span></p> 
<p><span style="background-color:#fefcd8;">172.18.0.4 hadoop3</span></p> 
<h2 id="%E5%9B%9B%E3%80%81%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%8C%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%92%8Cssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95">四、登录容器，配置ip地址映射和ssh免密登录</h2> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20(1)%E7%99%BB%E5%BD%95%E5%AE%B9%E5%99%A8%EF%BC%88Hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89">        (1)登录容器（Hadoop服务器）</h3> 
<p>开启三个终端，在每个终端分别输入：</p> 
<p><span style="background-color:#a2e043;">docker exec -it hadoop1 bash</span><br><span style="background-color:#a2e043;">docker exec -it hadoop2 bash</span><br><span style="background-color:#a2e043;">docker exec -it hadoop3 bash</span><br><img alt="" height="341" src="https://images2.imgbox.com/ff/86/tps5A733_o.png" width="919"></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%882%EF%BC%89%E5%9C%A8%E6%AF%8F%E4%B8%AAhadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEip%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84">        （2）在每个hadoop服务器中配置ip地址映射</h3> 
<p>在<span style="background-color:#fe2c24;">每台</span>hadoop服务器的终端输入：</p> 
<p><span style="background-color:#a2e043;">vi /etc/hosts</span></p> 
<p>然后填入刚刚记录的ip地址</p> 
<p style="text-align:center;"> <img alt="" height="178" src="https://images2.imgbox.com/b5/e0/IJfbMatt_o.png" width="296"></p> 
<p>         <span style="background-color:#fe2c24;">每台</span>Hadoop服务器都配置好后，可以互相ping一下（ctrl + c停止ping），看看是否配置成功。hadoop1 ping hadoop2 如下图所示：</p> 
<p style="text-align:center;"><img alt="" height="182" src="https://images2.imgbox.com/9e/30/kOzXZhsb_o.png" width="605"></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0(3)%E5%9C%A8%E6%AF%8F%E5%8F%B0hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95">         (3)在每台hadoop服务器中配置ssh免密登录</h3> 
<p>在<span style="background-color:#fe2c24;">每台</span>hadoop服务器终端输入：</p> 
<p><span style="background-color:#a2e043;">ssh-keygen</span></p> 
<p>然后一直回车即可，再在每台hadoop服务器终端中输入：</p> 
<p><span style="background-color:#a2e043;">ssh-copy-id -i /root/.ssh/id_rsa -p 22 root@hadoop1</span><br> 填yes后，输入第二（3）步时设置的密码，a123456<br><span style="background-color:#a2e043;">ssh-copy-id -i /root/.ssh/id_rsa -p 22 root@hadoop2</span><br> 填yes后，输入第二（3）步时设置的密码，a123456<br><span style="background-color:#a2e043;">ssh-copy-id -i /root/.ssh/id_rsa -p 22 root@hadoop3</span><br> 填yes后，输入第二（3）步时设置的密码，a123456</p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%884%EF%BC%89%E6%B5%8B%E8%AF%95%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%EF%BC%8Cssh%20%2B%20hadoop%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%EF%BC%9A">        （4）测试是否成功配置ssh免密登录，ssh + hadoop服务器名：</h3> 
<p><span style="background-color:#a2e043;">ssh hadoop1 </span></p> 
<p><span style="background-color:#a2e043;">ssh hadoop2 </span></p> 
<p><span style="background-color:#a2e043;">ssh hadoop3</span></p> 
<h2 id="%E4%BA%94%E3%80%81%E4%BF%AE%E6%94%B9Hadoop%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">五、修改Hadoop配置文件</h2> 
<p>        在hadoop1中，进入Hadoop配置目录，我的是：/usr/local/hadoop/etc/hadoop，查看目录下的文件，不同版本的Hadoop可能文件数量和名字会不同，在终端输入：</p> 
<p><span style="background-color:#a2e043;">ls</span></p> 
<p style="text-align:center;"><img alt="" height="306" src="https://images2.imgbox.com/9e/38/UJuaGnu0_o.png" width="572"></p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%97%B6%E8%A6%81%E7%94%A8">        （1）创建文件夹，配置时要用</h3> 
<p><span style="background-color:#a2e043;">mkdir /home/hadoop</span><br><span style="background-color:#a2e043;">mkdir /home/hadoop/tmp /home/hadoop/hdfs_name /home/hadoop/hdfs_data</span></p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E7%BC%96%E8%BE%91hadoop_env.sh%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%8B%E9%9D%A2%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E6%8C%89%E7%85%A7%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%94%B9">        （2）编辑hadoop_env.sh，修改下面三个参数，按照你自己的改</h3> 
<p style="text-align:center;"><img alt="" height="295" src="https://images2.imgbox.com/4b/fa/L7tF0Eae_o.png" width="499"></p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%883%EF%BC%89%E7%BC%96%E8%BE%91core-site.xml">         （3）编辑core-site.xml</h3> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://hadoop1:9000&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;file:/home/hadoop/tmp&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;io.file.buffer.size&lt;/name&gt;
        &lt;value&gt;131702&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0(4)%E7%BC%96%E8%BE%91mapred-site.xml">        (4)编辑mapred-site.xml</h3> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;
        &lt;value&gt;hadoop1:10020&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;
        &lt;value&gt;hadoop1:19888&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%885%EF%BC%89%E7%BC%96%E8%BE%91hdfs-site.xml">        （5）编辑hdfs-site.xml</h3> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
        &lt;value&gt;file:/home/hadoop/hdfs_name&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
        &lt;value&gt;file:/home/hadoop/hdfs_data&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;2&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
        &lt;value&gt;hadoop1:9001&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;
        &lt;value&gt;hadoop2:9002&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.webhdfs.enabled&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%886%EF%BC%89%E7%BC%96%E8%BE%91yarn-site.xml">Hadoop的Web UI界面访问地址：1、namenode：hadoop1:9001（会自动跳转到9000端口，如果直接访问9000端口号可能会访问异常）2、secondarynamenode：hadoop2:9002         </p> 
<h3>  （6）编辑yarn-site.xml</h3> 
<pre><code class="language-XML">&lt;configuration&gt;

&lt;!-- Site specific YARN configuration properties --&gt;
 &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.auxservices.mapreduce.shuffle.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;
        &lt;value&gt;hadoop1:8032&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;
        &lt;value&gt;hadoop1:8030&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;
        &lt;value&gt;hadoop1:8031&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt;
        &lt;value&gt;hadoop1:8033&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;
        &lt;value&gt;hadoop1:8088&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%887%EF%BC%89%E7%BC%96%E8%BE%91workers%2C%E6%8A%8A%E5%8E%9F%E5%85%88%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BClocalhost%E5%88%A0%E9%99%A4">        （7）编辑workers,把原先的默认值localhost删除</h3> 
<pre><code class="language-XML">hadoop2
hadoop3
</code></pre> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%EF%BC%9A">        （8）配置环境变量，在终端输入：</h3> 
<p><span style="background-color:#a2e043;">vi /etc/profile</span></p> 
<p>在文件尾部添加配置</p> 
<pre><code class="language-XML">export JAVA_HOME=/usr/local/jdk
export PATH=$JAVA_HOME/bin:$PATH
export HADOOP_HOME=/usr/local/hadoop
export PATH=$HADOOP_HOME/bin:$PATH
export PATH=$HADOOP_HOME/sbin:$PATH
export HDFS_NAMENODE_USER=root
export HDFS_DATANODE_USER=root
export HDFS_SECONDARYNAMENODE_USER=root
export YARN_RESOURCEMANAGER_USER=root
export YARN_NODEMANAGER_USER=root
</code></pre> 
<p>保存退出后，再输入下面的命令行使配置生效：</p> 
<p><span style="background-color:#a2e043;">source /etc/profile</span></p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%888%EF%BC%89%E6%8A%8A%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0hadoop2%E5%92%8Chadoop3%E4%B8%8A">        （9）把文件拷贝到hadoop2和hadoop3上</h3> 
<p>依次执行以下命令：</p> 
<p><span style="background-color:#a2e043;">scp -r $HADOOP_HOME/ hadoop2:/usr/local/<br> scp -r $HADOOP_HOME/ hadoop3:/usr/local/</span></p> 
<p><span style="background-color:#a2e043;">scp -r /home/hadoop hadoop2:/<br> scp -r /home/hadoop hadoop3:/</span></p> 
<p><span style="background-color:#a2e043;">scp -r /etc/profile hadoop2:/<br> scp -r /etc/profile hadoop3:/</span></p> 
<p></p> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%889%EF%BC%89%E7%BB%99%E6%96%87%E4%BB%B6%E8%B5%8B%E6%9D%83">        （10）给文件赋权</h3> 
<p>在<span style="background-color:#fe2c24;">每台</span>hadoop服务器的终端执行下面两条命令行：</p> 
<p><span style="background-color:#a2e043;">chmod -R 777 /usr/local/hadoop</span></p> 
<p><span style="background-color:#a2e043;">chmod -R 777 /usr/local/jdk</span></p> 
<h2 id="%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4"><br> 六、启动Hadoop集群</h2> 
<h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%9C%A8hadoop1%E4%B8%8A%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%EF%BC%9A">        （1）在hadoop1上执行以下命令：</h3> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96hdfs">        1、格式化hdfs</h4> 
<p id="hdfs%20namenode%20-format%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4"><span style="background-color:#a2e043;">hdfs namenode -format</span></p> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A03%E3%80%81%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8Hadoop%E9%9B%86%E7%BE%A4">        2、一键启动Hadoop集群</h4> 
<p><span style="background-color:#a2e043;">start-all.sh</span></p> 
<h3 id="%EF%BC%882%EF%BC%89%E6%B5%8B%E8%AF%95Hadoop%E9%9B%86%E7%BE%A4">        （2）测试Hadoop集群</h3> 
<p>每台服务器都输入：</p> 
<p><span style="background-color:#a2e043;">jps</span><br> hadoop1：</p> 
<p><img alt="" height="71" src="https://images2.imgbox.com/c7/4b/gqjp8Uef_o.png" width="282"></p> 
<p>hadoop2： </p> 
<p><img alt="" height="88" src="https://images2.imgbox.com/3c/59/Y4cb8SFO_o.png" width="284"></p> 
<p>hadoop3：</p> 
<p> <img alt="" height="70" src="https://images2.imgbox.com/b2/42/lYOUZISz_o.png" width="283"></p> 
<p>        hadoop1是名称结点，hadoop2是第二名称节点和数据节点，hadoop3是数据节点。网上很多人把名称节点和第二名称节点配置在同一台服务器上，我觉得这样配置是错的，这样配置根本发挥不了第二名称节点的作用：作为名称节点的检查点，定期合并日志和镜像。</p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%EF%BC%883%EF%BC%89%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8">        （3）磁盘空间占用</h3> 
<p>        现在hadoop集群已经搭建好了，我们看看磁盘空间占用了多少。前面是剩余磁盘空间，后面是总磁盘空间，可以得出只用了17GB左右。</p> 
<p style="text-align:center;"><img alt="" height="339" src="https://images2.imgbox.com/00/17/jU2hCbom_o.png" width="510"></p> 
<p style="text-align:center;"></p> 
<p> 参考：<a href="https://blog.csdn.net/ifenggege/article/details/108411280" title="使用docker部署hadoop集群_upupfeng的博客-CSDN博客">使用docker部署hadoop集群_upupfeng的博客-CSDN博客</a></p> 
<p></p> 
<p>感谢浏览！如果搭建过程中出现问题，欢迎评论，一起讨论一起进步！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a18b72a60d2c94571b591ddfd0cfe1bb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">员工管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23067017dfff7c7da3e997c7caaa8aad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Jellyfin简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>