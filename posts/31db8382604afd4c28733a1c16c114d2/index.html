<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>umeditor如何能实现直接粘贴把图片上传到服务器中 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="umeditor如何能实现直接粘贴把图片上传到服务器中" />
<meta property="og:description" content="如何做到 ueditor批量上传word图片？
1、前端引用代码
&lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Transitional//EN&#34; &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&#34;&gt;
&lt;html xmlns=&#34;http://www.w3.org/1999/xhtml&#34;&gt;
&lt;head&gt;
&lt;meta http-equiv=&#34;Content-Type&#34;content=&#34;text/html; charset=utf-8&#34;/&gt;
&lt;title&gt;编辑器完整版实例-1.2.6.0&lt;/title&gt;
&lt;script type=&#34;text/javascript&#34;src=&#34;ueditor.config.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34;src=&#34;ueditor.all.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;link type=&#34;text/css&#34;rel=&#34;Stylesheet&#34;href=&#34;WordPaster/css/WordPaster.css&#34;/&gt;
&lt;link type=&#34;text/css&#34;rel=&#34;Stylesheet&#34;href=&#34;WordPaster/js/skygqbox.css&#34;/&gt;
&lt;scrip ttype=&#34;text/javascript&#34;src=&#34;WordPaster/js/json2.min.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;scrip ttype=&#34;text/javascript&#34;src=&#34;WordPaster/js/jquery-1.4.min.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;scrip ttype=&#34;text/javascript&#34;src=&#34;WordPaster/js/WordPaster.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;scrip ttype=&#34;text/javascript&#34;src=&#34;WordPaster/js/skygqbox.js&#34;charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;textarea name=&#34;后台取值的key&#34;id=&#34;myEditor&#34;&gt;这里写你的初始化内容&lt;/textarea&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
var pasterMgr = new WordPasterManager();
pasterMgr.Config[&#34;PostUrl&#34;] = &#34;http://localhost:81/WordPaster2/WordPasterUEditor1x/php/upload.php&#34;
pasterMgr.Load();//加载控件
UE.getEditor(&#39;myEditor&#39;,{onready:function(){//创建一个编辑器实例
pasterMgr.SetEditor(this);
}});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
请求
文件上传的默认请求是一个文件，作为具有“upload”字段的表单数据。
响应：文件已成功上传
当文件成功上传时的JSON响应：
uploaded- 设置为1。
fileName - 上传文件的名称。
url - 上传文件的URL。
响应：文件无法上传
uploaded- 设置为0。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/31db8382604afd4c28733a1c16c114d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-29T14:11:36+08:00" />
<meta property="article:modified_time" content="2023-03-29T14:11:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">umeditor如何能实现直接粘贴把图片上传到服务器中</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>如何做到 ueditor批量上传word图片？</p> 
<p>1、前端引用代码</p> 
<p>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</p> 
<p>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;</p> 
<p>&lt;head&gt;</p> 
<p>    &lt;meta http-equiv="Content-Type"content="text/html; charset=utf-8"/&gt;</p> 
<p></p> 
<p>   &lt;title&gt;编辑器完整版实例-1.2.6.0&lt;/title&gt;</p> 
<p>    &lt;script type="text/javascript"src="ueditor.config.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>    &lt;script type="text/javascript"src="ueditor.all.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>    &lt;link type="text/css"rel="Stylesheet"href="WordPaster/css/WordPaster.css"/&gt;</p> 
<p>    &lt;link type="text/css"rel="Stylesheet"href="WordPaster/js/skygqbox.css"/&gt;</p> 
<p>    &lt;scrip ttype="text/javascript"src="WordPaster/js/json2.min.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>    &lt;scrip ttype="text/javascript"src="WordPaster/js/jquery-1.4.min.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>    &lt;scrip ttype="text/javascript"src="WordPaster/js/WordPaster.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>    &lt;scrip ttype="text/javascript"src="WordPaster/js/skygqbox.js"charset="utf-8"&gt;&lt;/script&gt;</p> 
<p>&lt;/head&gt;</p> 
<p>&lt;body&gt;</p> 
<p>    &lt;textarea name="后台取值的key"id="myEditor"&gt;这里写你的初始化内容&lt;/textarea&gt;</p> 
<p>    &lt;script type="text/javascript"&gt;</p> 
<p>        var pasterMgr = new WordPasterManager();</p> 
<p>    pasterMgr.Config["PostUrl"] = "http://localhost:81/WordPaster2/WordPasterUEditor1x/php/upload.php"</p> 
<p>    pasterMgr.Load();//加载控件</p> 
<p></p> 
<p>          UE.getEditor('myEditor',{onready:function(){//创建一个编辑器实例</p> 
<p>              pasterMgr.SetEditor(this);</p> 
<p>          }});</p> 
<p>    &lt;/script&gt;</p> 
<p>&lt;/body&gt;</p> 
<p>&lt;/html&gt;</p> 
<p>请求</p> 
<p>文件上传的默认请求是一个文件，作为具有“upload”字段的表单数据。</p> 
<p>响应：文件已成功上传</p> 
<p>当文件成功上传时的JSON响应：</p> 
<p>uploaded- 设置为1。</p> 
<p>fileName - 上传文件的名称。</p> 
<p>url - 上传文件的URL。</p> 
<p>响应：文件无法上传</p> 
<p>uploaded- 设置为0。</p> 
<p>error.message - 要显示给用户的错误消息。</p> 
<p>2、粘贴word里面的图片路径是fill://D 这种格式 我理解这种是非浏览器安全的 许多浏览器也不支持</p> 
<p>目前项目是用了一种变通的方式：</p> 
<p>先把word上传到后台 、poi解析、存储图片 、转换html、替换图片、放到富文本框里显示</p> 
<p>（富文本显示有个坑：没找到直接给富文本赋值的方法 要先销毁 记录下</p> 
<p>success : function(data) {<!-- --></p> 
<p>     $('#content').attr('value',data.imagePath);</p> 
<p>     var editor = CKEDITOR.instances["content"]; //你的编辑器的"name"属性的值</p> 
<p>     if (editor) {<!-- --></p> 
<p>       editor.destroy(true);//销毁编辑器</p> 
<p>      }    </p> 
<p>     CKEDITOR.replace('content'); //替换编辑器，editorID为ckeditor的"id"属性的值</p> 
<p>     $("#content").val(result);    //对editor赋值</p> 
<p>     //CKEDITOR.instances.contentCkeditor.setData($("#content").text());</p> 
<p> }</p> 
<p>3.接收上传的图片并保存在服务端</p> 
<p>&lt;?php</p> 
<p>ob_start();</p> 
<p>//201201/10</p> 
<p>$timeDir =date("Ym")."/".date("d");</p> 
<p>$uploadDir =dirname(__FILE__).'/upload/'.$timeDir;</p> 
<p>$curDomain = "http://".$_SERVER["HTTP_HOST"]."/";</p> 
<p>//相对路径 http://www.ncmem.com/upload/2012-1-10/</p> 
<p>$relatPath = $curDomain ."WordPaster2/WordPasterUEditor1x/php/upload/" . $timeDir . "/";</p> 
<p></p> 
<p>//自动创建目录。upload/2012-1-10</p> 
<p>if(!is_dir($uploadDir))</p> 
<p>{<!-- --></p> 
<p>mkdir($uploadDir,0777,true);</p> 
<p>}</p> 
<p></p> 
<p>//如果PHP页面为UTF-8编码，请使用urldecode解码文件名称</p> 
<p>//$fileName = urldecode($_FILES['postedFile']['name']);</p> 
<p>//如果PHP页面为GB2312编码，则可直接读取文件名称</p> 
<p>$fileName = $_FILES['file']['name'];</p> 
<p>$tmpName = $_FILES['file']['tmp_name'];</p> 
<p></p> 
<p>//取文件扩展名jpg,gif,bmp,png</p> 
<p>$path_parts =pathinfo($fileName);</p> 
<p>$ext = $path_parts["extension"];</p> 
<p>$ext =strtolower($ext);//jpg,png,gif,bmp</p> 
<p></p> 
<p>//只允许上传图片类型的文件</p> 
<p>if($ext == "jpg"</p> 
<p>    || $ext == "jpeg"</p> 
<p>    || $ext == "png"</p> 
<p>    || $ext == "gif"</p> 
<p>    || $ext == "bmp")</p> 
<p>{<!-- --></p> 
<p>    //年_月_日_时分秒毫秒.jpg</p> 
<p>    $saveFileName = $fileName;</p> 
<p></p> 
<p>    //xxx/2011_05_05_091250000.jpg</p> 
<p>    $savePath = $uploadDir . "/" . $saveFileName;</p> 
<p></p> 
<p>    //另存为新文件名称</p> 
<p>    if (!move_uploaded_file($tmpName,$savePath))</p> 
<p>    {<!-- --></p> 
<p>exit('upload error!' . "文件名称：" .$fileName . "保存路径：" . $savePath);</p> 
<p>    }</p> 
<p>}</p> 
<p></p> 
<p>//输出图片路径</p> 
<p>//$_SERVER['HTTP_HOST']   localhost:81</p> 
<p>//$_SERVER['REQUEST_URI'] /FCKEditor2.4.6.1/php/test.php</p> 
<p>$reqPath =str_replace("upload.php","",$_SERVER['REQUEST_URI']);</p> 
<p>echo $relatPath .  $saveFileName;</p> 
<p>header('Content-type: text/html; charset=utf-8');</p> 
<p>header('Content-Length: ' .ob_get_length());</p> 
<p>?&gt;</p> 
<p>效果展示：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/9b/jnHdZnkq_o.gif"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1e/fe/mf2O3K2D_o.gif"> </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/79/93/auIaFdwg_o.gif"> </p> 
<p>视频演示：</p> 
<div class="csdn-video-box"> 
 <iframe id="HnDzuJVq-1680070140099" frameborder="0" src="https://player.bilibili.com/player.html?aid=224861682" allowfullscreen="true" data-mediaembed="bilibili"></iframe> 
 <p>Word一键粘贴(导入)插件-Word图文一键粘贴功能演示</p> 
</div> 
<p> </p> 
<p>在使用前需要配置一下，可以参考我写的这篇文章</p> 
<p><a href="http://blog.ncmem.com/wordpress/2019/08/12/ueditor-word%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%98%E4%BA%A4%E4%BA%92/" rel="nofollow" title="详细思路及源码">详细思路及源码</a></p> 
<p>示例下载：</p> 
<p><a href="https://gitee.com/xproer/wordpaster-vue3-cli-ueditor1.5" rel="nofollow" title="wordpaster-vue3-cli-ueditor1.5">wordpaster-vue3-cli-ueditor1.5</a>，<a href="https://gitee.com/xproer/wordpaster-vue-ueditor1.5" rel="nofollow" title="wordpaster-vue-ueditor1.5">wordpaster-vue-ueditor1.5</a>，<a href="https://gitee.com/xproer/wordpaster-asp.net-ueditor1.5x" rel="nofollow" title="wordpaster-asp.net-ueditor1.5x">wordpaster-asp.net-ueditor1.5x</a>，<a href="https://gitee.com/xproer/wordpaster-php-ueditor1x" rel="nofollow" title="wordpaster-php-ueditor1x">wordpaster-php-ueditor1x</a>，<a href="https://gitee.com/xproer/wordpaster-jsp-ueditor1x%E2%80%8B" rel="nofollow" title="wordpaster-jsp-ueditor1x​">wordpaster-jsp-ueditor1x​</a></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c04204f13c23c03b46f7c87684e05adf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记录OpenCV和ROS工作空间创建时出现的问题及解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0c014a881acf28c2986b655b90219a9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Webmind的安装和卸载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>