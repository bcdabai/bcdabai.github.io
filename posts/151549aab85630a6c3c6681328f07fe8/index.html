<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【slam14】安装多个opencv版本 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【slam14】安装多个opencv版本" />
<meta property="og:description" content="1.在安装了opencv4的基础上安装opencv3
opencv版本在这[Releases · opencv/opencv · GitHub]，contrib版本在这[GitHub - opencv/opencv_contrib at 3.4.3]
环境依赖项
Ubuntu16.04安装配置opencv3.4.3&#43;opencv_contrib3.4.3_林深时见鹿echo的博客-CSDN博客_ubuntu 安装opencv3
​​​​​​-D WITH_IPP=OFF, OPENCV_NON_FREE=ON
*编译中遇到的问题IPPICV下载失败
参考：源码编译opencv卡在IPPICV: Download: ippicv_2017u3_lnx_intel64_general_20170822.tgz解决办法_eternal_truth的博客-CSDN博客_ippicv
在Github上下载对应需要下载的文件，随便放在哪里，比如直接/home/xxx/opencv下
Github下载： opencv_3rdparty/ippicv_2017u3_lnx_intel64_general_20180518.tgz at ippicv/master_20180518 · opencv/opencv_3rdparty · GitHub先自己手动（百度）下载ippicv 包，不过要在cmake 的最开头加上-D WITH_IPP=OFF （因为已经下载过了，相应的下载关掉即可） ,这样再cmake下就好了
*opencv3所缺少的boostdesc_bgm.i等文件 采用的是源码编译的方式，所以可以查看 build 文件夹下的日志文件 CMakeDownloadLog.txt，在日志文件CMakeDownloadLog.txt中搜索 boostdesc_bgm.i 关键词 (不是在文件夹中搜索)，
发现这个文件下载失败了。日志文件里就有它的下载地址，直接复制其下载地址到网页可以看该到文件的源码，直接拷贝源码并生存同名文件，放在 opencv_contrib/modules/xfeatures2d/src/ 路径下即可。
*/stitching/include/opencv2/stitching/detail/matchers.hpp
fatal error: opencv2/xfeatures2d/cuda.hpp: 没有那个文件或目录
/home/tsingroo/Documents/3rdparty/opencv-3.4.3/modules/stitching/include/opencv2/stitching/detail/matchers.hpp打开，找到# include &#34;opencv2/xfeatures2d/cuda.hpp&#34;语句
改为绝对路径#include &#34;/home/tsingroo/Documents/3rdparty/opencv-3.4.3/opencv_contrib-3.4.3/modules/xfeatures2d/include/opencv2/xfeatures2d/cuda.hpp&#34;
第三步：编译安装 make -j11 make install 第四步：配置环境 sudo vi /etc/ld.so.conf.d/opencv.conf 输入：/home/tsingroo/Documents/package/opencv-3.4.3/lib 第五步：配置bashrc vi ~/.bashrc,在最后添加： #opencv-3.4.3 export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/home/tsingroo/Documents/package/opencv-3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/151549aab85630a6c3c6681328f07fe8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-28T10:21:39+08:00" />
<meta property="article:modified_time" content="2022-12-28T10:21:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【slam14】安装多个opencv版本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.在安装了opencv4的基础上安装opencv3</p> 
<p>opencv版本在这[<a href="https://github.com/opencv/opencv/releases" title="Releases · opencv/opencv · GitHub">Releases · opencv/opencv · GitHub</a>]，contrib版本在这[<a href="https://github.com/opencv/opencv_contrib/tree/3.4.3" title="GitHub - opencv/opencv_contrib at 3.4.3">GitHub - opencv/opencv_contrib at 3.4.3</a>]</p> 
<p>环境依赖项</p> 
<p><a href="https://blog.csdn.net/echoamor/article/details/83022352/" title="Ubuntu16.04安装配置opencv3.4.3+opencv_contrib3.4.3_林深时见鹿echo的博客-CSDN博客_ubuntu 安装opencv3">Ubuntu16.04安装配置opencv3.4.3+opencv_contrib3.4.3_林深时见鹿echo的博客-CSDN博客_ubuntu 安装opencv3</a></p> 
<p><a href="https://blog.csdn.net/qq_41433316/article/details/99412271" title="​​​​​​">​​​​​​</a>-D WITH_IPP=OFF, OPENCV_NON_FREE=ON</p> 
<p><strong>*编译中遇到的问题IPPICV下载失败</strong><br> 参考：<a href="https://blog.csdn.net/u010739369/article/details/79966263" title="源码编译opencv卡在IPPICV: Download: ippicv_2017u3_lnx_intel64_general_20170822.tgz解决办法_eternal_truth的博客-CSDN博客_ippicv">源码编译opencv卡在IPPICV: Download: ippicv_2017u3_lnx_intel64_general_20170822.tgz解决办法_eternal_truth的博客-CSDN博客_ippicv</a><br> 在Github上下载对应需要下载的文件，随便放在哪里，比如直接/home/xxx/opencv下<br> Github下载： </p> 
<p><a href="https://github.com/opencv/opencv_3rdparty/blob/ippicv/master_20180518/ippicv/ippicv_2017u3_lnx_intel64_general_20180518.tgz" title="opencv_3rdparty/ippicv_2017u3_lnx_intel64_general_20180518.tgz at ippicv/master_20180518 · opencv/opencv_3rdparty · GitHub">opencv_3rdparty/ippicv_2017u3_lnx_intel64_general_20180518.tgz at ippicv/master_20180518 · opencv/opencv_3rdparty · GitHub</a>先自己手动（百度）下载ippicv 包，不过要在cmake 的最开头加上-D WITH_IPP=OFF  （因为已经下载过了，相应的下载关掉即可）  ,这样再cmake下就好了<br>  </p> 
<p><strong>*opencv3所缺少的boostdesc_bgm.i等文件 </strong></p> 
<p>采用的是源码编译的方式，所以可以查看 <strong>build</strong> 文件夹下的日志文件 <strong>CMakeDownloadLog.txt</strong>，在<strong>日志文件CMakeDownloadLog.txt</strong>中搜索 <strong>boostdesc_bgm.i</strong> 关键词 <strong>(不是在文件夹中搜索)</strong>，<br> 发现这个文件下载失败了。日志文件里就有它的下载地址，直接复制其下载地址到网页可以看该到文件的源码，直接拷贝源码并生存同名文件，放在 <strong>opencv_contrib/modules/xfeatures2d/src/</strong> 路径下即可。</p> 
<p></p> 
<p><strong>*/stitching/include/opencv2/stitching/detail/matchers.hpp</strong></p> 
<p><strong>fatal error: opencv2/xfeatures2d/cuda.hpp: 没有那个文件或目录</strong></p> 
<p>/home/tsingroo/Documents/3rdparty/opencv-3.4.3/modules/stitching/include/opencv2/stitching/detail/matchers.hpp打开，找到# include "opencv2/xfeatures2d/cuda.hpp"语句<br> 改为绝对路径#include "/home/tsingroo/Documents/3rdparty/opencv-3.4.3/opencv_contrib-3.4.3/modules/xfeatures2d/include/opencv2/xfeatures2d/cuda.hpp"<br>  </p> 
<pre><code>第三步：编译安装
    make -j11
    make install

第四步：配置环境
    sudo vi  /etc/ld.so.conf.d/opencv.conf
    输入：/home/tsingroo/Documents/package/opencv-3.4.3/lib

第五步：配置bashrc
vi ~/.bashrc,在最后添加：

    #opencv-3.4.3
    export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/home/tsingroo/Documents/package/opencv-3.4.3/lib/pkgconfig
    export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/home/tsingroo/Documents/package/opencv-3.4.3/lib

保存后输入source ~/.bashrc</code></pre> 
<p>pkg-config --modversion opencv  //显示版本</p> 
<p></p> 
<p>2.项目中区分使用</p> 
<p><a href="https://blog.csdn.net/reasonyuanrobot/article/details/121034930" title="ubuntu 安装Opencv4版本后安装Opencv3，并在项目中区分使用__yuan_的博客-CSDN博客_opencv4兼容opencv3嘛">ubuntu 安装Opencv4版本后安装Opencv3，并在项目中区分使用__yuan_的博客-CSDN博客_opencv4兼容opencv3嘛</a></p> 
<p><a href="https://blog.csdn.net/tjj1998/article/details/110376940" title="【解决方案】在已有OpenCV4的情况下安装OpenCV3_幻世至上的博客-CSDN博客">【解决方案】在已有OpenCV4的情况下安装OpenCV3_幻世至上的博客-CSDN博客</a></p> 
<pre><code>默认opencv4情况下，使用opencv3.4.3，编辑CMakeLists.txt

#set(OpenCV_DIR "/home/tsingroo/Documents/package/opencv-3.4.3/share/OpenCV"
set(${OpenCV_INCLUDE_DIRS} 
"/home/tsingroo/Documents/package/opencv-3.4.3/include/opencv2" "/home/tsingroo/Documents/package/opencv-3.4.3/include/opencv" "/home/tsingroo/Documents/package/opencv-3.4.3/include") # set include path
set(${OpenCV_LIBS}  "/home/tsingroo/Documents/package/opencv-3.4.3/lib") # set lib path
find_package(OpenCV 3.4.3 REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})

如果只依赖了opencv，或：

set(CMAKE_PREFIX_PATH "/home/tsingroo/Documents/package/opencv-3.4.3") # opencv3 install path
FIND_PACKAGE(OpenCV 3.4.3 REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})

或：

set(OpenCV_DIR "/home/tsingroo/Documents/package/opencv-3.4.3")
set(${OpenCV_LIBS}  "/home/tsingroo/Documents/package/opencv-3.4.3/lib") # set lib path
find_package(OpenCV 3.4.3 REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})</code></pre> 
<pre><code>默认opencv3情况下，使用opencv4.5.0，编辑CMakeLists.txt

set(${OpenCV_INCLUDE_DIRS} 
"/home/tsingroo/Documents/package/opencv-3.4.3/include/opencv2") # set include path
set(${OpenCV_LIBS}  "/home/tsingroo/Documents/package/opencv-3.4.3/lib") # set lib path
find_package(OpenCV 3.4.3 REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})

如果只依赖了opencv，或：

set(CMAKE_PREFIX_PATH "/home/tsingroo/Documents/package/opencv-3.4.3") # opencv3 install path
FIND_PACKAGE(OpenCV REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})


 
</code></pre> 
<p>3.安装opencv4</p> 
<h2> 安装OpenCV4.5+OpenCV-contrib</h2> 
<p> <a href="https://blog.csdn.net/weixin_43118645/article/details/113920231" title="ubuntu 20.04安装 opencv-4.5和opencv-contrib-4.5_路漫漫 修远兮的博客-CSDN博客">ubuntu 20.04安装 opencv-4.5和opencv-contrib-4.5_路漫漫 修远兮的博客-CSDN博客</a></p> 
<p>cmake ..替换为(路径修改）</p> 
<pre><code>sudo cmake -D CMAKE_BUILD_TYPE=Release \
           -D CMAKE_INSTALL_PREFIX=/usr/local \
           -D OPENCV_PYTHON3_INSTALL_PATH=/usr/local/lib/python3.5/dist-packages \
           -D OPENCV_EXTRA_MODULES_PATH=/home/tsingroo/Downloads/opencv-4.5.4/opencv_contrib/modules/ \
           -DOPENCV_ENABLE_NONFREE=True ..</code></pre> 
<p>cmake-gui</p> 
<p><a href="https://blog.csdn.net/weixin_43850408/article/details/92798076" title="ubuntu16.04+opencv4.1+opencv_contrib编译及安装（SIFT、SURF）_他们叫我一代大侠的博客-CSDN博客">ubuntu16.04+opencv4.1+opencv_contrib编译及安装（SIFT、SURF）_他们叫我一代大侠的博客-CSDN博客</a></p> 
<p></p> 
<h2 id="articleContentId">Ubuntu下卸载opencv</h2> 
<p><a href="https://blog.csdn.net/m0_37605642/article/details/120111105" title="Ubuntu下卸载opencv_花花少年的博客-CSDN博客_ubuntu卸载opencv">Ubuntu下卸载opencv_花花少年的博客-CSDN博客_ubuntu卸载opencv</a></p> 
<p>1. 自动卸载<br> # 如果删掉了build，再安装上面编译生成一个<br> cd /opt/opencv-3.4.3/build</p> 
<p>sudo make uninstall</p> 
<p>cd ..</p> 
<p>sudo rm -r build<br><br> 2. 手动删除相关文件<br> 可能有些路径存在，可能不存在。</p> 
<p>sudo rm -r \<br> /usr/include/opencv4 \<br> /usr/lib/cmake/opencv4 \<br> /usr/lib/python3.9/site-packages/cv2 \<br> /usr/share/licenses/opencv4 \<br> /usr/share/opencv4 \<br> /usr/share/java/opencv4 \<br> /usr/local/include/opencv4 \<br> /usr/local/share/opencv4 \<br> /usr/local/bin/opencv* \<br> /usr/local/lib/libopencv* \<br> /usr/local/lib/pkgconfig/opencv4.pc \<br> /usr/local/lib/cmake/opencv4<br><br> 3. 卸载并清理配置<br> # 会删除python的opencv环境</p> 
<p>sudo apt \<br> autoremove \<br> opencv-doc \<br> opencv-data \<br> libopencv-dev \<br> libopencv2.4-java \<br> libopencv2.4-jni \<br> python-opencv \<br> libopencv-core2.4 \<br> libopencv-gpu2.4 \<br> libopencv-ts2.4 \<br> libopencv-photo2.4 \<br> libopencv-contrib2.4 \<br> libopencv-imgproc2.4 \<br> libopencv-superres2.4 \<br> libopencv-stitching2.4 \<br> libopencv-ocl2.4 \<br> libopencv-legacy2.4 \<br> libopencv-ml2.4 \<br> libopencv-video2.4 \<br> libopencv-videostab2.4 \<br> libopencv-objdetect2.4 \<br> libopencv-calib3d2.4<br><br> 4. 检查是否卸载完成<br> pkg-config opencv --libs</p> 
<p>pkg-config opencv --modversion</p> 
<p>pkg-config --cflags --libs opencv</p> 
<p>sudo find / -iname "*opencv*"<br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cf76c5d29b3d5ba357cdd99b9dc265be/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu安装redis服务器并实现远程连接</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/54cae3e9946ead8453632a27786b106c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux-安装软件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>