<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TiDB集群部署最细化教程-亲测有效 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="TiDB集群部署最细化教程-亲测有效" />
<meta property="og:description" content="TiDB-TiUP集群部署 本次部署使用环境：
CentOS Linux release 7.9.2009 (Core) TiDB 6.5.1 三台服务器： (内)172.19.172.179 (内)172.19.172.180 (内)172.19.172.182 一、部署前准备 1.1 查询官方文档部署环境及配置要求-此处不赘述 1.2 检测及关闭系统 swap echo &#34;vm.swappiness = 0&#34;&gt;&gt; /etc/sysctl.conf swapoff -a &amp;&amp; swapon -a sysctl -p 1.3 检测及关闭目标部署机器的防火墙 检查防火墙状态
sudo firewall-cmd --state sudo systemctl status firewalld.service 关闭防火墙服务
sudo systemctl stop firewalld.service 关闭防火墙自动启动服务
sudo systemctl disable firewalld.service 检查防火墙状态
sudo systemctl status firewalld.service 1.4 检测及安装 NTP 服务 执行以下命令，如果输出 running 表示 NTP 服务正在运行：
sudo systemctl status ntpd.service 输出结果： ntpd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/29c55b54bf3671e989b0f074db63cfd6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-04T16:11:36+08:00" />
<meta property="article:modified_time" content="2023-04-04T16:11:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">TiDB集群部署最细化教程-亲测有效</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="TiDBTiUP_1"></a>TiDB-TiUP集群部署</h3> 
<p>本次部署使用环境：</p> 
<pre><code>CentOS Linux release 7.9.2009 (Core)
TiDB 6.5.1
三台服务器：
(内)172.19.172.179
(内)172.19.172.180
(内)172.19.172.182
</code></pre> 
<h4><a id="_14"></a>一、部署前准备</h4> 
<h5><a id="11__16"></a>1.1 查询官方文档部署环境及配置要求-此处不赘述</h5> 
<h5><a id="12__swap_18"></a>1.2 检测及关闭系统 swap</h5> 
<pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"vm.swappiness = 0"</span><span class="token operator">&gt;&gt;</span> /etc/sysctl.conf
swapoff -a <span class="token operator">&amp;&amp;</span> <span class="token function">swapon</span> -a
sysctl -p
</code></pre> 
<h5><a id="13__26"></a>1.3 检测及关闭目标部署机器的防火墙</h5> 
<ol><li> <p>检查防火墙状态</p> <pre><code>sudo firewall-cmd --state
sudo systemctl status firewalld.service
</code></pre> </li><li> <p>关闭防火墙服务</p> <pre><code>sudo systemctl stop firewalld.service
</code></pre> </li><li> <p>关闭防火墙自动启动服务</p> <pre><code>sudo systemctl disable firewalld.service
</code></pre> </li><li> <p>检查防火墙状态</p> <pre><code>sudo systemctl status firewalld.service
</code></pre> </li></ol> 
<h5><a id="14__NTP__53"></a>1.4 检测及安装 NTP 服务</h5> 
<p>执行以下命令，如果输出 <code>running</code> 表示 NTP 服务正在运行：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl status ntpd.service

输出结果：
ntpd.service - Network Time Service
Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/ntpd.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since 一 <span class="token number">2017</span>-12-18 <span class="token number">13</span>:13:19 CST<span class="token punctuation">;</span> 3s ago
</code></pre> 
<ul><li> <p>若返回报错信息 <code>Unit ntpd.service could not be found.</code>，尝试执行以下命令，以查看与 NTP 进行时钟同步所使用的系统配置是 <code>chronyd</code> 还是 <code>ntpd</code>：</p> <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl status chronyd.service

输出结果：显示使用的chronyd
chronyd.service - NTP client/server
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/chronyd.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Fri <span class="token number">2023</span>-03-24 09:13:26 CST<span class="token punctuation">;</span> <span class="token number">1</span> weeks <span class="token number">4</span> days ago
     Docs: man:chronyd<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
           man:chrony.conf<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">565</span> <span class="token punctuation">(</span>chronyd<span class="token punctuation">)</span>
   CGroup: /system.slice/chronyd.service
           └─565 /usr/sbin/chronyd
</code></pre> <p>若发现系统既没有配置 <code>chronyd</code> 也没有配置 <code>ntpd</code>，则表示系统尚未安装任一服务。此时，应先安装其中一个服务，并保证它可以自动启动，默认使用 <code>ntpd</code>；自行百度安装<code>chronyd</code>或<code>ntpd</code>，此处不赘述</p> </li></ul> 
<h5><a id="15__SSH__sudo__84"></a>1.5 手动配置 SSH 互信及 sudo 免密码</h5> 
<ol><li> <p>以 <code>root</code> 用户依次登录到部署目标机器创建 <code>tidb</code> 用户并设置登录密码.</p> <pre><code class="prism language-bash"><span class="token function">useradd</span> tidb <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
<span class="token function">passwd</span> tidb

如已有tidb用户，直接执行
<span class="token function">passwd</span> tidb 修改密码
</code></pre> </li><li> <p>执行以下命令，将 <code>tidb ALL=(ALL) NOPASSWD: ALL</code> 添加到文件末尾，即配置好 <code>sudo</code> 免密码.</p> <pre><code class="prism language-bash">打开文件，进行编辑
visudo
默认添加，并保存
tidb <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> NOPASSWD: ALL
</code></pre> </li><li> <p>以 <code>tidb</code> 用户登录到中控机，执行以下命令。将 <code>10.0.1.1</code> 替换成你的部署目标机器 IP，按提示输入部署目标机器 <code>tidb</code> 用户密码，执行成功后即创建好 SSH 互信，其他机器同理。新建的 <code>tidb</code> 用户下没有 <code>.ssh</code> 目录，需要执行生成 rsa 密钥的命令来生成 <code>.ssh</code> 目录。如果要在中控机上部署 TiDB 组件，需要为中控机和中控机自身配置互信。</p> <pre><code class="prism language-bash">创建秘钥文件，可直接一路回车
ssh-keygen -t rsa
将秘钥文件copy至目标主机
ssh-copy-id -i ~/.ssh/id_rsa.pub <span class="token number">10.0</span>.1.1
</code></pre> 
  <ul><li>如果出现<code>ERROR: failed to open ID file '/home/ismail/.pub': No such file </code>报错，检查文件名称、当前执行用户、目标主机地址</li><li>如果中控机也是集群主机的其中一个，也需要按照以上命令进行配置，让其自身能正常通信</li></ul> </li><li> <p>以 <code>tidb</code> 用户登录中控机，通过 <code>ssh</code> 的方式登录目标机器 IP。如果不需要输入密码并登录成功，即表示 SSH 互信配置成功。</p> <pre><code class="prism language-bash">免密访问目标主机
<span class="token function">ssh</span> <span class="token number">10.0</span>.1.1
更换用户后表明成功
<span class="token punctuation">[</span>tidb@10.0.1.1 ~<span class="token punctuation">]</span>$
</code></pre> </li><li> <p>以 <code>tidb</code> 用户登录到部署目标机器后，执行以下命令，不需要输入密码并切换到 <code>root</code> 用户，表示 <code>tidb</code> 用户 sudo 免密码配置成功。</p> <pre><code class="prism language-bash">切换用户
<span class="token function">sudo</span> -su root
切换成功
<span class="token punctuation">[</span>root@10.0.1.1 tidb<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> </li></ol> 
<h4><a id="_135"></a>二、部署过程</h4> 
<p>在中控机上部署 TiUP 组件有两种方式：在线部署和离线部署。本文使用的是在线安装方式，离线安装查看官方文档.</p> 
<h5><a id="1_139"></a>1.在线部署</h5> 
<p>以普通用户身份或<code>root</code>用户登录中控机。以 <code>tidb</code> 用户为例，后续安装 TiUP 及集群管理操作均通过该用户完成：</p> 
<ol><li> <p>执行如下命令安装 TiUP 工具：</p> <pre><code class="prism language-bash"><span class="token function">curl</span> --proto <span class="token string">'=https'</span> --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre> </li><li> <p>按如下步骤设置 TiUP 环境变量：</p> 
  <ul><li> <p>重新声明全局环境变量：</p> <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> .bash_profile
</code></pre> </li><li> <p>确认 TiUP 工具是否安装：</p> <pre><code class="prism language-bash"><span class="token function">which</span> tiup

输出结果
/root/.tiup/bin/tiup
</code></pre> </li></ul> </li><li> <p>安装 TiUP cluster 组件：</p> <pre><code class="prism language-bash">tiup cluster
</code></pre> </li><li> <p>如果已经安装，则更新 TiUP cluster 组件至最新版本：</p> <pre><code class="prism language-bash">tiup update --self <span class="token operator">&amp;&amp;</span> tiup update cluster
</code></pre> <p>预期输出 <code>“Update successfully!”</code> 字样。</p> </li><li> <p>验证当前 TiUP cluster 版本信息。执行如下命令查看 TiUP cluster 组件版本：</p> <pre><code class="prism language-bash">tiup --binary cluster
</code></pre> <p>输出结果<code>"/root/.tiup/components/cluster/v1.12.0/tiup-cluster"</code>字样</p> </li></ol> 
<h5><a id="2__188"></a>2. 初始化集群拓扑文件</h5> 
<p>执行如下命令，生成集群初始化配置文件：该文件是默认的配置文件，可根据需要自定配置内容</p> 
<pre><code class="prism language-bash">tiup cluster template <span class="token operator">&gt;</span> topology.yaml
</code></pre> 
<p>执行 vi topology.yaml，查看配置文件的内容：</p> 
<pre><code class="prism language-bash">global:
  user: <span class="token string">"tidb"</span>
  ssh_port: <span class="token number">22</span>
  deploy_dir: <span class="token string">"/tidb-deploy"</span>
  data_dir: <span class="token string">"/tidb-data"</span>
server_configs: <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
pd_servers:
  - host: <span class="token number">10.0</span>.1.4
  - host: <span class="token number">10.0</span>.1.5
  - host: <span class="token number">10.0</span>.1.6
tidb_servers:
  - host: <span class="token number">10.0</span>.1.7
  - host: <span class="token number">10.0</span>.1.8
  - host: <span class="token number">10.0</span>.1.9
tikv_servers:
  - host: <span class="token number">10.0</span>.1.1
  - host: <span class="token number">10.0</span>.1.2
  - host: <span class="token number">10.0</span>.1.3
monitoring_servers:
  - host: <span class="token number">10.0</span>.1.4
grafana_servers:
  - host: <span class="token number">10.0</span>.1.4
alertmanager_servers:
  - host: <span class="token number">10.0</span>.1.4
</code></pre> 
<p>我的配置文件内容：</p> 
<pre><code class="prism language-shell">global:
  user: <span class="token string">"tidb"</span>
  ssh_port: <span class="token number">22</span>
  deploy_dir: <span class="token string">"/tidb-deploy"</span>
  data_dir: <span class="token string">"/tidb-data"</span>
  
<span class="token comment"># # Monitored variables are applied to all the machines.</span>
monitored:
  node_exporter_port: <span class="token number">9100</span>
  blackbox_exporter_port: <span class="token number">9115</span>

<span class="token comment"># # Server configs are used to specify the runtime configuration of TiDB components.</span>
server_configs:
  tidb:
    log.level: debug
    log.slow-query-file: tidb-slow.log
  tikv:
    readpool.storage.use-unified-pool: <span class="token boolean">false</span>
    readpool.coprocessor.use-unified-pool: <span class="token boolean">true</span>
  pd:
    schedule.leader-schedule-limit: <span class="token number">4</span>
    schedule.region-schedule-limit: <span class="token number">2048</span>
    schedule.replica-schedule-limit: <span class="token number">64</span>
  <span class="token comment"># tiflash:</span>
  <span class="token comment"># tiflash-learner:</span>

<span class="token comment"># # Server configs are used to specify the configuration of PD Servers.</span>
pd_servers:
  <span class="token comment"># # The ip address of the PD Server.</span>
  - host: <span class="token number">172.19</span>.172.179
    name: pd-207
  - host: <span class="token number">172.19</span>.172.180
    name: pd-90
  - host: <span class="token number">172.19</span>.172.182
    name: pd-126
    
<span class="token comment"># # Server configs are used to specify the configuration of TiDB Servers.</span>
tidb_servers:
  <span class="token comment"># # The ip address of the TiDB Server.</span>
  - host: <span class="token number">172.19</span>.172.179
  - host: <span class="token number">172.19</span>.172.180
  - host: <span class="token number">172.19</span>.172.182

<span class="token comment"># # Server configs are used to specify the configuration of TiKV Servers.</span>
tikv_servers:
  <span class="token comment"># # The ip address of the TiKV Server.</span>
  - host: <span class="token number">172.19</span>.172.179
  - host: <span class="token number">172.19</span>.172.180
  - host: <span class="token number">172.19</span>.172.182

<span class="token comment"># # Server configs are used to specify the configuration of Prometheus Server.</span>
monitoring_servers:
  <span class="token comment"># # The ip address of the Monitoring Server.</span>
  - host: <span class="token number">172.19</span>.172.179

<span class="token comment"># # Server configs are used to specify the configuration of Grafana Servers.  </span>
grafana_servers:
  <span class="token comment"># # The ip address of the Grafana Server.</span>
  - host: <span class="token number">172.19</span>.172.179
</code></pre> 
<h5><a id="3__289"></a>3. 执行部署命令</h5> 
<p>执行部署命令前，先使用 <code>check</code> 及 <code>check --apply</code> 命令检查和自动修复集群存在的潜在风险：</p> 
<ol><li> <p>检查集群存在的潜在风险：</p> <pre><code class="prism language-sh">tiup cluster check ./topology.yaml --user root [-p] [-i /home/root/.ssh/gcp_rsa]
</code></pre> </li><li> <p>自动修复集群存在的潜在风险：</p> <pre><code class="prism language-sh">tiup cluster check ./topology.yaml --apply --user root [-p] [-i /home/root/.ssh/gcp_rsa]
</code></pre> </li><li> <p>部署 TiDB 集群：<code>tidb-test</code>为集群名称，可自定</p> <pre><code class="prism language-sh">tiup cluster deploy tidb-test v6.5.1 ./topology.yaml --user root [-p] [-i /home/root/.ssh/gcp_rsa]
</code></pre> </li></ol> 
<p>以上部署示例中：</p> 
<ul><li><code>tidb-test</code> 为部署的集群名称。</li><li><code>v6.5.1</code> 为部署的集群版本，可以通过执行 <code>tiup list tidb</code> 来查看 TiUP 支持的最新可用版本。</li><li>初始化配置文件为 <code>topology.yaml</code>。</li><li><code>--user root</code> 表示通过 root 用户登录到目标主机完成集群部署，该用户需要有 ssh 到目标机器的权限，并且在目标机器有 sudo 权限。也可以用其他有 ssh 和 sudo 权限的用户完成部署。</li><li>[-i] 及 [-p] 为可选项，如果已经配置免密登录目标机，则不需填写。否则选择其一即可，[-i] 为可登录到目标机的 root 用户（或 --user 指定的其他用户）的私钥，也可使用 [-p] 交互式输入该用户的密码。</li></ul> 
<p>预期日志结尾输出 <code>Deployed cluster </code>tidb-test<code> successfully</code> 关键词，表示部署成功。</p> 
<h5><a id="5__TiUP__321"></a>5. 查看 TiUP 管理的集群情况</h5> 
<pre><code class="prism language-sh">tiup cluster list
</code></pre> 
<p>TiUP 支持管理多个 TiDB 集群，该命令会输出当前通过 TiUP cluster 管理的所有集群信息，包括集群名称、部署用户、版本、密钥信息等。</p> 
<p>输出结果内容：</p> 
<pre><code class="prism language-sh">tiup is checking updates for component cluster ...
Starting component `cluster`: /root/.tiup/components/cluster/v1.12.0/tiup-cluster list
Name       User  Version  Path                                            PrivateKey
----       ----  -------  ----                                            ----------
tidb-test  tidb  v6.5.1   /root/.tiup/storage/cluster/clusters/tidb-test /root/.tiup/storage/cluster/clusters/tidb-test/ssh/id_rsa
</code></pre> 
<h5><a id="6__TiDB__339"></a>6. 检查部署的 TiDB 集群情况</h5> 
<p>例如，执行如下命令检查 <code>tidb-test</code> 集群情况：<code>tidb-test</code>为集群名称</p> 
<pre><code class="prism language-sh">tiup cluster display tidb-test
</code></pre> 
<p>预期输出包括 <code>tidb-test</code> 集群中实例 ID、角色、主机、监听端口和状态（由于还未启动，所以状态为 Down/inactive）、目录信息。</p> 
<p>未启动时的日志输出</p> 
<pre><code>Cluster type:       tidb
Cluster name:       tidb-test
Cluster version:    v6.5.1
Deploy user:        tidb
SSH type:           builtin
Grafana URL:        http://172.19.172.179:3000
ID                    Role        Host            Ports        OS/Arch       Status  Data Dir                    Deploy Dir
--                    ----        ----            -----        -------       ------  --------                    ----------
172.19.172.179:3000   grafana     172.19.172.179  3000         linux/x86_64  Down    -                           /tidb-deploy/grafana-3000
172.19.172.179:2379   pd          172.19.172.179  2379/2380    linux/x86_64  Down    /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.180:2379   pd          172.19.172.180  2379/2380    linux/x86_64  Down    /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.182:2379   pd          172.19.172.182  2379/2380    linux/x86_64  Down    /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.179:9090   prometheus  172.19.172.179  9090/12020   linux/x86_64  Down    /tidb-data/prometheus-9090  /tidb-deploy/prometheus-9090
172.19.172.179:4000   tidb        172.19.172.179  4000/10080   linux/x86_64  Down    -                           /tidb-deploy/tidb-4000
172.19.172.180:4000   tidb        172.19.172.180  4000/10080   linux/x86_64  Down    -                           /tidb-deploy/tidb-4000
172.19.172.182:4000   tidb        172.19.172.182  4000/10080   linux/x86_64  Down    -                           /tidb-deploy/tidb-4000
172.19.172.179:20160  tikv        172.19.172.179  20160/20180  linux/x86_64  N/A     /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
172.19.172.180:20160  tikv        172.19.172.180  20160/20180  linux/x86_64  N/A     /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
172.19.172.182:20160  tikv        172.19.172.182  20160/20180  linux/x86_64  N/A     /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
</code></pre> 
<h5><a id="7__373"></a>7. 启动集群</h5> 
<p>安全启动是 TiUP cluster 从 v1.9.0 起引入的一种新的启动方式，采用该方式启动数据库可以提高数据库安全性。推荐使用安全启动。</p> 
<p>安全启动后，TiUP 会自动生成 TiDB root 用户的密码，并在命令行界面返回密码。</p> 
<p>注意</p> 
<ul><li>使用安全启动方式后，不能通过无密码的 root 用户登录数据库，你需要记录命令行返回的密码进行后续操作。</li><li>该自动生成的密码只会返回一次，如果没有记录或者忘记该密码，请参照<a href="https://docs.pingcap.com/zh/tidb/stable/user-account-management#%E5%BF%98%E8%AE%B0-root-%E5%AF%86%E7%A0%81" rel="nofollow">忘记 root 密码</a>修改密码。</li></ul> 
<p>方式一：安全启动</p> 
<pre><code class="prism language-sh">tiup cluster start tidb-test --init
</code></pre> 
<p>预期结果如下，表示启动成功。</p> 
<pre><code class="prism language-sh">Started cluster `tidb-test` successfully
The root password of TiDB database has been changed.
The new password is: '*********'.
Copy and record it to somewhere safe, it is only displayed once, and will not be stored.
The generated password can NOT be get and shown again.
[root@node207 ~]# tiup cluster display tidb-test
tiup is checking updates for component cluster ...
Starting component `cluster`: /root/.tiup/components/cluster/v1.12.0/tiup-cluster display tidb-test
Cluster type:       tidb
Cluster name:       tidb-test
Cluster version:    v6.5.1
Deploy user:        tidb
SSH type:           builtin
Dashboard URL:      http://172.19.172.179:2379/dashboard
Grafana URL:        http://172.19.172.179:3000
ID                    Role        Host            Ports        OS/Arch       Status   Data Dir                    Deploy Dir
--                    ----        ----            -----        -------       ------   --------                    ----------
172.19.172.179:3000   grafana     172.19.172.179  3000         linux/x86_64  Up       -                           /tidb-deploy/grafana-3000
172.19.172.179:2379   pd          172.19.172.179  2379/2380    linux/x86_64  Up|L|UI  /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.180:2379   pd          172.19.172.180  2379/2380    linux/x86_64  Up       /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.182:2379   pd          172.19.172.182  2379/2380    linux/x86_64  Up       /tidb-data/pd-2379          /tidb-deploy/pd-2379
172.19.172.179:9090   prometheus  172.19.172.179  9090/12020   linux/x86_64  Up       /tidb-data/prometheus-9090  /tidb-deploy/prometheus-9090
172.19.172.179:4000   tidb        172.19.172.179  4000/10080   linux/x86_64  Up       -                           /tidb-deploy/tidb-4000
172.19.172.180:4000   tidb        172.19.172.180  4000/10080   linux/x86_64  Up       -                           /tidb-deploy/tidb-4000
172.19.172.182:4000   tidb        172.19.172.182  4000/10080   linux/x86_64  Up       -                           /tidb-deploy/tidb-4000
172.19.172.179:20160  tikv        172.19.172.179  20160/20180  linux/x86_64  Up       /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
172.19.172.180:20160  tikv        172.19.172.180  20160/20180  linux/x86_64  Up       /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
172.19.172.182:20160  tikv        172.19.172.182  20160/20180  linux/x86_64  Up       /tidb-data/tikv-20160       /tidb-deploy/tikv-20160
</code></pre> 
<p>方式二：普通启动</p> 
<pre><code class="prism language-sh">tiup cluster start tidb-test
</code></pre> 
<p>预期结果输出 <code>Started cluster </code>tidb-test<code> successfully</code>，表示启动成功。使用普通启动方式后，可通过无密码的 root 用户登录数据库。</p> 
<h5><a id="8__431"></a>8. 验证集群运行状态</h5> 
<pre><code class="prism language-sh">tiup cluster display tidb-test
</code></pre> 
<p>预期结果输出：各节点 Status 状态信息为 <code>Up</code> 说明集群状态正常。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74b3fce237818664b3d81506dffb2ba8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">uview城市选择器、省市区选择器（不含港澳台数据 ，需要的自己手动添加数据）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/adb79ad830d08a92b641e05b62b89e37/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第一章 Python概述</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>