<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GB/T28181协议介绍 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GB/T28181协议介绍" />
<meta property="og:description" content="GB/T28181协议介绍 文章目录 GB/T28181协议介绍总体介绍GB/T28181基本结构GB/T28181关键协议流程设备注册设备目录查询实时视频播放流程 GB/T28181协议总结 说到GB/T28181协议，如果你是从事视频监控领域的工作，那对他一定不陌生，在公共安全、城市治理、政务监管、企事业监管等涉及视频汇聚、视频监控等场景，它已经是视频终端设备、监控平台必须支持的视频协议，可以说是视频监控界的头号玩家，用来规定视频监控系统如何传输、交换和控制信息。本文主要对协议基础知识进行介绍，后续会专门从视频流的角度写一篇文章，详细介绍GB/T28181协议如何进行视频流协议申请、流封装和传输的。 总体介绍 GB/T28181协议，全名叫《安全防范视频监控联网系统信息传输、交换、控制技术要求》，是由中国国家标准委员会发布的一种国家级的标准。它主要对视频监控系统的各个方面做了明确的规定，使得不同厂商生产的视频监控设备能够相互连通，信息共享，提高整个监控系统的效率和可靠性。28181协议从2011年发行第一个版本以来已经连续迭代了3个版本，最新发布版本为GB/T28181-2016，最新的协议文档可通过点击文末的阅读原文获取。在公安、政府、企事业单位等视频监控类项目中，28181协议基本是IPC、NVR、平台、视频边界网关必须支持的流媒体协议。
28181协议包含设备注册、实时音视频点播、设备控制、报警时间通知和分发、设备信息查询、状态信息报送、历史音视频文件检索、历史音视频文件回放和下载、网络校时、订阅和通知、语音对讲和语音广播等内容，具体详细介绍可参考《GB/T28181-2016 安全防范视频监控联网系统信息传输、交换、控制技术要求》，规范文档可关注公众号：壹零仓，发送：协议规范，获取。本文主要介绍下28181基本结构、关键协议流程及应用场景介绍。
GB/T28181基本结构 28181协议基本结构如下如所示：
28181协议包含终端侧协议和平台侧协议，终端侧包含IPC、NVR等终端设备，平台侧包含NVR、视频平台、网闸等。IPC通过28181协议接入视频监控平台或NVR；NVR可向下接入IPC，向上接入视频监控平台；GB28181支持多级级联，因此视频监控平台之间可通过28181协议级联，实现协议交换和视频传输。这里视频网闸作为网络安全边界，在公安跨网传输时作为安全网络区域与非安全网络区域之间的网络隔离设施，支持28181的协议通道，因此上下级视频监控平台可直接通过28181协议实现跨网闸通信。
28181协议结构如下图所示：
协议包含两个通道会话通道和媒体流通道，会话通道包含信令交互、视频会话，主要基于sip进行扩展，流媒体通道通过RTP/RTCP进行传输，其中传输层协议最新版本28181规范已经可以支持TCP和UDP两种方式。下面对信令交互、音视频会话、音视频传输三种类型的协议进行介绍：
信令交互：信令交互协议是28181协议的基础，其在sip协议的基础上进行了扩展，扩展协议IETF RFC3428规定的MESSAGE方法实现，协议体为xml格式。主要的SIP消息有注册、心跳、设备搜索、设备状态查询、设备控制等。音视频会话：包含视频预览和视频回放，视频预览采用sip的INVITE、ACK、BYE方法实现，媒体协议通过SDP协议来携带；视频回放采用SIP INVITE实现会话连接，擦用SIP INFO方法实现回放命令控制，控制协议命令引用MANSRTSP的PLAY、PARUSE、TREADOWN等命令。音视频传输：通过视频会话建立视频传输通道后，通过RTP/RTCP进行视频传输，传输的音视频封包方式为PS流，有关PS流封装方式详解，关注公众号：壹零仓，发送：ps，获取相关文章。 GB/T28181关键协议流程 本文主要介绍关键的协议流程，包含设备注册、设备目录查询、视频播放等流程，要通过28181协议实现流媒体协议的交互，这几个协议流程是绕不开的，有关28181视频流交互的详细解析，后续会单独写一篇文章来介绍。
设备注册 这里以IPC向视频平台注册为例，设备注册流程如下：
IPC向视频平台发起Register注册请求，携带设备信息。视频平台收到注册请求后，判断是否携带认证信息，如果未携带，则返回401，鉴权失败。IPC根据平台鉴权的要求，携带Anthorization认证信息，重新发起注册请求。平台对认证信息进行认证，认证通过后，返回200，注册成功。 这里要注意鉴权方式，平台回复401时会携带WWW-Authenticate头字段，此字段包含平台支持的鉴权方式，一般方式有basic、digest等。IPC需要根据平台支持的鉴权方式进行认证信息的封装。
设备目录查询 设备目录查询主要查询设备/下级平台的目录结构，通过查询目录结构之后获取设备摄像头列表信息，通过摄像头列表信息，平台才可选择摄像头进行摄像头视频播放等操作，28181所有信令操作流程基本类似，了解了此协议流程，其他信令交互可参照。
28181信令交互采用异步交互的方式，请求消息和响应消息异步进行。
1.平台向IPC发起目录查询请求(catlog)，携带查询设备ID。
2.设备直接返回200 OK，不携带响应
3.设备向平台发送目录查询响应信息，携带设备目录信息
4.平台接收响应信息，返回200 OK
实时视频播放流程 视频播放采用SIP IETF RFC 3216规定的INVITE、ACK、BYE方法，还是以视频平台向IPC申请视频为例，来说明28181视频播放流程：
视频平台向IPC发起INVITE请求，SDP携带视频播放信息。IPC收到INVITE请求后，根据SDP携带的信息，进行视频流推送准备，返回响应信息，携带SDP音视频描述信息。视频平台收到响应信息后，根据SDP音视频描述信息，进行视频流接收准备并返送ACK到IPC。IPC收到ACK后，进行音视频流推送，音视频流封装为PS格式，并通过RTP/RTCP传输。 GB/T28181协议总结 GB/T 28181协议的应用可以说是无处不在，比如公共安全、城市管理、企事业等监控领域都有它的身影。接下来我们就来聊聊它的应用场景。
GB/T 28181协议作为公共安全领域中的重要标准之一，规范了视频监控联网系统的信息传输、交换和控制，提高了不同厂商生产的视频监控设备的互联互通性和信息共享性。它不仅在公共安全领域中发挥着重要作用，也在智能家居、企业应用和城市管理等领域有着广泛的应用。通过遵循GB/T 28181协议的规定，我们可以有效地提高视频监控系统的可靠性和有效性，保障我们的安全和生活秩序。
有关GB28181更多文章，关注公众号：壹零仓，发送：28181，获取。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0fbec3f98d09c20d21d17bd48ef9541a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-25T18:46:09+08:00" />
<meta property="article:modified_time" content="2023-10-25T18:46:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GB/T28181协议介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="GBT28181_0"></a>GB/T28181协议介绍</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#GBT28181_0" rel="nofollow">GB/T28181协议介绍</a></li><li><ul><li><a href="#_5" rel="nofollow">总体介绍</a></li><li><a href="#GBT28181_11" rel="nofollow">GB/T28181基本结构</a></li><li><a href="#GBT28181_25" rel="nofollow">GB/T28181关键协议流程</a></li><li><ul><li><a href="#_29" rel="nofollow">设备注册</a></li><li><a href="#_42" rel="nofollow">设备目录查询</a></li><li><a href="#_53" rel="nofollow">实时视频播放流程</a></li></ul> 
   </li><li><a href="#GBT28181_63" rel="nofollow">GB/T28181协议总结</a></li></ul> 
 </li></ul> 
</div> 
<br> 说到GB/T28181协议，如果你是从事视频监控领域的工作，那对他一定不陌生，在公共安全、城市治理、政务监管、企事业监管等涉及视频汇聚、视频监控等场景，它已经是视频终端设备、监控平台必须支持的视频协议，可以说是视频监控界的头号玩家，用来规定视频监控系统如何传输、交换和控制信息。本文主要对协议基础知识进行介绍，后续会专门从视频流的角度写一篇文章，详细介绍GB/T28181协议如何进行视频流协议申请、流封装和传输的。 
<p></p> 
<h3><a id="_5"></a>总体介绍</h3> 
<p>GB/T28181协议，全名叫《安全防范视频监控联网系统信息传输、交换、控制技术要求》，是由中国国家标准委员会发布的一种国家级的标准。它主要对视频监控系统的各个方面做了明确的规定，使得不同厂商生产的视频监控设备能够相互连通，信息共享，提高整个监控系统的效率和可靠性。28181协议从2011年发行第一个版本以来已经连续迭代了3个版本，最新发布版本为GB/T28181-2016，最新的协议文档可通过点击文末的阅读原文获取。在公安、政府、企事业单位等视频监控类项目中，28181协议基本是IPC、NVR、平台、视频边界网关必须支持的流媒体协议。</p> 
<p>28181协议包含设备注册、实时音视频点播、设备控制、报警时间通知和分发、设备信息查询、状态信息报送、历史音视频文件检索、历史音视频文件回放和下载、网络校时、订阅和通知、语音对讲和语音广播等内容，具体详细介绍可参考《GB/T28181-2016 安全防范视频监控联网系统信息传输、交换、控制技术要求》，规范文档可关注<strong>公</strong>众<strong>号</strong>：<strong>壹</strong>零<strong>仓</strong>，发送：<strong>协议规范</strong>，获取。本文主要介绍下28181基本结构、关键协议流程及应用场景介绍。</p> 
<h3><a id="GBT28181_11"></a>GB/T28181基本结构</h3> 
<p>28181协议基本结构如下如所示：<br> <img src="https://images2.imgbox.com/7e/4c/2AN66plL_o.png" alt="1"></p> 
<p>28181协议包含终端侧协议和平台侧协议，终端侧包含IPC、NVR等终端设备，平台侧包含NVR、视频平台、网闸等。IPC通过28181协议接入视频监控平台或NVR；NVR可向下接入IPC，向上接入视频监控平台；GB28181支持多级级联，因此视频监控平台之间可通过28181协议级联，实现协议交换和视频传输。这里视频网闸作为网络安全边界，在公安跨网传输时作为安全网络区域与非安全网络区域之间的网络隔离设施，支持28181的协议通道，因此上下级视频监控平台可直接通过28181协议实现跨网闸通信。<br> 28181协议结构如下图所示：<br> <img src="https://images2.imgbox.com/78/26/TqETaq9u_o.png" alt="1"><br> 协议包含两个通道会话通道和媒体流通道，会话通道包含信令交互、视频会话，主要基于sip进行扩展，流媒体通道通过RTP/RTCP进行传输，其中传输层协议最新版本28181规范已经可以支持TCP和UDP两种方式。下面对信令交互、音视频会话、音视频传输三种类型的协议进行介绍：</p> 
<ul><li>信令交互：信令交互协议是28181协议的基础，其在sip协议的基础上进行了扩展，扩展协议IETF RFC3428规定的MESSAGE方法实现，协议体为xml格式。主要的SIP消息有注册、心跳、设备搜索、设备状态查询、设备控制等。</li><li>音视频会话：包含视频预览和视频回放，视频预览采用sip的INVITE、ACK、BYE方法实现，媒体协议通过SDP协议来携带；视频回放采用SIP INVITE实现会话连接，擦用SIP INFO方法实现回放命令控制，控制协议命令引用MANSRTSP的PLAY、PARUSE、TREADOWN等命令。</li><li>音视频传输：通过视频会话建立视频传输通道后，通过RTP/RTCP进行视频传输，传输的音视频封包方式为PS流，有关PS流封装方式详解，关注<strong>公</strong>众<strong>号</strong>：<strong>壹</strong>零<strong>仓</strong>，发送：<strong>ps</strong>，获取相关文章。</li></ul> 
<h3><a id="GBT28181_25"></a>GB/T28181关键协议流程</h3> 
<p>本文主要介绍关键的协议流程，包含设备注册、设备目录查询、视频播放等流程，要通过28181协议实现流媒体协议的交互，这几个协议流程是绕不开的，有关28181视频流交互的详细解析，后续会单独写一篇文章来介绍。</p> 
<h4><a id="_29"></a>设备注册</h4> 
<p>这里以IPC向视频平台注册为例，设备注册流程如下：</p> 
<p><img src="https://images2.imgbox.com/de/a5/HR5YsaVk_o.png" alt="1"></p> 
<ol><li>IPC向视频平台发起Register注册请求，携带设备信息。</li><li>视频平台收到注册请求后，判断是否携带认证信息，如果未携带，则返回401，鉴权失败。</li><li>IPC根据平台鉴权的要求，携带Anthorization认证信息，重新发起注册请求。</li><li>平台对认证信息进行认证，认证通过后，返回200，注册成功。</li></ol> 
<p>这里要注意鉴权方式，平台回复401时会携带WWW-Authenticate头字段，此字段包含平台支持的鉴权方式，一般方式有basic、digest等。IPC需要根据平台支持的鉴权方式进行认证信息的封装。</p> 
<h4><a id="_42"></a>设备目录查询</h4> 
<p>设备目录查询主要查询设备/下级平台的目录结构，通过查询目录结构之后获取设备摄像头列表信息，通过摄像头列表信息，平台才可选择摄像头进行摄像头视频播放等操作，28181所有信令操作流程基本类似，了解了此协议流程，其他信令交互可参照。<br> <img src="https://images2.imgbox.com/fa/f6/05RnpaxT_o.png" alt="1"><br> 28181信令交互采用异步交互的方式，请求消息和响应消息异步进行。</p> 
<p>1.平台向IPC发起目录查询请求(catlog)，携带查询设备ID。<br> 2.设备直接返回200 OK，不携带响应<br> 3.设备向平台发送目录查询响应信息，携带设备目录信息<br> 4.平台接收响应信息，返回200 OK</p> 
<h4><a id="_53"></a>实时视频播放流程</h4> 
<p>视频播放采用SIP IETF RFC 3216规定的INVITE、ACK、BYE方法，还是以视频平台向IPC申请视频为例，来说明28181视频播放流程：<br> <img src="https://images2.imgbox.com/2a/6f/KeC7l1fi_o.png" alt="1"></p> 
<ol><li>视频平台向IPC发起INVITE请求，SDP携带视频播放信息。</li><li>IPC收到INVITE请求后，根据SDP携带的信息，进行视频流推送准备，返回响应信息，携带SDP音视频描述信息。</li><li>视频平台收到响应信息后，根据SDP音视频描述信息，进行视频流接收准备并返送ACK到IPC。</li><li>IPC收到ACK后，进行音视频流推送，音视频流封装为PS格式，并通过RTP/RTCP传输。</li></ol> 
<h3><a id="GBT28181_63"></a>GB/T28181协议总结</h3> 
<p>GB/T 28181协议的应用可以说是无处不在，比如公共安全、城市管理、企事业等监控领域都有它的身影。接下来我们就来聊聊它的应用场景。<br> GB/T 28181协议作为公共安全领域中的重要标准之一，规范了视频监控联网系统的信息传输、交换和控制，提高了不同厂商生产的视频监控设备的互联互通性和信息共享性。它不仅在公共安全领域中发挥着重要作用，也在智能家居、企业应用和城市管理等领域有着广泛的应用。通过遵循GB/T 28181协议的规定，我们可以有效地提高视频监控系统的可靠性和有效性，保障我们的安全和生活秩序。</p> 
<hr> 
<p>有关GB28181更多文章，关注<strong>公</strong>众<strong>号</strong>：<strong>壹</strong>零<strong>仓</strong>，发送：<strong>28181</strong>，获取。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/46161f1036ce3c764b53c83a31ab7b97/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JS获取中文拼音</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7a3bbdcff21b796524e875bc17a2fed5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux基础知识——用户与用户组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>