<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot Starter介绍和实战 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring Boot Starter介绍和实战" />
<meta property="og:description" content="引言 Spring Boot Starter 是 Spring Boot 提供的一种机制，用于简化和集成应用程序的依赖管理。通过创建自定义的 Starter，可以将一组相关的依赖打包成一个简单的、可重用的模块，使应用程序的配置和依赖管理更加方便。在本文中，我们将深入探讨 Spring Boot Starter 的原理、创建过程，并通过实际示例演示其用法。
1. Spring Boot Starter 简介 Spring Boot Starter 是 Spring Boot 提供的一种约定，用于简化应用程序的依赖管理。它定义了一组通用的模块，每个模块关注一个特定的领域，例如数据库访问、消息队列、缓存等。这样，开发者可以根据需求选择相应的 Starter，并通过简单的配置即可引入所需的依赖。
Spring Boot Starter 的命名约定为 spring-boot-starter-*，例如：
spring-boot-starter-data-jpa: 用于数据持久化的 Starter。spring-boot-starter-web: 用于构建 Web 应用程序的 Starter。spring-boot-starter-actuator: 提供生产就绪功能的 Starter。 2. Spring Boot Starter 实战 2.1. 创建自定义 Starter 下面演示如何在 Spring Boot Starter 中使用注解记录操作审计的功能。
首先创建一个 Maven 项目作为 Spring Boot Starter。在项目中添加以下依赖：
&lt;!-- pom.xml --&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b269264356c941bf941453b2d897b30b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-11T11:15:48+08:00" />
<meta property="article:modified_time" content="2024-01-11T11:15:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot Starter介绍和实战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>引言</h3> 
<p>Spring Boot Starter 是 Spring Boot 提供的一种机制，用于简化和集成应用程序的依赖管理。通过创建自定义的 Starter，可以将一组相关的依赖打包成一个简单的、可重用的模块，使应用程序的配置和依赖管理更加方便。在本文中，我们将深入探讨 Spring Boot Starter 的原理、创建过程，并通过实际示例演示其用法。</p> 
<h3>1. Spring Boot Starter 简介</h3> 
<p>Spring Boot Starter 是 Spring Boot 提供的一种约定，用于简化应用程序的依赖管理。它定义了一组通用的模块，每个模块关注一个特定的领域，例如数据库访问、消息队列、缓存等。这样，开发者可以根据需求选择相应的 Starter，并通过简单的配置即可引入所需的依赖。</p> 
<p>Spring Boot Starter 的命名约定为 <code>spring-boot-starter-*</code>，例如：</p> 
<ul><li><code>spring-boot-starter-data-jpa</code>: 用于数据持久化的 Starter。</li><li><code>spring-boot-starter-web</code>: 用于构建 Web 应用程序的 Starter。</li><li><code>spring-boot-starter-actuator</code>: 提供生产就绪功能的 Starter。</li></ul> 
<h3>2. Spring Boot Starter 实战</h3> 
<h4>2.1. 创建自定义 Starter</h4> 
<p>下面演示如何在 Spring Boot Starter 中<span style="color:#fe2c24;"><strong>使用注解记录操作审计</strong></span>的功能。</p> 
<p>首先创建一个 Maven 项目作为 Spring Boot Starter。在项目中添加以下依赖：</p> 
<pre><code class="language-XML">&lt;!-- pom.xml --&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre> 
<p></p> 
<h4 style="background-color:transparent;">2.2. 实现审计注解和切面</h4> 
<p>创建一个自动配置类 <code>AuditAutoConfiguration</code>，用于配置审计功能：</p> 
<pre><code class="language-java">// AuditAutoConfiguration.java
@Configuration
@EnableConfigurationProperties(AuditProperties.class)
public class AuditAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    public AuditAspect auditAspect() {
        return new AuditAspect();
    }
}
</code></pre> 
<p>创建一个属性配置类 <code>AuditProperties</code>，用于配置审计属性：</p> 
<pre><code class="language-java">// AuditProperties.java
@ConfigurationProperties(prefix = "audit")
public class AuditProperties {

    private boolean enabled = true;

    // Getter and Setter
}
</code></pre> 
<p> 创建一个审计切面类 <code>AuditAspect</code>，用于拦截带有审计注解的方法：</p> 
<p></p> 
<pre><code class="language-java">// AuditAspect.java
@Aspect
@Component
@Slf4j
public class AuditAspect {
    
    @Autowired
    private AuditProperties auditProperties;

    @Around("@annotation(auditAnnotation)")
    public Object audit(ProceedingJoinPoint joinPoint, AuditAnnotation auditAnnotation) throws Throwable {
        if (auditProperties.isEnabled()) {
            String message = auditAnnotation.value();
            System.out.println("Audit Log: " + message);
        }
        // TODO 实现具体的审计记录逻辑 发送到kafka 
        // 或者将操作记录保存到数据库

        return joinPoint.proceed();
    }
}
</code></pre> 
<h4 style="background-color:transparent;">2.3. 创建审计注解</h4> 
<p>创建一个审计注解 <code>Audit</code>，用于标记需要进行审计的方法：</p> 
<pre><code class="language-java">// Audit.java
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Audit {

    String value() default "";
}
</code></pre> 
<h4 style="background-color:transparent;">2.4. 开启自启动扫描配置</h4> 
<p>在resources下创建META-INF目录，并创建spring.factories文件，将AuditAspect类完整路径写进去，否则该配置类无法被spring扫描到</p> 
<pre><code class="language-java">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.xxx.fly.log.aspect.AuditAspect</code></pre> 
<h4>2.5. 创建 Starter 模块</h4> 
<p>创建 <code>spring-boot-starter-audit</code> 模块，将自动配置类、属性配置类、审计切面类和审计注解类打包成一个 JAR 文件。</p> 
<h4 style="background-color:transparent;">2.6. 使用自定义 Starter 进行审计</h4> 
<p>引入自定义 Starter 依赖到 Spring Boot 项目中：</p> 
<pre><code class="language-XML">&lt;!-- pom.xml --&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.example&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-audit&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre> 
<p>配置文件中设置属性</p> 
<p>在<strong> <code>application.properties</code> 或 <code>application.yml</code></strong> 中设置 <strong><code>audit.enabled</code> </strong>属性开启审计功能</p> 
<pre><code class="language-java"># application.properties
audit.enabled=true

# application.yml
audit:
  enabled: true
</code></pre> 
<p>在应用程序的方法上使用 <strong><code>@Audit</code> </strong>注解进行审计： </p> 
<pre><code class="language-java">// MyService.java
@Service
public class MyService {

    @Audit("用户模块-新增用户")
    public void performAuditAction() {
        // 实际的业务逻辑
    }
}
</code></pre> 
<p></p> 
<p></p> 
<h3>3. 总结</h3> 
<p>通过本文的介绍和实战，我们深入了解了 Spring Boot Starter 的机制和用法。自定义 Starter 提供了一种有效的方式来组织和共享项目中的依赖关系，使应用程序的配置更加清晰、灵活。通过引入 Starter，开发者可以轻松地集成常用的功能模块，提高开发效率，使代码更加模块化和可维护。希望本文对大家理解和使用 Spring Boot Starter 有所帮助。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dc954997cd971afcbd6d602ab05ca93c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">导入 sql 文件，因 sql 文件里的 sql 语句无序导致失败</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce4586c66d5f4aa8979d1547bca1333a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux-前端项目由nginx迁移到apache httpd</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>