<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot---使用Mybatis配置文件实现数据的增删查改 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot---使用Mybatis配置文件实现数据的增删查改" />
<meta property="og:description" content="SpringBoot---使用Mybatis配置文件实现数据的增删查改 1、新建一个Maven项目，在pom.xml中添加必要的依赖：
&lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.etc&lt;/groupId&gt; &lt;artifactId&gt;springboot&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;springboot&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.4.7.RELEASE&lt;/version&gt; &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.7&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!-- SpringBoot导入的jar包 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- freemarker模版 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- jdbc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.35&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4a5175e8cf39b5ed94c104fdee25a601/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-06T17:36:51+08:00" />
<meta property="article:modified_time" content="2018-03-06T17:36:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot---使用Mybatis配置文件实现数据的增删查改</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:center;"><strong><span style="font-size:18px;">SpringBoot---使用Mybatis配置文件实现数据的增删查改</span></strong></h2> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">1、新建一个Maven项目，在pom.xml中添加必要的依赖：</span></p> 
<pre><code class="language-html">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

	&lt;groupId&gt;com.etc&lt;/groupId&gt;
	&lt;artifactId&gt;springboot&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;name&gt;springboot&lt;/name&gt;
	&lt;url&gt;http://maven.apache.org&lt;/url&gt;
	
	&lt;parent&gt;  
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;  
        &lt;version&gt;1.4.7.RELEASE&lt;/version&gt;  
        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;  
    &lt;/parent&gt;  
	
	&lt;properties&gt;
		&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
		 &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.7&lt;/java.version&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;!-- SpringBoot导入的jar包 --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
		&lt;/dependency&gt;
		 &lt;!-- freemarker模版 --&gt;
        &lt;dependency&gt;  
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  
            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;  
        &lt;/dependency&gt;
        &lt;!-- jdbc --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- mybatis --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.3.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.1.35&lt;/version&gt;
        &lt;/dependency&gt;
   		 &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.1.0&lt;/version&gt;
        &lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;junit&lt;/groupId&gt;
			&lt;artifactId&gt;junit&lt;/artifactId&gt;
			&lt;version&gt;3.8.1&lt;/version&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
	
	 &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8080&lt;/configuration&gt;
            &lt;/plugin&gt;
            
            &lt;!-- mybatis generator 自动生成代码插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;configurationFile&gt;${basedir}/src/main/resources/generator/generatorConfig.xml&lt;/configurationFile&gt;
                    &lt;overwrite&gt;true&lt;/overwrite&gt;
                    &lt;verbose&gt;true&lt;/verbose&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
	
&lt;/project&gt;</code></pre> 
<p><span style="background-color:rgb(204,51,204);"><span style="font-size:16px;color:#ffffff;">2、新建一个SpringBootBaseApplication.java启动类</span></span></p> 
<pre><code class="language-java">package com.etc.springboot;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
@ComponentScan(basePackages="com.etc.*")
@MapperScan(value = "com.etc.mapper")//这样才能找到mapper文件
public class SpringBootBaseApplication {
	 public static void main(String[] args) {  
	        SpringApplication.run(SpringBootBaseApplication.class,args);  
	        System.out.println("启动完成");
	    }  
}</code></pre> 
<p><span style="background-color:rgb(204,51,204);"><span style="font-size:16px;color:#ffffff;">3、在数据库中新建一个表t_student，添加一些简单的数据，如下图所示：</span></span></p> 
<p><img src="https://images2.imgbox.com/35/fd/5caS5MHZ_o.png" alt=""><br></p> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">4、新建src/main/resource源文件夹，在该文件夹下新建application.properties文件，配置一些参数如下：</span></p> 
<pre><code class="language-html">spring.datasource.name=test
spring.datasource.url=jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.driverClassName=com.mysql.jdbc.Driver

###########################mybatis配置###############################
#全局映射器启用缓存
mybatis.configuration.cache-enabled=true
#查询时,关闭关联对象及时加载以提高性能
mybatis.configuration.lazy-loading-enabled=false
#按需加载字段(加载字段由SQL指定),不会加载关联表的所有字段,以提高性能
mybatis.configuration.aggressive-lazy-loading=false
#允许返回不同的结果集以达到通用的效果
mybatis.configuration.multiple-result-sets-enabled=true
#对于批量更新操作缓存SQL以提高性能
mybatis.configuration.default-executor-type=REUSE
#数据库执行超时时间
mybatis.configuration.default-statement-timeout=25000
mybatis.mapper-locations=classpath:mapping/*.xml
mybatis.type-aliases-package=com.etc.po</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">5、在com.etc.po包下新建一个Student.java类：</span></p> 
<pre><code class="language-java">package com.etc.po;
/**
 * @Description:学生实体类
 * @author zoey
 * @date:2018年3月6日
 */
public class Student {
	private int sno;
	private String sname;
	private int sage;
	
	public int getSno() {
		return sno;
	}
	public void setSno(int sno) {
		this.sno = sno;
	}
	public String getSname() {
		return sname;
	}
	public void setSname(String sname) {
		this.sname = sname;
	}
	public int getSage() {
		return sage;
	}
	public void setSage(int sage) {
		this.sage = sage;
	}
	@Override
	public String toString() {
		return "Student [sno=" + sno + ", sname=" + sname + ", sage=" + sage + "]";
	}

	public Student(String sname, int sage) {
		super();
		this.sname = sname;
		this.sage = sage;
	}
	public Student() {
		super();
	}
}</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">6、在src/main/resources下新建一个mapping文件夹，然后新建StudentMapper.xml文件如下：</span></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt; 
&lt;mapper namespace="com.etc.mapper.StudentMapper"&gt;
&lt;!-- 结果集 --&gt;
&lt;resultMap id="studentMap" type="com.etc.po.Student"&gt;
		&lt;id column="sno" property="sno" /&gt;
        &lt;result column="sname" property="sname" /&gt;
        &lt;result column="sage" property="sage" /&gt;
&lt;/resultMap&gt;

&lt;select id="findAll" resultMap="studentMap" parameterType="com.etc.po.Student"&gt;
	select
		sno,
		sname,
		sage 
	from 
		t_student
&lt;/select&gt;

&lt;insert id="insertStudent" parameterType="com.etc.po.Student" useGeneratedKeys="true" keyProperty="sno"&gt;
	insert into 
		t_student(sname,sage)
	values
		(#{sname},#{sage})
&lt;/insert&gt;

&lt;select id="findById" resultMap="studentMap" parameterType="java.lang.Integer"&gt;
	select 
		sno,
		sname,
		sage
	from 
		t_student
	where
		sno = #{sno}
		
&lt;/select&gt;
&lt;!-- 
报错：Result Maps collection does not contain value for com.etc.po.Student
解决方法：将findById查询方法的  resultMap="com.etc.po.Student" 改为 resultMap="studentMap"
 --&gt;
 
&lt;update id="updateStudent" parameterType="com.etc.po.Student"&gt;
	update 
		t_student
	set 
		sname = #{sname},sage=#{sage}
	where 
		sno = #{sno}
&lt;/update&gt;

&lt;delete id="deleteStudent" parameterType="java.lang.Integer"&gt;
	delete from
		t_student
	where 
		sno = #{sno}
&lt;/delete&gt;

&lt;delete id="delteStudent2" parameterType="com.etc.po.Student"&gt;
	delete from
		t_student
	where 
		sno = #{sno}
&lt;/delete&gt;

&lt;/mapper&gt;</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">7、在com.etc.mapper包下新建一个StudentMapper.java类：</span></p> 
<pre><code class="language-java">package com.etc.mapper;

import java.util.List;

import org.apache.ibatis.annotations.Mapper;

import com.etc.po.Student;
/**
 * @Description:一个接口，方法名称和
 * @author zoey
 * @date:2018年3月6日
 */
public interface StudentMapper {
	List&lt;Student&gt; findAll();
	
	int insertStudent(Student student);

	Student findById(int i);

	int updateStudent(Student student);

	int deleteStudent(int i);

	int delteStudent2(Student student);
}</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">8、在com.etc.service包下新建一个StudentService.java类：</span></p> 
<pre><code class="language-java">package com.etc.service;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import com.etc.mapper.StudentMapper;
import com.etc.po.Student;
/**
 * @Description:Service层，调用mapper层的方法
 * @author zoey
 * @date:2018年3月6日
 */
@Service(value="studentService")
public class StudentService {
	@Autowired
	private StudentMapper studentMapper;
	
	public List&lt;Student&gt; findAll(){
		return studentMapper.findAll();
	}
	
	public int insertStudent(Student student) {
		return studentMapper.insertStudent(student);
	}

	public Student findById(int i) {
		return studentMapper.findById(i);
	}

	public int updateStudent(Student student) {
		return studentMapper.updateStudent(student);
	}

	public int deleteStudent(int i) {
		return studentMapper.deleteStudent(i);
	}

	public int deleteStudent2(Student student) {
		return studentMapper.delteStudent2(student);
	}
}</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(204,51,204);">9、在com.etc.controller包下新建一个StudentController.java类：</span></p> 
<pre><code class="language-java">package com.etc.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import com.etc.po.Student;
import com.etc.service.StudentService;
/**
 * @Description:Controller层，调用Service层的方法，返回执行结果
 * @author zoey
 * @date:2018年3月6日
 */
@Controller
@RequestMapping("/student")
public class StudentController {
	@Autowired
	private StudentService studentService;
	
	/**
	 * @Description:查询所有的学生信息
	 * 访问地址：http://localhost:8080/student/findAll
	 * @return 返回字符串信息，直接显示在页面
	 * @author zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping("/findAll")
	@ResponseBody //使得返回结果为字符串，而不是进入某一个指定的页面
	public String findAll() {
		System.out.println("进入查询方法");
		List&lt;Student&gt; list = studentService.findAll();
		for(int i=0;i&lt;list.size();i++) {
			System.out.println("学生:"+list.get(i));
		}
		return "findAll";
	}
	/**
	 * @Description:根据学生id查询学生信息(使用@PathVariable注解接收传入的参数)
	 * 访问地址：http://localhost:8080/student/findById/3
	 * @return
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping(value="/findById/{sno}",method=RequestMethod.GET)
	@ResponseBody
	public String findById(@PathVariable("sno") Integer sno) {
		System.out.println("进入根据id查询学生信息方法");
		Student student = studentService.findById(sno);
		System.out.println(student);
		return "findById";
	}
	/**
	 * @Description:根据学生id查询学生信息(使用@RequestParam注解接收传入的参数)
	 * 访问地址：http://localhost:8080/student/findById?sno=3
	 * @param sno
	 * @return
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping(value="/findById")
	@ResponseBody
	public String findById2(@RequestParam("sno") Integer sno) {
		System.out.println("进入根据id查询学生信息方法");
		Student student = studentService.findById(sno);
		System.out.println(student);
		return "findById";
	}
	/**
	 * @Description:新增学生信息
	 * 访问地址：http://localhost:8080/student/insertStudent(数据写死)
	 * 		 http://localhost:8080/student/insertStudent?sname=zoey&amp;sage=18(传递参数)
	 * @return 返回字符串信息，直接显示在页面
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping("/insertStudent")
	@ResponseBody
	public String insertStudent(Student student) {
		System.out.println("进入新增方法");
		//Student student = new Student("lan",20);//数据写死
		int result = studentService.insertStudent(student);
		if(result==1) {
			System.out.println("新增学生成功!");
		}else {
			System.out.println("新增学生失败!");
		}
		return "insert";
	}
	/**
	 * @Description:修改学生信息
	 * 访问地址：http://localhost:8080/student/updateStudent?sno=1&amp;sname=change
	 * @param student
	 * @return
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping("/updateStudent")
	@ResponseBody
	public String updateStudent(Student student) {
		System.out.println("进入更新方法");
		int result = studentService.updateStudent(student);
		if(result==1) {
			System.out.println("修改学生成功!");
		}else {
			System.out.println("修改学生失败!");
		}
		return "update";
	}
	/**
	 * @Description:删除学生信息(数据写死)
	 * 访问地址：http://localhost:8080/student/deleteStudent
	 * 		 http://localhost:8080/student/deleteStudent?sno=2(报错)
	 * 报错如下：
	 * 	Optional int parameter 'i' is present but cannot be translated into a null value 
	 * 	due to being declared as a primitive type.
	 * 	Consider declaring it as object wrapper for the corresponding primitive type.
	 * @return
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping("/deleteStudent")
	@ResponseBody
	public String deleteStudent() {
		System.out.println("进入删除方法");
		int result = studentService.deleteStudent(1);//传入的参数是一个整型，不能从地址栏的参数中传递过去
		if(result==1) {
			System.out.println("删除学生成功!");
		}else {
			System.out.println("删除学生失败！");
		}
		return "delete";
	}
	/**
	 * @Description:根据学生id删除学生信息
	 * 访问地址：http://localhost:8080/student/deleteStudent?sno=2
	 * @param student
	 * @return
	 * @author:zoey
	 * @date:2018年3月6日
	 */
	@RequestMapping("/deleteStudent2")
	@ResponseBody
	public String delelteStudent2(Student student) {
		int result = studentService.deleteStudent2(student);//传递的参数是一个对象，可以从地址栏的参数中传递过去
		if(result==1) {
			System.out.println("删除学生成功!");
		}else {
			System.out.println("删除学生失败！");
		}
		return "delete2";
	}
}</code></pre> 
<h3><span style="color:#ffffff;background-color:rgb(153,51,153);">项目结构图如下：</span></h3> 
<p><img src="https://images2.imgbox.com/87/b2/0YrCga4m_o.png" alt=""></p> 
<h3><span style="color:#ffffff;background-color:rgb(51,204,0);">错误总结：</span></h3> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(255,102,0);">1、启动SpringBootBaseApplication.java类失败，报错如下：</span></p> 
<pre><code class="language-java">Description:

Field studentService in com.etc.controller.StudentController required a bean of type 'com.etc.service.StudentService' that could not be found.


Action:

Consider defining a bean of type 'com.etc.service.StudentService' in your configuration.</code></pre> 
<p><strong><span style="color:#33cc00;">找不到Service类，解决方法如下：</span></strong></p> 
<p>    在StudentService类上面增加注解如下：</p> 
<pre><code class="language-java"> @Service(value="studentService")</code></pre> 
<p><span style="background-color:rgb(255,102,0);"><span style="font-size:16px;color:#ffffff;">2、启动SpringBootBaseApplication.java类失败，报错如下：</span></span></p> 
<pre><code class="language-java">Description:

Field studentMapper in com.etc.service.StudentService required a bean of type 'com.etc.mapper.StudentMapper' that could not be found.


Action:

Consider defining a bean of type 'com.etc.mapper.StudentMapper' in your configuration.</code></pre> 
<p><strong><span style="color:#33cc00;">找不到mapper类，解决方法如下：</span></strong></p> 
<p>    在SpringBootBaseApplication启动类的上面增加注解如下：<br></p> 
<pre><code class="language-java"> @MapperScan(value = "com.etc.mapper")//这样才能找到mapper文件</code></pre> 
<p></p> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(255,102,0);">3、启动成功，报错如下：</span></p> 
<pre><code class="language-java">Invalid bound statement (not found): com.etc.mapper.StudentMapper.findAll</code></pre> 
<p><strong><span style="color:#33cc00;">找不到StudentMapper.java类</span></strong></p> 
<p>解决方法，步骤如下：</p> 
<p><strong>(1)pom.xml中增加mybatis的依赖如下：</strong></p> 
<pre><code class="language-html">&lt;!-- mybatis --&gt;
&lt;dependency&gt;
      &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
      &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
      &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre> 
<p><strong>(2)pom.xml中增加mybatis的自动生成代码如下：</strong></p> 
<pre><code class="language-html">&lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8080&lt;/configuration&gt;
            &lt;/plugin&gt;
            
            &lt;!-- mybatis generator 自动生成代码插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;configurationFile&gt;${basedir}/src/main/resources/generator/generatorConfig.xml&lt;/configurationFile&gt;
                    &lt;overwrite&gt;true&lt;/overwrite&gt;
                    &lt;verbose&gt;true&lt;/verbose&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre> 
<p><strong>(3)application.properties中增加mybatis的配置如下：</strong></p> 
<pre><code class="language-html">###########################mybatis配置###############################
#全局映射器启用缓存
mybatis.configuration.cache-enabled=true
#查询时,关闭关联对象及时加载以提高性能
mybatis.configuration.lazy-loading-enabled=false
#按需加载字段(加载字段由SQL指定),不会加载关联表的所有字段,以提高性能
mybatis.configuration.aggressive-lazy-loading=false
#允许返回不同的结果集以达到通用的效果
mybatis.configuration.multiple-result-sets-enabled=true
#对于批量更新操作缓存SQL以提高性能
mybatis.configuration.default-executor-type=REUSE
#数据库执行超时时间
mybatis.configuration.default-statement-timeout=25000
mybatis.mapper-locations=classpath:mapping/*.xml
mybatis.type-aliases-package=com.etc.po</code></pre> 
<h3><span style="color:#ffffff;background-color:rgb(51,204,0);">经验总结：</span></h3> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(255,102,0);">1、要读取数据库中的数据，需要进行如下操作：</span></p> 
<p><strong>(1)pom.xml中引入数据库相关的依赖包：</strong></p> 
<pre><code class="language-html">  &lt;!-- jdbc --&gt;
  &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
  &lt;/dependency&gt;
  &lt;!-- mysql --&gt;
  &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;5.1.35&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
        &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;1.1.0&lt;/version&gt;
 &lt;/dependency&gt;</code></pre> 
<p><strong>(2)application.properties文件中需要配置数据库相关的信息：</strong></p> 
<pre><code class="language-html">###############################数据库配置：连接本地数据库###############################
spring.datasource.name=test
spring.datasource.url=jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.driverClassName=com.mysql.jdbc.Driver
</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(255,102,0);">2、进行增删查改操作，结构如下：</span></p> 
<p>Controller类---&gt;Service类---&gt;Mapper类---&gt;Mapper.xml配置文件</p> 
<p><strong>(1)Controller类中需要访问Service类的方法，则在Controller类中添加@Autowired注解，自动注入Service类：</strong></p> 
<pre><code class="language-java">@Autowired
private StudentService studentService;</code></pre> 
<p><strong>(2)Service类中需要访问Mapper类的方法，则在Service类中添加@Autowired注解，自动注入Mapper类：</strong></p> 
<pre><code class="language-html">@Autowired
private StudentMapper studentMapper;</code></pre> 
<p><strong>(3)Mapper类中需要访问Mapper.xml中的方法，需要保持Mapper类中方法的名称和Mapper.xml中的id保持一致：</strong></p> 
<pre><code class="language-java">List&lt;Student&gt; findAll();</code></pre> 
<pre><code class="language-html">&lt;select id="findAll" resultMap="studentMap" parameterType="com.etc.po.Student"&gt;
	select
		sno,
		sname,
		sage 
	from 
		t_student
&lt;/select&gt;</code></pre> 
<p><span style="font-size:16px;color:#ffffff;background-color:rgb(255,102,0);">3、StudentMapper.xml文件的编写细节：</span></p> 
<p><strong>(1)查询标签：&lt;select&gt;、新增标签：&lt;insert&gt;、更新标签：&lt;update&gt;、删除标签：&lt;delete&gt;</strong></p> 
<p><strong>(2)resultMap标签，结果与数据库中的字段相对应</strong></p> 
<pre><code class="language-html">&lt;!-- 结果集 --&gt;
&lt;resultMap id="studentMap" type="com.etc.po.Student"&gt;
		&lt;id column="sno" property="sno" /&gt;
        &lt;result column="sname" property="sname" /&gt;
        &lt;result column="sage" property="sage" /&gt;
&lt;/resultMap&gt;</code></pre> 
<p><strong>(3)parameterType需要指定详细的类型，比如 传递的参数类型是int，那么parameterType的值不能是int或者Integer,而必须是java.lang.Integer</strong></p> 
<pre><code class="language-html">&lt;select id="findById" resultMap="studentMap" parameterType="java.lang.Integer"&gt;
	select 
		sno,
		sname,
		sage
	from 
		t_student
	where
		sno = #{sno}
&lt;/select&gt;</code></pre> 
<p>其中，动态值，需要传入的参数sno，使用#{sno}来获取</p> 
<p><span style="background-color:rgb(255,102,0);"><span style="font-size:16px;color:#ffffff;">4、通过url传递参数的几种方式：</span></span></p> 
<p><strong><span style="color:#33cc00;">(1)第一种方法：传递一个Student对象：</span></strong></p> 
<p><strong>(a)StudentMapper.xml中定义如下：</strong></p> 
<pre><code class="language-html">&lt;update id="updateStudent" parameterType="com.etc.po.Student"&gt;
	update 
		t_student
	set 
		sname = #{sname},sage=#{sage}
	where 
		sno = #{sno}
&lt;/update&gt;</code></pre> 
<p><strong>(2)StudentController.java类中编写如下：</strong></p> 
<pre><code class="language-java">/**
* @Description:修改学生信息
* 访问地址：http://localhost:8080/student/updateStudent?sno=1&amp;sname=change
* @param student
* @return
* @author:zoey
* @date:2018年3月6日
 */
@RequestMapping("/updateStudent")
@ResponseBody
public String updateStudent(Student student) {
	System.out.println("进入更新方法");
	int result = studentService.updateStudent(student);
	if(result==1) {
		System.out.println("修改学生成功!");
	}else {
		System.out.println("修改学生失败!");
	}
	return "update";
}</code></pre> 
<strong>访问地址：</strong> 
<pre><code class="language-java">http://localhost:8080/student/updateStudent?sno=1&amp;sname=change</code></pre> 
<p><strong>传入一个学生对象，进行更改。</strong></p> 
<p><strong>运行结果：</strong></p> 
<pre><code class="language-java">修改学生成功！</code></pre> 
<p>这种方式，不能直接传入一个sno，也就是参数类型改为java.lang.Integer,无法实现，报错如下：</p> 
<pre><code class="language-java">Optional int parameter 'i' is present but cannot be translated into a null value 
due to being declared as a primitive type.
Consider declaring it as object wrapper for the corresponding primitive type.</code></pre> 
<p>那么，如果我们想要直接传入一个sno，然后进行操作，就使用第二种方法或者第三种方法。</p> 
<p><strong><span style="color:#33cc00;">(2)第二种方法：传递一个Integer类型，使用@PathVariable注解</span></strong></p> 
<p><strong>(a)StudentMapper.xml中定义如下：</strong></p> 
<pre><code class="language-html">&lt;select id="findById" resultMap="studentMap" parameterType="java.lang.Integer"&gt;
	select 
		sno,
		sname,
		sage
	from 
		t_student
	where
		sno = #{sno}
		
&lt;/select&gt;</code></pre> 
<p><strong>(b)StudentController.java类中编写如下：</strong></p> 
<pre><code class="language-java">/**
* @Description:根据学生id查询学生信息
* 访问地址：http://localhost:8080/student/findById/3
* @return
* @author:zoey
* @date:2018年3月6日
 */
@RequestMapping(value="/findById/{sno}",method=RequestMethod.GET)
@ResponseBody
public String findById(@PathVariable("sno") Integer sno) {
	System.out.println("进入根据id查询学生信息方法");
	Student student = studentService.findById(sno);
	System.out.println(student);
	return "findById";
}</code></pre> 
<strong>访问地址：</strong> 
<br> 
<pre><code class="language-java">http://localhost:8080/student/findById/3</code></pre> 
<p><strong>运行结果如下：</strong></p> 
<pre><code class="language-java">进入根据id查询学生信息方法
Student [sno=3, sname=StudentC, sage=3]</code></pre> 
<span style="color:rgb(51,204,0);"><strong><span style="color:rgb(51,204,0);font-weight:700;">(3)第三种方法：</span>传递一个Integer类型,使用@RequestParam注解</strong></span> 
<p><strong>(a)StudentMapper.xml中定义如下：</strong></p> 
<pre><code class="language-html">&lt;select id="findById" resultMap="studentMap" parameterType="java.lang.Integer"&gt;
	select 
		sno,
		sname,
		sage
	from 
		t_student
	where
		sno = #{sno}
		
&lt;/select&gt;</code></pre> 
<p><strong>(b)StudentController.java类中编写如下：</strong></p> 
<pre><code class="language-html">/**
* @Description:根据学生id查询学生信息
* 访问地址：http://localhost:8080/student/findById?sno=3
* @param sno
* @return
* @author:zoey
* @date:2018年3月6日
 */
@RequestMapping(value="/findById")
@ResponseBody
public String findById(@RequestParam("sno") Integer sno) {
	System.out.println("进入根据id查询学生信息方法");
	Student student = studentService.findById(sno);
	System.out.println(student);
	return "findById";
}</code></pre> 
<strong>访问地址：</strong> 
<br> 
<pre><code class="language-java">http://localhost:8080/student/findById?sno=3</code></pre> 
<p><strong>运行结果如下：</strong></p> 
<pre><code class="language-java">进入根据id查询学生信息方法
Student [sno=3, sname=StudentC, sage=3]</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53907bae63e39755ba71524666580c35/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">30分钟后页面自动跳转到登录页面</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01847d642d6f58edf6375d2692318f02/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">sqlplus显示乱码--Windows10 处理方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>