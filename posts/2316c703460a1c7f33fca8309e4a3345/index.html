<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>链路聚合的定义和不同层交换机的区别 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="链路聚合的定义和不同层交换机的区别" />
<meta property="og:description" content="一.定义
二.实现条件
一.定义
端口绑定技术：链路聚合（Link Aggregation）是将一组物理接口绑在一起作为一个逻辑接口来增加带宽的一种方法，又称为多接口负载均衡组（Load Sharing Group）或链路聚合组（Link Aggregation Group），通过在两台设备之间建立链路聚合组，可以提供更高的通讯带宽和更高可靠性。链路聚合不仅为设备间通信提供了冗余保护，而且不需要对硬件进行升级。
二.实现条件
链路聚合/端口聚合/端口绑定实现的条件：（必须为百兆以上交换机）
1.每个Eth-Trunk接口下最多可以包含8个成员接口
2.成员接口不能配置任何业务和静态MAC地址
3.成员接口加入Eth-Trunk时，必须为缺省的hybrid类型接口
4.Eth-Trunk接口不能嵌套，即成员接口不能是Eth-Trunk
5.一个以太网接口只能加入到一个Eth-Trunk接口，如果需要加入其他Eth-Trunk接口，必须先退出原来的Eth-Trunk接口
6.一个Eth-Trunk接口中的成员必须是同一类型，例如：FE（百兆）口和GE（千兆）口不能加入同一个Eth-Trunk接口
7.可以将不同接口板上的以太网接口加入到同一个Eth-Trunk
8.如果本地设备使用了Eth-Trunk，与成员接口直连的对接端口也必须捆绑为Eth-Trunk接口，两端才能正常通信
9.当成员接口的速率不一致时，实际使用中速率小的接口可能会出现拥塞，导致丢包
10.当成员接口加入Eth-Trunk后，学习mac地址时时按照Eth-Trunk来学习的，而不是按照成员接口来学习的
三.验证链路聚合
端口聚合又称为链路捆绑
分为二层和三层，二层链路捆绑对二层交换机，形成的链路不带IP地址功能。
二层交换机接口只能是二层性质的，接口链路类型可以设置为trunk或者access
二台二层交换机和2台PC机
PC机设置同网段ip
开始设置三部曲
接着创建链路聚合 第二台交换机同样配置
检查下配置是否成功
在电脑上测试正常通信
如果有另一路不同VLAN的话
创建vlan5 ，链路类型设置trunk
[B]vlan 5 [B-vlan5]int e0/0/5 [B-Ethernet0/0/5]port link-type access [B-Ethernet0/0/5]port default vlan 5 [B-Ethernet0/0/5]q [B]int Eth-Trunk 1 [B-Eth-Trunk1]port link-type trunk [B-Eth-Trunk1]port trunk allow-pass vlan 5 [B-Eth-Trunk1]q 查看MAC地址表
[A]display mac-address MAC address table of slot 0:
-------------------------------------------------------------------------------" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2316c703460a1c7f33fca8309e4a3345/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-11T18:52:18+08:00" />
<meta property="article:modified_time" content="2021-08-11T18:52:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">链路聚合的定义和不同层交换机的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>一.定义</strong></p> 
<p><strong>二.实现条件</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/03/b6/By01uH99_o.png"></p> 
<p> </p> 
<p><strong>一.定义</strong></p> 
<p>端口绑定技术：链路聚合（Link Aggregation）是将一组物理接口绑在一起作为一个逻辑接口来增加带宽的一种方法，又称为多接口负载均衡组（Load Sharing Group）或链路聚合组（Link Aggregation Group），通过在两台设备之间建立链路聚合组，可以提供更高的通讯带宽和更高可靠性。链路聚合不仅为设备间通信提供了冗余保护，而且不需要对硬件进行升级。</p> 
<p></p> 
<p><strong>二.实现条件</strong></p> 
<p>链路聚合/端口聚合/端口绑定实现的条件：（必须为百兆以上交换机）</p> 
<p>1.每个Eth-Trunk接口下最多可以包含8个成员接口</p> 
<p>2.成员接口不能配置任何业务和静态MAC地址</p> 
<p>3.成员接口加入Eth-Trunk时，必须为缺省的hybrid类型接口</p> 
<p>4.Eth-Trunk接口不能嵌套，即成员接口不能是Eth-Trunk</p> 
<p>5.一个以太网接口只能加入到一个Eth-Trunk接口，如果需要加入其他Eth-Trunk接口，必须先退出原来的Eth-Trunk接口</p> 
<p>6.一个Eth-Trunk接口中的成员必须是同一类型，例如：FE（百兆）口和GE（千兆）口不能加入同一个Eth-Trunk接口</p> 
<p>7.可以将不同接口板上的以太网接口加入到同一个Eth-Trunk</p> 
<p>8.如果本地设备使用了Eth-Trunk，与成员接口直连的对接端口也必须捆绑为Eth-Trunk接口，两端才能正常通信</p> 
<p>9.当成员接口的速率不一致时，实际使用中速率小的接口可能会出现拥塞，导致丢包</p> 
<p>10.当成员接口加入Eth-Trunk后，学习mac地址时时按照Eth-Trunk来学习的，而不是按照成员接口来学习的</p> 
<p></p> 
<p><strong>三.验证链路聚合</strong></p> 
<p>端口聚合又称为链路捆绑</p> 
<p>分为二层和三层，二层链路捆绑对二层交换机，形成的链路不带IP地址功能。</p> 
<p><span style="color:#fe2c24;">二层交换机接口只能是二层性质的，接口链路类型可以设置为trunk或者access</span></p> 
<p>二台二层交换机和2台PC机</p> 
<p>PC机设置同网段ip</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a8/1b/bJYljXfR_o.png"></p> 
<p> 开始设置三部曲</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a4/b4/MDD9MdgE_o.png"></p> 
<p>接着创建链路聚合 </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/af/44/w8s2NJyb_o.png"></p> 
<p> 第二台交换机同样配置</p> 
<p>检查下配置是否成功</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/78/a3/BYEgjqUh_o.png"></p> 
<p> 在电脑上测试正常通信<img alt="" height="658" src="https://images2.imgbox.com/0e/a6/Q0GAnLTR_o.png" width="964"></p> 
<p>如果有另一路不同VLAN的话</p> 
<p>创建vlan5 ，链路类型设置trunk</p> 
<pre><code>[B]vlan 5
[B-vlan5]int e0/0/5
[B-Ethernet0/0/5]port link-type access 
[B-Ethernet0/0/5]port default vlan 5
[B-Ethernet0/0/5]q 
[B]int Eth-Trunk 1
[B-Eth-Trunk1]port link-type trunk 
[B-Eth-Trunk1]port trunk allow-pass vlan 5
[B-Eth-Trunk1]q</code></pre> 
<p>查看MAC地址表</p> 
<pre><code> [A]display mac-address </code></pre> 
<p><br> MAC address table of slot 0:<br> -------------------------------------------------------------------------------<br> MAC Address    VLAN/       PEVLAN CEVLAN Port            Type      LSP/LSR-ID  <br>                VSI/SI                                              MAC-Tunnel  <br> -------------------------------------------------------------------------------<br> 5489-9875-56ea 5           -      -      Eth-Trunk1      dynamic   0/-         <br> 5489-9831-052a 5           -      -      Eth0/0/5        dynamic   0/-         <br> -------------------------------------------------------------------------------<br> Total matching items on slot 0 displayed = 2 </p> 
<p>查看生成树的转发记录</p> 
<pre><code>[A]display stp brief </code></pre> 
<p><br>  MSTID  Port                        Role  STP State     Protection<br>    0    Ethernet0/0/4               DESI  FORWARDING      NONE<br>    0    Ethernet0/0/5               DESI  FORWARDING      NONE<br>    0    Eth-Trunk1                  DESI  FORWARDING      NONE</p> 
<p></p> 
<p>三层链路捆绑针对三层交换机，形成的链路带IP地址功能。</p> 
<p><span style="color:#fe2c24;">三层交换机接口必须时二层性质和三层性质二选一，若三层交换机接口性质为三层，那将不可以设置链路为trunk或access</span></p> 
<p><span style="color:#0d0016;">三层链路聚合实现的功能：PC机之间不同网段的数据通信。</span></p> 
<p>三层路由器做聚合链路</p> 
<p><img alt="" src="https://images2.imgbox.com/0f/80/844lB7BT_o.png"></p> 
<p></p> 
<p>PC1：IP192.168.1.10   子网掩码255.255.255.0，网关192.168.1.1</p> 
<p>PC2：IP192.168.2.10   子网掩码255.255.255.0，网关192.168.2.2</p> 
<p>A的配置</p> 
<pre><code>&lt;HUAWEI&gt;undo terminal m                                     关闭弹窗
&lt;HUAWEI&gt;sys                                                  进入系统视窗
[~HUAWEI]sysname B                                          改名称
[*HUAWEI]user-interface console 0                             永不超时
[*HUAWEI-ui-console0]idle-timeout 1 1
[*HUAWEI-ui-console0]q                                        退出
[*HUAWEI]interface Eth-Trunk 1                                 创建Eth-Trunk 1接口
[*HUAWEI-Eth-Trunk1]undo portswitch                            接口开启三层功能
[*HUAWEI-Eth-Trunk1]ip address 10.1.1.1 255.255.255.0          给Eth-Trunk 1接口设置IP地址和子网掩码
[*HUAWEI-Eth-Trunk1]int ge1/0/0                                进入ge1/0/0 接口
[*HUAWEI-GE1/0/0]undo shutdown                                 ge1/0/0 接口开启
[*HUAWEI-GE1/0/0]eth-trunk 1                                    成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/0]int ge1/0/1                                    进入ge1/0/1 接口
[*HUAWEI-GE1/0/1]undo shutdown                                   ge1/0/1 接口开启
[*HUAWEI-GE1/0/1]eth-trunk 1                                   成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/1]int ge1/0/2                                    进入ge1/0/1 接口
[*HUAWEI-GE1/0/2]undo shutdown                                    ge1/0/2 接口开启
[*HUAWEI-GE1/0/2]eth-trunk 1                                   成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/2]int ge1/0/3                                    进入ge1/0/3 接口
[*HUAWEI-GE1/0/3]undo shutdown                                    ge1/0/3 接口开启
[*HUAWEI-GE1/0/3]undo portswitch                               接口开启三层功能
[*HUAWEI-GE1/0/3]ip address 192.168.1.1 24                     给ge1/0/3接口设置IP地址和掩码长度
[*HUAWEI-GE1/0/3]q                                              退出
[*HUAWEI]ip route-static 192.168.2.0 24 10.1.1.2              配置静态路由，目的网段是192.168.2.0 掩码长度 24 下一跳是10.1.1.2
[*HUAWEI]q
Warning: Uncommitted configurations found. Are you sure to commit them before ex
iting? [Y(yes)/N(no)/C(cancel)]:y
&lt;A&gt;save                                                           保存
Warning: The current configuration will be written to the device. Continue? [Y/N
]:y
Now saving the current configuration to the slot 17 
Info: Save the configuration successfully.</code></pre> 
<p>查看路由表</p> 
<p><img alt="" src="https://images2.imgbox.com/e5/34/6jqjqISf_o.png"></p> 
<p> B的配置</p> 
<pre><code>&lt;HUAWEI&gt;undo terminal m                                     关闭弹窗
&lt;HUAWEI&gt;sys                                                  进入系统视窗
[~HUAWEI]sysname B                                          改名称
[*HUAWEI]user-interface console 0                             永不超时
[*HUAWEI-ui-console0]idle-timeout 1 1
[*HUAWEI-ui-console0]q                                        退出
[*HUAWEI]interface Eth-Trunk 1                                 创建Eth-Trunk 1接口
[*HUAWEI-Eth-Trunk1]undo portswitch                            接口开启三层功能
[*HUAWEI-Eth-Trunk1]ip address 10.1.1.2 255.255.255.0          给Eth-Trunk 1接口设置IP地址和子网掩码
[*HUAWEI-Eth-Trunk1]int ge1/0/0                                进入ge1/0/0 接口
[*HUAWEI-GE1/0/0]undo shutdown                                 ge1/0/0 接口开启
[*HUAWEI-GE1/0/0]eth-trunk 1                                    成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/0]int ge1/0/1                                    进入ge1/0/1 接口
[*HUAWEI-GE1/0/1]undo shutdown                                   ge1/0/1 接口开启
[*HUAWEI-GE1/0/1]eth-trunk 1                                   成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/1]int ge1/0/2                                    进入ge1/0/1 接口
[*HUAWEI-GE1/0/2]undo shutdown                                    ge1/0/2 接口开启
[*HUAWEI-GE1/0/2]eth-trunk 1                                   成为Eth-Trunk 1成员
[*HUAWEI-GE1/0/2]int ge1/0/3                                    进入ge1/0/3 接口
[*HUAWEI-GE1/0/3]undo shutdown                                    ge1/0/3 接口开启
[*HUAWEI-GE1/0/3]undo portswitch                               接口开启三层功能
[*HUAWEI-GE1/0/3]ip address 192.168.2.2 24                     给ge1/0/3接口设置IP地址和掩码长度
[*HUAWEI-GE1/0/3]q                                              退出
[*HUAWEI]ip route-static 192.168.1.0 24 10.1.1.1              配置静态路由，目的网段是192.168.1.0 掩码长度 24 下一跳是10.1.1.1
[*HUAWEI]q
Warning: Uncommitted configurations found. Are you sure to commit them before ex
iting? [Y(yes)/N(no)/C(cancel)]:y
&lt;A&gt;save                                                           保存
Warning: The current configuration will be written to the device. Continue? [Y/N
]:y
Now saving the current configuration to the slot 17 
Info: Save the configuration successfully.</code></pre> 
<p><br> 查看路由表</p> 
<p><img alt="" src="https://images2.imgbox.com/57/82/D8l64Xxv_o.png"></p> 
<p> 在B设备上ping A设备上的eth-trunk 1的IP 10.1.1.1</p> 
<p><img alt="" src="https://images2.imgbox.com/b9/a9/uD4ZVXZq_o.png"></p> 
<p></p> 
<p> 测试正常后再到PC1上去PING PC2的ip</p> 
<p><img alt="" src="https://images2.imgbox.com/56/71/9KylfIjA_o.png"></p> 
<p></p> 
<p> 证明配置正确<br>  </p> 
<p>总结：</p> 
<p>链路聚合定义，实现的条件</p> 
<p>二层交换机和三层交换机实现的区别</p> 
<p>二层交换机的链路聚合只能是二层交换机，不带IP地址功能</p> 
<p>三层交换机是三层交换机，带IP地址功能</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3092774fe3907b478ee9483b06d2c308/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ftp服务器模式多用户响应,ftp服务器多用户</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e3e9fd43d9155ba4c727b758f6ff9a4f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">英雄联盟祖安服务器要维护多久,英雄联盟道歉IG</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>