<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux根目录扩容--两篇 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux根目录扩容--两篇" />
<meta property="og:description" content="Linux根目录扩容--两篇 1.命令汇总 // 首先查看根目录大小 # df -h / // 查看磁盘与挂载情况，可以看到磁盘的文件系统。 # lsblk # lsblk -f // 查看磁盘详细信息 # fdisk -1 // 对/dev/vda磁盘进行分区 # fdisk /dev/vda // m帮助命令 Command(m for help) :m // n添加新的分区 Command(m for help) :n Partition type: // 主要分区 p primary (2 primary, 0 extended, 2 free) // 扩展分区 e extended // 一路回车,采用默认配置 Select (default p) : // 分区编号,新创建的分区名称会在/dev/vda上追加这个编号 比如:/dev/vda3 Partition number (3,4, default 3) : First sector (20971520-419430399, default 20971520): last sector, &#43;sectors or &#43;sizefK M G] (20971520-419430399, default 419430399): // 保存并退出 Command(m for help) :w // 在不重启的情况下重读分区表,否则lsblk命令看不到新创建的分区 # partprobe // 再次查看磁盘与挂载情况，可以看到新创建的分区 # lsblk # lsblk -f // 开始扩容 # lvm // 创建物理卷 lvm&gt; pvcreate /dev/vda3 Physical volume &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9401e28f1c44f4388856f1c9098e31cb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-26T19:23:00+08:00" />
<meta property="article:modified_time" content="2023-07-26T19:23:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux根目录扩容--两篇</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown" style="font-size: 16px;"> 
 <h2 id="linux根目录扩容--两篇">Linux根目录扩容--两篇</h2> 
 <h3 id="1命令汇总">1.命令汇总</h3> 
 <pre class="has"><code class="language-shell">// 首先查看根目录大小
# df -h /
// 查看磁盘与挂载情况，可以看到磁盘的文件系统。
# lsblk
# lsblk -f
// 查看磁盘详细信息
# fdisk -1
// 对/dev/vda磁盘进行分区
# fdisk /dev/vda
	// m帮助命令
	Command(m for help) :m
	// n添加新的分区
	Command(m for help) :n
	Partition type:
		// 主要分区
		p primary (2 primary, 0 extended, 2 free)
		// 扩展分区
		e extended
	// 一路回车,采用默认配置
	Select (default p) :
	// 分区编号,新创建的分区名称会在/dev/vda上追加这个编号 比如:/dev/vda3
	Partition number (3,4, default 3) :
	First sector (20971520-419430399, default 20971520):
	last sector, +sectors or +sizefK M G] (20971520-419430399, default 419430399):
	// 保存并退出
	Command(m for help) :w
// 在不重启的情况下重读分区表,否则lsblk命令看不到新创建的分区
# partprobe
// 再次查看磁盘与挂载情况，可以看到新创建的分区
# lsblk
# lsblk -f

// 开始扩容
# lvm
	// 创建物理卷
	lvm&gt; pvcreate /dev/vda3
		Physical volume "/dev/vda3" successfuly created.
	// 查看物理卷和卷组的属性 注意VG Name 和 VG Size
	lvm&gt; pvdisplay
	// 查看逻辑卷和卷组的属性 注意VG Name 和 VG Size
	lvm&gt; vgdisplay 
	// 将新创建的物理卷/dev/vda3添加到centos卷组
	lvm&gt; vgextend centos /dev/vda3
	// 再次查看 注意VG Name 和 VG Size
	lvm&gt; vgdisplay 
	lvm&gt; lvdisplay
	// 将卷组剩余空间添加到逻辑卷 /dev/mapper/centos-root 也就是我们挂载的 根目录 /所对应的分区。
	lvm&gt; lvextend -l +100%FREE /dev/mappper/centos-root
	lwm&gt; exit
// 同步到文件系统
// 之前只是对逻辑卷扩容，还要同步到文件系统，实现对根目录的扩容
# xfs_growfs /dev/mapper/centos-root
// 最后再次查看根目录大小
# df -h /</code></pre> 
 <h3 id="2图文详解">2.图文详解</h3> 
 <h4 id="21查看磁盘详细信息">2.1查看磁盘详细信息</h4> 
 <p><img src="https://images2.imgbox.com/89/7a/1uenHHRG_o.png" alt="" style="outline: none;"></p> 
 <h4 id="22对磁盘进行分区">2.2对磁盘进行分区</h4> 
 <p><img src="https://images2.imgbox.com/6f/3f/YtfHbfYY_o.png" alt="" style="outline: none;"></p> 
 <h4 id="23查看磁盘挂载情况">2.3查看磁盘挂载情况</h4> 
 <p><img src="https://images2.imgbox.com/96/42/64hDzHdg_o.png" alt="" style="outline: none;"></p> 
 <h4 id="24开始扩容并查看物理卷逻辑卷信息">2.4开始扩容,并查看物理卷,逻辑卷信息</h4> 
 <p><img src="https://images2.imgbox.com/70/84/oKQ25g7H_o.png" alt="" style="outline: none;"></p> 
 <h4 id="25查看磁盘扩容前后数据">2.5查看磁盘扩容前后数据</h4> 
 <p><img src="https://images2.imgbox.com/24/2d/P5oWu0xb_o.png" alt="" style="outline: none;"></p> 
 <h4 id="26将卷组剩余空间添加到逻辑卷-devmappercentos-root-也就是我们挂载的-根目录-所对应的分区">2.6将卷组剩余空间添加到逻辑卷 /dev/mapper/centos-root 也就是我们挂载的 <a href="https://so.csdn.net/so/search?q=%E6%A0%B9%E7%9B%AE%E5%BD%95&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noopener noreferrer">根目录</a> /所对应的分区</h4> 
 <p><img src="https://images2.imgbox.com/03/db/H4FgTsi6_o.png" alt="" style="outline: none;"></p> 
 <h4 id="27查看添加后的逻辑卷信息">2.7查看添加后的逻辑卷信息</h4> 
 <p><img src="https://images2.imgbox.com/2a/91/f1rP0qrC_o.png" alt="" style="outline: none;"></p> 
 <h4 id="28同步到文件系统查看根目录大小">2.8同步到文件系统,查看根目录大小</h4> 
 <p><img src="https://images2.imgbox.com/39/4b/gFGe6XSu_o.png" alt="" style="outline: none;"></p> 
 <blockquote> 
  <p>原文链接：<a href="https://blog.csdn.net/weixin_43948460/article/details/128203043" target="_blank" rel="noopener noopener noreferrer">(359条消息) Linux根目录扩容_linux如何给根目录扩容_CxyGxm的博客-CSDN博客</a></p> 
 </blockquote> 
 <h3 id="这是第二篇博客写的更加详细可供参考">这是第二篇博客，写的更加详细：可供参考</h3> 
 <p><strong>Linux</strong> <strong>磁盘根目录扩容</strong></p> 
 <p><img src="https://images2.imgbox.com/15/67/WJg49Izh_o.png" alt="" style="outline: none;"></p> 
 <p><strong>1.</strong> <strong>输入命令:df -hl</strong></p> 
 <p><strong>红色框标记的呢就是服务器的主目录，我们能看到总容量17G ，已使用2.1G 可用15G</strong></p> 
 <p><strong>我们要扩张磁盘空间的就是挂载点为:/ (的这个)</strong></p> 
 <p><strong>2.</strong> <strong>*查询磁盘分区</strong></p> 
 <p><strong>命令：</strong> fdisk -l</p> 
 <p><img src="https://images2.imgbox.com/70/92/AQoIQExT_o.png" alt="" style="outline: none;"></p> 
 <p><strong>我们找到/dev/sdb 这个磁盘名称就是我们新添加的，也是空闲的磁盘。</strong></p> 
 <p><strong>使用我新添加的磁盘来扩容！</strong></p> 
 <p><strong>3.****磁盘分区</strong></p> 
 <p><strong>命令：</strong> fdisk /dev/sdb</p> 
 <p><img src="https://images2.imgbox.com/d8/09/5ZpLruZk_o.png" alt="" style="outline: none;"></p> 
 <p><strong>根据箭头指示的去做就不过多说了！</strong></p> 
 <p>输入w 回车键即可保存退出</p> 
 <p>4.创建物理卷</p> 
 <p>命令：pvcreate /dev/sdb1</p> 
 <p>5.查询创建的物理卷</p> 
 <p>命令：pvdisplay</p> 
 <p><img src="https://images2.imgbox.com/74/39/ugShTRdJ_o.png" alt="" style="outline: none;"></p> 
 <p><strong>6.</strong>通过vgextend命令将新添加卷加入到卷组centos中</p> 
 <p><strong>命令：</strong>vgextend centos /dev/sdb1</p> 
 <p><strong>7.</strong>查看卷组空闲块Free PE</p> 
 <p>命令：vgdisplay</p> 
 <p><img src="https://images2.imgbox.com/5e/e5/Or4qX7XV_o.png" alt="" style="outline: none;"></p> 
 <p>在这我们能看到刚才创建的40G分区块,也是目前空闲的磁盘块。</p> 
 <p>8.向要扩容的目录，添加扩容容量</p> 
 <p>通过 lvextend 命令扩展根目录挂载点为：/dev/mapper/centos-root</p> 
 <p>扩容命令：lvextend -L +40G /dev/mapper/centos-root</p> 
 <p><img src="https://images2.imgbox.com/ea/11/kfP3R5SC_o.png" alt="" style="outline: none;"></p> 
 <p>虽然我们刚才查询有40G空间但是肯能在这扩容时输入+40G肯能会出错提示空间不足，那我们就填写+39.9G就行了！</p> 
 <p>最后我们输入命令：xfs_growfs /dev/mapper/centos-root</p> 
 <p><img src="https://images2.imgbox.com/52/f4/9wxKTvBc_o.png" alt="" style="outline: none;"></p> 
 <p>目前扩容的步骤已经完成了，自行查询一下即可看到根目录扩展成功了!</p> 
 <p>原文链接：<a href="https://blog.csdn.net/eagle89/article/details/128627377" target="_blank" rel="noopener noopener noreferrer">https://blog.csdn.net/eagle89/article/details/128627377</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b972e25ab74c4a516c3ef05d7f4e3317/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PCIE常用缩写及含义</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/65bda774403e3b040dc6c5b3ef9b0ada/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言：分支和循环_switch</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>