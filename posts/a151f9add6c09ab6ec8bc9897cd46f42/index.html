<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>“别动方块”游戏 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="“别动方块”游戏" />
<meta property="og:description" content="“别动方块”完整代码 #include &lt;graphics.h&gt; #include &lt;conio.h&gt; #include &lt;stdio.h&gt; int main() { float width,height,gravity; // 游戏画面大小、重力加速度 float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小 float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数 int score = 0; // 得分 int isBallOnFloor = 1; // 小球是否在地面上，避免重复起跳 width = 600; // 游戏画面宽度 height = 400; // 游戏画面高度 gravity = 0.6; // 重力加速度 initgraph(width, height); // 新建一个画布 radius = 20; // 小球半径	ball_x = width/4; // 小球x位置 ball_y = height-radius; // 小球y位置 ball_vy = 0; // 小球初始y速度为0 rect_height = 100; // 方块高度 rect_width = 20; // 方块宽度 rect_left_x = width*3/4; // 方块左边x坐标 rect_top_y = height - rect_height; // 方块顶部y坐标 rect_vx = -3; // 方块x方向速度 while(1) // 一直循环 {	if (kbhit()) // 当按键时 { char input = _getch(); // 获得输入字符 if (input==&#39; &#39; &amp;&amp; isBallOnFloor==1) // 当按下空格键，并且小球在地面上时 { ball_vy = -17; // 给小球一个向上的速度 isBallOnFloor = 0; // 表示小球不在地面了，不能重复起跳 } } ball_vy = ball_vy &#43; gravity; // 根据重力加速度更新小球y方向速度 ball_y = ball_y &#43; ball_vy; // 根据小球y方向速度更新其y坐标 if (ball_y &gt;= height-radius) // 如果小球落到地面上 { ball_vy = 0; // y速度为0 ball_y = height-radius; // 规范其y坐标，避免落到地面下 isBallOnFloor = 1; // 表示小球在地面上 } rect_left_x = rect_left_x &#43; rect_vx; // 方块向左移 if (rect_left_x &lt;= 0) // 如果方块跑到最左边 { rect_left_x = width; // 在最右边重新出现 score = score &#43; 1; // 得分&#43;1 rect_height = rand() % int(height/4) &#43; height/4; // 设置随机高度 rect_vx = rand()/float(RAND_MAX) *4 - 7; // 设置方块随机速度 } // 如果小球碰到方块 if ((rect_left_x &lt;= ball_x &#43; radius) &amp;&amp; (rect_left_x &#43; rect_width &gt;= ball_x - radius) &amp;&amp; (height - rect_height &lt;= ball_y &#43; radius) ) { Sleep(50); // 慢动作效果 score = 0; // 得分清零 } cleardevice(); // 清空画面 fillcircle(ball_x, ball_y, radius); // 绘制小球 // 画方块 fillrectangle(rect_left_x, height - rect_height, rect_left_x &#43; rect_width,height); TCHAR s[20]; // 定义字符串数组 _stprintf(s, _T(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a151f9add6c09ab6ec8bc9897cd46f42/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-25T01:19:29+08:00" />
<meta property="article:modified_time" content="2022-03-25T01:19:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">“别动方块”游戏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>“别动方块”完整代码 </p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小
	float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数
	int score = 0; // 得分
	int isBallOnFloor = 1; // 小球是否在地面上，避免重复起跳

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0

	rect_height = 100; // 方块高度
	rect_width = 20; // 方块宽度
	rect_left_x = width*3/4; // 方块左边x坐标
	rect_top_y = height - rect_height; // 方块顶部y坐标
	rect_vx = -3; // 方块x方向速度

	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ' &amp;&amp; isBallOnFloor==1) // 当按下空格键，并且小球在地面上时
			{
				ball_vy = -17; // 给小球一个向上的速度
				isBallOnFloor = 0; // 表示小球不在地面了，不能重复起跳
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
			isBallOnFloor = 1; // 表示小球在地面上
		}

		rect_left_x = rect_left_x + rect_vx; // 方块向左移
		if (rect_left_x &lt;= 0) // 如果方块跑到最左边
		{
			rect_left_x = width; // 在最右边重新出现
			score = score + 1; // 得分+1
			rect_height = rand() % int(height/4) + height/4; // 设置随机高度
			rect_vx = rand()/float(RAND_MAX) *4 - 7; // 设置方块随机速度
		}
		// 如果小球碰到方块
		if ((rect_left_x &lt;= ball_x + radius) 
			&amp;&amp; (rect_left_x + rect_width &gt;= ball_x - radius) 
			&amp;&amp; (height - rect_height &lt;= ball_y + radius) )
		{
			Sleep(50); // 慢动作效果
			score = 0; // 得分清零
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		// 画方块
		fillrectangle(rect_left_x, height - rect_height, rect_left_x + rect_width,height);
		TCHAR s[20]; // 定义字符串数组
		_stprintf(s, _T("%d"),  score); // 将score转换为字符串
		settextstyle(40, 0, _T("宋体")); // 设置文字大小、字体
		outtextxy(50, 30, s); // 输出得分文字
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<hr> 
<p>3.1 <span style="color:#262626;">字符</span></p> 
<p><span style="color:#262626;">整型（int）、浮点型（float）、字符型（char）数据类型：</span></p> 
<p>  </p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	int i = 10;//整型
	printf("%d\n",i);

	float g;//浮点数
	g = 9.8;
	printf("%f\n",g);

	char c;//字符型
	c =  _getch();
	printf("%c\n",c);
	
	while (1)
	{
		c = _getch();
		printf("输入的字符为：%c\n",c);
	}
	
	while (1)
	{
		if(kbhit())
		{
			c = _getch();
			if(c==' ')
			{
				printf("输入了空格\n");
			}
			
		}
		
	}


    while(1)  // 一直循环
	{		
		if (kbhit())// 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ') // 当按下空格键
				printf("按下了空格！\n");			
		}
	}
	_getch();
	
	return 0;
}</code></pre> 
<hr> 
<p><span style="color:#262626;">3.2　按空格键控制小球起跳</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0
	
	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ') // 当按下空格键时
			{
				ball_vy = -16; // 给小球一个向上的速度
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<hr> 
<p> <span style="color:#262626;">3.3　方块的绘制与移动</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小
	float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0

	rect_height = 100; // 方块高度
	rect_width = 20; // 方块宽度
	rect_left_x = width*3/4; // 方块左边x坐标
	rect_top_y = height - rect_height; // 方块顶部y坐标
	rect_vx = -3; // 方块x方向速度
	
	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ') // 当按下空格键时
			{
				ball_vy = -16; // 给小球一个向上的速度
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
		}

		rect_left_x = rect_left_x + rect_vx; // 方块向左移
		if (rect_left_x &lt;= 0) // 如果方块跑到最左边
		{
			rect_left_x = width; // 在最右边重新出现
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		// 画方块
		fillrectangle(rect_left_x, height - rect_height, rect_left_x + rect_width,height);
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<hr> 
<p> <span style="color:#262626;">3.4　小球和方块的碰撞判断</span></p> 
<p style="margin-left:0in;text-align:justify;"><span style="color:#000000;">C语言提供了3种逻辑运算符：!（非）、&amp;&amp;（与）、||（或），用于实现多个逻辑条件的组合。</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	printf("%d\n",(2&gt;3));
	printf("%d\n",(5&lt;6));
	printf("%d\n",!(2&gt;3));
	printf("%d\n",(2&gt;3)&amp;&amp;(5&lt;6));
	printf("%d\n",(2&gt;3)||(5&lt;6));
	_getch();
	return 0;
}</code></pre> 
<pre><code class="language-cpp">		// 如果小球碰到方块
		if ((rect_left_x &lt;= ball_x + radius) 
			&amp;&amp; (rect_left_x + rect_width &gt;= ball_x - radius) 
			&amp;&amp; (height - rect_height &lt;= ball_y + radius) )
		{
			Sleep(100); // 慢动作效果
		}
</code></pre> 
<hr> 
<p><span style="color:#262626;">3.5　随机方块的速度和高度</span></p> 
<p><span style="color:#000000;">rand()函数可以生成随机整数：</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	int i;
	while (1)
	{
		i = rand();
		printf("%d\n",i);
		Sleep(100);
	}
	return 0;
}</code></pre> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">为了得到设定范围内的随机数，需要利用浮点数除法、整数除法、取余运算符。输入并运行代码</span><span style="color:#000000;">：</span></p> 
<div style="margin-left:.38in;text-align:left;">
  • 
 <span style="color:#000000;">当除号“/”两边有一个数字或变量为浮点数时，</span> 
</div> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">实行浮点数除法，即5.0/2=2.5。</span></p> 
<div style="margin-left:.38in;text-align:left;">
  • 
 <span style="color:#000000;">当除号“/”两边数字或变量都为整数时，</span> 
</div> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">实行整数除法，得到两个整数相除的商，即5/2=2。 </span></p> 
<div style="margin-left:.38in;text-align:left;">
  • 
 <span style="color:#000000;">“10%3”中的百分号“%”为取余运算符，</span> 
</div> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">得到两个整数相除的余数，即10%3=1。</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float a = 5.0/2;
	printf("%f\n",a);
	int b = 5/2;
	printf("%d\n",b);
	int c = 10%3;
	printf("%d\n",c);
	_getch();
	return 0;
}</code></pre> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">类型转换</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">float()、int()形式称为强制类型转换。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">float(5)把5转换为浮点型，进行浮点数除法后，float(5)/2等于2.5；</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">int(6.3)把6.3转换为整数6，进行整数除法后，int(6.3)/2等于3；</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">int(9.0/2)把浮点数除法结果4.5转换为整数，结果为4。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">RAND_MAX存储了rand( )函数所能生成的最大整数，rand( )/float(RAND_MAX)即可生成0 ～ 1的随机小数。</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	int a = 1.1;
	printf("%d\n",a);//1
	float b = 2;
	printf("%f\n",b);//2.000000
	float c = float(5)/2;
	printf("%f\n",c);//2.500000
	int d = int(6.3)/2;
	printf("%d\n",d);//3
	int e = int(9.0/2);
	printf("%d\n",e);//4
	_getch();
	return 0;
}</code></pre> 
<p>方块随机高度速度：</p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">当方块重新出现时，添加代码设置其随机高度范围为height/4到height/2，</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">随机速度为-3到7，添加代码如下：</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小
	float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0

	rect_height = 100; // 方块高度
	rect_width = 20; // 方块宽度
	rect_left_x = width*3/4; // 方块左边x坐标
	rect_top_y = height - rect_height; // 方块顶部y坐标
	rect_vx = -3; // 方块x方向速度

	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ') // 当按下空格键时
			{
				ball_vy = -16; // 给小球一个向上的速度
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
		}

		rect_left_x = rect_left_x + rect_vx; // 方块向左移
		if (rect_left_x &lt;= 0) // 如果方块跑到最左边
		{
			rect_left_x = width; // 在最右边重新出现
			rect_height = rand() % int(height/4) + height/4; // 设置随机高度
			rect_vx = rand()/float(RAND_MAX) *4 - 7; // 设置方块随机速度
		}
		// 如果小球碰到方块
		if ((rect_left_x &lt;= ball_x + radius) 
			&amp;&amp; (rect_left_x + rect_width &gt;= ball_x - radius) 
			&amp;&amp; (height - rect_height &lt;= ball_y + radius) )
		{
			Sleep(100); // 慢动作效果
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		// 画方块
		fillrectangle(rect_left_x, height - rect_height, rect_left_x + rect_width,height);
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<hr> 
<p><span style="color:#262626;">3.6　得分的计算与显示</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小
	float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数
	int score = 0; // 得分

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0

	rect_height = 100; // 方块高度
	rect_width = 20; // 方块宽度
	rect_left_x = width*3/4; // 方块左边x坐标
	rect_top_y = height - rect_height; // 方块顶部y坐标
	rect_vx = -3; // 方块x方向速度

	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ') // 当按下空格键时
			{
				ball_vy = -17; // 给小球一个向上的速度
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
		}

		rect_left_x = rect_left_x + rect_vx; // 方块向左移
		if (rect_left_x &lt;= 0) // 如果方块跑到最左边
		{
			rect_left_x = width; // 在最右边重新出现
			score = score + 1; // 得分+1
			rect_height = rand() % int(height/4) + height/4; // 设置随机高度
			rect_vx = rand()/float(RAND_MAX) *4 - 7; // 设置方块随机速度
		}
		// 如果小球碰到方块
		if ((rect_left_x &lt;= ball_x + radius) 
			&amp;&amp; (rect_left_x + rect_width &gt;= ball_x - radius) 
			&amp;&amp; (height - rect_height &lt;= ball_y + radius) )
		{
			Sleep(100); // 慢动作效果
			score = 0; // 得分清零
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		// 画方块
		fillrectangle(rect_left_x, height - rect_height, rect_left_x + rect_width,height);
		TCHAR s[20]; // 定义字符串数组
		_stprintf(s, _T("%d"),  score); // 将score转换为字符串
		settextstyle(40, 0, _T("宋体")); // 设置文字大小、字体
		outtextxy(50, 30, s); // 输出得分文字
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<hr> 
<p><span style="color:#262626;">3.7　避免空中起跳</span></p> 
<pre><code class="language-cpp">#include &lt;graphics.h&gt;  
#include &lt;conio.h&gt;
#include &lt;stdio.h&gt;
int main()
{
	float width,height,gravity; // 游戏画面大小、重力加速度
	float ball_x,ball_y,ball_vy,radius; // 小球圆心坐标、y方向速度、半径大小
	float rect_left_x,rect_top_y,rect_width,rect_height,rect_vx; // 方块障碍物的相关参数
	int score = 0; // 得分
	int isBallOnFloor = 1; // 小球是否在地面上，避免重复起跳

	width = 600;  // 游戏画面宽度
	height = 400; // 游戏画面高度
	gravity = 0.6;  // 重力加速度
	initgraph(width, height); // 新建一个画布

	radius = 20; // 小球半径	
	ball_x = width/4; // 小球x位置
	ball_y = height-radius;  // 小球y位置
	ball_vy = 0;  // 小球初始y速度为0

	rect_height = 100; // 方块高度
	rect_width = 20; // 方块宽度
	rect_left_x = width*3/4; // 方块左边x坐标
	rect_top_y = height - rect_height; // 方块顶部y坐标
	rect_vx = -3; // 方块x方向速度

	while(1) // 一直循环
	{		
		if (kbhit()) // 当按键时
		{
			char input = _getch(); // 获得输入字符
			if (input==' ' &amp;&amp; isBallOnFloor==1) // 当按下空格键，并且小球在地面上时
			{
				ball_vy = -17; // 给小球一个向上的速度
				isBallOnFloor = 0; // 表示小球不在地面了，不能重复起跳
			}
		}

		ball_vy = ball_vy + gravity;  // 根据重力加速度更新小球y方向速度
		ball_y = ball_y + ball_vy;    // 根据小球y方向速度更新其y坐标
		if (ball_y &gt;= height-radius)  // 如果小球落到地面上
		{
			ball_vy = 0;  // y速度为0
			ball_y = height-radius;  // 规范其y坐标，避免落到地面下
			isBallOnFloor = 1; // 表示小球在地面上
		}

		rect_left_x = rect_left_x + rect_vx; // 方块向左移
		if (rect_left_x &lt;= 0) // 如果方块跑到最左边
		{
			rect_left_x = width; // 在最右边重新出现
			score = score + 1; // 得分+1
			rect_height = rand() % int(height/4) + height/4; // 设置随机高度
			rect_vx = rand()/float(RAND_MAX) *4 - 7; // 设置方块随机速度
		}
		// 如果小球碰到方块
		if ((rect_left_x &lt;= ball_x + radius) 
			&amp;&amp; (rect_left_x + rect_width &gt;= ball_x - radius) 
			&amp;&amp; (height - rect_height &lt;= ball_y + radius) )
		{
			Sleep(50); // 慢动作效果
			score = 0; // 得分清零
		}

		cleardevice();  // 清空画面
		fillcircle(ball_x, ball_y, radius);  // 绘制小球
		// 画方块
		fillrectangle(rect_left_x, height - rect_height, rect_left_x + rect_width,height);
		TCHAR s[20]; // 定义字符串数组
		_stprintf(s, _T("%d"),  score); // 将score转换为字符串
		settextstyle(40, 0, _T("宋体")); // 设置文字大小、字体
		outtextxy(50, 30, s); // 输出得分文字
		Sleep(10);  // 暂停10毫秒
	}
	closegraph(); 
	return 0;
}</code></pre> 
<p> </p> 
<hr> 
<p>补充：代码左边行号设置</p> 
<p>工具——选项——文本编译器——所有语言——行号</p> 
<p><img alt="" height="127" src="https://images2.imgbox.com/4e/1f/tWn4NVi0_o.png" width="607"></p> 
<p><img alt="" height="342" src="https://images2.imgbox.com/9a/e1/aZjo2JID_o.png" width="408"></p> 
<p> <img alt="" height="533" src="https://images2.imgbox.com/8d/1c/rVCSSOc8_o.png" width="948"></p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa17eff54b311e0a925b8aa909bce48f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">语音识别器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/722fd37515342347e1936c16239d34e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AD20/Altium designer——如何进行DRC检查、冲突的错误如何改正</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>