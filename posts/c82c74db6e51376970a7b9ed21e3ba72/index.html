<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库常用命令之外键（foreign key）之多对一（总结，基础） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库常用命令之外键（foreign key）之多对一（总结，基础）" />
<meta property="og:description" content="我是小白，刚接触MySQL不久，现阶段正在学习，为此在CSDN上留下自己的学习笔记。如果有错误的地方还请大家见谅，评论或者私发我错误地方哦，谢谢大家，嘿嘿~
此篇将记录外键的相关知识，上篇内容为对一张表的约束条件（传送门：创建表的完整性语法）
外键（foreign key）：百度百科
引言：
要使两张表形成关联，外键只能引用外表中的列的值或使用空值。可以保持数据一致性，完整性，主要目的是控制存储在外键表中的数据。
如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为主表，具有此外键的表被称为主表的从表。外键又称作外关键字。
员工表（关联表），部门表（被关联表） 对上表进行关联
foreign key注意：
1、被关联的字段必须是一个key，通常是id字段
2、创建表时：必须先建立被关联的表，才能建立关联表
建表（先创建部门表） 建立部门表：
create table dep(
id int primary key auto_increment,
dep_name varchar(20),
dep_info varchar(20)
);
建立员工表：
create table emp(
id int primary key auto_increment,
name varchar(20),
age int,
dep_id int,
constraint fk_emp_dep
foreign key(dep_id) references dep(id)
);
运行截图
语法
constraint 外键名字 foreign key(当前表需要关联的id：此处为dep_id) references 被关联的表名：此处为dep(被关联表的id，此处为id)
注：
1.constraint 外键名字：也可以不写，外键名字自己取，此处取为fk_emp_dep
2.&#34;constraint fk_emp_dep
foreign key(dep_id) references dep(id)&#34;
可以写在一行，constraint fk_emp_dep foreign key(dep_id) references dep(id)，这里为了美观写为了两行。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c82c74db6e51376970a7b9ed21e3ba72/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-05T14:32:24+08:00" />
<meta property="article:modified_time" content="2022-03-05T14:32:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库常用命令之外键（foreign key）之多对一（总结，基础）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>我是小白，刚接触MySQL不久，现阶段正在学习，为此在CSDN上留下自己的学习笔记。如果有错误的地方还请大家见谅，评论或者私发我错误地方哦，谢谢大家，嘿嘿~</p> 
<p></p> 
<p>此篇将记录外键的相关知识，上篇内容为对一张表的约束条件（传送门：<a class="link-info" href="https://blog.csdn.net/m0_50962679/article/details/123202082" title="创建表的完整性语法">创建表的完整性语法</a>）</p> 
<p></p> 
<p>外键（foreign key）：<a class="link-info" href="https://baike.baidu.com/item/%E5%A4%96%E9%94%AE/1232333?fr=aladdin" rel="nofollow" title="百度百科">百度百科</a></p> 
<blockquote> 
 <p>引言：</p> 
 <p>       要使两张表形成关联，外键只能引用外表中的列的值或使用空值。可以保持数据一致性，完整性，主要目的是控制存储在外键表中的数据。</p> 
 <p>      如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为主表，具有此外键的表被称为主表的从表。外键又称作外关键字。</p> 
</blockquote> 
<p></p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a0/59/EmydX3qL_o.png">员工表（关联表），部门表（被关联表） </p> 
<p>对上表进行关联</p> 
<p>foreign key注意：</p> 
<p>1、<span style="color:#fe2c24;">被关联的字段必须是一个key，通常是id字段</span></p> 
<p>2、<span style="color:#fe2c24;">创建表时：必须先建立被关联的表，才能建立关联表</span></p> 
<p></p> 
<h2><span style="color:#fe2c24;">建表（先创建部门表）</span></h2> 
<p>建立部门表：</p> 
<p><span style="color:#fe2c24;">create table dep(<br> id int primary key auto_increment,<br> dep_name varchar(20),<br> dep_info varchar(20)<br> );</span></p> 
<p>建立员工表：</p> 
<p><span style="color:#fe2c24;">create table emp(<br> id int primary key auto_increment,<br> name varchar(20),<br> age int,<br> dep_id int,<br> constraint fk_emp_dep<br> foreign key(dep_id) references dep(id)<br> );</span></p> 
<p>运行截图</p> 
<p><img alt="" height="977" src="https://images2.imgbox.com/b5/3f/nm4KwcuD_o.png" width="902"></p> 
<p>语法</p> 
<p>    constraint  外键名字  foreign  key(当前表需要关联的id：此处为dep_id)   references   被关联的表名：此处为dep(被关联表的id，此处为id)</p> 
<p>注：</p> 
<p>1.constraint 外键名字：也可以不写，外键名字自己取，此处取为fk_emp_dep</p> 
<p>2."constraint fk_emp_dep<br> foreign key(dep_id) references dep(id)"</p> 
<p>可以写在一行，constraint fk_emp_dep foreign key(dep_id) references dep(id)，这里为了美观写为了两行。</p> 
<p></p> 
<p></p> 
<h2><span style="color:#fe2c24;">插入值（先插入部门值）</span></h2> 
<p>插入部门值：</p> 
<p><span style="color:#fe2c24;">insert into dep(dep_name,dep_info) values<br> ('python','python_course'),<br> ('mysql','mysql_course'),<br> ('math','math_course');</span></p> 
<p>插入员工值：</p> 
<p><span style="color:#fe2c24;">insert into emp(name,age,dep_id) values<br> ('江',21,1),<br> ('顾',18,2),<br> ('盛',17,3),<br> ('停',35,1),<br> ('方',36,3);</span></p> 
<p>运行截图</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/89/dc/Uyed0a6K_o.png" width="733"></p> 
<p></p> 
<p></p> 
<h2><span style="color:#fe2c24;">查</span></h2> 
<p>查询：<span style="color:#fe2c24;">select * from emp,dep where emp.dep_id = dep.id order by emp.id asc;</span></p> 
<p>运行截图</p> 
<p><img alt="" height="331" src="https://images2.imgbox.com/65/ff/AekMpwBC_o.png" width="932"></p> 
<p>注:</p> 
<p>1.where emp.dep_id = dep.id：使员工表的dep_id与被关联表部门表的dep.id相对应。</p> 
<p>2.order by emp.id asc：按正序排列显示。</p> 
<p></p> 
<p></p> 
<h2><span style="color:#fe2c24;">删除</span></h2> 
<p>1.删除外键</p> 
<p>一般不用删除外键，外键是考虑好之后建立的，如果一定要删除的话，语句为：</p> 
<p>       <span style="color:#fe2c24;"> alter table 表名 drop foreign key  外键名字；</span></p> 
<p>此处不进行演示，感兴趣的话可以私下验证。</p> 
<p>2.删除表</p> 
<p>要先删除关联表再删除被关联表。</p> 
<p>       <span style="color:#fe2c24;"> drop table emp;</span></p> 
<p><span style="color:#fe2c24;">        drop table dep;</span></p> 
<p>运行截图</p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/1f/f2/ADdqs8wd_o.png" width="486"></p> 
<p>3.删除记录</p> 
<p>要删除部门表里面的一个id需要先把它被关联的字段删除</p> 
<p>        <span style="color:#fe2c24;">delete from emp where dep_id =2;</span></p> 
<p><span style="color:#fe2c24;">        delete from dep where id =2;</span></p> 
<p>运行截图</p> 
<p><img alt="" height="472" src="https://images2.imgbox.com/8f/88/CHGbSLGP_o.png" width="961"></p> 
<p></p> 
<p></p> 
<h2><span style="color:#fe2c24;">改</span></h2> 
<p>如果要更新或删除同步，员工表设置成更新删除同步需要加 on update cascade on delete cascade</p> 
<p>重新建立表，插入值</p> 
<p>建立员工表：</p> 
<p><span style="color:#fe2c24;">create table emp(<br>     -&gt; id int primary key auto_increment,<br>     -&gt; name varchar(20),<br>     -&gt; age int,<br>     -&gt; dep_id int,<br>     -&gt; foreign key(dep_id) references dep(id)<br>     -&gt; on update cascade on delete cascade<br>     -&gt; );</span></p> 
<p>运行截图</p> 
<p><img alt="" height="424" src="https://images2.imgbox.com/64/6a/erfqkQlH_o.png" width="1006"></p> 
<p></p> 
<p>此篇为外键之多对一。</p> 
<p>如果您感觉有用的话，请点赞评论收藏哦，非常感谢，好人一生平安！！</p> 
<p>祝大家天天开心❀❀❀❀❀❀*★,°*:.☆(￣▽￣)/$:*.°★* 。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3757220e5515e5d63c1f267d31a31e43/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Js拓展_算法课程设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8e24af9a22425663da0717637caa8a0f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hive03：Hive安装部署</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>