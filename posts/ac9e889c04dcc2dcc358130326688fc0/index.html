<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>arcgispro制作gp工具、发布和使用GP服务 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="arcgispro制作gp工具、发布和使用GP服务" />
<meta property="og:description" content="需求： 在arcgispro使用modelbuilder制作包含相交、汇总统计两个工具功能的gp工具，并且将其发布到portal，并在portal上操作该gp服务
效果图： 模型工具： 链接：https://pan.baidu.com/s/1MKSQpKZP7CVPQNWQDamAPA 提取码：md6x 具体实现： 1、制作gp工具。
1）将相交工具和汇总统计工具拖拽到modelbuilder界面这个是老套路；关键点是其中的相关参数设置需要注意：
①、模型的输入和输出建议使用模型参数，下图中带了字母P的是模型参数；
②其中“输入要素”数据的输入采用绝对路径。例如：C:\Users\admin\Desktop\新建文件夹 (2)\jsydgz.shp和C:\Users\admin\Desktop\新建文件夹 (2)\红线数据.shp，
③而模型的中间过程数据和输出参数采用相对路径，例如：%scratchworkspace%\output，在这里是通过引用临时工作空间来存储输出结果。 这个临时工作空间是在modelbuilder的环境（environments）下指定，同时注意需要在包含modelbuilder的工具箱所在的文件夹下创建一个名为“scratch.gdb”的文件地理数据库（我也不知道为什么，反正不这样出错过很多次），并在环境（environments）的临时工作空间（scratchworkspace）去指定这个“scratch.gdb”。 （今天又测试发现，也不一定需要手动创建scratch.gdb，只要在环境中指定一个gdb即可，但是手动创建scratch.gdb一定能成功。）
2）在模型属性面板配置模型的参数名称和数据类型
3）运行模型 ，必须确保模型能够成功运行。
2、发布gp服务。arcgispro菜单栏“share分享”——WebTool——在WebTool下拉列表找到刚刚成功运行的gp工具，在弹出的界面中设置相应的参数，如下图。
3、使用gp服务。发布成功之后在portal中查看刚刚发的gp服务，最终效果见开头“效果图”部分。
扩展： 解压包含shp的zip文件，并基于这个shp来与另一个面做相交运算以及汇总统计。其中解压zip采用Python制作的gp工具，并将gp工具添加到modelbuilder以进行后续的相交和汇总统计。
链接：https://pan.baidu.com/s/1lKEvGoEaOfr6dSXRdqiLpA 提取码：3y7g 参考文档： https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/best-practices-authoring-web-tools-with-modelbuilder.htm
https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/authoring-web-tools-with-python-scripts.htm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ac9e889c04dcc2dcc358130326688fc0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-29T16:04:41+08:00" />
<meta property="article:modified_time" content="2019-11-29T16:04:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">arcgispro制作gp工具、发布和使用GP服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>需求：</h4> 
<p>在arcgispro使用modelbuilder制作包含相交、汇总统计两个工具功能的gp工具，并且将其发布到portal，并在portal上操作该gp服务</p> 
<h4>效果图：</h4> 
<p><img alt="" class="has" height="458" src="https://images2.imgbox.com/59/e6/ABM4QA9W_o.gif" width="900"></p> 
<h4>模型工具：</h4> 
<p>链接：<a href="https://pan.baidu.com/s/1MKSQpKZP7CVPQNWQDamAPA%C2%A0" rel="nofollow">https://pan.baidu.com/s/1MKSQpKZP7CVPQNWQDamAPA </a><br> 提取码：md6x </p> 
<h4>具体实现：</h4> 
<p> <strong>1、制作gp工具。</strong></p> 
<p>1）将相交工具和汇总统计工具拖拽到modelbuilder界面这个是老套路；关键点是其中的相关参数设置需要注意：</p> 
<p>①、模型的输入和输出建议使用模型参数，下图中带了字母P的是模型参数；</p> 
<p>②其中“输入要素”数据的输入采用绝对路径。例如：<em>C:\Users\admin\Desktop\新建文件夹 (2)\jsydgz.shp</em>和<em>C:\Users\admin\Desktop\新建文件夹 (2)\红线数据.shp</em>，</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/46/5b/n0eeYfJP_o.png"></p> 
<p>③而模型的中间过程数据和输出参数采用相对路径，例如：<span style="color:#f33b45;">%scratchworkspace%</span>\output，在这里是通过引用临时工作空间来存储输出结果。 </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/0e/9b/JcBdZsEi_o.png"></p> 
<p>这个临时工作空间是在modelbuilder的环境（environments）下指定，同时注意需要<u><strong>在包含modelbuilder的工具箱所在的文件夹下创建一个名为“scratch.gdb”的文件地理数据库（我也不知道为什么，反正不这样出错过很多次），并在环境（environments）的临时工作空间（scratchworkspace）去指定这个“scratch.gdb”</strong></u>。 （<strong><span style="color:#f33b45;">今天又测试发现，也不一定需要手动创建scratch.gdb，只要在环境中指定一个gdb即可，但是手动创建scratch.gdb一定能成功。</span></strong>）</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/84/a5/qfqHPnhg_o.png" width="700"></p> 
<p><img alt="" class="has" height="406" src="https://images2.imgbox.com/cc/dd/xUHHbohN_o.png" width="700"></p> 
<p>2）在模型属性面板配置模型的参数名称和数据类型</p> 
<p><img alt="" class="has" height="375" src="https://images2.imgbox.com/ae/19/KpjtEd1P_o.png" width="750"></p> 
<p>3）运行模型 ，必须确保模型能够成功运行。</p> 
<p><img alt="" class="has" height="560" src="https://images2.imgbox.com/2c/8d/ln7z32AB_o.png" width="600"></p> 
<p><strong>2、发布gp服务。</strong>arcgispro菜单栏“share分享”——WebTool——在WebTool下拉列表找到刚刚成功运行的gp工具，在弹出的界面中设置相应的参数，如下图。</p> 
<p><img alt="" class="has" height="398" src="https://images2.imgbox.com/25/52/koxyBvYt_o.png" width="860"></p> 
<p><strong>3、使用gp服务。</strong>发布成功之后在portal中查看刚刚发的gp服务，最终效果见开头“效果图”部分。</p> 
<h4>扩展：</h4> 
<p>解压包含shp的zip文件，并基于这个shp来与另一个面做相交运算以及汇总统计。其中解压zip采用Python制作的gp工具，并将gp工具添加到modelbuilder以进行后续的相交和汇总统计。</p> 
<p>链接：<a href="https://pan.baidu.com/s/1lKEvGoEaOfr6dSXRdqiLpA%C2%A0" rel="nofollow">https://pan.baidu.com/s/1lKEvGoEaOfr6dSXRdqiLpA </a><br> 提取码：3y7g </p> 
<h4>参考文档：</h4> 
<p><a href="https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/best-practices-authoring-web-tools-with-modelbuilder.htm" rel="nofollow">https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/best-practices-authoring-web-tools-with-modelbuilder.htm</a></p> 
<p><a href="https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/authoring-web-tools-with-python-scripts.htm" rel="nofollow">https://pro.arcgis.com/zh-cn/pro-app/help/analysis/geoprocessing/share-analysis/authoring-web-tools-with-python-scripts.htm</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fbfbfe92985d94b536bfbf8ec7a0892d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决Deepin系统WiFi网速慢的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43698daff3535aa9e4d7cc2246dd9ccf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">yii2和vue之间的跨域问题处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>