<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot邮件发送-maven项目(禁止水贴001) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot邮件发送-maven项目(禁止水贴001)" />
<meta property="og:description" content="1.maven依赖 &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.jz&lt;/groupId&gt; &lt;artifactId&gt;mail-project&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.0.1.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--定时任务和@Slf4j注解日志的依赖 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;!--邮件发送 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt; &lt;version&gt;2.1.3.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;!--设置程序执行的主类 --&gt; &lt;mainClass&gt;com.jz.ApplicationRun&lt;/mainClass&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;skip&gt;true&lt;/skip&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;finalName&gt;test-log&lt;/finalName&gt; &lt;/build&gt; &lt;/project&gt; 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fef3c359436304bbab3b68fff1e4206d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-29T11:04:39+08:00" />
<meta property="article:modified_time" content="2019-03-29T11:04:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot邮件发送-maven项目(禁止水贴001)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1maven_0"></a>1.maven依赖</h3> 
<pre><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;com.jz&lt;/groupId&gt;
	&lt;artifactId&gt;mail-project&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;parent&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
		&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
	&lt;/parent&gt;

	&lt;properties&gt;
		&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
		&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
		&lt;java.version&gt;1.8&lt;/java.version&gt;
	&lt;/properties&gt;
	&lt;dependencies&gt;
		&lt;!--定时任务和@Slf4j注解日志的依赖 --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;optional&gt;true&lt;/optional&gt;
		&lt;/dependency&gt;
		
		&lt;!--邮件发送 --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
			&lt;version&gt;2.1.3.RELEASE&lt;/version&gt;
			&lt;type&gt;pom&lt;/type&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;junit&lt;/groupId&gt;
			&lt;artifactId&gt;junit&lt;/artifactId&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
				&lt;configuration&gt; &lt;!--设置程序执行的主类 --&gt;
					&lt;mainClass&gt;com.jz.ApplicationRun&lt;/mainClass&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
				&lt;configuration&gt;
					&lt;skip&gt;true&lt;/skip&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
		&lt;finalName&gt;test-log&lt;/finalName&gt;
	&lt;/build&gt;

&lt;/project&gt;
</code></pre> 
<h3><a id="2applicationproperties_77"></a>2.application.properties配置</h3> 
<pre><code>#==================================
# servlet 相关配置
#----------------------------------
# 设置项目路径。默认是“/”
#server.servlet.context-path=/api
server.port=8888

spring.mail.host=smtp.qq.com
spring.mail.username=你的邮箱，这里QQ
spring.mail.password=申请的授权码
spring.mail.default-encoding=UTF-8
</code></pre> 
<p>QQ邮箱都有，问题是怎么成为开发可以使用的，这里有一个百度经验，还是很简洁明了的，地址:<a href="https://jingyan.baidu.com/article/6d704a133a245f28db51caf5.html" rel="nofollow">https://jingyan.baidu.com/article/6d704a133a245f28db51caf5.html</a></p> 
<h3><a id="3__91"></a>3. 关键代码</h3> 
<h2><a id="31_HelloService_93"></a>3.1 HelloService</h2> 
<pre><code>package cn.xdl.service;

import java.io.File;

import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.core.io.FileSystemResource;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.stereotype.Service;

@Service
public class HelloService {
	
	@Value("${spring.mail.username}")
	private String from;
	@Autowired
	private JavaMailSender mailSender;
	
	
	public void sayHello() {
		System.out.println("Hello World");
	}
	
	/**
	 * 发送文本邮件
	 * @param to
	 * @param subject
	 * @param content
	 */
	public void sendSimpleMail(String to,String subject,
			String content) {
		SimpleMailMessage message = new SimpleMailMessage();
		message.setTo(to);
		message.setSubject(subject);
		message.setText(content);
		message.setFrom(from);
		
		mailSender.send(message);
	}
	
	/**
	 * 发送html邮件
	 * @param to
	 * @param subject
	 * @param content
	 * @throws Exception
	 */
	public void sendHtmlMail(String to,String subject,
			String content) throws Exception {
		MimeMessage message = mailSender.createMimeMessage();
		MimeMessageHelper helper = new MimeMessageHelper(message,true);
		helper.setTo(to);
		helper.setSubject(subject);
		helper.setText(content,true);
		helper.setFrom(from);
		
		mailSender.send(message);
	}
	
	/**
	 * 发送带附件邮件
	 * @param to
	 * @param subject
	 * @param content
	 * @param filePath
	 * @throws Exception
	 */
	public void sendAttachmentMail(String to,String subject,
			String content,String filePath) throws Exception {
		MimeMessage message = mailSender.createMimeMessage();
		MimeMessageHelper helper = new MimeMessageHelper(message,true);
		helper.setFrom(from);
		helper.setTo(to);
		helper.setSubject(subject);
		helper.setText(content,true);
		
		FileSystemResource fileSystemResource = new FileSystemResource(new File(filePath));
		
		String fileName = fileSystemResource.getFilename();
		
		helper.addAttachment(fileName, fileSystemResource);
		helper.addAttachment(fileName+"_test", fileSystemResource);
		mailSender.send(message);
	}
	
	/**
	 * 发送带图片邮件
	 * @param to
	 * @param subject
	 * @param content
	 * @param rscPath
	 * @param rscId
	 * @throws MessagingException
	 */
	public void sendInlineResourceMail(String to,String subject,
			String content,String rscPath,String rscId) throws MessagingException {
		MimeMessage message = mailSender.createMimeMessage();
		
		MimeMessageHelper helper = new MimeMessageHelper(message,true);
		
		helper.setTo(to);
		helper.setSubject(subject);
		helper.setText(content,true);
		helper.setFrom(from);
		
		FileSystemResource res = new FileSystemResource(new File(rscPath));
		helper.addInline(rscId, res);
		
		mailSender.send(message);
	}
	
}
</code></pre> 
<h2><a id="32_ApplicationRun_213"></a>3.2 ApplicationRun</h2> 
<pre><code>package cn.xdl;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class ApplicationRun {

	public static void main(String[] args) {
		SpringApplication.run(ApplicationRun.class, args);
	}
}
</code></pre> 
<h2><a id="33__230"></a>3.3 测试程序</h2> 
<pre><code>package cn.xdl.test;

import javax.mail.MessagingException;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;

import cn.xdl.service.HelloService;

@RunWith(SpringRunner.class)
@SpringBootTest
public class TestC {
	
	@Autowired
	private HelloService helloService;
	@Autowired
	private TemplateEngine templateEngine;
	
	@Test
	public void testHello() {
		helloService.sayHello();
	}
	
	@Test
	public void sendSimpleMailTest() {
		String str = "曾经先后在互联网金融、第三方支付公司担任高级 Java 工程师、架构师、技术经理、技"
				+ "术负责人等职务。在互联网金融工作期间，从零参与公司技术平台建设，组织平台进行过四次大架"
				+ "构升级。目前在一家第三方支付公司做技术总监，负责支付公司微服务架构实践和大数据平台建设。";
		helloService.sendSimpleMail("mail_test416@163.com", "这是第一封邮件",str);
	}
	
	@Test
	public void sendHtmlMailTest() {
		String str = "&lt;html lang=\"en\"&gt;\r\n" + 
				" &lt;head&gt;\r\n" + 
				" &lt;/head&gt;\r\n" + 
				" &lt;body&gt;\r\n" + 
				"	&lt;h3&gt;Java并发编程高阶技术-高性能并发框架源码解析与实战&lt;/h3&gt;\r\n" + 
				" &lt;/body&gt;\r\n" + 
				"&lt;/html&gt;";
		try {
			helloService.sendHtmlMail("mail_test416@163.com", "Spring Boot 发送邮件", str);
		} catch (Exception e) {
			e.printStackTrace();
		};
	}
	
	@Test
	public void sendFileMailTest() {
		String str = "为了您能及时收到会员专属信息，请将  vip@dailydeals.vip.com加入您的邮件地址列表";
		try {
			helloService.sendAttachmentMail("mail_test416@163.com", "POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务", str, "D:\\Images/1.jpg");
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
	@Test
	public void sendInLineResourceMailTest() {
		String rscPath = "D:/Images/1.jpg";
		String rscId = "neo001";
		String content = "&lt;html lang=\"en\"&gt;\r\n" + 
				" &lt;head&gt;\r\n" + 
				" &lt;/head&gt;\r\n" + 
				" &lt;body&gt;\r\n" + 
				"	&lt;h3&gt;Java并发编程高阶技术-高性能并发框架源码解析与实战&lt;/h3&gt;\r\n" + 
				"&lt;img src='cid:"+rscId+"'/&gt;"+
				" &lt;/body&gt;\r\n" + 
				"&lt;/html&gt;";
		String to = "mail_test416@163.com";
		String subject = "慕课网_来慕课网学前端框架_上班族提升必备2222222222222";
		try {
			helloService.sendInlineResourceMail(to, subject, content, rscPath, rscId);
		} catch (MessagingException e) {
			e.printStackTrace();
		}
		
	}
	
	@Test
	public void testTemplateMailTest() {
		Context context = new Context();
		
		context.setVariable("id", "007");
		
		String emailContent = templateEngine.process("emailTemplate", context);
		String to = "mail_test416@163.com";
		String subject = "文明交流互鉴推动构建人类命运共同体";
		try {
			helloService.sendHtmlMail(to, subject, emailContent);
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}
}
</code></pre> 
<h2><a id="34__334"></a>3.4 发送结果成功图</h2> 
<p><img src="https://images2.imgbox.com/64/d6/NwNbASEi_o.png" alt="在这里插入图片描述"><br> 比较忙，等闲暇会将源码发布上来，目前需要源码的可以评论留邮箱，或者发我邮箱讲明要源码，我是Eclipse开发的。邮箱:liurui416@qq.com<br> 有不对的地方欢迎指正！！！<br> 个人反感收费积分，但另一方面必须尊重知识产权,有积分的可以下载，没有的可以私我邮箱，下载地址:<a href="https://download.csdn.net/download/liurui50/11071712">https://download.csdn.net/download/liurui50/11071712</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/10215dadd860604056b77181972af534/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">路的尽头 ...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/41de70a874d388877e197a17b04cbce4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">centos7 -bash: vim: 未找到命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>