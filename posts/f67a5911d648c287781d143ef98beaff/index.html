<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用QT的QML实时显示海康威视网络摄像头的视频数据 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用QT的QML实时显示海康威视网络摄像头的视频数据" />
<meta property="og:description" content="需求背景：
开发的监控软件中有个监控页面需要实时显示网络摄像头的数据，整个监控软件是基于QT的QML语言开发的。在QML中播放视频使用MediaPlayer组件就可以，但网上看到的一些都是播放录制好的视频文件，对于实时播放摄像头数据介绍的比较少。
开发环境：
Debian11.3
Qt 5.15
海康威视网络摄像机视频流地址
若要从网络摄像头实时获取数据，需要知道摄像头的视频流地址，仅此而已。这里需要获取rtsp协议的地址，它是一种实时数据流传输协议。地址如下：
格式：
rtsp://用户名:密码@ip地址:554/Streaming/Channels/101
样例：
取第1个通道的主码流预览
rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/101
取第1个通道的子码流预览
rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/102
取第12个通道的主码流预览
rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/1201
QML代码实现
import QtQuick 2.12 import QtQuick.Controls 2.5 import QtMultimedia 5.0 Rectangle { x: 10 y:10 width: 1200 height: 800 color: &#34;white&#34; MediaPlayer { id: player autoPlay: true //source: &#34;file:///home/test/test_camera.mp4&#34; //播放本地视频文件 source: &#34;rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/101&#34; //播放摄像头实时数据 onError: { console.log(errorString) } } VideoOutput { anchors.fill: parent source: player } } 啰嗦一句
从上面的QML代码看，播放网络实时视频流实际和播放本地的视频文件一样，都是把URL赋值给source属性。差异只是不同的数据源需要填写正确的视频流地址。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f67a5911d648c287781d143ef98beaff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-06T17:22:05+08:00" />
<meta property="article:modified_time" content="2023-09-06T17:22:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用QT的QML实时显示海康威视网络摄像头的视频数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>需求背景：</strong><br> 开发的监控软件中有个监控页面需要实时显示网络摄像头的数据，整个监控软件是基于QT的QML语言开发的。在QML中播放视频使用MediaPlayer组件就可以，但网上看到的一些都是播放录制好的视频文件，对于实时播放摄像头数据介绍的比较少。</p> 
<p><strong>开发环境：</strong><br> Debian11.3<br> Qt 5.15</p> 
<p><strong>海康威视网络摄像机视频流地址</strong><br> 若要从网络摄像头实时获取数据，需要知道摄像头的视频流地址，仅此而已。这里需要获取rtsp协议的地址，它是一种实时数据流传输协议。地址如下：</p> 
<p><strong>格式：</strong><br> rtsp://用户名:密码@ip地址:554/Streaming/Channels/101<br> <strong>样例：</strong><br> 取第1个通道的主码流预览<br> rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/101</p> 
<p>取第1个通道的子码流预览<br> rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/102</p> 
<p>取第12个通道的主码流预览<br> rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/1201</p> 
<p><strong>QML代码实现</strong></p> 
<pre><code class="prism language-bash"><span class="token function">import</span> QtQuick <span class="token number">2.12</span>
<span class="token function">import</span> QtQuick.Controls <span class="token number">2.5</span>
<span class="token function">import</span> QtMultimedia <span class="token number">5.0</span>

Rectangle <span class="token punctuation">{<!-- --></span>
    x: <span class="token number">10</span>
    y:10
    width: <span class="token number">1200</span>
    height: <span class="token number">800</span>
    color: <span class="token string">"white"</span>
    
    MediaPlayer <span class="token punctuation">{<!-- --></span>
        id: player
        autoPlay: <span class="token boolean">true</span>
        //source: <span class="token string">"file:///home/test/test_camera.mp4"</span> //播放本地视频文件
        source: <span class="token string">"rtsp://admin:123456789@10.10.6.100:554/Streaming/Channels/101"</span> //播放摄像头实时数据
        onError: <span class="token punctuation">{<!-- --></span>
            console.log<span class="token punctuation">(</span>errorString<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    VideoOutput <span class="token punctuation">{<!-- --></span>
        anchors.fill: parent
        source: player
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>啰嗦一句</strong><br> 从上面的QML代码看，播放网络实时视频流实际和播放本地的视频文件一样，都是把URL赋值给source属性。差异只是不同的数据源需要填写正确的视频流地址。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51ad6e71222be89a08ea533377cae8f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">忘记mysql root账号密码解决方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/818df23f7baa61ef5aa4b628482a2016/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt核心特性之 —— 「信号(Signal)与槽(Slot)」机制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>