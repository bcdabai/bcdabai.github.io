<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Json以及Json在Qt中的使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Json以及Json在Qt中的使用" />
<meta property="og:description" content="1、简介 JSON:一种轻量级的数据交换格式
一般.json后缀
高效简单
2、使用 组织数据:用于数据的网络传输
组织数据:用于磁盘文件实现数据的持久化存储
用在登录 记录用户名密码等，下次打开软件，自动填充。
3、Json数组 Json数组使用[]表示，[]里面是元素，元素间使用 , 分隔，最后一个元素后面，没有 ,
一个Json数组，支持多种不同的数据类型，包括:整形，浮点型，字符串，json数组，json对象，空值-null(null)
Json数组中嵌套Json数组，父子关系
Json数组嵌套Json对象，Json对象可以嵌套Json数组
3.1、数组内元素类型一致 [1, 2, 3] [&#34;哈哈&#34;,&#34;hehe&#34;,&#34;yiyi&#34;] 3.2、数组内元素类型不一致 [1, 2, 3, true, false, &#34;haha&#34;,null] 3.3、Json数组嵌套Json数组 [ [&#34;cat&#34;, &#34;狗狗&#34;, &#34;河马&#34;, 1]//元素类型可以不一致 [1, 3, 5, true] ] 3.4、Json数组和Json对象嵌套 [//外层是Json数组 {//内层是Json对象 &#34;小明&#34;:{//属于键值对 &#34;age&#34;:19, &#34;father&#34;:&#34;大华&#34;, &#34;sister&#34;:&#34;小妹&#34; } } ] 4、Json对象 Json对象使用{}来描述，每个Json对象可以存储若干个元素，每个元素对应一个键值对（key:value），元素和元素之间使用 , 间隔，最后一个元素后面没有 ,
注意:
1.键值key，必须是字符串，位于同一层级的键值，不能重复(通过键值取出数据value)
2.value值的类型是可选的，整形，浮点型，字符串，json数组，json对象，空值-null(null)
Json描述一个人的信息: { &#34;NAME&#34;:&#34;ACE&#34;, &#34;Sex&#34;:&#34;man&#34;, &#34;Age&#34;:20, &#34;Family&#34;:{ &#34;Father&#34;:&#34;yiyi&#34;, &#34;brother&#34;:[&#34;aa&#34;,&#34;bb&#34;,&#34;cc&#34;] }, &#34;IsLive&#34;:&#34;true&#34; } 5、注意事项 , 不能乱加，解析会出错" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ccd2a23361c2a0f75826c993a774103e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-07T20:18:59+08:00" />
<meta property="article:modified_time" content="2022-11-07T20:18:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Json以及Json在Qt中的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1、简介</h3> 
<p>JSON:一种轻量级的数据交换格式<br> 一般.json后缀<br> 高效简单</p> 
<h3><a id="2_6"></a>2、使用</h3> 
<p>组织数据:用于数据的网络传输<br> 组织数据:用于磁盘文件实现数据的持久化存储</p> 
<p>用在登录 记录用户名密码等，下次打开软件，自动填充。</p> 
<h3><a id="3Json_13"></a>3、Json数组</h3> 
<p>Json数组使用[]表示，[]里面是元素，元素间使用 , 分隔，最后一个元素后面，没有 ,<br> 一个Json数组，支持多种不同的数据类型，包括:整形，浮点型，字符串，json数组，json对象，空值-null(null)<br> Json数组中嵌套Json数组，父子关系<br> Json数组嵌套Json对象，Json对象可以嵌套Json数组</p> 
<h3><a id="31_20"></a>3.1、数组内元素类型一致</h3> 
<pre><code class="prism language-cpp"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">"哈哈"</span><span class="token punctuation">,</span><span class="token string">"hehe"</span><span class="token punctuation">,</span><span class="token string">"yiyi"</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="32_27"></a>3.2、数组内元素类型不一致</h3> 
<pre><code class="prism language-cpp"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"haha"</span><span class="token punctuation">,</span>null<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="33JsonJson_33"></a>3.3、Json数组嵌套Json数组</h3> 
<pre><code class="prism language-cpp"><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"狗狗"</span><span class="token punctuation">,</span> <span class="token string">"河马"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token comment">//元素类型可以不一致</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="34JsonJson_42"></a>3.4、Json数组和Json对象嵌套</h3> 
<pre><code class="prism language-cpp"><span class="token punctuation">[</span><span class="token comment">//外层是Json数组</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">//内层是Json对象</span>
        <span class="token string">"小明"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token comment">//属于键值对</span>
                       <span class="token string">"age"</span><span class="token operator">:</span><span class="token number">19</span><span class="token punctuation">,</span>
                        <span class="token string">"father"</span><span class="token operator">:</span><span class="token string">"大华"</span><span class="token punctuation">,</span>
                         <span class="token string">"sister"</span><span class="token operator">:</span><span class="token string">"小妹"</span>
                   <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="4Json_56"></a>4、Json对象</h3> 
<p>Json对象使用{}来描述，每个Json对象可以存储若干个元素，每个元素对应一个键值对（key:value），元素和元素之间使用 , 间隔，最后一个元素后面没有 ,<br> 注意:<br> 1.键值key，必须是字符串，位于同一层级的键值，不能重复(通过键值取出数据value)<br> 2.value值的类型是可选的，整形，浮点型，字符串，json数组，json对象，空值-null(null)</p> 
<pre><code class="prism language-cpp">Json描述一个人的信息<span class="token operator">:</span>
<span class="token punctuation">{<!-- --></span>
        <span class="token string">"NAME"</span><span class="token operator">:</span><span class="token string">"ACE"</span><span class="token punctuation">,</span>
        <span class="token string">"Sex"</span><span class="token operator">:</span><span class="token string">"man"</span><span class="token punctuation">,</span>
        <span class="token string">"Age"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token string">"Family"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">"Father"</span><span class="token operator">:</span><span class="token string">"yiyi"</span><span class="token punctuation">,</span>
            <span class="token string">"brother"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"aa"</span><span class="token punctuation">,</span><span class="token string">"bb"</span><span class="token punctuation">,</span><span class="token string">"cc"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"IsLive"</span><span class="token operator">:</span><span class="token string">"true"</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5_77"></a>5、注意事项</h3> 
<p>, 不能乱加，解析会出错<br> 键值不唯一，不能搜到到正确的value<br> <img src="https://images2.imgbox.com/01/43/4tJRE8GF_o.png" alt="在这里插入图片描述"><br> 一个Json.json文件中:<br> 1、只能有一个Json数组<br> 2、只能有一个Json对象<br> 3、1,2只能有一个存在：根节点只能有一个<br> 错误案例：<br> <img src="https://images2.imgbox.com/ef/ca/RPYHiSBu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6qt50__89"></a>6、qt5.0版本 使用</h3> 
<p>将Json字符串转解析出来 原始数据</p> 
<p>Json类 介绍</p> 
<p><strong>QJsonDocument(桥梁，转换器的作用)</strong> <br> 它封装了一个完整的Json文档，并且可以从UTF-8编码的基于文本的表示以及Qt自己的读取和写入该文档</p> 
<p><strong>QJsonArray(Json数组)</strong> <br> Json数组是一个值列表。可以通过从数组中插入和删除QJsonValue来操作该列表</p> 
<p><strong>QJsonObject(Json对象)</strong> <br> Json对象是键值对的列表，其中键值是唯一的字符串，值由QJsonValue表示</p> 
<p><strong>QJsonValue</strong> <br> 该类封装了Json支持的数据类型</p> 
<h3><a id="61QJsonValue_107"></a>6.1、QJsonValue</h3> 
<p>封装的数据类型6:<br> 1.bool QJsonValue::Bool<br> 2.double QJsonValue::Double<br> 3.string QJsonVale::String<br> 4.array QJsonValue.:Array<br> 5.object QJsonValue:Object .<br> 6.null QJsonValue::Null<br> 通过构造函数，将6种不同的类型统一，类似，6种类型，放到一个箱子里面</p> 
<h3><a id="62QJsonObject_120"></a>6.2、QJsonObject</h3> 
<p>封装了Json中的对象，在里边可以存储多个键值对，为了方便操作，键值为字符串类型，值为QJsonValue类型，关于这个类的使用类似，C++中STL类<br> QJsonObject内数据使用insert插入，根据key值，自动排序，底层红黑树，升序</p> 
<pre><code class="prism language-cpp"><span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">1</span>、创建空的Json对象
<span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">QJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//构造空对象</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">2</span>、将键值对添加到Json对象中
iterator <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//key  value</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">3</span>、获取对象中，键值对个数
<span class="token keyword">int</span> <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">4</span>、通过key取出value
传入key<span class="token operator">:</span>得到QJsonObject对象<span class="token operator">:</span>看看是什么，在使用to方法，得到原始数据
    <span class="token number">1</span>、QJsonValue <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>  <span class="token comment">//utf-8</span>
    <span class="token number">2</span>、QJsonValue <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span> <span class="token function">value</span><span class="token punctuation">(</span>QLatin1QString key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>  <span class="token comment">//字符串不支持中文</span>
    <span class="token number">3</span>、QJsonValue QJsonObject<span class="token double-colon punctuation">::</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>  <span class="token comment">//使用的时候["key值"]</span>
    <span class="token number">4</span>、QJsonValue QJsonObject<span class="token double-colon punctuation">::</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>QLatin1QString key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">5</span>、删除键值对
<span class="token keyword">void</span> <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
QJsonValue <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除键值对后，返回value值</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">6</span>、通过key进行查找
iterator <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//返回的是迭代器，解引用，可以得到数据</span>
<span class="token keyword">bool</span> <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>  <span class="token comment">//查看QJsonObject对象中，是否 存在这个key键值对</span>
<span class="token number">6.2</span><span class="token punctuation">.</span><span class="token number">7</span>、遍历方式<span class="token number">3</span>种
<span class="token number">1.</span>使用迭代器函数
<span class="token number">2.</span>使用<span class="token punctuation">[</span><span class="token punctuation">]</span>，遍历，类似遍历数组，<span class="token punctuation">[</span><span class="token punctuation">]</span>中是key
<span class="token number">3.</span>先得到对象中所有的键值，在遍历键值列表，通过key得到value
    QStringList <span class="token class-name">QJsonObject</span><span class="token double-colon punctuation">::</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">//得到当前Json对象中所有的key值</span>
</code></pre> 
<h3><a id="63QJsonArray_153"></a>6.3、QJsonArray</h3> 
<p>QJsonArray里面封装了Json数组，里面存储多个元素，为了方便操作，所有元素类型统一为QJsonValue类型<br> 注意:QJsonArray内元素是无序的，完全按照添加顺序存储。<br> 先添加，放在前面，后添加放在后面。插入，就放在插入的位置。</p> 
<pre><code class="prism language-cpp"><span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">1</span>、创建空的Json数组
<span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">QJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//得到空的Json数组，通过size()方法，返回值为0</span>
<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">2</span>、添加数据
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//在尾部追加</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//插入到i的位置之前</span>
iterator <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>iterator before<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//在迭代器当前位置的前面，插入</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//添加到数组头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//添加到尾部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//添加到头部</span>
<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">3</span>、计算数组内元素的个数
<span class="token keyword">int</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">4</span>、从数组中取出某一个元素的值
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>   <span class="token comment">//参数i:为在数组中元素对应的下标       拷贝,不能修改数组内元素的值</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>     <span class="token comment">//头部元素                           拷贝</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>      <span class="token comment">//尾部元素                           拷贝</span>
QJsonValueRef QJsonArray<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里返回的值是引用，可以修改 数组内的值</span>
<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">5</span>、从数组中删除某一个元素的值
iterator <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">erase</span><span class="token punctuation">(</span>iterator it<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//基于迭代器的删除</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//删除尾部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">//删除头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//删除i位置元素</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//删除头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">//删除尾部</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">takeAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//删除i位置的原始，并返回删除元素的值</span>
<span class="token number">6.3</span><span class="token punctuation">.</span><span class="token number">6</span>、遍历
<span class="token number">1</span>、使用迭代器遍历<span class="token punctuation">(</span>和使用迭代器遍历STL容器一样<span class="token punctuation">)</span>
<span class="token number">2</span>、使用数组方式遍历
</code></pre> 
<h3><a id="64QJsonDocument_190"></a>6.4、QJsonDocument</h3> 
<p>它封住了一个完整的Json文档，并且可以从UTF-8编码的基于文本的表示以及Qt自己的二进制格式读取和写入该文档。<br> QJsonObject和QJsonArray这两个对象中的数据是不能直接转换为字符串类型的，<br> 如果要进行数据传输或者数据的持久化，操作的都是字符串类型，不是QJsonArray或者QjsonObject类型，<br> 需要使用Json文档进行二者之间的转换。<br> 6.4.1、QJsonArray和QJsonObject-&gt;字符串<br> <img src="https://images2.imgbox.com/71/e5/Q73riVgj_o.png" alt="在这里插入图片描述"></p> 
<p>6.4.2、字符串-&gt;QJsonArray和QJsonObject<br> <img src="https://images2.imgbox.com/98/b3/cCPJ3uve_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7_202"></a>7、实际应用-写入-读取</h3> 
<pre><code class="prism language-cpp">
<span class="token comment">//写入</span>
QJsonObject obj<span class="token punctuation">;</span>
QString str2 <span class="token operator">=</span> <span class="token string">"man"</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Ace"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">,</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>

QJsonObject subobj<span class="token punctuation">;</span>
subobj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Father"</span><span class="token punctuation">,</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"father"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subobj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Mother"</span><span class="token punctuation">,</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"mother"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QJsonArray array<span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subobj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Brother"</span><span class="token punctuation">,</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Family"</span><span class="token punctuation">,</span>subobj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"IsAlive"</span><span class="token punctuation">,</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Comment"</span><span class="token punctuation">,</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"yyds"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QJsonDocument <span class="token function">doc</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将Json对象，转换成Json文档</span>

<span class="token comment">//显示用</span>
QByteArray json <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ui<span class="token punctuation">.</span>textEdit<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">/</span>写入文件
QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"../my.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QFile<span class="token double-colon punctuation">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a4/09/vRajI2Gg_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp">
<span class="token comment">//读取文件</span>
QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"../my.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QFile<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
QByteArray all <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QJsonDocument doc <span class="token operator">=</span> <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">fromJson</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转换成文档对象</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//可以不做格式判断，因为，解析的时候已经知道是什么数据了</span>
<span class="token punctuation">{<!-- --></span>
    QJsonObject obj <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到Json对象</span>
    QStringList keys <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到所有key</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        QString key <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        QJsonValue value <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">isBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> key <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> value<span class="token punctuation">.</span><span class="token function">toBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">isString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> key <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">isDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> key <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> value<span class="token punctuation">.</span><span class="token function">toVariant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> key <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span><span class="token punctuation">;</span>
            QJsonObject subObj <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">toObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            QStringList subKeys <span class="token operator">=</span> subObj<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> subKeys<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
            QJsonValue subValue <span class="token operator">=</span> subObj<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>subKeys<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>subValue<span class="token punctuation">.</span><span class="token function">isString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> subKeys<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> subValue<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>subValue<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> subKeys<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
                QJsonArray array <span class="token operator">=</span> subValue<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> array<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/19/a1/SpR3JdFh_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ffa2d4fe1e4539512bc5bf0083578011/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">this指针详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79482b280e79852c6d76378d23e51867/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;中SORT函数使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>