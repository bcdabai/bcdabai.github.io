<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3.动态规划 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="3.动态规划" />
<meta property="og:description" content="3.动态规划 3.1记忆搜索算法 对斐波那契数列进行改进，使用记忆功能来保存已经完成过的计算，当下次需要某个计算时，如果记忆列表中有计算结果，则直接使用。否则进行迭代。
from collections import defaultdict from datetime import datetime total = defaultdict(int) # 存储已经计算好的值 def fib_test(k): # 递归求解第k个数的值 assert k &gt; 0, &#34;k必须大于0&#34; if k in [1, 2]: return 1 global total if k in total: result = total[k] else: result = fib_test(k - 1) &#43; fib_test(k - 2) total[k] = result return result if __name__ == &#34;__main__&#34;: # 搜索&#43;记忆 算法 start_time = datetime.now() print(&#34;斐波那契数列第50次的结果为：{}&#34;.format(fib_test(50))) print(&#34;循环耗时:{}&#34;.format((datetime.now() - start_time)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f801526c07894fcfb33b7d14a20a2534/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-13T10:02:12+08:00" />
<meta property="article:modified_time" content="2020-11-13T10:02:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">3.动态规划</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="3_0"></a>3.动态规划</h2> 
<h3><a id="31_1"></a>3.1记忆搜索算法</h3> 
<p>对斐波那契数列进行改进，使用记忆功能来保存已经完成过的计算，当下次需要某个计算时，如果记忆列表中有计算结果，则直接使用。否则进行迭代。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

total <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token comment"># 存储已经计算好的值</span>


<span class="token keyword">def</span> <span class="token function">fib_test</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 递归求解第k个数的值</span>
    <span class="token keyword">assert</span> k <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"k必须大于0"</span>
    <span class="token keyword">if</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token keyword">global</span> total
    <span class="token keyword">if</span> k <span class="token keyword">in</span> total<span class="token punctuation">:</span>
        result <span class="token operator">=</span> total<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> fib_test<span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib_test<span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span>
        total<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> result
    <span class="token keyword">return</span> result


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 搜索+记忆 算法</span>
    start_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"斐波那契数列第50次的结果为：{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>fib_test<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"循环耗时:{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time<span class="token punctuation">)</span><span class="token punctuation">.</span>total_seconds<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/5f/1b/ACjwZMd6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_35"></a>3.2数字金字塔-回溯法</h3> 
<h4><a id="1_36"></a>1)多阶段决策</h4> 
<p>根据过程的特性可以将过程按空间、时间等标志分为若干个互相联系又互相区别的阶段。<br> 在每一个阶段都需要做出决策，从而使整个过程达到最好的效果。<br> 各个阶段决策的选取不是任意确定的，它依赖于当前面临的状态，又影响以后的发展。<br> 当各个阶段的决策确定后，就组成了一个决策序列，因而也就确定了整个过程的一条活动路线，这样的一个前后关联具有链状结构的多阶段过程就称为多阶段决策问题。</p> 
<h4><a id="2_41"></a>2)动态规划</h4> 
<p>对最佳路径（最佳决策过程）所经过的各个阶段，其中每个阶段始点到全过程终点的路径，必定是该阶段始点到全过程终点的一切可能路径中的最佳路径（最优决策），这就是美国数学家Bellman提出的著名的最优化原理。<br> 简言之，一个最优策略的子策略必然也是最优的。<br> 把多阶段决策问题转化为一系列单阶段最优问题，从而逐个求解。<br> 动态规划方法的关键：在于正确地写出基本的递推关系式和恰当的边界条件（简称基本方程）。<br> 要做到这一点，就必须将问题的过程分成几个相互联系的阶段，恰当的选取状态变量和决策变量及定义最优值函数，从而把一个大问题转化为一组同类型的子问题，然后逐个求解。<br> 即从边界条件开始，逐段递推寻优，在每一个子问题的求解中，均利用了它前面的子问题的最优化结果，依次进行，最优一个子问题所得的最优解，就算整个问题的最优解。<br> 动态规划的特点：<br> 每个阶段的最优决策过程只与本阶段的初始状态有关，而与以前各阶段的决策无关（即为了到达本阶段的初始状态而采用哪组决策路线无关）。换言之，本阶段之前的状态与决策，只是通过系统在本阶段所处的初始状态来影响本阶段及以后各个阶段的决策。或者说，系统过程的历史只能通过系统现阶段的状态去影响系统的未来。具有这种性质的状态称为无后效性状态（马尔科夫性）。<br> 动态规划方法只适用于求解具有无后效性状态的多阶段决策问题。</p> 
<h4><a id="3_51"></a>3)算法实现</h4> 
<p>数字金字塔旨在找到最大的数。从上往下，每层找一个。</p> 
<pre><code class="prism language-python"><span class="token comment"># 数字金字塔-回溯法</span>
pyramid <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span>
total_path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>


<span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">:</span>
        total_path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>datas<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
        <span class="token comment"># 1. 选择下方的值</span>
    <span class="token comment"># 1.设置现场</span>
    datas<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pyramid<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 2.递归</span>
    search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token comment"># 3.恢复现场</span>
    datas<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 2.选择右下方的值</span>
    <span class="token comment"># 1.设置现场</span>
    datas<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pyramid<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 2.递归</span>
    search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment"># 3.恢复现场</span>
    datas<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    search<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">0</span>
    max_pos <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> index<span class="token punctuation">,</span> data <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>total_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">:</span>
            <span class="token builtin">max</span> <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            max_pos <span class="token operator">=</span> index
    <span class="token keyword">print</span><span class="token punctuation">(</span>max_pos<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>total_path<span class="token punctuation">[</span>max_pos<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/d0/49/7F4Pbnmz_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_102"></a>3.3数字金字塔-记忆式搜索</h3> 
<pre><code class="prism language-python"><span class="token comment"># 数字金字塔-记忆搜索</span>
pyramid <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

info <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>  <span class="token comment"># 存储每个节点下的最大长度</span>


<span class="token keyword">def</span> <span class="token function">search_max</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> pyramid<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> info<span class="token punctuation">:</span>
        <span class="token comment"># 记忆搜索</span>
        <span class="token keyword">return</span> info<span class="token punctuation">[</span><span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token comment"># 1.把左下方的值交给下一个人得到最大值</span>
        left_max <span class="token operator">=</span> search_max<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        <span class="token comment"># 2.把右下方的值交给下一个人得到最大值</span>
        <span class="token comment"># 1.任务可以下分。2.最优子结构。3.决策。</span>
        right_max <span class="token operator">=</span> search_max<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        max_value <span class="token operator">=</span> pyramid<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token builtin">max</span><span class="token punctuation">(</span>left_max<span class="token punctuation">,</span> right_max<span class="token punctuation">)</span>
        info<span class="token punctuation">[</span><span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> max_value
        <span class="token keyword">return</span> max_value


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>search_max<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"记忆结果：{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/b8/24/kKzfer95_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35_142"></a>3.5投资分配</h3> 
<p><img src="https://images2.imgbox.com/f9/d1/tZToEX0e_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c8/7c/TiV6Rduw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/34/07/0o03qH5H_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3b/b3/WDQTb7K9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e4/18/cWmKMrW7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6a/6f/XOjDTYym_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/37/33/6F9tRRFk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/10/eRzFfcpD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/58/f3/XlrtJYzY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/91/Lrj0XlAn_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/89/KM2E9K52_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ec/82/5ww3Zxql_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/11/eb/skylMGgf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="36_156"></a>3.6投资分配算法实现</h3> 
<pre><code class="prism language-python"><span class="token comment"># 投资分配</span>

<span class="token comment"># 利润表 投资多少万对应的利润，0，10，20，30，40，50，60</span>
values <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token comment"># 分析过程</span>

<span class="token comment"># # 老三统计好各种情况</span>
<span class="token comment"># pre_max = [0]  # 老三的利润总表</span>
<span class="token comment"># for i in range(10, 61, 10):</span>
<span class="token comment">#     # i 代表老三假设手中有i万元</span>
<span class="token comment">#     value_list = []  # 老三的利润分表</span>
<span class="token comment">#     for j in range(0, i + 1, 10):</span>
<span class="token comment">#         value_list.append(values[3][int(j / 10)] + values[2][int((i - j) / 10)])</span>
<span class="token comment">#     pre_max.append(max(value_list))</span>
<span class="token comment"># print(pre_max)</span>
<span class="token comment">#</span>
<span class="token comment"># # 老二统计好各种情况</span>
<span class="token comment"># pre_max2 = [0]</span>
<span class="token comment"># for i in range(10, 61, 10):</span>
<span class="token comment">#     # i 代表老二假设手中有i万元</span>
<span class="token comment">#     value_list = []</span>
<span class="token comment">#     for j in range(0, i + 1, 10):</span>
<span class="token comment">#         value_list.append(pre_max[int(j / 10)] + values[1][int((i - j) / 10)])</span>
<span class="token comment">#     pre_max2.append(max(value_list))</span>
<span class="token comment"># print(pre_max2)</span>
<span class="token comment">#</span>
<span class="token comment"># # 老大统计好各种情况</span>
<span class="token comment"># pre_max3 = []</span>
<span class="token comment"># for i in range(10, 61, 10):</span>
<span class="token comment">#     # i 代表老大假设手中有i万元</span>
<span class="token comment">#     value_list = []</span>
<span class="token comment">#     for j in range(0, i + 1, 10):</span>
<span class="token comment">#         value_list.append(pre_max2[int(j / 10)] + values[0][int((i - j) / 10)])</span>
<span class="token comment">#     pre_max3.append(max(value_list))</span>
<span class="token comment"># print(pre_max3)</span>
<span class="token comment"># print(max(pre_max3))</span>

<span class="token comment"># 动态规划过程</span>

pre_max <span class="token operator">=</span> values<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_pre_max <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        value_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            value_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pre_max<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>j <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> values<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        new_pre_max<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>value_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
    pre_max <span class="token operator">=</span> new_pre_max

<span class="token keyword">print</span><span class="token punctuation">(</span>pre_max<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"最大利润为 = {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>pre_max<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/cb/81/dFcZeuck_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="37_220"></a>3.7背包问题</h3> 
<p><img src="https://images2.imgbox.com/c2/ee/BNMZ0LGj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/4a/96YddcQI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="38__223"></a>3.8 背包问题-回溯法</h3> 
<pre><code class="prism language-python"><span class="token comment"># 通过回溯法求解0-1背包问题</span>
<span class="token comment"># [重量，价值]</span>
info <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

selects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

max_selects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
max_value <span class="token operator">=</span> <span class="token number">0</span>


<span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>selects<span class="token punctuation">)</span>
        values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> index<span class="token punctuation">,</span> select <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>selects<span class="token punctuation">)</span><span class="token punctuation">:</span>
            values<span class="token punctuation">.</span>append<span class="token punctuation">(</span>select <span class="token operator">*</span> info<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">global</span> max_value
        <span class="token keyword">if</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">&gt;</span> max_value<span class="token punctuation">:</span>
            max_value <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
            <span class="token keyword">global</span> max_selects
            max_selects <span class="token operator">=</span> selects<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token comment"># 1.不放</span>
        <span class="token comment"># 1.设置现场</span>
        selects<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token comment"># 2.递归</span>
        search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span>
        <span class="token comment"># 3.恢复现场</span>
        selects<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 2.放</span>
        <span class="token keyword">if</span> rest <span class="token operator">&gt;=</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># 1.设置现场</span>
            selects<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token comment"># 2.递归</span>
            search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># 3.恢复现场</span>
            selects<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    search<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"------------------"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>max_selects<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>max_value<span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：</p> 
<p><img src="https://images2.imgbox.com/3b/e7/1sWvd2ZS_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="39_280"></a>3.9背包问题-记忆搜索</h3> 
<pre><code class="prism language-python"><span class="token comment"># 通过记忆搜索的回溯法求解0-1背包问题</span>
<span class="token comment"># [重量，价值]</span>
info <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

mem <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>  <span class="token comment"># 存储计算结果</span>


<span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 放还是不放 决策</span>
    <span class="token keyword">if</span> <span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span> <span class="token keyword">in</span> mem<span class="token punctuation">:</span>
        <span class="token keyword">return</span> mem<span class="token punctuation">[</span><span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> rest <span class="token operator">&gt;=</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token number">0</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># 1.分任务</span>
        values<span class="token punctuation">.</span>append<span class="token punctuation">(</span>search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> rest <span class="token operator">&gt;=</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            values<span class="token punctuation">.</span>append<span class="token punctuation">(</span>search<span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rest <span class="token operator">-</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> info<span class="token punctuation">[</span>depth<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># 2.选最大（决策）</span>
        data <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token keyword">in</span> mem<span class="token punctuation">:</span>
        mem<span class="token punctuation">[</span><span class="token string">"{}_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> data
    <span class="token keyword">return</span> data


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"------------------"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>mem<span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/f0/22/8JVU1y3F_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="310_322"></a>3.10背包问题-动态规划</h3> 
<pre><code class="prism language-python"><span class="token comment"># 通过动态规划求解0-1背包问题</span>
<span class="token comment"># [重量，价值]</span>
info <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token comment"># 分析</span>
<span class="token comment"># 老三初始化</span>
<span class="token comment"># pre_max = [0]</span>
<span class="token comment"># total = 5</span>
<span class="token comment"># for i in range(1, info[-1][0]):</span>
<span class="token comment">#     pre_max.append(0)</span>
<span class="token comment"># for i in range(info[-1][0], total + 1):</span>
<span class="token comment">#     pre_max.append(info[-1][1])</span>
<span class="token comment">#</span>
<span class="token comment"># print(pre_max)</span>

<span class="token comment"># # 老二</span>
<span class="token comment"># new_pre_max = [0]</span>
<span class="token comment"># for i in range(1, total + 1):</span>
<span class="token comment">#     value_list = []</span>
<span class="token comment">#     for j in range(0, i + 1):</span>
<span class="token comment">#         # j代表留给自己</span>
<span class="token comment">#         if j &gt;= info[1][0]:</span>
<span class="token comment">#             value_list.append(info[1][1] + pre_max[i - j])</span>
<span class="token comment">#         else:</span>
<span class="token comment">#             value_list.append(pre_max[i - j])</span>
<span class="token comment">#     new_pre_max.append(max(value_list))</span>
<span class="token comment">#</span>
<span class="token comment"># print(new_pre_max)</span>
<span class="token comment">#</span>
<span class="token comment"># new_pre_max2 = [0]</span>
<span class="token comment"># # 老大</span>
<span class="token comment"># for i in range(total, total + 1):</span>
<span class="token comment">#     value_list = []</span>
<span class="token comment">#     for j in range(0, i + 1):</span>
<span class="token comment">#         # j代表留给自己</span>
<span class="token comment">#         if j &gt;= info[0][0]:</span>
<span class="token comment">#             value_list.append(info[0][1] + new_pre_max[i - j])</span>
<span class="token comment">#         else:</span>
<span class="token comment">#             value_list.append(new_pre_max[i - j])</span>
<span class="token comment">#     new_pre_max2.append(max(value_list))</span>

<span class="token comment"># print(new_pre_max)</span>


<span class="token comment"># 动态规划</span>
<span class="token comment"># 老三初始化</span>
pre_max <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
total <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    pre_max<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> total <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    pre_max<span class="token punctuation">.</span>append<span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_pre_max <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    start <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token comment"># if k == 0:</span>
    <span class="token comment">#     start = total</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> total <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        value_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> i <span class="token operator">&gt;=</span> info<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            value_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>info<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> pre_max<span class="token punctuation">[</span>i <span class="token operator">-</span> info<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        value_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pre_max<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        new_pre_max<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>value_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
    pre_max <span class="token operator">=</span> new_pre_max
<span class="token keyword">print</span><span class="token punctuation">(</span>new_pre_max<span class="token punctuation">)</span>

</code></pre> 
<p>运行结果：<br> <img src="https://images2.imgbox.com/3d/32/IChhlcZf_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45c09c7e23c4b7fbfb62182bc84f23e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2.回溯法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bda0e0ef0939597b424e4107ae0f76e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">#SATA# SATA 实际管脚接线图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>