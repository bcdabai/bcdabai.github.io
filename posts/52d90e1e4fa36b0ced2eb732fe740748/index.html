<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mybatis 使用PageHelper不生效 - 第62篇 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mybatis 使用PageHelper不生效 - 第62篇" />
<meta property="og:description" content="【从零开始学习SpirngBoot—常见异常汇总】
在Spirng Boot中集成了PageHelper，然后也在需要使用分页的地方加入了如下代码：
PageHelper.startPage(1,1); 但是就是不生效呢，数据库的所有数据都查询出来了这是咋回事呢？
这个可能你使用错了版本号，主要是pom.xml文件中的版本的引入，错误的版本引入：
&lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;/dependency&gt; 我在博客中已经写的很详细了，但是还是有人会掉进坑里，之所以会有这篇文章的出现就是因为已经有人已经掉进坑里了。那么正确的配置是：
&lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt; &lt;/dependency&gt; 请不要使用1.0.0版本，因为还不支持拦截器插件，
1.1.1 是博主写帖子时候的版本，大家使用最新版本即可
比这个版本还更新的理论上也是能正常运行的，除非官网做了大的调整。
第二种不好使的情况就是重新定义了SqlSessionFactory但是并没有配置对应的PageHelper插件，所以导致使用PageHelper.startPage(1,1);无效，那么如果要重新定义SqlSessionFactory的话，那么以下代码可以作为一个参考，其中红色部分是需要注意的地方： @Bean public SqlSessionFactory sqlSessionFactoryBean(DataSourcedataSource)throws Exception { SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean(); sqlSessionFactoryBean.setDataSource(dataSource); PathMatchingResourcePatternResolver resolver =new PathMatchingResourcePatternResolver(); // 以下这句配置很重要！！！！ Interceptor[] plugins = new Interceptor[]{pageHelper()}; sqlSessionFactoryBean.setPlugins(plugins); // 指定mybatisxml文件路径 sqlSessionFactoryBean.setMapperLocations(resolver .getResources(&#34;classpath:/mybatis/*.xml&#34;)); return sqlSessionFactoryBean.getObject(); } pageHelper代码：
public PageHelper pageHelper() { System.out.println(&#34;MyBatisConfiguration.pageHelper()&#34;); PageHelper pageHelper = new PageHelper(); Properties p = new Properties(); p." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/52d90e1e4fa36b0ced2eb732fe740748/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-09-17T23:19:08+08:00" />
<meta property="article:modified_time" content="2016-09-17T23:19:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mybatis 使用PageHelper不生效 - 第62篇</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#c00000;">【从零开始学习SpirngBoot—</span>常见异常汇总】</p> 
<p></p> 
<p><span style="color:#555555;">在Spirng Boot</span>中集成了PageHelper，然后也在需要使用分页的地方加入了如下代码：</p> 
<pre><code class="language-java"> PageHelper.startPage(1,1);</code></pre> 
<p><span style="color:#555555;">但是就是不生效呢，数据库的所有数据都查询出来了这是咋回事呢？</span></p> 
<p><span style="color:#555555;">这个可能你使用错了版本号，主要是pom.xml</span>文件中的版本的引入，错误的版本引入：</p> 
<pre class="has"><code>&lt;dependency&gt;

       &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;

       &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;

       &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;/dependency&gt;</code></pre> 
<p><span style="color:#555555;">我在博客中已经写的很详细了，但是还是有人会掉进坑里，之所以会有这篇文章的出现就是因为已经有人已经掉进坑里了。那么正确的配置是：</span></p> 
<pre class="has"><code>&lt;dependency&gt;

       &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;

       &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;

       &lt;version&gt;1.1.1&lt;/version&gt;

&lt;/dependency&gt;</code></pre> 
<p><span style="color:#3f5fbf;">请不要使用</span><span style="color:#3f5fbf;">1.0.0</span><span style="color:#3f5fbf;">版本，因为还不支持拦截器插件，</span></p> 
<p><span style="color:#3f5fbf;">1.1.1 </span><span style="color:#3f5fbf;">是博主写帖子时候的版本，大家使用最新版本即可</span></p> 
<p><span style="color:#555555;">比这个版本还更新的理论上也是能正常运行的，除非官网做了大的调整。</span></p> 
<p><span style="color:#555555;">       </span><span style="color:#555555;">第二种不好使的情况就是重新定义了</span>SqlSessionFactory<span style="color:#555555;">但是并没有配置对应的PageHelper</span>插件，所以导致使用PageHelper.<em>startPage</em>(1,1);<span style="color:#555555;">无效，那么如果要重新定义</span>SqlSessionFactory<span style="color:#555555;">的话，那么以下代码可以作为一个参考，其中红色部分是需要注意的地方：</span><span style="color:#646464;">    </span></p> 
<p><span style="color:#555555;"> </span></p> 
<pre class="has"><code class="language-java">@Bean

    public SqlSessionFactory sqlSessionFactoryBean(DataSourcedataSource)throws Exception {

       SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();

       sqlSessionFactoryBean.setDataSource(dataSource);

       PathMatchingResourcePatternResolver resolver =new PathMatchingResourcePatternResolver();

// 以下这句配置很重要！！！！

       Interceptor[] plugins =  new Interceptor[]{pageHelper()};

       sqlSessionFactoryBean.setPlugins(plugins);

       // 指定mybatisxml文件路径

      sqlSessionFactoryBean.setMapperLocations(resolver

              .getResources("classpath:/mybatis/*.xml"));

       return sqlSessionFactoryBean.getObject();

    }</code></pre> 
<p></p> 
<p>pageHelper代码：</p> 
<pre><code class="language-java">public PageHelper pageHelper() {
		System.out.println("MyBatisConfiguration.pageHelper()");
        PageHelper pageHelper = new PageHelper();
        Properties p = new Properties();
        p.setProperty("offsetAsPageNum", "true");
        p.setProperty("rowBoundsWithCount", "true");
        p.setProperty("reasonable", "true");
        pageHelper.setProperties(p);
        return pageHelper;
    }
</code></pre> 
<p></p> 
<p><span style="color:#555555;">     </span></p> 
<p><span style="color:#555555;">  </span><span style="color:#555555;">总结下这个问题就是您引入了错误的mybatis-spring-boot-starter</span>版本，引用正确的版本即可；其二就是重新定义SqlSessionFactory<span style="color:#555555;">了，需要配置对应的PageHelper</span>插件。</p> 
<p></p> 
<pre><code>我就是我，是颜色不一样的烟火。
我就是我，是与众不同的小苹果。</code></pre> 
<blockquote> 
 <p>学院中有<strong>Spring Boot</strong>相关的课程：</p> 
 <p>à悟空学院：<a href="https://t.cn/Rg3fKJD" rel="nofollow">https://t.cn/Rg3fKJD</a></p> 
 <p>SpringBoot视频：<a href="http://t.cn/A6ZagYTi" rel="nofollow">http://t.cn/A6ZagYTi</a></p> 
 <p>Spring Cloud视频：<a href="http://t.cn/A6ZagxSR" rel="nofollow">http://t.cn/A6ZagxSR</a></p> 
 <p>SpringBoot Shiro视频：<a href="http://t.cn/A6Zag7IV" rel="nofollow">http://t.cn/A6Zag7IV</a></p> 
 <p>SpringBoot交流平台：<a href="https://t.cn/R3QDhU0" rel="nofollow">https://t.cn/R3QDhU0</a></p> 
 <p>SpringData和JPA视频：<a href="http://t.cn/A6Zad1OH" rel="nofollow">http://t.cn/A6Zad1OH</a></p> 
 <p>SpringSecurity5.0视频：<a href="http://t.cn/A6ZadMBe" rel="nofollow">http://t.cn/A6ZadMBe</a></p> 
 <p>Sharding-JDBC分库分表实战：<a href="http://t.cn/A6ZarrqS" rel="nofollow">http://t.cn/A6ZarrqS</a></p> 
 <p>分布式事务解决方案「手写代码」：<a href="http://t.cn/A6ZaBnIr" rel="nofollow">http://t.cn/A6ZaBnIr</a></p> 
 <p>JVM内存模型和性能调优：<a href="http://t.cn/A6wWMVqG" rel="nofollow">http://t.cn/A6wWMVqG</a></p> 
</blockquote> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f22a7a8dd5428eb3b3688100ade4a067/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一款简单易用的微信SDK  for Golang</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5652342069fbaa3e5091018b9f823c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">photoshop打开文件提示 无法完成请求，因为文件格式模块不能解析该文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>