<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RedHat7.0 (Linux) 安装mysql（亲测，亚马逊） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="RedHat7.0 (Linux) 安装mysql（亲测，亚马逊）" />
<meta property="og:description" content="转载出处：https://blog.csdn.net/qq_32223565/article/details/79894037 RedHat7.0 (Linux) 安装mysql (mysql-5.7.21-1.el7.x86_64.rpm-bundle.tar)
网上有很多资料关于安装的，但由于版本问题，困扰许久本文提供 readHat7.0及相应的mysql，可到相应的百度云盘下载https://pan.baidu.com/s/15dPTThydeJOLOreMWVeaCQ* 提取密码：34hr 安装步骤如下： 在 /home下新建 mysql目录。将 mysql压缩包传入到该文件下。可通过WinSCP 传入到该文件夹下(不再赘述)!
首先先查看是否已经安装了mysql ，执行命令 rpm -qa|grep mysql
如果什么都没显示说明没有安装过，如果已经安装了Mysql就先卸载执行命令 rpm -e –nodeps xxxxxxxx(xxxxxx为已经安装的rpm)
查看是否安装mariadb 系统自带的,之前安装的时候和mysql冲突，所有不用这个数据库的话也可以卸载,查看是否安装rpm -qa|grep mariadb,卸载执行rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64接下里进入 /home/mysql 命令：cd /home/mysql解压 tar tar -xf mysql-5.7.21-1.el7.x86_64.rpm-bundle.tar演示图 解压之后又很多文件，我们只需要安装 命令如下：(因为包的依赖管理，注意要按上面的顺序执行) rpm -ivh mysql-community-common-5.7.10-1.el7.x86_64.rpm 安装到server包需要安装两个依赖包 yum install libaio，yum install perl，yum -y install numactl
….
修改mysql配置文件 sudo find / -name my.cnf 查找文件在什么位置
找到“[mysqld]”设置项，添加代码：
#开启查询缓存 explicit_defaults_for_timestamp=true 使用一个普通用户进行启动mysqld 。这个用户必须是属于mysqld用户组，且在my.cnf文件中。使用 vi /etc/my.cnf 加上user=mysql 进行指定mysql用户来启动mysql服务。这样是最好的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/211840c9d2e13481d48ddab87dd93c40/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-17T18:38:16+08:00" />
<meta property="article:modified_time" content="2018-09-17T18:38:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RedHat7.0 (Linux) 安装mysql（亲测，亚马逊）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>转载出处：<a href="https://blog.csdn.net/qq_32223565/article/details/79894037">https://blog.csdn.net/qq_32223565/article/details/79894037</a></h2> 
<h2 id="redhat70-linux-安装mysql">RedHat7.0 (Linux) 安装mysql</h2> 
<p>(mysql-5.7.21-1.el7.x86_64.rpm-bundle.tar)</p> 
<ul><li><strong>网上有很多资料关于安装的，但由于版本问题，困扰许久</strong></li><li><strong>本文提供 readHat7.0及相应的mysql，可到相应的百度云盘下载</strong></li><li><strong><a href="https://pan.baidu.com/s/15dPTThydeJOLOreMWVeaCQ" rel="nofollow">https://pan.baidu.com/s/15dPTThydeJOLOreMWVeaCQ</a></strong></li><li><strong>* 提取密码：34hr</strong></li></ul> 
<hr> 
<p><img alt="这里写图片描述" class="has" src="https://images2.imgbox.com/8c/19/L33K1cF4_o.png"></p> 
<ol><li> <p>安装步骤如下： <br> 在 /home下新建 mysql目录。将 mysql压缩包传入到该文件下。可通过WinSCP <br> 传入到该文件夹下(不再赘述)!</p> </li><li> <p>首先先查看是否已经安装了mysql ，执行命令 <strong>rpm -qa|grep mysql</strong></p> </li><li> <p>如果什么都没显示说明没有安装过，如果已经安装了Mysql就先卸载执行命令 <strong>rpm -e –nodeps xxxxxxxx</strong>(xxxxxx为已经安装的rpm)</p> </li><li>查看是否安装mariadb 系统自带的,之前安装的时候和mysql冲突，所有不用这个数据库的话也可以卸载,查看是否安装<strong>rpm -qa|grep mariadb</strong>,卸载执行rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</li><li>接下里进入 /home/mysql 命令：<strong>cd /home/mysql</strong></li><li>解压 <strong>tar tar -xf mysql-5.7.21-1.el7.x86_64.rpm-bundle.tar</strong></li><li>演示图<img alt="这里写图片描述" class="has" src="https://images2.imgbox.com/9d/0f/exdrrKPd_o.png"></li><li> <p>解压之后又很多文件，我们只需要安装 <br><img alt="这里写图片描述" class="has" src="https://images2.imgbox.com/57/95/0DVPLzVA_o.png"></p> </li><li> <p>命令如下：(因为包的依赖管理，注意要按上面的顺序执行) <br> rpm -ivh mysql-community-common-5.7.10-1.el7.x86_64.rpm </p> </li><li> <p>安装到server包需要安装两个依赖包 yum install libaio，yum install perl，yum -y install numactl<br> ….</p> </li><li> <p>修改mysql配置文件 sudo find / -name my.cnf 查找文件在什么位置</p> </li><li> <p>找到“[mysqld]”设置项，添加代码：</p> <pre class="has"><code class="language-html">#开启查询缓存
explicit_defaults_for_timestamp=true</code></pre> </li><li> <p>使用一个普通用户进行启动mysqld 。这个用户必须是属于mysqld用户组，且在my.cnf文件中。使用 vi /etc/my.cnf </p> <p>加上user=mysql  进行指定mysql用户来启动mysql服务。这样是最好的。</p> </li><li> <p>安装完后开始初始化数据库，进入/usr/bin</p> </li><li> </li></ol> 
<p><img alt="这里写图片描述" class="has" src="https://images2.imgbox.com/ad/a4/TFXF4XJv_o.png"> <br><img alt="这里写图片描述" class="has" src="https://images2.imgbox.com/a6/19/kQ23k1qD_o.png"></p> 
<p> </p> 
<p>插曲：</p> 
<p>安装完mysql后会有个临时密码去日志查看，但是查看登录修改密后还是不行</p> 
<p>ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password:yes)</p> 
<p>于是</p> 
<p>1，停止mysql服务</p> 
<pre class="has"><code class="language-html">systemctl stop mysqld.service</code></pre> 
<p> </p> 
<p> </p> 
<p>2，修改配置文件无密码登录</p> 
<p> </p> 
<pre class="has"><code>vi /etc/my.cnf</code></pre> 
<p> </p> 
<p>在最尾部加上</p> 
<p> </p> 
<pre class="has"><code>skip-grant-tables</code></pre> 
<p>保存<br>  </p> 
<p> </p> 
<p>3，启动mysql</p> 
<p> </p> 
<pre class="has"><code>systemctl start mysqld.service</code></pre> 
<p><br> 4，登录musql</p> 
<p> </p> 
<pre class="has"><code>mysql -u root</code></pre> 
<p>此处注意不要加-p</p> 
<p> </p> 
<p> </p> 
<p>5,修改密码，mysql5.7用此语法</p> 
<p> </p> 
<pre class="has"><code>use mysql ;</code></pre> 
<p> </p> 
<pre class="has"><code> update mysql.user set authentication_string=password('123456') where user='root' ;</code></pre> 
<p><br> 6,回到第二步骤去掉加上的</p> 
<p> </p> 
<p> </p> 
<pre class="has"><code>skip-grant-tables</code></pre> 
<p>保存 重启mysql就ok了</p> 
<p> </p> 
<p>#########################################################################</p> 
<p>其实默认安装完了mysql后或在日志中生成一个默认的密码 /var/log/mysqld.log 中</p> 
<p>拿到默认密码后登录mysql  进行密码重新设置</p> 
<p> </p> 
<pre class="has"><code>set password=password('you password')；</code></pre> 
<p> </p> 
<p>如果密码级别与默认的级别要求不符时候会报</p> 
<p> </p> 
<pre class="has"><code>Your password does not satisfy the current policy requirements</code></pre> 
<p>此时需要修改级别与最小的默认密码位数</p> 
<p> </p> 
<p> </p> 
<pre class="has"><code class="language-html"> </code></pre> 
<ol><li> <p><code>set global validate_password_policy=0;</code></p> </li><li> <p><code>set global validate_password_length=4;</code></p> </li></ol> 
<p>然后在进行设置密码就好了</p> 
<p> </p> 
<p>###################</p> 
<p>远程连接时1130错误</p> 
<p> </p> 
<pre class="has"><code class="language-html"> </code></pre> 
<ol><li> <p><code>mysql;use mysql; </code></p> </li><li> <p><code>mysql;select 'host' from user where user='root'; </code></p> </li><li> <p><code>mysql;update user set host = '%' where user ='root'; </code></p> </li><li> <p><code>mysql;flush privileges; </code></p> </li><li> <p><code>mysql;select 'host' from user where user='root';</code></p> </li></ol> 
<p>--------------------- 本文来自 soulbboy 的CSDN 博客 ，全文地址请点击：https://blog.csdn.net/keepd/article/details/77151006?utm_source=copy</p> 
<p> </p> 
<p><strong>一、 启动</strong><br> 1、使用 service 启动：service mysql start<br> 2、使用 mysqld 脚本启动：/etc/inint.d/mysql start<br> 3、使用 safe_mysqld 启动：safe_mysql&amp;<br><br><strong>二、停止</strong><br> 1、使用 service 启动：service mysql stop<br> 2、使用 mysqld 脚本启动：/etc/inint.d/mysql stop<br> 3、mysqladmin shutdown<br><br><strong>三、重启</strong><br> 1、使用 service 启动：service mysql restart<br> 2、使用 mysqld 脚本启动：/etc/inint.d/mysql restart</p> 
<p><strong>四、查看mysql状态</strong></p> 
<p> </p> 
<p>----------------------------------------------------------</p> 
<p><img alt="" class="has" height="134" src="https://images2.imgbox.com/2c/d8/1JsSrMDf_o.png" width="739"></p> 
<p>这是mysql密码改了吧，，<br><br> 重新修改下密码即可，修改方式如下：<br> 以<a href="https://www.baidu.com/s?wd=root%E6%9D%83%E9%99%90&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" rel="nofollow">root权限</a>登录mysql：（这里我的账户是root，密码也是root）<br> mysql -uroot -proot<br> 然后更改密码：<br> SET PASSWORD = PASSWORD('root');</p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bbfc36eb676432442b29fe39eabd8453/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MacBook 快捷键</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5f2eadbefc99fd430bf4f9c9c671e44/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java异步延迟任务执行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>