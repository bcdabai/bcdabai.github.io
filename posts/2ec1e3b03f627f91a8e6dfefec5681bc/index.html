<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>True or False? and WHY??? Java HashSet Contains - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="True or False? and WHY??? Java HashSet Contains" />
<meta property="og:description" content="import java.util.HashSet; public class MyClass { public String s; public MyClass(String s) { this.s = s; } public int hashCode() { return s.hashCode(); } public boolean equals(Object obj) { if(obj == null) return false; if(!(obj instanceof MyClass)) return false; MyClass other = (MyClass)obj; if(s == null) { return false; } return(s.equals(other.s)); } public static void main(String[] args) { HashSet&lt;MyClass&gt; set = new HashSet&lt;MyClass&gt;(); MyClass mc1 = new MyClass(&#34;a&#34;); set.add(mc1); mc1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2ec1e3b03f627f91a8e6dfefec5681bc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-04-24T09:20:23+08:00" />
<meta property="article:modified_time" content="2014-04-24T09:20:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">True or False? and WHY??? Java HashSet Contains</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-java">import java.util.HashSet; 
  
public class MyClass 
{ 
     public String s; 
  
     public MyClass(String s) 
     { 
         this.s = s; 
     } 
  
     public int hashCode() 
     { 
         return s.hashCode(); 
     } 
  
     public boolean equals(Object obj) 
     { 
         if(obj == null) 
             return false; 
          
         if(!(obj instanceof MyClass)) 
             return false; 
          
         MyClass other = (MyClass)obj; 
         if(s == null) 
         { 
             return false; 
         } 
          
         return(s.equals(other.s)); 
     } 
  
     public static void main(String[] args) 
     { 
         HashSet&lt;MyClass&gt; set = new HashSet&lt;MyClass&gt;(); 
          
         MyClass mc1 = new MyClass("a");     
         set.add(mc1); 
  
         mc1.s = "b"; 
          
         MyClass mc2 = new MyClass("b"); 
          
         if(set.contains(mc2)) 
         { 
             System.out.println("True"); 
         } 
         else 
         { 
             System.out.println("False"); 
         } 
     } 
}</code></pre> 
<p><br> </p> 
<p><span style="margin:0px; padding:0px; border:0px none; outline:0px; font-size:13px; vertical-align:baseline; font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; line-height:18px">结果是False</span></p> 
<p><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">我猜原因是： </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">在向set存储时，位置是使用之前的哈希值得到的。 </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">之后改变了mc1.s使得其哈希值发生了变化。 </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">调用contains方法时，找的是之后哈希值指向的位置，这是虽然mc1和mc2有相同的哈希值、且true == mc1.equeals(mc2)，但在该位置上根本没有存储东西，所以返回false </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">  </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">另外刚才找到Set的API文档里有这么一段话 </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">Note: Great care must be exercised if mutable objects are used as set elements. The behavior of a set is not specified if the value of an object is changed in a manner that affects equals comparisons while the object is an element in the set. </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">  </span><br style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px"> <span style="font-family:宋体,'Lucida Grande','Lucida Sans',Verdana,Arial,sans-serif; font-size:13px; line-height:18px">这样结果是False也许就是因为HashSet的实现方法(用了哈希散列存储)~~ </span><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2632023db601bdc0afd4d2a2d19213e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">繞過linux Driver Vermagic檢查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8859c060e277a5cfb65195677814f78f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">链接器link.exe 编译器cl.exe 资源编译器rc.exe</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>