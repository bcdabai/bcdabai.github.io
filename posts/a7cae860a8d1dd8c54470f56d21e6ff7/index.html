<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言printf()函数 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言printf()函数" />
<meta property="og:description" content="请求printf()函数打印数据的指令要与待打印数据的类型相匹配。例如，打印整数时使用%d,打印字符时使用%c,这些符号被称为转换说明，它们指定了如何把数据转换成可显示的形式。
ANSI C标准为printf()提供的转换说明如下：
转换说明
输出
%a(A)
浮点数、十六进制数和p计数法
%c
单个字符
%d
有符号十进制整数
%e(E)
浮点数，e计数法
%f
浮点数，十进制计数法
%g(G)
根据值的不同，自动选择%f或%e ，%e（E）格式用于指数小于-4
%i
有符号十进制整数（同%d）
%o
无符号八进制整数
%p
指针
%s
字符串
%u
无符号十进制整数
%x(X)
无符号十六进制整数，使用十六进制数0f(0F)
%%
打印一个百分号
格式字符串中的转换说明一定要与后面的每个项相匹配！
如果有两个转换说明，但后面只有一个待打印项，系统不同导致的结果不同，不过这种情况最好的状况是得到无意义的值。
如果只打印短语或句子，就不需要使用任何转换说明。
待打印项可以是常量也可以是乘法表达式。
转换说明的意义
转换说明把以二进制格式存储在计算机中的值转换成一系列字符（字符串）便于显示。例如76在计算机内部的存储格式是二进制数01001100。%d转换说明将其转换成字符7和6，并显示为76；%x转换说明把相同的值（01001100）转换成十六进制计数法4c；%c转换说明把01001100转换成字符L。转换可能会误导读者认为原始值被替换成转换后的值，实际上转换说明是翻译说明，%d的意思是把给定的值译成十进制整数文本并打印出来。
转换不匹配的情况
转换说明应该与待打印值的类型相匹配，通常都有多种选择，例如，如果要打印一个int类型的值，可以使用%d、%x 、%o，这些转换说明都可用于打印int类型的值，区别在于它们分别表示一个值的形式不同。
short int 的大小是2字节，系统使用二进制补码来表示有符号整数，这种方法，数字0~32767代表它们本身，而数字32768~65535则表示负数，其中65535表示-1,65534表示-2，以此类推，-336表示为65200（65536-336），被解释成有符号int时，65200代表-336，而被解释成无符号int时，65200则代表65200.一个数字可以被解释成两个不同的值，尽管并非所有的系统都是用这两种方法来表示负整数，但不要期望%u转换说明能把数字和符号分开。
参数传递
参数传递机制因实现而异，以我们的系统为例，分析参数传递的原理：
printf(“%ld %ld %ld %ld\n”,n1,n2,n3,n4);
该调用告诉计算机把变量n1,n2,n3,n4的值传递给程序（n1为float类型,n2为double类型；n3,n4为long类型）。程序把传入的值放入称为栈的内存区域，计算机根据变量类型（不是根据转换说明）把这些值放入栈中。n1被存储在栈中，占8字节，n2也在栈中占8字节，n3和n4在栈中分别占四字节，然后控制转到printf()函数，该函数根据转换说明（不是根据变量类型）从栈中读取值。%ld转换说明表明printf()应该读取4字节，所以printf()读取栈中的前4字节作为第1个值，这是n1的前半部分，将被解释成一个long类型的整数。根据下一个%ld转换说明，printf()再读取4字节，这是n1的后半部分，将被解释成第2个long类型的整数，类似的根据第3个和第4个%ld，printf()读取n2的前半部分和后半部分，并被解释成两个long类型的整数，因此对于n3和n4，虽然用对了转换说明，但printf()还是读错了字节。
printf()的返回值
大部分C函数都有一个返回值，这是函数计算并返回给主调程序的值，总之可以把返回值像其他值一样使用，printf()函数也有一个返回值，它返回打印字符的个数，如果有输出错误，printf()则返回一个负值。
打印较长的字符串
有时，printf()语句太长，在屏幕上不方便阅读，故而一条语句可以写成多行，但不能在双引号括起来的字符串中间断行（C编译器会报错，字符串常量中有非法字符），在字符串中，可以使用\n来表示换行字符，但是不能通过按下Enter键产生实际的换行符。
摘录自C Primer Plus" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a7cae860a8d1dd8c54470f56d21e6ff7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-10T22:48:48+08:00" />
<meta property="article:modified_time" content="2022-01-10T22:48:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言printf()函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:justify;">请求printf()函数打印数据的指令要与待打印数据的类型相匹配。例如，打印整数时使用%d,打印字符时使用%c,这些符号被称为转换说明，它们指定了如何把数据转换成可显示的形式。</p> 
<p style="margin-left:0;text-align:justify;">ANSI C标准为printf()提供的转换说明如下：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">转换说明</p> </td><td style="border-color:#000000;vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">输出</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%a(A)</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">浮点数、十六进制数和p计数法</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%c</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">单个字符</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%d</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">有符号十进制整数</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%e(E)</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">浮点数，e计数法</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%f</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">浮点数，十进制计数法</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%g(G)</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">根据值的不同，自动选择%f或%e ，%e（E）格式用于指数小于-4</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%i</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">有符号十进制整数（同%d）</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%o</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">无符号八进制整数</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%p</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">指针</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%s</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">字符串</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%u</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">无符号十进制整数</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%x(X)</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">无符号十六进制整数，使用十六进制数0f(0F)</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:91.9pt;"> <p style="margin-left:0;text-align:justify;">%%</p> </td><td style="vertical-align:top;width:322.9pt;"> <p style="margin-left:0;text-align:justify;">打印一个百分号</p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;">格式字符串中的转换说明一定要与后面的每个项相匹配！</p> 
<p style="margin-left:0;text-align:justify;">如果有两个转换说明，但后面只有一个待打印项，系统不同导致的结果不同，不过这种情况最好的状况是得到无意义的值。</p> 
<p style="margin-left:0;text-align:justify;">如果只打印短语或句子，就不需要使用任何转换说明。</p> 
<p style="margin-left:0;text-align:justify;">待打印项可以是常量也可以是乘法表达式。</p> 
<p style="margin-left:0;text-align:justify;">转换说明的意义</p> 
<p style="margin-left:0;text-align:justify;">转换说明把以二进制格式存储在计算机中的值转换成一系列字符（字符串）便于显示。例如76在计算机内部的存储格式是二进制数01001100。%d转换说明将其转换成字符7和6，并显示为76；%x转换说明把相同的值（01001100）转换成十六进制计数法4c；%c转换说明把01001100转换成字符L。转换可能会误导读者认为原始值被替换成转换后的值，实际上转换说明是翻译说明，%d的意思是把给定的值译成十进制整数文本并打印出来。</p> 
<p style="margin-left:0;text-align:justify;">转换不匹配的情况</p> 
<p style="margin-left:0;text-align:justify;">转换说明应该与待打印值的类型相匹配，通常都有多种选择，例如，如果要打印一个int类型的值，可以使用%d、%x 、%o，这些转换说明都可用于打印int类型的值，区别在于它们分别表示一个值的形式不同。</p> 
<p style="margin-left:0;text-align:justify;">short int 的大小是2字节，系统使用二进制补码来表示有符号整数，这种方法，数字0~32767代表它们本身，而数字32768~65535则表示负数，其中65535表示-1,65534表示-2，以此类推，-336表示为65200（65536-336），被解释成有符号int时，65200代表-336，而被解释成无符号int时，65200则代表65200.一个数字可以被解释成两个不同的值，尽管并非所有的系统都是用这两种方法来表示负整数，但不要期望%u转换说明能把数字和符号分开。</p> 
<p style="margin-left:0;text-align:justify;">参数传递</p> 
<p style="margin-left:0;text-align:justify;">参数传递机制因实现而异，以我们的系统为例，分析参数传递的原理：</p> 
<p style="margin-left:0;text-align:justify;">printf(“%ld %ld %ld %ld\n”,n1,n2,n3,n4);</p> 
<p style="margin-left:0;text-align:justify;">该调用告诉计算机把变量n1,n2,n3,n4的值传递给程序（n1为float类型,n2为double类型；n3,n4为long类型）。程序把传入的值放入称为栈的内存区域，计算机根据变量类型（不是根据转换说明）把这些值放入栈中。n1被存储在栈中，占8字节，n2也在栈中占8字节，n3和n4在栈中分别占四字节，然后控制转到printf()函数，该函数根据转换说明（不是根据变量类型）从栈中读取值。%ld转换说明表明printf()应该读取4字节，所以printf()读取栈中的前4字节作为第1个值，这是n1的前半部分，将被解释成一个long类型的整数。根据下一个%ld转换说明，printf()再读取4字节，这是n1的后半部分，将被解释成第2个long类型的整数，类似的根据第3个和第4个%ld，printf()读取n2的前半部分和后半部分，并被解释成两个long类型的整数，因此对于n3和n4，虽然用对了转换说明，但printf()还是读错了字节。</p> 
<p style="margin-left:0;text-align:justify;">printf()的返回值</p> 
<p style="margin-left:0;text-align:justify;">大部分C函数都有一个返回值，这是函数计算并返回给主调程序的值，总之可以把返回值像其他值一样使用，printf()函数也有一个返回值，它返回打印字符的个数，如果有输出错误，printf()则返回一个负值。</p> 
<p style="margin-left:0;text-align:justify;">打印较长的字符串</p> 
<p style="margin-left:0;text-align:justify;">有时，printf()语句太长，在屏幕上不方便阅读，故而一条语句可以写成多行，但不能在双引号括起来的字符串中间断行（C编译器会报错，字符串常量中有非法字符），在字符串中，可以使用\n来表示换行字符，但是不能通过按下Enter键产生实际的换行符。</p> 
<p style="margin-left:0;text-align:justify;">摘录自C Primer Plus</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f61df7c438704d09bc9f67ad7417750/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">EFCore——原生Sql语句（12）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62c0ac3e51e60c50bcb4761cdb013356/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C# 开源一个基于 yarp 的 API 网关 Demo，支持绑定 Kubernetes Service</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>