<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32 第9讲 STM32CubeMX简介安装和简单使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32 第9讲 STM32CubeMX简介安装和简单使用" />
<meta property="og:description" content="文章目录 STM32CubeMX安装安装JAVA环境安装STM32CubeMX下载关联STM32Cube固件包 新建工程芯片选型配置时钟源时钟树配置GPIO引脚配置Debug选项配置生成工程编写逻辑代码 STM32CubeMX安装 STM32CubeMX是ST开发的一款图形配置工具，可以通过图形化配置自动生成初始化代码。
STM32的标准外设库已经停止维护了。
安装JAVA环境 安装STM32CubeMX之前必须安装JAVA环境，这两个顺序不能调换。
官网下载地址link
下载完成后，点击安装包，直接安装即可。
接下来检测是否安装成功。
Win &#43; R 输入cmd打开指令窗口，键入java -version，显示当前java版本号则安装成功。
安装STM32CubeMX 官网下载地址link
安装注意事项：
建议不要安装在C盘安装路径不能有中文字符 双击安装包开始安装
即安装完成了
下载关联STM32Cube固件包 双击下载好的STM32CubeMX，在Help栏中找到Updater Settings，更改固件安装包的位置，避免装在系统盘。
点击Help栏中的管理固件包选项，对固件包进行管理。
选择需要的版本 Install 后会自动解压关联。
选择本地已经下载好的固件压缩包，关联成功后会显示绿色。
新建工程 芯片选型 选择自己所需要的芯片双击
配置时钟源 时钟树配置 ① 时钟源参数设置：我们选择 HSE 为时钟源，所以我们要根据硬件实际的高速晶振频率（这里我们是 8MHz）填写。
③ 时钟源选择：我们配置选择器选择 HSE 即可。
④ PLL1 分频系数 M 配置。分频系数 M 我们设置为 8。
④ PLL1 倍频系数 N 配置。倍频系数 N 我们设置为 336。
⑤ PLL1 分频系数 P 配置。分频系数 P 我们配置为 2。
⑥ 系统时钟时钟源选择：PLL,HSI 还是 HSE。我们选择 PLL，选择器选择 PLLCLK 即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f5b4622f79c8c6aabe0a444f7eefecd0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-28T12:37:14+08:00" />
<meta property="article:modified_time" content="2023-01-28T12:37:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32 第9讲 STM32CubeMX简介安装和简单使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#STM32CubeMX_1" rel="nofollow">STM32CubeMX安装</a></li><li><ul><li><a href="#JAVA_4" rel="nofollow">安装JAVA环境</a></li><li><a href="#STM32CubeMX_14" rel="nofollow">安装STM32CubeMX</a></li><li><a href="#STM32Cube_28" rel="nofollow">下载关联STM32Cube固件包</a></li></ul> 
  </li><li><a href="#_38" rel="nofollow">新建工程</a></li><li><ul><li><a href="#_39" rel="nofollow">芯片选型</a></li><li><a href="#_43" rel="nofollow">配置时钟源</a></li><li><a href="#_45" rel="nofollow">时钟树配置</a></li><li><a href="#GPIO_55" rel="nofollow">GPIO引脚配置</a></li><li><a href="#Debug_67" rel="nofollow">Debug选项配置</a></li><li><a href="#_69" rel="nofollow">生成工程</a></li><li><a href="#_74" rel="nofollow">编写逻辑代码</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="STM32CubeMX_1"></a>STM32CubeMX安装</h2> 
<p>STM32CubeMX是ST开发的一款图形配置工具，可以通过图形化配置自动生成初始化代码。<br> STM32的标准外设库已经停止维护了。</p> 
<h3><a id="JAVA_4"></a>安装JAVA环境</h3> 
<p>安装STM32CubeMX之前必须安装JAVA环境，这两个顺序不能调换。<br> 官网下载地址<a href="https://www.java.com/zh-CN/" rel="nofollow">link</a><br> 下载完成后，点击安装包，直接安装即可。<br> <img src="https://images2.imgbox.com/b1/ed/4w864nH0_o.png" alt="在这里插入图片描述"><br> 接下来检测是否安装成功。<br> Win + R 输入cmd打开指令窗口，键入java -version，显示当前java版本号则安装成功。<br> <img src="https://images2.imgbox.com/5f/4d/jJ2gE34q_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="STM32CubeMX_14"></a>安装STM32CubeMX</h3> 
<p>官网下载地址<a href="https://www.st.com/en/development-tools/stm32cubemx.html" rel="nofollow">link</a><br> <strong>安装注意事项：</strong></p> 
<ol><li>建议不要安装在C盘</li><li>安装路径不能有中文字符</li></ol> 
<hr> 
<p>双击安装包开始安装<br> <img src="https://images2.imgbox.com/80/7b/Ouf43Trd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8d/99/ZjWNSBQX_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cf/f2/MGNnRzOk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/57/1b/Q8wh1IYV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bc/8f/J4EleLtE_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/06/03/fs59OSkt_o.png" alt="在这里插入图片描述"><br> 即安装完成了</p> 
<h3><a id="STM32Cube_28"></a>下载关联STM32Cube固件包</h3> 
<p>双击下载好的STM32CubeMX，在Help栏中找到Updater Settings，更改固件安装包的位置，避免装在系统盘。<br> <img src="https://images2.imgbox.com/ff/45/cicmU0TQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/31/df/wHJIRtlY_o.png" alt="在这里插入图片描述"><br> 点击Help栏中的管理固件包选项，对固件包进行管理。<br> <img src="https://images2.imgbox.com/bf/b3/WB9QAyPU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/51/70/atCJrw67_o.png" alt="在这里插入图片描述"><br> 选择需要的版本 Install 后会自动解压关联。<br> 选择本地已经下载好的固件压缩包，关联成功后会显示绿色。<br> <img src="https://images2.imgbox.com/6f/dd/kWyXIRQ7_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_38"></a>新建工程</h2> 
<h3><a id="_39"></a>芯片选型</h3> 
<p><img src="https://images2.imgbox.com/35/da/tjXQLy8x_o.png" alt="在这里插入图片描述"><br> 选择自己所需要的芯片双击<br> <img src="https://images2.imgbox.com/0f/cf/qCKVZ5BZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_43"></a>配置时钟源</h3> 
<p><img src="https://images2.imgbox.com/d7/0d/4QpUBn8o_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_45"></a>时钟树配置</h3> 
<p><img src="https://images2.imgbox.com/59/87/vz9MM6Or_o.png" alt="在这里插入图片描述"><br> ① 时钟源参数设置：我们选择 HSE 为时钟源，所以我们要根据硬件实际的高速晶振频率（这里我们是 8MHz）填写。<br> ③ 时钟源选择：我们配置选择器选择 HSE 即可。<br> ④ PLL1 分频系数 M 配置。分频系数 M 我们设置为 8。<br> ④ PLL1 倍频系数 N 配置。倍频系数 N 我们设置为 336。<br> ⑤ PLL1 分频系数 P 配置。分频系数 P 我们配置为 2。<br> ⑥ 系统时钟时钟源选择：PLL,HSI 还是 HSE。我们选择 PLL，选择器选择 PLLCLK 即可。<br> ⑦ 经过上面配置以后此时 SYSCLK=168MHz。<br> 经过上面的 7 个步骤，就配置好 STM32F4 的系统时钟为 168MHz。接下来我们还需要配置AHB、APB1、APB2 和 Systick 的分频系数，为 STM32 的片上外设或 M4 内核设置对应的工作时钟，为后续使用这些硬件功能做好准备.AHB、APB1 和 APB2 总线时钟以及 Systick 时钟的来源于系统时钟 SYSCLK。其中 AHB总线时钟 HCLK 由 SYSCLK 经过 AHB 预分频器之后得到，如果我们要设置 HCLK 为 168MHz (最大为 168Mz)，那么我们只需要配置图中标号的地方为 1 即可。得到 HCLK 之后，接下来我们将在图标号⑨~⑪处同样的方法依次配置 Systick、APB1 和 APB2 分频系数分别为 1、4 和 2。注意！systick 固定为 168MHz，配置完成之后，那么 HCLK=168MHz，Systick=168MHz，PCLK1=42MHz，PCLK2=84MHz，这和之前例程配置的时钟频率是一样的。以上方法是手动计算的方法，是为了帮助我们更好地去认识 STM32 时钟的配置方法，当然CubeMX 也提供了更简单的方法：在“HCLK(MHz)”位置，实际上是可以编辑的。我们直接输入我们要的时钟频率，这里是 168MHz，按回车键，CubeMX 会帮我们提供一种设置时钟频率和其它时钟的建议，选择是后会由软件自动配置好，当然只有启用外部的晶振后才能配置到 168MHz 的时钟。</p> 
<h3><a id="GPIO_55"></a>GPIO引脚配置</h3> 
<p>通过原理图可以知道开发板的LED连接在 PF9 和 PF10 两个引脚上。<br> 我们在芯片上找到两个引脚，设置为GPIO_Output模式.<br> <img src="https://images2.imgbox.com/c8/a8/4nVmhxDV_o.png" alt="在这里插入图片描述"><br> 在GPIO这一栏中进一步配置<br> <img src="https://images2.imgbox.com/a9/5f/B4gTfn2V_o.png" alt="在这里插入图片描述"><br> GPIO output level 是 IO 的初始值，由于 LED 一端接 VCC，另一端接 GPIO，故要点亮 LED灯时，使 GPIO 输出低电平即可。为了一开始让 LED 灯熄灭，我们设置初始值输出高电平。<br> GPIO mode 我们已经在视图中配置为推挽输出了，这里不需要修改。<br> GPIO Pull-up/Pull-down 默认是无上下拉，我们这里用默认配置。<br> Maximum output speed 输出速度配置，默认是低速，我们设置为高速。<br> User Label 用户符号，我们可以给 PF9 起一个别名 LED0。<br> PF10 也是按照这样的方法配置,给 PF10 起一个别名 LED1。</p> 
<h3><a id="Debug_67"></a>Debug选项配置</h3> 
<p><img src="https://images2.imgbox.com/f4/0d/GNbgosX9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_69"></a>生成工程</h3> 
<p><img src="https://images2.imgbox.com/c3/09/wR7ht5b1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0b/95/mCVtDWvV_o.png" alt="在这里插入图片描述"><br> 配置好后就可以生成工程，打开文件了<br> <img src="https://images2.imgbox.com/3d/5d/3oL7s9t7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_74"></a>编写逻辑代码</h3> 
<p>在预留的位置中间编写用户代码，如果在其他地方编写，在更新工程后会覆盖掉用户代码。<br> <img src="https://images2.imgbox.com/f2/be/z07j91jg_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7c950b1ada88487b6d0087bcf1acf51e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32 第11讲 正点原子SYSTEM文件夹介绍及使用（sys/delay/usart）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/54bac99d3e3801b1520265af88fb05eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">docker-compose加入已经存在的网络</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>