<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python自动化测试框架pytest的详解安装与运行 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python自动化测试框架pytest的详解安装与运行" />
<meta property="og:description" content="这篇文章主要为大家介绍了Python自动化测试框架pytest的简介以及安装与运行，有需要的朋友可以借鉴参考下希望能够有所帮助，祝大家多多进步
1. pytest的介绍 pytest是一个非常成熟的全功能的python测试工具，它主要有以下特征：
简单灵活，容易上手；
支持简单的单元测试和复杂的功能测试
显示详细的断言失败信息
能自动识别测试模块和测试功能
有测试会话、测试模块、测试类、测试函数级别的fixture
可用于selenium/Appium等自动化测试和接口自动化测试(pytest&#43;requests);
拥有丰富的第三方插件，还可自定义扩展；
可与持续集成工具进行很好的集成，如：Jenkins。
…
2. pytest的安装 1. 使用以下命令进行安装 1
pip install -U pytest
参数说明：
-U： 将指定的软件包升级至当前最新的可用版本
其他说明：
官网安装说明有加上-U参数，不加上-U参数亦可
2. 检查是否成功安装正确版本 1
2
$ pytest --version
pytest 6.2.4
3. pytest识别测试的条件 1.若无指定参数，pytest会从testpath(如果配置)或当前目录下递归查找与 norecursedirs不匹配的目录。
2.查找目录中所有符合test_*.py和*_test.py的文件
3.从匹配到的测试文件中，搜集满足以下条件的测试用例：
在类之外的所有test_*方法Test*类中包含的所有test_*方法（Test*类中不能含有__init__()方法） 4. pytest的运行 pytest的运行分为以下方式：
1. Pycharm中进行调用
2. Python代码中调用
3. 使用命令行进行调用
4.1 Pycharm中调用 Pycharm中默认的test runner是Unittest，无法识别使用pytest编写的测试文件和测试用例
进入Preferences--&gt;Tools--&gt;Python Integrted Tools，
修改Testing下的Default test runner，改成pytest后，
则可以直接使用Pycharm中的Run按钮无参数的调用pytest。
4.2 Python代码中调用 在代码中添加入口函数—pytest.main()，即可在Python代码中调用pytest。
pytest.main()的参数：
1. args:命令行指令列表集" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ff40a7d80dbe29c4c006ed4835aac988/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-24T19:42:15+08:00" />
<meta property="article:modified_time" content="2023-07-24T19:42:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python自动化测试框架pytest的详解安装与运行</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这篇文章主要为大家介绍了Python自动化测试框架pytest的简介以及安装与运行，有需要的朋友可以借鉴参考下希望能够有所帮助，祝大家多多进步</p> 
<p><a name="_label0"></a></p> 
<h3 id="heading-0">1. pytest的介绍</h3> 
<p>pytest是一个非常成熟的全功能的python测试工具，它主要有以下特征：</p> 
<p>简单灵活，容易上手；</p> 
<p>支持简单的单元测试和复杂的功能测试</p> 
<p>显示详细的断言失败信息</p> 
<p>能自动识别测试模块和测试功能</p> 
<p>有测试会话、测试模块、测试类、测试函数级别的fixture</p> 
<p>可用于selenium/Appium等自动化测试和接口自动化测试(pytest+requests);</p> 
<p>拥有丰富的第三方插件，还可自定义扩展；</p> 
<p>可与持续集成工具进行很好的集成，如：Jenkins。<br> …</p> 
<p><a name="_label1"></a></p> 
<h3 id="heading-1">2. pytest的安装</h3> 
<p><a name="_lab2_1_0"></a></p> 
<h4 id="heading-2">1. 使用以下命令进行安装</h4> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> </td><td> <p><code>pip install </code><code>-</code><code>U pytest</code></p> </td></tr></tbody></table> 
<p>参数说明：<br> -U： 将指定的软件包升级至当前最新的可用版本<br> 其他说明：<br> 官网安装说明有加上-U参数，不加上-U参数亦可</p> 
<p><a name="_lab2_1_1"></a></p> 
<h4 id="heading-3">2. 检查是否成功安装正确版本</h4> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> </td><td> <p><code>$ pytest --version</code></p> <p><code>pytest 6.2.4</code></p> </td></tr></tbody></table> 
<p><a name="_label2"></a></p> 
<h3 id="heading-4">3. pytest识别测试的条件</h3> 
<p>1.若无指定参数，pytest会从testpath(如果配置)或当前目录下递归查找与 norecursedirs不匹配的目录。</p> 
<p>2.查找目录中所有符合<code>test_*.py</code>和<code>*_test.py</code>的文件</p> 
<p>3.从匹配到的测试文件中，搜集满足以下条件的测试用例：</p> 
<ul><li>在类之外的所有<code>test_*</code>方法</li><li><code>Test*</code>类中包含的所有<code>test_*</code>方法（<code>Test*</code>类中不能含有<code>__init__()</code>方法）</li></ul> 
<p><a name="_label3"></a></p> 
<h3 id="heading-5">4. pytest的运行</h3> 
<p>pytest的运行分为以下方式：</p> 
<p>1. Pycharm中进行调用<br> 2. Python代码中调用<br> 3. 使用命令行进行调用</p> 
<p><a name="_lab2_3_2"></a></p> 
<h4 id="heading-6">4.1 Pycharm中调用</h4> 
<p>Pycharm中默认的test runner是Unittest，无法识别使用pytest编写的测试文件和测试用例</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="444" src="https://images2.imgbox.com/12/a3/SifTd9RG_o.png" width="600"></p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="754" src="https://images2.imgbox.com/a3/9e/Ic0k1xZM_o.png" width="1200"></p> 
<blockquote> 
 <p>进入Preferences--&gt;Tools--&gt;Python Integrted Tools，</p> 
 <p>修改Testing下的Default test runner，改成pytest后，</p> 
 <p>则可以直接使用Pycharm中的Run按钮无参数的调用pytest。</p> 
</blockquote> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="444" src="https://images2.imgbox.com/47/18/YI70LXXf_o.png" width="600"></p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="754" src="https://images2.imgbox.com/28/ce/4qvzCQOK_o.png" width="1200"></p> 
<p><a name="_lab2_3_3"></a></p> 
<h4 id="heading-7">4.2 Python代码中调用</h4> 
<p>在代码中添加入口函数—pytest.main()，即可在Python代码中调用pytest。</p> 
<p><code>pytest.main()</code>的参数：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="201" src="https://images2.imgbox.com/3a/5d/duTzQ6Hb_o.png" width="600"></p> 
<p>1. <code>args</code>:命令行指令列表集</p> 
<p>示例代码sample1：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> </td><td> <p><code>import</code> <code>pytest</code></p> <p><code>class</code> <code>TestDemo:</code></p> <p><code>    </code><code>def</code> <code>test_demo1(</code><code>self</code><code>):</code></p> <p><code>        </code><code>print</code><code>(</code><code>"test_demo1"</code><code>)    </code></p> <p><code>    </code><code>def</code> <code>test_demo2(</code><code>self</code><code>):</code></p> <p><code>        </code><code>print</code><code>(</code><code>"test_demo2"</code><code>)</code></p> <p><code>    </code><code>if</code>  <code>__name__</code><code>=</code><code>=</code><code>'__main__'</code><code>:</code></p> <p><code>     </code><code>pytest.main([</code><code>'test_sample.py::TestDemo::test_demo1'</code><code>,</code><code>'-v'</code><code>])</code></p> </td></tr></tbody></table> 
<blockquote> 
 <p>pytest.main(['test_sample.py::test_demo1','-v'])的参数说明：</p> 
 <p>''test_sample.py::TestDemo::test_demo1''：表示运行test_sample.py中的TestDemo类里面名为test_demo1的测试方式</p> 
 <p>-v：表示打印详细运行日志信息</p> 
</blockquote> 
<p>运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="692" src="https://images2.imgbox.com/c4/20/xaGmSNtq_o.png" width="1200"></p> 
<p>2. <code>plugins</code>:在初始化过程中可自动注册的插件对象列表</p> 
<p>示例代码sample2：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> </td><td> <p><code>import</code> <code>pytest</code></p> <p><code>import</code> <code>sys</code></p> <p><code>class</code> <code>TestDemo:</code></p> <p><code>    </code><code>def</code> <code>test_demo1(</code><code>self</code><code>):</code></p> <p><code>        </code><code>print</code><code>(</code><code>"test_demo1"</code><code>)</code></p> <p><code>    </code><code>def</code> <code>test_demo2(</code><code>self</code><code>):</code></p> <p><code>        </code><code>print</code><code>(</code><code>"test_demo2"</code><code>)</code></p> <p></p> <p><code>class</code> <code>MyPlugin:</code></p> <p><code>    </code><code>def</code> <code>pytest_sessionfinish(</code><code>self</code><code>):</code></p> <p><code>        </code><code>print</code><code>(</code><code>"*** test run reporting finishing"</code><code>)</code></p> <p><code>if</code> <code>__name__ </code><code>=</code><code>=</code> <code>'__main__'</code><code>:</code></p> <p><code>    </code><code>sys.exit(pytest.main([</code><code>'-v'</code><code>,</code><code>'test_sample.py::TestDemo::test_demo1'</code><code>], plugins</code><code>=</code><code>[MyPlugin()]))</code></p> </td></tr></tbody></table> 
<blockquote> 
 <p>pytest.main(['-v','test_sample.py::TestDemo::test_demo1'], plugins=[MyPlugin()])参数说明：</p> 
 <p>plugins=[MyPlugin()])):传入自定义的MyPlugin()函数</p> 
</blockquote> 
<p>运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="630" src="https://images2.imgbox.com/c9/60/EU6EX6pA_o.png" width="1200"></p> 
<p><a name="_lab2_3_4"></a></p> 
<h4 id="heading-8">4.3 使用命令行调用</h4> 
<p>1. 使用<code>python</code>调用<br> 当代码中我们添加入口函数后，可以使用python来调用pytest。<br> 以sample2的代码为例，在终端输入一下命令：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> </td><td> <p><code>python test_sample.py </code></p> </td></tr></tbody></table> 
<p>运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="580" src="https://images2.imgbox.com/72/5c/YTBkNnfK_o.png" width="1200"></p> 
<p>2. 使用<code>pytest</code>调用</p> 
<p><a name="_label3_3_4_0"></a></p> 
<h5 id="heading-9">常用参数列表</h5> 
<p>以下列举了一些常用的pytest的执行参数，其他参数可使用<code>pytest --help</code>查看。</p> 
<table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>pytest 目录路径</td><td>运行指定目录下可收集到的测试，为空则默认执行当前目录下收集到的测试</td></tr><tr><td>pytest 文件名.py</td><td>执行单独一个pytest模块</td></tr><tr><td>pytest 文件名.py::类名</td><td>运行某个模块中的某个类</td></tr><tr><td>pytest 文件名.py::类名::方法名</td><td>运行某个模块中的某个类的某个方法</td></tr><tr><td>pytest -v</td><td>打印详细运行日志信息</td></tr><tr><td>pytest -v -s 文件名.py</td><td>带控制台输出结果，也输出运行详细日志信息</td></tr><tr><td>pytest -x 文件名.py</td><td>一旦运行到报错，就停止运行</td></tr><tr><td>pytest -k "类名 and not 方法名"</td><td>执行某个关键字的用例</td></tr><tr><td>pytest -m [标记名]</td><td>@pytest.mark.[标记名]将运行这个标记的测试用例</td></tr><tr><td>pytest –maxfail=[num]</td><td>当运行错误到达num时候就停止运行</td></tr><tr><td>pytest –colection-only</td><td>只收集测试用例</td></tr><tr><td>pytest –junitxml=./result.xml</td><td>生成执行结果文件</td></tr><tr><td>pytest –setup-show</td><td>回溯fixture的执行过程</td></tr></tbody></table> 
<p><a name="_label3_3_4_1"></a></p> 
<h5 id="heading-10">参数演示示例：</h5> 
<p>demo目录如下</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="336" src="https://images2.imgbox.com/7f/c0/CjYnnPUH_o.png" width="600"></p> 
<p>1.pytest目录路径：运行指定目录下可收集到的测试</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="460" src="https://images2.imgbox.com/05/87/0BDA4gsu_o.png" width="1200"></p> 
<p>2.pytest文件名.py:执行单独一个pytest模块</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="418" src="https://images2.imgbox.com/68/8a/wHtE27Q5_o.png" width="1200"></p> 
<p>3.pytest 文件名.py::类名:运行某个模块中的某个类</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="414" src="https://images2.imgbox.com/40/3f/EvjOc9Tr_o.png" width="1200"></p> 
<p>4.pytest 文件名.py::类名::方法名:运行某个模块中的某个类的某个方法</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="410" src="https://images2.imgbox.com/eb/c8/dnJz49Ha_o.png" width="1200"></p> 
<p>5.pytest -v: 打印详细运行日志信息</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="466" src="https://images2.imgbox.com/ff/bf/XiX0Z7P7_o.png" width="1200"></p> 
<p>6.pytest -v -s 文件名.py：带控制台输出结果，也输出运行详细日志信息</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="584" src="https://images2.imgbox.com/69/a9/K3HvcahL_o.png" width="1200"></p> 
<p>7.pytest -x 文件名.py:一旦运行到报错，就停止运行</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="1196" src="https://images2.imgbox.com/1e/67/Weirc1K6_o.png" width="1200"></p> 
<p>8.pytest -k "类名 and not 方法名":执行某个关键字的用例</p> 
<p>注意：示例中，测试用例名称中包含“test_c”和“test_d”的都会被执行</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="590" src="https://images2.imgbox.com/e0/e8/rjCCnnX1_o.png" width="1200"></p> 
<p>9.pytest -m [标记名]：@pytest.mark.[标记名]将运行这个标记的测试用例</p> 
<p>对两个测试方法进行<code>@pytest.mark.[标记]</code>的标记。</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="646" src="https://images2.imgbox.com/40/ed/eWOtrs9a_o.png" width="648"></p> 
<p>运行结果：</p> 
<p>只运行了被标记的两个测试方法。</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="442" src="https://images2.imgbox.com/f4/44/L8Fk45yn_o.png" width="1200"></p> 
<p>10. <code>pytest --maxfail=[num]</code>：当运行错误到达num时候就停止运行</p> 
<p>对代码进行修改，模拟两条运行失败测试用例。</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="680" src="https://images2.imgbox.com/9d/fc/gQ7w0sJx_o.png" width="962"></p> 
<p>运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="496" src="https://images2.imgbox.com/2a/c0/HmICToxe_o.png" width="1200"></p> 
<p>11. <code>pytest --colection-only</code>：只收集测试用例</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="232" src="https://images2.imgbox.com/9c/e0/Gp6N5D0b_o.png" width="600"></p> 
<p>12. <code>pytest --junitxml=./result.xml</code>：生成执行结果文件</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="360" src="https://images2.imgbox.com/a1/8d/iWOO0p9V_o.png" width="1200"></p> 
<p>执行结束后，对应目录下会生成一个结果文件。</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="868" src="https://images2.imgbox.com/07/29/zlMPMKR4_o.png" width="1200"></p> 
<p>13.<code>pytest --setup-show</code>：回溯fixture的执行过程</p> 
<p>对原有代码进行修改。新增一个fixture修饰的函数，并对test_demo1测试方法进行修改。</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="520" src="https://images2.imgbox.com/c9/42/dDeT1PRA_o.png" width="960"></p> 
<p>运行结果：</p> 
<p></p> 
<p class="img-center"><img alt="在这里插入图片描述" height="664" src="https://images2.imgbox.com/98/23/bQ4Z2OEG_o.png" width="1200"></p> 
<p><strong>文末说明：<br> 以上内容是我在阅读<a href="https://www.osgeo.cn/pytest/contents.html" rel="nofollow" title="pytest官方文档">pytest官方文档</a>后，依照个人理解进行整理。内容可能会有理解错误之处，欢迎大家留言指正。谢谢！</strong></p> 
<p><strong>以上就是Python自动化测试框架pytest介绍安装与运行的详细内容，更多关于Python自动化测试框架pytest的资料请关注小编其它相关文章！</strong></p> 
<p><strong>下面是配套资料，对于做【软件测试】的朋友来说应该是最全面最完整的备战仓库，这个仓库也陪伴我走过了最艰难的路程，希望也能帮助到你！</strong></p> 
<p class="img-center"><img alt="" height="541" src="https://images2.imgbox.com/1a/f4/XF7bLe7P_o.png" width="704"></p> 
<h2><strong>软件测试面试小程序</strong></h2> 
<p>被百万人刷爆的软件测试题库！！！谁用谁知道！！！全网最全面试刷题小程序，手机就可以刷题，地铁上公交上，卷起来！</p> 
<p><strong>涵盖以下这些面试题板块：</strong></p> 
<blockquote> 
 <p>1、软件测试基础理论 ，2、web,app，接口功能测试 ，3、网络 ，4、数据库 ，5、linux</p> 
 <p>6、web,app，接口自动化 ，7、性能测试 ，8、编程基础，9、hr面试题 ，10、开放性测试题，11、安全测试，12、计算机基础</p> 
</blockquote> 
<p class="img-center"><img alt="" height="670" src="https://images2.imgbox.com/04/c3/N3dpHjNm_o.png" width="1196"></p> 
<p><strong>资料获取方式 ：</strong></p> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/c4/92/xtCeLw5T_o.png" width="451"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41bc9db3532c52a9ca5d708498f5b6f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LIN通信</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5fca0ce8fe94af20383f04f87bccb7cf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">史上最全，Postman接口自动化测试-项目案例（总结）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>