<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python】pyqt6入门到入土系列，非常详细... - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Python】pyqt6入门到入土系列，非常详细..." />
<meta property="og:description" content="写在前面 最近真的是运气不好，国庆前一天，隔壁小区有人中招了，结果国庆出不了门，好不容易国庆结束了，准备上班，结果小区又有个叼毛中招了，搞得我直接国庆放了半个月，还只能在家过，没事干只能这里写写，那里弄弄，于是今天就把存货分享给大家了~
兄弟们学习python，有时候不知道怎么学，从哪里开始学。掌握了基本的一些语法或者做了两个案例后，不知道下一步怎么走，不知道如何去学习更加高深的知识。
那么对于这些大兄弟们，我准备了大量的免费视频教程，PDF电子书籍，以及源代码！
大家文末名片自取即可~
一、什么是PyQt6? 简单介绍一下PyQt6 1、基础简介 PyQt6 Digia 公司的 Qt 程序的 Python 中间件。Qt库是最强大的GUI库之一。PyQt6的官网：www.riverbankcomputing.co.uk/news。PyQt6是由Riverbank Computing公司开发的
PyQt6 是基于 Python 的一系列模块。它是一个多平台的工具包，可以在包括Unix、Windows和Mac OS在内的大部分主要操作系统上运行。PyQt6 有两个许可证，开发人员可以在 GPL 和商业许可之间进行选择。
2、安装 PyQt6 pip install PyQt6
3、PyQt6 模块 PyQt6 类是由一系列模块组成的，包括如下的模块：
QtCoreQtGuiQtWidgetsQtDBusQtNetworkQtHelpQtXmlQtSvgQtSqlQtTest 1)、 界面框架部分
主类
QLayout
继承类
QGridLayout （网格布局）
QBoxLayout（简单的上下布局）
QStackedLayout （可切换widget的布局）
FlowLayout
2)、 界面组件部分（其实也是Widget类）
button
label
等等
3)、 界面样式部分
color
size
font
Icon
4)、界面交互部分
action
event
signal
slot
connect
5)、概念之间关系
QWidget 作为页面的主体，挂载layout(框架)，框架添加页面的组件，通过 action(动作，类似于点击)，event(事件)，signal(信号)，slot（信号槽），connect（动作绑定）产生交互
通过样式类，类似于 Icon(图标)，大小，颜色，字体等，修改界面的细节
widget 上需要有layout，layout可以继续添加widget，可以一直加下去" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c628e791e2c94dad4b6f4c5e95464eef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-17T16:04:32+08:00" />
<meta property="article:modified_time" content="2022-10-17T16:04:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python】pyqt6入门到入土系列，非常详细...</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>写在前面</h2> 
<p>最近真的是运气不好，国庆前一天，隔壁小区有人中招了，结果国庆出不了门，好不容易国庆结束了，准备上班，结果小区又有个叼毛中招了，搞得我直接国庆放了半个月，还只能在家过，没事干只能这里写写，那里弄弄，于是今天就把存货分享给大家了~</p> 
<blockquote> 
 <p>兄弟们学习python，有时候不知道怎么学，从哪里开始学。掌握了基本的一些语法或者做了两个案例后，不知道下一步怎么走，不知道如何去学习更加高深的知识。<br> 那么对于这些大兄弟们，我准备了大量的免费视频教程，PDF电子书籍，以及源代码！<br> 大家文末名片自取即可~</p> 
</blockquote> 
<h2><a id="PyQt6_PyQt6_8"></a>一、什么是PyQt6? 简单介绍一下PyQt6</h2> 
<h3><a id="1_9"></a>1、基础简介</h3> 
<p>PyQt6 Digia 公司的 Qt 程序的 Python 中间件。Qt库是最强大的GUI库之一。PyQt6的官网：www.riverbankcomputing.co.uk/news。PyQt6是由Riverbank Computing公司开发的</p> 
<p>PyQt6 是基于 Python 的一系列模块。它是一个多平台的工具包，可以在包括Unix、Windows和Mac OS在内的大部分主要操作系统上运行。PyQt6 有两个许可证，开发人员可以在 GPL 和商业许可之间进行选择。</p> 
<h3><a id="2_PyQt6_14"></a>2、安装 PyQt6</h3> 
<p>pip install PyQt6</p> 
<h3><a id="3PyQt6__16"></a>3、PyQt6 模块</h3> 
<p>PyQt6 类是由一系列模块组成的，包括如下的模块：</p> 
<ul><li>QtCore</li><li>QtGui</li><li>QtWidgets</li><li>QtDBus</li><li>QtNetwork</li><li>QtHelp</li><li>QtXml</li><li>QtSvg</li><li>QtSql</li><li>QtTest</li></ul> 
<p><strong>1)、 界面框架部分</strong></p> 
<p>主类<br> QLayout<br> 继承类<br> QGridLayout （网格布局）<br> QBoxLayout（简单的上下布局）<br> QStackedLayout （可切换widget的布局）<br> FlowLayout</p> 
<p><strong>2)、 界面组件部分（其实也是Widget类）</strong></p> 
<p>button<br> label<br> 等等</p> 
<p><strong>3)、 界面样式部分</strong><br> color<br> size<br> font<br> Icon</p> 
<p><strong>4)、界面交互部分</strong><br> action<br> event<br> signal<br> slot<br> connect</p> 
<p><strong>5)、概念之间关系</strong><br> QWidget 作为页面的主体，挂载layout(框架)，框架添加页面的组件，通过 action(动作，类似于点击)，event(事件)，signal(信号)，slot（信号槽），connect（动作绑定）产生交互<br> 通过样式类，类似于 Icon(图标)，大小，颜色，字体等，修改界面的细节<br> widget 上需要有layout，layout可以继续添加widget，可以一直加下去</p> 
<p><strong>6、学习文档</strong><br> 学习文档：参考<a href="https://zetcode.com/pyqt6/firstprograms/" rel="nofollow">First programs in PyQt6 - center window, tooltip, quit button, message box</a></p> 
<h2><a id="pyqt6_68"></a>二、编写一个简单的pyqt6程序</h2> 
<h3><a id="1_69"></a>1、简介</h3> 
<p>编写一个简单的pyqt6程序</p> 
<h3><a id="2_72"></a>2、知识点</h3> 
<ul><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="3_76"></a>3、实战</h3> 
<p><strong>1)、创建 python 文件</strong></p> 
<pre><code class="prism language-python"><span class="token comment">#引入类</span>
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token punctuation">(</span>
    QApplication<span class="token punctuation">,</span> QDialog<span class="token punctuation">,</span> QPushButton<span class="token punctuation">,</span> QHBoxLayout<span class="token punctuation">,</span> QMessageBox
<span class="token punctuation">)</span>
<span class="token keyword">import</span> sys
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
 
    window <span class="token operator">=</span> QDialog<span class="token punctuation">(</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token comment">#弹出窗口</span>
    <span class="token keyword">def</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        QMessageBox<span class="token punctuation">.</span>information<span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">"信息提示"</span><span class="token punctuation">,</span> <span class="token string">"你点击了我"</span><span class="token punctuation">)</span>
 
    hbox <span class="token operator">=</span> QHBoxLayout<span class="token punctuation">(</span><span class="token punctuation">)</span>
    button <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">"点击我"</span><span class="token punctuation">)</span>
    button<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>show_msg<span class="token punctuation">)</span>
 
    hbox<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>button<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>setLayout<span class="token punctuation">(</span>hbox<span class="token punctuation">)</span>
<span class="token comment">#展示窗口</span>
    window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>2)、运行结果</strong></p> 
<p><img src="https://images2.imgbox.com/c6/ba/lyVX38Vj_o.png" alt=""></p> 
<h2><a id="PyQt6_113"></a>三、PyQt6如创建菜单栏</h2> 
<h3><a id="1_115"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_120"></a>2、实战</h3> 
<p>菜单栏在GUI应用程序中很常见，它是位于各种菜单中的一组命令。(Mac OS 对菜单栏的处理是不同的，要得到类似的结果，我们可以添加下面这行: menubar.setNativeMenuBar(False)</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMainWindow<span class="token punctuation">,</span> QApplication
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QIcon<span class="token punctuation">,</span> QAction
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        exitAct <span class="token operator">=</span> QAction<span class="token punctuation">(</span>QIcon<span class="token punctuation">(</span><span class="token string">'exit.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&amp;Exit'</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        exitAct<span class="token punctuation">.</span>setShortcut<span class="token punctuation">(</span><span class="token string">'Ctrl+Q'</span><span class="token punctuation">)</span>
        exitAct<span class="token punctuation">.</span>setStatusTip<span class="token punctuation">(</span><span class="token string">'Exit application'</span><span class="token punctuation">)</span>
        exitAct<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>QApplication<span class="token punctuation">.</span>instance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quit<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>statusBar<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        menubar <span class="token operator">=</span> self<span class="token punctuation">.</span>menuBar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        fileMenu <span class="token operator">=</span> menubar<span class="token punctuation">.</span>addMenu<span class="token punctuation">(</span><span class="token string">'&amp;File'</span><span class="token punctuation">)</span>
        fileMenu<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>exitAct<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Simple menu'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>上门的示例中，创建了有一个菜单的菜单栏。这个菜单命令是终止应用，也绑定了快捷键 Ctrl+Q。示例中也创建了一个状态栏。</p> 
<pre><code class="prism language-python">exitAct <span class="token operator">=</span> QAction<span class="token punctuation">(</span>QIcon<span class="token punctuation">(</span><span class="token string">'exit.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&amp;Exit'</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
exitAct<span class="token punctuation">.</span>setShortcut<span class="token punctuation">(</span><span class="token string">'Ctrl+Q'</span><span class="token punctuation">)</span>
exitAct<span class="token punctuation">.</span>setStatusTip<span class="token punctuation">(</span><span class="token string">'Exit application'</span><span class="token punctuation">)</span>
</code></pre> 
<p>QAction 是行为抽象类，包括菜单栏，工具栏，或自定义键盘快捷方式。在上面的三行中，创建了一个带有特定图标和 ‘Exit’ 标签的行为。此外，还为该行为定义了一个快捷方式。第三行创建一个状态提示，当我们将鼠标指针悬停在菜单项上时，状态栏中就会显示这个提示。</p> 
<pre><code class="prism language-python">exitAct<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>QApplication<span class="token punctuation">.</span>instance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>quit<span class="token punctuation">)</span>
</code></pre> 
<p>当选择指定的行为时，触发了一个信号，这个信号连接了 QApplication 组件的退出操作，这会终止这个应用程序。</p> 
<pre><code class="prism language-python">menubar <span class="token operator">=</span> self<span class="token punctuation">.</span>menuBar<span class="token punctuation">(</span><span class="token punctuation">)</span>
fileMenu <span class="token operator">=</span> menubar<span class="token punctuation">.</span>addMenu<span class="token punctuation">(</span><span class="token string">'&amp;File'</span><span class="token punctuation">)</span>
fileMenu<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>exitAction<span class="token punctuation">)</span>
</code></pre> 
<p>menuBar 方法创建了一个菜单栏，然后使用 addMenu 创建一个文件菜单，使用 addAction 创建一个行为。</p> 
<h2><a id="PyQt6_190"></a>四、PyQt6创建一个状态栏</h2> 
<h3><a id="1_193"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_198"></a>2、实战</h3> 
<p>状态栏是显示状态信息的小部件。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMainWindow<span class="token punctuation">,</span> QApplication
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        self<span class="token punctuation">.</span>statusBar<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showMessage<span class="token punctuation">(</span><span class="token string">'Ready'</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Statusbar'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>使用 QMainWindow 创建状态栏</p> 
<p>self.statusBar().showMessage(‘Ready’)<br> 使用 QtGui.QMainWindow 方法创建状态栏，该方法的创建了一个状态栏，并返回statusbar对象，再调用 showMessage 方法在状态栏上显示一条消息。</p> 
<h2><a id="Python__PyQt6__240"></a>四、Python 中创建 PyQt6 的事件对象</h2> 
<h3><a id="1_242"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_247"></a>2、实战</h3> 
<p>事件对象是一个 Python object，包含了一系列描述这个事件的属性，具体内容要看触发的事件。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QWidget<span class="token punctuation">,</span> QApplication<span class="token punctuation">,</span> QGridLayout<span class="token punctuation">,</span> QLabel
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        grid <span class="token operator">=</span> QGridLayout<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        x <span class="token operator">=</span> <span class="token number">0</span>
        y <span class="token operator">=</span> <span class="token number">0</span>
 
        self<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'x: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">,  y: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">'</span></span>
 
        self<span class="token punctuation">.</span>label <span class="token operator">=</span> QLabel<span class="token punctuation">(</span>self<span class="token punctuation">.</span>text<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        grid<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>label<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Qt<span class="token punctuation">.</span>Alignment<span class="token punctuation">.</span>AlignTop<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setMouseTracking<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setLayout<span class="token punctuation">(</span>grid<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Event object'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>x<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
        text <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'x: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">,  y: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">'</span></span>
        self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>本例中，在标签组件里，展示了鼠标的坐标。</p> 
<pre><code class="prism language-python">self<span class="token punctuation">.</span>setMouseTracking<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>鼠标跟踪默认是关闭的，鼠标移动时，组件只能在鼠标按下的时候接收到事件。开启鼠标跟踪，只移动鼠标不按下鼠标按钮，也能接收到事件。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>x<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>e 是事件对象，它包含了事件触发时候的数据。通过 position().x() 和 e.position().y() 方法，能获取到鼠标的坐标值。</p> 
<pre><code class="prism language-python">self<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'x: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>x<span class="token punctuation">}</span></span><span class="token string">,  y: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>y<span class="token punctuation">}</span></span><span class="token string">'</span></span>
self<span class="token punctuation">.</span>label <span class="token operator">=</span> QLabel<span class="token punctuation">(</span>self<span class="token punctuation">.</span>text<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
</code></pre> 
<p>坐标值 x 和 y 显示在 QLabel 组件里。</p> 
<h2><a id="Python__PyQt6_329"></a>五、Python 中的 PyQt6事件触发者</h2> 
<h3><a id="1_331"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_336"></a>2、实战</h3> 
<p>某些时候，需要知道事件的触发者是谁，PyQt6 有获取事件触发者的方法。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMainWindow<span class="token punctuation">,</span> QPushButton<span class="token punctuation">,</span> QApplication
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        btn1 <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">"Button 1"</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        btn1<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
 
        btn2 <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">"Button 2"</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        btn2<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
 
        btn1<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>buttonClicked<span class="token punctuation">)</span>
        btn2<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>buttonClicked<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>statusBar<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Event sender'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">buttonClicked</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        sender <span class="token operator">=</span> self<span class="token punctuation">.</span>sender<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        msg <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>sender<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> was pressed'</span></span>
        self<span class="token punctuation">.</span>statusBar<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showMessage<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>本例中有两个按钮。 buttonClicked 调用触发者方法确定了是哪个按钮触发的事件。</p> 
<pre><code class="prism language-python">btn1<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>buttonClicked<span class="token punctuation">)</span>
btn2<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>buttonClicked<span class="token punctuation">)</span>
</code></pre> 
<p>两个按钮绑定了同一个插槽。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">buttonClicked</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    sender <span class="token operator">=</span> self<span class="token punctuation">.</span>sender<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    msg <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>sender<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> was pressed'</span></span>
    self<span class="token punctuation">.</span>statusBar<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>showMessage<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
</code></pre> 
<p>在应用的状态栏里，显示了是哪个按钮被按下。</p> 
<h2><a id="Python__PyQt6__409"></a>六、Python 中 PyQt6 触发信号</h2> 
<h3><a id="1__411"></a>1 、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_416"></a>2、实战</h3> 
<p>QObject 可以主动触发信号。下面的示例显示了如果触发自定义信号。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> pyqtSignal<span class="token punctuation">,</span> QObject
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QMainWindow<span class="token punctuation">,</span> QApplication
 
 
<span class="token keyword">class</span> <span class="token class-name">Communicate</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    closeApp <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        self<span class="token punctuation">.</span>c <span class="token operator">=</span> Communicate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>c<span class="token punctuation">.</span>closeApp<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>close<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Emit signal'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        self<span class="token punctuation">.</span>c<span class="token punctuation">.</span>closeApp<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>创建了一个叫 closeApp 的信号，在鼠标按下的时候触发，和关闭插槽 QMainWindow 绑定。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Communicate</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    closeApp <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>外部 Communicate 类的属性 pyqtSignal 创建信号。</p> 
<pre><code class="prism language-python">self<span class="token punctuation">.</span>c <span class="token operator">=</span> Communicate<span class="token punctuation">(</span><span class="token punctuation">)</span>
self<span class="token punctuation">.</span>c<span class="token punctuation">.</span>closeApp<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>close<span class="token punctuation">)</span>
</code></pre> 
<p>自定义信号 closeApp 绑定到 QMainWindow 的关闭插槽上。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    self<span class="token punctuation">.</span>c<span class="token punctuation">.</span>closeApp<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在窗口上点击鼠标按钮的时候，触发 closeApp 信号，程序终止。</p> 
<h2><a id="Python__PyQt6__490"></a>七、Python 中 PyQt6 的拖拽操作</h2> 
<h3><a id="1_492"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_497"></a>2、实战</h3> 
<p>QDrag<br> QDrag 提供对基于 MIME 的拖放数据传输的支持。它处理拖放操作的大部分细节。传输的数据包含在 QMimeData 对象中</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
 
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> QWidget<span class="token punctuation">,</span>
        QLineEdit<span class="token punctuation">,</span> QApplication<span class="token punctuation">)</span>
 
 
<span class="token keyword">class</span> <span class="token class-name">Button</span><span class="token punctuation">(</span>QPushButton<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setAcceptDrops<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">dragEnterEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        <span class="token keyword">if</span> e<span class="token punctuation">.</span>mimeData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hasFormat<span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            e<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            e<span class="token punctuation">.</span>ignore<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">dropEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        self<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>e<span class="token punctuation">.</span>mimeData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        edit <span class="token operator">=</span> QLineEdit<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        edit<span class="token punctuation">.</span>setDragEnabled<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        edit<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span>
 
        button <span class="token operator">=</span> Button<span class="token punctuation">(</span><span class="token string">"Button"</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        button<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Simple drag and drop'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ex<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>示例展示了简单的拖拽操作。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Button</span><span class="token punctuation">(</span>QPushButton<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
</code></pre> 
<pre><code>    ...
</code></pre> 
<p>为了完成把文本拖到 QPushButton 部件上，我们必须实现某些方法才可以，所以这里创建了一个继承自 QPushButton 的 Button 类。</p> 
<pre><code class="prism language-python">self<span class="token punctuation">.</span>setAcceptDrops<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>使用 setAcceptDrops 方法处理部件的释放事件。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">dragEnterEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">if</span> e<span class="token punctuation">.</span>mimeData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hasFormat<span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        e<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        e<span class="token punctuation">.</span>ignore<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>dragEnterEvent 方法，定义了我们接受的数据类型————纯文本。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">dropEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    self<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>e<span class="token punctuation">.</span>mimeData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>dropEvent 方法，处理释放事件————修改按钮组件的文本。</p> 
<pre><code class="prism language-python">edit <span class="token operator">=</span> QLineEdit<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
edit<span class="token punctuation">.</span>setDragEnabled<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>QLineEdit 部件支持拖放操作，这里只需要调用 setDragEnabled 方法激活它。</p> 
<h2><a id="Python__PyQt6__607"></a>八、Python 中 PyQt6 的拖放按钮组件</h2> 
<h3><a id="1_609"></a>1、主要知识点</h3> 
<ul><li>文件读写</li><li>基础语法</li><li>PyQt6</li><li>sys</li></ul> 
<h3><a id="2_614"></a>2、菜鸟实战</h3> 
<p>创建文件！</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
 
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt<span class="token punctuation">,</span> QMimeData
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QDrag
<span class="token keyword">from</span> PyQt6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QPushButton<span class="token punctuation">,</span> QWidget<span class="token punctuation">,</span> QApplication
 
 
<span class="token keyword">class</span> <span class="token class-name">Button</span><span class="token punctuation">(</span>QPushButton<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        <span class="token keyword">if</span> e<span class="token punctuation">.</span>buttons<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> Qt<span class="token punctuation">.</span>MouseButtons<span class="token punctuation">.</span>RightButton<span class="token punctuation">:</span>
            <span class="token keyword">return</span>
 
        mimeData <span class="token operator">=</span> QMimeData<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        drag <span class="token operator">=</span> QDrag<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        drag<span class="token punctuation">.</span>setMimeData<span class="token punctuation">(</span>mimeData<span class="token punctuation">)</span>
 
        drag<span class="token punctuation">.</span>setHotSpot<span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toPoint<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>topLeft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
        dropAction <span class="token operator">=</span> drag<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>DropActions<span class="token punctuation">.</span>MoveAction<span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mousePressEvent<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
 
        <span class="token keyword">if</span> e<span class="token punctuation">.</span>button<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token punctuation">.</span>MouseButtons<span class="token punctuation">.</span>LeftButton<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'press'</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">class</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>initUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">initUI</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        self<span class="token punctuation">.</span>setAcceptDrops<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>button <span class="token operator">=</span> Button<span class="token punctuation">(</span><span class="token string">'Button'</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span>
 
        self<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">'Click or Move'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">550</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">dragEnterEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        e<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
    <span class="token keyword">def</span> <span class="token function">dropEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        position <span class="token operator">=</span> e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button<span class="token punctuation">.</span>move<span class="token punctuation">(</span>position<span class="token punctuation">.</span>toPoint<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
        e<span class="token punctuation">.</span>setDropAction<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>DropActions<span class="token punctuation">.</span>MoveAction<span class="token punctuation">)</span>
        e<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    ex <span class="token operator">=</span> Example<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ex<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>本例中，窗口里有个 QPushButton，鼠标左键点击它，会在控制台打印 'press’消息，鼠标右键可以点击拖拽它。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Button</span><span class="token punctuation">(</span>QPushButton<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>title<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
</code></pre> 
<p>基于 QPushButton 创建了一个 Button 类，并实现了两个 QPushButton 方法：mouseMoveEvent 和 mousePressEvent。mouseMoveEvent 方法是处理拖放操作开始的地方。</p> 
<pre><code class="prism language-python"><span class="token keyword">if</span> e<span class="token punctuation">.</span>buttons<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> Qt<span class="token punctuation">.</span>MouseButtons<span class="token punctuation">.</span>RightButton<span class="token punctuation">:</span>
    <span class="token keyword">return</span>
</code></pre> 
<p>定义鼠标右键为触发拖拽操作的按钮，鼠标左键只会触发点击事件。</p> 
<pre><code class="prism language-python">drag <span class="token operator">=</span> QDrag<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
drag<span class="token punctuation">.</span>setMimeData<span class="token punctuation">(</span>mimeData<span class="token punctuation">)</span>
 
drag<span class="token punctuation">.</span>setHotSpot<span class="token punctuation">(</span>e<span class="token punctuation">.</span>position<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toPoint<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>topLeft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>创建 QDrag 对象，以提供基于 MIME 数据类型的拖拽操作。</p> 
<pre><code class="prism language-python">dropAction <span class="token operator">=</span> drag<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>DropActions<span class="token punctuation">.</span>MoveAction<span class="token punctuation">)</span>
</code></pre> 
<p>drag 对象的 exec 方法执行拖拽操作。</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
    <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mousePressEvent<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
 
    <span class="token keyword">if</span> e<span class="token punctuation">.</span>button<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token punctuation">.</span>MouseButtons<span class="token punctuation">.</span>LeftButton<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'press'</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果鼠标左键点击按钮，会在控制台打印 ‘press’ 消息，注意，这里在父级上也调用了 mousePressEvent 方法，不然按钮按下的动作不会展现出来。</p> 
<pre><code class="prism language-python">position <span class="token operator">=</span> e<span class="token punctuation">.</span>pos<span class="token punctuation">(</span><span class="token punctuation">)</span> self<span class="token punctuation">.</span>button<span class="token punctuation">.</span>move<span class="token punctuation">(</span>position<span class="token punctuation">)</span> 
</code></pre> 
<p>dropEvent 方法处理鼠标释放按钮后的操作————把组件的位置修改为鼠标当前坐标。</p> 
<pre><code class="prism language-python">e<span class="token punctuation">.</span>setDropAction<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>MoveAction<span class="token punctuation">)</span> e<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre> 
<p>使用 setDropAction 指定拖放操作的类型————鼠标移动。</p> 
<p>兄弟们，今天的分享就暂时到这里，下次见！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c60b87a5d9ae6eea7d72b9a1a0ecd30e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">习题9-5 通讯录排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5a19e6543e5f57dc3293bdfd7e8614b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MODIFY 子句</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>