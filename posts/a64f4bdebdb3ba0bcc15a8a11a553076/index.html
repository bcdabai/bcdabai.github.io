<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL十部曲之四：MySQL中的数据类型 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL十部曲之四：MySQL中的数据类型" />
<meta property="og:description" content="文章目录 前言概述数字类型数字类型语法数字类型字面量十六进制字面量位字面量布尔字面量 数字类型的属性超出范围和溢出处理 时间和日期类型时间和日期类型语法DATE、DATETIME和TIMESTAMP的异同TIMESTAMP和DATETIME的自动初始化和更新时间和日期字面量 字符串类型字符串类型语法CHAR和VARCHAR的异同BINARY和VARBINARY的异同BLOB和TEXT的异同ENUMSET字符串字面量 JSON数据类型空间数据类型数据类型的默认值MySQL 8.0.13的显式默认值处理MySQL 8.0.13之前的显式默认处理隐式默认值处理 NULL 前言 本文翻译自官方文档。
概述 MySQL支持以下几种SQL数据类型：
数字类型日期和时间类型字符串（字符和字节）类型空间类型JSON数据类型 本章提供了对每个类别中类型的属性的概述和更详细的描述，数据类型描述使用以下约定：
对于整数类型，M表示最大显示宽度。对于浮点型和定点型，M是可以存储的总位数。对于字符串类型，M是最大长度。M的最大允许值取决于数据类型。D适用于浮点和定点类型，表示小数点后的位数。最大值为30，但不大于M−2。fsp适用于TIME、DATETIME和TIMESTAMP类型，表示小数秒精度，即秒的小数部分的小数点后面的位数。如果给定fsp值，则必须在0到6的范围内。值为0表示没有小数部分。如果省略，默认精度为0。方括号表示类型定义的可选部分。 数字类型 MySQL支持所有标准的SQL数字数据类型。这些类型包括精确数字数据类型（INTEGER、SMALLINT、DECIMAL和NUMERIC），以及近似数字数据类型（FLOAT、REAL和DOUBLE PRECISION）。关键字INT是INTEGER的同义词，关键字DEC和FIXED是DECIMAL的同义词。MySQL将DOUBLE视为DOUBLE PRECISION（一个非标准扩展）的同义词。MySQL也将REAL视为DOUBLE PRECISION的同义词，除非启用了REAL_AS_FLOAT SQL模式。BIT数据类型存储位值，支持MyISAM、MEMORY、InnoDB和NDB表。
数字类型语法 对于整数数据类型，M表示最小显示宽度。最大显示宽度为255。显示宽度与类型可以存储的值范围无关。对于浮点和定点数据类型，M是可以存储的总位数。整数数据类型允许UNSIGNED属性和SIGNED属性，其中SIGNED属性是默认的。
BIT[(M)]用于存储位值。M表示每个值的位数，取值范围为1 ~ 64。如果省略M，则默认为1。TINYINT[(M)] [UNSIGNED]：一个非常小的整数。取值范围为-128 ~ 127。无符号范围是0到255。BOOL, BOOLEAN：这些类型是TINYINT(1)的同义词。值为零被认为是false。非零值被认为是true： mysql&gt; SELECT IF(0, &#39;true&#39;, &#39;false&#39;); &#43;------------------------&#43; | IF(0, &#39;true&#39;, &#39;false&#39;) | &#43;------------------------&#43; | false | &#43;------------------------&#43; mysql&gt; SELECT IF(1, &#39;true&#39;, &#39;false&#39;); &#43;------------------------&#43; | IF(1, &#39;true&#39;, &#39;false&#39;) | &#43;------------------------&#43; | true | &#43;------------------------&#43; mysql&gt; SELECT IF(2, &#39;true&#39;, &#39;false&#39;); &#43;------------------------&#43; | IF(2, &#39;true&#39;, &#39;false&#39;) | &#43;------------------------&#43; | true | &#43;------------------------&#43; 然而，值TRUE和FALSE分别只是1和0的别名，如下所示：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a64f4bdebdb3ba0bcc15a8a11a553076/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-26T20:33:57+08:00" />
<meta property="article:modified_time" content="2024-01-26T20:33:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL十部曲之四：MySQL中的数据类型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#_3" rel="nofollow">概述</a></li><li><a href="#_16" rel="nofollow">数字类型</a></li><li><ul><li><a href="#_19" rel="nofollow">数字类型语法</a></li><li><a href="#_91" rel="nofollow">数字类型字面量</a></li><li><ul><li><a href="#_98" rel="nofollow">十六进制字面量</a></li><li><a href="#_155" rel="nofollow">位字面量</a></li><li><a href="#_203" rel="nofollow">布尔字面量</a></li></ul> 
   </li><li><a href="#_210" rel="nofollow">数字类型的属性</a></li><li><a href="#_227" rel="nofollow">超出范围和溢出处理</a></li></ul> 
  </li><li><a href="#_234" rel="nofollow">时间和日期类型</a></li><li><ul><li><a href="#_243" rel="nofollow">时间和日期类型语法</a></li><li><a href="#DATEDATETIMETIMESTAMP_263" rel="nofollow">DATE、DATETIME和TIMESTAMP的异同</a></li><li><a href="#TIMESTAMPDATETIME_278" rel="nofollow">TIMESTAMP和DATETIME的自动初始化和更新</a></li><li><a href="#_291" rel="nofollow">时间和日期字面量</a></li></ul> 
  </li><li><a href="#_335" rel="nofollow">字符串类型</a></li><li><ul><li><a href="#_337" rel="nofollow">字符串类型语法</a></li><li><a href="#CHARVARCHAR_382" rel="nofollow">CHAR和VARCHAR的异同</a></li><li><a href="#BINARYVARBINARY_395" rel="nofollow">BINARY和VARBINARY的异同</a></li><li><a href="#BLOBTEXT_427" rel="nofollow">BLOB和TEXT的异同</a></li><li><a href="#ENUM_445" rel="nofollow">ENUM</a></li><li><a href="#SET_523" rel="nofollow">SET</a></li><li><a href="#_625" rel="nofollow">字符串字面量</a></li></ul> 
  </li><li><a href="#JSON_665" rel="nofollow">JSON数据类型</a></li><li><a href="#_667" rel="nofollow">空间数据类型</a></li><li><a href="#_669" rel="nofollow">数据类型的默认值</a></li><li><ul><li><a href="#MySQL_8013_680" rel="nofollow">MySQL 8.0.13的显式默认值处理</a></li><li><a href="#MySQL_8013_735" rel="nofollow">MySQL 8.0.13之前的显式默认处理</a></li><li><a href="#_741" rel="nofollow">隐式默认值处理</a></li></ul> 
  </li><li><a href="#NULL_752" rel="nofollow">NULL</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>本文翻译自官方文档。</p> 
<h2><a id="_3"></a>概述</h2> 
<p>MySQL支持以下几种SQL数据类型：</p> 
<ul><li>数字类型</li><li>日期和时间类型</li><li>字符串（字符和字节）类型</li><li>空间类型</li><li>JSON数据类型</li></ul> 
<p>本章提供了对每个类别中类型的属性的概述和更详细的描述，数据类型描述使用以下约定：</p> 
<ul><li>对于整数类型，M表示最大显示宽度。对于浮点型和定点型，M是可以存储的总位数。对于字符串类型，M是最大长度。M的最大允许值取决于数据类型。</li><li>D适用于浮点和定点类型，表示小数点后的位数。最大值为30，但不大于M−2。</li><li>fsp适用于<code>TIME</code>、<code>DATETIME</code>和<code>TIMESTAMP</code>类型，表示小数秒精度，即秒的小数部分的小数点后面的位数。如果给定fsp值，则必须在0到6的范围内。值为0表示没有小数部分。如果省略，默认精度为0。</li><li>方括号表示类型定义的可选部分。</li></ul> 
<h2><a id="_16"></a>数字类型</h2> 
<p>MySQL支持所有标准的SQL数字数据类型。这些类型包括精确数字数据类型（<code>INTEGER</code>、<code>SMALLINT</code>、<code>DECIMAL</code>和<code>NUMERIC</code>），以及近似数字数据类型（<code>FLOAT</code>、<code>REAL</code>和<code>DOUBLE</code> <code>PRECISION</code>）。关键字<code>INT</code>是<code>INTEGER</code>的同义词，关键字<code>DEC</code>和<code>FIXED</code>是<code>DECIMAL</code>的同义词。MySQL将<code>DOUBLE</code>视为<code>DOUBLE PRECISION</code>（一个非标准扩展）的同义词。MySQL也将<code>REAL</code>视为<code>DOUBLE PRECISION</code>的同义词，除非启用了<code>REAL_AS_FLOAT</code> SQL模式。<code>BIT</code>数据类型存储位值，支持MyISAM、MEMORY、InnoDB和NDB表。</p> 
<h3><a id="_19"></a>数字类型语法</h3> 
<p>对于整数数据类型，M表示最小显示宽度。最大显示宽度为255。显示宽度与类型可以存储的值范围无关。对于浮点和定点数据类型，M是可以存储的总位数。整数数据类型允许<code>UNSIGNED</code>属性和<code>SIGNED</code>属性，其中<code>SIGNED</code>属性是默认的。</p> 
<ul><li><code>BIT[(M)]</code>用于存储位值。M表示每个值的位数，取值范围为1 ~ 64。如果省略M，则默认为1。</li><li><code>TINYINT[(M)] [UNSIGNED]</code>：一个非常小的整数。取值范围为-128 ~ 127。无符号范围是0到255。</li><li><code>BOOL, BOOLEAN</code>：这些类型是<code>TINYINT(1)</code>的同义词。值为零被认为是<code>false</code>。非零值被认为是<code>true</code>：</li></ul> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">false</span>                  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">true</span>                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">true</span>                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
</code></pre> 
<p>然而，值<code>TRUE</code>和<code>FALSE</code>分别只是1和0的别名，如下所示：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">true</span>                           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">true</span>                          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">false</span>                         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------+</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>
<span class="token operator">|</span> <span class="token boolean">false</span>                          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------+</span>
</code></pre> 
<ul><li><code>SMALLINT[(M)] [UNSIGNED]</code>：一个小整数。带符号的范围是-32768到32767。无符号取值范围是0 ~ 65535。</li><li><code>MEDIUMINT[(M)] [UNSIGNED]</code>：中等大小的整数。带符号的范围是-8388608 ~ 8388607。无符号范围是0到16777215。</li><li><code>INT[(M)] [UNSIGNED]</code>：正常大小的整数。带符号的范围是-2147483648 ~ 2147483647。无符号范围是0 ~ 4294967295。</li><li><code>BIGINT[(M)] [UNSIGNED]</code>：大整数。符号范围为-9223372036854775808 ~ 9223372036854775807。无符号取值范围是0 ~ 18446744073709551615。</li><li><code>DECIMAL[(M[,D])]</code>：一个紧凑的精确定点数字。</li><li><code>FLOAT</code>：单精度浮点数，MySQL为单精度值使用4个字节，取值范围为<code>-3.402823466E+38 ~ - 1.175494351e - 38</code>、<code>0</code>和<code>1.175494351E-38 ~ 3.402823466E+38</code>。</li><li><code>DOUBLE</code>：双精度浮点数，MySQL为双精度值使用8个字节。取值范围为-1.7976931348623157E+308 ~ - 2.2250738585072014e - 308,0和2.2250738585072014E-308 ~ 1.7976931348623157E+308。</li></ul> 
<p>MySQL中所有算术都是使用有符号的<code>BIGINT</code>或<code>DOUBLE</code>值完成。</p> 
<h3><a id="_91"></a>数字类型字面量</h3> 
<p>数字字面值包括精确值（整数和<code>DECIMAL</code>）字面量和近似值（浮点）字面量。</p> 
<ul><li>整数用数字序列表示。数字可能包括<code>.</code>作为小数分隔符。数字前面可以加<code>-</code>或<code>+</code>，分别表示负值或正值。用尾数和指数表示的科学记数法中的数字是近似值数字。</li><li>精确值数字字面值有整数部分或小数部分，或两者兼而有之。</li><li>近似值数值在科学记数法中用尾数和指数表示。</li></ul> 
<p>两个看起来相似的数字可能会被区别对待。例如，2.34是一个精确值，而2.34E0是一个近似值。</p> 
<h4><a id="_98"></a>十六进制字面量</h4> 
<p>十六进制文字值使用<code>X'val'</code>表示法写入，其中<code>val</code>包含十六进制数字。数字和任何前导<code>X</code>的字母大小写不重要。</p> 
<pre><code class="prism language-sql">X<span class="token string">'01AF'</span>
X<span class="token string">'01af'</span>
x<span class="token string">'01AF'</span>
x<span class="token string">'01af'</span>
</code></pre> 
<p>使用<code>X'val'</code>表示法写入的值必须包含偶数位，否则会出现语法错误。要纠正这个问题，在值中填充一个前导零。</p> 
<p>默认情况下，十六进制字面值是一个二进制字符串，其中每对十六进制数字代表一个字符。</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> X<span class="token string">'4D7953514C'</span><span class="token punctuation">,</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>X<span class="token string">'4D7953514C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+------------------------+</span>
<span class="token operator">|</span> X<span class="token string">'4D7953514C'</span> <span class="token operator">|</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>X<span class="token string">'4D7953514C'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+------------------------+</span>
<span class="token operator">|</span> MySQL         <span class="token operator">|</span> <span class="token keyword">binary</span>                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+------------------------+</span>
</code></pre> 
<p>十六进制字面值可以有一个可选的字符集引入器和<code>COLLATE</code>子句，将其指定为使用特定字符集和排序规则的字符串：</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>_charset_name<span class="token punctuation">]</span> X<span class="token string">'val'</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> collation_name<span class="token punctuation">]</span>
</code></pre> 
<p>在数字上下文中，MySQL将十六进制字面值视为<code>BIGINT UNSIGNED</code>（64位无符号整数）。要确保十六进制字面值的数字处理，请在数字上下文中使用它。实现此目的的方法包括添加<code>0</code>或使用<code>CAST(… AS UNSIGNED)</code>。</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v1</span> <span class="token operator">=</span> X<span class="token string">'41'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v2</span> <span class="token operator">=</span> X<span class="token string">'41'</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v3</span> <span class="token operator">=</span> CAST<span class="token punctuation">(</span>X<span class="token string">'41'</span> <span class="token keyword">AS</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token variable">@v1</span><span class="token punctuation">,</span> <span class="token variable">@v2</span><span class="token punctuation">,</span> <span class="token variable">@v3</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
<span class="token operator">|</span> <span class="token variable">@v1</span>  <span class="token operator">|</span> <span class="token variable">@v2</span>  <span class="token operator">|</span> <span class="token variable">@v3</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
<span class="token operator">|</span> A    <span class="token operator">|</span>   <span class="token number">65</span> <span class="token operator">|</span>   <span class="token number">65</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
</code></pre> 
<p>空的十六进制值<code>X' '</code>计算为零长度的二进制字符串。转换成数字后，结果为<code>0</code>：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>X<span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LENGTH<span class="token punctuation">(</span>X<span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+-------------+</span>
<span class="token operator">|</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>X<span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">|</span> LENGTH<span class="token punctuation">(</span>X<span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+-------------+</span>
<span class="token operator">|</span> <span class="token keyword">binary</span>       <span class="token operator">|</span>           <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+-------------+</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> X<span class="token string">''</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span> X<span class="token string">''</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span>     <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
</code></pre> 
<h4><a id="_155"></a>位字面量</h4> 
<p>位值文字使用<code>b'val'</code>表示法书写。Val是一个用0和1写成的二进制值。以字母b开头的字母不重要。</p> 
<pre><code class="prism language-sql">b<span class="token string">'01'</span>
B<span class="token string">'01'</span>
</code></pre> 
<p>默认情况下，位值字面值是一个二进制字符串：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> b<span class="token string">'1000001'</span><span class="token punctuation">,</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>b<span class="token string">'1000001'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+</span>
<span class="token operator">|</span> b<span class="token string">'1000001'</span> <span class="token operator">|</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>b<span class="token string">'1000001'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+</span>
<span class="token operator">|</span> A          <span class="token operator">|</span> <span class="token keyword">binary</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+</span>
</code></pre> 
<p>位值字面值可以有一个可选的字符集引入器和COLLATE子句，将其指定为使用特定字符集和排序规则的字符串：</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>_charset_name<span class="token punctuation">]</span> b<span class="token string">'val'</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> collation_name<span class="token punctuation">]</span>
</code></pre> 
<p>在数字上下文中，MySQL将位字面值视为整数。要确保位字面值的数字处理，请在数字上下文中使用它。实现此目的的方法包括添加<code>0</code>或使用<code>CAST(…unsigned)</code>。</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v1</span> <span class="token operator">=</span> b<span class="token string">'1100001'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v2</span> <span class="token operator">=</span> b<span class="token string">'1100001'</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v3</span> <span class="token operator">=</span> CAST<span class="token punctuation">(</span>b<span class="token string">'1100001'</span> <span class="token keyword">AS</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token variable">@v1</span><span class="token punctuation">,</span> <span class="token variable">@v2</span><span class="token punctuation">,</span> <span class="token variable">@v3</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
<span class="token operator">|</span> <span class="token variable">@v1</span>  <span class="token operator">|</span> <span class="token variable">@v2</span>  <span class="token operator">|</span> <span class="token variable">@v3</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
<span class="token operator">|</span> a    <span class="token operator">|</span>   <span class="token number">97</span> <span class="token operator">|</span>   <span class="token number">97</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+------+</span>
</code></pre> 
<p>对于位字面值，位操作被认为是数字上下文，但在MySQL 8.0及更高版本中，位操作允许数字或二进制字符串参数。要显式地为位字面值指定二进制字符串上下文，请为至少一个参数使用<code>_binary</code>引入器：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v1</span> <span class="token operator">=</span> b<span class="token string">'000010101'</span> <span class="token operator">|</span> b<span class="token string">'000101010'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@v2</span> <span class="token operator">=</span> _binary b<span class="token string">'000010101'</span> <span class="token operator">|</span> _binary b<span class="token string">'000101010'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> HEX<span class="token punctuation">(</span><span class="token variable">@v1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> HEX<span class="token punctuation">(</span><span class="token variable">@v2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+----------+</span>
<span class="token operator">|</span> HEX<span class="token punctuation">(</span><span class="token variable">@v1</span><span class="token punctuation">)</span> <span class="token operator">|</span> HEX<span class="token punctuation">(</span><span class="token variable">@v2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+----------+</span>
<span class="token operator">|</span> <span class="token number">3</span>F       <span class="token operator">|</span> <span class="token number">003</span>F     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+----------+</span>
</code></pre> 
<p>对于这两个位操作，显示的结果看起来很相似，但是没有<code>_binary</code>的结果是一个<code>BIGINT</code>值，而有<code>_binary</code>的结果是一个二进制字符串。由于结果类型不同，因此显示的值不同:数值结果不显示高阶0。</p> 
<h4><a id="_203"></a>布尔字面量</h4> 
<p>常量<code>TRUE</code>和<code>FALSE</code>的值分别为1和0。常数名可以用任何字母形式书写。</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
</code></pre> 
<h3><a id="_210"></a>数字类型的属性</h3> 
<p>MySQL支持一个扩展，可以在类型的基本关键字后面的括号中选择性地指定整数数据类型的显示宽度。例如，<code>INT(4)</code>指定一个显示宽度为四位数的<code>INT</code>。</p> 
<p>显示宽度不约束可存储在列中的值的范围。它也不会阻止比列显示宽度宽的值被正确显示。例如，指定为<code>SMALLINT(3)</code>的列具有通常的<code>SMALLINT</code>范围-32768到32767，并且三位数允许的范围之外的值将使用三个以上的数字完整显示。</p> 
<p>所有的整数类型都可以有一个可选的<code>UNSIGNED</code>属性。无符号类型可用于仅允许在列中使用非负数，或者当需要为列设置更大的上数值范围时。例如，如果一个<code>INT</code>列是<code>UNSIGNED</code>，列的范围的大小是相同的，但是它的端点向上移动，从-2147483648和2147483647到0和4294967295。</p> 
<p>整数类型可以具有<code>AUTO_INCREMENT</code>属性。在<code>AUTO_INCREMENT</code>列中插入<code>NULL</code>值时，该列将被设置为下一个序列值。通常是<code>value+1</code>，其中<code>value</code>是表中当前列的最大值。(<code>AUTO_INCREMENT</code>序列以1开头。)</p> 
<p>将0存储到<code>AUTO_INCREMENT</code>列中与存储<code>NULL</code>具有相同的效果，除非启用了<code>NO_AUTO_VALUE_ON_ZERO</code> SQL模式。</p> 
<p>插入<code>NULL</code>来生成<code>AUTO_INCREMENT</code>值需要将列声明为<code>NOT NULL</code>。如果列声明为<code>NULL</code>，则插入<code>NULL</code>存储<code>NULL</code>。当您在<code>AUTO_INCREMENT</code>列中插入任何其他值时，该列将被设置为该值并重置序列，以便下一个自动生成的值按照插入值的顺序出现。</p> 
<p><code>AUTO_INCREMENT</code>列不支持负值。</p> 
<p><code>CHECK</code>约束不能引用具有<code>AUTO_INCREMENT</code>属性的列，也不能将<code>AUTO_INCREMENT</code>属性添加到<code>CHECK</code>约束中使用的现有列中。</p> 
<h3><a id="_227"></a>超出范围和溢出处理</h3> 
<p>当MySQL在列数据类型允许范围之外的数值列中存储值时，结果取决于当时有效的SQL模式：</p> 
<ul><li>如果启用严格SQL模式，根据SQL标准，MySQL会拒绝超出范围的值，并给出错误，插入失败。</li><li>如果没有启用限制模式，MySQL将值剪辑到列数据类型范围的适当端点，并存储结果值。</li></ul> 
<h2><a id="_234"></a>时间和日期类型</h2> 
<p>表示时间值的日期和时间数据类型是<code>DATE</code>、<code>TIME</code>、<code>DATETIME</code>、<code>TIMESTAMP</code>和<code>YEAR</code>。每个时间类型都有一个有效值范围，以及一个零值，当你指定一个MySQL无法表示的无效值时，可能会使用这个零值代替。MySQL允许您存储一个零值作为虚拟日期。在某些情况下，这比使用<code>NULL</code>值更方便，并且使用更少的数据和索引空间。要禁用零值，请启用<code>NO_ZERO_DATE</code>模式。下表显示了每种类型的零值的格式。零值是特殊的，但是您可以使用表中显示的值显式地存储或引用它们。您也可以使用值<code>'0'</code>或<code>0</code>来完成此操作。</p> 
<table><thead><tr><th>类型</th><th>零值</th></tr></thead><tbody><tr><td>DATE</td><td>‘0000-00-00’</td></tr><tr><td>TIME</td><td>‘00:00:00’</td></tr><tr><td>DATETIME</td><td>‘0000-00-00 00:00:00’</td></tr><tr><td>TIMESTAMP</td><td>‘0000-00-00 00:00:00’</td></tr><tr><td>TEAR</td><td>0000</td></tr></tbody></table> 
<h3><a id="_243"></a>时间和日期类型语法</h3> 
<p>MySQL允许为<code>TIME</code>、<code>DATETIME</code>和<code>TIMESTAMP</code>值设置小数秒，精度可达微秒。要定义包含小数秒部分的列，请使用语法<code>type_name(fsp)</code>，其中<code>type_name</code>是类型名，fsp是小数秒精度。例如：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t1 <span class="token punctuation">(</span>t <span class="token keyword">TIME</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dt <span class="token keyword">DATETIME</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ts <span class="token keyword">TIMESTAMP</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>如果给定fsp值，则必须在0到6的范围内。值为0表示没有小数部分。如果省略，默认精度为0。</p> 
<ul><li><code>DATE</code></li><li><code>DATETIME[(fsp)]</code></li><li><code>TIMESTAMP[(fsp)]</code></li><li><code>TIME[(fsp)]</code></li><li><code>YEAR</code></li></ul> 
<p><code>SUM()</code>和<code>AVG()</code>聚合函数不能处理时间值。(它们将值转换为数字，丢掉第一个非数字字符之后的所有内容。)要解决此问题，请转换为数字单位，执行聚合操作，然后再转换回临时值。例子：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> SEC_TO_TIME<span class="token punctuation">(</span><span class="token function">SUM</span><span class="token punctuation">(</span>TIME_TO_SEC<span class="token punctuation">(</span>time_col<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> tbl_name<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> FROM_DAYS<span class="token punctuation">(</span><span class="token function">SUM</span><span class="token punctuation">(</span>TO_DAYS<span class="token punctuation">(</span>date_col<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> tbl_name<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="DATEDATETIMETIMESTAMP_263"></a>DATE、DATETIME和TIMESTAMP的异同</h3> 
<p><code>DATE</code>、<code>DATETIME</code>和<code>TIMESTAMP</code>类型是相关的。本节描述它们的特点、相似之处和不同之处。</p> 
<ul><li><code>DATE</code>类型用于有日期部分但没有时间部分的值。 
  <ul><li>MySQL以<code>'YYYY-MM-DD'</code>格式检索和显示<code>DATE</code>值。</li><li>支持的范围是10001-01-01 ~ 99999-12-31。</li></ul> </li><li><code>DATETIME</code>类型用于同时包含日期和时间部分的值。 
  <ul><li>MySQL检索并显示<code>'YYYY-MM-DD hh:mm:ss'</code>格式的<code>DATETIME</code>值。</li><li>支持的范围为:10001-01 00:00:00 ~ 99999-12-31 23:59:59。</li></ul> </li><li><code>TIMESTAMP</code>数据类型用于同时包含日期和时间部分的值。 
  <ul><li><code>TIMESTAMP</code>的取值范围是’1970-01-01 00:00:01’ UTC到’ 20388-01-19 03:14:07’ UTC。</li><li>MySQL将<code>TIMESTAMP</code>值从当前时区转换为UTC进行存储，并将UTC转换回当前时区进行检索。<code>DATETIME</code>等其他类型不会发生这种情况。默认情况下，每个连接的当前时区是服务器的时间。时区可以基于每个连接进行设置。只要时区设置保持不变，就会得到与存储相同的值。如果你存储了一个<code>TIMESTAMP</code>值，然后修改了时区并取得了这个值，那么取得的值与你存储的值是不同的。发生这种情况是因为在两个方向的转换中没有使用相同的时区。当前时区可以通过系统变量<code>time_zone</code>获取。</li></ul> </li><li><code>DATETIME</code>或<code>TIMESTAMP</code>值可以包含尾部小数秒部分，精度可达微秒。特别是，插入到<code>DATETIME</code>或<code>TIMESTAMP</code>列中的值中的任何小数部分都会被存储而不是丢弃。如果包含小数部分，则这些值的格式为<code>'YYYY-MM-DD hh:mm:ss[.fraction]'</code>， <code>DATETIME</code>值的范围为’ 10000-01-01 00:00:00.000000’到’ 99999-12-31 23:59:59.499999’，<code>TIMESTAMP</code>值的范围为’1970-01-01 00:00:01.000000’到’ 20388-01-19 03:14:07.499999’。</li><li><code>TIMESTAMP</code>和<code>DATETIME</code>数据类型支持对当前日期和时间的自动初始化和更新。</li><li>如果SQL模式允许转换，无效的<code>DATE</code>、<code>DATETIME</code>或<code>TIMESTAMP</code>值将被转换为相应类型的零值。</li></ul> 
<h3><a id="TIMESTAMPDATETIME_278"></a>TIMESTAMP和DATETIME的自动初始化和更新</h3> 
<p>使用<code>DEFAULT CURRENT_TIMESTAMP</code>和<code>ON UPDATE CURRENT_TIMESTAMP</code>子句可以将<code>TIMESTAMP</code>和<code>DATETIME</code>列设置为自动初始化并更新为当前日期和时间。自动初始化和更新的时机如下：</p> 
<ul><li>对于未为该列指定值的插入语句，将自动初始化列设置为当前时间戳。</li><li>当插入语句中任何其他列的值从当前值更改时，自动更新列将自动更新为当前时间戳。</li></ul> 
<p>如果禁用了<code>explicit_defaults_for_timestamp</code>系统变量：</p> 
<ul><li>第一个<code>TIMESTAMP</code>列将同时具有<code>DEFAULT CURRENT_TIMESTAMP</code>和<code>ON UPDATE CURRENT_TIMESTAMP</code>。</li><li><code>TIMESTAMP</code>列默认<code>NOT NULL</code>，不能包含<code>NULL</code>值，指定<code>NULL</code>值则指定当前时间戳。要允许时间戳列包含<code>NULL</code>，需要显式地使用<code>NULL</code>属性声明它。在这种情况下，默认值也会变成<code>NULL</code>。此时赋值<code>NULL</code>会将其设置为<code>NULL</code>，而不是当前时间戳。</li></ul> 
<p>如果启用了<code>explicit_defaults_for_timestamp</code>系统变量：</p> 
<ul><li>那么<code>TIMESTAMP</code>列只有在使用<code>NULL</code>属性声明时才允许<code>NULL</code>值。</li><li><code>TIMESTAMP</code>列不允许被赋值为<code>NULL</code>，无论是用<code>NULL</code>还是<code>NOT NULL</code>属性声明。</li></ul> 
<h3><a id="_291"></a>时间和日期字面量</h3> 
<p>日期和时间值可以用几种格式表示，例如引号字符串或数字，具体取决于值的确切类型和其他因素。例如，在MySQL需要日期的上下文中，它将<code>'2015-07-21'</code>，<code>'20150721'</code>和<code>20150721</code>中的任何一个解释为日期。</p> 
<p>标准SQL要求使用类型关键字和字符串指定时间和日期字面量。关键字和字符串之间的空格是可选的。</p> 
<pre><code class="prism language-sql"><span class="token keyword">DATE</span> <span class="token string">'str'</span>
<span class="token keyword">TIME</span> <span class="token string">'str'</span>
<span class="token keyword">TIMESTAMP</span> <span class="token string">'str'</span>
</code></pre> 
<p>MySQL可以识别，但与标准SQL不同，它不需要类型关键字。要与标准兼容的应用程序应该包括用于时间和日期字面量的类型关键字。</p> 
<p>MySQL可以识别以下格式的<code>DATE</code>值：</p> 
<ul><li>作为<code>'YYYY-MM-DD'</code>或<code>'YY-MM-DD'</code>格式的字符串。</li><li>作为<code>'YYYYMMDD'</code>或<code>'YYMMDD'</code>格式的无分隔符的字符串，前提是该字符串作为日期有意义。如果没有意义则会变成<code>'0000-00-00'</code>。</li><li>作为<code>YYYYMMDD</code>或<code>YYMMDD</code>格式的数字，前提是该数字作为日期有意义。</li></ul> 
<p>MySQL可以识别以下格式的<code>DATETIME</code>和<code>TIMESTAMP</code>值：</p> 
<ul><li>格式为<code>'YYYY-MM-DD hh:mm:ss'</code>或<code>'YY-MM-DD hh:mm:ss'</code>的字符串。</li><li>作为<code>'YYYYMMDDhhmmss'</code>或<code>'YYMMDDhhmmss'</code>格式的没有分隔符的字符串，前提是该字符串作为日期有意义，没有意义的会变成<code>'0000-00-00 00:00:00'</code>。</li><li>作为<code>YYYYMMDDhhmmss</code>或<code>YYMMDDhhmmss</code>格式的数字，前提是该数字作为日期有意义。</li></ul> 
<p><code>DATETIME</code>或<code>TIMESTAMP</code>值可以包含尾部小数秒部分，精度可达微秒。小数部分与其余部分之间总是要隔一个小数点。</p> 
<p>包含两位数年份值的日期是不明确的，因为世纪未知。MySQL使用以下规则解释两位数的年份值：</p> 
<ul><li>70-99范围内的年份值变为1970-1999。</li><li>00-69范围内的年份变为2000-2069。</li></ul> 
<p>对于指定为包含日期部分的字符串的值，不需要为小于10的月或日值指定两位数字。<code>' 2015-06-9 '</code>与’<code>2015-06-09'</code>相同。类似地，对于指定为包含时间部分的字符串的值，不需要为小于10的小时、分钟或秒值指定两位数字。<code>'2015-10-30 1:2:3'</code>与<code>'2015-10-30 01:02:03'</code>相同。</p> 
<p>指定为数字的值长度应为6、8、12或14位。如果数字长度为8位或14位，则假定其格式为<code>YYYYMMDD</code>或<code>YYYYMMDDhhmmss</code>，并且年份由前4位数字给出。如果数字长度为6或12位，则假定其格式为<code>YYMMDD</code>或<code>YYMMDDhhmmss</code>，并且年份由前2位数字给出。不属于这些长度的数字将被解释为在最接近的长度前填充前导零。</p> 
<p>指定为非分隔符字符串的值根据其长度进行解释。对于长度为8或14个字符的字符串，年份被假定为前4个字符。否则，年份由前两个字符表示。这个字符串从左到右解析，以查找年、月、日、小时、分钟和秒的值，与字符串中包含的部分相同。这意味着不应该使用少于6个字符的字符串。例如，如果你指定<code>9903</code>，认为它代表1999年3月，MySQL会将其转换为“0”日期值。这是因为年和月的值分别为99和03，而日部分则完全缺失。但是，您可以显式指定0值来表示缺少的月份或日期部分。例如，要插入值<code>1999-03-00</code>，使用<code>990300</code>。</p> 
<p>MySQL可以识别以下格式的<code>TIME</code>值：</p> 
<ul><li>作为<code>'D hh:mm:ss'</code>格式的字符串</li><li>作为<code>'hhmmss'</code>格式的没有分隔符的字符串，只要它作为时间有意义，无意义的会变成<code>'00:00:00'</code>。</li><li>作为<code>hhmmss</code>格式的数字，前提是它作为时间有意义。</li></ul> 
<p>在<code>'D hh:mm:ss.fraction'</code>、<code>'hh:mm:ss.fraction'</code>、<code>'hh:mm:ss.fraction'</code>和<code>'hhmms .fraction'</code>时间格式中可以识别后面的小数部分，其中<code>fraction</code>是小数部分，精度最高为微秒。小数部分与其余部分之间总是要隔一个小数点。</p> 
<p>对于指定为包含时间部分分隔符的字符串的<code>TIME</code>值，不需要为小于10的小时、分钟或秒值指定两个数字。<code>'8:3:2'</code>和<code>'08:03:02'</code>是一样的。</p> 
<h2><a id="_335"></a>字符串类型</h2> 
<p>字符串数据类型包括<code>CHAR</code>、<code>VARCHAR</code>、<code>BINARY</code>、<code>VARBINARY</code>、<code>BLOB</code>、<code>TEXT</code>、<code>ENUM</code>和<code>SET</code>。</p> 
<h3><a id="_337"></a>字符串类型语法</h3> 
<p>对于字符串列（<code>CHAR</code>、<code>VARCHAR</code>、<code>TEXT</code>、<code>ENUM</code>和<code>SET</code>类型）的定义，MySQL以字符单位解释长度规范。对于二进制字符串列（<code>BINARY</code>、 <code>VARBINARY</code>和<code>BLOB</code>类型）的定义，MySQL以字节单位解释长度规范。</p> 
<p>字符串数据类型的列定义可以指定列字符集和排序规则：</p> 
<ul><li><code>CHARACTER SET</code>指定字符集。如果需要，可以使用<code>COLLATE</code>属性以及任何其他属性指定字符集的排序规则。</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t
<span class="token punctuation">(</span>
    c1 <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4<span class="token punctuation">,</span>
    c2 <span class="token keyword">TEXT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> latin1 <span class="token keyword">COLLATE</span> latin1_general_cs
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>为字符串数据类型指定<code>CHARACTER SET binary</code>属性将导致将该列创建为相应的二进制字符串数据类型：<code>CHAR</code>变为<code>BINARY</code>，<code>VARCHAR</code>变为<code>VARBINARY</code>，<code>TEXT</code>变为<code>BLOB</code>。对于<code>ENUM</code>和<code>SET</code>数据类型，这种情况不会发生，它们是按照声明创建的。</li></ul> 
<p>字符串数据类型的列的比较和排序都是基于分配给列的排序规则进行的。</p> 
<ul><li><code>CHAR[(M)] [CHARACTER SET charset_name] [COLLATE collation_name]</code>： 
  <ul><li>一个固定长度的字符串，在存储时总是用空格右填充到指定的长度。M表示以字符为单位的列长度。取值范围为<code>0 ~ 255</code>。如果省略M，则长度为1。</li><li>MySQL允许创建<code>CHAR(0)</code>类型的列。这主要是在您必须与依赖于列的存在但实际上不使用其值的旧应用程序兼容时有用的。当您需要一个只能接受两个值的列时，<code>CHAR(0)</code>也非常好，因为定义为<code>CHAR(0) NULL</code>的列只占用一个位，并且只能接受值<code>NULL</code>和空字符串。</li></ul> </li><li><code>VARCHAR(M) [CHARACTER SET charset_name] [COLLATE collation_name]</code>： 
  <ul><li>可变长度的字符串。M表示以字符为单位的最大列长度。M的取值范围是<code>0 ~ 65535</code>。<code>VARCHAR</code>的有效最大长度取决于最大行大小和所使用的字符集。例如，<code>utf8mb3</code>字符每个字符最多需要三个字节，因此可以将使用<code>utf8mb3</code>字符集的<code>VARCHAR</code>列声明为最多<code>21,844</code>个字符。</li><li>MySQL将<code>VARCHAR</code>值存储为1字节或2字节长度的前缀加上数据。长度前缀表示值中包含的字节数。如果值需要不超过255个字节，则<code>VARCHAR</code>列使用一个长度字节，如果值需要超过255个字节，则使用两个长度字节。</li></ul> </li><li><code>BINARY[(M)]</code>： <code>BINARY</code>类型类似于<code>CHAR</code>类型，但存储的是二进制字节字符串而不是非二进制字符串。可选的长度M表示以字节为单位的列长度。如果省略，M默认为1。</li><li><code>VARBINARY(M)</code>：<code>VARBINARY</code>类型类似于<code>VARCHAR</code>类型，但存储的是二进制字节字符串，而不是非二进制字符串。M表示以字节为单位的最大列长度。</li><li><code>TINYBLOB</code>：<code>BLOB</code>列，最大长度为255字节。每个<code>TINYBLOB</code>值都使用一个1字节长度的前缀来存储，该前缀表示值中的字节数。</li><li><code>TINYTEXT [CHARACTER SET charset_name] [COLLATE collation_name]</code>：<code>TEXT</code>列，最大长度为255个字符。如果值包含多字节字符，则有效最大长度较小。每个<code>TINYTEXT</code>值都使用一个1字节长度的前缀来存储，该前缀表示值中的字节数。</li><li><code>BLOB[(M)]</code>： 
  <ul><li><code>BLOB</code>列，最大长度为65,535字节。每个<code>BLOB</code>值都使用一个2字节长度的前缀来存储，该前缀表示值中的字节数。</li><li>对于这种类型，可以给出一个可选的长度M。如果这样做了，MySQL将该列创建为最小的<code>BLOB</code>类型，其大小足以容纳M字节长的值。</li></ul> </li><li><code>TEXT[(M)] [CHARACTER SET charset_name] [COLLATE collation_name]</code>： 
  <ul><li><code>TEXT</code>列，最大长度为65,535个字符。如果值包含多字节字符，则有效最大长度较小。每个<code>TEXT</code>值都使用一个2字节长度的前缀来存储，该前缀表示值中的字节数</li><li>对于这种类型，可以给出一个可选的长度M。如果这样做了，MySQL将该列创建为最小的<code>TEXT</code>类型，其大小足以容纳M个字符长的值。</li></ul> </li><li><code>MEDIUMBLOB</code>：<code>BLOB</code>列，最大长度为16,777,215字节。每个<code>MEDIUMBLOB</code>值都使用一个3字节长度的前缀来存储，该前缀表示该值的字节数。</li><li><code>MEDIUMTEXT [CHARACTER SET charset_name] [COLLATE collation_name]</code>：<code>TEXT</code>列，最大长度为16,777,215个字符。如果值包含多字节字符，则有效最大长度较小。每个<code>MEDIUMTEXT</code>值都使用一个3字节长度的前缀来存储，该前缀表示该值中的字节数。</li><li><code>LONGBLOB</code>：<code>BLOB</code>列，最大长度为4GB字节。<code>LONGBLOB</code>列的有效最大长度取决于客户机/服务器协议中配置的最大数据包大小和可用内存。每个<code>LONGBLOB</code>值都使用一个4字节长度的前缀来存储，该前缀表示值中的字节数。</li><li><code>LONGTEXT [CHARACTER SET charset_name] [COLLATE collation_name]</code>：<code>TEXT</code>列，最大长度为4GB个字符。如果值包含多字节字符，则有效最大长度较小。<code>LONGTEXT</code>列的有效最大长度还取决于客户机/服务器协议中配置的最大数据包大小和可用内存。每个<code>LONGTEXT</code>值都使用一个4字节长度的前缀来存储，该前缀表示该值中的字节数。</li><li><code>ENUM('value1','value2',...) [CHARACTER SET charset_name] [COLLATE collation_name]</code>： 
  <ul><li>枚举。一个字符串对象，只能有一个值，从值列表<code>'value1'， 'value2'，…</code>、<code>NULL</code>、特殊的<code>''</code>错误值中选择。<code>ENUM</code>值在内部表示为整数。</li><li>一个<code>ENUM</code>列最多可以有65,535个不同的元素。</li><li>单个<code>ENUM</code>元素支持的最大长度是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            M 
           
          
            &lt; 
           
          
            = 
           
          
            255 
           
          
         
           M &lt;= 255 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7224em; vertical-align: -0.0391em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">255</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            ( 
           
          
            M 
           
          
            × 
           
          
            w 
           
          
            ) 
           
          
            &lt; 
           
          
            = 
           
          
            1020 
           
          
         
           (M\times w)&lt;= 1020 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1020</span></span></span></span></span>，其中M是元素文字长度，w是字符集中最大长度字符所需的字节数。</li></ul> </li><li><code>SET('value1','value2',...) [CHARACTER SET charset_name] [COLLATE collation_name]</code>： 
  <ul><li>一个集合。可以有零个或多个值的字符串对象，每个值必须从值列表<code>'value1'， 'value2'，…</code>中选择。<code>SET</code>值在内部表示为整数。</li><li>一个<code>SET</code>列最多可以有64个不同的成员。</li><li>单个<code>SET</code>元素支持的最大长度是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            M 
           
          
            &lt; 
           
          
            = 
           
          
            255 
           
          
         
           M &lt;= 255 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7224em; vertical-align: -0.0391em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">255</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            ( 
           
          
            M 
           
          
            × 
           
          
            w 
           
          
            ) 
           
          
            &lt; 
           
          
            = 
           
          
            1020 
           
          
         
           (M\times w)&lt;= 1020 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1020</span></span></span></span></span>，其中M是元素文字长度，w是字符集中最大长度字符所需的字节数。</li></ul> </li></ul> 
<h3><a id="CHARVARCHAR_382"></a>CHAR和VARCHAR的异同</h3> 
<p><code>CHAR</code>和<code>VARCHAR</code>类型相似，但存储和检索的方式不同。它们在最大长度和是否保留尾随空格方面也有所不同。</p> 
<ul><li><code>CHAR</code>和<code>VARCHAR</code>类型声明了一个长度，该长度指示您希望存储的最大字符数。例如，<code>CHAR(30)</code>最多可以容纳30个字符。</li><li><code>CHAR</code>列的长度固定为创建表时声明的长度。长度为<code>0 ~ 255</code>之间的任意值。当存储<code>CHAR</code>值时，它们用空格右填充到指定的长度。当检索<code>CHAR</code>值时，除非启用了<code>PAD_CHAR_TO_FULL_LENGTH</code> SQL模式，否则将删除尾随空格。</li><li><code>VARCHAR</code>列中的值是可变长度的字符串。长度范围为<code>0 ~ 65535</code>。<code>VARCHAR</code>的有效最大长度取决于最大行大小和所使用的字符集。与<code>CHAR</code>相反，<code>VARCHAR</code>值存储为1字节或2字节长度的前缀加上数据。长度前缀表示值中包含的字节数。如果值需要不超过255个字节，则列使用一个长度字节，如果值需要超过255个字节，则使用两个长度字节。</li></ul> 
<p>下表通过显示将各种字符串值存储到<code>CHAR(4)</code>和<code>VARCHAR(4)</code>列中的结果来说明<code>CHAR</code>和<code>VARCHAR</code>之间的区别（假设该列使用单字节字符集）。</p> 
<p><img src="https://images2.imgbox.com/5b/53/0DhQHMdm_o.png" alt="在这里插入图片描述"><br> 表最后一行显示的值仅在不使用严格SQL模式时才适用;如果启用严格模式，则不会存储超过列长度的值，并导致错误。</p> 
<p>InnoDB将大于或等于768字节的固定长度字段编码为可变长度字段，可以存储在页外。</p> 
<h3><a id="BINARYVARBINARY_395"></a>BINARY和VARBINARY的异同</h3> 
<p><code>BINARY</code>和<code>VARBINARY</code>类型类似于<code>CHAR</code>和<code>VARCHAR</code>，除了它们存储二进制字符串而不是非二进制字符串。也就是说，它们存储字节字符串而不是字符串。这意味着它们具有二进制字符集和排序，比较和排序基于值中字节的数值。</p> 
<p><code>BINARY</code>和<code>VARBINARY</code>允许的最大长度与<code>CHAR</code>和<code>VARCHAR</code>相同。</p> 
<p>如果没有启用严格的SQL模式，并且您为<code>BINARY</code>或<code>VARBINARY</code>列分配的值超过了列的最大长度，则该值将被截断以适合该列，并生成警告。</p> 
<p>当<code>BINARY</code>值被存储时，它们被0x00（零字节）右填充到指定的长度，并且在检索时不删除尾随字节。零字节和空格在比较时不同，零字节排在空格前边。</p> 
<p>对于<code>VARBINARY</code>，插入时没有填充，检索时也不会剥离字节。</p> 
<p>对于那些删除尾垫字节或比较忽略它们的情况，如果列具有需要唯一值的索引，则在列中插入仅在尾垫字节数上不同的值将导致重复键错误。例如，如果一个表包含<code>'a'</code>，尝试存储<code>'a\0'</code>会导致重复键错误。</p> 
<p>如果计划使用<code>BINARY</code>数据类型存储二进制数据，并且要求检索的值与存储的值完全相同，则应该仔细考虑前面的填充和剥离特征。下面的例子说明了零字节填充如何影响列值比较：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t <span class="token punctuation">(</span>c <span class="token keyword">BINARY</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t <span class="token keyword">SET</span> c <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> HEX<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token string">'a\0\0'</span> <span class="token keyword">from</span> t<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------------+</span>
<span class="token operator">|</span> HEX<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">|</span> c <span class="token operator">=</span> <span class="token string">'a'</span> <span class="token operator">|</span> c <span class="token operator">=</span> <span class="token string">'a\0\0'</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------------+</span>
<span class="token operator">|</span> <span class="token number">610000</span> <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>           <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.09</span> sec<span class="token punctuation">)</span>
</code></pre> 
<p>如果检索到的值必须与没有填充的存储指定的值相同，那么最好使用<code>VARBINARY</code>或<code>BLOB</code>数据类型之一。</p> 
<h3><a id="BLOBTEXT_427"></a>BLOB和TEXT的异同</h3> 
<p>BLOB是一种二进制大对象，可以保存可变数量的数据。这四种BLOB类型是<code>TINYBLOB</code>、<code>BLOB</code>、<code>MEDIUMBLOB</code>和<code>LONGBLOB</code>。它们的不同之处在于它们所能保存的值的最大长度。四种TEXT类型分别是<code>TINYTEXT</code>、<code>TEXT</code>、<code>MEDIUMTEXT</code>和<code>LONGTEXT</code>。它们对应于四种BLOB类型，并且具有相同的最大长度和存储需求。</p> 
<p>BLOB值被视为二进制字符串。它们具有二进制字符集和排序，比较和排序基于列值中字节的数值。TEXT值被视为非二进制字符串。它们具有二进制以外的字符集，并且根据字符集的排序对值进行排序和比较。</p> 
<p>如果没有启用严格的SQL模式，并且您为BLOB或TEXT列分配的值超过了列的最大长度，则该值将被截断以适合该列，并生成警告。无论使用何种SQL模式，截断要插入TEXT列的值的多余尾随空格总是会生成警告。</p> 
<p>对于TEXT和BLOB列，在插入时没有填充，在选择时也不会剥离字节。如果对TEXT列进行了索引，则索引条目比较将在末尾填充空格。这意味着，如果索引需要唯一的值，则只在末尾空格的数量上不同的值会发生重复键错误。例如，如果一个表包含<code>'a'</code>，尝试存储<code>'a '</code>会导致重复键错误。</p> 
<p>在大多数情况下，可以将<code>BLOB</code>列视为<code>VARBINARY</code>列，其大小可以随您的喜好而定。类似地，您可以将<code>TEXT</code>列视为<code>VARCHAR</code>列。<code>BLOB</code>和<code>TEXT</code>与<code>VARBINARY</code>和<code>VARCHAR</code>的区别如下：</p> 
<ul><li>对于<code>BLOB</code>列和<code>TEXT</code>列上的索引，必须指定索引前缀长度。对于<code>CHAR</code>和<code>VARCHAR</code>，前缀长度是可选的。</li><li><code>BLOB</code>和<code>TEXT</code>列不能有<code>DEFAULT</code>值。</li></ul> 
<p>因为BLOB和TEXT值可能非常长，所以在使用它们时可能会遇到一些限制：</p> 
<ul><li>排序时只使用列的第一个<code>max_sort_length</code>字节。<code>max_sort_length</code>的默认值是1024。通过在服务器启动或运行时增加<code>max_sort_length</code>的值，可以使排序或分组中有更多重要的字节。</li><li>使用临时表处理的查询结果中的BLOB或TEXT列实例会导致服务器使用磁盘上的表而不是内存中的表，因为内存存储引擎不支持这些数据类型。使用磁盘会导致性能损失，因此只有在确实需要时才在查询结果中包含BLOB或TEXT列。例如，避免使用<code>SELECT *</code>，因为它选择所有列。</li></ul> 
<p>每个BLOB或TEXT值在内部由一个单独分配的对象表示。这与所有其他数据类型不同，其他数据类型在打开表时为每列分配一次存储。</p> 
<h3><a id="ENUM_445"></a>ENUM</h3> 
<p><code>ENUM</code>是一个字符串对象，其值从允许的值列表中选择，这些值在表创建时在列规范中显式枚举。<code>ENUM</code>类型有以下优点：</p> 
<ul><li>在列可能值的集合有限的情况下，压缩数据存储。指定作为输入值的字符串将自动编码为数字。</li><li>可读查询和输出。这些数字被转换回查询结果中的相应字符串。</li></ul> 
<p>这些潜在的问题需要考虑：</p> 
<ul><li>如果使枚举值看起来像数字，则很容易将文字值与其内部索引号混淆。</li><li>在<code>ORDER BY</code>子句中使用<code>ENUM</code>列需要格外小心</li></ul> 
<p>枚举值必须是带引号的字符串字面值。例如，你可以像这样创建一个包含<code>ENUM</code>列的表：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> shirts <span class="token punctuation">(</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    size <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'x-small'</span><span class="token punctuation">,</span> <span class="token string">'small'</span><span class="token punctuation">,</span> <span class="token string">'medium'</span><span class="token punctuation">,</span> <span class="token string">'large'</span><span class="token punctuation">,</span> <span class="token string">'x-large'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> shirts <span class="token punctuation">(</span>name<span class="token punctuation">,</span> size<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'dress shirt'</span><span class="token punctuation">,</span><span class="token string">'large'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'t-shirt'</span><span class="token punctuation">,</span><span class="token string">'medium'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token string">'polo shirt'</span><span class="token punctuation">,</span><span class="token string">'small'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> size <span class="token keyword">FROM</span> shirts <span class="token keyword">WHERE</span> size <span class="token operator">=</span> <span class="token string">'medium'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------+--------+</span>
<span class="token operator">|</span> name    <span class="token operator">|</span> size   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+--------+</span>
<span class="token operator">|</span> t<span class="token operator">-</span>shirt <span class="token operator">|</span> medium <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+--------+</span>
<span class="token keyword">UPDATE</span> shirts <span class="token keyword">SET</span> size <span class="token operator">=</span> <span class="token string">'small'</span> <span class="token keyword">WHERE</span> size <span class="token operator">=</span> <span class="token string">'large'</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre> 
<p>每个枚举值都有一个索引：</p> 
<ul><li>美剧列表中的元素被分配索引号，从1开始。</li><li>空字符串的索引值为0。这意味着你可以使用下面的SELECT语句来查找分配了无效<code>ENUM</code>值的行：</li></ul> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> enum_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><code>NULL</code>值的索引为<code>NULL</code>。</li><li>这里的术语索引是指枚举值列表中的位置。它与表索引无关。</li></ul> 
<p>一个<code>ENUM</code>列最多可以有65,535个不同的元素。</p> 
<p>如果在数字上下文中检索<code>ENUM</code>值，则返回列值的索引。例如，你可以像这样从<code>ENUM</code>列中检索数值：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> enum_col<span class="token operator">+</span><span class="token number">0</span> <span class="token keyword">FROM</span> tbl_name<span class="token punctuation">;</span>
</code></pre> 
<p><code>SUM()</code>或<code>AVG()</code>等函数需要一个数字参数，必要时将参数转换为数字。对于<code>ENUM</code>值，在计算中使用索引号。</p> 
<p>创建表时，表定义中的<code>ENUM</code>成员值中的尾随空格将自动删除。</p> 
<p><code>ENUM</code>列可以被分配一个字符集和排序规则。对于二进制或区分大小写的排序，在向列赋值时要考虑大小写。</p> 
<p>我们强烈建议不要使用数字作为枚举值，因为它不会比适当的<code>TINYINT</code>或<code>SMALLINT</code>类型节省存储空间，而且如果不正确地引用ENUM值，很容易混淆字符串和底层数字值。如果确实使用数字作为枚举值，请始终将其括在引号中。如果省略引号，则将该数字视为索引。</p> 
<p>在某些情况下，枚举值也可以是空字符串或<code>NULL</code>：</p> 
<ul><li>如果在<code>ENUM</code>中插入一个无效的值，则将插入空字符串作为一个特殊的错误值。该字符串的索引是0。如果启用了严格SQL模式，尝试插入无效的<code>ENUM</code>值将导致错误。</li><li>如果将<code>ENUM</code>列声明为允许<code>NULL</code>，则<code>NULL</code>值是该列的有效值，默认值为<code>NULL</code>。如果一个<code>ENUM</code>列被声明为<code>NOT NULL</code>，它的默认值是允许值列表的第一个元素。</li></ul> 
<p><code>ENUM</code>值根据它们的索引号排序，索引号取决于枚举成员在列规范中列出的顺序。空字符串排在非空字符串之前，<code>NULL</code>值排在所有其他枚举值之前。为了防止在<code>ENUM</code>列上使用<code>ORDER BY</code>子句时出现意外结果，请使用以下技术之一：</p> 
<ul><li>按字母顺序指定<code>ENUM</code>列表</li><li>通过编码<code>ORDER BY CAST(col AS CHAR)</code>或<code>ORDER BY CONCAT(col)</code>，确保列按词法排序，而不是按索引号排序。</li></ul> 
<p>枚举值不能是表达式，即使是计算结果为字符串值的表达式。例如，这个<code>CREATE TABLE</code>语句不能工作，因为<code>CONCAT</code>函数不能用来构造枚举值：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> sizes <span class="token punctuation">(</span>
    size <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'small'</span><span class="token punctuation">,</span> CONCAT<span class="token punctuation">(</span><span class="token string">'med'</span><span class="token punctuation">,</span><span class="token string">'ium'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'large'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>也不能将用户变量用作枚举值。这对语句不起作用：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token variable">@mysize</span> <span class="token operator">=</span> <span class="token string">'medium'</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> sizes <span class="token punctuation">(</span>
    size <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'small'</span><span class="token punctuation">,</span> <span class="token variable">@mysize</span><span class="token punctuation">,</span> <span class="token string">'large'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="SET_523"></a>SET</h3> 
<p><code>SET</code>是一个字符串对象，可以有零个或多个值，每个值必须从创建表时指定的允许值列表中选择。由多个集合成员组成的<code>SET</code>列值用逗号分隔。这样做的结果是<code>SET</code>成员值本身不应该包含逗号。</p> 
<p>一个<code>SET</code>列最多可以有64个不同的成员。</p> 
<p>定义中的重复值会导致警告，如果启用了严格的SQL模式，则会导致错误。</p> 
<p>创建表时，表定义中的<code>SET</code>成员值中的尾随空格将自动删除。</p> 
<p>检索时，将使用列定义中使用的字母来显示存储在<code>SET</code>列中的值。注意，<code>SET</code>列可以分配一个字符集和排序规则。对于二进制或区分大小写的排序，在向列赋值时要考虑大小写。</p> 
<p>MySQL以数字方式存储<code>SET</code>值，存储值的低位对应于第一个<code>SET</code>成员。如果在数字上下文中检索<code>SET</code>值，则检索到的值具有与组成列值的集合成员相对应的位集。例如，你可以像这样从<code>SET</code>列中检索数值：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> set_col<span class="token operator">+</span><span class="token number">0</span> <span class="token keyword">FROM</span> tbl_name<span class="token punctuation">;</span>
</code></pre> 
<p>如果将一个数字存储在<code>SET</code>列中，则在该数字的二进制表示中设置的位决定列值中的集合成员。对于指定为<code>SET('a'，'b'，'c'，'d')</code>的列，成员具有以下十进制和二进制值。</p> 
<table><thead><tr><th>SET成员</th><th>十进制值</th><th>二进制值</th></tr></thead><tbody><tr><td>‘a’</td><td>1</td><td>0001</td></tr><tr><td>‘b’</td><td>2</td><td>0010</td></tr><tr><td>‘c’</td><td>4</td><td>0100</td></tr><tr><td>‘d’</td><td>8</td><td>1000</td></tr></tbody></table> 
<p>如果将值9赋给这一列，那么在二进制中就是1001，因此第一个和第四个SET值成员<code>'a'</code>和<code>'d'</code>被选中，结果值为<code>'a,d'</code>。</p> 
<p>对于包含多个<code>SET</code>元素的值，在插入值时，元素的排列顺序无关紧要。给定元素在值中列出多少次也无关紧要。当稍后检索该值时，值中的每个元素都会出现一次，并根据表创建时指定的顺序列出元素。假设指定一个列为<code>SET('a'，'b'，'c'，'d')</code>：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> myset <span class="token punctuation">(</span>col <span class="token keyword">SET</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myset <span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> 
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token string">'a,d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d,a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'a,d,a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'a,d,d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d,a,d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">5</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>
</code></pre> 
<p>然后所有这些值在检索时显示为<code>'a,d'</code>：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> col <span class="token keyword">FROM</span> myset<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> col  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>
</code></pre> 
<p>如果将<code>SET</code>列设置为不支持的值，则忽略该值并发出警告：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myset <span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'a,d,d,s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> <span class="token keyword">WARNINGS</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------+------+------------------------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">Level</span>   <span class="token operator">|</span> Code <span class="token operator">|</span> Message                                  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+------+------------------------------------------+</span>
<span class="token operator">|</span> Warning <span class="token operator">|</span> <span class="token number">1265</span> <span class="token operator">|</span> <span class="token keyword">Data</span> truncated <span class="token keyword">for</span> <span class="token keyword">column</span> <span class="token string">'col'</span> at <span class="token keyword">row</span> <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+------+------------------------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> col <span class="token keyword">FROM</span> myset<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> col  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">|</span> a<span class="token punctuation">,</span>d  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre> 
<p>如果启用了严格SQL模式，尝试插入无效的SET值将导致错误。</p> 
<p><code>SET</code>值按数字排序。<code>NULL</code>值排在非<code>NULL</code> <code>SET</code>值之前。</p> 
<p><code>SUM()</code>或<code>AVG()</code>等函数需要一个数字参数，必要时将参数转换为数字。对于<code>SET</code>值，强制转换操作导致使用数值。</p> 
<p>通常，您使用<code>FIND_IN_SET()</code>函数或<code>LIKE</code>操作符搜索<code>SET</code>值：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> FIND_IN_SET<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span>set_col<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> set_col <span class="token operator">LIKE</span> <span class="token string">'%value%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>第一个语句查找<code>set_col</code>包含值集成员的行。第二个类似，但不相同：它查找<code>set_col</code>在任何地方包含值的行，即使是作为另一个集合成员的子字符串。</p> 
<p>还允许下列声明：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> set_col <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl_name <span class="token keyword">WHERE</span> set_col <span class="token operator">=</span> <span class="token string">'val1,val2'</span><span class="token punctuation">;</span>
</code></pre> 
<p>第一个语句查找包含第一个集合成员的值。第二步寻找完全匹配的。对第二种类型的比较要小心。将集合值与<code>'val1,val2'</code>进行比较所返回的结果与将集合值与<code>'val2,val1'</code>进行比较所返回的结果不同。您应该按照列定义中列出的顺序指定值。</p> 
<p>要确定<code>SET</code>列的所有可能值，请使用<code>SHOW COLUMNS FROM tbl_name LIKE set_col</code>，并在输出的<code>Type</code>列中解析<code>SET</code>定义。</p> 
<h3><a id="_625"></a>字符串字面量</h3> 
<p>字符串是一个字节或字符序列，由单引号或双引号字符组成：</p> 
<pre><code class="prism language-sql"><span class="token string">'a string'</span>
<span class="token string">"another string"</span>
</code></pre> 
<p>相邻的带引号的字符串被连接成一个字符串。下面几行是等价的：</p> 
<pre><code class="prism language-sql"><span class="token string">'a string'</span>
<span class="token string">'a'</span> <span class="token string">' '</span> <span class="token string">'string'</span>
</code></pre> 
<p>如果启用了<code>ANSI_QUOTES</code> SQL模式，则字符串字面值只能在单引号内加引号，因为在双引号内加引号的字符串将被解释为标识符。</p> 
<p>二进制字符串是一串字节。每个二进制字符串都有一个名为<code>binary</code>的字符集和排序规则。非二进制字符串是一串字符。它具有<code>binary</code>以外的字符集和与该字符集兼容的排序规则。</p> 
<p>对于这两种类型的字符串，比较都是基于字符串单元的数值。对于二进制字符串，单位是字节；比较使用数字字节值。对于非二进制字符串，单位是字符，一些字符集支持多字节字符；比较使用数字字符代码值。</p> 
<p>字符串字面量可以有一个可选的字符集引入器和<code>COLLATE</code>子句，将其指定为使用特定字符集和排序规则的字符串：</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span>_charset_name<span class="token punctuation">]</span><span class="token string">'string'</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> collation_name<span class="token punctuation">]</span>
</code></pre> 
<p>您可以使用<code>N'literal'</code>（或<code>n'literal'</code>）在本地字符集中创建字符串。以下语句是等价的：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> N<span class="token string">'some text'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> n<span class="token string">'some text'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> _utf8<span class="token string">'some text'</span><span class="token punctuation">;</span>
</code></pre> 
<p>在字符串中，除非启用<code>NO_BACKSLASH_ESCAPES</code> SQL模式，否则某些序列具有特殊含义。这些序列中的每一个都以反斜杠开头，称为转义字符。MySQL识别的转义序列如下表所示。对于不在表中的所有其他转义序列，将忽略反斜杠。</p> 
<p><img src="https://images2.imgbox.com/8b/5c/TYvTygcK_o.png" alt="在这里插入图片描述"></p> 
<p>要将二进制数据插入字符串列，应该用转义序列表示某些字符。其中反斜杠和用于引用字符串的引号字符是必须转义的。</p> 
<p>在编写应用程序时，任何可能包含这些特殊字符的字符串在作为数据值发送给MySQL服务器的SQL语句中使用之前都必须进行适当的转义。你可以通过两种方式做到这一点：</p> 
<ul><li>使用转义特殊字符的函数处理字符串。在C程序中，您可以使用<code>mysql_real_escape_string_quote()</code> C API函数来转义字符。</li><li>作为显式转义特殊字符的替代方案，许多MySQL API提供占位符功能，使您能够将特殊标记插入语句字符串，然后在发出语句时将数据值绑定到它们。在这种情况下，API会为您转义值中的特殊字符。</li></ul> 
<h2><a id="JSON_665"></a>JSON数据类型</h2> 
<p>如有需要，请看<a href="https://dev.mysql.com/doc/refman/8.0/en/json.html" rel="nofollow">这里</a>。</p> 
<h2><a id="_667"></a>空间数据类型</h2> 
<p>如有需要，请看<a href="https://dev.mysql.com/doc/refman/8.0/en/spatial-types.html" rel="nofollow">这里</a>。</p> 
<h2><a id="_669"></a>数据类型的默认值</h2> 
<p>数据类型定义可以具有显式或隐式的默认值。数据类型规范中的<code>DEFAULT value</code>子句显式地指示列的默认值：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t1 <span class="token punctuation">(</span>
  i     <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
  c     <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
  price <span class="token keyword">DOUBLE</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.00</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>SERIAL DEFAULT VALUE</code>是一个特例。在整型列的定义中，它是<code>NOT NULL AUTO_INCREMENT UNIQUE</code>的别名。</p> 
<h3><a id="MySQL_8013_680"></a>MySQL 8.0.13的显式默认值处理</h3> 
<p><code>DEFAULT</code>子句中指定的默认值可以是文字常量或表达式。表达式必须放在括号里：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t1 <span class="token punctuation">(</span>
  <span class="token comment">-- literal defaults</span>
  i <span class="token keyword">INT</span>         <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
  c <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token comment">-- expression defaults</span>
  f <span class="token keyword">FLOAT</span>       <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  b <span class="token keyword">BINARY</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>  <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span>UUID_TO_BIN<span class="token punctuation">(</span>UUID<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  d <span class="token keyword">DATE</span>        <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  p <span class="token keyword">POINT</span>       <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span><span class="token keyword">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  j JSON        <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span>JSON_ARRAY<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>唯一的例外是，对于<code>TIMESTAMP</code>和<code>DATETIME</code>列，您可以指定<code>CURRENT_TIMESTAMP</code>函数作为默认值，而不需要用括号括起来。</p> 
<p><code>BLOB</code>、<code>TEXT</code>、<code>GEOMETRY</code>和<code>JSON</code>数据类型只能在将值写入表达式时才可以分配默认值，即使表达式值是文字：</p> 
<ul><li>这是允许的（文字默认指定为表达式）:</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t2 <span class="token punctuation">(</span>b <span class="token keyword">BLOB</span> <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>这会产生一个错误（默认文本没有指定为表达式）:</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t2 <span class="token punctuation">(</span>b <span class="token keyword">BLOB</span> <span class="token keyword">DEFAULT</span> <span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>表达式默认值必须遵循以下规则。如果表达式包含不允许的结构，则会发生错误：</p> 
<ul><li>允许使用文字、内置函数和操作符。</li><li>不允许使用子查询、参数、变量、存储函数和可加载函数。</li><li>表达式默认值不能依赖于具有<code>AUTO_INCREMENT</code>属性的列。</li><li>一个列的表达式默认值可以引用其他表列，但引用生成的列或具有表达式默认值的列必须引用表定义中较早出现的列。也就是说，表达式默认值不能包含对生成的列或具有表达式默认值的列的前向引用。排序约束也适用于使用<code>ALTER TABLE</code>对表列进行重新排序。如果结果表的表达式默认值包含对生成的列或具有表达式默认值的列的前向引用，则语句将失败。</li></ul> 
<p>对于<code>CREATE TABLE ... LIKE</code> 和<code>CREATE TABLE ... SELECT</code>语句，目标表保留原始表中的表达式默认值。</p> 
<p>如果一个表达式的默认值引用了一个不确定的函数，那么任何导致计算该表达式的语句对于基于语句的复制都是不安全的。这包括<code>INSERT</code>和<code>UPDATE</code>之类的语句。在这种情况下，如果禁用二进制日志记录，则该语句将正常执行。如果启用二进制日志记录，<code>binlog_format</code>设置为<code>STATEMENT</code>，则记录并执行该语句，但会在错误日志中写入警告消息，因为复制从节点可能会偏离。当<code>binlog_format</code>设置为<code>MIXED</code>或<code>ROW</code>时，语句会正常执行。</p> 
<p>当插入新行时，可以通过省略列名或将列指定为<code>DEFAULT</code>来插入带有表达式的列的默认值：</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t4 <span class="token punctuation">(</span>uid <span class="token keyword">BINARY</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span>UUID_TO_BIN<span class="token punctuation">(</span>UUID<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t4 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t4 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> BIN_TO_UUID<span class="token punctuation">(</span>uid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uid <span class="token keyword">FROM</span> t4<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
<span class="token operator">|</span> uid                                  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
<span class="token operator">|</span> f1109174<span class="token operator">-</span><span class="token number">94</span>c9<span class="token operator">-</span><span class="token number">11</span>e8<span class="token operator">-</span><span class="token number">971</span>d<span class="token operator">-</span><span class="token number">3</span>bf1095aa633 <span class="token operator">|</span>
<span class="token operator">|</span> f110cf9a<span class="token operator">-</span><span class="token number">94</span>c9<span class="token operator">-</span><span class="token number">11</span>e8<span class="token operator">-</span><span class="token number">971</span>d<span class="token operator">-</span><span class="token number">3</span>bf1095aa633 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------------------+</span>
</code></pre> 
<p>并非所有存储引擎都允许表达式默认值。如果没有，则会出现<code>ER_UNSUPPORTED_ACTION_ON_DEFAULT_VAL_GENERATED</code>错误。</p> 
<p>如果默认值的计算结果与声明的列类型不同，则根据通常的MySQL类型转换规则对声明的类型进行隐式强制转换。</p> 
<h3><a id="MySQL_8013_735"></a>MySQL 8.0.13之前的显式默认处理</h3> 
<p>除了一个例外，<code>DEFAULT</code>子句中指定的默认值必须是一个文字常量；它不能是函数或表达式。例外的是，对于<code>TIMESTAMP</code>和<code>DATETIME</code>列，您可以指定<code>CURRENT_TIMESTAMP</code>作为默认值。</p> 
<p>不能为<code>BLOB、TEXT、GEOMETRY、JSON</code>数据类型分配默认值。</p> 
<p>如果默认值的计算结果与声明的列类型不同，则根据通常的MySQL类型转换规则对声明的类型进行隐式强制转换。</p> 
<h3><a id="_741"></a>隐式默认值处理</h3> 
<p>如果数据类型定义中没有明确的<code>DEFAULT</code>值，MySQL将按照如下方式确定默认值：</p> 
<ul><li>如果列可以接受<code>NULL</code>作为值，则用显式<code>DEFAULT NULL</code>子句定义该列。</li><li>如果列不能以<code>NULL</code>作为值，MySQL定义该列时没有显式的<code>DEFAULT</code>子句。对于没有显式<code>DEFAULT</code>子句的<code>NOT NULL</code>列，如果<code>INSERT</code>或<code>REPLACE</code>语句不包含该列的值，或者<code>UPDATE</code>语句将该列设置为<code>NULL</code>, MySQL将根据当时有效的SQL模式处理该列： 
  <ul><li>如果启用了严格SQL模式，事务性表就会出现错误，语句就会回滚。对于非事务性表，会发生错误，但如果多行语句的第二行或后续行发生错误，则会插入前面的行。</li><li>如果没有启用严格模式，MySQL将列设置为列数据类型的隐式默认值。</li></ul> </li></ul> 
<p>隐式默认值定义如下：</p> 
<ul><li>对于数字类型，默认值是0，但对于使用<code>AUTO_INCREMENT</code>属性声明类型，默认值是序列中的下一个值。</li><li>对于<code>TIMESTAMP</code>以外的日期和时间类型，默认值是该类型的适当零值。如果启用了<code>explicit_defaults_for_timestamp</code>系统变量，那么对于<code>TIMESTAMP</code>也是如此。否则，对于表中的第一个<code>TIMESTAMP</code>列，默认值是当前日期和时间。</li><li>对于<code>ENUM</code>以外的字符串类型，默认值为空字符串。对于<code>ENUM</code>，默认值是第一个枚举值。</li></ul> 
<h2><a id="NULL_752"></a>NULL</h2> 
<p><code>NULL</code>值表示“无数据”。<code>NULL</code>可以写成任何字母形式。</p> 
<ul><li>请注意，<code>NULL</code>值与数字类型的0或字符串类型的空字符串等值不同。</li><li>对于使用<code>LOAD DATA</code>或<code>SELECT…INTO OUTFILE</code>执行的文本文件导入或导出操作。, <code>NULL</code>由<code>\n</code>序列表示。</li><li>对于<code>ORDER BY</code>排序，对于升序排序，<code>NULL</code>值排在其他值之前，对于降序排序，<code>NULL</code>值排在其他值之后。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/776029c5d7d2773438f1c322b2fa29ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java集合（五）LinkedHashMap、TreeMap</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f9cae59e23fad935f13cae8e0fa46758/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">免费大礼包！神经网络方面论文合集共178篇！你还不来收藏？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>