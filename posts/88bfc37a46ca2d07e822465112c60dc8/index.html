<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>十分钟带你入门Nodejs - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="十分钟带你入门Nodejs" />
<meta property="og:description" content="前言：
我们去学习一样东西时，一定不可盲目去摸索，必须得有目标，学完之后，应该是知其然，知其所以然。ok话不多说，进入今天的主题。
学习nodejs需要掌握的前置知识：html css javaScript
一、什么是Node.js： 大家看到Nodejs中的js有没有快速联想到我们的javaScript，我们可能会猜想他们必定存在某种联系，那他们之间到底有什么联系呢？请先让我们先粗略的回想一下js的内容，脑子里面立马浮现出js中的东西如下：
看到上面的内容是不是感到很熟悉，但是要想知道它与nodejs之间的联系，我们得先了解一下javaScript是如何在浏览器中执行的。
其实我们知道每个浏览器都有自己的javaScript解析引擎，浏览器中的javaScript引擎负责来解析和执行我们待执行的js代码。那么js是怎么去操作我们的DOM 和 BOM 呢。
常见的浏览器引擎（V8 解析引擎性能最好）：
原来每个浏览器中都提供有内置的BOM,DOM 这样的API函数，我们就可以根据这些内置的API函数编写出一些待执行的js代码，最后由我们的浏览器JavaScript解析引擎去解析执行。具体流程可看下图：
以上就简单介绍了一下我们的js是如何在浏览器中可以被运行并能操作DOM 和BOM 的原因。当然想了解更底层的东西，我们可以下去再查阅相关资料了解的更详细。
我们知道javaScript是在浏览器中的环境中去运行，去操作DOM 和 BOM 控制我们前端的一些动态效果的，让我们的网站能有动态效果。
前面大概解释了一下js如何去控制我们前端的效果，那nodejs和JavaScript到底是什么联系呢。
我们也回到最初的问题，Node.js是什么？
我们打开node的官网就能看到官网首页中第一句话：
Node.js® 是一个基于 Chrome V8 引擎 的 JavaScript 运行时环境。
我们突然明白，原来nodejs，就是一个JavaScript的运行环境，这就是他们的关系，只不过他是后端的JavaScript运行环境罢了。
既然是一个js的运行环境，那得和浏览器相似，得有js解析引擎吧，得有相关的内置API函数吧。
没错这些还真的有，我们看看nodejs的运行环境如下图：
几乎和浏览器js解析引擎结构一模一样，只是node运行环境是直接基于V8的引擎，内置API和浏览器中的不同。我们当时学js在浏览器中去操作非常重要的内置API函数DOM 和 BOM，现在我们学nodejs同样的学习js去操作我们相关的内置API模块。
我们可以总结如下：
浏览器中的 JavaScript 学习路径： JavaScript 基础语法 &#43; 浏览器内置 API（DOM &#43; BOM） &#43; 第三方库（jQuery、art-template 等） Node.js 的学习路径： JavaScript 基础语法 &#43; Node.js 内置 API 模块（fs、path、http等）&#43; 第三方 API 模块（express、mysql 等）
二、安装Node.js 1.3 Node." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/88bfc37a46ca2d07e822465112c60dc8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-24T11:56:45+08:00" />
<meta property="article:modified_time" content="2022-07-24T11:56:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">十分钟带你入门Nodejs</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>前言</strong>：</p> 
<p>        我们去学习一样东西时，一定不可盲目去摸索，必须得有目标，学完之后，应该是知其然，知其所以然。ok话不多说，进入今天的主题<strong>。</strong></p> 
<p> </p> 
<p>学习nodejs需要掌握的前置知识：html  css   javaScript</p> 
<hr> 
<p> </p> 
<h2><strong>一、什么是Node.js：</strong></h2> 
<p><strong>        </strong>大家看到Nodejs中的js有没有快速联想到我们的javaScript，我们可能会猜想他们必定存在某种联系，那他们之间到底有什么联系呢？请先让我们先粗略的回想一下js的内容，脑子里面立马浮现出js中的东西如下：</p> 
<p>        <img src="https://images2.imgbox.com/13/f0/4Ut0sH0G_o.png" alt="e727435a5f894431be3c58a6af9137ed.png"></p> 
<p>                    看到上面的内容是不是感到很熟悉，但是要想知道它与nodejs之间的联系，我们得先了解一下javaScript是如何在浏览器中执行的。</p> 
<p>        其实我们知道每个浏览器都有自己的javaScript解析引擎，浏览器中的javaScript引擎负责来解析和执行我们待执行的js代码。那么js是怎么去操作我们的DOM 和 BOM 呢。</p> 
<p>      <strong> 常见的浏览器引擎（V8 解析引擎性能最好）</strong>：</p> 
<p>      <img src="https://images2.imgbox.com/9a/d9/X5jJz3re_o.png" alt="45bd9e23b4df4ac78c587801aabd12fb.png"></p> 
<p>        原来每个浏览器中都提供有内置的BOM,DOM 这样的API函数，我们就可以根据这些内置的API函数编写出一些待执行的js代码，最后由我们的浏览器JavaScript解析引擎去解析执行。具体流程可看下图：</p> 
<p><img src="https://images2.imgbox.com/0f/1a/E3pwjSXv_o.png" alt="d4b3e43bac9c41a083c51e056a401dc0.png"></p> 
<p> 以上就简单介绍了一下我们的js是如何在浏览器中可以被运行并能操作DOM 和BOM 的原因。当然想了解更底层的东西，我们可以下去再查阅相关资料了解的更详细。</p> 
<p>        我们知道javaScript是在<strong>浏览器中的环境</strong>中去运行<strong>，去操作DOM 和 BOM </strong>控制我们前端的一些动态效果的，让我们的网站能有动态效果。</p> 
<p>        前面大概解释了一下js如何去控制我们前端的效果，那nodejs和JavaScript到底是什么联系呢。</p> 
<p><strong>我们也回到最初的问题，Node.js是什么？</strong></p> 
<p>        我们打开node的官网就能看到官网首页中第一句话：</p> 
<p><strong>    </strong>Node.js® 是一个基于 <a href="https://v8.dev/" rel="nofollow" title="Chrome V8 引擎">Chrome V8 引擎</a> 的 JavaScript 运行时环境。<img src="https://images2.imgbox.com/16/ef/R3FxI4po_o.png" alt="4bd54e2211064421847090dac1f3a958.png"><br>         我们突然明白，原来nodejs，就是一个JavaScript的运行环境，这就是他们的关系，只不过他是<strong>后端的JavaScript运行环境</strong>罢了。</p> 
<p>既然是一个js的运行环境，那得和浏览器相似，得有js解析引擎吧，得有相关的内置API函数吧。</p> 
<p>没错这些还真的有，我们看看nodejs的运行环境如下图：</p> 
<p>        <img src="https://images2.imgbox.com/96/c9/Q6DDNT2W_o.png" alt="a8f2f5f227504c9fb35e06140a08960e.png"></p> 
<p>         几乎和浏览器js解析引擎结构一模一样，只是node运行环境是直接基于V8的引擎，内置API和浏览器中的不同。我们当时学js在浏览器中去操作非常重要的内置API函数DOM 和 BOM，现在我们学nodejs同样的学习js去操作我们相关的内置API模块。</p> 
<p>我们可以总结如下：</p> 
<p><strong>浏览器中的 JavaScript 学习路径： JavaScript 基础语法 + 浏览器内置 API（DOM + BOM） + 第三方库（jQuery、art-template 等） </strong></p> 
<p><strong>Node.js 的学习路径： JavaScript 基础语法 + Node.js 内置 API 模块（fs、path、http等）+ 第三方 API 模块（express、mysql 等）</strong></p> 
<hr> 
<h3><strong>二、安装Node.js</strong></h3> 
<p>        1.3 Node.js 环境的安装 如果希望通过 Node.js 来运行 Javascript 代码，则必须在计算机上安装 Node.js 环境才行。 安装包可以从 Node.js 的官网首页直接下载，进入到 Node.js 的官网首页（https://nodejs.org/en/），点击 绿色的按钮，下载所需的版本后，双击后傻瓜式安装即可。这里就不多描述了，不会的可以查阅相关资料。</p> 
<p><img src="https://images2.imgbox.com/d8/78/oFcNaMlh_o.png" alt="837414d0bb0f41b8874dbecaa3d30ced.png"></p> 
<p> </p> 
<p>     <strong>注意</strong>： LTS 为长期稳定版，对于追求稳定性的企业级项目来说，推荐安装 LTS 版本的 Node.js。</p> 
<p>        安装之后win+R 输入cmd 打开终端，输入命令node -v后回车即可看到版本号证明安装成功。</p> 
<p><img src="https://images2.imgbox.com/a3/6d/J4H6glWz_o.png" alt="f63be8861e0744f4b325f715b7cb3d8d.png"></p> 
<p>这里我之前已经安装过，大家可以看到我的12.9.0版本，nodejs的版本迭代非常快,大家下载时可能版本都不同。</p> 
<p>有特殊版本要求的，这里给大家提供一个网址可以下载以往的版本。<a class="has-card" href="https://nodejs.org/zh-cn/download/releases/" rel="nofollow" title="以往的版本 | Node.js (nodejs.org)"><span class="link-card-box"><span class="link-title">以往的版本 | Node.js (nodejs.org)</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/d3/d0/fv0J6zFh_o.png">https://nodejs.org/zh-cn/download/releases/</span></span></a></p> 
<hr> 
<h2>三、Nodejs中的API模块学习</h2> 
<h2> 1. fs文件系统模块：</h2> 
<p>        fs 模块是 Node.js 官方提供的、用来操作文件的模块。它提供了一系列的方法和属性，用来满足用户对文件的操作需求。</p> 
<p>下面给出模块常用的两个方法示例：</p> 
<p> fs.readFile() 方法，用来读取指定文件中的内容 </p> 
<p>fs.writeFile() 方法，用来向指定的文件中写入内容</p> 
<p>如果要在 JavaScript 代码中，使用 fs 模块来操作文件，则需要使用如下的方式先导入它：</p> 
<pre><code class="language-javascript">const fs = require('fs')

//读取文件内容
fs.readFile('/file/a.txt','utf8',function(err,dataStr){
    if(err){
        return console.log(err.message)
    }
    console.log(dataStr)
})
 参数1：必选参数，字符串，表示文件的路径。
 参数2：可选参数，表示以什么编码格式来读取文件。
 参数3：必选参数，文件读取完成后，通过回调函数拿到读取的结果。


//向文件写入内容
fs.writeFile('/file/b.txt','hello node','utf-8',function(err){

    if(err){
        console.log(err.message)
    }
})
 参数1：必选参数，需要指定一个文件路径的字符串，表示文件的存放路径。
 参数2：必选参数，表示要写入的内容。
 参数3：可选参数，表示以什么格式写入文件内容，默认值是 utf8。
 参数4：必选参数，文件写入完成后的回调函数。</code></pre> 
<p>   <strong>写好js代码后我们如何在nodejs环境中运行js代码？</strong></p> 
<p><strong>        </strong>其实很简单，我们需要找到js文件所在文件夹，例如我的这个文件在该目录下</p> 
<p> </p> 
<p><img src="https://images2.imgbox.com/ed/7a/Rs0KCIb7_o.png" alt="6d300e95d5404b8c8dbf924ea820141b.png"></p> 
<p>在这个文件下打开终端输入node 空格 加上想要运行的js文件名称回车即可：</p> 
<p>       <img src="https://images2.imgbox.com/f9/3a/WTqfNehE_o.png" alt="a90ea3c37332408ba83a1e022a35d883.png"></p> 
<p> </p> 
<p> 上面两个方法读写文件的方法是不是很简单，如果使用java可能还要获取文件的流，还要 考虑是以字节数组读取还是字符流，现在一个方法就搞定。      </p> 
<p> <strong>注意</strong>：1.在使用fs模块操作文件时，如果提供的操作路径是以 ./ 或 ../ 开头的相对路径时，很容易出现路径动态拼接错误的问题。</p> 
<p>原因：代码在运行的时候，会以执行 node 命令时所处的目录，动态拼接出被操作文件的完整路径。</p> 
<p>解决方案：在使用 fs 模块操作文件时，直接提供完整的路径，不要提供 ./ 或 ../ 开头的相对路径，从而防止路径动态拼接的问题。</p> 
<p>               2.fs.writeFile() 方法只能用来创建文件，不能用来创建路径 ， 重复调用 fs.writeFile() 写入同一个文件，新写入的内容会覆盖之前的旧内容</p> 
<h3>2.path模块：</h3> 
<p>path 模块是 Node.js 官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对路径的处理 需求。</p> 
<p>下面以path模块的常用三个方法作为示例：</p> 
<p>        </p> 
<pre><code class="language-javascript">const path = require('path')


const = pathStr = path.join('/a','/b/c','./d','e')
console.log(pathStr) //输出 \a\b\d\e

const path1 = 'a/b/c/a.html'  //文件夹
const a =  path.extname(path1) //获取文件后缀名 .html
const b =  path.basename(path1)  //获取最后一个文件名  a.html

</code></pre> 
<p> 注意：今后凡是涉及到路径拼接的操作，都要使用 path.join() 方法进行处理。不要直接使用 + 进行字符串的拼接.</p> 
<h3>  3.http模块：</h3> 
<p>        在学习这个模块我们需要一些前置知识，需要了解一下服务器相关的知识。</p> 
<p>        我们可以简单回顾一下：什么是客户端、什么是服务器？</p> 
<p>        在网络节点中，负责消费资源的电脑，叫做客户端；</p> 
<p>        负责对外提供网络资源的电脑，叫做服务器（其实服务器和普通软件的区别就在于一个安装了web服务器软件而已）。</p> 
<p>        例如：IIS、Apache 等。通过安装这些服务器软件， 就能把一台普通的电脑变成一台 web 服务器。</p> 
<p>        而http 模块是 Node.js 官方提供的、用来创建 web 服务器的模块。通过 http 模块提供的 http.createServer() 方法，就能方便的把一台普通的电脑，变成一台 Web 服务器，从而对外提供 Web 资源服务。</p> 
<p>        都不需要第三方web服务器软件，可以基于 Node.js 提供的 http 模块，通过几行简单的代码，就能轻松的手写一个服务器软件，从而对外提供 web 服务。是不是感觉非常厉害。</p> 
<p> </p> 
<p><strong>那我们接下来就开始利用node中http这个模块创建一个简单的web服务器。</strong></p> 
<p><strong>        </strong></p> 
<pre><code class="language-javascript">//① 导入 http 模块
const http = require('http')

//② 创建 web 服务器实例
const server =  http.createServer()

//③ 为服务器实例绑定 request 事件，监听客户端的请求
server.on('request',function(req,res){
  const url = req.url
  const method = req.method
  const str = `Your request url is ${url}, and request method is ${method}`
  res.send('hello http!')

//④ 启动服务器
server.listen('8080',()=&gt;{
    console.log('server start in 8080')
})</code></pre> 
<p>       运行js文件启动后来到浏览器：输入localhost:8080访问即可看到如下图就说明服务器创建成功啦：</p> 
<p>        <img src="https://images2.imgbox.com/72/78/xU6wBKxt_o.png" alt="604c96d1088f4e86b954c1b28f54b205.png"></p> 
<p>        </p> 
<p>简单学习完上面内容以后我们已经对nodejs有了一个基本的概念，恭喜你已经成功入门node啦，如果的javaScript学的不错，那么学习node对你是非常简单。</p> 
<p>学习完部分node的内置模块，我们可以开始学习node的下一部分内容，<strong>模块化</strong>。</p> 
<hr> 
<h2>四. Node.js 中的模块化</h2> 
<p>        先了解一下模块化的概念：</p> 
<p>       <strong> 编程领域中的模块化，就是遵守固定的规则，把一个大文件拆成独立并互相依赖的多个小模块。 </strong></p> 
<p><strong>        把代码进行模块化拆分的好处： ① 提高了代码的复用性 ② 提高了代码的可维护性 ③ 可以实现按需加载。</strong></p> 
<p><strong>       </strong>Node.js 中根据模块来源的不同，将模块分为了 3 大类，分别是：</p> 
<p>       <strong> 内置模块</strong>（内置模块是由 Node.js 官方提供的，例如 fs、path、http 等）</p> 
<p>       <strong> 自定义模块</strong>（用户创建的每个 .js 文件，都是自定义模块）</p> 
<p>        <strong>第三方模块</strong>（由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载）</p> 
<p>下面介绍如何去分别加载这三类模块：</p> 
<pre><code class="language-javascript">//加载自定义模块
const fs =  require('./01_fs')

//加载内置模块
const path = require('path')

//加载第三方模块
const express = require('express')
</code></pre> 
<p>我们会发现加载内置模块和第三方模块方法都一样，写入模块名即可。自定义模块找到模块文件导入即可。</p> 
<p>当然导入<strong>自定义模块</strong>还有一些注意点：</p> 
<p>      <strong>  和函数作用域类似，在自定义模块中定义的变量、方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块 作用域。</strong></p> 
<p><strong>如果我们想让其他模块也能访问自定义模块的变量和方法怎么办？</strong></p> 
<p>        因为在每个 .js 自定义模块中都有一个 module 对象，它里面存储了和当前模块有关的信息，打印如下</p> 
<p><img src="https://images2.imgbox.com/22/4a/7Kyzb8AI_o.png" alt="c2729073748446108fd1a2b298e2730d.png"></p> 
<p>         在自定义模块中，可以使用 <strong>module.exports </strong>对象，将模块内的成员共享出去，供外界使用。 外界用 require() 方法导入自定义模块时，得到的就是 <strong>module.exports </strong>所指向的对象</p> 
<p>下面举一个例子：</p> 
<p>        <img src="https://images2.imgbox.com/d4/04/xxIpupk8_o.png" alt="2ea50ededc4b4a07b4dd8452f9b87857.png"></p> 
<p><strong>  注意：  Node.js 中的模块化规范 Node.js 遵循了 CommonJS 模块化规范，CommonJS 规定了模块的特性和各模块之间如何相互依赖。 </strong></p> 
<p><strong>        CommonJS 规定： ① 每个模块内部，module 变量代表当前模块。 ② module 变量是一个对象，它的 exports 属性（即 module.exports）是对外的接口。 ③ 加载某个模块，其实是加载该模块的 module.exports 属性。require() 方法用于加载模块。</strong></p> 
<p> </p> 
<p><strong>下面介绍两个常用第三方模块的导入和使用：</strong></p> 
<p><strong>        </strong>导入第三方模块前需要了解一下<strong>第三方模</strong>块和<strong>npm</strong>：</p> 
<p>        不同于 Node.js 中的内置模块与自定义模块，第三方模块是由第三方个人或团队开发出来的，免费供所有人使用。 其实第三方模块就是底层内置Api 封装出来的，这可以大大节省我们开发的效率。</p> 
<p>        那我们去哪里下载这些第三方模块呢？</p> 
<p>        国外有一家 IT 公司，叫做 <strong>npm, Inc</strong>. 这家公司旗下有一个非常著名的网站： <strong>https://www.npmjs.com/ </strong>，它是全球最 大的包共享平台，你可以从这个网站上搜索到任何你需要的包！ </p> 
<p>         npm, Inc. 公司提供了一个地址为 https://registry.npmjs.org/ 的服务器，来对外共享所有的包，我们可以从这个服务 器上下载自己所需要的包。</p> 
<p>npm, Inc. 公司提供了一个包管理工具，我们可以使用这个包管理工具，从 https://registry.npmjs.org/ 服务器把需要 的包下载到本地使用。</p> 
<p>        这个包管理工具的名字叫做 <strong>Node Package Manager（简称 npm 包管理工具）</strong>，这个包管理工具随着 Node.js 的安 装包一起被安装到了用户的电脑上。 大家可以在终端中执行 npm -v 命令，来查看自己电脑上所安装的 npm 包管理工具的版本号：</p> 
<p>        <img src="https://images2.imgbox.com/93/55/qaGIRJa9_o.png" alt="871ef1825fb44fb3a0c3b46214a73c2a.png"></p> 
<p> 如果想在项目中安装指定名称的包，需要运行如下的命令：</p> 
<pre><code>npm install 第三方模块的完整名称

可简写为
npm i 第三方模块的完整名称

指定版本
npm i 第三方模块的完整名称

删除第三方模块
npm unstall 第三方模块的完整名称</code></pre> 
<p>        初次装包完成后，在项目文件夹下多一个叫做 node_modules 的文件夹和 package-lock.json 的配置文件。 其中： node_modules 文件夹用来存放所有已安装到项目中的包。</p> 
<p>        require() 导入第三方包时，就是从这个目录中查找并加载包。 package-lock.json 配置文件用来记录 node_modules 目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等。</p> 
<p><strong>注意：程序员不要手动修改 node_modules 或 package-lock.json 文件中的任何代码，npm 包管理工具会自动维护它们。</strong></p> 
<p>这里我们下载一个第三方模块：</p> 
<pre><code>npm i express

</code></pre> 
<p> 还记得我们当初用内置模块http去创建一个简单的web服务器吗。</p> 
<p>现在我们使用第三方模块express去创建web服务器。</p> 
<p><strong>官方给出的概念：</strong></p> 
<p>Express 是基于 Node.js 平台，快速、开放、极简的 Web 开发框架。 通俗的理解：Express 的作用和 Node.js 内置的 http 模块类似，是专门用来创建 Web 服务器的。 Express 的本质：就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。</p> 
<p>Express 的中文官网： http://www.expressjs.com.cn/</p> 
<p>其实我们会思考为什么有了http还要使用第三方模块呢？</p> 
<p>http 内置模块用起来很复杂，开发效率低；Express 是基于内置的 http 模块进一步封装出来的，能够极大的提高开发效率。</p> 
<p><strong>       1.了解过后我们可以开始使用express创建web服务器！</strong></p> 
<pre><code class="language-javascript">//导入模块
const express = require('express')

//创建express实例
const app = express()

//启动服务
app.listen(80,()=&gt;{
    console.log('run 80 start...')
})</code></pre> 
<p><strong>        2.监听get请求方法：</strong></p> 
<pre><code class="language-javascript">
app.get('请求URL',(req,res)=&gt;{
   /*处理函数*/
})

//参数1：客户端请求的 URL地址
//参数2：请求对应的处理函数

//req :请求对象（包含了与请求相关的属性与方法）
//res :响应对象（包含了与响应相关的属性与方法） </code></pre> 
<p><strong>        3.监听post请求</strong></p> 
<pre><code class="language-javascript">app.post('请求URL',(req,res)=&gt;{
   /*处理函数*/
})

//参数1：客户端请求的 URL地址
//参数2：请求对应的处理函数

//req :请求对象（包含了与请求相关的属性与方法）
//res :响应对象（包含了与响应相关的属性与方法） </code></pre> 
<p><strong>4.express.static()</strong></p> 
<p>        express 提供了一个非常好用的函数，叫做 express.static()，通过它，我们可以非常方便地创建一个静态资源服务器， 例如，通过如下代码就可以将 public 目录下的图片、CSS 文件、JavaScript 文件对外开放访问了（可以托管多个文件夹）：</p> 
<p>先在项目中创建一个<strong>public文件和需要运行的js同级</strong>夹如下放入文件：</p> 
<p><img src="https://images2.imgbox.com/c3/4d/3iZ2D2Ur_o.png" alt="86473adaa38445819a594b09a83d8e3a.png"></p> 
<pre><code class="language-javascript">//导入模块
const express = require('express')

//创建express实例
const app = express()

app.use(express.static('public'))
//启动服务
app.listen(80,()=&gt;{
    console.log('run 80 start...')
})


现在，你就可以访问 public 目录中的所有文件了：
http://localhost/1.jpg
http://localhost/sww.css
http://localhost/sww.js</code></pre> 
<p>如果希望在托管的静态资源访问路径之前，挂载路径前缀，则可以使用如下的方式：</p> 
<pre><code class="language-javascript">app.use('/sww',express.static('public'))

//则需要访问http://localhost/sww/1.jpg</code></pre> 
<p>express第三方模块中还有例如<strong>路由，中间件（非常重要，一定要去学习！！！）</strong>等功能，详细的使用你可以访问他的官网（ http://www.expressjs.com.cn/）去学习使用。</p> 
<p>下面再学习一个比较重要的第三方模块（cors）：</p> 
<p>        <strong>cors 是 Express 的一个第三方中间件。通过安装和配置 cors 中间件，可以很方便地解决跨域问题。</strong></p> 
<p>        先来说说什么是跨域问题。</p> 
<p>       <strong> CORS （Cross-Origin Resource Sharing，跨域资源共享）由一系列 HTTP 响应头组成，这些 HTTP 响应头决定 浏览器是否阻止前端 JS 代码跨域获取资源。</strong></p> 
<p><strong>         浏览器的同源安全策略默认会阻止网页“跨域”获取资源。但如果接口服务器配置了 CORS 相关的 HTTP 响应头， 就可以解除浏览器端的跨域访问限制。</strong></p> 
<p><strong>说白了，就是浏览器为了安全，不允许跨域请求资源，除非你在响应的时候配置了可以跨域访问资源。</strong></p> 
<p><strong>① CORS 主要在服务器端进行配置。客户端浏览器无须做任何额外的配置，即可请求开启了 CORS 的接口。</strong></p> 
<p><strong>② CORS 在浏览器中有兼容性。只有支持 XMLHttpRequest Level2 的浏览器，才能正常访问开启了 CORS 的服 务端接口（例如：IE10+、Chrome4+、FireFox3.5+）</strong></p> 
<p><strong>        </strong></p> 
<p><strong>      </strong><br>         可以通过以下方法解决：</p> 
<p><img src="https://images2.imgbox.com/27/2f/sQzcYjXz_o.png" alt="ed391d65abb04adeafadb3d649105236.png"></p> 
<p> <img src="https://images2.imgbox.com/31/75/cZBR2737_o.png" alt="05b20d8f9e914c85884beeab7172dfeb.png"></p> 
<p>        上面的方法完全可以帮我们解决跨域问题，但是稍微有些麻烦。所以我们使用第三方模块去帮我们解决跨域。 </p> 
<p>使用cors中间件解决：</p> 
<pre><code> 
使用步骤分为如下 3 步：
 ① 运行 npm install cors 安装中间件
 ② 使用 const cors = require('cors') 
 ③ 在路由之前调用 app.use(cors()) 配置中间件

</code></pre> 
<p>当然解决跨域问题还有其他解决方法：例如 JSONP，但是这是有缺陷的解决方案：只支持 GET 请求。</p> 
<p>最后就是作为后端，怎么能不连接数据库呢！</p> 
<hr> 
<h2>五、数据库模块</h2> 
<p>使用如下：</p> 
<ol><li>安装 mysql 模块</li></ol> 
<pre><code>npm install mysql
</code></pre> 
<ol><li>建立连接，下面得配置你自己的数据库名和密码</li></ol> 
<pre><code class="language-javascript">const mysql = require('mysql')

const db = mysql.createPool({
  host: '127.0.0.1',
  user: 'root',
  password: '12345',
  database: 'test2',
})
</code></pre> 
<ol><li>测试是否正常工作</li></ol> 
<p>         我的表数据库表和数据：</p> 
<p>        <img src="https://images2.imgbox.com/a6/db/Vj2iPasS_o.png" alt="1b739eb948aa419eba076925b517b38f.png"></p> 
<p> </p> 
<p> </p> 
<pre><code class="language-javascript">db.query('select * from tb_user',(err,res)=&gt;{
        if (err) return console.log(err.message)
        console.log(res)
      })</code></pre> 
<p>      2. 成功查询出数据：</p> 
<p>        <img src="https://images2.imgbox.com/99/ea/ZOBZp8kH_o.png" alt="d4c611a59cdc41aeabb949866d0b6317.png"></p> 
<p> </p> 
<p>        3.插入数据</p> 
<pre><code class="language-javascript">// ? 表示占位符
const sql = 'insert into users values(?, ?)'
// 使用数组的形式为占位符指定具体的值
db.query(sql, [username, password], (err, results) =&gt; {
  if (err) return console.log(err.message)
  if (results.affectedRows === 1) console.log('插入成功')
})
</code></pre> 
<p> </p> 
<p>向表中新增数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据：</p> 
<pre><code class="language-javascript">const user = {username:'Bruce', password:'55520'}
const sql = 'insert into users set ?'
db.query(sql, user, (err, results) =&gt; {
  ...
})
</code></pre> 
<p> </p> 
<ol><li>更新数据</li></ol> 
<pre><code class="language-javascript">const sql = 'update users set username=?, password=? where id=?'
db.query(sql, [username, password, id], (err, results) =&gt; {
  ...
})
</code></pre> 
<p> </p> 
<p>快捷方式：</p> 
<pre><code class="language-javascript">const user = {id:7,username:'Bruce',password:'55520'}
const sql = 'update users set ? where id=?'
db.query(sql, [user, user.id], (err, results) =&gt; {
  ...
})
</code></pre> 
<p> </p> 
<ol><li>删除数据</li></ol> 
<pre><code class="language-javascript">const sql = 'delete from users where id=?'
db.query(sql, id, (err, results) =&gt; {
  ...
})
</code></pre> 
<p>上面就是简单使用第三方模块mysql 对数据库进行了简单的增 删 查 改。</p> 
<p>        到这里node差不多你就算是入门了，有时候我们学习一样东西，可能当时不明白，但是我们可以先记住它的用法，到后面经验丰富了，你再回头看，自然而然会慢慢理解。</p> 
<p>未完待续......</p> 
<p>    </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a75181c34fd75986c4f120c612dc8fb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA如何安装主题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/974a0cee27bce0c34f7f7db22f94e67f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">25.消息订阅与发布——PubSub-js</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>