<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络爬虫-破解京东滑块验证码 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络爬虫-破解京东滑块验证码" />
<meta property="og:description" content="最近一直在研究滑块验证码这一块，接连破解了极验2.0，极验3.0以及淘宝滑块，当然了，只是使用selenium模拟过，拿到cookie后进行后续操作。 今天就讲讲京东这个滑块验证码，神坑，之前的轨迹方程全部不可用，需要自己慢慢调试，找到最佳参数，最大化模拟人为操作才能过，目前我过的几率为80%左右。 京东登陆页面 京东这个滑块验证码的最大的坑就在于 大量的模拟人为的轨迹方程都被封了 比如过极验2 极验3的轨迹，都无法在京东的滑块上面使用，并且原图也是无法找到的，只会在页面上给你有缺口的base64图片。
经过反复试验，发现京东的滑块验证码，共10张图片，现在就是下载京东图片的时候了，然后用PIL分割拼接，制作成我下面的这种图片。
前面的那一部分可以不用考虑，因为滑块的开始地方就是这个滑块的右方，比如这张图的大小是281 x 109，缺口图的大小是38 x 38，那么对比的地方则是 (281 - 38) * 109
对比的方式以及下载原图缺口图，找出距离的地方就不再累赘，做过滑块验证码的童鞋应该都知道，都是那一套方案反复使用。代码如下：
def is_pixel_equal(self, img1, img2, x, y): &#34;&#34;&#34; 判断两个像素是否相同 :param image1: 图片1 :param image2: 图片2 :param x: 位置x :param y: 位置y :return: 像素是否相同 &#34;&#34;&#34; # 取两个图片的像素点 pix1 = img1.load()[x, y] pix2 = img2.load()[x, y] threshold = 60 if (abs(pix1[0] - pix2[0] &lt; threshold) and abs(pix1[1] - pix2[1] &lt; threshold) and abs( pix1[2] - pix2[2] &lt; threshold)): return True else: return False def get_gap(self, img1, img2): &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/80e9a1452d8367b2fc15134bef652f1d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-31T15:31:45+08:00" />
<meta property="article:modified_time" content="2018-10-31T15:31:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络爬虫-破解京东滑块验证码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="2030seleniumcookie_0"></a>最近一直在研究滑块验证码这一块，接连破解了极验2.0，极验3.0以及淘宝滑块，当然了，只是使用selenium模拟过，拿到cookie后进行后续操作。</h2> 
<h2><a id="80_2"></a>今天就讲讲京东这个滑块验证码，神坑，之前的轨迹方程全部不可用，需要自己慢慢调试，找到最佳参数，最大化模拟人为操作才能过，目前我过的几率为80%左右。</h2> 
<h2><a id="httpspassportjdcomnewloginaspxReturnUrlhttpswwwjdcom_4"></a><a href="https://passport.jd.com/new/login.aspx?ReturnUrl=https://www.jd.com/" rel="nofollow">京东登陆页面</a></h2> 
<p><img src="https://images2.imgbox.com/a4/4f/lGvl0Gre_o.png" alt="在这里插入图片描述"></p> 
<p>京东这个滑块验证码的最大的坑就在于 大量的模拟人为的轨迹方程都被封了 比如过极验2 极验3的轨迹，都无法在京东的滑块上面使用，并且原图也是无法找到的，只会在页面上给你有缺口的base64图片。</p> 
<p>经过反复试验，发现京东的滑块验证码，共10张图片，现在就是下载京东图片的时候了，然后用PIL分割拼接，制作成我下面的这种图片。<br> <img src="https://images2.imgbox.com/0a/9c/Rbm4eCqu_o.png" alt="在这里插入图片描述"><br> 前面的那一部分可以不用考虑，因为滑块的开始地方就是这个滑块的右方，比如这张图的大小是281 x 109，缺口图的大小是38 x 38，那么对比的地方则是 (281 - 38) * 109</p> 
<p>对比的方式以及下载原图缺口图，找出距离的地方就不再累赘，做过滑块验证码的童鞋应该都知道，都是那一套方案反复使用。代码如下：</p> 
<pre><code>    def is_pixel_equal(self, img1, img2, x, y):
        """
        判断两个像素是否相同
        :param image1: 图片1
        :param image2: 图片2
        :param x: 位置x
        :param y: 位置y
        :return: 像素是否相同
        """
        # 取两个图片的像素点
        pix1 = img1.load()[x, y]
        pix2 = img2.load()[x, y]
        threshold = 60
        if (abs(pix1[0] - pix2[0] &lt; threshold) and abs(pix1[1] - pix2[1] &lt; threshold) and abs(
                pix1[2] - pix2[2] &lt; threshold)):
            return True
        else:
            return False

    def get_gap(self, img1, img2):
        """
        获取缺口偏移量
        :param img1: 不带缺口图片
        :param img2: 带缺口图片
        :return:
        """
        left = 45
        for i in range(left, img1.size[0]):
            for j in range(img1.size[1]):
                if not self.is_pixel_equal(img1, img2, i, j):
                    left = i
                    return left
        return left
</code></pre> 
<h2><a id="_52"></a>这里提供一个轨迹方程(针对京东最好是多做几个，因为人家机器学习啊，封你没商量）</h2> 
<pre><code>    def get_track7(self, distance):
        """
        根据偏移量和手动操作模拟计算移动轨迹
        :param distance: 偏移量
        :return: 移动轨迹
        """
        # 移动轨迹
        tracks = []
        # 当前位移
        current = 0
        # 减速阈值
        mid = distance * 4 / 5
        # 时间间隔
        t = 0.2
        # 初始速度
        v = 0

        while current &lt; distance:
            if current &lt; mid:
                a = random.uniform(2, 5)
            else:
                a = -(random.uniform(12.5, 13.5))
            v0 = v
            v = v0 + a * t
            x = v0 * t + 1 / 2 * a * t * t
            current += x

            if 0.6 &lt; current - distance &lt; 1:
                x = x - 0.53
                tracks.append(round(x, 2))

            elif 1 &lt; current - distance &lt; 1.5:
                x = x - 1.4
                tracks.append(round(x, 2))
            elif 1.5 &lt; current - distance &lt; 3:
                x = x - 1.8
                tracks.append(round(x, 2))

            else:
                tracks.append(round(x, 2))

        print(tracks, sum(tracks))
        return tracks
</code></pre> 
<p>OK</p> 
<p>最后献上破解京东滑块的运行图~</p> 
<p><img src="https://images2.imgbox.com/8d/be/ml7JwMUC_o.gif" alt="在这里插入图片描述"></p> 
<p>大家也可以优化一下这个算法，提高成功率！<br> 欢迎留言，以及探讨验证码的算法问题。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c8fb009d6d7a5cfcc1b46413697fcc2b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c&#43;&#43; 11 实现简单 signal slot</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0b47d82e2e28fa15f0692da272cd9585/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">zoj 4027  2018浙江acm省赛 Problem D. Sequence Swapping</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>