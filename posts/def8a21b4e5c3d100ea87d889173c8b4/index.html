<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python 人脸识别调整人脸大的距离_Python 人脸识别就多简单，看这个就够了！ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python 人脸识别调整人脸大的距离_Python 人脸识别就多简单，看这个就够了！" />
<meta property="og:description" content="原标题：Python 人脸识别就多简单，看这个就够了！
基于业内领先的 C&#43;&#43; 开源库 dlib 中的深度学习模型，用 Labeled Faces in the Wild 人脸数据集进行测试，有高达99.38%的准确率。
1.安装
最好是使用 Linux 或 Mac 环境来安装，Windows 下安装会有很多问题。在安装 face_recognition 之前你需要先安装以下几个库，注意顺序!
1.1 先安装 cmake 和 boostpip installcmake
pip installboost
1.2 安装 dlibpipinstall dlib
此处安装可能要几分钟。如安装出错，建议使用 whl 文件来安装
下载地址：https://pypi.org/simple/dlib/
1.3 安装 face_recognition
face_recongnition 一般要配合 opencv 一起使用
pip installface_recognition
pip installopencv-python
2. 人脸识别
首先获取人脸中的信息
kobe_image = face_recognition.load_image_file( &#34;kobe.jpg&#34;) # 已知科比照片
jordan_image = face_recognition.load_image_file( &#34;jordan.jpeg&#34;) # 已知乔丹照片
unknown_image = face_recognition.load_image_file( &#34;unkown.jpeg&#34;) # 未知照片" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/def8a21b4e5c3d100ea87d889173c8b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-09T08:43:05+08:00" />
<meta property="article:modified_time" content="2021-02-09T08:43:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python 人脸识别调整人脸大的距离_Python 人脸识别就多简单，看这个就够了！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>原标题：Python 人脸识别就多简单，看这个就够了！</p> 
 <p>基于业内领先的 C++ 开源库 dlib 中的深度学习模型，用 Labeled Faces in the Wild 人脸数据集进行测试，有高达99.38%的准确率。</p> 
 <p>1.安装</p> 
 <p>最好是使用 Linux 或 Mac 环境来安装，Windows 下安装会有很多问题。在安装 face_recognition 之前你需要先安装以下几个库，注意顺序!</p> 
 <p>1.1 先安装 cmake 和 boostpip installcmake</p> 
 <p>pip installboost</p> 
 <p>1.2 安装 dlibpipinstall dlib</p> 
 <p>此处安装可能要几分钟。如安装出错，建议使用 whl 文件来安装</p> 
 <p>下载地址：https://pypi.org/simple/dlib/</p> 
 <p>1.3 安装 face_recognition</p> 
 <p>face_recongnition 一般要配合 opencv 一起使用</p> 
 <p>pip installface_recognition</p> 
 <p>pip installopencv-python</p> 
 <p>2. 人脸识别</p> 
 <p align="center"><img src="https://images2.imgbox.com/4a/98/Z1RM0AHg_o.png" alt="af5278e4cc1215cc6951a1ddaa0b4038.png"></p> 
 <p>首先获取人脸中的信息</p> 
 <p>kobe_image = face_recognition.load_image_file( "kobe.jpg") # 已知科比照片</p> 
 <p>jordan_image = face_recognition.load_image_file( "jordan.jpeg") # 已知乔丹照片</p> 
 <p>unknown_image = face_recognition.load_image_file( "unkown.jpeg") # 未知照片</p> 
 <p>kobe_face_encoding = face_recognition.face_encodings(kobe_image)[ 0]</p> 
 <p>jordan_face_encoding = face_recognition.face_encodings(jordan_image)[ 0]</p> 
 <p>unknown_face_encoding = face_recognition.face_encodings(unknown_image)[ 0]</p> 
 <p>代码中前三行分别是加载三张图片文件并返回图像的 numpy 数组，后三行返回图像中每个面部的人脸编码</p> 
 <p>然后将未知图片中的人脸和已知图片中的人脸进行对比，使用 compare_faces 函数， 代码如下：</p> 
 <p>known_faces = [</p> 
 <p>kobe_face_encoding,</p> 
 <p>jordan_face_encoding</p> 
 <p>]</p> 
 <p>results = face_recognition.compare_faces(known_faces, unknown_face_encoding) # 识别结果列表</p> 
 <p>print( "这张未知照片是科比吗? {}".format(results[0]))</p> 
 <p>print( "这张未知照片是乔丹吗? {}".format(results[1]))</p> 
 <p>运行结果如下：</p> 
 <p align="center"><img src="https://images2.imgbox.com/90/7f/aEzEi2FC_o.png" alt="647fbd798075c2aaef1445eaa173d6a6.png"></p> 
 <p>3. 人脸标注</p> 
 <p>face_locations = face_recognition.face_locations(unknown_image)</p> 
 <p>face_encodings = face_recognition.face_encodings(unknown_image, face_locations)</p> 
 <p>函数传入两个参数 ，返回以上，右，下，左固定顺序的脸部位置列表的作用是将已知脸部位置和未知面部编码进行比较，得到欧式距离~~~具体是什么我也不知道，距离就相当于相识度。</p> 
 <p align="center"><img src="https://images2.imgbox.com/b4/fd/Zx8EhH1x_o.gif" alt="7b1f8a2ea7f7c43b58edec42d9772ed1.gif"></p> 
 <p>函数说明：face_distance(face_encodings, face_to_compare)</p> 
 <p>face_encodings：已知的面部编码</p> 
 <p>face_to_compare：要比较的面部编码</p> 
 <p>本次图片前面两张没有变化，第三张换成了科比和乔丹的合影，最终运行之后结果如下:</p> 
 <p align="center"><img src="https://images2.imgbox.com/2c/0d/DykdF7yi_o.png" alt="4795eb8519d8df7910d28b2f3dca698e.png"></p> 
 <p>importface_recognition</p> 
 <p>fromPIL importImage, ImageDraw</p> 
 <p>importnumpy asnp</p> 
 <p>defdraws:</p> 
 <p>kobe_image = face_recognition.load_image_file( "kobe.jpg")</p> 
 <p>kobe_face_encoding = face_recognition.face_encodings(kobe_image)[ 0]</p> 
 <p>jordan_image = face_recognition.load_image_file( "jordan.jpeg")</p> 
 <p>jordan_face_encoding = face_recognition.face_encodings(jordan_image)[ 0]</p> 
 <p>known_face_encodings = [</p> 
 <p>kobe_face_encoding,</p> 
 <p>jordan_face_encoding</p> 
 <p>]</p> 
 <p>known_face_names = [</p> 
 <p>"Kobe",</p> 
 <p>"Jordan"</p> 
 <p>]</p> 
 <p>unknown_image = face_recognition.load_image_file( "two_people.jpeg")</p> 
 <p>face_locations = face_recognition.face_locations(unknown_image)</p> 
 <p>face_encodings = face_recognition.face_encodings(unknown_image, face_locations)</p> 
 <p>pil_image = Image.fromarray(unknown_image)</p> 
 <p>draw = ImageDraw.Draw(pil_image)</p> 
 <p>for(top, right, bottom, left), face_encoding inzip(face_locations, face_encodings):</p> 
 <p>matches = face_recognition.compare_faces(known_face_encodings, face_encoding)</p> 
 <p>name = "Unknown"</p> 
 <p>face_distances = face_recognition.face_distance(known_face_encodings, face_encoding)</p> 
 <p>best_match_index = np.argmin(face_distances)</p> 
 <p>ifmatches[best_match_index]:</p> 
 <p>name = known_face_names[best_match_index]</p> 
 <p>draw.rectangle(((left, top), (right, bottom)), outline=( 0, 0, 255))</p> 
 <p>text_width, text_height = draw.textsize(name)</p> 
 <p>draw.rectangle(((left, bottom - text_height - 10), (right, bottom)), fill=( 0, 0, 255), outline=( 0, 0, 255))</p> 
 <p>draw.text((left + 6, bottom - text_height - 5), name, fill=( 255, 255, 255, 255))</p> 
 <p>deldraw</p> 
 <p>pil_image.show</p> 
 <p>pil_image.save( "image_with_boxes.jpg")</p> 
 <p>4. 给人脸美妆</p> 
 <p>image = face_recognition.load_image_file( "bogute.jpeg")</p> 
 <p>face_landmarks_list = face_recognition.face_landmarks(image)</p> 
 <p>遍历列表中的元素，修改眉毛</p> 
 <p>d.polygon(face_landmarks[ 'left_eyebrow'], fill=( 68, 54, 39, 128))</p> 
 <p>d.polygon(face_landmarks[ 'right_eyebrow'], fill=( 68, 54, 39, 128))</p> 
 <p>d.line(face_landmarks[ 'left_eyebrow'], fill=( 68, 54, 39, 150), width= 5)</p> 
 <p>d.line(face_landmarks[ 'right_eyebrow'], fill=( 68, 54, 39, 150), width= 5)</p> 
 <p>给人脸涂口红</p> 
 <p>d.polygon(face_landmarks[ 'top_lip'], fill=( 150, 0, 0, 128))</p> 
 <p>d.polygon(face_landmarks[ 'bottom_lip'], fill=( 150, 0, 0, 128))</p> 
 <p>d.line(face_landmarks[ 'top_lip'], fill=( 150, 0, 0, 64), width= 8)</p> 
 <p>d.line(face_landmarks[ 'bottom_lip'], fill=( 150, 0, 0, 64), width= 8)</p> 
 <p>增加眼线</p> 
 <p>d.polygon(face_landmarks[ 'left_eye'], fill=( 255, 255, 255, 30))</p> 
 <p>d.polygon(face_landmarks[ 'right_eye'], fill=( 255, 255, 255, 30))</p> 
 <p>d.line(face_landmarks[ 'left_eye'] + [face_landmarks[ 'left_eye'][ 0]], fill=( 0, 0, 0, 110), width= 6)</p> 
 <p>d.line(face_landmarks[ 'right_eye'] + [face_landmarks[ 'right_eye'][ 0]], fill=( 0, 0, 0, 110), wid= 6)</p> 
 <p>根据以上代码做了，我用实力不行，打球又脏的 "大嘴" 博格特来做演示！</p> 
 <p>左边是原图，右边是加了美妆后的效果</p> 
 <p align="center"><img src="https://images2.imgbox.com/4b/2d/TzQvLhjK_o.png" alt="92b7b64cee728ac1d570282d7e7546f8.png"></p> 
 <p>你打球的样子像极了 cxk!</p> 
 <p>责任编辑：</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e90ce415163d375b5e5a436fb69c8931/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js成绩奖惩例题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b677bcb9bd43a224f035af4d2f5a695/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">樊昌信 通信原理第七版 第九章思考题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>