<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【PTA练习】L2-4 部落 （25 分）以例子总结讲解并查集 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【PTA练习】L2-4 部落 （25 分）以例子总结讲解并查集" />
<meta property="og:description" content="L2-4 部落 （25 分） 试题链接：https://pintia.cn/problem-sets/976473537405652992/problems/976477039905349643
这次自己总结一下并查集！（题目在后半部分，看题解的直接跳转后半段吧）
并查集 并查集是一种维护集合的数据结构，主要含有查找和合并两个操作
合并：将两个集合或元素合并成一个。
查找：查找两个元素是不是在同一个集合中。
其实现通过设立一个father数组，顾名思义就是一个父亲结点数组，记录这一个结点的上一结点（父亲结点），并且父亲结点也在这个集合内。
注意：同一个集合中应该只存在一个根节点，这个根节点应该是这个集合中所有结点的根节点，是整个这个结合的一个标识点。
如下图，几个结点在father中的表示结果：
fa[1]=1;
fa[2]=1;
fa[3]=2;
fa[4]=2;
fa[5]=5;
fa[6]=6;
接下来说并查集中模板步骤：
1.初始化
一开始所有的结点都是独立离散的，那么就要将其的父亲结点设为他们自己来表示自己是独立的点。
代码：
for(int i=0;i&lt;n;i&#43;&#43;){ father[i] = i; } 2.查找
前面说了一个结点在一个集合中必有一个根节点来表示这个集合，那么我们可以通过递推与递归的方式不断查找父亲结点，从而层层深入找到根节点老祖宗啊！必须注明一点：递推就是比递归要慢！别问我为什么，问就是不跟你讲！哈哈哈
递推代码：
int find(int x){//此函数是返回元素x所在集合的根节点。 while(x!=fa[therx]){ //当爸爸不是老祖宗结点时候 x = father[x];//现在我是爸爸，我去找爸爸的爸爸！ } return x; } 递归代码：
int find(int x){ if(father[x]==x){	//如果我就是祖宗结点那么就返回祖宗结点 return x; }else{ //如果不是，就判断爸爸是不是祖宗结点 return find(father[x]); } } 3.合并
将两个集合或元素合并成一个集合，注明此时只有属于两个不同集合的元素或集合才能合并！所以主要分两步：判断这俩人是不是一家的，如果不是那么可以联姻一下子成为一家子对吧。emmm好好讲话：对于两个给定的元素a和b，判断是不是属于一个集合的，如果不是那么就进行第二步骤合并。
代码：
void Union(int a, int b){ int fathera = find(a);	//查找a的祖宗 int fatherb = find(b);	//查找b的祖宗 if(fathera!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/034d374b99dd73537fc0d36b26baf945/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-01T17:57:12+08:00" />
<meta property="article:modified_time" content="2019-03-01T17:57:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【PTA练习】L2-4 部落 （25 分）以例子总结讲解并查集</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="L24__25__0"></a>L2-4 部落 （25 分）</h3> 
<p>试题链接：<a href="https://pintia.cn/problem-sets/976473537405652992/problems/976477039905349643" rel="nofollow">https://pintia.cn/problem-sets/976473537405652992/problems/976477039905349643</a><br> 这次自己总结一下并查集！（题目在后半部分，看题解的直接跳转后半段吧）</p> 
<hr> 
<h3><a id="_5"></a><em><strong>并查集</strong></em></h3> 
<p>并查集是一种维护集合的数据结构，主要含有<strong>查找</strong>和<strong>合并</strong>两个操作<br> 合并：将两个集合或元素合并成一个。<br> 查找：查找两个元素是不是在同一个集合中。<br> 其实现通过设立一个father数组，顾名思义就是一个父亲结点数组，记录这一个结点的上一结点（父亲结点），并且父亲结点也在这个集合内。<br> <strong>注意：同一个集合中应该只存在一个根节点，这个根节点应该是这个集合中所有结点的根节点，是整个这个结合的一个标识点。</strong><br> 如下图，几个结点在father中的表示结果：<br> fa[1]=1;<br> fa[2]=1;<br> fa[3]=2;<br> fa[4]=2;<br> fa[5]=5;<br> fa[6]=6;<br> <img src="https://images2.imgbox.com/66/90/8YhHk8bj_o.png" alt="在这里插入图片描述"><br> 接下来说并查集中模板步骤：<br> <strong>1.初始化</strong><br> 一开始所有的结点都是独立离散的，那么就要将其的父亲结点设为他们自己来表示自己是独立的点。<br> 代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        father<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>2.查找</strong><br> 前面说了一个结点在一个集合中必有一个根节点来表示这个集合，那么我们可以通过递推与递归的方式不断查找父亲结点，从而层层深入找到根节点老祖宗啊！<strong>必须注明一点：递推就是比递归要慢！别问我为什么，问就是不跟你讲！哈哈哈</strong><br> 递推代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//此函数是返回元素x所在集合的根节点。</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>x<span class="token operator">!=</span>fa<span class="token punctuation">[</span>therx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//当爸爸不是老祖宗结点时候</span>
        x <span class="token operator">=</span> father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//现在我是爸爸，我去找爸爸的爸爸！</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>递归代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	<span class="token comment">//如果我就是祖宗结点那么就返回祖宗结点</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//如果不是，就判断爸爸是不是祖宗结点</span>
        <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>3.合并</strong><br> 将两个集合或元素合并成一个集合，注明此时只有属于两个不同集合的元素或集合才能合并！所以主要分两步：判断这俩人是不是一家的，如果不是那么可以联姻一下子成为一家子对吧。emmm好好讲话：对于两个给定的元素a和b，判断是不是属于一个集合的，如果不是那么就进行第二步骤合并。<br> 代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Union</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> fathera <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//查找a的祖宗</span>
    <span class="token keyword">int</span> fatherb <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//查找b的祖宗</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fathera<span class="token operator">!=</span>fatherb<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>		<span class="token comment">//不是一个祖宗的，就可以努力成为一家子啊</span>
        fa<span class="token punctuation">[</span>fatherb<span class="token punctuation">]</span> <span class="token operator">=</span> fathera<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>注意啊！！！不能简单的将这个元素的父亲就设为另外一个元素啊，注意的是这一句啊fa[fatherb] = fathera;，而不是fa[b] = fathera啊！！！！我一开始就错在这里了啊！！！</strong></p> 
<h3><a id="findac_67"></a>接下来就是对简单的并查集的查找函数find的优化(下面例题一开始没有ac就是因为没有优化而导致运行超时了！)</h3> 
<p>优化等于路径压缩，即：<img src="https://images2.imgbox.com/ab/d0/ii6bznbU_o.png" alt="在这里插入图片描述"><br> 原来需要不断通过查找父节点来找到祖宗结点，此时只需要将这个集合里所有结点的父亲结点都指向祖宗结点即可！<br> 递推代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>		<span class="token comment">//此函数是返回元素x所在集合的根节点。</span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> x<span class="token punctuation">;</span>			<span class="token comment">//x会在下面变成根节点，在此先进行保存。</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>x<span class="token operator">!=</span>fa<span class="token punctuation">[</span>therx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	 <span class="token comment">//当爸爸不是老祖宗结点时候</span>
        x <span class="token operator">=</span> father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">//现在我是爸爸，我去找爸爸的爸爸！</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//此时x为根节点，修改此集合中所有结点父亲结点为根节点</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>a <span class="token operator">!=</span> father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> z <span class="token operator">=</span> a<span class="token punctuation">;</span>           <span class="token comment">//因为a要背father[a]覆盖，先存一下a的值，用以修改father[a]的值</span>
			a <span class="token operator">=</span> father<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//a要回溯父亲结点</span>
			father<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token comment">//将原先的结点a的父亲结点改为根节点。</span>
	<span class="token punctuation">}</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>递归代码：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>	<span class="token comment">//如果我就是祖宗结点那么就返回祖宗结点</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">//如果不是，就判断爸爸是不是祖宗结点</span>
        <span class="token keyword">return</span> father<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//直接将根节点赋值为当前结点的父亲结点</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="_102"></a>题目：</h3> 
<p>在一个社区里，每个人都有自己的小圈子，还可能同时属于很多不同的朋友圈。我们认为朋友的朋友都算在一个部落里，于是要请你统计一下，在一个给定社区中，到底有多少个互不相交的部落？并且检查任意两个人是否属于同一个部落。<br> <strong>输入格式：</strong><br> 输入在第一行给出一个正整数N（≤10^​4），是已知小圈子的个数。随后N行，每行按下列格式给出一个小圈子里的人：K P[1] P[2] ⋯ P[K]，其中K是小圈子里的人数，P[i]（i=1,⋯,K）是小圈子里每个人的编号。这里所有人的编号从1开始连续编号，最大编号不会超过<br> 10^​4。之后一行给出一个非负整数Q（≤10 ^4），是查询次数。随后Q行，每行给出一对被查询的人的编号。<br> <strong>输出格式：</strong><br> 首先在一行中输出这个社区的总人数、以及互不相交的部落的个数。随后对每一次查询，如果他们属于同一个部落，则在一行中输出Y，否则输出N。<br> <strong>输入样例：</strong></p> 
<blockquote> 
 <p>4<br> 3 10 1 2<br> 2 3 4<br> 4 1 5 7 8<br> 3 9 6 4<br> 2<br> 10 5<br> 3 7</p> 
</blockquote> 
<p><strong>输出样例：</strong></p> 
<blockquote> 
 <p>10 2<br> Y<br> N</p> 
</blockquote> 
<p><strong>大致思路：</strong> 思路就是大概的并查集思路，其中存点的时候就有一点是用了set存点，直接去除重复点来计算共有多少结点！易错易超时的地方就是find函数一定要用优化版本的find函数，不然会超时，其他地方没有什么复杂的地方了！<br> <strong>具体代码如下：</strong></p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h&gt;</span></span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">int</span> fa<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> s<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Union</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> fathera <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> fatherb <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fathera<span class="token operator">!=</span>fatherb<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        fa<span class="token punctuation">[</span>fatherb<span class="token punctuation">]</span> <span class="token operator">=</span> fathera<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ios<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> q<span class="token punctuation">,</span> q1<span class="token punctuation">,</span> q2<span class="token punctuation">;</span>
    cin<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10005</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        fa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
        flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> k<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        cin<span class="token operator">&gt;&gt;</span>k<span class="token operator">&gt;&gt;</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>k<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cin<span class="token operator">&gt;&gt;</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
            s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Union</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>iterator it<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>it<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it<span class="token operator">!=</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
            flag<span class="token punctuation">[</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span>num<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    cin<span class="token operator">&gt;&gt;</span>q<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>q<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cin<span class="token operator">&gt;&gt;</span>q1<span class="token operator">&gt;&gt;</span>q2<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">find</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">find</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"Y"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"N"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>之前就做过并查集的题啦，但是感觉看别人的博客很容易就看懂，但是看完看会之后总还是不够清晰，这次决定自己把脑子里的知识梳理一下，总结一下并查集。继续坚持！一起加油！</p> 
<p>这两天准备天梯赛又做了一遍，然后把这版的代码记录一下。再看自己的代码，都忘记之前为啥要用set了，记录一下最新版思路还是一样的！可能用set就更加节约一些时间吧，但是关键还在优化并查集部分！`</p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h&gt;</span></span>
using namespace std<span class="token punctuation">;</span>

<span class="token keyword">int</span> father<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> flag<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> father<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Find</span><span class="token punctuation">(</span>father<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Union</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> fa <span class="token operator">=</span> <span class="token function">Find</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> fb <span class="token operator">=</span> <span class="token function">Find</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fa<span class="token operator">!=</span>fb<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        father<span class="token punctuation">[</span>fa<span class="token punctuation">]</span> <span class="token operator">=</span> fb<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n<span class="token punctuation">,</span> sum<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    cin<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10005</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        father<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token function">memset</span><span class="token punctuation">(</span>flag<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> k<span class="token punctuation">;</span>cin<span class="token operator">&gt;&gt;</span>k<span class="token punctuation">;</span>
        <span class="token keyword">int</span> n0<span class="token punctuation">;</span>cin<span class="token operator">&gt;&gt;</span>n0<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>n0<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            sum<span class="token operator">++</span><span class="token punctuation">;</span>flag<span class="token punctuation">[</span>n0<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>k<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> num<span class="token punctuation">;</span>
            cin<span class="token operator">&gt;&gt;</span>num<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                sum<span class="token operator">++</span><span class="token punctuation">;</span>flag<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">Union</span><span class="token punctuation">(</span>n0<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>sum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>sum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span><span class="token function">Find</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            ans<span class="token operator">++</span><span class="token punctuation">;</span>
            flag<span class="token punctuation">[</span><span class="token function">Find</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>sum<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span>ans<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">int</span> q<span class="token punctuation">;</span>
    cin<span class="token operator">&gt;&gt;</span>q<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>q<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n1<span class="token punctuation">,</span> n2<span class="token punctuation">;</span>
        cin<span class="token operator">&gt;&gt;</span>n1<span class="token operator">&gt;&gt;</span>n2<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">Find</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">Find</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"Y"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"N"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db98e2e86e6a6924ce8d8db0be1a9071/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【数据库】liquibase: Waiting for changelog lock....</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f024cfafa05dc07ada874a581833dfcf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CTF隐写常用：常见文件头文件尾总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>