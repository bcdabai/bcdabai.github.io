<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>屏幕适配方案 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="屏幕适配方案" />
<meta property="og:description" content="1：资源文件适配方案 drawable（追我博）：可曳的，可拉的
在drawable和layout文件后添加屏幕的尺寸，如下：
drawable-320x320 ,layout-320x320
drawable-336x367 , layout-336x367
该方案适合屏幕大小固定为几种的设备
2：固定屏幕适配方案 1：固定像素大小适配方案 Metrics（麦揣科斯）：度量;指标;量度;度量指标;衡量标准
给出参考屏幕（1920*1080），通过windowManager.getDefaultDisplay().getMetrics(displayMetrics)；获取到当前设备的真实长宽（注意长度需要去掉状态栏高度如：2340*1080），然后计算出在当前屏幕下的需要拉伸或者缩小的长宽缩放比，然后，通过视图给出的像素，进行缩放计算，得出真实屏幕的像素大小，再把该像素大小放入到视图的布局参数中。
基于该方法，可以衍生出UIRelativeLayout&amp;UILinearLayout适配性布局
1：获取状态栏的两种方法
//1：状态栏高度获取方法 public int getStatusBarHeight(Context context){ int resID = context.getResources().getIdentifier(&#34;status_bar_height&#34;, &#34;dimen&#34;, &#34;android&#34;); if (resID &gt; 0){ return context.getResources().getDimensionPixelSize(resID); } return 0; } //2:通过反射获取到状态栏高度 private int getSystemBarHeight(Context context){ return getValue(context,&#34;com.android.internal.R$dimen&#34;,&#34;system_bar_height&#34;,48); } private int getValue(Context context, String dimeClass, String system_bar_height, int defaultValue) { // com.android.internal.R$dimen system_bar_height 状态栏的高度 try { Class&lt;?&gt; clz= Class.forName(dimeClass); Object object = clz.newInstance(); Field field=clz." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7619dfdd9afc32e3b91538c3a850d65e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-04T17:05:25+08:00" />
<meta property="article:modified_time" content="2021-07-04T17:05:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">屏幕适配方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>1：资源文件适配方案</h4> 
<p>drawable（追我博）：可曳的，可拉的</p> 
<p>在drawable和layout文件后添加屏幕的尺寸，如下：</p> 
<p>drawable-320x320 ,layout-320x320</p> 
<p>drawable-336x367 , layout-336x367</p> 
<p>该方案适合屏幕大小固定为几种的设备</p> 
<h3 id="LThXW">2：固定屏幕适配方案</h3> 
<h4 id="cJrTA">1：固定像素大小适配方案</h4> 
<p>Metrics（麦揣科斯）：度量;指标;量度;度量指标;衡量标准</p> 
<p>给出参考屏幕（1920*1080），通过windowManager.getDefaultDisplay().getMetrics(displayMetrics)；获取到当前设备的真实长宽（注意长度需要去掉状态栏高度如：2340*1080），然后计算出在当前屏幕下的需要拉伸或者缩小的长宽缩放比，然后，通过视图给出的像素，进行缩放计算，得出真实屏幕的像素大小，再把该像素大小放入到视图的布局参数中。</p> 
<p>基于该方法，可以衍生出UIRelativeLayout&amp;UILinearLayout适配性布局</p> 
<p>1：获取状态栏的两种方法</p> 
<blockquote> 
 <pre>//1：状态栏高度获取方法
public int getStatusBarHeight(Context context){
    int resID = context.getResources().getIdentifier("status_bar_height", "dimen", "android");
    if (resID &gt; 0){
        return context.getResources().getDimensionPixelSize(resID);
    }
    return 0;
}
//2:通过反射获取到状态栏高度
private int getSystemBarHeight(Context context){
    return getValue(context,"com.android.internal.R$dimen","system_bar_height",48);
}
private int getValue(Context context, String dimeClass, String system_bar_height, int defaultValue) {
//        com.android.internal.R$dimen    system_bar_height   状态栏的高度
    try {
        Class&lt;?&gt; clz= Class.forName(dimeClass);
        Object object = clz.newInstance();
        Field field=clz.getField(system_bar_height);
        int id= Integer.parseInt(field.get(object).toString());
        return context.getResources().getDimensionPixelSize(id);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return defaultValue;
}</pre> 
</blockquote> 
<p>2：设备端的真实长宽获取方式</p> 
<blockquote> 
 <pre>private UIUtils(Context context) {
//        计算缩放系数
    WindowManager windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    DisplayMetrics displayMetrics=new DisplayMetrics();
    if(displayMetricsWidth==0.0f || displayMetricsHeight==0.0f){
        //在这里得到设备的真实值
        windowManager.getDefaultDisplay().getMetrics(displayMetrics);
        systemBarHeight=getStatusBarHeight(context);
        //横屏
        if(displayMetrics.widthPixels&gt;displayMetrics.heightPixels){
            this.displayMetricsWidth=(float)(displayMetrics.heightPixels);
            this.displayMetricsHeight=(float)(displayMetrics.widthPixels-systemBarHeight);
        }else {
            //                竖屏
            this.displayMetricsWidth=(float)(displayMetrics.widthPixels);
            this.displayMetricsHeight=(float)(displayMetrics.heightPixels-systemBarHeight);
        }
        //            状态栏
    }
}</pre> 
</blockquote> 
<p>3：衍生工具类：UIRelativeLayout实现原理，重新改viewGroup的onMeasure方法，遍历子View，更新子View的布局参数</p> 
<blockquote> 
 <pre>@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        if (flag) {
        flag = false;
        float scaleX = UIUtils.getInstance(getContext()).getHorizontalScaleValue();
        float scaleY = UIUtils.getInstance(getContext()).getVerticalScaleValue();
        int childCount = this.getChildCount();
        for (int i = 0; i &lt; childCount; i++) {
            View child = this.getChildAt(i);
            LayoutParams layoutParams = (LayoutParams) child.getLayoutParams();
            layoutParams.width=(int) (layoutParams.width * scaleX);
            layoutParams.height = (int) (layoutParams.height * scaleY);
            layoutParams.leftMargin = (int) (layoutParams.leftMargin * scaleX);
            layoutParams.rightMargin = (int) (layoutParams.rightMargin * scaleX);
            layoutParams.topMargin = (int) (layoutParams.topMargin * scaleY);
            layoutParams.bottomMargin = (int) (layoutParams.bottomMargin * scaleY);
         }
        }
    }</pre> 
</blockquote> 
<p></p> 
<h3 id="ncUo4">3：通用图片处理方案</h3> 
<h4 id="WrvA0">1：.9png图片处理</h4> 
<p>在android studio中，把需要拉伸的png图片（注意一定要是png图片），修改名称，后缀添加.9(如aaa.9.png)，然后双击该图片，打开后，或看到左下角有9patch选项，选择该功能，就可以打开如下的视图，在该视图中进行编辑，以完成可拉伸的效果的图片，需要注意的是，左侧和上边是控制可拉伸区域，建议拉伸的像素为1像素，这样不会导致拉伸内容遮盖和拉伸失真的问题</p> 
<p><img alt="image.png" src="https://images2.imgbox.com/8c/e6/ea4PubtO_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/406b9f2b55231aa1cd7f59a792e3415e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java面试题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7dc1eb1c02f29813deaa2df8cdf0e543/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">麒麟操作系统V10安装达梦数据库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>