<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HDU 1465(错排公式) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HDU 1465(错排公式)" />
<meta property="og:description" content=" 不容易系列之一 Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 65536/32768 K (Java/Others)
Total Submission(s): 9829 Accepted Submission(s): 4115
Problem Description 大家常常感慨，要做好一件事情真的不容易，确实，失败比成功容易多了！ 做好“一件”事情尚且不易，若想永远成功而总从不失败，那更是难上加难了，就像花钱总是比挣钱容易的道理一样。 话虽这样说，我还是要告诉大家，要想失败到一定程度也是不容易的。比如，我高中的时候，就有一个神奇的女生，在英语考试的时候，竟然把40个单项选择题全部做错了！大家都学过概率论，应该知道出现这种情况的概率，所以至今我都觉得这是一件神奇的事情。如果套用一句经典的评语，我们可以这样总结：一个人做错一道选择题并不难，难的是全部做错，一个不对。 不幸的是，这种小概率事件又发生了，而且就在我们身边： 事情是这样的——HDU有个网名叫做8006的男性同学，结交网友无数，最近该同学玩起了浪漫，同时给n个网友每人写了一封信，这都没什么，要命的是，他竟然把所有的信都装错了信封！注意了，是全部装错哟！ 现在的问题是：请大家帮可怜的8006同学计算一下，一共有多少种可能的错误方式呢？ Input 输入数据包含多个多个测试实例，每个测试实例占用一行，每行包含一个正整数n（1&lt;n&lt;=20），n表示8006的网友的人数。 Output 对于每行输入请输出可能的错误方式的数量，每个实例的输出占用一行。 Sample Input 2 3 Sample Output 1 2 Author lcy Source ACM暑期集训队练习赛（九） Recommend lcy 难得的中文题。
n错排公式：F[n]=(n-1)*(F[n-1]&#43;F[n-2])
证明：
1.当前n-1个错排时：将其任意一封信与n对调,共(n-1)*F[n-1]
2.当前n-2个错排，1个不错排时,将不错排的那封信与n对调,共(n-1)*F[n-2]
3.当前≤n-3个错排，≥2个不错排时,显然无解.
∴F[n]=(n-1)*F[n-1]&#43;(n-2)*F[n-2]
证毕
记得用long long，不然会爆
#include&lt;cstdio&gt; #include&lt;cstdlib&gt; #include&lt;iostream&gt; using namespace std; #define MAXN (20&#43;10) int n; long long f[MAXN]={0,0,1}; int main() { for (int i=3;i&lt;=20;i&#43;&#43;) f[i]=(i-1)*f[i-1]&#43;f[i-2]*(i-1); while (cin&gt;&gt;n) cout&lt;&lt;f[n]&lt;&lt;endl; } " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7c273908ca650a21f5210a652734311f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-01-23T14:37:36+08:00" />
<meta property="article:modified_time" content="2013-01-23T14:37:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HDU 1465(错排公式)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'"> 不容易系列之一</h2> 
<span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/32768 K (Java/Others)<br> Total Submission(s): 9829    Accepted Submission(s): 4115<br> </span></strong></span> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Problem Description 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
  大家常常感慨，要做好一件事情真的不容易，确实，失败比成功容易多了！ 
 <br> 做好“一件”事情尚且不易，若想永远成功而总从不失败，那更是难上加难了，就像花钱总是比挣钱容易的道理一样。 
 <br> 话虽这样说，我还是要告诉大家，要想失败到一定程度也是不容易的。比如，我高中的时候，就有一个神奇的女生，在英语考试的时候，竟然把40个单项选择题全部做错了！大家都学过概率论，应该知道出现这种情况的概率，所以至今我都觉得这是一件神奇的事情。如果套用一句经典的评语，我们可以这样总结：一个人做错一道选择题并不难，难的是全部做错，一个不对。 
 <br> 
 <br> 不幸的是，这种小概率事件又发生了，而且就在我们身边： 
 <br> 事情是这样的——HDU有个网名叫做8006的男性同学，结交网友无数，最近该同学玩起了浪漫，同时给n个网友每人写了一封信，这都没什么，要命的是，他竟然把所有的信都装错了信封！注意了，是全部装错哟！ 
 <br> 
 <br> 现在的问题是：请大家帮可怜的8006同学计算一下，一共有多少种可能的错误方式呢？ 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Input 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
  输入数据包含多个多个测试实例，每个测试实例占用一行，每行包含一个正整数n（1&lt;n&lt;=20），n表示8006的网友的人数。 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Output 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
  对于每行输入请输出可能的错误方式的数量，每个实例的输出占用一行。 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Sample Input 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'"> 
 <pre style="margin-top:0px; margin-bottom:0px">  
  <div style="font-family:'Courier New',Courier,monospace">
   
   2
3
  
  </div></pre> 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Sample Output 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'"> 
 <pre style="margin-top:0px; margin-bottom:0px">  
  <div style="font-family:'Courier New',Courier,monospace">
   
   1
2
  
  </div></pre> 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Author 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
  lcy 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Source 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'"> 
 <a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=ACM%CA%EE%C6%DA%BC%AF%D1%B5%B6%D3%C1%B7%CF%B0%C8%FC%A3%A8%BE%C5%A3%A9&amp;source=1&amp;searchmode=source" rel="nofollow" style="color:rgb(26,92,200); text-decoration:none">ACM暑期集训队练习赛（九）</a> 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<br style="font-family:'Times New Roman'; font-size:14px"> 
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
  Recommend 
</div> 
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
  lcy 
</div> 
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
    
</div> 
<p><span style="white-space:pre"></span></p> 
<p><span style="font-size:14px">难得的中文题。</span></p> 
<p><span style="font-size:14px">n错排公式：F[n]=(n-1)*(F[n-1]+F[n-2])</span></p> 
<p><span style="font-size:14px">证明：</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>1.当前n-1个错排时：将其任意一封信与n对调,共(n-1)*F[n-1]</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>2.当前n-2个错排，1个不错排时,将不错排的那封信与n对调,共(n-1)*F[n-2]</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span>3.当前≤n-3个错排，≥2个不错排时,显然无解.</span></p> 
<p><span style="font-size:14px">∴F[n]=(n-1)*F[n-1]+<span style="font-size:14px">(n-2)*F[n-2]</span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px">证毕</span></span></p> 
<p><span style="font-size:14px"><span style="font-size:14px"><br> </span></span></p> 
<p><span style="font-size:14px">记得用long long，不然会爆</span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;iostream&gt;
using namespace std;
#define MAXN (20+10)
int n;
long long f[MAXN]={0,0,1};
int main()
{
	for (int i=3;i&lt;=20;i++) f[i]=(i-1)*f[i-1]+f[i-2]*(i-1);
	while (cin&gt;&gt;n) cout&lt;&lt;f[n]&lt;&lt;endl;
}</code></pre> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18913965b7344b68e3c94d35055e781e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">瞬联基于OpenStack的私有云解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6ddfb424fa17a0dc7df66a40b37b3960/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BZOJ 1088(mine)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>