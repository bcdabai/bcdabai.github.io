<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Vue3】滑动验证组件 | 滑动验证 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Vue3】滑动验证组件 | 滑动验证" />
<meta property="og:description" content="前言 滑块验证不只判断是否滑动到尾部，真正的目的是检测用户行为，检测行为是人为、脚本、还是其它。
防止使用脚本大量注册、请求等 。比如发送请求时，判断用户在某个页面停留了多长时间。登录、注册时是否点击了登录、注册按钮，如果没有点击就直接发送登录、注册请求，那么这个行为十有八九是脚本、机器行为。
滑块验证有几个重要的数据
滑块的起点滑块的终点滑块从起点滑动到终点所用的时间，比如人为滑动长度为240px的滑块，至少需要50毫秒，才能冲起点滑倒终点。若起点滑到终点所用的时间是50毫秒以下，那么这种行为99%是机器、脚本行为。人为滑的没那么快。滑块的长度，滑块的长度越长越好，因为长度越长，我们采集到的数据就越多，数据越多就越容易判断是人为还是机器、脚本行为。滑块最好在200px&#43;以上。滑动滑块的轨迹，例如滑动一个长度为300px的滑块，至少可以采集到20个点位，每个点位有用户滑动的x,y轴位置、滑动时间等。 验证方式 人为滑动轨迹参考 当我们用手滑动验证滑块时，滑动轨迹为变速曲线运动，上下起伏分布不均、且变速运动。如下图3图
图1
图2
图3
人为/人机/脚本滑动判断 滑动滑块所用时间低于50毫秒判断为人机/脚本，200px的滑块，人为滑动没那么快。判断滑动的线条起伏，若是纯直线，则为人机，因为人为滑动没那么直。计算滑动速度，人为滑动肯定是变速滑动，若是匀速滑动则为人机。 若不是人为滑动，多数是直线匀速滑动，不会上下起伏。例如脚本滑动。
但部分机器/脚本可以模拟人为滑动，所以很轻易破解滑块验证。
下面是一串人为滑动的数据，用canvs渲染出来， x - x轴位置，y - y轴位置 ，moveTime - 滑动到该点的时间 &lt;canvas id=&#34;cvs&#34; width=&#34;300&#34; height=&#34;60&#34;&gt;&lt;/canvas&gt; &lt;script&gt; const draw = data =&gt; { const cvs = document.querySelector(&#39;#cvs&#39;), c = cvs.getContext(&#39;2d&#39;) c.clearRect(0, 0, cvs.width, cvs.height) c.lineWidth = 2 c.strokeStyle = &#39;red&#39; c.beginPath() data.forEach((it, i) =&gt; { if (i === 0) c.moveTo(it.x, it.y) c.lineTo(it.x, it.y) }) c.stroke() } const data = [{&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/14e4df1f0db992583fb59caafe45e4e9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-24T08:13:58+08:00" />
<meta property="article:modified_time" content="2023-05-24T08:13:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Vue3】滑动验证组件 | 滑动验证</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<ul><li> <p>滑块验证不只判断是否滑动到尾部，真正的目的是检测用户行为，检测行为是人为、脚本、还是其它。</p> </li><li> <p>防止使用脚本大量注册、请求等 。比如发送请求时，判断用户在某个页面停留了多长时间。登录、注册时是否点击了登录、注册按钮，如果没有点击就直接发送登录、注册请求，那么这个行为十有八九是脚本、机器行为。</p> </li><li> <p>滑块验证有几个重要的数据</p> 
  <ol><li>滑块的起点</li><li>滑块的终点</li><li>滑块从起点滑动到终点所用的时间，比如人为滑动长度为240px的滑块，至少需要50毫秒，才能冲起点滑倒终点。若起点滑到终点所用的时间是50毫秒以下，那么这种行为99%是机器、脚本行为。人为滑的没那么快。</li><li>滑块的长度，滑块的长度越长越好，因为长度越长，我们采集到的数据就越多，数据越多就越容易判断是人为还是机器、脚本行为。滑块最好在200px+以上。</li><li>滑动滑块的轨迹，例如滑动一个长度为300px的滑块，至少可以采集到20个点位，每个点位有用户滑动的x,y轴位置、滑动时间等。</li></ol> </li></ul> 
<h3><a id="_10"></a>验证方式</h3> 
<h4><a id="_11"></a>人为滑动轨迹参考</h4> 
<p>当我们用手滑动验证滑块时，滑动轨迹为<strong>变速曲线运动</strong>，上下起伏分布不均、且变速运动。如下图3图</p> 
<blockquote> 
 <p>图1<br> <img src="https://images2.imgbox.com/a5/7f/jdXZUr2B_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>图2<br> <img src="https://images2.imgbox.com/30/bd/2lf1DD6X_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>图3<br> <img src="https://images2.imgbox.com/f6/ff/6a29QsHo_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h4><a id="_23"></a>人为/人机/脚本滑动判断</h4> 
<ol><li>滑动滑块所用时间低于50毫秒判断为人机/脚本，200px的滑块，人为滑动没那么快。</li><li>判断滑动的线条起伏，若是纯直线，则为人机，因为人为滑动没那么直。</li><li>计算滑动速度，<strong>人为滑动肯定是变速滑动</strong>，若是匀速滑动则为人机。</li></ol> 
<p>若不是人为滑动，多数是直线匀速滑动，不会上下起伏。例如脚本滑动。<br> 但部分机器/脚本可以模拟人为滑动，所以很轻易破解滑块验证。</p> 
<ul><li>下面是一串人为滑动的数据，用canvs渲染出来， 
  <ul><li>x - x轴位置，</li><li>y - y轴位置 ，</li><li>moveTime - 滑动到该点的时间</li></ul> </li></ul> 
<pre><code class="prism language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cvs<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token function-variable function">draw</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
   <span class="token keyword">const</span> cvs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#cvs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      c <span class="token operator">=</span> cvs<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
 
   c<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cvs<span class="token punctuation">.</span>width<span class="token punctuation">,</span> cvs<span class="token punctuation">.</span>height<span class="token punctuation">)</span>

   c<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span>
   c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'red'</span>

   c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>x<span class="token punctuation">,</span> it<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
      c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>x<span class="token punctuation">,</span> it<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">41.4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751003</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">45.12</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">23.12</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751014</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">47.91</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">23.12</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751019</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">52.56</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">22.19</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751027</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">56.28</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">21.26</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751035</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">60.93</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751043</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">63.72</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751051</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">68.37</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751059</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">73.02</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751067</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">77.67</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751075</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">83.26</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751083</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">87.91</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751091</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">93.49</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751099</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">101.86</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751107</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">109.3</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751115</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">117.67</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751124</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">125.12</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751131</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">131.63</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751139</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">139.07</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">20.33</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751148</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">145.58</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">21.26</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751155</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">151.16</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">22.19</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751163</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">155.81</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">23.12</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751171</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">161.4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751179</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">166.05</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751187</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">170.7</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751195</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">177.21</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751204</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">181.86</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751211</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">186.51</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751219</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">191.16</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751227</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">195.81</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751236</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">201.4</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751243</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">206.98</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751251</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">213.49</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751259</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751268</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">227.44</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751275</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">236.74</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751283</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">245.12</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751291</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">254.42</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751299</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">261.86</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751307</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">268.37</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751315</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">273.02</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751323</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"x"</span><span class="token operator">:</span><span class="token number">279.53</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token operator">:</span><span class="token number">24.05</span><span class="token punctuation">,</span><span class="token string">"moveTime"</span><span class="token operator">:</span><span class="token number">1684666751332</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token function">draw</span><span class="token punctuation">(</span>data <span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<blockquote> 
 <p>渲染图<br> <img src="https://images2.imgbox.com/c1/d1/MZfiy9od_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h2><a id="_vue3_66"></a>滑动验证 （vue3）</h2> 
<h3><a id="Props_68"></a>Props</h3> 
<table><thead><tr><th align="left">props</th><th align="left">类型</th><th align="left">默认值</th><th align="left">作用</th></tr></thead><tbody><tr><td align="left">width</td><td align="left">Number</td><td align="left">300</td><td align="left">滑块宽度</td></tr><tr><td align="left">height</td><td align="left">Number</td><td align="left">45</td><td align="left">滑块高度</td></tr><tr><td align="left">servertest</td><td align="left">Blooear</td><td align="left">false</td><td align="left">是否开启后后端验证 - <a href="#servertest" rel="nofollow">点我跳转详情</a></td></tr><tr><td align="left">drop-color</td><td align="left">String</td><td align="left">#fff</td><td align="left">滑块颜色</td></tr><tr><td align="left">tip-none-color</td><td align="left">String</td><td align="left">#000</td><td align="left">待验证文本色</td></tr><tr><td align="left">tip-suc-color</td><td align="left">String</td><td align="left">#fff</td><td align="left">验证成功文本色</td></tr><tr><td align="left">tip-test-ing-color</td><td align="left">String</td><td align="left">#fff</td><td align="left">验证中的文本色</td></tr><tr><td align="left">tip-tail-color</td><td align="left">String</td><td align="left">#ee0a24</td><td align="left">验证失败文本色</td></tr><tr><td align="left">slide-color</td><td align="left">String</td><td align="left">#ee0a24</td><td align="left">滑块背景色颜色</td></tr><tr><td align="left">success-bg-color</td><td align="left">String</td><td align="left">#07c160</td><td align="left">验证通过背景色</td></tr><tr><td align="left">tail-bg-color</td><td align="left">String</td><td align="left">#ee0a24</td><td align="left">验证失败背景色</td></tr><tr><td align="left">active-bg-color</td><td align="left">String</td><td align="left">#1989fa</td><td align="left">已激活的背景色</td></tr><tr><td align="left">test-ing-bg-color</td><td align="left">String</td><td align="left">#ff976a</td><td align="left">验证中激活的背景色</td></tr><tr><td align="left">font-size</td><td align="left">Number</td><td align="left">16</td><td align="left">文本大小</td></tr><tr><td align="left">test-tip</td><td align="left">String</td><td align="left">正在验证…</td><td align="left">验证中提示文本</td></tr><tr><td align="left">tip-txt</td><td align="left">String</td><td align="left">向右滑动验证</td><td align="left">待验证提示文本</td></tr><tr><td align="left">success-tip</td><td align="left">String</td><td align="left">太棒了，恭喜你验证通过！</td><td align="left">验证成功文字提示</td></tr><tr><td align="left">fail-tip</td><td align="left">String</td><td align="left">验证失败，请重试</td><td align="left">验证失败文字提示</td></tr></tbody></table> 
<h3><a id="_91"></a>事件</h3> 
<table><thead><tr><th align="left">事件</th><th align="left">作用</th><th align="left">参数</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">statu</td><td align="left">验证状态</td><td align="left"><code>(vfcStatu, slideInfo )</code> vfcStatu.statu→验证状态 。slideInfo →滑动轨迹信息</td><td align="left">vfcStatu.statu有4种状态 。①<code>tail</code> - 验证失败 ②<code>success</code> - 验证成功 ③<code>testing</code> - 前端验证中 ④ <code>servertest</code> - 后端验证中，props的servertest设置未true才会触发后端验证（<strong>若servertest为true,不设置vfcStatu.statu状态会一直处于验证中动画</strong>）</td></tr></tbody></table> 
<h3><a id="vue_96"></a>vue验证组件</h3> 
<blockquote> 
 <p>SliderVfc.vue</p> 
</blockquote> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cvsClass<span class="token punctuation">"</span></span> <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>props.width<span class="token punctuation">"</span></span> <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>props.height<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cvs<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 是否开启服务端验证 </span>
    servertest<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    width<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">300</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">45</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    strokeWidth<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 滑块宽度</span>
    dropWidth<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">50</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 已激活验证背景色 activeBgColor | 验证中激活的背景色 testIngBgColor| 验证成功激活的背景色 successBgColor</span>
    <span class="token comment">// 验证成功文本色 tipSucColor| 验证失败文本色 tipTailColor | 验证中的文本色 tipTestIngColor | 待验证文本色 tipNoneColor</span>
    <span class="token comment">// 移动滑块背景色 dropColor</span>
    <span class="token comment">// 滑块原始背景色  slideColor</span>

    <span class="token comment">// 滑块颜色</span>
    dropColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 待验证文本色</span>
    tipNoneColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证成功文本色</span>
    tipSucColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证中的文本色</span>
    tipTestIngColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证失败文本色</span>
    tipTailColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#ee0a24'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 验证中提示</span>
    testTip<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'正在验证...'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 滑块背景色颜色</span>
    slideColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#e8e8e8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 滑块背景色颜色</span>
    tipTxt<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'向右滑动验证'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证通过背景色</span>
    successBgColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#07c160'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//  验证失败背景色</span>
    tailBgColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#ee0a24'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 已激活的背景色</span>
    activeBgColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#1989fa'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证中激活的背景色</span>
    testIngBgColor<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#ff976a'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>


    <span class="token comment">// 验证成功文字提示</span>
    successTip<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'太棒了，恭喜你验证通过！'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 验证失败文字提示</span>
    failTip<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'验证失败，请重试'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 文本大小</span>
    fontSize<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">16</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'statu'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> vfcx <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">const</span> cvs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cvsClass <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'cur-none'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> vfcres <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    startX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//开始拖动滑块位置</span>
    endX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//结束拖动滑块位置 </span>
    timed<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">//拖动所用时间 || 低于30毫秒认定为机器</span>
    guiji<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//拖动轨迹 | 连续2个2数之差相同判定为机器  </span>
    width<span class="token operator">:</span> props<span class="token punctuation">.</span>width
<span class="token punctuation">}</span>

<span class="token keyword">const</span> vfcStatu <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    statu<span class="token operator">:</span> <span class="token string">'none'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 监听数据，并发给父级</span>
<span class="token function">watch</span><span class="token punctuation">(</span>vfcStatu<span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'statu'</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> vfcres<span class="token punctuation">)</span>
    <span class="token comment">// 验证成功</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        vfcx<span class="token punctuation">.</span>anmateOff <span class="token operator">=</span> <span class="token boolean">false</span>
        vfcx<span class="token punctuation">.</span>activeBgColor <span class="token operator">=</span> props<span class="token punctuation">.</span>successBgColor
        vfcx<span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> props<span class="token punctuation">.</span>successTip
        vfcx<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>slideColor <span class="token operator">=</span> props<span class="token punctuation">.</span>successBgColor
        vfcx<span class="token punctuation">.</span><span class="token function">evNone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'tail'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        vfcx<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        vfcx<span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> props<span class="token punctuation">.</span>failTip
        vfcx<span class="token punctuation">.</span>fontColor <span class="token operator">=</span> props<span class="token punctuation">.</span>tipTailColor
        vfcx<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
* 验证器
* @param {Element} cvsEl canvas元素
* @param {String, default:'cur-none'} cvsClass canvas的class
* @param {Boolear, default:fasle} vfcres 验证结果
* @param {Number, default:5} strokeWidth 滑块内边距
* @param {Number,default:50} dropWidth 滑块宽度
* @param {color,default:'#fff'} dropColor 移动滑块背景色
* @param {color,default:'#e8e8e8'} slideColor 滑块背景色颜色
* @param {color,default:'skyblue'} activeBgColor 已激活验证背景色
* @param {color,default:'#ff976a'} testIngBgColor 验证中激活的背景色
* @param {color,default:'#07c160'} successBgColor 验证成功激活的背景色
* @param {color,default:'#07c160'} tipSucColor 验证成功文本色
* @param {color,default:'#ee0a24'} tipTailColor 验证失败文本色
* @param {color,default:'#fff'} tipTestIngColor 验证中的文本色
* @param {color,default:'#000'} tipNoneColor 待验证文本色
* @param {String,default:'向右滑动验证'} tipTxt 文字提示
* @param {String,default:'太棒了，恭喜你验证通过！'} successTip 验证成功文字提示
* @param {String,default:'验证失败，请重试...'} failTip 验证失败文字提示
* @param {Bool} servertest 是否开启前端验证模式
* @param {String} testTip 验证提示  
*/</span>
<span class="token keyword">class</span> <span class="token class-name">Vfcs</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">cvsEl<span class="token punctuation">,</span> cvsClass<span class="token punctuation">,</span> vfcres<span class="token punctuation">,</span> vfcStatu<span class="token punctuation">,</span> strokeWidth<span class="token punctuation">,</span> dropWidth<span class="token punctuation">,</span> fontSize<span class="token punctuation">,</span> servertest<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> tipTxt</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl <span class="token operator">=</span> cvsEl
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres <span class="token operator">=</span> vfcres
        <span class="token keyword">this</span><span class="token punctuation">.</span>cvsClass <span class="token operator">=</span> cvsClass
        <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">=</span> strokeWidth
        <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">=</span> dropWidth
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu <span class="token operator">=</span> vfcStatu

        <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> colors
        <span class="token keyword">this</span><span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontSize
        <span class="token keyword">this</span><span class="token punctuation">.</span>dwonIsPath <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">//是否按下验证滑块</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>allTipTxts <span class="token operator">=</span> tipTxt
        <span class="token keyword">this</span><span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allTipTxts<span class="token punctuation">.</span>tipTxt

        <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>tipNoneColor
        <span class="token keyword">this</span><span class="token punctuation">.</span>activeBgColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>activeBgColor


        <span class="token keyword">this</span><span class="token punctuation">.</span>servertest <span class="token operator">=</span> servertest

        <span class="token keyword">this</span><span class="token punctuation">.</span>guiji <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startX <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startY <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>moveY <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment">//文本透明度</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">=</span> <span class="token boolean">false</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token number">0</span><span class="token comment">//x轴的位移</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>minX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">/</span> <span class="token number">2</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>maxX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth
        <span class="token comment">// this.dropX最大值 -》  cW - this.dropWidth - this.strokeWidth / 2</span>
        <span class="token comment">// this.dropX最小 -》   this.strokeWidth / 2</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token comment">// 滑块位置</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>toTouchEnd <span class="token operator">=</span> <span class="token boolean">false</span>

        <span class="token comment">//是否按下滑块</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isDown <span class="token operator">=</span> <span class="token boolean">false</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>testAm <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//验证中动画的id </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>anmateOff <span class="token operator">=</span> <span class="token boolean">true</span><span class="token comment">//动画开关 </span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>evsName <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">//事件名 </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>evsFun <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">down</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">up</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">//事件方法    </span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>evsName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">evType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 给canvas添加事件  </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>evsName<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">evName<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>evName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>evsFun<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>evName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>evsFun<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 绘制</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> cW <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
            cH <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span>height<span class="token punctuation">,</span>
            c <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx

        c<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cW<span class="token punctuation">,</span> cH<span class="token punctuation">)</span>
        c<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token comment">// 设置图像透明度 </span>

        c<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cW<span class="token punctuation">,</span> cH<span class="token punctuation">)</span>
        c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>slideColor
        c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>slideColor
        c<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth
        c<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cW<span class="token punctuation">,</span> cH<span class="token punctuation">)</span>
        c<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cW<span class="token punctuation">,</span> cH<span class="token punctuation">)</span>

        <span class="token comment">// 激活背景色</span>
        c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activeBgColor
        c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activeBgColor
        c<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>minX <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX<span class="token punctuation">,</span> cH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth<span class="token punctuation">)</span>
        <span class="token comment">// 文本提示</span>
        c<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">"center"</span>
        c<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span>
        c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor
        c<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>fontSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px 黑体</span><span class="token template-punctuation string">`</span></span>
        c<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tipTxt<span class="token punctuation">,</span> cW <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>

        <span class="token comment">// 验证失败  </span>
        <span class="token comment">// 待验证 | 验证中</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'none'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'testing'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'servertest'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'tail'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 滑块 </span>
            c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>dropColor
            c<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth<span class="token punctuation">,</span> cH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth<span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// 箭头  </span>
            c<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span>
            <span class="token comment">// 右边箭头</span>
            c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> cH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token comment">// 左边箭头</span>
            c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">1.7</span> <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">,</span> cH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// 验证成功</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 滑块 </span>
            c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>dropColor
            c<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth<span class="token punctuation">,</span> cH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth<span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// 圈</span>
            c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>successBgColor
            c<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropX<span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// 勾</span>
            c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span>
            c<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> <span class="token string">"bevel"</span>
            c<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">"round"</span>
            c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>dropColor
            c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">2.1</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">1.6</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">,</span> cH <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            c<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 滑块按下</span>
    <span class="token function">down</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'testing'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'servertest'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setXY</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span>
        <span class="token comment">//按下滑块</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isDown <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 若按下滑块</span>
        <span class="token keyword">const</span> isPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">isPointInPath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startY<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dwonIsPath <span class="token operator">=</span> isPath
    <span class="token punctuation">}</span>

    <span class="token comment">// 滑块移动</span>
    <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'testing'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'servertest'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setXY</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span>
        <span class="token keyword">const</span> isPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span><span class="token function">isPointInPath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>moveX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moveX<span class="token punctuation">)</span>
        <span class="token comment">// pc 鼠标变手势</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>x<span class="token punctuation">)</span> isPath <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsClass<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'cur'</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsClass<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'cur-none'</span>

        <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>moveX<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>moveY<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> moveTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>guiji<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> moveTime <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dwonIsPath <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isDown <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 若滑到尾部 </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>toTouchEnd <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">touchDrosToEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>toTouchEnd <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 滑块抬起</span>
    <span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'testing'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">===</span> <span class="token string">'servertest'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dwonIsPath <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>startX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startX<span class="token comment">//鼠标/手指按下位置</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>endX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token comment">//鼠标/手指抬起位置 </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>timed <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token comment">//耗时</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>guiji <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guiji<span class="token comment">//滑动轨迹   </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span>width

        <span class="token keyword">this</span><span class="token punctuation">.</span>dwonIsPath <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isDown <span class="token operator">=</span> <span class="token boolean">false</span>

        <span class="token comment">// 未滑动到尾部</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>toTouchEnd <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token comment">// 滑块位置</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allTipTxts<span class="token punctuation">.</span>failTip
            <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>tipTailColor

            <span class="token comment">// 滑动到尾部</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> <span class="token string">'testing'</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">testAdmate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//开启动画</span>
            <span class="token comment">// 验证中   </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>tipTestIngColor
            <span class="token keyword">this</span><span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allTipTxts<span class="token punctuation">.</span>testTip
            <span class="token keyword">this</span><span class="token punctuation">.</span>activeBgColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>testIngBgColor
            <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token comment">// 滑块位置  </span>

            <span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">testVer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 前端验证通过</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>test <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 已开启前端验证模式 </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>servertest <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> <span class="token string">'servertest'</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> <span class="token string">'success'</span>
                    <span class="token punctuation">}</span>

                    <span class="token comment">// 前端验证不通过</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> <span class="token string">'tail'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>guiji <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 重置滑块</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token comment">// 滑块位置</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>anmateOff <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>activeBgColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>activeBgColor
        <span class="token keyword">this</span><span class="token punctuation">.</span>fontColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">.</span>tipNoneColor
        <span class="token keyword">this</span><span class="token punctuation">.</span>tipTxt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allTipTxts<span class="token punctuation">.</span>tipTxt
        <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>toTouchEnd <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>guiji <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 解绑事件    </span>
    <span class="token function">evNone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>evsName<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">evName<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>evName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>evsFun<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>evName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>evsFun<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 验证中动画</span>
    <span class="token function">testAdmate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 文本透明度</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">&lt;=</span> <span class="token number">.5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">+=</span> <span class="token number">.015</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">-=</span> <span class="token number">.015</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>testAm<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>testAm <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">testAdmate</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>anmateOff <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>testAm<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>fontOp <span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>testAm <span class="token operator">=</span> <span class="token keyword">null</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>met <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>anmateOff <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 验证是否滑动到尾部
     * @return {Number}  return true 到尾部，false 没到尾部
     */</span>
    <span class="token function">touchDrosToEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dropWidth <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>strokeWidth
        <span class="token keyword">const</span> isSuccess <span class="token operator">=</span> x <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span>width

        <span class="token keyword">return</span> isSuccess
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置xy坐标  </span>
    <span class="token function">setXY</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'touchstart'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>startX <span class="token operator">=</span> ev<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left
            <span class="token keyword">this</span><span class="token punctuation">.</span>startY <span class="token operator">=</span> ev<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'touchmove'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">=</span> ev<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left
            <span class="token keyword">this</span><span class="token punctuation">.</span>moveY <span class="token operator">=</span> ev<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top

        <span class="token punctuation">}</span>


        <span class="token comment">// ///pc事件 //</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'mousedown'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>startX <span class="token operator">=</span> ev<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left
            <span class="token keyword">this</span><span class="token punctuation">.</span>startY <span class="token operator">=</span> ev<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'mousemove'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">=</span> ev<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left
            <span class="token keyword">this</span><span class="token punctuation">.</span>moveY <span class="token operator">=</span> ev<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cvsEl<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
        <span class="token punctuation">}</span>

        <span class="token comment">// 防止滑块溢出指定范围</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'mousemove'</span> <span class="token operator">||</span> ev<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'touchmove'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moveX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startX

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxX<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxX
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX
            <span class="token keyword">this</span><span class="token punctuation">.</span>dropX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offX <span class="token comment">// 滑块位置</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>

    <span class="token comment">// 事件类型</span>
    <span class="token function">evType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> isMobile <span class="token operator">=</span>
            navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>
                <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
            <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span>

        <span class="token keyword">const</span> events <span class="token operator">=</span> isMobile
            <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token string">'touchend'</span><span class="token punctuation">]</span>
            <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token string">'mouseup'</span><span class="token punctuation">]</span>

        <span class="token keyword">return</span> events
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 滑动轨迹信息 | 计算滑动轨迹每2数之间的差值 | 出现次数等
     * @return {Object(chaArr,repeatX,repeatY,repeatMaxXCount,repeatMaxYCount,allCount)} chaArr → 每2数之间的插值 | repeatX → x轴每2数之间的差值与重复数  | repeatY → y轴每2数之间的差值与重复数 |  repeatMaxXCount → x轴每重复数最多的次数 | repeatMaxYCount → y轴每重复数最多的次数 
     */</span>
    <span class="token function">arrCmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 重复的数量</span>
        <span class="token keyword">const</span> repeatX <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> repeatY <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> timed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">const</span> chaArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guiji<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> itm<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> prev
            <span class="token keyword">const</span> nv <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> chaX <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nv<span class="token punctuation">.</span>x <span class="token operator">-</span> itm<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> chaY <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nv<span class="token punctuation">.</span>y <span class="token operator">-</span> itm<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> timeCha <span class="token operator">=</span> nv<span class="token punctuation">.</span>moveTime <span class="token operator">-</span> itm<span class="token punctuation">.</span>moveTime
            timed<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timeCha<span class="token punctuation">)</span><span class="token comment">//时间差</span>

            <span class="token comment">// 是否有重复的数组</span>
            <span class="token keyword">const</span> repeatXIndex <span class="token operator">=</span> repeatX<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>num <span class="token operator">===</span> chaX<span class="token punctuation">)</span>
            <span class="token keyword">const</span> repeatYIndex <span class="token operator">=</span> repeatY<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>num <span class="token operator">===</span> chaY<span class="token punctuation">)</span>

            <span class="token comment">// xy轴每2数差数据</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>repeatXIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    num<span class="token operator">:</span> chaX<span class="token punctuation">,</span>
                    count<span class="token operator">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
                repeatX<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                repeatX<span class="token punctuation">[</span>repeatXIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>repeatYIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    num<span class="token operator">:</span> chaY<span class="token punctuation">,</span>
                    count<span class="token operator">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
                repeatY<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                repeatY<span class="token punctuation">[</span>repeatYIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
            <span class="token punctuation">}</span>

            prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> x<span class="token operator">:</span> chaX<span class="token punctuation">,</span> y<span class="token operator">:</span> chaY <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> prev
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token comment">// 所有重复次数</span>
        <span class="token keyword">const</span> findXCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> findYCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        repeatX<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> findXCount<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>
        repeatY<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> findYCount<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>


        <span class="token keyword">const</span> repeatMaxXCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>findXCount<span class="token punctuation">)</span><span class="token comment">//x重复最多的次数</span>
        <span class="token keyword">const</span> repeatMaxYCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>findYCount<span class="token punctuation">)</span><span class="token comment">//y重复最多的次数</span>
        <span class="token keyword">const</span> repeatMaxTimed <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>timed<span class="token punctuation">)</span><span class="token comment">//滑动时间重复最多的次数</span>


        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
            chaArr<span class="token punctuation">,</span>
            repeatX<span class="token punctuation">,</span>
            repeatY<span class="token punctuation">,</span>
            repeatMaxXCount<span class="token punctuation">,</span>
            repeatMaxYCount<span class="token punctuation">,</span>
            repeatMaxTimed
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 前端验证</span>
    <span class="token comment">//  x轴最大波动大于数等于所有波动长度则为人机 | y轴最大波动数等于所有波动长度则为人机 | 滑动时间低于50毫秒不通过  | 时间波动最大次数大于滑动轨迹长度的3/1为人机</span>
    <span class="token function">testVer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// return 'tail'</span>
        <span class="token comment">// 滑动所用时间低于50毫秒 是人机</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vfcres<span class="token punctuation">.</span>timed <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'tail'</span>

        <span class="token keyword">const</span> sliderInfo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">arrCmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//处理滑动轨迹信息    </span>

        <span class="token comment">// 时间波动最大次数等于sliderInfo.chaArr.length滑动轨迹长度为人机</span>
        <span class="token keyword">const</span> timeTest <span class="token operator">=</span> sliderInfo<span class="token punctuation">.</span>repeatMaxTimed <span class="token operator">===</span> sliderInfo<span class="token punctuation">.</span>chaArr<span class="token punctuation">.</span>length
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timeTest <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'tail'</span>

        <span class="token comment">// x轴最大波动大于数等于所有波动长度则为人机</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sliderInfo<span class="token punctuation">.</span>repeatMaxXCount <span class="token operator">===</span> sliderInfo<span class="token punctuation">.</span>repeatX<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'tail'</span>

        <span class="token comment">//  y轴最大波动数等于所有波动长度则为人机</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sliderInfo<span class="token punctuation">.</span>repeatMaxYCount <span class="token operator">===</span> sliderInfo<span class="token punctuation">.</span>chaArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'tail'</span>

        <span class="token comment">// 是真人</span>
        <span class="token keyword">return</span> <span class="token string">'success'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        activeBgColor<span class="token operator">:</span> props<span class="token punctuation">.</span>activeBgColor<span class="token punctuation">,</span>
        testIngBgColor<span class="token operator">:</span> props<span class="token punctuation">.</span>testIngBgColor<span class="token punctuation">,</span>
        successBgColor<span class="token operator">:</span> props<span class="token punctuation">.</span>successBgColor<span class="token punctuation">,</span>
        tipSucColor<span class="token operator">:</span> props<span class="token punctuation">.</span>tipSucColor<span class="token punctuation">,</span>
        tipTailColor<span class="token operator">:</span> props<span class="token punctuation">.</span>tipTailColor<span class="token punctuation">,</span>
        tipTestIngColor<span class="token operator">:</span> props<span class="token punctuation">.</span>tipTestIngColor<span class="token punctuation">,</span>
        tipNoneColor<span class="token operator">:</span> props<span class="token punctuation">.</span>tipNoneColor<span class="token punctuation">,</span>
        dropColor<span class="token operator">:</span> props<span class="token punctuation">.</span>dropColor<span class="token punctuation">,</span>
        slideColor<span class="token operator">:</span> props<span class="token punctuation">.</span>slideColor<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> tipTxt <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        testTip<span class="token operator">:</span> props<span class="token punctuation">.</span>testTip<span class="token punctuation">,</span>
        tipTxt<span class="token operator">:</span> props<span class="token punctuation">.</span>tipTxt<span class="token punctuation">,</span>
        successTip<span class="token operator">:</span> props<span class="token punctuation">.</span>successTip<span class="token punctuation">,</span>
        failTip<span class="token operator">:</span> props<span class="token punctuation">.</span>failTip<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    vfcx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vfcs</span><span class="token punctuation">(</span>
        cvs<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        cvsClass<span class="token punctuation">,</span>
        vfcres<span class="token punctuation">,</span>
        vfcStatu<span class="token punctuation">,</span>
        props<span class="token punctuation">.</span>strokeWidth<span class="token punctuation">,</span>
        props<span class="token punctuation">.</span>dropWidth<span class="token punctuation">,</span>
        props<span class="token punctuation">.</span>fontSize<span class="token punctuation">,</span>
        props<span class="token punctuation">.</span>servertest<span class="token punctuation">,</span>
        colors<span class="token punctuation">,</span>
        tipTxt
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.cur</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.cur-none</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_763"></a>使用滑动验证</h3> 
<blockquote> 
 <p>Home.vue</p> 
</blockquote> 
<pre><code class="prism language-html"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slider-vfc</span>  <span class="token attr-name">@statu</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slide<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 滑块验证 </span>
<span class="token keyword">const</span> <span class="token function-variable function">slide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">vfcStatu<span class="token punctuation">,</span> slideInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">/**
这里可以做一些自定义验证  
- vfcStatu.statu有2状态，必须赋值状态
- success 验证成功状态
- tail 验证失败状态
- 可配合后端验证
*/</span>

<span class="token keyword">const</span> statu <span class="token operator">=</span> vfcStatu<span class="token punctuation">.</span>statu  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>statu<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>statu <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证成功'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>statu <span class="token operator">===</span> <span class="token string">'tail'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证失败'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_790"></a>成功效果图</h4> 
<p><img src="https://images2.imgbox.com/10/45/ahPCCaQs_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_793"></a>失败效果图</h4> 
<p><img src="https://images2.imgbox.com/ee/e5/h7PJ57e4_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_795"></a>验证中效果图</h4> 
<p>验证中会有一个透明度效果<br> <img src="https://images2.imgbox.com/e1/18/uZ3Tnpdj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="span_idservertestaxios___expressspan_800"></a><span id="servertest">搭配后端验证（axios | express</span></h3> 
<ul><li>搭配后端验证，主要用到axios 与 express。后端验证的原理与前端验证是一个原理，只不过换了给地方做验证。</li><li>但是还是不安全，因为前端可以伪造数据，然后给后端发送请求，后端返回数据。</li><li>纯滑块还是要搭配检测行为才好使，因为滑块只是访问某个页面或请求某个数据时的多环验证的其中一环而已，比如用户停留某个页面多长时间，各方面因素来判断当前行为是否是人为、还是脚本\机器行为等等。</li></ul> 
<p>后端代码</p> 
<blockquote></blockquote> 
<pre><code class="prism language-js"><span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">'express'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

<span class="token comment">/**
* 滑块验证
* @data {Array} 前端传送data 验证的数据
* @res  {String(success,tail)}  success 验证成功 | tail验证失败
*/</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/slidetest'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> qy <span class="token operator">=</span> req<span class="token punctuation">.</span>query

    <span class="token comment">// 重复的数量</span>
    <span class="token keyword">const</span> repeatX <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        repeatY <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        timed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>qy<span class="token punctuation">.</span>datainfo<span class="token punctuation">)</span>

    <span class="token keyword">let</span> resInfo <span class="token operator">=</span> <span class="token string">''</span>

    <span class="token keyword">const</span> chaArr <span class="token operator">=</span> data<span class="token punctuation">.</span>guiji<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> itm<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> prev
        <span class="token keyword">const</span> nv <span class="token operator">=</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> chaX <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nv<span class="token punctuation">.</span>x <span class="token operator">-</span> itm<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> chaY <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nv<span class="token punctuation">.</span>y <span class="token operator">-</span> itm<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> timeCha <span class="token operator">=</span> nv<span class="token punctuation">.</span>moveTime <span class="token operator">-</span> itm<span class="token punctuation">.</span>moveTime
        timed<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timeCha<span class="token punctuation">)</span><span class="token comment">//时间差</span>

        <span class="token comment">// 是否有重复的数组</span>
        <span class="token keyword">const</span> repeatXIndex <span class="token operator">=</span> repeatX<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>num <span class="token operator">===</span> chaX<span class="token punctuation">)</span>
        <span class="token keyword">const</span> repeatYIndex <span class="token operator">=</span> repeatY<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>num <span class="token operator">===</span> chaY<span class="token punctuation">)</span>

        <span class="token comment">// xy轴每2数差数据</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>repeatXIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                num<span class="token operator">:</span> chaX<span class="token punctuation">,</span>
                count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
            repeatX<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            repeatX<span class="token punctuation">[</span>repeatXIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>repeatYIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                num<span class="token operator">:</span> chaY<span class="token punctuation">,</span>
                count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
            repeatY<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            repeatY<span class="token punctuation">[</span>repeatYIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>

        prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> x<span class="token operator">:</span> chaX<span class="token punctuation">,</span> y<span class="token operator">:</span> chaY <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> prev
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">// 所有重复次数</span>
    <span class="token keyword">const</span> findXCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> findYCount <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    repeatX<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> findXCount<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>
    repeatY<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> findYCount<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> repeatMaxXCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>findXCount<span class="token punctuation">)</span><span class="token comment">//x重复最多的次数</span>
    <span class="token keyword">const</span> repeatMaxYCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>findYCount<span class="token punctuation">)</span><span class="token comment">//y重复最多的次数</span>
    <span class="token keyword">const</span> repeatMaxTimed <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>timed<span class="token punctuation">)</span><span class="token comment">//滑动时间重复最多的次数</span>


    <span class="token comment">// 时间波动最大次数等于chaArr.length滑动轨迹长度为人机</span>
    <span class="token keyword">const</span> timeTest <span class="token operator">=</span> repeatMaxTimed <span class="token operator">===</span> chaArr<span class="token punctuation">.</span>length

    <span class="token comment">// 滑动所用时间低于50毫秒 是人机</span>
    <span class="token comment">// x轴最大波动大于数等于所有波动长度则为人机</span>
    <span class="token comment">// y轴最大波动数等于所有波动长度则为人机</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>timed <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token operator">||</span> timeTest <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> repeatMaxXCount <span class="token operator">===</span> repeatX <span class="token operator">||</span> repeatMaxYCount <span class="token operator">===</span> chaArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        resInfo <span class="token operator">=</span> <span class="token string">'tail'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 是真人</span>
        resInfo <span class="token operator">=</span> <span class="token string">'success'</span>
    <span class="token punctuation">}</span>
<span class="token comment">// console.log(resInfo);</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>resInfo<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token keyword">const</span> host <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span> 
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3456</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> host<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>host <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> port <span class="token operator">+</span> <span class="token string">'/api/slidetest'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_903"></a>例：前端登录代码</h3> 
<p>需求：</p> 
<ol><li>用户登录输入的用户名与密码合法</li><li>用户点击登录按钮，不直接向后端发起登录请求，而是弹出验证滑块</li><li>验证成功 → 发起登录请求</li><li>验证成功 → 提示验证失败 ，不发起登录请求</li></ol> 
<blockquote> 
 <p>login.vue</p> 
</blockquote> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span> <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>用户名<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo.userName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>密码<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo.pwd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>登录<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slider-vfc</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo.showVfc<span class="token punctuation">"</span></span> <span class="token attr-name">servertest</span> <span class="token attr-name">@slide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 1em 0 0 0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
   userName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
   pwd<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
   showVfc<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">vfcStatu<span class="token punctuation">,</span> slideInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 进行简单校验 。仅作测试，真实开发中需严格校验</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>userName<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> userInfo<span class="token punctuation">.</span>pwd<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      userInfo<span class="token punctuation">.</span>showVfc <span class="token operator">=</span> <span class="token boolean">true</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请输入合法信息'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">if</span> <span class="token punctuation">(</span>vfcStatu<span class="token punctuation">.</span>statu<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/slidetest?datainfo='</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>slideInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 若滑块验证成功  验证成功可以做一些登录。注册等请求</span>
            vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> res<span class="token punctuation">.</span>data
	 		<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证成功'</span><span class="token punctuation">)</span>   
	            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这里可以做一些登录请求'</span><span class="token punctuation">)</span>
	            axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/login?unm=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>userInfo<span class="token punctuation">.</span>userName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;pwd=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>userInfo<span class="token punctuation">.</span>pwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
	        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'tail'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'验证失败'</span><span class="token punctuation">)</span>
	        <span class="token punctuation">}</span> 
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 若滑块验证出错</span>
            vfcStatu<span class="token punctuation">.</span>statu <span class="token operator">=</span> <span class="token string">'tail'</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre> 
<blockquote> 
 <p>输入前<br> <img src="https://images2.imgbox.com/e8/f0/fo9yP5XA_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>输入的信息合法 + 点击登录按钮后<br> <img src="https://images2.imgbox.com/e6/29/iV3V2wo4_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>验证成功发起登录请求<br> <img src="https://images2.imgbox.com/dd/48/GeVfeyIy_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>验证失败<br> <img src="https://images2.imgbox.com/5f/6d/hldjzBaH_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h2><a id="_978"></a>成品展示</h2> 
<h3><a id="_979"></a>登录前</h3> 
<p><img src="https://images2.imgbox.com/ec/c6/ujXAPBta_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_981"></a>未输入登录信息登录时</h3> 
<p><img src="https://images2.imgbox.com/4c/60/OeFPWzm4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_984"></a>输入的信息不合法时</h3> 
<ul><li>输入信息不合法不应该弹出滑块验证<br> <img src="https://images2.imgbox.com/8c/1e/zMKNZ9DB_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="_988"></a>输入信息合法时</h3> 
<p><img src="https://images2.imgbox.com/15/08/Bf0KeAEY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_991"></a>验证成功时</h3> 
<p>验证成功自动登录，反之，验证不成功不会发起登录请求，并提示重验<br> <img src="https://images2.imgbox.com/ba/a1/6JLhrAAV_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/93fb28c71b34eb39b7ccdcd12c9bcb12/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Charles使用教程【简易版】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78aef7e9c98c9da5d8eec67b772d3834/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【web-ctf】ctf-pikachu-file_download</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>