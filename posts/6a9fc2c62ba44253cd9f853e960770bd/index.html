<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为分布式块存储Fusion Storage知识总结（二） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为分布式块存储Fusion Storage知识总结（二）" />
<meta property="og:description" content="目录
一、华为分布式存储Fusion Storage介绍
二、Fusion Storage优势（特点）
1、高弹性和扩展性
2、高性能
3、高可靠性
4、高安全性
5、数据保护
6、高易用性
FusionStorage块存储支持网络拓扑统一管理，管理维护高效集中，简洁易用；并且支持精简配置、QoS\Cach缓存等存储高级特性
7、开放兼容
三、部署方式&amp;软件架构
1、部署方式
2、软件架构
四、Fusion Storage组件介绍
五、应用场景
1、资源池场景
2、数据库场景
六、Fusion Storage高级特性
1、HyperSnap特性
ROW（Redirect On Write）
源卷
快照卷
一致性快照
克隆
2、HyperMetro特性
3、HyperReplication特性
4、SmartQoS
5、其它概念
快照原理
本端卷、远端卷
双写
复制集群
双活域
双活Pair
双活一致性组
同步
暂停
强制启动
优先站点切换
FastWrite
乐观锁机制
一、华为分布式存储Fusion Storage介绍 FusionStorage是一款可大规模横向扩展的存储产品，通过存储系统软件将服务器的本地存储资源组织起来，构建全分布式存储池，通过SCSI和iSCSI接口向上层应用提供块存储服务，满足云资源池及数据库等场景的存储需求。
二、Fusion Storage优势（特点） 1、高弹性和扩展性 Fusion Storage块存储采用DHT（Distributed Hash Table，分布式哈希表）架构，保证了Fusion Storage块存储具备大规模的线性扩展能力
2、高性能 FusionStorage块存储通过动态智能分区、静态选盘算法以及自研EC算法，采用小IO聚合、大IO直通等技术，在实现了业务均衡分布和保证了存储高可靠的同时，也保证了存储的高性能。在使用HDD作为主存时，采用分布式SSD Cache加速方案，将各个存储节点上的SSD组建成为一个共享的分布式Cache资源池，供所有的业务共同所用，实现HDD主存的性能加速。
3、高可靠性 FusionStorage块存储采用分布式集群管理方式，系统全冗余部署，无单点故障。支持多副本和EC（Erasure Coding）两种数据冗余保护机制，支持设置灵活的数据可靠性策略，支持DIF、后台数据一致性校验等数据完整性校验功能。
4、高安全性 自研Fusion Storage OS系统，支持操作系统进行安全加固" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6a9fc2c62ba44253cd9f853e960770bd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-11T14:42:37+08:00" />
<meta property="article:modified_time" content="2022-10-11T14:42:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为分布式块存储Fusion Storage知识总结（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80%E3%80%81%E5%8D%8E%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8Fusion%20Storage%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%8D%8E%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8Fusion%20Storage%E4%BB%8B%E7%BB%8D" rel="nofollow">一、华为分布式存储Fusion Storage介绍</a></p> 
<p id="%E4%BA%8C%E3%80%81Fusion%20Storage%E4%BC%98%E5%8A%BF%EF%BC%88%E7%89%B9%E7%82%B9%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81Fusion%20Storage%E4%BC%98%E5%8A%BF%EF%BC%88%E7%89%B9%E7%82%B9%EF%BC%89" rel="nofollow">二、Fusion Storage优势（特点）</a></p> 
<p id="1%E3%80%81%E9%AB%98%E5%BC%B9%E6%80%A7%E5%92%8C%E6%89%A9%E5%B1%95%E6%80%A7-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E9%AB%98%E5%BC%B9%E6%80%A7%E5%92%8C%E6%89%A9%E5%B1%95%E6%80%A7" rel="nofollow">1、高弹性和扩展性</a></p> 
<p id="2%E3%80%81%E9%AB%98%E6%80%A7%E8%83%BD-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E9%AB%98%E6%80%A7%E8%83%BD" rel="nofollow">2、高性能</a></p> 
<p id="3%E3%80%81%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%80%A7-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%80%A7" rel="nofollow">3、高可靠性</a></p> 
<p id="4%E3%80%81%E9%AB%98%E5%AE%89%E5%85%A8%E6%80%A7-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E9%AB%98%E5%AE%89%E5%85%A8%E6%80%A7" rel="nofollow">4、高安全性</a></p> 
<p id="5%E3%80%81%E6%95%B0%E6%8D%AE%E4%BF%9D%E6%8A%A4-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E6%95%B0%E6%8D%AE%E4%BF%9D%E6%8A%A4" rel="nofollow">5、数据保护</a></p> 
<p id="6%E3%80%81%E9%AB%98%E6%98%93%E7%94%A8%E6%80%A7-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E9%AB%98%E6%98%93%E7%94%A8%E6%80%A7" rel="nofollow">6、高易用性</a></p> 
<p id="FusionStorage%E5%9D%97%E5%AD%98%E5%82%A8%E6%94%AF%E6%8C%81%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%EF%BC%8C%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4%E9%AB%98%E6%95%88%E9%9B%86%E4%B8%AD%EF%BC%8C%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%EF%BC%9B%E5%B9%B6%E4%B8%94%E6%94%AF%E6%8C%81%E7%B2%BE%E7%AE%80%E9%85%8D%E7%BD%AE%E3%80%81QoS%5CCach%E7%BC%93%E5%AD%98%E7%AD%89%E5%AD%98%E5%82%A8%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7-toc" style="margin-left:80px;"><a href="#FusionStorage%E5%9D%97%E5%AD%98%E5%82%A8%E6%94%AF%E6%8C%81%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%EF%BC%8C%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4%E9%AB%98%E6%95%88%E9%9B%86%E4%B8%AD%EF%BC%8C%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%EF%BC%9B%E5%B9%B6%E4%B8%94%E6%94%AF%E6%8C%81%E7%B2%BE%E7%AE%80%E9%85%8D%E7%BD%AE%E3%80%81QoS%5CCach%E7%BC%93%E5%AD%98%E7%AD%89%E5%AD%98%E5%82%A8%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7" rel="nofollow">FusionStorage块存储支持网络拓扑统一管理，管理维护高效集中，简洁易用；并且支持精简配置、QoS\Cach缓存等存储高级特性</a></p> 
<p id="7%E3%80%81%E5%BC%80%E6%94%BE%E5%85%BC%E5%AE%B9-toc" style="margin-left:40px;"><a href="#7%E3%80%81%E5%BC%80%E6%94%BE%E5%85%BC%E5%AE%B9" rel="nofollow">7、开放兼容</a></p> 
<p id="%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%26%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%26%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84" rel="nofollow">三、部署方式&amp;软件架构</a></p> 
<p id="1%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F" rel="nofollow">1、部署方式</a></p> 
<p id="%C2%A02%E3%80%81%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84" rel="nofollow"> 2、软件架构</a></p> 
<p id="%C2%A0%E5%9B%9B%E3%80%81Fusion%20Storage%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%9B%9B%E3%80%81Fusion%20Storage%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D" rel="nofollow"> 四、Fusion Storage组件介绍</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">五、应用场景</a></p> 
<p id="1%E3%80%81%E8%B5%84%E6%BA%90%E6%B1%A0%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%B5%84%E6%BA%90%E6%B1%A0%E5%9C%BA%E6%99%AF" rel="nofollow">1、资源池场景</a></p> 
<p id="2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9C%BA%E6%99%AF" rel="nofollow">2、数据库场景</a></p> 
<p id="%E5%85%AD%E3%80%81Fusion%20Storage%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81Fusion%20Storage%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7" rel="nofollow">六、Fusion Storage高级特性</a></p> 
<p id="1%E3%80%81HyperSnap%E7%89%B9%E6%80%A7-toc" style="margin-left:40px;"><a href="#1%E3%80%81HyperSnap%E7%89%B9%E6%80%A7" rel="nofollow">1、HyperSnap特性</a></p> 
<p id="ROW%EF%BC%88Redirect%20On%20Write%EF%BC%89-toc" style="margin-left:80px;"><a href="#ROW%EF%BC%88Redirect%20On%20Write%EF%BC%89" rel="nofollow">ROW（Redirect On Write）</a></p> 
<p id="%E6%BA%90%E5%8D%B7-toc" style="margin-left:80px;"><a href="#%E6%BA%90%E5%8D%B7" rel="nofollow">源卷</a></p> 
<p id="%E5%BF%AB%E7%85%A7%E5%8D%B7-toc" style="margin-left:80px;"><a href="#%E5%BF%AB%E7%85%A7%E5%8D%B7" rel="nofollow">快照卷</a></p> 
<p id="%E4%B8%80%E8%87%B4%E6%80%A7%E5%BF%AB%E7%85%A7-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E8%87%B4%E6%80%A7%E5%BF%AB%E7%85%A7" rel="nofollow">一致性快照</a></p> 
<p id="%E5%85%8B%E9%9A%86-toc" style="margin-left:80px;"><a href="#%E5%85%8B%E9%9A%86" rel="nofollow">克隆</a></p> 
<p id="%C2%A02%E3%80%81HyperMetro%E7%89%B9%E6%80%A7-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81HyperMetro%E7%89%B9%E6%80%A7" rel="nofollow"> 2、HyperMetro特性</a></p> 
<p id="3%E3%80%81HyperReplication%E7%89%B9%E6%80%A7-toc" style="margin-left:40px;"><a href="#3%E3%80%81HyperReplication%E7%89%B9%E6%80%A7" rel="nofollow">3、HyperReplication特性</a></p> 
<p id="4%E3%80%81SmartQoS-toc" style="margin-left:40px;"><a href="#4%E3%80%81SmartQoS" rel="nofollow">4、SmartQoS</a></p> 
<p id="5%E3%80%81%E5%85%B6%E5%AE%83%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E5%85%B6%E5%AE%83%E6%A6%82%E5%BF%B5" rel="nofollow">5、其它概念</a></p> 
<p id="%E5%BF%AB%E7%85%A7%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#%E5%BF%AB%E7%85%A7%E5%8E%9F%E7%90%86" rel="nofollow">快照原理</a></p> 
<p id="%E6%9C%AC%E7%AB%AF%E5%8D%B7%E3%80%81%E8%BF%9C%E7%AB%AF%E5%8D%B7-toc" style="margin-left:80px;"><a href="#%E6%9C%AC%E7%AB%AF%E5%8D%B7%E3%80%81%E8%BF%9C%E7%AB%AF%E5%8D%B7" rel="nofollow">本端卷、远端卷</a></p> 
<p id="%E5%8F%8C%E5%86%99-toc" style="margin-left:80px;"><a href="#%E5%8F%8C%E5%86%99" rel="nofollow">双写</a></p> 
<p id="%E5%A4%8D%E5%88%B6%E9%9B%86%E7%BE%A4-toc" style="margin-left:80px;"><a href="#%E5%A4%8D%E5%88%B6%E9%9B%86%E7%BE%A4" rel="nofollow">复制集群</a></p> 
<p id="%E5%8F%8C%E6%B4%BB%E5%9F%9F-toc" style="margin-left:80px;"><a href="#%E5%8F%8C%E6%B4%BB%E5%9F%9F" rel="nofollow">双活域</a></p> 
<p id="%E5%8F%8C%E6%B4%BBPair-toc" style="margin-left:80px;"><a href="#%E5%8F%8C%E6%B4%BBPair" rel="nofollow">双活Pair</a></p> 
<p id="%E5%8F%8C%E6%B4%BB%E4%B8%80%E8%87%B4%E6%80%A7%E7%BB%84-toc" style="margin-left:80px;"><a href="#%E5%8F%8C%E6%B4%BB%E4%B8%80%E8%87%B4%E6%80%A7%E7%BB%84" rel="nofollow">双活一致性组</a></p> 
<p id="%E5%90%8C%E6%AD%A5-toc" style="margin-left:80px;"><a href="#%E5%90%8C%E6%AD%A5" rel="nofollow">同步</a></p> 
<p id="%E6%9A%82%E5%81%9C-toc" style="margin-left:80px;"><a href="#%E6%9A%82%E5%81%9C" rel="nofollow">暂停</a></p> 
<p id="%E5%BC%BA%E5%88%B6%E5%90%AF%E5%8A%A8-toc" style="margin-left:80px;"><a href="#%E5%BC%BA%E5%88%B6%E5%90%AF%E5%8A%A8" rel="nofollow">强制启动</a></p> 
<p id="%E4%BC%98%E5%85%88%E7%AB%99%E7%82%B9%E5%88%87%E6%8D%A2-toc" style="margin-left:80px;"><a href="#%E4%BC%98%E5%85%88%E7%AB%99%E7%82%B9%E5%88%87%E6%8D%A2" rel="nofollow">优先站点切换</a></p> 
<p id="FastWrite-toc" style="margin-left:80px;"><a href="#FastWrite" rel="nofollow">FastWrite</a></p> 
<p id="%E4%B9%90%E8%A7%82%E9%94%81%E6%9C%BA%E5%88%B6-toc" style="margin-left:80px;"><a href="#%E4%B9%90%E8%A7%82%E9%94%81%E6%9C%BA%E5%88%B6" rel="nofollow">乐观锁机制</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%8D%8E%E4%B8%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8Fusion%20Storage%E4%BB%8B%E7%BB%8D">一、华为分布式存储Fusion Storage介绍</h2> 
<p>FusionStorage是一款可大规模横向扩展的存储产品，通过存储系统软件将服务器的本地存储资源组织起来，构建全分布式存储池，通过SCSI和iSCSI接口向上层应用提供块存储服务，满足云资源池及数据库等场景的存储需求。</p> 
<h2 id="%E4%BA%8C%E3%80%81Fusion%20Storage%E4%BC%98%E5%8A%BF%EF%BC%88%E7%89%B9%E7%82%B9%EF%BC%89">二、Fusion Storage优势（特点）</h2> 
<h3 id="1%E3%80%81%E9%AB%98%E5%BC%B9%E6%80%A7%E5%92%8C%E6%89%A9%E5%B1%95%E6%80%A7">1、<strong>高弹性和扩展性</strong></h3> 
<p>Fusion Storage块存储采用DHT（Distributed Hash Table，分布式哈希表）架构，保证了Fusion Storage块存储具备大规模的线性扩展能力</p> 
<h3 id="2%E3%80%81%E9%AB%98%E6%80%A7%E8%83%BD">2、高性能</h3> 
<p>FusionStorage块存储通过动态智能分区、静态选盘算法以及自研EC算法，采用小IO聚合、大IO直通等技术，在实现了业务均衡分布和保证了存储高可靠的同时，也保证了存储的高性能。在使用HDD作为主存时，采用分布式SSD Cache加速方案，将各个存储节点上的SSD组建成为一个共享的分布式Cache资源池，供所有的业务共同所用，实现HDD主存的性能加速。</p> 
<h3 id="3%E3%80%81%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%80%A7"><strong>3、高可靠性</strong></h3> 
<p>FusionStorage块存储采用分布式集群管理方式，系统全冗余部署，无单点故障。支持多副本和EC（Erasure Coding）两种数据冗余保护机制，支持设置灵活的数据可靠性策略，支持DIF、后台数据一致性校验等数据完整性校验功能。</p> 
<h3 id="4%E3%80%81%E9%AB%98%E5%AE%89%E5%85%A8%E6%80%A7">4、<strong>高安全性</strong></h3> 
<p><strong>自研</strong>Fusion Storage OS系统，支持操作系统进行安全加固</p> 
<p>支持通过加密通道（HTTPS）方式传输数据，保证数据在传输环节不被泄露。</p> 
<h3 id="5%E3%80%81%E6%95%B0%E6%8D%AE%E4%BF%9D%E6%8A%A4">5、<strong>数据保护</strong></h3> 
<p>提供快照、远程复制、双活等数据保护机制</p> 
<h3 id="6%E3%80%81%E9%AB%98%E6%98%93%E7%94%A8%E6%80%A7">6、<strong>高易用性</strong></h3> 
<h4 id="FusionStorage%E5%9D%97%E5%AD%98%E5%82%A8%E6%94%AF%E6%8C%81%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%EF%BC%8C%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4%E9%AB%98%E6%95%88%E9%9B%86%E4%B8%AD%EF%BC%8C%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%EF%BC%9B%E5%B9%B6%E4%B8%94%E6%94%AF%E6%8C%81%E7%B2%BE%E7%AE%80%E9%85%8D%E7%BD%AE%E3%80%81QoS%5CCach%E7%BC%93%E5%AD%98%E7%AD%89%E5%AD%98%E5%82%A8%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7">FusionStorage块存储支持网络拓扑统一管理，管理维护高效集中，简洁易用；并且支持精简配置、QoS\Cach缓存等存储高级特性</h4> 
<h3 id="7%E3%80%81%E5%BC%80%E6%94%BE%E5%85%BC%E5%AE%B9">7、<strong>开放兼容</strong></h3> 
<p>FusionStorage块存储具备广泛的兼容性，支持各种存储介质如：SATA盘、SAS盘、SSD卡&amp;NVMeSSD、SSD盘、SATA加密盘、SAS加密盘等；支持各种Cache介质如：SSD卡&amp;NVMeSSD、SSD盘等。SSD卡&amp;NVMeSSD、SSD盘属于保电Cache，在系统掉电的时候数据仍然不丢失。支持各种网络介质类型，允许采用如IB、RoCE以及TCP等将存储服务器互联。支持工业界标准的SCSI和iSCSI接口。</p> 
<h2 id="%E4%B8%89%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%26%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84">三、部署方式&amp;软件架构</h2> 
<h3 id="1%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F">1、部署方式</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/41/35/ZdAAamNf_o.jpg"></p> 
<h3 id="%C2%A02%E3%80%81%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84"> 2、软件架构</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5e/0c/vbYa0W0P_o.png"></p> 
<table border="1" cellpadding="4" cellspacing="0" id="ZH-CN_TOPIC_0142457319__table18291719204710"><thead><tr><th colspan="2" id="mcps1.3.3.2.4.1.1"> <p><strong>类型</strong></p> </th><th id="mcps1.3.3.2.4.1.2"> <p><strong>说明</strong></p> </th></tr></thead><tbody><tr><td rowspan="2" style="vertical-align:top;"> <p>存储接口层</p> </td><td style="vertical-align:top;"> <p>SCSI</p> </td><td style="vertical-align:top;"> <p>通过SCSI标准驱动在本地映射卷，然后通过私有通信协议与存储通信，向操作系统、数据库提供卷设备。</p> </td></tr><tr><td style="vertical-align:top;"> <p>iSCSI</p> </td><td style="vertical-align:top;"> <p>与多路径软件配合支持iSCSI协议接口，向操作系统、数据库提供卷设备。</p> </td></tr><tr><td rowspan="5" style="vertical-align:top;"> <p>存储服务层</p> </td><td style="vertical-align:top;"> <p>HyperSnap软件模块</p> </td><td style="vertical-align:top;"> <p>实现快照功能。快照不做完整的物理上的数据拷贝，通过映射表来定位数据位置，从而快速提供完整的数据副本。</p> </td></tr><tr><td style="vertical-align:top;"> <p>HyperReplication软件模块</p> </td><td style="vertical-align:top;"> <p>实现远程复制功能。远程复制可以在不同地域的存储系统上几乎实时地产生一份可用的副本。此副本不需要做数据恢复操作就可立即投入使用，从而最大限度的保障用户应用的连续性和数据的可用性。远程复制Pair加入到一致性组以后，用户对一致性组进行操作，一致性组内的远程复制Pair会同时响应用户的操作，从而保证多个远程复制Pair的数据在时间上保持一致。</p> </td></tr><tr><td style="vertical-align:top;"> <p>HyperMetro软件模块</p> </td><td style="vertical-align:top;"> <p>实现双活功能。双活在两套存储系统间对数据进行实时同步和访问，在任一端数据访问出现故障时实现业务无缝切换，保障数据的安全性和业务的连续性。</p> </td></tr><tr><td style="vertical-align:top;"> <p>SmartQoS软件模块</p> </td><td style="vertical-align:top;"> <p>实现智能服务质量控制功能。通过SmartQoS，对卷的性能进行调控，从而保证高优先级业务的服务质量。</p> </td></tr><tr><td style="vertical-align:top;"> <p>SmartCache软件模块</p> </td><td style="vertical-align:top;"> <p>用高速、小容量的硬盘作为低速、大容量的硬盘的缓冲存储器。SmartCache软件模块主要负责数据的缓存，提高存储系统的读写性能。</p> </td></tr><tr><td rowspan="5" style="vertical-align:top;"> <p>存储引擎层</p> </td><td style="vertical-align:top;"> <p>集群状态控制</p> </td><td style="vertical-align:top;"> <p>实现对分布式集群的状态控制，包括节点、硬盘和网络等的状态控制。</p> </td></tr><tr><td style="vertical-align:top;"> <p>数据冗余管理</p> </td><td style="vertical-align:top;"> <p>负责Erasure Coding和副本的计算，保证数据的高可靠性。</p> </td></tr><tr><td style="vertical-align:top;"> <p>分布式数据路由</p> </td><td style="vertical-align:top;"> <p>负责将数据和元数据按规则均匀分布在各存储节点。</p> </td></tr><tr><td style="vertical-align:top;"> <p>数据重构均衡</p> </td><td style="vertical-align:top;"> <p>负责数据的重建、均衡等。</p> </td></tr><tr><td style="vertical-align:top;"> <p>强一致性复制协议</p> </td><td style="vertical-align:top;"> <p>负责复制或双活Pair间数据的一致性。</p> </td></tr><tr><td colspan="2" style="vertical-align:top;"> <p>存储管理</p> </td><td style="vertical-align:top;"> <p>负责系统的操作、管理和维护，提供系统安装、部署、业务配置、设备管理、监控、告警、升级、扩容等功能。</p> </td></tr></tbody></table> 
<h2 id="%C2%A0%E5%9B%9B%E3%80%81Fusion%20Storage%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D"> 四、Fusion Storage组件介绍</h2> 
<table border="1" cellpadding="4" cellspacing="0" id="ZH-CN_TOPIC_0142457319__table187321933171614"><thead><tr><th id="mcps1.3.4.6.2.3.1.1"> <p><strong>组件或进程</strong></p> </th><th id="mcps1.3.4.6.2.3.1.2"> <p><strong>说明</strong></p> </th></tr></thead><tbody><tr><td style="vertical-align:top;"> <p>FSM</p> </td><td style="vertical-align:top;"> <p>FusionStorage块存储的Manager，为管理进程，实现系统的资源监控、配置、管理、升级和扩容等功能，必须主备管理节点部署。</p> <p>安装管理节点时启动FSM进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>FSA</p> </td><td style="vertical-align:top;"> <p>FusionStorage块存储的Agent，为管理代理进程，部署在各存储节点和计算节点上，实现各节点与FSM通信。</p> <p>安装存储节点和计算节点时启动FSA进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>MDC</p> </td><td style="vertical-align:top;"> <p>Metadata Controller，为元数据控制组件，实现对分布式集群的状态控制，以及控制数据分布规则、数据重建规则等。</p> <p>选择3个、5个、7个或者9个节点创建控制集群时，对应的控制集群节点上会启动MDC进程，由ZK集群在多个MDC中选举主MDC，主MDC对其它MDC进行监控，主MDC故障时产生新的主MDC。每个资源池有一个归属MDC，增加资源池也会自动启动MDC，一个系统最多启动96个MDC。</p> </td></tr><tr><td style="vertical-align:top;"> <p>ZK</p> </td><td style="vertical-align:top;"> <p>ZooKeeper，分布式应用程序协调服务进程。ZK部署在控制集群的每个节点上，形成ZK集群，为MDC集群提供选主仲裁，必须保证大于总数一半的Zookeeper处在活跃可访问状态。</p> <p>创建控制集群时，对应的控制集群节点上会启动ZK进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>VBS</p> </td><td style="vertical-align:top;"> <p>Virtual Block Service，VBS通过SCSI或iSCSI接口提供分布式存储接入点服务，使应用服务器能够通过VBS访问分布式存储资源。</p> <p>选择服务器启用VBS后，该服务器上启动VBS进程，部署VBS进程的服务器形成VBS集群。</p> </td></tr><tr><td style="vertical-align:top;"> <p>EDS</p> </td><td style="vertical-align:top;"> <p>Enterprise Data Service，提供快照、重删、复制等企业级特性的服务。</p> <p>加入存储池的服务器上会启动EDS进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>OSD</p> </td><td style="vertical-align:top;"> <p>Object Storage Device，其功能是处理VBS下发的IO消息，进行数据冗余保护并持久化到存储介质中。</p> <p>加入存储池的服务器上会启动OSD进程，一个服务器上启动一个OSD进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>CM</p> </td><td style="vertical-align:top;"> <p>Cluster Manager，集群管理进程，用于管理控制集群信息。</p> <p>当创建控制集群时，启动CM进程。</p> </td></tr><tr><td style="vertical-align:top;"> <p>CCDB</p> </td><td style="vertical-align:top;"> <p>Cluster Configuration Database，集群配置数据库，存储集群的配置信息（如双活Pair、远程复制Pair和一致性组信息）。</p> <p>当创建控制集群时，启动CCDB进程。</p> </td></tr></tbody></table> 
<h2 id="%E4%BA%94%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">五、应用场景</h2> 
<p>FusionStorage块存储的主要应用场景分为虚拟化资源池场景及数据库场景。</p> 
<h3 id="1%E3%80%81%E8%B5%84%E6%BA%90%E6%B1%A0%E5%9C%BA%E6%99%AF">1、资源池场景</h3> 
<p>在大规模云计算数据中心中，将通用存储服务器池化，建立大规模块存储资源池，提供标准的块存储数据访问接口（SCSI和iSCSI）。可以和各种云平台集成，如华为FusionSphere、VMware vSphere、开源OpenStack等，按需分配存储资源；支持各种业务应用如OLTP/OLAP（Online Transaction Processing/Online Analytical Processing）、VSI（Virtual Server Infrastructure）、VDI（Virtual Desktop Infrastructure）、Web、OA（Office Automation）等等</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/31/22/1DNskCKs_o.png"></p> 
<h3 id="2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9C%BA%E6%99%AF">2、数据库场景</h3> 
<p>在企业关键IT基础设施中，通过Infiniband进行服务器互联以及SSD做Cache或主存等关键技术，将存储系统的性能和可靠性得到极大的提高。又保留了分布式存储的高扩展性基因，从而支持企业关键数据库、关键ERP/CRM等应用的使用，解决这些关键应用的大数据量需求。</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/ff/89/cABsXNPf_o.png"></p> 
<h2 id="%E5%85%AD%E3%80%81Fusion%20Storage%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7">六、Fusion Storage高级特性</h2> 
<h3 id="1%E3%80%81HyperSnap%E7%89%B9%E6%80%A7">1、HyperSnap特性</h3> 
<p>HyperSnap特性是华为自主开发的快照特性，是指源数据在某个时间点的一致性数据副本，是对指定数据集合的一个完全可用的拷贝，该拷贝包含源数据在拷贝时间点的静态映像。对于存储系统，存储系统生成的快照为只读快照，支持挂载给主机进行访问。针对用户需要对快照数据副本进行读写访问的场景，存储系统提供了链接克隆技术，对生成的快照再创建克隆，生成可写镜像，用于数据分析和测试。</p> 
<ul><li> <h4 id="ROW%EF%BC%88Redirect%20On%20Write%EF%BC%89">ROW（Redirect On Write）</h4> <p>ROW是指写时重定向技术，是实现快照的核心技术。当系统收到写数据请求需要修改源卷时，存储系统在存储池中为新写入的数据分配新的存储空间，并修改源卷中数据与存储空间的映射关系。</p> </li><li> <h4 id="%E6%BA%90%E5%8D%B7">源卷</h4> <p>需要进行快照操作的源数据所在的卷。</p> </li><li> <h4 id="%E5%BF%AB%E7%85%A7%E5%8D%B7">快照卷</h4> <p>对源卷创建快照后，该卷在某个时间点的一致性数据只读副本。</p> </li><li> <h4 id="%E4%B8%80%E8%87%B4%E6%80%A7%E5%BF%AB%E7%85%A7">一致性快照</h4> <p>为一个应用或同一类业务中多个有业务关联的卷同时创建快照，保证多个快照在时间上的一致性。</p> </li><li> <h4 id="%E5%85%8B%E9%9A%86">克隆</h4> <p>基于快照创建的可写镜像。</p> </li></ul> 
<h3 id="%C2%A02%E3%80%81HyperMetro%E7%89%B9%E6%80%A7"> 2、HyperMetro特性</h3> 
<p>HyperMetro特性是基于的端到端双活数据中心解决方案，HyperMetro特性中的两个数据中心互为备份，且都处于运行状态。当一个数据中心发生设备故障，甚至数据中心整体故障时，业务自动切换到另一个数据中心，解决了传统灾备中心不能承载业务和业务无法自动切换的问题。提供给用户高级别的数据可靠性以及业务连续性的同时，提高存储系统的资源利用率。</p> 
<p>HyperMetro特性具有以下特点及优势：</p> 
<ul><li>基于两套集群构建Active-Active读写访问能力，任意一个数据中心故障，数据零丢失，系统自动切换到另外一个集群运行，做到RPO=0，RTO≈0，保证上层业务连续性。</li><li>基于两套存储集群虚拟出一个跨站点的虚拟卷，该虚拟卷的数据在两个存储集群之间实时同步，且两套存储集群能够同时处理计算节点的I/O读写请求。</li><li>具有良好的弹性扩展能力，对于大规模应用客户，每个存储集群可以配置多个节点，每个节点都可分担数据同步的负载，满足后续的业务增长。</li><li>支持多种仲裁模式：第三方仲裁和静态优先仲裁。在配置的第三方仲裁服务器故障的情况下，系统自动切换到静态优先仲裁模式，提高业务连续性。</li></ul> 
<h3 id="3%E3%80%81HyperReplication%E7%89%B9%E6%80%A7">3、HyperReplication特性</h3> 
<p>华为自主开发的远程复制特性，为用户提供了灵活且强大的数据复制功能，通过远程复制能够实现数据的备份和恢复、持续的业务数据支撑、数据的容灾恢复。远程复制通过异步复制模式，对主从两端存储系统的数据进行周期性同步，实现系统容灾，从而最大限度减少由于数据远程传输的时延而造成的业务性能下降。</p> 
<h3 id="4%E3%80%81SmartQoS">4、SmartQoS</h3> 
<p>通过动态地分配存储系统的资源来满足某些应用程序的特定性能目标。存储系统提供的SmartQoS特性支持用户为非关键业务配置QoS策略，限制其最大性能，减小其对关键业务的影响。</p> 
<p>SmartQoS特性的特点包括：</p> 
<ul><li>分布式的QoS流控</li><li>提供灵活的定时生效策略配置</li><li>提供Burst功能</li><li>前后台业务统一管控</li></ul> 
<h3 id="5%E3%80%81%E5%85%B6%E5%AE%83%E6%A6%82%E5%BF%B5">5、其它概念</h3> 
<h4 id="%E5%BF%AB%E7%85%A7%E5%8E%9F%E7%90%86">快照原理</h4> 
<p>存储系统通过ROW技术实现HyperSnap特性。</p> 
<p>HyperSnap的快照实现如下：</p> 
<ul><li>创建快照 <p>快照创建成功后会被立即激活，系统会生成与源卷一致的数据副本。此时，存储系统将源卷的指针复制给快照，快照的指针指向源卷数据的存储位置，快照和源卷的数据一致。</p> <p>生成的快照卷为只读快照，用户可以通过SCSI/iSCSI接口访问快照。</p> </li><li>源卷写入数据 <p>快照创建后，当应用服务器对源卷有数据写入请求时，存储系统利用ROW技术将新写入的数据存放在存储池中新的位置，源卷的指针更新，指向新数据的存放位置。快照的指针仍指向原始数据的存储位置，从而保存源卷在快照创建时间点的数据。</p> </li></ul> 
<p>HyperSnap不但能够快速生成源卷在某个时间点的一致性副本，还提供了快速恢复源卷的机制。当源卷的数据遭到人为意外删除、破坏或病毒入侵时，通过回滚可以快速将源卷的数据恢复到快照创建时间点的数据，减少源卷数据的丢失量。</p> 
<p>除支持对卷创建只读快照副本外，存储系统还支持对已经创建的快照再创建克隆，生成的克隆为可写镜像。当有业务需要对源卷进行测试分析，需要改变原有数据时，为了不影响生产数据，可以对生产数据先创建快照，再对快照创建克隆。</p> 
<p>当对克隆卷写入数据后，系统会为数据分配新的存储空间</p> 
<p>为了使用副本进行快速数据备份和恢复，且提升存储空间利用率，存储系统还支持创建链接克隆，即对克隆创建快照后再创建克隆，</p> 
<h4 id="%E6%9C%AC%E7%AB%AF%E5%8D%B7%E3%80%81%E8%BF%9C%E7%AB%AF%E5%8D%B7">本端卷、远端卷</h4> 
<p>本端数据中心的存储设备中的卷称为本端卷，远端数据中心的存储设备中的卷称为远端卷。</p> 
<h4 id="%E5%8F%8C%E5%86%99">双写</h4> 
<p>将主机的I/O请求同步写入本端卷和远端卷的过程。</p> 
<h4 id="%E5%A4%8D%E5%88%B6%E9%9B%86%E7%BE%A4">复制集群</h4> 
<p>复制集群包括复制控制集群和复制业务集群。</p> 
<ul><li>复制控制集群：用于管理集群节点和集群元数据，支持3、5、7、9个节点，其中复制控制集群CCDB进程需要使用本地存储用于记录元数据信息。</li><li>复制业务集群：用于双活Pair或一致性组的管理操作，支持3个~64个节点。</li></ul> 
<h4 id="%E5%8F%8C%E6%B4%BB%E5%9F%9F">双活域</h4> 
<p>双活域由本端存储设备、远端存储设备和仲裁服务器组成。</p> 
<h4 id="%E5%8F%8C%E6%B4%BBPair">双活Pair</h4> 
<p>双活Pair是指本端卷和远端卷之间的双活关系。在配置双活时，本端存储系统的一个本端卷和远端存储系统的一个远端卷构成一个Pair。通过查看Pair运行状态，可以及时地根据状态取值对双活进行同步、暂停、优先站点切换等操作，并在操作结束后根据双活Pair的状态判断操作是否成功。配置双活Pair前，需要配置双活域，每个双活Pair必须创建在双活域中。</p> 
<h4 id="%E5%8F%8C%E6%B4%BB%E4%B8%80%E8%87%B4%E6%80%A7%E7%BB%84">双活一致性组</h4> 
<p>一致性组是指多个业务相关联的双活Pair的集合。例如，本端存储系统的三个本端卷分别存放某数据库的数据、日志和修改信息，任何一个卷的数据错误将导致三个卷中的数据整体无法使用。这三个卷所在的双活Pair构成的集合即是一个一致性组。在实际配置中，需要先创建一个一致性组，再手动将这三个Pair依次添加到已创建的一致性组中。</p> 
<h4 id="%E5%90%8C%E6%AD%A5">同步</h4> 
<p>同步是指本端卷和远端卷的差异数据的同步过程。既可以对单个双活Pair进行同步，也可以通过一致性组对多个双活Pair同步。</p> 
<h4 id="%E6%9A%82%E5%81%9C">暂停</h4> 
<p>暂停是指暂时断开本端卷和远端卷双活关系的过程。</p> 
<h4 id="%E5%BC%BA%E5%88%B6%E5%90%AF%E5%8A%A8">强制启动</h4> 
<p>在多重故障情况下，双活为了优先保证本端存储系统和远端存储系统的数据一致性，可能会停止两端主机的访问。此时，为了快速恢复业务，可根据故障情况选择强制启动本端存储系统或远端存储系统为主机继续提供服务。</p> 
<h4 id="%E4%BC%98%E5%85%88%E7%AB%99%E7%82%B9%E5%88%87%E6%8D%A2">优先站点切换</h4> 
<p>双活数据中心链路故障时，优先站点可以优先提交仲裁，从而使优先站点优先获得仲裁获胜，可以继续提供主机业务。</p> 
<p>在创建双活时，默认设置本端存储系统为优先站点，远端存储系统为非优先站点。</p> 
<h4 id="FastWrite">FastWrite</h4> 
<p>FastWrite功能使两个站点之间的数据传输只需要一个RTT时间，提升了传输效率。</p> 
<h4 id="%E4%B9%90%E8%A7%82%E9%94%81%E6%9C%BA%E5%88%B6">乐观锁机制</h4> 
<p>乐观锁机制是双活两端卷发生写冲突时的一种解决策略。例如，主机A和主机B同时写同一存储地址，当主机A提交I/O1时，先加本地锁，然后将I/O1同步到远端站点。当在远端站点检测到主机B的I/O2正在执行写时，如果主机A侧为优先站点，则I/O1在远端进行等待直到远端加锁成功并提交数据；如果主机A侧为非优先站点，I/O1结束并释放本地锁，I/O1流程重新执行。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55cc12e4e8ac30364c89219bc4c76e78/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python爬虫 xpath使用问题整理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f2acff924c55ea5ded92e16687ea4b6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PID参数调节总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>