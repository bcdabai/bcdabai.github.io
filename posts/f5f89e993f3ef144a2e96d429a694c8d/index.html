<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【GNSS】GNSS数据下载工具 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【GNSS】GNSS数据下载工具" />
<meta property="og:description" content="GNSS数据下载工具 ​ 该脚本为武汉大学测绘学院李星星教授开源的linux端GNSS数据下载脚本，脚本为perl语言编写，可支持下载rinexo，rinexn，rinexc，snx等常用格式的GNSS数据，支持常用mgex机构切换。
原地址为 http://igmas.users.sgg.whu.edu.cn/group/tool/4
网站还有其他有用的小工具，感兴趣的可以去看一下。
【所属分类】：perl脚本
【开发工具】：perl
【文件大小】：13KB
【使用说明】：使用前需要注册cddis账号，并将账号密码写.netrc文件放在用户根目录下
文件格式如下：machine urs.earthdata.nasa.gov login username password password
【使用示例】：
# 可下载的文件种类如下： -obs daily daily_v2 daily_v3 hourly hourly_v2 hourly_v3 -nav brdc hourly daily -dcb cas code (dlr not supported now) -snx igs -orb gfz wum grg cod igs -clk gfz wum grg cod igs -eop all daily gpsrapid -slr all 代码 #!/usr/bin/perl ## # Usage : IGS/MGEX data/products downloading # Created : Yuan Yongqiang, 2020/10/24 # Updated : Yuan Yongqiang, 2020/10/25, adding EOP and PRODUCTS downloading # # -obs daily daily_v2 daily_v3 hourly hourly_v2 hourly_v3 # -nav brdc hourly daily # -dcb cas code (dlr not supported now) # -snx igs # -orb gfz wum grg cod igs # -clk gfz wum grg cod igs # -eop all daily gpsrapid # -slr all # ## 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f5f89e993f3ef144a2e96d429a694c8d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-31T18:18:37+08:00" />
<meta property="article:modified_time" content="2021-01-31T18:18:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【GNSS】GNSS数据下载工具</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="GNSS_0"></a>GNSS数据下载工具</h2> 
<p>​ 该脚本为武汉大学测绘学院李星星教授开源的linux端GNSS数据下载脚本，脚本为perl语言编写，可支持下载rinexo，rinexn，rinexc，snx等常用格式的GNSS数据，支持常用mgex机构切换。</p> 
<blockquote> 
 <p>原地址为 http://igmas.users.sgg.whu.edu.cn/group/tool/4</p> 
 <p>网站还有其他有用的小工具，感兴趣的可以去看一下。</p> 
</blockquote> 
<p><strong>【所属分类】</strong>：perl脚本<br> <strong>【开发工具】</strong>：perl<br> <strong>【文件大小】</strong>：13KB<br> <strong>【使用说明】</strong>：使用前需要注册cddis账号，并将账号密码写.netrc文件放在用户根目录下<br> 文件格式如下：<code>machine urs.earthdata.nasa.gov login username password password</code><br> <strong>【使用示例】</strong>：</p> 
<pre><code class="prism language-shell"> <span class="token comment"># 可下载的文件种类如下： </span>
 -obs daily daily_v2 daily_v3 hourly hourly_v2 hourly_v3  
 -nav brdc hourly daily 
 -dcb cas code <span class="token punctuation">(</span>dlr not supported now<span class="token punctuation">)</span> 
 -snx igs 
 -orb gfz wum grg cod igs 
 -clk gfz wum grg cod igs 
 -eop all daily gpsrapid 
 -slr all
</code></pre> 
<h2><a id="_27"></a>代码</h2> 
<pre><code class="prism language-perl"><span class="token comment">#!/usr/bin/perl</span>
<span class="token comment">## </span>
<span class="token comment">#  Usage   : IGS/MGEX data/products downloading</span>
<span class="token comment">#  Created : Yuan Yongqiang, 2020/10/24</span>
<span class="token comment">#  Updated : Yuan Yongqiang, 2020/10/25, adding EOP and PRODUCTS downloading</span>
<span class="token comment">#</span>
<span class="token comment"># -obs daily daily_v2 daily_v3 hourly hourly_v2 hourly_v3 </span>
<span class="token comment"># -nav brdc hourly daily</span>
<span class="token comment"># -dcb cas code (dlr not supported now)</span>
<span class="token comment"># -snx igs</span>
<span class="token comment"># -orb gfz wum grg cod igs</span>
<span class="token comment"># -clk gfz wum grg cod igs</span>
<span class="token comment"># -eop all daily gpsrapid</span>
<span class="token comment"># -slr all</span>
<span class="token comment"># </span>
<span class="token comment">## 1. Get a list of all files in a directory:</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/*?list"</span>
<span class="token comment">#</span>
<span class="token comment">## 2. Get a list of files in a directory matching a pattern (cs2rx1700*.001.Z)</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/cs2rx1700*.001.Z?list"</span>
<span class="token comment">#</span>
<span class="token comment">## 3. Download a group of files within a range</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/cs2rx1700[1-9].001.Z" -O</span>
<span class="token comment">#</span>
<span class="token comment">## 4. Download a group of files from a list of specific files</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/cs2rx1700{1,3,7}.001.Z" -O</span>
<span class="token comment">#</span>
<span class="token comment">## 5. Download a set of files matching a pattern and output those to a single .tar file</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/cs2rx1700*.001.Z" -o files.tar</span>
<span class="token comment">#</span>
<span class="token comment">## 6. Download a single file</span>
<span class="token comment">#  curl -c .urs_cookies -b .urs_cookies -n -L "https://cddis.nasa.gov/archive/doris/data/cs2/2017/cs2rx17001.001.Z" -O</span>
<span class="token comment">#</span>
 <span class="token keyword">use</span> strict<span class="token punctuation">;</span>
 <span class="token keyword">use</span> warnings<span class="token punctuation">;</span>
 <span class="token keyword">use</span> Net<span class="token punctuation">:</span><span class="token punctuation">:</span>FTP<span class="token punctuation">;</span>
 <span class="token keyword">use</span> Getopt<span class="token punctuation">:</span><span class="token punctuation">:</span>Long<span class="token punctuation">;</span>
 <span class="token keyword">use</span> File<span class="token punctuation">:</span><span class="token punctuation">:</span>Copy<span class="token punctuation">;</span>
 <span class="token keyword">use</span> File<span class="token punctuation">:</span><span class="token punctuation">:</span>Path <span class="token string">qw( make_path )</span><span class="token punctuation">;</span>
 <span class="token keyword">use</span> Data<span class="token punctuation">:</span><span class="token punctuation">:</span>Dumper<span class="token punctuation">;</span>
 <span class="token keyword">use</span> File<span class="token punctuation">:</span><span class="token punctuation">:</span>Basename<span class="token punctuation">;</span>
 <span class="token keyword">use</span> Class<span class="token punctuation">:</span><span class="token punctuation">:</span>Struct<span class="token punctuation">;</span>
 <span class="token keyword">use</span> Cwd<span class="token punctuation">;</span>
 <span class="token keyword">use</span> threads<span class="token punctuation">;</span>
 <span class="token keyword">use</span> threads<span class="token punctuation">:</span><span class="token punctuation">:</span>shared<span class="token punctuation">;</span>
 <span class="token keyword">use</span> Time<span class="token punctuation">:</span><span class="token punctuation">:</span>Local<span class="token punctuation">;</span>
 
 struct DataType <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
	 type <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> ntype  <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> 
	 time <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> ctypes <span class="token operator">=&gt;</span> <span class="token string">'@'</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 struct IpMode <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
	 ip   <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> dir <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span>
	 mode <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> type <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span>
	 subtype <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 struct CurlNode <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
	 ip   <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> user <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> 
	 pwd  <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> dir  <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> 
	 file <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> save <span class="token operator">=&gt;</span> <span class="token string">'$'</span><span class="token punctuation">,</span> 
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
 <span class="token keyword">my</span> <span class="token variable">$year</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> 
 <span class="token keyword">my</span> <span class="token variable">$doy</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">$hour</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">$nthreads</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">$save</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@obs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@nav</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@dcb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@snx</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@orb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@clk</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@eop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@slr</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 GetOptions <span class="token punctuation">(</span>
		<span class="token string">"year=i"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">$year</span><span class="token punctuation">,</span>
		<span class="token string">"doy=i"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">$doy</span><span class="token punctuation">,</span>
		<span class="token string">"hour=i"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">$hour</span><span class="token punctuation">,</span>
		<span class="token string">"nth=i"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">$nthreads</span><span class="token punctuation">,</span>
		<span class="token string">"save=s"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">$save</span><span class="token punctuation">,</span>
		<span class="token string">"obs=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@obs</span><span class="token punctuation">,</span>
		<span class="token string">"nav=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@nav</span><span class="token punctuation">,</span>
		<span class="token string">"dcb=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@dcb</span><span class="token punctuation">,</span>
		<span class="token string">"snx=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@snx</span><span class="token punctuation">,</span>
		<span class="token string">"orb=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@orb</span><span class="token punctuation">,</span>
		<span class="token string">"clk=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@clk</span><span class="token punctuation">,</span>
		<span class="token string">"eop=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@eop</span><span class="token punctuation">,</span>
		<span class="token string">"slr=s{,}"</span> <span class="token operator">=&gt;</span> <span class="token operator">\</span><span class="token variable">@slr</span><span class="token punctuation">,</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$nthreads</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">print</span> <span class="token string">"Max threads 10\n"</span><span class="token punctuation">;</span>
 	 exit<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">my</span> <span class="token variable">@DataTypes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">$ctime</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d%02d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"obs"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#obs</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@obs</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@obs</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"nav"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#nav</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@nav</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@nav</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"dcb"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#dcb</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@dcb</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@dcb</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"snx"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#snx</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@snx</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@snx</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"orb"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#orb</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@orb</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@orb</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"clk"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#clk</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@clk</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@clk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"eop"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#eop</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@eop</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@eop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 push <span class="token variable">@DataTypes</span><span class="token punctuation">,</span>DataType<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>time<span class="token operator">=&gt;</span><span class="token variable">$ctime</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token string">"slr"</span><span class="token punctuation">,</span> ntype<span class="token operator">=&gt;</span><span class="token variable">$#slr</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> ctypes<span class="token operator">=&gt;</span><span class="token operator">\</span><span class="token variable">@slr</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@slr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">my</span> <span class="token variable">@requested_CurlNodes</span> <span class="token operator">=</span> make_download_list<span class="token punctuation">(</span><span class="token variable">@DataTypes</span><span class="token punctuation">,</span><span class="token variable">$save</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@requested_CurlNodes</span> <span class="token operator">and</span> <span class="token punctuation">(</span><span class="token variable">$#requested_CurlNodes</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 curl_download_files<span class="token punctuation">(</span><span class="token variable">@requested_CurlNodes</span><span class="token punctuation">,</span><span class="token variable">$nthreads</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 exit<span class="token punctuation">;</span>
 
 <span class="token function"><span class="token keyword">sub</span> curl_download_files</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">@requested_CurlNodes</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$nthreads</span> <span class="token operator">=</span> pop<span class="token punctuation">(</span><span class="token variable">@requested_CurlNodes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">my</span> <span class="token variable">@cur_download_cmds</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$requested_CurlNode</span> <span class="token punctuation">(</span><span class="token variable">@requested_CurlNodes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$ip</span>      <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>ip<span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$user</span>    <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>user<span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$pwd</span>     <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>pwd<span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$rmtdir</span>  <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>dir<span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$file</span>    <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>file<span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$savedir</span> <span class="token operator">=</span> <span class="token variable">$requested_CurlNode</span><span class="token operator">-&gt;</span>save<span class="token punctuation">;</span>
 	 	 system<span class="token punctuation">(</span><span class="token string">"mkdir -p $savedir"</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token operator">-d</span> <span class="token variable">$savedir</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$cmd_curl</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$ip</span> <span class="token operator">=~</span> <span class="token regex">/cddis/</span> <span class="token operator">or</span> <span class="token variable">$ip</span> <span class="token operator">=~</span> <span class="token regex">/http/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	   <span class="token variable">$cmd_curl</span> <span class="token operator">=</span> <span class="token string">"curl -c .urs_cookies -b .urs_cookies -n --silent -L \"$ip$rmtdir/$file\" -o $savedir/$file"</span><span class="token punctuation">;</span>
	   <span class="token punctuation">}</span>
	   <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	   	 <span class="token variable">$cmd_curl</span> <span class="token operator">=</span> <span class="token string">"curl $ip$rmtdir/$file -u anonymous:yqyuanwhu --silent -o $savedir/$file"</span><span class="token punctuation">;</span>
	   <span class="token punctuation">}</span>
	   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token operator">-e</span> <span class="token string">"$savedir/$file"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	   	 push <span class="token variable">@cur_download_cmds</span><span class="token punctuation">,</span><span class="token variable">$cmd_curl</span><span class="token punctuation">;</span>
	   <span class="token punctuation">}</span>
	   <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	   	 <span class="token keyword">print</span> <span class="token string">"Omitting already existed file: $savedir/$file\n"</span><span class="token punctuation">;</span>
	   <span class="token punctuation">}</span>
	 <span class="token punctuation">}</span>
	 
	 <span class="token keyword">my</span> <span class="token variable">@threads</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$nfiles_per_thread</span> <span class="token operator">=</span> int<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$#cur_download_cmds</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token variable">$nthreads</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token variable">$nthreads</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$nfiles_per_thread</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token comment">#print "$nthreads\n";</span>
	 <span class="token comment">#print "$nfiles_per_thread\n";</span>
	 <span class="token comment">#exit;</span>
	 <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">my</span> <span class="token variable">$ith</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$ith</span> <span class="token operator">&lt;</span> <span class="token variable">$nthreads</span><span class="token punctuation">;</span> <span class="token variable">$ith</span> <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">my</span> <span class="token variable">$istart</span> <span class="token operator">=</span> <span class="token variable">$ith</span><span class="token variable">*$nfiles_per_thread</span><span class="token punctuation">;</span>
     <span class="token keyword">my</span> <span class="token variable">$iend</span>   <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$ith</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token variable">$nfiles_per_thread</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$ith</span> <span class="token operator">==</span> <span class="token variable">$nthreads</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     	 <span class="token variable">$iend</span> <span class="token operator">=</span> <span class="token variable">$#cur_download_cmds</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token comment">#print "$istart  $iend\n";</span>
	 	 <span class="token keyword">my</span> <span class="token variable">@th_cur_download_cmds</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">my</span> <span class="token variable">$icmd</span> <span class="token operator">=</span> <span class="token variable">$istart</span><span class="token punctuation">;</span> <span class="token variable">$icmd</span> <span class="token operator">&lt;=</span> <span class="token variable">$iend</span><span class="token punctuation">;</span> <span class="token variable">$icmd</span> <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 	 push <span class="token variable">@th_cur_download_cmds</span><span class="token punctuation">,</span> <span class="token variable">$cur_download_cmds</span><span class="token punctuation">[</span><span class="token variable">$icmd</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 	 <span class="token punctuation">}</span>
	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">@th_cur_download_cmds</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 	 <span class="token keyword">my</span> <span class="token variable">$th_cur</span> <span class="token operator">=</span> threads<span class="token operator">-&gt;</span>create<span class="token punctuation">(</span><span class="token operator">\</span><span class="token variable">&amp;run_download_files</span><span class="token punctuation">,</span> <span class="token variable">@th_cur_download_cmds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 	 push <span class="token variable">@threads</span><span class="token punctuation">,</span><span class="token variable">$th_cur</span><span class="token punctuation">;</span>
	 	 <span class="token punctuation">}</span>
	 <span class="token punctuation">}</span>
	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$curl_download_thread</span> <span class="token punctuation">(</span><span class="token variable">@threads</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 <span class="token variable">$curl_download_thread</span><span class="token operator">-&gt;</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> run_download_files</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">@cur_download_cmds</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$cur_download_cmd</span> <span class="token punctuation">(</span><span class="token variable">@cur_download_cmds</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token comment">#print "$cur_download_cmd\n";</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$time1</span><span class="token operator">=</span>timelocal<span class="token punctuation">(</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 system<span class="token punctuation">(</span><span class="token variable">$cur_download_cmd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$time2</span><span class="token operator">=</span>timelocal<span class="token punctuation">(</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$diff</span><span class="token operator">=</span><span class="token variable">$time2</span><span class="token operator">-</span><span class="token variable">$time1</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">print</span> <span class="token string">"Time consuming: $diff seconds; Finished: $cur_download_cmd\n"</span><span class="token punctuation">;</span>
 	 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token function"><span class="token keyword">sub</span> make_download_list</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">@DataTypes</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$save</span> <span class="token operator">=</span> pop<span class="token punctuation">(</span><span class="token variable">@DataTypes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">@IpModes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$DT</span> <span class="token punctuation">(</span><span class="token variable">@DataTypes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 <span class="token keyword">my</span> <span class="token variable">$year</span> <span class="token operator">=</span> substr<span class="token punctuation">(</span><span class="token variable">$DT</span><span class="token operator">-&gt;</span>time<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 <span class="token keyword">my</span> <span class="token variable">$doy</span>  <span class="token operator">=</span> substr<span class="token punctuation">(</span><span class="token variable">$DT</span><span class="token operator">-&gt;</span>time<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 <span class="token keyword">my</span> <span class="token variable">$hour</span> <span class="token operator">=</span> substr<span class="token punctuation">(</span><span class="token variable">$DT</span><span class="token operator">-&gt;</span>time<span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 <span class="token keyword">my</span> <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token variable">$DT</span><span class="token operator">-&gt;</span>type<span class="token punctuation">;</span>
	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$DT</span><span class="token operator">-&gt;</span>ntype <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$subtype</span> <span class="token punctuation">(</span><span class="token variable">@</span><span class="token punctuation">{<!-- --></span><span class="token variable">$DT</span><span class="token operator">-&gt;</span>ctypes<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>resolve_ip<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 	 	 <span class="token punctuation">}</span>
	 	 <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   
   <span class="token keyword">my</span> <span class="token variable">@requested_CurlNodes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$ipnode</span> <span class="token punctuation">(</span><span class="token variable">@IpModes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   	 <span class="token keyword">my</span> <span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token variable">$ipnode</span><span class="token operator">-&gt;</span>ip<span class="token punctuation">;</span>
   	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> <span class="token variable">$ipnode</span><span class="token operator">-&gt;</span>dir<span class="token punctuation">;</span>
   	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token variable">$ipnode</span><span class="token operator">-&gt;</span>mode<span class="token punctuation">;</span>
   	 <span class="token keyword">my</span> <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token variable">$ipnode</span><span class="token operator">-&gt;</span>type<span class="token punctuation">;</span>
   	 <span class="token keyword">my</span> <span class="token variable">$subtype</span> <span class="token operator">=</span> <span class="token variable">$ipnode</span><span class="token operator">-&gt;</span>subtype<span class="token punctuation">;</span>
   	 <span class="token keyword">print</span> <span class="token string">"Requesting files on remote server: ip = $ip, dir = $dir, mode = $mode, type = $type, subtype = $subtype\n"</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@requested_CurlNodes</span><span class="token punctuation">,</span> get_http_remote_list<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">,</span><span class="token variable">$ip</span><span class="token punctuation">,</span><span class="token variable">$dir</span><span class="token punctuation">,</span><span class="token variable">$mode</span><span class="token punctuation">,</span><span class="token variable">$save</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   return <span class="token variable">@requested_CurlNodes</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> resolve_ip</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">my</span> <span class="token variable">$ip_cddis</span> <span class="token operator">=</span> <span class="token string">"https://cddis.nasa.gov"</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$ip_ign</span>   <span class="token operator">=</span> <span class="token string">"ftp://igs.ign.fr"</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$ip_whu</span>   <span class="token operator">=</span> <span class="token string">"ftp://igs.gnsswhu.cn"</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$ip_aiub</span>  <span class="token operator">=</span> <span class="token string">"ftp://ftp.aiub.unibe.ch"</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$ip_tum</span>   <span class="token operator">=</span> <span class="token string">"ftp://edc.dgfi.tum.de"</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">$ip_iers</span>  <span class="token operator">=</span> <span class="token string">"ftp://ftp.iers.org"</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">my</span> <span class="token variable">$mjd</span> <span class="token operator">=</span> yeardoy2mjd<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span> <span class="token operator">=</span> mjd2gwkd<span class="token punctuation">(</span><span class="token variable">$mjd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$year_not_used</span><span class="token punctuation">,</span> <span class="token variable">$month</span><span class="token punctuation">,</span> <span class="token variable">$monthday</span><span class="token punctuation">)</span> <span class="token operator">=</span> doy2monthday<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span> <span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">my</span> <span class="token variable">@IpModes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># -obs cddis/ign/whu houly houly_v2 houly_v3 daily daily_v2 daily_v3</span>
<span class="token comment"># -nav cddis/ign/whu brdc hourly daily</span>
<span class="token comment"># -dcb cddis/aiub    cas dlr code</span>
<span class="token comment"># -snx cddis/ign/whu igs</span>
<span class="token comment"># -orb cddis/ign/whu gfz/gbm whu/wum grg cod igs</span>
<span class="token comment"># -clk cddis/ign/whu gfz/gbm whu/wum grg cod igs</span>
<span class="token comment"># -eop cddis/iers    all daily gpsrapid</span>
<span class="token comment"># -slr cddis/tum     all prn</span>
<span class="token comment">#### OBSERVATIONS</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"obs"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$mode_v2</span> <span class="token operator">=</span> <span class="token string">"*d.gz"</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$mode_v3</span> <span class="token operator">=</span> <span class="token string">"*MO.crx.gz"</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$dir_cddis</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$dir_ign</span>   <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$dir_whu</span>   <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/hourly/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token variable">$dir_cddis</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/hourly/%04d/%03d/%02d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$dir_ign</span>   <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/pub/igs/data/hourly/%04d/%03d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$dir_whu</span>   <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/pub/gps/data/hourly/%04d/%03d/%02d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/daily/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token variable">$dir_cddis</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/daily/%04d/%03d/%02dd"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$dir_ign</span>   <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/pub/igs/data/%04d/%03d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$dir_whu</span>   <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/pub/gps/data/daily/%04d/%03d/%02dd"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/_v2/</span> <span class="token operator">or</span> <span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/_v3/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/_v2/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span> dir<span class="token operator">=&gt;</span><span class="token variable">$dir_cddis</span><span class="token punctuation">,</span> mode<span class="token operator">=&gt;</span><span class="token variable">$mode_v2</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_ign,   dir=&gt;$dir_ign,   mode=&gt;$mode_v2, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_whu,   dir=&gt;$dir_whu,   mode=&gt;$mode_v2, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 	 <span class="token punctuation">}</span>
 	 	 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/_v3/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span> dir<span class="token operator">=&gt;</span><span class="token variable">$dir_cddis</span><span class="token punctuation">,</span> mode<span class="token operator">=&gt;</span><span class="token variable">$mode_v3</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_ign,   dir=&gt;$dir_ign,   mode=&gt;$mode_v3, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_whu,   dir=&gt;$dir_whu,   mode=&gt;$mode_v3, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span> dir<span class="token operator">=&gt;</span><span class="token variable">$dir_cddis</span><span class="token punctuation">,</span> mode<span class="token operator">=&gt;</span><span class="token variable">$mode_v2</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_ign,   dir=&gt;$dir_ign,   mode=&gt;$mode_v2, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_whu,   dir=&gt;$dir_whu,   mode=&gt;$mode_v2, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span> dir<span class="token operator">=&gt;</span><span class="token variable">$dir_cddis</span><span class="token punctuation">,</span> mode<span class="token operator">=&gt;</span><span class="token variable">$mode_v3</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_ign,   dir=&gt;$dir_ign,   mode=&gt;$mode_v3, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_whu,   dir=&gt;$dir_whu,   mode=&gt;$mode_v3, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### NAVIGATION</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"nav"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/brdc/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	   <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/daily/%04d/brdc"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span>sprintf<span class="token punctuation">(</span><span class="token string">"*%02dn.gz"</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># GPS</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span>sprintf<span class="token punctuation">(</span><span class="token string">"*%02dg.gz"</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># GLO</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token string">"BRD*MN.rnx.gz"</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># Multi-GNSS</span>
 	 	 	 <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/daily/%04d/%03d/%02dp/"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token string">"BRD*MN.rnx.gz"</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># Multi-GNSS</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/hourly/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/hourly/%04d/%03d/%02d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token string">"*N.rnx.gz"</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># Longname-only</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/daily/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/data/daily/%04d/%03d/%02dp"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token string">"*N.rnx.gz"</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># Longname-only</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### DCB</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"dcb"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/cod/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/CODE/%04d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"*.DCB.Z"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_aiub</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/cas/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/bias/%04d"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"*.BSX.gz"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/dlr/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token comment"># to be added</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### SINEX</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"snx"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/%04d"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"igs*%04d.snx.Z"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"igs*%04d.snx.gz"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### ORBIT/SP3</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"orb"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/igs/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/%04d"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"igs*.sp3.Z"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"igs*.sp3.gz"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/mgex/%04d"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%3s0MGXFIN*ORB.SP3.gz"</span><span class="token punctuation">,</span>uc<span class="token punctuation">(</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%3s0MGXRAP*ORB.SP3.gz"</span><span class="token punctuation">,</span>uc<span class="token punctuation">(</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### CLOCK</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"clk"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/igs/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/%04d"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"igs*.clk_30s.Z"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"igs*.clk_30s.gz"</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/gnss/products/mgex/%04d"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%3s0MGXFIN*CLK.CLK.gz"</span><span class="token punctuation">,</span>uc<span class="token punctuation">(</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%3s0MGXRAP*CLK.CLK.gz"</span><span class="token punctuation">,</span>uc<span class="token punctuation">(</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### EOP</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"eop"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> <span class="token string">"/archive/products/iers"</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/daily/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"*2000A.daily"</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#$dir = "/products/eop/rapid/daily";</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/all/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"*2000A.data"</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#$dir = "/products/eop/rapid/standard";</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$subtype</span> <span class="token operator">=~</span> <span class="token regex">/gpsrapid/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"gpsrapid*"</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#$dir = "/products/eop/rapid/standard";</span>
 	 	 <span class="token punctuation">}</span>
 	 	 push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_iers,    dir=&gt;$dir,   mode=&gt;$mode, type=&gt;$type, subtype=&gt;$subtype);</span>
 	 <span class="token punctuation">}</span>
<span class="token comment">#### SLR</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">eq</span> <span class="token string">"slr"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">@slr_sats</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"galileo101"</span><span class="token punctuation">,</span><span class="token string">"galileo102"</span><span class="token punctuation">,</span><span class="token string">"galileo103"</span><span class="token punctuation">,</span><span class="token string">"galileo104"</span><span class="token punctuation">,</span><span class="token string">"galileo201"</span><span class="token punctuation">,</span><span class="token string">"galileo202"</span><span class="token punctuation">,</span><span class="token string">"galileo203"</span><span class="token punctuation">,</span><span class="token string">"galileo204"</span><span class="token punctuation">,</span>
                     <span class="token string">"galileo205"</span><span class="token punctuation">,</span><span class="token string">"galileo206"</span><span class="token punctuation">,</span><span class="token string">"galileo207"</span><span class="token punctuation">,</span><span class="token string">"galileo208"</span><span class="token punctuation">,</span><span class="token string">"galileo209"</span><span class="token punctuation">,</span><span class="token string">"galileo210"</span><span class="token punctuation">,</span><span class="token string">"galileo211"</span><span class="token punctuation">,</span><span class="token string">"galileo212"</span><span class="token punctuation">,</span>
                     <span class="token string">"galileo213"</span><span class="token punctuation">,</span><span class="token string">"galileo214"</span><span class="token punctuation">,</span><span class="token string">"galileo215"</span><span class="token punctuation">,</span><span class="token string">"galileo216"</span><span class="token punctuation">,</span><span class="token string">"galileo217"</span><span class="token punctuation">,</span><span class="token string">"galileo218"</span><span class="token punctuation">,</span><span class="token string">"galileo219"</span><span class="token punctuation">,</span><span class="token string">"galileo220"</span><span class="token punctuation">,</span>
                     <span class="token string">"galileo221"</span><span class="token punctuation">,</span><span class="token string">"galileo222"</span><span class="token punctuation">,</span><span class="token string">"qzs1"</span><span class="token punctuation">,</span><span class="token string">"qzs2"</span><span class="token punctuation">,</span><span class="token string">"qzs3"</span><span class="token punctuation">,</span><span class="token string">"qzs4"</span><span class="token punctuation">,</span><span class="token string">"beidou3m2"</span><span class="token punctuation">,</span><span class="token string">"beidou3m3"</span><span class="token punctuation">,</span><span class="token string">"beidou3m9"</span><span class="token punctuation">,</span><span class="token string">"beidou3m10"</span><span class="token punctuation">,</span>
                     <span class="token string">"compassg1"</span><span class="token punctuation">,</span><span class="token string">"compassi3"</span><span class="token punctuation">,</span><span class="token string">"compassi5"</span><span class="token punctuation">,</span><span class="token string">"compassi6b"</span><span class="token punctuation">,</span><span class="token string">"compassm3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">my</span> <span class="token variable">$mode</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"%04d%02d.npt"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$slr_sat</span> <span class="token punctuation">(</span><span class="token variable">@slr_sats</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	   <span class="token keyword">my</span> <span class="token variable">$dir</span> <span class="token operator">=</span> sprintf<span class="token punctuation">(</span><span class="token string">"/archive/slr/data/npt_crd/%s/%04d"</span><span class="token punctuation">,</span><span class="token variable">$slr_sat</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	   push <span class="token variable">@IpModes</span><span class="token punctuation">,</span>IpMode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip_cddis</span><span class="token punctuation">,</span>   dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>   mode<span class="token operator">=&gt;</span><span class="token variable">$mode</span><span class="token punctuation">,</span> type<span class="token operator">=&gt;</span><span class="token variable">$type</span><span class="token punctuation">,</span> subtype<span class="token operator">=&gt;</span><span class="token variable">$subtype</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	   <span class="token comment">## for TUM ftp</span>
 	 	   <span class="token comment">#my $dir = sprintf("/pub/slr/data/npt_crd/%s/%04d",$slr_sat,$year);</span>
 	 	   <span class="token comment">#push @IpModes,IpMode-&gt;new(ip=&gt;$ip_tum,     dir=&gt;$dir,   mode=&gt;$mode, type=&gt;$type, subtype=&gt;$subtype);</span>
 	   <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
 	 return <span class="token variable">@IpModes</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> get_http_remote_list</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">,</span><span class="token variable">$ip</span><span class="token punctuation">,</span><span class="token variable">$dir</span><span class="token punctuation">,</span><span class="token variable">$mode</span><span class="token punctuation">,</span><span class="token variable">$save</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">@requested_CurlNode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token comment">## use http for cddis</span>
 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$ip</span> <span class="token operator">=~</span> <span class="token regex">/cddis/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">@remote_lists</span> <span class="token operator">=</span> <span class="token string">`curl -c .urs_cookies -b .urs_cookies -n -L --silent "$ip$dir/$mode?list"`</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">my</span> <span class="token variable">$total</span>        <span class="token operator">=</span> <span class="token string">`curl -c .urs_cookies -b .urs_cookies -n -L --silent "$ip$dir/$mode?list" | grep 'Total number of files'`</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$total</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">print</span> <span class="token string">"No files!\n"</span><span class="token punctuation">;</span>
 	 	 	 return <span class="token variable">@requested_CurlNode</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#exit;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$remote_list</span> <span class="token punctuation">(</span><span class="token variable">@remote_lists</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 <span class="token keyword">my</span> <span class="token variable">@token</span><span class="token operator">=</span>split<span class="token punctuation">(</span><span class="token regex">/ /</span><span class="token punctuation">,</span><span class="token variable">$remote_list</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 <span class="token keyword">my</span> <span class="token variable">$filename</span> <span class="token operator">=</span> <span class="token variable">$token</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 	 	 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span>looks_like_gnss<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">,</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 	 <span class="token keyword">my</span> <span class="token variable">$node</span> <span class="token operator">=</span> CurlNode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip</span><span class="token punctuation">,</span>user<span class="token operator">=&gt;</span><span class="token string">"yqyuan"</span><span class="token punctuation">,</span>pwd<span class="token operator">=&gt;</span><span class="token string">"yqyuanwhu"</span><span class="token punctuation">,</span>dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>file<span class="token operator">=&gt;</span><span class="token variable">$filename</span><span class="token punctuation">,</span>save<span class="token operator">=&gt;</span><span class="token variable">$save</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 	 push <span class="token variable">@requested_CurlNode</span><span class="token punctuation">,</span> <span class="token variable">$node</span><span class="token punctuation">;</span> 
 	 	 	 	 <span class="token punctuation">}</span>
 	 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
 	 <span class="token comment">## use ftp for others</span>
 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 <span class="token keyword">my</span> <span class="token variable">@remote_lists</span> <span class="token operator">=</span> <span class="token string">`curl -u anonymous:yqyuanwhu --silent -l "$ip$dir/$mode"`</span><span class="token punctuation">;</span>
 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">@remote_lists</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">print</span> <span class="token string">"No files!\n"</span><span class="token punctuation">;</span>
 	 	 	 return <span class="token variable">@requested_CurlNode</span><span class="token punctuation">;</span>
 	 	 	 <span class="token comment">#exit;</span>
 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$remote_list</span> <span class="token punctuation">(</span><span class="token variable">@remote_lists</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 <span class="token keyword">my</span> <span class="token variable">$filename</span> <span class="token operator">=</span> <span class="token variable">$remote_list</span><span class="token punctuation">;</span>
 	 	 	 	 chomp<span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 <span class="token keyword">if</span><span class="token punctuation">(</span>looks_like_gnss<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">,</span><span class="token variable">$filename</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 	 	 	 	 <span class="token comment">#print "$filename";</span>
 	 	 	 	 	 <span class="token keyword">my</span> <span class="token variable">$node</span> <span class="token operator">=</span> CurlNode<span class="token operator">-&gt;</span>new<span class="token punctuation">(</span>ip<span class="token operator">=&gt;</span><span class="token variable">$ip</span><span class="token punctuation">,</span>user<span class="token operator">=&gt;</span><span class="token string">"yqyuan"</span><span class="token punctuation">,</span>pwd<span class="token operator">=&gt;</span><span class="token string">"yqyuanwhu"</span><span class="token punctuation">,</span>dir<span class="token operator">=&gt;</span><span class="token variable">$dir</span><span class="token punctuation">,</span>file<span class="token operator">=&gt;</span><span class="token variable">$filename</span><span class="token punctuation">,</span>save<span class="token operator">=&gt;</span><span class="token variable">$save</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 	 	 	 	 push <span class="token variable">@requested_CurlNode</span><span class="token punctuation">,</span> <span class="token variable">$node</span><span class="token punctuation">;</span> 
 	 	 	 	 <span class="token punctuation">}</span>
 	 	 	 <span class="token punctuation">}</span>
 	 	 <span class="token punctuation">}</span>
 	 <span class="token punctuation">}</span>
 	 return <span class="token variable">@requested_CurlNode</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> looks_like_gnss</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">,</span><span class="token variable">$type</span><span class="token punctuation">,</span><span class="token variable">$subtype</span><span class="token punctuation">,</span><span class="token variable">$remote_name</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
 	 
 	 <span class="token keyword">my</span> <span class="token variable">$mjd</span> <span class="token operator">=</span> yeardoy2mjd<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span> <span class="token operator">=</span> mjd2gwkd<span class="token punctuation">(</span><span class="token variable">$mjd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$year_not_used</span><span class="token punctuation">,</span> <span class="token variable">$month</span><span class="token punctuation">,</span> <span class="token variable">$monthday</span><span class="token punctuation">)</span> <span class="token operator">=</span> doy2monthday<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span> <span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	 <span class="token keyword">my</span> <span class="token variable">@hour_id_basket</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token string">"d"</span><span class="token punctuation">,</span><span class="token string">"e"</span><span class="token punctuation">,</span><span class="token string">"f"</span><span class="token punctuation">,</span><span class="token string">"g"</span><span class="token punctuation">,</span><span class="token string">"h"</span><span class="token punctuation">,</span><span class="token string">"i"</span><span class="token punctuation">,</span><span class="token string">"j"</span><span class="token punctuation">,</span><span class="token string">"k"</span><span class="token punctuation">,</span><span class="token string">"l"</span><span class="token punctuation">,</span><span class="token string">"m"</span><span class="token punctuation">,</span><span class="token string">"n"</span><span class="token punctuation">,</span><span class="token string">"o"</span><span class="token punctuation">,</span><span class="token string">"p"</span><span class="token punctuation">,</span><span class="token string">"q"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">,</span><span class="token string">"s"</span><span class="token punctuation">,</span><span class="token string">"t"</span><span class="token punctuation">,</span><span class="token string">"u"</span><span class="token punctuation">,</span><span class="token string">"v"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">,</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$hour_id</span> <span class="token operator">=</span> <span class="token variable">$hour_id_basket</span><span class="token punctuation">[</span><span class="token variable">$hour</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># -obs cddis/ign/whu houly houly_v2 houly_v3 daily daily_v2 daily_v3</span>
<span class="token comment"># -nav cddis/ign/whu brdc hourly daily</span>
<span class="token comment"># -dcb cddis/aiub    cas dlr code</span>
<span class="token comment"># -snx cddis/ign/whu igs</span>
<span class="token comment"># -orb cddis/ign/whu gfz/gbm whu/wum grg cod igs</span>
<span class="token comment"># -clk cddis/ign/whu gfz/gbm whu/wum grg cod igs</span>
<span class="token comment"># -eop cddis/iers    all daily gpsrapid</span>
<span class="token comment"># -slr cddis/tum     all prn</span>
   <span class="token keyword">my</span> <span class="token variable">@ext_modes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/obs/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d0.%02dd.Z"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d%s.%02dd.Z"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour_id</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d0.%02dd.gz"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d%s.%02dd.gz"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour_id</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_30S_MO.crx.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d%02d00_01H_30S_MO.crx.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/nav/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 <span class="token comment">#push @ext_modes,sprintf("%04d%03d%02d00_01H_GN.rnx.gz",$year,$doy,$hour);</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%04d%03d%02d00_01H_RN.rnx.gz",$year,$doy,$hour);</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%04d%03d%02d00_01H_EN.rnx.gz",$year,$doy,$hour);</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%04d%03d%02d00_01H_CN.rnx.gz",$year,$doy,$hour);</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%04d%03d%02d00_01H_JN.rnx.gz",$year,$doy,$hour);</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d%02d00_01H_MN.rnx.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span><span class="token variable">$hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02dn.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02dg.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02dl.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02df.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02dq.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 <span class="token comment">#push @ext_modes,sprintf("%03d%s.%02dp.Z",$doy,$hour_id,substr($year,2,2));</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_MN.rnx.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d0.%02dp.Z"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%03d0.%02dp.gz"</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/dcb/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_01D_DCB.BSX.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"P1C1%02d%02d.DCB.Z"</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"P1P2%02d%02d.DCB.Z"</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"P2C2%02d%02d_RINEX.DCB.Z"</span><span class="token punctuation">,</span>substr<span class="token punctuation">(</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/snx/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d.snx.Z"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d.snx.gz"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/orb/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"igs%04d%01d.sp3.Z"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"igs%04d%01d.sp3.gz"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_05M_ORB.SP3.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_15M_ORB.SP3.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/clk/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"igs%04d%01d.clk_30s.Z"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"igs%04d%01d.clk_30s.gz"</span><span class="token punctuation">,</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%03d0000_01D_30S_CLK.CLK.gz"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$doy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/eop/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span><span class="token string">"finals2000A.data"</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span><span class="token string">"finals2000A.daily"</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span><span class="token string">"gpsrapid.out"</span><span class="token punctuation">;</span>
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span><span class="token string">"gpsrapid.daily"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$type</span> <span class="token operator">=~</span> <span class="token regex">/slr/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
   	 push <span class="token variable">@ext_modes</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d%02d.npt"</span><span class="token punctuation">,</span><span class="token variable">$year</span><span class="token punctuation">,</span><span class="token variable">$month</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">my</span> <span class="token variable">$lgnss</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">foreach</span> <span class="token keyword">my</span> <span class="token variable">$ext_mode</span> <span class="token punctuation">(</span><span class="token variable">@ext_modes</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$remote_name</span> <span class="token operator">=~</span> <span class="token regex">/$ext_mode/</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	   	 <span class="token variable">$lgnss</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	   	 <span class="token keyword">last</span><span class="token punctuation">;</span>
	   <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   return <span class="token variable">$lgnss</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> yeardoy2mjd</span> <span class="token punctuation">{<!-- --></span>
	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$iyear</span><span class="token punctuation">,</span> <span class="token variable">$idoy</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$iyear2</span> <span class="token operator">=</span> <span class="token variable">$iyear</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$mjd</span><span class="token punctuation">;</span>
	 <span class="token punctuation">{<!-- --></span>
		 <span class="token keyword">use</span> integer<span class="token punctuation">;</span>
		 <span class="token variable">$mjd</span> <span class="token operator">=</span>  <span class="token number">365</span><span class="token variable">*$iyear</span><span class="token operator">-</span><span class="token number">678941</span><span class="token operator">+</span><span class="token variable">$iyear2</span><span class="token operator">/</span><span class="token number">4</span><span class="token operator">-</span><span class="token variable">$iyear2</span><span class="token operator">/</span><span class="token number">100</span><span class="token operator">+</span><span class="token variable">$iyear2</span><span class="token operator">/</span><span class="token number">400</span><span class="token punctuation">;</span>
	 <span class="token punctuation">}</span> 
	 <span class="token variable">$mjd</span> <span class="token operator">=</span> <span class="token variable">$mjd</span> <span class="token operator">+</span> <span class="token variable">$idoy</span><span class="token punctuation">;</span>
	 return <span class="token variable">$mjd</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> mjd2gwkd</span> <span class="token punctuation">{<!-- --></span>
	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$mjd</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$gwk</span>  <span class="token operator">=</span> int<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$mjd</span> <span class="token operator">-</span> <span class="token number">44244</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$gwkd</span> <span class="token operator">=</span> <span class="token variable">$mjd</span><span class="token operator">-</span><span class="token number">44244</span> <span class="token operator">-</span> <span class="token variable">$gwk</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">;</span>
	 return <span class="token punctuation">(</span><span class="token variable">$gwk</span><span class="token punctuation">,</span><span class="token variable">$gwkd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token function"><span class="token keyword">sub</span> doy2monthday</span> <span class="token punctuation">{<!-- --></span>
	 <span class="token keyword">my</span> <span class="token variable">@days_in_month</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token punctuation">(</span><span class="token variable">$iyear</span><span class="token punctuation">,</span><span class="token variable">$idoy</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token variable">@_</span><span class="token punctuation">;</span>
	 <span class="token variable">$days_in_month</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$iyear</span><span class="token variable">%4</span><span class="token operator">==</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$iyear</span><span class="token variable">%100</span><span class="token operator">!=</span><span class="token number">0</span> <span class="token operator">||</span> <span class="token variable">$iyear</span><span class="token variable">%400</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">29</span> <span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$iday</span> <span class="token operator">=</span> <span class="token variable">$idoy</span><span class="token punctuation">;</span>
	 <span class="token keyword">my</span> <span class="token variable">$imonth</span><span class="token punctuation">;</span>
	 <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$imonth</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$imonth</span><span class="token operator">&lt;</span><span class="token number">12</span><span class="token punctuation">;</span><span class="token variable">$imonth</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$iday</span> <span class="token operator">&lt;=</span> <span class="token variable">$days_in_month</span><span class="token punctuation">[</span><span class="token variable">$imonth</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			 <span class="token keyword">last</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
		 <span class="token variable">$iday</span> <span class="token operator">=</span> <span class="token variable">$iday</span> <span class="token operator">-</span> <span class="token variable">$days_in_month</span><span class="token punctuation">[</span><span class="token variable">$imonth</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token variable">$imonth</span><span class="token operator">++</span><span class="token punctuation">;</span>
	 return <span class="token punctuation">(</span>sprintf<span class="token punctuation">(</span><span class="token string">"%04d"</span><span class="token punctuation">,</span><span class="token variable">$iyear</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%02d"</span><span class="token punctuation">,</span><span class="token variable">$imonth</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sprintf<span class="token punctuation">(</span><span class="token string">"%02d"</span><span class="token punctuation">,</span><span class="token variable">$iday</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5f36394170fc90eefac581c5701a45a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">树莓派4B/400/3B&#43;等等 的USB大容量存储启动</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5da641847f799619b640e6b0e8062ed4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">centos7安装 rabbitmq-server</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>