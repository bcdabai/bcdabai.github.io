<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Lua】 Lua学习笔记（六） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Lua】 Lua学习笔记（六）" />
<meta property="og:description" content="文章目录 零、相关文章一、前言二、 Lua table（表）（2.1） table 的构造（2.2） Table的操作（2.2.1）table.concat()（2.2.2）table.insert()（2.2.3）table.remove()（2.2.4）table.sort()（2.2.5）table.maxn()（2.2.6）获取 table 长度 三、Lua 模块与包（3.1）require 函数（3.2）加载机制（3.3）C 包 零、相关文章 【Lua】 Lua学习笔记（一）
【Lua】 Lua学习笔记（二）
【Lua】 Lua学习笔记（三）
【Lua】 Lua学习笔记（四）
【Lua】 Lua学习笔记（五）
一、前言 哈喽大家好，我是 FEZ98 ，今天继续系统学习Lua。这个系列是我系统学习Lua语言的学习笔记，我会把遇到的一些比较值得记录与关注的知识写在里面，供自己以后进行回顾。
二、 Lua table（表） table 是 Lua 的一种数据结构用来帮助我们创建不同的数据类型，如数组，字典等。其使用关联型数组，可以用任意类型的值来作为数组的索引，但这个值不能是 nil。table 的大小不是固定的，可以根据需要添加长度。
Lua 也是通过 table 来解决模块（module）、包（package）和对象（Object）的。例如 string.foormat 表示使用 “format” 来索引table string。
（2.1） table 的构造 构造器是创建和初始化表的表达式。表是 Lua 特有的数据结构。
最简单的构造函数是{}，可以用来创建一个空表，也可用来初始化数组。
实例：
如上图所示，我们创建一个表 myTable 并初始化后，当我们将 myTable 赋值给 otherTable 时，两个表的都指向同一个内存，如果 myTable设置为 nil ， otherTable 仍能访问 table 中的元素，如果没有指定的变量指向 myTable，Lua 的垃圾回收机制会清理对应的内存。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3275b3294e8512fda5bbb737c49ffb59/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-16T17:33:42+08:00" />
<meta property="article:modified_time" content="2023-08-16T17:33:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Lua】 Lua学习笔记（六）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">零、相关文章</a></li><li><a href="#_9" rel="nofollow">一、前言</a></li><li><a href="#_Lua_table_12" rel="nofollow">二、 Lua table（表）</a></li><li><ul><li><a href="#21_table__15" rel="nofollow">（2.1） table 的构造</a></li><li><a href="#22_Table_24" rel="nofollow">（2.2） Table的操作</a></li><li><ul><li><a href="#221tableconcat_26" rel="nofollow">（2.2.1）table.concat()</a></li><li><a href="#222tableinsert_29" rel="nofollow">（2.2.2）table.insert()</a></li><li><a href="#223tableremove_31" rel="nofollow">（2.2.3）table.remove()</a></li><li><a href="#224tablesort_33" rel="nofollow">（2.2.4）table.sort()</a></li><li><a href="#225tablemaxn_38" rel="nofollow">（2.2.5）table.maxn()</a></li><li><a href="#226_table__41" rel="nofollow">（2.2.6）获取 table 长度</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Lua__47" rel="nofollow">三、Lua 模块与包</a></li><li><ul><li><a href="#31require__57" rel="nofollow">（3.1）require 函数</a></li><li><a href="#32_63" rel="nofollow">（3.2）加载机制</a></li><li><a href="#33C__74" rel="nofollow">（3.3）C 包</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>零、相关文章</h2> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_43057990/article/details/131765459?spm=1001.2014.3001.5501">【Lua】 Lua学习笔记（一）</a><br> <a href="https://blog.csdn.net/weixin_43057990/article/details/131805588">【Lua】 Lua学习笔记（二）</a><br> <a href="https://blog.csdn.net/weixin_43057990/article/details/132141632">【Lua】 Lua学习笔记（三）</a><br> <a href="https://blog.csdn.net/weixin_43057990/article/details/132161662?spm=1001.2014.3001.5502">【Lua】 Lua学习笔记（四）</a><br> <a href="https://blog.csdn.net/weixin_43057990/article/details/132211929">【Lua】 Lua学习笔记（五）</a></p> 
</blockquote> 
<h2><a id="_9"></a>一、前言</h2> 
<p>哈喽大家好，我是 FEZ98 ，今天继续系统学习Lua。这个系列是我系统学习Lua语言的学习笔记，我会把遇到的一些比较值得记录与关注的知识写在里面，供自己以后进行回顾。</p> 
<h2><a id="_Lua_table_12"></a>二、 Lua table（表）</h2> 
<p>table 是 Lua 的一种数据结构用来帮助我们创建不同的数据类型，如数组，字典等。其使用关联型数组，可以用任意类型的值来作为数组的索引，但这个值不能是 <code>nil</code>。table 的大小不是固定的，可以根据需要添加长度。<br> Lua 也是通过 table 来解决模块（module）、包（package）和对象（Object）的。例如 <code>string.foormat</code> 表示使用 “format” 来索引table string。</p> 
<h3><a id="21_table__15"></a>（2.1） table 的构造</h3> 
<p>构造器是创建和初始化表的表达式。表是 Lua 特有的数据结构。<br> <code>最简单的构造函数是{}，可以用来创建一个空表，也可用来初始化数组。</code></p> 
<p>实例：<br> <img src="https://images2.imgbox.com/63/2a/vnOVgfI4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bc/04/RcaswCPM_o.png" alt="在这里插入图片描述"><br> 如上图所示，我们创建一个表 myTable 并初始化后，当我们将 myTable 赋值给 otherTable 时，两个表的都指向同一个内存，如果 myTable设置为 nil ， otherTable 仍能访问 table 中的元素，如果没有指定的变量指向 myTable，Lua 的垃圾回收机制会清理对应的内存。</p> 
<h3><a id="22_Table_24"></a>（2.2） Table的操作</h3> 
<p><img src="https://images2.imgbox.com/80/5e/QtCsWPU2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="221tableconcat_26"></a>（2.2.1）table.concat()</h4> 
<p><img src="https://images2.imgbox.com/2a/6e/VMgU5GZ0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="222tableinsert_29"></a>（2.2.2）table.insert()</h4> 
<p><img src="https://images2.imgbox.com/e6/80/iN2bHhEk_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="223tableremove_31"></a>（2.2.3）table.remove()</h4> 
<p><img src="https://images2.imgbox.com/34/2a/E8ScuEou_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="224tablesort_33"></a>（2.2.4）table.sort()</h4> 
<p><img src="https://images2.imgbox.com/f1/a6/FeWTWj7J_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><code>table.sort()</code> 中的第二个参数comp是一个排序函数，如果我们想要按特定顺序对表的元素进行排序，则使用该函数提供逻辑，该排序函数接收两个参数，并且如果第一个参数应该在排序数组中排在第一位，则必须返回 true。如果未提供此函数，排序将使用默认的小于运算（对应于“&lt;”运算符）。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/a7/2d/mBRX2ekO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="225tablemaxn_38"></a>（2.2.5）table.maxn()</h4> 
<p>table.maxn 在 Lua5.2 之后该方法已经不存在了，我们定义了 table_maxn 方法来实现。<br> <img src="https://images2.imgbox.com/32/b1/390bpK0I_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="226_table__41"></a>（2.2.6）获取 table 长度</h4> 
<p>当我们获取 table 的长度的时候无论是使用 # 还是 table.getn 其都会在索引中断的地方停止计数，而导致无法正确取得 table 的长度。<code>（table.getn()是已弃用的 Lua 函数！）</code><br> <img src="https://images2.imgbox.com/3a/94/XB7aDngP_o.png" alt="在这里插入图片描述"><br> 可以用以下方法替代：<br> <img src="https://images2.imgbox.com/ae/32/i2Y9ToMa_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Lua__47"></a>三、Lua 模块与包</h2> 
<blockquote> 
 <p>模块类似于一个封装库，从 Lua 5.1 开始，Lua 加入了标准的模块管理机制，可以把一些公用的代码放在一个文件里，以 API 接口的形式在其他地方调用，有利于代码的重用和降低代码耦合度。</p> 
 <p>Lua 的模块是由变量、函数等已知元素组成的 table，因此创建一个模块很简单，就是创建一个 table，然后把需要导出的常量、函数放入其中，最后返回这个 table 就行。</p> 
</blockquote> 
<p>创建自定义的 Lua 模块如下：<br> <img src="https://images2.imgbox.com/0c/d9/kcSVSqoQ_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>由上可知，模块的结构就是一个 table 的结构，因此可以像操作调用 table 里的元素那样来操作调用模块里的常量或函数。<br> 上面的 <code>privateFunc()</code> 声明为程序块的局部变量，即表示一个私有函数，因此是不能从外部访问模块里的这个私有函数，必须通过模块里的公有函数来调用.</p> 
</blockquote> 
<h3><a id="31require__57"></a>（3.1）require 函数</h3> 
<p>Lua 中使用 <code>require()</code> 函数来加载模块。语法如下：<br> <img src="https://images2.imgbox.com/8e/e8/DVXu3Q6C_o.png" alt="在这里插入图片描述"><br> 也可以给加载的模块定义一个别名变量，方便调用：<br> <img src="https://images2.imgbox.com/09/a2/d7mpurl6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_63"></a>（3.2）加载机制</h3> 
<blockquote> 
 <p>对于自定义的模块，模块文件不是放在哪个文件目录都行，函数 require 有它自己的文件路径加载策略，它会尝试从 Lua 文件或 C 程序库中加载模块。<br> require 用于搜索 <code>lua</code> 文件的路径是存放在全局变量 package.path 中，当 Lua 启动后，会以环境变量 LUA_PATH 的值来初始这个环境变量。如果没有找到该环境变量，则使用一个编译时定义的默认路径来初始化。之后如果找到文件，则通过 <code>package.loadfile</code> 来加载模块。<br> require 用于搜索 <code>.dll</code> 和 <code>so</code> 文件的路径是存放在全局变量 package.cpath 中，而这个变量则是通过环境变量 LUA_CPATH 来初始化。之后如果找到文件，则通过 <code>package.loadlib</code> 来加载模块。<br> 以下博客有更加详细的介绍：<br> <a href="https://www.runoob.com/lua/lua-modules-packages.html" rel="nofollow">runoob-Lua：模块与包</a><br> <a href="https://blog.csdn.net/piger91/article/details/79940663?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-79940663-blog-8289199.235%5Ev38%5Epc_relevant_anti_vip&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-79940663-blog-8289199.235%5Ev38%5Epc_relevant_anti_vip&amp;utm_relevant_index=2">lua require路径设置实例</a></p> 
</blockquote> 
<p>实例（<code>Lua 加载模块与模块的使用</code>）<br> <img src="https://images2.imgbox.com/7f/57/0M2gIKWC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33C__74"></a>（3.3）C 包</h3> 
<p><img src="https://images2.imgbox.com/82/65/9PBAyNHD_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/af8cc9661addf071c2173fe4c074819a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac安装opencv后无法导入cv2的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ff89f93b13c72edd65c6ad07d397936/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解构助贷：信贷机构和资金方的后台系统设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>