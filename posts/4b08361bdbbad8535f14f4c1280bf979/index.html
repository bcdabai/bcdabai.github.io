<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>H5之js拼接select与input的级联 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="H5之js拼接select与input的级联" />
<meta property="og:description" content="Jquery combobox实现二级级联效果。
最近在通过js中的拼接实现input和select的下拉框级联效果，功夫不负有心人终于可以分享一下自己的劳动成果了。
很简单的应用，如果使用服务器下拉框控件，添加几个事件，相信能够轻松的解决，但是现在所有的操作都是在js中进行的。
如代码所示，仅仅通过input和select拼接来实现级联功能，确实增加了很大的难度。
&lt;select οnchange=&#39;return getValue(this.value,&#34; &#43; i &#43; &#34;)&#39; id=&#39;SOilCorpName&#34; &#43; i &#43; &#34;&#39;&gt;&#34; &#43; SetOilName(ListContent[i].SOilCorpName) &#43; &#34;&lt;/select&gt;&lt;input id=&#39;SRefineFactoryName&#34; &#43; i &#43; &#34;&#39; readonly value=&#39;&#34; &#43; ListContent[i].SRefineFactoryName &#43; &#34;&#39; /&gt; 曾经这么想过，在select中添加onchange事件，然后触发事件，将参数传到后台，根据参数查询出结果，绑定到input域中，但是从js中怎么来触发后台事件，曾经想过用ajax来实现，但是相对来说太复杂了。
最后采用的是，将被级联的数据全部加载出来，然后传到前台，在js中接受，在onchange事件中与下拉点击的参数进行对比。
function getValue(result, i) { var opt1 = &#39;&lt;%= FactoryNamelist%&gt;&#39; var ListOpt = new Array(); var optionList = opt1.split(&#39;;&#39;); if (optionList != &#34;&#34;) { for (var j = 0; j &lt; optionList.length; j&#43;&#43;) { var optionListItem = optionList[j]." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4b08361bdbbad8535f14f4c1280bf979/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-10-12T22:06:00+08:00" />
<meta property="article:modified_time" content="2015-10-12T22:06:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">H5之js拼接select与input的级联</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>Jquery combobox实现二级级联效果。</p> 
 <p>最近在通过js中的拼接实现input和select的下拉框级联效果，功夫不负有心人终于可以分享一下自己的劳动成果了。</p> 
 <p><img src="" alt=""></p> 
 <p></p> 
 <p>很简单的应用，如果使用服务器下拉框控件，添加几个事件，相信能够轻松的解决，但是现在所有的操作都是在js中进行的。</p> 
 <p>如代码所示，仅仅通过input和select拼接来实现级联功能，确实增加了很大的难度。<br></p> 
 <p> </p> 
 <pre><code class="language-html">    &lt;select οnchange='return getValue(this.value," + i + ")' id='SOilCorpName" + i + "'&gt;" + SetOilName(ListContent[i].SOilCorpName) + "&lt;/select&gt;&lt;input id='SRefineFactoryName" + i + "' readonly value='" + ListContent[i].SRefineFactoryName + "' /&gt;</code></pre> 
   
 <p>曾经这么想过，在select中添加onchange事件，然后触发事件，将参数传到后台，根据参数查询出结果，绑定到input域中，但是从js中怎么来触发后台事件，曾经想过用ajax来实现，但是相对来说太复杂了。</p> 
 <p></p> 
 <p>最后采用的是，将被级联的数据全部加载出来，然后传到前台，在js中接受，在onchange事件中与下拉点击的参数进行对比。</p> 
 <p></p> 
 <pre><code class="language-javascript">function getValue(result, i) {
            var opt1 = '&lt;%= FactoryNamelist%&gt;'
            var ListOpt = new Array();
            var optionList = opt1.split(';');
            if (optionList != "") {
                for (var j = 0; j &lt; optionList.length; j++) {
                    var optionListItem = optionList[j].split(',');
                    if (optionListItem[2] == result) {
                        ListOpt += optionListItem + ";";
                    }
                }
                              if (ListOpt.length &gt; 1) {
                    ListOpt = ListOpt.substr(0, ListOpt.length - 1);
                } else {
                    ListOpt = "";
                }
                BindCombobox(ListOpt, '#SRefineFactoryName' + i, '#SRefineFactoryCode' + i);
            }
    }
</code></pre> 
   
 <p>然后调用在网上能够查到封装的方法：</p> 
 <p></p> 
 <pre><code class="language-javascript">function BindCombobox(opt,controlid,controlValueId)
    {
         var optionList = opt.split(';');
                
        combobox.prototype.mustSelect = false; //必须选择参数,默认为false
        combobox.prototype.fieldText = "text"; //设置数据源文本命名，默认为text
        combobox.prototype.fieldValue = "id"; //设置数据源id命名，默认为id
        combobox.prototype.maxLength = 5; //自动搜索显示20项,默认为null.即不限制
        //初始化所有combobox
        combobox.prototype.init(controlid, "../../../Resource/Images/dropdown.gif");
        //绑定
        var combo = new combobox(controlid,controlValueId);
        var datasource ="[";
           
        if (optionList!="")
        {
            for(var j = 0 ; j &lt; optionList.length ; j ++ )
            {
                var optionListItem = optionList[j].split(',');
                datasource =datasource+"{ id: '"+optionListItem[0]+"', text: '"+optionListItem[1]+"'},";                                   
            }
            if (datasource !="[")
            {
                datasource=datasource.substr(0,datasource.length-1);
            }
        }
        else
        {
            datasource=datasource +"{ id: '', text: ''}";  
        }
        datasource =datasource+ ']';
        combo.dataSource = eval(datasource);
        combo.dataBind();  
    
    }
</code></pre> 
 <br> 
</div> 
<p>转载于:https://www.cnblogs.com/xzpblog/p/5117909.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b55a1e81e91f15cf40a8d8aec9389367/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将两个递增的有序链表合并为一个递增的有序链表（C语言编程实现）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9408c4709549ce4990fbcd1af1156d8e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">V4L2简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>