<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>软件架构之事件驱动架构 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="软件架构之事件驱动架构" />
<meta property="og:description" content="一、定义 事件驱动的架构是围绕事件的发布、捕获、处理和存储（或持久化）而构建的集成模型。 某个应用或服务执行一项操作或经历另一个应用或服务可能想知道的更改时，就会发布一个事件（也就是对该操作或更改的记录），另一个应用或服务便可以获取和处理该事件，继而执行更多操作。
二、基本原理 事件驱动架构以事件作为系统间通信的基本单位，系统中的各个组件通过发布和订阅事件来进行交互。基本原理包括以下几个要素：
1. 事件：事件是发生在系统中的某种动作或状态变化，它可以是用户操作，也可以是其他组件的响应。每个事件都有一个唯一的标识符，用于区别不同的事件类型。
2. 发布-订阅模式：在事件驱动架构中，系统中的某个组件可以发布（发布者）事件，而其他组件可以订阅（订阅者）这些事件。当有事件发布时，所有订阅该事件的组件都会收到通知。
3. 事件处理：事件的处理是事件驱动架构的核心。当一个事件被发布后，订阅该事件的组件会执行相应的事件处理函数。事件处理函数可以是系统内置的默认处理函数，也可以是开发者自定义的处理逻辑。
4. 事件传递：事件的传递是指事件在系统中的传递过程。一个事件可以触发其他事件的发布，从而形成事件链。事件传递可以是同步的，也可以是异步的，取决于具体的业务需求。
三、实现方式 事件驱动架构模式主要包含两种实现方式，分别是中介者拓扑（Mediator Topology），代理者拓扑（Broker Topology）。
3.1 中介者拓扑结构
中介者拓扑结构需要在一个事件通过 Mediator 时精心安排好具体的步骤，适合有多个步骤的事件。(有点工作流的感觉)。比如在交易系统中，每个请求流程必须经过特定的步骤，如验证、订单、配送，以及通知买家等。在这些步骤中，有些步骤是串行，有些可以并行完成。
主要包括 4 个基本组件：
事件队列（event queue）：接收事件的入口，存储待处理事件分发器（event mediator）：将不同的事件分发到不同的业务逻辑单元事件通道（event channel）：分发器与处理器之间的联系渠道事件处理器（event processor）：实现业务逻辑，处理完成后会发出事件，触发下一步操作 示例：以一个处理保险流程的例子来说明，如图： 3.2代理者拓扑（Broker Topology）
代理者拓扑主要由 Event Processor 和 Event Channel 构成，事件之间可能彼此是相互关联的。例如，一个 Event Processor 的处理结果是下一个 Event Processor 需要消费的事件，每个 Processor 必须完成自己的工作，其他 Processor 才能开始执行，整个事件处理过程像一条彼此相扣的链条，只有整个流程结束才能形成一个完整的业务逻辑。（类似于职责链或管道模式）。
示例：同样以一个处理保险流程的例子来说明，如图：
四、优点与缺点
事件驱动架构可以实现系统的松耦合，使各个组件之间解耦，具有以下优点：
1. 可扩展性：通过事件驱动架构，可以方便地增加、修改或删除系统中的组件，而不会影响其他组件的正常运行。
2. 灵活性：每个组件可以独立开发和测试，不受其他组件的影响。这样可以更好地适应需求的变化或更新迭代。
3. 可重用性：事件驱动架构可以将特定的功能封装成独立的组件，使其可以在系统中的多个地方进行复用，减少重复开发的工作量。
4. 可测试性：由于各个组件之间解耦，可以更加方便地对单个组件进行单元测试和集成测试，提高系统的可测试性和稳定性。
缺点：
一旦环境变化，需要代码调整或增加功能时，通常比较麻烦和费时部署比较麻烦，即使只修改一个小地方，往往需要整个软件重新部署，不容易做持续发布软件升级时，可能需要整个服务暂停扩展性差，用户请求大量增加时，必须依次扩展每一层，由于每一层内部是耦合的，扩展会很困难 参考：
事件驱动的架构 | IBM
事件驱动架构 - 光星の博客 13种常见软件体系结构风格定义分析、结构图、优缺点_软件体系结构设计风格-CSDN博客" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e8c0ff2514fcf2cbb9dbc28fef9c014f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T20:31:58+08:00" />
<meta property="article:modified_time" content="2024-01-10T20:31:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">软件架构之事件驱动架构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>一、定义</h4> 
<p>事件驱动的架构是围绕事件的发布、捕获、处理和存储（或持久化）而构建的集成模型。 某个应用或服务执行一项操作或经历另一个应用或服务可能想知道的更改时，就会发布一个事件（也就是对该操作或更改的记录），另一个应用或服务便可以获取和处理该事件，继而执行更多操作。</p> 
<h4>二、基本原理</h4> 
<p>事件驱动架构以事件作为系统间通信的基本单位，系统中的各个组件通过发布和订阅事件来进行交互。基本原理包括以下几个要素：<br> 1. 事件：事件是发生在系统中的某种动作或状态变化，它可以是用户操作，也可以是其他组件的响应。每个事件都有一个唯一的标识符，用于区别不同的事件类型。<br> 2. 发布-订阅模式：在事件驱动架构中，系统中的某个组件可以发布（发布者）事件，而其他组件可以订阅（订阅者）这些事件。当有事件发布时，所有订阅该事件的组件都会收到通知。<br> 3. 事件处理：事件的处理是事件驱动架构的核心。当一个事件被发布后，订阅该事件的组件会执行相应的事件处理函数。事件处理函数可以是系统内置的默认处理函数，也可以是开发者自定义的处理逻辑。<br> 4. 事件传递：事件的传递是指事件在系统中的传递过程。一个事件可以触发其他事件的发布，从而形成事件链。事件传递可以是同步的，也可以是异步的，取决于具体的业务需求。</p> 
<h4>三、实现方式</h4> 
<p>事件驱动架构模式主要包含两种实现方式，分别是中介者拓扑（Mediator Topology），代理者拓扑（Broker Topology）。</p> 
<p>3.1 中介者拓扑结构</p> 
<p>中介者拓扑结构需要在一个事件通过 Mediator 时精心安排好具体的步骤，适合有多个步骤的事件。(有点工作流的感觉)。比如在交易系统中，每个请求流程必须经过特定的步骤，如验证、订单、配送，以及通知买家等。在这些步骤中，有些步骤是串行，有些可以并行完成。</p> 
<p></p> 
<p><img alt="" height="493" src="https://images2.imgbox.com/a9/a4/5J46GtFD_o.png" width="640"></p> 
<p>主要包括 4 个基本组件：</p> 
<ul><li><strong>事件队列（event queue）</strong>：接收事件的入口，存储待处理事件</li><li><strong>分发器（event mediator）</strong>：将<strong>不同的事件</strong>分发到不同的业务逻辑单元</li><li><strong>事件通道（event channel）</strong>：分发器与处理器之间的联系渠道</li><li><strong>事件处理器（event processor）</strong>：实现业务逻辑，处理完成后会发出事件，触发下一步操作</li></ul> 
<p>示例：以一个处理保险流程的例子来说明，如图： </p> 
<p><img alt="" height="447" src="https://images2.imgbox.com/a5/35/KQBXNED4_o.png" width="550"></p> 
<p>  </p> 
<p>3.2代理者拓扑（Broker Topology）</p> 
<p>代理者拓扑主要由 Event Processor 和 Event Channel 构成，事件之间可能彼此是相互关联的。例如，一个 Event Processor 的处理结果是下一个 Event Processor 需要消费的事件，每个 Processor 必须完成自己的工作，其他 Processor 才能开始执行，整个事件处理过程像一条彼此相扣的链条，只有整个流程结束才能形成一个完整的业务逻辑。（类似于职责链或管道模式）。</p> 
<p> <img alt="" height="372" src="https://images2.imgbox.com/e0/c4/hln8Go4e_o.png" width="550"></p> 
<p> 示例：同样以一个处理保险流程的例子来说明，如图：</p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/14/bf/qjAjXt4m_o.png" width="550"></p> 
<p id="u34d4bbf2"><strong>四、优点与缺点</strong><br> 事件驱动架构可以实现系统的松耦合，使各个组件之间解耦，具有以下优点：</p> 
<p>1. 可扩展性：通过事件驱动架构，可以方便地增加、修改或删除系统中的组件，而不会影响其他组件的正常运行。</p> 
<p>2. 灵活性：每个组件可以独立开发和测试，不受其他组件的影响。这样可以更好地适应需求的变化或更新迭代。</p> 
<p>3. 可重用性：事件驱动架构可以将特定的功能封装成独立的组件，使其可以在系统中的多个地方进行复用，减少重复开发的工作量。<br> 4. 可测试性：由于各个组件之间解耦，可以更加方便地对单个组件进行单元测试和集成测试，提高系统的可测试性和稳定性。</p> 
<p>缺点：</p> 
<ol><li>一旦环境变化，需要代码调整或增加功能时，通常比较麻烦和费时</li><li>部署比较麻烦，即使只修改一个小地方，往往需要整个软件重新部署，不容易做持续发布</li><li>软件升级时，可能需要整个服务暂停</li><li>扩展性差，用户请求大量增加时，必须依次扩展每一层，由于每一层内部是耦合的，扩展会很困难</li></ol> 
<p>参考：</p> 
<p><a href="https://www.ibm.com/cn-zh/topics/event-driven-architecture#:~:text=%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%9E%B6%E6%9E%84%EF%BC%9F%20%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%9E%B6%E6%9E%84%E6%98%AF%E5%9B%B4%E7%BB%95%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%8F%91%E5%B8%83%E3%80%81%E6%8D%95%E8%8E%B7%E3%80%81%E5%A4%84%E7%90%86%E5%92%8C%E5%AD%98%E5%82%A8%EF%BC%88%E6%88%96%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%89%E8%80%8C%E6%9E%84%E5%BB%BA%E7%9A%84%E9%9B%86%E6%88%90%E6%A8%A1%E5%9E%8B%E3%80%82,%E6%9F%90%E4%B8%AA%E5%BA%94%E7%94%A8%E6%88%96%E6%9C%8D%E5%8A%A1%E6%89%A7%E8%A1%8C%E4%B8%80%E9%A1%B9%E6%93%8D%E4%BD%9C%E6%88%96%E7%BB%8F%E5%8E%86%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%E6%88%96%E6%9C%8D%E5%8A%A1%E5%8F%AF%E8%83%BD%E6%83%B3%E7%9F%A5%E9%81%93%E7%9A%84%E6%9B%B4%E6%94%B9%E6%97%B6%EF%BC%8C%E5%B0%B1%E4%BC%9A%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%20%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%AF%B9%E8%AF%A5%E6%93%8D%E4%BD%9C%E6%88%96%E6%9B%B4%E6%94%B9%E7%9A%84%E8%AE%B0%E5%BD%95%EF%BC%89%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%E6%88%96%E6%9C%8D%E5%8A%A1%E4%BE%BF%E5%8F%AF%E4%BB%A5%E6%B6%88%E8%B4%B9%E5%92%8C%E5%A4%84%E7%90%86%E8%AF%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BB%A7%E8%80%8C%E6%89%A7%E8%A1%8C%E6%9B%B4%E5%A4%9A%E6%93%8D%E4%BD%9C%E3%80%82" rel="nofollow" title="事件驱动的架构 | IBM">事件驱动的架构 | IBM</a></p> 
<p><a href="http://www.gxitsky.com/2022/03/26/ArchitectureDesign-Model-Event-Driven/" rel="nofollow" title="事件驱动架构 - 光星の博客">事件驱动架构 - 光星の博客</a> </p> 
<p><a href="https://blog.csdn.net/Jayphone17/article/details/103651076" title="13种常见软件体系结构风格定义分析、结构图、优缺点_软件体系结构设计风格-CSDN博客">13种常见软件体系结构风格定义分析、结构图、优缺点_软件体系结构设计风格-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5be48b026a88f0e57a23ae68d408260e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件测试|Python openpyxl库使用指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dac8e9f5bd52f6181d1aedae0ea98008/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL夯实之路-查询性能优化深入浅出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>