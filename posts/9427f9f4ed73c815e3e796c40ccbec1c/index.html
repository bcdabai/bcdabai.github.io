<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Springboot___properties以及数据库配置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Springboot___properties以及数据库配置" />
<meta property="og:description" content="1. 简介 在Java的漫长发展过程当中，其项目的配置方式也发生了很多次变化。 第一阶段：都是通过xml来配置bean。缺点：随着项目不断扩大，需要将xml分别放到不同的配置文件中。
第二阶段：因为JDK1.5支持了注解配置，于是配置文件的方式也发生了变化。对与基本配置用xml，而对于业务开发则使用注解来配置。
第三阶段：使用Java配置。配置Java类进行注解来配置属性。
2. 配置注解 Spring的Java配置方式是通过@Configuration和@Bean这两个注解来实现的。 其中@Configuration作用于类上，相当于一个xml配置文件。 而@Bean作用于方法上，相当于一个&lt;bean&gt;标签。
3. 用注解代替配置文件 在springboot中会使用@PropertySource来指定读取的配置文件，并且通过@Value注解获取值。 &lt;1&gt;如何配置多个配置文件？ 配置多个配置文件的示例如下：
//在类上配置注解如下 @PropertySource(value=&#34;classpath:jdbc.properties&#34;,&#34;test.properties&#34;) &lt;2&gt;如果配置文件不存在，如何解决？ 可以通过配置忽略文件不存在的情况，防止程序抛出ClassNotFoundException。
//在类上配置注解如下 @PropertySource(value={&#34;classpath:jdbc.properties&#34;}, ignoreResourceNotFound=true) 4. 数据库配置 之前的配置方式如下：
&lt;!-- 定义数据源 --&gt; &lt;bean id=&#34;dataSource&#34; class=&#34;com.jolbox.bonecp.BoneCPDataSource&#34; destroy-method=&#34;close&#34;&gt; &lt;!-- 数据库驱动 --&gt; &lt;property name=&#34;driverClass&#34; value=&#34;${jdbc.driverClassName}&#34; /&gt; &lt;!-- 相应驱动的jdbcUrl --&gt; &lt;property name=&#34;jdbcUrl&#34; value=&#34;${jdbc.url}&#34; /&gt; &lt;!-- 数据库的用户名 --&gt; &lt;property name=&#34;username&#34; value=&#34;${jdbc.username}&#34; /&gt; &lt;!-- 数据库的密码 --&gt; &lt;property name=&#34;password&#34; value=&#34;${jdbc.password}&#34; /&gt; &lt;!-- 检查数据库连接池中空闲连接的间隔时间，单位是分，默认值：240--&gt; &lt;!--如果要取消则设置为0 --&gt; &lt;property name=&#34;idleConnectionTestPeriod&#34; value=&#34;60&#34; /&gt; &lt;!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9427f9f4ed73c815e3e796c40ccbec1c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-23T21:37:55+08:00" />
<meta property="article:modified_time" content="2018-05-23T21:37:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Springboot___properties以及数据库配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>1. 简介</strong> <br>  在Java的漫长发展过程当中，其项目的配置方式也发生了很多次变化。 <br>   第一阶段：都是通过xml来配置bean。缺点：随着项目不断扩大，需要将xml分别放到不同的配置文件中。</p> 
<p>  第二阶段：因为JDK1.5支持了注解配置，于是配置文件的方式也发生了变化。对与基本配置用xml，而对于业务开发则使用注解来配置。</p> 
<p> 第三阶段：使用Java配置。配置Java类进行注解来配置属性。</p> 
<p><strong>2. 配置注解</strong> <br>  Spring的Java配置方式是通过<code>@Configuration</code>和<code>@Bean</code>这两个注解来实现的。 <br>  其中<code>@Configuration</code>作用于类上，相当于一个xml配置文件。 <br>  而<code>@Bean</code>作用于方法上，相当于一个&lt;bean&gt;标签。</p> 
<p><strong>3. 用注解代替配置文件</strong> <br>  在springboot中会使用<code>@PropertySource</code>来指定读取的配置文件，并且通过<code>@Value</code>注解获取值。 <br> &lt;1&gt;如何配置多个配置文件？ <br>  配置多个配置文件的示例如下：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//在类上配置注解如下</span>
@PropertySource(<span class="hljs-keyword">value</span>=<span class="hljs-string">"classpath:jdbc.properties"</span>,<span class="hljs-string">"test.properties"</span>)</code></pre> 
<p>&lt;2&gt;如果配置文件不存在，如何解决？ <br>  可以通过配置忽略文件不存在的情况，防止程序抛出ClassNotFoundException。</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//在类上配置注解如下</span>
@PropertySource(<span class="hljs-keyword">value</span>={<!-- --><span class="hljs-string">"classpath:jdbc.properties"</span>},
                ignoreResourceNotFound=<span class="hljs-keyword">true</span>)</code></pre> 
<p><strong>4. 数据库配置</strong> <br>  之前的配置方式如下：</p> 
<pre class="prettyprint"><code class="language-html hljs "><span class="hljs-comment">&lt;!-- 定义数据源 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.jolbox.bonecp.BoneCPDataSource"</span>
    <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 数据库驱动 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClass"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.driverClassName}"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 相应驱动的jdbcUrl --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jdbcUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.url}"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 数据库的用户名 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.username}"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 数据库的密码 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${jdbc.password}"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 检查数据库连接池中空闲连接的间隔时间，单位是分，默认值：240--&gt;</span>
    <span class="hljs-comment">&lt;!--如果要取消则设置为0 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"idleConnectionTestPeriod"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"60"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 连接池中未使用的链接最大存活时间，单位是分，默认值：60 --&gt;</span>
    <span class="hljs-comment">&lt;!--如果要永远存活设置为0 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"idleMaxAge"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 每个分区最大的连接数 --&gt;</span>
    <span class="hljs-comment">&lt;!-- 
        判断依据：请求并发数
     --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxConnectionsPerPartition"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"100"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- 每个分区最小的连接数 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"minConnectionsPerPartition"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"5"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
</code></pre> 
<p> <font color="red">如果要改成java配置放下则如：</font></p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-annotation">@Value</span>(<span class="hljs-string">"${jdbc.url}"</span>)
    <span class="hljs-keyword">private</span> String jdbcUrl;

    <span class="hljs-annotation">@Value</span>(<span class="hljs-string">"${jdbc.driverClassName}"</span>)
    <span class="hljs-keyword">private</span> String jdbcDriverClassName;

    <span class="hljs-annotation">@Value</span>(<span class="hljs-string">"${jdbc.username}"</span>)
    <span class="hljs-keyword">private</span> String jdbcUsername;

    <span class="hljs-annotation">@Value</span>(<span class="hljs-string">"${jdbc.password}"</span>)
    <span class="hljs-keyword">private</span> String jdbcPassword;

    <span class="hljs-annotation">@Bean</span>(destroyMethod = <span class="hljs-string">"close"</span>)
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span>() {
        BoneCPDataSource boneCPDataSource = <span class="hljs-keyword">new</span> BoneCPDataSource();
        <span class="hljs-comment">// 数据库驱动</span>
        boneCPDataSource.setDriverClass(jdbcDriverClassName);
        <span class="hljs-comment">// 相应驱动的jdbcUrl</span>
        boneCPDataSource.setJdbcUrl(jdbcUrl);
        <span class="hljs-comment">// 数据库的用户名</span>
        boneCPDataSource.setUsername(jdbcUsername);
        <span class="hljs-comment">// 数据库的密码</span>
        boneCPDataSource.setPassword(jdbcUsername);
        <span class="hljs-comment">// 检查数据库连接池中空闲连接的间隔时间，单位是分，默认值：240</span>
        <span class="hljs-comment">//如果要取消则设置为0</span>
        boneCPDataSource.setIdleConnectionTestPeriodInMinutes(<span class="hljs-number">60</span>);
        <span class="hljs-comment">// 连接池中未使用的链接最大存活时间，单位是分，默认值：60</span>
        <span class="hljs-comment">//如果要永远存活设置为0</span>
        boneCPDataSource.setIdleMaxAgeInMinutes(<span class="hljs-number">30</span>);
        <span class="hljs-comment">// 每个分区最大的连接数</span>
        boneCPDataSource.setMaxConnectionsPerPartition(<span class="hljs-number">100</span>);
        <span class="hljs-comment">// 每个分区最小的连接数    </span>
        boneCPDataSource.setMinConnectionsPerPartition(<span class="hljs-number">5</span>);
        <span class="hljs-keyword">return</span> boneCPDataSource;
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/31c21a43073570cb3ad56532ec69f9a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言中实现bool（布尔型变量）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b62d947e68e8a520903136965777a202/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Studio Emulator: Process finished with exit code 1 问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>