<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaåŸºç¡€å­¦ä¹ ä¹‹å¹¶å‘ç¯‡ï¼šLinkedBlockingQueueå’ŒLinkedBlockingDeque - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaåŸºç¡€å­¦ä¹ ä¹‹å¹¶å‘ç¯‡ï¼šLinkedBlockingQueueå’ŒLinkedBlockingDeque" />
<meta property="og:description" content="å­¦ä¹ ç›®æ ‡ åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé˜»å¡é˜Ÿåˆ—åœ¨å¤šçº¿ç¨‹ä¸­çš„åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®åˆ°é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡æ—¶éœ€è¦é˜»å¡çº¿ç¨‹ï¼Œåœæ­¢å¾€é˜Ÿåˆ—ç”Ÿäº§ã€‚æ¶ˆè´¹è€…æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¯¹é˜Ÿåˆ—ä¸ºç©ºæ—¶é˜»å¡çº¿ç¨‹åœæ­¢æ¶ˆè´¹ï¼Œåœ¨Javaä¸­æœ‰æä¾›ä¸åŒåœºæ™¯çš„é˜»å¡é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ ï¼šLinkedBlockingQueueå’ŒLinkedBlockingDequeä¸¤ç§é˜»å¡é˜Ÿåˆ—ã€‚
LinkedBlockingQueue ä¸Šæ¬¡æˆ‘ä»¬å­¦ä¹ äº†åŸºç¡€çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ArrayBlockingQueueï¼ŒğŸ‘‰æœ‰å…´è¶£å¯ä»¥äº†è§£ä¸‹ï¼Œæ˜ç™½äº†æœ‰ç•Œé˜»å¡é˜Ÿåˆ—åŸºæœ¬å®ç°åŸç†ï¼Œè€ŒLinkedBlockingQueueä¸ArrayBlockingQueueæ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘ä»¬çŸ¥é“ArrayBlockingQueueæ˜¯é€šè¿‡ä¸€ä¸ªæœ‰ç•Œçš„æ•°ç»„å¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œè€ŒLinkedBlockingQueueæ˜¯ç”¨äº†å•é“¾è¡¨æ¥å®ç°æ•°æ®çš„å­˜å‚¨ï¼Œä¸”ç›¸è¾ƒäºArrayBlockingQueueæ˜¯ç”¨ä¸¤ä¸ªé”åˆ†åˆ«æ¥å¤„ç†æ•°æ®çš„ç”Ÿäº§å’Œæ¶ˆè´¹ã€‚å®ç°ç±»å¦‚ä¸‹ï¼š
public class LinkedBlockingQueue&lt;E&gt; extends AbstractQueue&lt;E&gt; implements BlockingQueue&lt;E&gt;, java.io.Serializable { /** The capacity bound, or Integer.MAX_VALUE if none */ private final int capacity; /** Current number of elements */ private final AtomicInteger count = new AtomicInteger(); /** * Head of linked list. * Invariant: head.item == null */ transient Node&lt;E&gt; head; /** * Tail of linked list. * Invariant: last.next == null */ private transient Node&lt;E&gt; last; /** Lock held by take, poll, etc */ private final ReentrantLock takeLock = new ReentrantLock(); /** Wait queue for waiting takes */ private final Condition notEmpty = takeLock." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8b56b104eb80d31e2a4b19ccf7bf0518/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-23T15:06:29+08:00" />
<meta property="article:modified_time" content="2021-11-23T15:06:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaåŸºç¡€å­¦ä¹ ä¹‹å¹¶å‘ç¯‡ï¼šLinkedBlockingQueueå’ŒLinkedBlockingDeque</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>å­¦ä¹ ç›®æ ‡</h2> 
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé˜»å¡é˜Ÿåˆ—åœ¨å¤šçº¿ç¨‹ä¸­çš„åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®åˆ°é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡æ—¶éœ€è¦é˜»å¡çº¿ç¨‹ï¼Œåœæ­¢å¾€é˜Ÿåˆ—ç”Ÿäº§ã€‚æ¶ˆè´¹è€…æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¯¹é˜Ÿåˆ—ä¸ºç©ºæ—¶é˜»å¡çº¿ç¨‹åœæ­¢æ¶ˆè´¹ï¼Œåœ¨Javaä¸­æœ‰æä¾›ä¸åŒåœºæ™¯çš„é˜»å¡é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ ï¼š<strong>LinkedBlockingQueue</strong>å’Œ<strong>LinkedBlockingDeque</strong>ä¸¤ç§é˜»å¡é˜Ÿåˆ—ã€‚</p> 
<hr color="#000000" size='1"'> 
<h2><a id="LinkedBlockingQueue_4"></a>LinkedBlockingQueue</h2> 
<p>ä¸Šæ¬¡æˆ‘ä»¬å­¦ä¹ äº†åŸºç¡€çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—<strong>ArrayBlockingQueue</strong>ï¼Œ<a href="https://blog.csdn.net/h16407/article/details/121424972">ğŸ‘‰æœ‰å…´è¶£å¯ä»¥äº†è§£ä¸‹</a>ï¼Œæ˜ç™½äº†æœ‰ç•Œé˜»å¡é˜Ÿåˆ—åŸºæœ¬å®ç°åŸç†ï¼Œè€ŒLinkedBlockingQueueä¸ArrayBlockingQueueæ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘ä»¬çŸ¥é“ArrayBlockingQueueæ˜¯é€šè¿‡ä¸€ä¸ªæœ‰ç•Œçš„æ•°ç»„å¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œè€ŒLinkedBlockingQueueæ˜¯ç”¨äº†å•é“¾è¡¨æ¥å®ç°æ•°æ®çš„å­˜å‚¨ï¼Œä¸”ç›¸è¾ƒäºArrayBlockingQueueæ˜¯ç”¨ä¸¤ä¸ªé”åˆ†åˆ«æ¥å¤„ç†æ•°æ®çš„ç”Ÿäº§å’Œæ¶ˆè´¹ã€‚å®ç°ç±»å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/** The capacity bound, or Integer.MAX_VALUE if none */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> capacity<span class="token punctuation">;</span>

    <span class="token comment">/** Current number of elements */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicInteger</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Head of linked list.
     * Invariant: head.item == null
     */</span>
    <span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> head<span class="token punctuation">;</span>

    <span class="token comment">/**
     * Tail of linked list.
     * Invariant: last.next == null
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>

    <span class="token comment">/** Lock held by take, poll, etc */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> takeLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** Wait queue for waiting takes */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Condition</span> notEmpty <span class="token operator">=</span> takeLock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** Lock held by put, offer, etc */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> putLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** Wait queue for waiting puts */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Condition</span> notFull <span class="token operator">=</span> putLock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li>capacity ï¼šæä¾›å¯ç»´æŠ¤å•å‘é“¾è¡¨é•¿åº¦ï¼Œä¸è®¾ç½®é»˜è®¤å³Integer.MAX_VALUE</li><li>count ï¼šå®é™…å¤§å°ï¼Œå³å•å‘é“¾è¡¨ä¸­å½“å‰èŠ‚ç‚¹ä¸ªæ•°</li><li>headï¼šæŒ‡å‘å•å‘é“¾è¡¨çš„è¡¨å¤´</li><li>last ï¼šæŒ‡å‘å•å‘é“¾è¡¨çš„è¡¨å°¾</li><li>takeLock ï¼šæ¶ˆè´¹é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</li><li>putLock ï¼šç”Ÿäº§é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</li><li>notEmpty ï¼šä¿è¯æ¶ˆè´¹ç­‰å¾…ï¼Œæ•°æ®é˜Ÿåˆ—ç©ºäº†çº¿ç¨‹è¿›å…¥ç­‰å¾…</li><li>notFullï¼šä¿è¯ç”Ÿäº§ç­‰å¾…ï¼Œæ•°æ®é˜Ÿåˆ—æ»¡äº†çº¿ç¨‹è¿›å…¥ç­‰å¾…</li></ul> 
<p>å…¶NodeèŠ‚ç‚¹å®šä¹‰æ˜¯ä¸€ä¸ªå¸¦å¤´æŒ‡é’ˆå’Œå°¾æŒ‡é’ˆçš„å•å‘é“¾è¡¨ï¼š<br> <img src="https://images2.imgbox.com/39/ba/PejZaP6P_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>Nodeå®šä¹‰çš„ç»“æ„å¦‚ä¸‹</strong>ï¼š</p> 
<pre><code class="prism language-java">    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">E</span> item<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">E</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> item <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>å¯ä»¥çœ‹ä¸‹ç”Ÿäº§<strong>putçš„è¿‡ç¨‹</strong>ï¼š</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Note: convention in all put/take/etc is to preset local var</span>
        <span class="token comment">// holding count negative to indicate failure unless set.</span>
        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> putLock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>putLock<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">AtomicInteger</span> count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
        putLock<span class="token punctuation">.</span><span class="token function">lockInterruptibly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>count<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                notFull<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">enqueue</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            c <span class="token operator">=</span> count<span class="token punctuation">.</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> capacity<span class="token punctuation">)</span>
                notFull<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
            putLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">signalNotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">signalNotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> takeLock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>takeLock<span class="token punctuation">;</span>
       takeLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
           notEmpty<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
           takeLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> node<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token comment">// assert putLock.isHeldByCurrentThread();</span>
       <span class="token comment">// assert last.next == null;</span>
       last <span class="token operator">=</span> last<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre> 
<p><strong>å¤§æ¦‚æµç¨‹å¦‚ä¸‹</strong>ï¼š<br> å¯ä»¥çœ‹åˆ°å®ç°ç›¸å·®æ— å‡ ï¼Œé€šè¿‡ä¸¤ä¸ªç­‰å¾…æ¡ä»¶å®ç°ç›¸äº’ç­‰å¾…ã€‚å½“å‰å¤§å°<code>count</code>åœ¨ä¸è¶…è¿‡æ€»å®¹é‡<code>capacity</code>æƒ…å†µä¸‹è¿›å…¥é˜Ÿåˆ—ï¼Œå³å¢åŠ é“¾è¡¨èŠ‚ç‚¹åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œ<code>last</code>æŒ‡é’ˆæŒ‡å‘æ’å…¥çš„èŠ‚ç‚¹ã€‚<br> åœ¨å½“å‰èŠ‚ç‚¹å°äºæ€»å®¹é‡<code>capacity</code>æ—¶ï¼Œ<code>signal</code>å°†å½“å‰çš„çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹å”¤é†’ã€‚è€Œå½“countä¸º0æ—¶è¡¨ç¤ºé˜Ÿåˆ—æœ‰ä¸€æ¡æ•°æ®äº†ï¼Œå¯ä»¥è®©æ¶ˆè´¹çº¿ç¨‹å”¤é†’è¿›è¡Œç”Ÿäº§ã€‚</p> 
<hr color="#000000" size='1"'> 
<h2><a id="LinkedBlockingDeque_112"></a>LinkedBlockingDeque</h2> 
<p>è€Œ<strong>LinkedBlockingDeque</strong>è¿™é‡Œä¹ä¸€çœ‹å¥½åƒå’ŒLinkedBlockingQueueè¿åå­—éƒ½æ²¡å•¥å·®åˆ«ï¼Œå®è´¨ä¸ŠLinkedBlockingDequeåé¢æ˜¯Dequeï¼ŒDequeæ˜¯ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œæ˜¯ â€œDouble Ended Queueâ€ çš„ç¼©å†™ã€‚åŒç«¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªä½ å¯ä»¥ä»ä»»æ„ä¸€ç«¯æ’å…¥æˆ–è€…æŠ½å–å…ƒç´ çš„é˜Ÿåˆ—ã€‚å®ç°äº†åœ¨é˜Ÿåˆ—å¤´å’Œé˜Ÿåˆ—å°¾çš„é«˜æ•ˆæ’å…¥å’Œç§»é™¤ã€‚å¹¶ä¸”æ¯”ä¼ ç»Ÿçš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼å…·æœ‰æ›´é«˜çš„å¯ä¼¸ç¼©æ€§ï¼Œè¿™æ˜¯å› ä¸ºå·¥ä½œè€…çº¿ç¨‹ä¸ä¼šåœ¨å•ä¸ªå…±äº«çš„ä»»åŠ¡é˜Ÿåˆ—ä¸Šå‘ç”Ÿç«äº‰ã€‚åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œå®ƒä»¬éƒ½åªæ˜¯è®¿é—®è‡ªå·±çš„åŒç«¯é˜Ÿåˆ—ï¼Œä»è€Œæå¤§åœ°å‡å°‘äº†ç«äº‰ã€‚<br> <img src="https://images2.imgbox.com/2d/fd/QRZdZ6Oj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>å®ç°äº†</strong>ï¼š<br> ä¸€ä¸ªçº¿ç¨‹ç”Ÿäº§å…ƒç´ ï¼Œå¹¶æŠŠå®ƒä»¬æ’å…¥åˆ°é˜Ÿåˆ—çš„ä»»æ„ä¸€ç«¯ã€‚å¦‚æœåŒç«¯é˜Ÿåˆ—å·²æ»¡ï¼Œæ’å…¥çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ°ä¸€ä¸ªç§»é™¤çº¿ç¨‹ä»è¯¥é˜Ÿåˆ—ä¸­ç§»å‡ºäº†ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœåŒç«¯é˜Ÿåˆ—ä¸ºç©ºï¼Œç§»é™¤çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ°ä¸€ä¸ªæ’å…¥çº¿ç¨‹å‘è¯¥é˜Ÿåˆ—æ’å…¥äº†ä¸€ä¸ªæ–°å…ƒç´ ã€‚<br> <strong>å®šä¹‰çš„æˆå‘˜</strong>ï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedBlockingDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">extends</span> <span class="token class-name">AbstractQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">implements</span> <span class="token class-name">BlockingDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/** Doubly-linked list node class */</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">E</span> item<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">E</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            item <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> first<span class="token punctuation">;</span>

    <span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>

    <span class="token comment">/** Number of items in the deque */</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>

    <span class="token comment">/** Maximum number of items in the deque */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> capacity<span class="token punctuation">;</span>

    <span class="token comment">/** Main lock guarding all access */</span>
    <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** Condition for waiting takes */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Condition</span> notEmpty <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** Condition for waiting puts */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Condition</span> notFull <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>å’ŒLinkedBlockingQueueæˆå‘˜å˜é‡ç›¸æ¯”ï¼Œå‘ç°<code>Node</code>é™¤äº†åŠ äº†ä¸€ä¸ªprevæŒ‡é’ˆï¼Œå¹¶æ— äºŒè‡´ã€‚<br> ä½†é€šè¿‡ç»§æ‰¿å…³ç³»å¯ä»¥å‘ç°å®ç°äº†<strong>BlockingDeque</strong>æ¥å£ï¼Œè€Œè¯¥æ¥å£å®šä¹‰äº†å¦‚ä¸‹æ–¹æ³•ï¼š<br> <strong>å¤´éƒ¨æ“ä½œ</strong></p> 
<table><thead><tr><th></th><th>æŠ›å¼‚å¸¸</th><th>ç‰¹å®šå€¼</th><th>é˜»å¡</th><th>è¶…æ—¶</th></tr></thead><tbody><tr><td>æ’å…¥</td><td>addFirst(o)</td><td>offerFirst(o)</td><td>putFirst(o)</td><td>offerFirst(o, timeout, timeunit)</td></tr><tr><td>ç§»é™¤</td><td>removeFirst(o)</td><td>pollFirst(o)</td><td>takeFirst(o)</td><td>pollFirst(timeout, timeunit)</td></tr><tr><td>æ£€æŸ¥</td><td>getFirst(o)</td><td>peekFirst(o)</td><td></td><td></td></tr></tbody></table> 
<p><strong>å°¾éƒ¨æ“ä½œ</strong></p> 
<table><thead><tr><th></th><th>æŠ›å¼‚å¸¸</th><th>ç‰¹å®šå€¼</th><th>é˜»å¡</th><th>è¶…æ—¶</th></tr></thead><tbody><tr><td>æ’å…¥</td><td>addLast(o)</td><td>offerLast(o)</td><td>putLast(o)</td><td>offerLast(o, timeout, timeunit)</td></tr><tr><td>ç§»é™¤</td><td>removeLast(o)</td><td>pollLast(o)</td><td>takeLast(o)</td><td>pollLast(timeout, timeunit)</td></tr><tr><td>æ£€æŸ¥</td><td>getLast(o)</td><td>peekLast(o)</td><td></td><td></td></tr></tbody></table> 
<p>æ‰€ä»¥é’ˆå¯¹ä¸Šè¿°æ–¹æ³•LinkedBlockingQueueç±»éƒ½æœ‰å®ç°ï¼Œ<strong>å››ç»„ä¸åŒçš„è¡Œä¸ºæ–¹å¼è§£é‡Š</strong>ï¼š</p> 
<ol><li>æŠ›å¼‚å¸¸ï¼šå¦‚æœè¯•å›¾çš„æ“ä½œæ— æ³•ç«‹å³æ‰§è¡Œï¼ŒæŠ›ä¸€ä¸ªå¼‚å¸¸ã€‚</li><li>ç‰¹å®šå€¼ï¼šå¦‚æœè¯•å›¾çš„æ“ä½œæ— æ³•ç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªç‰¹å®šçš„å€¼(å¸¸å¸¸æ˜¯ true / false)ã€‚</li><li>é˜»å¡ï¼šå¦‚æœè¯•å›¾çš„æ“ä½œæ— æ³•ç«‹å³æ‰§è¡Œï¼Œè¯¥æ–¹æ³•è°ƒç”¨å°†ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°èƒ½å¤Ÿæ‰§è¡Œã€‚</li><li>è¶…æ—¶ï¼šå¦‚æœè¯•å›¾çš„æ“ä½œæ— æ³•ç«‹å³æ‰§è¡Œï¼Œè¯¥æ–¹æ³•è°ƒç”¨å°†ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°èƒ½å¤Ÿæ‰§è¡Œï¼Œ</li><li>ç­‰å¾…æ—¶é—´ä¸ä¼šè¶…è¿‡ç»™å®šå€¼ã€‚è¿”å›ä¸€ä¸ªç‰¹å®šå€¼ä»¥å‘ŠçŸ¥è¯¥æ“ä½œæ˜¯å¦æˆåŠŸ(å…¸å‹çš„æ˜¯ true / false)ã€‚</li></ol> 
<p>å¹¶ä¸”BlockingDeque æ¥å£ç»§æ‰¿è‡ª BlockingQueue æ¥å£ã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥åƒä½¿ç”¨ä¸€ä¸ª BlockingQueue é‚£æ ·ä½¿ç”¨ BlockingDeque</p> 
<hr color="#000000" size='1"'>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/95b7d84deeb0756ab30151fb7c350cd9/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Macå®‰è£…è½¯ä»¶æ—¶æç¤ºå·²æŸåçš„è§£å†³æ–¹æ³•</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94e3f0eb41263e8d9f9fa36038aac41a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">PCL1.8æŠ¥é”™ï¼švtkOpenGLPolyDataMapper:rwas deprecated for VTK 6.2 and will be removed in a future version</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>