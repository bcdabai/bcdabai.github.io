<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pytorch下载太慢的解决办法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pytorch下载太慢的解决办法" />
<meta property="og:description" content="前言 （欢迎大家关注我的公众号“机器学习面试基地”，之后将在公众号上持续记录本人从非科班转到算法路上的学习心得、笔经面经、心得体会。未来的重点也会主要放在机器学习面试上！）
—————————————————————————————————————
正文 （点进这里，就默认了你已经安装好了anaconda,并且知道去pytorch官网找安装代码了，然后遇到了安装太慢、进度不变、多次中断的情况，这时候通常的做法，是添加清华源镜像的下载路径。但是肯定会有人和我一样，路径改了也不好使啊！！！）（补充一下镜像源方案吧！）
一、清华镜像源方案 该方案就是将官网的下载路径，改到清华镜像源的路径，先用activate激活自己之前创建的环境后，在命令行输入以下代码：
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ conda config --set show_channel_urls yes conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/ 然后再去pytorch官网复制下载代码，记得删掉后面的-c pytorch,因为它表示从官网进行下载，不从清华镜像源下。
二、手机方案 1、本地端安装 关掉wifi，手机开个4G热点，电脑连上即可
（建议先把wifi可以快速下载的附加包下载完，下载过慢或者无法下载的方法再用手机流量来下）手机流量少的慎用！！！！！！！！！！！！！！！！！！
2、服务器端安装 这个时候如果关掉wifi，就和服务器断开了。这时候建议先用4G下载好离线安装包，然后连上服务器把安装包拷到服务器上，将安装包采用离线安装的方式。
本方法同时适用于很多下载过慢的软件
三、离线方案 去清华镜像源本地下载
（linux版本）https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A或https://anaconda.org/pytorch/pytorch/files?version=1.3.0
（windows版）https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A
离线安装代码：conda install --offline pytorch-1.3.0-py3.6_cuda9.2.148_cudnn7.6.3_0.tar.bz2
别忘了后面的bz2安装代码也得根据自己下载的版本来修改！offline 后面那一串都是下载的文件名，我这里示意的是linux版本的，win10版的得看你自己下载好的文件名是什么离线安装时，记得用cd命令把当前目录改到下载的离线文件所在目录torchvision也要单独安装：conda install --offline torchvision-0.4.1-py36_cu92.tar.bz2 容易出错的点：
离线安装好后，还是需要重新利用conda来在线安装一次，要用它来对相关的包来进行在线匹配(也就是根据安装好的pytorch来匹配那些对应的好多库，不是说再下载一遍pytorch)。但是一定要注意了!!!在利用官网代码时conda install pytorch torchvision cudatoolkit=9.2 -c pytorch一定要删掉后面的-c pytorch，因为它代表直接从官网去下载，不会与本地安装好的匹配，还会全部重新下载。所以改成：conda install pytorch torchvision cudatoolkit=9.2它就会自动匹配之前离线安装好的东西，然后匹配相关的库的等级、版本之类的
不匹配相关库的等级的话，就会出现以下类似错误：libcudart.so.9.2: cannot open shared object file: No such file or directory 出现这个的原因是我之前，装tensorflow时的cuda对应的是10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7325d1f72f6d8a97dc4da2b61e5dd355/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-20T02:15:37+08:00" />
<meta property="article:modified_time" content="2022-11-20T02:15:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pytorch下载太慢的解决办法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>前言</h4> 
<p>（欢迎大家关注我的<strong>公众号</strong>“<strong>机器学习面试基地</strong>”，之后将在公众号上持续记录本人从非科班转到算法路上的学习心得、笔经面经、心得体会。未来的重点也会主要放在机器学习面试上！）<br> —————————————————————————————————————</p> 
<h2><a id="_3"></a>正文</h2> 
<p>（点进这里，就默认了你已经安装好了anaconda,并且知道去pytorch官网找安装代码了，然后遇到了安装太慢、进度不变、多次中断的情况，<strong>这时候通常的做法，是添加清华源镜像的下载路径</strong>。但是肯定会有人和我一样，<strong>路径改了也不好使啊！！！</strong>）（补充一下镜像源方案吧！）</p> 
<h2><a id="_5"></a>一、清华镜像源方案</h2> 
<p>该方案就是将官网的下载路径，改到清华镜像源的路径，先用activate激活自己之前创建的环境后，在命令行输入以下代码：</p> 
<pre><code class="prism language-bash">conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/

conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/

conda config <span class="token parameter variable">--set</span> show_channel_urls <span class="token function">yes</span>

conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
</code></pre> 
<p>然后再去pytorch官网复制下载代码，<strong>记得删掉后面的-c pytorch,因为它表示从官网进行下载，不从清华镜像源下。</strong></p> 
<h2><a id="_17"></a>二、手机方案</h2> 
<h3><a id="1_18"></a>1、本地端安装</h3> 
<p>关掉wifi，<strong>手机开个4G热点，电脑连上即可</strong><br> （建议先把wifi可以快速下载的附加包下载完，下载过慢或者无法下载的方法再用手机流量来下）手机流量少的慎用！！！！！！！！！！！！！！！！！！</p> 
<h3><a id="2_21"></a>2、服务器端安装</h3> 
<p>这个时候如果关掉wifi，就和服务器断开了。这时候建议先用4G下载好离线安装包，然后连上服务器把安装包拷到服务器上，将安装包采用离线安装的方式。<br> 本方法同时适用于很多下载过慢的软件</p> 
<h2><a id="_25"></a>三、离线方案</h2> 
<p>去清华镜像源本地下载<br> （linux版本）<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A" rel="nofollow">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/linux-64/?C=M&amp;O=A</a>或<a href="https://anaconda.org/pytorch/pytorch/files?version=1.3.0" rel="nofollow">https://anaconda.org/pytorch/pytorch/files?version=1.3.0</a><br> （windows版）<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A" rel="nofollow">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/?C=M&amp;O=A</a><br> <strong>离线安装代码：</strong><code>conda install --offline pytorch-1.3.0-py3.6_cuda9.2.148_cudnn7.6.3_0.tar.bz2</code></p> 
<ul><li>别忘了后面的bz2</li><li><strong>安装代码也得根据自己下载的版本来修改</strong>！offline 后面那一串都是下载的文件名，我这里示意的是linux版本的，win10版的得看你自己下载好的文件名是什么</li><li>离线安装时，记得用cd命令把当前目录改到下载的离线文件所在目录</li><li>torchvision也要单独安装：<code>conda install --offline torchvision-0.4.1-py36_cu92.tar.bz2</code></li></ul> 
<p><strong>容易出错的点</strong>：</p> 
<ul><li>离线安装好后，<strong>还是需要重新利用conda来在线安装一次</strong>，要用它来对相关的包来进行在线匹配(也就是根据安装好的pytorch来匹配那些对应的好多库，不是说再下载一遍pytorch)。但是一定要注意了!!!在利用官网代码时<code>conda install pytorch torchvision cudatoolkit=9.2 -c pytorch</code>一定要<strong>删掉</strong>后面的<code>-c pytorch</code>，因为它代表直接从官网去下载，不会与本地安装好的匹配，还会全部重新下载。所以改成：<code>conda install pytorch torchvision cudatoolkit=9.2</code>它就会自动匹配之前离线安装好的东西，然后匹配相关的库的等级、版本之类的<br> 不匹配相关库的等级的话，就会出现以下类似错误：<code>libcudart.so.9.2: cannot open shared object file: No such file or directory</code></li></ul> 
<p><img src="https://images2.imgbox.com/9d/22/rbfqVlat_o.png" alt="在这里插入图片描述"><br> 出现这个的原因是我之前，装tensorflow时的cuda对应的是10.0，但这里需要9.2，没有降级，所以需要官网的安装代码重新匹配，也不用担心tensorflow，conda会匹配好这些的。</p> 
<p><strong>补充：</strong></p> 
<ol><li>如果<strong>cudatoolkit,mkl</strong>之类的也下载很慢，也可以用上面的方法。首先观察conda自动匹配推荐的文件名，然后去清华镜像源网站下载，然后离线安装，和上面一样。注意网站的文件夹：<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/" rel="nofollow">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</a><br> （里面的文件很多，按字母顺序找也很快的，注意如果文件名有十分类似的不知道下载哪个，那么就看看conda命令匹配出来的那些文件的大小，<em>从大小上进行匹配验证</em>，就更万无一失了；好像文件名最后以conda结尾的文件，离线安装时不需要–offline也行）</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b2b01bf04ca14feeca181969faedf9f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JVM 内存溢出</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/12e0e80edf3a3a35ba8e7fec26842985/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C语言】常用占位符的总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>