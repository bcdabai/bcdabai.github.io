<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hyper-V安装Centos &#43; 配置Centos repo &#43; 解决wifi连接和固定ip访问Cetos问题 &#43; 其它零碎问题 &#43; 远程访问（转载&#43;经过修改版本 &#43; 问题补充版本 &#43; 补充部分） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hyper-V安装Centos &#43; 配置Centos repo &#43; 解决wifi连接和固定ip访问Cetos问题 &#43; 其它零碎问题 &#43; 远程访问（转载&#43;经过修改版本 &#43; 问题补充版本 &#43; 补充部分）" />
<meta property="og:description" content="最近一两年，笔者使用公司提供的笔记本，由于安全限制，没法安装一些虚拟机软件，导致自己在学习过程总是感觉很麻烦，所以一直想尝试一种不用付费虚拟机如软件，使用window自带的服务Hyper-V来实现。在1，2年前自己也尝试过用Hyper-V，由于在连接wi-fi并且同时能够以固定ip访问Hyper-V中的服务器问题中被卡住，所以一直没用这种方案。最近自己重新尝试用这种方案，最后最终终于解决。现在做以下总结，其中以下内容中一些是网友的编写内容。
开启Hyper-V服务 右键单击 Windows 按钮并选择“应用和功能”。
选择相关设置下右侧的“程序和功能”。
选择“打开或关闭 Windows 功能”。
选择“Hyper-V”，然后单击“确定”。
安装完成后，系统会提示你重新启动计算机。
此部分不一一叙述了，若是有不清楚的地方，可以自行网上查询。
以下是Hyper-V下安装Centos的示例：
以下转自：https://blog.csdn.net/qq_31362933/article/details/132280598?spm=1001.2014.3001.5502
第一步：下载镜像文件 我们到centos官网下载地址去下载，本文采用centos 7.9版本为例，下载源采用阿里云，需要下载其他版本的可以通过centos下载的网址自行下载。
centos-7.9.2009-isos-x86_64安装包下载_开源镜像站-阿里云
第二步：启用Hyper-V 首先我们先配置虚拟机的网络环境，如下图，点击虚拟交换机管理器。
然后我们创建虚拟网络交换机 （此步可以暂时不配置，直接使用下面的Default Switch(以达到动态获取ip&#43;使用wi-fi), 后面配置外网&#43;一直固定ip访问的时候重新配置网络）
出现如下页面，点击确定，这样我们的虚拟网络交换机就完成了。
接下来我们就要安装centos了,在首页点击操作栏新建右边的小三角形
弹出的选项中选择虚拟机，出现以下弹框，直接点击下一页，
创建你的虚拟机名字，你可以设置如centos7.9，点击下一页​​​​​​​
指定代数
分配内存，可以根据你的实际需要分配内存
配置网络，选择我们最开始创建的交换机虚拟网络
连接虚拟网盘，可以指定安装的位置和硬盘大小，按需分配。
安装选项，点击从可启动的CD/DVD-ROM安装操作系统，并选择我们第一步下载的ISO映像文件
点击完成
第三步：安装CentOS 返回Hyper-v首页，选择我们刚刚创建的CentOS7,点击启动
键盘上下键选择 Install CentOS 7,敲回车
选择安装语言
安装信息摘要，选择安装位置
接下来我们点击网络和主机名，配置我们的网络
用户配置，创建我们root的密码
注意：此部分有个重启，发现在Hyper-V重启的时候，还是会进入安装界面，类似如下：
解决思路，光驱的启动项在首位造成。检查虚拟机启动项
以下转自：https://blog.csdn.net/a2262726/article/details/109185657
解决：关闭打开的centos7虚拟机，进入Hyper-V centos8的设置界面CD/DVD选择“无”→“确认”即可。类似如下界面：
检查：重新打开centos虚拟机，类似如下：
启动系统
登录linux
好了，我们的系统安装好了。
centos系统的基本配置请看下一章节
解决配置成固定ip之后，没法连接wi-fi的问题或者说不能同时使用固定ip的问题 参考另外一篇博文：
【Hyper-v 管理器虚拟机配置内网外网固定ip】
解决刚安装完之后，没法wget，没法安装vim等问题 没法安装是因为Centos默认的repo是别的不可用的地址，解决办法是，给它替换成阿里的repo (如果wget不了，直接到：/etc/yum.repos.d/epel.repo.backup
mv /etc/yum.repos.d中，然后去下载，然后通过手动编辑的方式配置文件内容)
# 1.下载安装wget yum install -y wget # 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7afa34d6704071ad7135c2f6933e7c4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-27T00:44:35+08:00" />
<meta property="article:modified_time" content="2023-10-27T00:44:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hyper-V安装Centos &#43; 配置Centos repo &#43; 解决wifi连接和固定ip访问Cetos问题 &#43; 其它零碎问题 &#43; 远程访问（转载&#43;经过修改版本 &#43; 问题补充版本 &#43; 补充部分）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>最近一两年，笔者使用公司提供的笔记本，由于安全限制，没法安装一些虚拟机软件，导致自己在学习过程总是感觉很麻烦，所以一直想尝试一种不用付费虚拟机如软件，使用window自带的服务Hyper-V来实现。在1，2年前自己也尝试过用Hyper-V，由于在连接wi-fi并且同时能够以固定ip访问Hyper-V中的服务器问题中被卡住，所以一直没用这种方案。最近自己重新尝试用这种方案，最后最终终于解决。现在做以下总结，其中以下内容中一些是网友的编写内容。</p> 
<h2><a id="HyperV_2"></a>开启Hyper-V服务</h2> 
<p>右键单击 Windows 按钮并选择“应用和功能”。<br> 选择相关设置下右侧的“程序和功能”。<br> 选择“打开或关闭 Windows 功能”。<br> 选择“Hyper-V”，然后单击“确定”。<br> <img src="https://images2.imgbox.com/29/95/JWLiceKs_o.png" alt="在这里插入图片描述"><br> 安装完成后，系统会提示你重新启动计算机。</p> 
<p>此部分不一一叙述了，若是有不清楚的地方，可以自行网上查询。</p> 
<p><strong>以下是Hyper-V下安装Centos的示例：</strong><br> 以下转自：https://blog.csdn.net/qq_31362933/article/details/132280598?spm=1001.2014.3001.5502</p> 
<h2><a id="_16"></a>第一步：下载镜像文件</h2> 
<p>我们到centos官网下载地址去下载，本文采用centos 7.9版本为例，下载源采用阿里云，需要下载其他版本的可以通过centos下载的网址自行下载。</p> 
<p><a href="http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/" rel="nofollow">centos-7.9.2009-isos-x86_64安装包下载_开源镜像站-阿里云</a><br> <img src="https://images2.imgbox.com/4c/98/rPX2NqYt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="HyperV_21"></a>第二步：启用Hyper-V</h2> 
<p>首先我们先配置虚拟机的网络环境，如下图，点击虚拟交换机管理器。<br> <img src="https://images2.imgbox.com/fc/9a/eFukeZ2G_o.png" alt="在这里插入图片描述"></p> 
<p><strong>然后我们创建虚拟网络交换机 （此步可以暂时不配置，直接使用下面的Default Switch(以达到动态获取ip+使用wi-fi), 后面配置外网+一直固定ip访问的时候重新配置网络）</strong><br> <img src="https://images2.imgbox.com/ed/9c/iWT3qzHj_o.png" alt="在这里插入图片描述"><br> 出现如下页面，点击确定，这样我们的虚拟网络交换机就完成了。<br> <img src="https://images2.imgbox.com/b3/bc/Xj6Qz1oj_o.png" alt="在这里插入图片描述"><br> 接下来我们就要安装centos了,在首页点击操作栏新建右边的小三角形<br> <img src="https://images2.imgbox.com/f0/64/0gE2pDvq_o.png" alt="在这里插入图片描述"><br> 弹出的选项中选择虚拟机，出现以下弹框，直接点击下一页，<br> <img src="https://images2.imgbox.com/12/a9/xwAHcIG7_o.png" alt="在这里插入图片描述"><br> 创建你的虚拟机名字，你可以设置如centos7.9，点击下一页​​​​​​​<br> <img src="https://images2.imgbox.com/65/92/dvHAcgTK_o.png" alt="在这里插入图片描述"><br> 指定代数<br> <img src="https://images2.imgbox.com/8c/a5/6Hmc8Zmp_o.png" alt="在这里插入图片描述"><br> 分配内存，可以根据你的实际需要分配内存<br> <img src="https://images2.imgbox.com/0b/58/MP28spD3_o.png" alt="在这里插入图片描述"><br> 配置网络，选择我们最开始创建的交换机虚拟网络<br> <img src="https://images2.imgbox.com/43/7b/puokisQA_o.png" alt="在这里插入图片描述"><br> 连接虚拟网盘，可以指定安装的位置和硬盘大小，按需分配。<br> <img src="https://images2.imgbox.com/b7/ff/0hpRHjFH_o.png" alt="在这里插入图片描述"><br> 安装选项，点击从可启动的CD/DVD-ROM安装操作系统，并选择我们第一步下载的ISO映像文件<br> <img src="https://images2.imgbox.com/a5/b9/dSnHL8bh_o.png" alt="在这里插入图片描述"><br> 点击完成<br> <img src="https://images2.imgbox.com/9f/45/einyWp7y_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="CentOS_47"></a>第三步：安装CentOS</h2> 
<p>返回Hyper-v首页，选择我们刚刚创建的CentOS7,点击启动<br> <img src="https://images2.imgbox.com/18/c8/uHVHHYsr_o.png" alt="在这里插入图片描述"><br> 键盘上下键选择 Install CentOS 7,敲回车<br> <img src="https://images2.imgbox.com/32/aa/vPBcnLYI_o.png" alt="在这里插入图片描述"><br> 选择安装语言<br> <img src="https://images2.imgbox.com/ed/9d/nyQgCScE_o.png" alt="在这里插入图片描述"><br> 安装信息摘要，选择安装位置<br> <img src="https://images2.imgbox.com/93/92/M2tNu3eQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/c8/0GntJoFv_o.png" alt="在这里插入图片描述"><br> 接下来我们点击网络和主机名，配置我们的网络<br> <img src="https://images2.imgbox.com/30/94/tmVVNcSf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/08/0f/COgNbw5G_o.png" alt="在这里插入图片描述"><br> 用户配置，创建我们root的密码<br> <img src="https://images2.imgbox.com/bd/76/HBCRzKFW_o.png" alt="在这里插入图片描述"><br> <strong>注意：此部分有个重启，发现在Hyper-V重启的时候，还是会进入安装界面，类似如下：</strong><br> <img src="https://images2.imgbox.com/f1/2a/BTuZzPJm_o.png" alt="在这里插入图片描述"><br> <strong>解决思路，光驱的启动项在首位造成。检查虚拟机启动项</strong><br> 以下转自：https://blog.csdn.net/a2262726/article/details/109185657</p> 
<p>解决：关闭打开的centos7虚拟机，进入Hyper-V centos8的设置界面CD/DVD选择“无”→“确认”即可。类似如下界面：<br> <img src="https://images2.imgbox.com/31/da/TMoL36Gv_o.png" alt="在这里插入图片描述"><br> 检查：重新打开centos虚拟机，类似如下：<br> <img src="https://images2.imgbox.com/98/74/6SFY3wkN_o.png" alt="在这里插入图片描述"><br> 启动系统<br> <img src="https://images2.imgbox.com/35/e2/noRW4gVP_o.png" alt="在这里插入图片描述"><br> 登录linux<br> <img src="https://images2.imgbox.com/de/aa/eeXoem4c_o.png" alt="在这里插入图片描述"><br> 好了，我们的系统安装好了。</p> 
<p>centos系统的基本配置请看下一章节</p> 
<h2><a id="ipwifiip_79"></a>解决配置成固定ip之后，没法连接wi-fi的问题或者说不能同时使用固定ip的问题</h2> 
<p>参考另外一篇博文：<br> <a href="https://blog.csdn.net/tototuzuoquan/article/details/134066925?spm=1001.2014.3001.5501">【Hyper-v 管理器虚拟机配置内网外网固定ip】</a></p> 
<h2><a id="wgetvim_83"></a>解决刚安装完之后，没法wget，没法安装vim等问题</h2> 
<p>没法安装是因为Centos默认的repo是别的不可用的地址，解决办法是，给它替换成阿里的repo (如果wget不了，直接到：/etc/yum.repos.d/epel.repo.backup<br> mv /etc/yum.repos.d中，然后去下载，然后通过手动编辑的方式配置文件内容)</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 1.下载安装wget</span>
yum install <span class="token operator">-</span>y wget

<span class="token comment"># 2.备份默认的yum</span>
<span class="token function">mv</span> <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token punctuation">.</span>backup

<span class="token comment"># 3.设置新的yum目录</span>
mkdir <span class="token operator">-</span>p <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d

<span class="token comment"># 4.下载阿里yum配置到该目录中，选择对应版本</span>
wget <span class="token operator">-</span>O <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/CentOS-Base<span class="token punctuation">.</span>repo http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/repo/Centos-7<span class="token punctuation">.</span>repo

<span class="token comment"># 5.更新epel源为阿里云epel源</span>
<span class="token function">mv</span> <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/epel<span class="token punctuation">.</span>repo <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/epel<span class="token punctuation">.</span>repo<span class="token punctuation">.</span>backup
<span class="token function">mv</span> <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/epel-testing<span class="token punctuation">.</span>repo <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/epel-testing<span class="token punctuation">.</span>repo<span class="token punctuation">.</span>backup
wget <span class="token operator">-</span>O <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/epel<span class="token punctuation">.</span>repo http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/repo/epel-7<span class="token punctuation">.</span>repo

<span class="token comment"># 6.重建缓存</span>
yum clean all
yum makecache

<span class="token comment"># 7.看一下yum仓库有多少包</span>
yum repolist
</code></pre> 
<p>执行完之后，再执行如下命令：</p> 
<pre><code class="prism language-powershell">yum install <span class="token operator">-</span>y wget
yum <span class="token operator">-</span>y install vim
yum update <span class="token operator">-</span>y <span class="token operator">--</span><span class="token function">skip-broken</span> <span class="token operator">--</span>nobest

</code></pre> 
<p><strong>中间可能会出现类似：</strong></p> 
<pre><code class="prism language-powershell">Error: Failed to download metadata <span class="token keyword">for</span> repo ‘appstream‘: Cannot prepare internal mirror
</code></pre> 
<p>这种问题。<br> 解决办法是执行：</p> 
<pre><code class="prism language-powershell"><span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d

sed <span class="token operator">-</span>i <span class="token string">'s/mirrorlist/#mirrorlist/g'</span> <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/CentOS-<span class="token operator">*</span>
sed <span class="token operator">-</span>i <span class="token string">'s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g'</span> <span class="token operator">/</span>etc/yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d/CentOS-<span class="token operator">*</span>
</code></pre> 
<h2><a id="git_bash_shell_134"></a>使用git bash shell远程访问服务器</h2> 
<p>类似如下：<br> <img src="https://images2.imgbox.com/bd/d5/IAgsxhSH_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/97d477b79053eca9055ba9da25d728d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Hyper-v 管理器虚拟机配置内网外网固定ip】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5bae4d41de237c696fef326d418c332/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C# 使用 Edge Web.WebView2</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>