<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SuperMap GIS基础软件中数据库使用指南 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SuperMap GIS基础软件中数据库使用指南" />
<meta property="og:description" content="作者：Carlo
一、支持的主流数据库类型 1、主流数据库介绍 数据库名称版本不支持的数据集类型需要配置 客户端支持工作空间支持集群模式SQLPlus2008/2012/2016/2018（仅 Windows 平台支持）视频、复合点、复合线、复合面、复合文本数据集是是是OraclePlus9i/10g/11g/12c/19c/20c复合点、复合线、复合面、复合文本数据集是是是OracleSpatial9i/10g/11g三维点、三维线、三维面、CAD、网络、三维网络、路由、模型、EPS点、EPS线、EPS面、EPS文本、复合点、复合线、复合面、复合文本数据集是否是MySQL5.6.16及以上版本（仅64位版本支持）复合点、复合线、复合面、复合文本数据集否是否PostgreSQL8.3及以上版本无否是是PostGIS2.2.3（9.6） 以上版本复合点、复合线、复合面、复合文本数据集否是是DMPlus7/8复合点、复合线、复合面、复合文本数据集是是是MongoDB2.x/3.x/4.x栅格、影像、镶嵌数据集否是是UDBX*无*否否Kingbase6/7/8（仅 Windows 平台支持）复合点、复合线、复合面、复合文本数据集是否是GaussDB 200200.6.5复合点、复合线、复合面、复合文本数据集否否是 2、数据库推荐 数据库名称应用场景优点缺点推荐指数PostGIS大体量空间数据管理、适应于大规模生产环境空间对象存储标签公开，支持多平台对接，空间函数支持下沉、支持高并发、读写性能高、支持集群需安装PostgreSQL引擎的空间数据扩展⭐⭐⭐⭐⭐PostgreSQL大体量空间数据管理、对写入性能要求一般超图空间对象存储标签、易于管理、并发性能一般、支持集群不支持其他平台对接⭐⭐⭐⭐OracleSpatial中等体量空间数据管理、对写入性能要求一般空间对象存储标准公开、支持多平台对接、并发性能一般、支持集群购买成本高、不支持三维数据，栅格数据，参数化对象等⭐⭐⭐⭐OraclePlus中等体量空间数据管理、对写入性能要求一般超图空间对象存储标签、易于安全管理、支持集群购买成本高、不支持其他平台对接⭐⭐⭐⭐UDBX(SQLite)中等体量空间数据管理，适用于试验演示环境易用性，轻量级，迁移便捷，读写性能高不支持并发场景、不支持集群⭐⭐⭐MySQL中等体量空间数据管理，适用于试验演示环境易用性，不需安装客户端读写性能一般，不支持集群⭐⭐⭐HighGo基于PostgreSQL、强于它千万级事务处理能力多种数据库开发接口与框架、高可用、安全、高效多版本、多应用场景兼容性好、生态丰富、安全可控、资源手册丰富、读写性能高项目应用较少⭐⭐⭐⭐⭐Kingbase基于PostgreSQL部署简单、快速数据迁移系统可用性高达99.99%多CPU并行处理、高并发、安全四级、上下兼容扩展性强、兼容性好、操作简便网络资源少、读写性能一般⭐⭐⭐⭐DMPlus完全自主研发读写分离、故障自动切换行列融合、高安全等级支持多种云基础设施、硬件平台广泛的SQL语法兼容适配多样、兼容性好、操作简便、安全可控、项目应用多网络资源少、读写性能一般⭐⭐⭐⭐ 注 ：针对二维瓦片、三维瓦片的管理推荐使用 MongoDB 数据库
二、SuperMap SDX&#43; 的系统表说明 SuperMap SDX&#43;是SuperMap GIS的空间数据库引擎，是SuperMap GIS软件的重要组成部分，它采用先进的空间数据库存储技术、索引技术和查询技术，具有&#34;空间－属性数据一体化&#34;、&#34;矢量－栅格数据一体化&#34;和&#34;空间信息－业务信息一体化&#34;的集成式空间数据库管理能力，是GIS大型工程应用的理想选择。
经过实际应用和测试表明，SuperMap SDX&#43;具有以下三项特色：
1)安装使用简便，充分结合数据库技术；
2)高性能管理和访问海量空间数据；
3)完善的数据模型，满足各种大型GIS应用的需求。
SuperMap SDX&#43; 共有20个系统表，下图为一些重要的系统表结构：
下面是对部分系统表的详细描述：
1、SmRegister—矢量数据集注册信息表 SmRegister表用来集中管理矢量数据集的信息，每新建一个矢量数据集，会在此表中新增加一条记录（带子数据集的矢量数据集，如Network或Tin类型的数据集，会在SmRegister表中添加两条记录），同样删除数据集时会将相应的记录从该表中移除。
字段名称字段类型描述SmDatasetIDINTEGER数据集的唯一编号SmDatasetNameCHARACTER VARYING(64)数据集的名称（别名）SmTableNameCHARACTER VARYING(64)数据集的表名SmIndexTableNameVARCHAR(64)索引表名SmSubTableNameVARCHAR(64)子数据集的表名SmIsSubCHAR(1)标明数据集是否为子数据集SmDatasetTypeINTEGER数据集的类型SmRecordCountINTEGER数据集中记录的数目SmIndexLevelSHORT数据集空间索引的LevelSmLeftDOUBLE数据集的四至SmTopDOUBLE数据集的四至SmRightDOUBLE数据集的四至SmBottomDOUBLE数据集的四至SmIndexTypeDOUBLE数据集空间索引的类型SmIndexLeftDOUBLE索引范围的四至SmIndexTopDOUBLE索引范围的四至SmIndexRightDOUBLE索引范围的四至SmIndexBottomDOUBLE索引范围的四至SmMinZDOUBLE数据集的最小高程值SmMaxZDOUBLE数据集的最大高程值SmLTUserIDINTEGER用于长事务环境，标识长事务用户特定版本SmDtVersionINTEGER标识数据集被修改的版本SmOptionINTEGER数据集的选项信息，如是否压缩存储等SmStateINTEGER并发编辑锁的状态SmEncTypeINTEGER数据集编码类型SmToleranceFuzzyDOUBLE拓扑容限信息SmToleranceDangleDOUBLE拓扑容限信息SmToleranceNodeSnapDOUBLE拓扑容限信息SmToleranceSmallPolygonDOUBLE拓扑容限信息SmToleranceGrainDOUBLE拓扑容限信息SmMaxGeometrySizeINTEGER数据集中最大几何对象的字节数SmOnceFetchCountINTEGER优化参数：一次从服务器中取回的记录数SmOptimizeCountINTEGER优化参数：用于全幅显示优化的最大记录数SmOptimizeRatioDOUBLE优化参数：用于全幅显示优化的面积比率SmCreateTimeDATETIME数据集创建时间SmLastUpdateTimeDATETIME数据集最后被更新的时间SmDynamicIndexINTEGER数据集是否已建立动态索引SmCreatorCHARACTER VARYING(32)数据集创建者（用户）SmProjectInfoBYTEA数据集投影信息SmParentIDINTERGER当前数据集父数据集的IDSmLockedUserIDINTERGER被锁定用户的IDSmDescriptionVARCHAR(256)数据集描述信息SmExtInfoVARCHAR(2048)数据集附加信息SmThumbLONGRAW数据集快照SmTotalGeometrySizeINTERGER数据集中几何对象的字节数SmTinToleranceDOUBLETin数据集里，金子塔使用 2、SmBandRegister—波段信息注册表 栅格数据集的波段信息管理表，新建一个栅格数据集，会根据波段数添加对应数目的记录，删除数据集的时候会删掉相应的记录。
字段名称字段类型描述SmBandIDSERIAL波段IDSmDatasetIDINTEGER所属数据集IDSmBandIndexINTEGER波段索引SmBandNameCHARACTER VARYING(64)波段名称SmBandFieldNameCHARACTER VARYING(64)波段所在字段名称SmBandAvailINTEGER是否可用(保留字段)SmOptionINTEGER选项信息，如是否压缩存储等SmScalarINTEGER当前波段保留字，用于新添加的像素格式SmEncTypeINTEGER编码类型SmPixelFormatINTEGER像素格式（如单色、16色、256色等）SmMaxBlockSizeINTEGER数据集中最大的Block的大小（字节数）SmMinZDOUBLE极小值SmMaxZDOUBLE极大值SmPyramidCHARACTER VARYING(64)影像金字塔底图数据集的名称SmPyramidLevelINTEGER影像金字塔的层数SmCreatorCHARACTER VARYING(64)创建者（用户）SmCreateTimeDATE创建时间SmDescriptionCHARACTER VARYING(256)描述信息SmNovalueDOUBLE无值SmPaletteBYTEA调色板 3、SmImgRegister—栅格数据集注册信息表 SmImgRegister表用来集中管理栅格数据集的信息，每新建一个栅格数据集，会在此表中新加一条记录，同样删除数据集时会将相应的记录从该表中移除。
字段名称字段类型描述SmDatasetIDINTEGER数据集的唯一编号SmDatasetNameCHARACTER VARYING(64)数据集名称（别名）SmTableNameCHARACTER VARYING(64)数据集表名SmDatasetTypeINTEGER数据集的类型SmEncTypeINTEGER数据集编码类型SmOptionINTEGER数据集的选项信息，如是否压缩存储等SmPixelFormatINTEGER像素格式（如单色、16色、256色等）SmWidthINTEGER图像宽度SmHeightINTEGER图像高度SmEBlockSizeINTEGER块的大小（像素）SmMaxBlockSizeINTEGER数据集中最大的Block的大小（字节数）SmMinZDOUBLE数据集最小高程值SmMaxZDOUBLE数据集最大高程值SmPyramidCHARACTER VARYING(64)影像金字塔底图数据集的名称SmPyramidLevelINTEGER影像金字塔的层数SmBlockSizesINTEGER块的大小（字节数）SmPaletteBYTEA调色板SmGeoLeftDOUBLE地理坐标四至SmGeoTopDOUBLE地理坐标四至SmGeoRightDOUBLE地理坐标四至SmGeoBottomDOUBLE地理坐标四至SmClipRegionBYTEA数据集的显示掩膜多边形SmCreateTimeDATETIME数据集创建时间SmLastUpdateTimeDATETIME数据集最后一次更新时间SmCreatorCHARACTER VARYING(32)数据集创建者（用户）SmDescriptionCHARACTER VARYING(256)数据集描述信息SmNoValueDOUBLE无值栅格SmProjectInfoBYTEA数据集投影信息SmColorSpaceINTEGER当前影像的默认色彩空间SmExtInfoVARCHAR(2048)数据集附加信息SmStatisticsInfosys.xmltype栅格数据集统计信息 4、SmDataSouceInfo—数据源相关信息表 SmDataSourceInfo表用来存储和数据源相关的信息。
字段名称字段类型描述SmFlagINTEGER数据源标志信息（保留待用）SmVersionINTEGER数据源版本号SmMinorVersionINTEGER数据源小版本号SmCoordSysINTEGER坐标系编码SmCoordUnitINTEGER坐标单位SmDistanceUnitINTEGER距离单位SmDsDescriptionVARCHAR(255)对数据源的描述SmProjectInfoLONGBINARY投影信息SmVersionDateINTEGER版本日期SmLastUpDateTimeDATE最后修改时间 5、SmDynamicIndex—动态索引信息表 SmDynamicIndex存储已建立动态索引的数据集信息。
字段名称字段类型描述SmDatasetIDINTEGER数据集IDSmIndexTableNameCHARACTER VARYING(64)索引表名称SmCenterPntXDOUBLE索引中心点X坐标SmCeneterPntYDOUBLE索引中心点Y坐标SmGridRatioDOUBLE网格比率SmGrid0DOUBLE第一层网格边长SmGrid1DOUBLE第二层网格边长SmGrid2DOUBLE第三层网格边长 6、SmFieldInfo—字段信息表 SmFieldInfo存储事件表数据集信息。
字段名称字段类型描述SmIDINTEGER字段标识IDSmDatasetIDINTEGER字段所在数据集IDSmFieldNameCHARACTER VARYING(64)字段名SmFieldCaptionCHARACTER VARYING(64)字段别名SmFieldTypeINTEGER字段类型SmFieldFormatCHARACTER VARYING(64)字段数值格式SmFieldSignINTEGER存储拓扑关系信息的字段SmFieldDomainCHARACTER VARYING(1024)字段域SmFieldUpdatableINTEGER字段是否可更新SmFieldSizeINTEGER字段长度 7、SmWorkspace—工作空间表 SmWorkspace存储工作空间信息。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a4526b8028a3f39df7d71d92f41cdb70/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-04T10:29:12+08:00" />
<meta property="article:modified_time" content="2023-07-04T10:29:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SuperMap GIS基础软件中数据库使用指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>作者：Carlo</p> 
</blockquote> 
<h2><a id="_2"></a>一、支持的主流数据库类型</h2> 
<h3><a id="1_3"></a>1、主流数据库介绍</h3> 
<table><thead><tr><th>数据库名称</th><th>版本</th><th>不支持的数据集类型</th><th>需要配置 客户端</th><th>支持工作空间</th><th>支持集群模式</th></tr></thead><tbody><tr><td><strong>SQLPlus</strong></td><td>2008/2012/2016/2018（仅 Windows 平台支持）</td><td>视频、复合点、复合线、复合面、复合文本数据集</td><td>是</td><td>是</td><td>是</td></tr><tr><td><strong>OraclePlus</strong></td><td>9i/10g/11g/12c/19c/20c</td><td>复合点、复合线、复合面、复合文本数据集</td><td>是</td><td>是</td><td>是</td></tr><tr><td><strong>OracleSpatial</strong></td><td>9i/10g/11g</td><td>三维点、三维线、三维面、CAD、网络、三维网络、路由、模型、EPS点、EPS线、EPS面、EPS文本、复合点、复合线、复合面、复合文本数据集</td><td>是</td><td>否</td><td>是</td></tr><tr><td><strong>MySQL</strong></td><td>5.6.16及以上版本（仅64位版本支持）</td><td>复合点、复合线、复合面、复合文本数据集</td><td>否</td><td>是</td><td>否</td></tr><tr><td><strong>PostgreSQL</strong></td><td>8.3及以上版本</td><td>无</td><td>否</td><td>是</td><td>是</td></tr><tr><td><strong>PostGIS</strong></td><td>2.2.3（9.6） 以上版本</td><td>复合点、复合线、复合面、复合文本数据集</td><td>否</td><td>是</td><td>是</td></tr><tr><td><strong>DMPlus</strong></td><td>7/8</td><td>复合点、复合线、复合面、复合文本数据集</td><td>是</td><td>是</td><td>是</td></tr><tr><td><strong>MongoDB</strong></td><td>2.x/3.x/4.x</td><td>栅格、影像、镶嵌数据集</td><td>否</td><td>是</td><td>是</td></tr><tr><td><strong>UDBX</strong></td><td>*</td><td>无</td><td>*</td><td>否</td><td>否</td></tr><tr><td><strong>Kingbase</strong></td><td>6/7/8（仅 Windows 平台支持）</td><td>复合点、复合线、复合面、复合文本数据集</td><td>是</td><td>否</td><td>是</td></tr><tr><td><strong>GaussDB 200</strong></td><td>200.6.5</td><td>复合点、复合线、复合面、复合文本数据集</td><td>否</td><td>否</td><td>是</td></tr></tbody></table> 
<h3><a id="2_20"></a>2、数据库推荐</h3> 
<table><thead><tr><th>数据库名称</th><th>应用场景</th><th>优点</th><th>缺点</th><th>推荐指数</th></tr></thead><tbody><tr><td><strong>PostGIS</strong></td><td>大体量空间数据管理、适应于大规模生产环境</td><td>空间对象存储标签公开，支持多平台对接，空间函数支持下沉、支持高并发、读写性能高、支持集群</td><td>需安装PostgreSQL引擎的空间数据扩展</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><strong>PostgreSQL</strong></td><td>大体量空间数据管理、对写入性能要求一般</td><td>超图空间对象存储标签、易于管理、并发性能一般、支持集群</td><td>不支持其他平台对接</td><td>⭐⭐⭐⭐</td></tr><tr><td><strong>OracleSpatial</strong></td><td>中等体量空间数据管理、对写入性能要求一般</td><td>空间对象存储标准公开、支持多平台对接、并发性能一般、支持集群</td><td>购买成本高、不支持三维数据，栅格数据，参数化对象等</td><td>⭐⭐⭐⭐</td></tr><tr><td><strong>OraclePlus</strong></td><td>中等体量空间数据管理、对写入性能要求一般</td><td>超图空间对象存储标签、易于安全管理、支持集群</td><td>购买成本高、不支持其他平台对接</td><td>⭐⭐⭐⭐</td></tr><tr><td><strong>UDBX(SQLite)</strong></td><td>中等体量空间数据管理，适用于试验演示环境</td><td>易用性，轻量级，迁移便捷，读写性能高</td><td>不支持并发场景、不支持集群</td><td>⭐⭐⭐</td></tr><tr><td><strong>MySQL</strong></td><td>中等体量空间数据管理，适用于试验演示环境</td><td>易用性，不需安装客户端</td><td>读写性能一般，不支持集群</td><td>⭐⭐⭐</td></tr><tr><td><strong>HighGo</strong></td><td>基于PostgreSQL、强于它千万级事务处理能力多种数据库开发接口与框架、高可用、安全、高效多版本、多应用场景</td><td>兼容性好、生态丰富、安全可控、资源手册丰富、读写性能高</td><td>项目应用较少</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><strong>Kingbase</strong></td><td>基于PostgreSQL部署简单、快速数据迁移系统可用性高达99.99%多CPU并行处理、高并发、安全四级、上下兼容</td><td>扩展性强、兼容性好、操作简便</td><td>网络资源少、读写性能一般</td><td>⭐⭐⭐⭐</td></tr><tr><td><strong>DMPlus</strong></td><td>完全自主研发读写分离、故障自动切换行列融合、高安全等级支持多种云基础设施、硬件平台广泛的SQL语法兼容</td><td>适配多样、兼容性好、操作简便、安全可控、项目应用多</td><td>网络资源少、读写性能一般</td><td>⭐⭐⭐⭐</td></tr></tbody></table> 
<p><strong>注</strong> ：针对二维瓦片、三维瓦片的管理推荐使用 <strong>MongoDB</strong> 数据库</p> 
<h2><a id="SuperMap_SDX__35"></a>二、SuperMap SDX+ 的系统表说明</h2> 
<p>SuperMap SDX+是SuperMap GIS的空间数据库引擎，是SuperMap GIS软件的重要组成部分，它采用先进的空间数据库存储技术、索引技术和查询技术，具有"空间－属性数据一体化"、"矢量－栅格数据一体化"和"空间信息－业务信息一体化"的集成式空间数据库管理能力，是GIS大型工程应用的理想选择。</p> 
<p>经过实际应用和测试表明，SuperMap SDX+具有以下三项特色：</p> 
<p>1)安装使用简便，充分结合数据库技术；</p> 
<p>2)高性能管理和访问海量空间数据；</p> 
<p>3)完善的数据模型，满足各种大型GIS应用的需求。</p> 
<p>SuperMap SDX+ 共有20个系统表，下图为一些重要的系统表结构：<br> <img src="https://images2.imgbox.com/14/1d/Qko57Cav_o.png" alt="在这里插入图片描述"></p> 
<p>下面是对部分系统表的详细描述：</p> 
<h3><a id="1SmRegister_53"></a>1、SmRegister—矢量数据集注册信息表</h3> 
<p>SmRegister表用来集中管理矢量数据集的信息，每新建一个矢量数据集，会在此表中新增加一条记录（带子数据集的矢量数据集，如Network或Tin类型的数据集，会在SmRegister表中添加两条记录），同样删除数据集时会将相应的记录从该表中移除。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmDatasetID</strong></td><td>INTEGER</td><td>数据集的唯一编号</td></tr><tr><td><strong>SmDatasetName</strong></td><td>CHARACTER VARYING(64)</td><td>数据集的名称（别名）</td></tr><tr><td><strong>SmTableName</strong></td><td>CHARACTER VARYING(64)</td><td>数据集的表名</td></tr><tr><td><strong>SmIndexTableName</strong></td><td>VARCHAR(64)</td><td>索引表名</td></tr><tr><td><strong>SmSubTableName</strong></td><td>VARCHAR(64)</td><td>子数据集的表名</td></tr><tr><td><strong>SmIsSub</strong></td><td>CHAR(1)</td><td>标明数据集是否为子数据集</td></tr><tr><td><strong>SmDatasetType</strong></td><td>INTEGER</td><td>数据集的类型</td></tr><tr><td><strong>SmRecordCount</strong></td><td>INTEGER</td><td>数据集中记录的数目</td></tr><tr><td><strong>SmIndexLevel</strong></td><td>SHORT</td><td>数据集空间索引的Level</td></tr><tr><td><strong>SmLeft</strong></td><td>DOUBLE</td><td>数据集的四至</td></tr><tr><td><strong>SmTop</strong></td><td>DOUBLE</td><td>数据集的四至</td></tr><tr><td><strong>SmRight</strong></td><td>DOUBLE</td><td>数据集的四至</td></tr><tr><td><strong>SmBottom</strong></td><td>DOUBLE</td><td>数据集的四至</td></tr><tr><td><strong>SmIndexType</strong></td><td>DOUBLE</td><td>数据集空间索引的类型</td></tr><tr><td><strong>SmIndexLeft</strong></td><td>DOUBLE</td><td>索引范围的四至</td></tr><tr><td><strong>SmIndexTop</strong></td><td>DOUBLE</td><td>索引范围的四至</td></tr><tr><td><strong>SmIndexRight</strong></td><td>DOUBLE</td><td>索引范围的四至</td></tr><tr><td><strong>SmIndexBottom</strong></td><td>DOUBLE</td><td>索引范围的四至</td></tr><tr><td><strong>SmMinZ</strong></td><td>DOUBLE</td><td>数据集的最小高程值</td></tr><tr><td><strong>SmMaxZ</strong></td><td>DOUBLE</td><td>数据集的最大高程值</td></tr><tr><td><strong>SmLTUserID</strong></td><td>INTEGER</td><td>用于长事务环境，标识长事务用户特定版本</td></tr><tr><td><strong>SmDtVersion</strong></td><td>INTEGER</td><td>标识数据集被修改的版本</td></tr><tr><td><strong>SmOption</strong></td><td>INTEGER</td><td>数据集的选项信息，如是否压缩存储等</td></tr><tr><td><strong>SmState</strong></td><td>INTEGER</td><td>并发编辑锁的状态</td></tr><tr><td><strong>SmEncType</strong></td><td>INTEGER</td><td>数据集编码类型</td></tr><tr><td><strong>SmToleranceFuzzy</strong></td><td>DOUBLE</td><td>拓扑容限信息</td></tr><tr><td><strong>SmToleranceDangle</strong></td><td>DOUBLE</td><td>拓扑容限信息</td></tr><tr><td><strong>SmToleranceNodeSnap</strong></td><td>DOUBLE</td><td>拓扑容限信息</td></tr><tr><td><strong>SmToleranceSmallPolygon</strong></td><td>DOUBLE</td><td>拓扑容限信息</td></tr><tr><td><strong>SmToleranceGrain</strong></td><td>DOUBLE</td><td>拓扑容限信息</td></tr><tr><td><strong>SmMaxGeometrySize</strong></td><td>INTEGER</td><td>数据集中最大几何对象的字节数</td></tr><tr><td><strong>SmOnceFetchCount</strong></td><td>INTEGER</td><td>优化参数：一次从服务器中取回的记录数</td></tr><tr><td><strong>SmOptimizeCount</strong></td><td>INTEGER</td><td>优化参数：用于全幅显示优化的最大记录数</td></tr><tr><td><strong>SmOptimizeRatio</strong></td><td>DOUBLE</td><td>优化参数：用于全幅显示优化的面积比率</td></tr><tr><td><strong>SmCreateTime</strong></td><td>DATETIME</td><td>数据集创建时间</td></tr><tr><td><strong>SmLastUpdateTime</strong></td><td>DATETIME</td><td>数据集最后被更新的时间</td></tr><tr><td><strong>SmDynamicIndex</strong></td><td>INTEGER</td><td>数据集是否已建立动态索引</td></tr><tr><td><strong>SmCreator</strong></td><td>CHARACTER VARYING(32)</td><td>数据集创建者（用户）</td></tr><tr><td><strong>SmProjectInfo</strong></td><td>BYTEA</td><td>数据集投影信息</td></tr><tr><td><strong>SmParentID</strong></td><td>INTERGER</td><td>当前数据集父数据集的ID</td></tr><tr><td><strong>SmLockedUserID</strong></td><td>INTERGER</td><td>被锁定用户的ID</td></tr><tr><td><strong>SmDescription</strong></td><td>VARCHAR(256)</td><td>数据集描述信息</td></tr><tr><td><strong>SmExtInfo</strong></td><td>VARCHAR(2048)</td><td>数据集附加信息</td></tr><tr><td><strong>SmThumb</strong></td><td>LONGRAW</td><td>数据集快照</td></tr><tr><td><strong>SmTotalGeometrySize</strong></td><td>INTERGER</td><td>数据集中几何对象的字节数</td></tr><tr><td><strong>SmTinTolerance</strong></td><td>DOUBLE</td><td>Tin数据集里，金子塔使用</td></tr></tbody></table> 
<h3><a id="2SmBandRegister_106"></a>2、SmBandRegister—波段信息注册表</h3> 
<p>栅格数据集的波段信息管理表，新建一个栅格数据集，会根据波段数添加对应数目的记录，删除数据集的时候会删掉相应的记录。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmBandID</strong></td><td>SERIAL</td><td>波段ID</td></tr><tr><td><strong>SmDatasetID</strong></td><td>INTEGER</td><td>所属数据集ID</td></tr><tr><td><strong>SmBandIndex</strong></td><td>INTEGER</td><td>波段索引</td></tr><tr><td><strong>SmBandName</strong></td><td>CHARACTER VARYING(64)</td><td>波段名称</td></tr><tr><td><strong>SmBandFieldName</strong></td><td>CHARACTER VARYING(64)</td><td>波段所在字段名称</td></tr><tr><td><strong>SmBandAvail</strong></td><td>INTEGER</td><td>是否可用(保留字段)</td></tr><tr><td><strong>SmOption</strong></td><td>INTEGER</td><td>选项信息，如是否压缩存储等</td></tr><tr><td><strong>SmScalar</strong></td><td>INTEGER</td><td>当前波段保留字，用于新添加的像素格式</td></tr><tr><td><strong>SmEncType</strong></td><td>INTEGER</td><td>编码类型</td></tr><tr><td><strong>SmPixelFormat</strong></td><td>INTEGER</td><td>像素格式（如单色、16色、256色等）</td></tr><tr><td><strong>SmMaxBlockSize</strong></td><td>INTEGER</td><td>数据集中最大的Block的大小（字节数）</td></tr><tr><td><strong>SmMinZ</strong></td><td>DOUBLE</td><td>极小值</td></tr><tr><td><strong>SmMaxZ</strong></td><td>DOUBLE</td><td>极大值</td></tr><tr><td><strong>SmPyramid</strong></td><td>CHARACTER VARYING(64)</td><td>影像金字塔底图数据集的名称</td></tr><tr><td><strong>SmPyramidLevel</strong></td><td>INTEGER</td><td>影像金字塔的层数</td></tr><tr><td><strong>SmCreator</strong></td><td>CHARACTER VARYING(64)</td><td>创建者（用户）</td></tr><tr><td><strong>SmCreateTime</strong></td><td>DATE</td><td>创建时间</td></tr><tr><td><strong>SmDescription</strong></td><td>CHARACTER VARYING(256)</td><td>描述信息</td></tr><tr><td><strong>SmNovalue</strong></td><td>DOUBLE</td><td>无值</td></tr><tr><td><strong>SmPalette</strong></td><td>BYTEA</td><td>调色板</td></tr></tbody></table> 
<h3><a id="3SmImgRegister_133"></a>3、SmImgRegister—栅格数据集注册信息表</h3> 
<p>SmImgRegister表用来集中管理栅格数据集的信息，每新建一个栅格数据集，会在此表中新加一条记录，同样删除数据集时会将相应的记录从该表中移除。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmDatasetID</strong></td><td>INTEGER</td><td>数据集的唯一编号</td></tr><tr><td><strong>SmDatasetName</strong></td><td>CHARACTER VARYING(64)</td><td>数据集名称（别名）</td></tr><tr><td><strong>SmTableName</strong></td><td>CHARACTER VARYING(64)</td><td>数据集表名</td></tr><tr><td><strong>SmDatasetType</strong></td><td>INTEGER</td><td>数据集的类型</td></tr><tr><td><strong>SmEncType</strong></td><td>INTEGER</td><td>数据集编码类型</td></tr><tr><td><strong>SmOption</strong></td><td>INTEGER</td><td>数据集的选项信息，如是否压缩存储等</td></tr><tr><td><strong>SmPixelFormat</strong></td><td>INTEGER</td><td>像素格式（如单色、16色、256色等）</td></tr><tr><td><strong>SmWidth</strong></td><td>INTEGER</td><td>图像宽度</td></tr><tr><td><strong>SmHeight</strong></td><td>INTEGER</td><td>图像高度</td></tr><tr><td><strong>SmEBlockSize</strong></td><td>INTEGER</td><td>块的大小（像素）</td></tr><tr><td><strong>SmMaxBlockSize</strong></td><td>INTEGER</td><td>数据集中最大的Block的大小（字节数）</td></tr><tr><td><strong>SmMinZ</strong></td><td>DOUBLE</td><td>数据集最小高程值</td></tr><tr><td><strong>SmMaxZ</strong></td><td>DOUBLE</td><td>数据集最大高程值</td></tr><tr><td><strong>SmPyramid</strong></td><td>CHARACTER VARYING(64)</td><td>影像金字塔底图数据集的名称</td></tr><tr><td><strong>SmPyramidLevel</strong></td><td>INTEGER</td><td>影像金字塔的层数</td></tr><tr><td><strong>SmBlockSizes</strong></td><td>INTEGER</td><td>块的大小（字节数）</td></tr><tr><td><strong>SmPalette</strong></td><td>BYTEA</td><td>调色板</td></tr><tr><td><strong>SmGeoLeft</strong></td><td>DOUBLE</td><td>地理坐标四至</td></tr><tr><td><strong>SmGeoTop</strong></td><td>DOUBLE</td><td>地理坐标四至</td></tr><tr><td><strong>SmGeoRight</strong></td><td>DOUBLE</td><td>地理坐标四至</td></tr><tr><td><strong>SmGeoBottom</strong></td><td>DOUBLE</td><td>地理坐标四至</td></tr><tr><td><strong>SmClipRegion</strong></td><td>BYTEA</td><td>数据集的显示掩膜多边形</td></tr><tr><td><strong>SmCreateTime</strong></td><td>DATETIME</td><td>数据集创建时间</td></tr><tr><td><strong>SmLastUpdateTime</strong></td><td>DATETIME</td><td>数据集最后一次更新时间</td></tr><tr><td><strong>SmCreator</strong></td><td>CHARACTER VARYING(32)</td><td>数据集创建者（用户）</td></tr><tr><td><strong>SmDescription</strong></td><td>CHARACTER VARYING(256)</td><td>数据集描述信息</td></tr><tr><td><strong>SmNoValue</strong></td><td>DOUBLE</td><td>无值栅格</td></tr><tr><td><strong>SmProjectInfo</strong></td><td>BYTEA</td><td>数据集投影信息</td></tr><tr><td><strong>SmColorSpace</strong></td><td>INTEGER</td><td>当前影像的默认色彩空间</td></tr><tr><td><strong>SmExtInfo</strong></td><td>VARCHAR(2048)</td><td>数据集附加信息</td></tr><tr><td><strong>SmStatisticsInfo</strong></td><td>sys.xmltype</td><td>栅格数据集统计信息</td></tr></tbody></table> 
<h3><a id="4SmDataSouceInfo_171"></a>4、SmDataSouceInfo—数据源相关信息表</h3> 
<p>SmDataSourceInfo表用来存储和数据源相关的信息。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmFlag</strong></td><td>INTEGER</td><td>数据源标志信息（保留待用）</td></tr><tr><td><strong>SmVersion</strong></td><td>INTEGER</td><td>数据源版本号</td></tr><tr><td><strong>SmMinorVersion</strong></td><td>INTEGER</td><td>数据源小版本号</td></tr><tr><td><strong>SmCoordSys</strong></td><td>INTEGER</td><td>坐标系编码</td></tr><tr><td><strong>SmCoordUnit</strong></td><td>INTEGER</td><td>坐标单位</td></tr><tr><td><strong>SmDistanceUnit</strong></td><td>INTEGER</td><td>距离单位</td></tr><tr><td><strong>SmDsDescription</strong></td><td>VARCHAR(255)</td><td>对数据源的描述</td></tr><tr><td><strong>SmProjectInfo</strong></td><td>LONGBINARY</td><td>投影信息</td></tr><tr><td><strong>SmVersionDate</strong></td><td>INTEGER</td><td>版本日期</td></tr><tr><td><strong>SmLastUpDateTime</strong></td><td>DATE</td><td>最后修改时间</td></tr></tbody></table> 
<h3><a id="5SmDynamicIndex_188"></a>5、SmDynamicIndex—动态索引信息表</h3> 
<p>SmDynamicIndex存储已建立动态索引的数据集信息。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmDatasetID</strong></td><td>INTEGER</td><td>数据集ID</td></tr><tr><td><strong>SmIndexTableName</strong></td><td>CHARACTER VARYING(64)</td><td>索引表名称</td></tr><tr><td><strong>SmCenterPntX</strong></td><td>DOUBLE</td><td>索引中心点X坐标</td></tr><tr><td><strong>SmCeneterPntY</strong></td><td>DOUBLE</td><td>索引中心点Y坐标</td></tr><tr><td><strong>SmGridRatio</strong></td><td>DOUBLE</td><td>网格比率</td></tr><tr><td><strong>SmGrid0</strong></td><td>DOUBLE</td><td>第一层网格边长</td></tr><tr><td><strong>SmGrid1</strong></td><td>DOUBLE</td><td>第二层网格边长</td></tr><tr><td><strong>SmGrid2</strong></td><td>DOUBLE</td><td>第三层网格边长</td></tr></tbody></table> 
<h3><a id="6SmFieldInfo_203"></a>6、SmFieldInfo—字段信息表</h3> 
<p>SmFieldInfo存储事件表数据集信息。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>字段标识ID</td></tr><tr><td><strong>SmDatasetID</strong></td><td>INTEGER</td><td>字段所在数据集ID</td></tr><tr><td><strong>SmFieldName</strong></td><td>CHARACTER VARYING(64)</td><td>字段名</td></tr><tr><td><strong>SmFieldCaption</strong></td><td>CHARACTER VARYING(64)</td><td>字段别名</td></tr><tr><td><strong>SmFieldType</strong></td><td>INTEGER</td><td>字段类型</td></tr><tr><td><strong>SmFieldFormat</strong></td><td>CHARACTER VARYING(64)</td><td>字段数值格式</td></tr><tr><td><strong>SmFieldSign</strong></td><td>INTEGER</td><td>存储拓扑关系信息的字段</td></tr><tr><td><strong>SmFieldDomain</strong></td><td>CHARACTER VARYING(1024)</td><td>字段域</td></tr><tr><td><strong>SmFieldUpdatable</strong></td><td>INTEGER</td><td>字段是否可更新</td></tr><tr><td><strong>SmFieldSize</strong></td><td>INTEGER</td><td>字段长度</td></tr></tbody></table> 
<h3><a id="7SmWorkspace_220"></a>7、SmWorkspace—工作空间表</h3> 
<p>SmWorkspace存储工作空间信息。</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>字段标识ID</td></tr><tr><td><strong>SmUser</strong></td><td>CHARACTER VARYING(64)</td><td>用户名称</td></tr><tr><td><strong>SmWorkspaceName</strong></td><td>CHARACTER VARYING(64)</td><td>工作空间名称</td></tr><tr><td><strong>SmVersion</strong></td><td>INTEGER</td><td>工作空间版本号</td></tr><tr><td><strong>SmData</strong></td><td>BLOB</td><td>数据存储大小</td></tr><tr><td><strong>SmUpdateTime</strong></td><td>DATE</td><td>数据最后一次更新时间</td></tr></tbody></table> 
<h2><a id="SuperMap_SDX__233"></a>三、SuperMap SDX+ 的数据表说明</h2> 
<p>SuperMap SDX+ 将空间数据与属性数据一体化管理，数据表中的记录与图层中的空间对象一一对应。</p> 
<p>下面分类型介绍数据表中的字段信息：</p> 
<h3><a id="1Region_239"></a>1、Region类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmKey</strong></td><td>INTEGER</td><td>空间索引值</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGranule</strong></td><td>DOUBLE</td><td>当前记录的颗粒度值</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr><tr><td><strong>SmArea</strong></td><td>DOUBLE</td><td>当前记录的多边形面积</td></tr><tr><td><strong>SmPerimeter</strong></td><td>DOUBLE</td><td>当前记录的多边形周长</td></tr></tbody></table> 
<h3><a id="2Line_256"></a>2、Line类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmKey</strong></td><td>INTEGER</td><td>空间索引值</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGranule</strong></td><td>DOUBLE</td><td>当前记录的颗粒度值</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr><tr><td><strong>SmLength</strong></td><td>DOUBLE</td><td>当前记录的线长度</td></tr><tr><td><strong>SmTopoError</strong></td><td>INTEGER</td><td>当前记录的拓扑错误信息</td></tr></tbody></table> 
<h3><a id="3Point_273"></a>3、Point类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmX</strong></td><td>DOUBLE</td><td>当前记录的点的横坐标值</td></tr><tr><td><strong>SmY</strong></td><td>DOUBLE</td><td>当前记录的点的纵坐标值</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr></tbody></table> 
<h3><a id="4Text_283"></a>4、Text类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmKey</strong></td><td>INTEGER</td><td>空间索引值</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGranule</strong></td><td>DOUBLE</td><td>当前记录的颗粒度值</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr></tbody></table> 
<h3><a id="5GridDEMImage_298"></a>5、Grid/DEM/Image类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmRow</strong></td><td>INTEGER</td><td>当前Block的行ID</td></tr><tr><td><strong>SmColumn</strong></td><td>INTEGER</td><td>当前Block的列ID</td></tr><tr><td><strong>SmSize</strong></td><td>INTEGER</td><td>当前Block的Size</td></tr><tr><td><strong>SmRaster</strong></td><td>BYTEA</td><td>当前Block的二进制数据</td></tr></tbody></table> 
<h3><a id="6Network_307"></a>6、Network类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>Network主数据集字段详细信息</strong></td><td></td><td></td></tr><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmKey</strong></td><td>INTEGER</td><td>空间索引值</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGranule</strong></td><td>DOUBLE</td><td>当前记录的颗粒度值</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr><tr><td><strong>SmEdgeID</strong></td><td>INTEGER</td><td>线标识字段</td></tr><tr><td><strong>SmFNode</strong></td><td>INTEGER</td><td>当前线的起始点ID</td></tr><tr><td><strong>SmTNode</strong></td><td>INTEGER</td><td>当前线的终止点ID</td></tr><tr><td><strong>SmResistanceA</strong></td><td>DOUBLE</td><td>正方向阻力</td></tr><tr><td><strong>SmResistanceB</strong></td><td>DOUBLE</td><td>负方向阻力</td></tr><tr><td><strong>SmLength</strong></td><td>DOUBLE</td><td>线的长度</td></tr><tr><td><strong>SmTopoError</strong></td><td>INTEGER</td><td>拓扑错误信息</td></tr><tr><td><strong>Network子数据集字段详细信息</strong></td><td></td><td></td></tr><tr><td><strong>字段名称</strong></td><td><strong>字段类型</strong></td><td><strong>描述</strong></td></tr><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>空间数据记录的ID</td></tr><tr><td><strong>SmX</strong></td><td>DOUBLE</td><td>当前记录的点的横坐标值</td></tr><tr><td><strong>SmY</strong></td><td>DOUBLE</td><td>当前记录的点的纵坐标值</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmNodeID</strong></td><td>INTEGER</td><td>节点ID</td></tr></tbody></table> 
<h3><a id="7Model_336"></a>7、Model类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>数据记录的ID</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr></tbody></table> 
<h3><a id="8Mosaic_349"></a>8、Mosaic类型数据集</h3> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>SmID</strong></td><td>INTEGER</td><td>数据记录的ID</td></tr><tr><td><strong>SmKey</strong></td><td>INTEGER</td><td>空间索引值</td></tr><tr><td><strong>SmSDRIW</strong></td><td>DOUBLE</td><td>当前记录的左边界</td></tr><tr><td><strong>SmSDRIN</strong></td><td>DOUBLE</td><td>当前记录的上边界</td></tr><tr><td><strong>SmSDRIE</strong></td><td>DOUBLE</td><td>当前记录的右边界</td></tr><tr><td><strong>SmSDRIS</strong></td><td>DOUBLE</td><td>当前记录的下边界</td></tr><tr><td><strong>SmGranule</strong></td><td>DOUBLE</td><td>当前记录的颗粒度值</td></tr><tr><td><strong>SmGeometry</strong></td><td>BYTEA</td><td>长二进制数据，存储当前记录的空间数据</td></tr><tr><td><strong>SmLibTileID</strong></td><td>INTEGER</td><td>图库索引ID</td></tr><tr><td><strong>SmUserID</strong></td><td>INTEGER</td><td>用户ID，不列为系统字段</td></tr><tr><td><strong>SmRow</strong></td><td>INTEGER</td><td>当前Block的行ID</td></tr><tr><td><strong>SmColumn</strong></td><td>INTEGER</td><td>当前Block的列ID</td></tr><tr><td><strong>SmSize</strong></td><td>INTEGER</td><td>当前Block的Size</td></tr><tr><td><strong>SmRaster</strong></td><td>BYTEA</td><td>当前Block的二进制数据</td></tr></tbody></table> 
<h2><a id="SuperMap_368"></a>四、SuperMap产品中主流数据库的使用方式</h2> 
<p>SuperMap 产品支持打开和新建多种数据源类型，分为文件型数据源、数据库型数据源、 Web 型数据源以及内存型数据源。</p> 
<p>文件型数据源将空间数据和属性数据直接存储到文件中。存储扩展名为 *.udb 或*.udbx 的文件。在小数据量情况下使用文件型数据源地图的显示更快，且数据迁移方便。</p> 
<p>Web型数据源将数据源存储在网络服务器中，OGC、GoogleMaps、超图云服务、REST 地图服务和天地图地图服务数据源属于 Web 数据源。</p> 
<p>内存型数据源数据源中的数据都保存在内存中，为临时数据源，不支持保存。一些分析的中间结果可以存储在该数据源中，有利于提高分析的效率，当得到最终数据时可从内存数据源导出为本地数据。</p> 
<p>数据库型数据源将数据源存储在数据库中，目前桌面产品提供 OraclePlus、Oracle Spatial、SQLPlus、PostgreSQL、DB2、KingBase、MySQL、BeyonDB、HighGoDB、KDB 、DM 、PostGIS和 MongoDB 十余种数据库型数据源功能。一般常用于数据量较大的数据存储，便于数据的管理和访问，且支持并发操作便于修改和数据同步。用户在于访问数据库需要本地配置相关的数据库环境和客户端。下文将根据支持经验介绍六种主流数据库的使用方式。</p> 
<h3><a id="1Oracle_380"></a>1、Oracle数据源</h3> 
<p><strong>Oracle</strong> 数据库（ <strong><strong>11g</strong></strong> 版本）下载地址：</p> 
<p><a href="https://pan.baidu.com/s/1sNEhufsRdi-ztV1gZg4b9g?pwd=1nxk" rel="nofollow">https://pan.baidu.com/s/1sNEhufsRdi-ztV1gZg4b9g?pwd=1nxk</a></p> 
<p><strong>Oracle</strong> 数据库（ <strong><strong>11g</strong></strong> 版本）服务端安装教程：</p> 
<p><a href="https://www.cnblogs.com/qfb620/p/4577255.html" rel="nofollow">https://www.cnblogs.com/qfb620/p/4577255.html</a></p> 
<p><strong>Oracle</strong> 数据库客户端连接配置：1）必须安装客户端；2）环境变量配置正确</p> 
<p><img src="https://images2.imgbox.com/d0/20/O5xULbDB_o.png" alt="在这里插入图片描述"></p> 
<p>（1）打开SQL Plus输入安装时的用户名和密码连接到数据库<br> <img src="https://images2.imgbox.com/06/fd/sK9RrnDe_o.png" alt="在这里插入图片描述"></p> 
<p>（2）创建表空间</p> 
<pre><code class="prism language-bash">create tablespace supermap datafile<span class="token string">'D:\app\Carlo\oradata\orcl\supermap.dbf'</span> size 20M autoextend on next 20M<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/56/cobeiGIu_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-e5hqjJOG-1672384583787)(RackMultipart20221230-1-gn1mgw_html_7f3b2e1a04a3380f.gif)]"></p> 
<p>（3）创建用户，并将用户赋给刚刚创建的表空间上</p> 
<pre><code class="prism language-bash">create user dbtest identified by supermap default tablespace supermap<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0f/ab/DH0Oi1lc_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Bj45kSqL-1672384583790)(RackMultipart20221230-1-gn1mgw_html_7f3b2e1a04a3380f.gif)]"></p> 
<p>（4）由于创建的新用户是没有数据库的权限，这是需要给新建的用户赋予对数据库的读写权限</p> 
<pre><code class="prism language-bash">grant connect,resource to dbtest<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4b/3b/DUpxRRdw_o.png" alt="在这里插入图片描述"></p> 
<p>（5）打开SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/99/cc/18Nwh0AL_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9zkUkAZj-1672384583793)(RackMultipart20221230-1-gn1mgw_html_3e7b0fb11f69b8ac.png)]"></p> 
<p>（6）在弹出框中选择OraclePlus，在右侧界面输入实例名（如果是远程连接数据库填写规则为ip地址:端口号/实例名）、用户名和密码，新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/ef/1d/Dr0Maauz_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-SNeuQpIg-1672384583793)(RackMultipart20221230-1-gn1mgw_html_8d0623440aea96d8.png)]"></p> 
<p><img src="https://images2.imgbox.com/94/83/cdA0nYaX_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-B7e8iAlA-1672384583793)(RackMultipart20221230-1-gn1mgw_html_2a4cd623fb5c66ca.png)]"></p> 
<h3><a id="2DM_437"></a>2、DM数据源</h3> 
<p><strong>DM</strong> 数据库（ <strong><strong>7.6</strong></strong> 版本）下载地址：<br> <a href="https://pan.baidu.com/s/1yLEum6NNhgtRdexWOSTQsw?pwd=khvq" rel="nofollow">https://pan.baidu.com/s/1yLEum6NNhgtRdexWOSTQsw?pwd=khvq</a></p> 
<p><strong>DM</strong> 数据库（ <strong><strong>7.6</strong></strong> 版本）服务端安装教程：</p> 
<p><a href="https://blog.csdn.net/weiwu13/article/details/127537589">https://blog.csdn.net/weiwu13/article/details/127537589</a></p> 
<p><strong>DM</strong> 数据库客户端连接配置：1）必须安装客户端；2）环境变量配置正确<br> <img src="https://images2.imgbox.com/84/5f/aT3OS8ul_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-R4bAoQAR-1672384583794)(RackMultipart20221230-1-gn1mgw_html_9e90bdbf89b65ceb.png)]"></p> 
<p><strong>扩展知识：</strong></p> 
<p>DM8版本的安装使用和DM7版本是一致的，但是需要注意的是，DM8不包含依赖库：libdmoci.so（Linux版本）/dmoci.dll（Windows版本）。检查是否包含依赖库方法：到【达梦安装目录】/bin/目录下查找是否有libdmoci.so/dmoci.dll这个依赖库，如果有的话就手动将其拷贝到【iDesktopX安装目录】/bin/目录下，然后再重启iDesktopX即可正常连接达梦数据库型数据源了。</p> 
<p>（1）在DM目录下的bin目录下执行cmd命令：</p> 
<p><img src="https://images2.imgbox.com/53/88/6x6XmdKu_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-EKPnPOIK-1672384583794)(RackMultipart20221230-1-gn1mgw_html_61e85054840f3280.png)]"></p> 
<p>（2）输入命令登录，账号密码为安装数据库时创建的</p> 
<pre><code class="prism language-bash">DIsql.exe SYSDBA/123456@10.10.0.102
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/ad/TjRGUII3_o.png" alt="在这里插入图片描述"></p> 
<p>（3）创建一个自动扩展的表空间，用于创建超图的达梦数据源</p> 
<pre><code class="prism language-bash">create tablespace <span class="token string">"SUPERMAPDATASOURCE"</span> datafile <span class="token string">'D:\dmdbms\data\DAMENG\SUPERMAPDATASOURCE.DBF'</span> size <span class="token number">32</span> autoextend on next <span class="token number">64</span> maxsize <span class="token number">16777215</span> CACHE <span class="token operator">=</span> NORMAL<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/58/wqchOiDn_o.png" alt="在这里插入图片描述"></p> 
<p>（4）创建一个用户，设置密码</p> 
<pre><code class="prism language-bash">create user <span class="token string">"SUPERMAP"</span> identified by <span class="token string">"supermap@123"</span> default tablespace <span class="token string">"SUPERMAPDATASOURCE"</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/8a/rQADvBwP_o.png" alt="在这里插入图片描述"></p> 
<p>（5）给创建的用户赋予相关权限</p> 
<pre><code class="prism language-bash">grant <span class="token string">"DBA"</span>,<span class="token string">"PUBLIC"</span>,<span class="token string">"RESOURCE"</span> to <span class="token string">"SUPERMAP"</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/c9/g437JoA5_o.png" alt="在这里插入图片描述"></p> 
<p>（6）打开SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/32/5c/2HVWMuNm_o.png" alt="在这里插入图片描述"></p> 
<p>（7）在弹出框中选择DMPlus，在右侧界面输入服务器名称（如果是远程连接数据库填写规则为ip地址:端口号/实例名）、用户名和密码，新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/c9/74/N1DsZB0c_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/77/c1/Xc7bc7Q4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3MySQL_506"></a>3、MySQL数据源</h3> 
<p><strong>MySQL</strong> 数据库（ <strong><strong>8.0</strong></strong> 版本）下载地址：<br> <a href="https://pan.baidu.com/s/1X_h1YvSaeZVtHDdKljPx0w?pwd=z7ip" rel="nofollow">https://pan.baidu.com/s/1X_h1YvSaeZVtHDdKljPx0w?pwd=z7ip</a></p> 
<p><strong>MySQL</strong> 数据库（ <strong><strong>8.0</strong></strong> 版本）服务端安装教程：<a href="https://blog.csdn.net/qq_54796785/article/details/125215507">https://blog.csdn.net/qq_54796785/article/details/125215507</a></p> 
<p><strong>MySQL</strong> 数据库客户端连接配置：远程服务端必须保证本机有访问权限，如果没有权限可以按照下面步骤（3）来创建用户，其中%可以换成具体的IP，%代表任何客户端都可以连接</p> 
<p>（1）打开MySQL 8.0 Command Line Client输入安装时的密码连接到数据库</p> 
<p><img src="https://images2.imgbox.com/00/76/Kvfz76DE_o.png" alt="在这里插入图片描述"></p> 
<p>（2）创建数据库supermap</p> 
<pre><code class="prism language-bash">create database supermap<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/0e/Qt1ATIrS_o.png" alt="在这里插入图片描述"></p> 
<p>（3）创建用户dbtest</p> 
<pre><code class="prism language-bash">create user <span class="token string">'dbtest'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/06/jfskCu1S_o.png" alt="在这里插入图片描述"></p> 
<p>（4）将数据库的所有权限都赋予dbtest</p> 
<pre><code class="prism language-bash">grant all privileges on *.* to <span class="token string">'dbtest'</span>@<span class="token string">'%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/a0/THJFk46f_o.png" alt="在这里插入图片描述"></p> 
<p>（5）设置密码（MySQL8.0采用了新的更安全的验证方式，需要用户按照mysql_native_password这种方式来连接）</p> 
<pre><code class="prism language-bash">alter user <span class="token string">'dbtest'</span>@<span class="token string">'%'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/a3/rI9JWTqQ_o.png" alt="在这里插入图片描述"></p> 
<p>（6）刷新权限</p> 
<pre><code class="prism language-bash">FLUSH PRIVILEGES<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f7/af/eh86TnCt_o.png" alt="在这里插入图片描述"></p> 
<p>（7）打开SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/cb/59/Luk7p0sM_o.png" alt="在这里插入图片描述"></p> 
<p>（8）在弹出框中选择MySQL，在右侧界面输入服务器地址（如果是远程连接数据库填写规则为ip地址:端口号）、数据库名称、用户名和密码，新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/d1/0c/HmpFFXHF_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b9/83/s9h9j056_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4PostgreSQL_578"></a>4、PostgreSQL数据源</h3> 
<p><strong>扩展知识：</strong></p> 
<p>PostGIS 是 PostgreSQL 关系数据库的空间操作扩展。它为 PostgreSQL 提供了存储、查询和修改空间关系的能力。</p> 
<p>PostgreSQL 是开源空间数据库，构建在其上的空间对象扩展模块PostGIS使其成为一个真正的大型空间数据库。SuperMap 新增 SDX+ for PostGIS 引擎，可以直接访问 PostgreSQL 空间数据库，充分利用空间信息服务数据库的能力，如空间对象、空间索引、空间操作函数和空间操作符等，实现高效地管理和访问空间数据。</p> 
<p>PostGIS 空间数据的管理一般包括：创建数据库、创建/删除数据源、创建/删除数据集、添加/删除记录（几何对象）、数据集中添加/删除字段、更新字段值以及查询数据等。</p> 
<p>PostGIS需要和PostgreSQL版本兼容，例如：PostgreSQL为9.6版本对应的PostGIS为2.4.2版本，创建 PostGIS 数据库型数据源时，既可指定一个已有的 PostgreSQL 数据库名称，创建数据源；也可以指定一个新的数据库名称，创建数据源时，将先创建对应的 PostgreSQL 数据库，再创建数据源。一个 PostgreSQL 数据库只能创建一个 PostGIS 数据库型数据源。</p> 
<p><strong>PostgreSQL</strong> 数据库（ <strong><strong>9.6.4</strong></strong> 版本）下载地址：<a href="https://pan.baidu.com/s/1oY45mlPa0tgeLvT4Qxn1wQ?pwd=mz5g" rel="nofollow">https://pan.baidu.com/s/1oY45mlPa0tgeLvT4Qxn1wQ?pwd=mz5g</a></p> 
<p><strong>PostgreSQL</strong> 数据库（ <strong><strong>9.6.4</strong></strong> 版本）服务端安装教程：<br> <a href="https://www.runoob.com/postgresql/windows-install-postgresql.html" rel="nofollow">https://www.runoob.com/postgresql/windows-install-postgresql.html</a></p> 
<p><strong>PostgreSQL</strong> 数据库客户端连接配置：远程服务端必须保证本机有访问权限，如果没有权限，到服务端数据存储路径下修改/data/pg_hba.conf文件添加host all all 0.0.0.0/0 trust，重启服务。</p> 
<p><img src="https://images2.imgbox.com/95/09/88Ri01GG_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b4/45/P57PV3W8_o.png" alt="在这里插入图片描述"></p> 
<p>（1）打开SQL Shell（psql）输入安装时的用户名和密码连接到数据库</p> 
<p><img src="https://images2.imgbox.com/7e/ef/HnFwmbN0_o.png" alt="在这里插入图片描述"></p> 
<p>（2）创建用户dbtest</p> 
<pre><code class="prism language-bash">CREATE <span class="token environment constant">USER</span> dbtest WITH PASSWORD <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b2/ce/5ThxQZGA_o.png" alt="在这里插入图片描述"></p> 
<p>（3）创建数据库exampledb</p> 
<pre><code class="prism language-bash">CREATE DATABASE exampledb OWNER dbtest<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/15/88/aC2IS4JB_o.png" alt="在这里插入图片描述"></p> 
<p>（4）将exampledb数据库的所有权限都赋予dbtest</p> 
<pre><code class="prism language-bash">GRANT ALL PRIVILEGES ON DATABASE exampledb TO dbtest<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0d/cb/uQ15FDan_o.png" alt="在这里插入图片描述"></p> 
<p>（5）打开SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/66/46/nTDRNfRe_o.png" alt="在这里插入图片描述"></p> 
<p>（6）在弹出框中选择PostgreSQL，在右侧界面输入服务器地址（如果是远程连接数据库填写规则为ip地址:端口号）、数据库名称、用户名和密码，新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/14/5a/u40rr0Cb_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/04/0b/t9v40o8F_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5Kingbase_648"></a>5、Kingbase数据源</h3> 
<p>人大金仓数据库管理系统(KingbaseES)是我国自主研制开发的具有自主知识产权的通用关系型数据库，也是唯一入选国家自主创新产品目录的数据库产品。目前在信创项目中使用比较多的国产数据库就是Kingbase，目前Kingbase发布的最新版本是Kingbase V8R6版本，下面介绍一下该版本依托PostGIS数据库的安装方式以及SuperMap iDesktopX如何连接Kingbase数据源。</p> 
<p><strong>KingbaseES <strong>（</strong></strong> V8R6 <strong>版本）下载地址 :</strong></p> 
<p><a href="https://pan.baidu.com/s/1ypD17Jox-o-7N2BqTBwxrg?pwd=swsg" rel="nofollow">https://pan.baidu.com/s/1ypD17Jox-o-7N2BqTBwxrg?pwd=swsg</a></p> 
<p><strong>Kingbase</strong> 数据库客户端连接配置：1）必须安装客户端；2）环境变量配置正确</p> 
<p>安装KingbaseES数据库不能使用root用户，必须得使用普通用户</p> 
<p>（1）创建普通用户kingbase，创建成功后会在home目录创建kingbase目录，后续可以将kingbase安装在该目录，可以避免在安装过程中出现权限问题（kingbae官方要求有个默认目录为 /opt/Kingbase/ES/V8，如果需要安装在此目录需要修改该目录用户组为kingbase并且设置可写权限）</p> 
<pre><code class="prism language-bash"><span class="token function">groupadd</span> kingbase

<span class="token function">useradd</span> kingbase -m -g kingbase

<span class="token function">passwd</span> kingbase
</code></pre> 
<p>（2）解压kingbase安装包</p> 
<pre><code class="prism language-bash"><span class="token function">mount</span> -t iso9660 -o loop xxx.iso /opt/kingbase/
</code></pre> 
<p>（3）安装kingbase，kingbase提供了命令行安装和图形化界面安装。此处采用图形化安装的方式。</p> 
<pre><code class="prism language-bash">进入第二步挂载的目录下执行setup.sh

<span class="token builtin class-name">cd</span> /opt/kingbase///进入挂载目录

./setup.sh //执行安装命令
</code></pre> 
<p><img src="https://images2.imgbox.com/03/b6/ft1ID5Tr_o.png" alt="在这里插入图片描述"></p> 
<p>（4）选择安装模式为完全安装：</p> 
<p><img src="https://images2.imgbox.com/12/55/Ca1fIsX3_o.png" alt="在这里插入图片描述"></p> 
<p>（5）选择授权文件，可以找kingbase技术或者销售获取三个月的试用许可</p> 
<p><img src="https://images2.imgbox.com/ff/f7/0VMlkz1T_o.png" alt="在这里插入图片描述"></p> 
<p>（6）选择安装目录：</p> 
<p><img src="https://images2.imgbox.com/a0/bc/AOWCGuC6_o.png" alt="在这里插入图片描述"></p> 
<p>（7）选择数据存储目录</p> 
<p><img src="https://images2.imgbox.com/c6/82/rlLzPiys_o.png" alt="在这里插入图片描述"></p> 
<p>（8）初始化数据库：此处的各项设置为数据库实例的基本设置，依据部署应用不同的需求就行设置。设置好端口、管理员用户名以及密码，最重要的两步是设置当前数据库是PostGIS而非Oracle，以及是否忽略大小写，此处设置为忽略大小写。</p> 
<p><img src="https://images2.imgbox.com/5d/5e/46D2XrTn_o.png" alt="在这里插入图片描述"></p> 
<p>（9）注册数据库服务为系统服务：安装好数据库后可以根据需求将服务注册为系统服务，需要切换到root用户执行该命令</p> 
<pre><code class="prism language-bash"><span class="token function">sh</span> /home/kingbase/KingbaseTest/install/script/root.sh
</code></pre> 
<p>（10）设置环境变量</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> ~/.bashrc

<span class="token comment">#添加两行变量：</span>

<span class="token builtin class-name">export</span> LD<span class="token punctuation">\</span>_LIBRARY<span class="token punctuation">\</span>_PATH<span class="token operator">=</span>/home/kingbase/KingbaseTest/Server/lib:<span class="token variable">$LD</span><span class="token punctuation">\</span>_LIBRARY<span class="token punctuation">\</span>_PATH

<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/home/kingbase/KingbaseTest/Server/bin:<span class="token environment constant">$PATH</span>

<span class="token comment">#使环境变量生效</span>

<span class="token builtin class-name">source</span> ~/.bashrc
</code></pre> 
<p>（11）启动数据库</p> 
<pre><code class="prism language-bash"><span class="token comment">#进入Server的bin目录</span>

<span class="token builtin class-name">cd</span> /home/kingbase/KingbaseTest/Server/bin

<span class="token comment">#启动数据库</span>

./kingbase -D /home/kingbase/KingbaseTest/data/
</code></pre> 
<p>（12）SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源，在弹出框中选择PostGIS，在右侧界面输入服务器地址（如果是远程连接数据库填写规则为ip地址:端口号）、数据库名称、用户名和密码，新建数据库型数据源。</p> 
<p><img src="https://images2.imgbox.com/d0/2b/cpqB0ak8_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/78/c3/6TMsGave_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6HighGo_761"></a>6、HighGo数据源</h3> 
<p><strong>HigoDB</strong> （ <strong><strong>RPM</strong></strong> 包 <strong><strong>6.0.4</strong></strong> 版本） <strong>下载地址</strong></p> 
<p><a href="https://pan.baidu.com/s/1gV0u4MAHXm2vT3BNy7Umeg?pwd=smap" rel="nofollow">https://pan.baidu.com/s/1gV0u4MAHXm2vT3BNy7Umeg?pwd=smap</a></p> 
<p><strong>对应</strong> PostGIS <strong>拓展下载地址</strong></p> 
<p><a href="https://pan.baidu.com/s/1SEjrl-ftcvR-28HF17Qvfg?pwd=smap" rel="nofollow">https://pan.baidu.com/s/1SEjrl-ftcvR-28HF17Qvfg?pwd=smap</a></p> 
<p><strong>HighGo</strong> 数据库客户端连接配置：远程服务端必须保证本机有访问权限，如果没有权限，到服务端数据存储路径下修改/data/pg_hba.conf文件添加host all all 0.0.0.0/0 md5，重启Highgo服务。</p> 
<p>（1）通过root用户执行以下命令，安装第一个下载地址提供的安装包。</p> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -ivh 1b73693f2c91fd7f38acbc7d3882cf6c.rpm
</code></pre> 
<p>（2）安装完毕后会在/opt/HighGo6.0.4-cluster/etc 目录下生成一个名为highgodb.env 的文件，内容如下所示，执行 source 命令使之生效。</p> 
<pre><code class="prism language-bash"><span class="token comment">#切换 highgo 用户</span>

<span class="token punctuation">[</span>root@hgdb bin<span class="token punctuation">]</span><span class="token comment"># su - highgo</span>

<span class="token punctuation">[</span>highgo@hgdb etc<span class="token punctuation">]</span><span class="token comment"># cat highgodb.env</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/opt/HighGo6.0.4-cluster/bin:<span class="token environment constant">$PATH</span>

<span class="token builtin class-name">export</span> LD<span class="token punctuation">\</span>_LIBRARY<span class="token punctuation">\</span>_PATH<span class="token operator">=</span>/usr/lib64:/opt/HighGo6.0.4- cluster/lib:<span class="token variable">$LD</span><span class="token punctuation">\</span>_LIBRARY<span class="token punctuation">\</span>_PATH

<span class="token builtin class-name">export</span> HGDB<span class="token punctuation">\</span>_HOME<span class="token operator">=</span>/opt/HighGo6.0.4-cluster

<span class="token builtin class-name">export</span> HG<span class="token punctuation">\</span>_BASE<span class="token operator">=</span>/opt/HighGo6.0.4-cluster

<span class="token builtin class-name">export</span> <span class="token assign-left variable">PGPORT</span><span class="token operator">=</span><span class="token number">5866</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable">PGDATA</span><span class="token operator">=</span>/opt/HighGo6.0.4-cluster/data

<span class="token punctuation">[</span>highgo@hgdb etc<span class="token punctuation">]</span><span class="token comment"># source highgodb.env</span>

<span class="token comment">#检查环境变量是否生效</span>

<span class="token punctuation">[</span>highgo@hgdb etc<span class="token punctuation">]</span><span class="token comment"># echo $PGDATA</span>

/opt/HighGo6.0.1-cluster/data
</code></pre> 
<p>（3）手动初始化数据库</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>highgo@hgdb bin<span class="token punctuation">]</span>$ initdb -D <span class="token punctuation">..</span>/data <span class="token punctuation">\</span><span class="token operator">&gt;</span>/opt/HighGo6.0.4-cluster/bin/initdb.log

<span class="token comment">#设置 highgo 用户密码</span>

Enter new superuser password:

Enter it again:

initdb: warning: enabling <span class="token string">"md5"</span> authentication <span class="token keyword">for</span> <span class="token builtin class-name">local</span> connections

You can change this by editing pg<span class="token punctuation">\</span>_hba.conf or using the option -A, or

--auth-local and --auth-host, the next <span class="token function">time</span> you run initdb.

<span class="token punctuation">[</span>highgo@hgdb bin<span class="token punctuation">]</span>$
</code></pre> 
<p>（4）启动数据库</p> 
<pre><code class="prism language-bash"><span class="token comment">#启动数据库</span>

<span class="token punctuation">[</span>highgo@hgdb bin<span class="token punctuation">]</span>$ pg<span class="token punctuation">\</span>_ctl start

<span class="token punctuation">..</span>. server started

<span class="token comment">#登录数据库</span>

<span class="token punctuation">[</span>highgo@hgdb etc<span class="token punctuation">]</span>$ psql -U highgo -d highgo
</code></pre> 
<p>（5）如果验证正常，之后通过第二个rpm包安装PostGIS拓展</p> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -ivh postgis3.0-6.0.4-enterprise-centos7-x86-64-20220127.rpm
</code></pre> 
<p>（6）安装步骤到这里就结束了，之后再创建用户名、密码及授权</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>highgo@localhost bin<span class="token punctuation">]</span>$ psql

用户 highgo 的口令：

psql <span class="token punctuation">(</span>HighGo Database <span class="token number">6</span> Release <span class="token number">6.0</span>.4-64-bit Production<span class="token punctuation">)</span>

PSQL: Release HighGo Database <span class="token number">6</span> Release <span class="token number">6.0</span>.4-64-bit Production

输入 <span class="token string">"help"</span>来获取帮助信息.

<span class="token assign-left variable">highgo</span><span class="token operator">=</span><span class="token comment"># CREATE USER dbtest WITH PASSWORD 'Supermap@123';</span>

<span class="token assign-left variable">highgo</span><span class="token operator">=</span><span class="token comment"># CREATE DATABASE exampledb OWNER dbtest;</span>

<span class="token assign-left variable">highgo</span><span class="token operator">=</span><span class="token comment"># GRANT ALL PRIVILEGES ON DATABASE exampledb TO dbtest;</span>

<span class="token comment">#只有超级用户才可以创建PostGIS拓展</span>

<span class="token assign-left variable">highgo</span><span class="token operator">=</span><span class="token comment"># ALTER USER dbtest WITH SUPERUSER;</span>
</code></pre> 
<p>（7）SuperMap iDesktopX软件，右键数据源节点–新建数据库型数据源，在弹出框中选择HighGoDB，在右侧界面输入服务器地址（如果是远程连接数据库填写规则为ip地址:端口号）、数据库名称、用户名和密码，新建数据库型数据源</p> 
<p><img src="https://images2.imgbox.com/dd/72/mugt2opO_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/03/40/ExPiSbuX_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_887"></a>五、数据库之间的迁移</h2> 
<p>项目实际运维过程中，经常会遇到数据库升级改造、服务器设备替换更新，这就需要将旧的数据库中的数据迁移到新的数据库中存储。如果是数据库型的工作空间，整库迁移是可以同时把数据、地图、场景和工作空间一并迁移的。</p> 
<p>同类型数据库之间的迁移可以通过数据库自带的命令行的形式实现，操作简单，便于实现，下文的1、2、3部分均采用此方式；而不同数据库之间的迁移，因为不同类型的数据库存储数据方式有所区别，内部表结构更是复杂，一般建议通过复制数据集的方式同步数据，但是这种方式很繁琐，因此我们自行制作了SuperMap iDesktopX 11i 桌面产品的"工作空间迁移"插件，将PostgreSQL / PostGIS数据库存储的数据整体进行迁移到DM数据库，从而减少工作量，节省时间，下文的4部分即采用此方式。</p> 
<h3><a id="1Oracle112Oracle121_893"></a>1、Oracle（11.2）-&gt;Oracle（12.1）</h3> 
<ul><li><strong>Oracle</strong> 命令行导出数据库：</li></ul> 
<p>（1）在Oracle目录下的bin目录下执行cmd命令：</p> 
<p><img src="https://images2.imgbox.com/f4/6c/tlaEjwLj_o.png" alt="在这里插入图片描述"></p> 
<p>（2）输入命令导出数据库，主要有如下几种操作：</p> 
<pre><code class="prism language-bash"><span class="token number">1</span>）导出数据库全部数据

仅输入数据库连接串和文件导出路径就可以执行导出，导出文件后缀为dmp

exp 用户名/密码@IP <span class="token assign-left variable">FILE</span><span class="token operator">=</span>导出文件路径

<span class="token number">2</span>）按用户名导出

可支持多用户同时导出

exp 用户名/密码@IP <span class="token assign-left variable">FILE</span><span class="token operator">=</span>导出文件路径 <span class="token assign-left variable">OWNER</span><span class="token operator">=</span><span class="token punctuation">(</span>用户名1,用户名2<span class="token punctuation">)</span>

<span class="token number">3</span>）按表名导出

可支持多表同时导出

exp 用户名/密码@IP <span class="token assign-left variable">FILE</span><span class="token operator">=</span>导出文件路径 <span class="token assign-left variable">TABLES</span><span class="token operator">=</span><span class="token punctuation">(</span>表名1,表名2<span class="token punctuation">)</span>

<span class="token number">4</span>）按查询条件导出

QUERY指定查询条件

exp 用户名/密码@IP <span class="token assign-left variable">FILE</span><span class="token operator">=</span>导出文件路径 <span class="token assign-left variable">TABLES</span><span class="token operator">=</span>表名 <span class="token assign-left variable">QUERY</span><span class="token operator">=</span><span class="token punctuation">(</span>where column<span class="token punctuation">\</span>_name1<span class="token operator">=</span><span class="token number">1</span> and column<span class="token punctuation">\</span>_name2<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<p>此处采用操作1）来导出用户名Oracle管理的数据库</p> 
<pre><code class="prism language-bash">exp Oracle/123456@10.10.0.102:1521/orcl <span class="token assign-left variable">FILE</span><span class="token operator">=</span>D:<span class="token punctuation">\</span>TEST<span class="token punctuation">\</span>test.dmp
</code></pre> 
<p><img src="https://images2.imgbox.com/00/a2/hzXWv1dp_o.png" alt="在这里插入图片描述"></p> 
<p>（3）查看D盘TEST文件夹会发现有新生成的test.dmp文件</p> 
<p><img src="https://images2.imgbox.com/81/8c/vP5WWRW5_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>Oracle</strong> 命令行导入数据库：</li></ul> 
<p>（1）将test.dmp文件拷贝到需要迁移的Oracle数据库所在的机器目录下</p> 
<p><img src="https://images2.imgbox.com/c7/79/qy50V8ym_o.png" alt="在这里插入图片描述"></p> 
<p>（2）同"Oracle命令行导出数据库"步骤（1）一样的操作命令行进入Oracle目录下的bin文件夹</p> 
<p><img src="https://images2.imgbox.com/c2/02/8G8863K4_o.png" alt="在这里插入图片描述"></p> 
<p>（3）在Oracle中新建一个数据库、用户及密码，步骤参考文档模块四</p> 
<pre><code class="prism language-bash">//创建用户及密码

create user zpp identified by <span class="token number">123456</span><span class="token punctuation">;</span>

//授权

grant connect,resource to zpp<span class="token punctuation">;</span>
</code></pre> 
<p>（4）导入test.dmp文件，并且没有提示错误即还原成功</p> 
<p><img src="https://images2.imgbox.com/e1/11/1oFM3WDM_o.png" alt="在这里插入图片描述"></p> 
<p>（5）验证导入是否成功</p> 
<p>在桌面打开数据库型数据源，填写步骤（3）导入的数据库连接参数</p> 
<p><img src="https://images2.imgbox.com/cf/e1/bfNOzUfV_o.png" alt="在这里插入图片描述"></p> 
<p>查看原始数据库里面的数据以及迁移成功后的数据库里面的数据对比</p> 
<p><img src="https://images2.imgbox.com/a7/1d/AS4ecUHm_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/c7/77/EF50ibwF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2Mysql56Mysql80_986"></a>2、Mysql（5.6）-&gt;Mysql（8.0）</h3> 
<ul><li><strong>MySQL</strong> 命令行导出数据库：</li></ul> 
<p>（1）命令行进入MySQL目录下的bin文件夹，可以使用以下两种方式：</p> 
<p>1）在cmd中输入的命令行：</p> 
<pre><code class="prism language-bash">d:

<span class="token builtin class-name">cd</span> D:<span class="token punctuation">\</span>数据库<span class="token punctuation">\</span>mysql-5.6.40-winx64<span class="token punctuation">\</span>bin
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/53/ZYaeEVxM_o.png" alt="在这里插入图片描述"></p> 
<p>2)找到MySQL目录下的bin文件夹，执行cmd命令：</p> 
<p><img src="https://images2.imgbox.com/c4/3b/sH2qSM8D_o.png" alt="在这里插入图片描述"></p> 
<p>（2）输入命令导出数据库，主要有如下几种操作：</p> 
<pre><code class="prism language-bash"><span class="token number">1</span>）导出整个数据库（包括数据库中的数据）：

mysqldump -u username -p dbname <span class="token punctuation">\</span><span class="token operator">&gt;</span> dbname.sql

<span class="token number">2</span>）导出数据库中的数据表（包括数据表中的数据）：

mysqldump -u username -p dbname tablename <span class="token punctuation">\</span><span class="token operator">&gt;</span> tablename.sql

<span class="token number">3</span>）导出数据库结构（不包括数据，只有创建数据表语句）：

mysqldump -u username -p -d dbname <span class="token punctuation">\</span><span class="token operator">&gt;</span> dbname.sql

<span class="token number">4</span>）导出数据库中数据表的表结构（不包括数据，只有创建数据表语句）：

mysqldump -u username -p -d dbname tablename <span class="token punctuation">\</span><span class="token operator">&gt;</span> tablename.sql

//参数说明

mysqldump：mysql用于转存储数据库的实用程序，它主要产生一个SQL脚本

-u：用户名

-p：密码

dbname：数据库名称
</code></pre> 
<p>此处采用操作1）来导出整个数据库dongyx，默认导出到MySQL目录下的bin文件夹</p> 
<pre><code class="prism language-bash">mysqldump -u root -p dongyx <span class="token punctuation">\</span><span class="token operator">&gt;</span> dongyx.sql；
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/81/xgqoJC3f_o.png" alt="在这里插入图片描述"></p> 
<p>（3）查看MySQL目录下的bin文件夹会发现有新生成的dongyx.sql文件</p> 
<p><img src="https://images2.imgbox.com/3a/d6/0POieaZy_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>MySQL</strong> 命令行导入数据库：</li></ul> 
<p>（1）将dongyx.sql文件拷贝到需要迁移的MySQL数据库的bin目录下</p> 
<p><img src="https://images2.imgbox.com/9b/58/MRoQedvv_o.png" alt="在这里插入图片描述"></p> 
<p>（2）同"MySQL命令行导出数据库"步骤（1）一样的操作命令行进入MySQL目录下的bin文件夹</p> 
<p><img src="https://images2.imgbox.com/21/48/FyGwRvjI_o.png" alt="在这里插入图片描述"></p> 
<p>（3）在MySQL中新建一个数据库、用户及密码，步骤参考文档模块四</p> 
<pre><code class="prism language-bash">//创建数据库testdong

create database testdong<span class="token punctuation">;</span>

//创建用户dongyx

create user <span class="token string">'dongyx'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'123456'</span><span class="token punctuation">;</span>

//将数据库的所有权限都赋予dbtest

grant all privileges on <span class="token punctuation">\</span>*.<span class="token punctuation">\</span>* to <span class="token string">'dongyx'</span>@<span class="token string">'%'</span><span class="token punctuation">;</span>

//设置密码

alter user <span class="token string">'dongyx'</span>@<span class="token string">'%'</span> IDENTIFIED WITH mysql<span class="token punctuation">\</span>_native<span class="token punctuation">\</span>_password BY <span class="token string">'123456'</span><span class="token punctuation">;</span>

//刷新权限

FLUSH PRIVILEGES<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e1/ce/b6p4vEDT_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/23/73/kr0nuv2P_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/54/24/m9k7O4dD_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/3a/0c/MQYQJTiw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/6f/8f/tvlLFk0l_o.png" alt="在这里插入图片描述"></p> 
<p>（4）使用刚创建的数据库来存储导入的数据</p> 
<pre><code class="prism language-bash">use testdong<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/91/0f/xzCqb75r_o.png" alt="在这里插入图片描述"></p> 
<p>（5）导入dongyx.sql文件再次出现"mysql&gt;"并且没有提示错误即还原成功。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> dongyx.sql<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/af/7e/V7kXTSlY_o.png" alt="在这里插入图片描述"></p> 
<p>（6）验证导入是否成功</p> 
<p>在桌面打开数据库型数据源，填写步骤（3）创建的连接参数</p> 
<p><img src="https://images2.imgbox.com/31/05/c6leJMgZ_o.png" alt="在这里插入图片描述"></p> 
<p>查看原始数据库里面的数据以及迁移成功后的数据库里面的数据对比</p> 
<p><img src="https://images2.imgbox.com/7c/c5/FlbIMbah_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/7d/bf/QbkXnFpR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3PostgreSQL96PostgreSQL_140_1135"></a>3、PostgreSQL（9.6）-&gt;PostgreSQL （14.0）</h3> 
<ul><li><strong>PostgreSQL</strong> 命令行导出数据库：</li></ul> 
<p>（1）在PostgreSQL目录下的bin目录下执行cmd命令：</p> 
<p><img src="https://images2.imgbox.com/2c/46/NFtKEjau_o.png" alt="在这里插入图片描述"></p> 
<p>（2）输入命令导出数据库test，默认导出到PostgreSQL目录下的bin文件夹：</p> 
<pre><code class="prism language-bash">pg<span class="token punctuation">\</span>_dump -U postgres -p <span class="token number">5432</span> -d <span class="token builtin class-name">test</span> -f test12.sql

//参数说明：

Pg<span class="token punctuation">\</span>_dump :是安装时候的一个执行文件，主要就是把数据导出成sql（或者dump）文件<span class="token punctuation">;</span>

-U：对应的用户名 postgres

-p:对应的端口号 <span class="token number">5432</span>

-d :导出库的名称；

-f:对应导出的sql存放路径
</code></pre> 
<p><img src="https://images2.imgbox.com/a2/75/kwQMV7E2_o.png" alt="在这里插入图片描述"></p> 
<p>（3）查看PostgreSQL目录下的bin文件夹会发现有新生成的test12.sql文件</p> 
<p><img src="https://images2.imgbox.com/5f/38/asYMxXSj_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>PostgreSQL</strong> 命令行导入数据库：</li></ul> 
<p>（1）将test12.sql文件拷贝到需要迁移的PostgreSQL数据库的bin目录下</p> 
<p><img src="https://images2.imgbox.com/58/d7/EULeJUlX_o.png" alt="在这里插入图片描述"></p> 
<p>（2）同"PostgreSQL命令行导出数据库"步骤（1）一样的操作命令行进入PostgreSQL目录下的bin文件夹</p> 
<p><img src="https://images2.imgbox.com/ad/31/jZ6cWNP7_o.png" alt="在这里插入图片描述"></p> 
<p>（3）在PostgreSQL中新建一个数据库、用户及密码，步骤参考文档模块四</p> 
<pre><code class="prism language-bash">//创建数据库zpp

CREATE DATABASE zpp OWNER postgres<span class="token punctuation">;</span>

//将zpp数据库的所有权限都赋予postgres

GRANT ALL PRIVILEGES ON DATABASE zpp TO postgres<span class="token punctuation">;</span>
</code></pre> 
<p>（4）导入test12.sql文件，并且没有提示错误即还原成功</p> 
<pre><code class="prism language-bash">psql -d zpp -U postgres -f test12.sql

//参数说明：

-d :导入库的名称

-U：对应的用户名 postgres

-f:对应导入的sql存放路径
</code></pre> 
<p><img src="https://images2.imgbox.com/d0/e8/mZAzOmLc_o.png" alt="在这里插入图片描述"></p> 
<p>（5）验证导入是否成功</p> 
<p>在桌面打开数据库型数据源，填写步骤（3）导入的数据库连接参数</p> 
<p><img src="https://images2.imgbox.com/5f/90/eRWIDmmH_o.png" alt="在这里插入图片描述"></p> 
<p>查看原始数据库里面的数据以及迁移成功后的数据库里面的数据对比</p> 
<p><img src="https://images2.imgbox.com/6b/1b/dpCNZiyn_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/41/60/rZX26rRy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4PostgreSQL__PostGISDMV8_1225"></a>4、PostgreSQL / PostGIS-&gt;DM(V8)</h3> 
<p>PostgreSQL / PostGIS 数据库与数据源之间的关系：</p> 
<p><img src="https://images2.imgbox.com/97/52/oVQDi5In_o.png" alt="在这里插入图片描述"></p> 
<p>DM 数据库与数据源之间的关系：</p> 
<p><img src="https://images2.imgbox.com/59/1c/1NEtD1nv_o.png" alt="在这里插入图片描述"></p> 
<p>从 PostgreSQL / PostGIS 整体迁移到 DM（V8），包含迁移：工作空间、数据源、数据集、地图、场景、布局、图表、模型、视频地图、大屏、表格 以及 资源 等共计 12 类。</p> 
<p>迁移流程如下所示：</p> 
<p><img src="https://images2.imgbox.com/1b/90/1QNfoSlb_o.png" alt="在这里插入图片描述"></p> 
<p>(1)根据输入的 PostgreSQL / PostGIS 数据库连接信息获取待迁移的工作空间；</p> 
<p>(2)选择指定工作空间或者批量迁移；</p> 
<p>(3)迁移工作空间中关联的数据源、数据集；</p> 
<p>(4)迁移工作空间中存储的地图信息；</p> 
<p>(5)迁移工作空间中存储的场景信息；</p> 
<p>(6)迁移工作空间中存储的布局信息；</p> 
<p>(7)迁移工作空间中存储的资源；</p> 
<p>(8)迁移工作空间中存储的其他信息，包括：图表、模型、视频地图、大屏以及表格等；</p> 
<p>(9)将上述迁移完成的工作空间另存为目标数据库的 DM 数据库型工作空间。</p> 
<p>关于 SuperMap iDesktopX 11i "工作空间迁移"插件详细使用说明可以参考技术博客：<a href="https://blog.csdn.net/supermapsupport/article/details/128208918">《</a><a href="https://blog.csdn.net/supermapsupport/article/details/128208918">SuperMap iDesktopX 11i 工作空间迁移插件使用说明》</a>。</p> 
<h2><a id="MongoDB_1264"></a>六、瓦片在MongoDB数据库中的管理</h2> 
<p><strong>MongoDB</strong> 数据库（ <strong><strong>3.4.2</strong></strong> 版本）下载地址：</p> 
<p><a href="https://pan.baidu.com/s/1sNEhufsRdi-ztV1gZg4b9g?pwd=1nxk" rel="nofollow">https://pan.baidu.com/s/1sNEhufsRdi-ztV1gZg4b9g?pwd=1nxk</a></p> 
<p><strong>MongoDB</strong> 数据库（ <strong><strong>4.4.2</strong></strong> 版本）下载地址：</p> 
<p><a href="https://pan.baidu.com/s/1rtILb77_YA76rSSCim6ijA?pwd=0ywo" rel="nofollow">https://pan.baidu.com/s/1rtILb77_YA76rSSCim6ijA?pwd=0ywo</a></p> 
<p><strong>MongoDB</strong> 数据库（ <strong><strong>4.4.2</strong></strong> 版本）安装教程：</p> 
<p><a href="https://www.runoob.com/mongodb/mongodb-window-install.html" rel="nofollow">https://www.runoob.com/mongodb/mongodb-window-install.html</a></p> 
<h3><a id="1MongoDB_1278"></a>1、用户验证方式启动MongoDB</h3> 
<h4><a id="1MongoDB_20_1280"></a>（1）MongoDB 2.0版本</h4> 
<p>1）进入MongoDB数据库的bin目录下，执行cmd命令，按顺序执行以下命令：</p> 
<pre><code class="prism language-bash">//创建数据库命令：

use <span class="token builtin class-name">test</span>

//创建对应的用户及密码；

db.addUser<span class="token punctuation">(</span><span class="token string">"map"</span>,<span class="token string">"map"</span><span class="token punctuation">)</span>
</code></pre> 
<p>2）以验证方式重启 MongDB 服务</p> 
<pre><code class="prism language-bash">mongod.exe --dbpath C:<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>data --logpath C:<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>log<span class="token punctuation">\</span>log.txt -auth
</code></pre> 
<p><strong>更多详细步骤可以参考帮助文档：</strong> <a href="https://help.supermap.com/iDesktop/zh/tutorial/TechDocument/MongoDBDatabaseGuide" rel="nofollow">https://help.supermap.com/iDesktop/zh/tutorial/TechDocument/MongoDBDatabaseGuide</a></p> 
<h4><a id="2MongoDB_34_1304"></a>（2）MongoDB 3.4版本</h4> 
<p>1）进入MongoDB数据库的bin目录下，执行cmd命令，按顺序执行以下命令：</p> 
<pre><code class="prism language-bash">use admin

db.system.version.insert<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'\_id'</span><span class="token builtin class-name">:</span><span class="token string">'authSchema'</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$set</span>:<span class="token punctuation">{<!-- --></span><span class="token string">'currentVersion'</span>:3<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

db.system.version.update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'\_id'</span><span class="token builtin class-name">:</span><span class="token string">'authSchema'</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$set</span>:<span class="token punctuation">{<!-- --></span><span class="token string">'currentVersion'</span>:3<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/e9/HVAO7eEI_o.png" alt="在这里插入图片描述"></p> 
<p>2）db.system.version.find() # 查看系统的信息，可以看到认证方式已经变为3了</p> 
<p><img src="https://images2.imgbox.com/0a/e2/e0cewNcB_o.png" alt="在这里插入图片描述"></p> 
<p>3）创建数据库并创建用户</p> 
<pre><code class="prism language-bash">//创建数据库命令：

use Map

//为上面创建的数据库创建对应的用户；

db.createUser<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>user: <span class="token string">"supermap"</span>,pwd: <span class="token string">"123456"</span>,roles: <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>role: <span class="token string">"dbOwner"</span>, db: <span class="token string">"Map"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cf/14/4b7h2QNo_o.png" alt="在这里插入图片描述"></p> 
<p>4）查看用户是否创建成功，已经查看用户信息，可以发现用户认证方式为MONGODB-CR</p> 
<pre><code class="prism language-bash">use admin

db.system.users.find<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>user:<span class="token string">'supermap'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2c/93/WsXTMvmJ_o.png" alt="在这里插入图片描述"></p> 
<p>5）停掉服务，然后以认证方式启动服务</p> 
<pre><code class="prism language-bash">mongod --dbpath D:<span class="token punctuation">\</span>MD3.4<span class="token punctuation">\</span>mongodb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>db --setParameter <span class="token assign-left variable">authenticationMechanisms</span><span class="token operator">=</span>MONGODB-CR --auth
</code></pre> 
<p><strong>更多详细步骤可以参考技术博客：</strong> <a href="https://blog.csdn.net/supermapsupport/article/details/122128422">https://blog.csdn.net/supermapsupport/article/details/122128422</a></p> 
<h4><a id="3MongoDB_44_1359"></a>（3）MongoDB 4.4版本</h4> 
<p>1）在MongoDB的安装目录下找mongod.cfg文件，打开该文件后找到安全认证的设置，去掉注释即为开启认证模式。<br> <img src="https://images2.imgbox.com/e9/a9/pl9XDYt3_o.png" alt="在这里插入图片描述"></p> 
<p>2）重启MongoDB服务，让修改配置项生效</p> 
<p><img src="https://images2.imgbox.com/b4/cf/Vbk5XX6R_o.png" alt="在这里插入图片描述"></p> 
<p>3）验证是否开启认证模式</p> 
<p>在MongoDB\Server\4.4\bin目录下打开cmd命令运行mongo.exe，查看数据库dbs，发现查询结果为空则代表开启认证模式成功</p> 
<pre><code class="prism language-bash">//进入mongo

mongo.exe

//查看数据库

show dbs
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/0d/DDgXM7lx_o.png" alt="在这里插入图片描述"></p> 
<p>4）创建认证模式下的用户及密码</p> 
<pre><code class="prism language-bash">//创建数据库

use map

//为上面创建的数据库创建对应的用户及密码

db.createUser<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>user: <span class="token string">"supermap"</span>,pwd: <span class="token string">"123456"</span>,roles: <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>role: <span class="token string">"root"</span>, db: <span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/da/3c/E4nTidI1_o.png" alt="在这里插入图片描述"></p> 
<p>5）查看用户是否创建成功</p> 
<pre><code class="prism language-bash">//查看当前使用的数据库

db

//查看当前数据库下的用户

show <span class="token function">users</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/ba/Eaak6bDy_o.png" alt="在这里插入图片描述"></p> 
<p>6）验证用户是否可以访问数据库</p> 
<pre><code class="prism language-bash">//以认证模式登录数据库

db.auth<span class="token punctuation">(</span><span class="token string">"supermap"</span>,<span class="token string">"123456"</span><span class="token punctuation">)</span>

//查看数据库

show dbs
</code></pre> 
<p><img src="https://images2.imgbox.com/62/29/OIoF8puO_o.png" alt="在这里插入图片描述"></p> 
<p><strong>更多详细步骤可以参考技术博客</strong> ：<a href="https://blog.csdn.net/supermapsupport/article/details/127766208">https://blog.csdn.net/supermapsupport/article/details/127766208</a></p> 
<h3><a id="2MongoDB__1433"></a>2、MongoDB 二维瓦片管理</h3> 
<p>当瓦片储存类型为 MongoDB 型时，生成的瓦片切片文件，以分布式格式存储在服务器的数据库中，而本地会生成一个索引文件（*.sci）。MongoDB 类型的分布式切图服务，只支持5.0版本的瓦片。</p> 
<p>与其他类型相比，MongoDB 型存储方式有以下优势：</p> 
<ul><li>切片存储于服务器中，地图切片的存取速度较快。</li><li>以分布式格式进行存储，便于数据分享与发布。</li><li>MongoDB 中存储的瓦片数据支持直接进行拷贝提取，可将数据从一个 MongoDB 服务器拷贝到另一个 MongoDB 服务器，有利于数据传输与备份。</li></ul> 
<p>同时支持对瓦片数据进行管理，通过可视化界面，加载并查看不同瓦片数据的比例尺、坐标系、瓦片类型、瓦片范围等瓦片信息，同时支持合并、提取、类型转换等管理操作。</p> 
<h4><a id="1MongoDB_1445"></a>（1）二维瓦片在MongoDB中的表结构说明</h4> 
<p>1）metadatas结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>scaleDenominators</strong></td><td>DOUBLE</td><td>切图比例尺分母数组</td></tr><tr><td><strong>originalPoint</strong></td><td>POINT2D</td><td>切图索引的起始，计算瓦片行列号的起始坐标点，默认为地图左上角。</td></tr><tr><td><strong>resolutions</strong></td><td>DOUBLE</td><td>地面分辨率数组，单位是"坐标系单位/像素"</td></tr><tr><td><strong>tileWidth</strong></td><td>INT32</td><td>瓦片宽度，单位"像素"</td></tr><tr><td><strong>mapStatusHashCode</strong></td><td>STRING</td><td>地图状态相关参数的哈希码</td></tr><tr><td><strong>transparent</strong></td><td>BOOLEAN</td><td>图片是否透明</td></tr><tr><td><strong>mapParameter</strong></td><td>NULL</td><td>原始地图的地图参数</td></tr><tr><td><strong>tileType</strong></td><td>STRING</td><td>瓦片的类型</td></tr><tr><td><strong>tileFormat</strong></td><td>STRING</td><td>缓存图片格式</td></tr><tr><td><strong>bounds</strong></td><td>RECTANGLE2D</td><td>瓦片范围</td></tr><tr><td><strong>tileRuleVersion</strong></td><td>STRING</td><td>瓦片规则的版本</td></tr><tr><td><strong>prjCoordSys</strong></td><td>OBJECT</td><td>瓦片的坐标系</td></tr><tr><td><strong>mapName</strong></td><td>STRING</td><td>原始地图名</td></tr><tr><td><strong>tileHeight</strong></td><td>INT32</td><td>瓦片高度，单位"像素"</td></tr><tr><td><strong>tilesetName</strong></td><td>STRING</td><td>瓦片集名称，是瓦片集的唯一标志</td></tr><tr><td><strong>tileversions</strong></td><td>ARRAY</td><td>切片版本数组，一个切片集中可以有多个切片版本</td></tr><tr><td><strong>indexBounds</strong></td><td>OBJECT</td><td>索引范围</td></tr><tr><td><strong>highResolution</strong></td><td>BOOLEAN</td><td>是否为高分辨率</td></tr></tbody></table> 
<p>2）tiles_{tilesetName}结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>resolution</strong></td><td>DOUBLE</td><td>瓦片的分辨率,精确到小数点后6位</td></tr><tr><td><strong>tile_column</strong></td><td>LONG</td><td>瓦片的列号，是瓦片在x方向上的索引</td></tr><tr><td><strong>tile_row</strong></td><td>LONG</td><td>瓦片的行号，是瓦片在y方向上的索引</td></tr><tr><td><strong>tile_id</strong></td><td>STRING</td><td>瓦片内容的唯一id，该id关联images_{tilesetName}集合的tile_id的字段，用于定位瓦片的二进制</td></tr><tr><td><strong>create_time</strong></td><td>LONG</td><td>瓦片创建的时间戳</td></tr><tr><td><strong>name</strong></td><td>STRING</td><td>图片名称</td></tr><tr><td><strong>tile_formatName</strong></td><td>STRING</td><td>图片的类型</td></tr></tbody></table> 
<p>3）images_{tilesetName}结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>tile_id</strong></td><td>STRING</td><td>瓦片内容的唯一id ，该id 关联tiles_{tilesetName}集合的tile_id的字段，用于定位瓦片的二进制</td></tr><tr><td><strong>tile_data</strong></td><td>BYTE</td><td>瓦片的二进制</td></tr></tbody></table> 
<p>4）styles_{tilesetName}结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>name</strong></td><td>STRING</td><td>风格名称，桌面生成时默认与mapName相同，如果设置同名时会被覆盖。</td></tr><tr><td><strong>version</strong></td><td>STRING</td><td>此风格对应的版本标识</td></tr><tr><td><strong>description</strong></td><td>STRING</td><td>用于对风格进行描述</td></tr><tr><td><strong>style</strong></td><td>BYTE</td><td>风格内容（json风格文件）</td></tr><tr><td><strong>sprite_image</strong></td><td>BYTE</td><td>点符号，栅格填充符号集合</td></tr><tr><td><strong>sprite_json</strong></td><td>STRING</td><td>点符号，栅格填充的符号描述信息</td></tr><tr><td><strong>sprite_image_x2</strong></td><td>BYTE</td><td>内容与sprite_image一样，只是放大2倍，在高分屏中使用该符号进行显示</td></tr><tr><td><strong>sprite_json_x2</strong></td><td>STRING</td><td>内容与sprite_json格式一样，只是时针对sprite_image_x2进行描述的</td></tr><tr><td><strong>thumbnail</strong></td><td>BYTE</td><td>该风格的缩略图</td></tr></tbody></table> 
<p>5）fonts结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>fontname</strong></td><td>STRING</td><td>字体名称</td></tr><tr><td><strong>filename</strong></td><td>STRING</td><td>文件名称(字符区段值范围)。如0-255.pbf</td></tr><tr><td><strong>Fontdata</strong></td><td>BYTE</td><td>字体pbf二进制数据</td></tr></tbody></table> 
<h4><a id="2MongoDB_1510"></a>（2）生成MongoDB瓦片</h4> 
<p>1）服务器名称：用于设置 MongoDB 服务器地址，例如：192.168.120.42。</p> 
<p>2）数据库名称：用于设置数据库名称。若服务器是以非用户验证方式启动 MongoDB，则可单击下拉按钮选择服务器中已存在的数据库，或直接输入新数据库名称创建一个数据库；若服务器以用户验证方式启动 MongoDB，则不支持新建数据库，也不能读取到已有的数据库名称，只能在文本框中输入已存在数据库名称。同时在用户验证模式下启动数据库服务，可以在"用户名"和"密码"中输入管理员用户名和密码，这样数据库名称下拉项中就可以看到库中已存在的数据库名称。</p> 
<p>3）用户名称/密码：若数据库已存在，则需输入该数据库对应的用户名称和密码；若为新建的数据库，则需用户设置数据库用户名称和密码。</p> 
<p><img src="https://images2.imgbox.com/15/f2/7aGYB8hl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3MongoDB_1521"></a>（3）生成MongoDB（多版本）瓦片</h4> 
<p>多版本瓦片，一般是同一区域的不同时刻、不同内容的瓦片，应用于多时态数据，即通过生成多版本瓦片的方式来管理不同时刻不同内容的瓦片。通过版本控制当前只显示一个瓦片内容，从而展现一个地理空间数据随时间变化的动态效果。</p> 
<p>传统瓦片只是研究某一个区域空间数据当下的空间信息，只反应数据当前的一个情况，是静态的，不能回看历史，也不能预测未来。多版本瓦片加入了时间的元素，可以展示地理实体或者现象的空间、属性随时间的变化而变化。研究该地理实体和现象的发展过程，以及分析其变化规律。</p> 
<p><strong>多版本瓦片特征：</strong></p> 
<ul><li>多版本瓦片的重要特征之一是具有版本标识，在生成瓦片的同时要为该瓦片指定一个对应的版本名称，用以标识该瓦片。</li><li>生成多版本瓦片，瓦片只支持存储在 MongoDB 数据库中。</li></ul> 
<p>1）存储类型：在生成多版本瓦片中，需设置存储类型为"MongoDB（多版本）"；</p> 
<p>2）版本名称：为当前输出的瓦片指定一个版本名称，用来标识该瓦片。关于版本名称的写法完全由用户的需求而定，这里不做限制。如果在版本名称下拉框中选择已有瓦片版本名称，则可以对该版本已有瓦片进行更新。</p> 
<ul><li> <p>若要放到一个多版本瓦片中管理，接下来的瓦片生成设置中，每个版本必须使用相同的瓦片配置文件名称和相同数据库名称，各版本的瓦片名称及数据库名称必须保持一致。</p> </li><li> <p>多个版本瓦片之间，需要比例尺和地图瓦片索引范围保持一致。如果用户设置上不保持一致，可能导致瓦片出现问题。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/f6/53/EVX7NM4X_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_1543"></a>（4）瓦片提取</h4> 
<p>SuperMap iDesktopX 产品支持瓦片提取功能，通过指定特定比例尺及自定义提取范围，实现瓦片数据的提取管理。</p> 
<p>应用场景：大范围瓦片数据的提取，可指定提取区域及瓦片比例尺，免去用户常规裁剪、提取等繁琐的操作过程。例如，当某省需要将高清影像数据提取给各区市县，只需要将区市县的行政边界作为提取范围，即可将瓦片提取至对应区域。同时还可指定提取比例尺，当精度过高的数据，在提取时需要限制数据精度级别，则可通过选择比例尺，无需重复切图，即可便捷快速的提取数据。</p> 
<p><img src="https://images2.imgbox.com/8f/5b/2jQ7lYzh_o.png" alt="在这里插入图片描述"></p> 
<p>操作说明：</p> 
<p>1）添加待提取瓦片 ：添加 MongoDB 瓦片或本地瓦片。</p> 
<p><img src="https://images2.imgbox.com/9d/1f/BuQjQ1vv_o.png" alt="在这里插入图片描述"></p> 
<p>2）提取瓦片 ： 在瓦片管理面板单击工具条中的"提取"按钮。</p> 
<p><img src="https://images2.imgbox.com/af/22/hG6syONY_o.png" alt="在这里插入图片描述"></p> 
<p>3）弹出提取瓦片对话框，在对话框内设置如下参数：</p> 
<ul><li> <p>瓦片名称 ：通过下拉选项，选择待提取瓦片，默认显示为瓦片管理列表框内的第一条记录。</p> </li><li> <p>比例尺 ：比例尺列表框中显示当前地图瓦片的比例尺，勾选复选框，确定提取比例尺。</p> </li><li> <p>提取范围 ：对提取瓦片范围进行设置。应用程序提供四种设置方式：整幅地图、当前窗口、自定义范围以及复制粘贴范围。</p> </li></ul> 
<p>当使用选择对象设置范围时，需先将范围面图层添加至当前瓦片管理窗口，才可使用选择对象选项，程序将按照选择对象的外接矩形作为提取范围。</p> 
<ul><li>结果设置 ：设置存储提取数据的MongoDB数据库，包含服务器名称、数据库名称、瓦片名称等参数信息。</li></ul> 
<p>4）完成上述参数设置，即可执行提取瓦片的操作。</p> 
<p><img src="https://images2.imgbox.com/f7/33/a9OOSft6_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/96/b8/dgTEvWHL_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_1584"></a>（5）瓦片合并</h4> 
<p>SuperMap iDesktopX 支持瓦片合并功能，将指定本地瓦片或者 MongoDB 瓦片转存到目标 MongoDB 数据库中，目标 MongoDB 数据库可以是已有，同时也支持转存至新建 MongoDB 数据库。</p> 
<p>应用场景：整合不同区域的数据或同一区域不同时期的数据，避免了用户重复切图，提升了工作效率。</p> 
<p><strong>瓦片合并条件</strong></p> 
<p>在进行 MongoDB 瓦片合并前需确保本机启动了 MongoDB 服务，同时合并的瓦片还需要具备以下条件：</p> 
<ul><li>合并瓦片的坐标系一致。</li><li>瓦片块大小一致。</li><li>合并瓦片的源点坐标一致，源点坐标即索引范围一致，可在生成地图瓦片时对瓦片范围参数设置时调整成一致。</li><li>合并瓦片的图片类型相同。</li></ul> 
<p><strong>注意</strong> ：合并瓦片必须同时满足以上四个条件，合并才能成功，否则将提示合并失败。</p> 
<p><strong>支持合并的瓦片类型</strong></p> 
<ul><li>栅格瓦片：WEBP、PNG、DXTZ、GIF、JPG、JPG_PNG、PNG8。</li><li>矢量瓦片</li></ul> 
<p><strong>合并方式</strong></p> 
<p>支持本地瓦片与 MongoDB 瓦片之间相互合并，具体分为：</p> 
<ul><li>支持本地瓦片与 MongoDB 瓦片之间进行合并；</li><li>支持 MongoDB 瓦片与 MongoDB 瓦片之间进行合并；</li><li>本地与本地瓦片合并存储为 MongoDB 瓦片。</li></ul> 
<p><strong>瓦片合并重叠部分处理：</strong></p> 
<p><strong>栅格瓦片合并</strong></p> 
<ul><li> <p>当选择合并的瓦片图片类型为 PNG 且背景透明时，瓦片重叠区域程序会做融合处理,可用于处理数据合并接边的问题。</p> </li><li> <p>当选择合并的瓦片类型为 JPG_PNG 格式时，对于包含无效数据像元的切片（地图边界处），其文件格式为 PNG，否则为 JPG 格式，瓦片重叠区域程序可根据瓦片是否包含无效数据像元来自动判断使用哪种格式，可用于解决瓦片接边处的白图问题。</p> </li><li> <p>除上述两种瓦片类型，其他类型合并瓦片的重叠区域均按照瓦片合并顺序进行覆盖操作。</p> </li></ul> 
<p><strong>矢量瓦片合并</strong></p> 
<ul><li> <p>矢量瓦片数据：合并重叠区域的矢量瓦片均按照瓦片合并顺序进行覆盖操作。</p> </li><li> <p>瓦片风格：若合并的矢量瓦片风格不一致，按照合并顺序，后一同名风格文件会被替换，不同名的风格文件会被保留。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/2c/ab/8mIYHzUd_o.png" alt="在这里插入图片描述"></p> 
<p>操作说明：</p> 
<p>1）添加瓦片 ：支持添加 MongoDB 瓦片和本地瓦片。</p> 
<p><img src="https://images2.imgbox.com/d3/e5/cTAKsxTl_o.png" alt="在这里插入图片描述"></p> 
<p>2）合并瓦片 ： 在瓦片管理面板单击工具条中的"合并"按钮。</p> 
<p><img src="https://images2.imgbox.com/a9/5e/Hj9PkzsA_o.png" alt="在这里插入图片描述"></p> 
<p>3）弹出合并 MongoDB 瓦片对话框。</p> 
<p>4）在对话框的左侧设置合并数据的存储方式，程序提供两种方式：</p> 
<ul><li> <p>方式一： 合并至已有 ，即将多个版本的数据合并至已存在的某一版本的瓦片数据中，可单击右侧下拉框，在下拉列表中选择瓦片名称。</p> </li><li> <p>方式二： 合并至新建 ，即设置新的 MongoDB 数据库作为合并后数据的存放位置。输入以下MongoDB 瓦片参数：服务器名称、数据库名称、及设置合并后瓦片的名称（即瓦片根目录的名称）。</p> </li></ul> 
<p>5）在对话框右侧设置区域，设置参与合并的瓦片、合并顺序以及合并后的目标版本：</p> 
<ul><li> <p>参与合并版本：在瓦片列表前勾选参与合并的瓦片;</p> </li><li> <p>瓦片顺序：列表中瓦片的上下顺序影响合并结果，通过瓦片列表框上侧的顺序调整按钮，调整瓦片的合并顺序。合并操作顺序是由上到下依次进行。</p> </li></ul> 
<p>6）目标版本 ：支持将多版本合并为一个版本，同时支持合并至一个数据库下多个版本。</p> 
<ul><li> <p>若要将多个版本合并为一个版本，此处目标版本的名称应设置为同一名称；例如将四川省和青海省两省的电子地图合并为一份数据，此处目标版本名称一致。</p> </li><li> <p>若是将不同数据库的不同版本合并至当前数据库的多版本，则可保持不同版本的名称，即为同一数据库下不同版本。例如将分别在5个数据库的不同月份的降水数据合并到一个数据库下的不同版本，此处保持不同版本名称。</p> </li></ul> 
<p>7）边界数据集：当待合并瓦片为栅格瓦片时（除DXTZ、GIF格式外），支持添加边界数据集以提高重叠区域合并接边的效率。边界数据集需要包含待合并瓦片在重叠区域中的共同边界。注意：该功能目前仅在待合并瓦片均为MongoDB瓦片时生效。</p> 
<p>8）开启多进程 ：支持设置多进程进行瓦片合并，用户可根据机器资源合理设置进程数，提升合并性能。</p> 
<p>9）单击确定按钮，执行合并操作，合并完成后，在输出窗口会给出合并成功的提示。可在瓦片管理界面重新添加，使用冲突检测功能检查合并后的瓦片数据。</p> 
<p><img src="https://images2.imgbox.com/be/a9/jpsdut6q_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-iKChDyaJ-1672384583827)(RackMultipart20221230-1-gn1mgw_html_c1b8a716098cffac.png)]"></p> 
<p><img src="https://images2.imgbox.com/e0/32/KBhAln8a_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JghPLZVC-1672384583827)(RackMultipart20221230-1-gn1mgw_html_a72f34575be08859.png)]"></p> 
<h4><a id="6_1677"></a>（6）类型转换</h4> 
<p>瓦片类型转换支持本地原始瓦片、本地紧凑瓦片和MongoDB瓦片之间的相互转换。</p> 
<p>应用场景：适应不同场景所需的存储瓦片类型，避免了用户重复切图，提升了工作效率。</p> 
<p><img src="https://images2.imgbox.com/9a/b2/qKLKl0M3_o.png" alt="在这里插入图片描述"></p> 
<p>操作说明：</p> 
<p>1）添加待转换的瓦片。</p> 
<p><img src="https://images2.imgbox.com/d6/da/3vU5YsRk_o.png" alt="在这里插入图片描述"></p> 
<p>2）类型转换 ： 在瓦片管理面板单击工具条中的"类型转换"按钮。</p> 
<p><img src="https://images2.imgbox.com/da/8c/usqPykWH_o.png" alt="在这里插入图片描述"></p> 
<p>3）弹出类型转换对话框，详细参数如下：</p> 
<ul><li> <p>瓦片名称：选择待转换的瓦片名称</p> </li><li> <p>存储类型：选择目标转换类型，支持本地紧凑、本地原始、Mongo瓦片。</p> </li><li> <p>目标SCI路径：输入本地瓦片的本地路径。</p> </li><li> <p>服务器地址：输入存储地图瓦片的 MongoDB 服务器的地址。</p> </li><li> <p>数据库名称：输入存储地图瓦片的数据库名称。</p> </li><li> <p>瓦片名称：输入地图瓦片的名称，即瓦片根目录的名称。</p> </li><li> <p>用户名称/密码：若数据库设置了用户名和密码，则需输入该数据库对应的用户名称和密码。</p> </li><li> <p>开启多线程：支持设置多进程进行瓦片类型转换，用户可根据机器资源合理设置进程数，提升合并性能。</p> </li></ul> 
<p>4）点击 确定，执行类型转换操作。</p> 
<p><img src="https://images2.imgbox.com/88/00/FfibbUqC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3MongoDB__1721"></a>3、MongoDB 三维瓦片管理</h3> 
<p>SuperMap iDesktopX 产品支持将三维瓦片存储到MongoDB 库中，数据存入MongoDB 数据库后，会在指定路径生成配置文件。</p> 
<h4><a id="1MongoDB_1725"></a>（1）三维瓦片在MongoDB中的表结构说明</h4> 
<p>1）metadatas结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>TilesetName</strong></td><td>STRING</td><td>瓦片集名称，是瓦片集的唯一标志</td></tr><tr><td><strong>Version</strong></td><td>STRING</td><td>瓦片版本号</td></tr><tr><td><strong>DataType</strong></td><td>STRING</td><td>三维地理空间数据类型</td></tr><tr><td><strong>FileType</strong></td><td>STRING</td><td>文件类型</td></tr><tr><td><strong>RenderMode</strong></td><td>STRING</td><td>渲染模式</td></tr><tr><td><strong>TileSplitType</strong></td><td>STRING</td><td>瓦片划分类型</td></tr><tr><td><strong>AttributeExtentName</strong></td><td>STRING</td><td>属性扩展名称</td></tr><tr><td><strong>VertexCompressionType</strong></td><td>STRING</td><td>顶点压缩类型</td></tr><tr><td><strong>Position</strong></td><td>STRING</td><td>插入点，单位为度</td></tr><tr><td><strong>GeoBounds</strong></td><td>STRING</td><td>地理空间范围</td></tr><tr><td><strong>Crs</strong></td><td>STRING</td><td>瓦片参考坐标系</td></tr><tr><td><strong>TileInfo</strong></td><td>STRING</td><td>瓦片信息</td></tr><tr><td><strong>AttachFiles</strong></td><td>STRING</td><td>附加文件</td></tr><tr><td><strong>PointCloudLayers</strong></td><td>STRING</td><td>点云数据</td></tr><tr><td><strong>HeightRange</strong></td><td>STRING</td><td>高度范围</td></tr><tr><td><strong>WDescript</strong></td><td>STRING</td><td>w位描述信息</td></tr></tbody></table> 
<p>2）Tileset_{tilesetName}结构</p> 
<table><thead><tr><th><strong>字段名称</strong></th><th><strong>字段类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><strong>Tileset_Key</strong></td><td>STRING</td><td>瓦片集根节点的信息</td></tr><tr><td><strong>Tileset_Value</strong></td><td>BINARY</td><td>瓦片集根节点的信息</td></tr></tbody></table> 
<h4><a id="2MongoDB_1755"></a>（2）连接MongoDB数据库</h4> 
<p>操作说明：</p> 
<p>1）三维数据选项卡-&gt;三维瓦片-&gt;瓦片管理-&gt;连接数据库按钮，弹出连接数据库窗口。</p> 
<p>2）连接信息：设置 MongoDB 服务器和数据库的相关信息，在使用该功能前，需先启动 MongoDB 服务，参数说明如下：</p> 
<ul><li>服务器名称：输入服务器的 IP 地址。</li><li>数据库名称：只能在文本框中输入已存在数据库名称。</li><li>用户名称：输入MongoDB 数据库的用户名称。</li><li>用户密码：输入进入 MongoDB 数据库的密码</li></ul> 
<p><img src="https://images2.imgbox.com/c6/f6/XDf8o85T_o.png" alt="在这里插入图片描述"></p> 
<p>3）连接MongoDB数据库成功后，会在瓦片管理界面显示当前数据库中已有的瓦片数据。</p> 
<p><img src="https://images2.imgbox.com/24/0f/WjhT8SEe_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_1776"></a>（3）三维瓦片查删操作</h4> 
<p>连接数据库后，在瓦片管理界面中选中瓦片数据节点，单击右键，将瓦片数据添加到场景中或删除。</p> 
<p><strong>注意：</strong> 对 MongoDB 数据库中瓦片的删除操作是不可恢复的。</p> 
<p><img src="https://images2.imgbox.com/66/8f/ERaEO83p_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4MongoDB_1785"></a>（4）三维瓦片保存到MongoDB</h4> 
<p>操作说明：</p> 
<p>1）三维数据选项卡-&gt;三维瓦片-&gt;瓦片管理-&gt;保存到MongoDB 按钮，弹出保存到MongoDB 窗口。</p> 
<p>2）文件列表：显示添加的配置文件。从左到右图标使用方式为：添加配置文件、删除列表中已选的配置文件、设置是否显示配置文件的绝对路径。</p> 
<p>3）连接信息：设置 MongoDB 服务器和数据库的相关信息，在使用该功能前，需先启动 MongoDB 服务，参数说明如下：</p> 
<ul><li> <p>服务器名称：输入服务器的 IP 地址。</p> </li><li> <p>数据库名称：只能在文本框中输入已存在数据库名称。</p> </li><li> <p>用户名称：输入MongoDB 数据库的用户名称。</p> </li><li> <p>用户密码：输入进入 MongoDB 数据库的密码</p> </li></ul> 
<p>4）输出配置文件：设置参数说明如下：</p> 
<ul><li> <p>目标路径：用于设置新生成的 *.scp 文件保存路径，可单击该组合框右侧按钮，选择文件保存路径，或在文本框中直接输入保存路径。目标文件的默认保存路径与源配置文件的路径一致。</p> </li><li> <p>数据名称：用于设置和显示倾斜摄影数据在 MongoDB 数据库中的保存名称。</p> </li><li> <p>纹理压缩格式：当倾斜摄影数据保存到MongoDB 数据库时，此参数控件才会显示。目前支持七种压缩类型：WebP、DXT（PC设备）、PVRTC（iOS系列设备）、ETC（Android系列设备）、CRN_DXT5（PC设备）、标准CRN、KTX2.0，默认为DXT（PC设备）。对于不同用途的数据，采用不同的纹理压缩方式，可以减少纹理图像所使用的显存数量。</p> </li></ul> 
<p>（1）WebP：适用于 Web端/PC机上通用的压缩纹理格式。数据总量减少，提高传输性能。</p> 
<p>（2）DXT(PC设备)：适用于 PC 机（个人计算机）上通用的压缩纹理格式。显存占用减少，提升渲染性能，但是数据总量会增加。</p> 
<p>（3）CRN_DXT5（PC设备）：显存占用少许减少，数据总量大幅度减少，但是需要较长的处理时间。</p> 
<p>（4）标准CRN：显存占用少许减少，数据总量大幅度减少。处理相同数据，所需时间比CRN_DXT5长。</p> 
<p>（5）KTX2.0:显存占用少许减少，数据总量大幅度减少。处理相同数据，所需时间比标准CRN长。</p> 
<p>5）设置完以上参数后，单击"确定"按钮，即可执行数据保存到MongoDB数据库的操作。</p> 
<p><img src="https://images2.imgbox.com/cd/c1/Un1lXWov_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_1826"></a>七、可能遇到的报错及解决办法</h2> 
<h3><a id="1Oracle_1828"></a>1、Oracle类</h3> 
<h4><a id="OracleORA12541_TNSno_listener_1830"></a>问题一：Oracle报错：ORA-12541: TNS:no listener</h4> 
<p>解决办法:</p> 
<p>（1）检查监听地址是否正确：打开"开始"菜单，找到Oracle的Net Manager，找到LISTENER，检查地址是否包含：本地访问127.0.0.1</p> 
<p><img src="https://images2.imgbox.com/ad/4e/uKIXNDHZ_o.png" alt="在这里插入图片描述"></p> 
<p>（2)检查服务是否启动：打开"服务"，找到OracleOraDb11g_home1TNSListener，如果没有运行请手动启动，如果已经在运行则重启该服务。</p> 
<p><img src="https://images2.imgbox.com/70/f3/Jf6AwrQQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Oracle_1844"></a>问题二：桌面软件中打开Oracle数据源的按钮显示为灰色不可用，是什么原因？</h4> 
<p>解决办法:</p> 
<p>1.安装Oracle客户端；</p> 
<p>2.Oracle位数和iDesktop一致；</p> 
<p>3.使用第三方工具检查是否可以连接；</p> 
<p>4.检查环境变量的PATH路径是否有Oracle安装路径，如果没有，手动添加进去</p> 
<h4><a id="Oracle_1856"></a>问题三：直接在Oracle数据库中成功删除某条数据，但是桌面软件打开数据集查看属性表会出现一条空的记录？</h4> 
<p>解决办法：</p> 
<p>直接在Oracle数据库中删除数据表只会删除数据的属性、空间关系等，但是不会删除数据的记录条数，这是由另一张表SmRegister里面的smrecordcounts字段控制的，还需要修改这个值才可以。</p> 
<p><img src="https://images2.imgbox.com/f6/a4/cZaaJY7F_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Oracle_1865"></a>问题四：打开Oracle数据源失败，提示"无系统表，且非扩展展开"</h4> 
<p>解决办法：</p> 
<p>无系统表说明该用户名没有在桌面中创建数据源，需要先新建数据库型数据源。</p> 
<h4><a id="Oracle_1871"></a>问题五：创建Oracle数据源失败，提示"该用户名已存在数据源"</h4> 
<p>解决办法：</p> 
<p>这个错误说明该用户名已经是我们的数据源了，可以直接打开，需要注意的是Oracle是一个用户名对应一个数据源，如果需要创建多个数据源可以新建多个用户名。</p> 
<h4><a id="OracleOracleiDesktopORA28040_No_Matching_authentication_protoco_1876"></a>问题六：本机配置好Oracle数据库的客户端后，连接远程服务器的Oracle数据库，在iDesktop新建数据库数据源报错“ORA-28040 No Matching authentication protoco</h4> 
<p>问题原因：</p> 
<p>本机Orcale客户端版本和访问的Oracle服务端的版本不一致</p> 
<p>解决办法：</p> 
<p>在本机安装与远程电脑的Oeacle服务端一样的客户端版本即可。</p> 
<h4><a id="LinuxOracle11g_1884"></a>问题七：Linux系统如何正确连接Oracle11g的客户端</h4> 
<p>解决办法：<br> 1、下载客户端包，链接：https://note.youdao.com/ynoteshare/index.html?id=fac82b258082f4b3eadff3d092888619&amp;type=note&amp;_time=1688433689671</p> 
<p>2、设置环境变量：<img src="https://images2.imgbox.com/34/fb/b6upUm1f_o.png" alt="在这里插入图片描述"><br> 3、修改tnsnames.ora文件</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">orcl</span><span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
    <span class="token punctuation">(</span>ADDRESS_LIST <span class="token operator">=</span>
      <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> <span class="token number">10.10</span>.1.65<span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> <span class="token number">1521</span><span class="token punctuation">))</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">(</span>CONNECT_DATA <span class="token operator">=</span>
      <span class="token punctuation">(</span>SERVICE_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
</code></pre> 
<h3><a id="2MySQL_1904"></a>2、MySQL类</h3> 
<h4><a id="MySQLsxwuXMLMySQL_Got_a_packet_bigger_than_max_allowed_packet_bytes_1906"></a>问题一：MySQL报错：保存工作空间失败，sxwu中读取XML信息失败，MySQL Got a packet bigger than ‘max_allowed_packet’ bytes，如何修改？</h4> 
<p>解决办法：</p> 
<p>my.ini中max_allowed_packet这个默认值太小了数据没法传输进去，导致保存失败了，将值改大一些，再重启服务。</p> 
<p><img src="https://images2.imgbox.com/27/4d/jbBbuyf7_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="MySQL_1915"></a>问题二：MySQL数据源不支持保存中文名称的数据集吗？</h4> 
<p>解决办法：</p> 
<p>可以支持中文名称，以保证不乱码，需要在my.ini文件里面设置一下默认的字符集编码为utf8，然后重启服务。</p> 
<p><img src="https://images2.imgbox.com/81/73/kBliyt7Y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="MySQL8_1924"></a>问题三：MySQL每隔8小时就会自动断开，怎么解决？</h4> 
<p>解决办法：</p> 
<p>修改MySQL配置参数wait_timeout，其默认值为 28800秒（8小时）。其意义为关闭一个连接之前在这个连接上等到行动的秒数，也就是说，如果一个连接闲置超过这个选项所设置的秒数，MySQL会主动断开这个连接。</p> 
<p><img src="https://images2.imgbox.com/a7/77/ZpDjMEyq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="MySQL_1933"></a>问题四：桌面软件新建MySQL数据库型数据源失败是什么原因？</h4> 
<p>具体报错：</p> 
<p>[error] 值域表 SmDomains 创建失败,</p> 
<p>[error] Failed Exec strSQL : SELECT a.DomainID,a.DomainName,a.DomainDescription,a.DomainType,b.FieldType,b.DomainRangeInfos FROM kjsj.SmDomains a, kjsj.SmRangeDomains b WHERE a.DomainID=b.DomainID-Unknown error 1146,</p> 
<p>[error] Failed Exec strSQL : CREATE TABLE kjsj.SmDomains(DomainID INT NOT NULL PRIMARY KEY,DomainName VARCHAR(64) NOT NULL,DomainDescription VARCHAR(256),DomainType INT NOT NULL) ENGINE = MyISAM-Unknown error 3161</p> 
<p>问题原因：</p> 
<p>客户部署的MySQL使用的innodb引擎，iDesktop默认MySQL使用myisam引擎，导致创建系统表时失败。</p> 
<p>解决办法：</p> 
<p>打开在iDesktop安装目录的Bin文件夹下面的SuperMap.xml配置文件，修改MySQLEngineType参数为对应引擎，重启iDesktop,重新新建数据库型数据源即可。MySQLEngineType参数如下：</p> 
<p>&lt;!–MYISAM:1, InnoDB:2MEMORY:3,NDB:4 after 802–&gt;</p> 
<p>&lt;MySQLEngineType&gt;1&lt;/MySQLEngineType&gt;</p> 
<h4><a id="MySQLPlugin_sha256_password_could_not_be_loadedmysql_57xNavicat_1955"></a>问题五：桌面软件创建MySQL数据源失败，日志报错：Plugin sha256_password could not be loaded，是什么原因？数据库版本是mysql 5.7.x，同样的用户和密码在Navicat可以打开。</h4> 
<p>问题原因：</p> 
<p>在MySQL 5.7.X版本的数据库里提供两种身份验证插件mysql_native_password和sha256_password。默认应该是mysql_native_password。出现报错的用户应该使用了sha256_password插件，目前桌面产品里未集成该插件库。</p> 
<p>解决办法：</p> 
<p>目前有两种办法可以解决：<br> 1、将Navicat目录下的sha256_password.dll插件库拷贝到iDesktopX的Bin目录即可。<br> 2、修改该用户的身份验证插件为mysql_native_password即可，步骤如下：<br> // 系统用户登录，查看所有用户及对应身份验证插件<br> SELECT user, host, plugin from mysql.user;<br> // 修改对应用户的身份验证插件<br> alter user ‘用户名’@‘主机名’ identified with mysql_native_password by ‘密码’;<br> // 更改生效<br> FLUSH PRIVILEGES;<br> // 再次查询用户对应身份验证插件为mysql_native_password即可，再启动iDesktopX进行mysql数据源创建。<br> 注：从 MySQL 8.0 开始，默认的身份验证插件已更改为caching_sha2_password。</p> 
<h4><a id="MySQLERROR_1045_28000_Access_denied_for_user_root127001_using_password_YESmysql_57x_1974"></a>问题六：桌面软件创建MySQL数据源失败，日志报错：ERROR 1045 (28000): Access denied for user ‘root’@‘127.0.0.1’ (using password: YES)，是什么原因？数据库版本是mysql 5.7.x。</h4> 
<p>问题原因：</p> 
<p>mysql数据库安装的默认用户或第一次创建的用户，没有远程连接权限。</p> 
<p>解决办法：</p> 
<p>数据库服务端登录，开启用户的远程登录权限，步骤如下：<br> // 本地连接上数据库，执行开启远程权限语句<br> GRANT ALL PRIVILEGES ON . TO ‘root’@‘%’ IDENTIFIED BY ‘admin123456’ WITH GRANT OPTION;<br> // 配置生效，再次远程连接即可<br> flush privileges;</p> 
<h4><a id="MySQLHost_is_not_allowed_to_connect_to_this_MySQL_servermysql_57x_1987"></a>问题七：桌面软件远程连接MySQL数据源失败，日志报错：Host is not allowed to connect to this MySQL server，是什么原因？数据库版本是mysql 5.7.x。</h4> 
<p>问题原因：</p> 
<p>数据库服务端未配置host，导致无法远程连接。</p> 
<p>解决办法：</p> 
<p>数据库服务端登录，开启用户允许远程登录的机器为所有，步骤如下：<br> 1、在装有MySQL的机器上登录MySQL mysql -u root -p密码；<br> 2、执行use mysql;<br> 3、执行update user set host = ‘%’ where user = ‘supermap’;<br> 4、执行FLUSH PRIVILEGES;</p> 
<h4><a id="win60MBMySQLerror_SHOULD_SET_LARGE_PACKET_SIZEmysql_57x_2000"></a>问题八：win环境上桌面软件导入60+MB大小的符号库资源文件后，保存为MySQL工作空间失败，日志报错：[error] SHOULD_SET_LARGE_PACKET_SIZE，是什么原因？数据库版本是mysql 5.7.x。</h4> 
<p>问题原因：</p> 
<p>这是由于mysql数据库的字符缓冲区大小或blob类型大小限制导致的。</p> 
<p>解决办法：</p> 
<ol><li>修改windows的my.ini或Linux下的my.cnf文件中的变量（默认只有4m）：<br> max_allowed_packet=256m</li><li>重启mysql服务，然后连接mysql查看是否生效了：<br> mysql -u root -p<br> show VARIABLES like ‘%max_allowed_packet%’;</li></ol> 
<h4><a id="winmysqlIncorrect_string_value_xE6x98x9FxE7xBAxA7_for_column_SmPath_at_row_1mysql_2013"></a>问题九：win环境上桌面软件在mysql数据源中创建镶嵌数据集，添加中文路径下的影像文件后，打开镶嵌数据集在地图显示空白，日志报错：Incorrect string value: ‘\xE6\x98\x9F\xE7\xBA\xA7…’ for column ‘SmPath’ at row 1，这是什么原因？若是关闭该mysql数据源也会导致桌面崩溃。</h4> 
<p>问题原因：</p> 
<p>如果添加英文路径下的影像文件没有该问题，那么就是是数据库的编码导致问题。</p> 
<p>解决办法：</p> 
<p>修改mysql数据库的编码为utf8或者直接改对应库的编码。在Navicat连接上，编辑该库修改如下：<br> 字符集=utf8mb4<br> 排序规则=utf8mb4_general_ci</p> 
<h3><a id="3DM_2024"></a>3、DM类</h3> 
<h3><a id="4PostgreSQL_2026"></a>4、PostgreSQL类</h3> 
<h4><a id="PostgreSQLrelation_sm_seq_datasource_already_exists_2028"></a>问题一：桌面软件新建PostgreSQL数据源报错：“relation “sm_seq_datasource” already exists”，如何解决？</h4> 
<p>解决方法：</p> 
<p>该报错为有库或表重复问题，具体可以从以下三方面排查：</p> 
<p>（1）检查用户操作是否合法，是否已存在库名和新建数据源名称一样；</p> 
<p>（2）PostgreSQL区分大小写，PostgreSQL对大小写敏感，PostgreSQL官方推荐命名方式都是小写+下划线，比如系统索引表命名：pg_indexes；</p> 
<p>（3）检查是否因为主键约束名等于表名，创建主键约束期间触发了错误"关系已存在"</p> 
<h3><a id="4_2040"></a>4、其他</h3> 
<h4><a id="could_not_create_index_idx_smregister_2042"></a>问题一：桌面打开数据库型数据源报错could not create index “idx_smregister”，如何解决？</h4> 
<p>解决方法：</p> 
<p>连接对应的数据库，找到smregister表，删除表中的重复数据。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/535a04736585f4df6501a4c38ca2019c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu 22.04安装软件无侧边栏应用图标解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f3e820277ff7c859a27cfda113ea8f78/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">我的《CSDN铁粉宝典》</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>