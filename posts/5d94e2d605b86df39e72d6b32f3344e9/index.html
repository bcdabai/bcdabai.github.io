<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RESTful风格(使用Ajax&#43;Spring MVC框架实现) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="RESTful风格(使用Ajax&#43;Spring MVC框架实现)" />
<meta property="og:description" content="RESTful简介： （详情参考：） http://baike.baidu.com/link?url=1FMTyxYwnN5OED7oXwbLBI1z35JCuE1bfIamqJMrbBUeNDPmQ6U3t-gx9tGHC170A0akfPhhzfBNWF0BwHj-xq http://developer.51cto.com/art/200908/141825.htm https://www.zhihu.com/question/28557115 http://blog.csdn.net/aooppo/article/details/8686595 … 个人理解： 在同一个路径下，不同的协议请求（Get、Post、Put、Delete、Patch、Head、Option s、Trace）实现不同的功能。
一、环境配置 ①、开发前的基础配置：配置好相应的Spring MVC、JSON和Restful需要的依赖程序包。 ②、Tomcat9.0服务器配置 ③、在项目配置web.xml
&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;!-- 路径是 &#39;/&#39; 斜杠 --&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; ④、建立一个测试类TextRestful .java，测试环境是否可用
@Controller public class TextRestful { @RequestMapping(value=&#34;/restful&#34;,produces=&#34;text/plain;charset=UTF-8&#34;) public @ResponseBody String info() { return &#34;Hello World!&#34;; } } 浏览器输入路径：http://localhost/XXXX（项目名称） / restful（方法路径） 页面显示：Hello World!则代表环境搭建完成。 ⑤准备要测试的Vo类
public class Emp implements Serializable { private Integer empno; private String ename; private double sal; private Date hiredate; //此处省略setter()、getter()和toString()方法 }" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5d94e2d605b86df39e72d6b32f3344e9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-07T16:30:10+08:00" />
<meta property="article:modified_time" content="2018-02-07T16:30:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RESTful风格(使用Ajax&#43;Spring MVC框架实现)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>RESTful简介： <br> （详情参考：） <br> <a href="http://baike.baidu.com/link?url=1FMTyxYwnN5OED7oXwbLBI1z35JCuE1bfIamqJMrbBUeNDPmQ6U3t-gx9tGHC170A0akfPhhzfBNWF0BwHj-xq" rel="nofollow">http://baike.baidu.com/link?url=1FMTyxYwnN5OED7oXwbLBI1z35JCuE1bfIamqJMrbBUeNDPmQ6U3t-gx9tGHC170A0akfPhhzfBNWF0BwHj-xq</a> <br> <a href="http://developer.51cto.com/art/200908/141825.htm" rel="nofollow">http://developer.51cto.com/art/200908/141825.htm</a> <br> <a href="https://www.zhihu.com/question/28557115" rel="nofollow">https://www.zhihu.com/question/28557115</a> <br> <a href="http://blog.csdn.net/aooppo/article/details/8686595">http://blog.csdn.net/aooppo/article/details/8686595</a> <br> … <br> 个人理解： <br> 在同一个路径下，不同的协议请求（Get、Post、Put、Delete、Patch、Head、Option s、Trace）实现不同的功能。</p> 
<p>一、环境配置 <br> ①、开发前的基础配置：配置好相应的Spring MVC、JSON和Restful需要的依赖程序包。 <br> ②、Tomcat9.0服务器配置 <br> ③、在项目配置web.xml</p> 
<pre><code>&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
&lt;init-param&gt; 
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:applicationContext-mvc.xml&lt;/param-value&gt;
&lt;/init-param&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
    &lt;!-- 路径是 '/' 斜杠 --&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre> 
<p>④、建立一个测试类TextRestful .java，测试环境是否可用</p> 
<pre><code>@Controller 
public class TextRestful {
@RequestMapping(value="/restful",produces="text/plain;charset=UTF-8")
public @ResponseBody String info() {
    return "Hello World!";
}
}
</code></pre> 
<p>浏览器输入路径：<a href="http://localhost/XXXX" rel="nofollow">http://localhost/XXXX</a>（项目名称） / restful（方法路径） <br> 页面显示：Hello World!则代表环境搭建完成。 <br> ⑤准备要测试的Vo类</p> 
<pre><code>public class Emp implements Serializable {
private Integer empno;
private String ename;
private double sal;
private Date hiredate;
//此处省略setter()、getter()和toString()方法
</code></pre> 
<p>}</p> 
<p>⑥准备好测试的test.JSP页面</p> 
<pre><code>&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%&gt;
&lt;%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
// request.setCharacterEncoding("UTF-8") ;
%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;base href="&lt;%=basePath%&gt;"&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;script type="text/javascript" src="js/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/restful.js"&gt;&lt;/script&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;input type="button" id="addBut" name="addBut" value="增加"&gt;&lt;br&gt;
&lt;input type="button" id="editBut" name="editBut" value="更新"&gt;&lt;br&gt;
&lt;input type="button" id="deleteBut" name="deleteBut" value="删除"&gt;&lt;br&gt;
&lt;input type="button" id="getBut" name="getBut" value="查询"&gt;&lt;br&gt;
&lt;input type="button" id="listBut" name="listBut" value="分页显示"&gt;&lt;br&gt;
&lt;div id="showDiv"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>二、Restful风格实现CRUD <br> 1、POST请求实现数据增加： <br> ①、在TextRestful.java中增加：</p> 
<pre><code>@RequestMapping(value="/restful",method=RequestMethod.POST,produces="application/json;charset=UTF-8")
public @ResponseBody Object add(Emp vo){
    log.info("数据增加成功："+vo);
    JSONObject js = new JSONObject();
    js.put("flag", true);
    return js;
}
</code></pre> 
<p>②、在restful.js中增加：</p> 
<pre><code>$(addBut).on("click",function(){
    $.ajax({
        url: "restful",
        type : "post",
        data : {
            empno : 110,
            ename : "RESTful",
            sal : 1.1,
            hiredate : "1111-11-11"
        },
        success : function(data){
            $(showDiv).append("&lt;p&gt; 数据增加成功："+data.flag+"&lt;/p&gt;");
        },
        dataType : "json",
        error : function(data){
            $(showDiv).append("&lt;p&gt;出错了&lt;/p&gt;");
        }
    })
});
</code></pre> 
<p>2、PUT请求实现数据更新 <br> ①、在TextRestful.java中增加：</p> 
<pre><code> @RequestMapping(value="/restful",method=RequestMethod.PUT,produces="application/json;charset=UTF-8")
public @ResponseBody Object edit(Emp vo){
    log.info("数据更新成功："+vo);
    JSONObject js = new JSONObject();
    js.put("flag", true);
    return js;
}
</code></pre> 
<p>②、在restful.js中增加：</p> 
<pre><code>$(editBut).on("click",function(){
    $.ajax({
        url: "restful",
        type : "post",
        data : {
            _method : "put",
            empno : 110,
            ename : "RESTful",
            sal : 1.1,
            hiredate : "1111-11-11"
        },
        success : function(data){
            $(showDiv).append("&lt;p&gt; 数据更新成功："+data.flag+"&lt;/p&gt;");
        },
        dataType : "json",
        error : function(data){
            $(showDiv).append("&lt;p&gt;出错了&lt;/p&gt;");
        }
    })
});
</code></pre> 
<p>3、DELETE请求实现数据删除 <br> ①、在TextRestful.java中增加：</p> 
<pre><code>@RequestMapping(value="/restful",method=RequestMethod.DELETE,produces="application/json;charset=UTF-8")
public @ResponseBody Object remove(int mid){
    log.info("要删除的是："+mid);
    JSONObject js = new JSONObject();
    js.put("flag", true);
    return js;
}
</code></pre> 
<p>②、在restful.js中增加：</p> 
<pre><code>$(deleteBut).on("click",function(){
    $.ajax({
        url: "restful",
        method : "post" ,
        data : {
            _method : "delete",
            mid : 1
        },
        dataType : "json",
        success : function(data){
            $(showDiv).append("&lt;p&gt; 数据删除成功："+data.flag+"&lt;/p&gt;");
        },
        error : function(data){
            $(showDiv).append("&lt;p&gt;出错了&lt;/p&gt;");
        }
    })
});
</code></pre> 
<p>4、GET请求实现数据查询 <br> ①、在TextRestful.java中增加：</p> 
<pre><code>@RequestMapping(value="/restful/{mid:\\d+}",method=RequestMethod.GET,produces="application/json;charset=UTF-8")
public @ResponseBody Object get(@PathVariable("mid") int mid){
    log.info("要查看的是："+mid);
    Emp vo = new Emp();
    vo.setEmpno(mid);
    vo.setEname("SMITH");
    vo.setSal(1.1);
    vo.setHiredate(new Date());
    JSONObject js = new JSONObject();
    js.put("emp", vo);
    return js;
}
</code></pre> 
<p>②、在restful.js中增加：</p> 
<pre><code>$(getBut).on("click",function(){
    $.ajax({
        url: "restful/1",
        method : "get" ,
        data : {
        },
        dataType : "json",
        success : function(data){
            $(showDiv).append("&lt;p&gt; 编号："+data.allMembers.empno+"，名称："+data.allMembers.ename+",工资"+
                    data.allMembers.sal+",日期:"+data.emp.hiredate+"&lt;/p&gt;");
            console.log(1);
        },
        error : function(data){
            $(showDiv).append("&lt;p&gt;出错了&lt;/p&gt;");
        }
    })
});
</code></pre> 
<p>5、PATCH请求实现数据分页 <br> ①、在TextRestful.java中增加：</p> 
<pre><code>@RequestMapping(value="/restful/{condition}",method=RequestMethod.PATCH,produces="application/json;charset=UTF-8")
public @ResponseBody Object list(@PathVariable("condition") String param){
    log.info("查看的是："+param);
    int currentPage = 4;
    int lineSize = 5;
    List&lt;Emp&gt; all = new ArrayList&lt;Emp&gt;() ;
    for (int x = ((currentPage-1)*lineSize);x&lt; currentPage *lineSize; x ++) {
        Emp vo = new Emp() ;
        vo.setEmpno(x);
        vo.setEname("姓名 - " + x);
        vo.setSal(10000.0 + x);
        vo.setHiredate(new Date());
        all.add(vo) ;
    }
    Map&lt;String,Object&gt; map = new HashMap&lt;String,Object&gt;();
    map.put("allEmps", all);
    return map;
}
</code></pre> 
<p>②、在restful.js中增加：</p> 
<pre><code>$(listBut).on("click",function(){
    $.ajax({
        url: "restful/1",
        method : "PATCH" ,
        dataType : "json",
        success : function(data){
            for(var t=0;t&lt;data.allEmps.length;t++){
                $(showDiv).append("&lt;p&gt; 编号："+data.allEmps[t].empno+"，名称："+data.allEmps[t].ename+",工资"+
                        data.allEmps[t].sal+",日期:"+data.allEmps[x].hiredate+"&lt;/p&gt;");
            }
        },
        error : function(data){
            $(showDiv).append("&lt;p&gt;出错了&lt;/p&gt;");
        }
    })
});
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1640381c91fdfd63a18b9e0557f8c10a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">无翼鸟</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ca174a2da5dddf1d06ec447a0e9adf84/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">css3自定义滚动条样式写法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>