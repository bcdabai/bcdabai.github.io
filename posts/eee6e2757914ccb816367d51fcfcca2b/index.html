<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 倒计时插件 vue2-countdown - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 倒计时插件 vue2-countdown" />
<meta property="og:description" content="vue2-countdown 基于vue2.0的活动倒计时组件
可以使用服务端当前时间
在倒计时开始或者结束的时候,可以自定义回调
文档：https://cgygd.github.io/vue2-countdown/
demo：https://cgygd.github.io/vue2-countdown/example/index.html
示例.png
安装 1.cnpm/npm
npm install vue2-countdown --save 2.Git 下载源码
git clone https://github.com/cgygd/vue2-countdown 使用 &lt;count-down v-on:end_callback=&#34;countDownE_cb()&#34; :currentTime=&#34;currentTime&#34; :startTime=&#34;startTime&#34; :endTime=&#34;endTime&#34; :tipText=&#34;&#39;距离订单开始还有&#39;&#34; :tipTextEnd=&#34;&#39;距离订单关闭还剩&#39;&#34; :endText=&#34;&#39;订单已关闭&#39;&#34; :dayTxt=&#34;&#39;天&#39;&#34; :hourTxt=&#34;&#39;小时&#39;&#34; :minutesTxt=&#34;&#39;分钟&#39;&#34; :secondsTxt=&#34;&#39;秒&#39;&#34;&gt; &lt;/count-down&gt; import CountDown from &#39;vue2-countdown&#39; components: { CountDown }, data() { return { currentTime:0, startTime:0, endTime:0, } }, methods: { countDownS_cb: function (x) { console.log(x) }, countDownE_cb: function (x) { console.log(x) } } 参数解释 currentTime -- 当前时间戳,如果不传,默认获取用户本地的时间(建议传服务器的当前时间)
type: Number" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/eee6e2757914ccb816367d51fcfcca2b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-29T00:18:00+08:00" />
<meta property="article:modified_time" content="2020-07-29T00:18:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 倒计时插件 vue2-countdown</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>vue2-countdown</h2> 
<ul><li> <p>基于vue2.0的活动倒计时组件</p> </li><li> <p>可以使用服务端当前时间</p> </li><li> <p>在倒计时开始或者结束的时候,可以自定义回调</p> </li><li> <p>文档：<a href="https://cgygd.github.io/vue2-countdown/" rel="nofollow">https://cgygd.github.io/vue2-countdown/</a></p> </li><li> <p>demo：<a href="https://cgygd.github.io/vue2-countdown/example/index.html" rel="nofollow">https://cgygd.github.io/vue2-countdown/example/index.html</a></p> </li></ul> 
<p><img alt="" src="https://images2.imgbox.com/d3/b3/hEkSWq4d_o.png"></p> 
<p>示例.png</p> 
<h3>安装</h3> 
<p>1.cnpm/npm</p> 
<p> </p> 
<pre><code>npm install vue2-countdown --save
</code></pre> 
<p>2.Git 下载源码</p> 
<p> </p> 
<pre><code>git clone https://github.com/cgygd/vue2-countdown
</code></pre> 
<h3>使用</h3> 
<p> </p> 
<pre><code class="language-javascript">&lt;count-down v-on:end_callback="countDownE_cb()"
                :currentTime="currentTime"
                :startTime="startTime"
                :endTime="endTime"
                :tipText="'距离订单开始还有'"
                :tipTextEnd="'距离订单关闭还剩'"
                :endText="'订单已关闭'"
                :dayTxt="'天'"
                :hourTxt="'小时'"
                :minutesTxt="'分钟'"
                :secondsTxt="'秒'"&gt;
&lt;/count-down&gt;
</code></pre> 
<p> </p> 
<pre><code class="language-javascript">import CountDown from 'vue2-countdown'
components: {
    CountDown
},
data() {
     return {
                currentTime:0,
                startTime:0,
                endTime:0,
            }
        },
methods: {
  countDownS_cb: function (x) {
    console.log(x)
  },
  countDownE_cb: function (x) {
    console.log(x)
  }
}
</code></pre> 
<h4>参数解释</h4> 
<ol><li> <p>currentTime -- 当前时间戳,如果不传,默认获取用户本地的时间(建议传服务器的当前时间)</p> <p><strong>type</strong>: Number</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : ( new Date() ).getTime()</p> </li><li> <p>startTime -- 开始时间戳</p> <p><strong>type</strong>: Number</p> <p><strong>required</strong> : true</p> </li><li> <p>endTime -- 结束时间戳</p> <p><strong>type</strong>: Number</p> <p><strong>required</strong> : true</p> </li><li> <p>tipText -- 开始倒计时之前的提示文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : 距离开始</p> </li><li> <p>tipTextEnd -- 开始倒计时之后的提示文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : 距离结束</p> </li><li> <p>endText -- 倒计时结束之后的提示文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : 已结束</p> </li><li> <p>dayTxt -- 自定义显示的天数文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : :</p> </li><li> <p>hourTxt -- 自定义显示的小时文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : :</p> </li><li> <p>secondsTxt -- 自定义显示的分钟文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : :</p> </li><li> <p>secondsFixed -- 自定义显示的秒数文字</p> <p><strong>type</strong>: String</p> <p><strong>required</strong> : false</p> <p><strong>default</strong> : :</p> </li></ol> 
<h4>回调方法</h4> 
<ol><li> <p>start_callback() -- 开始倒计时结束之后的回调方法</p> <p><strong>type</strong>: Function</p> <p><strong>required</strong> : false</p> </li><li> <p>end_callback() -- 活动倒计时结束之后的回调方法</p> <p><strong>type</strong>: Function</p> <p><strong>required</strong> : false</p> </li></ol> 
<h4>问题修改</h4> 
<p><strong>但是在使用过程中发现了vue2-countdown 项目存在的一些问题：</strong></p> 
<p>1.无法自定义提示文字</p> 
<p>作者在项目中注释掉了，导致我们在引入组建添加了此配置的话也无法显示提示语。<br><strong>解决方法：</strong><br> 1.在node_modules中找到安装的vue2-countdown文件，修改vue2-countdown.vue文件，将注释消除。</p> 
<p><img alt="" src="https://images2.imgbox.com/30/5e/a7y86WN9_o.png"></p> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/03/b1/6V8fU7hp_o.png"></p> 
<p> </p> 
<p>2.其实整个项目有用的只有lib/vue2-countdown.vue文件，所有也可以将该文件内容复制一份到自己的项目，新建一个vue文件，作为组件，然后将组件的注释解除。</p> 
<p>2.倒计时逻辑问题</p> 
<p>引入后发现无论我们传什么时间过去，倒计时都是结束时间-开始时间重新计算，并非根据当前时间计算结束时间-当前时间的值，所以我们怎么配置，怎么刷新结果都是（end-start)，其实好像都和当前时间没有关系</p> 
<p><strong>解决方法</strong>：将原先的this.start改为this.current。作者原先虽然获取到了传入的当前时间戳，但在method中却没有使用。将start改为current可以保证输出的是当前时间距离结束时间的时间长度。</p> 
<p><img alt="" src="https://images2.imgbox.com/8a/45/1TFiRcXl_o.png"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14925cad489b49a9166391ddab5ae79f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构与算法系列（二）—冒泡排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/340a79dcba3d3b78b0351b6492433ce5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IntelliJ IDEA 2020.2 稳定版发布</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>