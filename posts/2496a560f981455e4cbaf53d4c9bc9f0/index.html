<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>æ·±åº¦ç†è§£ Spring AOP - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="æ·±åº¦ç†è§£ Spring AOP" />
<meta property="og:description" content="ä¸€ã€ä»€ä¹ˆæ˜¯AOP(é¢å‘åˆ‡é¢ç¼–ç¨‹)ï¼ŸğŸ‰ AOP ä¸º Aspect Oriented Programming çš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼ å’Œè¿è¡ŒæœŸ åŠ¨æ€ä»£ç† å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚
AOP ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ OOPï¼ˆé¢å‘å¯¹è±¡ï¼‰ çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹ çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚
äºŒã€AOP çš„ä½œç”¨åŠå…¶ä¼˜åŠ¿ğŸ‰ ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º
ä¼˜åŠ¿ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤
ä¸‰ã€AOP çš„åº•å±‚å®ç°ğŸ‰ å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç° çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚
åŠ¨æ€ä»£ç†çš„ä½œç”¨ï¼š
1ï¼‰åœ¨ç›®æ ‡ç±»æºä»£ç ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå¢åŠ åŠŸèƒ½ã€‚2ï¼‰å‡å°‘ä»£ç çš„é‡å¤3ï¼‰ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ä»£ç 4ï¼‰è§£è€¦åˆï¼Œè®©ä½ çš„ä¸šåŠ¡åŠŸèƒ½å’Œæ—¥å¿—ï¼Œäº‹åŠ¡éä¸šåŠ¡åŠŸèƒ½åˆ†ç¦»ã€‚ å››ã€AOP ç›¸å…³æ¦‚å¿µğŸ‰ Spring çš„ AOP å®ç°åº•å±‚å°±æ˜¯å¯¹åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£… ï¼Œå°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚
åœ¨æ­£å¼è®²è§£ AOP çš„æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ AOP çš„ç›¸å…³æœ¯è¯­ï¼Œå¸¸ç”¨çš„æœ¯è¯­å¦‚ä¸‹ï¼š
åˆ‡é¢ï¼ˆAspectï¼‰
ä¸€ä¸ªåˆ‡é¢å°±æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡= è¦ä¸ºé‚£äº›ç±»ç”Ÿæˆä»£ç†&#43;è¦æ·»åŠ çš„é¢å¤–åŠŸèƒ½æ˜¯é‚£äº› åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰ï¼šå°†æ¥è¦ä¸ºé‚£äº›ç±»ç”Ÿæˆä»£ç†å¯¹è±¡é€šçŸ¥/ å¢å¼ºï¼ˆadviceï¼‰ï¼šå°±æ˜¯è¦æ·»åŠ çš„é¢å¤–åŠŸèƒ½ ç”Ÿæ´»æ¡ˆä¾‹ï¼šç»™é¢åŒ…ä¹‹é—´æ¶‚æœé…±
æ³¨æ„ï¼šåˆ‡é¢ï¼ˆAspectï¼‰=åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰&#43;é€šçŸ¥ç‚¹ï¼ˆadviceï¼Œé¢å¤–åŠŸèƒ½ï¼‰
AOPä¸­çš„ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰é€šçŸ¥
å‰ç½®é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•ä¹‹å‰çš„é¢å¤–åŠŸèƒ½ MethodBeforeAdvice ç¯ç»•é€šçŸ¥ï¼šå®ƒæ˜¯springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ§åˆ¶å¢å¼ºæ–¹æ³•ä½•æ—¶æ‰§è¡Œçš„æ–¹å¼ MethodInterceptorï¼ˆInterceptor [ÉªntÉ™ËˆsÉ›ptÉ™]æ‹¦æˆªå™¨ï¼‰
åç½®é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•ä¹‹åçš„é¢å¤–åŠŸèƒ½ AfterReturningAdviceï¼ˆreturning[rÉªËˆtÉœËrnÉªÅ‹]ï¼‰
å¼‚å¸¸é€šçŸ¥ï¼šæ‰§è¡Œå¼‚å¸¸çš„é¢å¤–åŠŸèƒ½ ThrowsAdvice
æœ€ç»ˆé€šçŸ¥ï¼šä¸€å®šæ‰§è¡Œçš„é¢å¤–åŠŸèƒ½
Target(ç›®æ ‡å¯¹è±¡)ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡ä»£ç†ï¼ˆProxy[ËˆprÉ‘Ëksi]ï¼‰:ä¸€ä¸ªç±»è¢«AOPæ³¨å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»è¿æ¥ç‚¹ï¼ˆjoinPointï¼‰:æ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•(é¢å¤–åŠŸèƒ½)ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ äº”ã€åˆ‡é¢ç¼–ç¨‹æ­¥éª¤ğŸ‰ 1ã€äº”ç§é€šçŸ¥ç±»ğŸ¥ AOP åˆ‡é¢=åˆ‡å…¥ç‚¹&#43;é€šçŸ¥
å‰ç½®é€šçŸ¥ï¼šMethodBeforeAdvice
åç½®é€šçŸ¥:AfterReturnAdvice
ç¯ç»•é€šçŸ¥:MethodInterceptor
å¼‚å¸¸é€šçŸ¥:ThrowsAdvice(throw [Î¸roÊŠz])
æœ€ç»ˆé€šçŸ¥" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2496a560f981455e4cbaf53d4c9bc9f0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-22T08:01:24+08:00" />
<meta property="article:modified_time" content="2023-07-22T08:01:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">æ·±åº¦ç†è§£ Spring AOP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="AOP_0"></a>ä¸€ã€ä»€ä¹ˆæ˜¯AOP(é¢å‘åˆ‡é¢ç¼–ç¨‹)ï¼ŸğŸ‰</h2> 
<p>AOP ä¸º Aspect Oriented Programming çš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼ å’Œè¿è¡ŒæœŸ åŠ¨æ€ä»£ç† å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚</p> 
<p>AOP ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ OOPï¼ˆé¢å‘å¯¹è±¡ï¼‰ çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹ çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p> 
<h2><a id="AOP__6"></a>äºŒã€AOP çš„ä½œç”¨åŠå…¶ä¼˜åŠ¿ğŸ‰</h2> 
<p>ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º</p> 
<p>ä¼˜åŠ¿ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤</p> 
<h2><a id="AOP__11"></a>ä¸‰ã€AOP çš„åº•å±‚å®ç°ğŸ‰</h2> 
<p>å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç° çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚</p> 
<p><strong>åŠ¨æ€ä»£ç†çš„ä½œç”¨</strong>ï¼š</p> 
<ul><li>1ï¼‰åœ¨ç›®æ ‡ç±»æºä»£ç ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå¢åŠ åŠŸèƒ½ã€‚</li><li>2ï¼‰å‡å°‘ä»£ç çš„é‡å¤</li><li>3ï¼‰ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ä»£ç </li><li>4ï¼‰è§£è€¦åˆï¼Œè®©ä½ çš„ä¸šåŠ¡åŠŸèƒ½å’Œæ—¥å¿—ï¼Œäº‹åŠ¡éä¸šåŠ¡åŠŸèƒ½åˆ†ç¦»ã€‚</li></ul> 
<h2><a id="AOP__21"></a>å››ã€AOP ç›¸å…³æ¦‚å¿µğŸ‰</h2> 
<p>Spring çš„ AOP å®ç°åº•å±‚å°±æ˜¯å¯¹åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£… ï¼Œå°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚</p> 
<p>åœ¨æ­£å¼è®²è§£ AOP çš„æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ AOP çš„ç›¸å…³æœ¯è¯­ï¼Œå¸¸ç”¨çš„æœ¯è¯­å¦‚ä¸‹ï¼š</p> 
<ol><li>åˆ‡é¢ï¼ˆAspectï¼‰<br> ä¸€ä¸ªåˆ‡é¢å°±æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡= è¦ä¸ºé‚£äº›ç±»ç”Ÿæˆä»£ç†+è¦æ·»åŠ çš„é¢å¤–åŠŸèƒ½æ˜¯é‚£äº›</li></ol> 
<p><img src="https://images2.imgbox.com/00/a8/lYs7Nuwp_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ol start="2"><li>åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰ï¼šå°†æ¥è¦ä¸ºé‚£äº›ç±»ç”Ÿæˆä»£ç†å¯¹è±¡</li><li>é€šçŸ¥/ å¢å¼ºï¼ˆadviceï¼‰ï¼šå°±æ˜¯è¦æ·»åŠ çš„é¢å¤–åŠŸèƒ½</li></ol> 
<p>ç”Ÿæ´»æ¡ˆä¾‹ï¼šç»™é¢åŒ…ä¹‹é—´æ¶‚æœé…±<br> <img src="https://images2.imgbox.com/b6/eb/BnrsZeT9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ³¨æ„ï¼šåˆ‡é¢ï¼ˆAspectï¼‰=åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰+é€šçŸ¥ç‚¹ï¼ˆadviceï¼Œé¢å¤–åŠŸèƒ½ï¼‰</p> 
<p><img src="https://images2.imgbox.com/62/ef/j56HQcGj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ol start="4"><li>AOPä¸­çš„ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰é€šçŸ¥<br> å‰ç½®é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•ä¹‹å‰çš„é¢å¤–åŠŸèƒ½ MethodBeforeAdvice</li></ol> 
<p>ç¯ç»•é€šçŸ¥ï¼šå®ƒæ˜¯springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ§åˆ¶å¢å¼ºæ–¹æ³•ä½•æ—¶æ‰§è¡Œçš„æ–¹å¼ MethodInterceptorï¼ˆInterceptor [ÉªntÉ™ËˆsÉ›ptÉ™]æ‹¦æˆªå™¨ï¼‰</p> 
<p>åç½®é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•ä¹‹åçš„é¢å¤–åŠŸèƒ½ AfterReturningAdviceï¼ˆreturning[rÉªËˆtÉœËrnÉªÅ‹]ï¼‰</p> 
<p>å¼‚å¸¸é€šçŸ¥ï¼šæ‰§è¡Œå¼‚å¸¸çš„é¢å¤–åŠŸèƒ½ ThrowsAdvice</p> 
<p>æœ€ç»ˆé€šçŸ¥ï¼šä¸€å®šæ‰§è¡Œçš„é¢å¤–åŠŸèƒ½</p> 
<p><img src="https://images2.imgbox.com/7b/35/5tr0P9vt_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ol start="5"><li>Target(ç›®æ ‡å¯¹è±¡)ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</li><li>ä»£ç†ï¼ˆProxy[ËˆprÉ‘Ëksi]ï¼‰:ä¸€ä¸ªç±»è¢«AOPæ³¨å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»</li><li>è¿æ¥ç‚¹ï¼ˆjoinPointï¼‰:æ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•(é¢å¤–åŠŸèƒ½)ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹</li></ol> 
<h2><a id="_63"></a>äº”ã€åˆ‡é¢ç¼–ç¨‹æ­¥éª¤ğŸ‰</h2> 
<h3><a id="1_65"></a>1ã€äº”ç§é€šçŸ¥ç±»ğŸ¥</h3> 
<p>AOP åˆ‡é¢=åˆ‡å…¥ç‚¹+é€šçŸ¥</p> 
<p>å‰ç½®é€šçŸ¥ï¼šMethodBeforeAdvice<br> åç½®é€šçŸ¥:AfterReturnAdvice<br> ç¯ç»•é€šçŸ¥:MethodInterceptor<br> å¼‚å¸¸é€šçŸ¥:ThrowsAdvice(throw [Î¸roÊŠz])<br> æœ€ç»ˆé€šçŸ¥</p> 
<p>é€šçŸ¥çš„é…ç½®è¯­æ³•ï¼š</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>aop <span class="token operator">:</span> é€šçŸ¥ç±»å‹ method<span class="token operator">=</span>â€œåˆ‡é¢ç±»ä¸­æ–¹æ³•åâ€ pointcut<span class="token operator">=</span>â€œåˆ‡ç‚¹è¡¨è¾¾å¼"<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>é€šçŸ¥ç±»å‹<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å–</li></ul> 
<p>å½“å¤šä¸ªå¢å¼ºçš„åˆ‡ç‚¹è¡¨è¾¾å¼ç›¸åŒæ—¶ï¼Œå¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼è¿›è¡ŒæŠ½å–ï¼Œåœ¨å¢å¼ºä¸­ä½¿ç”¨ pointcut-ref å±æ€§ä»£æ›¿ pointcut å±æ€§æ¥å¼•ç”¨æŠ½å–åçš„åˆ‡ç‚¹è¡¨è¾¾å¼ã€‚</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>å¼•ç”¨myAspectçš„<span class="token class-name">Bean</span>ä¸ºåˆ‡é¢å¯¹è±¡<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>aop<span class="token operator">:</span>aspect ref<span class="token operator">=</span><span class="token string">"myAspect"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>pointcut id<span class="token operator">=</span><span class="token string">"myPointcut"</span> expression<span class="token operator">=</span><span class="token string">"execution(* com.tjcu.aop.*.*(..))"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>before method<span class="token operator">=</span><span class="token string">"before"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"myPointcut"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>before<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>aspect<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
</code></pre> 
<p>aopæ¤å…¥çš„é…ç½®</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>aop<span class="token operator">:</span>aspect ref<span class="token operator">=</span>â€œåˆ‡é¢ç±»â€<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>before method<span class="token operator">=</span>â€œé€šçŸ¥æ–¹æ³•åç§°â€ pointcut<span class="token operator">=</span>â€œåˆ‡ç‚¹è¡¨è¾¾å¼"<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>before<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>aspect<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
</code></pre> 
<p>åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼š</p> 
<pre><code class="prism language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ä¿®é¥°ç¬¦<span class="token punctuation">]</span> è¿”å›å€¼ç±»å‹ åŒ…å<span class="token punctuation">.</span>ç±»å<span class="token punctuation">.</span>æ–¹æ³•å<span class="token punctuation">(</span>å‚æ•°<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="2AOP_111"></a>2ã€AOPçš„å¼€å‘æ­¥éª¤ğŸ¥</h3> 
<p>1ã€å¼€å‘ç›®æ ‡ç±»</p> 
<p>2ã€å¼€å‘é€šçŸ¥ç±»ï¼Œç¡®å®šé¢å¤–åŠŸèƒ½</p> 
<p>3ã€ç®¡ç†é€šçŸ¥ç±»</p> 
<p>4ã€é…ç½®åˆ‡å…¥ç‚¹ ç¡®å®šè¦ä¸ºé‚£äº›ç±»æ·»åŠ é¢å¤–åŠŸèƒ½</p> 
<p>5ã€å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ spring</p> 
<p>6ã€ç»„è£…åˆ‡é¢ åˆ‡å…¥ç‚¹+é€šçŸ¥ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰</p> 
<h3><a id="3AOP_125"></a>3ã€AOPç¼–ç¨‹æ‰€éœ€è¦çš„ä¾èµ–ğŸ¥</h3> 
<blockquote> 
 <p>è¿™é‡Œæ˜¯å¼•ç”¨å¼•å…¥ä¾èµ–<br> spring-aop<br> spring-expression<br> spring-aspects</p> 
</blockquote> 
<h2><a id="AOP_133"></a>å…­ã€AOPå®ç°å‰ç½®é€šçŸ¥æ¡ˆä¾‹ğŸ‰</h2> 
<h3><a id="1_134"></a>1ã€ç›®æ ‡æ¥å£ç±»ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CityService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_143"></a>2ã€ç›®æ ‡å®ç°ç±»ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Description:ç›®æ ‡å¯¹è±¡
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CityServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">CityService</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å‰ç½®é€šçŸ¥ï¼šSystem.out.println("å˜»å˜»å“ˆå“ˆ");</span>

        <span class="token comment">//æ‰§è¡Œæ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ è°ƒç”¨Dao</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•è°ƒç”¨Dao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å‰ç½®é€šçŸ¥ï¼šSystem.out.println("å˜»å˜»å“ˆå“ˆ");</span>
        <span class="token comment">//æ‰§è¡Œæ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ è°ƒç”¨Dao</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ è°ƒç”¨Dao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_168"></a>3ã€å‰ç½®é€šçŸ¥ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰åŠ¨æ€ä»£ç†ä»£ç ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @Description: é€šçŸ¥ç±»ã€‚é¢å¤–åŠŸèƒ½
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBeforeAdvice</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * é¢å¤–åŠŸèƒ½ä¹¦å†™çš„æ–¹æ³•
     * å‚æ•°1ï¼šä»£ç†å¯¹è±¡å½“å‰è°ƒç”¨çš„æ–¹æ³•
     * å‚æ•°2ï¼šå½“å‰ä»£ç†å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°
     * å‚æ•°3ï¼šç›®æ ‡å¯¹è±¡ï¼ˆè¢«ä»£ç†çš„å¯¹è±¡ï¼‰
     * @param method
     * @param objects
     * @param o
     * @throws Throwable
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å˜»å˜»å“ˆå“ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_spring_193"></a>4ã€å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ springğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç®¡ç†ç›®æ ‡å¯¹è±¡<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"before.CityServiceImpl"</span> id<span class="token operator">=</span><span class="token string">"cityService"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç®¡ç†é€šçŸ¥ç±» åŠ¨æ€ä»£ç†å®ç°<span class="token constant">AOP</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"myBeforeAdvice"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"before.MyBeforeAdvice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="5_springxml__202"></a>5ã€åœ¨ spring.xml ä¸­é…ç½®ç»‡å…¥å…³ç³»ï¼ˆå‰ç½®åŠŸèƒ½ï¼‰ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç»„è£…åˆ‡é¢<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>é…ç½®åˆ‡å…¥ç‚¹
    id<span class="token operator">:</span>åˆ‡å…¥ç‚¹çš„å”¯ä¸€æ ‡è¯†
    expression<span class="token operator">:</span>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œä¸ºé‚£äº›ç±»æ·»åŠ é¢å¤–åŠŸèƒ½
     <span class="token function">execution</span><span class="token punctuation">(</span><span class="token punctuation">)</span> åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¸€ç§ ç²¾ç¡®åˆ°è¦æ·»åŠ åˆ°é¢å¤–åŠŸèƒ½çš„æ–¹æ³•
     <span class="token operator">*</span>ï¼šé€šé…
     ç©ºæ ¼ï¼š
     <span class="token class-name"><span class="token namespace">before<span class="token punctuation">.</span></span>CityServiceImpl</span><span class="token punctuation">.</span>*ï¼šæ‰€æœ‰æ–¹æ³•
     <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>ï¼šæ‰€æœ‰å‚æ•°
    <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>pointcut id<span class="token operator">=</span><span class="token string">"pc1"</span> expression<span class="token operator">=</span><span class="token string">"execution(* before.CityServiceImpl.*(..))"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç»„è£…åˆ‡é¢<span class="token operator">=</span>åˆ‡å…¥ç‚¹<span class="token operator">+</span>é€šçŸ¥
      advice<span class="token operator">-</span>ref<span class="token operator">:</span>é€šçŸ¥çš„id
      pointcut<span class="token operator">-</span>ref<span class="token operator">:</span>åˆ‡å…¥ç‚¹çš„id
    <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>advisor advice<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"myBeforeAdvice"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pc1"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>advisor<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="6_225"></a>6ã€æµ‹è¯•ä»£ç ğŸ¥</h3> 
<pre><code class="prism language-java">  <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMethodBeforeAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å¯åŠ¨å·¥å‚</span>
        <span class="token class-name">ClassPathXmlApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"before/spring.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–ç»„ä»¶ ç›®æ ‡å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡</span>
        <span class="token class-name">CityService</span> cityService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CityService</span><span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"cityService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//ç›®æ ‡å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡  class com.sun.proxy.$Proxy4</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cityService<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
        
        <span class="token comment">//è°ƒç”¨æ–¹æ³•ï¼Œé€šè¿‡ä»£ç†ç±»è°ƒç”¨ç›®æ ‡ç±»</span>
        cityService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>æ³¨æ„ï¼šè·å–ç»„ä»¶æ—¶ï¼Œç›®æ ‡å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡</p> 
<p><img src="https://images2.imgbox.com/cf/d7/MtzAOXNr_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="Spring_248"></a>ä¸ƒã€Springä¸­çš„ç¯ç»•é€šçŸ¥æ¡ˆä¾‹ğŸ‰</h2> 
<h3><a id="1dao_249"></a>1ã€daoå±‚æ¥å£ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentDao</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * ç™»å½•
     * @param name
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * åˆ†é¡µ
     * @param name
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pageShow</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2dao_268"></a>2ã€daoå±‚å®ç°ç±»ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentDao</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å¾ªç¯10000æ¬¡</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®åº“å®ç°ç™»å½•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pageShow</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å¾ªç¯10000æ¬¡</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®åº“å®ç°åˆ†é¡µ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_295"></a>3ã€ç›®æ ‡æ¥å£ç±»ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * ç™»å½•
     * @param name
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * åˆ†é¡µ
     * @param name
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pageShow</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_314"></a>4ã€ç›®æ ‡å®ç°ç±»ğŸ¥</h3> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentService</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">StudentDao</span> studentDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStudentDao</span><span class="token punctuation">(</span><span class="token class-name">StudentDao</span> studentDao<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>studentDao <span class="token operator">=</span> studentDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æ—¥å¿—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      studentDao<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pageShow</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ†é¡µæ—¥å¿—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> studentDao<span class="token punctuation">.</span><span class="token function">pageShow</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5_340"></a>5ã€ç¯ç»•é€šçŸ¥ğŸ¥</h3> 
<pre><code class="prism language-java">æ ¸å¿ƒæ–¹æ³•ï¼š <span class="token class-name">Object</span> proceed <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> æ”¾è¡Œ
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAroundAdvice</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * å‚æ•° å†…éƒ¨å°è£…è€…å½“å‰çš„ä»£ç†å¯¹è±¡ æ–¹æ³•çš„å‚æ•°ï¼Œæ‰§è¡Œæ–¹æ³•ç­‰
     *
     * @param methodInvocation
     * @return
     * @throws Throwable
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//1.æ§åˆ¶äº‹åŠ¡</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ§åˆ¶äº‹åŠ¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//method Invocation æ–¹æ³•è°ƒç”¨</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰è°ƒç”¨æ–¹æ³•çš„åå­—"</span> <span class="token operator">+</span> methodInvocation<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//argumentså‚æ•° methodInvocation:æ–¹æ³•è°ƒç”¨</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰çš„å‚æ•°ä¸ºï¼š"</span> <span class="token operator">+</span> methodInvocation<span class="token punctuation">.</span><span class="token function">getArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®°å½•å½“å‰çš„æ—¶é—´ å•ä½æ¯«ç§’</span>
        <span class="token keyword">long</span> begin <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æŸ¥è¯¢çš„æ•°æ®åº“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//æ”¾è¡Œï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³• proceedï¼šç»§ç»­åšproceed</span>
        <span class="token class-name">Object</span> proceed <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//è®°å½•ç»“æŸçš„æ—¶é—´ å•ä½æ¯«ç§’</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"daoæ‰§è¡Œæ‰€ç”¨æ—¶é—´"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> begin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_spring_380"></a>6ã€å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™ springğŸ¥</h3> 
<pre><code class="prism language-java">  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç®¡ç†daoç»„ä»¶<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"studentDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.tjcu.dao.StudentDaoImpl"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç®¡ç†<span class="token class-name">Service</span>ç»„ä»¶<span class="token operator">/</span>ç›®æ ‡å¯¹è±¡<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"studentService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.tjcu.service.StudentServiceImpl"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>æ³¨å…¥å€¼<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"studentDao"</span> ref<span class="token operator">=</span><span class="token string">"studentDao"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç®¡ç†é€šçŸ¥ç»„ä»¶<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"studentAroundAdvice"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.tjcu.advice.StudentAroundAdvice"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="7_applicationContextxml_aop_396"></a>7ã€åœ¨ applicationContext.xml ä¸­é…ç½®ç»‡å…¥å…³ç³»,aopç›¸å…³é…ç½®ğŸ¥</h3> 
<pre><code class="prism language-java"> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>aopç›¸å…³é…ç½®  åˆ‡é¢<span class="token operator">=</span>åˆ‡ç‚¹<span class="token operator">+</span>ç¯ç»•é€šçŸ¥<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>åˆ‡å…¥ç‚¹ execution<span class="token operator">:</span><span class="token punctuation">[</span>eksÉªËˆkjuËÊƒn<span class="token punctuation">]</span>æ‰§è¡Œ<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>pointcut id<span class="token operator">=</span><span class="token string">"pointcut"</span> expression<span class="token operator">=</span><span class="token string">"execution(* com.tjcu.service.StudentServiceImpl.*(..))"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç»„è£…åˆ‡é¢  advisor<span class="token punctuation">[</span> <span class="token punctuation">[</span>Ã¦dËˆvaÉªzÉ™r<span class="token punctuation">]</span><span class="token punctuation">]</span>ï¼šé¡¾é—®  advice<span class="token operator">-</span>ref<span class="token operator">:</span>é€šçŸ¥  pointcut<span class="token operator">-</span>ref<span class="token operator">:</span>åˆ‡å…¥ç‚¹<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>aop<span class="token operator">:</span>advisor advice<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"studentAroundAdvice"</span> pointcut<span class="token operator">-</span>ref<span class="token operator">=</span><span class="token string">"pointcut"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>advisor<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>aop<span class="token operator">:</span>config<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="8_408"></a>8ã€æµ‹è¯•ä»£ç ğŸ¥</h3> 
<pre><code class="prism language-java">  <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">AroundAdviceTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//å¯åŠ¨å·¥å‚</span>
        <span class="token class-name">ClassPathXmlApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"com/tjcu/Spring/ApplicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è·å–ç»„ä»¶ ç›®æ ‡å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡</span>
        <span class="token class-name">StudentService</span> studentService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StudentService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"studentService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è°ƒç”¨æ–¹æ³•ï¼Œé€šè¿‡ä»£ç†ç±»è°ƒç”¨ç›®æ ‡ç±»</span>
        studentService<span class="token punctuation">.</span><span class="token function">pageShow</span><span class="token punctuation">(</span><span class="token string">"é€šè¿‡ä»£ç†ç±»è°ƒç”¨è°ƒç”¨ç›®æ ‡ç±»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4b7ce77382fc9b3e2fc6e89f7f683652/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æ•°æ®åº“è¡¨æŸ¥è¯¢</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49e1cc2f6acd23bc1556854fd968d1c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">dockerå’Œk8sã€nginxã€rpcã€kafkaçš„å­¦ä¹ ä»‹ç»å’Œå®æˆ˜ä»¥åŠå­¦ä¹ ç†å¿µ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>