<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php 生成xml文件 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php 生成xml文件" />
<meta property="og:description" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;article&gt; &lt;item&gt; &lt;title size=&#34;1&#34;&gt;title1&lt;/title&gt; &lt;content&gt;content1&lt;/content&gt; &lt;pubdate&gt;2009-10-11&lt;/pubdate&gt; &lt;/item&gt; &lt;item&gt; &lt;title size=&#34;1&#34;&gt;title2&lt;/title&gt; &lt;content&gt;content2&lt;/content&gt; &lt;pubdate&gt;2009-11-11&lt;/pubdate&gt; &lt;/item&gt; &lt;/article&gt; 【直接生成字符串】 方法1：使用纯粹的PHP代码生成字符串，并把这个字符串写入一个以XML为后缀的文件。这是最原始的生成XML的方法，不过有效！ PHP代码如下： &lt;?PHP $data_array = array( array( &#39;title&#39; =&gt; &#39;title1&#39;, &#39;content&#39; =&gt; &#39;content1&#39;, &#39;pubdate&#39; =&gt; &#39;2009-10-11&#39;, ), array( &#39;title&#39; =&gt; &#39;title2&#39;, &#39;content&#39; =&gt; &#39;content2&#39;, &#39;pubdate&#39; =&gt; &#39;2009-11-11&#39;, ) ); $title_size = 1; $xml = &#34;&lt;?xml version=\&#34;1.0\&#34; encoding=\&#34;utf-8\&#34;?&gt;\n&#34;; $xml .= &#34;&lt;article&gt;\n&#34;; foreach ($data_array as $data) { $xml .= create_item($data[&#39;title&#39;], $title_size, $data[&#39;content&#39;], $data[&#39;pubdate&#39;]); } $xml ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c96b0e7c7181ebea9716f8a02eb33b25/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-09-11T10:42:48+08:00" />
<meta property="article:modified_time" content="2012-09-11T10:42:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php 生成xml文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    &lt;?xml version="1.0" encoding="utf-8"?&gt; 
<br> &lt;article&gt; 
<br>     &lt;item&gt; 
<br>         &lt;title size="1"&gt;title1&lt;/title&gt; 
<br>         &lt;content&gt;content1&lt;/content&gt; 
<br>         &lt;pubdate&gt;2009-10-11&lt;/pubdate&gt; 
<br>     &lt;/item&gt; 
<br>     &lt;item&gt; 
<br>         &lt;title size="1"&gt;title2&lt;/title&gt; 
<br>         &lt;content&gt;content2&lt;/content&gt; 
<br>         &lt;pubdate&gt;2009-11-11&lt;/pubdate&gt; 
<br>     &lt;/item&gt; 
<br> &lt;/article&gt;  
<br> 
<br> 
<br> 【直接生成字符串】 
<br> 方法1：使用纯粹的PHP代码生成字符串，并把这个字符串写入一个以XML为后缀的文件。这是最原始的生成XML的方法，不过有效！ 
<br> PHP代码如下： 
<br> 
<br> 
<br> &lt;?PHP 
<br> $data_array = array( 
<br>     array( 
<br>     'title' =&gt; 'title1', 
<br>     'content' =&gt; 'content1', 
<br>         'pubdate' =&gt; '2009-10-11', 
<br>     ), 
<br>     array( 
<br>     'title' =&gt; 'title2', 
<br>     'content' =&gt; 'content2', 
<br>     'pubdate' =&gt; '2009-11-11', 
<br>     ) 
<br> ); 
<br> $title_size = 1; 
<br> 
<br> 
<br> $xml = "&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n"; 
<br> $xml .= "&lt;article&gt;\n"; 
<br> 
<br> 
<br> foreach ($data_array as $data) { 
<br> $xml .= create_item($data['title'], $title_size, $data['content'], $data['pubdate']); 
<br> } 
<br> 
<br> 
<br> $xml .= "&lt;/article&gt;\n"; 
<br> 
<br> 
<br> echo $xml; 
<br> 
<br> 
<br> //  创建XML单项 
<br> function create_item($title_data, $title_size, $content_data, $pubdate_data) 
<br> { 
<br>     $item = "&lt;item&gt;\n"; 
<br>     $item .= "&lt;title size=\"" . $title_size . "\"&gt;" . $title_data . "&lt;/title&gt;\n"; 
<br>     $item .= "&lt;content&gt;" . $content_data . "&lt;/content&gt;\n"; 
<br>     $item .= " &lt;pubdate&gt;" . $pubdate_data . "&lt;/pubdate&gt;\n"; 
<br>     $item .= "&lt;/item&gt;\n"; 
<br> 
<br> 
<br>     return $item; 
<br> } 
<br> 
<br> 
<br> ?&gt;  
<br> 
<br> 
<br> 【DomDocument】 
<br> 方法2：使用DomDocument生成XML文件 
<br> 创建节点使用createElement方法， 
<br> 创建文本内容使用createTextNode方法， 
<br> 添加子节点使用appendChild方法， 
<br> 创建属性使用createAttribute方法 
<br> PHP代码如下： 
<br> 
<br> 
<br> &lt;?PHP 
<br> $data_array = array( 
<br>     array( 
<br>     'title' =&gt; 'title1', 
<br>     'content' =&gt; 'content1', 
<br>         'pubdate' =&gt; '2009-10-11', 
<br>     ), 
<br>     array( 
<br>     'title' =&gt; 'title2', 
<br>     'content' =&gt; 'content2', 
<br>     'pubdate' =&gt; '2009-11-11', 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> //  属性数组 
<br> $attribute_array = array( 
<br>     'title' =&gt; array( 
<br>     'size' =&gt; 1 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> //  创建一个XML文档并设置XML版本和编码。。 
<br> $dom=new DomDocument('1.0', 'utf-8'); 
<br> 
<br> 
<br> //  创建根节点 
<br> $article = $dom-&gt;createElement('article'); 
<br> $dom-&gt;appendchild($article); 
<br> 
<br> 
<br> foreach ($data_array as $data) { 
<br>     $item = $dom-&gt;createElement('item'); 
<br>     $article-&gt;appendchild($item); 
<br> 
<br> 
<br>     create_item($dom, $item, $data, $attribute_array); 
<br> } 
<br> 
<br> 
<br> echo $dom-&gt;saveXML(); 
<br> 
<br> 
<br> function create_item($dom, $item, $data, $attribute) { 
<br>     if (is_array($data)) { 
<br>         foreach ($data as $key =&gt; $val) { 
<br>             //  创建元素 
<br>             $$key = $dom-&gt;createElement($key); 
<br>             $item-&gt;appendchild($$key); 
<br> 
<br> 
<br>             //  创建元素值 
<br>             $text = $dom-&gt;createTextNode($val); 
<br>             $$key-&gt;appendchild($text); 
<br> 
<br> 
<br>             if (isset($attribute[$key])) { 
<br>             //  如果此字段存在相关属性需要设置 
<br>                 foreach ($attribute[$key] as $akey =&gt; $row) { 
<br>                     //  创建属性节点 
<br>                     $$akey = $dom-&gt;createAttribute($akey); 
<br>                     $$key-&gt;appendchild($$akey); 
<br> 
<br> 
<br>                     // 创建属性值节点 
<br>                     $aval = $dom-&gt;createTextNode($row); 
<br>                     $$akey-&gt;appendChild($aval); 
<br>                 } 
<br>             }   //  end if 
<br>         } 
<br>     }   //  end if 
<br> }   //  end function 
<br> ?&gt;  
<br> 
<br> 
<br> 【XMLWriter】 
<br> 方法3：使用XMLWriter类创建XML文件 
<br> 此方法在PHP 5.1.2后有效 
<br> 另外，它可以输出多种编码的XML，但是输入只能是utf-8 
<br> PHP代码如下： 
<br> 
<br> 
<br> &lt;?PHP 
<br> $data_array = array( 
<br>     array( 
<br>     'title' =&gt; 'title1', 
<br>     'content' =&gt; 'content1', 
<br>         'pubdate' =&gt; '2009-10-11', 
<br>     ), 
<br>     array( 
<br>     'title' =&gt; 'title2', 
<br>     'content' =&gt; 'content2', 
<br>     'pubdate' =&gt; '2009-11-11', 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> //  属性数组 
<br> $attribute_array = array( 
<br>     'title' =&gt; array( 
<br>     'size' =&gt; 1 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> $xml = new XMLWriter(); 
<br> $xml-&gt;openUri("php://output"); 
<br> //  输出方式，也可以设置为某个xml文件地址，直接输出成文件 
<br> $xml-&gt;setIndentString('  '); 
<br> $xml-&gt;setIndent(true); 
<br> 
<br> 
<br> $xml-&gt;startDocument('1.0', 'utf-8'); 
<br> //  开始创建文件 
<br> //  根结点 
<br> $xml-&gt;startElement('article'); 
<br> 
<br> 
<br> foreach ($data_array as $data) { 
<br>     $xml-&gt;startElement('item'); 
<br> 
<br> 
<br>     if (is_array($data)) { 
<br>         foreach ($data as $key =&gt; $row) { 
<br>           $xml-&gt;startElement($key); 
<br> 
<br> 
<br>           if (isset($attribute_array[$key]) &amp;&amp; is_array($attribute_array[$key])) 
<br>           { 
<br>               foreach ($attribute_array[$key] as $akey =&gt; $aval) { 
<br>               //  设置属性值 
<br>                     $xml-&gt;writeAttribute($akey, $aval); 
<br>                 } 
<br> 
<br> 
<br>             } 
<br> 
<br> 
<br>             $xml-&gt;text($row);   //  设置内容 
<br>             $xml-&gt;endElement(); // $key 
<br>         } 
<br> 
<br> 
<br>     } 
<br>     $xml-&gt;endElement(); //  item 
<br> } 
<br> 
<br> 
<br> $xml-&gt;endElement(); //  article 
<br> $xml-&gt;endDocument(); 
<br> 
<br> 
<br> $xml-&gt;flush(); 
<br> ?&gt;  
<br> 
<br> 
<br> 【SimpleXML】 
<br> 方法4：使用SimpleXML创建XML文档 
<br> 
<br> 
<br> &lt;?PHP 
<br> $data_array = array( 
<br>     array( 
<br>     'title' =&gt; 'title1', 
<br>     'content' =&gt; 'content1', 
<br>         'pubdate' =&gt; '2009-10-11', 
<br>     ), 
<br>     array( 
<br>     'title' =&gt; 'title2', 
<br>     'content' =&gt; 'content2', 
<br>     'pubdate' =&gt; '2009-11-11', 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> //  属性数组 
<br> $attribute_array = array( 
<br>     'title' =&gt; array( 
<br>     'size' =&gt; 1 
<br>     ) 
<br> ); 
<br> 
<br> 
<br> $string = &lt;&lt;&lt;XML 
<br> &lt;?xml version='1.0' encoding='utf-8'?&gt; 
<br> &lt;article&gt; 
<br> &lt;/article&gt; 
<br> XML; 
<br> 
<br> 
<br> $xml = simplexml_load_string($string); 
<br> 
<br> 
<br> foreach ($data_array as $data) { 
<br>     $item = $xml-&gt;addChild('item'); 
<br>     if (is_array($data)) { 
<br>         foreach ($data as $key =&gt; $row) { 
<br>           $node = $item-&gt;addChild($key, $row); 
<br> 
<br> 
<br>           if (isset($attribute_array[$key]) &amp;&amp; is_array($attribute_array[$key])) 
<br>             { 
<br>               foreach ($attribute_array[$key] as $akey =&gt; $aval) { 
<br>              //  设置属性值 
<br>                   $node-&gt;addAttribute($akey, $aval); 
<br>             } 
<br>           } 
<br>         } 
<br>     } 
<br> } 
<br> echo $xml-&gt;asXML(); 
<br> ?&gt;  
<br> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/48c08b915882a6f10e0b449fbac4e98c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">sqlSession.getMapper(UserMapper.class)的使用方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba6c6e1199f9c737d38f0d39d2c1fee3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新浪微博开发第一步（OAuth认证和发布新浪微博的功能）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>