<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;åˆé˜¶ | [ä¸ƒ] (ä¸‹) stringç±»æ¨¡æ‹Ÿå®ç° - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;åˆé˜¶ | [ä¸ƒ] (ä¸‹) stringç±»æ¨¡æ‹Ÿå®ç°" />
<meta property="og:description" content="æ‘˜è¦ï¼šstringç±»çš„æ¨¡æ‹Ÿå®ç°ã€è®¾è®¡æ€è·¯&#43;ä»£ç ç¤ºä¾‹ã€‘ï¼›stringç±»åº•å±‚è®¾è®¡çš„è¡¥å……è¯´æ˜ã€sizeof(string)ï¼Œstringç±»è®¾è®¡ä¸Šçš„æ•ˆç‡é—®é¢˜ï¼šæ·±æ‹·è´çš„æµªè´¹ã€‘ï¼›æ‰©å±•ã€å†™æ—¶æ‹·è´ã€‘
1. åˆ›å»ºå‘½åç©ºé—´ ç›®çš„ï¼šä¸ºäº†å’Œ std ä¸­çš„ string åŒºåˆ†ã€‚
namespace Bottle { class string { public: private: char* _str; size_t _size; size_t _capacity; static size_t npos; }; size_t string::npos = -1; } 2. Constructor æ— å‚çš„ï¼š_str(new char[1] {&#39;\0&#39;}) è¿™é‡Œç”¨Â new char[1] {&#39;\0&#39;} è€Œä¸æ˜¯ new char(&#39;\0&#39;) æ˜¯ä¸ºäº†å’Œææ„å‡½æ•°ä¸­çš„ delete[] åŒ¹é…ä½¿ç”¨ã€‚å…¨ç¼ºçœçš„ï¼šå‚æ•°ç¼ºçœå€¼ â†’Â const char* str = &#34;&#34;Â ç©ºå­—ç¬¦ä¸²(ä¸å«ç©ºæ ¼) â€”â€” ç¼ºçœå€¼ç»™ç©ºå­—ç¬¦ä¸²åŒæ ·é»˜è®¤ä»¥ &#39;\0&#39; å­—ç¬¦ä¸²ç»“å°¾ï¼Œå¦‚æœè¿™é‡Œç¼ºçœå€¼ç»™ &#34;\0&#34; å­—ç¬¦ä¸²ä¼šæœ‰ä¸¤ä¸ª &#39;\0&#39; å­—ç¬¦ï¼Œç»“å°¾é»˜è®¤è·Ÿ &#39;\0&#39;ã€‚ æ³¨æ„ï¼šcapacity ä¸ç®—ç»“å°¾çš„ &#39;\0&#39; ï¼Œä½†å¼€ç©ºé—´è¦é¢„ç•™ &#39;\0&#39; çš„ä½ç½®ã€‚
ç¤ºä¾‹ï¼šÂ //Constructor string()//æ— å‚çš„æ„é€ å‡½æ•° :_str(new char[1] {&#39;\0&#39;}) , _size(0) , _capacity(0) { } string(const char* str = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/628b2aa98230f139f988cfde35b968da/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-11T09:24:29+08:00" />
<meta property="article:modified_time" content="2023-12-11T09:24:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;åˆé˜¶ | [ä¸ƒ] (ä¸‹) stringç±»æ¨¡æ‹Ÿå®ç°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>æ‘˜è¦ï¼šstringç±»çš„æ¨¡æ‹Ÿå®ç°ã€è®¾è®¡æ€è·¯+ä»£ç ç¤ºä¾‹ã€‘ï¼›stringç±»åº•å±‚è®¾è®¡çš„è¡¥å……è¯´æ˜ã€sizeof(string)ï¼Œstringç±»è®¾è®¡ä¸Šçš„æ•ˆç‡é—®é¢˜ï¼šæ·±æ‹·è´çš„æµªè´¹ã€‘ï¼›æ‰©å±•ã€å†™æ—¶æ‹·è´ã€‘</p> 
<hr> 
<h2>1. åˆ›å»ºå‘½åç©ºé—´</h2> 
<p>ç›®çš„ï¼šä¸ºäº†å’Œ <em>std</em> ä¸­çš„ <em>string </em>åŒºåˆ†ã€‚</p> 
<pre><code class="language-cpp">namespace Bottle
{
	class string
	{
	public:

	private:
		char* _str;
		size_t _size;
		size_t _capacity;
        static size_t npos;
	};

    size_t string::npos = -1;
}</code></pre> 
<h4></h4> 
<h2 id="2.%20Constructor">2. Constructor</h2> 
<ul><li>æ— å‚çš„ï¼š<em>_str(new char<strong>[1]</strong> {'\0'}</em><u><em>)</em></u> è¿™é‡Œç”¨Â <em>new char<strong>[1]</strong> {'\0'}</em> è€Œä¸æ˜¯<em> new char('\0') </em>æ˜¯ä¸ºäº†å’Œææ„å‡½æ•°ä¸­çš„ <strong>delete[]</strong> åŒ¹é…ä½¿ç”¨ã€‚</li><li>å…¨ç¼ºçœçš„ï¼šå‚æ•°ç¼ºçœå€¼ â†’Â <em>const char* str = <strong>""Â Â </strong></em>ç©ºå­—ç¬¦ä¸²(ä¸å«ç©ºæ ¼) â€”â€” ç¼ºçœå€¼ç»™<strong>ç©ºå­—ç¬¦ä¸²</strong>åŒæ ·é»˜è®¤<strong>ä»¥ '\0' å­—ç¬¦ä¸²ç»“å°¾</strong>ï¼Œå¦‚æœè¿™é‡Œç¼ºçœå€¼ç»™ "\0" å­—ç¬¦ä¸²ä¼šæœ‰ä¸¤ä¸ª '\0' å­—ç¬¦ï¼Œç»“å°¾é»˜è®¤è·Ÿ '\0'ã€‚</li></ul> 
<p>æ³¨æ„ï¼šcapacity ä¸ç®—ç»“å°¾çš„ '\0' ï¼Œä½†å¼€ç©ºé—´è¦é¢„ç•™ '\0' çš„ä½ç½®ã€‚</p> 
<p></p> 
<p>ç¤ºä¾‹ï¼šÂ </p> 
<pre><code class="language-cpp">//Constructor
string()//æ— å‚çš„æ„é€ å‡½æ•°
	:_str(new char[1] {'\0'})
	, _size(0)
	, _capacity(0)
{

}

string(const char* str = "")//å…¨ç¼ºçœçš„æ„é€ å‡½æ•°
	:_size(strlen(str))
	, _capacity(strlen(str))
{
	_str = new char[_capacity + 1];
	strcpy(_str, str);
}
</code></pre> 
<h4></h4> 
<h2 id="3.%20Destructor">3. Destructor</h2> 
<pre><code class="language-cpp">~string()//Destructor
{
	delete[]_str;
	_str = nullptr;
	_size = _capacity = 0;
}</code></pre> 
<h4></h4> 
<h2 id="4.%20%E9%81%8D%E5%8E%86string">4. éå†string_iterator</h2> 
<p>1ï¼‰capacity() ï¼Œsize()</p> 
<p>2ï¼‰operator[] and const ç‰ˆæœ¬ï¼ˆps.æ£€æŸ¥ä¸‹æ ‡çš„åˆæ³•æ€§ï¼‰</p> 
<p>3ï¼‰iterator ï¼šç”¨æŒ‡é’ˆå®ç° â†’ <em>typedef char* iterator;</em></p> 
<p>4ï¼‰èŒƒå›´forï¼šå¯¹ <em>iterator</em> æœ‰ä¸¥æ ¼çš„è¦æ±‚ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ç®€å•åœ°æ›¿æ¢æˆ iterator ï¼Œä¾‹å¦‚â€”â€”å¦‚æœå¯¹ begin() å‡½æ•°æ”¹åä¸º Begin() éƒ½ä¼šä½¿èŒƒå›´forä¸æ”¯æŒã€‚</p> 
<p>ç¤ºä¾‹ï¼šÂ </p> 
<pre><code class="language-cpp">typedef char* iterator;
typedef const char* const_iterator;


///
size_t capacity()const
{
	return _capacity;
}

size_t size()const
{
	return _size;
}
///

//operator[]
char operator[](size_t i)
{
	if (i &lt; _size)
		return _str[i];
	else
	{
		std::cout &lt;&lt; "éæ³•ä¸‹æ ‡" &lt;&lt; std::endl;//ä¹Ÿå¯ä»¥é€‰æ‹©ç”¨assetæš´åŠ›æ£€æŸ¥
		exit(-1);
	}
}

char operator[](size_t i)const
{
	if (i &lt; _size)
		return _str[i];
	else
	{
		std::cout &lt;&lt; "éæ³•ä¸‹æ ‡" &lt;&lt; std::endl;
		exit(-1);
	}
}
///

//iterator
iterator begin()
{
	return _str;
}

iterator end()
{
	return _str + _size;
}

const_iterator cbegin()const
{
	return _str;
}
const_iterator cend()const
{
	return _str + _size;
}</code></pre> 
<p></p> 
<h2 id="5.%20Modifiers%20and%20reserve">5. å¢åˆ æŸ¥æ”¹</h2> 
<h3 id="1%EF%BC%89%E5%B0%BE%E6%8F%92%EF%BC%9A">1ï¼‰å°¾æ’ï¼š</h3> 
<p>æ’å…¥æ•°æ®è‚¯å®šæ¶‰åŠåˆ°è¦æ‰©å®¹çš„é—®é¢˜ï¼Œä¸ºäº†å…ˆè§£å†³æ‰©å®¹çš„é—®é¢˜â€”â€”å®ç°<strong><em> reserveÂ </em></strong>å‡½æ•°ï¼š</p> 
<ul><li> <h4>reserve</h4> <p class="img-center"><img alt="" height="273" src="https://images2.imgbox.com/93/f8/yYjXMpJi_o.png" width="748"></p> <pre><code class="language-cpp">//reserve
		void reserve(size_t n)//å¯ä»¥å­˜å‚¨çš„æœ‰æ•ˆæ•°æ®ä¸ªæ•°ä¸º'n'ä¸ª
		{
			if (n &gt; _capacity)
			{
				char* tmp = new char[n + 1];//å¤šå¼€ä¸€ä¸ªç»™''\0'
				strcpy(tmp, _str);//æ‹·è´æ•°æ®åˆ°æ–°ç©ºé—´(ps.strcpy ä¼š copy ç»“å°¾çš„'\0')
				delete[]_str;//é‡Šæ”¾æ—§ç©ºé—´
				_str = tmp;//æŒ‡å‘æ–°ç©ºé—´
				_capacity = n;
			}
		}</code></pre> </li></ul> 
<h4 id="%E2%91%A0push_back(char%20c)">â‘ push_back(char c)</h4> 
<p>å…³äºæ‰©å®¹çš„é—®é¢˜ï¼š</p> 
<ul><li><em>reserve(_size + 1);Â </em>//æ¯æ’å…¥ä¸€ä¸ªæ•°æ®å°±å¤šå¼€ä¸€ä¸ªæ•°æ®çš„ç©ºé—´ï¼Œå¯èƒ½å¯¼è‡´é¢‘ç¹æ‰©å®¹ã€‚ä½†æ˜¯è¿™æ ·å†™ä¸ä¼šå‡ºç°ç»™ reserve ä¼ çš„å‚æ•°ä¸º 0 è€Œä¸æ‰©å®¹çš„æƒ…å†µã€‚</li><li><em>reserve(_capacity * 2);</em>//å¦‚æœ <strong>_capacity == 0</strong>ï¼Œå°±ä¼šæ²¡æ‰©å®¹ï¼Œæ²¡æ‰©å®¹åé¢å†æ‰§è¡Œæ’å…¥æ•°æ®çš„æ“ä½œï¼Œä¼šå¯¼è‡´è®¿é—®è¶Šç•Œï¼Œè¶Šç•Œè®¿é—®ä¼šå¯¼è‡´deleteå¤„å´©æºƒã€‚</li></ul> 
<p>ç»¼ä¸Šï¼Œæœ€ç»ˆé€‰æ‹©å¦‚ä¸‹è¿™æ ·çš„å†™æ³•ï¼š</p> 
<pre><code class="language-cpp">//push_back
		void push_back(char c)
		{
			if (_size == _capacity)//check capacity
			{
				reserve((_capacity == 0) ? 4 : (_capacity * 2));
			}

			_str[_size] = c;//push data
			++_size;
			_str[_size] = '\0';
		}</code></pre> 
<h4 id="%E2%91%A1append(const%20char*%20str)">â‘¡append(const char* str)</h4> 
<pre><code class="language-cpp">//append
		void append(const char* str)
		{
			size_t len = strlen(str);
			reserve(_size + len);//check capacity

			strcpy(_str + _size, str);//append data
			_size += len;
		}</code></pre> 
<h4 id="%E2%91%A2operator%2B%3D">â‘¢operator+=</h4> 
<p>å¤ç”¨ push_back å’Œ append å‡½æ•°å³å¯ã€‚</p> 
<pre><code class="language-cpp">//operator+=
		string&amp; operator+=(const char c)
		{
			push_back(c);
			return *this;
		}

		string&amp; operator+=(const char* str)
		{
			append(str);
			return *this;
		}</code></pre> 
<h4></h4> 
<h3 id="2%EF%BC%89insert">2ï¼‰insert</h3> 
<p>æ€è·¯ï¼šâ‘ <em>æ£€æŸ¥ pos ä½ç½®çš„æœ‰æ•ˆæ€§</em>ï¼›â‘¡æ£€æŸ¥å®¹é‡ï¼›â‘¢<u>æŒªåŠ¨æ•°æ®</u>ï¼›â‘£æ’å…¥æ•°æ®ï¼ˆstrncpyï¼‰ã€‚</p> 
<p>ç‰¹æ®Šæƒ…å†µï¼šå¤´æ’ï¼ˆpos==0ï¼‰<em>ps.ä¸‹é¢çš„ pos å’Œ end éƒ½æ˜¯æŒ‡ä¸‹æ ‡</em></p> 
<p><img alt="" class="left" height="245" src="https://images2.imgbox.com/32/e9/2XsAa8up_o.png" width="460">â‘ <strong><em>size_t end</em></strong> æ˜¯<strong>æ— ç¬¦å·æ•´å‹ï¼Œ-1å³ä¸ºæ•´å‹çš„æœ€å¤§å€¼</strong>ï¼Œä»¥ end &gt;= pos ä½œä¸ºå¾ªç¯åˆ¤æ–­æ¡ä»¶ï¼Œåœ¨ pos ==0 æ—¶ä¼šå‡ºç°Â <em><strong>â€œ-1&gt;0â€Â </strong></em>çš„æƒ…å†µï¼Œäºæ˜¯è¿›å…¥æ­»å¾ªç¯ï¼›<br> â‘¡å³ä½¿å®šä¹‰Â <em><strong>int </strong>end</em>ï¼Œä»ä»¥ end &gt;= pos ä½œä¸ºå¾ªç¯åˆ¤æ–­æ¡ä»¶ï¼Œ&gt;=æ“ä½œç¬¦å·¦å³æ“ä½œæ•°çš„ç±»å‹ä¸åŒï¼Œä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œé€šå¸¸æ˜¯æ¯”è¾ƒèŒƒå›´å°çš„å‘èŒƒå›´å¤§çš„è½¬æ¢ï¼Œå³åœ¨è¯¥æƒ…å†µä¸‹ï¼Œ<em>æœ‰ç¬¦å·æ•´å‹ä¸€èˆ¬è½¬åŒ–ä¸ºæ— ç¬¦å·æ•´å‹</em>ã€‚<br><br> æœ‰ä¸¤ç§æ–¹å¼è§£å†³ä¸Šè¿°æƒ…å†µï¼š<br> â‘ å¼ºåˆ¶ç±»å‹è½¬æ¢æˆ <em>int</em> è¿›è¡Œæ¯”è¾ƒï¼›<em>(int)end&gt;=(int)pos;</em><br> â‘¡è®© end æ‰€æŒ‡æ•°æ®Â <em><u>å°†è¦è¢«æŒªåŠ¨åˆ°çš„ä½ç½®Â </u></em>è€Œ<strong>ä¸æ˜¯</strong>æŒ‡å°†è¦è¢«æŒªåŠ¨çš„æ•°æ®ã€‚<s><em>_str[end+len] = _str[end]</em></s><s>Â </s> Â <em>_str[end] = _str[end - len]</em></p> 
<p class="img-center"><img alt="" height="119" src="https://images2.imgbox.com/e1/82/Apdz9pn0_o.png" width="966"></p> 
<p class="img-center"><img alt="" height="218" src="https://images2.imgbox.com/2d/fd/1zELFeIz_o.png" width="875"></p> 
<p></p> 
<p>ä»£ç ç¤ºä¾‹ï¼šÂ </p> 
<pre><code class="language-cpp">//insert
		string&amp; insert(size_t pos, const char c)//åœ¨posä½ç½®æ’å…¥c
		{
			//check
			assert(pos &lt; _size);

			//capacity
			reserve(_size + 1);

			//move
			size_t end = _size + 1;
			for (; end &gt;= pos + 1; --end)
			{
				_str[end] = _str[end - 1];
			}

			//insert 
			_str[pos] = c;

            _size += 1;
			return *this;

		}

		string&amp; insert(size_t pos, const char* str)//åœ¨posä½ç½®æ’å…¥ä¸²str
		{
			//check
			assert(pos &lt; _size);

			//capacity
			size_t len = strlen(str);
			reserve(_size + len);

			//move
			size_t end = _size + len;
			for (; end &gt;= pos + len; --end)
			{
				_str[end] = _str[end - len];
			}

			//insert 
			strncpy(_str + pos, str, len);

            _size += len;
            return *this;

		}</code></pre> 
<p></p> 
<h3 id="3%EF%BC%89erase">3ï¼‰erase</h3> 
<pre><code class="language-cpp">//erase
		string&amp; erase(size_t pos, size_t len = npos)
		{
			//check
			assert(pos &lt; _size);

			if ((pos + len &gt;= _size) || (npos == -1))//å¦‚æœlenè¶³å¤Ÿé•¿ï¼Œé•¿åˆ°åˆ å®Œposä½ç½®åé¢æ‰€æœ‰çš„æ•°æ®
			{
				_size = pos;
			}
			else
			{	//æ•°æ®ä»åå¾€å‰æŒªåŠ¨è¦†ç›–åˆ é™¤
				for (size_t i = pos + len; i &lt; _size; ++i)
				{
					_str[i - len] = _str[i];
				}
				_size -= len;
			}

			_str[_size] = '\0';
            return *this;
		}</code></pre> 
<p>æ³¨æ„ï¼š<strong><em>Â (pos + len &gt;= _size) || (npos == -1)</em></strong> è¿™ä¸¤ä¸ªæƒ…å†µ <em>pos + len &gt;= _sizeÂ </em>ä¸Â <em>npos == -1Â </em>è¦åˆ†å¼€åˆ¤æ–­ï¼Œå› ä¸º -1å·²ç»æ˜¯æ— ç¬¦å·æ•´å‹çš„æœ€å¤§å€¼ï¼Œå†åœ¨å…¶ä¸ŠåŠ ä¸Šæ•°æ®ä¼šæº¢å‡ºâ€”â€”è¶…å‡ºæ— ç¬¦å·æ•´å‹èƒ½å­˜å‚¨çš„æœ€å¤§æ•°å€¼ã€‚</p> 
<p></p> 
<h3>4ï¼‰æ“ä½œç¬¦é‡è½½</h3> 
<ul><li> <h4>æ¯”è¾ƒæ“ä½œç¬¦é‡è½½</h4> </li></ul> 
<p>è¿™äº›æ¯”è¾ƒæ“ä½œç¬¦åº“é‡Œå®ç°çš„æ˜¯å…¨å±€å‡½æ•°ï¼Œè€Œéæˆå‘˜å‡½æ•°ï¼Œæ˜¯è€ƒè™‘åˆ°é™¤äº† stringç±»(char) ä»¥å¤–è¿˜è¦åŒ¹é…å…¶ä»–çš„ç±»å‹(Types)ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•åœ°å®ç°ä¸ºæˆå‘˜å‡½æ•°ã€‚</p> 
<p></p> 
<p>ä»£ç ç¤ºä¾‹ï¼š</p> 
<pre><code class="language-cpp">//Compare
		bool operator==(const string&amp; s)const
		{
			return (strcmp(this-&gt;_str, s._str) == 0);
		}

		bool operator&lt;(const string&amp; s)const
		{
			return (strcmp(this-&gt;_str, s._str) &lt; 0);
		}

		bool operator&gt;(const string&amp; s)const
		{
			return (strcmp(this-&gt;_str, s._str) &gt; 0);
		}

		bool operator&gt;=(const string&amp; s)const
		{
			return ((*this &gt; s) || (*this == s));
		}

		bool operator&lt;= (const string&amp; s)const
		{
			return (!(*this &gt; s));
		}</code></pre> 
<p></p> 
<ul><li> <h4 style="background-color:transparent;">æµæ’å…¥å’Œæµæå–é‡è½½</h4> </li></ul> 
<p>ä¸ä¸€å®šè¦å†™æˆå‹å…ƒå‡½æ•°ï¼Œå› ä¸ºè¿™é‡Œä¸ç”¨è®¿é—®ç§æœ‰å‡½æ•°ã€‚</p> 
<ol><li>æµæ’å…¥é‡è½½ä»£ç ç¤ºä¾‹ï¼š <pre><code class="language-cpp">namaspace Bottle
{
    class string
    {
        //â€¦â€¦
    };

	std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const string&amp; s)
	{
		for (size_t i = 0; i &lt; s.size(); ++i)
		{
			out &lt;&lt; s[i];
		}

		return out;
	}
}</code></pre> <p></p> </li><li> <p>Â æµæå–é‡è½½<br><strong>æ³¨æ„</strong>ï¼š<em>cin </em>å’Œ <em>scanf </em>éƒ½æ˜¯ä»¥ç©ºæ ¼å’Œæ¢è¡Œä¸ºä¸€æ®µè¾“å…¥çš„é—´éš”ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸ºäº†è§£å†³ä¸‹ç¤ºé—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ <strong><em>get</em></strong> å‡½æ•°ã€‚<a href="https://legacy.cplusplus.com/reference/tuple/get/?kw=get" rel="nofollow" title="get - C++ Reference (cplusplus.com)">get - C++ Reference (cplusplus.com)</a></p> 
  <div> 
   <p><img alt="" height="307" src="https://images2.imgbox.com/a8/d3/3CH0Rq6o_o.png" width="932">â€‹</p> 
  </div> <p>æµæå–ä»£ç ç¤ºä¾‹ï¼šï¼ˆ<strong>æ³¨æ„</strong>ï¼šæµæå–ä¹‹å‰è¦æ¸…ç©ºstringå¯¹è±¡ä¸­åŸæœ‰çš„æ•°æ®ï¼Œä¸ç„¶å°±ä¼šå˜æˆÂ <em>æµæå–é‡è½½Â </em>å°±ä¼šå˜æˆÂ <em>å°¾æ’æ•°æ®Â </em>ï¼‰</p> 
  <div> 
   <pre><code class="language-cpp">	std::istream&amp; operator&gt;&gt;(std::istream&amp; in, string&amp; s)
	{
		s.clear();//clear existing data

		char ch = in.get();
		while (ch != ' ' &amp;&amp; ch != '\n')
		{
			s += ch;
			ch = in.get();
		}

		return in;
	}</code></pre> 
  </div> <p></p> </li></ol> 
<p>æµæå–ä¸­å…³äºæ‰©å®¹çš„é—®é¢˜ï¼šå¯ä»¥é€šè¿‡åˆ›å»ºç¼“å†²åŒºæ•°ç»„ä¼˜åŒ–é¢‘ç¹æ‰©å®¹çš„é—®é¢˜ã€‚å…ˆæŠŠè¯»åˆ°çš„æ•°æ®å­˜åˆ°ç¼“å†²åŒºæ•°ç»„ï¼Œå¦‚æœç¼“å†²åŒºæ•°æ®æ»¡äº†å°±æ’å…¥åˆ°åŸæœ¬è¦æ’å…¥çš„stringç±»å¯¹è±¡ä¸­ï¼Œè¿™æ ·å°±é¿å…äº†æ¯æ¬¡å•ä¸ªå•ä¸ªæ’å…¥å­—ç¬¦è€Œå¯¼è‡´çš„é¢‘ç¹æ‰©å®¹ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> 
<pre><code class="language-cpp">	std::istream&amp; operator&gt;&gt;(std::istream&amp; in, string&amp; s)
	{
		s.clear();//clear existing data

		char buff[129] = { 0 };

		size_t i = 0;
		char ch = in.get();

		while (ch != ' ' &amp;&amp; ch != '\n')
		{
			buff[i] = ch;//è¯»åˆ°çš„æ•°æ®å…ˆå­˜åˆ°buffæ•°ç»„ä¸­
			++i;
			if (i == 128)//buffæ•°ç»„å­˜æ»¡åæ’å…¥åˆ°string&amp; sä¸­
			{
				buff[i] = '\0';
				s += buff;
				i = 0;
			}
		}
		if (i != 0)//å¦‚æœç¼“å†²åŒºæ•°æ®å†…è¿˜æœ‰å‰©ä½™æ•°æ®ï¼Œè®°å¾—æŠŠå‰©ä¸‹çš„æ•°æ®æ’å…¥string&amp; sä¸­
		{
			buff[i] = '\0';
			s += buff;
		}
		return in;
	}
</code></pre> 
<p></p> 
<h3>5ï¼‰resize</h3> 
<p>resize æ”¹å˜ size çš„å¤§å°ï¼Œåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µè®¨è®ºï¼š</p> 
<ol><li>new_size &lt;= now_sizeï¼šdelete data</li><li>new_size &gt; now_size &amp;&amp; new_size &lt; capacityï¼šinsert data</li><li>new_size &gt;= capacityï¼šreserve and inser data</li></ol> 
<p>åä¸¤ç§æƒ…å†µå¯ä»¥åˆå¹¶ï¼Œå› ä¸ºå³ä½¿Â reserve(new_size) å½“ new_size &lt; capacity æ—¶ä¹Ÿä¸ä¼šç¼©å®¹ã€‚</p> 
<p></p> 
<p>ä»£ç ç¤ºä¾‹ï¼š</p> 
<div> 
 <pre><code class="language-cpp">		//resize
		void resize(const size_t sz, const char c = '\0')
		{
			if (sz &lt; _size)
			{
				//delete
				_str[_size] = '\0';
				_size = sz;
			}
			else
			{
				reserve(sz);//æ£€æŸ¥å®¹é‡ï¼Œå¿…è¦æ—¶æ‰©å®¹
				//insert
				for (size_t i = _size; i &lt; sz; ++i)
				{
					_str[i] = c;
				}
				_str[_size] = '\0';
				_size = sz;
			}

		}</code></pre> 
</div> 
<h4></h4> 
<h3>6ï¼‰find</h3> 
<ul><li><em>æ‰¾æŸä¸€ä¸ªå…ƒç´ ï¼š<span style="background-color:#d7d8d9;">size_t find(const char c, size_t pos = 0) const</span></em></li><li><em>æ‰¾å­—ä¸²ï¼š<span style="background-color:#d7d8d9;">size_t find(const char* s, size_t pos = 0) const</span></em><br> Â Â  Â  Â  Â  Â  Â  Â â‘ æš´åŠ›åŒ¹é…ï¼šæŒ¨ä¸ªæ‰¾Â  â†’ <strong><em>strstrï¼›</em></strong><span style="color:#a5a5a5;">ï¼ˆç¤ºä¾‹ä»£ç é‡‡ç”¨æš´åŠ›åŒ¹é…ï¼‰</span><br> Â  Â  Â  Â  Â  Â  Â  â‘¡kmp(ç®—æ³•)ï¼šç†è®ºä¸Šæ•ˆç‡é«˜ï¼Œä½†ç°å®ä¸­å¾ˆå°‘ç”¨ï¼Œå®é™…ä¸Šå®ç°æ•ˆç‡æ²¡æœ‰å¾ˆé«˜ï¼›<br> Â  Â  Â  Â  Â  Â  Â  â‘¢BM(ç®—æ³•)ï¼šå¥½ç”¨ï¼Œä½†éš¾ã€‚<br> Â  Â  Â  Â  Â  Â  Â </li></ul> 
<p>ä»£ç ç¤ºä¾‹ï¼šÂ </p> 
<pre><code class="language-cpp">		// è¿”å›cåœ¨stringä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®

		size_t find(const char c, size_t pos = 0) const
		{
			assert(pos &lt; _size);//check pos
			size_t i = pos;
			for (; i &lt; _size; ++i)
			{
				if (_str[i] == c)
					return i;
			}

			return -1;
		}

		// è¿”å›å­ä¸²såœ¨stringä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®

		size_t find(const char* s, size_t pos = 0) const
		{
			assert(pos &lt; _size);//check pos

			size_t len = strlen(s);
			for (size_t i = pos; i + len &lt; _size; ++i)
			{
				char* p = strstr(_str + i, s);
				if (p != nullptr)
				{
					return p - _str;
				}
			}

			return -1;
		}</code></pre> 
<p></p> 
<h3>7ï¼‰substr</h3> 
<p><strong><em>substr</em></strong>ï¼šä» <em><u>pos</u> </em>ä½ç½®å– <em><u>len</u> </em>é•¿åº¦çš„å­—ç¬¦ä¸²</p> 
<p>æ€è·¯ï¼š1. <em>pos+len &gt;= size</em> or <em>len == npos</em>ï¼šfrom<em> <u>pos</u></em> to <u><em>size</em></u><br> Â  Â  Â  Â  Â  Â 2. elseï¼šfrom <u><em>pos</em></u> to<em> <u>pos+len</u></em></p> 
<p><strong>æ³¨æ„</strong>ï¼šä¼ å€¼è¿”å›ï¼Œéœ€è¦å†™ <strong>æ‹·è´æ„é€ Â  â†’ æ¶‰åŠæ·±æ‹·è´çš„é—®é¢˜(</strong>è¯¦è§ä¸‹ä¸€éƒ¨åˆ†Â <em><u>8ï¼‰æ·±æ‹·è´</u>Â </em><strong>)</strong></p> 
<p></p> 
<p>ä»£ç ç¤ºä¾‹ï¼š</p> 
<pre><code class="language-cpp">//ä»posä½ç½®å–lené•¿åº¦çš„å­—ç¬¦ä¸²
		string substr(const size_t pos, const size_t len = npos)const
		{
			if ((len == npos) || (pos + len &gt;= _size))
			{
				string tmp(_str + pos);//ä»poså¾€åçš„æ•°æ®å…¨éƒ¨copy
				return tmp;
			}
			else
			{
				string tmp;
				tmp.reserve(len);//check capacity

				for (size_t i = 0; i &lt; len; ++i)
				{
					tmp += _str[pos + i];
				}
				return tmp;
			}
		}</code></pre> 
<p></p> 
<h3 style="background-color:transparent;">8ï¼‰æ·±æ‹·è´</h3> 
<h4>copy constructor</h4> 
<p>ä»£ç ç¤ºä¾‹ï¼š</p> 
<pre><code class="language-cpp">		string(const string&amp; s)//copy constructor
		{
			_str = new char[s._capacity + 1];
			strcpy(_str, s._str);
			_size = s._size;
			_capacity = s._capacity;
		}</code></pre> 
<h4>èµ‹å€¼é‡è½½</h4> 
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œèµ‹å€¼é‡è½½å‡½æ•°çš„å®ç°æ€è·¯ï¼šâ‘ å¼€æ–°ç©ºé—´ï¼›â‘¡å°†å³æ“ä½œæ•°çš„æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼›â‘¢é‡Šæ”¾æ—§ç©ºé—´â€”â€”å·¦æ“ä½œæ•°åŸæœ¬æŒ‡å‘çš„ç©ºé—´ï¼›â‘£è®©åšå·¦æ“ä½œæ•°æŒ‡å‘æ–°ç©ºé—´ã€‚<br><em><span style="background-color:#fbd4d0;">æ³¨æ„ï¼šè‡ªå·±ç»™è‡ªå·±èµ‹å€¼çš„æƒ…å†µï¼ï¼ˆå¦‚æœç¬¬ä¸€æ­¥å°±æ˜¯é‡Šæ”¾æ—§ç©ºé—´ï¼Œè€Œæ­¤æ—¶æ˜¯è‡ªå·±ç»™è‡ªå·±èµ‹å€¼æ—¶ï¼Œä¼šå¯¼è‡´é”™è¯¯çš„ç»“æœï¼‰</span></em></p> 
<div> 
 <p class="img-center"><img alt="" height="491" src="https://images2.imgbox.com/9d/7f/44ZpOS6M_o.png" width="950"></p> 
 <p></p> 
 <p>ä»£ç ç¤ºä¾‹ï¼š</p> 
 <pre><code class="language-cpp">		string&amp; operator=(const string&amp; s)//assign
		{
			if (this != &amp;s)
			{
				char* tmp = new char[s._capacity + 1];
				strcpy(tmp, s._str);

				delete[]_str;
				_str = tmp;
				_size = s._size;
				_capacity = s._capacity;

				return *this;
			}

		}</code></pre> 
 <p></p> 
 <p><em><span style="background-color:#cbe0f1;">ä¸Šè¿°è¿›è¡Œæ·±æ‹·è´è¡Œä¸ºçš„å†™æ³•è¢«æˆä¸ºâ€œä¼ ç»Ÿå†™æ³•â€ã€‚ä¸‹é¢ä»‹ç»ä¸€ç§â€œ<strong>ç°ä»£å†™æ³•</strong>â€ã€‚</span></em></p> 
 <ul><li><span style="color:#0d0016;">å¯¹äºæ‹·è´æ„é€ å‡½æ•°ï¼š</span> <p class="img-center"><img alt="" height="250" src="https://images2.imgbox.com/b2/29/nVjaUK5I_o.png" width="751"></p> </li></ul> 
 <p>Â <em>ps.</em>è¿™é‡Œäº¤æ¢ <em>tmp</em> å’Œè¦è¢«æ„é€ çš„å¯¹è±¡<em> *this</em> è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šè¦è¢«æ„é€ çš„å¯¹è±¡å­˜å‚¨çš„æ•°æ®å¯èƒ½éšæœºå€¼ï¼ˆ<span style="color:#a5a5a5;">è¿™é‡Œå°¤æŒ‡å…¶ä¸­çš„ç§æœ‰æˆå‘˜Â <strong><em>_strÂ </em></strong>å­˜çš„åœ°å€æ˜¯ä¸€ä¸ªéšæœºåœ°å€</span>ï¼‰ï¼Œæ‹·è´æ„é€ å‡½æ•°æ‰§è¡Œå®Œåï¼Œ<em>tmp</em> ä¼šè°ƒç”¨<strong>ææ„å‡½æ•°</strong>ï¼Œ<u><em>delete[]Â </em>ä¸€ä¸ªéšæœºåœ°å€ä¼šå‡ºç°é—®é¢˜</u>ï¼Œæ‰€ä»¥è¿™ä¸ªæ„é€ å‡½æ•°æœ€å¥½å…ˆåœ¨åˆå§‹åŒ–åˆ—è¡¨å¯¹æˆå‘˜å˜é‡åˆå§‹åŒ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p> 
 <p><strong><span style="background-color:#fef2f0;">æ³¨æ„</span></strong><span style="background-color:#fef2f0;">ï¼šå…¶ä¸­ç”¨åˆ°çš„ swap å‡½æ•°è¦è‡ªå·±å®ç°ï¼Œä¸å»ºè®®ç›´æ¥ç”¨C++æ ‡å‡†åº“é‡Œçš„ swap å‡½æ•°ã€‚</span><img alt="" height="307" src="https://images2.imgbox.com/2e/4f/wz2w3Jp2_o.png" width="1020"></p> 
 <p></p> 
 <ul><li>å¯¹äºèµ‹å€¼é‡è½½ï¼š <p class="img-center"><img alt="" height="433" src="https://images2.imgbox.com/92/2f/38VIUcRY_o.png" width="1200"></p> </li></ul> 
 <p>Â </p> 
 <p>ä»¥ä¸Šï¼Œä¼ ç»Ÿå†™æ³•å’Œç°ä»£å†™æ³•æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ•ˆç‡ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯å†™æ³•ä¸Šæ›´ç®€æ´ã€‚</p> 
 <p></p> 
</div> 
<h2>è¡¥å……è¯´æ˜ï¼š</h2> 
<h3>1ï¼‰sizeof(string)</h3> 
<p>ä¸åŒå¹³å°ä¸‹ stringç±» çš„åº•å±‚è®¾è®¡ä¸åŒã€‚</p> 
<div> 
 <p class="img-center"><img alt="" height="323" src="https://images2.imgbox.com/e1/07/Io9w2ez9_o.png" width="927"></p> 
 <p>â€‹</p> 
</div> 
<h4></h4> 
<h3 id="string%E7%B1%BB%E8%AE%BE%E8%AE%A1%E4%B8%8A%E7%9A%84%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98%EF%BC%9A%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E6%B5%AA%E8%B4%B9">2ï¼‰stringç±»è®¾è®¡ä¸Šçš„æ•ˆç‡é—®é¢˜ï¼šæ·±æ‹·è´çš„æµªè´¹</h3> 
<p><img alt="" class="left" height="255" src="https://images2.imgbox.com/4e/ac/BU2JOqVJ_o.png" width="511">â€‹æ—¢ç„¶æ·±æ‹·è´å¯¼è‡´äº†æµªè´¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è€ƒè™‘å¯ä¸å¯ä»¥<strong>æµ…æ‹·è´</strong>ã€‚<br><br> æµ…æ‹·è´å…·æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br> â‘ ä¸¤ä¸ªå¯¹è±¡ä¸­çš„ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€å—ç©ºé—´ï¼Œè€Œå¯¼è‡´è¯¥ç©ºé—´ä¼šè¢«<u>ææ„ä¸¤æ¬¡</u>ã€‚<br> â‘¡å½“æˆ‘ä»¬<u>ä¿®æ”¹</u>å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ä¼š<u>å½±å“</u>å¦ä¸€ä¸ªå¯¹è±¡ã€‚<br><br> æ¥ä¸‹æ¥æˆ‘ä»¬é’ˆå¯¹ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜åšè®¨è®ºã€‚ï¼ˆä»¥ä¸‹ä»…ä½œç®€å•ç²—ç•¥çš„è®¨è®ºï¼Œä»…ä¾›äº†è§£ï¼‰</p> 
<ol><li><strong>ææ„ä¸¤æ¬¡ ğŸ‘‰ </strong><em>å¼•ç”¨è®¡æ•°</em><br><u><em>å¼•ç”¨è®¡æ•°</em></u>ï¼šè®°å½•æœ‰å‡ ä¸ªå¯¹è±¡æŒ‡å‘è¿™ä¸ªç©ºé—´<br> ä½œç”¨è¿‡ç¨‹ï¼šå¼•ç”¨è®¡æ•° = 2 â†’ å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ææ„ä¸€æ¬¡ä¹‹å â†’ å¼•ç”¨è®¡æ•°å‡ä¸€<br> Â  Â  Â  Â  Â  Â  Â  Â  Â  å¼•ç”¨è®¡æ•° = 1 â†’ å¦ä¸€ä¸ªå¯¹è±¡ä¸æ‰§è¡Œææ„ â†’ å¼•ç”¨è®¡æ•°å‡ä¸€ï¼Œå¹¶é‡Šæ”¾è¿™ä¸ªå¯¹è±¡ 
  <div> 
   <p class="img-center"><img alt="" height="389" src="https://images2.imgbox.com/6c/4d/FpWjVtYv_o.png" width="736"></p> 
   <p>â€‹</p> 
  </div> </li><li><strong>ä¿®æ”¹å½±å“ ğŸ‘‰ </strong>å†™æ—¶æ‹·è´<br><u><em>å†™æ—¶æ‹·è´</em></u>ï¼šå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶è¿›è¡Œæ·±æ‹·è´ï¼ˆå»¶è¿Ÿæ‹·è´ï¼‰<br> ä½œç”¨è¿‡ç¨‹ï¼šå¼•ç”¨è®¡æ•° = 1 â†’ ä¿®æ”¹è¡Œä¸ºå¯ä»¥ç›´æ¥è¿›è¡Œ<br> Â  Â  Â  Â  Â  Â  Â  Â  Â  å¼•ç”¨è®¡æ•° â‰  1 â†’Â  è¦è¿›è¡Œä¿®æ”¹æ—¶ï¼Œè¿›è¡Œæ·±æ‹·è´ï¼Œ<em>æ–°å¼€çš„ç©ºé—´é…æ–°çš„å¼•ç”¨è®¡æ•°</em> â†’ å¼•ç”¨è®¡æ•°å‡ä¸€<br> å…¨ç§°ï¼š<em><strong><span style="background-color:#fef2f0;">å¼•ç”¨è®¡æ•°å†™æ—¶æ‹·è´</span></strong></em><br> æ€»ç»“ï¼šåœ¨ä¸éœ€è¦ä¿®æ”¹çš„åœºæ™¯ä¸‹ï¼Œå†™æ—¶æ‹·è´ä¼šé¿å…å¾ˆå¤šèµ„æºæµªè´¹ã€‚</li></ol> 
<p>ï¼ˆps.g++é‡‡ç”¨çš„æ˜¯å†™æ—¶æ‹·è´ï¼‰</p> 
<hr> 
<p>ENDÂ </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e25c9e7a54ff8fe883b458791dc98d08/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">SVNçš„ä¸‹è½½çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œç»¿è‰²å›¾æ ‡æ²¡å‡ºæ¥çš„è§£å†³åŠæ³•</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d13f3622fde654df13e1d355f92679ca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">åŸºäºAndroid(å®‰å“)&#43;MySQL&#43;Tomcatå¼€å‘çš„åƒè´§ç‚¹é¤å¹³å°</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>