<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3台linux安装hadoop机群 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="3台linux安装hadoop机群" />
<meta property="og:description" content="准备工作：有3台虚拟机，主机名为node1、node2、node3，并且node1为主节点 第一步：上传压缩包并解压 将压缩的hadoop包上传到第一台服务器并解压；第一台机器执行以下命令 cd /usr/soft/ tar -xzvf hadoop-3.1.4.tar.gz -C /usr/install 第二步：查看hadoop支持的压缩方式以及本地库 第一台机器执行以下命令 cd /usr/install/hadoop-3.1.4/ bin/hadoop checknative 如果出现openssl为false，那么所有机器在线安装openssl即可，执行以下命令，虚拟机联网之后就可以在线进行安装了 sudo yum -y install openssl-devel 第三步：修改配置文件 修改hadoop-env.sh第一台机器执行以下命令 cd /usr/install/hadoop-3.1.4/etc/hadoop/ vim hadoop-env.sh export JAVA_HOME=/usr/install/jdk1.8.0_141 修改core-site.xml第一台机器执行以下命令 vim core-site.xml &lt;configuration&gt; &lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://node1:8020&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/usr/install/hadoop-3.1.4/hadoopDatas/tempDatas&lt;/value&gt; &lt;/property&gt; &lt;!-- 缓冲区大小，实际工作中根据服务器性能动态调整；默认值4096 --&gt; &lt;property&gt; &lt;name&gt;io.file.buffer.size&lt;/name&gt; &lt;value&gt;4096&lt;/value&gt; &lt;/property&gt; &lt;!-- 开启hdfs的垃圾桶机制，删除掉的数据可以从垃圾桶中回收，单位分钟；默认值0 --&gt; &lt;property&gt; &lt;name&gt;fs.trash.interval&lt;/name&gt; &lt;value&gt;10080&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 修改hdfs-site.xml 第一台机器执行以下命令 vim hdfs-site.xml &lt;configuration&gt; &lt;!-- NameNode存储元数据信息的路径，实际工作中，一般先确定磁盘的挂载目录，然后多个目录用，进行分割 --&gt; &lt;!-- 集群动态上下线 &lt;property&gt; &lt;name&gt;dfs.hosts&lt;/name&gt; &lt;value&gt;/usr/install/hadoop-3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f736650945505eca402f0daf3d112ee4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-11T21:14:43+08:00" />
<meta property="article:modified_time" content="2021-12-11T21:14:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">3台linux安装hadoop机群</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="3node1node2node3node1_0"></a>准备工作：有3台虚拟机，主机名为node1、node2、node3，并且node1为主节点</h3> 
<h6><a id="_1"></a>第一步：上传压缩包并解压</h6> 
<ul><li>将压缩的hadoop包上传到第一台服务器并解压；第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /usr/soft/
<span class="token function">tar</span> -xzvf hadoop-3.1.4.tar.gz -C /usr/install
</code></pre> 
<h6><a id="hadoop_7"></a>第二步：查看hadoop支持的压缩方式以及本地库</h6> 
<ul><li>第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /usr/install/hadoop-3.1.4/
bin/hadoop checknative
</code></pre> 
<p><img src="https://images2.imgbox.com/5d/4c/XCZ1afKI_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果出现openssl为false，那么<mark>所有机器</mark>在线安装openssl即可，执行以下命令，虚拟机联网之后就可以在线进行安装了</li></ul> 
<pre><code class="prism language-javascript">sudo yum <span class="token operator">-</span>y install openssl<span class="token operator">-</span>devel
</code></pre> 
<h6><a id="_18"></a>第三步：修改配置文件</h6> 
<ul><li>修改hadoop-env.sh</li><li>第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /usr/install/hadoop-3.1.4/etc/hadoop/
<span class="token function">vim</span> hadoop-env.sh
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/install/jdk1.8.0_141
</code></pre> 
<ul><li>修改core-site.xml</li><li>第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span> core-site.xml

<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.defaultFS<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://node1:802<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/usr/install/hadoop-3.1.4/hadoopDatas/tempDatas<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>--  缓冲区大小，实际工作中根据服务器性能动态调整；默认值4096 --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>io.file.buffer.size<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">409</span><span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>--  开启hdfs的垃圾桶机制，删除掉的数据可以从垃圾桶中回收，单位分钟；默认值0 --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.trash.interval<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">1008</span><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="hdfssitexml_52"></a>修改hdfs-site.xml</h6> 
<ul><li>第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span> hdfs-site.xml

<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- NameNode存储元数据信息的路径，实际工作中，一般先确定磁盘的挂载目录，然后多个目录用，进行分割   --<span class="token operator">&gt;</span> 
    <span class="token operator">&lt;</span><span class="token operator">!</span>--   集群动态上下线 
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.hosts<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/usr/install/hadoop-3.1.4/etc/hadoop/accept_host<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.hosts.exclude<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/usr/install/hadoop-3.1.4/etc/hadoop/deny_host<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
     --<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.secondary.http-address<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>node1:986<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.http-address<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>node1:987<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- namenode保存fsimage的路径 --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.name.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:///usr/install/hadoop-3.1.4/hadoopDatas/namenodeDatas<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>--  定义dataNode数据存储的节点位置，实际工作中，一般先确定磁盘的挂载目录，然后多个目录用，进行分割  --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.datanode.data.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:///usr/install/hadoop-3.1.4/hadoopDatas/datanodeDatas<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- namenode保存editslog的目录 --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.edits.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:///usr/install/hadoop-3.1.4/hadoopDatas/dfs/nn/edits<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- secondarynamenode保存待合并的fsimage --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.checkpoint.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:///usr/install/hadoop-3.1.4/hadoopDatas/dfs/snn/name<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- secondarynamenode保存待合并的editslog --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.namenode.checkpoint.edits.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file:///usr/install/hadoop-3.1.4/hadoopDatas/dfs/nn/snn/edits<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.replication<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.permissions.enabled<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>false<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.blocksize<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">13421772</span><span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="mapredsitexml_116"></a>修改mapred-site.xml</h6> 
<ul><li>第一台机器执行以下命令</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span> mapred-site.xml

<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.framework.name<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.job.ubertask.enable<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>true<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.jobhistory.address<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>node1:1002<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.jobhistory.webapp.address<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>node1:1988<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.app.mapreduce.am.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.map.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.reduce.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="yarnsitexml_152"></a>修改yarn-site.xml</h6> 
<ul><li>第一台机器执行以下命令</li><li>下面展示一些 <code>内联代码片</code>。</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span> yarn-site.xml

<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.resourcemanager.hostname<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>node<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.aux-services<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>-- 如果vmem、pmem资源不够，会报错，此处将资源监察置为false --<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>false<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.pmem-check-enabled<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>false<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="workers_179"></a>修改workers文件</h6> 
<ul><li>第一台机器执行以下命令 下面展示一些 <code>内联代码片</code>。</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span> workers
原内容替换为
node1
node2
node3
</code></pre> 
<h6><a id="_189"></a>第四步：创建文件存放目录</h6> 
<ul><li>第一台机器执行以下命令 node1机器上面创建以下目录</li></ul> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/tempDatas
<span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/namenodeDatas
<span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/datanodeDatas 
<span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/dfs/nn/edits
<span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/dfs/snn/name
<span class="token function">mkdir</span> -p /usr/install/hadoop-3.1.4/hadoopDatas/dfs/nn/snn/edits
</code></pre> 
<h6><a id="scp_199"></a>第五步：安装包的分发scp</h6> 
<h6><a id="1_scp_200"></a>1. 通过scp直接拷贝</h6> 
<ul><li>scp（secure copy）安全拷贝</li><li>可以通过scp进行不同服务器之间的文件或者文件夹的复制</li></ul> 
<pre><code class="prism language-javascript">scp <span class="token operator">-</span>r sourceFile  username@host<span class="token operator">:</span>destpath
</code></pre> 
<ul><li>用法示例</li></ul> 
<pre><code class="prism language-javascript">scp <span class="token operator">-</span>r hadoop<span class="token operator">-</span>lzo<span class="token operator">-</span><span class="token number">0.4</span><span class="token number">.20</span><span class="token punctuation">.</span>jar hadoop@node1<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">usr</span><span class="token regex-delimiter">/</span></span>
</code></pre> 
<ul><li>node01执行以下命令进行拷贝</li></ul> 
<pre><code class="prism language-javascript">cd <span class="token operator">/</span>usr<span class="token operator">/</span>install<span class="token operator">/</span>
scp <span class="token operator">-</span>r hadoop<span class="token operator">-</span><span class="token number">3.1</span><span class="token number">.4</span><span class="token operator">/</span> node2<span class="token operator">:</span>$<span class="token constant">PWD</span>
scp <span class="token operator">-</span>r hadoop<span class="token operator">-</span><span class="token number">3.1</span><span class="token number">.4</span><span class="token operator">/</span> node3<span class="token operator">:</span>$<span class="token constant">PWD</span>
</code></pre> 
<h6><a id="hadoop_217"></a>第六步：配置hadoop的环境变量</h6> 
<ul><li>三台机器都要进行配置hadoop的环境变量</li><li>三台机器执行以下命令</li></ul> 
<pre><code class="prism language-javascript">sudo vim <span class="token operator">/</span>etc<span class="token operator">/</span>profile
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">export</span> <span class="token constant">HADOOP_HOME</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>install<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">3.1</span><span class="token number">.4</span>
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token constant">PATH</span><span class="token operator">:</span>$<span class="token constant">HADOOP_HOME</span><span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">HADOOP_HOME</span><span class="token operator">/</span>sbin
</code></pre> 
<ul><li>配置完成之后生效</li></ul> 
<pre><code class="prism language-javascript">source <span class="token operator">/</span>etc<span class="token operator">/</span>profile
</code></pre> 
<h6><a id="_230"></a>第七步：格式化集群</h6> 
<ul><li>要启动 Hadoop 集群，需要启动 HDFS 和 YARN 两个集群。</li><li>注意：首次启动HDFS时，必须对其进行格式化操作。本质上是一些清理和准备工作，因为此时的 HDFS 在物理上还是不存在的。<font color="red">格式化操作只有在首次启动的时候需要，以后再也不需要了</font></li><li><font color="red">node1执行一遍即可</font></li></ul> 
<pre><code class="prism language-javascript">hdfs namenode <span class="token operator">-</span>format 
或者
hadoop namenode –format
</code></pre> 
<ul><li>下图高亮表示格式化成功；</li></ul> 
<p><img src="https://images2.imgbox.com/c1/87/xcAEYZBA_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_242"></a>第八步：集群启动</h6> 
<ul><li>启动HDFS、YARN、Historyserver</li><li>主节点node1节点上执行以下命令</li></ul> 
<pre><code class="prism language-javascript">start<span class="token operator">-</span>dfs<span class="token punctuation">.</span>sh
start<span class="token operator">-</span>yarn<span class="token punctuation">.</span>sh
# 已过时mr<span class="token operator">-</span>jobhistory<span class="token operator">-</span>daemon<span class="token punctuation">.</span>sh start historyserver
mapred <span class="token operator">--</span>daemon start historyserver
</code></pre> 
<ul><li>停止集群（主节点node01节点上执行）</li></ul> 
<pre><code class="prism language-javascript">stop<span class="token operator">-</span>dfs<span class="token punctuation">.</span>sh
stop<span class="token operator">-</span>yarn<span class="token punctuation">.</span>sh 
# 已过时 mr<span class="token operator">-</span>jobhistory<span class="token operator">-</span>daemon<span class="token punctuation">.</span>sh stop historyserver
mapred <span class="token operator">--</span>daemon stop historyserver
</code></pre> 
<h6><a id="_258"></a>第九步：验证集群是否搭建成功</h6> 
<p>访问对应主节点的ip+port访问指定页面即可</p> 
<ul><li>hdfs集群访问地址</li></ul> 
<p>http://192.168.51.100:9870/</p> 
<ul><li>yarn集群访问地址</li></ul> 
<p>http://192.168.51.100:8088</p> 
<ul><li>jobhistory访问地址：</li></ul> 
<p>http://192.168.51.100:19888<br> <img src="https://images2.imgbox.com/9b/2e/2upVPkei_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55c07f7b01292523a14c68d570c56a03/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">复杂NER问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f907a1492b043ae332c25f56ccd62b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">序列标注的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>