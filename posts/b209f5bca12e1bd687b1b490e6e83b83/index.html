<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>限时回归！！！3D版《空洞骑士》！！！ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="限时回归！！！3D版《空洞骑士》！！！" />
<meta property="og:description" content="空洞骑士是一款基于横板平台跳跃的传统风格2D动作冒险游戏。庞大的游戏世界交错相通，玩家控制小虫子去探索幽深黑暗的洞穴，成为了一代人茶余饭后的惦念，深受广大玩家们的喜爱。
这类平台跳跃游戏一般是游戏开发初学者以及独立游戏开发者们比较青睐的类型，也是诸多开发者们开发游戏Demo的第一站。
为了让更多的游戏开发者们能够做出自己心中想要的平台跳跃游戏Demo，今天我们讲解如何使用Unity3D引擎制作此类游戏。
我们需要掌握以下三项基本的游戏开发技术。
1、角色操控以及手感优化的技术要点
2、角色的四方向射线检测的技术要点
3、各种平台的技术要点
一、角色操控以及手感优化的技术要点
这里我们涉及到引擎如何控制一个游戏物体完成移动的知识。
对于Unity3D引擎来说，移动一个物体的核心原理是每一帧更新物体在3D坐标系中的位置。
对于横板游戏来说，我们关注的是水平方向和垂直方向的移动，而对于Z轴纵深方向的移动，除了某些特殊情况外，角色部分基本不需要考虑。
而对于移动而言，我们可以使用基本的平移方法Translate来完成移动，也可以通过更新Transform、Postion来完成移动。同样可以通过对角色对象添加刚体组件Rigidbody，然后通过设置刚体组件的velocity属性来完成移动。
当然你也可以通过使用Unity引擎提供的角色控制器CharacterController 完成对角色移动的控制。还有一些提供移动方法的插件这里就不做过多的赘述。
面对众多的移动选择，该选择哪一种成了初学者们最容易头疼的地方。由于刚体和角色控制器都自带了碰撞检测，所以很多同学会选择这两者之一作为2D平台跳跃移动的方式。
许多游戏开发者在游戏开发到中后期时往往会遇到很多棘手的问题。开发者们为了维护和修改这些问题往往付出了非常巨大的代价和精力，却始终没有办法从根本解决问题。这就导致了很多游戏最终无法开发完成，开发者为此也付出了高昂的学习成本。
所以这里我们推荐大家使用最基本的Translate方法来完成移动。因为它足够简单，没有过多的牵连，可以为开发者们提供最大程度的可操作空间。
同时，因为刚体组件和角色控制器会涉及到一定的引擎物理，而平台跳跃游戏中产生的物理情况，大部分并非模拟现实的物理情况，所以我们需要自己来为它开发相关的物理部分。
这时使用引擎自带的物理反而会产生很多的不可控问题，导致意外情况的增加。因为Translate方法本身没有自带碰撞检测，所以我们还需要提供一些可维护性以及可控制性强的物理检测方法。
来看看下图中的方法：
这里我们使用射线检测的方式来完成，这个方法包括但不限于撞墙检测、脚下地面检测、头顶碰撞检测、穿越平台检测、爬坡检测等。
这里使用角色控制器的同学可能遇到过类似跳跃失败、爬坡控制性不强的问题，出现这个问题的具体原因上面已经做过阐述。
二、角色的四方向射线检测的技术要点
这里主要的技术要点在于为了达到精确检测和掌控力更强的控制碰撞。平台跳跃类游戏一般不会使用Unity3D自带的刚体及碰撞器来完成各项碰撞检测,取而代之的是使用基础射线。
为了能够检测角色脚下、头顶、前后方是否碰撞各类平台以及怪物、道具等，我们需要搭建一个健壮的射线检测基础架构。这里需要注意的技术要点有：射线检测的数量、检测的时机、检测的层、检测的起点、方向以及长度等。可以帮助我们完成游戏中需要的各项检测，同时能够达到非常精确的控制以及按需检测等多项好处，是同学对于平台类游戏碰撞检测的必学核心技术点之一。
三、各种平台的技术要点
最后我们说说游戏中各项平台的功能。横板跳跃游戏中，平台分为基础平台、可向下穿越平台、可移动平台等类型；又可以组合出可移动基础平台、可移动向下穿越平台、不可移动基础平台和不可移动向下穿越平台等多种类型的平台。
在要点二中我们可以知道，对于角色检测平台，一定离不开射线的辅助。而平台的制作，主要是基于平台的位置和位移，来精确的修正角色的位置和位移。比如在落到平台时，角色需要精确的修正Y轴坐标为平台接触点坐标，而跳起来顶到头上的平台时，需要修正坐标为接触点坐标减去角色碰撞器高度等。
对于移动平台，初学者容易进入一个误区，就是让角色成为平台的子物体以帮助角色在平台移动。而这样操作的结果是丧失了精确性，容易产生更多bug，并且不符合我们的框架设计原理。
正确的做法是通过每帧修复角色的位移，让角色位置能够叠加平台的移动方向的速度产生的位移以及角色自身控制产生的位移，这样才能够在统一的框架下完成精确的处理。
关于2D平台跳跃游戏的技术点我们就分析到这里，为了让喜欢游戏开发的小伙伴能尽早开发出自己的《空洞骑士》类游戏Demo，我们开设了《3D版空洞骑士》4天训练营，让大家从0做出一款游戏Demo。扫描下方二维码回复[空洞骑士]即可免费参与" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b209f5bca12e1bd687b1b490e6e83b83/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-28T16:14:49+08:00" />
<meta property="article:modified_time" content="2024-01-28T16:14:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">限时回归！！！3D版《空洞骑士》！！！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>空洞骑士是一款基于横板平台跳跃的传统风格2D动作冒险游戏。庞大的游戏世界交错相通，玩家控制小虫子去探索幽深黑暗的洞穴，成为了一代人茶余饭后的惦念，深受广大玩家们的喜爱。</p> 
<p>这类平台跳跃游戏一般是游戏开发初学者以及独立游戏开发者们比较青睐的类型，也是诸多开发者们开发游戏Demo的第一站。</p> 
<p><img src="https://images2.imgbox.com/fa/f1/LMxiX06h_o.jpg" alt="请添加图片描述"><br> 为了让更多的游戏开发者们能够做出自己心中想要的平台跳跃游戏Demo，今天我们讲解如何使用Unity3D引擎制作此类游戏。</p> 
<p>我们需要掌握以下三项基本的游戏开发技术。</p> 
<p>1、角色操控以及手感优化的技术要点</p> 
<p>2、角色的四方向射线检测的技术要点</p> 
<p>3、各种平台的技术要点<br> <img src="https://images2.imgbox.com/a2/d2/RmbiYEB2_o.jpg" alt="在这里插入图片描述"><br> <em><strong>一、角色操控以及手感优化的技术要点</strong></em></p> 
<p>这里我们涉及到引擎如何控制一个游戏物体完成移动的知识。</p> 
<p>对于Unity3D引擎来说，移动一个物体的核心原理是每一帧更新物体在3D坐标系中的位置。</p> 
<p>对于横板游戏来说，我们关注的是水平方向和垂直方向的移动，而对于Z轴纵深方向的移动，除了某些特殊情况外，角色部分基本不需要考虑。<br> <img src="https://images2.imgbox.com/f2/cf/1LUuVycZ_o.png" alt="请添加图片描述"><br> 而对于移动而言，我们可以使用基本的平移方法Translate来完成移动，也可以通过更新Transform、Postion来完成移动。同样可以通过对角色对象添加刚体组件Rigidbody，然后通过设置刚体组件的velocity属性来完成移动。</p> 
<p>当然你也可以通过使用Unity引擎提供的角色控制器CharacterController 完成对角色移动的控制。还有一些提供移动方法的插件这里就不做过多的赘述。</p> 
<p>面对众多的移动选择，该选择哪一种成了初学者们最容易头疼的地方。由于刚体和角色控制器都自带了碰撞检测，所以很多同学会选择这两者之一作为2D平台跳跃移动的方式。</p> 
<p>许多游戏开发者在游戏开发到中后期时往往会遇到很多棘手的问题。开发者们为了维护和修改这些问题往往付出了非常巨大的代价和精力，却始终没有办法从根本解决问题。这就导致了很多游戏最终无法开发完成，开发者为此也付出了高昂的学习成本。</p> 
<p><img src="https://images2.imgbox.com/fb/66/739SUmT7_o.gif" alt="请添加图片描述"><br> 所以这里我们推荐大家使用最基本的Translate方法来完成移动。因为它足够简单，没有过多的牵连，可以为开发者们提供最大程度的可操作空间。</p> 
<p>同时，因为刚体组件和角色控制器会涉及到一定的引擎物理，而平台跳跃游戏中产生的物理情况，大部分并非模拟现实的物理情况，所以我们需要自己来为它开发相关的物理部分。</p> 
<p>这时使用引擎自带的物理反而会产生很多的不可控问题，导致意外情况的增加。因为Translate方法本身没有自带碰撞检测，所以我们还需要提供一些可维护性以及可控制性强的物理检测方法。</p> 
<p>来看看下图中的方法：<br> <img src="https://images2.imgbox.com/20/8b/pnq9WxOS_o.png" alt="请添加图片描述"><br> 这里我们使用射线检测的方式来完成，这个方法包括但不限于撞墙检测、脚下地面检测、头顶碰撞检测、穿越平台检测、爬坡检测等。</p> 
<p>这里使用角色控制器的同学可能遇到过类似跳跃失败、爬坡控制性不强的问题，出现这个问题的具体原因上面已经做过阐述。<br> <img src="https://images2.imgbox.com/8e/c3/xHadw21k_o.png" alt="请添加图片描述"><br> <em><strong>二、角色的四方向射线检测的技术要点</strong></em></p> 
<p>这里主要的技术要点在于为了达到精确检测和掌控力更强的控制碰撞。平台跳跃类游戏一般不会使用Unity3D自带的刚体及碰撞器来完成各项碰撞检测,取而代之的是使用基础射线。</p> 
<p>为了能够检测角色脚下、头顶、前后方是否碰撞各类平台以及怪物、道具等，我们需要搭建一个健壮的射线检测基础架构。这里需要注意的技术要点有：射线检测的数量、检测的时机、检测的层、检测的起点、方向以及长度等。可以帮助我们完成游戏中需要的各项检测，同时能够达到非常精确的控制以及按需检测等多项好处，是同学对于平台类游戏碰撞检测的必学核心技术点之一。<br> <img src="https://images2.imgbox.com/ef/08/OCinseQH_o.png" alt="请添加图片描述"><em><strong>三、各种平台的技术要点</strong></em></p> 
<p>最后我们说说游戏中各项平台的功能。横板跳跃游戏中，平台分为基础平台、可向下穿越平台、可移动平台等类型；又可以组合出可移动基础平台、可移动向下穿越平台、不可移动基础平台和不可移动向下穿越平台等多种类型的平台。</p> 
<p>在要点二中我们可以知道，对于角色检测平台，一定离不开射线的辅助。而平台的制作，主要是基于平台的位置和位移，来精确的修正角色的位置和位移。比如在落到平台时，角色需要精确的修正Y轴坐标为平台接触点坐标，而跳起来顶到头上的平台时，需要修正坐标为接触点坐标减去角色碰撞器高度等。</p> 
<p>对于移动平台，初学者容易进入一个误区，就是让角色成为平台的子物体以帮助角色在平台移动。而这样操作的结果是丧失了精确性，容易产生更多bug，并且不符合我们的框架设计原理。</p> 
<p>正确的做法是通过每帧修复角色的位移，让角色位置能够叠加平台的移动方向的速度产生的位移以及角色自身控制产生的位移，这样才能够在统一的框架下完成精确的处理。</p> 
<p>关于2D平台跳跃游戏的技术点我们就分析到这里，为了让喜欢游戏开发的小伙伴能尽早开发出自己的《空洞骑士》类游戏Demo，我们开设了《3D版空洞骑士》4天训练营，让大家从0做出一款游戏Demo。扫描下方二维码回复[空洞骑士]即可免费参与<br> <img src="https://images2.imgbox.com/42/87/zJNVCPOk_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bb0f3a3c80c9d6bc54d6483e0c3430f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">独立游戏开发，能赚到钱吗？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5540fba3d9e7fef781bd4a75e35f8f5d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">提升编程效率的利器: 解析Google Guava库之集合篇Immutable（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>