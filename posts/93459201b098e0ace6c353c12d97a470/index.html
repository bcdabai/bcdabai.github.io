<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CobaltStrike4.0安装 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CobaltStrike4.0安装" />
<meta property="og:description" content="CobaltStrike CobaltStrike是一款渗透测试神器，被业界人称为CS神器。CobaltStrike分为客户端与服务端，服务端是一个，客户端可以有多个，可被团队进行分布式协团操作。
CobaltStrike集成了端口转发、服务扫描，自动化溢出，多模式端口监听，windows exe 木马生成，windows dll 木马生成，java 木马生成，office 宏病毒生成，木马捆绑。钓鱼攻击包括：站点克隆，目标信息获取，java 执行，浏览器自动攻击等等强大的功能！
官网：https://www.cobaltstrike.com
环境配置 云主机
CentOS 7.6 64bit 安装 安装java环境 安装
yum install -y java-1.8.0-openjdk* 查看java版本
java -version 上传CobaltStrike包到服务器 CobaltStrike4.0资源下载
https://www.jb51.net/softs/772608.html 上传到服务器
进入CobaltStrike_4.0目录，为&#34;agscript&#34;、“c2lint”、&#34;peclone&#34;和&#34;teamserver&#34;文件赋予执行权限。
#进入cs目录，这里我改了文件名原资源包不是这个文件名 cd cobaltstrike4.0/ #查看 ls -l #赋予权限 chmod a&#43;x agscript chmod a&#43;x c2lint chmod a&#43;x peclone chmod a&#43;x teamserver 启动服务端 终端运行 ./teamserver 192.168.80.137 123456 #192.168.10.11 电脑的ip地址/如果是云主机就填公网ip，123456是密码 后台运行 #关闭终端依然运行，这里使用nohub 命令 &amp; （也可以使用screen，不过需要安装一下screen） nohup ./teamserver 192.168.10.11 123456 &amp; 参考：后台运行程序最实用的两种方法
服务器防火墙开放端口 CobaltStrike默认端口是50050，这里我修改为6000，仅做演示。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/93459201b098e0ace6c353c12d97a470/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-18T18:56:19+08:00" />
<meta property="article:modified_time" content="2022-05-18T18:56:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CobaltStrike4.0安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CobaltStrike_0"></a>CobaltStrike</h2> 
<p>CobaltStrike是一款渗透测试神器，被业界人称为CS神器。CobaltStrike分为客户端与服务端，服务端是一个，客户端可以有多个，可被团队进行分布式协团操作。</p> 
<p>CobaltStrike集成了端口转发、服务扫描，自动化溢出，多模式端口监听，windows exe 木马生成，windows dll 木马生成，java 木马生成，office 宏病毒生成，木马捆绑。钓鱼攻击包括：站点克隆，目标信息获取，java 执行，浏览器自动攻击等等强大的功能！</p> 
<p>官网：https://www.cobaltstrike.com</p> 
<h2><a id="_8"></a>环境配置</h2> 
<p>云主机</p> 
<ul><li>CentOS 7.6 64bit</li></ul> 
<h2><a id="_14"></a>安装</h2> 
<h3><a id="java_16"></a>安装java环境</h3> 
<p>安装</p> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> -y java-1.8.0-openjdk*
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/de/NIaaU1PZ_o.png" alt=""></p> 
<p>查看java版本</p> 
<pre><code class="prism language-shell">java -version
</code></pre> 
<p><img src="https://images2.imgbox.com/3f/f5/GBJa5I8s_o.png" alt=""></p> 
<h3><a id="CobaltStrike_36"></a>上传CobaltStrike包到服务器</h3> 
<p>CobaltStrike4.0资源下载</p> 
<ul><li><a href="https://www.jb51.net/softs/772608.html" rel="nofollow">https://www.jb51.net/softs/772608.html</a></li></ul> 
<p>上传到服务器</p> 
<p><img src="https://images2.imgbox.com/78/22/BhcZ2B2C_o.png" alt=""></p> 
<p>进入CobaltStrike_4.0目录，为"agscript"、“c2lint”、"peclone"和"teamserver"文件赋予执行权限。</p> 
<pre><code class="prism language-shell"><span class="token comment">#进入cs目录，这里我改了文件名原资源包不是这个文件名</span>
<span class="token builtin class-name">cd</span> cobaltstrike4.0/
<span class="token comment">#查看</span>
<span class="token function">ls</span> -l
<span class="token comment">#赋予权限</span>
<span class="token function">chmod</span> a+x agscript
<span class="token function">chmod</span> a+x c2lint
<span class="token function">chmod</span> a+x peclone
<span class="token function">chmod</span> a+x teamserver
</code></pre> 
<p><img src="https://images2.imgbox.com/67/4d/30f3k3dM_o.png" alt=""></p> 
<h3><a id="_64"></a>启动服务端</h3> 
<h4><a id="_66"></a>终端运行</h4> 
<pre><code class="prism language-shell">./teamserver  <span class="token number">192.168</span>.80.137  <span class="token number">123456</span>    
<span class="token comment">#192.168.10.11  电脑的ip地址/如果是云主机就填公网ip，123456是密码</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/27/3e/Cnt287Jj_o.png" alt=""></p> 
<h4><a id="_75"></a>后台运行</h4> 
<pre><code class="prism language-shell"><span class="token comment">#关闭终端依然运行，这里使用nohub 命令 &amp; （也可以使用screen，不过需要安装一下screen）</span>
<span class="token function">nohup</span>  ./teamserver   <span class="token number">192.168</span>.10.11  <span class="token number">123456</span>  <span class="token operator">&amp;</span>
</code></pre> 
<p>参考：<a href="https://blog.csdn.net/qq_39390545/article/details/111225945">后台运行程序最实用的两种方法</a></p> 
<p><img src="https://images2.imgbox.com/85/41/Ps9UVsJU_o.png" alt=""></p> 
<h3><a id="_90"></a>服务器防火墙开放端口</h3> 
<p>CobaltStrike默认端口是50050，这里我修改为6000，仅做演示。</p> 
<p><img src="https://images2.imgbox.com/cb/59/gisIxTIU_o.png" alt=""></p> 
<h3><a id="_96"></a>启动客户端</h3> 
<p>本地windows连接（也需要有java环境）</p> 
<p>直接点击start.bat启动即可</p> 
<p><img src="https://images2.imgbox.com/d2/3b/EwgwU9Aq_o.png" alt=""></p> 
<p>连接上会确认指纹</p> 
<p><img src="https://images2.imgbox.com/62/e6/6SjJ3TtB_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/70/1c/mtEa3olU_o.png" alt=""></p> 
<p>到这里，基本的安装已经完成、下一步就是继续学习CS操作运用。</p> 
<h2><a id="CobalStrike_116"></a>CobalStrike特征修改</h2> 
<p>这里是本地虚拟机环境，仅做演示。</p> 
<h3><a id="CS_120"></a>CS默认端口修改</h3> 
<p>服务端⽂件teamserver内修改，找到server_port 将50050 改为其他端口，即可。</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span>  teamserver
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/09/jWIegs3l_o.png" alt=""></p> 
<p>比如改为6000</p> 
<pre><code class="prism language-shell">java -XX:ParallelGCThreads<span class="token operator">=</span><span class="token number">4</span> -Dcobaltstrike.server_port<span class="token operator">=</span><span class="token number">6000</span> -Djavax.net.ssl.keyStore<span class="token operator">=</span>./cobaltstrike.store -Djavax.net.ssl.keyStorePassword<span class="token operator">=</span><span class="token number">123456</span> -server -XX:+AggressiveHeap -XX:+UseParallelGC -classpath ./cobaltstrike.jar server.TeamServer <span class="token variable">$*</span>
</code></pre> 
<h3><a id="CShttps_138"></a>CS指纹https特征证书修改</h3> 
<p>服务端⽂件teamserver内，找到</p> 
<pre><code class="prism language-shell">keytool -keystore ./cobaltstrike.store -storepass <span class="token number">123456</span> -keypass <span class="token number">123456</span> -genkey -keyalg RSA -alias cobaltstrike -dname <span class="token string">"CN=Major Cobalt Strike, OU=AdvancedPenTesting, O=cobaltstrike, L=Somewhere, S=Cyberspace, C=Earth"</span>
</code></pre> 
<p>修改（值任意）</p> 
<pre><code class="prism language-shell">keytool -keystore ./cobaltstrike.store -storepass <span class="token number">123456</span> -keypass <span class="token number">123456</span> -genkey -keyalg RSA -alias YINGZOU -dname <span class="token string">"CN=YINGZOU, OU=CH, O=LI, L=YINGZOU, S=LI, C=US"</span>
</code></pre> 
<p>⽣成新的证书之后将原来证书删除，放到CS根⽬录,并且我们需要启⽤证书。</p> 
<pre><code class="prism language-shell">keytool -importkeystore -srckeystore cobaltstrike.store -destkeystore cobaltstrike.store -deststoretype pkcs12
</code></pre> 
<p>查看证书，需要密码，密码为123456（忘记密码可以在teamserver查看 -storepass的值）</p> 
<pre><code class="prism language-shell">keytool -list -v  -keystore cobaltstrike.store
</code></pre> 
<p><img src="https://images2.imgbox.com/33/34/0Uy0Lm1A_o.png" alt=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d15b2b29be64bb15ecd422bf0fbdfeca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第三方软件测试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8b808cfdf0a8155c0f5436e638cb65a6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【瑞吉外卖day01】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>