<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python Web自动化】04_02unittest大批量执行测试case - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Python Web自动化】04_02unittest大批量执行测试case" />
<meta property="og:description" content="通常情况下在项目中会有大量的测试case需要去执行操作，基于上一小节的方法（将测试用例添加到测试容器中），在大批量的case面前会变得非常的麻烦。
通常情况下测试用例的执行都是部署到Jenkins的集成测试环境中的，通常我们只需要一条命令执行就可以执行测试用例。
基于这样的思想，我们用可以将我们要执行的测试用例文件全部添加的测试容器中去，然后我们去执行测试容器中添加的批量的测试用例就达到执行批量测试用例的效果。
GitHub代码commits id：2a0769b
创建一份大量测试用例的unittest_case02.py文件
#!/bin/usr/env python3 # -*- coding: utf-8 -*- # -------------------------------------- # ProjectName: MySpace # Author: crisimple # CreateTime: 2019/6/15 18:49 # FileName: unittest_case02.py # Description: 大批量运行case # Question: # -------------------------------------- import unittest class UnittestCase(unittest.TestCase): @classmethod def setUpClass(cls) -&gt; None: print(&#34;所有case执行之前的前提条件\n&#34;) @classmethod def tearDownClass(cls) -&gt; None: print(&#34;所有case执行之后的后置条件\n&#34;) def setUp(self) -&gt; None: print(&#34;...case 的前置条件...\n&#34;) def tearDown(self) -&gt; None: print(&#34;...case 的后置条件...\n&#34;) def test_case001(self): print(&#34;first case001&#34;) # 跳过测试用例的执行，即使在容器中添加了测试用例也可以被跳过 @unittest." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/11c5f839da78b4cb2446edaa78db1f2d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-15T19:42:17+08:00" />
<meta property="article:modified_time" content="2019-06-15T19:42:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python Web自动化】04_02unittest大批量执行测试case</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>通常情况下在项目中会有大量的测试case需要去执行操作，基于上一小节的方法（将测试用例添加到测试容器中），在大批量的case面前会变得非常的麻烦。<br> 通常情况下测试用例的执行都是部署到Jenkins的集成测试环境中的，通常我们只需要一条命令执行就可以执行测试用例。<br> 基于这样的思想，我们用可以将我们要执行的测试用例文件全部添加的测试容器中去，然后我们去执行测试容器中添加的批量的测试用例就达到执行批量测试用例的效果。<br> <a href="https://github.com/Crisimple/WebTest/commit/2a0769b194eeaf97e3c39ba937d18bcfd640a90f">GitHub代码commits id：2a0769b</a></p> 
<hr> 
<p>创建一份大量测试用例的unittest_case02.py文件</p> 
<pre><code class="prism language-python"><span class="token comment">#!/bin/usr/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># --------------------------------------</span>
<span class="token comment"># ProjectName: MySpace</span>
<span class="token comment"># Author: crisimple</span>
<span class="token comment"># CreateTime: 2019/6/15 18:49</span>
<span class="token comment"># FileName: unittest_case02.py</span>
<span class="token comment"># Description: 大批量运行case</span>
<span class="token comment"># Question:</span>
<span class="token comment"># --------------------------------------</span>

<span class="token keyword">import</span> unittest


<span class="token keyword">class</span> <span class="token class-name">UnittestCase</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"所有case执行之前的前提条件\n"</span><span class="token punctuation">)</span>

    @<span class="token builtin">classmethod</span>
    <span class="token keyword">def</span> <span class="token function">tearDownClass</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"所有case执行之后的后置条件\n"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"...case 的前置条件...\n"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"...case 的后置条件...\n"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_case001</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"first case001"</span><span class="token punctuation">)</span>

    <span class="token comment"># 跳过测试用例的执行，即使在容器中添加了测试用例也可以被跳过</span>
    @unittest<span class="token punctuation">.</span>skip
    <span class="token keyword">def</span> <span class="token function">test_case002</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"second case002"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_case003</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"third case003"</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># unittest.main()</span>
    <span class="token comment"># 创建unittest的容器</span>
    suite <span class="token operator">=</span> unittest<span class="token punctuation">.</span>TestSuite<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 添加测试用例到容器</span>
    suite<span class="token punctuation">.</span>addTest<span class="token punctuation">(</span>UnittestCase<span class="token punctuation">(</span><span class="token string">"test_case001"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    suite<span class="token punctuation">.</span>addTest<span class="token punctuation">(</span>UnittestCase<span class="token punctuation">(</span><span class="token string">"test_case002"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    suite<span class="token punctuation">.</span>addTest<span class="token punctuation">(</span>UnittestCase<span class="token punctuation">(</span><span class="token string">"test_case003"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 执行容器里的测试用例</span>
    unittest<span class="token punctuation">.</span>TextTestRunner<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>run<span class="token punctuation">(</span>suite<span class="token punctuation">)</span>
  </code></pre> 
<p>创建执行批量测试用例的程序主入口 run_case.py</p> 
<pre><code class="prism language-python"><span class="token comment">#!/bin/usr/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># --------------------------------------</span>
<span class="token comment"># ProjectName: MySpace</span>
<span class="token comment"># Author: crisimple</span>
<span class="token comment"># CreateTime: 2019/6/15 19:15</span>
<span class="token comment"># FileName: run_case.py</span>
<span class="token comment"># Description: 执行批量 case 的主入口：大批量运行case</span>
<span class="token comment"># Question:</span>
<span class="token comment"># --------------------------------------</span>

<span class="token keyword">import</span> unittest
<span class="token keyword">import</span> os


<span class="token keyword">class</span> <span class="token class-name">RunCase</span><span class="token punctuation">(</span>unittest<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">test_case01</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># os.getcwd()：返回当前进程的工作目录</span>
        case_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>case_path<span class="token punctuation">)</span>
        suite <span class="token operator">=</span> unittest<span class="token punctuation">.</span>defaultTestLoader<span class="token punctuation">.</span>discover<span class="token punctuation">(</span>case_path<span class="token punctuation">,</span> <span class="token string">'unittest_*.py'</span><span class="token punctuation">)</span>
        unittest<span class="token punctuation">.</span>TextTestRunner<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>run<span class="token punctuation">(</span>suite<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    unittest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c488cefb54adee9b4af9c32b35333dca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringMvc 最新jar包下载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2bb85a6b7942e8aed3251af03004013/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2017年百度校招笔试题 士兵队列 百度2017秋招真题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>