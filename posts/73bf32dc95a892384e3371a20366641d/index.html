<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>编写GUI Swing窗口实现爬取酷我音乐MP3格式 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="编写GUI Swing窗口实现爬取酷我音乐MP3格式" />
<meta property="og:description" content="前言 代码简单易懂，全文注释，另外代码中包含了一点点的GUI窗口编写代码，如有不懂欢迎提问，同时也欢迎各位大佬多多指教，感谢阅读！
1.引入库 代码如下（示例）：
from tkinter import * from tkinter import messagebox from PIL import Image,ImageTk import requests import json 2.代码主体 代码如下（示例）：
def download(): def main(): # 歌手名称 geshou = str(entry1.get()) # 获取下载歌曲的名称 gequ = str(entry2.get()) for i in range(1, 6): # https://www.kuwo.cn geshou,i url = &#34;http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key={}&amp;pn={}&amp;rn=30&amp;httpsStatus=1&amp;reqId=2bf0b8c0-5f0a-11eb-8fd0-030dff96f987&#34;.format( geshou, i) headers = { &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36(KHTML, like Gecko)Chrome/79.0.3945.88 Safari/537.36&#39;, &#39;Referer&#39;: &#39;http://www.kuwo.cn/search/list?key=%E5%91%A8%E6%9D%B0%E4%BC%A6&#39;, &#39;csrf&#39;: &#39;GW5N3I6JE9Q&#39;, &#39;Cookie&#39;: &#39;_ga=GA1.2.1345614870.1610439929; Hm_lvt_cdb524f42f0ce19b169a8071123a4797=1610439929,1610687692; _gid=GA1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/73bf32dc95a892384e3371a20366641d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-10T20:56:16+08:00" />
<meta property="article:modified_time" content="2023-06-10T20:56:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">编写GUI Swing窗口实现爬取酷我音乐MP3格式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr color="#000000" size='1"'> 
<h2><a id="_7"></a>前言</h2> 
<p>代码简单易懂，全文注释，另外代码中包含了一点点的GUI窗口编写代码，如有不懂欢迎提问，同时也欢迎各位大佬多多指教，感谢阅读！</p> 
<h3><a id="1_10"></a>1.引入库</h3> 
<p><font color="#999AAA">代码如下（示例）：</font></p> 
<pre><code class="prism language-c">from  tkinter import  <span class="token operator">*</span>
from  tkinter import  messagebox
from PIL import Image<span class="token punctuation">,</span>ImageTk
import requests  
import json
</code></pre> 
<h3><a id="2_25"></a>2.代码主体</h3> 
<p><font color="#999AAA">代码如下（示例）：</font></p> 
<pre><code class="prism language-c">def <span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>

    def <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>
        # 歌手名称
        geshou <span class="token operator">=</span> <span class="token function">str</span><span class="token punctuation">(</span>entry1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        # 获取下载歌曲的名称
        gequ <span class="token operator">=</span> <span class="token function">str</span><span class="token punctuation">(</span>entry2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i in <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">https</span><span class="token expression"><span class="token operator">:</span></span><span class="token comment">//www.kuwo.cn                                            geshou,i</span></span>
            url <span class="token operator">=</span> <span class="token string">"http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key={}&amp;pn={}&amp;rn=30&amp;httpsStatus=1&amp;reqId=2bf0b8c0-5f0a-11eb-8fd0-030dff96f987"</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
                geshou<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
         
            headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token char">'User-Agent'</span><span class="token operator">:</span> 'Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>Windows NT <span class="token number">10.0</span><span class="token punctuation">;</span> Win64<span class="token punctuation">;</span> x64<span class="token punctuation">)</span> AppleWebKit<span class="token operator">/</span><span class="token number">537.36</span><span class="token punctuation">(</span>KHTML<span class="token punctuation">,</span> like Gecko<span class="token punctuation">)</span>Chrome<span class="token operator">/</span><span class="token number">79.0</span><span class="token number">.3945</span><span class="token number">.88</span> Safari<span class="token operator">/</span><span class="token number">537.36</span>'<span class="token punctuation">,</span>
                <span class="token char">'Referer'</span><span class="token operator">:</span> 'http<span class="token operator">:</span><span class="token comment">//www.kuwo.cn/search/list?key=%E5%91%A8%E6%9D%B0%E4%BC%A6',</span>
                <span class="token char">'csrf'</span><span class="token operator">:</span> <span class="token char">'GW5N3I6JE9Q'</span><span class="token punctuation">,</span>
                <span class="token char">'Cookie'</span><span class="token operator">:</span> '_ga<span class="token operator">=</span>GA1<span class="token punctuation">.</span><span class="token number">2.1345614870</span><span class="token number">.1610439929</span><span class="token punctuation">;</span> Hm_lvt_cdb524f42f0ce19b169a8071123a4797<span class="token operator">=</span><span class="token number">1610439929</span><span class="token punctuation">,</span><span class="token number">1610687692</span><span class="token punctuation">;</span> _gid<span class="token operator">=</span>GA1<span class="token punctuation">.</span><span class="token number">2.1361641767</span><span class="token number">.1610687692</span><span class="token punctuation">;</span> Hm_lpvt_cdb524f42f0ce19b169a8071123a4797<span class="token operator">=</span><span class="token number">1610695451</span><span class="token punctuation">;</span> kw_token<span class="token operator">=</span>GW5N3I6JE9Q'
            <span class="token punctuation">}</span>
            res <span class="token operator">=</span> requests<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
            <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">print</span><span class="token expression"><span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span></span></span>
            jsons <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">loads</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
            data <span class="token operator">=</span> jsons<span class="token punctuation">[</span><span class="token char">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token char">'list'</span><span class="token punctuation">]</span>
            <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">print</span><span class="token expression"><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span></span>

            <span class="token keyword">for</span> i in data<span class="token operator">:</span>
                # 音乐rid
                rid <span class="token operator">=</span> i<span class="token punctuation">[</span><span class="token char">'rid'</span><span class="token punctuation">]</span>
                # 音乐name
                name <span class="token operator">=</span> i<span class="token punctuation">[</span><span class="token char">'name'</span><span class="token punctuation">]</span>

                <span class="token keyword">if</span> gequ <span class="token operator">==</span> name<span class="token operator">:</span>
                    # 拿到制定歌手歌曲的音乐路径
                    url <span class="token operator">=</span> <span class="token string">"http://www.kuwo.cn/url?format=mp3&amp;rid={}&amp;response=url&amp;type=convert_url3&amp;br=128kmp3&amp;from=web&amp;t=1611579587926&amp;httpsStatus=1&amp;reqId=34295671-5f0d-11eb-b9d7-87102b654023"</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
                        rid<span class="token punctuation">)</span>
                    result <span class="token operator">=</span> requests<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                    music_url <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token char">'url'</span><span class="token punctuation">]</span>
                    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">print</span><span class="token expression"><span class="token punctuation">(</span>music_url<span class="token punctuation">)</span></span></span>
                    with <span class="token function">open</span><span class="token punctuation">(</span><span class="token char">'VIP音乐/{}.mp3'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token char">'wb'</span><span class="token punctuation">)</span>as f<span class="token operator">:</span>
                        #需要在py文件夹目录下，新建一个叫做VIP音乐的文件夹，用于存放下载好的音乐。
                        
                        <span class="token function">print</span><span class="token punctuation">(</span><span class="token char">'正在下载{}'</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token char">''</span><span class="token punctuation">)</span>
                        music <span class="token operator">=</span> requests<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>music_url<span class="token punctuation">)</span>
                        f<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>music<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                        <span class="token function">print</span><span class="token punctuation">(</span><span class="token char">'\t下载完毕'</span><span class="token punctuation">)</span>
                    #下面的这行代码表示的是添加窗口中的提示弹窗，需要添加 from  tkinter import  messagebox 这个库。
                    messagebox<span class="token punctuation">.</span><span class="token function">showinfo</span><span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token char">'提示：'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token char">'该歌曲已经下载完成！'</span><span class="token punctuation">)</span>


    <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> #执行定义的<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数，进行下载歌曲。

#利用 tkinter 库创建GUI界面

#创建主窗口
root<span class="token operator">=</span><span class="token function">Tk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
#定义root窗口的名称，设置界面相对于屏幕的位置
root<span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token char">'酷我VIP音乐下载器'</span><span class="token punctuation">)</span>

root<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token char">'600x300+420+200'</span><span class="token punctuation">)</span>
#编辑第一个窗口中的标签，并设置该标签的位置，字体
label<span class="token operator">=</span><span class="token function">Label</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token char">' 歌手名'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'华文行楷'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token char">'red'</span><span class="token punctuation">)</span>

label<span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
#编辑输入框内的字体，大小，及位置
entry1<span class="token operator">=</span><span class="token function">Entry</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'微软雅黑'</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

entry1<span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>


label<span class="token operator">=</span><span class="token function">Label</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token char">'歌曲名称'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'华文行楷'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token char">'red'</span><span class="token punctuation">)</span>

label<span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

entry2<span class="token operator">=</span><span class="token function">Entry</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'微软雅黑'</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

entry2<span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
#开始编写按钮控件，设置控件所在位置

button<span class="token operator">=</span><span class="token function">Button</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token char">'开始下载'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'微软雅黑'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>command<span class="token operator">=</span>download<span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">button</span><span class="token expression"><span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></span></span>
button<span class="token punctuation">.</span><span class="token function">place</span><span class="token punctuation">(</span>relx<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span>rely<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>

label<span class="token operator">=</span><span class="token function">Label</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token char">'designed by Ma'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token char">'baiarial'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token char">'black'</span><span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">label</span><span class="token expression"><span class="token punctuation">.</span><span class="token function">grid</span><span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>column<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></span></span>
label<span class="token punctuation">.</span><span class="token function">place</span><span class="token punctuation">(</span>relx<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span> rely<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">)</span>

#接下来的是在窗口中添加自己喜欢的图片，并且编辑位置
#需要导入 from PIL import Image<span class="token punctuation">,</span>ImageTk 这个库，现在没有PIL库了，需要下载Pillow这个库。

img_gif <span class="token operator">=</span> ImageTk<span class="token punctuation">.</span><span class="token function">PhotoImage</span><span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token char">'tupian.jpg'</span><span class="token punctuation">)</span>
label_img <span class="token operator">=</span> <span class="token function">Label</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> image <span class="token operator">=</span> img_gif<span class="token punctuation">)</span>

label_img<span class="token punctuation">.</span><span class="token function">place</span><span class="token punctuation">(</span>relx<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> rely<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>

root<span class="token punctuation">.</span><span class="token function">mainloop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> #<span class="token function">mainloop</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> 你可以把它看做是 <span class="token keyword">while</span> True<span class="token operator">:</span> 即开使循环的执行程序，不会被动终止
</code></pre> 
<p><font color="#999AAA">该代码包含了一个大函数，该大函数中包含了一个小函数（主要负责下载指定歌曲）</font></p> 
<hr color="#000000" size='1"'> 
<h2><a id="_135"></a>总结</h2> 
<p><font color="#999AAA">代码到这里就结束了，感谢阅读，如果哪里可以优化的话，欢迎各位大神帮忙指点一下，感谢帮助！</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d429e4ffe4baf5048acc2a3a3c1c754/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JFormDesigner 7.0.3 最新版压缩包（IDEA版本）下载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/90d6290daada425956cef1176c5fc88a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【图像去噪】基于图像加噪去噪算法合集附matlab代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>