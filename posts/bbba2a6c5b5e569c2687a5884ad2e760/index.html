<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Curl 使用指南 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Curl 使用指南" />
<meta property="og:description" content="简介： Curl 是一个利用URL语法在命令行下工作的文件传输工具。它支持文件上传和下载，是综合传输工具。curl就是客户端（client）的URL工具的意思。
发起 GET 请求： 不带有任何参数时，curl 就是发出 GET 请求。
curl https://www.baidu.com 重定向跟踪 (-L) 当请求一个 URL 返回 301 之类的重定向响应时，可以使用 -L 参数来自动跟踪重定向。curl 默认不跟随重定向。
curl -L https://www.baidu.com 保存响应体到文件 (-o/O) 使用 -o 参数指定文件名，可以将响应结果储存到文件中
curl -o 1.html https://www.baidu.com 还可以使用 -O 参数直接用服务器上的文件名保存在本地
curl -O http://www.test.com/1.txt 获取 HTTP 响应头 (-i) 使用 -i 参数可以查看请求 URL 的响应头与响应体一起返回打印出来。。
curl -i https://www.baidu.com 如果只想获取响应头，可以使用 -I 参数。
curl -I https://www.baidu.com 构造 GET 查询参数 (-G) 在发起 GET 请求时，可能我们需要在 URL 后面跟上查询参数，如 https://www.google.com/search?q=test 。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/bbba2a6c5b5e569c2687a5884ad2e760/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-06T00:43:51+08:00" />
<meta property="article:modified_time" content="2023-09-06T00:43:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Curl 使用指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>简介：</h4> 
<p>Curl 是一个利用URL语法在命令行下工作的文件传输工具。它支持文件上传和下载，是综合传输工具。curl就是客户端（client）的URL工具的意思。</p> 
<h4><a id="_GET__3"></a>发起 GET 请求：</h4> 
<p>不带有任何参数时，curl 就是发出 GET 请求。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> https://www.baidu.com
</code></pre> 
<h4><a id="_L_8"></a>重定向跟踪 (-L)</h4> 
<p>当请求一个 URL 返回 301 之类的重定向响应时，可以使用 -L 参数来自动跟踪重定向。curl 默认不跟随重定向。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://www.baidu.com
</code></pre> 
<h4><a id="_oO_14"></a>保存响应体到文件 (-o/O)</h4> 
<p>使用 -o 参数指定文件名，可以将响应结果储存到文件中</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-o</span> <span class="token number">1</span>.html https://www.baidu.com
</code></pre> 
<p>还可以使用 -O 参数直接用服务器上的文件名保存在本地</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-O</span> http://www.test.com/1.txt
</code></pre> 
<h4><a id="_HTTP__i_26"></a>获取 HTTP 响应头 (-i)</h4> 
<p>使用 -i 参数可以查看请求 URL 的响应头与响应体一起返回打印出来。。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-i</span> https://www.baidu.com
</code></pre> 
<p>如果只想获取响应头，可以使用 -I 参数。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-I</span> https://www.baidu.com
</code></pre> 
<h4><a id="_GET__G_39"></a>构造 GET 查询参数 (-G)</h4> 
<p>在发起 GET 请求时，可能我们需要在 URL 后面跟上查询参数，如 https://www.google.com/search?q=test 。</p> 
<p>可以通过 -G 参数来构造 URL 的查询字符串</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token parameter variable">-d</span> <span class="token string">'q=test'</span> https://www.google.com/search
</code></pre> 
<p>上面的示例会将请求参数与请求 URL 拼接然后发出请求，请求地址为https://www.google.com/search?q=test。<br> 注意：如果忘记了-G参数，curl 会发出 POST 请求。</p> 
<p>如果数据需要 URL 编码，可以结合使用<code>--data--urlencode</code>参数。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-G</span> --data-urlencode <span class="token string">'q=test'</span> https://www.google.com/search
</code></pre> 
<h4><a id="_User_Agent_A_56"></a>改变 User Agent (-A)</h4> 
<p>-A参数指定客户端的用户代理标头，即User-Agent。curl 的默认用户代理字符串是curl/[version]，例如：curl/7.64.1。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-A</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36'</span> https://google.com
</code></pre> 
<p>上面命令将User-Agent改成 Chrome 浏览器。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-A</span> <span class="token string">''</span> https://google.com
</code></pre> 
<p>上面命令会移除User-Agent标头。</p> 
<p>也可以通过-H参数直接指定标头，更改User-Agent。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">'User-Agent: php/1.0'</span> https://google.com
</code></pre> 
<p>有时候Google 会拒绝我们的请求，需要加上Google浏览器的 User agent 才能得到正常返回结果。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-G</span> --data-urlencode <span class="token string">'q=test'</span> <span class="token parameter variable">-A</span> <span class="token string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36"</span>  https://www.google.com/search
</code></pre> 
<h4><a id="_Referrer_e_84"></a>添加 Referrer (-e)</h4> 
<p>使用 -e参数用来设置 HTTP 请求头的 Referer，表示请求的来源。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-e</span> <span class="token string">'https://www.test.com/blog/curl'</span> https://www.baidu.com
</code></pre> 
<h4><a id="_Cookie__b_90"></a>携带 Cookie 请求数据 (-b)</h4> 
<p>使用 -b参数来向服务器发送 Cookie，可以直接接受 Cookie 字符串或者存储了 Cookie 的文件。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-b</span> <span class="token string">'foo=bar'</span> https://www.test.com
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-b</span> ./cookies.txt https://www.test.com
</code></pre> 
<p>该命令会生成一个 foo=bar 的 Cookie 请求头发送给目标 URL。</p> 
<p>使用-c参数可以将目标 URL 携带的 Cookie 写入到一个文件里。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-c</span> cookies.txt https://www.test.com
</code></pre> 
<p>上面的命令可以将 https://www.test.com 的 Cookie 保存到 cookies.txt 文件中</p> 
<h4><a id="_HTTP__H_111"></a>添加 HTTP 请求头 (-H)</h4> 
<p>curl 可以通过-H key:value 的方式添加 HTTP 请求头，要设置多个请求头，可以通过添加多个-H参数实现。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">'Accept-Language: en-US'</span> https://www.test.com
</code></pre> 
<p>前面介绍的 User agent 以及 Cookie 也是一个请求头，也可以通过-H 的方式设置在请求头中。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">'User-Agent: my-user-agent'</span> https://www.test.com

<span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">'Cookie: foo=bar'</span> https://www.test.com
</code></pre> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">'Accept-Language: en-US'</span> <span class="token parameter variable">-H</span> <span class="token string">'Cookie: foo=bar'</span> https://google.com
</code></pre> 
<p>上面命令添加两个 HTTP 标头。</p> 
<h4><a id="_HTTP__X_130"></a>指定 HTTP 请求的方法 (-X)</h4> 
<p>-X 参数可以用来更改 HTTP 请求方法，默认情况下，curl 发送的是 GET 请求。要使其发送 POST 请求，需要使用 -X POST 命令行参数。-X PUT 将发起 PUT 请求。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST https://www.test.com
</code></pre> 
<h4><a id="_POST__d_135"></a>添加 POST 数据到请求中 (-d)</h4> 
<p>要将 POST 数据添加到请求中，需要使用-d参数。</p> 
<p>使用-d参数后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">'login=admin&amp;password=123456'</span> https://www.test.com
</code></pre> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">'@data.txt'</span> https://google.com/login
</code></pre> 
<p>上面命令读取data.txt文件的内容，作为数据体向服务器发送。</p> 
<h4><a id="_JSON__149"></a>发送 JSON 数据</h4> 
<p>发送 JSON 格式的数据。在这种情况下，需要使用 -H 参数来设置Content-Type请求头。</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">'{"option": "value", "something": "anothervalue"}'</span> <span class="token parameter variable">-H</span> <span class="token string">"Content-Type: application/json"</span> <span class="token parameter variable">-X</span> POST https://www.test.com
</code></pre> 
<p>还可以使用@直接读取本地 JSON 文件的内容，来发起请求</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> <span class="token parameter variable">-d</span> <span class="token string">"@my-file.json"</span> <span class="token parameter variable">-X</span> POST https://www.test.com
</code></pre> 
<p>-X可省略。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/56cdcaf09c642e009841bacaf2168843/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">(最新)ubuntu搭建PX4无人机仿真环境(1) —— 概念介绍及环境建议</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0f39be024a8c85d27bf760f89337f009/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Content type ‘text/plain；charset=UTF-8‘ not supported</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>