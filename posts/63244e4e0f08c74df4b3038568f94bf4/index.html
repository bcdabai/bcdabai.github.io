<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>创建一个PHP登录表单 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="创建一个PHP登录表单" />
<meta property="og:description" content="当我们要存储有关我们网站用户的信息时，用户登录和注册系统非常有用。 这适用于从可能存储课程进度和标记的教育网站到将存储有关客户过去购买信息的电子商务网站的所有内容。 创建登录和注册表格
我们的第一步将是创建登录表单和注册表单。 表格实际上将非常简单。 注册表仅要求提供用户名，电子邮件和密码。 用户名和电子邮件对于每个注册的人都是唯一的。 如果有人尝试使用相同的电子邮件地址创建两个帐户，我们将向他们显示一条错误消息，让他们知道该电子邮件已在使用中。 编写注册表 这是用于创建注册表HTML。 您必须将其放入名为register.php的文件中。 &lt;form method=&#34;post&#34; action=&#34;&#34; name=&#34;signup-form&#34;&gt; &lt;div class=&#34;form-element&#34;&gt; &lt;label&gt;Username&lt;/label&gt; &lt;input type=&#34;text&#34; name=&#34;username&#34; pattern=&#34;[a-zA-Z0-9]&#43;&#34; required /&gt; &lt;/div&gt; &lt;div class=&#34;form-element&#34;&gt; &lt;label&gt;Email&lt;/label&gt; &lt;input type=&#34;email&#34; name=&#34;email&#34; required /&gt; &lt;/div&gt; &lt;div class=&#34;form-element&#34;&gt; &lt;label&gt;Password&lt;/label&gt; &lt;input type=&#34;password&#34; name=&#34;password&#34; required /&gt; &lt;/div&gt; &lt;button type=&#34;submit&#34; name=&#34;register&#34; value=&#34;register&#34;&gt;Register&lt;/button&gt; &lt;/form&gt; 表单是非常基本的，但是我们确实使用HTML5来进行一些非常基本的输入验证。 例如，当用户输入的电子邮件地址格式不正确时，使用type=&#34;email&#34;会警告用户。 类似地，在用户名上使用pattern属性将确保用户名仅包含字母数字字符。 编码登录表单 这是登录表单HTML。 您可以将其放在名为login.php的文件中。 &lt;form method=&#34;post&#34; action=&#34;&#34; name=&#34;signin-form&#34;&gt; &lt;div class=&#34;form-element&#34;&gt; &lt;label&gt;Username&lt;/label&gt; &lt;input type=&#34;text&#34; name=&#34;username&#34; pattern=&#34;[a-zA-Z0-9]&#43;&#34; required /&gt; &lt;/div&gt; &lt;div class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/63244e4e0f08c74df4b3038568f94bf4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-21T16:54:10+08:00" />
<meta property="article:modified_time" content="2020-06-21T16:54:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">创建一个PHP登录表单</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="post-body__content" style="font-size: 16px;"> 
 <p> 当我们要存储有关我们网站用户的信息时，用户登录和注册系统非常有用。 这适用于从可能存储课程进度和标记的教育网站到将存储有关客户过去购买信息的电子商务网站的所有内容。 </p> 
 <h3>创建登录和注册表格<br> </h3> 
 <p> 我们的第一步将是创建登录表单和注册表单。 表格实际上将非常简单。 注册表仅要求提供用户名，电子邮件和密码。 用户名和电子邮件对于每个注册的人都是唯一的。 如果有人尝试使用相同的电子邮件地址创建两个帐户，我们将向他们显示一条错误消息，让他们知道该电子邮件已在使用中。 </p> 
 <h4>编写注册表</h4> 
 <p> 这是用于创建注册表HTML。 您必须将其放入名为<strong>register.php</strong>的文件中。 </p> 
 <pre class="has"><code class="notranslate brush: html noskimlinks noskimwords">&lt;form method="post" action="" name="signup-form"&gt;
    &lt;div class="form-element"&gt;
        &lt;label&gt;Username&lt;/label&gt;
        &lt;input type="text" name="username" pattern="[a-zA-Z0-9]+" required /&gt;
    &lt;/div&gt;
    &lt;div class="form-element"&gt;
        &lt;label&gt;Email&lt;/label&gt;
        &lt;input type="email" name="email" required /&gt;
    &lt;/div&gt;
    &lt;div class="form-element"&gt;
        &lt;label&gt;Password&lt;/label&gt;
        &lt;input type="password" name="password" required /&gt;
    &lt;/div&gt;
    &lt;button type="submit" name="register" value="register"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre> 
 <p> 表单是非常基本的，但是我们确实使用HTML5来进行一些非常基本的输入验证。 例如，当用户输入的电子邮件地址格式不正确时，使用<code class="inline">type="email"</code>会警告用户。 类似地，在用户名上使用<code class="inline">pattern</code>属性将确保用户名仅包含字母数字字符。 </p> 
 <h4>编码登录表单</h4> 
 <p> 这是登录表单HTML。 您可以将其放在名为<strong>login.php</strong>的文件中。 <br></p> 
 <pre class="has"><code class="notranslate brush: html noskimlinks noskimwords">&lt;form method="post" action="" name="signin-form"&gt;
    &lt;div class="form-element"&gt;
        &lt;label&gt;Username&lt;/label&gt;
        &lt;input type="text" name="username" pattern="[a-zA-Z0-9]+" required /&gt;
    &lt;/div&gt;
    &lt;div class="form-element"&gt;
        &lt;label&gt;Password&lt;/label&gt;
        &lt;input type="password" name="password" required /&gt;
    &lt;/div&gt;
    &lt;button type="submit" name="login" value="login"&gt;Log In&lt;/button&gt;
&lt;/form&gt;</code></pre> 
 <h4>使用CSS设置表单样式</h4> 
 <p> 您可以将以下CSS应用于这些表单： </p> 
 <pre class="has"><code class="notranslate brush: css noskimlinks noskimwords">* {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

body {
    margin: 50px auto;
    text-align: center;
    width: 800px;
}

h1 {
    font-family: 'Passion One';
    font-size: 2rem;
    text-transform: uppercase;
}

label {
    width: 150px;
    display: inline-block;
    text-align: left;
    font-size: 1.5rem;
    font-family: 'Lato';
}

input {
    border: 2px solid #ccc;
    font-size: 1.5rem;
    font-weight: 100;
    font-family: 'Lato';
    padding: 10px;
}

form {
    margin: 25px auto;
    padding: 20px;
    border: 5px solid #ccc;
    width: 500px;
    background: #eee;
}

div.form-element {
    margin: 20px 0;
}

button {
    padding: 10px;
    font-size: 1.5rem;
    font-family: 'Lato';
    font-weight: 100;
    background: yellowgreen;
    color: white;
    border: none;
}

p.success,
p.error {
    color: white;
    font-family: lato;
    background: yellowgreen;
    display: inline-block;
    padding: 2px 10px;
}

p.error {
    background: orangered;
}</code></pre> 
 <p> 它包含有关错误消息和标题的一些其他样式规则。 当您创建自己的表单（可能需要不同的样式和输入字段）时，可以将本节中HTML和CSS用作项目的基础。 </p> 
 <h3>和连接到数据库<strong></strong> </h3> 
 <p> 下一步是创建一个用户表，该表将存储有关已注册用户的所有信息。 在我们的例子中，该表仅由四列组成：自动递增的ID，唯一的用户名，电子邮件和密码。 </p> 
 <p> 您可以使用以下SQL快速创建表。 </p> 
 <pre class="has"><code class="notranslate brush: sql noskimlinks noskimwords">CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(25) NOT NULL,
  `password` varchar(255) NOT NULL,
  `email` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1;</code></pre> 
 <p> 现在，创建一个名为<strong>config.php</strong>的文件，并在其中编写以下代码以连接到数据库。 </p> 
 <pre class="has"><code class="notranslate brush: php noskimlinks noskimwords">&lt;?php
define('USER', 'root');
define('PASSWORD', '');
define('HOST', 'localhost');
define('DATABASE', 'test');

try {
    $connection = new PDO("mysql:host=".HOST.";dbname=".DATABASE, USER, PASSWORD);
} catch (PDOException $e) {
    exit("Error: " . $e-&gt;getMessage());
}
?&gt;</code></pre> 
 <p> 将数据库名称更改为您的数据库名称。 该文件将用于建立与数据库的连接。 </p> 
 <h3>编码用户注册</h3> 
 <p> 终于到了实现注册功能的时候了。 该代码的主要功能是检查提供的电子邮件是否已经注册。 如果不是，我们在数据库中输入用户名，电子邮件和密码。 </p> 
 <p> 将以下代码放在<strong>registration.php</strong>的顶部。 <br></p> 
 <pre class="has"><code class="notranslate brush: php noskimlinks noskimwords">&lt;?php

include('config.php');
session_start();

if (isset($_POST['register'])) {

    $username = $_POST['username'];
    $email = $_POST['email'];
    $password = $_POST['password'];
    $password_hash = password_hash($password, PASSWORD_BCRYPT);

    $query = $connection-&gt;prepare("SELECT * FROM users WHERE EMAIL=:email");
    $query-&gt;bindParam("email", $email, PDO::PARAM_STR);
    $query-&gt;execute();

    if ($query-&gt;rowCount() &gt; 0) {
        echo '&lt;p class="error"&gt;The email address is already registered!&lt;/p&gt;';
    }

    if ($query-&gt;rowCount() == 0) {
        $query = $connection-&gt;prepare("INSERT INTO users(USERNAME,PASSWORD,EMAIL) VALUES (:username,:password_hash,:email)");
        $query-&gt;bindParam("username", $username, PDO::PARAM_STR);
        $query-&gt;bindParam("password_hash", $password_hash, PDO::PARAM_STR);
        $query-&gt;bindParam("email", $email, PDO::PARAM_STR);
        $result = $query-&gt;execute();

        if ($result) {
            echo '&lt;p class="success"&gt;Your registration was successful!&lt;/p&gt;';
        } else {
            echo '&lt;p class="error"&gt;Something went wrong!&lt;/p&gt;';
        }
    }
}

?&gt;</code></pre> 
 <p> 第一步是包括<strong>config.php</strong>并启动会话。 这有助于我们在页面上存储要保留的所有信息。 </p> 
 <p> 接下来，我们通过检查<strong>$ _POST ['register']</strong>是否已设置来检查用户是否单击了<strong>Register</strong>按钮来提交表单。 始终记住，将密码存储为纯文本不是一个好主意。 因此，我们使用<a href="https://www.php.net/manual/en/function.password-hash.php" rel="external noopener noreferrer" target="_blank">password_hash（）</a>函数，然后将该哈希存储在我们的数据库中。 此特定函数使用随机生成的盐创建60个字符的哈希。 </p> 
 <p> 最后，我们执行查询并检查给定电子邮件地址是否存在非零行号。 如果是这样，则用户将收到一条消息，指出该电子邮件地址已被注册。 </p> 
 <p> 如果给定的电子邮件地址不存在任何行，我们将提供的信息输入数据库，并让用户知道注册成功。 </p> 
 <h3>实施登录功能</h3> 
 <p> 在最后一步中，我们编写了用于登录用户的代码。这一次，我们仅检查数据库中的信息，以查看输入到表单中的用户名和密码组合是否正确。 </p> 
 <p> 这是位于<strong>login.php</strong>顶部的代码。 </p> 
 <pre class="has"><code class="notranslate brush: php noskimlinks noskimwords">&lt;?php

include('config.php');
session_start();

if (isset($_POST['login'])) {

    $username = $_POST['username'];
    $password = $_POST['password'];

    $query = $connection-&gt;prepare("SELECT * FROM users WHERE USERNAME=:username");
    $query-&gt;bindParam("username", $username, PDO::PARAM_STR);
    $query-&gt;execute();

    $result = $query-&gt;fetch(PDO::FETCH_ASSOC);

    if (!$result) {
        echo '&lt;p class="error"&gt;Username password combination is wrong!&lt;/p&gt;';
    } else {
        if (password_verify($password, $result['PASSWORD'])) {
            $_SESSION['user_id'] = $result['ID'];
            echo '&lt;p class="success"&gt;Congratulations, you are logged in!&lt;/p&gt;';
        } else {
            echo '&lt;p class="error"&gt;Username password combination is wrong!&lt;/p&gt;';
        }
    }
}

?&gt;</code></pre> 
 <p> 这里要注意的重要一件事是，我们不会一步一步比较用户名和密码。 由于密码实际上是以散列形式存储的，因此我们首先需要借助提供的用户名来获取散列。 一旦有了哈希，就可以使用<a href="https://www.php.net/manual/en/function.password-verify.php" rel="external noopener noreferrer" target="_blank"><code class="inline">password_verify()</code></a>函数比较密码和哈希。 </p> 
 <p> 成功确认密码后，我们将<code class="inline">$_SESSION['user_id']</code>变量设置为数据库中该用户的ID。 您还可以在此处设置其他变量的值。 </p> 
 <h3>限制页面访问</h3> 
 <p> 要求用户注册的大多数网站都有一些其他页面，用户可以在其中访问和存储私人数据。 您可以使用会话变量来保护这些页面。 如果未设置会话变量，只需将用户重定向到登录页面。 否则，请向他们显示页面的内容。 </p> 
 <pre class="has"><code class="notranslate brush: php noskimlinks noskimwords">&lt;?php
session_start();

if(!isset($_SESSION['user_id'])){
    header('Location: login.php');
    exit;
} else {
    // Show users the page!
}
?&gt;</code></pre> 
 <p> 您唯一要做的就是确保脚本在开始时包含<code class="inline">session_start()</code> 。 </p> 
 <h3>最后的想法</h3> 
 <p> 在本教程中，我们学习了如何使用PHP创建基本的用户注册和登录系统。 一旦掌握了登录和注册系统的基础知识，就可以创建更复杂的逻辑，从而允许用户重置密码，验证电子邮件地址等。 </p> 
 <p> 或者查看我们的免费<a href="https://code.tutsplus.com/courses/php-fundamentals" rel="nofollow noopener noreferrer" target="_self">PHP教程</a> ，将您的PHP编程技能提高到一个新的水平。 如果您对此帖子有任何疑问，请在评论中让我知道。 <br></p> 
 <blockquote> 
  <p>翻译自: <a href="https://code.tutsplus.com/tutorials/create-a-php-login-form--cms-33261" rel="nofollow">https://code.tutsplus.com/tutorials/create-a-php-login-form--cms-33261</a></p> 
 </blockquote> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac60444b89ec216171850762db029a34/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">汇编语言8086CPU之寄存器总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/67562013b5856e276d5554db2a114167/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Golang JSON-序列化map，切片（slice），结构体（struct）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>