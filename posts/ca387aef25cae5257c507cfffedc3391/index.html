<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ffmpeg码率控制 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ffmpeg码率控制" />
<meta property="og:description" content="一.VBR与CBR的含义和区别 VBR是动态码率。CBR是静态码率。
VBR（Variable Bitrate）动态比特率。也就是没有固定的比特率，压缩软件在压缩时根据音频数据即时确定使用什么比特率，这是以质量为前提兼顾文件大小的方式。 VBR也称为动态比特率编码，使用这个方式时，你可以选择从最差音质/最大压缩比到最好音质／最低压缩比之间的种种过渡级数，在MP3文件编码之时，程序 会尝试保持所选定的整个文件的品质，将选择适合音乐文件的不同部分的比特率来编码。主要优点是可以让整首歌都能大致达到我们的品质要求，缺点是编码时无法 估计压缩出来的文件大小。
CBR（Constants Bit Rate）即固定码率，就是静态（恒定）比特率的意思，CBR是一种固定采样率的压缩方式。优点是压缩快，能被大多数软件和设备支持，缺点是占用空间相对大，效果不十分理想，现已逐步被VBR的方式取代。
固定码率是一个用来形容通信服务质量（QoS，Quality of Service）的术语。和该词相对应的词是可变码率或可变比特率（英文variable bit rate，缩写VBR）。
当形容编解码器的时候，CBR编码指的是编码器的输出码率（或者解码器的输 入码率）应该是固定制（常数）。当在一个带宽受限的信道中进行多媒体通讯的时候CBR是非常有用的，因为这时候受限的是最高码率，CBR可以更好的易用这 样的信道。但是CBR不适合进行存储，因为CBR将导致没有足够的码率对复杂的内容部分进行编码(从而导致质量下降)，同时在简单的内容部分会浪费一些码 率。
二.ffmpeg设置方法 ffmpeg中CBR（固定码率控制）的设置： c-&gt;bit_rate = br; c-&gt;rc_min_rate =br; c-&gt;rc_max_rate = br; c-&gt;bit_rate_tolerance = br; c-&gt;rc_buffer_size=br; c-&gt;rc_initial_buffer_occupancy = c-&gt;rc_buffer_size*3/4; c-&gt;rc_buffer_aggressivity= (float)1.0; c-&gt;rc_initial_cplx= 0.5; ffmpeg中VBR（可变率控制）的设置：
c-&gt;flags |= CODEC_FLAG_QSCALE; c-&gt;rc_min_rate =min; c-&gt;rc_max_rate = max; c-&gt;bit_rate = br; 三.试用场景 VBR 适合的应用场景是媒体存储，而不是网络传输。
其实实际网络传输中所谓的 CBR 一般都是 ABR（平均比特率），即只要是单位时间内把码率控制在额定码率就可以了，因为编码输出本来就有缓冲可以起到平滑波动的作用。
严格意义上的 CBR 是 每一帧都分配同样的码字，试想一下，如果某一帧所需要的码字本来就很少，而你却一定要给它分配很多码字，那不是浪费么？另一方面，如果某一帧所需要的码字 本来就多，而你却给得很少，那这帧的效果会很差。这样编下来，整体序列质量会忽好忽坏地不停发生跳变，反而对视觉冲击很大；因此 ABR 才是最适合网络传输的方案。 本文出处：http://blog.csdn.net/austinblog/article/details/28426587 转载于:https://www.cnblogs.com/jameszh/p/4237619.html" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ca387aef25cae5257c507cfffedc3391/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-01-20T22:29:00+08:00" />
<meta property="article:modified_time" content="2015-01-20T22:29:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ffmpeg码率控制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <h4><span style="font-size:18px;">一.VBR与CBR的含义和区别</span></h4> 
 <div> 
  <span style="font-size:18px;"><span style="font-size:14px;font-family:'Microsoft YaHei';">VBR是动态码率。CBR是静态码率。</span><br><span style="font-size:14px;font-family:'Microsoft YaHei';">VBR（Variable Bitrate）动态比特率。也就是没有固定的比特率，压缩软件在压缩时根据音频数据即时确定使用什么比特率，这是以质量为前提兼顾文件大小的方式。 VBR也称为动态比特率编码，使用这个方式时，你可以选择从最差音质/最大压缩比到最好音质／最低压缩比之间的种种过渡级数，在MP3文件编码之时，程序 会尝试保持所选定的整个文件的品质，将选择适合音乐文件的不同部分的比特率来编码。主要优点是可以让整首歌都能大致达到我们的品质要求，缺点是编码时无法 估计压缩出来的文件大小。</span><br><span style="font-size:14px;font-family:'Microsoft YaHei';">CBR（Constants Bit Rate）即固定码率，就是静态（恒定）比特率的意思，CBR是一种固定采样率的压缩方式。优点是压缩快，能被大多数软件和设备支持，缺点是占用空间相对大，效果不十分理想，现已逐步被VBR的方式取代。</span><br><span style="font-size:14px;font-family:'Microsoft YaHei';">固定码率是一个用来形容通信服务质量（QoS，Quality of Service）的术语。和该词相对应的词是可变码率或可变比特率（英文variable bit rate，缩写VBR）。</span><br><span style="font-size:14px;font-family:'Microsoft YaHei';">当形容编解码器的时候，CBR编码指的是编码器的输出码率（或者解码器的输 入码率）应该是固定制（常数）。当在一个带宽受限的信道中进行多媒体通讯的时候CBR是非常有用的，因为这时候受限的是最高码率，CBR可以更好的易用这 样的信道。但是CBR不适合进行存储，因为CBR将导致没有足够的码率对复杂的内容部分进行编码(从而导致质量下降)，同时在简单的内容部分会浪费一些码 率。</span><br></span> 
 </div> 
 <h4><a name="t1"></a><span style="font-size:18px;">二.ffmpeg设置方法</span></h4> 
 <div> 
  <span style="font-size:14px;font-family:'Microsoft YaHei';">ffmpeg中CBR（固定码率控制）的设置：</span> 
 </div> 
 <div> 
  <div class="cnblogs_code"> 
   <pre>c-&gt;bit_rate =<span style="color:#000000;"> br;
c</span>-&gt;rc_min_rate =<span style="color:#000000;">br;
c</span>-&gt;rc_max_rate =<span style="color:#000000;"> br; 
c</span>-&gt;bit_rate_tolerance =<span style="color:#000000;"> br;
c</span>-&gt;rc_buffer_size=<span style="color:#000000;">br;
c</span>-&gt;rc_initial_buffer_occupancy = c-&gt;rc_buffer_size*<span style="color:#800080;">3</span>/<span style="color:#800080;">4</span><span style="color:#000000;">;
c</span>-&gt;rc_buffer_aggressivity= (<span style="color:#0000ff;">float</span>)<span style="color:#800080;">1.0</span><span style="color:#000000;">;
c</span>-&gt;rc_initial_cplx= <span style="color:#800080;">0.5</span>; </pre> 
  </div> 
  <p><span style="font-size:14px;font-family:'Microsoft YaHei';">ffmpeg中VBR（可变率控制）的设置：</span></p> 
  <div class="cnblogs_code"> 
   <pre>c-&gt;flags |=<span style="color:#000000;"> CODEC_FLAG_QSCALE;
c</span>-&gt;rc_min_rate =<span style="color:#000000;">min;
c</span>-&gt;rc_max_rate =<span style="color:#000000;"> max; 
c</span>-&gt;bit_rate = br;</pre> 
  </div> 
  <h4><span style="font-size:18px;">三.试用场景</span></h4> 
  <div> 
   <span style="font-size:14px;font-family:'Microsoft YaHei';">VBR 适合的应用场景是媒体存储，而不是网络传输。<br></span> 
  </div> 
  <div> 
   <span style="font-size:14px;font-family:'Microsoft YaHei';"><span style="color:#333333;line-height:26px;">其实实际网络传输中所谓的 <span style="line-height:26px;">CBR<span style="line-height:26px;"> <span style="color:#333333;line-height:26px;">一般都是 ABR（平均比特率），即只要是单位时间内把码率控制在额定码率就可以了，因为编码输出本来就有缓冲可以起到平滑波动的作用。<br></span></span></span></span></span> 
  </div> 
  <div> 
   <span style="font-size:14px;font-family:'Microsoft YaHei';"><span style="line-height:26px;"><span style="color:#333333;"><span style="color:#333333;line-height:26px;">严格意义上的 <span style="line-height:26px;">CBR<span style="line-height:26px;"> <span style="color:#333333;line-height:26px;">是 每一帧都分配同样的码字，试想一下，如果某一帧所需要的码字本来就很少，而你却一定要给它分配很多码字，那不是浪费么？另一方面，如果某一帧所需要的码字 本来就多，而你却给得很少，那这帧的效果会很差。这样编下来，整体序列质量会忽好忽坏地不停发生跳变，反而对视觉冲击很大；因此 ABR 才是最适合网络传输的方案。</span></span></span></span></span></span></span> 
  </div> 
  <div> 
   <span style="font-size:14px;font-family:'Microsoft YaHei';"><span style="line-height:26px;"><span style="color:#333333;"><span style="color:#333333;line-height:26px;"><span style="line-height:26px;"><span style="line-height:26px;"><span style="color:#333333;line-height:26px;">本文出处：http://blog.csdn.net/austinblog/article/details/28426587</span></span></span></span></span></span></span> 
  </div> 
  <p> </p> 
 </div> 
</div> 
<p>转载于:https://www.cnblogs.com/jameszh/p/4237619.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da6e9b534edb7969c3fcbbdd522c4d1c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">我是如何开会的</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98e0e7cc365aafae579e5af85e6df166/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java中的集合排序（自然排序 &amp; 定制排序）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>