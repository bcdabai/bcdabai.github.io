<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>百度UEditor的介绍和图片上传的使用（java） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="百度UEditor的介绍和图片上传的使用（java）" />
<meta property="og:description" content="UEditor是由百度web前端研发部开发所见即所得富文本web编辑器，并且是基于BSD协议的开源产品，允许自由使用和修改，使用起来十分方便。如果你是用来输出编排好格式的文章或者其他文本，使用UEditor绝对是一个很不错的选择。 UEditor使用起来十分简单，然而java版本在struts2跟原生的两种情况下又有点不一样。首先说一下创建原生java项目（不包含任何框架）的配置吧。 不包含任何框架：
步骤一：
先到UEditor官网（[UEditor](http://ueditor.baidu.com/website/download.html)）下载UEditor1.4.3_jsp版本。 下载完成之后解压，复制到你新创建的 java web项目的 WebContent 的目录下。刚复制到项目中的时候可能会出现错误，你只需要把该项目的编码设置成 utf8 错误就会没有了。
步骤二：
创建一个index.jsp
正确引入js文件之后，再在后面加上
&lt;script type=&#34;text/javascript&#34;&gt; UE.getEditor(&#39;myEditor2&#39;); &lt;/script&gt; 注意：jsp中的
&lt;script id=&#34;myEditor2&#34; name=&#34;content&#34; type=&#34;text/plain&#34;&gt; 这里写你的初始化内容 &lt;/script&gt; id=”myEditor2” 一定要跟
&lt;script type=&#34;text/javascript&#34;&gt; UE.getEditor(&#39;myEditor2&#39;); &lt;/script&gt; 中的myEditor2相同，否则不能显示编辑器。
步骤三： 把 imageUrlPrefix 对应的参数修改成你项目的根目录，默认是空的。
步骤四：
修改ueditor.config.js中的 window.UEDITOR_HOME_URL，
window.UEDITOR_HOME_URL = “/xxxx/xxxx/”;
也就是以斜杠开头的形如”/myProject/ueditor/”这样的路径。
现在，你运行index.jsp文件百度编辑器应该就会出现了。而且图片上传也没问题。
还有一点要注意的，就是当你上传图片的时候在文件夹中是看不到的，但是他已经上传到指定的文件夹的了，不知道是为什么，我现在还搞不明白。
**
使用了struts2的UEditor
**
首先第一步，配置跟上面是完全一样的。
有一点非常重要，就是当你要上传图片的时候你会发现，上传不了，说找不到资源。原因是struts2中的拦截器把所有文件都拦截了，需要把controller.jsp文件过滤掉，不给拦截器拦截，这样才能实现上传功能。
这是默认的：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;web-app xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns=&#34;http://java.sun.com/xml/ns/j2ee&#34; xmlns:web=&#34;http://java.sun.com/xml/ns/javaee&#34; xsi:schemaLocation=&#34;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd http://java.sun.com/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee&#34; id=&#34;WebApp_9&#34; version=&#34;2.4&#34;&gt; &lt;display-name&gt;Struts Blank&lt;/display-name&gt; &lt;filter&gt; &lt;filter-name&gt;struts2&lt;/filter-name&gt; &lt;filter-class&gt;org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a52cebad7cac4f8787d013cff52dd13b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-08-12T20:50:52+08:00" />
<meta property="article:modified_time" content="2015-08-12T20:50:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">百度UEditor的介绍和图片上传的使用（java）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code>UEditor是由百度web前端研发部开发所见即所得富文本web编辑器，并且是基于BSD协议的开源产品，允许自由使用和修改，使用起来十分方便。如果你是用来输出编排好格式的文章或者其他文本，使用UEditor绝对是一个很不错的选择。

UEditor使用起来十分简单，然而java版本在struts2跟原生的两种情况下又有点不一样。首先说一下创建原生java项目（不包含任何框架）的配置吧。
</code></pre> 
<p><strong>不包含任何框架：</strong></p> 
<p>步骤一：</p> 
<pre><code>先到UEditor官网（[UEditor](http://ueditor.baidu.com/website/download.html)）下载UEditor1.4.3_jsp版本。
</code></pre> 
<p><img src="https://images2.imgbox.com/30/19/Hly9T9qY_o.png" alt="这里写图片描述" title=""></p> 
<p>下载完成之后解压，复制到你新创建的 java web项目的 WebContent 的目录下。刚复制到项目中的时候可能会出现错误，你只需要把该项目的编码设置成 utf8 错误就会没有了。</p> 
<p>步骤二：</p> 
<p>创建一个index.jsp</p> 
<p><img src="https://images2.imgbox.com/6e/f3/YEEoH0p4_o.png" alt="这里写图片描述" title=""></p> 
<p>正确引入js文件之后，再在后面加上</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    UE.getEditor(<span class="hljs-string">'myEditor2'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></code></pre> 
<p>注意：jsp中的</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myEditor2"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"content"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/plain"</span>&gt;</span><span class="javascript">
    这里写你的初始化内容
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></code></pre> 
<p>id=”myEditor2” 一定要跟</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    UE.getEditor(<span class="hljs-string">'myEditor2'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></code></pre> 
<p>中的myEditor2相同，否则不能显示编辑器。</p> 
<p>步骤三： <br> <img src="https://images2.imgbox.com/7a/6a/N3OP8Q5n_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/07/00/h5arEoiD_o.png" alt="这里写图片描述" title=""></p> 
<p>把 imageUrlPrefix 对应的参数修改成你项目的根目录，默认是空的。</p> 
<p>步骤四：</p> 
<p><img src="https://images2.imgbox.com/3e/92/WP3BnwPX_o.jpg" alt="这里写图片描述" title=""></p> 
<p>修改ueditor.config.js中的 window.UEDITOR_HOME_URL，</p> 
<p>window.UEDITOR_HOME_URL = “/xxxx/xxxx/”;</p> 
<p>也就是以斜杠开头的形如”/myProject/ueditor/”这样的路径。</p> 
<p>现在，你运行index.jsp文件百度编辑器应该就会出现了。而且图片上传也没问题。</p> 
<p>还有一点要注意的，就是当你上传图片的时候在文件夹中是看不到的，但是他已经上传到指定的文件夹的了，不知道是为什么，我现在还搞不明白。</p> 
<p>**</p> 
<p>使用了struts2的UEditor</p> 
<p>**</p> 
<p>首先第一步，配置跟上面是完全一样的。</p> 
<p>有一点非常重要，就是当你要上传图片的时候你会发现，上传不了，说找不到资源。原因是struts2中的拦截器把所有文件都拦截了，需要把controller.jsp文件过滤掉，不给拦截器拦截，这样才能实现上传功能。</p> 
<p>这是默认的：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">web-app</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/j2ee"</span> <span class="hljs-attribute">xmlns:web</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/javaee"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd http://java.sun.com/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"WebApp_9"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"2.4"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">display-name</span>&gt;</span>Struts Blank<span class="hljs-tag">&lt;/<span class="hljs-title">display-name</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>struts2<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>struts2<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>*.action<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">web-app</span>&gt;</span></code></pre> 
<p>修改后：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">web-app</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/j2ee"</span> <span class="hljs-attribute">xmlns:web</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/javaee"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd http://java.sun.com/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"WebApp_9"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"2.4"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">display-name</span>&gt;</span>Struts Blank<span class="hljs-tag">&lt;/<span class="hljs-title">display-name</span>&gt;</span>

 <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>UeditorFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>com.filter.UeditorFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>UeditorFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>struts2<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>struts2<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>*.action<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">welcome-file-list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">welcome-file</span>&gt;</span>index.jsp<span class="hljs-tag">&lt;/<span class="hljs-title">welcome-file</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">welcome-file-list</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">web-app</span>&gt;</span></code></pre> 
<p>定义一个过滤器：</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.filter;

<span class="hljs-keyword">import</span> javax.servlet.FilterChain;  
<span class="hljs-keyword">import</span> javax.servlet.ServletRequest;  
<span class="hljs-keyword">import</span> javax.servlet.ServletResponse;  
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;  

<span class="hljs-keyword">import</span> org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter;  

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UeditorFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StrutsPrepareAndExecuteFilter</span>{<!-- --></span>  

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span>(ServletRequest req, ServletResponse res, FilterChain chain) {  
        HttpServletRequest request = (HttpServletRequest) req;  
        String url = request.getRequestURI();
        System.out.println(url);
        <span class="hljs-keyword">try</span>{  
            <span class="hljs-keyword">if</span> (url.contains(<span class="hljs-string">"controller.jsp"</span>)) {  
                System.out.println(<span class="hljs-string">"123"</span>);
                chain.doFilter(req, res);  
            } <span class="hljs-keyword">else</span> {  
                System.out.println(<span class="hljs-string">"11111111111111"</span>);
                <span class="hljs-keyword">super</span>.doFilter(req, res, chain);  
            }  
        }<span class="hljs-keyword">catch</span>(Exception e){  
            e.printStackTrace();  
        }  
    }  
 }  </code></pre> 
<p>最后struts2上传文件的功能也完成了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e38a3f151da6536f14f3ea4d559c1e9d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何用消息系统避免分布式事务？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f6681501231001776a338115de41f0e6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">hdu5393 Falsyta in Tina Town</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>