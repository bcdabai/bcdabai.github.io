<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于MATLAB的新冠病毒传播元胞自动机模拟 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于MATLAB的新冠病毒传播元胞自动机模拟" />
<meta property="og:description" content="鉴于2020年2月的新型冠状病毒的爆发，病毒在人群中的传播过程引起了人们的关注，这里用元胞自动机简单地模拟病毒在人群中传播的过程。
数据的初始化 以下代码设置GUI按键以及初始化人群分布，这里我把人群的分布作为二维上的正态分布。
计算二维散点的正态分布可以用matlab中的mvnrnd函数
具体用法为（以双变量为例）：先构造该两个变量的均值向量，再构造协方差矩阵，输入为mvnrnd（均值向量，协方差矩阵，想得到的点的个数），该函数的输出为n行2列的矩阵，每一行中的两个元素分别代表所得的正态分布的点的行下标，列下标（假设在一个以均值点为中心无限大的矩阵中的二维正态分布投点）。
% 设置GUI按键 plotbutton=uicontrol(&#39;style&#39;,&#39;pushbutton&#39;,&#39;string&#39;,&#39;运行&#39;, &#39;fontsize&#39;,12, &#39;position&#39;,[150,400,50,20], &#39;callback&#39;, &#39;run=1;&#39;); erasebutton=uicontrol(&#39;style&#39;,&#39;pushbutton&#39;,&#39;string&#39;,&#39;停止&#39;,&#39;fontsize&#39;,12,&#39;position&#39;,[250,400,50,20],&#39;callback&#39;,&#39;freeze=1;&#39;); quitbutton=uicontrol(&#39;style&#39;,&#39;pushbutton&#39;,&#39;string&#39;,&#39;退出&#39;,&#39;fontsize&#39;,12,&#39;position&#39;,[350,400,50,20],&#39;callback&#39;,&#39;stop=1;close;&#39;); number = uicontrol(&#39;style&#39;,&#39;text&#39;,&#39;string&#39;,&#39;1&#39;,&#39;fontsize&#39;,12, &#39;position&#39;,[20,400,50,20]); total_num=100; n=100; mu=[50,50];% 均值向量 Sigma=[200 0;0 200];% 协方差矩阵 r=mvnrnd(mu,Sigma,total_num); r=fix(r); z = zeros(n,n); k=sub2ind(size(z),r(:,1),r(:,2));%得到人的坐标的序列索引 healthy = z;inf=z;carrier=z;cardate=z;%初始化三种类型的人群的矩阵以及携带日期的矩阵 first=randi([10,90]); healthy(k)=200;healthy(k(first))=0;%一开始没有感染者 carrier(k(first))=200;cardate(k(first))=1;%初始化携带者天数矩阵 % 建立图像句柄 主体循环部分
% 主事件循环 stop= 0; run = 1;freeze = 0; while stop==0 if run==1 %先进行感染判断 [x11,y11]=find(inf~=0); m=[];n=[]; for i=1:length(x11) m=[m;x11(i)-2:x11(i)&#43;2]; n=[n;y11(i)-2:y11(i)&#43;2]; m(m&lt;1)=1;m(m&gt;100)=100; n(n&lt;1)=1;n(n&gt;100)=100; end %m的每一行为距离感染者为2以内的行坐标 %n的每一行为距离感染者为2以内的列坐标 %接下来判断这个以感染者为中心5*5的矩阵中是否有健康人 x22=[];y22=[];fm=0; if ~isempty(m) fm=length(m(:,1)); end for i=1:fm mat=healthy(m(i,:),n(i,:));%某个感染者附近的坐标 [x21,y21]=find(healthy(m(i,:),n(i,:))~=0);%healthy(m(i,:),n(i,:)是5*5的矩阵，其第几行就代表m那一行的第几个元素，n同理对应列下标 x22=[x22,m(i,x21)];y22=[y22,n(i,y21)]; end for i=1:length(x22) pro=rand;a=pro&gt;0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2328c81e47cef6bb4e2f80d769897781/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-21T20:25:16+08:00" />
<meta property="article:modified_time" content="2020-09-21T20:25:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于MATLAB的新冠病毒传播元胞自动机模拟</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>鉴于2020年2月的新型冠状病毒的爆发，病毒在人群中的传播过程引起了人们的关注，这里用元胞自动机简单地模拟病毒在人群中传播的过程。</p> 
<h2><a id="_2"></a>数据的初始化</h2> 
<p>以下代码设置GUI按键以及初始化人群分布，这里我把人群的分布作为二维上的正态分布。</p> 
<p>计算二维散点的正态分布可以用matlab中的<code>mvnrnd函数</code></p> 
<p><strong>具体用法为（以双变量为例）</strong>：先构造该两个变量的均值向量，再构造协方差矩阵，输入为mvnrnd（均值向量，协方差矩阵，想得到的点的个数），该函数的输出为n行2列的矩阵，每一行中的两个元素分别代表所得的正态分布的点的行下标，列下标（假设在一个以均值点为中心无限大的矩阵中的二维正态分布投点）。</p> 
<pre><code class="prism language-powershell"><span class="token operator">%</span> 设置GUI按键
plotbutton=uicontrol<span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">,</span><span class="token string">'运行'</span><span class="token punctuation">,</span> <span class="token string">'fontsize'</span><span class="token punctuation">,</span>12<span class="token punctuation">,</span> <span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>150<span class="token punctuation">,</span>400<span class="token punctuation">,</span>50<span class="token punctuation">,</span>20<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'callback'</span><span class="token punctuation">,</span> <span class="token string">'run=1;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
erasebutton=uicontrol<span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">,</span><span class="token string">'停止'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span>12<span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>250<span class="token punctuation">,</span>400<span class="token punctuation">,</span>50<span class="token punctuation">,</span>20<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'callback'</span><span class="token punctuation">,</span><span class="token string">'freeze=1;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
quitbutton=uicontrol<span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">,</span><span class="token string">'退出'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span>12<span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>350<span class="token punctuation">,</span>400<span class="token punctuation">,</span>50<span class="token punctuation">,</span>20<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'callback'</span><span class="token punctuation">,</span><span class="token string">'stop=1;close;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
number = uicontrol<span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span>12<span class="token punctuation">,</span> <span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>20<span class="token punctuation">,</span>400<span class="token punctuation">,</span>50<span class="token punctuation">,</span>20<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
total_num=100<span class="token punctuation">;</span>
n=100<span class="token punctuation">;</span>
mu=<span class="token punctuation">[</span>50<span class="token punctuation">,</span>50<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token operator">%</span> 均值向量
Sigma=<span class="token punctuation">[</span>200 0<span class="token punctuation">;</span>0 200<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token operator">%</span> 协方差矩阵
r=mvnrnd<span class="token punctuation">(</span>mu<span class="token punctuation">,</span>Sigma<span class="token punctuation">,</span>total_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
r=fix<span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
z = zeros<span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
k=sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">(</span>:<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">,</span>r<span class="token punctuation">(</span>:<span class="token punctuation">,</span>2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>得到人的坐标的序列索引
healthy = z<span class="token punctuation">;</span>inf=z<span class="token punctuation">;</span>carrier=z<span class="token punctuation">;</span>cardate=z<span class="token punctuation">;</span><span class="token operator">%</span>初始化三种类型的人群的矩阵以及携带日期的矩阵
first=randi<span class="token punctuation">(</span><span class="token punctuation">[</span>10<span class="token punctuation">,</span>90<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
healthy<span class="token punctuation">(</span>k<span class="token punctuation">)</span>=200<span class="token punctuation">;</span>healthy<span class="token punctuation">(</span>k<span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span>=0<span class="token punctuation">;</span><span class="token operator">%</span>一开始没有感染者
carrier<span class="token punctuation">(</span>k<span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span>=200<span class="token punctuation">;</span>cardate<span class="token punctuation">(</span>k<span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span>=1<span class="token punctuation">;</span><span class="token operator">%</span>初始化携带者天数矩阵
<span class="token operator">%</span> 建立图像句柄
</code></pre> 
<p>主体循环部分</p> 
<pre><code class="prism language-powershell"><span class="token operator">%</span> 主事件循环
stop= 0<span class="token punctuation">;</span> run = 1<span class="token punctuation">;</span>freeze = 0<span class="token punctuation">;</span> 
<span class="token keyword">while</span> stop==0
    <span class="token keyword">if</span> run==1
        <span class="token operator">%</span>先进行感染判断
      <span class="token namespace">[x11,y11]</span>=find<span class="token punctuation">(</span>inf~=0<span class="token punctuation">)</span><span class="token punctuation">;</span>
      m=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>n=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> i=1:length<span class="token punctuation">(</span>x11<span class="token punctuation">)</span>
          m=<span class="token namespace">[m;x11(i)-2:x11(i)+2]</span><span class="token punctuation">;</span>
          n=<span class="token namespace">[n;y11(i)-2:y11(i)+2]</span><span class="token punctuation">;</span>
          m<span class="token punctuation">(</span>m&lt;1<span class="token punctuation">)</span>=1<span class="token punctuation">;</span>m<span class="token punctuation">(</span>m&gt;100<span class="token punctuation">)</span>=100<span class="token punctuation">;</span>
          n<span class="token punctuation">(</span>n&lt;1<span class="token punctuation">)</span>=1<span class="token punctuation">;</span>n<span class="token punctuation">(</span>n&gt;100<span class="token punctuation">)</span>=100<span class="token punctuation">;</span>
      <span class="token keyword">end</span>
      <span class="token operator">%</span>m的每一行为距离感染者为2以内的行坐标
      <span class="token operator">%</span>n的每一行为距离感染者为2以内的列坐标
      <span class="token operator">%</span>接下来判断这个以感染者为中心5<span class="token operator">*</span>5的矩阵中是否有健康人
      x22=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>y22=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fm=0<span class="token punctuation">;</span>
      <span class="token keyword">if</span> ~isempty<span class="token punctuation">(</span>m<span class="token punctuation">)</span>
      fm=length<span class="token punctuation">(</span>m<span class="token punctuation">(</span>:<span class="token punctuation">,</span>1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
      <span class="token keyword">for</span> i=1:fm
        mat=healthy<span class="token punctuation">(</span>m<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>某个感染者附近的坐标
        <span class="token namespace">[x21,y21]</span>=find<span class="token punctuation">(</span>healthy<span class="token punctuation">(</span>m<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span><span class="token punctuation">)</span>~=0<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>healthy<span class="token punctuation">(</span>m<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span><span class="token punctuation">,</span>n<span class="token punctuation">(</span>i<span class="token punctuation">,</span>:<span class="token punctuation">)</span>是5<span class="token operator">*</span>5的矩阵，其第几行就代表m那一行的第几个元素，n同理对应列下标
        x22=<span class="token namespace">[x22,m(i,x21)]</span><span class="token punctuation">;</span>y22=<span class="token namespace">[y22,n(i,y21)]</span><span class="token punctuation">;</span>
      <span class="token keyword">end</span>

      <span class="token keyword">for</span> i=1:length<span class="token punctuation">(</span>x22<span class="token punctuation">)</span>
      pro=rand<span class="token punctuation">;</span>a=pro&gt;0<span class="token punctuation">.</span>6<span class="token punctuation">;</span>b=pro&lt;0<span class="token punctuation">.</span>6<span class="token punctuation">;</span>
      healthy<span class="token punctuation">(</span>x22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>=200<span class="token operator">*</span>a<span class="token punctuation">;</span>
      carrier<span class="token punctuation">(</span>x22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>=200<span class="token operator">*</span>b<span class="token punctuation">;</span>
      cardate<span class="token punctuation">(</span>x22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y22<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>=b<span class="token punctuation">;</span>
      <span class="token keyword">end</span>
      <span class="token operator">%</span>得到感染者附近的健康人坐标，并以一定的概率使其成为携带者
      <span class="token operator">%</span>接下来进行携带者变为感染者<span class="token punctuation">,</span>以及携带天数增加
      date=find<span class="token punctuation">(</span>cardate==4<span class="token punctuation">)</span><span class="token punctuation">;</span>
      carrier<span class="token punctuation">(</span>date<span class="token punctuation">)</span>=0<span class="token punctuation">;</span>cardate<span class="token punctuation">(</span>date<span class="token punctuation">)</span>=0<span class="token punctuation">;</span>inf<span class="token punctuation">(</span>date<span class="token punctuation">)</span>=200<span class="token punctuation">;</span>
      cardate<span class="token punctuation">(</span>cardate~=0<span class="token punctuation">)</span>=cardate<span class="token punctuation">(</span>cardate~=0<span class="token punctuation">)</span><span class="token operator">+</span>1<span class="token punctuation">;</span>
      
      <span class="token operator">%</span> 现在来进行人群的移动
     
      <span class="token namespace">[x1_,y1_]</span>=find<span class="token punctuation">(</span>inf~=0<span class="token punctuation">)</span><span class="token punctuation">;</span>infnum=length<span class="token punctuation">(</span>x1_<span class="token punctuation">)</span><span class="token punctuation">;</span>
      inf=z<span class="token punctuation">;</span>
      <span class="token keyword">for</span> i=1: infnum
      x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x1_(i)-7,x1_(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y1_(i)-7,y1_(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97<span class="token punctuation">|</span><span class="token punctuation">|</span>y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97   <span class="token operator">%</span>若碰壁则重新取点
          x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x1_(i)-7,x1_(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y1_(i)-7,y1_(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0<span class="token operator">%</span>因为重新取点可能导致不停的往一个方向加或减从而永远也无法跳出<span class="token keyword">while</span>所以对于过分的点直接让其等于一个正常值
              x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0
              y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              x1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              y1_<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>         
          <span class="token keyword">end</span>
      <span class="token keyword">end</span>
      <span class="token keyword">end</span><span class="token operator">%</span>感染者的移动
      idx1=sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x1_<span class="token punctuation">,</span>y1_<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>得出感染者移动后的坐标索引
      inf<span class="token punctuation">(</span>idx1<span class="token punctuation">)</span>=200<span class="token punctuation">;</span><span class="token operator">%</span>将感染者的位置标注在矩阵上

      <span class="token namespace">[x2,y2]</span>=find<span class="token punctuation">(</span>healthy~=0<span class="token punctuation">)</span><span class="token punctuation">;</span>healnum=length<span class="token punctuation">(</span>x2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>得到健康人的矩阵行列索引，以及健康人的数量
      healthy = z<span class="token punctuation">;</span>
      <span class="token keyword">for</span> i=1: healnum   
      x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x2(i)-7,x2(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y2(i)-7,y2(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>健康人随机运动
      <span class="token keyword">while</span> x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97<span class="token punctuation">|</span><span class="token punctuation">|</span>y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97<span class="token punctuation">|</span><span class="token punctuation">|</span>~isempty<span class="token punctuation">(</span>find<span class="token punctuation">(</span>idx1==sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">%</span>检测健康人是否与感染者的位置重叠若重叠则换位置
          x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x2(i)-7,x2(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y2(i)-7,y2(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0
              x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0
              y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              x2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              y2<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>         
          <span class="token keyword">end</span>
      <span class="token keyword">end</span>
      <span class="token keyword">end</span>
      idx2=sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>得到健康人移动后的下标
      healthy<span class="token punctuation">(</span>idx2<span class="token punctuation">)</span>=200<span class="token punctuation">;</span>
      
      <span class="token namespace">[x3,y3]</span>=find<span class="token punctuation">(</span>carrier~=0<span class="token punctuation">)</span><span class="token punctuation">;</span>carnum=length<span class="token punctuation">(</span>x3<span class="token punctuation">)</span><span class="token punctuation">;</span>
      dateidx=sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x3<span class="token punctuation">,</span>y3<span class="token punctuation">)</span><span class="token punctuation">;</span>
      cardate_=cardate<span class="token punctuation">;</span>
      cardate=z<span class="token punctuation">;</span>
      carrier=z<span class="token punctuation">;</span>
      <span class="token keyword">for</span> i=1: carnum   
      x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x3(i)-7,x3(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y3(i)-7,y3(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>携带者随机运动
      <span class="token keyword">while</span> x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97<span class="token punctuation">|</span><span class="token punctuation">|</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;3<span class="token punctuation">|</span><span class="token punctuation">|</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;97<span class="token punctuation">|</span><span class="token punctuation">|</span>~isempty<span class="token punctuation">(</span>find<span class="token punctuation">(</span>idx1==sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">|</span><span class="token punctuation">|</span>~isempty<span class="token punctuation">(</span>find<span class="token punctuation">(</span>idx2==sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">%</span>检测携带者是否与感染者和健康人的位置重叠若重叠则重新取点
          x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[x3(i)-7,x3(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=randi<span class="token punctuation">(</span><span class="token namespace">[y3(i)-7,y3(i)+7]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0
              x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&lt;0
              y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=3<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              x3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>
          <span class="token keyword">elseif</span> y1<span class="token punctuation">(</span>i<span class="token punctuation">)</span>&gt;100
              y3<span class="token punctuation">(</span>i<span class="token punctuation">)</span>=97<span class="token punctuation">;</span>         
          <span class="token keyword">end</span>
      <span class="token keyword">end</span>
      <span class="token keyword">end</span>
      idx3=sub2ind<span class="token punctuation">(</span>size<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span>x3<span class="token punctuation">,</span>y3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>得到携带者移动后的下标索引
      cardate<span class="token punctuation">(</span>idx3<span class="token punctuation">)</span>=cardate_<span class="token punctuation">(</span>dateidx<span class="token punctuation">)</span><span class="token punctuation">;</span>
      carrier<span class="token punctuation">(</span>idx3<span class="token punctuation">)</span>=200<span class="token punctuation">;</span>

        image<span class="token punctuation">(</span><span class="token function">cat</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span>inf<span class="token punctuation">,</span>healthy<span class="token punctuation">,</span>carrier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stepnumber = 1 <span class="token operator">+</span> str2double<span class="token punctuation">(</span>get<span class="token punctuation">(</span>number<span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>更新迭代步数，每迭代一次就加一
        <span class="token function">set</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span><span class="token string">'string'</span><span class="token punctuation">,</span>num2str<span class="token punctuation">(</span>stepnumber<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">%</span>将加一后的迭代代数更新
       pause<span class="token punctuation">(</span>0<span class="token punctuation">.</span>7<span class="token punctuation">)</span>
        
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> freeze==1
        run = 0<span class="token punctuation">;</span>
        freeze = 0<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/f5/9qtTKEh9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/66/4f/l5m7CNb7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d9/64/wYgpaHsF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/af/ac/ktzlQcGF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1f/99/fFyxMLRw_o.png" alt="在这里插入图片描述"></p> 
<p>可以看出如果没有采取任何措施，新冠肺炎的传播在前期是越来越快的，但是当感染者数量接近总人数的时候，增长速率明显减缓。</p> 
<blockquote> 
 <p>本文转自：<br> http://blog.csdn.net/weixin_43267645/article/details/105253949<br> 若有侵权，联系删除！！！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c6ece77cb6a3c6464d1e96c3007ec7bc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">redis从入门到精通（十五）——— docker redis-sentinel哨兵集群及java实战</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23ed7126a31b95013700bfd6027531b9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Excel多区间判断，其实很简单</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>