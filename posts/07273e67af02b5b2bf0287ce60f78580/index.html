<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>50行Python代码实现自动下载小说，并打包exe直接 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="50行Python代码实现自动下载小说，并打包exe直接" />
<meta property="og:description" content="前言 室友喊着没有小说看，让我给他推荐几本，这能难倒我？
分分钟就用python给他把整个网站的小说都给下载下来了，不愧是我啊！
话不多说，我们直接开整！ （文末送读者福利）
要准备的东西
软件
python 3.8 pycharm 使用的模块
requests &gt;&gt;&gt; pip install requests 数据请求 parsel &gt;&gt;&gt; pip install parsel 数据解析 (完善功能) 添加搜索功能 搜索小说名字或者作者名字 tqdm &gt;&gt;&gt; pip install tqdm 下载进度条显示模块 pandas &gt;&gt;&gt; pip install pandas 输入的格式好看一些 win &#43; R 输入cmd 输入安装命令 pip install 模块名 ；
如果出现爆红，可能是因为，网络连接超时，切换国内镜像源；
黄色是警告 ，可以忽略；
输入小说名下载
打包成exe程序, 是需要安装 pyinstaller ，命令提示符窗口输入 pip install pyinstaller
代码展示 # 导入数据请求模块 import requests # 导入数据解析模块 import parsel # 导入正则表达式模块 import re # 导入pandas import pandas as pd # 导入进度条显示模块 from tqdm import tqdm while True: key_word = input(&#39;请输入你想要下载的小说名字(输入0即可退出): &#39;) if key_word == &#39;0&#39;: break search_url = f&#39;https://www." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/07273e67af02b5b2bf0287ce60f78580/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T15:10:42+08:00" />
<meta property="article:modified_time" content="2024-01-06T15:10:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">50行Python代码实现自动下载小说，并打包exe直接</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>室友喊着没有小说看，让我给他推荐几本，这能难倒我？</p> 
<p>分分钟就用python给他把整个网站的小说都给下载下来了，不愧是我啊！</p> 
<p>话不多说，我们直接开整！ <mark><strong>（文末送读者福利）</strong></mark></p> 
<p><img src="https://images2.imgbox.com/40/c8/xzH4DQme_o.png" alt="在这里插入图片描述"></p> 
<p>要准备的东西</p> 
<p>软件</p> 
<pre><code class="prism language-dart">python <span class="token number">3.8</span>
pycharm
</code></pre> 
<p>使用的模块</p> 
<pre><code class="prism language-bash">requests  <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pip <span class="token function">install</span> requests 数据请求
parsel  <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pip <span class="token function">install</span> parsel 数据解析
<span class="token punctuation">(</span>完善功能<span class="token punctuation">)</span> 添加搜索功能 搜索小说名字或者作者名字
tqdm  <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pip <span class="token function">install</span> tqdm  下载进度条显示模块
pandas <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pip <span class="token function">install</span> pandas 输入的格式好看一些
</code></pre> 
<p>win + R 输入cmd 输入安装命令 pip install 模块名 ；<br> 如果出现爆红，可能是因为，网络连接超时，切换国内镜像源；<br> 黄色是警告 ，可以忽略；</p> 
<p>输入小说名下载</p> 
<p><img src="https://images2.imgbox.com/41/46/GKp53h0N_o.png" alt="在这里插入图片描述"></p> 
<p>打包成exe程序, 是需要安装 pyinstaller ，命令提示符窗口输入 pip install pyinstaller</p> 
<h3><a id="_44"></a>代码展示</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 导入数据请求模块</span>
<span class="token function">import</span> requests
<span class="token comment"># 导入数据解析模块</span>
<span class="token function">import</span> parsel
<span class="token comment"># 导入正则表达式模块</span>
<span class="token function">import</span> re
<span class="token comment"># 导入pandas</span>
<span class="token function">import</span> pandas as pd
<span class="token comment"># 导入进度条显示模块</span>
from tqdm <span class="token function">import</span> tqdm

<span class="token keyword">while</span> True:
    key_word <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'请输入你想要下载的小说名字(输入0即可退出): '</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> key_word <span class="token operator">==</span> <span class="token string">'0'</span><span class="token builtin class-name">:</span>
        <span class="token builtin class-name">break</span>
    search_url <span class="token operator">=</span> f<span class="token string">'https://www.***.com/search.php?q={key_word}'</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token builtin class-name">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>url<span class="token operator">=</span>search_url, <span class="token assign-left variable">headers</span><span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token comment"># print(response.text)</span>
    selector_1 <span class="token operator">=</span> parsel.Selector<span class="token punctuation">(</span>response.text<span class="token punctuation">)</span>
    divs <span class="token operator">=</span> selector_1.css<span class="token punctuation">(</span><span class="token string">'.result-list div.result-item'</span><span class="token punctuation">)</span>
    <span class="token comment"># print(divs)</span>
    <span class="token keyword">if</span> divs:
        lis <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">div</span> <span class="token keyword">in</span> divs:
            novel_name <span class="token operator">=</span> div.css<span class="token punctuation">(</span><span class="token string">'.result-game-item-title-link::attr(title)'</span><span class="token punctuation">)</span>.get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 小说名字</span>
            href <span class="token operator">=</span> div.css<span class="token punctuation">(</span><span class="token string">'.result-game-item-title-link::attr(href)'</span><span class="token punctuation">)</span>.get<span class="token punctuation">(</span><span class="token punctuation">)</span>.split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># ID</span>
            author <span class="token operator">=</span> div.css<span class="token punctuation">(</span><span class="token string">'.result-game-item-info p:nth-child(1) span:nth-child(2)::text'</span><span class="token punctuation">)</span>.get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 作者</span>
            <span class="token comment"># print(novel_name, href, author)</span>
            dit <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">'书名'</span><span class="token builtin class-name">:</span> novel_name,
                <span class="token string">'作者'</span><span class="token builtin class-name">:</span> author,
                <span class="token string">'书ID'</span><span class="token builtin class-name">:</span> href,
            <span class="token punctuation">}</span>
            lis.append<span class="token punctuation">(</span>dit<span class="token punctuation">)</span>
        print<span class="token punctuation">(</span>f<span class="token string">'一共搜索到{len(lis)}条数据内容, 结果如下'</span><span class="token punctuation">)</span>
        search_data <span class="token operator">=</span> pd.DataFrame<span class="token punctuation">(</span>lis<span class="token punctuation">)</span>
        print<span class="token punctuation">(</span>search_data<span class="token punctuation">)</span>
        key_num <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'请选择你想要下载小说序号: '</span><span class="token punctuation">)</span>  <span class="token comment"># 输入的数据类型字符串数据</span>
        novel_id <span class="token operator">=</span> lis<span class="token punctuation">[</span>int<span class="token punctuation">(</span>key_num<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'书ID'</span><span class="token punctuation">]</span>
        url <span class="token operator">=</span> f<span class="token string">'https://www.***.com/book/{novel_id}/'</span>
        headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'User-Agent'</span><span class="token builtin class-name">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36'</span>
        <span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>url, headers<span class="token punctuation">)</span>
        <span class="token comment"># print(response.text)  # 正则表达式提取出来数据返回列表 ['天道修改器']</span>
        novel_name <span class="token operator">=</span> re.findall<span class="token punctuation">(</span><span class="token string">'
(.*?)
'</span>, response.text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        novel_info <span class="token operator">=</span> re.findall<span class="token punctuation">(</span><span class="token string">'
(.*?)
'</span>, response.text<span class="token punctuation">)</span>
        <span class="token comment"># print(novel_name)</span>
        <span class="token comment"># print(novel_info)</span>
        <span class="token keyword">for</span> novel_url, novel_title <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span>novel_info<span class="token punctuation">)</span>:
            <span class="token comment"># 'https://www.***e.com/book/60126/14362.html'</span>
            novel_url <span class="token operator">=</span> <span class="token string">'https://www.***.com'</span> + novel_url
            <span class="token comment"># print(novel_url, novel_title)</span>
            <span class="token comment"># 1. 发送请求, 对于刚刚分析得到的url地址发送请求</span>
            <span class="token comment"># url = 'https://www.biqugee.com/book/60126/14362.html'</span>
            response <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>novel_url, headers<span class="token punctuation">)</span>  <span class="token comment">#  返回response响应对象, 200表示请求成功</span>
            <span class="token comment"># 2. 获取数据, 获取服务器返回的response响应数据</span>
            <span class="token comment"># response.text 获取响应体返回文本数据(网页源代码)</span>
            <span class="token comment"># print(response.text)</span>
            <span class="token comment"># 3. 解析数据, 提取我们想要的数据内容 小说章节名字 以及小说内容</span>
            <span class="token comment"># 提取数据方式: xpath css re 这三种方式都是可以提取数据</span>
            selector <span class="token operator">=</span> parsel.Selector<span class="token punctuation">(</span>response.text<span class="token punctuation">)</span>  <span class="token comment"># 把获取到的response.text 转换成 selector 对象</span>
            <span class="token comment"># novel_title = selector.css('.bookname h1::text').get()  # get获取第一个标签数据 返回字符串数据</span>
            <span class="token comment"># novel_title_1 = selector.xpath('//*[@]/h1/text()').get()  # get获取第一个标签数据 返回字符串数据</span>
            novel_content_list <span class="token operator">=</span> selector.css<span class="token punctuation">(</span><span class="token string">'#content::text'</span><span class="token punctuation">)</span>.getall<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># getall 获取所有标签内容, 返回列表数据</span>
            <span class="token comment"># 需要把列表转成字符串数据 join  \n换行符</span>
            novel_content <span class="token operator">=</span> <span class="token string">'\n'</span>.join<span class="token punctuation">(</span>novel_content_list<span class="token punctuation">)</span>
            <span class="token comment"># print(novel_title)</span>
            <span class="token comment"># print(novel_title_1)</span>
            <span class="token comment"># print(novel_content_list)</span>
            <span class="token comment"># print(novel_content)</span>
            <span class="token comment"># 4. 保存数据</span>
            <span class="token comment"># w写入数据但是覆盖 a写入追加写入, 写入文件末尾 b 二进制模式</span>
            <span class="token string">""</span>"
            第一章 xxx
            小说内容
            第二章 xxx
            小说内容
            <span class="token string">""</span>"
            with open<span class="token punctuation">(</span>novel_name + <span class="token string">'.txt'</span>, <span class="token assign-left variable">mode</span><span class="token operator">=</span><span class="token string">'a'</span>, <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> as f:
                f.write<span class="token punctuation">(</span>novel_title<span class="token punctuation">)</span>
                f.write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
                f.write<span class="token punctuation">(</span>novel_content<span class="token punctuation">)</span>
                f.write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
            <span class="token comment"># print('正在保存', novel_title)</span>

    else:
        print<span class="token punctuation">(</span><span class="token string">'请正确输入小说名字或者作者名字 / 没有这本书的数据..'</span><span class="token punctuation">)</span>
</code></pre> 
<p><mark><strong>读者福利：知道你对Python感兴趣，便准备了这套python学习资料</strong></mark></p> 
<p><strong>对于0基础小白入门：</strong></p> 
<blockquote> 
 <p>如果你是零基础小白，想快速入门Python是可以考虑的。</p> 
 <p>一方面是学习时间相对较短，学习内容更全面更集中。<br> 二方面还可以找到适合自己的学习方案</p> 
</blockquote> 
<p><mark>包括：Python web开发，Python爬虫，Python数据分析，人工智能、机器学习等学习教程。带你从零基础系统性的学好Python！</mark></p> 
<h2><a id="Python_154"></a>零基础Python学习资源介绍</h2> 
<h3><a id="Python_156"></a>👉Python学习路线汇总👈</h3> 
<p>Python所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照上面的知识点去找对应的学习资源，保证自己学得较为全面。<mark><strong>（学习教程文末领取哈）</strong></mark><br> <img src="https://images2.imgbox.com/19/49/1hOYMyCe_o.png" alt=""></p> 
<h3><a id="Python_162"></a>👉Python必备开发工具👈</h3> 
<p><img src="https://images2.imgbox.com/5a/ed/VFUi3YkZ_o.png" alt=""></p> 
<p><strong>温馨提示：篇幅有限，已打包文件夹，获取方式在：文末</strong></p> 
<h3><a id="Python600_168"></a>👉Python学习视频600合集👈</h3> 
<p>观看零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。<br> <img src="https://images2.imgbox.com/9d/91/nGBT8sys_o.png" alt=""></p> 
<h3><a id="_175"></a>👉实战案例👈</h3> 
<p>光学理论是没用的，要学会跟着一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。<br> <img src="https://images2.imgbox.com/e2/7e/LR1Et6Bw_o.png" alt=""></p> 
<h3><a id="100Python_181"></a>👉100道Python练习题👈</h3> 
<p>检查学习结果。<img src="https://images2.imgbox.com/cc/47/ELrnjJIl_o.png" alt=""></p> 
<h3><a id="_186"></a>👉面试刷题👈</h3> 
<p><img src="https://images2.imgbox.com/c7/6e/M0qNYKfH_o.png" alt=""><br> <img src="https://images2.imgbox.com/78/14/YXTalNNj_o.png" alt=""><br> <img src="https://images2.imgbox.com/dd/d6/7bPsWJWj_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_191"></a>资料领取</h2> 
<p><mark>这份完整版的Python全套学习资料已为大家备好，朋友们如果需要可以微信扫描下方二维码添加，输入"领取资料" 可免费领取全套资料</mark>【<font color="#CC0033" size="3" face="微软雅黑">有什么需要协作的还可以随时联系我</font>】<mark>朋友圈也会不定时的更新最前言python知识。↓↓↓</mark><font color="red" size="3"><br> <strong>或者</strong></font><br> 【<a href="https://mp.weixin.qq.com/s/DQJlHPMjozDTnzuyoXJ6qA" rel="nofollow">点此链接</a>】领取</p> 
<img src="https://images2.imgbox.com/3d/73/eq98HY2o_o.png"> 
<blockquote> 
 <p>这世界上赚钱成本最低的就是：用知识投资大脑</p> 
 <p>人生什么时候学习都不晚，晚的是你一直想学却一直没有行动，而导致大量内耗</p> 
</blockquote> 
<p><strong>最后祝你学习愉快</strong></p> 
<h2><a id="_212"></a>好文推荐</h2> 
<p><mark>了解python的前景：</mark><a href="https://blog.csdn.net/weixin_49891576/article/details/127187029">https://blog.csdn.net/weixin_49891576/article/details/127187029</a></p> 
<p><mark>python有什么用：</mark><a href="https://blog.csdn.net/weixin_49891576/article/details/127125308">https://blog.csdn.net/weixin_49891576/article/details/127125308</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d76c06839499dc19e7c23f73e19b408/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CTF 逆向涉及的各种加密算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8b78a39b704fa7bcfaf7177afb4295ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MyBatisPlus学习三：Service接口、代码生成器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>