<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>差分电路原理以及为什么输出电压要偏移 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="差分电路原理以及为什么输出电压要偏移" />
<meta property="og:description" content="我们在使用放大器芯片的时候，除了对放大器芯片本身应用外，通常还需要搭建一些外围电路来满足放大器芯片的使用条件，最终满足应用的功能，下面通过一个差分电路来熟悉这些应用。
差分运算放大电路，对共模信号得到有效抑制，而只对差分信号进行放大，因而得到广泛的应用。差分电路的电路构型如下图：
目标处理电压：是采集处理电压，比如在系统中像母线电压的采集处理，还有像交流电压的采集处理等。差分同相/反相分压电阻：为了得到适合运放处理的电压，需要将高压信号进行分压处理，如图1中V1与V2两端的电压经过分压处理，最终得到适合运放处理的电压Vin&#43;与Vin-。
放大电路和比较电路的区别：差分放大电路的反馈，对于运算放大电路来说，运放工作在线性区，所以这里一定是负反馈。没有反馈（开环）或者是正反馈，那是比较器电路而不是放大电路，这时候运放工作在饱和区或称为非线性工作区，正因为饱和，输出才是电源电压的幅值。下面几张图的目的是从运放的定义开始，说明只有处于负反馈的时候，运放才能工作在线性区。
下图是一种带正反馈的运放电路，这里就不能叫运算放大电路了，因为运放的开环放大倍数理想是无限大，当然实际中不可能无限大，所以如下结构是迟滞电压比较器，运放工作在非线性区或饱和区。
假如R74=R75=R76，因为运放工作在非线性区或饱和区，此时不能运用虚短和虚断的原理，根据分压原理则输出为电源范围内的高低电平:|(-15V-Vref)|x1/3&#43;(-15V)或者(&#43;15V-Vref)x2/3&#43;Vref。
下图依然是电压比较器结构，上面已经提到，运放开环增益很大，不带负反馈，工作就如非线性区，当做电压比较器来使用。此时的输出电压就是Vin跟Vref直接比较的结果，或者为-15V，或者为&#43;15V。
运算放大器，反馈电阻从输出接到反相端&#34;-&#34;就是负反馈，当然在输出信号不超过电源电压时（注：一切信号的能量来源是电源，输出当然不可能超过电源幅值），实现的功能就是放大信号的功能，接到同相端&#34;&#43;&#34;就是正反馈，电路功能是电压比较器。当然在实际当中我们并不提倡用运放去做电压比较器，而是选用专用的比较器，如LM339、LM393、LM211等，因为比较器和运放在实际当中内部器件的工作状态还是有区别的。比较器接了限流电阻-&#34;R74、R77&#34;，这是因为比较器在幅值切换时，快速上升或下降沿对后级容性负载进行充放电，这个充放电电流来自这个有源器件—比较器，因此加限流电阻目的是防止电流冲击。
RC滤波：可以酌情调节，目的是防止输出过冲等信号失真问题。
差分输入电压的计算
如下图电路，为了便于计算，我们给定每个阻值。差分电路的另一个特点是对称性，R40=R56及R47=R55，差分分压两个支路电阻也是相等的。
Vin&#43;和Vin-的值是如何计算的？我们先通过繁琐的计算来得到，然后再简化计算。首先，运放的同相端5引脚和反相端6引脚，利用&#34;虚短&#34;得到，其中系数6是指6个100k的电阻，方便简化式子：
那么通过分压关系得到Vin&#43;：
再次通过分压关系得到Vin-：
那么就得到Vin&#43;减Vin-的值，其实还有一种简单方法得到Vin&#43;减Vin-的值，利用运放的虚短特点，可将电路等效为：
所以要计算Vin&#43;减Vin-的值，变得很容易，只是一个简单的分压电路而已，如下计算得到差分电压输入值是0.84V。
差分放大电路的计算
计算公式推导，依旧遵循运放的虚短和虚断特性，当R56=R40，R47=R55时，差分计算可以简化为：实际应用电路中，我们为了简化计算，也是用最简方法计算，经常使用的电路也是上述电路，令电阻相等关系，简化计算。
放大电路的&#34;偏移计算&#34;
为什么要对输出电压进行偏移？这是因为当采集负值时，我们的采样芯片和MCU几乎都不支持负值采样的时候，你就必须进行偏移，使得输出总是为正值。偏移电路，如图8，在原来同相端电阻接地GND的地方，我们接一个电压值，通常也称为偏移电压。那么最终表达式是什么？
通过叠加定理最终得到：
这里公式的成立，保证R64=R72，R73=R57，那么最终得到偏移公式是在原来基础上加个电压偏移量2.5V_Ref：
只要根据实际应用选择合适的偏移量，输出总会为一个正值。
比如，上图电路，输入电压变为-100V，那么最终输出电压就为：这样就将负电压偏移为正电压，处理器符合处理器处理要求了，偏移电路在采集如交流电、以及存在负直流电压的控制电路中广泛使用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dda9b09a63e64a9d2f1b1d838021ed16/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T17:23:30+08:00" />
<meta property="article:modified_time" content="2024-01-06T17:23:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">差分电路原理以及为什么输出电压要偏移</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        我们在使用放大器芯片的时候，除了对放大器芯片本身应用外，通常还需要搭建一些外围电路来满足放大器芯片的使用条件，最终满足应用的功能，下面通过一个差分电路来熟悉这些应用。</p> 
<p>差分运算放大电路，对共模信号得到有效抑制，而只对差分信号进行放大，因而得到广泛的应用。<strong>差分电路的电路构型如下图</strong>：</p> 
<p><img alt="" height="379" src="https://images2.imgbox.com/de/26/2ymxSOk1_o.png" width="1018"></p> 
<p>目标处理电压：是采集处理电压，比如在系统中像母线电压的采集处理，还有像交流电压的采集处理等。差分同相/反相分压电阻：为了得到适合运放处理的电压，需要将高压信号进行分压处理，如图1中V1与V2两端的电压经过分压处理，最终得到适合运放处理的电压Vin+与Vin-。</p> 
<p>放大电路和比较电路的区别：差分放大电路的反馈，对于运算放大电路来说，运放工作在线性区，所以这里一定是负反馈。没有反馈（开环）或者是正反馈，那是比较器电路而不是放大电路，这时候运放工作在饱和区或称为非线性工作区，正因为饱和，输出才是电源电压的幅值。下面几张图的目的是从运放的定义开始，说明只有处于负反馈的时候，运放才能工作在线性区。</p> 
<p><img alt="" height="251" src="https://images2.imgbox.com/06/f2/YYXx8fNf_o.png" width="519"></p> 
<p><img alt="" height="472" src="https://images2.imgbox.com/f3/2b/w1CWRXnX_o.png" width="966"></p> 
<p><img alt="" height="423" src="https://images2.imgbox.com/a2/b2/Km42SjbU_o.png" width="703"></p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/34/07/OGUuHXA7_o.png" width="792"></p> 
<p><img alt="" height="405" src="https://images2.imgbox.com/7b/f3/pdW7EVbj_o.png" width="835"></p> 
<p><img alt="" height="403" src="https://images2.imgbox.com/11/2e/ATZGOf7y_o.png" width="708"></p> 
<p><img alt="" height="360" src="https://images2.imgbox.com/0d/cc/7IitbKAA_o.png" width="721"></p> 
<p>下图是一种带正反馈的运放电路，这里就不能叫运算放大电路了，因为运放的开环放大倍数理想是无限大，当然实际中不可能无限大，所以如下结构是迟滞电压比较器，运放工作在非线性区或饱和区。</p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/93/31/fWCaOay2_o.png" width="939"></p> 
<p>假如R74=R75=R76，因为运放工作在非线性区或饱和区，此时不能运用虚短和虚断的原理，根据分压原理则输出为电源范围内的高低电平:|(-15V-Vref)|x1/3+(-15V)或者(+15V-Vref)x2/3+Vref。</p> 
<p>下图依然是电压比较器结构，上面已经提到，运放开环增益很大，不带负反馈，工作就如非线性区，当做电压比较器来使用。此时的输出电压就是Vin跟Vref直接比较的结果，或者为-15V，或者为+15V。</p> 
<p><img alt="" height="415" src="https://images2.imgbox.com/9d/05/7Bi9CabS_o.png" width="945"></p> 
<p>运算放大器，反馈电阻从输出接到反相端"-"就是负反馈，当然在输出信号不超过电源电压时（注：一切信号的能量来源是电源，输出当然不可能超过电源幅值），实现的功能就是放大信号的功能，接到同相端"+"就是正反馈，电路功能是电压比较器。当然在实际当中我们并不提倡用运放去做电压比较器，而是选用专用的比较器，如LM339、LM393、LM211等，因为比较器和运放在实际当中内部器件的工作状态还是有区别的。比较器接了限流电阻-"R74、R77"，这是因为比较器在幅值切换时，快速上升或下降沿对后级容性负载进行充放电，这个充放电电流来自这个有源器件—比较器，因此加限流电阻目的是防止电流冲击。<br> RC滤波：可以酌情调节，目的是防止输出过冲等信号失真问题。</p> 
<p><strong>差分输入电压的计算</strong></p> 
<p> 如下图电路，为了便于计算，我们给定每个阻值。差分电路的另一个特点是对称性，R40=R56及R47=R55，差分分压两个支路电阻也是相等的。</p> 
<p><img alt="" height="319" src="https://images2.imgbox.com/5f/c4/RJZfgwLD_o.png" width="1036">Vin+和Vin-的值是如何计算的？我们先通过繁琐的计算来得到，然后再简化计算。首先，运放的同相端5引脚和反相端6引脚，利用"虚短"得到，其中系数6是指6个100k的电阻，方便简化式子：</p> 
<p><img alt="" height="112" src="https://images2.imgbox.com/85/15/DmujlQsP_o.png" width="693"></p> 
<p> 那么通过分压关系得到Vin+：</p> 
<p><img alt="" height="112" src="https://images2.imgbox.com/9b/e4/2y5nMwji_o.png" width="636"></p> 
<p>再次通过分压关系得到Vin-：</p> 
<p><img alt="" height="109" src="https://images2.imgbox.com/ac/a4/FqNbG1yE_o.png" width="889"> <img alt="" height="108" src="https://images2.imgbox.com/cf/38/5NBC8MT9_o.png" width="661"></p> 
<p>那么就得到Vin+减Vin-的值，其实还有一种简单方法得到Vin+减Vin-的值，利用运放的虚短特点，可将电路等效为：</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/40/7d/GmttElWZ_o.png" width="1200"><img alt="" height="493" src="https://images2.imgbox.com/c6/c8/KuKzYygz_o.png" width="1200">所以要计算Vin+减Vin-的值，变得很容易，只是一个简单的分压电路而已，如下计算得到差分电压输入值是0.84V。</p> 
<p><img alt="" height="193" src="https://images2.imgbox.com/10/94/vVN753zH_o.png" width="1200"><img alt="" height="217" src="https://images2.imgbox.com/84/b1/xpG3y13Q_o.png" width="1200"><strong>差分放大电路的计算</strong></p> 
<p><img alt="" height="703" src="https://images2.imgbox.com/33/21/2LU4q1uQ_o.png" width="1200">计算公式推导，依旧遵循运放的虚短和虚断特性，当R56=R40，R47=R55时，差分计算可以简化为：<img alt="" height="177" src="https://images2.imgbox.com/d5/9b/O4n6rhhL_o.png" width="1200">实际应用电路中，我们为了简化计算，也是用最简方法计算，经常使用的电路也是上述电路，令电阻相等关系，简化计算。</p> 
<p><strong>放大电路的"偏移计算"</strong></p> 
<p>为什么要对输出电压进行偏移？这是因为当采集负值时，我们的采样芯片和MCU几乎都不支持负值采样的时候，你就必须进行偏移，使得输出总是为正值。偏移电路，如图8，在原来同相端电阻接地GND的地方，我们接一个电压值，通常也称为偏移电压。那么最终表达式是什么？</p> 
<p><img alt="" height="672" src="https://images2.imgbox.com/f8/0d/yF4KPHtL_o.png" width="1200"></p> 
<p>通过叠加定理最终得到：</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/99/98/aGYw3uHm_o.png" width="1200">这里公式的成立，保证R64=R72，R73=R57，那么最终得到偏移公式是在原来基础上加个电压偏移量2.5V_Ref：</p> 
<p><img alt="" height="384" src="https://images2.imgbox.com/07/01/9puyGglJ_o.png" width="1200">只要根据实际应用选择合适的偏移量，输出总会为一个正值。</p> 
<p> <img alt="" height="313" src="https://images2.imgbox.com/97/74/2nvNhUp0_o.png" width="1023">比如，上图电路，输入电压变为-100V，那么最终输出电压就为：<img alt="" height="126" src="https://images2.imgbox.com/cd/b7/dD28Rylk_o.png" width="1200">这样就将负电压偏移为正电压，处理器符合处理器处理要求了，偏移电路在采集如交流电、以及存在负直流电压的控制电路中广泛使用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aaec16dc43b4295d3a559189740f23f0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kafka中，使用ack提交时，存在重复消费问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fac45fd911b4bd6b4f30df5b5fd90e21/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ADB安装及使用详解（非常详细）从零基础入门到精通，看完这一篇就够了_</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>