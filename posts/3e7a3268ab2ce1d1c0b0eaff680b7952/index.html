<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Freemarker使用详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Freemarker使用详解" />
<meta property="og:description" content="1.什么是网页静态化技术 随着用户访问量以及数据量的增大，网页静态化技术方案如今越来越流行。 什么是网页静态化技术呢？简单来说就是将网页以纯静态方式的形式展现。
2.网页静态化技术与缓存技术的比较 共同点：都可以减小数据库的访问压力。
区别：
(1)缓存技术适用于小规模的数据。以及一些经常变动的数据。
(2)网页静态化技术适用于大规模但是变化不太频繁的数据。
页面静态化与缓存技术的定义:
页面静态化是指通过一些模板技术(如freemarker)将数据模型生成静态html页面并通过ajax技术实现页面的局部刷新,从而减少数据库的交互,并利用搜索引擎优化技术(SEO)来提高交互效率.
缓存技术(如ehcache):本质通过将数据存储到服务器的内存中,用户在交互时先交互内存,缓存穿透后交互数据库,利用内存交互速度比数据库交互快的原理来提高交互效率
3.网页静态化技术的应用场景 (1)新闻门户网站的文章类型频道一般都用到了网页静态化技术。点击新闻直接会跳到静态化的页面。
(2)电商网站的商品详情页也十分常用，我们在存储商品的时候会生成静态化页面，点击商品详情，会直接跳到生成的商品详情的静态化页面。
(3)网页静态化技术可以结合Nginx这种高性能web服务器来提高并发访问量。
4.什么是FreeMarker FreeMarker是一款用Java语言编写的模板引擎，用它可以通过模板和要改变的数据来生成输出文本(例如HTML网页，配置文件，源代码等)，作为用来实现网页静态化技术的一种手段。FreeMarker的使用率大大超过其他一些技术。对于系统中频繁使用数据库进行查询但是内容更新很小的应用，都可以用FreeMarker将网页静态化，这样就避免了大量的数据库访问请求，从而提高网站的性能。
5.FreeMarker介绍 Freemarker是一个用Java语言编写的模板引擎，它基于模板来生成文本输出。FreeMarker与Web容器无关，即在Web运行时，它并不知道Servlet或HTTP。它不仅可以用作表现层的实现技术，而且还可以用于生产XML，JSP或Java等。
6、FreeMarker入门案例 6.1、环境搭建 创建maven工程并导入Freemarker的maven坐标
&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt; &lt;version&gt;2.3.23&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 6.2、创建模板文件 模板文件中有四种元素：
1、文本，直接输出的部分
2、注释，即&lt;#-- ... --&gt;格式不会输出
3、插值(Interpolation)：即${...}部分，将使用数据模型中的部分替代输出
4、FTL指令：FreeMarker指令，和HTML标记类似，名字前加#予以区分，不会输出
Freemarker的模板文件后缀可以任意，一般建议为ftl.
在当前项目目录下创建名称为testTemplate.ftl的模板文件，内容如下：
&lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Freemarker入门测试&lt;/h1&gt; ${name} ----- ${message} &lt;/body&gt; &lt;/html&gt; 6.3、生成文件 使用步骤：
第一步：创建一个Configuration对象，直接new一个对象。构造方法的参数就是freemarker的版本号。
第二步：设置模板文件所在的路径。
第三步：设置模板文件使用的字符集。一般就是utf-8.
第四步：加载一个模板，创建一个模板对象。
第五步：创建一个模板使用的数据集，可以是pojo也可以是map。一般是Map。
第六步：创建一个Writer对象，一般创建FileWriter对象，指定生成的文件名。
第七步：调用模板对象的process方法输出文件。
第八步：关闭流。
package com.panghl.test; import freemarker.template.Configuration; import freemarker." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3e7a3268ab2ce1d1c0b0eaff680b7952/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-28T00:09:43+08:00" />
<meta property="article:modified_time" content="2021-04-28T00:09:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Freemarker使用详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.什么是网页静态化技术</h2> 
<p>随着用户访问量以及数据量的增大，网页静态化技术方案如今越来越流行。 什么是网页静态化技术呢？简单来说就是将网页以纯静态方式的形式展现。</p> 
<h2> </h2> 
<h2>2.网页静态化技术与缓存技术的比较</h2> 
<p>共同点：都可以减小数据库的访问压力。</p> 
<p>区别：</p> 
<p>(1)缓存技术适用于小规模的数据。以及一些经常变动的数据。</p> 
<p>(2)网页静态化技术适用于大规模但是变化不太频繁的数据。</p> 
<p> </p> 
<p><strong>页面静态化与缓存技术的定义:</strong></p> 
<p><strong>页面静态化</strong>是指通过一些模板技术(如freemarker)将数据模型生成静态html页面并通过ajax技术实现页面的局部刷新,从而减少数据库的交互,并利用搜索引擎优化技术(SEO)来提高交互效率.</p> 
<p><strong>缓存技术</strong>(如ehcache):本质通过将数据存储到服务器的内存中,用户在交互时先交互内存,缓存穿透后交互数据库,利用内存交互速度比数据库交互快的原理来提高交互效率</p> 
<p> </p> 
<p> </p> 
<h2>3.网页静态化技术的应用场景</h2> 
<p>(1)新闻门户网站的文章类型频道一般都用到了网页静态化技术。点击新闻直接会跳到静态化的页面。</p> 
<p>(2)电商网站的商品详情页也十分常用，我们在存储商品的时候会生成静态化页面，点击商品详情，会直接跳到生成的商品详情的静态化页面。</p> 
<p>(3)网页静态化技术可以结合Nginx这种高性能web服务器来提高并发访问量。</p> 
<p> </p> 
<h2>4.什么是FreeMarker</h2> 
<p>FreeMarker是一款用Java语言编写的模板引擎，用它可以通过模板和要改变的数据来生成输出文本(例如HTML网页，配置文件，源代码等)，作为用来实现网页静态化技术的一种手段。FreeMarker的使用率大大超过其他一些技术。对于系统中频繁使用数据库进行查询但是内容更新很小的应用，都可以用FreeMarker将网页静态化，这样就避免了大量的数据库访问请求，从而提高网站的性能。</p> 
<p> </p> 
<h2>5.FreeMarker介绍</h2> 
<p>Freemarker是一个用Java语言编写的模板引擎，它基于模板来生成文本输出。FreeMarker与Web容器无关，即在Web运行时，它并不知道Servlet或HTTP。它不仅可以用作表现层的实现技术，而且还可以用于生产XML，JSP或Java等。</p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/59/fb/FK5UWxNw_o.png" width="488"></p> 
<p> </p> 
<h2>6、FreeMarker入门案例</h2> 
<h3>6.1、环境搭建</h3> 
<p><strong>创建maven工程并导入Freemarker的maven坐标</strong></p> 
<pre><code class="language-XML">    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.freemarker&lt;/groupId&gt;
            &lt;artifactId&gt;freemarker&lt;/artifactId&gt;
            &lt;version&gt;2.3.23&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre> 
<h3>6.2、创建模板文件</h3> 
<p>模板文件中有四种元素：</p> 
<p>1、文本，直接输出的部分</p> 
<p>2、注释，即&lt;#-- ... --&gt;格式不会输出</p> 
<p>3、插值(Interpolation)：即${...}部分，将使用数据模型中的部分替代输出</p> 
<p>4、FTL指令：FreeMarker指令，和HTML标记类似，名字前加#予以区分，不会输出</p> 
<p>Freemarker的模板文件后缀可以任意，一般建议为ftl.</p> 
<p>在当前项目目录下创建名称为testTemplate.ftl的模板文件，内容如下：</p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Freemarker入门测试&lt;/h1&gt;
${name} -----  ${message}

&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p> </p> 
<p> </p> 
<h3>6.3、生成文件</h3> 
<p>使用步骤：</p> 
<p>第一步：创建一个Configuration对象，直接new一个对象。构造方法的参数就是freemarker的版本号。</p> 
<p>第二步：设置模板文件所在的路径。</p> 
<p>第三步：设置模板文件使用的字符集。一般就是utf-8.</p> 
<p>第四步：加载一个模板，创建一个模板对象。</p> 
<p>第五步：创建一个模板使用的数据集，可以是pojo也可以是map。一般是Map。</p> 
<p>第六步：创建一个Writer对象，一般创建FileWriter对象，指定生成的文件名。</p> 
<p>第七步：调用模板对象的process方法输出文件。</p> 
<p>第八步：关闭流。</p> 
<pre><code class="language-java">package com.panghl.test;

import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;
import java.util.HashMap;
import java.util.Map;

/**
 * @Author panghl
 * @Date 2021/4/27 21:16
 * @Description TODO
 **/
public class FreemarkerTest {

    public static void main(String[] args) throws IOException, TemplateException {
        //1.创建freemarker的配置对象
        Configuration configuration = new Configuration(Configuration.getVersion());
        //2.设置模板文件所在目录
        configuration.setDirectoryForTemplateLoading(new File("D:\\IdeaProjects\\Java-projects\\freemarkerdemo\\"));
        //3.设置字符集
        configuration.setDefaultEncoding("utf-8");
        //4.加载模板
        Template template = configuration.getTemplate("testTemplate.ftl");
        //5.准备模板文件中所需的数据，一般通过map构造
        Map&lt;String,String&gt; map = new HashMap&lt;&gt;();
        map.put("name","panghl");
        map.put("message","你好啊！！！freemarker");
        //6.创建Writer对象,用于输出静态文件
        Writer out = new FileWriter(new File("D:/IdeaProjects/Java-projects/freemarkerdemo/test.ftl"));
        //7.输出文件
        template.process(map,out);
        //8.关闭流
        out.close();

    }
}
</code></pre> 
<p><img alt="" height="502" src="https://images2.imgbox.com/af/98/5y3OkaEs_o.png" width="927"></p> 
<p> </p> 
<h2>7、Freemarker指令</h2> 
<h3>7.1、assign 指令</h3> 
<p><strong>assign指令用于在页面上定义一个变量</strong></p> 
<p><strong>（1）定义简单类型</strong></p> 
<blockquote> 
 <p>&lt;#assign linkman="周先生"&gt;</p> 
 <p>联系人: ${linkman}</p> 
</blockquote> 
<p> </p> 
<p><strong>  (2)定义对象类型</strong></p> 
<blockquote> 
 <pre>&lt;#assign info={"mobile":"1999999999","address":"sc省cd市。。。"}&gt;
手机号:${info.mobile} - 地址: ${info.address}</pre> 
</blockquote> 
<p><img alt="" height="273" src="https://images2.imgbox.com/da/bd/mvl2Xalr_o.png" width="903"></p> 
<h3>7.2、include指令</h3> 
<p><strong>include指令用于模板文件的嵌套</strong></p> 
<p>（1）创建模板文件head.ftl</p> 
<blockquote> 
 <pre>&lt;h1&gt;我是程序猿-head&lt;/h1&gt;</pre> 
</blockquote> 
<p>（2）修改入门案例中的test.ftl ，在test.ftl模板文件中使用include指令引入上面的模板文件</p> 
<blockquote> 
 <pre>&lt;#include "./head.ftl"/&gt;
</pre> 
</blockquote> 
<p><img alt="" height="560" src="https://images2.imgbox.com/94/10/RUxOHOGh_o.png" width="687"></p> 
<h3>7.3、if指令</h3> 
<p><strong>if指令用于判断</strong></p> 
<p><strong>（1）在模板文件中使用if指令进行判断</strong></p> 
<blockquote> 
 <p>&lt;#if success==true&gt;</p> 
 <p>成功</p> 
 <p>&lt;#else&gt;</p> 
 <p>失败</p> 
 <p>&lt;/#if&gt;</p> 
</blockquote> 
<p><strong>（2）在java代码中为success变量赋值</strong></p> 
<blockquote> 
 <pre>map.put("success",true);</pre> 
</blockquote> 
<p>在freemarker的判断中，可以使用= 也可以使用==</p> 
<p><img alt="" height="365" src="https://images2.imgbox.com/90/22/UkQq1mIB_o.png" width="520"></p> 
<h3>7.4、list指令</h3> 
<p><strong>list指令用于遍历</strong></p> 
<p><strong>（1）在模板文件中使用list指令进行遍历</strong></p> 
<pre><code class="language-html">&lt;#list goodsList as goods&gt;
商品名称: ${goods.name} 价格：${goods.price} &lt;br&gt;
&lt;/#list&gt;</code></pre> 
<p><strong>（2）在java代码中为goodsList赋值 </strong></p> 
<pre><code class="language-java">List goodsList = new ArrayList();
        Map goods1 = new HashMap();
        goods1.put("price","1.00");
        goods1.put("name","ppp");
        goodsList.add(goods1);
        Map goods2 = new HashMap();
        goods2.put("price","2.00");
        goods2.put("name","ppp2");
        goodsList.add(goods2);
        map.put("goodsList",goodsList);</code></pre> 
<p> </p> 
<p><span style="color:#f33b45;"><strong>更多freemarker详细指令可看我另一篇播客</strong></span>：<a href="https://blog.csdn.net/qq_45441466/article/details/113084450">https://blog.csdn.net/qq_45441466/article/details/113084450</a></p> 
<p> </p> 
<h2>8、生成移动端静态页面</h2> 
<p>前面我们已经学习了Freemarker的基本使用方法，下面我们就可以将Freemarker应用到项目中，帮我们生成移动端套餐列表静态页面和套餐详情静态页面。接下来我们需要思考几个问题：</p> 
<p>（1）什么时候生成静态页面比较合适呢？</p> 
<p>（2）将静态页面生成到什么位置？</p> 
<p>（3）应该生成几个静态页面呢？</p> 
<p>对于第一个问题，应该是当套餐数据发生改变时，需要生成静态页面，即我们通过后台系统修改套餐数据(包括新增、删除、编辑)时。</p> 
<p>对于第二个问题，如果是在开发阶段可以将文件生成到项目工程中，如果上线后可以将文件生成到移动端系统运行的tomcat中。</p> 
<p>对于第三个问题，套餐列表只需一个页面就可以了，在这个页面中展示所有的套餐列表数据即可。套餐详情页面需要有多个，即一个套餐应该对应一个静态页面。</p> 
<p> </p> 
<h3>8.1、环境搭建</h3> 
<p><strong>在health_common工程pom文件中导入freemarker的maven坐标。</strong></p> 
<pre><code class="language-XML">        &lt;dependency&gt;
            &lt;groupId&gt;org.freemarker&lt;/groupId&gt;
            &lt;artifactId&gt;freemarker&lt;/artifactId&gt;
            &lt;version&gt;2.3.23&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<h3>8.2、创建模板文件</h3> 
<p>在health_service_provider工程的WEB-INF目录中创建ftl目录，在ftl目录中创建模板文件mobile_setmeal.ftl和mobile_setmeal_detail.ftl文件，前者是用于生成套餐列表页面的模板文件，后者是生成套餐详情页面的模板文件。</p> 
<p><strong>（1）mobile_setmeal.ftl</strong></p> 
<pre><code class="language-html">&lt;#--判断一些模板数据是否为空--&gt;
&lt;#--&lt;#if setmealList?? and setmealList.size &gt; 0&gt;&lt;/#if&gt;&gt;--&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,user-scalable=no,minimal-ui"&gt;
  &lt;meta name="description" content=""&gt;
  &lt;meta name="author" content=""&gt;
  &lt;link rel="icon" href="../img/asset-favico.ico"&gt;
  &lt;title&gt;预约&lt;/title&gt;
  &lt;link rel="stylesheet" href="../css/page-health-order.css" /&gt;
&lt;/head&gt;
&lt;body data-spy="scroll" data-target="#myNavbar" data-offset="150"&gt;
&lt;div class="app" id="app"&gt;
  &lt;!-- 页面头部 --&gt;
  &lt;div class="top-header"&gt;
    &lt;span class="f-left"&gt;&lt;i class="icon-back" onclick="history.go(-1)"&gt;&lt;/i&gt;&lt;/span&gt;
    &lt;span class="center"&gt;传智健康&lt;/span&gt;
    &lt;span class="f-right"&gt;&lt;i class="icon-more"&gt;&lt;/i&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;!-- 页面内容 --&gt;
  &lt;div class="contentBox"&gt;
    &lt;div class="list-column1"&gt;
      &lt;ul class="list"&gt;
        &lt;#list setmealList as setmeal&gt;
          &lt;li class="list-item"&gt;
            &lt;a class="link-page" href="setmeal_detail_${setmeal.id}.html"&gt;
              &lt;img class="img-object f-left"
                   src="http://qrp7t16xj.hn-bkt.clouddn.com/${setmeal.img}"
                   alt=""&gt;
              &lt;div class="item-body"&gt;
                &lt;h4 class="ellipsis item-title"&gt;${setmeal.name}&lt;/h4&gt;
                &lt;p class="ellipsis-more item-desc"&gt;${setmeal.remark}&lt;/p&gt;
                &lt;p class="item-keywords"&gt;
                                    &lt;span&gt;
                                        &lt;#if setmeal.sex == '0'&gt;
                                          性别不限
                                        &lt;#else&gt;
                                          &lt;#if setmeal.sex == '1'&gt;
                                            男
                                          &lt;#else&gt;
                                            女
                                          &lt;/#if&gt;
                                        &lt;/#if&gt;
                                    &lt;/span&gt;
                  &lt;span&gt;${setmeal.age}&lt;/span&gt;
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/a&gt;
          &lt;/li&gt;
        &lt;/#list&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;!-- 页面 css js --&gt;
&lt;script src="../plugins/vue/vue.js"&gt;&lt;/script&gt;
&lt;script src="../plugins/vue/axios-0.18.0.js"&gt;&lt;/script&gt;
&lt;/body&gt;</code></pre> 
<p><strong>（2）mobile_setmeal_detail.ftl</strong></p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,user-scalable=no,minimal-ui"&gt;
  &lt;meta name="description" content=""&gt;
  &lt;meta name="author" content=""&gt;
  &lt;link rel="icon" href="../img/asset-favico.ico"&gt;
  &lt;title&gt;预约详情&lt;/title&gt;
  &lt;link rel="stylesheet" href="../css/page-health-orderDetail.css" /&gt;
  &lt;script src="../plugins/vue/vue.js"&gt;&lt;/script&gt;
  &lt;script src="../plugins/vue/axios-0.18.0.js"&gt;&lt;/script&gt;
  &lt;script src="../plugins/healthmobile.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body data-spy="scroll" data-target="#myNavbar" data-offset="150"&gt;
&lt;div id="app" class="app"&gt;
  &lt;!-- 页面头部 --&gt;
  &lt;div class="top-header"&gt;
    &lt;span class="f-left"&gt;&lt;i class="icon-back" onclick="history.go(-1)"&gt;&lt;/i&gt;&lt;/span&gt;
    &lt;span class="center"&gt;传智健康&lt;/span&gt;
    &lt;span class="f-right"&gt;&lt;i class="icon-more"&gt;&lt;/i&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;!-- 页面内容 --&gt;
  &lt;div class="contentBox"&gt;
    &lt;div class="card"&gt;
      &lt;div class="project-img"&gt;
        &lt;img src="http://qrp7t16xj.hn-bkt.clouddn.com/${setmeal.img}"
             width="100%" height="100%" /&gt;
      &lt;/div&gt;
      &lt;div class="project-text"&gt;
        &lt;h4 class="tit"&gt;${setmeal.name}&lt;/h4&gt;
        &lt;p class="subtit"&gt;${setmeal.remark}&lt;/p&gt;
        &lt;p class="keywords"&gt;
                    &lt;span&gt;
						&lt;#if setmeal.sex == '0'&gt;
							性别不限
                        &lt;#else&gt;
                            &lt;#if setmeal.sex == '1'&gt;
								男
                            &lt;#else&gt;
								女
                            &lt;/#if&gt;
        &lt;/#if&gt;
        &lt;/span&gt;
        &lt;span&gt;${setmeal.age}&lt;/span&gt;
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="table-listbox"&gt;
      &lt;div class="box-title"&gt;
        &lt;i class="icon-zhen"&gt;&lt;span class="path1"&gt;&lt;/span&gt;&lt;span class="path2"&gt;&lt;/span&gt;&lt;/i&gt;
        &lt;span&gt;套餐详情&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="box-table"&gt;
        &lt;div class="table-title"&gt;
          &lt;div class="tit-item flex2"&gt;项目名称&lt;/div&gt;
          &lt;div class="tit-item  flex3"&gt;项目内容&lt;/div&gt;
          &lt;div class="tit-item  flex3"&gt;项目解读&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="table-content"&gt;
          &lt;ul class="table-list"&gt;
            &lt;#list setmeal.checkGroups as checkgroup&gt;
            &lt;li class="table-item"&gt;
              &lt;div class="item flex2"&gt;${checkgroup.name}&lt;/div&gt;
              &lt;div class="item flex3"&gt;
                &lt;#list checkgroup.checkItems as checkitem&gt;
                &lt;label&gt;
                  ${checkitem.name}
                &lt;/label&gt;
              &lt;/#list&gt;
        &lt;/div&gt;
        &lt;div class="item flex3"&gt;${checkgroup.remark}&lt;/div&gt;
        &lt;/li&gt;
      &lt;/#list&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class="box-button"&gt;
      &lt;a @click="toOrderInfo()" class="order-btn"&gt;立即预约&lt;/a&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;
  var vue = new Vue({
    el:'#app',
    methods:{
      toOrderInfo(){
        window.location.href = "orderInfo.html?id=${setmeal.id}";
      }
    }
  });
&lt;/script&gt;
&lt;/body&gt;</code></pre> 
<h3>8.3、配置文件</h3> 
<p><strong>（1）在health_service_provider工程中创建属性文件freemarker.properties</strong></p> 
<blockquote> 
 <pre>out_put_path=D:/JavaStudy/RealProject/ssm_heima_health/health_parent/health_mobile/src/main/webapp/pages</pre> 
</blockquote> 
<p>通过上面的配置可以指定将静态HTML页面生成的目录位置</p> 
<p><strong>（2）在health_service_provider工程的Spring配置文件中配置</strong></p> 
<pre><code class="language-XML">    &lt;!--配置 FreeMarkerConfigurer 对象, 用于生成静态页面--&gt;
    &lt;bean id="freeMarkerConfigurer" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"&gt;
        &lt;property name="templateLoaderPath" value="/WEB-INF/ftl/"/&gt;     &lt;!--模板文件所在目录--&gt;
        &lt;property name="defaultEncoding" value="utf-8"/&gt;                &lt;!--指定字符集--&gt;
    &lt;/bean&gt;

    &lt;!--导入文件的输出路径 out_put_path--&gt;
    &lt;context:property-placeholder location="classpath:freemarker.properties"/&gt;
</code></pre> 
<h3>8.4、生成静态页面</h3> 
<p><strong>修改health_service_provider工程中的SetmealServiceImpl类的add方法，加入生成静态页面的逻辑。</strong></p> 
<pre><code class="language-java">package com.itheima.service.impl;

import com.alibaba.dubbo.config.annotation.Service;
import com.github.pagehelper.PageHelper;
import com.github.pagehelper.PageInfo;
import com.itheima.constant.RedisConstant;
import com.itheima.dao.SetmealDao;
import com.itheima.entity.PageResult;
import com.itheima.entity.QueryPageBean;
import com.itheima.pojo.Setmeal;
import com.itheima.service.SetmealService;
import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer;
import redis.clients.jedis.JedisPool;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * @Author panghl
 * @Date 2021/4/17 23:30
 * @Description 套餐服务实现类
 **/
@Service(interfaceClass = SetmealService.class)
@Transactional
public class SetmealServiceImpl implements SetmealService {

    @Autowired
    private SetmealDao setmealDao;

    @Autowired
    private JedisPool jedisPool;

    @Autowired
    private FreeMarkerConfigurer freeMarkerConfigurer;

    @Value("${out_put_path}") //从属性文件读取输出目录的路径
    private String outputpath;


    @Override
    public void add(Setmeal setmeal, Integer[] checkgroupIds) {
        setmealDao.insert(setmeal);
        jedisPool.getResource().sadd(RedisConstant.SETMEAL_PIC_DB_RESOURCES, setmeal.getImg());
        setmealDao.insertCheckGroup(setmeal.getId(), checkgroupIds);

        //当添加套餐后需要重新生成静态页面(套餐列表页面，套餐详情页面)
        generateMobileStaticHtml();
    }

    /**
     * 用于生成当前方法所需的静态页面
     */
    public void generateMobileStaticHtml(){
        //在生成静态页面之前需要查询数据
        List&lt;Setmeal&gt; list = setmealDao.findAll();

        //需要生成套餐列表静态页面
        generateMobileSetmealListHtml(list);
        //需要生成套餐详情静态页面
        generateMobileSetmealDetailHtml(list);
    }

    /**
     * 生成套餐列表静态页面
     */
    public void generateMobileSetmealListHtml(List&lt;Setmeal&gt; list){
        Map map = new HashMap();
        map.put("setmealList",list);
        genarateHtml("mobile_setmeal.ftl","m_setmeal.html",map);
    }

    /**
     * 生成套餐详情静态页面
     */
    public void generateMobileSetmealDetailHtml(List&lt;Setmeal&gt; list){
        for (Setmeal setmeal : list) {
            Setmeal resSetmeal = setmealDao.findById(setmeal.getId());
            Map map = new HashMap();
            map.put("setmeal",resSetmeal);
            genarateHtml("mobile_setmeal_detail.ftl","setmeal_detail_"+setmeal.getId()+".html",map);
        }
    }

    /**
     * 用于生成静态页面---通用模板
     */
    public void genarateHtml(String templateName, String htmlPageName, Map map) {
        try {
            //获取配置对象
            Configuration configuration = freeMarkerConfigurer.getConfiguration();
            Template template = configuration.getTemplate(templateName);
            //构造输出流
            Writer out = new FileWriter(new File(outputpath + "/" + htmlPageName));
            //输出文件
            template.process(map, out);
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Override
    public PageResult pageQuery(QueryPageBean queryPageBean) {
        PageHelper.startPage(queryPageBean.getCurrentPage(), queryPageBean.getPageSize());
        List&lt;Setmeal&gt; list = setmealDao.findByCondition(queryPageBean.getQueryString());
        PageInfo&lt;Setmeal&gt; pageInfo = new PageInfo&lt;&gt;(list);
        return new PageResult(pageInfo.getTotal(), pageInfo.getList());
    }

    @Override
    public List&lt;Setmeal&gt; getSetmeal() {
        return setmealDao.findAll();
    }

    @Override
    public Setmeal findById(Integer id) {
        return setmealDao.findById(id);
    }
}
</code></pre> 
<p> </p> 
<p><strong>想要详细的demo可以加群获取资料：qq群（1164437770）    黑马 尚硅谷等等项目资料都有！！</strong></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23e3780c9aa3ad2a4d703a332d2e50ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java poi word导出</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f63ee262c752831bb7e075aad9cc9bf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Springboot安全管理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>