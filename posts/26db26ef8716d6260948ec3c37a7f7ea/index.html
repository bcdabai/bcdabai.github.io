<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot热加载 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot热加载" />
<meta property="og:description" content="使用SpringBoot开发的时候，修改完程序之后，需要手动点击重启，才能让修改生效，比较麻烦，也占用了更多的时间。
其实可以通过一些插件，实现修改之后的热加载，并且只加载修改部分，从而也提高了效率。
方式一：使用JRebel
JRebel是一款JVM插件，它使得Java代码修改后不用重启系统，立即生效。
IDEA上原生是不支持热部署的，一般更新了 Java 文件后要手动重启 Tomcat 服务器，才能生效，浪费时间浪费生命。
目前对于idea热部署最好的解决方案就是安装JRebel插件。
第一步：安装插件
第二步：在线GUID地址：在线生成GUID
网址：在线GUID地址
如果失效刷新GUID替换就可以！
服务器地址：https://jrebel.qekang.com/{GUID}
第三步：打开jrebel 如下所示面板，选择Connect to online licensing service
安装成功之后就可以通过JRebel启动项目。这样修改完Java代码后，就可以通过快捷键 Ctrl&#43;shift&#43;F9 而不再需要重启站点这样繁琐浪费时间的操作了。
相关设置 设置成离线工作模式 设置自动编译 要想实现热部署，首先需要对Intellij按如下进行设置：
由于JRebel是实时监控class文件的变化来实现热部署的，所以在idea环境下需要打开自动变异功能才能实现随时修改，随时生效。
打开运行时编译 设置compiler.automake.allow.when.app.running 快捷键ctrl&#43;shift&#43;A，搜索：registry
或者
按快捷键 Ctrl&#43;Shift&#43;Alt&#43;/ ，选择 Registry
使用 运行项目时要点击图中红框中的按钮，即可运行：
第一个按钮是Run，第二个按钮是Debug。
修改代码（只测试了Java代码的修改）后，完成加载以后，就已经实现了热更新效果。
方式二：使用springloaded
第一步：pom文件中添加依赖
&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;version&gt;1.2.4.RELEASE&lt;/version&gt; &lt;/dependency&gt; 第二步：在spring的启动配置里面
第三步：在VM options里面输入下面一段代码
-javaagent:F:\m2\mcms\repository\org\springframework\springloaded\1.2.8.RELEASE\springloaded-1.2.8.RELEASE.jar -noverify
格式： -javaagent: &#34;jar包的位置&#34; -noverify
编译之后修改的代码可以生效
方式三：使用spring-boot-devtools
第一步：pom.xml添加依赖
&lt;!-- 热部署方法1spring boot devtools 依赖包. --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;scope&gt;true&lt;/scope&gt; &lt;/dependency&gt; &lt;!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/26db26ef8716d6260948ec3c37a7f7ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-19T11:43:58+08:00" />
<meta property="article:modified_time" content="2021-01-19T11:43:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot热加载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>使用SpringBoot开发的时候，修改完程序之后，需要手动点击重启，才能让修改生效，比较麻烦，也占用了更多的时间。</p> 
<p>其实可以通过一些插件，实现修改之后的热加载，并且只加载修改部分，从而也提高了效率。</p> 
<p><span style="color:#f33b45;"><strong>方式一：使用JRebel</strong></span></p> 
<p>              JRebel是一款JVM插件，它使得Java代码修改后不用重启系统，立即生效。<br> IDEA上原生是不支持热部署的，一般更新了 Java 文件后要手动重启 Tomcat 服务器，才能生效，浪费时间浪费生命。<br> 目前对于idea热部署最好的解决方案就是安装JRebel插件。</p> 
<p><a name="t2"></a><a id="_12"></a>第一步：安装插件</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/47/93/lr8E4QUk_o.png"></p> 
<p><a name="t3"></a><a id="GUIDGUID_14"></a>第二步：在线GUID地址：在线生成GUID</p> 
<p>网址：<a href="https://www.guidgen.com/" rel="nofollow">在线GUID地址</a><br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/60/36/dFb8nRnb_o.png"><br> 如果失效刷新GUID替换就可以！</p> 
<p>服务器地址：https://jrebel.qekang.com/{GUID}</p> 
<p><a name="t4"></a><a id="jrebel_Connect_to_online_licensing_service_22"></a>第三步：打开jrebel 如下所示面板，选择Connect to online licensing service</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/0b/fd/W3TWCnP3_o.png"><br> 安装成功之后就可以通过JRebel启动项目。这样修改完Java代码后，就可以通过快捷键 <strong>Ctrl+shift+F9</strong> 而不再需要重启站点这样繁琐浪费时间的操作了。</p> 
<h3><a name="t5"></a><a id="_26"></a>相关设置</h3> 
<h4><a name="t6"></a><a id="_27"></a>设置成离线工作模式</h4> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/20/fa/qaZOgjG3_o.png"><br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/8e/fd/NYEyK2uk_o.png"></p> 
<h4><a name="t7"></a><a id="_31"></a>设置自动编译</h4> 
<p>要想实现热部署，首先需要对Intellij按如下进行设置：</p> 
<ol><li>由于JRebel是实时监控class文件的变化来实现热部署的，所以在idea环境下需要打开自动变异功能才能实现随时修改，随时生效。<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/e6/59/2pHCNwvf_o.png"></li><li>打开运行时编译</li></ol> 
<h4><a name="t8"></a><a id="compilerautomakeallowwhenapprunning_39"></a>设置compiler.automake.allow.when.app.running</h4> 
<p>快捷键ctrl+shift+A，搜索：registry<br> 或者<br> 按快捷键 Ctrl+Shift+Alt+/ ，选择 Registry<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/19/a7/6kDACbsQ_o.png"><br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/c5/c2/EnqXwfXl_o.png"></p> 
<h3><a name="t9"></a><a id="_47"></a>使用</h3> 
<p>运行项目时要点击图中红框中的按钮，即可运行：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/04/ef/ECamnMlY_o.png"><br> 第一个按钮是Run，第二个按钮是Debug。</p> 
<p>修改代码（只测试了Java代码的修改）后，完成加载以后，就已经实现了热更新效果。</p> 
<p> </p> 
<p><span style="color:#f33b45;"><strong>方式二：使用springloaded</strong></span></p> 
<p>第一步：pom文件中添加依赖</p> 
<pre><code class="language-XML">&lt;dependency&gt; 
      &lt;groupId&gt;org.springframework&lt;/groupId&gt; 
      &lt;artifactId&gt;springloaded&lt;/artifactId&gt; 
      &lt;version&gt;1.2.4.RELEASE&lt;/version&gt;
  &lt;/dependency&gt; </code></pre> 
<p>第二步：在spring的启动配置里面</p> 
<p><img alt="" height="120" src="https://images2.imgbox.com/fa/1f/wV1Jop9r_o.png" width="467"></p> 
<p>第三步：在VM options里面输入下面一段代码</p> 
<p>-javaagent:F:\m2\mcms\repository\org\springframework\springloaded\1.2.8.RELEASE\springloaded-1.2.8.RELEASE.jar -noverify</p> 
<p>格式：  -javaagent: "jar包的位置" -noverify</p> 
<p><img alt="" height="560" src="https://images2.imgbox.com/ab/85/xN38yTOL_o.png" width="1057"></p> 
<p>编译之后修改的代码可以生效</p> 
<p> </p> 
<p><span style="color:#f33b45;"><strong>方式三：使用spring-boot-devtools</strong></span></p> 
<p>第一步：pom.xml添加依赖</p> 
<pre><code class="language-XML">&lt;!-- 热部署方法1spring boot devtools 依赖包. --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
           &lt;scope&gt;true&lt;/scope&gt;
        &lt;/dependency&gt;



&lt;!-- 这是spring boot devtool plugin 热部署1常用--&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                      &lt;!--fork :  如果没有该项配置，这个devtools不会起作用，即应用不会restart --&gt;
                    &lt;fork&gt;true&lt;/fork&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
</code></pre> 
<p>application.yml配置文件中添加：</p> 
<pre><code class="language-Groovy">spring:
    devtools:
        restart:
            #热部署生效
          enabled: true
            #设置重启的目录
            #additional-paths: src/main/java
            #classpath目录下的WEB-INF文件夹内容修改不重启
          exclude: WEB-INF/**</code></pre> 
<p> </p> 
<p>设置WEB-INF下的jsp修改不需要重启。</p> 
<p>当我们修改了java类后，IDEA默认是不自动编译的，而spring-boot-devtools又是监测classpath下的文件发生变化才会重启应用，所以需要设置IDEA的自动编译：</p> 
<p><img alt="" src="https://images2.imgbox.com/65/47/Na5sBMNa_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/f5/32/Afmce4Od_o.png"></p> 
<p>这样就可以完成部署了。</p> 
<p> </p> 
<p> </p> 
<p>上述三种热加载方式：</p> 
<p>（1）jrebel需要在有网络的环境进行注册，无网环境配置稍显负载</p> 
<p>（2）springloaded方式最简单，使用springloader这种方式，这并不是所有的代码都能够热部署的。</p> 
<p>（3）使用devtools这种方式可以实现大部分代码的热部署，但是和数据库连接池有冲突，容易造成数据库连接池关闭</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d002e6993eef2a03d51ef4a56c817ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">论文笔记-医学图像分类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/548a3536ed0926455599dc7f51ecdec0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AIX --- 常用命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>