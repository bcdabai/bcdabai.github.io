<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java集合（二）List、ArrayList、LinkedList - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java集合（二）List、ArrayList、LinkedList" />
<meta property="og:description" content="文章目录 List一、List简介二、遍历List2.1 不同遍历方式的使用2.2 不同遍历方式的适用场合 三、常见List实现类比较3.1 ArrayList和LinkedList3.2 ArrayList和Vector ArrayList一、ArrayList介绍1.1 ArrayList的特点1.2 ArrayList的使用 二、从源码理解ArrayList2.1 创建ArrayList对象2.2 往ArrayList中添加元素2.3 从ArrayList中删除元素2.4 获取指定位置的元素2.5 替换指定位置的元素2.6 查找指定元素所在位置2.7 自动扩容机制 三、ArrayList相关问题3.1 Array和ArrayList的区别3.2 多线程场景下如何使用ArrayList3.3 System.arraycopy和Arrays.copyOf3.4 ArrayList的扩容因子为什么是1.5 LinkedList一、LinkedList介绍1.1 LinkedList特点1.2 LinkedList的使用 二、从源码理解LinkedList2.1创建LinkedList对象2.2 往链表里添加节点2.3 从链表中删除节点2.4 获取链表中的节点2.5 更新元素2.6 查找某个元素在链表中的位置 本系列文章：
Java集合（一）集合框架概述
Java集合（二）List、ArrayList、LinkedList
Java集合（三）CopyOnWriteArrayList、Vector、Stack
Java集合（四）Map、HashMap
Java集合（五）LinkedHashMap、TreeMap
Java集合（六）Hashtable、ConcurrentHashMap
Java集合（七）Set、HashSet、LinkedHashSet、TreeSet
Java集合（八）BlockingQueue、ArrayBlockingQueue、LinkedBlockingQueue、PriorityBlockingQueue、DelayQueue
List 一、List简介 List是有序集合，使用List可以控制列表中每个元素的插入位置，可以通过整数索引（列表中的位置）访问元素，并搜索列表中的元素。
List通常允许重复的元素。
使用List存储的特点：元素有序、可重复。
List最常见的实现方式是ArrayList和LinkedList。以下是List接口常见实现类的对比：
具体实现优点缺点ArrayList底层数据结构是数组，查询快，效率高增删慢；
线程不安全LinkedList底层数据结构是链表，增删快，效率高查询慢；
线程不安全Vector底层数据结构是数组，查询快；
线程安全增删慢，效率低CopyOnWriteArrayList底层数据结构是数组，读写分离，效率高；
线程安全，内存消耗较大；
只能保证数据的最终一致性，不能保证数据的实时一致性 ArrayList是一个动态数组，随着容器中的元素不断增加，容器的大小也会随着增加。同时由于ArrayList底层是数组实现，所以可以随机访问元素。
Vector与ArrayList类似，不过是同步的，因此Vector是线程安全的动态数组。
Stack继承自Vector，实现一个后进先出的堆栈。
LinkedList是一个双向链表，LinkedList不能随机访问，增删元素比较方便。
CopyOnWriteArrayList是一个线程安全、并且在读操作时无锁的 ArrayList。当需要修改容器中的元素时，会首先将当前容器复制一份，然后在新副本上执行写操作，结束之后再将原容器的引用指向新容器。
数据元素在内存中，主要有2种存储方式：顺序存储和链式存储。
1、顺序存储
这种方式，相邻的数据元素存放于相邻的内存地址中，整块内存地址是连续的。可以根据元素的位置直接计算出内存地址，直接进行读取。读取一个特定位置元素的平均时间复杂度为O(1)。正常来说，只有基于数组实现的集合，才有这种特性。
在List的实现类中，顺序存储以ArrayList为代表。2、链式存储
这种方式，每一个数据元素，在内存中都不要求处于相邻的位置，每个数据元素包含它下一个元素的内存地址。不可以根据元素的位置直接计算出内存地址，只能按顺序读取元素。读取一个特定位置元素的平均时间复杂度为O(n)。主要以链表为代表。
在List的实现类中，链式存储以LinkedList为代表。 二、遍历List 对于List集合的实现类，常见的遍历方式是：for循环、for each遍历和迭代器遍历。
2.1 不同遍历方式的使用 1、for循环遍历" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a488ede651bb5645eabfd8f6bd71fe7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T15:59:45+08:00" />
<meta property="article:modified_time" content="2024-01-19T15:59:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java集合（二）List、ArrayList、LinkedList</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#List_12" rel="nofollow">List</a></li><li><ul><li><a href="#List_13" rel="nofollow">一、List简介</a></li><li><a href="#List_39" rel="nofollow">二、遍历List</a></li><li><ul><li><a href="#21__41" rel="nofollow">2.1 不同遍历方式的使用</a></li><li><a href="#22__63" rel="nofollow">2.2 不同遍历方式的适用场合</a></li></ul> 
   </li><li><a href="#List_72" rel="nofollow">三、常见List实现类比较</a></li><li><ul><li><a href="#31_ArrayListLinkedList_73" rel="nofollow">3.1 ArrayList和LinkedList</a></li><li><a href="#32_ArrayListVector_100" rel="nofollow">3.2 ArrayList和Vector</a></li></ul> 
  </li></ul> 
  </li><li><a href="#ArrayList_117" rel="nofollow">ArrayList</a></li><li><ul><li><a href="#ArrayList_118" rel="nofollow">一、ArrayList介绍</a></li><li><ul><li><a href="#11_ArrayList_129" rel="nofollow">1.1 ArrayList的特点</a></li><li><a href="#12_ArrayList_146" rel="nofollow">1.2 ArrayList的使用</a></li></ul> 
   </li><li><a href="#ArrayList_209" rel="nofollow">二、从源码理解ArrayList</a></li><li><ul><li><a href="#21__ArrayList_230" rel="nofollow">2.1 创建ArrayList对象</a></li><li><a href="#22_ArrayList_248" rel="nofollow">2.2 往ArrayList中添加元素</a></li><li><a href="#23_ArrayList_289" rel="nofollow">2.3 从ArrayList中删除元素</a></li><li><a href="#24__367" rel="nofollow">2.4 获取指定位置的元素</a></li><li><a href="#25__377" rel="nofollow">2.5 替换指定位置的元素</a></li><li><a href="#26__390" rel="nofollow">2.6 查找指定元素所在位置</a></li><li><a href="#27__428" rel="nofollow">2.7 自动扩容机制</a></li></ul> 
   </li><li><a href="#ArrayList_521" rel="nofollow">三、ArrayList相关问题</a></li><li><ul><li><a href="#31_ArrayArrayList_522" rel="nofollow">3.1 Array和ArrayList的区别</a></li><li><a href="#32_ArrayList_527" rel="nofollow">3.2 多线程场景下如何使用ArrayList</a></li><li><a href="#33_SystemarraycopyArrayscopyOf_543" rel="nofollow">3.3 System.arraycopy和Arrays.copyOf</a></li><li><a href="#34_ArrayList15_591" rel="nofollow">3.4 ArrayList的扩容因子为什么是1.5</a></li></ul> 
  </li></ul> 
  </li><li><a href="#LinkedList_602" rel="nofollow">LinkedList</a></li><li><ul><li><a href="#LinkedList_603" rel="nofollow">一、LinkedList介绍</a></li><li><ul><li><a href="#11_LinkedList_614" rel="nofollow">1.1 LinkedList特点</a></li><li><a href="#12_LinkedList_630" rel="nofollow">1.2 LinkedList的使用</a></li></ul> 
   </li><li><a href="#LinkedList_737" rel="nofollow">二、从源码理解LinkedList</a></li><li><ul><li><a href="#21LinkedList_764" rel="nofollow">2.1创建LinkedList对象</a></li><li><a href="#22__778" rel="nofollow">2.2 往链表里添加节点</a></li><li><a href="#23__955" rel="nofollow">2.3 从链表中删除节点</a></li><li><a href="#24__1148" rel="nofollow">2.4 获取链表中的节点</a></li><li><a href="#25__1216" rel="nofollow">2.5 更新元素</a></li><li><a href="#26__1250" rel="nofollow">2.6 查找某个元素在链表中的位置</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>  本系列文章：<br>     <a href="https://blog.csdn.net/m0_37741420/article/details/106884159" title="With a Title">Java集合（一）集合框架概述</a><br>     Java集合（二）List、ArrayList、LinkedList<br>     <a href="https://blog.csdn.net/m0_37741420/article/details/107032686" title="With a Title">Java集合（三）CopyOnWriteArrayList、Vector、Stack</a><br>     <a href="https://blog.csdn.net/m0_37741420/article/details/112424663" title="With a Title">Java集合（四）Map、HashMap</a><br>     <a href="https://blog.csdn.net/m0_37741420/article/details/123614527" title="With a Title">Java集合（五）LinkedHashMap、TreeMap</a><br>     <a href="https://blog.csdn.net/m0_37741420/article/details/135028798" title="With a Title">Java集合（六）Hashtable、ConcurrentHashMap</a><br>     <a href="https://blog.csdn.net/m0_37741420/article/details/112407684" title="With a Title">Java集合（七）Set、HashSet、LinkedHashSet、TreeSet</a><br>     <a href="https://blog.csdn.net/m0_37741420/article/details/120335698" title="With a Title">Java集合（八）BlockingQueue、ArrayBlockingQueue、LinkedBlockingQueue、PriorityBlockingQueue、DelayQueue</a></p> 
<h2><a id="List_12"></a>List</h2> 
<h3><a id="List_13"></a>一、List简介</h3> 
<p>  <code>List是有序集合</code>，使用List可以控制列表中每个元素的插入位置，可以通过整数索引（列表中的位置）访问元素，并搜索列表中的元素。<br>   List通常允许重复的元素。<br>   使用List存储的特点：<strong>元素有序、可重复</strong>。<br>   List最常见的实现方式是ArrayList和LinkedList。以下是List接口常见实现类的对比：</p> 
<table><thead><tr><th align="left">具体实现</th><th align="left">优点</th><th align="left">缺点</th></tr></thead><tbody><tr><td align="left">ArrayList</td><td align="left"><code>底层数据结构是数组，查询快，效率高</code></td><td align="left"><code>增删慢；</code><br><code>线程不安全</code></td></tr><tr><td align="left">LinkedList</td><td align="left"><code>底层数据结构是链表，增删快，效率高</code></td><td align="left"><code>查询慢；</code><br><code>线程不安全</code></td></tr><tr><td align="left">Vector</td><td align="left"><code>底层数据结构是数组，查询快；</code><br><code>线程安全</code></td><td align="left"><code>增删慢，效率低</code></td></tr><tr><td align="left">CopyOnWriteArrayList</td><td align="left"><code>底层数据结构是数组，读写分离，效率高；</code><br><code>线程安全，</code></td><td align="left"><code>内存消耗较大；</code><br><code>只能保证数据的最终一致性，不能保证数据的实时一致性</code></td></tr></tbody></table> 
<p>  ArrayList是一个动态数组，随着容器中的元素不断增加，容器的大小也会随着增加。同时由于ArrayList底层是数组实现，所以可以随机访问元素。<br>   Vector与ArrayList类似，不过是同步的，因此Vector是线程安全的动态数组。<br>   Stack继承自Vector，实现一个后进先出的堆栈。<br>   LinkedList是一个双向链表，LinkedList不能随机访问，增删元素比较方便。<br>   CopyOnWriteArrayList是一个线程安全、并且在读操作时无锁的 ArrayList。当需要修改容器中的元素时，会首先将当前容器复制一份，然后在新副本上执行写操作，结束之后再将原容器的引用指向新容器。</p> 
<p>  数据元素在内存中，主要有2种存储方式：顺序存储和链式存储。</p> 
<ul><li><strong>1、顺序存储</strong><br>   这种方式，相邻的数据元素存放于相邻的内存地址中，整块内存地址是连续的。可以根据元素的位置直接计算出内存地址，直接进行读取。读取一个特定位置元素的平均时间复杂度为O(1)。正常来说，只有基于数组实现的集合，才有这种特性。<br>   <code>在List的实现类中，顺序存储以ArrayList为代表</code>。</li><li><strong>2、链式存储</strong><br>   这种方式，每一个数据元素，在内存中都不要求处于相邻的位置，每个数据元素包含它下一个元素的内存地址。不可以根据元素的位置直接计算出内存地址，只能按顺序读取元素。读取一个特定位置元素的平均时间复杂度为O(n)。主要以链表为代表。<br>   <code>在List的实现类中，链式存储以LinkedList为代表</code>。</li></ul> 
<h3><a id="List_39"></a>二、遍历List</h3> 
<p>  对于List集合的实现类，常见的遍历方式是：for循环、for each遍历和迭代器遍历。</p> 
<h4><a id="21__41"></a>2.1 不同遍历方式的使用</h4> 
<ul><li><strong>1、for循环遍历</strong><br>   基于计数器。在集合外部维护一个计数器，然后依次读取每一个位置的元素，当读取到最后一个元素后停止。这种遍历方式主要就是需要按元素的位置来读取元素。示例：</li></ul> 
<pre><code class="prism language-java">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>2、迭代器遍历</strong><br>   示例：</li></ul> 
<pre><code class="prism language-java">	<span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ul><li>3、<strong>foreach 循环遍历</strong><br>   foreach内部也是采用了Iterator的方式实现，使用时不需要显式声明Iterator或计数器。优点是代码简洁，不易出错；缺点是只能做简单的遍历，不能在遍历过程中操作数据集合，例如删除、替换。示例：</li></ul> 
<pre><code class="prism language-java">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="22__63"></a>2.2 不同遍历方式的适用场合</h4> 
<ul><li><strong>1、for循环遍历</strong><br>   for循环遍历，适用于遍历顺序存储集合，因为读取性能比较高。扩展了说，<code>for循环遍历适合实现了RandomAccess接口的集合</code>。如果一个数据集合实现了该接口，就意味着它支持顺序访问，按位置读取元素的平均时间复杂度为 O(1)，如ArrayList。如果没有实现该接口，表示不支持顺序访问，如LinkedList。</li><li><strong>2、迭代器遍历</strong><br>   顺序存储：如果不是太在意时间，推荐选择此方式，毕竟代码更加简洁。<br>   链式存储：平均时间复杂度降为O(n)，所以推荐此种遍历方式。<br>   使用迭代器更加线程安全，因为它可以确保，在当前遍历的集合元素被更改的时候，它会抛出ConcurrentModificationException。</li></ul> 
<p>  综合而言，推荐的做法就是，<code>支持顺序访问的List可用for循环遍历，否则建议用Iterator或foreach遍历</code>。此外，如果需要在遍历时修改元素，则需要使用迭代器的遍历方式，否则会出现ConcurrentModificationException。</p> 
<h3><a id="List_72"></a>三、常见List实现类比较</h3> 
<h4><a id="31_ArrayListLinkedList_73"></a>3.1 ArrayList和LinkedList</h4> 
<table><thead><tr><th align="left"></th><th align="left">ArrayList</th><th align="left">LinkedList</th></tr></thead><tbody><tr><td align="left">线程安全性</td><td align="left">线程不安全</td><td align="left">线程不安全</td></tr><tr><td align="left">底层实现</td><td align="left">动态数组</td><td align="left">双向链表（JDK1.6之前为循环链表，JDK1.7取消了循环）</td></tr><tr><td align="left">访问方式</td><td align="left">支持通过元素的下标访问元素</td><td align="left">不支持通过元素的下标访问元素</td></tr><tr><td align="left">增加和删除效率</td><td align="left">采用数组存储，所以插入和删除元素的时间复杂度受元素位置的影响。 <br>比如：执行add(E e)方法的时候， ArrayList 会默认在将指定的元素追加到此列表的末尾，这种情况时间复杂度就是O(1)。<br>如果要在指定位置 i 插入和删除元素的话，时间复杂度就为 O(n)。</td><td align="left">采用链表存储，所以插入，删除元素时间复杂度不受元素位置的影响，都是近似 O（1）</td></tr><tr><td align="left">是否支持快速随机访问<br></td><td align="left">支持</td><td align="left">不支持</td></tr><tr><td align="left">内存空间</td><td align="left">ArrayList的空间浪费主要体现在列表的结尾会预留⼀定的容量空间</td><td align="left">更占内存，因为LinkedList的节点除了存储数据，还存储了两个引用，一个指向前一个元素，一个指向后一个元素</td></tr></tbody></table> 
<p>  LinkedList是一个双链表，在添加和删除元素时具有比ArrayList更好的性能，但在get与set方面弱于ArrayList。当然，这些对比都是指数据量很大或者操作很频繁。<br>   综合来说，<code>在需要频繁读取集合中的元素时，更推荐使用ArrayList，而在插入和删除操作较多时，更推荐使用LinkedList</code>。</p> 
<ul><li><strong>快速随机访问</strong><br>   快速随机访问就是通过元素的序号快速获取元素对象(对应于 get(int index)方法)，对应到Java代码中，就是一个接口：</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RandomAccess</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  <code>RandomAccess接口用来标识其实现类具有快速随机访问的特点</code>。</p> 
<ul><li><strong>两者效率对比</strong><br>   当从头部依次添加元素时，链表和数组的性能差不不多。但当数据初始化完成之后，我们再进行插入操作时，尤其是从头部插入时，因为数组要移动之后的所有元素，因此性能要比链表低很多；但在查询时性能刚好相反，因为链表要遍历查询，并且LinkedList 是双向链表，所以在中间查询时性能要比数组查询慢了上万倍（查询 100 个元素），而两头查询（头部和尾部）时，链表也⽐数组慢了将近 1000 多倍（查询 100 个元素），因此在查询较多的场景中，我们要尽量使用数组，在添加和删除操作较多时，应该使用链表结构。<br>   数组和链表的操作时间复杂度对比：</li></ul> 
<table><thead><tr><th align="left"></th><th align="left">数组</th><th align="left">链表</th></tr></thead><tbody><tr><td align="left">查询</td><td align="left">O(1)</td><td align="left">O(n)</td></tr><tr><td align="left">插入、删除</td><td align="left">O(n)</td><td align="left">O(1)</td></tr></tbody></table> 
<h4><a id="32_ArrayListVector_100"></a>3.2 ArrayList和Vector</h4> 
<p>  这两个类都实现了List接口，他们都是有序集合。相同点：</p> 
<blockquote> 
 <ol><li>ArrayList和Vector都是继承了相同的父类和实现了相同的接口。</li><li>底层都是数组实现的。</li><li>初始默认长度都为10。</li><li>迭代器的实现都是fail-fast的。</li></ol> 
</blockquote> 
<p>  ArrayList和Vector的不同点：</p> 
<table><thead><tr><th align="left"></th><th align="left">ArrayList</th><th align="left">Vector</th></tr></thead><tbody><tr><td align="left">线程安全性</td><td align="left">线程不安全</td><td align="left">使用Synchronized来修饰大部分方法，线程安全</td></tr><tr><td align="left">性能</td><td align="left">更优</td><td align="left">由于使用了Synchronized，性能较差</td></tr><tr><td align="left">扩容</td><td align="left">1.5倍扩容</td><td align="left">2倍扩容</td></tr></tbody></table> 
<p>  ArrayList与Vector都可以设置初始的空间大小， Vector还可以设置增长的空间大小，而ArrayList 没有提供设置增长空间的方法。<br>   ArrayList更加通用，因为我们可以使用Collections工具类轻易地获取同步列表和只读列表。</p> 
<h2><a id="ArrayList_117"></a>ArrayList</h2> 
<h3><a id="ArrayList_118"></a>一、ArrayList介绍</h3> 
<p>  简单来说，ArrayList是动态数组（<code>数组的容量会随着元素数量的增加而增加，即动态变化</code>）。<br>   ArrayList的继承关系：</p> 
<pre><code class="prism language-java">	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre> 
<p>  在ArrayList中，并没有规定特殊的元素操作规则（比如只能在数组两端进行增删等），所以ArrayList是操作非常自由的动态数组：</p> 
<blockquote> 
 <ol><li>可以在数组头部 / 尾部 / 中间等任意位置插入、删除元素。</li><li>添加单个或集合中的元素时，未指明添加位置时，都是添加在尾部。</li><li>不会像队列那样在增加、取出元素时可能会产生阻塞现象。</li></ol> 
</blockquote> 
<h4><a id="11_ArrayList_129"></a>1.1 ArrayList的特点</h4> 
<ul><li><strong>1、自动扩容</strong><br>   ArrayList是动态数组，这里的“动态”说的就是可以自动扩容。ArrayList默认初始容量为10，当容量不足时可以自动扩容（<code>1.5倍扩容，即：原来大小+原来大小*0.5</code>）。<br>   ArrayList的初始容量可以指定，扩容倍数(1.5)不能制定。</li><li><strong>2、线程不安全</strong><br>   ArrayList是线程不安全的，也实现了fail-fast机制。</li><li><strong>3、访问元素效率高，增删元素效率低</strong><br>   ArrayList实现了RandomAccess接口，支持随机访问。get、set、isEmpty等方法的时间复杂度都是O(1)，即遍历和随机访问元素效率比较高；add的时间复杂度是O(n)，添加和删除元素效率比较低。</li><li><strong>4、可添加null,有序可重复</strong><br>   ArrayList在添加元素时，并不需要进行非空判定，所以可以是null。ArrayList内的元素是有序的，所以也可重复。</li><li><strong>5、元素下标是从0开始</strong><br>   因为ArrayList底层实现是数组，所以下标是从0开始。</li><li><strong>6、大量使用System.arraycopy()</strong><br>   ArrayList是动态数组，所以肯定会有元素拷贝动作，ArrayList的实现中大量地调用了Arrays.copyof()和 System.arraycopy()方法，其实Arrays.copyof()内部也是调用 System.arraycopy()。System.arraycopy()为Native方法。</li><li><strong>7、支持克隆和序列化</strong><br>   ArrayList实现了Cloneable接口，支持克隆。<br>   ArrayList实现了Serializable接口，支持序列化，能通过序列化去传输。</li></ul> 
<h4><a id="12_ArrayList_146"></a>1.2 ArrayList的使用</h4> 
<ul><li><strong>1、构造方法</strong><br>   可以指定初始容量，也可以不指定。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//构造一个初始容量为10的空ArrayList</span>
	<span class="token comment">//（其实是构造了一个容量为空的ArrayList，第一次添加元素时，扩容为10）</span>
	<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//构造具有指定初始容量的空ArrayList  </span>
	<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>2、添加元素</strong><br>   可以直接添加到尾部，也可以添加到指定位置。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//将元素追加到此ArrayList的尾部</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//在指定位置插入元素</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>3、删除元素</strong><br>   可以删除某个元素，也可以清空ArrayList。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删除指定位置的元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
	<span class="token comment">//从ArrayList中删除第一个出现指定元素的（如果存在）</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//清空ArrayList</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>4、获取元素</strong><br>   根据下标获取对应位置的元素，和数组类似。</li></ul> 
<pre><code class="prism language-java">	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>5、获取指定元素的下标</strong><br>   可以从前向后，也可以从后向前，查找某个元素在ArrayList中的下标。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//返回指定元素的第一次出现的索引，如果此ArrayList不包含元素，则返回-1</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//返回指定元素的最后一次出现的索引，如果此ArrayList不包含元素，则返回-1</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>6、替换元素</strong><br>   和数组类似，替换指定下标的元素，并且将原下标对应的元素返回。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//替换元素，返回原有元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>7、截取ArrayList</strong><br>   截取ArrayList的子串。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//返回此ArrayList中指定的 fromIndex （包括）和 toIndex（不包括）之间的子ArrayList</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">E</span> <span class="token punctuation">&gt;</span></span> <span class="token function">subList</span><span class="token punctuation">(</span><span class="token keyword">int</span> fromIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> toIndex<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>8、通用性方法</strong><br>   判断ArrayList是否为空、获取总的元素数等。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//判断ArrayList是否为空</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//返回ArrayList中的元素数</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//判断是否包含某个元素</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="ArrayList_209"></a>二、从源码理解ArrayList</h3> 
<p>  ArrayList里的变量：</p> 
<pre><code class="prism language-java">    <span class="token comment">//版本号，用于序列化</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">8683452581122892189L</span><span class="token punctuation">;</span>
    <span class="token comment">//默认的初始容量</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_CAPACITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">//初始容量为0时，elementData指向该数组</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//也是个空数组。简单来说，和EMPTY_ELEMENTDATA差异的地方在于：没有指定初始容量时，</span>
    <span class="token comment">//elementData指向该数组。</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//元素数组</span>
	<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
    <span class="token comment">//元素个数</span>
	<span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/db/d1/zKBzph5L_o.png" alt="" width="400"></p> 
<ul><li><strong>elementData</strong><br>   elementData是存储数据的数组，元素类型为<code>Object类型</code>，即可以存放所有类型数据（至于ArrayList中具体存储什么类型的元素，一般通过泛型去规范），对ArrayList中所存储数据的所有操作都是基于该数组的。<br>   elementData通常会预留一些容量，等容量不足时再扩充容量。elementData用<code>transient修饰</code> ，就可以保证只序列化实际存储的那些元素，而不是整个数组，从而节省空间和时间。</li></ul> 
<h4><a id="21__ArrayList_230"></a>2.1 创建ArrayList对象</h4> 
<p>  常用的构造方法不指定初始容量的方式，默认容量为10。</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//DEFAULTCAPACITY_EMPTY_ELEMENTDATA是个空数组.但在添加元素时，第一次对数组</span>
    	<span class="token comment">//进行扩容时，会将数组容量扩展为10，所以我们此时可以把ArrayList的容量看作10</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  此时可以假设ArrayList的容量为10（因为首次扩容时容量为10），数组中元素的数量size为0：<br> <img src="https://images2.imgbox.com/bc/fb/8nEQzqWn_o.png" alt=""><br>   ArrayList还支持指定初始容量、利用集合来创建的2种方式。</p> 
<pre><code class="prism language-java">	<span class="token comment">//构造具有指定初始容量的空列表</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity
  	<span class="token comment">//构造一个包含指定集合的元素的列表，按照它们由集合的迭代器返回的顺序</span>
  	<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="22_ArrayList_248"></a>2.2 往ArrayList中添加元素</h4> 
<ul><li><strong>1、添加元素到数组尾部</strong><br>   先判断是否需要扩容，需要的话就扩容，再添加元素到数组已有元素末尾。</li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断是否需要扩容，确保处理后的容器能存下size + 1个元素</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将元素追加到数组尾部</span>
        elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  以之前创建的10个容量的空ArrayList为例，添加一个元素后的ArrayList：<br> <img src="https://images2.imgbox.com/dc/c6/KrduilVd_o.png" alt=""><br>   如果此时再调用add方法先后添加2、3两个元素后，ArrayList会变成：<br> <img src="https://images2.imgbox.com/5e/2c/5QHxLiBz_o.png" alt=""></p> 
<ul><li><strong>2、添加元素到数组的指定位置</strong><br>   除了可以将元素增加到现有元素尾部，还可以添加在指定位置。相比于直接添加在尾部，多了一步从指定位置处元素向后移动一位的操作。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//在指定位置添加元素</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//先判断index位置是否合法</span>
        <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//判断是否需要扩容</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">//将index到尾部的元素向后移动一位</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                         size <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将元素放置在index位置上</span>
        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token comment">//index参数不合法，就抛IndexOutOfBoundsException</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> size <span class="token operator">||</span> index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  之前的"1"、“2”、"3"都是直接追加到ArrayList现有元素的后面的，ArrayList当然还支持在指定位置添加元素，假设调用<code>add(1,4)</code>方法，就会在下标索引为1的位置添加元素<code>4</code>。这个过程分为以下几步：<br> <img src="https://images2.imgbox.com/86/45/dJPiu7sS_o.png" alt=""></p> 
<h4><a id="23_ArrayList_289"></a>2.3 从ArrayList中删除元素</h4> 
<ul><li><strong>1、删除数组指定位置的元素</strong><br>   该方法的思路较简单：删除对应位置的元素，其后位置的元素前移。</li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//校验index是否合法</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//取出index位置元素（为了返回该元素）</span>
        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//删除元素后，要移动的元素数</span>
        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">//如果删除的元素不是最后一个元素，就要将被删除元素后面的元素向前移动</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                             numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将数组元素的最后一个位置置为null，为了GC</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 

        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//index参数超过数组元元素数的最大位置，抛IndexOutOfBoundsException</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheck</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  在删除元素后，需要将对应的一个位置或多个位置设置为Null，是为了GC。</p> 
<ul><li><strong>2、删除数组中第一个出现的某个元素，数组中不存在则不删除</strong><br>   这种删除元素的方式主要分为两步：</li></ul> 
<blockquote> 
 <ol><li>找出元素所在位置；</li><li>删除对应位置的元素，其后位置的元素前移。</li></ol> 
</blockquote> 
<pre><code class="prism language-java">	<span class="token comment">//删除在数组第一次出现的指定元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断要删除的元素是否为null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
            	<span class="token comment">//找到元素后，删除</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fastRemove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">//如果删除的元素不是最后一个元素，就要将被删除元素后面的元素向前移动</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                             numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
</code></pre> 
<p>  以上的两个删除元素的方法，其实大致思路相似：先找到index，再删除对应位置上的元素，被删除元素位置后面的元素往前移动一位，删除数组尾部元素。图示：<br> <img src="https://images2.imgbox.com/4b/f5/Iiwc9Mjd_o.png" alt=""></p> 
<ul><li><strong>3、清空数组</strong><br>   每个位置都置为null。</li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//清空数组元素，置为null，为了GC</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="24__367"></a>2.4 获取指定位置的元素</h4> 
<p>  和从数组中获取元素类似，根据数组下标获取元素。</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//检验位置参数是否合法</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//将该位置元素返回</span>
        <span class="token keyword">return</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="25__377"></a>2.5 替换指定位置的元素</h4> 
<p>  根据数组下标替换元素。</p> 
<ul><li><strong>set(int index, E element)</strong></li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//先校验位置元素是否合法</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//取出该位置旧元素，放置新元素，再将旧元素返回</span>
        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="26__390"></a>2.6 查找指定元素所在位置</h4> 
<p>  检索元素的方法有两个：检索元素第一次出现的位置和检索元素最后一次出现的位置。</p> 
<ul><li><strong>1、检索元素第一次出现的位置</strong><br>   从前往后遍历数组。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//从前向后遍历，返回指定元素（或null）第一次出现的位置</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断要检索的元素是否为null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>2、检索元素最后一次出现的位置</strong><br>   从后往前遍历数组。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//从后向前遍历，返回指定元素（或null）最后一次出现的位置</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断要检索的元素是否为null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="27__428"></a>2.7 自动扩容机制</h4> 
<p>  ArrayList自动扩容的本质就是计算出新的扩容数组的size后实例化，并将原有数组内容复制到新数组中去。<br>   自动扩容时的方法调用：add --&gt; ensureCapacityInternal --&gt; calculateCapacity --&gt; grow --&gt; hugeCapacity。</p> 
<p>  自动扩容机制是每次向数组中添加元素前，必须要做的判断操作，因此自动扩容的入口在add方法：</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断是否可以容纳e，若能，则直接添加在末尾；</span>
    	<span class="token comment">//若不能，则进行扩容，然后再把e添加在末尾</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">//将e添加到数组末尾</span>
        elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//每次在add()一个元素时，arraylist都需要对这个list的容量进行一个判断。</span>
	<span class="token comment">//通过ensureCapacityInternal()方法确保当前ArrayList维护的数组具有存储</span>
	<span class="token comment">//新元素的能力，经过处理之后将元素存储在数组elementData的尾部</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//先判断一下是否是使用无参构造方法创建的ArrayList对象，</span>
    	<span class="token comment">//如果是的话，就设置默认数组大小为DEFAULT_CAPACITY（10）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            minCapacity <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//如果修改后的(最小)数组容量minCapacity大于当前的数组长度elementData.length，</span>
        <span class="token comment">//那么就需要调用grow方法进行扩容，反之则不需要</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//目前数组长度</span>
        <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">//先将当前数组容量扩充至1.5倍</span>
        <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//newCapacity：扩容1.5倍后的新数组容量</span>
        <span class="token comment">//minCapacity：数组存储元素所需要的最小容量</span>
        <span class="token comment">//检查新容量是否大于最小需要容量，若还是小于最小需要容量，那么</span>
        <span class="token comment">//就把最小需要容量当作数组的新容量</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
        <span class="token comment">//如果新容量大于MAX_ARRAY_SIZE(Integer.MAX_VALUE - 8),</span>
        <span class="token comment">//调用hugeCapacity方法来获取扩容后数组的合适大小</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将源数组复制到newCapcity大小的新数组上</span>
        elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// overflow</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//对minCapacity和MAX_ARRAY_SIZE进行比较</span>
        <span class="token comment">//若minCapacity大，将Integer.MAX_VALUE作为新数组的大小</span>
        <span class="token comment">//若MAX_ARRAY_SIZE大，将MAX_ARRAY_SIZE作为新数组的大小</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">)</span> <span class="token operator">?</span>
            <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">:</span>
            <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<p>  综上所述，ArrayList自动扩容流程：</p> 
<ul><li>1、是否用无参构造方法创建的ArrayList对象。如果是，则ArrayList新容量为10。</li><li>2、经过第一步后，判断新容量是否够用，不够用就进入扩容流程核心方法grow。</li><li>3、在grow扩容时，涉及到两个变量：<br>   newCapacity：扩容1.5倍后的新数组容量；<br>   minCapacity：数组存储元素所需要的最小容量，由现有数组元素数量size+1得来。<br>   取两者较大者作为newCapacity。</li></ul> 
<blockquote> 
 <ol><li>此处为什么要用【初始容量 * 1.5】和【初始容量+1】相比。因为假如初始容量较小(比如0、1、2、3、4)，那么【初始容量 * 1.5】未必大于【初始容量+1】。</li><li>MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8。</li></ol> 
</blockquote> 
<ul><li>4、newCapacity与MAX_ARRAY_SIZE比较。<br>   如果newCapacity&lt; MAX_ARRAY_SIZE，则newCapcity不变。<br>   如果newCapacity&gt;MAX_ARRAY_SIZE，再比较minCapacity和MAX_ARRAY_SIZE的大小。如果大于，就令newCapacity = Integer.MAX_VALUE；否则newCapacity = MAX_ARRAY_SIZE。</li><li>5、将源数组复制到newCapcity大小的新数组上。</li></ul> 
<p>  这里面有个ArrayList最大容量的问题，常规情况下ArrayList的最大容量为Integer.MAX_VALUE - 8，看源码：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * The maximum size of array to allocate.
     * Some VMs reserve some header words in an array.
     * Attempts to allocate larger arrays may result in
     * OutOfMemoryError: Requested array size exceeds VM limit
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> 
<p>  ArrayList的存储空间，除了要存元素，还要存储对象头信息，所以-8，避免发生OOM。当然，从代码看，如果Integer.MAX_VALUE - 8的空间不够用的话，还是会将数组空间设置为Integer.MAX_VALUE。</p> 
<h3><a id="ArrayList_521"></a>三、ArrayList相关问题</h3> 
<h4><a id="31_ArrayArrayList_522"></a>3.1 Array和ArrayList的区别</h4> 
<table><thead><tr><th align="left"></th><th align="left">Array</th><th align="left">ArrayList</th></tr></thead><tbody><tr><td align="left">存储的数据类型</td><td align="left">可以存储基本数据类型和对象（其实是对象的引用）</td><td align="left">只能存储对象</td></tr><tr><td align="left">大小</td><td align="left">指定固定大小</td><td align="left">动态扩展</td></tr></tbody></table> 
<h4><a id="32_ArrayList_527"></a>3.2 多线程场景下如何使用ArrayList</h4> 
<p>  常见的方法有以下几种：</p> 
<ul><li>1、通过Collections的synchronizedList方法将其转换成线程安全的容器后再使用：</li></ul> 
<pre><code class="prism language-java">	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> synchronizedList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>2、加锁：</li></ul> 
<pre><code class="prism language-java">	<span class="token keyword">synchronized</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ul><li>3、直接使用线程安全的集合，如CopyOnWriteArrayList，替换线程不安全的ArrayList：</li></ul> 
<pre><code class="prism language-java">	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="33_SystemarraycopyArrayscopyOf_543"></a>3.3 System.arraycopy和Arrays.copyOf</h4> 
<p>  其实Arrays.copyof()也是调用System.arraycopy()来实现的。</p> 
<ul><li><strong>1、System.arraycopy</strong><br>   在ArrayList的源码中，增删元素时，要移动元素，而移动数组内的元素都是通过System.arraycopy方法来实现的。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//Object src : 原数组</span>
	<span class="token comment">//int srcPos : 从元数据的起始位置开始</span>
	<span class="token comment">//Object dest : 目标数组</span>
	<span class="token comment">//int destPos : 目标数组的开始起始位置</span>
	<span class="token comment">//int length  : 要copy的数组的长度</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">arraycopy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> src<span class="token punctuation">,</span> <span class="token keyword">int</span> srcPos<span class="token punctuation">,</span> <span class="token class-name">Object</span> dest<span class="token punctuation">,</span> <span class="token keyword">int</span> destPos<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span>
</code></pre> 
<p>  看个例子：</p> 
<pre><code class="prism language-java">		<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arrs <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 2 3 4 5 6 7 8 9 10</span>
			
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//将arrs数组从下标为5的位置开始复制，总共复制5个元素，</span>
		<span class="token comment">//将上面的元素复制到arrs数组，起始位置的下标为0</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>arrs<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span>arrs<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//6 7 8 9 10 6 7 8 9 10</span>
</code></pre> 
<ul><li><strong>2、Arrays.copyOf</strong><br>   在数组进行扩容时，原有数组中元素的迁移是通过Arrays.copyOf方法来实现的：</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//original：要复制的原数组</span>
	<span class="token comment">//newLength：指定要建立的新数组长度，如果新数组的长度超过原数组的长度，则保留数组默认值</span>
	<span class="token comment">//返回值：新的数组对象，改变传回数组中的元素值，不会影响原来的数组</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">T</span> <span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token function">copyOf</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span> <span class="token punctuation">]</span> original<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> 
</code></pre> 
<p>  看个例子：</p> 
<pre><code class="prism language-java">		 	<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
		    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr3 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
		        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		    		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1 2 3 4 5 </span>
		    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr3<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
		        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>arr3<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1 2 3 4 5 0 0 0 0 0</span>
			<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="34_ArrayList15_591"></a>3.4 ArrayList的扩容因子为什么是1.5</h4> 
<p>  关于扩容因子，有一个很通俗的解释，扩容因子最适合范围为(1, 2)。<br>   为什么不取扩容固定容量呢？扩容的目的需要综合考虑这两种情况：</p> 
<blockquote> 
 <p>1、扩容容量不能太小，防止频繁扩容，频繁申请内存空间和数组频繁复制。<br> 2、扩容容量不能太大，需要充分利用空间，避免浪费过多空间。</p> 
</blockquote> 
<p>  为什么是1.5，而不是1.2，1.25，1.8或者1.75？因为<code>1.5可以充分利用移位操作，减少浮点数或者运算时间和运算次数</code>。</p> 
<pre><code class="prism language-java">	<span class="token comment">// 新容量计算</span>
	<span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="LinkedList_602"></a>LinkedList</h2> 
<h3><a id="LinkedList_603"></a>一、LinkedList介绍</h3> 
<p>  简单来说，LinkedList是一个双向链表：<br> <img src="https://images2.imgbox.com/7c/5c/JKWHKQsY_o.png" alt=""><br>   LinkedList中存放的不是普通的某个中类型的元素，而是<code>节点（Node）</code>。<br>   LinkedList通过prev、next将不连续的内存块串联起来使用。LinkedList是双向链表，除头节点的每一个元素都有prev（前驱指针）同时再指向它的上一个元素，除尾节点的每一个元素都有next（后继指针）同时再指向它的下一个元素。</p> 
<p>  LinkedList的继承关系：</p> 
<pre><code class="prism language-java">	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSequentialList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>
    	<span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre> 
<h4><a id="11_LinkedList_614"></a>1.1 LinkedList特点</h4> 
<ul><li><strong>1、底层实现是双向链表</strong><br>   LinkedList内部是一个双向链表（可以双向遍历）的实现，一个节点除了存储自身的数据外，还持有前、后两个节点的引用。</li><li><strong>2、增删快、查询慢</strong><br>   LinkedList具有对前后元素的引用，删除、插入节点很快，因为不需要移动其他元素，只需要改变部分节点的引用即可。<br>   LinkedList元素存储地址不连续，不支持随机访问，所以查询速度相比于ArrayList，是比较慢的。</li><li><strong>3、线程不安全</strong><br>   LinkedList是线程不安全的，也实现了fail-fast机制。</li><li><strong>4、元素有序可重复</strong><br>   LinkedList中的前后指针可以保证元素的顺序，因此可以重复。</li><li><strong>5、删除、添加操作时间复杂度为O(1)，查找时间复杂度为O(n)</strong><br>   查找函数有一定优化，容器会先判断查找的元素是离头部较近，还是尾部较近，来决定从头部开始遍历还是尾部开始遍历，因此推荐使用迭代器进行遍历。</li><li><strong>6、实现了Deque接口，因此也可以作为栈、队列和双端队列来使用</strong><br>   LinkedList在首尾两端都可以操作，因此可以充当栈、队列和双端队列的实现工具。</li><li><strong>7、可以存储Null值</strong><br>   Node中的item可以为null。</li></ul> 
<h4><a id="12_LinkedList_630"></a>1.2 LinkedList的使用</h4> 
<ul><li><strong>1、 构造方法</strong><br>   一般构造空链表。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//构造一个空链表</span>
	<span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//用已有的集合创建链表的构造方法</span>
	<span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> 
</code></pre> 
<ul><li><strong>2、添加元素</strong><br>   因为LinkedList是双向链表，在首尾都可以操作，所以从首部和尾部添加元素均可。添加元素的方法分为3类：addXxxx、offerXxx、push。<br>   addXxxx：可在首部尾部添加，无返回值。<br>   offerXxx：可在首部尾部添加，有返回值。<br>   push：在首部添加，无返回值。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//将元素追加到此链表末尾</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//在链表的指定位置插入元素</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> 
	<span class="token comment">//在链表的首部插入元素</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//将元素追加到链表末尾</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//将元素添加到链表的尾部</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//在链表的首部插入元素</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//在链表的末尾插入元素</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
	<span class="token comment">//在链表的头部添加元素</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>3、删除元素</strong><br>   因为LinkedList是双向链表，在首尾都可以操作，所以从首部和尾部删除元素均可。添加元素的方法分为3类：removeXxx、clear。<br>   removeXxx：删除后可以返回被删除的元素，也可以返回表示删除结果的boolean值。<br>   clear：删除所有元素，即清空链表。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删除链表中指定位置的元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
	<span class="token comment">//从链表中删除指定元素的第一个出现（如果存在）</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//从链表中删除并返回第一个元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//删除链表中指定元素的第一个出现（从头到尾遍历列表时）</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeFirstOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//从链表中删除并返回最后一个元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//删除链表中指定元素的最后一次出现（从头到尾遍历列表时）</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeLastOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//清空链表</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>4、检索并删除元素</strong><br>   删除首部/尾部的元素，并把该元素返回。分为pop、remove、pullXxx3类。<br>   pop/remove：删除并返回链表首部的元素。<br>   pullXxx：可以删除并返回首部/尾部的元素。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//检索并删除链表的首部元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//检索并删除链表的第一个元素，如果此LinkedList为空，则返回 null </span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//检索并删除链表的最后一个元素，如果链表为空，则返回 null </span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//删除并返回链表的第一个元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//检索并删除链表的首部元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>5、查找元素</strong><br>   仅查找、不删除元素，有element、getXxx、peekXxx3类。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//检索但不删除链表首部元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//返回链表指定位置的元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
	<span class="token comment">//返回链表中的第一个元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//返回链表中的最后一个元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//获取且不删除链表首部节点中的元素</span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	
	<span class="token comment">//检索但不删除链表的第一个元素，如果链表为空，则返回 null </span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//检索但不删除链表的最后一个元素，如果链表为空，则返回 null </span>
	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>6、检索元素位置</strong><br>   从前向后、从后向前，</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//返回链表中指定元素的第一次出现的索引，如果此列表不包含元素，则返回-1</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
	<span class="token comment">//返回链表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>7、替换元素</strong><br>   用指定的元素替换链表中指定位置的元素，并返回被替换的元素。</li></ul> 
<pre><code class="prism language-java">	<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>8、通用性方法</strong><br>   获取链表元素的个数等。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//返回链表中的元素数</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//判断链表中是否包含某个元素</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="LinkedList_737"></a>二、从源码理解LinkedList</h3> 
<p>  LinkedList里的变量：</p> 
<pre><code class="prism language-java">    <span class="token comment">//元素个数</span>
    <span class="token keyword">transient</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//链表的头结点</span>
	<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> first<span class="token punctuation">;</span>
    <span class="token comment">//链表的尾结点</span>
	<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>
</code></pre> 
<p>  可以看出：头结点和尾节点的节点类型，都是静态内部类Node。一个Node中包含前驱指针、节点值和后继指针三个部分：</p> 
<pre><code class="prism language-java">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//节点的值</span>
        <span class="token class-name">E</span> item<span class="token punctuation">;</span>
        <span class="token comment">//当前节点的后一个节点的引用</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
        <span class="token comment">//当前节点的前一个节点的引用</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>

        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="21LinkedList_764"></a>2.1创建LinkedList对象</h4> 
<p>  因为LinkedList是基于链表的，所以不需要指定初始容量。常用的是无参构造方法。</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  LinkedList还支持通过其他集合来创建对象。</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  addAll方法的实现为：依次取出集合中的元素，追加到链表的尾部，其实就是在first节点后面一直添加元素。</p> 
<h4><a id="22__778"></a>2.2 往链表里添加节点</h4> 
<p>  LinkedList的存储单元为一个名为Node的内部类，包含pre指针，next指针，和item元素。所以向List中添加元素时，会先将要添加的元素封装成Node，再添加到List中。</p> 
<ul><li><strong>1、将元素添加到链表尾部</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//add(E e)和addLast(E e)都是将元素添加到链表尾部，</span>
	<span class="token comment">//区别就是一个有boolean返回值，一个没有</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//用临时变量l存储尾节点</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token comment">//构造了一个新节点newNode，该节点的前一个节点为l，节点值为e，后一个节点为null</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将新创建的newNode作为尾节点</span>
        last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//如果添加newNode前，之前的尾节点为null，代表链表为bull，因此newNode同时也就成了首节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//否则将newNode追加到原来的尾节点之后</span>
        <span class="token keyword">else</span>
            l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//链表容量+1</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//链表操作数+1</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>add(E e) / addLast(E e)</code>方法的作用都是将元素追加到链表尾部，图示：<br> <img src="https://images2.imgbox.com/d4/3e/VvoRtlu5_o.png" alt=""></p> 
<ul><li><strong>2、将元素添加到链表首部</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//在链表的头部添加元素</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">linkFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">linkFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//创建临时变量f存储链表原来的首节点</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token comment">//构造一个新节点newNode，前一个节点为null，该节点值为e，后一个节点为f</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将新节点newNode作为first节点</span>
        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//如果原有first节点为null，则代表原来链表为null，因此新创建的节点newNode同时为头节点和尾节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//否则新节点newNode作为原来头结点的前一个节点</span>
        <span class="token keyword">else</span>
            f<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//链表元素数+1</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  图示：<br> <img src="https://images2.imgbox.com/93/47/8cxT1Lkg_o.png" alt=""></p> 
<ul><li><strong>3、将元素添加到链表的指定位置</strong></li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//校验index参数</span>
        <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//判断位置参数是否与链表长度一致，如果一致的话，直接将元素追加到链表末尾</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span>
            <span class="token function">linkLast</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//否则就添加到index位置，原来的index位置的元素成为新插入元素的后继元素</span>
        <span class="token keyword">else</span>
            <span class="token function">linkBefore</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//在指定节点succ之前插入指定元素e。指定节点succ不能为null</span>
    <span class="token keyword">void</span> <span class="token function">linkBefore</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> succ<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//获得指定节点的前驱节点</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token comment">//创建新节点newNode，其前驱节点为pred，节点值为e，后继节点为succ</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> succ<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//succ的前驱节点为新节点newNode</span>
        succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        
        <span class="token comment">//判断原来该位置节点的前驱节点是否为null，如果为null，代表原来该位置的节点succ为首节点</span>
        <span class="token comment">//因此，新创建的节点newNode就成为头节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token comment">//否则为原来该位置节点的前驱节点的后继节点</span>
        <span class="token keyword">else</span>
            pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  图示：<br> <img src="https://images2.imgbox.com/ab/4a/zxM7b29W_o.png" alt=""></p> 
<ul><li><strong>4、将另一个集合的元素添加到链表中</strong><br>   上面的方法都是添加单个元素，这两个方法是添加集合中的多个元素，因此主要的差异就是：将添加单个元素的操作循环进行了多次。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//在链表的末尾添加集合的全部元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">addAll</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//在链表的任意位置插入集合的全部元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//检验index参数合法性</span>
        <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//将集合转化成了数组</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取要插入集合的元素个数numNew </span>
        <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token comment">//pred代表要插入位置的前驱节点，succ代表要插入位置的节点</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred<span class="token punctuation">,</span> succ<span class="token punctuation">;</span>
        <span class="token comment">//如果index和链表的长度相等，那么此时的pred就是原有的last节点，succ为null</span>
        <span class="token comment">//因为链表在get(index)元素时，下标也是从0开始的</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            succ <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            pred <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token comment">//否则succ就是原来index位置上的节点，pred就是succ的前驱节点</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            succ <span class="token operator">=</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		<span class="token comment">//迭代的插入元素过程</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span> 
            <span class="token class-name">E</span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
            <span class="token comment">//将集合中的元素取出来，作为新创建的节点的节点值，pred代表要插入位置的前驱节点，后继节点为null</span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//如果pred为null，代表要插入的位置前面没有节点了，所以该节点就要成为头结点</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
            <span class="token comment">//否则前一个节点的后继节点是新节点</span>
            <span class="token keyword">else</span>
                pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
            <span class="token comment">//至关重要的一步，将新插入的节点作为pred节点，以便继续向后增加节点</span>
            pred <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		<span class="token comment">//当succ==null,也就是新添加的节点位于LinkedList集合的最后一个元素的后面，</span>
		<span class="token comment">//那么在之前添加的最后一个元素pred就成为了尾节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>succ <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            last <span class="token operator">=</span> pred<span class="token punctuation">;</span>
        <span class="token comment">//否则succ是pred的后继节点，pred是succ的前驱节点</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            pred<span class="token punctuation">.</span>next <span class="token operator">=</span> succ<span class="token punctuation">;</span>
            succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> pred<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>5、在首部/尾部添加单个元素，并返回元素添加的结果</strong><br>   添加单个元素，相比上面的添加单个元素的方法，多了boolean型的返回值。</li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//在链表尾部添加元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//在链表首部添加元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//在链表尾部添加元素</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">addLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="23__955"></a>2.3 从链表中删除节点</h4> 
<ul><li><strong>1、删除指定位置的节点</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//按索引删除指定元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//检验index参数是否合法，不合法就抛出IndexOutOfBoundsException</span>
        <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">checkElementIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//删除节点</span>
    <span class="token class-name">E</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// assert x != null;</span>
        <span class="token comment">//取出该节点的数据（用于方法最后作为返回值）</span>
        <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
        <span class="token comment">//取出该节点的前后节点：prev、next </span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
		<span class="token comment">//判断该节点的前驱节点是否存在，不存在的话，该节点的后继节点就是first节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            first <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token comment">//否则就将next节点（要删除的节点的后继节点）赋于原有的前驱节点的后继节点，</span>
        <span class="token comment">//index位置的前驱节点置空</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            prev<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
            x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		<span class="token comment">//判断该节点的后继节点是否存在,如果为空，要删除的节点的前驱节点就变成last节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            last <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        <span class="token comment">//否则后继节点的前驱节点直接prev，index位置的后继节点置空</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            next<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
            x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
		<span class="token comment">//将index位置节点的数据置空。这样原有index位置节点的前驱、后继指针及数据</span>
		<span class="token comment">//全都为空，便于GC回收，最后size--，返回原有位置的数据</span>
        x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        size<span class="token operator">--</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>2、删除第一次出现的指定节点</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删掉第一个出现指定数据的节点</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeFirstOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//判断要删除的元素是否为null</span>
    	<span class="token comment">//如果是null，删除null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token comment">//如果不是null，则删除对应的元素</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>remove(int index)、removeFirstOccurrence(Object o) /、remove(Object o)</code>，这些方法可以理解为删除链表中间某个节点，图示：<br> <img src="https://images2.imgbox.com/d9/65/vAC1KJCz_o.png" alt=""></p> 
<ul><li><strong>3、删除链表首部节点</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删除链表首部元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//删除链表首部元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//删除链表首部元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// assert f == first &amp;&amp; f != null;</span>
        <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> f<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token comment">//将原来first节点的数据域和next指针都置空</span>
        f<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        f<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
        first <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token comment">//判断原有first的next节点是否为空，如果为空，说明此时链表已空，last = null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//否则不处理last节点，只需将原来的next节点的前驱指针置空即可（这样这个节点就变成了first节点）</span>
        <span class="token keyword">else</span>
            next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        size<span class="token operator">--</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>pop() / remove() / removeFirst()</code>这些方法的作用是删除链表首部元素，图示：<br> <img src="https://images2.imgbox.com/f3/94/B2FT1EBq_o.png" alt=""></p> 
<ul><li><strong>4、删除链表尾部节点</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删除最后一个节点</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// assert l == last &amp;&amp; l != null;</span>
        <span class="token comment">//先保存一下last节点的前驱节点，然后将last节点的数据和前驱指针置空</span>
        <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> l<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        l<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        l<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
        last <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        <span class="token comment">//判断前驱节点是否为空，如果是的话，就将first节点也置空（此时为空链表）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//否则将原有前驱节点的后继指针置空</span>
        <span class="token keyword">else</span>
            prev<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//size减1</span>
        size<span class="token operator">--</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//返回原有last节点值</span>
        <span class="token keyword">return</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>removeLast()</code>方法的作用是删除链表尾部元素，与上面的过程相似，不过操作的位置是链表的尾部，图示：<br> <img src="https://images2.imgbox.com/59/62/vRGLNjvI_o.png" alt=""></p> 
<ul><li><strong>5、删除最后一次出现的指定节点</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//删除最后一个出现的指定数据</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeLastOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//如果指定元素为null，就从后向前删除null</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token comment">//如果指定元素不为null，就从后向前删除对应的元素</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>6、清空链表</strong></li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//每个节点的前驱、后继指针和数据域全部清空，置为null</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            x <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        first <span class="token operator">=</span> last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//size置为0</span>
        size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>clear()</code>方法的作用是清空链表，图示：<br> <img src="https://images2.imgbox.com/5d/68/9JVcul2H_o.png" alt=""></p> 
<h4><a id="24__1148"></a>2.4 获取链表中的节点</h4> 
<ul><li><strong>1、获取链表指定位置节点中的元素</strong></li></ul> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//检验index参数合法</span>
        <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//按索引获取对应元素</span>
        <span class="token keyword">return</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>2、获取链表首部/尾部节点中的元素</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//获取首节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//获取首节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//获取尾节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  可以看出：在链表为空时，获取元素会抛出NoSuchElementException。</p> 
<ul><li><strong>3、获取且不删除链表指定位置节点中的元素</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//获取且不删除链表首部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//获取且不删除链表首部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
	<span class="token comment">//获取且不删除链表尾部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>4、获取且删除链表指定位置节点中的元素</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//获取且删除链表首部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//获取且删除链表首部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//获取且删除链表尾部节点中的元素</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="25__1216"></a>2.5 更新元素</h4> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//检验index参数合法性</span>
        <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//取出旧的节点值，替换为新的节点值</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">E</span> oldVal <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token comment">//将旧的节点值返回</span>
        <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  此处有个node(index)方法，作用是根据索引查找链表中对应位置的节点：</p> 
<pre><code class="prism language-java">    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">node</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//判断该索引在链表的前半部分还是在后半部分</span>
		<span class="token comment">//如果在前半部分，从前向后检索</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            <span class="token keyword">return</span> x<span class="token punctuation">;</span>
        <span class="token comment">//如果在后半部分，从后向前检索</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> index<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
                x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
            <span class="token keyword">return</span> x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>  <code>node(index)</code>方法是根据索引获取链表中元素的方法。由于LinkedList是双向链表，存在从前向后、从后向前两种遍历方式。所以在获取某个位置元素时，就可以根据这个元素的索引在前半部还是后半部来决定采用哪种方式获取元素，这也就是node方法的全部，图示：<br> <img src="https://images2.imgbox.com/62/5a/yS7Ox4P5_o.png" alt=""></p> 
<h4><a id="26__1250"></a>2.6 查找某个元素在链表中的位置</h4> 
<ul><li><strong>1、从前向后检索某个元素的所在位置</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//从first节点开始，从前向后检索某个元素所在位置</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//判断要检索的元素是否为null，是的话检索null，否则检索元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
                index<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
                index<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>2、从后向前检索某个元素的所在位置</strong></li></ul> 
<pre><code class="prism language-java">	<span class="token comment">//从last节点开始，从后向前检索某个元素所在位置</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> size<span class="token punctuation">;</span>
        <span class="token comment">//判断要检索的元素是否为null，是的话检索null，否则检索元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                index<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                index<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4eec5aa175a4ed0087d293c123e692f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux环境下部署Tomcat(详细图文)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec06551008b60f8055e1a5f6ca4bab6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java项目性能优化（MyBatis中开启查询缓存及flushCache与useCache的使用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>