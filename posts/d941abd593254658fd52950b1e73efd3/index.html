<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python PEP8 基本常用规范 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python PEP8 基本常用规范" />
<meta property="og:description" content="PEP8规范总结 PEP8 是什么呢，简单说就是一种编码规范，是为了让代码“更好看”，更容易被阅读。 具体有这些规范，参考 PEP 8 –Style Guide for Python Code.当然也可以使用Pycharm检查或使用pylint.下面是规范总结
缩进 不要使用 tab 缩进使用任何编辑器写 Python，请把一个 tab 展开为 4 个空格绝对不要混用 tab 和空格，否则容易出现 IndentationError 空格 在 list, dict, tuple, set, 参数的 逗号 “,” 后面加一个空格在 dict 的 “:” 后面加一个空格在注释符号 # 后面加一个空格，但是 #!/usr/bin/python 的 # 后不能有空格操作符两端加一个空格，如 &#43;, -, *, /, |, &amp;, =接上一条，在参数列表里的 = 两端不需要空格括号（(), {}, []）内的两端不需要空格 空行 function 和 class 顶上两个空行class 的 method 之间一个空行函数内逻辑无关的段落之间空一行，不要过度使用空行不要把多个语句写在一行，然后用 “;” 隔开if/for/while 语句中，即使执行语句只有一句，也要另起一行 换行 每一行代码控制在 80 字符以内使用 \ 或 () 控制换行，举例： def foo(first, second, third, fourth, fifth, sixth, and_some_other_very_long_param): user = User." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d941abd593254658fd52950b1e73efd3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-09T10:21:25+08:00" />
<meta property="article:modified_time" content="2020-08-09T10:21:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python PEP8 基本常用规范</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="PEP8_0"></a>PEP8规范总结</h2> 
<blockquote> 
 <p>PEP8 是什么呢，简单说就是一种编码规范，是为了让代码“更好看”，更容易被阅读。 具体有这些规范，参考 PEP 8 –<a href="https://www.python.org/dev/peps/pep-0008/" rel="nofollow">Style Guide for Python Code</a>.当然也可以使用Pycharm检查或使用pylint.下面是规范总结</p> 
</blockquote> 
<h3><a id="_4"></a>缩进</h3> 
<ul><li>不要使用 tab 缩进</li><li>使用任何编辑器写 Python，请把一个 tab 展开为 4 个空格</li><li>绝对不要混用 tab 和空格，否则容易出现 IndentationError</li></ul> 
<h3><a id="_10"></a>空格</h3> 
<ul><li>在 list, dict, tuple, set, 参数的 逗号 “,” 后面加一个空格</li><li>在 dict 的 “:” 后面加一个空格</li><li>在注释符号 # 后面加一个空格，但是 #!/usr/bin/python 的 # 后不能有空格</li><li>操作符两端加一个空格，如 +, -, *, /, |, &amp;, =</li><li>接上一条，在参数列表里的 = 两端不需要空格</li><li>括号（(), {}, []）内的两端不需要空格</li></ul> 
<h3><a id="_19"></a>空行</h3> 
<ul><li>function 和 class 顶上两个空行</li><li>class 的 method 之间一个空行</li><li>函数内逻辑无关的段落之间空一行，不要过度使用空行</li><li>不要把多个语句写在一行，然后用 “;” 隔开</li><li>if/for/while 语句中，即使执行语句只有一句，也要另起一行</li></ul> 
<h3><a id="_27"></a>换行</h3> 
<ul><li>每一行代码控制在 80 字符以内</li><li>使用 \ 或 () 控制换行，举例：</li></ul> 
<pre><code>def foo(first, second, third, fourth, fifth,
        sixth, and_some_other_very_long_param):
    user = User.objects.filter_by(first=first, second=second, third=third) \
        .skip(100).limit(100) \
        .all()

text = ('Long strings can be made up '
        'of several shorter strings.')
</code></pre> 
<h3><a id="_43"></a>命名</h3> 
<p><strong>总体原则，新编代码必须按下面命名风格进行，现有库的编码尽量保持风格。<br> 1 尽量单独使用小写字母‘l’，大写字母‘O’等容易混淆的字母。<br> 2 模块命名尽量短小，使用全部小写的方式，可以使用下划线。<br> 3 包命名尽量短小，使用全部小写的方式，不可以使用下划线。<br> 4 类的命名使用CapWords的方式，模块内部使用的类采用_CapWords的方式。<br> 5 异常命名使用CapWords+Error后缀的方式。<br> 6 全局变量尽量只在模块内有效，类似C语言中的static。实现方法有两种，一是__all__机制;二是前缀一个下划线。<br> 7 函数命名使用全部小写的方式，可以使用下划线。<br> 8 常量命名使用全部大写的方式，可以使用下划线。<br> 9 类的属性（方法和变量）命名使用全部小写的方式，可以使用下划线。<br> 9 类的属性有3种作用域public、non-public和subclass API，可以理解成C++中的public、private、protected，non-public属性前，前缀一条下划线。<br> 11 类的属性若与关键字名字冲突，后缀一下划线，尽量不要使用缩略等其他方式。<br> 12 为避免与子类属性命名冲突，在类的一些属性前，前缀两条下划线。比如：类Foo中声明__a,访问时，只能通过Foo._Foo__a，避免歧义。如果子类也叫Foo，那就无能为力了。<br> 13 类的方法第一个参数必须是self，而静态方法第一个参数必须是cls。</strong></p> 
<h3><a id="import_60"></a>import</h3> 
<ul><li>所有 import 尽量放在文件开头，在 docstring 下面，其他变量定义的上面</li><li>不要使用 from foo imort *</li><li>import 需要分组，每组之间一个空行，每个分组内的顺序尽量采用字典序，分组顺序是：</li></ul> 
<ol><li>标准库</li><li>第三方库</li><li>本项目的 package 和 module</li></ol> 
<p>不要使用隐式的相对导入（implicit relative imports），可是使用显示的相对导入（explicit relative imports），如 from …utils import parse，最好使用全路径导入（absolute imports） 对于不同的 package，一个 import 单独一行，同一个 package/module 下的内容可以写一起：</p> 
<pre><code># bad
import sys, os, time

# good
import os
import sys
import time

# ok
from flask import Flask, render_template, jsonify
 
</code></pre> 
<ul><li>为了避免可能出现的命名冲突，可以使用 as 或导入上一级命名空间</li><li>不要出现循环导入(cyclic import)</li></ul> 
<h3><a id="_89"></a>注释</h3> 
<ul><li>文档字符串 docstring, 是 package, module, class, method, function 级别的注释，可以通过 doc 成员访问到，注释内容在一对 “”" 符号之间</li><li>function, method 的文档字符串应当描述其功能、输入参数、返回值，如果有复杂的算法和实现，也需要写清楚</li><li>不要写错误的注释，不要无谓的注释</li></ul> 
<pre><code># bad 无谓的注释
x = x + 1       # increase x by 1

# bad 错误的注释
x = x - 1       # increase x by 1 
</code></pre> 
<ul><li>优先使用英文写注释，英文不好全部写中文，否则更加看不懂</li></ul> 
<h3><a id="_105"></a>异常</h3> 
<ul><li>不要轻易使用 try/except</li><li>except 后面需要指定捕捉的异常，裸露的 except 会捕捉所有异常，意味着会隐藏潜在的问题</li><li>可以有多个 except 语句，捕捉多种异常，分别做异常处理</li><li>使用 finally 子句来处理一些收尾操作</li><li>try/except 里的内容不要太多，只在可能抛出异常的地方使用，如：</li></ul> 
<pre><code># bad
try:
    user = User()
    user.name = "leon"
    user.age = int(age) # 可能抛出异常
    user.created_at = datetime.datetime.utcnow()

    db.session.add(user)
    db.session.commit() # 可能抛出异常
except:
    db.session.rollback()

# better
try:
    age = int(age)
except (TypeError, ValueError):
    return # 或别的操作

user = User()
user.name = "leon"
user.age = age
user.created_at = datetime.datetime.utcnow()
db.session.add(user)

try:
    db.session.commit()
except sqlalchemy.exc.SQLAlchemyError: # 或者更具体的异常
    db.session.rollback()
finally:
    db.session.close()
</code></pre> 
<ul><li>从 Exception 而不是 BaseException 继承自定义的异常类</li></ul> 
<h3><a id="Class_148"></a>Class（类）</h3> 
<ul><li>显示的写明父类，如果不是继承自别的类，就继承自 object 类</li><li>使用 super 调用父类的方法</li><li>支持多继承，即同时有多个父类，建议使用 Mixin</li></ul> 
<h3><a id="_154"></a>字符串</h3> 
<ul><li>使用字符串的 join 方法拼接字符串</li><li>使用字符串类型的方法，而不是 string 模块的方法</li><li>使用 startswith 和 endswith 方法比较前缀和后缀</li><li>使用 format 方法格式化字符串</li></ul> 
<h3><a id="_161"></a>比较</h3> 
<ul><li>空的 list, str, tuple, set, dict 和 0, 0.0, None 都是 False</li><li>使用 if somelist 而不是 if len(somelist) 判断某个 list 是否为空，其他类型同理</li><li>使用 is 和 is not 与单例（如 None）进行比较，而不是用 == 和 !=</li><li>使用 if a is not None 而不是 if not a is None</li><li>用 isinstance 而不是 type 判断类型</li><li>不要用 == 和 != 与 True 和 False 比较（除非有特殊情况，如在 sqlalchemy 中可能用到）</li><li>使用 in 操作：</li></ul> 
<ol><li>用 key in dict 而不是 dict.has_key()</li></ol> 
<pre><code># bad
if d.has_key(k):
    do_something()

# good
if k in d:
    do_something()
</code></pre> 
<ol><li>用 set 加速 “存在性” 检查，list 的查找是线性的，复杂度 O(n)，set 底层是 hash table, 复杂度 O(1)，但用 set 需要比 list 更多内存空间</li></ol> 
<h3><a id="_185"></a>其他</h3> 
<ul><li>使用列表表达式（list comprehension），字典表达式(dict comprehension, Python 2.7+) 和生成器(generator)</li><li>dict 的 get 方法可以指定默认值，但有些时候应该用 [] 操作，使得可以抛出 KeyError</li><li>使用 for item in list 迭代 list, for index, item in enumerate(list) 迭代 list 并获取下标</li><li>使用内建函数 sorted 和 list.sort 进行排序</li><li>适量使用 map, reduce, filter 和 lambda，使用内建的 all, any 处理多个条件的判断</li><li>使用 defaultdict (Python 2.5+), Counter(Python 2.7+) 等 “冷门” 但好用的标准库算法和数据结构</li><li>使用装饰器(decorator)</li><li>使用 with 语句处理上下文</li><li>有些时候不要对类型做太过严格的限制，利用 Python 的鸭子类型（Duck Type）特性</li><li>使用 logging 记录日志，配置好格式和级别</li><li>了解 Python 的 Magic Method：A Guide to Python’s Magic Methods, Python 魔术方法指南</li><li>阅读优秀的开源代码，如 Flask 框架, Requests for Humans</li><li>不要重复造轮子，查看标准库、PyPi、Github、Google 等使用现有的优秀的解决方案</li></ul> 
<hr> 
<p>详细可以参考 Google 开源项目风格指南 ，Python风格规范<br> https://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_style_rules/</p> 
<hr> 
<p>参考文章：</p> 
<p>https://my.oschina.net/u/2474096/blog/2248957?from=groupmessage&amp;isappinstalled=0<br> https://www.cnblogs.com/jiangchunsheng/p/10846052.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d003e2ff1bbefb1d62f17c02da775e04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">学习笔记：计算机组成原理之系统总线</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7840a8860dcfa26ebd979ab9bf1220fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CC2530定时器T1查询和T3中断</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>