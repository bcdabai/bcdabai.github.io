<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为设备802.1X认证（认证点在汇聚层交换机） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为设备802.1X认证（认证点在汇聚层交换机）" />
<meta property="og:description" content="1.配置网络互通
（1）配置终端IP地址
（2）创建WLAN并允许通过vlan，保证网络畅通
[LSW1]vlan batch 11 12
[LSW1-Vlanif11]ip add 10.1.11.1 24
[LSW1-Vlanif12]ip add 10.1.12.1 24
[LSW1-GigabitEthernet0/0/1]port link-type access
[LSW1-GigabitEthernet0/0/1]port default vlan 11
[LSW1-GigabitEthernet0/0/2]port link-type access
[LSW1-GigabitEthernet0/0/2]port default vlan 12
（3）为保证用户能够通过802.1X认证，则务必在LAN Switch上配置EAP报文透传功能
[LSW2]l2protocol-tunnel user-defined-protocol 802.1x protocol-mac 0180-c200-0003 group-mac 0100-0000-0002
[LSW2-GigabitEthernet0/0/1]l2protocol-tunnel user-defined-protocol 802.1x enable
[LSW2-GigabitEthernet0/0/2]l2protocol-tunnel user-defined-protocol 802.1x enable
[LSW2-GigabitEthernet0/0/3]l2protocol-tunnel user-defined-protocol 802.1x enable
2.配置AAA
（1）配置radius服务器模板
[LSW1]radius-server template abc1
[LSW1-radius-abc1]radius-server authentication 10.1.11.11 1812
[LSW1-radius-abc1]radius-server accounting 10.1.11.11 1813
[LSW1-radius-abc1]radius-server shared-key cipher ABCabc@123
（2）创建aaa认证方案，并配置认证方式为radius
[LSW1]aaa" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1e2c4c2b485e110b513e517ddb877125/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-02T21:04:00+08:00" />
<meta property="article:modified_time" content="2021-09-02T21:04:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为设备802.1X认证（认证点在汇聚层交换机）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/0b/1d/Jcwdpqzm_o.png" alt="在这里插入图片描述"></p> 
<p>1.配置网络互通<br> （1）配置终端IP地址<br> <img src="https://images2.imgbox.com/89/07/SknRBtPM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/df/7b/BGvi0hed_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5e/fb/A3bWQVBw_o.png" alt="在这里插入图片描述"></p> 
<p>（2）创建WLAN并允许通过vlan，保证网络畅通<br> [LSW1]vlan batch 11 12<br> [LSW1-Vlanif11]ip add 10.1.11.1 24<br> [LSW1-Vlanif12]ip add 10.1.12.1 24<br> [LSW1-GigabitEthernet0/0/1]port link-type access<br> [LSW1-GigabitEthernet0/0/1]port default vlan 11<br> [LSW1-GigabitEthernet0/0/2]port link-type access<br> [LSW1-GigabitEthernet0/0/2]port default vlan 12<br> （3）为保证用户能够通过802.1X认证，则务必在LAN Switch上配置EAP报文透传功能<br> [LSW2]l2protocol-tunnel user-defined-protocol 802.1x protocol-mac 0180-c200-0003 group-mac 0100-0000-0002<br> [LSW2-GigabitEthernet0/0/1]l2protocol-tunnel user-defined-protocol 802.1x enable<br> [LSW2-GigabitEthernet0/0/2]l2protocol-tunnel user-defined-protocol 802.1x enable<br> [LSW2-GigabitEthernet0/0/3]l2protocol-tunnel user-defined-protocol 802.1x enable<br> 2.配置AAA<br> （1）配置radius服务器模板<br> [LSW1]radius-server template abc1<br> [LSW1-radius-abc1]radius-server authentication 10.1.11.11 1812<br> [LSW1-radius-abc1]radius-server accounting 10.1.11.11 1813<br> [LSW1-radius-abc1]radius-server shared-key cipher ABCabc@123<br> （2）创建aaa认证方案，并配置认证方式为radius<br> [LSW1]aaa<br> [LSW1-aaa]authentication-scheme abc1<br> [LSW1-aaa-authen-abc1]authentication-mode radius<br> [LSW1-aaa]accounting-scheme abc1<br> [LSW1-aaa-accounting-abc1]accounting-mode radius<br> （3）创建认证域abc1.com，并绑定aaa认证方案和radius服务器模板<br> [LSW1-aaa]domain abc1.com<br> [LSW1-aaa-domain-abc1.com]authentication-scheme abc1<br> [LSW1-aaa-domain-abc1.com]radius-server abc1<br> （4）测试用户是否能够通过radius模板的认证<br> [LSW1]test-aaa test ABCabc@123 radius-template abc1<br> 显示：Info: Account test succeed，表示通过认证<br> 3.配置802.1X认证<br> （1）将配置模式切换成统一模式：缺省情况下，NAC配置模式即为统一模式，传统模式切换到统一模式后，管理员必须保存配置并重启设备，新配置模式的各项功能才能生效。<br> [LSW1]authentication unified-mode<br> （2）配置802.1X接入模板<br> [LSW1] dot1x-access-profile name abc1<br> （3）配置认证模板，并绑定802.1X模板，指定认证模板下用户强制认证域，指定用户接入模式为多用户单独认证，最大接入用户模式为100<br> [LSW1] authentication-profile name abc1<br> [Switch-authen-profile-abc1] dot1x-access-profile abc1<br> [Switch-authen-profile-abc1] access-domain abc1.com force<br> [Switch-authen-profile-abc1] authentication mode multi-authen max-user 100<br> （4）在接口上绑定认证模板，使能802.1X认证<br> [LSW1-GigabitEthernet0/0/2]authentication- profile abc1<br> （5）配置指定VLAN内用户下线探测报文的源IP地址和源MAC地址。建议用户下线探测报文的源IP地址和源MAC地址配置为用户网关的IP地址和MAC地址<br> [LSW1]access-user arp-detect vlan 12 ip-address 10.1.12.1 mac-address 2222-1111-1234<br> 4.验证配置结果<br> （1）用户在终端上启动802.1X客户端，输入用户名和密码，开始认证。<br> （2）如果用户输入的用户名和密码验证正确，客户端页面会显示认证成功信息。用户即可访问网络。<br> （3）用户上线后，管理员可在设备上执行命令display access-user access-type dot1x查看在线802.1X用户信息。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/053bb805d051ceeca3e3653597d77af4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[C&#43;&#43;] 智能指针</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56e8c2c9d7e179ca68e7af27f2e1f3b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Python】一文弄懂python装饰器（附源码例子）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>