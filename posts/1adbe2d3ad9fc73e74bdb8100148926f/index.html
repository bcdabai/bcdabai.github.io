<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最全的LBS手机定位技术说明 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="最全的LBS手机定位技术说明" />
<meta property="og:description" content="随着手机技术的发展定位方式也发生了很大的变化。获取手机位置有很多种方式。
第一种：CELL-ID定位原理
通过移动网络获取设备当前所在的Cell信息来获取设备当前位置。当设备位置更新设备会向当前服务小区报告当前位置信息，Cell ID定位的精度随着小区的覆盖范围而变化，从几十米到上百米不等。Cell ID是目前最容易使用的定位方式。只要获取手机访问的基站编号，在通过后台服务得到基站的坐标那就能获得手机的大体位置了。
第二种：AFLT定位原理
AFLT（Advanced Forword Link Trilateration） 是在定位操作时同时监听多个基站的信号，利用信号的延时和强度信号来确定手机到附件基站的距离，最后用三角定位算法计算用户的位置。一般在城市里基站的覆盖往往是重叠没有盲区的。所以手机往往会有多个基站的信息。这也是为什么基站定位城市比农村要准确很多的原因。
第三种：基站和GPS的混合定位（AGPS）
第四种：基站&#43; WIFI&#43; GPS的混合定位。
这种定位方式是目前最常用的定位方式，在使用手机地图通常是提示你打开GPS或者Wifi。如果要是在室外打开任意一个选项都可以大大提高定位精度。 特别是打开wifi会瞬间提高定位精度。目前手机地图的定位方式基本都是这样的混合定位方式。原来也很简单就是IP定位，在你手机接入wifi时回获取到路由的硬件地址，如果你手机在线就可以通过这唯一地址得到路由的位置坐标，在通过对wifi的强度信息获取你的距离信息组后提高你的位置精度。
手机查看基站信息的方法
1. Android智能机：在拨打电话界面输入*#*#4636#*#* 查看相应的基站信息，一般为16进制，请选择1进制进行查询
2. IPhone：在拨打电话界面输入*3001#12345#*查看相应的基站信息
查出CID后你可以尝试在 http://www.minigps.net/cellsearch.html 定位一下自己手机的位置。
输入*#*#4636#*#* 选择-&gt;Phone information
--------------------- 作者：立玉 来源：CSDN 原文：https://blog.csdn.net/lbsnews/article/details/24660247 方法1：
用浏览器打开http://www.minigps.net/cellsearch.html，然后输入lac和cid信息(mcc和mnc可以填0)，如果数据正确就可以获得相应的经纬度
方法2：
发送HTTP请求到http://www.open-electronics.org/celltrack/cell.php?hex=0&amp;lac=&lt;lac&gt;&amp;cid=&lt;cid&gt;，可以获得一个html页面内容，通过正则进行解析，也可以获得经纬度信息
基站定位描述
基站定位一般应用于手机用户，手机基站定位服务又叫做移动位置服务（LBS——Location Based Service），它是通过电信移动运营商的网络（如GSM网）获取移动终端用户的位置信息（经纬度坐标），在电子地图平台的支持下，为用户提供相应服务的一种增值业务。
基站定位的大致原理为：移动电话测量不同基站的下行导频信号，得到不同基站下行导频的TOA（Time of Arrival，到达时刻）或TDOA(Time Difference of Arrival，到达时间差)，根据该测量结果并结合基站的坐标，一般采用三角公式估计算法，就能够计算出移动电话的位置。其精度很大程度依赖于基站的分布及覆盖范围的大小，有时误差会超过一公里，实际的位置估计算法需要考虑多基站(3个或3个以上)定位的情况，因此算法要复杂很多。一般而言，移动台测量的基站数目越多，测量精度越高，定位性能改善越明显。
怎样才能基站定位？
基站定位一般应用在手机端，所以必须获取到基站信息才能进行基站的定位；基站信息
包含：MNC,LAC,CID (Cell) 三个参数；如果获取到以上三个参数即可以通过基站数据库，实现对应基站的位置进行定位，直接地图上显示出基站的位置；
-MCC，Mobile Country Code，移动国家代码（中国的为460）；
-MNC，Mobile Network Code，移动网络号码（中国移动为00，中国联通为01）；
-LAC，Location Area Code，位置区域码；
-CID，Cell Identity，基站编号，是个16位的数据（范围是0到65535）。
如何获取基站信息？
在GSM模块中，可以通过AT指令获取基站信息，以使用UBLOX的GSM模块为例，
当设备注册到移动网络时，按以下步骤即可获取对应的基站信息。
1. 获取MCC和NNC
AT&#43;COPS=3,2 //设置MCC和NNC输出格式为数字" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1adbe2d3ad9fc73e74bdb8100148926f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-24T13:41:13+08:00" />
<meta property="article:modified_time" content="2019-07-24T13:41:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最全的LBS手机定位技术说明</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>随着手机技术的发展定位方式也发生了很大的变化。获取手机位置有很多种方式。</p> 
<p>第一种：CELL-ID定位原理<br>     通过移动网络获取设备当前所在的Cell信息来获取设备当前位置。当设备位置更新设备会向当前服务小区报告当前位置信息，Cell ID定位的精度随着小区的覆盖范围而变化，从几十米到上百米不等。Cell ID是目前最容易使用的定位方式。只要获取手机访问的基站编号，在通过后台服务得到基站的坐标那就能获得手机的大体位置了。</p> 
<p>第二种：AFLT定位原理<br>       AFLT（Advanced Forword Link Trilateration） 是在定位操作时同时监听多个基站的信号，利用信号的延时和强度信号来确定手机到附件基站的距离，最后用三角定位算法计算用户的位置。一般在城市里基站的覆盖往往是重叠没有盲区的。所以手机往往会有多个基站的信息。这也是为什么基站定位城市比农村要准确很多的原因。</p> 
<p>第三种：基站和GPS的混合定位（AGPS）</p> 
<p>第四种：基站+ WIFI+ GPS的混合定位。<br> 这种定位方式是目前最常用的定位方式，在使用手机地图通常是提示你打开GPS或者Wifi。如果要是在室外打开任意一个选项都可以大大提高定位精度。 特别是打开wifi会瞬间提高定位精度。目前手机地图的定位方式基本都是这样的混合定位方式。原来也很简单就是IP定位，在你手机接入wifi时回获取到路由的硬件地址，如果你手机在线就可以通过这唯一地址得到路由的位置坐标，在通过对wifi的强度信息获取你的距离信息组后提高你的位置精度。</p> 
<p>手机查看基站信息的方法<br> 1. Android智能机：在拨打电话界面输入*#*#4636#*#* 查看相应的基站信息，一般为16进制，请选择1进制进行查询</p> 
<p>2. IPhone：在拨打电话界面输入*3001#12345#*查看相应的基站信息</p> 
<p>查出CID后你可以尝试在 http://www.minigps.net/cellsearch.html  定位一下自己手机的位置。</p> 
<p><br> 输入*#*#4636#*#*    选择-&gt;Phone information<br>     <br> --------------------- <br> 作者：立玉 <br> 来源：CSDN <br> 原文：https://blog.csdn.net/lbsnews/article/details/24660247 </p> 
<p> </p> 
<p>方法1：<br> 用浏览器打开http://www.minigps.net/cellsearch.html，然后输入lac和cid信息(mcc和mnc可以填0)，如果数据正确就可以获得相应的经纬度</p> 
<p>方法2：<br> 发送HTTP请求到http://www.open-electronics.org/celltrack/cell.php?hex=0&amp;lac=&lt;lac&gt;&amp;cid=&lt;cid&gt;，可以获得一个html页面内容，通过正则进行解析，也可以获得经纬度信息</p> 
<p> </p> 
<p><strong>基站定位描述</strong></p> 
<p>基站定位一般应用于手机用户，手机基站定位服务又叫做移动位置服务（LBS——Location Based Service），它是通过电信移动运营商的网络（如GSM网）获取移动终端用户的位置信息（经纬度坐标），在电子地图平台的支持下，为用户提供相应服务的一种增值业务。</p> 
<p>基站定位的大致原理为：移动电话测量不同基站的下行导频信号，得到不同基站下行导频的TOA（Time of Arrival，到达时刻）或TDOA(Time Difference of Arrival，到达时间差)，根据该测量结果并结合基站的坐标，一般采用三角公式估计算法，就能够计算出移动电话的位置。其精度很大程度依赖于基站的分布及覆盖范围的大小，有时误差会超过一公里，实际的位置估计算法需要考虑多基站(3个或3个以上)定位的情况，因此算法要复杂很多。一般而言，移动台测量的基站数目越多，测量精度越高，定位性能改善越明显。</p> 
<p> </p> 
<p><strong>怎样才能基站定位？</strong></p> 
<p>基站定位一般应用在手机端，所以必须获取到基站信息才能进行基站的定位；基站信息</p> 
<p>包含：MNC,LAC,CID (Cell) 三个参数；如果获取到以上三个参数即可以通过基站数据库，实现对应基站的位置进行定位，直接地图上显示出基站的位置；</p> 
<p>-MCC，Mobile Country Code，移动国家代码（中国的为460）；</p> 
<p>-MNC，Mobile Network Code，移动网络号码（中国移动为00，中国联通为01）；</p> 
<p>-LAC，Location Area Code，位置区域码；</p> 
<p>-CID，Cell Identity，基站编号，是个16位的数据（范围是0到65535）。</p> 
<p> </p> 
<p><strong>如何获取基站信息？</strong></p> 
<p>在GSM模块中，可以通过AT指令获取基站信息，以使用UBLOX的GSM模块为例，</p> 
<p>当设备注册到移动网络时，按以下步骤即可获取对应的基站信息。</p> 
<p>1. 获取MCC和NNC</p> 
<p>　　AT+COPS=3,2 //设置MCC和NNC输出格式为数字<br> 　　AT+COPS=3,2 <br> 　　OK</p> 
<p>　　AT+COPS?  //获取MCC和NNC<br> 　　+COPS: 0,2,"46000",0 <br> 　　OK</p> 
<p>　　MCC:移动国家码，共3位，中国为460; </p> 
<p>　　MNC:移动网络码，共2位，移动GSM：00、02，移动TD：07，联通GSM：01，电信：03; </p> 
<p>2. 发送AT+CREG=2  //设置基站信息输出</p> 
<p> </p> 
<p>3. 发送AT+CREG? //获取基站信息</p> 
<p> </p> 
<p><strong>基站信息如何转换为经纬度？</strong></p> 
<p>根据个人理解，有如下2种方法：</p> 
<p>1. 服务器接收到基站信息之后，在基站数据库中查找对应的经纬度。</p> 
<p>　 优点：速度快</p> 
<p>　 缺点：需要在服务器上部署基站数据，且基站数据不能及时更新</p> 
<p>2. 通过第三方提供的SDK或API查找对应的经纬度</p> 
<p>    优点：数据比较准确，定位较为精确</p> 
<p>    缺点：接口不免费</p> 
<p> </p> 
<p><strong>附录相关信息：</strong></p> 
<ol><li><a href="http://s.taobao.com/search?q=%BB%F9%D5%BE%B6%A8%CE%BB%CA%FD%BE%DD&amp;js=1&amp;stats_click=search_radio_all%253A1&amp;initiative_id=staobaoz_20141205" rel="nofollow">淘宝卖基站定位数据库的信息</a>链接</li><li><a href="http://www.haoservice.com/docs/1" rel="nofollow">第三方的基站定位接口</a>描述</li></ol> 
<p><strong>谷歌/百度如何实行基站定位：</strong><br> 我想移动运营商应该不会免费提供基站数据库给谷歌/百度，那谷歌百度如何实现基站定位能？<br> 手机地图在使用GPS卫星定位时，误差在10米以内，此时将该手机接收到的多个基站数据（此数据可以包括基站编号等信息，特别注意的是还有信号的强度）提交至后台数据库中保存，随着不断积累，将获得较为完整的基站数据库。（而且这种卫星GPS结合多基站信号强度的定位方式，为以后使用纯基站定位提供了更高的准确性保障。），所以安卓虽然免费，但海量的用户形成海量的数据库，这就是大数据，互联网思维吧。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d415450de4c730563d58abe7127feb04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">react-router和react-router-dom的实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2455e9c252db077a1bc207c366c5dfd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决response.setHeader()下载中文文件名乱码问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>