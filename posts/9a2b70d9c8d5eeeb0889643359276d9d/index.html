<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>云原生数据库性能对比（阿里云、百度智能云、腾讯云） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="云原生数据库性能对比（阿里云、百度智能云、腾讯云）" />
<meta property="og:description" content="本文作者 LYZ
近些年，云原生数据库成为云厂商的重要发展方向，阿里云、百度智能云、腾讯云均先后发布了自研的云原生数据库。笔者认为云原生数据库具有更高的性价比、更极致的弹性，可以满足业务发展的不同阶段和负载场景的需求，也是云数据库从托管开源数据库到原生化自研的必然发展。
笔者一直非常深度关注、调研和使用云数据库，其中性能是关注的重点之一。一方面性能是最终成本的重要影响因素，更好的性能，通常意味着使用更少的资源支撑更高的业务量，从而降低整体成本。另外，性能还意味着在极端场景下，数据库的上限支撑能力。所以，近期对各个云数据库厂商做了一个较为系统的性能对比，供开发者和企业在云数据库选型时的参考。
笔者在进行大量测试之后，对主要的云厂商分别选择了“主流规格”（适合生产环境配置的）进行了对比，综合性能结果是阿里云 PolarDB &gt; 百度智能云 GaiaDB &gt; 腾讯云 TDSQL-C，详细测试数据对比见下图：
（蓝色：百度智能云 GaiaDB 红色：腾讯云 TDSQL-C 绿色：阿里云 PolarDB）
测试方案 测试环境 厂商 虚机客户端 云原生数据库信息 阿里-PolarDB
地域/可用区：华北2（北京）
客户端：32核64GB
实例镜像：CentOS 8.2 64位
网络：云服务器 ECS 和云原生数据库集群在同一私有网络（VPC）
内核版本：mysql8.0.2
实例类型：独享型
实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G
节点个数：一主一只读
腾讯-TDSQL-C
地域/可用区：北京
客户端：32核64GB
客户端操作系统：CentOS 8.2 64位
网络：云服务器 CVM 和云原生数据库集群在同一私有网络（VPC）
内核版本：mysql8.0
实例类型：独享型
实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G
节点个数：一主一只读
百度-GaiaDB
地域/可用区：华北-北京
客户端：32核64GB
客户端操作系统：CentOS 8.2 64位
网络：云服务器BCC和云原生数据库集群在同一私有网络（VPC）
内核版本：mysq8.0.18
实例类型：独享型
实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G
节点个数：一主一只读
测试工具 sysbench工具介绍：SysBench 是一个跨平台且支持多线程的模块化基准测试工具，用于评估系统在运行高负载的数据库时相关核心参数的性能表现。可绕过复杂的数据库基准设置，甚至在没有安装数据库的前提下，快速了解数据库系统的性能。sysbench官方文档
sysbench版本： 1.0.20版本
sysbench测试模型：
sysbench 标准 OLTP 读写混合场景中一个事务包含18个读写 SQL。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9a2b70d9c8d5eeeb0889643359276d9d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T14:33:47+08:00" />
<meta property="article:modified_time" content="2023-12-27T14:33:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">云原生数据库性能对比（阿里云、百度智能云、腾讯云）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#a5a5a5;"><strong>本文作者 LYZ</strong></span></p> 
 <p></p> 
 <p>近些年，云原生数据库成为云厂商的重要发展方向，阿里云、百度智能云、腾讯云均先后发布了自研的云原生数据库。笔者认为<strong>云原生数据库具有更高的性价比、更极致的弹性</strong>，可以满足业务发展的不同阶段和负载场景的需求，也是云数据库从托管开源数据库到原生化自研的必然发展。</p> 
 <p></p> 
 <p>笔者一直非常深度关注、调研和使用云数据库，<strong>其中性能是关注的重点之一。一方面性能是最终成本的重要影响因素</strong>，更好的性能，通常意味着使用更少的资源支撑更高的业务量，从而降低整体成本。另外，性能还意味着在极端场景下，数据库的上限支撑能力。所以，近期对各个云数据库厂商做了一个较为系统的性能对比，供开发者和企业在云数据库选型时的参考。</p> 
</blockquote> 
<p>笔者在进行大量测试之后，对<a href="https://so.csdn.net/so/search?q=%E4%B8%BB%E8%A6%81%E7%9A%84&amp;spm=1001.2101.3001.7020" title="主要的">主要的</a>云厂商分别选择了“主流规格”（适合生产环境配置的）进行了对比，综合性能结果是<strong>阿里云 PolarDB &gt; 百度智能云 GaiaDB &gt; 腾讯云 TDSQL-C，</strong>详细测试数据对比见下图：</p> 
<p>（蓝色：百度智能云 GaiaDB 红色：腾讯云 TDSQL-C 绿色：阿里云 PolarDB）</p> 
<p><img alt="" height="368" src="https://images2.imgbox.com/ec/f2/6u0zKCwq_o.png" width="976"></p> 
<p> <img alt="" height="366" src="https://images2.imgbox.com/62/a2/JkcFMqas_o.png" width="982"></p> 
<p> <img alt="" height="358" src="https://images2.imgbox.com/e6/90/KGlNorXC_o.png" width="984"></p> 
<h2>测试方案</h2> 
<h3>测试环境</h3> 
<table><tbody><tr><td colspan="1" rowspan="1"> <h6><strong>厂商</strong></h6> </td><td colspan="1" rowspan="1"> <h6><strong>虚机客户端</strong></h6> </td><td colspan="1" rowspan="1"> <h6><strong>云原生数据库信息</strong></h6> </td></tr><tr><td colspan="1" rowspan="1"> <p>阿里-PolarDB</p> </td><td colspan="1" rowspan="1"> 
    <ul><li> <p>地域/可用区：华北2（北京）</p> </li><li> <p>客户端：32核64GB</p> </li><li> <p>实例镜像：CentOS 8.2 64位</p> </li><li> <p>网络：云服务器 ECS 和云原生数据库集群在同一私有网络（VPC）</p> </li></ul></td><td colspan="1" rowspan="1"> 
    <ul><li> <p>内核版本：mysql8.0.2</p> </li><li> <p>实例类型：独享型</p> </li><li> <p>实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G</p> </li><li> <p>节点个数：一主一只读</p> </li></ul></td></tr><tr><td colspan="1" rowspan="1"> <p>腾讯-TDSQL-C</p> </td><td colspan="1" rowspan="1"> 
    <ul><li> <p>地域/可用区：北京</p> </li><li> <p>客户端：32核64GB</p> </li><li> <p>客户端操作系统：CentOS 8.2 64位</p> </li><li> <p>网络：云服务器 CVM 和云原生数据库集群在同一私有网络（VPC）</p> </li></ul></td><td colspan="1" rowspan="1"> 
    <ul><li> <p>内核版本：mysql8.0</p> </li><li> <p>实例类型：独享型</p> </li><li> <p>实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G</p> </li><li> <p>节点个数：一主一只读</p> </li></ul></td></tr><tr><td colspan="1" rowspan="1"> <p><a class="link-info" href="https://cloud.baidu.com/product/gaiadb.html?track=csdn" rel="nofollow" title="百度-GaiaDB">百度-GaiaDB</a></p> </td><td colspan="1" rowspan="1"> 
    <ul><li> <p>地域/可用区：华北-北京</p> </li><li> <p>客户端：32核64GB</p> </li><li> <p>客户端操作系统：CentOS 8.2 64位</p> </li><li> <p>网络：云服务器BCC和云原生数据库集群在同一私有网络（VPC）</p> </li></ul></td><td colspan="1" rowspan="1"> 
    <ul><li> <p>内核版本：mysq8.0.18</p> </li><li> <p>实例类型：独享型</p> </li><li> <p>实例规格：2C8G、4C16G、8C32G、8C64G、16C128G、32C256G</p> </li><li> <p>节点个数：一主一只读</p> </li></ul></td></tr></tbody></table> 
<h3>测试工具</h3> 
<ul><li> <p><strong>sysbench工具介绍</strong>：SysBench 是一个跨平台且支持多线程的模块化基准测试工具，用于评估系统在运行高负载的数据库时相关核心参数的性能表现。可绕过复杂的数据库基准设置，甚至在没有安装数据库的前提下，快速了解数据库系统的性能。<a href="https://github.com/akopytov/sysbench?spm=a2c4g.11186623.2.12.36061072oZL2qS" title="sysbench官方文档">sysbench官方文档</a></p> </li><li> <p><strong>sysbench版本</strong>： 1.0.20版本</p> </li><li> <p><strong>sysbench测试模型：</strong></p> 
  <ul><li> <p><strong>sysbench</strong> 标准 OLTP 读写混合场景中一个事务包含18个读写 SQL。</p> </li><li> <p><strong>sysbench</strong> 标准 OLTP 只读场景中一个事务包含14个读 SQL（10条主键点查询、4条范围查询）。</p> </li><li> <p><strong>sysbench</strong> 标准 OLTP 只写场景中一个事务包含4个写 SQL（2条 UPDATE、1条 DETELE、1条 INSERT）。</p> </li></ul></li></ul> 
<h3>测试指标</h3> 
<p>性能测试的指标包括：</p> 
<ul><li> <p>每秒执行事务数TPS（Transactions Per Second）数据库每秒执行的事务数，以COMMIT成功次数为准。</p> </li><li> <p>每秒执行请求数QPS（Queries Per Second）数据库每秒执行的SQL数，包含INSERT、SELECT、UPDATE、DETELE、COMMIT等。</p> </li><li> <p>所有 event 95分位耗时 95_lat（95% Latency）</p> </li></ul> 
<h3>评测方法</h3> 
<ol><li> <p>阿里云、百度智能云、腾讯云分别申请同配置云主机作为客户端</p> </li><li> <p>云厂商申请同等价位和配置的数据库实例</p> </li><li> <p>Sysbench工具从云主机客户端向数据库实例发起读请求、写请求和读写请求</p> </li></ol> 
<h3>测试方法</h3> 
<ul><li> <p>OLTP读写场景压测</p> </li></ul> 
<p>#准备数据：</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 oltp_read_write prepare</p> 
<p>#运行workload</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 --report-interval=1 oltp_read_write run</p> 
<p>#清理</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 oltp_read_write cleanup</p> 
<ul><li> <p>OLTP只读场景压测</p> </li></ul> 
<p>#准备数据：</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 oltp_read_only prepare</p> 
<p>#运行workload</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 --range_selects=0 --skip-trx=1 --report-interval=1 oltp_read_only run</p> 
<p>#清理</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 --range_selects=0 oltp_read_only cleanup</p> 
<ul><li> <p>OLTP只写场景压测</p> </li></ul> 
<p>#准备数据</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 oltp_write_only prepare</p> 
<p>#运行workload</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 --report-interval=1 oltp_write_only run</p> 
<p>#清理</p> 
<p>sysbench --db-driver=mysql --mysql-host=XXX --mysql-port=XXX --mysql-user=XXX --mysql-password=XXX --mysql-db=sbtest --table_size=25000 --tables=250 --events=0 --time=600 --threads=XXX --percentile=95 oltp_write_only cleanup</p> 
<h3>测试场景</h3> 
<ul><li> <p>分别选择百度和竞品的6种套餐2C8G、4C16G、8C32G、8C64G、16C128G、32C256G进行测试</p> </li><li> <p>对于每种规格选择读写、只读、只写3种场景进行测试</p> </li><li> <p>每个套餐均新增128并发下的测试</p> </li></ul> 
<h3>限制与补充说明</h3> 
<p>在测试过程中的一些限制进行补充说明，供参考。</p> 
<ul><li> <p>不同厂商的内核兼容版本存在小版本号差别，这里忽略小版本的性能差异。</p> </li><li> <p>不同厂商的CPU、磁盘类型、价格等各有不同，所以这是一个相对对等的测试。</p> </li><li> <p>不同厂商的数据库实例的默认参数也各有不同，因此不能确定测试结果是最优配置，但基本是默认配置下的性能表现。</p> </li></ul> 
<h2><strong>总体结论与分析：</strong></h2> 
<ol><li> <p><strong>综合性能排名：阿里云 &gt; 百度智能云 &gt; 腾讯云：</strong></p> </li></ol> 
<ul><li> <p>阿里云 PolarDB 整体性能明显高于百度智能云 GaiaDB 和腾讯云 TDSQL-C，分析原因应该是 PolarDB 在云上使用了更高端的硬件，从阿里云的宣传来看应该使用了RDMA和NVM。</p> </li><li> <p><a class="link-info" href="https://cloud.baidu.com/product/gaiadb.html?track=csdn" rel="nofollow" title="百度智能云 GaiaDB">百度智能云 GaiaDB</a> 性能也还不错，在部分测试场景中和阿里云PolarDB差距不大。从公开的信息分析，GaiaDB没有使用高端的硬件，如果仅使用通用硬件跑出这个性能，应该还是非常不错的性能。</p> </li><li> <p>腾讯云 TDSQL-C 性能比较出乎意料，在8核以上规格的性能明显低于百度、阿里。从腾讯公开的信息分析，腾讯也没有使用高端的硬件，因此只能说软件层面的深度优化还有很大空间。</p> </li></ul> 
<ol><li> <p><strong>只写场景：</strong></p> </li></ol> 
<p>只写性能百度与阿里差距较小，从最近百度发布的《<a href="https://zhuanlan.zhihu.com/p/661835478" rel="nofollow" title="核心技术演进和解析">核心技术演进和解析</a>》分析，百度智能云 GaiaDB 在写链路方面做了较多优化，包括Quorum协议、高性能网络协议等。</p> 
<h2></h2> 
<h2>参考资料</h2> 
<p>以下是笔者在分析性能过程中翻阅的网络材料，仅供参考：</p> 
<p><a href="https://zhuanlan.zhihu.com/p/477801513" rel="nofollow" title="[数据库技术]PolarDB-超火的云原生">[数据库技术]PolarDB-超火的云原生</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/661835478" rel="nofollow" title="云原生数据库 GaiaDB 的核心技术演进和解析">云原生数据库 GaiaDB 的核心技术演进和解析</a></p> 
<p><a href="https://live.baidu.com/m/media/pclive/pchome/live.html?room_id=8777335773&amp;source=h5pre" rel="nofollow" title="百度直播">百度直播</a></p> 
<p><a href="https://baijiahao.baidu.com/s?id=1711750615246328960&amp;wfr=spider&amp;for=pc" rel="nofollow" title="百度安全验证">百度安全验证</a></p> 
<p>﻿</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fcf89e72318620bb1b5a409f6ece4794/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">推荐 13 款炫酷的 IDEA 主题插件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8f6c69bcea636c04a7d894bd20b3a96f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">分布式数据库 GaiaDB-X 通过 GB18030-2022《信息技术 中文编码字符集》最高级别认证</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>