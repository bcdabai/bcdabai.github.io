<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Chisel环境搭建教程（Ubuntu） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Chisel环境搭建教程（Ubuntu）" />
<meta property="og:description" content="Chisel环境搭建教程（Ubuntu） 0 前言1 安装java2 安装scala3 安装sbt4 A Chisel template5 Chisel教程参考资料 0 前言 chisel的依赖很多，而且很容易出现版本不兼容的情况，这里每一步我都会提供自己的安装版本OS版本：Ubuntu 21.04 64bit相关参考资料见底 1 安装java 版本：11.0.13 Chisel是基于scala开发的，而scala是基于java的，因此我们先安装java再安装scala。
java
sudo apt install openjdk-11-jre-headless
javac
sudo apt install openjdk-11-jdk-headless
完成后查看版本以检查是否成功安装：java --version javac --version
出现这样的版本号就说明java已经安装成功。
openjdk 11.0.13 2021-10-19 OpenJDK Runtime Environment (build 11.0.13&#43;8-Ubuntu-0ubuntu1.21.04) OpenJDK 64-Bit Server VM (build 11.0.13&#43;8-Ubuntu-0ubuntu1.21.04, mixed mode) javac 11.0.13 2 安装scala 版本2.12.12 到这个网址下载合适版本的scala，不建议使用scala3, 推荐2.12.x
下载.tgz文件，将其解压后移动到/usr/local/share目录下
添加环境变量，在家目录下.bashrc文件的最后添加：
export PATH=&#34;$PATH:/usr/local/share/scala-2.12.12/bin&#34;
这句的含义是在PATH变量中加上你刚刚安装的scala内bin文件夹的目录，其中的scala-2.12.12取决于你下载的scala版本
最后source一下使其更新生效：
source ~/.bashrc
在任意目录下输入scala，若出现如下的prompt，则说明scala安装成功。
Welcome to Scala 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0807dc9dec9bb18e3e1958d237d7f02b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-02T17:29:19+08:00" />
<meta property="article:modified_time" content="2022-05-02T17:29:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Chisel环境搭建教程（Ubuntu）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Chisel环境搭建教程（Ubuntu）</h4> 
 <ul><li><a href="#0__1" rel="nofollow">0 前言</a></li><li><a href="#1_java_5" rel="nofollow">1 安装java</a></li><li><a href="#2_scala_29" rel="nofollow">2 安装scala</a></li><li><a href="#3_sbt_55" rel="nofollow">3 安装sbt</a></li><li><a href="#4_A_Chisel_template_84" rel="nofollow">4 A Chisel template</a></li><li><a href="#5_Chisel_159" rel="nofollow">5 Chisel教程</a></li><li><a href="#_166" rel="nofollow">参考资料</a></li></ul> 
</div> 
<p></p> 
<h2><a id="0__1"></a>0 前言</h2> 
<ul><li>chisel的依赖很多，而且很容易出现版本不兼容的情况，这里每一步我都会提供自己的安装版本</li><li><strong>OS版本：Ubuntu 21.04 64bit</strong></li><li>相关参考资料见底</li></ul> 
<h2><a id="1_java_5"></a>1 安装java</h2> 
<ul><li>版本：11.0.13</li></ul> 
<p>Chisel是基于scala开发的，而scala是基于java的，因此我们先安装java再安装scala。</p> 
<ol><li> <p>java<br> <code>sudo apt install openjdk-11-jre-headless</code></p> </li><li> <p>javac<br> <code>sudo apt install openjdk-11-jdk-headless</code></p> </li><li> <p>完成后查看版本以检查是否成功安装：<code>java --version</code> <code>javac --version</code><br> 出现这样的版本号就说明java已经安装成功。</p> </li></ol> 
<pre><code>openjdk 11.0.13 2021-10-19
OpenJDK Runtime Environment (build 11.0.13+8-Ubuntu-0ubuntu1.21.04)
OpenJDK 64-Bit Server VM (build 11.0.13+8-Ubuntu-0ubuntu1.21.04, mixed mode)
</code></pre> 
<pre><code>javac 11.0.13
</code></pre> 
<h2><a id="2_scala_29"></a>2 安装scala</h2> 
<ul><li>版本2.12.12</li></ul> 
<ol><li> <p>到<a href="https://www.scala-lang.org/download/all.html" rel="nofollow">这个网址</a>下载合适版本的scala，不建议使用scala3, 推荐2.12.x</p> </li><li> <p>下载.tgz文件，将其解压后移动到<code>/usr/local/share</code>目录下</p> </li><li> <p>添加环境变量，在家目录下<code>.bashrc</code>文件的最后添加：<br> <code>export PATH="$PATH:/usr/local/share/scala-2.12.12/bin"</code></p> <p>这句的含义是在PATH变量中加上你刚刚安装的scala内bin文件夹的目录，其中的scala-2.12.12取决于你下载的scala版本</p> </li><li> <p>最后source一下使其更新生效：<br> <code>source ~/.bashrc</code></p> </li><li> <p>在任意目录下输入<code>scala</code>，若出现如下的prompt，则说明scala安装成功。</p> </li></ol> 
<pre><code class="prism language-sh">Welcome to Scala 2.12.12 (OpenJDK 64-Bit Server VM, Java 11.0.13).
Type in expressions for evaluation. Or try :help.

scala&gt; 
</code></pre> 
<pre><code class="prism language-scala">scala<span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span>
res0<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> 
<h2><a id="3_sbt_55"></a>3 安装sbt</h2> 
<ul><li>版本 sbt 1.6.2</li><li>如果像我一样是第一次接触sbt，可能不太理解这个工具，并且觉得很复杂。sbt是一个构建工具，其实可以简单地理解为一个编译、管理chisel工程的工具，一个针对scala的make。</li></ul> 
<ol><li>对于sbt的下载，有很多教程直接sudo apt install sbt，有的还在之前先update一下，但这个方法至少对我来说一直没有用。最保险的方法是上<a href="https://www.scala-sbt.org/download.html" rel="nofollow">官网下载</a>，可以试试官网提供的命令行下载方法（没亲测过）:</li></ol> 
<pre><code class="prism language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"deb https://repo.scala-sbt.org/scalasbt/debian all main"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/sbt.list
<span class="token builtin class-name">echo</span> <span class="token string">"deb https://repo.scala-sbt.org/scalasbt/debian /"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/sbt_old.list
<span class="token function">curl</span> -sL <span class="token string">"https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823"</span> <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> sbt
</code></pre> 
<ol start="2"><li>也可以直接下载.tgz，解压后同安装scala，<code>vim ~/.bashrc</code>在最后添加：</li></ol> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">SBT_HOME</span><span class="token operator">=</span><span class="token string">"安装路径/sbt"</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$SBT_HOME</span>:<span class="token environment constant">$PATH</span>"</span>
</code></pre> 
<ol start="3"><li>最后<code>source ~/.bashrc</code>更新。</li><li>测试sbt，在任意文件夹下输入<code>sbt sbtVersion</code>，若出现版本号说明安装成功。</li><li>可以对sbt换源，进入<code>~/.sbt</code>，创建文件repositories，内容为</li></ol> 
<pre><code>[repositories]
local
huaweicloud-maven: https://repo.huaweicloud.com/repository/maven/
maven-central: https://repo1.maven.org/maven2/
huaweicloud-ivy: https://repo.huaweicloud.com/repository/ivy/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]
</code></pre> 
<ol start="6"><li>现在，我们找一个现成的chisel工程测试一下所有工具是否安装到位。</li></ol> 
<h2><a id="4_A_Chisel_template_84"></a>4 A Chisel template</h2> 
<ul><li><a href="https://github.com/schoeberl/chisel-empty">github地址</a></li></ul> 
<ol><li><code>git clone https://github.com/schoeberl/chisel-empty.git</code></li><li>cd 进文件夹，可以看到有以下几个文件（文件夹）：</li></ol> 
<pre><code>	build.sbt  
	Makefile 
	README.md  
	src/ 
	quartus/
</code></pre> 
<p><strong>build.sbt</strong> 规定了scala版本，导入的包等：</p> 
<pre><code class="prism language-sh">scalaVersion := "2.12.12"

scalacOptions ++= Seq(
  "-feature",
  "-language:reflectiveCalls",
)

resolvers ++= Seq(
  Resolver.sonatypeRepo("releases")
)

// Chisel 3.5
addCompilerPlugin("edu.berkeley.cs" % "chisel3-plugin" % "3.5.0" cross CrossVersion.full)
libraryDependencies += "edu.berkeley.cs" %% "chisel3" % "3.5.0"
libraryDependencies += "edu.berkeley.cs" %% "chiseltest" % "0.5.0"
</code></pre> 
<ul><li>重点第一行的scala版本一定要匹配（也有说sbt会自动下载合适版本的scala，但没亲测过）。</li><li>最后两行libraryDependencies相当于安装这个工程所需的包，可能需要联网下载。</li><li>版本兼容问题，详见<a href="https://mvnrepository.com/artifact/edu.berkeley.cs?p=1" rel="nofollow">这里</a>，例如我想知道chiseltest的版本应该多少才和我的scala版本兼容：</li></ul> 
<p><img src="https://images2.imgbox.com/a5/05/X5Xyt6V9_o.png" alt="chiseltestVersion1"><img src="https://images2.imgbox.com/a3/be/BdPuJciW_o.png" alt="chiseltestVersion2"><br> <strong>Makefile</strong> 并不是必须的，里面实际上是sbt的命令，对sbt命令的进一步了解可以参考<a href="https://blog.csdn.net/wangkai_123456/article/details/88929459">这篇博客</a>。</p> 
<p><strong>quartus/</strong> 与目前的关系不大，可以暂时不管。</p> 
<p><strong>src</strong> 用来存放代码。该模板中自带一个简单加法器的chisel实现，存放在src下。文件结构如下，这也是一般sbt工程文件的规范：</p> 
<pre><code>src/
  main/
    scala/
       &lt;main Scala sources&gt;
  test/
    scala/
       &lt;test Scala sources&gt;
</code></pre> 
<ol start="3"><li>在chisel-empty文件夹下（就是有build.sbt的一级）输入命令<code>make</code>或者实际上是<code>sbt run</code></li><li>最终出现如下信息，即说明以上所有部分完全安装正确，可以开始搭建自己的chisel工程了。</li></ol> 
<pre><code>[info] Updated file /home/ckq/Documents/codes/CHISEL/chisel_proj/chisel-empty/project/build.properties: set sbt.version to 1.6.2
[info] welcome to sbt 1.6.2 (Ubuntu Java 11.0.13)
[info] loading project definition from /home/ckq/Documents/codes/CHISEL/chisel_proj/chisel-empty/project
[info] loading settings for project chisel-empty from build.sbt ...
[info] set current project to chisel-empty (in build file:/home/ckq/Documents/codes/CHISEL/chisel_proj/chisel-empty/)
[info] compiling 1 Scala source to /home/ckq/Documents/codes/CHISEL/chisel_proj/chisel-empty/target/scala-2.12/classes ..
[info] running empty.AddMain 
Generating the adder hardware
[success] Total time: 7 s, completed May 2, 2022, 5:00:07 PM
</code></pre> 
<p>也可以输入<code>sbt test</code>跑一下test中的测试代码：</p> 
<pre><code>[info] AddTester:
[info] Add
[info] - should work
[info] Run completed in 2 seconds, 540 milliseconds.
[info] Total number of tests run: 1
[info] Suites: completed 1, aborted 0
[info] Tests: succeeded 1, failed 0, canceled 0, ignored 0, pending 0
[info] All tests passed.
[success] Total time: 7 s, completed May 2, 2022, 5:02:39 PM
</code></pre> 
<h2><a id="5_Chisel_159"></a>5 Chisel教程</h2> 
<p>最后推荐一些入门chisel的学习资源：</p> 
<ol><li>首推<a href="http://www.imm.dtu.dk/~masca/chisel-book.html" rel="nofollow">Chisel-book</a>，可以免费下载，建议看英文版，虽然有中文版本的，但是机翻极其难受。</li><li>如果英文恐惧的话，可以看chisel-getting-started-chinese，主要介绍语言本身。</li><li>对sbt的进一步了解，查看<a href="https://www.scala-sbt.org/1.x/docs/zh-cn/index.html" rel="nofollow">官方手册</a></li><li>其他建议。可以在vscode上编写chisel代码，安装插件：Chisel Syntax；另外，还可以查看波形（vcd文件），这样即使没有其他EDA软件和FPGA板，我们至少也能进行逻辑上的仿真。安装插件：WaveTrace。</li></ol> 
<h2><a id="_166"></a>参考资料</h2> 
<p>本人也是小白一枚，难免整理不周，如有疑问可以进一步参考以下博客/专栏：</p> 
<p><a href="https://zhuanlan.zhihu.com/p/98097268" rel="nofollow">初学Chisel语言，看这篇就够了：最方便简洁的入门资料整理</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/389430593" rel="nofollow">详细介绍如何在linux中配置chisel环境</a></p> 
<p><a href="https://www.pianshen.com/article/193731360/" rel="nofollow">Ubuntu18安装Scala</a></p> 
<p><a href="https://blog.csdn.net/wangkai_123456/article/details/88929459">SBT简介</a></p> 
<p><a href="https://blog.csdn.net/LSlscool/article/details/106278691">sbt的安装及其配置</a></p> 
<p><a href="https://blog.csdn.net/u010159842/article/details/104256997?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.pc_relevant_aa&amp;utm_relevant_index=1">SBT无痛入门指南</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b2a3acd9462a8e22c0080a629a916e5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">4. Spring Bean 基础</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc0e4b72491d487a41476d4655c89d6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nginx配置log转发到日审设备</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>