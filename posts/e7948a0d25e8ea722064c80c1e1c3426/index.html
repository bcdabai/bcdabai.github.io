<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>配置VTP - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="配置VTP" />
<meta property="og:description" content="1.设置域名 Switch&gt;en
Switch#conf t //进入全局配置模式
Switch(config)#vtp mode server //进入vtp服务模式
Device mode already VTP SERVER.
Switch(config)#vtp domain hhh //设置域名为hhh （区分大小写）
Changing VTP domain name from NULL to hhh
2.设置密码及查询 Switch(config)#vtp password class //设置密码为class
Setting device VLAN database password to class
Switch(config)#do show vtp pass //查询密码
VTP Password: class
3.查看vtp状态 Switch(config)#do show vtp status //查询vtp状态
图3-1 4.将S2和交换机Core加入VTP域中 下面以Core为例，两者相同 Core(config)#vtp mode client //客户端模式（该模式下不能创建、删除、修改vlan）
Setting device to VTP CLIENT mode.
Core(config)#vtp domain hhh //设置域名为hhh" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e7948a0d25e8ea722064c80c1e1c3426/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-09T19:14:13+08:00" />
<meta property="article:modified_time" content="2023-11-09T19:14:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">配置VTP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>1.设置域名</h3> 
<blockquote> 
 <p>Switch&gt;en</p> 
 <p>Switch#conf t                                             //进入全局配置模式</p> 
 <p>Switch(config)#vtp mode server                //进入vtp服务模式</p> 
 <p>Device mode already VTP SERVER.</p> 
 <p>Switch(config)#vtp domain hhh                 //设置<span style="color:#fe2c24;"><strong>域名</strong></span>为hhh <strong><span style="color:#fe2c24;">（区分大小写）</span></strong></p> 
 <p>Changing VTP domain name from NULL to hhh</p> 
</blockquote> 
<h3>2.设置密码及查询</h3> 
<blockquote> 
 <p>Switch(config)#vtp password class                        //设置密码为class</p> 
 <p>Setting device VLAN database password to class</p> 
 <p>Switch(config)#do show vtp pass                          //查询密码</p> 
 <p>VTP Password: class</p> 
</blockquote> 
<h3> 3.查看vtp状态</h3> 
<blockquote> 
 <p>Switch(config)#do show vtp status                        //查询vtp状态</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9b/08/42Pa3RTq_o.png"></p> 
<p style="text-align:center;"><strong><span style="color:#0d0016;">图3-1 </span></strong></p> 
<h3> 4.将S2和交换机Core加入VTP域中</h3> 
<p><span style="color:#956fe7;"><strong>下面以Core为例，两者相同 </strong></span></p> 
<blockquote> 
 <p>Core(config)#vtp mode client               //客户端模式<strong><span style="color:#fe2c24;">（该模式下不能创建、删除、修改vlan）</span></strong></p> 
 <p>Setting device to VTP CLIENT mode.</p> 
 <p>Core(config)#vtp domain hhh                        //设置域名为hhh</p> 
 <p>Changing VTP domain name from NULL to hhh                                 </p> 
 <p>Core(config)#vtp password class                 //设置密码为class</p> 
 <p>Setting device VLAN database password to class</p> 
 <p>Core(config)#do show vtp sta                       //显示状态</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/93/d6/Xg8usCn3_o.png"></p> 
<p style="text-align:center;"><strong> 图4-1</strong></p> 
<p>接口中继</p> 
<blockquote> 
 <p>Switch(config)#int range f0/1-2</p> 
 <p>Switch(config-if-range)#switchport mode trunk</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/14/12/NJzyNicu_o.png"></p> 
<p style="text-align:center;"><strong>图4-2</strong></p> 
<p>      <span style="color:#511b78;">  </span><span style="color:#ff9900;">所有交换机都位于一个VTP域且使用相同的密码后，在S1中创建的vlan将被通告给处于VTP客户端模式的交换机Core和S2.</span></p> 
<blockquote> 
 <p><strong><span style="color:#0d0016;">问题1：</span></strong>当设备中接入了同域名、同密码的vtp服务器，且配置修订版本号高于现在网络中的服务器最高配置修订版本号时，会发生什么？<strong>服务器的 VTP 配置将被认为是最新的，因此它的配置将替代现有网络中的配置。</strong></p> 
 <p>如何解决？<strong>1.将 VTP 模式设置为<span style="color:#fe2c24;">透明模式</span>，处于透明模式的交换机不加入VTP域，也不分享其VLAN数据库。2.将此服务器的的域名修改，之后再改回hhh，使其修订号为0。</strong></p> 
</blockquote> 
<blockquote> 
 <p><strong><span style="color:#0d0016;">问题2：</span></strong>VTP 服务器的密码和client不一样时，client还会去学习服务器的vlan 信息吗？ </p> 
 <p><strong>不会：</strong><strong>当VTP服务器的密码与客户端不一样时，客户端将无法学习服务器的VLAN信息，因为VTP密码不匹配。</strong></p> 
</blockquote> 
<h3>5.常见的VTP错误 </h3> 
<p>（1）交换机位于两个不同的VTP域，无法共享vlan信息。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ba/7c/AB82lKTk_o.png"></p> 
<p style="text-align:center;"><strong> 图5-1</strong></p> 
<p><strong><span style="background-color:#f9eda6;">修改：两个交换机在同一个VTP域即可，即配置相同的VTP域名</span></strong></p> 
<p>（2）<span style="color:#fe2c24;">客户端模式下不能创建、删除、修改vlan。</span></p> 
<p style="text-align:center;"><span style="color:#fe2c24;"><img alt="" src="https://images2.imgbox.com/08/e1/EaM2r9y3_o.png"></span></p> 
<p style="text-align:center;"><strong>图5-2 </strong></p> 
<p><strong><span style="background-color:#f9eda6;">修改：需要将其更改到</span><span style="color:#fe2c24;"><span style="background-color:#f9eda6;">服务器</span></span><span style="background-color:#f9eda6;">模式，在进行</span><span style="color:#fe2c24;"><span style="background-color:#f9eda6;">创建、删除、修改vlan</span></span></strong></p> 
<p><span style="color:#0d0016;">（3）S2修订号最大，S2无法接收S1的vlan信息。</span></p> 
<p><strong><span style="background-color:#f9eda6;">修改：可以将S2的域名修改，之后再改回hhh，使S2修订号为0。此时，S1修订号大于S2的修订号，将共享S1的vlan信息。</span></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/77a20de174ef65ba455c772371d0a743/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">顺丰接口对接-订单创建与取消（java单元测试）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8aeed866052ab32c1d839eae08097807/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">4K壁纸下载器，多种风格壁纸，一键批量下载到本地，桌面壁纸，高清壁纸，壁纸下载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>