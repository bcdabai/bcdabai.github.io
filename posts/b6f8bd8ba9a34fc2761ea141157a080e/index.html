<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unity云渲染 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unity云渲染" />
<meta property="og:description" content="曾经做过一个数字孪生项目，里面涉及到核心模块是3D效果渲染，刚开始的时候对业务场景不是非常清晰或者交流不够充分，在技术选型上走了很多弯路，也浪费的大量的时间，不过也得到了很多宝贵的实践经验和教训。
第一次尝试，刚开始参与做3D模块的小伙伴选型了threejs来做3D效果的渲染，当然如果只是单独看做3D效果threejs肯定是可以的，问题的关键是数据还不小。当时他基于这种方式通过文件流的方式作为数据的输入，threejs对这个数据进行加载渲染，当时就卡的不行了，后来放弃了这种方案。
第二次尝试，另外一个小伙伴基于这种场景技术选型了Unity技术来实现该需求。Unity是基于C#语言来做的开发，可以做客户端方式的3D效果，当然也是可以生成为html被web应用集成，因此选择了Unity生成html的方式进行实践。刚开始做效果的时候也是使用少量的数据做测试的，在Unity中通过http方式远程获取业务数据作为输入，当下载完成之后再进行3D渲染，后来发现3D效果的业务数据可不是一般的多，而是数据量非常大，可以达到上百G的数据，而且还要在很短的时间内就要完成渲染，按照当前的方案无论如何是达不到效果的。因此该方案又被放弃了。
第三次尝试，山重水复疑无路,柳暗花明又一村。正当冥思苦想寻找思路的时候，有人提出有没有云渲染的方法，后来经过一番资料的查找，发现Unity确实有云渲染的解决方案。其核心技术就是Unity Render Streaming，这也是官方提供的Unity云渲染的解决方案。该解决方案的核心思路就是在服务端上产生了大量的业务数据，产生业务数据的生成器和Unity部署在一台机器上，不经过海量数据的网络传递，也不经过大量文件的IO的读写，产生数据的同时直接传递给Unity，通过Unity进行实时消费渲染之后，通过视频流的方式传递到浏览器端，这样就根本减少了浏览器端的消耗，从而达到了效果。
1）Web浏览器将Offer SDP发送到 Web 服务器。
2）Unity检查Web服务器是否有未处理的Offer SDP，并接收任何找到的。
3）Unity将Answer SDP发送到Web服务器。
4）Web浏览器检查Web服务器是否有未处理的Answer SDP并接收任何找到的。
5）Web浏览器将ICE Candidate发送到Web服务器。
6）Unity检查Web服务器是否有未处理的ICE Candidates并接收任何找到的。
7）Unity将ICE Candidate发送到Web服务器。
8）Web浏览器检查Web服务器是否有未处理的ICE Candidate并接收任何找到的。
参考资料：
https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/best-practice-for-unity-remote-rendering
https://blog.csdn.net/wuquanl/article/details/123643685" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b6f8bd8ba9a34fc2761ea141157a080e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-12T13:40:07+08:00" />
<meta property="article:modified_time" content="2024-01-12T13:40:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity云渲染</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:justify;">曾经做过一个数字孪生项目，里面涉及到核心模块是3D效果渲染，刚开始的时候对业务场景不是非常清晰或者交流不够充分，在技术选型上走了很多弯路，也浪费的大量的时间，不过也得到了很多宝贵的实践经验和教训。</p> 
<p style="margin-left:.0001pt;text-align:justify;">         第一次尝试，刚开始参与做3D模块的小伙伴选型了threejs来做3D效果的渲染，当然如果只是单独看做3D效果threejs肯定是可以的，问题的关键是数据还不小。当时他基于这种方式通过文件流的方式作为数据的输入，threejs对这个数据进行加载渲染，当时就卡的不行了，后来放弃了这种方案。</p> 
<p style="margin-left:.0001pt;text-align:justify;">         第二次尝试，另外一个小伙伴基于这种场景技术选型了Unity技术来实现该需求。Unity是基于C#语言来做的开发，可以做客户端方式的3D效果，当然也是可以生成为html被web应用集成，因此选择了Unity生成html的方式进行实践。刚开始做效果的时候也是使用少量的数据做测试的，在Unity中通过http方式远程获取业务数据作为输入，当下载完成之后再进行3D渲染，后来发现3D效果的业务数据可不是一般的多，而是数据量非常大，可以达到上百G的数据，而且还要在很短的时间内就要完成渲染，按照当前的方案无论如何是达不到效果的。因此该方案又被放弃了。</p> 
<p><strong>         </strong>第三次尝试，山重水复疑无路,柳暗花明又一村。正当冥思苦想寻找思路的时候，有人提出有没有云渲染的方法，后来经过一番资料的查找，发现Unity确实有云渲染的解决方案。其核心技术就是Unity Render Streaming，这也是官方提供的Unity云渲染的解决方案。该解决方案的核心思路就是在服务端上产生了大量的业务数据，产生业务数据的生成器和Unity部署在一台机器上，不经过海量数据的网络传递，也不经过大量文件的IO的读写，产生数据的同时直接传递给Unity，通过Unity进行实时消费渲染之后，通过视频流的方式传递到浏览器端，这样就根本减少了浏览器端的消耗，从而达到了效果。</p> 
<p><img alt="" height="313" src="https://images2.imgbox.com/e0/bf/BEIP80qk_o.png" width="666"></p> 
<p><img alt="" height="803" src="https://images2.imgbox.com/4b/ae/G0BSNAPQ_o.png" width="1111"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">1</span><span style="color:#000000;">）</span><span style="color:#000000;">Web</span><span style="color:#000000;">浏览器将</span><span style="color:#000000;">Offer SDP</span><span style="color:#000000;">发送到 </span><span style="color:#000000;">Web </span><span style="color:#000000;">服务器</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">2</span><span style="color:#000000;">）</span><span style="color:#000000;">Unity</span><span style="color:#000000;">检查</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器是否有未处理的</span><span style="color:#000000;">Offer SDP</span><span style="color:#000000;">，并接收任何找到的</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">3</span><span style="color:#000000;">）</span><span style="color:#000000;">Unity</span><span style="color:#000000;">将</span><span style="color:#000000;">Answer SDP</span><span style="color:#000000;">发送到</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">4</span><span style="color:#000000;">）</span><span style="color:#000000;">Web</span><span style="color:#000000;">浏览器检查</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器是否有未处理的</span><span style="color:#000000;">Answer SDP</span><span style="color:#000000;">并接收任何找到的</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">5</span><span style="color:#000000;">）</span><span style="color:#000000;">Web</span><span style="color:#000000;">浏览器将</span><span style="color:#000000;">ICE Candidate</span><span style="color:#000000;">发送到</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">6</span><span style="color:#000000;">）</span><span style="color:#000000;">Unity</span><span style="color:#000000;">检查</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器是否有未处理的</span><span style="color:#000000;">ICE Candidates</span><span style="color:#000000;">并接收任何找到的</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">7</span><span style="color:#000000;">）</span><span style="color:#000000;">Unity</span><span style="color:#000000;">将</span><span style="color:#000000;">ICE Candidate</span><span style="color:#000000;">发送到</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">8</span><span style="color:#000000;">）</span><span style="color:#000000;">Web</span><span style="color:#000000;">浏览器检查</span><span style="color:#000000;">Web</span><span style="color:#000000;">服务器是否有未处理的</span><span style="color:#000000;">ICE Candidate</span><span style="color:#000000;">并接收任何找到的</span><span style="color:#000000;">。</span></p> 
<p></p> 
<p>参考资料：</p> 
<p>https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/best-practice-for-unity-remote-rendering</p> 
<p>https://blog.csdn.net/wuquanl/article/details/123643685</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63adea313a320b55df5692ea1349a5b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GPT store正式上线，和OpenAI分钱时代来了</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc0c9822f011e84483a4c93d87c98895/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AMEYA360报导：瑞萨宣布收购Transphorm，大举进军GaN</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>