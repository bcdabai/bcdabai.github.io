<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker-01 简介与安装 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker-01 简介与安装" />
<meta property="og:description" content="2013年发布至今， Docker 一直广受瞩目，被认为可能会改变软件行业。 但是，许多人并不清楚 Docker 到底是什么，要解决什么问题，好处又在哪里？今天就来详细解释，帮助大家理解它，还带有简单易懂的实例，教你如何将它用于日常开发。
Docker简介 Docker是一个开源的容器引擎，它有助于更快地交付应用。 Docker可将应用程序和基础设施层隔离，并且能将基础设施当作程序一样进行管理。使用 Docker可更快地打包、测试以及部署应用程序，并可以缩短从编写到部署运行代码的周期。
Docker的优点如下：
1、简化程序 Docker 让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 机器上，便可以实现虚拟化。Docker改变了虚拟化的方式，使开发者可以直接将自己的成果放入Docker中进行管理。方便快捷已经是 Docker的最大优势，过去需要用数天乃至数周的 任务，在Docker容器的处理下，只需要数秒就能完成。
2、避免选择恐惧症 如果你有选择恐惧症，还是资深患者。Docker 帮你 打包你的纠结！比如 Docker 镜像；Docker 镜像中包含了运行环境和配置，所以 Docker 可以简化部署多种应用实例工作。比如 Web 应用、后台应用、数据库应用、大数据应用比如 Hadoop 集群、消息队列等等都可以打包成一个镜像部署。
3、节省开支 一方面，云计算时代到来，使开发者不必为了追求效果而配置高额的硬件，Docker 改变了高性能必然高价格的思维定势。Docker 与云的结合，让云空间得到更充分的利用。不仅解决了硬件管理的问题，也改变了虚拟化的方式。
Docker的架构 Docker daemon（ Docker守护进程）
Docker daemon是一个运行在宿主机（ DOCKER-HOST）的后台进程。可通过 Docker客户端与之通信。
Client（ Docker客户端）
Docker客户端是 Docker的用户界面，它可以接受用户命令和配置标识，并与 Docker daemon通信。图中， docker build等都是 Docker的相关命令。
Images（ Docker镜像）
Docker镜像是一个只读模板，它包含创建 Docker容器的说明。它和系统安装光盘有点像，使用系统安装光盘可以安装系统，同理，使用Docker镜像可以运行 Docker镜像中的程序。
Container（容器）
容器是镜像的可运行实例。镜像和容器的关系有点类似于面向对象中，类和对象的关系。可通过 Docker API或者 CLI命令来启停、移动、删除容器。
Registry
Docker Registry是一个集中存储与分发镜像的服务。构建完 Docker镜像后，就可在当前宿主机上运行。但如果想要在其他机器上运行这个镜像，就需要手动复制。此时可借助 Docker Registry来避免镜像的手动复制。
一个 Docker Registry可包含多个 Docker仓库，每个仓库可包含多个镜像标签，每个标签对应一个 Docker镜像。这跟 Maven的仓库有点类似，如果把 Docker Registry比作 Maven仓库的话，那么 Docker仓库就可理解为某jar包的路径，而镜像标签则可理解为jar包的版本号。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0a0cd6a6f16193afbc19118feb0c9925/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-19T17:17:03+08:00" />
<meta property="article:modified_time" content="2018-07-19T17:17:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker-01 简介与安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0pt;"><span style="color:#111111;">2013年发布至今， </span><a href="https://www.docker.com/" rel="nofollow"><span style="color:#223472;">Docker</span></a><span style="color:#111111;"> 一直广受瞩目，被认为可能会改变软件行业。  </span></p> 
<p style="margin-left:0pt;"><a name="6557-1529566563002"></a><span style="color:#111111;">但是，许多人并不清楚 Docker 到底是什么，要解决什么问题，好处又在哪里？今天就来详细解释，帮助大家理解它，还带有简单易懂的实例，教你如何将它用于日常开发。</span></p> 
<p style="margin-left:0pt;"><img alt="" class="has" height="277" src="https://images2.imgbox.com/51/a5/ysC9iLz2_o.png" width="553"></p> 
<h2>Docker简介</h2> 
<p style="margin-left:0pt;">Docker是一个开源的<strong><strong>容器引擎</strong></strong>，它有助于更快地交付应用。 Docker可将应用程序和基础设施层隔离，并且能将基础设施当作程序一样进行管理。使用 Docker可更快地打包、测试以及部署应用程序，并可以缩短从编写到部署运行代码的周期。</p> 
<p style="margin-left:0pt;">Docker的优点如下：</p> 
<h3 style="margin-left:0pt;"><strong><strong>1、简化程序</strong></strong></h3> 
<p style="margin-left:0pt;">Docker 让开发者可以打包他们的应用以及依赖包到一个<strong><strong>可移植</strong></strong>的容器中，然后发布到任何流行的 Linux 机器上，便可以实现虚拟化。Docker改变了虚拟化的方式，使开发者可以直接将自己的成果放入Docker中进行管理。方便快捷已经是 Docker的最大优势，过去需要用数天乃至数周的 任务，在Docker容器的处理下，只需要数秒就能完成。</p> 
<h3 style="margin-left:0pt;"><strong><strong>2、避免选择恐惧症 </strong></strong></h3> 
<p style="margin-left:0pt;">如果你有选择恐惧症，还是资深患者。Docker 帮你 打包你的纠结！比如 Docker 镜像；Docker 镜像中包含了运行环境和配置，所以 Docker 可以简化部署多种应用实例工作。比如 Web 应用、后台应用、数据库应用、大数据应用比如 Hadoop 集群、消息队列等等都可以打包成一个镜像部署。</p> 
<h3 style="margin-left:0pt;"><strong><strong>3、节省开支</strong></strong></h3> 
<p style="margin-left:0pt;">一方面，云计算时代到来，使开发者不必为了追求效果而配置高额的硬件，Docker 改变了高性能必然高价格的思维定势。Docker 与云的结合，让云空间得到更充分的利用。不仅解决了硬件管理的问题，也改变了虚拟化的方式。</p> 
<p style="margin-left:0pt;"> </p> 
<h2 style="margin-left:0pt;"><span style="color:#4f4f4f;">Docker的架构</span></h2> 
<p><img alt="" class="has" height="292" src="https://images2.imgbox.com/a1/eb/XiSrX4LQ_o.png" width="553"></p> 
<p><strong>Docker daemon（ Docker守护进程）</strong><br>     Docker daemon是一个运行在宿主机（ DOCKER-HOST）的后台进程。可通过 Docker客户端与之通信。<br><strong>Client（ Docker客户端）</strong><br>     Docker客户端是 Docker的用户界面，它可以接受用户命令和配置标识，并与 Docker daemon通信。图中， docker build等都是 Docker的相关命令。<br><strong>Images（ Docker镜像）</strong><br>     Docker镜像是一个只读模板，它包含创建 Docker容器的说明。它和系统安装光盘有点像，使用系统安装光盘可以安装系统，同理，使用Docker镜像可以运行 Docker镜像中的程序。<br><strong>Container（容器）</strong><br>     容器是镜像的可运行实例。镜像和容器的关系有点类似于面向对象中，类和对象的关系。可通过 Docker API或者 CLI命令来启停、移动、删除容器。<br><strong>Registry</strong><br>     Docker Registry是一个集中存储与分发镜像的服务。构建完 Docker镜像后，就可在当前宿主机上运行。但如果想要在其他机器上运行这个镜像，就需要手动复制。此时可借助 Docker Registry来避免镜像的手动复制。<br> 一个 Docker Registry可包含多个 Docker仓库，每个仓库可包含多个镜像标签，每个标签对应一个 Docker镜像。这跟 Maven的仓库有点类似，如果把 Docker Registry比作 Maven仓库的话，那么 Docker仓库就可理解为某jar包的路径，而镜像标签则可理解为jar包的版本号。</p> 
<h2 style="margin-left:0pt;">Docker 的安装</h2> 
<p style="margin-left:0pt;"><span style="color:#111111;">Docker 是一个开源的商业产品，有两个版本：社区版（Community Edition，缩写为 CE）和企业版（Enterprise Edition，缩写为 EE）。企业版包含了一些收费服务，个人开发者一般用不到。下面的介绍都针对社区版。</span></p> 
<p style="margin-left:0pt;"><span style="color:#111111;">Docker CE 的安装请参考官方文档，</span><strong><span style="color:#111111;"><strong>我们这里以CentOS为例：</strong></span></strong></p> 
<p style="margin-left:0pt;"><span style="color:#111111;">1、Docker 要求 CentOS 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的CentOS 版本是否支持 Docker 。</span></p> 
<p style="margin-left:0pt;"><a name="2560-1529567428572"></a><span style="color:#111111;">通过 uname -r 命令查看你当前的内核版本</span></p> 
<p style="margin-left:0pt;"><a name="2459-1529567428572"></a></p> 
<pre class="has"><code> # uname -r</code></pre> 
<p style="margin-left:0pt;"><a name="3047-1529567428572"></a><span style="color:#111111;">2、使用 root 权限登录 Centos。确保 yum 包更新到最新。</span></p> 
<p style="margin-left:0pt;"><a name="1058-1529567428572"></a></p> 
<pre class="has"><code># yum -y update</code></pre> 
<p style="margin-left:0pt;"><a name="1574-1529567428572"></a><span style="color:#111111;">3、卸载旧版本(如果安装过旧版本的话)</span></p> 
<p style="margin-left:0pt;"><a name="6933-1529567428572"></a></p> 
<pre class="has"><code># yum remove docker  docker-common docker-selinux docker-engine</code></pre> 
<p style="margin-left:0pt;"><a name="1216-1529567428572"></a><span style="color:#111111;">4、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</span></p> 
<p style="margin-left:0pt;"><a name="4481-1529567428572"></a></p> 
<pre class="has"><code># yum install -y yum-utils device-mapper-persistent-data lvm2</code></pre> 
<p style="margin-left:0pt;"><a name="8190-1529567428572"></a><span style="color:#111111;">5、设置yum源</span></p> 
<p style="margin-left:0pt;"><a name="3016-1529567428572"></a></p> 
<pre class="has"><code># yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></pre> 
<p style="margin-left:0pt;"><a name="3620-1529567428572"></a></p> 
<p style="margin-left:0pt;"><a name="5563-1529567428572"></a><span style="color:#111111;">6、可以查看所有仓库中所有docker版本，并选择特定版本安装</span></p> 
<p style="margin-left:0pt;"><a name="9726-1529567428572"></a></p> 
<pre class="has"><code># yum list docker-ce --showduplicates | sort -r</code></pre> 
<p style="margin-left:0pt;"><a name="2839-1529571497638"></a></p> 
<p style="margin-left:0pt;"><a name="3862-1529567428572"></a><span style="color:#111111;">7、安装docker</span></p> 
<pre class="has"><code># sudo yum install docker-ce</code></pre> 
<p style="margin-left:0pt;"><a name="8026-1529567428572"></a><span style="color:#77c94b;">  #由于repo中默认只开启stable仓库，故这里安装的是最新稳定版18.03.1</span> #<span style="color:#111111;"> sudo yum install &lt;FQPN&gt;  # 例如：</span></p> 
<pre class="has"><code>sudo yum install docker-ce-18.03.1.ce</code></pre> 
<p style="margin-left:0pt;"><a name="1674-1529568524555"></a></p> 
<p style="margin-left:0pt;"><a name="5934-1529567428572"></a><span style="color:#111111;">8、启动并加入开机启动</span><a name="2495-1529567428572"></a></p> 
<pre class="has"><code># systemctl start docker 

# systemctl enable docker</code></pre> 
<p style="margin-left:0pt;"><a name="4827-1529567428572"></a><span style="color:#111111;">9、验证安装是否成功(有client和service两部分表示docker安装启动都成功了)</span></p> 
<p style="margin-left:0pt;"><a name="3093-1529567428572"></a></p> 
<p style="margin-left:0pt;"><a name="6294-1529568501022"></a></p> 
<pre class="has"><code># docker version</code></pre> 
<p style="margin-left:0pt;"><a name="3846-1529567428572"></a></p> 
<p style="margin-left:0pt;"><a name="8814-1529570797128"></a>10、卸载docker</p> 
<p style="margin-left:0pt;"><a name="5571-1529570822774"></a></p> 
<pre class="has"><code># yum -y remove docker-engine</code></pre> 
<p style="margin-left:0pt;"><a name="6512-1529570797281"></a></p> 
<p style="margin-left:0pt;"><a name="2120-1529567428572"></a><strong><span style="color:#111111;"><strong>注意：需要配置镜像加速器</strong></span></strong></p> 
<p style="margin-left:0pt;"><a name="8948-1529567428572"></a></p> 
<pre class="has"><code># docker search java</code></pre> 
<p style="margin-left:0pt;"><a name="3022-1529567428572"></a><span style="color:#111111;">Error response from daemon: Get https://index.docker.io/v1/search?q=java: read tcp 52.200.132.201:443:</span><span style="color:#df402a;"> i/o timeout</span></p> 
<p style="margin-left:0pt;"><a name="2813-1529567428572"></a><span style="color:#111111;">我们可以借助阿里云的镜像加速器，登录阿里云(</span><a href="https://cr.console.aliyun.com/#/accelerator" rel="nofollow"><u><span style="color:#003884;"><u>https://cr.console.aliyun.com/#/accelerator</u></span></u></a><span style="color:#393939;">)</span></p> 
<p style="margin-left:0pt;"><a name="3252-1529908744122"></a><span style="color:#393939;">可以看到镜像加速地址如下图：</span></p> 
<p style="margin-left:0pt;"><a name="8055-1529908798688"></a><img alt="" class="has" height="301" src="https://images2.imgbox.com/be/ac/vu0e8dT3_o.png" width="484"></p> 
<pre class="has"><code>#  cd /etc/docker</code></pre> 
<p style="margin-left:0pt;"><a name="9662-1529908739909"></a></p> 
<p style="margin-left:0pt;"><a name="5335-1529567428572"></a><span style="color:#111111;">查看有没有 daemon.json。这是docker默认的配置文件。</span></p> 
<p style="margin-left:0pt;"><a name="4913-1529567428572"></a><span style="color:#111111;">如果没有新建，如果有，则修改。</span><a name="3958-1529567428572"></a></p> 
<pre class="has"><code># vim daemon.json

{

  "registry-mirrors": ["https://m9r2r2uj.mirror.aliyuncs.com"]

}</code></pre> 
<p style="margin-left:0pt;"><a name="4027-1529567428572"></a><span style="color:#111111;">保存退出。</span></p> 
<p style="margin-left:0pt;"><a name="8185-1529567428572"></a><span style="color:#111111;">重启docker服务</span></p> 
<p style="margin-left:0pt;"><a name="4174-1529567428572"></a></p> 
<pre class="has"><code># service docker restart</code></pre> 
<p style="margin-left:0pt;"><a name="1072-1529567428572"></a><span style="color:#111111;">成功！</span></p> 
<p> </p> 
<h3> </h3> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14fd71f01e200eb70235b38e9ac9dc23/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">空的死循环为什么会让cpu100%</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/76e8d08728ee11fe34950a5a6c871c6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">必备之docker查看容器详情包括IP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>