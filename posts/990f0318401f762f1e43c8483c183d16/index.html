<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>法研杯(CAIL 2019)相似案例匹配任务问题汇总 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="法研杯(CAIL 2019)相似案例匹配任务问题汇总" />
<meta property="og:description" content="法研杯(CAIL 2019)相似案例匹配任务问题汇总 参考资料：https://github.com/padeoe/cail2019，在大佬的方案基础上，自己独自实现的过程中遇到的问题梳理如下：
docker: Error response from daemon: Unknown runtime specified nvidia.
See ‘docker run --help’. 首先确保安装nvidia-docker
yum install nvidia-docker2 或者 sudo apt install nvidia-docker2 然后/etc/docker/daemon.json修改如下：
{ &#34;registry-mirrors&#34;: [&#34;https://f1z25q5p.mirror.aliyuncs.com&#34;], &#34;runtimes&#34;: { &#34;nvidia&#34;: { &#34;path&#34;: &#34;nvidia-container-runtime&#34;, &#34;runtimeArgs&#34;: [] } } } 最后重启
sudo systemctl daemon-reload
sudo systemctl retstart docker
docker pull 拉取镜像 unauthorized: authentication required
解决方案：
docker login
同步时间
yum install ntp ntpdate pool.ntp.org Jupyter notebook 配置 Jupyter notebook配置
ModuleNotFoundError: No module named ‘transformers’ 这种情况出现的原因可能就是指定安装的transformers的版本太低，现在一般使用3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/990f0318401f762f1e43c8483c183d16/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-06T08:58:37+08:00" />
<meta property="article:modified_time" content="2022-09-06T08:58:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">法研杯(CAIL 2019)相似案例匹配任务问题汇总</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CAIL_2019_0"></a>法研杯(CAIL 2019)相似案例匹配任务问题汇总</h2> 
<p>参考资料：https://github.com/padeoe/cail2019，在大佬的方案基础上，自己独自实现的过程中遇到的问题梳理如下：</p> 
<ol><li>docker: Error response from daemon: Unknown runtime specified nvidia.<br> See ‘docker run --help’.</li></ol> 
<p>首先确保安装nvidia-docker</p> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> nvidia-docker2

或者
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> nvidia-docker2
</code></pre> 
<p>然后/etc/docker/daemon.json修改如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"registry-mirrors"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"https://f1z25q5p.mirror.aliyuncs.com"</span><span class="token punctuation">]</span>,
    <span class="token string">"runtimes"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"nvidia"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"path"</span><span class="token builtin class-name">:</span> <span class="token string">"nvidia-container-runtime"</span>,
            <span class="token string">"runtimeArgs"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>最后重启</p> 
<p>sudo systemctl daemon-reload</p> 
<p>sudo systemctl retstart docker</p> 
<ol start="2"><li> <p>docker pull 拉取镜像 unauthorized: authentication required</p> <p>解决方案：</p> </li></ol> 
<ul><li> <p>docker login</p> </li><li> <p>同步时间</p> <pre><code class="prism language-shell">yum <span class="token function">install</span> ntp
ntpdate pool.ntp.org
</code></pre> </li></ul> 
<ol start="3"><li>Jupyter notebook 配置</li></ol> 
<p><a href="https://jupyter-notebook.readthedocs.io/en/stable/public_server.html76%E2%80%8B" rel="nofollow">Jupyter notebook配置</a></p> 
<ol start="4"><li>ModuleNotFoundError: No module named ‘transformers’</li></ol> 
<p>这种情况出现的原因可能就是指定安装的transformers的版本太低，现在一般使用3.4版本的较多，可以尝试一：将自己安装的低版本进行升级为版本较高的transformers,即 pip install transformers==3.4。如果以上的方式仍然不能成功，我自己尝试的方式是安装transformers的时候不指定具体的版本，让机器自己安装对应的版本的transformers ，</p> 
<pre><code>pip install transformers 
</code></pre> 
<p>socket.timeout: The read operation timed out解决方案</p> 
<pre><code>pip install numpy -i https://pypi.tuna.tsinghua.edu.cn/simple/
</code></pre> 
<ol start="5"><li>IndentationError: unexpected indent</li></ol> 
<p>indentation是缩进，缩排的意思。unexpected indent 就是说“a”是一个“意外的”缩进。通过查看源代码找到缩进的字符位。<br> 把这句话的缩进取消，也就是顶格写，就可以正常运行了</p> 
<ol start="6"><li>Running as root is not recommended. Use --allow-root to bypass</li></ol> 
<pre><code>gedit /root/.jupyter/jupyter_notebook_config.py
</code></pre> 
<p>修改以下内容</p> 
<pre><code>#c.NotebookApp.allow_root = False
</code></pre> 
<p>为</p> 
<pre><code>c.NotebookApp.allow_root = True
</code></pre> 
<p>保存，重新运行程序</p> 
<pre><code>jupyter notebook
</code></pre> 
<ol start="7"><li>TypeError: <strong>init</strong>() got an unexpected keyword argument ‘encoding’</li></ol> 
<p>原因是python2和python3的差别，如示例，可删掉其中的encoding=‘utf-8’</p> 
<ol start="8"><li>Model name ‘pretrained\chinese_L-12_H-768_A-12’ was not found in model name list (bert-base-uncased, bert-large-uncased, bert-base-cased, bert-large-cased, bert-base-multilingual-uncased, bert-base-multilingual-cased, bert-base-chinese). We assumed ‘pretrained\chinese_L-12_H-768_A-12\vocab.txt’ was a path or url but couldn’t find any file associated to this path or url.</li></ol> 
<p>解决方案：</p> 
<p>下载地址：<code>https://storage.googleapis.com/bert_models/2018_11_03/chinese_L-12_H-768_A-12.zip</code></p> 
<p>然后下载的文件中解压有vocab.txt文件，放到<code>pretrained\chinese_L-12_H-768_A-12</code>就可以了</p> 
<p>缺少 config.json，修改bert_config.json文件为config.json<br> <img src="https://images2.imgbox.com/dd/c3/Ekh8Ut3E_o.png" alt="在这里插入图片描述"><br> 9. [OSError: Error no file named [‘pytorch_model.bin’, ‘tf_model.h5’, ‘model.ckpt.index’]<br> 解决方案：https://huggingface.co/gsarti/biobert-nli/tree/main</p> 
<p>下载<br> <img src="https://images2.imgbox.com/4f/75/bz4EO1yG_o.png" alt="在这里插入图片描述"><br> 10. RuntimeError: Error(s) in loading state_dict for BertForSimMatchModel: size mismatch for embeddings.word_embeddings.weight: copying a param with shape torch.Size([28996, 768]) from checkpoint, the shape in current model is torch.Size([21128, 768])<br> 原因：加载的模型的word_embedding层参数和当前model输入的参数不匹配。<br> 解决：word2id、tag2id的长度要一致。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0804f2951f7198b37ebc7de7b4eab195/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于ABAP选择屏幕部分，定义框架与不定义框架两种写法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2dce37c3a12b9cfbec304542ecff3d14/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络编程介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>