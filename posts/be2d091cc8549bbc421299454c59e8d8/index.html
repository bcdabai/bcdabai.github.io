<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【汇编】Loop指令、段前缀 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【汇编】Loop指令、段前缀" />
<meta property="og:description" content="文章目录 前言一、Loop指令1.1 Loop指令是什么？1.2 他的条件是什么？1.3 例子示例1示例2 1.4 要点总结 二、段前缀2.1 为什么要引入他2.2 对策 总结 前言 在计算机编程的世界里，了解底层的硬件操作是提升程序员能力的关键一步。汇编语言作为一种底层语言，直接操作计算机的硬件，其中的 LOOP 指令和段前缀是我们探讨的两个重要概念。LOOP 指令为我们提供了一种简洁的方式来实现循环，而段前缀则是用来指定数据存储位置的关键工具。在这篇文章中，我们将深入探讨这两个概念的作用和用法，以便读者更好地理解汇编语言的底层机制。
一、Loop指令 1.1 Loop指令是什么？ 在汇编语言中，LOOP 指令是一个循环控制指令，用来简化循环结构的编写。这个指令的作用就像你在做同样的事情一遍又一遍，而不必重复写相同的代码。
通俗解释：
假设你在写程序，需要做一件事情多次，比如打印一系列数字。使用 LOOP 就像是告诉计算机：“嘿，这里有一段代码，我要重复执行它多次。” 计算机就会明白，不用你一遍遍写相同的指令。
1.2 他的条件是什么？ 在高级语言中，我们知道，一个循环他肯定是需要一个条件的
那么我们的汇编语言也不例外，
他的条件如下：
CPU 执行loop指令时要进行的操作
①(cx)=(cx)-1；
②判断cx中的值
不为零则转至标号处执行程序
如果为零则向下执行。
要求
cx 中要提前存放循环次数，因为(cx)影响着
loop指令的执行结果
要定义一个标号
标号如下：
flag: ;you want to do other 其中flag就是标号，后面加冒号:
1.3 例子 示例1 想象你要打印数字1到10。使用 LOOP 你可以这样写：
MOV CX, 10 ; 将计数器CX设置为10
MY_LOOP: ; 这里放你要重复执行的代码，比如打印数字 LOOP MY_LOOP ; CX减1，如果不为0，跳回MY_LOOP 在这个例子中，LOOP 指令会检查 CX 寄存器的值，如果不为零，就会跳回标记为 MY_LOOP 的地方，重复执行那段代码。这样你就不需要写十次相同的代码，只需要告诉计算机循环的次数，它会帮你搞定。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/be2d091cc8549bbc421299454c59e8d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-18T13:00:00+08:00" />
<meta property="article:modified_time" content="2023-11-18T13:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【汇编】Loop指令、段前缀</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><a href="#Loop_10" rel="nofollow">一、Loop指令</a></li><li><ul><li><a href="#11_Loop_11" rel="nofollow">1.1 Loop指令是什么？</a></li><li><a href="#12__16" rel="nofollow">1.2 他的条件是什么？</a></li><li><a href="#13__42" rel="nofollow">1.3 例子</a></li><li><ul><li><a href="#1_43" rel="nofollow">示例1</a></li><li><a href="#2_56" rel="nofollow">示例2</a></li></ul> 
   </li><li><a href="#14__89" rel="nofollow">1.4 要点总结</a></li></ul> 
  </li><li><a href="#_95" rel="nofollow">二、段前缀</a></li><li><ul><li><a href="#21__109" rel="nofollow">2.1 为什么要引入他</a></li><li><a href="#22__148" rel="nofollow">2.2 对策</a></li></ul> 
  </li><li><a href="#_179" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_5"></a>前言</h2> 
<p>在计算机编程的世界里，了解底层的硬件操作是提升程序员能力的关键一步。汇编语言作为一种底层语言，直接操作计算机的硬件，其中的 LOOP 指令和段前缀是我们探讨的两个重要概念。LOOP 指令为我们提供了一种简洁的方式来实现循环，而段前缀则是用来指定数据存储位置的关键工具。在这篇文章中，我们将深入探讨这两个概念的作用和用法，以便读者更好地理解汇编语言的底层机制。</p> 
<hr> 
<h2><a id="Loop_10"></a>一、Loop指令</h2> 
<h3><a id="11_Loop_11"></a>1.1 Loop指令是什么？</h3> 
<p>在汇编语言中，LOOP 指令是一个循环控制指令，用来简化循环结构的编写。这个指令的作用就像你在做同样的事情一遍又一遍，而不必重复写相同的代码。<br> 通俗解释：<br> 假设你在写程序，需要做一件事情多次，比如打印一系列数字。使用 LOOP 就像是告诉计算机：“嘿，这里有一段代码，我要重复执行它多次。” 计算机就会明白，不用你一遍遍写相同的指令。</p> 
<h3><a id="12__16"></a>1.2 他的条件是什么？</h3> 
<p>在高级语言中，我们知道，一个循环他肯定是需要一个条件的<br> 那么我们的汇编语言也不例外，<br> 他的条件如下：<br> CPU 执行loop指令时要进行的操作<br> ①(cx)=(cx)-1；<br> ②判断cx中的值<br> 不为零则转至标号处执行程序<br> 如果为零则向下执行。</p> 
<p>要求<br> cx 中要提前存放循环次数，因为(cx)影响着<br> loop指令的执行结果<br> 要定义一个标号</p> 
<p>标号如下：</p> 
<pre><code class="prism language-bash">flag:
	<span class="token punctuation">;</span>you want to <span class="token keyword">do</span>

other
</code></pre> 
<p>其中flag就是标号，后面加冒号:</p> 
<h3><a id="13__42"></a>1.3 例子</h3> 
<h4><a id="1_43"></a>示例1</h4> 
<p>想象你要打印数字1到10。使用 LOOP 你可以这样写：<br> MOV CX, 10 ; 将计数器CX设置为10</p> 
<pre><code class="prism language-bash">MY_LOOP:
    <span class="token punctuation">;</span> 这里放你要重复执行的代码，比如打印数字

    LOOP MY_LOOP <span class="token punctuation">;</span> CX减1，如果不为0，跳回MY_LOOP
</code></pre> 
<p>在这个例子中，LOOP 指令会检查 CX 寄存器的值，如果不为零，就会跳回标记为 MY_LOOP 的地方，重复执行那段代码。这样你就不需要写十次相同的代码，只需要告诉计算机循环的次数，它会帮你搞定。</p> 
<h4><a id="2_56"></a>示例2</h4> 
<p>本示例为把2加11次，即2^11</p> 
<pre><code class="prism language-bash">assume cs:codesg
codesg segment

  mov cx,11
  mov ax,2
s: <span class="token function">add</span> ax,ax
   loop s

  mov ax,4c00h
  int 21h

codesg ends
end
</code></pre> 
<p><img src="https://images2.imgbox.com/01/6b/A7IzaluK_o.png" alt="在这里插入图片描述"></p> 
<p>我们通过在DOSBox中编译<br> <img src="https://images2.imgbox.com/02/58/sQbmeWk6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5f/18/41DvkkzI_o.png" alt="在这里插入图片描述"></p> 
<p>然后使用debug进行追踪<br> <img src="https://images2.imgbox.com/52/39/ZnPMJfwU_o.png" alt="在这里插入图片描述"><br> 使用r命令查看寄存器<br> <img src="https://images2.imgbox.com/71/6e/4VtWrXlN_o.png" alt="在这里插入图片描述"><br> 使用t命令单步走<br> <img src="https://images2.imgbox.com/8f/8b/FULgtJA3_o.png" alt="在这里插入图片描述"><br> 可以观察寄存器的值和后面要执行的命令可以发现，loop指令已经成功执行了。</p> 
<h3><a id="14__89"></a>1.4 要点总结</h3> 
<p>用cx和loop 指令相配合实现循环功能的三个要点：<br> （1）在cx中存放循环次数；<br> （2）用标号指定循环开始的位置；<br> （3）在标号和loop 指令的中间，写上要循环执行的程序段（循环体）。</p> 
<h2><a id="_95"></a>二、段前缀</h2> 
<p>在汇编语言中，段前缀是一种用来指定数据存储位置的方式。在实模式下，x86 架构的计算机使用段寄存器来确定程序的数据在内存中的位置。通俗地说，段前缀就像是你告诉计算机：“我的数据在哪一块内存中”。<br> 举例说明：<br> 假设你有一块内存，存储了一串字符串。如果你想告诉计算机去读取这个字符串，你需要使用段前缀来指定这块内存的位置。<br> 比如，DS（数据段寄存器）是一个常用的段寄存器。使用 DS 作为段前缀，你可以告诉计算机：“嘿，我的数据在 DS 寄存器指示的那一块内存里。”<br> MOV AX, DS ; 把数据段寄存器的值加载到通用寄存器AX中<br> MOV DS, AX ; 设置数据段寄存器为AX中的值，即指向你想访问的内存块</p> 
<p>; 然后你可以使用寄存器BX来指定内存中的偏移量，访问具体的数据<br> MOV BX, 0 ; 从内存块的开始位置开始<br> MOV AL, [BX] ; 读取内存中BX指定位置的数据</p> 
<p>这样，通过合理设置段前缀，你可以方便地在汇编语言中定位和访问存储在内存中的数据。</p> 
<h3><a id="21__109"></a>2.1 为什么要引入他</h3> 
<p>Debug中，mov al, [0]的功能是<br> ——将DS:0存储单元的值传给AL</p> 
<p>将下面这个代码编译，链接使用debug打开</p> 
<pre><code class="prism language-bash">assume cs:codesg
codesg segment

  mov ax,2000h
  mov ds,ax
  mov al,<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  mov bl,<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  mov cl,<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

  mov ax,4c00h
  int 21h

codesg ends
end
</code></pre> 
<p><img src="https://images2.imgbox.com/f4/1b/VJ1s0Lb5_o.png" alt="在这里插入图片描述"></p> 
<p>使用u命令查看</p> 
<p><img src="https://images2.imgbox.com/83/f4/ShvfxsSE_o.png" alt="在这里插入图片描述"><br> 他就变成</p> 
<pre><code class="prism language-bash">mov al,00
mov bl,01
mov cl,02
</code></pre> 
<p>这属实让人大跌眼镜</p> 
<h3><a id="22__148"></a>2.2 对策</h3> 
<p>对策：在[idata]前显式地写上段寄存器</p> 
<pre><code class="prism language-bash">mov ax,2000h
mov ds,ax
mov bx,0
mov al,ds:<span class="token punctuation">[</span>bx<span class="token punctuation">]</span>
mov ax,2000h
mov ds,ax
mov al,ds:<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b6/7c/4gWt9RYJ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/16/cb/vtjZgYPN_o.png" alt="在这里插入图片描述"><br> 现在可以看到就是[0001]了</p> 
<p>小结（在程序中）：<br> mov al,[0]：(al)=0，同mov al,0<br> mov al,ds:[0]：(al)=((ds)*16+0)<br> mov al,[bx]：(al)=((ds)*16+(bx))<br> mov al,ds:[bx]：与mov al,[bx]相同</p> 
<p>这些出现在访问内存单元的指令中，用于显式地指明内存单元的段地址的“ds:”、“cs:”、“ss:”或“es:”，在汇编语言中称为段前缀。</p> 
<hr> 
<h2><a id="_179"></a>总结</h2> 
<p>汇编语言的学习不仅仅是为了理解代码的执行流程，更是为了掌握计算机底层的工作原理。本文中，我们深入研究了 LOOP 指令和段前缀的概念。LOOP 让我们能够更轻松地实现循环结构，提高代码的复用性和可读性；而段前缀则是在实模式下指定数据存储位置的关键，为程序员提供了对内存的更精准控制。通过理解和熟练运用这两个概念，我们可以更高效地编写汇编代码，更深入地理解计算机底层运作的原理。希望本文对读者在汇编语言的学习和应用中有所帮助。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f79ba4ad229b15123c3399c81492366b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Unity3D引擎RPG游戏设计与开发</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/323ea83c966adc521bb2e4e443a5c879/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IEEE802.11协议帧详解(转载)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>