<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>邮件发送功能(springBoot之自定义启动器)手把手教你制作邮箱 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="邮件发送功能(springBoot之自定义启动器)手把手教你制作邮箱" />
<meta property="og:description" content="目录
一、介绍stater
1、stater的理念：
2、stater的实现：
3、stater的原理图：
二、 java操作邮件(邮件的使用)
步骤：
1、导入依赖
2、重写yml资源文件
3、写好测试类
4、进行测试
三、邮箱的制作(自定义启动器)
步骤：
1、先导入依赖
2、创建yml文件
获取授权码链接：什么是授权码，它又是如何设置？_QQ邮箱帮助中心
3、创建实体类资源文件
4、定义一个发送接口，并且实现接口
5、进行测试
四、使用邮箱
1、提高邮箱使用灵活性
步骤：
1、导入yml文件注入依赖
2、在resource文件下添加文件
2、将整个项目打包成jar包
3、到之前的项目中导入邮箱依赖(必须使用同一个本地仓库)
4、在测试类中加入注解
5、进行测试：运行成功
五、结合redis实现操作
1、步骤
1、导入操作redis的依赖
2、在applicaion.yml资源文件中加入redis资源
3、将帮助类写入到项目中
4、新建一个实体类和控制类
​​ 2、优化邮箱使用
解决方法：
步骤：
一、介绍stater 1、stater的理念： starter会把所有用到的依赖都给包含进来，避免了开发者自己去引入依赖所带来的麻烦。 需要注意的是不同的starter是为了解决不同的依赖，所以它们内部的实现可能会有很大的差异，例如jpa的starter和Redis的starter可能实现就不一样，这是因为starter的本质在于synthesize， 这是一层在逻辑层面的抽象，也许这种理念有点类似于Docker，因为它们都是在做一个“包装”的操作。
2、stater的实现： 虽然不同的starter实现起来各有差异， 但是他们基本上都会使用到两个相同的内容：ConfigurationProperties和AutoConfiguration。 因为SpringBoot坚信“约定大于配置”这一理念，所以我们使用ConfigurationProperties来保存我们的配置， 并且这些配置都可以有一个默认值，即在我们没有主动覆写原始配置的情况下，默认值就会生效，这在很多情况下是非常有用的。除此之外，starter的ConfigurationProperties还使得所有的配置属性被聚集到一个文件中 （一般在resources目录下的application.properties），这样我们就告别了Spring项目中XML地狱。
3、stater的原理图： 注意：其中最关键的是配置文件，用户可以自定义配置文件将自己的邮箱地址写入，以便提高邮箱灵活性
二、 java操作邮件(邮件的使用) 步骤： 1、导入依赖 &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt; &lt;/dependency&gt; 2、重写yml资源文件 spring: application: name: springBoot_06 mail: host: smtp.qq.com username: 自己qq@qq." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b83c72a2ebc439ea45f30b3899bde045/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-06T11:15:00+08:00" />
<meta property="article:modified_time" content="2023-04-06T11:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">邮件发送功能(springBoot之自定义启动器)手把手教你制作邮箱</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8Dstater-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8Dstater" rel="nofollow">一、介绍stater</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81stater%E7%9A%84%E7%90%86%E5%BF%B5%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81stater%E7%9A%84%E7%90%86%E5%BF%B5%EF%BC%9A" rel="nofollow">        1、stater的理念：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81stater%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81stater%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A" rel="nofollow">        2、stater的实现：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81stater%E7%9A%84%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81stater%E7%9A%84%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%9A" rel="nofollow">        3、stater的原理图：</a></p> 
<p id="%E4%BA%8C%E3%80%81%20java%E6%93%8D%E4%BD%9C%E9%82%AE%E4%BB%B6(%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8)-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%20java%E6%93%8D%E4%BD%9C%E9%82%AE%E4%BB%B6%28%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%29" rel="nofollow">二、 java操作邮件(邮件的使用)</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">         步骤：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96" rel="nofollow">                     1、导入依赖</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E9%87%8D%E5%86%99yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E9%87%8D%E5%86%99yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6" rel="nofollow">                     2、重写yml资源文件</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%86%99%E5%A5%BD%E6%B5%8B%E8%AF%95%E7%B1%BB-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%86%99%E5%A5%BD%E6%B5%8B%E8%AF%95%E7%B1%BB" rel="nofollow">                     3、写好测试类</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95" rel="nofollow">                     4、进行测试</a></p> 
<p id="%E4%B8%89%E3%80%81%E9%82%AE%E7%AE%B1%E7%9A%84%E5%88%B6%E4%BD%9C(%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%AF%E5%8A%A8%E5%99%A8)-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E9%82%AE%E7%AE%B1%E7%9A%84%E5%88%B6%E4%BD%9C%28%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%AF%E5%8A%A8%E5%99%A8%29" rel="nofollow">三、邮箱的制作(自定义启动器)</a></p> 
<p id="%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">步骤：</a></p> 
<p id="1%E3%80%81%E5%85%88%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%85%88%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96" rel="nofollow">1、先导入依赖</a></p> 
<p id="2%E3%80%81%E5%88%9B%E5%BB%BAyml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E5%88%9B%E5%BB%BAyml%E6%96%87%E4%BB%B6" rel="nofollow">2、创建yml文件</a></p> 
<p id="%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81%E9%93%BE%E6%8E%A5%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF%E6%8E%88%E6%9D%83%E7%A0%81%EF%BC%8C%E5%AE%83%E5%8F%88%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%EF%BC%9F_QQ%E9%82%AE%E7%AE%B1%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83-toc" style="margin-left:80px;"><a href="#%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81%E9%93%BE%E6%8E%A5%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF%E6%8E%88%E6%9D%83%E7%A0%81%EF%BC%8C%E5%AE%83%E5%8F%88%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%EF%BC%9F_QQ%E9%82%AE%E7%AE%B1%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83" rel="nofollow">获取授权码链接：什么是授权码，它又是如何设置？_QQ邮箱帮助中心</a></p> 
<p id="3%E3%80%81%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6" rel="nofollow">3、创建实体类资源文件</a></p> 
<p id="4%E3%80%81%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3" rel="nofollow">4、定义一个发送接口，并且实现接口</a></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<p id="5%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95" rel="nofollow">5、进行测试</a></p> 
<p id="%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1" rel="nofollow">四、使用邮箱</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%8F%90%E9%AB%98%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8%E7%81%B5%E6%B4%BB%E6%80%A7-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%8F%90%E9%AB%98%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8%E7%81%B5%E6%B4%BB%E6%80%A7" rel="nofollow">        1、提高邮箱使用灵活性</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">                 步骤：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E5%AF%BC%E5%85%A5yml%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E5%AF%BC%E5%85%A5yml%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E4%BE%9D%E8%B5%96" rel="nofollow">                          1、导入yml文件注入依赖</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%9C%A8resource%E6%96%87%E4%BB%B6%E4%B8%8B%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%9C%A8resource%E6%96%87%E4%BB%B6%E4%B8%8B%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6" rel="nofollow">                          2、在resource文件下添加文件</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%B0%86%E6%95%B4%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90jar%E5%8C%85-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%B0%86%E6%95%B4%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90jar%E5%8C%85" rel="nofollow">        2、将整个项目打包成jar包</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E5%88%B0%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AF%BC%E5%85%A5%E9%82%AE%E7%AE%B1%E4%BE%9D%E8%B5%96(%E5%BF%85%E9%A1%BB%E4%BD%BF%E7%94%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93)-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E5%88%B0%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AF%BC%E5%85%A5%E9%82%AE%E7%AE%B1%E4%BE%9D%E8%B5%96%28%E5%BF%85%E9%A1%BB%E4%BD%BF%E7%94%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%29" rel="nofollow">        3、到之前的项目中导入邮箱依赖(必须使用同一个本地仓库)</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%204%E3%80%81%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%204%E3%80%81%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3" rel="nofollow">        4、在测试类中加入注解</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%205%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%9A%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%205%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%9A%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F" rel="nofollow">        5、进行测试：运行成功</a></p> 
<p id="%E4%BA%94%E3%80%81%E7%BB%93%E5%90%88redis%E5%AE%9E%E7%8E%B0%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E7%BB%93%E5%90%88redis%E5%AE%9E%E7%8E%B0%E6%93%8D%E4%BD%9C" rel="nofollow">五、结合redis实现操作</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%AD%A5%E9%AA%A4" rel="nofollow">          1、步骤</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E6%93%8D%E4%BD%9Credis%E7%9A%84%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E6%93%8D%E4%BD%9Credis%E7%9A%84%E4%BE%9D%E8%B5%96" rel="nofollow">                     1、导入操作redis的依赖</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E5%9C%A8applicaion.yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8A%A0%E5%85%A5redis%E8%B5%84%E6%BA%90-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E5%9C%A8applicaion.yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8A%A0%E5%85%A5redis%E8%B5%84%E6%BA%90" rel="nofollow">                     2、在applicaion.yml资源文件中加入redis资源</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%B0%86%E5%B8%AE%E5%8A%A9%E7%B1%BB%E5%86%99%E5%85%A5%E5%88%B0%E9%A1%B9%E7%9B%AE%E4%B8%AD-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%B0%86%E5%B8%AE%E5%8A%A9%E7%B1%BB%E5%86%99%E5%85%A5%E5%88%B0%E9%A1%B9%E7%9B%AE%E4%B8%AD" rel="nofollow">                     3、将帮助类写入到项目中</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%92%8C%E6%8E%A7%E5%88%B6%E7%B1%BB-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%92%8C%E6%8E%A7%E5%88%B6%E7%B1%BB" rel="nofollow">                     4、新建一个实体类和控制类</a></p> 
<p id="%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F%EF%BC%9A%E2%80%8B%E2%80%8B%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E4%BC%98%E5%8C%96%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8-toc" style="margin-left:40px;"><a href="#%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F%EF%BC%9A%E2%80%8B%E2%80%8B%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E4%BC%98%E5%8C%96%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8" rel="nofollow">​​          2、优化邮箱使用</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">                    解决方法：</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">                    步骤：</a></p> 
<hr id="hr-toc"> 
<h2></h2> 
<h2 id="%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8Dstater">一、介绍stater</h2> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81stater%E7%9A%84%E7%90%86%E5%BF%B5%EF%BC%9A">        1、stater的理念：</h3> 
<blockquote> 
 <p><strong>starter会把所有用到的依赖都给包含进来，避免了开发者自己去引入依赖所带来的麻烦。 需要注意的是不同的starter是为了解决不同的依赖，所以它们内部的实现可能会有很大的差异，例如jpa的starter和Redis的starter可能实现就不一样，这是因为starter的本质在于synthesize， 这是一层在逻辑层面的抽象，也许这种理念有点类似于Docker，因为它们都是在做一个“包装”的操作。</strong></p> 
</blockquote> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81stater%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%9A">        2、stater的实现：</h3> 
<blockquote> 
 <p><strong>虽然不同的starter实现起来各有差异， 但是他们基本上都会使用到两个相同的内容：ConfigurationProperties和AutoConfiguration。 因为SpringBoot坚信“约定大于配置”这一理念，所以我们使用ConfigurationProperties来保存我们的配置， 并且这些配置都可以有一个默认值，即在我们没有主动覆写原始配置的情况下，默认值就会生效，这在很多情况下是非常有用的。除此之外，starter的ConfigurationProperties还使得所有的配置属性被聚集到一个文件中 （一般在resources目录下的application.properties），这样我们就告别了Spring项目中XML地狱。</strong></p> 
</blockquote> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81stater%E7%9A%84%E5%8E%9F%E7%90%86%E5%9B%BE%EF%BC%9A">        3、stater的原理图：</h3> 
<p><img alt="" height="550" src="https://images2.imgbox.com/ef/c8/GhsgSdRD_o.png" width="957"></p> 
<p><strong>注意：其中最关键的是配置文件，用户可以自定义配置文件将自己的邮箱地址写入，以便提高邮箱</strong><strong>灵活性</strong></p> 
<p></p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%20java%E6%93%8D%E4%BD%9C%E9%82%AE%E4%BB%B6(%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8)">二、 java操作邮件(邮件的使用)</h2> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A">         步骤：</h3> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">                     1、导入依赖</h4> 
<pre><code class="language-XML">&lt;dependency&gt;   
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;   
&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E9%87%8D%E5%86%99yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">                     2、重写yml资源文件</h4> 
<blockquote> 
 <p></p> 
 <pre><strong>spring:
  application:
    name: springBoot_06
  mail:
    host: smtp.qq.com
    username: 自己qq@qq.com
    password: exgdllmxqrhrieae
    properties:
     mail:
      smtp:
       auth: true
       starttls:
        enable: true
        required: true</strong>
</pre> 
</blockquote> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%86%99%E5%A5%BD%E6%B5%8B%E8%AF%95%E7%B1%BB">                     3、写好测试类</h4> 
<pre><code class="language-java">package com.zj.code;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;

@SpringBootTest
class SpringBoot06ApplicationTests {

    @Autowired
    JavaMailSender mailSender;

    @Test
    void contextLoads() {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom("1551506470@qq.com");
        message.setTo("1551506470@qq.com");
        message.setSubject("主题：简单邮件");
        message.setText("测试邮件内容");
        mailSender.send(message);


    }
}
</code></pre> 
<p><strong>注意：在测试类中特别要注意的地方就是要将以下注解打上</strong></p> 
<blockquote> 
 <pre><strong>@Autowired
JavaMailSender mailSender;</strong></pre> 
</blockquote> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95">                     4、进行测试</h4> 
<p><img alt="" height="727" src="https://images2.imgbox.com/3e/62/XHW8FLyY_o.png" width="1200"></p> 
<p><strong>测试成功</strong></p> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E9%82%AE%E7%AE%B1%E7%9A%84%E5%88%B6%E4%BD%9C(%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%AF%E5%8A%A8%E5%99%A8)">三、邮箱的制作(自定义启动器)</h2> 
<h3 id="%E6%AD%A5%E9%AA%A4%EF%BC%9A">步骤：</h3> 
<h4 id="1%E3%80%81%E5%85%88%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96">1、先导入依赖</h4> 
<pre><code class="language-XML">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<h4 id="2%E3%80%81%E5%88%9B%E5%BB%BAyml%E6%96%87%E4%BB%B6">2、创建yml文件</h4> 
<p><strong>注意：在yml文件中四个属性的意思分别是</strong></p> 
<blockquote> 
 <pre><strong>email:
 enable: true  --是否开启邮箱验证
 host: smtp.qq.com  --主机
 username:自己qq@qq.com --账号(发送方)
 password: uqoimlnpljuqihdd  --密码（注意，此处这里是<span style="color:#fe2c24;">授权码</span>，而不是密码）</strong></pre> 
</blockquote> 
<h4 id="%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83%E7%A0%81%E9%93%BE%E6%8E%A5%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF%E6%8E%88%E6%9D%83%E7%A0%81%EF%BC%8C%E5%AE%83%E5%8F%88%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%EF%BC%9F_QQ%E9%82%AE%E7%AE%B1%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83">获取授权码链接：<a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=28&amp;&amp;no=1001256" rel="nofollow" title="什么是授权码，它又是如何设置？_QQ邮箱帮助中心">什么是授权码，它又是如何设置？_QQ邮箱帮助中心</a></h4> 
<h4 id="3%E3%80%81%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">3、创建实体类资源文件</h4> 
<pre><strong>EmailProperties：</strong></pre> 
<pre><code class="language-java">package com.yzm.yzmspringbootstarter;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

/**
 * @author T440s
 */


@NoArgsConstructor
@AllArgsConstructor
@Data
@ConfigurationProperties(prefix= "email")
public class EmailProperties {

    private String host;
    private String username;
    private String password;
    private String enable;

}
</code></pre> 
<p><strong>关于四个注解的说明：</strong></p> 
<blockquote> 
 <p><strong>@NoArgsConstructor：无参构造<br> @AllArgsConstructor：有参构造<br> @Data：get和set方法<br> @ConfigurationProperties(prefix= "email")作用：根据属性完成yml注入（需要bean对象被spring容器管理）</strong></p> 
</blockquote> 
<p></p> 
<h4 id="4%E3%80%81%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3">4、定义一个发送接口，并且实现接口</h4> 
<pre><strong>接口：EmailSender：</strong></pre> 
<pre><code class="language-java">package com.yzm.yzmspringbootstarter;

public interface EmailSender {
    String sendText(String receiver);
}
</code></pre> 
<p id="%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%9A"><strong>接口实现类：</strong></p> 
<pre><strong>EmailSenderImpl：</strong></pre> 
<pre><code class="language-java">package com.yzm.yzmspringbootstarter;


import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.condition.ConditionalOnExpression;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Configuration;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSenderImpl;

import java.util.Properties;

@Configuration
@Slf4j
@EnableConfigurationProperties(value = EmailProperties.class)
@ConditionalOnProperty(prefix = "email", value = "enable", havingValue = "true")
public class EmailSenderImpl implements EmailSender {

    private final EmailProperties emailProperties;
    private final JavaMailSenderImpl mailSender;


    @Autowired
    public EmailSenderImpl(EmailProperties emailProperties) {
        this.emailProperties = emailProperties;
        mailSender = new JavaMailSenderImpl();
        mailSender.setHost(emailProperties.getHost());
        mailSender.setUsername(emailProperties.getUsername());
        mailSender.setPassword(emailProperties.getPassword());
        mailSender.setDefaultEncoding("Utf-8");
        Properties p = new Properties();
        p.setProperty("mail.smtp.auth", "true");
        p.setProperty("mail.smtp.starttl .enable", "true");
        p.setProperty("mail.smtp.starttls.required", "true");
        mailSender.setJavaMailProperties(p);
    }


    @Override//此方法是发送验证码，并且是要显示接受方
    public String sendText(String receiver) {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom(emailProperties.getUsername());
        message.setTo(receiver);
        message.setSubject("网站验证码");
        message.setText("aabb");
        mailSender.send(message);
        return "aabb";
    }

}
</code></pre> 
<p><strong>关于此类四个注解的说明：</strong></p> 
<blockquote> 
 <p><strong>@Configuration：将此类声明为组件，并且交给spring进行管理<br> @Slf4j：日志输出<br> @EnableConfigurationProperties(value = EmailProperties.class)完成对应元素组件化<br> @ConditionalOnProperty(prefix = "email", value = "enable", havingValue = "true")</strong></p> 
 <p><strong>控制邮件功能是否可用</strong></p> 
</blockquote> 
<h4></h4> 
<h4 id="5%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95">5、进行测试</h4> 
<p><strong>测试类：</strong></p> 
<pre><code class="language-java">package com.yzm.yzmspringbootstarter;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class  YzmSpringBootStarterApplicationTests {


    @Autowired
    private EmailSender sender;

    @Test
    void contextLoads() {
        sender.sendText("1551506470@qq.com");
    }
}
</code></pre> 
<p><img alt="" height="674" src="https://images2.imgbox.com/79/7e/8WWtPvTP_o.png" width="1200"></p> 
<p><strong>测试成功</strong></p> 
<p><strong>注意：在制作邮箱的过程中需要注意两个问题：</strong></p> 
<p><strong>1、在yml文件中的email中的格式要规范(中间要空一格)</strong></p> 
<blockquote> 
 <p></p> 
 <pre><strong>（）（）email:
 enable: true
 host: smtp.qq.com
 username: 自己qq@qq.com
 password: uqoimlnpljuqihdd</strong></pre> 
</blockquote> 
<p><strong>2、账号以及收件方的都是写qq号码+qq.com，而不是创建邮箱时的账号</strong></p> 
<blockquote> 
 <p></p> 
 <pre><strong>username: 自己qq@qq.com</strong>
</pre> 
</blockquote> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1">四、使用邮箱</h2> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%8F%90%E9%AB%98%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8%E7%81%B5%E6%B4%BB%E6%80%A7">        1、提高邮箱使用灵活性</h3> 
<blockquote> 
 <p><strong>由于每个人的邮箱都不一样，<span style="color:#fe2c24;">不可能将发送和收件人的邮箱以及是否启用邮箱都固定</span>，所以要将yml中的内容进行更改，提高邮箱使用灵活性。</strong></p> 
</blockquote> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%EF%BC%9A">                 步骤：</h4> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E5%AF%BC%E5%85%A5yml%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E4%BE%9D%E8%B5%96">                          1、导入yml文件注入依赖</h4> 
<pre><code class="language-XML">     &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
     &lt;/dependency&gt;


     &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.4.1&lt;/version&gt;
                &lt;configuration&gt;&lt;classifier&gt;exec&lt;/classifier&gt;&lt;/configuration&gt;
     &lt;/plugin&gt;


</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%9C%A8resource%E6%96%87%E4%BB%B6%E4%B8%8B%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6">                          2、在resource文件下添加文件</h4> 
<blockquote> 
 <p><strong>META-INF &gt; spring.factories</strong></p> 
 <p><strong>文件内容：</strong></p> 
 <p><strong>org.springframework.boot.autoconfigure.</strong></p> 
 <p><strong>EnableAutoConfiguration=com.yzm.yzmspringbootstarter.EmailSenderImpl</strong></p> 
 <p></p> 
 <p><strong>此段代码的说明：当整个项目运行时，对应类就会随着运行</strong></p> 
</blockquote> 
<p><strong>查看是否添加文件成功：</strong></p> 
<p><img alt="" height="727" src="https://images2.imgbox.com/a8/ef/VCYTBpL4_o.png" width="1200"></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E5%B0%86%E6%95%B4%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90jar%E5%8C%85">        2、将整个项目打包成jar包</h3> 
<p><img alt="" height="729" src="https://images2.imgbox.com/6c/fc/vWyegGCH_o.png" width="1200"></p> 
<p><strong>最后到本地仓库中查看有没有yzm这个文件夹(这个名字就是自己命名的)可以在pom文件中查看</strong></p> 
<blockquote> 
 <p></p> 
 <pre><strong>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;<span style="color:#fe2c24;">com.yzm</span>&lt;/groupId&gt;
&lt;artifactId&gt;<span style="color:#fe2c24;">yzm-spring-boot-starter</span>&lt;/artifactId&gt;
&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;name&gt;yzm-spring-boot-starter&lt;/name&gt;
&lt;description&gt;yzm-spring-boot-starter&lt;/description&gt;</strong></pre> 
</blockquote> 
<p><strong> 打包成功。</strong></p> 
<p><img alt="" height="728" src="https://images2.imgbox.com/51/bf/vRNrg0oz_o.png" width="1200"></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%203%E3%80%81%E5%88%B0%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AF%BC%E5%85%A5%E9%82%AE%E7%AE%B1%E4%BE%9D%E8%B5%96(%E5%BF%85%E9%A1%BB%E4%BD%BF%E7%94%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93)">        3、到之前的项目中导入邮箱依赖(必须使用同一个本地仓库)</h3> 
<blockquote> 
 <pre><strong>&lt;dependency&gt;
    &lt;groupId&gt;com.yzm&lt;/groupId&gt;
    &lt;artifactId&gt;yzm-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</strong></pre> 
</blockquote> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%204%E3%80%81%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%B3%A8%E8%A7%A3">        4、在测试类中加入注解</h3> 
<blockquote> 
 <pre><strong>@Autowired
private EmailSender emailSender;</strong></pre> 
</blockquote> 
<p><strong>导入此注解时会进行报错，原因：没有配置资源文件</strong></p> 
<blockquote> 
 <pre><strong>spring:
  application:
    name: springBoot_06
email:
  host: smtp.qq.com
  username: 自己qq@qq.com
  password: exgdllmxqrhrieae</strong></pre> 
</blockquote> 
<p><img alt="" height="725" src="https://images2.imgbox.com/a6/b1/oFp6FunE_o.png" width="1200"></p> 
<p><strong> 加了基本配置文件后，还是报错（原因：没有开启邮箱，有提示说明导入依赖成功）</strong></p> 
<p><img alt="" height="729" src="https://images2.imgbox.com/79/7c/zo12VrXA_o.png" width="1200"><strong> 导入成功</strong><img alt="" height="729" src="https://images2.imgbox.com/d2/ab/lKFPiiRY_o.png" width="1200"></p> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%205%E3%80%81%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%9A%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F">        5、进行测试：运行成功</h3> 
<p><img alt="" height="453" src="https://images2.imgbox.com/aa/86/gGuBgluf_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<h2 id="%E4%BA%94%E3%80%81%E7%BB%93%E5%90%88redis%E5%AE%9E%E7%8E%B0%E6%93%8D%E4%BD%9C">五、结合redis实现操作</h2> 
<blockquote> 
 <p><strong>       由于现在数据繁多，不可能每次都会进入到数据库拿取数据，这时候就会运用缓存来提高程序运行速度。  </strong> </p> 
</blockquote> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201%E3%80%81%E6%AD%A5%E9%AA%A4">          1、步骤</h3> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A01%E3%80%81%E5%AF%BC%E5%85%A5%E6%93%8D%E4%BD%9Credis%E7%9A%84%E4%BE%9D%E8%B5%96">                     1、导入操作redis的依赖</h4> 
<pre><code class="language-XML">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A02%E3%80%81%E5%9C%A8applicaion.yml%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8A%A0%E5%85%A5redis%E8%B5%84%E6%BA%90">                     2、在applicaion.yml资源文件中加入redis资源</h4> 
<pre><code class="language-XML">  redis:
    database: 0         #数据库索引
    host: 127.0.0.1     #主机位置
    port: 6379          #端口
    password:            #密码
    jedis:
      pool:
        max-active: 8   #最大连接数
        max-wait: -1    #最大阻塞等待时间(负数表示没限制)
        max-idle: 8     #最大空闲
        min-idle: 0     #最小空闲
    timeout: 10000      #连接超时时间</code></pre> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A03%E3%80%81%E5%B0%86%E5%B8%AE%E5%8A%A9%E7%B1%BB%E5%86%99%E5%85%A5%E5%88%B0%E9%A1%B9%E7%9B%AE%E4%B8%AD">                     3、将帮助类写入到项目中</h4> 
<p><strong>conf---&gt;CrossConfiguration</strong></p> 
<pre><code class="language-java">package com.zj.code.conf;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

/**
 * @author 银喾
 */
@Configuration
public class CrossConfiguration extends WebMvcConfigurerAdapter {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry
                /*可以跨域的路径*/
                .addMapping("/**")
                /*可以跨域的ip*/
                .allowedOrigins("*")
                /*可以跨域的方法*/
                .allowedMethods("*")
                /*设置预检请求多就失效*/
                .maxAge(6000)
                /*允许携带的头部*/
                .allowedHeaders("*");
    }

}
</code></pre> 
<pre><strong>conf---&gt;RedisConfiguration</strong></pre> 
<pre><code class="language-java">package com.zj.code.conf;

import org.springframework.cache.CacheManager;
import org.springframework.cache.annotation.CachingConfigurerSupport;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.cache.interceptor.KeyGenerator;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Primary;
import org.springframework.data.redis.cache.RedisCacheConfiguration;
import org.springframework.data.redis.cache.RedisCacheManager;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.RedisSerializationContext;
import org.springframework.data.redis.serializer.RedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;
import org.springframework.util.ClassUtils;

import java.lang.reflect.Array;
import java.lang.reflect.Method;
import java.time.Duration;

/**
 * @author 银喾
 */
@Configuration
@EnableCaching
public class RedisConfiguration extends CachingConfigurerSupport {

    @Bean
    @Primary
    CacheManager cacheManager(RedisConnectionFactory factory) {
        RedisCacheConfiguration cacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()
                .computePrefixWith(cacheName -&gt; cacheName + ":-cache-:")
                /*设置缓存过期时间*/
                .entryTtl(Duration.ofHours(1))
                /*禁用缓存空值,不缓存null校验*/
                .disableCachingNullValues()
                /*设置CacheManager的值序列化方式为json序列化,可使用加入@Class属性*/
                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(
                        new GenericJackson2JsonRedisSerializer()
                ));
        /*使用RedisCacheConfiguration创建RedisCacheManager*/
        RedisCacheManager manager = RedisCacheManager.builder(factory)
                .cacheDefaults(cacheConfiguration)
                .build();
        return manager;
    }

    @Bean
    @Primary
    public RedisTemplate redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;String, Object&gt;();
        redisTemplate.setConnectionFactory(factory);
        RedisSerializer stringSerializer = new StringRedisSerializer();
        /* key序列化 */
        redisTemplate.setKeySerializer(stringSerializer);
        /* value序列化 */
        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());
        /* Hash key序列化 */
        redisTemplate.setHashKeySerializer(stringSerializer);
        /* Hash value序列化 */
        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());
        redisTemplate.afterPropertiesSet();
        return redisTemplate;
    }

    @Bean
    @Primary
    @Override
    public KeyGenerator keyGenerator() {
        return (Object target, Method method, Object... params) -&gt; {
            final int NO_PARAM_KEY = 0;
            final int NULL_PARAM_KEY = 53;
            StringBuilder key = new StringBuilder();
            /* Class.Method: */
            key.append(target.getClass().getSimpleName())
                    .append(".")
                    .append(method.getName())
                    .append(":");
            if (params.length == 0) {
                return key.append(NO_PARAM_KEY).toString();
            }
            int count = 0;
            for (Object param : params) {
                /* 参数之间用,进行分隔 */
                if (0 != count) {
                    key.append(',');
                }
                if (param == null) {
                    key.append(NULL_PARAM_KEY);
                } else if (ClassUtils.isPrimitiveArray(param.getClass())) {
                    int length = Array.getLength(param);
                    for (int i = 0; i &lt; length; i++) {
                        key.append(Array.get(param, i));
                        key.append(',');
                    }
                } else if (ClassUtils.isPrimitiveOrWrapper(param.getClass()) || param instanceof String) {
                    key.append(param);
                } else {
                    /*JavaBean一定要重写hashCode和equals*/
                    key.append(param.hashCode());
                }
                count++;
            }
            return key.toString();
        };
    }

}
</code></pre> 
<p id="util--%3ERedisUtil"><strong>util--&gt;RedisUtil（由于内容过长，这个类在上一篇博客中有，建议到上篇博客摘要）</strong></p> 
<p><a href="https://blog.csdn.net/m0_53151031/article/details/122831095?spm=1001.2014.3001.5501" title="https://blog.csdn.net/m0_53151031/article/details/122831095?spm=1001.2014.3001.5501">https://blog.csdn.net/m0_53151031/article/details/122831095?spm=1001.2014.3001.5501</a></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A04%E3%80%81%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%92%8C%E6%8E%A7%E5%88%B6%E7%B1%BB">                     4、新建一个实体类和控制类</h4> 
<p><strong>pojo：</strong></p> 
<pre><code class="language-java">package com.zj.code.pojo;


import lombok.Data;

@Data
public class User {
    private String account;
}
</code></pre> 
<pre><strong>UserController：</strong></pre> 
<pre><code class="language-java">package com.zj.code.controller;


import com.yzm.yzmspringbootstarter.EmailSender;
import com.zj.code.pojo.User;
import com.zj.code.util.RedisUtil;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CacheEvict;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.concurrent.TimeUnit;


@RestController
@RequestMapping("/user")
public class UserController {


    private EmailSender sender;


    @GetMapping("/register")
    public String register(User user) {
        if (user.getAccount().length() &lt; 5) {
            return "不符合规则";
        }
        String yzm = RedisUtil.StringOps.get(user.getAccount());
        if (yzm == null) {
            yzm = sender.sendText(user.getAccount());
            RedisUtil.StringOps.setEx(user.getAccount(), yzm, 1, TimeUnit.MINUTES);
            return "验证码已发送";
        }
        return "验证码还是有效期";
    }

    /**
     * 判断当前验证码与缓存中的验证码一致
     * @param user  用户
     * @param yzm   当前验证码
     * @return     当前验证码与该用户在缓存中的验证是否是一致的
     */
    @GetMapping("/verify")
    public String verify(User user,String yzm) {
        String code = RedisUtil.StringOps.get(user.getAccount());
         if(code==null){
             return "验证码无效";
         }
        return code.equals(yzm)?"yes":"no";
    }

}
</code></pre> 
<p><strong>运行之后出现一个错误：</strong></p> 
<p><img alt="" height="728" src="https://images2.imgbox.com/f7/42/6jOrkeiF_o.png" width="1200"></p> 
<p><strong> 原因是没有打上自动注入注解</strong></p> 
<p><img alt="" height="728" src="https://images2.imgbox.com/4b/0d/KYU4Sgs9_o.png" width="1200"></p> 
<p><strong> 运行成功</strong></p> 
<h3 id="%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F%EF%BC%9A%E2%80%8B%E2%80%8B%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%202%E3%80%81%E4%BC%98%E5%8C%96%E9%82%AE%E7%AE%B1%E4%BD%BF%E7%94%A8"><img alt="" height="729" src="https://images2.imgbox.com/53/a4/mktce0OC_o.png" width="1200"><img alt="" height="729" src="https://images2.imgbox.com/f4/02/JbJEfQex_o.png" width="1200">          2、优化邮箱使用</h3> 
<blockquote> 
 <p><strong>前言：在我们注册一个邮箱时，往往会出现注册缓慢，理想状态应该为先出现注册成功，在之后出现邮箱发送成功</strong></p> 
</blockquote> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A"><strong>                    解决方法：</strong></h4> 
<blockquote> 
 <p><strong>1、消息队列</strong></p> 
 <p><strong>2、异步操作</strong></p> 
</blockquote> 
<p><strong> 通常采取第二种方法，使用异步操作</strong></p> 
<h4 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%E6%AD%A5%E9%AA%A4%EF%BC%9A"><strong>                    步骤：</strong></h4> 
<p><strong>                                1、创建一个task类，专用来发送验证码</strong></p> 
<pre><code class="language-java">package com.zj.code.util;


import com.yzm.yzmspringbootstarter.EmailSender;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;

import java.util.concurrent.TimeUnit;

@Component
public class Task {

    @Autowired
    private EmailSender sender;

    @Async
  public void sendYzm(String account){
     String yzm = sender.sendText(account);
      RedisUtil.StringOps.setEx(account, yzm, 1, TimeUnit.MINUTES);

  }


}
</code></pre> 
<p><strong>注意点：</strong></p> 
<blockquote> 
 <p><strong>一定要注入注解，不然会报错</strong></p> 
 <p><strong>其中</strong></p> 
 <p><strong>@Component（将此类声明为bean对象交给spring进行管理）</strong></p> 
 <p><strong>@Autowired（将其他类注入进来）</strong></p> 
 <p><strong>@Async（异步注解）这三个注解尤为重要</strong></p> 
</blockquote> 
<p><strong>                                2、在启动类中注入开启异步注解</strong></p> 
<blockquote> 
 <p></p> 
 <pre><strong>@EnableAsync</strong></pre> 
</blockquote> 
<p><img alt="" height="729" src="https://images2.imgbox.com/15/54/ZwEId1V4_o.png" width="1200"></p> 
<p><strong>                                3、在controller类中注入task注解，</strong></p> 
<blockquote> 
 <p></p> 
 <pre><strong>@Autowired
private Task task;</strong></pre> 
</blockquote> 
<p></p> 
<pre><code class="language-java">package com.zj.code.controller;


import com.yzm.yzmspringbootstarter.EmailSender;
import com.zj.code.pojo.User;
import com.zj.code.util.RedisUtil;
import com.zj.code.util.Task;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.annotation.CacheEvict;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.concurrent.TimeUnit;


@RestController
@RequestMapping("/user")
public class UserController {



    @Autowired
    private Task task;


    @GetMapping("/register")
    public String register(User user) {
        if (user.getAccount().length() &lt; 5) {
            return "不符合规则";
        }
        String yzm = RedisUtil.StringOps.get(user.getAccount());
        if (yzm == null) {
         task.sendYzm(user.getAccount());
            return "验证码已发送";
        }
        return "验证码还是有效期";
    }

    /**
     * 判断当前验证码与缓存中的验证码一致
     * @param user  用户
     * @param yzm   当前验证码
     * @return     当前验证码与该用户在缓存中的验证是否是一致的
     */
    @GetMapping("/verify")
    public String verify(User user,String yzm) {
        String code = RedisUtil.StringOps.get(user.getAccount());
         if(code==null){
             return "验证码无效";
         }
        return code.equals(yzm)?"yes":"no";
    }

}
</code></pre> 
<p><strong>                                4、进行测试</strong></p> 
<p><img alt="" height="726" src="https://images2.imgbox.com/b6/83/URIRf1Bl_o.png" width="1200"></p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/7d/c3/6Gm2JXkt_o.png" width="1200"><strong>很明显和之前的运行结果进行比较得出，使用异步操作可以提高程序运行速度，对于此上，真正的验证码还没有发送。</strong></p> 
<p></p> 
<p><strong>今天的知识就分享到这了，希望能够帮助到大家，制作不易，点赞则是对我最大的鼓励。</strong></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/39fcb837599da961ddee93a11cc93552/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux 安装git并拉取代码教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/214501b3081599baec4cde3b9c083a45/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux简介&amp;&amp;CentOS的安装与配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>