<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV中图像的平移、旋转、倾斜、透视的讲解与实战（附Python源码） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV中图像的平移、旋转、倾斜、透视的讲解与实战（附Python源码）" />
<meta property="og:description" content="需要源码请点赞关注收藏后评论区留言私信~~~
一、仿射变换 仿射变换是一种仅在二维平面中发生的几何变形，变换之后的图形仍然可以保持直线的平直性和平行性，也就是说原来的直线变换之后还是直线，平行线变换之后还是平行线，常见的仿射变换包括平移 旋转和倾斜
OpenCV通过cv2.warpAffine()方法实现仿射变换效果 语法如下
dst=cv2.warpAffine(src,M,dsize,flags,borderMode,borderValue)
M 一个二行三列的矩阵 根据此矩阵的值变换原图中的像素位置
dsize 输出图像的尺寸大小
flags 插值方式 建议使用默认方式
borderMode 边界类型
borderValue 边界值
M也被叫做仿射矩阵 实际上是一个2*3的列表
M=[[a,b,c],[d,e,f]] 仿射变换输出的图像按照以下公式计算
新x=原x*a&#43;原y*b&#43;c
新y=原x*d&#43;原y*e&#43;f
平移 平移就是让图像中的所有像素同时沿着水平或者垂直方向移动，实现这种效果只需要将M设置为以下即可
M=[[1,0,水平移动距离],[0,1,垂直移动的距离]]
让图像向右下方平移效果如下
import cv2 import numpy as np img = cv2.imread(&#34;demo.png&#34;) # 读取图像 rows = len(img) # 图像像素行数 cols = len(img[0]) # 图像像素列数 M = np.float32([[1, 0, 50], # 横坐标向右移动50像素 [0, 1, 100]]) # 纵坐标向下移动100像素 dst = cv2.warpAffine(img, M, (cols, rows)) cv2.imshow(&#34;img&#34;, img) # 显示原图 cv2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3aef86832be59e280ae540781994345b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-20T15:15:36+08:00" />
<meta property="article:modified_time" content="2023-01-20T15:15:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV中图像的平移、旋转、倾斜、透视的讲解与实战（附Python源码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#fe2c24;"><strong>需要源码请点赞关注收藏后评论区留言私信~~~</strong></span></p> 
</blockquote> 
<h2>一、仿射变换</h2> 
<p>仿射变换是一种仅在二维平面中发生的几何变形，变换之后的图形仍然可以保持直线的平直性和平行性，也就是说原来的直线变换之后还是直线，平行线变换之后还是平行线，常见的仿射变换包括平移 旋转和倾斜</p> 
<p><img alt="" height="392" src="https://images2.imgbox.com/fc/c3/zpFSeAnc_o.png" width="830"></p> 
<p>OpenCV通过cv2.warpAffine()方法实现仿射变换效果 语法如下</p> 
<blockquote> 
 <p>dst=cv2.warpAffine(src,M,dsize,flags,borderMode,borderValue)</p> 
 <p>M 一个二行三列的矩阵 根据此矩阵的值变换原图中的像素位置</p> 
 <p>dsize 输出图像的尺寸大小</p> 
 <p>flags 插值方式 建议使用默认方式</p> 
 <p>borderMode 边界类型</p> 
 <p>borderValue 边界值</p> 
</blockquote> 
<p>M也被叫做仿射矩阵 实际上是一个2*3的列表</p> 
<blockquote> 
 <p>M=[[a,b,c],[d,e,f]] 仿射变换输出的图像按照以下公式计算</p> 
 <p>新x=原x*a+原y*b+c</p> 
 <p>新y=原x*d+原y*e+f</p> 
</blockquote> 
<h3>平移</h3> 
<p> 平移就是让图像中的所有像素同时沿着水平或者垂直方向移动，实现这种效果只需要将M设置为以下即可</p> 
<blockquote> 
 <p>M=[[1,0,水平移动距离],[0,1,垂直移动的距离]]</p> 
</blockquote> 
<p> 让图像向右下方平移效果如下</p> 
<p><img alt="" height="349" src="https://images2.imgbox.com/5c/04/zg7VfbMZ_o.png" width="850"></p> 
<pre><code class="hljs">import cv2
import numpy as np
img = cv2.imread("demo.png")  # 读取图像
rows = len(img)  # 图像像素行数
cols = len(img[0])  # 图像像素列数
M = np.float32([[1, 0, 50],  # 横坐标向右移动50像素
                [0, 1, 100]])  # 纵坐标向下移动100像素
dst = cv2.warpAffine(img, M, (cols, rows))
cv2.imshow("img", img)  # 显示原图
cv2.imshow("dst", dst)  # 显示仿射变换效果
cv2.waitKey()  # 按下任何键盘按键后
cv2.destroyAllWindows()  # 释放所有窗体
</code></pre> 
<h3> 旋转</h3> 
<p>OpenCV提供了getRotationMatrix2D方法自动计算旋转图像的M矩阵 语法如下</p> 
<blockquote> 
 <p>M=cv2.getRotationMartix2D(center,angle,scale)</p> 
 <p>center 旋转点的中心坐标</p> 
 <p>angle 旋转的角度 正数逆时针 负数顺时针</p> 
 <p>scale 缩放比例</p> 
</blockquote> 
<p> 下面让图像逆时针旋转30度的同时缩小到原来的百分之八十</p> 
<p><img alt="" height="342" src="https://images2.imgbox.com/7a/e1/ZSyW6zPI_o.png" width="845"></p> 
<pre><code class="hljs">import cv2
img = cv2.imread("demo.png")  # 读取图像
rows = len(img)  # 图像像素行数
cols = len(img[0])  # 图像像素列数
center = (rows / 2, cols / 2)  # 图像的中心点
M = cv2.getRotationMatrix2D(center, 30, 0.8)  # 以图像为中心，逆时针旋转30度，缩放0.8倍
dst = cv2.warpAffine(img, M, (cols, rows))  # 按照M进行仿射
cv2.imshow("img", img)  # 显示原图
cv2.imshow("dst", dst)  # 显示仿射变换效果
cv2.waitKey()  # 按下任何键盘按键后
cv2.destroyAllWindows()  # 释放所有窗体
</code></pre> 
<h3> 倾斜</h3> 
<p>OpenCV需要定位图像的三个点来计算倾斜效果，这三个点分别是左上角 右上角和左下角，这样可以保证图像的平直性和平行性</p> 
<p>同样有getAffineTransform方法来自动计算倾斜图像的M矩阵 语法如下</p> 
<blockquote> 
 <p>M=cv2.getAffineTransform(src,dst)</p> 
 <p>src 原图三个点的坐标 格式为三行两列的浮点数列表</p> 
 <p>dst 倾斜图像的三个点坐标 格式与src一样</p> 
</blockquote> 
<p>下面让图像向右倾斜</p> 
<p><img alt="" height="351" src="https://images2.imgbox.com/cc/54/ZLZGLcnr_o.png" width="852"></p> 
<pre><code class="hljs">import cv2
import numpy as np
img = cv2.imread("demo.png")  # 读取图像
rows = len(img)  # 图像像素行数
cols = len(img[0])  # 图像像素列数
p1 = np.zeros((3, 2), np.float32)  # 32位浮点型空列表，原图三个点
p1[0] = [0, 0]  # 左上角点坐标
p1[1] = [cols - 1, 0]  # 右上角点坐标
p1[2] = [0, rows - 1]  # 左下角点坐标
p2 = np.zeros((3, 2), np.float32)  # 32位浮点型空列表，倾斜图三个点
p2[0] = [50, 0]  # 左上角点坐标，向右挪50像素
p2[1] = [cols - 1, 0]  # 右上角点坐标，位置不变
p2[2] = [0, rows - 1]  # 左下角点坐标，位置不变
M = cv2.getAffineTransform(p1, p2)  # 根据三个点的变化轨迹计算出M矩阵
dst = cv2.warpAffine(img, M, (cols, rows))  # 按照M进行仿射
cv2.imshow('img', img)  # 显示原图
cv2.imshow('dst', dst)  # 显示仿射变换效果
cv2.waitKey()  # 按下任何键盘按键后
cv2.destroyAllWindows()  # 释放所有窗体
</code></pre> 
<h2> 二、透视</h2> 
<p>透视就是让图像在三维空间中变形，从不同的角度观察物体，会看到不同的变形画面</p> 
<p>OpenCV中需要通过定位图像的四个点计算透视效果，透视效果不能保证图像的平直性和平行性</p> 
<p>OpenCV通过warpPerspective方法来实现透视效果</p> 
<blockquote> 
 <p>M=cv2.warpPerspective(src,M,dsize,flags,borderMode,borderValue)</p> 
 <p>M是一个三行三列的矩阵 根据此矩阵的值变换原图中的像素位置</p> 
</blockquote> 
<p>通过getPerspectiveTransform方法来计算M矩阵</p> 
<p>下面模拟从底部观察图像得到的透视效果</p> 
<p> <img alt="" height="344" src="https://images2.imgbox.com/21/07/knCsbcRX_o.png" width="837"></p> 
<pre><code class="hljs">import cv2
import numpy as np
img = cv2.imread("demo.png")  # 读取图像
rows = len(img)  # 图像像素行数
cols = len(img[0])  # 图像像素列数
p1 = np.zeros((4, 2), np.float32)  # 32位浮点型空列表，保存原图四个点
p1[0] = [0, 0]  # 左上角点坐标
p1[1] = [cols - 1, 0]  # 右上角点坐标
p1[2] = [0, rows - 1]  # 左下角点坐标
p1[3] = [cols - 1, rows - 1]  # 右下角点坐标
p2 = np.zeros((4, 2), np.float32)  # 32位浮点型空列表，保存透视图四个点
p2[0] = [90, 0]  # 左上角点坐标，向右移动90像素
p2[1] = [cols - 90, 0]  # 右上角点坐标，向左移动90像素
p2[2] = [0, rows - 1]  # 左下角点坐标，位置不变
p2[3] = [cols - 1, rows - 1]  # 右下角点坐标，位置不变
M = cv2.getPerspectiveTransform(p1, p2)  # 根据四个点的变化轨迹计算出M矩阵
dst = cv2.warpPerspective(img, M, (cols, rows))  # 按照M进行仿射
cv2.imshow('img', img)  # 显示原图
cv2.imshow('dst', dst)  # 显示仿射变换效果
cv2.waitKey()  # 按下任何键盘按键后
cv2.destroyAllWindows()  # 释放所有窗体
</code></pre> 
<p><span style="color:#fe2c24;"><strong> 创作不易 觉得有帮助请点赞关注收藏~~~</strong></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54c0a365f7275ea5aa054210f1ea6761/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux文件操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b39d17d63ef4efdbbc7e27651324209f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CSS 排行榜</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>