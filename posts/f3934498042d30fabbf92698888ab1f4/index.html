<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;实现高精度大整数及其运算 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;实现高精度大整数及其运算" />
<meta property="og:description" content="目录 高精度大整数头文件结构体通过字符数组赋值输出大整数大整数的比较 大整数的运算大整数之间的加法大整数之间的减法高精度大整数与低精度的乘法高精度除以低精度数,同时返回r为余数其他运算 使用示例例题1(贪心&#43;大整数)题目AC代码 高精度大整数 对于一个数,如果其超过了0x7fffffff,则无法用int存储,如果超过2^63-1则long long也无法存储。因此构造结构体来存储这样的高精度大数。
头文件 #include&lt;cstdio&gt; #include&lt;cstring&gt; using namespace std; 结构体 struct bign{	//存123时: d={3,2,1}llen =3; int d[1000]; int len; bign(){ memset(d,0,sizeof(d)); len = 0;} }; 通过字符数组赋值 bign change(char str[]){	//通过字符串读取大整数 //str[]={&#39;1&#39;,&#39;2&#39;,&#39;3&#39;} -&gt;a.b={3,2,1} bign a; a.len = strlen(str); for(int i=0;i&lt;a.len;i&#43;&#43;){ a.d[i] = str[a.len-1-i] - &#39;0&#39;; } return a; } 输出大整数 void print(bign a){	//输出大整数 for(int i=a.len-1;i&gt;=0;i--) printf(&#34;%d&#34;,a.d[i]); return; } 大整数的比较 int compare(bign a,bign b){	//比较a和b的大小,a&gt;b返回1,相等返回0,a&lt;b返回-1 if(a.len&gt;b.len) return 1; if(a." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f3934498042d30fabbf92698888ab1f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-05T18:23:27+08:00" />
<meta property="article:modified_time" content="2020-03-05T18:23:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;实现高精度大整数及其运算</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">高精度大整数</a></li><li><ul><li><a href="#_3" rel="nofollow">头文件</a></li><li><a href="#_9" rel="nofollow">结构体</a></li><li><a href="#_19" rel="nofollow">通过字符数组赋值</a></li><li><a href="#_32" rel="nofollow">输出大整数</a></li><li><a href="#_40" rel="nofollow">大整数的比较</a></li></ul> 
  </li><li><a href="#_52" rel="nofollow">大整数的运算</a></li><li><ul><li><a href="#_53" rel="nofollow">大整数之间的加法</a></li><li><a href="#_67" rel="nofollow">大整数之间的减法</a></li><li><a href="#_83" rel="nofollow">高精度大整数与低精度的乘法</a></li><li><a href="#r_101" rel="nofollow">高精度除以低精度数,同时返回r为余数</a></li><li><a href="#_121" rel="nofollow">其他运算</a></li></ul> 
  </li><li><a href="#_123" rel="nofollow">使用示例</a></li><li><ul><li><a href="#1_124" rel="nofollow">例题1(贪心+大整数)</a></li><li><ul><li><a href="#_125" rel="nofollow">题目</a></li><li><a href="#AC_130" rel="nofollow">AC代码</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>高精度大整数</h2> 
<p>对于一个数,如果其超过了0x7fffffff,则无法用int存储,如果超过2^63-1则long long也无法存储。因此构造结构体来存储这样的高精度大数。</p> 
<h3><a id="_3"></a>头文件</h3> 
<pre><code class="prism language-c++">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
using namespace std;
</code></pre> 
<h3><a id="_9"></a>结构体</h3> 
<pre><code class="prism language-c++">struct bign{	//存123时: d={3,2,1}llen =3; 
	int d[1000];
	int len;
	bign(){
		memset(d,0,sizeof(d));
		len = 0;}
};
</code></pre> 
<h3><a id="_19"></a>通过字符数组赋值</h3> 
<pre><code class="prism language-c++">bign change(char str[]){	//通过字符串读取大整数 
	//str[]={'1','2','3'} -&gt;a.b={3,2,1}
	bign a;
	a.len = strlen(str);
	for(int i=0;i&lt;a.len;i++){
		a.d[i] = str[a.len-1-i] - '0';
	}
	return a;
}
</code></pre> 
<h3><a id="_32"></a>输出大整数</h3> 
<pre><code class="prism language-C++">void print(bign a){	//输出大整数 
	for(int i=a.len-1;i&gt;=0;i--)
		printf("%d",a.d[i]);
	return;
}
</code></pre> 
<h3><a id="_40"></a>大整数的比较</h3> 
<pre><code class="prism language-c++">int compare(bign a,bign b){	//比较a和b的大小,a&gt;b返回1,相等返回0,a&lt;b返回-1 
	if(a.len&gt;b.len) return 1;
	if(a.len&lt;b.len) return -1;
	for(int i=a.len-1;i&gt;=0;i--){
		if(a.d[i]&gt;b.d[i]) return 1;
		if(a.d[i]&lt;b.d[i]) return -1;
	}
	return 0;
}
</code></pre> 
<h2><a id="_52"></a>大整数的运算</h2> 
<h3><a id="_53"></a>大整数之间的加法</h3> 
<pre><code class="prism language-c++">bign add(bign a,bign b){	//大整数之间进行加法 
	bign c;
	int carry = 0;	//进位
	for(int i=0;i&lt;a.len||i&lt;b.len;i++){
		int temp = a.d[i]+b.d[i] + carry;
		c.d[c.len++] = temp%10;
		carry = temp/10;
	} 
	if(carry!=0) c.d[c.len++] = carry;
	return c;
}
</code></pre> 
<h3><a id="_67"></a>大整数之间的减法</h3> 
<pre><code class="prism language-c++">bign sub(bign a,bign b){	//大整数之间进行减法 
	bign c;
	for(int i=0;i&lt;a.len||i&lt;b.len;i++){
		if(a.d[i]&lt;b.d[i]){	//低位不够减,需要借位
			a.d[i+1]--; 
			a.d[i]+=10;
		}
		c.d[c.len++] = a.d[i]-b.d[i];
	}
	while(c.len-1&gt;=1&amp;&amp;c.d[c.len-1]==0)
		c.len--;	//去除高位0
	return c;
}
</code></pre> 
<h3><a id="_83"></a>高精度大整数与低精度的乘法</h3> 
<pre><code class="prism language-c++">bign multi(bign a,int b){	//高精度大整数与低精度的乘法
	bign c;
	int carry = 0; //进位
	for(int i=0;i&lt;a.len;i++){
		int temp = a.d[i]*b + carry;
		//printf("%d*%d+%d\n",a.d[i],b,carry);
		c.d[c.len++] = temp%10;
		carry = temp / 10;
	} 
	while(carry!=0){
		c.d[c.len++] = carry%10;
		carry/=10;
	}
	return c;
}
</code></pre> 
<h3><a id="r_101"></a>高精度除以低精度数,同时返回r为余数</h3> 
<pre><code class="prism language-c++">bign divide(bign a,int b,int&amp; r){	//高精度除以低精度,r为余数 
	bign c;
	c.len = a.len;
	r=0;
	for(int i=a.len-1;i&gt;=0;i--){
		r = r*10 + a.d[i];
		if(r&lt;b) c.d[i] = 0;
		else{
			c.d[i] = r/b;
			r %= b;
		}
	}
	while(c.len-1&gt;=1&amp;&amp;c.d[c.len-1]==0){
		c.len--;
	}
	return c;
}
</code></pre> 
<h3><a id="_121"></a>其他运算</h3> 
<p>比如大整数与大整数的乘除略。。。。</p> 
<h2><a id="_123"></a>使用示例</h2> 
<h3><a id="1_124"></a>例题1(贪心+大整数)</h3> 
<h4><a id="_125"></a>题目</h4> 
<p><a href="https://www.luogu.com.cn/problemnew/solution/P1080" rel="nofollow">洛谷P1080 国王游戏</a><br> <img src="https://images2.imgbox.com/ef/9b/odvt9Brm_o.png" alt="在这里插入图片描述"><br> <strong>分析</strong></p> 
<blockquote> 
 <p>此题需要先贪心找到排序规律为按照每个人的左右手乘积非降序排列,在计算最小值时累乘的过程中可能数字溢出，所以要使用大整数，但是根据题目描述大整数开100001位是不够的需要开的更大,但是实际测试数据并没有这么大。</p> 
</blockquote> 
<h4><a id="AC_130"></a>AC代码</h4> 
<pre><code class="prism language-c++">#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
using namespace std;

const int maxn = 10001;
pair&lt;int,int&gt; nums[maxn];	//first 右手,second左手

struct bign{	//存123时: d={3,2,1}llen =3; 
	int d[maxn];
	int len;
	bign(){
		memset(d,0,sizeof(d));
		len = 0;}
}res,sum,ans;	//res最终结果,sum累乘结果,ans比较变量

bign multi(bign a,int b){	//高精度大整数与低精度的乘法
	bign c;
	int carry = 0; //进位
	for(int i=0;i&lt;a.len;i++){
		int temp = a.d[i]*b + carry;
		//printf("%d*%d+%d\n",a.d[i],b,carry);
		c.d[c.len++] = temp%10;
		carry = temp / 10;
	} 
	while(carry!=0){
		c.d[c.len++] = carry%10;
		carry/=10;
	}
	return c;
}

bign divide(bign a,int b,int&amp; r){	//高精度除以低精度,r为余数 
	bign c;
	c.len = a.len;
	r=0;
	for(int i=a.len-1;i&gt;=0;i--){
		r = r*10 + a.d[i];
		if(r&lt;b) c.d[i] = 0;
		else{
			c.d[i] = r/b;
			r %= b;
		}
	}
	while(c.len-1&gt;=1&amp;&amp;c.d[c.len-1]==0){
		c.len--;
	}
	return c;
}

int compare(bign a,bign b){	//比较a和b的大小,a&gt;b返回1,相等返回0,a&lt;b返回-1 
	if(a.len&gt;b.len) return 1;
	if(a.len&lt;b.len) return -1;
	for(int i=a.len-1;i&gt;=0;i--){
		if(a.d[i]&gt;b.d[i]) return 1;
		if(a.d[i]&lt;b.d[i]) return -1;
	}
	return 0;
}

void print(bign a){	//输出大整数 
	for(int i=a.len-1;i&gt;=0;i--)
		printf("%d",a.d[i]);
	return;
}

int cmp(pair&lt;int,int&gt; a,pair&lt;int,int&gt; b){
	return a.first*a.second&lt;b.first*b.second;
}

int main(){
	int n;
	scanf("%d",&amp;n);
	scanf("%d %d",&amp;nums[0].first,&amp;nums[0].second);
	for(int i=1;i&lt;=n;i++)
		scanf("%d %d",&amp;nums[i].first,&amp;nums[i].second);
	sort(nums+1,nums+1+n,cmp);
	sum.d[0] = 1; sum.len = 1;
	for(int i=1;i&lt;=n;i++){
		int r = 0;	//存余数 
		sum = multi(sum,nums[i-1].first);
		ans = divide(sum,nums[i].second,r);
		if(compare(ans,res)==1)
			res = ans;
	}
	print(res);
	return 0;
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd15d87064afeef1cf71600853c4da13/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ant-Design-Vue table 合并单元格，并且添加点击事件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0cab504c823c6b17ca1a7b2bb5710cc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PyQt5项目打包成exe文件（pyinstaller）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>