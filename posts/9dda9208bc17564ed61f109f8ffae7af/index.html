<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS下安装mysql8.0 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS下安装mysql8.0" />
<meta property="og:description" content="CentOS下安装mysql8.0 1.进官网，选择适合自己版本的linux下的MYSQL版本。 按照箭头上的数字，依次进行操作，进入下面这个图景。
等待下载好，这样第一步就完成了。
2.将其下载好的 mysql-8.0.30-el7-x86_64.tar.gz 上传至linux系统中进行解压 。 将这个文件上传至 /usr/mysql/ 目录下，首先查看 /usr/mysql/ 目录下的文件。以确保系统中有这个文件。 cd /usr/ mkdir mysql cd mysql/ ls 将文件进行解压。 tar -zxvf mysql-8.0.30-el7-x86_64.tar.gz 然后会在当前 /usr/mysql/ 目录下会生成 这个目录。
对mysql进行安装。 将mysql-8.0.30-el7-x86_64 安装到 /usr/local/mysql 下。 mv mysql-8.0.30-el7-x86_64 /usr/local/mysql #将文件移动到 /usr/local/ 目录下，并更名为mysql 。 为系统添加mysql 组和用户。 groupadd mysql useradd -r -g mysql mysql 进入 /usr/local/mysql 目录下，修改相关权限。 cd /usr/local/mysql #进入/usr/local/mysql 目录 chown -R mysql:mysql ./ #修改当前目录为mysql用户 mysql初始化操作,记录下临时密码,之后第一次登录的时候会用到。 bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data #运行完成会生成一个暂时的密码。 结果如下" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9dda9208bc17564ed61f109f8ffae7af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-26T13:30:02+08:00" />
<meta property="article:modified_time" content="2022-09-26T13:30:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS下安装mysql8.0</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CentOSmysql80_0"></a>CentOS下安装mysql8.0</h2> 
<h6><a id="1linuxMYSQL_2"></a>1.进官网，选择适合自己版本的linux下的MYSQL版本。</h6> 
<p><img src="https://images2.imgbox.com/bc/45/DdKdI1Tn_o.png" alt="在这里插入图片描述"></p> 
<p>按照箭头上的数字，依次进行操作，进入下面这个图景。</p> 
<p><img src="https://images2.imgbox.com/4e/08/SS2XnJuv_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/44/60/FpeuQCG0_o.png" alt="在这里插入图片描述"></p> 
<p>等待下载好，这样第一步就完成了。</p> 
<h6><a id="2_mysql8030el7x86_64targz_linux__14"></a>2.将其下载好的 mysql-8.0.30-el7-x86_64.tar.gz 上传至linux系统中进行解压 。</h6> 
<ul><li>将这个文件上传至 /usr/mysql/ 目录下，首先查看 /usr/mysql/ 目录下的文件。以确保系统中有这个文件。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">cd</span> /usr/
<span class="token function">mkdir</span> mysql
<span class="token function">cd</span> mysql/
<span class="token function">ls</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/09/a8/5i437Oi2_o.png" alt="image-20220923235255700"></p> 
<ul><li>将文件进行解压。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">tar</span> -zxvf mysql-8.0.30-el7-x86_64.tar.gz
</code></pre> 
<p>然后会在当前 /usr/mysql/ 目录下会生成 这个目录。</p> 
<p><img src="https://images2.imgbox.com/3b/5e/Y2ET7kB1_o.png" alt="image-20220923235657376"></p> 
<ul><li>对mysql进行安装。</li></ul> 
<ol><li>将mysql-8.0.30-el7-x86_64 安装到 /usr/local/mysql 下。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">mv</span>  mysql-8.0.30-el7-x86_64  /usr/local/mysql  <span class="token comment">#将文件移动到 /usr/local/ 目录下，并更名为mysql 。</span>
</code></pre> 
<ol start="2"><li>为系统添加mysql 组和用户。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">groupadd</span> mysql

<span class="token function">useradd</span> -r -g mysql mysql
</code></pre> 
<ol start="3"><li>进入 /usr/local/mysql 目录下，修改相关权限。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">cd</span> /usr/local/mysql    <span class="token comment">#进入/usr/local/mysql 目录</span>

<span class="token function">chown</span> -R mysql:mysql ./  <span class="token comment">#修改当前目录为mysql用户</span>
</code></pre> 
<ol start="4"><li>mysql初始化操作,记录下临时密码,之后第一次登录的时候会用到。</li></ol> 
<pre><code class="prism language-bash">bin/mysqld  --initialize  --user<span class="token operator">=</span>mysql  --basedir<span class="token operator">=</span>/usr/local/mysql  --datadir<span class="token operator">=</span>/usr/local/mysql/data  <span class="token comment">#运行完成会生成一个暂时的密码。</span>
</code></pre> 
<p>结果如下</p> 
<p><img src="https://images2.imgbox.com/f7/df/4mm6I3MP_o.png" alt="image-20220924001107643"></p> 
<ol start="5"><li>查看初始化过程中有没有自动生成my.cnf 文件。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">cd</span> /etc/   <span class="token comment">#进入/etc/目录下</span>

<span class="token function">ls</span> <span class="token operator">|</span> <span class="token function">grep</span> my.cnf   <span class="token comment">#查看是否有my.cnf 文件。有则会产生结果。</span>
</code></pre> 
<ol start="6"><li>初始化生成了my.cnf 文件,跳至第八步，修改my.cnf 文件的信息。</li></ol> 
<p><img src="https://images2.imgbox.com/05/27/JTwKlxiN_o.png" alt="image-20220924001423509"></p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> my.cnf
</code></pre> 
<ol start="7"><li>如果初始化过程中没有生成my.cnf , 新建一个my-defalut.cnf文件,将其复制到/etc/my.cnf</li></ol> 
<pre><code class="prism language-bash"><span class="token function">touch</span> my-defalut.cnf   <span class="token comment">#新建一个文件</span>

<span class="token function">chmod</span> 755 my-defalut.cnf   <span class="token comment">#赋予权限</span>

<span class="token function">cp</span> my-defalut.cnf /etc/my.cnf  <span class="token comment">#将文件复制到/etc/ 目录下，并更名为my.cnf 文件名。</span>
</code></pre> 
<ol start="8"><li>my.cnf 的信息如下</li></ol> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
basedir<span class="token operator">=</span>/usr/local/mysql
datadir<span class="token operator">=</span>/usr/local/mysql/data
port<span class="token operator">=</span>3306
socket<span class="token operator">=</span>/tmp/mysql.sock
pid-file<span class="token operator">=</span>/usr/local/mysql/<span class="token variable">$hostname</span>.pid
sql_mode<span class="token operator">=</span>NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
<span class="token comment">#注意了,小细节，这里的 $hostname 是linux的主机名。一般每个人主机名都是不一样的。</span>
</code></pre> 
<p>查看主机名</p> 
<pre><code class="prism language-bash"><span class="token function">hostname</span>
</code></pre> 
<ol start="9"><li>为mysql配置环境变量。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/profile  <span class="token comment"># 打开profile文件。</span>

<span class="token function">export</span>  MYSQL_HOME

MYSQL_HOME<span class="token operator">=</span>/usr/local/mysql

<span class="token function">export</span>  PATH<span class="token operator">=</span><span class="token variable">$PATH</span><span class="token keyword">:</span><span class="token variable">$MYSQL_HOME</span>/lib:<span class="token variable">$MYSQL_HOME</span>/bin
</code></pre> 
<p>执行命令source /etc/profile让profile文件立即生效。</p> 
<pre><code class="prism language-bash"><span class="token function">source</span> /etc/profile
</code></pre> 
<ol start="10"><li>设置为开机自启动项。</li></ol> 
<p>依次执行一下代码。</p> 
<pre><code class="prism language-bash"><span class="token function">cp</span> /usr/local/mysql/support-files/mysql.server   /etc/init.d/mysql

<span class="token function">chmod</span> +x  /etc/init.d/mysql  <span class="token comment">#添加可执行权限。</span>

<span class="token function">chkconfig</span>  --add mysql   <span class="token comment"># 注册启动服务</span>
</code></pre> 
<p>输入chkconfig --list //查看是否添加成功。</p> 
<pre><code class="prism language-bash"><span class="token function">chkconfig</span> --list
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/da/YEGxicMF_o.png" alt="image-20220924002943718"></p> 
<p>表示成功。</p> 
<ol start="11"><li>开启服务器，登录进入mysql。</li></ol> 
<pre><code class="prism language-bash"><span class="token function">service</span> mysql start   <span class="token comment">#开启服务器。</span>

mysql -uroot -p      <span class="token comment">#登录进入mysql，然后提示输入密码。</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/4b/SBfdPmK2_o.png" alt="image-20220924003502646"></p> 
<p>输入初始化过程中生成的临时密码，然后回车就行。进入一下页面。</p> 
<p><img src="https://images2.imgbox.com/01/60/oKfjpa3P_o.png" alt="image-20220924003544669"></p> 
<p>到此，说明已经安装成功了。</p> 
<ol start="12"><li>进入mysql后，修改密码。不然你什么也做不了。</li></ol> 
<pre><code class="prism language-mysql">alter user  'root'@'localhost' identified by 'root';
</code></pre> 
<p>然后 exit; 退出，重新进入，进行测试。</p> 
<pre><code class="prism language-mysql">show databases;
</code></pre> 
<p><img src="https://images2.imgbox.com/68/21/fnivacMk_o.png" alt="image-20220924003849453"></p> 
<h6><a id="Mysql1130host__is_not_allowed_to_connect_to_this_MySql_server_186"></a>Mysql连接报错：1130-host … is not allowed to connect to this MySql server如何处理</h6> 
<p>​ 这个问题是因为在数据库服务器中的mysql数据库中的user的表中没有权限(也可以说没有用户)，下面将记录我遇到问题的过程及解决的方法。</p> 
<p>​ 在搭建完LNMP环境后用Navicate连接出错</p> 
<p>​ 遇到这个问题首先到mysql所在的服务器上用连接进行处理</p> 
<ol><li><strong>连接服务器: mysql -u root -p</strong></li><li><strong>看当前所有数据库：show databases;</strong></li><li><strong>进入mysql数据库：use mysql;</strong></li><li><strong>查看mysql数据库中所有的表：show tables;</strong></li><li><strong>查看user表中的数据：select Host, User,Password from user;</strong></li><li><strong>修改user表中的Host:update user set Host=’%’ where User=‘root’;</strong></li><li><strong>最后刷新一下：flush privileges;</strong></li></ol> 
<pre><code class="prism language-mysql">use mysql;

update user set Host='%' where User='root';

flush privileges;
</code></pre> 
<h6><a id="Mysql2003Cant_connect_to_Mysql_server_on_xxx_10060_Unknown_error_210"></a>Mysql连接报错：2003-Can’t connect to Mysql server on ‘xxx’ (10060 “Unknown error”)</h6> 
<p><strong>执行quit;退出数据库,执行以下命令打开防火墙端口3306</strong></p> 
<pre><code class="prism language-bash">firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span>3306/tcp --permanent
</code></pre> 
<p><strong>重启防火墙并查看是否生效</strong></p> 
<pre><code class="prism language-bash">firewall-cmd --reload		<span class="token comment">#重启firewall</span>
firewall-cmd --list-ports	<span class="token comment">#查看已经开放的端口</span>
</code></pre> 
<p>操作完成,可以愉快的使用navicat连接咯</p> 
<p>查看防火墙状态：</p> 
<pre><code class="prism language-bash">systemctl status firewalld
</code></pre> 
<p>关闭防火墙：</p> 
<pre><code class="prism language-bash">systemctl stop firewalld
</code></pre> 
<p>开启防火墙：</p> 
<pre><code class="prism language-bash">systemctl start firewalld
</code></pre> 
<p>关闭开机启动：</p> 
<pre><code class="prism language-bash">systemctl disable firewalld
</code></pre> 
<p>开启开机启动：</p> 
<pre><code class="prism language-bash">systemctl <span class="token function">enable</span> firewalld
</code></pre> 
<p>到此，关于安装mysql-8.0.30版本的全部过程就已经结束了!</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/99c373c169ac1e17655c3ab2f5bd0701/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">无人机——像素坐标系转世界坐标系（NED）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68669dcc89faec36f1415f3d9b2bcf78/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS下安装JDK8</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>