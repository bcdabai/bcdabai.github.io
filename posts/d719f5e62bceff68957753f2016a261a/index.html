<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【网络爬虫 08】解析链接 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【网络爬虫 08】解析链接" />
<meta property="og:description" content="urllib 库里还提供了 parse 这个模块，它定义了处理 URL 的标准接口，例如实现 URL 各部分的抽取、合并以及链接转换。它支持如下协议的 URL 处理：file、ftp、gopher、hdl、http、https、imap、mailto、 mms、news、nntp、prospero、rsync、rtsp、rtspu、sftp、 sip、sips、snews、svn、svn&#43;ssh、telnet 和 wais。本节中，我们介绍一下该模块中常用的方法来看一下它的便捷之处。 1.urlparse()
实现 URL 的识别和分段 from urllib.parse import urlparse result = urlparse(&#39;http://www.baidu.com/index.html;user?id=5#comment&#39;) print(type(result), result) &lt;class &#39;urllib.parse.ParseResult&#39;&gt; ParseResult(scheme=&#39;http&#39;, netloc=&#39;www.baidu.com&#39;, path=&#39;/index.html&#39;, params=&#39;user&#39;, query=&#39;id=5&#39;, fragment=&#39;comment&#39;) 这里利用 urlparse() 方法进行了一个 URL 的解析。首先，输出了解析结果的类型，然后将结果也输出出来。返回结果是一个 ParseResult 类型的对象，它包含 6 部分，分别是 scheme、netloc、path、params、query 和 fragment。 URL http://www.baidu.com/index.html;user?id=5#comment urlparse() 方法将其拆分成了 6 部分// 前面的就是 scheme，代表协议第一个 / 前面便是 netloc，即域名? 前面是 params，代表参数 标准的链接格式 scheme://netloc/path;parameters?query#fragment urlparse()的API urllib.parse.urlparse(urlstring, scheme=&#39;&#39;, allow_fragments=True) urlstring这是必填项，即待解析的 URLscheme它是默认的协议（比如 http 或 https 等）。假如这个链接没有带协议信息，会将这个作为默认的协议。allow_fragments即是否忽略 fragment。如果它被设置为 False，fragment 部分就会被忽略，它会被解析为 path、parameters 或者 query 的一部分，而 fragment 部分为空。 from urllib." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d719f5e62bceff68957753f2016a261a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-06T23:22:34+08:00" />
<meta property="article:modified_time" content="2021-02-06T23:22:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【网络爬虫 08】解析链接</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <ul><li>urllib 库里还提供了 parse 这个模块，它定义了处理 URL 的标准接口，例如实现 URL 各部分的抽取、合并以及链接转换。它支持如下协议的 URL 处理：file、ftp、gopher、hdl、http、https、imap、mailto、 mms、news、nntp、prospero、rsync、rtsp、rtspu、sftp、 sip、sips、snews、svn、svn+ssh、telnet 和 wais。本节中，我们介绍一下该模块中常用的方法来看一下它的便捷之处。</li></ul> 
<p><strong>1.urlparse()</strong></p> 
<ul><li>实现 URL 的识别和分段</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse

result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'urllib.parse.ParseResult'</span><span class="token operator">&gt;</span>
ParseResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'http'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'/index.html'</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">'id=5'</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">'comment'</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">这里利用 urlparse() 方法进行了一个 URL 的解析。首先，输出了解析结果的类型，然后将结果也输出出来。</td></tr><tr><td align="left">返回结果是一个 ParseResult 类型的对象，它包含 6 部分，分别是 scheme、netloc、path、params、query 和 fragment。</td></tr></tbody></table> 
<ul><li>URL</li></ul> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>user?<span class="token builtin">id</span><span class="token operator">=</span><span class="token number">5</span><span class="token comment">#comment</span>
</code></pre> 
<table><thead><tr><th align="left">urlparse() 方法将其拆分成了 6 部分</th></tr></thead><tbody><tr><td align="left">// 前面的就是 scheme，代表协议</td></tr><tr><td align="left">第一个 / 前面便是 netloc，即域名</td></tr><tr><td align="left">? 前面是 params，代表参数</td></tr></tbody></table> 
<ul><li>标准的链接格式</li></ul> 
<pre><code class="prism language-python">scheme<span class="token punctuation">:</span><span class="token operator">//</span>netloc<span class="token operator">/</span>path<span class="token punctuation">;</span>parameters?query<span class="token comment">#fragment</span>
</code></pre> 
<ul><li>urlparse()的API</li></ul> 
<pre><code class="prism language-python">urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>urlparse<span class="token punctuation">(</span>urlstring<span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> allow_fragments<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left">urlstring</td><td align="left">这是必填项，即待解析的 URL</td></tr><tr><td align="left">scheme</td><td align="left">它是默认的协议（比如 http 或 https 等）。假如这个链接没有带协议信息，会将这个作为默认的协议。</td></tr><tr><td align="left">allow_fragments</td><td align="left">即是否忽略 fragment。如果它被设置为 False，fragment 部分就会被忽略，它会被解析为 path、parameters 或者 query 的一部分，而 fragment 部分为空。</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse

result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">'https'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">ParseResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'https'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'www.baidu.com/index.html'</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">'id=5'</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">'comment'</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">我们提供的 URL 没有包含最前面的 scheme 信息，但是通过指定默认的 scheme 参数，返回的结果是 https。</td></tr><tr><td align="left">假设我们带上了 scheme：</td></tr></tbody></table> 
<pre><code class="prism language-python">result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">,</span> scheme<span class="token operator">=</span><span class="token string">'https'</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">ParseResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'http'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'/index.html'</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">'id=5'</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">'comment'</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">可见，scheme 参数只有在 URL 中不包含 scheme 信息时才生效。如果 URL 中有 scheme 信息，就会返回解析出的 scheme。</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse

result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">,</span> allow_fragments<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">ParseResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'http'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'/index.html'</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token string">'user'</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">'id=5#comment'</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">假设 URL 中不包含 params 和 query，我们再通过实例看一下：</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse

result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html#comment'</span><span class="token punctuation">,</span> allow_fragments<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">ParseResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'http'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'/index.html#comment'</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">可以发现，当 URL 中不包含 params 和 query 时，fragment 便会被解析为 path 的一部分。</td></tr></tbody></table> 
<table><thead><tr><th align="left">返回结果 ParseResult 实际上是一个元组，我们可以用索引顺序来获取，也可以用属性名获取。</th></tr></thead><tbody></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse

result <span class="token operator">=</span> urlparse<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html#comment'</span><span class="token punctuation">,</span> allow_fragments<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>scheme<span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>netloc<span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">http
http
www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
</code></pre> 
<p><strong>2. urlunparse()</strong></p> 
<ul><li>它接受的参数是一个可迭代对象，但是它的长度必须是 6，否则会抛出参数数量不足或者过多的问题。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlunparse

data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http'</span><span class="token punctuation">,</span> <span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'a=6'</span><span class="token punctuation">,</span> <span class="token string">'comment'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urlunparse<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">这里参数 data 用了列表类型。当然，你也可以用其他类型，比如元组或者特定的数据结构。</td></tr></tbody></table> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>user?a<span class="token operator">=</span><span class="token number">6</span><span class="token comment">#comment</span>
</code></pre> 
<p><strong>3. urlsplit()</strong></p> 
<table><thead><tr><th align="left">这个方法和 urlparse() 方法非常相似，只不过它不再单独解析 params 这一部分，只返回 5 个结果。上面例子中的 params 会合并到 path 中。</th></tr></thead><tbody></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlsplit

result <span class="token operator">=</span> urlsplit<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">SplitResult<span class="token punctuation">(</span>scheme<span class="token operator">=</span><span class="token string">'http'</span><span class="token punctuation">,</span> netloc<span class="token operator">=</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">'/index.html;user'</span><span class="token punctuation">,</span> query<span class="token operator">=</span><span class="token string">'id=5'</span><span class="token punctuation">,</span> fragment<span class="token operator">=</span><span class="token string">'comment'</span><span class="token punctuation">)</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">返回结果是 SplitResult，它其实也是一个元组类型，既可以用属性获取值，也可以用索引来获取。</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlsplit

result <span class="token operator">=</span> urlsplit<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/index.html;user?id=5#comment'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>scheme<span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">http http
</code></pre> 
<p><strong>4.urlunsplit()</strong></p> 
<table><thead><tr><th align="left">与 urlunparse() 类似，它也是将链接各个部分组合成完整链接的方法，传入的参数也是一个可迭代对象，例如列表、元组等，唯一的区别是长度必须为 5。</th></tr></thead><tbody></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlunsplit

data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http'</span><span class="token punctuation">,</span> <span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token string">'a=6'</span><span class="token punctuation">,</span> <span class="token string">'comment'</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urlunsplit<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>html?a<span class="token operator">=</span><span class="token number">6</span><span class="token comment">#comment</span>
</code></pre> 
<p><strong>5. urljoin()</strong></p> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">有了 urlunparse() 和 urlunsplit() 方法，我们可以完成链接的合并，不过前提必须要有特定长度的对象，链接的每一部分都要清晰分开。</td></tr><tr><td align="left">此外，生成链接还有另一个方法，那就是 urljoin() 方法。我们可以提供一个 base_url（基础链接）作为第一个参数，将新的链接作为第二个参数，该方法会分析 base_url 的 scheme、netloc 和 path 这 3 个内容并对新链接缺失的部分进行补充，最后返回结果。</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urljoin

<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'FAQ.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'https://cuiqingcai.com/FAQ.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/about.html'</span><span class="token punctuation">,</span> <span class="token string">'https://cuiqingcai.com/FAQ.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com/about.html'</span><span class="token punctuation">,</span> <span class="token string">'https://cuiqingcai.com/FAQ.html?question=2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com?wd=abc'</span><span class="token punctuation">,</span> <span class="token string">'https://cuiqingcai.com/index.php'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'?category=2#comment'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span> <span class="token string">'?category=2#comment'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urljoin<span class="token punctuation">(</span><span class="token string">'www.baidu.com#comment'</span><span class="token punctuation">,</span> <span class="token string">'?category=2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>FAQ<span class="token punctuation">.</span>html
https<span class="token punctuation">:</span><span class="token operator">//</span>cuiqingcai<span class="token punctuation">.</span>com<span class="token operator">/</span>FAQ<span class="token punctuation">.</span>html
https<span class="token punctuation">:</span><span class="token operator">//</span>cuiqingcai<span class="token punctuation">.</span>com<span class="token operator">/</span>FAQ<span class="token punctuation">.</span>html
https<span class="token punctuation">:</span><span class="token operator">//</span>cuiqingcai<span class="token punctuation">.</span>com<span class="token operator">/</span>FAQ<span class="token punctuation">.</span>html?question<span class="token operator">=</span><span class="token number">2</span>
https<span class="token punctuation">:</span><span class="token operator">//</span>cuiqingcai<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>php
http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com?category<span class="token operator">=</span><span class="token number">2</span><span class="token comment">#comment</span>
www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com?category<span class="token operator">=</span><span class="token number">2</span><span class="token comment">#comment</span>
www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com?category<span class="token operator">=</span><span class="token number">2</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">可以发现，base_url 提供了三项内容 scheme、netloc 和 path。如果这 3 项在新的链接里不存在，就予以补充；如果新的链接存在，就使用新的链接的部分。而 base_url 中的 params、query 和 fragment 是不起作用的。</td></tr></tbody></table> 
<p><strong>6. urlencode()</strong></p> 
<ul><li>在构造 GET 请求参数的时候非常有用</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlencode

params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'germey'</span><span class="token punctuation">,</span>
    <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">22</span>
<span class="token punctuation">}</span>
base_url <span class="token operator">=</span> <span class="token string">'http://www.baidu.com?'</span>
url <span class="token operator">=</span> base_url <span class="token operator">+</span> urlencode<span class="token punctuation">(</span>params<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">http<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com?name<span class="token operator">=</span>germey<span class="token operator">&amp;</span>age<span class="token operator">=</span><span class="token number">22</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">这里首先声明了一个字典来将参数表示出来，然后调用 urlencode() 方法将其序列化为 GET 请求参数。</td></tr><tr><td align="left">这个方法非常常用。有时为了更加方便地构造参数，我们会事先用字典来表示。要转化为 URL 的参数时，只需要调用该方法即可。</td></tr></tbody></table> 
<p><strong>7. parse_qs()</strong></p> 
<ul><li>有了序列化，必然就有反序列化。如果我们有一串 GET 请求参数，利用 parse_qs() 方法，就可以将它转回字典</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> parse_qs

query <span class="token operator">=</span> <span class="token string">'name=germey&amp;age=22'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>parse_qs<span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'germey'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'22'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> 
<p><strong>8. parse_qsl()</strong></p> 
<ul><li>它用于将参数转化为元组组成的列表</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> parse_qsl

query <span class="token operator">=</span> <span class="token string">'name=germey&amp;age=22'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>parse_qsl<span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'germey'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'22'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">可以看到，运行结果是一个列表，而列表中的每一个元素都是一个元组，元组的第一个内容是参数名，第二个内容是参数值。</td></tr></tbody></table> 
<p><strong>9. quote()</strong></p> 
<table><thead><tr><th align="left"></th></tr></thead><tbody><tr><td align="left">该方法可以将内容转化为 URL 编码的格式。URL 中带有中文参数时，有时可能会导致乱码的问题，此时用这个方法可以将中文字符转化为 URL 编码</td></tr></tbody></table> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> quote

keyword <span class="token operator">=</span> <span class="token string">'壁纸'</span>
url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com/s?wd='</span> <span class="token operator">+</span> quote<span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</code></pre> 
<p><strong>10. unquote()</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> unquote

url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com/s?wd=%E5%A3%81%E7%BA%B8'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>unquote<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>s?wd<span class="token operator">=</span>壁纸
</code></pre> 
<p><strong>转载</strong><br> <strong>作者：</strong> 崔庆才<br> <strong>来源：</strong><a href="https://cuiqingcai.com/5508.html" rel="nofollow">[Python3网络爬虫开发实战] 3.1.3-解析链接</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/37bafbd4d132d8a2e4f70f20dbe99299/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Day12 重写，构造器，及多态</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05c6b8e72276d661b03252dc3eac8150/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">maya导出obj分组_maya2017怎么导入obj序列？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>