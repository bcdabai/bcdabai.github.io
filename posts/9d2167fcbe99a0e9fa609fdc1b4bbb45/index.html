<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java读取配置文件路径问题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java读取配置文件路径问题" />
<meta property="og:description" content="java打印classpath路径 System.out.println(System.getProperty(&#34;java.class.path&#34;));//系统的classpaht路径
System.out.println(System.getProperty(&#34;user.dir&#34;));//用户的当前路径
一.文件读取 1.利用java.util自带的Properties类读取 Properties类的load方法提供了两种读取文件的方式
（1）reader作为参数，以字符流方式读取
Properties properties = new Properties();
try {
properties.load(new InputStreamReader(new FileInputStream(fileName),&#34;utf-8&#34;));
} catch (IOException e) {
e.printStackTrace();
}
String url = properties.getProperty(&#34;url&#34;)
在load参数里面可以用任意的io装饰类去装饰文件输入流，只要最终装饰成字符流即可；InputStreamReader方法有编码参数，若读取含有中文的文件，文本文件默认编码为ANSI（在windows中就是GBK），所以将编码参数设置为GBK；或者我的idea系统设置为utf-8编码，所以只要先将文件转为utf-8编码即可
（2）inputStream作为参数，以字节流方式读取
Properties properties = new Properties();
try {
properties.load(new FileInputStream(fileName));
} catch (IOException e) {
e.printStackTrace();
}
String url = properties.getProperty(&#34;url&#34;)
同理，load方法参数可以添加任意的装饰组件
2.利用java.util自带的ResourceBundle类读取 ResourceBundle bundle = ResourceBundle.getBundle(&#34;config&#34;);
String url = bundle.getString(&#34;url&#34;);
该方法默认读取的是resources文件夹下的以.properties为后缀的文件，代码中的例子即为config.properties
二.文件路径 有几种方式
1.绝对路径，不赘述
2.相对路径 （1）利用System.getProperty方法
System.getProperty(&#34;user.dir&#34;)&#43;&#34;/src/main/resources/config.properties&#34;
System.getProperty(&#34;user.dir&#34;)会定位到项目的根目录，可以得到该工程项目所有文件的相关路径及环境配置信息
（2）利用类装载器" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9d2167fcbe99a0e9fa609fdc1b4bbb45/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-21T10:48:33+08:00" />
<meta property="article:modified_time" content="2020-06-21T10:48:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java读取配置文件路径问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>java打印classpath路径</h2> 
<p>System.out.println(System.getProperty("java.class.path"));//系统的classpaht路径<br> System.out.println(System.getProperty("user.dir"));//用户的当前路径<br>  </p> 
<h2>一.文件读取</h2> 
<h4><a name="t1"></a>1.利用java.util自带的Properties类读取</h4> 
<p>Properties类的load方法提供了两种读取文件的方式</p> 
<p>（1）reader作为参数，以字符流方式读取</p> 
<p>Properties properties = new Properties();<br> try {<!-- --><br>     properties.load(new InputStreamReader(new FileInputStream(fileName),"utf-8"));<br> } catch (IOException e) {<!-- --><br>     e.printStackTrace();<br> }</p> 
<p>String url = properties.getProperty("url")</p> 
<p><br> 在load参数里面可以用任意的io装饰类去装饰文件输入流，只要最终装饰成字符流即可；InputStreamReader方法有编码参数，若读取含有中文的文件，文本文件默认编码为ANSI（在windows中就是GBK），所以将编码参数设置为GBK；或者我的idea系统设置为utf-8编码，所以只要先将文件转为utf-8编码即可</p> 
<p>（2）inputStream作为参数，以字节流方式读取</p> 
<p>    Properties properties = new Properties();<br>     try {<!-- --><br>         properties.load(new FileInputStream(fileName));<br>     } catch (IOException e) {<!-- --><br>         e.printStackTrace();<br>     }</p> 
<p>    String url = properties.getProperty("url")</p> 
<p>同理，load方法参数可以添加任意的装饰组件</p> 
<h4><br> 2.利用java.util自带的ResourceBundle类读取</h4> 
<p>    ResourceBundle bundle = ResourceBundle.getBundle("config");<br>     String url = bundle.getString("url");</p> 
<p>该方法默认读取的是resources文件夹下的以.properties为后缀的文件，代码中的例子即为config.properties</p> 
<h2>二.文件路径</h2> 
<h4>有几种方式<br> 1.绝对路径，不赘述<br> 2.相对路径</h4> 
<p>（1）利用System.getProperty方法</p> 
<p>    System.getProperty("user.dir")+"/src/main/resources/config.properties"</p> 
<p>System.getProperty("user.dir")会定位到项目的根目录，可以得到该工程项目所有文件的相关路径及环境配置信息<br> （2）利用类装载器</p> 
<p>    String fileName = this.getClass().getClassLoader().getResource("config.properties").getPath();<br>     InputStream in = this.getClass().getClassLoader().getResourceAsStream("config.properties");</p> 
<p>二者都定位到的是编译过后class文件所在同级目录下的配置文件。前者可以获取文件完整路径，然后通过reader字符流读取文件，对应于上述properties类load方法中的（1），后者可以直接作为字节流参数输入load方法对应（2）</p> 
<p>（3）默认</p> 
<p>    properties.load(new InputStreamReader(new FileInputStream("config.properties")));</p> 
<p>默认定位从项目根目录开始，上面例子读取的是项目根目录下的config.properties文件<br>  </p> 
<h2>杂记</h2> 
<p>附上项目内获取绝对路径的方法：（应该是他人总结的 以前笔记本里面发现的，侵删）</p> 
<p>1可以在servlet的init方法里</p> 
<p>String path = getServletContext().getRealPath("/");</p> 
<p>这将获取web项目的全路径</p> 
<p>例如 :E:\eclipseM9\workspace\tree\</p> 
<p>tree是我web项目的根目录</p> 
<p>2.你也可以随时在任意的class里调用</p> 
<p>this.getClass().getClassLoader().getResource("/").getPath();</p> 
<p>这将获取 到classes目录的全路径</p> 
<p>例如 : E:\eclipseM9/workspace/tree/WEB-INF/classes/</p> 
<p>这个方法也可以不在web环境里确定路径,比较好用</p> 
<p>3.request.getContextPath(); 是在开发Web项目时，经常用到的方法，是为了解决相对路径的问题，可返回站点的根路径。</p> 
<p>获得web根的上下文环境</p> 
<p>如 /tree</p> 
<p>tree是我的web项目的root context</p> 
<p>/*jsp 取得当前目录的路径</p> 
<p>path=request.getRealPath("");</p> 
<p>/*得到jbossWEB发布临时目录 warUrl=.../tmp/deploy/tmp14544test-exp.war/</p> 
<p>path=C:\jboss-4.0.5.GA\server\default\tmp\deploy\tmp14544test-exp.war\</p> 
<p>String path = (String)request.getContextPath();</p> 
<p><strong>在开发项目中经常获取resources下的文件（配置文件及其他各种各样的文件），本文通过java代码获取其文件及输入流；</strong></p> 
<p>主要用类加载器的两个重要方法</p> 
<p>    InputStream in = getClass().getClassLoader().getResourceAsStream("log4j.properties");// 获取文件的输入流<br>     URL url = getClass().getClassLoader().getResource("log4j.properties");// 获取文件的URL</p> 
<p>一、通过类加载器获取资源文件的文件流，输入流的用途很多，看你自己怎么用都可以，如用在Properties获取配置信息，或者用来读图片，文本等等......例子：读取resources下的log4j配置文件信息；</p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/39/cf/E3ak1cJS_o.png" width="215"></p> 
<p>    @Test<br>     public void testStream() throws IOException, URISyntaxException {<!-- --><br>         // 获取输入流<br>         InputStream in = getClass().getClassLoader().getResourceAsStream("log4j.properties");<br>         // 新建配置对象<br>         Properties p = new Properties();<br>         // 通过输入流加载<br>         p.load(in);<br>         // 读取key<br>         String log4j = p.getProperty("log4j.rootLogger");<br>         System.out.println(log4j);<br>     }</p> 
<p>运行后如下：</p> 
<p><img alt="" height="70" src="https://images2.imgbox.com/8d/12/deexCaIY_o.png" width="705"></p> 
<p>二、通过类加载器获取资源文件的URL，URL的用法也是更加强大，可用用URL对象干很多，比如生成File对象，等可查看URL的API，例子：读取resources下的log4j生成File对象</p> 
<p>    @Test<br>     public void testStream() throws IOException, URISyntaxException {<!-- --><br>         // 获取URL<br>         URL url = getClass().getClassLoader().getResource("log4j.properties");<br>         // 通过url获取File的绝对路径<br>         File f = new File(url.getFile());<br>         System.out.println("文件的名子是:" + f.getName());<br>         System.out.println("文件的大小是:" + f.length());<br>     }</p> 
<p>运行后如下：</p> 
<p><img alt="" height="102" src="https://images2.imgbox.com/47/75/19Ua1J4p_o.png" width="347"></p> 
<p>以上两个方法对于获取resources下的文件很有用途，多多利用，能幻化出多种用途</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/854b593634b0531cac53842d53fe366b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">load_weight</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ac60444b89ec216171850762db029a34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">汇编语言8086CPU之寄存器总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>