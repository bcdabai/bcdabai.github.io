<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sql数据库高级编程总结(一) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sql数据库高级编程总结(一)" />
<meta property="og:description" content="1、数学函数：操作一个数据，返回一个结果
（1）取上限 ceiling 如果有一个小数就取大于它的一个最小整数 列如9.5 就会取到 10
select code,name,ceiling(price) from car
（2）取下限 floor 如果有一个小数就会舍掉小数点以后的数取整
select floor(price) from car
（3）ABS 绝对值 一张表中有负数就会变成正数
（4）派PI(),圆周率，括号里不需要加东西
（5）ROUND 四舍五入
select round(3.14,1) l两个参数 前面是一个小数，后面是表示保留几位小数
（3.16，1）输出的结果就是3.2
（6）SQRT 开根号
（7）SQUARE平方，自己乘以自己
2、字符串函数：
（1）转换成大写 select upper(pic) from car
（2）转换成小写 select lower() from car
（3）select ltrim(’ 123 &#39;) 去左空格
（4）select rtrim(’ 123 &#39;) 去右空格
（5）space() 里面放几个数字，就打印出几个空格
（6）LEFT ,类似于substring,从左边开头截取，select LEFT(‘123456’,3) 结果是123
（7）select len(‘aaaaaa’) 返回几个长度
（8）select replace(‘aaaaabbaaaaa’,‘bb’,‘haha’) 把第一个字符串中的bb替换成haha
（9）select reverse(‘abc’) 结果是cba
（10）select str(1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/620f0b24821fe5e732a413886e3c10de/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-14T14:18:55+08:00" />
<meta property="article:modified_time" content="2023-02-14T14:18:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sql数据库高级编程总结(一)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>1、数学函数：操作一个数据，返回一个结果</strong></p> 
<p>（1）取上限 ceiling 如果有一个小数就取大于它的一个最小整数 列如9.5 就会取到 10<br> select code,name,ceiling(price) from car</p> 
<p>（2）取下限 floor 如果有一个小数就会舍掉小数点以后的数取整<br> select floor(price) from car</p> 
<p>（3）ABS 绝对值 一张表中有负数就会变成正数</p> 
<p>（4）派PI(),圆周率，括号里不需要加东西</p> 
<p>（5）ROUND 四舍五入</p> 
<p>select round(3.14,1) l两个参数 前面是一个小数，后面是表示保留几位小数<br> （3.16，1）输出的结果就是3.2</p> 
<p>（6）SQRT 开根号</p> 
<p>（7）SQUARE平方，自己乘以自己</p> 
<p><strong>2、字符串函数：</strong></p> 
<p>（1）转换成大写 select upper(pic) from car</p> 
<p>（2）转换成小写 select lower() from car</p> 
<p>（3）select ltrim(’ 123 ') 去左空格</p> 
<p>（4）select rtrim(’ 123 ') 去右空格</p> 
<p>（5）space() 里面放几个数字，就打印出几个空格</p> 
<p>（6）LEFT ,类似于substring,从左边开头截取，select LEFT(‘123456’,3) 结果是123</p> 
<p>（7）select len(‘aaaaaa’) 返回几个长度</p> 
<p>（8）select replace(‘aaaaabbaaaaa’,‘bb’,‘haha’) 把第一个字符串中的bb替换成haha</p> 
<p>（9）select reverse(‘abc’) 结果是cba</p> 
<p>（10）select str(1.567,3,1) 把1.567转换成字符串，最多留3位，小数点也算一位，保留小数点后1位.</p> 
<p>(11) select substring(‘abcdefg’,2,3) 从第二位开始截取，截取的长度是3个，结果就是bcd。</p> 
<p>(12) 获取当前系统时间GETADTE()</p> 
<p>（13） select getdate() 获取的是当前电脑上的时间</p> 
<p>（14） sysdatetime() 获取数据库服务的时间</p> 
<p>（15） select year(‘1991-1-1’)</p> 
<p>（16） select isdate(‘2016-2-30’)返回bit类型，如果是false就返回0，true就返回1</p> 
<p>（17） select dateadd(year,5,‘2000-1-1’) 第一个参数是要添加什么，第二个是添加多少，第三个是给谁添加， 结果返回的是2005-1-1</p> 
<p>（18） select datename(weekday,‘2000-1-1’) 返回星期几 datename 返回的值是字符串</p> 
<p>（19） select dateadd(year,5,‘2000-1-1’) 第一个参数是要添加什么，第二个是添加多少，第三个是给谁添加， 结果返回的是2005-1-1</p> 
<p>（20） select dateadd(year,5,‘2000-1-1’) 返回第几天，按月</p> 
<p>（21） select datename(day,‘2000-1-1’) 一年中第几天</p> 
<p>TSQL编程</p> 
<p>1、索引</p> 
<pre><code> 添加索引，设计界面，在任何一列前右键--索引/键--点击进入添加某一列为索引
</code></pre> 
<p>2、视图</p> 
<pre><code>  视图就是我们查询出来的虚拟表

   创建视图：create view 视图名

   as

 SQL查询语句，分组，排序，in 等都不能写

 视图的用法：select * from 视图名
</code></pre> 
<p>建立视图查询更方便</p> 
<pre><code>下图，点击执行就保存了视图
</code></pre> 
<p><img src="https://images2.imgbox.com/47/86/z126Zwfe_o.png" alt="在这里插入图片描述"><br> 下图：从数据库中——视图就可显示<br> <img src="https://images2.imgbox.com/2c/dc/0gjNku06_o.png" alt="在这里插入图片描述"><br> 3、SQL编程 语法格式</p> 
<pre><code>定义变量：declare @变量名 数据类型    所有的变量都以@开头

列如：select @a int

变量赋值：set @变量名= 值

set @a=10
</code></pre> 
<p><img src="https://images2.imgbox.com/61/98/gIyT2U9x_o.png" alt="在这里插入图片描述"><br> select @a --直接打印在结果框中<br> set @a=10 --赋值，不打印<br> select @a --输出 结果 打印在消息框中<br> print @a --第二种输出方式</p> 
<p>变量使用情况：<br> 查汽车表中名称含有宝马两个字的<br> declare @name varchar(20)<br> set @name=‘宝马’<br> select * from car where name like ‘%’+@name+‘%’<br> <img src="https://images2.imgbox.com/7b/6c/F8kDZGLu_o.png" alt="在这里插入图片描述"><br> 查汽车表中所有汽车的平均值并输出<br> declare @price decimal(10,4)<br> select @price=avg(price) from car<br> print ‘所有汽车的平均价格为：’+cast(@price as varchar(20)) 表示数据转换</p> 
<hr> 
<p>if…else 的用法，if 后面没有小括号，花括号用begin end 替代</p> 
<p>if 判断条件<br> begin<br> 要执行的语句<br> end<br> else<br> begin<br> 要执行的语句<br> end</p> 
<p><img src="https://images2.imgbox.com/8f/26/ZuzBkv7z_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"> declare <span class="token annotation punctuation">@a</span> <span class="token keyword">int</span>
 declare <span class="token annotation punctuation">@b</span> <span class="token keyword">int</span>
 declare <span class="token annotation punctuation">@c</span> <span class="token keyword">int</span>
 set <span class="token annotation punctuation">@a</span><span class="token operator">=</span><span class="token number">10</span>
 set <span class="token annotation punctuation">@b</span><span class="token operator">=</span><span class="token number">5</span>
 
 <span class="token keyword">if</span> <span class="token annotation punctuation">@a</span><span class="token operator">&gt;</span><span class="token annotation punctuation">@b</span>
 begin
     set <span class="token annotation punctuation">@c</span><span class="token operator">=</span><span class="token annotation punctuation">@a</span><span class="token operator">+</span><span class="token annotation punctuation">@b</span>
 end
 <span class="token keyword">else</span>
 begin
     set <span class="token annotation punctuation">@c</span><span class="token operator">=</span><span class="token annotation punctuation">@a</span><span class="token operator">-</span><span class="token annotation punctuation">@b</span>
 end
 print <span class="token annotation punctuation">@c</span>
</code></pre> 
<p><strong>case 变形到数据库里的用法</strong></p> 
<p>declare @ccname varchar(20)<br> set @ccname=‘宝马’<br> select * from car where name like case<br> when @ccname=‘宝马’ then’%宝马%’ 当…输出…<br> when @ccname=‘奥迪’ then’%奥迪%’<br> else ‘%’ 条件都不满足执行这个<br> end 结尾</p> 
<hr> 
<p>循环：</p> 
<p>注意循环四要素<br> declare @str varchar(20)<br> set @str=‘你好’<br> declare @i int<br> set @i=1</p> 
<p>while @i&lt;=10 条件<br> begin<br> print @str+cast(@i as varchar(20))<br> set @i=@i+1 循环体<br> end<br> <img src="https://images2.imgbox.com/9d/6a/vstpfv76_o.png" alt="在这里插入图片描述"><br> 注意：语句结束之后不要写分号或逗号</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51f23d845350b6e33dfa551a43be2a02/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">更改家用WiFi密码和名称</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dba9d014e0618e090d9858199f52568b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装华为aab包的处理方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>