<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Quartz任务调度(4)JobListener分版本超详细解析 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Quartz任务调度(4)JobListener分版本超详细解析" />
<meta property="og:description" content="在《spring学习笔记(15)趣谈spring 事件：实现业务逻辑解耦，异步调用提升用户体验》我们通过实例分析讲解了spring的事件机制，或许你会觉得其中的配置略显繁琐，而在Quartz框架中，它为我们集成了强大的事件机制，轻松地帮助我们在任务调度中完成各类辅佐操作，高内聚而耦合。 相对spring的事件实现，quartz这边简化了许多，我们只需： 1. 自定义监听器接口实现类 2. 向scheduler中注册监听器实现类
只需以上两步即可我完成我们的事件监听。对于监听器实现类中，可能有些方法不是我们需要的，这时候我们只需给出空实现即可。在Quartz中，监听器类型主要分为三种，和Quartz三个核心类相对应：JobListener,TriggerListener,SchedulerListener。下面我们先分析JobListener的使用方法。其他两种监听器留待后面系列文章详解
JobListener 我们的jobListener实现类必须实现其以下方法：
方法 说明 getName() getName() 方法返回一个字符串用以说明 JobListener 的名称。对于注册为全局的监听器，getName() 主要用于记录日志，对于由特定 Job 引用的 JobListener，注册在 JobDetail 上的监听器名称必须匹配从监听器上 getName() 方法的返回值。 jobToBeExecuted() Scheduler 在 JobDetail 将要被执行时调用这个方法。 jobExecutionVetoed() Scheduler 在 JobDetail 即将被执行，但又被 TriggerListener 否决了时调用这个方法。 jobWasExecuted() Scheduler 在 JobDetail 被执行之后调用这个方法。 接下来我们以《Quartz任务调度(1)概念例析快速入门》一文中的定时扒取新闻任务和获得最热新闻任务为例，分析我们的监听器方法。
1. 自定义监听器接口实现类 public class MyJobListener implements JobListener { @Override//相当于为我们的监听器命名 public String getName() { return &#34;myJobListener&#34;; } @Override public void jobToBeExecuted(JobExecutionContext context) { System.out.println(getName() &#43; &#34;触发对&#34;&#43;context.getJobDetail().getJobClass()&#43;&#34;的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录&#34;); } @Override//“否决JobDetail”是在Triiger被其相应的监听器监听时才具备的能力 public void jobExecutionVetoed(JobExecutionContext context) { System." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9adc5a739d8e58bb9db5afa08441708d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-25T17:02:41+08:00" />
<meta property="article:modified_time" content="2017-06-25T17:02:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Quartz任务调度(4)JobListener分版本超详细解析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 在<a target="_blank" href="http://blog.csdn.net/qwe6112071/article/details/50966660" style="color:rgb(79,161,219)" rel="noopener noreferrer">《spring学习笔记(15)趣谈spring 事件：实现业务逻辑解耦，异步调用提升用户体验》</a>我们通过实例分析讲解了<a target="_blank" href="http://lib.csdn.net/base/javaee" rel="nofollow noopener noreferrer" class="replace_word" title="Java EE知识库" style="color:rgb(223,52,52); font-weight:bold">spring</a>的事件机制，或许你会觉得其中的配置略显繁琐，而在Quartz框架中，它为我们集成了强大的事件机制，轻松地帮助我们在任务调度中完成各类辅佐操作，高内聚而耦合。 <br style=""> 相对spring的事件实现，quartz这边简化了许多，我们只需： <br style=""> 1. 自定义监听器接口实现类 <br style=""> 2. 向scheduler中注册监听器实现类</p> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 只需以上两步即可我完成我们的事件监听。对于监听器实现类中，可能有些方法不是我们需要的，这时候我们只需给出空实现即可。在Quartz中，监听器类型主要分为三种，和Quartz三个核心类相对应：JobListener,TriggerListener,SchedulerListener。下面我们先分析JobListener的使用方法。其他两种监听器留待后面系列文章详解</p> 
<h2 id="joblistener" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:2.6em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t0" style="color:rgb(79,161,219)"></a>JobListener</h2> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 我们的jobListener实现类必须实现其以下方法：</p> 
<table style='width:708px; border-collapse:collapse; border-spacing:0px; border:1px solid rgb(238,238,238); color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'><thead style=""><tr style=""><th style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> 方法</th><th style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> 说明</th></tr></thead><tbody style=""><tr style=""><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> getName()</td><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> getName() 方法返回一个字符串用以说明 JobListener 的名称。对于注册为全局的监听器，getName() 主要用于记录日志，对于由特定 Job 引用的 JobListener，注册在 JobDetail 上的监听器名称必须匹配从监听器上 getName() 方法的返回值。</td></tr><tr style=""><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> jobToBeExecuted()</td><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> Scheduler 在 JobDetail 将要被执行时调用这个方法。</td></tr><tr style=""><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> jobExecutionVetoed()</td><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> Scheduler 在 JobDetail 即将被执行，但又被 TriggerListener 否决了时调用这个方法。</td></tr><tr style=""><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> jobWasExecuted()</td><td style="padding:8px; line-height:20px; vertical-align:top; border:1px solid rgb(238,238,238)"> Scheduler 在 JobDetail 被执行之后调用这个方法。</td></tr></tbody></table> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 接下来我们以<a target="_blank" href="http://blog.csdn.net/qwe6112071/article/details/50991563" style="color:rgb(79,161,219)" rel="noopener noreferrer">《Quartz任务调度(1)概念例析快速入门》</a>一文中的定时扒取新闻任务和获得最热新闻任务为例，分析我们的监听器方法。</p> 
<h3 id="1-自定义监听器接口实现类" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:2.13em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t1" style="color:rgb(79,161,219)"></a>1. 自定义监听器接口实现类</h3> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">MyJobListener</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">implements</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">JobListener</span> {<!-- --></span>

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//相当于为我们的监听器命名</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> String <span class="hljs-title" style="box-sizing: border-box;">getName</span>() {
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"myJobListener"</span>;
    }

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">jobToBeExecuted</span>(JobExecutionContext context) {
        System.out.println(getName() + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"触发对"</span>+context.getJobDetail().getJobClass()+<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录"</span>);
    }

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//“否决JobDetail”是在Triiger被其相应的监听器监听时才具备的能力</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">jobExecutionVetoed</span>(JobExecutionContext context) {
        System.out.println(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"被否决执行了，可以做些日志记录。"</span>);
    }

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">jobWasExecuted</span>(JobExecutionContext context,
            JobExecutionException jobException) {
        System.out.println(getName() + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"触发对"</span>+context.getJobDetail().getJobClass()+<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作"</span>);

    }

}</code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li></ul> 
<h3 id="2-在scheduler中注册监听器" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:2.13em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t2" style="color:rgb(79,161,219)"></a>2. 在scheduler中注册监听器</h3> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 这里有两种方式，一种是注册为全局监听器，对所有的JobDetail都有效，另一种是注册为针对特定JobDetail的局部监听器。针对不同的版本，有不同的配置方式</p> 
<h4 id="1-准备工作" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:1.73em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t3" style="color:rgb(79,161,219)"></a>1. 准备工作</h4> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 在<a target="_blank" href="http://lib.csdn.net/base/softwaretest" rel="nofollow noopener noreferrer" class="replace_word" title="软件测试知识库" style="color:rgb(223,52,52); font-weight:bold">测试</a>中我们用到工作实现类为</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">PickNewsJob</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">implements</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">Job</span> {<!-- --></span>

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">execute</span>(JobExecutionContext jec) <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">throws</span> JobExecutionException {
        SimpleDateFormat sdf = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> SimpleDateFormat(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"HH:mm:ss"</span>);
        System.out.println(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"在"</span> + sdf.format(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> Date()) + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"扒取新闻"</span>);
    }
}

<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">GetHottestJob</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">implements</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">Job</span> {<!-- --></span>

    <span class="hljs-annotation" style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">execute</span>(JobExecutionContext jec) <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">throws</span> JobExecutionException {
        SimpleDateFormat sdf = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> SimpleDateFormat(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"HH:mm:ss"</span>);
        System.out.println(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"在"</span> + sdf.format(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> Date()) +<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"根据文章的阅读量和评论量来生成我们的最热文章列表"</span>);
    }

}
</code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
<h4 id="2-1x版本配置" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:1.73em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t4" style="color:rgb(79,161,219)"></a>2. 1.x版本配置</h4> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 在1.+版本中，我们可以通过如下代码监听job</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/**********局部监听器配置**********/</span>
JobListener myJobListener = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> MyJobListener();
pickNewsJob.addJobListener(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"myJobListener"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//这里的名字和myJobListener中getName()方法的名字一样</span>
scheduler.addJobListener(myJobListener);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//向scheduler注册我们的监听器</span>
<span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/*********全局监听器配置************/</span>
JobListener myJobListener = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> MyJobListener();
scheduler.addGlobalJobListener(myJobListener);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//直接添加为全局监听器</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li></ul> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 下面是我们的完整测试代码：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">static</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">main</span>(String args[]) <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">throws</span> SchedulerException {
    JobDetail pickNewsJob =<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> JobDetail(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"job1"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgroup1"</span>, PickNewsJob.class); 
    JobDetail getHottestJob =<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> JobDetail(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"job2"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgroup2"</span>, GetHottestJob.class);
    SimpleTrigger pickNewsTrigger = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> SimpleTrigger(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"trigger1"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"group1"</span>,<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>,<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2000</span>);
    SimpleTrigger getHottestTrigger = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> SimpleTrigger(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"trigger2"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"group2"</span>,<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>,<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">3000</span>);

    SchedulerFactory schedulerFactory = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> StdSchedulerFactory();
    Scheduler scheduler = schedulerFactory.getScheduler();

    <span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/**********局部监听器配置**********/</span>
    JobListener myJobListener = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> MyJobListener();
    pickNewsJob.addJobListener(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"myJobListener"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//这里的名字和myJobListener中getName()方法的名字一样</span>
    scheduler.addJobListener(myJobListener);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//向scheduler注册我们的监听器</span>
    <span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/*********全局监听器配置************/</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//      JobListener myJobListener = new MyJobListener();</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//      scheduler.addGlobalJobListener(myJobListener);//直接添加为全局监听器</span>

    scheduler.scheduleJob(pickNewsJob,pickNewsTrigger);
    scheduler.scheduleJob(getHottestJob,getHottestTrigger);

    scheduler.start();

}</code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li></ul> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 现在是使用局部监听器的配置，运行程序，控制台打印：</p> 
<blockquote style='margin:0px 0px 1.1em; padding:15px 20px; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 
 <p style="margin-top:0px; margin-bottom:0px; line-height:1.25">myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在11:18:31扒取新闻 <br style=""> 在11:18:31根据文章的阅读量和评论量来生成我们的最热文章列表<span style="color:green">————————从这里我们可以看出两个工作是异步进行的</span> <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在11:18:33扒取新闻 <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> 在11:18:34根据文章的阅读量和评论量来生成我们的最热文章列表 <br style=""> <span style="color:orange">我们细心观察还会发现，我们两个工作都运行了三次，但我们在配置触发器时，repeatCount都是设为<span style="">2</span>。这说明我们的任务调度特点是：<span style="">主执行了1次，重复了2次，于是共执行3（1+repeatCount)次。</span></span></p> 
</blockquote> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 如果我们注释掉局部监听代码，启用全局监听，会看到控制台打印：</p> 
<blockquote style='margin:0px 0px 1.1em; padding:15px 20px; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 
 <p style="margin-top:0px; margin-bottom:0px; line-height:1.25">myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> myJobListener触发对class tool.job.GetHottestJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在11:25:41扒取新闻 <br style=""> 在11:25:41根据文章的阅读量和评论量来生成我们的最热文章列表 <br style=""> myJobListener触发对class tool.job.GetHottestJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在11:25:43扒取新闻 <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> myJobListener触发对class tool.job.GetHottestJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在11:25:44根据文章的阅读量和评论量来生成我们的最热文章列表 <br style=""> myJobListener触发对class tool.job.GetHottestJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> <span style="color:orange">即我们的两个任务都被监听了</span></p> 
</blockquote> 
<h4 id="3-2x版本配置" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:1.73em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t5" style="color:rgb(79,161,219)"></a>3. 2.x版本配置</h4> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> <span style="color:green">在2.+版本中，引入了**org.quartz.ListenerManager和org.quartz.Matcher <br style=""> **来对我们的监听器进行更细粒度的管理配置</span></p> 
<h5 id="1-listenermanager" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> <a target="_blank" name="t6" style="color:rgb(79,161,219)"></a>1. ListenerManager</h5> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 我们通过ListenerManager向scheduler中添加我们的监听器。它针对JobDetail的常用方法有： <br style=""> 1. public void addJobListener(JobListener jobListener) <br style=""> 添加全局监听器，即所有JobDetail都会被此监听器监听 <br style=""> 2. public void addJobListener(JobListener jobListener, Matcher matcher) <br style=""> 添加带条件匹配的监听器，在matcher中声明我们的匹配条件 <br style=""> 3. public void addJobListener(JobListener jobListener, Matcher … matchers) <br style=""> 添加附带不定参条件陪陪的监听器 <br style=""> 4. public boolean removeJobListener(String name) <br style=""> 根据名字移除JobListener <br style=""> 5. public List getJobListeners() <br style=""> 获取所有的监听器 <br style=""> 6. public JobListener getJobListener(String name) <br style=""> 根据名字获取监听器</p> 
<h5 id="2-matcher" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> <a target="_blank" name="t7" style="color:rgb(79,161,219)"></a>2. matcher</h5> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 我们通过matcher让不同的监听器监听不同的任务。它有很多实现类，先逐一分析如下：</p> 
<h6 id="1-keymatcherjobkey" style='font-weight:100; margin:0.8em 0px; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t8" style="color:rgb(79,161,219)"></a>1. <code style='font-family:"Source Code Pro",monospace; padding:2px 4px; font-size:16px; white-space:nowrap'>KeyMatcher&lt;JobKey&gt;</code></h6> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 根据JobKey进行匹配，每个JobDetail都有一个对应的JobKey,里面存储了JobName和JobGroup来定位唯一的JobDetail。它的常用方法有：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>    <span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/************构造Matcher方法************/</span>
    KeyMatcher&lt;JobKey&gt; keyMatcher = KeyMatcher.keyEquals(pickNewsJob.getKey());<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//构造匹配pickNewsJob中的JobKey的keyMatcher。</span>

    <span class="hljs-javadoc" style="color: rgb(136, 0, 0); box-sizing: border-box;">/*********使用方法************/</span>
    scheduler.getListenerManager().addJobListener(myJobListener, keyMatcher);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//通过这句完成我们监听器对pickNewsJob的唯一监听</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li></ul> 
<h6 id="2-groupmatcher" style='font-weight:100; margin:0.8em 0px; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t9" style="color:rgb(79,161,219)"></a>2. GroupMatcher</h6> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 根据组名信息匹配，它的常用方法有：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>    GroupMatcher&lt;JobKey&gt; groupMatcher = GroupMatcher.jobGroupContains(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"group1"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//包含特定字符串</span>
            GroupMatcher.groupEndsWith(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"oup1"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//以特定字符串结尾</span>
            GroupMatcher.groupEquals(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgroup1"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//以特定字符串完全匹配</span>
            GroupMatcher.groupStartsWith(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgou"</span>);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//以特定字符串开头</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li></ul> 
<h6 id="3-andmatcher" style='font-weight:100; margin:0.8em 0px; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t10" style="color:rgb(79,161,219)"></a>3. AndMatcher</h6> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 对两个匹配器取交集，实例如下：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>KeyMatcher&lt;JobKey&gt; keyMatcher = KeyMatcher.keyEquals(pickNewsJob.getKey());
GroupMatcher&lt;JobKey&gt; groupMatcher = GroupMatcher.jobGroupContains(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"group1"</span>);
AndMatcher&lt;JobKey&gt; andMatcher = AndMatcher.and(keyMatcher,groupMatcher);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//同时满足两个入参匹配</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li></ul> 
<h6 id="4-ormatcher" style='font-weight:100; margin:0.8em 0px; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t11" style="color:rgb(79,161,219)"></a>4. OrMatcher</h6> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 对两个匹配器取并集，实例如下：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>OrMatcher&lt;JobKey&gt; orMatcher = OrMatcher.or(keyMatcher, groupMatcher);<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//满足任意一个即可</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
<h6 id="5-everythingmatcher" style='font-weight:100; margin:0.8em 0px; line-height:1.3em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t12" style="color:rgb(79,161,219)"></a>5. EverythingMatcher</h6> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 局部全局匹配，它有两个构造方法：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'>EverythingMatcher.allJobs();<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//对全部JobListener匹配</span>
EverythingMatcher.allTriggers();<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//对全部TriggerListener匹配</span></code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 下面是我们的完整测试测序：</p> 
<pre class="prettyprint" name="code" style='white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: "Source Code Pro", monospace; padding: 5px 5px 5px 60px; font-size: 16px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px;'><code class="language-java hljs  has-numbering" style='display: block; padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: "Source Code Pro", monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal;'><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">static</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span class="hljs-title" style="box-sizing: border-box;">main</span>(String args[]) <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">throws</span> SchedulerException {
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">final</span> JobDetail pickNewsJob = JobBuilder.newJob(PickNewsJob.class)
            .withIdentity(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"job1"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgroup1"</span>).build();
    JobDetail getHottestJob = JobBuilder.newJob(GetHottestJob.class)
            .withIdentity(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"job2"</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"jgroup2"</span>).build();
    SimpleTrigger pickNewsTrigger = TriggerBuilder
            .newTrigger()
            .withIdentity(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"trigger1"</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"tgroup1"</span>)
            .withSchedule(SimpleScheduleBuilder.repeatSecondlyForTotalCount(<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>, <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)).startNow()
            .build();
    SimpleTrigger getHottestTrigger = TriggerBuilder
            .newTrigger()
            .withIdentity(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"trigger2"</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"tgroup2"</span>)
            .withSchedule(SimpleScheduleBuilder.repeatSecondlyForTotalCount(<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>, <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>)).startNow()
            .build();
    Scheduler scheduler = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> StdSchedulerFactory().getScheduler();
    JobListener myJobListener = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> MyJobListener();
    KeyMatcher&lt;JobKey&gt; keyMatcher = KeyMatcher.keyEquals(pickNewsJob.getKey());
    scheduler.getListenerManager().addJobListener(myJobListener, keyMatcher);
    scheduler.scheduleJob(pickNewsJob, pickNewsTrigger);
    scheduler.scheduleJob(getHottestJob,getHottestTrigger);
    scheduler.start();
}</code>
 
 </pre><ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right; opacity: 0;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li></ul>
 
 <ul class="pre-numbering" style="list-style: none; box-sizing: border-box; position: absolute; width: 50px; background-color: rgb(238, 238, 238); top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right: 1px solid rgb(221, 221, 221); text-align: right;"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li></ul> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 运行程序，我们得到下列打印信息：</p> 
<blockquote style='margin:0px 0px 1.1em; padding:15px 20px; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 
 <p style="margin-top:0px; margin-bottom:0px; line-height:1.25">myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 根据文章的阅读量和评论量来生成我们的最热文章列表 <br style=""> 在12:48:58扒取新闻 <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> myJobListener触发对class tool.job.PickNewsJob的开始执行的监听工作，这里可以完成任务前的一些资源准备工作或日志记录 <br style=""> 在12:48:59扒取新闻 <br style=""> myJobListener触发对class tool.job.PickNewsJob结束执行的监听工作，这里可以进行资源销毁工作或做一些新闻扒取结果的统计工作 <br style=""> 根据文章的阅读量和评论量来生成我们的最热文章列表 <br style=""> <span style="color:orange">显然，myJobListener只和我们的PickNewsJob匹配了。</span> <br style=""> 关于测试代码的其他配置可移步参考本系列前面的文章，里面都有详细的配置实例讲解</p> 
</blockquote> 
<h2 id="源码下载" style='margin:0.8em 0px; padding:0px; font-weight:100; line-height:1.3em; font-size:2.6em; color:rgb(63,63,63); font-family:"microsoft yahei"'> <a target="_blank" name="t13" style="color:rgb(79,161,219)"></a>源码下载</h2> 
<p style='margin-top:0px; margin-bottom:1.1em; color:rgb(63,63,63); font-family:"microsoft yahei"; font-size:16px'> 关于本节测试源码内容可到<a target="_blank" href="https://github.com/jeanhao/spring" style="color:rgb(79,161,219)" rel="noopener noreferrer">https://github.com/jeanhao/spring</a>下quartzEvent文件夹下载</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b7f3065f71c3d816c80f05da36abc22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Builder模式——项目中最常见的设计模式之一</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f8d3b5ebeec2555093515096f24f83f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js:利用for循环，输出1-10所有数的平方和(即1-10的阶乘)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>