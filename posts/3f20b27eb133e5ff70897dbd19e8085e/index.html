<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 有关时间日期和时区设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux 有关时间日期和时区设置" />
<meta property="og:description" content="目录 时间概述Linux 中两个时钟date --&gt; 系统时钟hwclock --&gt; 硬件时钟 如何查看和设置时区查看时区设置时区tzselect timedatectl cal 日期 时间概述 如何表示时间其实是一个比较复杂的问题，因为在地球环绕太阳旋转的24小时中，世界各地日出日落的时间是不同的，因此有划分时区（timezone）的必要，也就是把全球划分成24个不同的时区。我们可以把时间的定义理解为一个时间的值加上所在地的时区值（注意这个所在地可以精确到城市）。
在地理课上，我们学过格林威治时间（GMT），它就是 0 时区时间。但是我们在计算机中经常看到的是 UTC（Coordinated Universal Time 的简写，协调世界时，又称世界统一时间、世界标准时间、国际协调时间），UTC 是经过平均太阳时(以格林威治时间GMT为准)、地轴运动修正后的新时标以及以「秒」为单位的国际原子时所综合精算而成的时间，计算过程相当严谨精密，因此若以「世界标准时间」的角度来说，UTC比GMT来得更加精准。其误差值必须保持在0.9秒以内，若大于0.9秒则由位于巴黎的国际地球自转事务中央局发布闰秒，使UTC与地球自转周期一致。所以 UTC 的本质强调的是比GMT更为精确的世界时间标准。
如果中国当地时间是晚上8点钟整，我们可以使用以下两种表示方式：
20:00 CST #或 12:00 UTC 这里的 CST 是 Chinse Standard Time（中国标准时间），也就是我们通常所说的北京时间了。因为中国处在 UTC&#43;8 时区，即所谓的东 8 区，从而推断 UTC 为 12:00了。
虽然电脑中可以显示不同的时区的时间，其实电脑中只保留了一个时间值，那就是 UTC&#43;0 的时间，想要得到不同时区的时间，只能通过设置不同的时区来获得。另外，还有一个称为夏令时 DST 概念，那是因为夏季太阳出来早，为了充分利用阳光，把时间拨快一定时间，到秋天拨慢回时间。
Linux 中两个时钟 Linux 有两个时钟，一个是 System Clock（系统时钟），另一个是 Hardware Clock（硬件时钟）。而在windows中只有一个硬件时钟。可以使用 date 和 hwclock 分别查看系统时钟和硬件时钟。
硬件时钟也称为实时时钟（RTC，real time clock）或 CMOS 时钟，它独立于任何软件，在电脑关机后仍然在运行，个人电脑上是依靠主板上的纽扣电池供电。
系统时钟：由 Linux Kernel（内核）维护，系统时钟在开机时会和硬件时钟同步，然后由计时器中断驱动。系统时钟记录的是自 1970-01-01 00:00:00经过的总秒数，它并不是一个整数，其精度是虚拟无穷的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3f20b27eb133e5ff70897dbd19e8085e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-13T11:48:12+08:00" />
<meta property="article:modified_time" content="2022-10-13T11:48:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 有关时间日期和时区设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><a href="#_5" rel="nofollow">时间概述</a></li><li><a href="#Linux__24" rel="nofollow">Linux 中两个时钟</a></li><li><ul><li><a href="#date___52" rel="nofollow">date --&gt; 系统时钟</a></li><li><a href="#hwclock___81" rel="nofollow">hwclock --&gt; 硬件时钟</a></li></ul> 
   </li><li><a href="#_116" rel="nofollow">如何查看和设置时区</a></li><li><ul><li><a href="#_118" rel="nofollow">查看时区</a></li><li><a href="#_167" rel="nofollow">设置时区</a></li><li><ul><li><a href="#tzselect_171" rel="nofollow">tzselect</a></li></ul> 
    </li><li><a href="#timedatectl_253" rel="nofollow">timedatectl</a></li></ul> 
   </li><li><a href="#cal__321" rel="nofollow">cal 日期</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_5"></a>时间概述</h3> 
<p>如何表示时间其实是一个比较复杂的问题，因为在地球环绕太阳旋转的24小时中，世界各地日出日落的时间是不同的，因此有划分时区（timezone）的必要，也就是把全球划分成24个不同的时区。我们可以把时间的定义理解为一个时间的值加上所在地的时区值（注意这个所在地可以精确到城市）。</p> 
<p>在地理课上，我们学过格林威治时间（GMT），它就是 0 时区时间。但是我们在计算机中经常看到的是 UTC（Coordinated Universal Time 的简写，协调世界时，又称世界统一时间、世界标准时间、国际协调时间），UTC 是经过平均太阳时(以格林威治时间GMT为准)、地轴运动修正后的新时标以及以「秒」为单位的国际原子时所综合精算而成的时间，计算过程相当严谨精密，因此若以「世界标准时间」的角度来说，UTC比GMT来得更加精准。其误差值必须保持在0.9秒以内，若大于0.9秒则由位于巴黎的国际地球自转事务中央局发布闰秒，使UTC与地球自转周期一致。所以 UTC 的本质强调的是比GMT更为精确的世界时间标准。</p> 
<p>如果中国当地时间是晚上8点钟整，我们可以使用以下两种表示方式：</p> 
<pre><code class="prism language-bash"><span class="token number">20</span>:00 CST
<span class="token comment">#或  </span>
<span class="token number">12</span>:00 UTC
</code></pre> 
<p>这里的 CST 是 Chinse Standard Time（中国标准时间），也就是我们通常所说的北京时间了。因为中国处在 UTC+8 时区，即所谓的东 8 区，从而推断 UTC 为 12:00了。</p> 
<p>虽然电脑中可以显示不同的时区的时间，其实电脑中只保留了一个时间值，那就是 UTC+0 的时间，想要得到不同时区的时间，只能通过设置不同的时区来获得。另外，还有一个称为夏令时 DST 概念，那是因为夏季太阳出来早，为了充分利用阳光，把时间拨快一定时间，到秋天拨慢回时间。</p> 
<h3><a id="Linux__24"></a>Linux 中两个时钟</h3> 
<p>Linux 有两个时钟，一个是 System Clock（系统时钟），另一个是 Hardware Clock（硬件时钟）。而在windows中只有一个硬件时钟。可以使用 <code>date</code> 和 <code>hwclock</code> 分别查看系统时钟和硬件时钟。</p> 
<ul><li> <p>硬件时钟也称为实时时钟（RTC，real time clock）或 CMOS 时钟，它独立于任何软件，在电脑关机后仍然在运行，个人电脑上是依靠主板上的纽扣电池供电。</p> </li><li> <p>系统时钟：由 Linux Kernel（内核）维护，系统时钟在开机时会和硬件时钟同步，然后由计时器中断驱动。系统时钟记录的是自 1970-01-01 00:00:00经过的总秒数，它并不是一个整数，其精度是虚拟无穷的。</p> </li></ul> 
<p>既然两个时钟是独自运行的，那么时间久了这两个时钟就会产生误差，相互之间存在一定的漂移。可以通过执行 <code>date</code> 和 <code>hwclock</code> 命令查看。</p> 
<pre><code class="prism language-bash">在CentOS <span class="token number">8</span> 上已 root 登录
<span class="token comment"># date;hwclock </span>
Wed Oct <span class="token number">12</span> <span class="token number">10</span>:13:12 CST <span class="token number">2022</span>
<span class="token number">2022</span>-10-12 <span class="token number">10</span>:13:12.553904+08:00
<span class="token comment"># 如果在Ubuntu上以普通账号登录，使用 hwclock 不能正常使用</span>
$ hwclock
hwclock: Cannot access the Hardware Clock via any known method.
hwclock: Use the --verbose option to see the details of our search <span class="token keyword">for</span> an access method.
$ <span class="token function">sudo</span> hwclock 
<span class="token number">2022</span>-10-12 02:01:35.096325+00:00

<span class="token comment"># 需要使用 sudo hwclock 才能执行</span>
$ <span class="token function">date</span><span class="token punctuation">;</span> <span class="token function">sudo</span> hwclock 
Wed <span class="token number">12</span> Oct <span class="token number">2022</span> 02:16:18 AM UTC
<span class="token number">2022</span>-10-12 02:16:19.301469+00:00
</code></pre> 
<h4><a id="date___52"></a>date --&gt; 系统时钟</h4> 
<p><code>date</code> 命令用于显示或设置系统时间和日期。其使用格式为：</p> 
<pre><code class="prism language-bash"><span class="token function">date</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>+FORMAT<span class="token punctuation">]</span>
<span class="token function">date</span> <span class="token punctuation">[</span>-u<span class="token operator">|</span>--utc<span class="token operator">|</span>--universal<span class="token punctuation">]</span> <span class="token punctuation">[</span>MMDDhhmm<span class="token punctuation">[</span><span class="token punctuation">[</span>CC<span class="token punctuation">]</span>YY<span class="token punctuation">]</span><span class="token punctuation">[</span>.ss<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> 
<p>如果不带参数和显示格式</p> 
<pre><code class="prism language-bash"><span class="token comment"># date</span>
Wed Oct <span class="token number">12</span> <span class="token number">10</span>:25:21 CST <span class="token number">2022</span>
</code></pre> 
<p>可以带显示格式，例如：</p> 
<pre><code># date +"%F %T"
2022-10-12 10:25:57
</code></pre> 
<p>设置时间和日期</p> 
<pre><code class="prism language-bash"><span class="token comment"># 后面的格式是：月日年.秒，月日两位，年可以两位和四位</span>
<span class="token comment"># date 121210302025.30</span>
Fri Dec <span class="token number">12</span> <span class="token number">10</span>:30:30 CST <span class="token number">2025</span>

<span class="token comment"># 也可以使用以下方式设置，这个看起来比较符合我们习惯</span>
<span class="token comment"># date -s "2023-10-13 10:25:30"</span>
Fri Oct <span class="token number">13</span> <span class="token number">10</span>:25:30 CST <span class="token number">2023</span>
</code></pre> 
<h4><a id="hwclock___81"></a>hwclock --&gt; 硬件时钟</h4> 
<p>hwclock 是时钟的管理工具。它可以：显示硬件时钟时间；将硬件时钟设置为指定时间；根据系统时钟设置硬件时钟；根据硬件时钟设置系统时钟；补偿硬件时钟漂移；更正系统时间刻度；设置内核的时区、NTP时间刻度和epoch（仅Alpha）；并根据漂移率预测未来的硬件时钟值。</p> 
<p>使用格式为：</p> 
<pre><code class="prism language-bash">hwclock <span class="token punctuation">[</span>function<span class="token punctuation">]</span> <span class="token punctuation">[</span>option<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> 
<p>我们经常使用的命令演示如下：</p> 
<p>可以使用以下命令查询硬件时钟：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 其默认使用功能</span>
<span class="token comment"># hwclock </span>
<span class="token number">2022</span>-10-12 <span class="token number">10</span>:18:53.703334+08:00
</code></pre> 
<p>可以不带 --show，这是默认的，这可以查询到机器上的本地时区的硬件时钟。</p> 
<p>如果想要根据硬件时钟调整系统时钟，可以使用以下其中之一：</p> 
<pre><code class="prism language-bash"><span class="token comment"># hwclock --hctosys </span>
<span class="token comment"># hwclock -s</span>
</code></pre> 
<p>想要根据系统时钟调整硬件时钟，可以使用以下其中之一：</p> 
<pre><code class="prism language-bash"><span class="token comment"># hwclock --systohc </span>
<span class="token comment"># hwclock -w</span>
</code></pre> 
<h3><a id="_116"></a>如何查看和设置时区</h3> 
<h4><a id="_118"></a>查看时区</h4> 
<pre><code class="prism language-bash"><span class="token comment"># ll /etc/localtime </span>
lrwxrwxrwx. <span class="token number">1</span> root root <span class="token number">35</span> Oct <span class="token number">12</span> 09:48 /etc/localtime -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/usr/share/zoneinfo/Asia/Shanghai

<span class="token comment"># 而在Ubuntu中可以使用这个方式查询时区，在CentOS中没有该文件</span>
$ <span class="token function">cat</span> /etc/timezone
Asia/Shanghai
</code></pre> 
<p>在Linux中glibc提供了事先编译好的许多 timezone 文件，它们都存放在 <code>/usr/share/zoneinfo</code> 这个目录下，这里基本涵盖了大部分的国家和城市。</p> 
<pre><code class="prism language-bash"><span class="token comment"># ls -F /usr/share/zoneinfo/</span>
Africa/      EST5EDT      Jamaica      PRC
America/     Etc/         Japan        PST8PDT
Antarctica/  Europe/      Kwajalein    right/
Arctic/      GB           leapseconds  ROC
Asia/        GB-Eire      Libya        ROK
Atlantic/    GMT          MET          Singapore
Australia/   GMT+0        Mexico/      Turkey
Brazil/      GMT-0        MST          tzdata.zi
Canada/      GMT0         MST7MDT      UCT
CET          Greenwich    Navajo       Universal
Chile/       Hongkong     NZ           US/
CST6CDT      HST          NZ-CHAT      UTC
Cuba         Iceland      Pacific/     WET
EET          Indian/      Poland       W-SU
Egypt        Iran         Portugal     zone1970.tab
Eire         iso3166.tab  posix/       zone.tab
EST          Israel       posixrules   Zulu
</code></pre> 
<p>如果我们想要查看对应时区的当前时间，可以使用：</p> 
<p>使用zdump命令可以在命令行上显示指定的每个区域名称的当前时间。</p> 
<pre><code class="prism language-bash">$ zdump china
china  Wed Oct <span class="token number">12</span> 02:47:12 <span class="token number">2022</span> china
sam@Ubuntu22:~$ zdump hongkong
hongkong  Wed Oct <span class="token number">12</span> 02:47:18 <span class="token number">2022</span> hongkong
zdump: warning: zone <span class="token string">"hongkong"</span> abbreviation <span class="token string">"hongkong"</span> has <span class="token function">more</span> than <span class="token number">6</span> characters
$ zdump hongk
hongk  Wed Oct <span class="token number">12</span> 02:47:37 <span class="token number">2022</span> hongk
</code></pre> 
<p>该命令在参数部分提供超过6个字符时，会出现警告。</p> 
<h4><a id="_167"></a>设置时区</h4> 
<p>想要设置时区可以有以下方法：</p> 
<h5><a id="tzselect_171"></a>tzselect</h5> 
<p>使用 <code>tzselect</code> 交互式命令，该命令在Linux低版本中也可以使用。</p> 
<p>设置TZ环境变量的值。许多程序和命令都会使用这个变量的值。TZ的值可以有多种格式，最简单的设置方法是使用：</p> 
<pre><code class="prism language-bash">$ tzselect 
Please identify a location so that <span class="token function">time</span> zone rules can be <span class="token builtin class-name">set</span> correctly.
Please <span class="token keyword">select</span> a continent, ocean, <span class="token string">"coord"</span>, or <span class="token string">"TZ"</span><span class="token builtin class-name">.</span>
 <span class="token number">1</span><span class="token punctuation">)</span> Africa
 <span class="token number">2</span><span class="token punctuation">)</span> Americas
 <span class="token number">3</span><span class="token punctuation">)</span> Antarctica
 <span class="token number">4</span><span class="token punctuation">)</span> Asia
 <span class="token number">5</span><span class="token punctuation">)</span> Atlantic Ocean
 <span class="token number">6</span><span class="token punctuation">)</span> Australia
 <span class="token number">7</span><span class="token punctuation">)</span> Europe
 <span class="token number">8</span><span class="token punctuation">)</span> Indian Ocean
 <span class="token number">9</span><span class="token punctuation">)</span> Pacific Ocean
<span class="token number">10</span><span class="token punctuation">)</span> coord - I want to use geographical coordinates.
<span class="token number">11</span><span class="token punctuation">)</span> TZ - I want to specify the timezone using the Posix TZ format.
<span class="token comment">#? 4</span>
Please <span class="token keyword">select</span> a country whose clocks agree with yours.
 <span class="token number">1</span><span class="token punctuation">)</span> Afghanistan			       <span class="token number">20</span><span class="token punctuation">)</span> Iran				      <span class="token number">39</span><span class="token punctuation">)</span> Palestine
 <span class="token number">2</span><span class="token punctuation">)</span> Antarctica			       <span class="token number">21</span><span class="token punctuation">)</span> Iraq				      <span class="token number">40</span><span class="token punctuation">)</span> Philippines
 <span class="token number">3</span><span class="token punctuation">)</span> Armenia			           <span class="token number">22</span><span class="token punctuation">)</span> Israel			      <span class="token number">41</span><span class="token punctuation">)</span> Qatar
 <span class="token number">4</span><span class="token punctuation">)</span> Azerbaijan			       <span class="token number">23</span><span class="token punctuation">)</span> Japan			      <span class="token number">42</span><span class="token punctuation">)</span> Réunion
 <span class="token number">5</span><span class="token punctuation">)</span> Bahrain			           <span class="token number">24</span><span class="token punctuation">)</span> Jordan			      <span class="token number">43</span><span class="token punctuation">)</span> Russia
 <span class="token number">6</span><span class="token punctuation">)</span> Bangladesh			       <span class="token number">25</span><span class="token punctuation">)</span> Kazakhstan			  <span class="token number">44</span><span class="token punctuation">)</span> SaudiArabia
 <span class="token number">7</span><span class="token punctuation">)</span> Bhutan			           <span class="token number">26</span><span class="token punctuation">)</span> Korea <span class="token punctuation">(</span>North<span class="token punctuation">)</span>		  <span class="token number">45</span><span class="token punctuation">)</span>  Seychelles
 <span class="token number">8</span><span class="token punctuation">)</span> Brunei			           <span class="token number">27</span><span class="token punctuation">)</span> Korea <span class="token punctuation">(</span>South<span class="token punctuation">)</span>	      <span class="token number">46</span><span class="token punctuation">)</span> Singapore
 <span class="token number">9</span><span class="token punctuation">)</span> Cambodia			       <span class="token number">28</span><span class="token punctuation">)</span> Kuwait			      <span class="token number">47</span><span class="token punctuation">)</span> Sri Lanka
<span class="token number">10</span><span class="token punctuation">)</span> China			           <span class="token number">29</span><span class="token punctuation">)</span> Kyrgyzstan		      <span class="token number">48</span><span class="token punctuation">)</span> Syria
<span class="token number">11</span><span class="token punctuation">)</span> Christmas Island		   <span class="token number">30</span><span class="token punctuation">)</span> Laos				      <span class="token number">49</span><span class="token punctuation">)</span> Taiwan
<span class="token number">12</span><span class="token punctuation">)</span> Cocos <span class="token punctuation">(</span>Keeling<span class="token punctuation">)</span> Islands	   <span class="token number">31</span><span class="token punctuation">)</span> Lebanon			      <span class="token number">50</span><span class="token punctuation">)</span> Tajikistan
<span class="token number">13</span><span class="token punctuation">)</span> Cyprus			           <span class="token number">32</span><span class="token punctuation">)</span> Macau			      <span class="token number">51</span><span class="token punctuation">)</span> Thailand
<span class="token number">14</span><span class="token punctuation">)</span> East Timor			       <span class="token number">33</span><span class="token punctuation">)</span> Malaysia			      <span class="token number">52</span><span class="token punctuation">)</span> Turkmenistan
<span class="token number">15</span><span class="token punctuation">)</span> French Southern <span class="token operator">&amp;</span> Antarctic Lands  <span class="token number">34</span><span class="token punctuation">)</span> Mongolia		  <span class="token number">53</span><span class="token punctuation">)</span> United Arab Emirates
<span class="token number">16</span><span class="token punctuation">)</span> Georgia			           <span class="token number">35</span><span class="token punctuation">)</span> Myanmar <span class="token punctuation">(</span>Burma<span class="token punctuation">)</span>		  <span class="token number">54</span><span class="token punctuation">)</span> Uzbekistan
<span class="token number">17</span><span class="token punctuation">)</span> Hong Kong			       <span class="token number">36</span><span class="token punctuation">)</span> Nepal			      <span class="token number">55</span><span class="token punctuation">)</span> Vietnam
<span class="token number">18</span><span class="token punctuation">)</span> India			           <span class="token number">37</span><span class="token punctuation">)</span> Oman				      <span class="token number">56</span><span class="token punctuation">)</span> Yemen
<span class="token number">19</span><span class="token punctuation">)</span> Indonesia			       <span class="token number">38</span><span class="token punctuation">)</span> Pakistan
<span class="token comment">#? 10</span>
Please <span class="token keyword">select</span> one of the following timezones.
<span class="token number">1</span><span class="token punctuation">)</span> Beijing Time
<span class="token number">2</span><span class="token punctuation">)</span> Xinjiang Time, Vostok
<span class="token comment">#? 1</span>

The following information has been given:

	China
	Beijing Time

Therefore <span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span> will be used.
Selected <span class="token function">time</span> is now:	Wed Oct <span class="token number">12</span> <span class="token number">10</span>:52:42 CST <span class="token number">2022</span>.
Universal Time is now:	Wed Oct <span class="token number">12</span> 02:52:42 UTC <span class="token number">2022</span>.
Is the above information OK?
<span class="token number">1</span><span class="token punctuation">)</span> Yes
<span class="token number">2</span><span class="token punctuation">)</span> No
<span class="token comment">#? 1</span>

You can <span class="token function">make</span> this change permanent <span class="token keyword">for</span> yourself by appending the line
	<span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> TZ
to the <span class="token function">file</span> <span class="token string">'.profile'</span> <span class="token keyword">in</span> your home directory<span class="token punctuation">;</span> <span class="token keyword">then</span> log out and log <span class="token keyword">in</span> again.

Here is that TZ value again, this <span class="token function">time</span> on standard output so that you
can use the /usr/bin/tzselect <span class="token builtin class-name">command</span> <span class="token keyword">in</span> shell scripts:
Asia/Shanghai
</code></pre> 
<p>想要永久修改这个TZ环境变量的值，可以采用以下方法：把以下这行代码，添加到你的家目录 <code>.profile</code> 中，然后登出及再次登录。</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> TZ
</code></pre> 
<p>这样，TZ变量的值会覆盖 <code>/etc/localtime</code> 的值。如果想要永久修改系统的时区，可以在<code>/etc/profile</code> 添加TZ变量的值。</p> 
<h4><a id="timedatectl_253"></a>timedatectl</h4> 
<p>该命令在CentOS 7 开始或者Ubuntu可用。其用于控制系统时间和日期。</p> 
<p>使用的语法为：</p> 
<pre><code class="prism language-bash">$ timedatectl <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>COMMAND<span class="token punctuation">}</span>

<span class="token comment"># 显示默认的状态值：</span>
$ timedatectl 
               Local time: Wed <span class="token number">2022</span>-10-12 <span class="token number">12</span>:13:16 CST
           Universal time: Wed <span class="token number">2022</span>-10-12 04:13:16 UTC
                 RTC time: Wed <span class="token number">2022</span>-10-12 04:13:16
                Time zone: Asia/Shanghai <span class="token punctuation">(</span>CST, +0800<span class="token punctuation">)</span>
System clock synchronized: no
              NTP service: n/a
          RTC <span class="token keyword">in</span> <span class="token builtin class-name">local</span> TZ: no

</code></pre> 
<p>先查询有哪些时区及格式，然后进行时区的设置，该命令会同时改变内存中的和文件中的值。</p> 
<pre><code class="prism language-bash">$ timedatectl list-timezones 
Africa/Abidjan
Africa/Accra
Africa/Addis_Ababa
Africa/Algiers
Africa/Asmara
Africa/Asmera
Africa/Bamako
Africa/Bangui
Africa/Banjul
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

$ <span class="token function">sudo</span> timedatectl set-timezone Asia/Shanghai
$ ll /etc/localtime 
lrwxrwxrwx <span class="token number">1</span> root root <span class="token number">33</span> Oct <span class="token number">12</span> 03:14 /etc/localtime -<span class="token operator">&gt;</span> /usr/share/zoneinfo/Asia/Shanghai
</code></pre> 
<p>也可以设置时间和日期，并可同时改变系统时间和硬件时间。</p> 
<pre><code class="prism language-bash">timedatectl set-time <span class="token string">'2022-12-12 06:06:30'</span>
</code></pre> 
<p>可以设置是否启用 ntp</p> 
<pre><code class="prism language-bash">$ timedatectl 
               Local time: Wed <span class="token number">2022</span>-10-12 <span class="token number">15</span>:17:24 CST
           Universal time: Wed <span class="token number">2022</span>-10-12 07:17:24 UTC
                 RTC time: Wed <span class="token number">2022</span>-10-12 07:17:23    
                Time zone: Asia/Shanghai <span class="token punctuation">(</span>CST, +0800<span class="token punctuation">)</span> 
System clock synchronized: <span class="token function">yes</span>                        
              NTP service: inactive                   
          RTC <span class="token keyword">in</span> <span class="token builtin class-name">local</span> TZ: no

$ <span class="token function">sudo</span> timedatectl set-ntp on
$ timedatectl 
               Local time: Wed <span class="token number">2022</span>-10-12 <span class="token number">15</span>:18:43 CST
           Universal time: Wed <span class="token number">2022</span>-10-12 07:18:43 UTC
                 RTC time: Wed <span class="token number">2022</span>-10-12 07:18:43    
                Time zone: Asia/Shanghai <span class="token punctuation">(</span>CST, +0800<span class="token punctuation">)</span> 
System clock synchronized: <span class="token function">yes</span>                        
              NTP service: active                     
          RTC <span class="token keyword">in</span> <span class="token builtin class-name">local</span> TZ: no
</code></pre> 
<h3><a id="cal__321"></a>cal 日期</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 当月</span>
<span class="token comment"># cal</span>
    October <span class="token number">2022</span>      
Su Mo Tu We Th Fr Sa  
                   <span class="token number">1</span>  
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  
 <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span>  
<span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span>  
<span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span>  
<span class="token number">30</span> <span class="token number">31</span> 
、
<span class="token comment"># 当前年</span>
$ <span class="token function">cal</span> -y
                            <span class="token number">2022</span>
      January               February               March          
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  
                   <span class="token number">1</span>         <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>         <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>   <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span>   <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span>  
 <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span>  <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span>  <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span>  
<span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span>  <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span>  <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span>  
<span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span>  <span class="token number">27</span> <span class="token number">28</span>                 <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span> <span class="token number">31</span>        
<span class="token number">30</span> <span class="token number">31</span>                                                             

       April                  May                   June          
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  
                <span class="token number">1</span>  <span class="token number">2</span>   <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>            <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  
 <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span>   <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span>   <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span>  
<span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span>  <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span>  <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span>  
<span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span>  <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span>  <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span>  
<span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>  <span class="token number">29</span> <span class="token number">30</span> <span class="token number">31</span>              <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>        
                                                                  

        July                 August              September        
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  
                <span class="token number">1</span>  <span class="token number">2</span>      <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>               <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  
 <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span>   <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span>   <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span>  
<span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span>  <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span>  <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span>  
<span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span>  <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span>  <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span>  
<span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>  <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span> <span class="token number">31</span>           <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>     
<span class="token number">31</span>                                                                

      October               November              December        
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  
                   <span class="token number">1</span>         <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>               <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  
 <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>   <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span>   <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span>  
 <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span>  <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span>  <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span>  
<span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span>  <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span>  <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span>  
<span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span>  <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>           <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span> <span class="token number">31</span>  
<span class="token number">30</span> <span class="token number">31</span>   

<span class="token comment"># 指定月</span>
$ <span class="token function">cal</span> <span class="token number">10</span> <span class="token number">2035</span>
    October <span class="token number">2035</span>      
Su Mo Tu We Th Fr Sa  
    <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>  <span class="token number">6</span>  
 <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span>  
<span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span>  
<span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span>  
<span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span> <span class="token number">31</span> 
</code></pre> 
<p>其中一个特别的日期是，有关原因请自行查询。</p> 
<pre><code class="prism language-bash"><span class="token comment"># cal 9 1752</span>
   September <span class="token number">1752</span>     
Su Mo Tu We Th Fr Sa  
       <span class="token number">1</span>  <span class="token number">2</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span>  
<span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span>  
<span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span> 
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/75e043ae600c791a5d60227f0a9d02fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux删除ip地址的命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ab125714f6c5b667702451cf79508f0a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">System.Text.Encoding.Default.GetString()后面无法再添加字符</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>