<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>gitignore文件使用方法（gitignore教程）（git status --ignored）（git check-ignore -v ＜file＞） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="gitignore文件使用方法（gitignore教程）（git status --ignored）（git check-ignore -v ＜file＞）" />
<meta property="og:description" content="文章目录 Gitignore文件使用描述Gitignore基本语法1. 基本语法★★★★★2. 配置方法 匹配示例示例1示例2示例3 其他命令`git status --ignored`（用于显示被Git忽略的文件和文件夹的状态）`git check-ignore -v &lt;file&gt;`（用于检查指定文件是否被Git忽略，并显示忽略规则的详细信息） 答疑关于“否定模式`!`中，被先前模式排除的任何匹配文件将重新包含。如果排除了文件的父目录，则无法重新包含该文件”如何取消已跟踪的文件？示例 在gitignore中增加忽略的项目后，如何删除云上仓库中相应的项目 参考文章 Gitignore文件 Gitignore是一个用于指定Git版本控制系统忽略特定文件或目录的规则文件。它的发展可以追溯到早期的版本控制系统，如CVS和SVN，这些系统使用类似的机制来忽略特定文件。
在Git中，Gitignore文件的原理是通过定义一系列规则来告诉Git哪些文件应该被忽略。这些规则可以是简单的通配符模式，也可以是正则表达式。当Git执行某个操作时，如添加文件到版本控制或提交更改，它会检查Gitignore文件中的规则，并根据规则来决定是否忽略某个文件。
Gitignore文件的作用是帮助开发者过滤掉不需要被版本控制的文件，以减少仓库的体积和提高操作效率。它可以用于忽略一些临时文件、编译生成的文件、日志文件、配置文件等。通过忽略这些文件，可以使版本控制系统更加干净和专注于源代码的管理。
使用描述 一个.gitignore文件指定了Git应该忽略的意图上未跟踪的文件。已经被Git跟踪的文件不受影响；有关详细信息，请参阅下面的注释。
gitignore文件中的每一行都指定了一个模式。在决定是否忽略一个路径时，Git通常会从多个来源检查gitignore模式，按照以下优先顺序（在一个优先级级别内，最后匹配的模式决定结果）：
对于支持它们的命令，从命令行读取的模式。
从与路径相同目录中的.gitignore文件，或者从任何父目录（直到工作树的顶级）中读取的模式，其中较高级别文件中的模式会被较低级别文件中的模式覆盖，直到包含该文件的目录。这些模式相对于.gitignore文件的位置进行匹配。一个项目通常会在其存储库中包含这样的.gitignore文件，其中包含作为项目构建的一部分生成的文件的模式。
从$GIT_DIR/info/exclude中读取的模式。
从由配置变量core.excludesFile指定的文件中读取的模式。
将模式放在哪个文件中取决于模式的使用方式。
应该进行版本控制并通过克隆分发到其他存储库（即，所有开发人员都希望忽略的文件）的模式应该放在.gitignore文件中。
特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存储库内部但特定于一个用户工作流程的辅助文件）应该放在$GIT_DIR/info/exclude文件中。
用户希望Git在所有情况下都忽略的模式（例如，用户选择的编辑器生成的备份或临时文件）通常放在由core.excludesFile在用户的~/.gitconfig中指定的文件中。它的默认值是$XDG_CONFIG_HOME/git/ignore。如果$XDG_CONFIG_HOME未设置或为空，则使用$HOME/.config/git/ignore。
底层的Git工具，如git ls-files和git read-tree，从命令行选项指定的gitignore模式或从命令行选项指定的文件中读取。更高级别的Git工具，如git status和git add，使用上述来源中的模式。
Gitignore基本语法 Gitignore文件的基本使用方法是通过定义规则来告诉Git哪些文件应该被忽略。下面是Gitignore文件的基本语法和配置方法：
1. 基本语法★★★★★ 空行不匹配任何文件，因此可以用作可读性的分隔符。以“#”开头的行作为注释。对于以“#”开头的模式，可以在第一个“#”前面加上反斜杠（“\”）。尾随空格会被忽略，除非用反斜杠（“\”）引用。可选的前缀“!”可以否定模式；被先前模式排除的任何匹配文件将重新包含。如果排除了文件的父目录，则无法重新包含该文件。出于性能原因，Git不会列出被排除的目录，因此对包含的文件的任何模式都没有影响，无论它们在何处定义。对于以字面“!”开头的模式，例如“\!important!.txt”，可以在第一个“!”前面加上反斜杠（“\”）。斜杠“/”用作目录分隔符。分隔符可以出现在.gitignore搜索模式的开头、中间或结尾。
如果模式的开头或中间（或两者都有）有分隔符/，则该模式相对于特定.gitignore文件所在的目录级别。否则，该模式也可以在.gitignore级别以下的任何级别匹配。（比如a/b中间有斜杠，需要a与.gitignore同级才会被匹配，c/a/b不会匹配；/a同样）
如果模式的结尾有分隔符/，则该模式只匹配目录，否则该模式可以匹配文件和目录。
例如，模式doc/frotz/匹配doc/frotz目录，但不匹配a/doc/frotz目录；但是frotz/匹配frotz和a/frotz这两个目录（所有路径都是相对于.gitignore文件的）。星号“*”匹配除斜杠以外的任何字符（可匹配多个字符组成的字符串，但字符串中不能包含斜杠/）。问号“?”匹配除斜杠以外的任何一个字符（只能匹配一个字符）。范围表示法，例如[a-zA-Z]，可用于匹配范围内的一个字符。有关更详细的说明，请参阅fnmatch(3)和FNM_PATHNAME标志。在与完整路径名匹配的模式中，两个连续的星号（“**”）可能具有特殊含义： 以“**”开头的斜杠表示在所有目录中匹配。例如，“**/foo”匹配任何位置的文件或目录“foo”，与模式“foo”相同。“**/foo/bar”匹配直接位于目录“foo”下的文件或目录“bar”。以“/**”结尾的斜杠表示匹配其中的所有内容。例如，“abc/**”匹配相对于.gitignore文件位置的目录“abc”中的所有文件，具有无限深度。斜杠后面跟着两个连续的星号然后是斜杠，表示匹配零个或多个目录。例如，“a/**/b”匹配“a/b”、“a/x/b”、“a/x/y/b”等。 其他连续的星号被视为普通的星号，并根据前面的规则进行匹配。 2. 配置方法 在项目根目录下创建一个名为.gitignore的文件。在.gitignore文件中添加需要忽略的文件或目录的规则。每行一个规则，可以使用上述基本语法来定义规则。保存.gitignore文件。 对于有多个目录的情况，想要忽略某种类型文件的目录和不想忽略的目录，可以在.gitignore文件中分别定义规则。例如，假设有两个目录dir1和dir2，想要忽略dir1目录下的.txt文件，但不想忽略dir2目录下的.txt文件，可以按照以下步骤进行配置：
在.gitignore文件中添加以下规则：
# 忽略dir1目录下的.txt文件 /dir1/*.txt 在dir2目录下创建一个名为.gitignore的文件。
在dir2/.gitignore文件中添加以下规则：
# 不忽略dir2目录下的.txt文件 !*.txt 这样配置后，Git会忽略dir1目录下的.txt文件，但不会忽略dir2目录下的.txt文件。注意，.gitignore文件的规则是逐级生效的，所以在dir2/.gitignore文件中使用!*.txt来取反，表示不忽略dir2目录下的.txt文件。
匹配示例 示例1 模式 hello.* 匹配以 hello. 开头的任何文件或目录。如果只想限制在目录中而不包括其子目录，可以在模式前加上斜杠，即 /hello.*；现在模式匹配 hello.txt、hello.c，但不匹配 a/hello.java。
模式 foo/ 匹配目录 foo 及其下面的路径，但不匹配普通文件或符号链接 foo（这与 Git 中 pathspec 的工作方式一致）。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b2dd2024819bcc2d88b19b6a9c7b9d48/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-29T14:55:55+08:00" />
<meta property="article:modified_time" content="2023-08-29T14:55:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">gitignore文件使用方法（gitignore教程）（git status --ignored）（git check-ignore -v ＜file＞）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#Gitignore_3" rel="nofollow">Gitignore文件</a></li><li><a href="#_10" rel="nofollow">使用描述</a></li><li><a href="#Gitignore_32" rel="nofollow">Gitignore基本语法</a></li><li><ul><li><a href="#1__35" rel="nofollow">1. 基本语法★★★★★</a></li><li><a href="#2__53" rel="nofollow">2. 配置方法</a></li></ul> 
   </li><li><a href="#_77" rel="nofollow">匹配示例</a></li><li><ul><li><a href="#1_78" rel="nofollow">示例1</a></li><li><a href="#2_114" rel="nofollow">示例2</a></li><li><a href="#3_126" rel="nofollow">示例3</a></li></ul> 
   </li><li><a href="#_140" rel="nofollow">其他命令</a></li><li><ul><li><a href="#git_status_ignoredGit_141" rel="nofollow">`git status --ignored`（用于显示被Git忽略的文件和文件夹的状态）</a></li><li><a href="#git_checkignore_v_fileGit_169" rel="nofollow">`git check-ignore -v &lt;file&gt;`（用于检查指定文件是否被Git忽略，并显示忽略规则的详细信息）</a></li></ul> 
   </li><li><a href="#_186" rel="nofollow">答疑</a></li><li><ul><li><a href="#_187" rel="nofollow">关于“否定模式`!`中，被先前模式排除的任何匹配文件将重新包含。如果排除了文件的父目录，则无法重新包含该文件”</a></li><li><a href="#_220" rel="nofollow">如何取消已跟踪的文件？</a></li><li><ul><li><a href="#_238" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#gitignore_255" rel="nofollow">在gitignore中增加忽略的项目后，如何删除云上仓库中相应的项目</a></li></ul> 
   </li><li><a href="#_271" rel="nofollow">参考文章</a></li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/bb/61/fwZDxwwk_o.png" alt="在这里插入图片描述"> 
<p></p> 
<h3><a id="Gitignore_3"></a>Gitignore文件</h3> 
<p>Gitignore是一个用于指定Git版本控制系统忽略特定文件或目录的规则文件。它的发展可以追溯到早期的版本控制系统，如CVS和SVN，这些系统使用类似的机制来忽略特定文件。</p> 
<p>在Git中，Gitignore文件的原理是通过定义一系列规则来告诉Git哪些文件应该被忽略。这些规则可以是简单的通配符模式，也可以是正则表达式。当Git执行某个操作时，如添加文件到版本控制或提交更改，它会检查Gitignore文件中的规则，并根据规则来决定是否忽略某个文件。</p> 
<p>Gitignore文件的作用是帮助开发者过滤掉不需要被版本控制的文件，以减少仓库的体积和提高操作效率。它可以用于忽略一些临时文件、编译生成的文件、日志文件、配置文件等。通过忽略这些文件，可以使版本控制系统更加干净和专注于源代码的管理。</p> 
<h3><a id="_10"></a>使用描述</h3> 
<p>一个.gitignore文件指定了Git应该忽略的意图上未跟踪的文件。已经被Git跟踪的文件不受影响；有关详细信息，请参阅下面的注释。</p> 
<p>gitignore文件中的每一行都指定了一个模式。在决定是否忽略一个路径时，Git通常会从多个来源检查gitignore模式，按照以下优先顺序（在一个优先级级别内，最后匹配的模式决定结果）：</p> 
<p>对于支持它们的命令，从命令行读取的模式。</p> 
<p>从与路径相同目录中的.gitignore文件，或者从任何父目录（直到工作树的顶级）中读取的模式，其中较高级别文件中的模式会被较低级别文件中的模式覆盖，直到包含该文件的目录。这些模式相对于.gitignore文件的位置进行匹配。一个项目通常会在其存储库中包含这样的.gitignore文件，其中包含作为项目构建的一部分生成的文件的模式。</p> 
<p>从<code>$GIT_DIR/info/exclude</code>中读取的模式。</p> 
<p>从由配置变量<code>core.excludesFile</code>指定的文件中读取的模式。</p> 
<p>将模式放在哪个文件中取决于模式的使用方式。</p> 
<p>应该进行版本控制并通过克隆分发到其他存储库（即，所有开发人员都希望忽略的文件）的模式应该放在<code>.gitignore</code>文件中。</p> 
<p>特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存储库内部但特定于一个用户工作流程的辅助文件）应该放在<code>$GIT_DIR/info/exclude</code>文件中。</p> 
<p>用户希望Git在所有情况下都忽略的模式（例如，用户选择的编辑器生成的备份或临时文件）通常放在由<code>core.excludesFile</code>在用户的<code>~/.gitconfig</code>中指定的文件中。它的默认值是<code>$XDG_CONFIG_HOME/git/ignore</code>。如果<code>$XDG_CONFIG_HOME</code>未设置或为空，则使用<code>$HOME/.config/git/ignore</code>。</p> 
<p>底层的Git工具，如<code>git ls-files</code>和<code>git read-tree</code>，从命令行选项指定的gitignore模式或从命令行选项指定的文件中读取。更高级别的Git工具，如<code>git status</code>和<code>git add</code>，使用上述来源中的模式。</p> 
<h3><a id="Gitignore_32"></a>Gitignore基本语法</h3> 
<p>Gitignore文件的基本使用方法是通过定义规则来告诉Git哪些文件应该被忽略。下面是Gitignore文件的基本语法和配置方法：</p> 
<h4><a id="1__35"></a>1. 基本语法★★★★★</h4> 
<ul><li>空行不匹配任何文件，因此可以用作可读性的分隔符。</li><li>以“<code>#</code>”开头的行作为注释。对于以“<code>#</code>”开头的模式，可以在第一个“<code>#</code>”前面加上反斜杠（“<code>\</code>”）。</li><li>尾随空格会被忽略，除非用反斜杠（“<code>\</code>”）引用。</li><li>可选的前缀“<code>!</code>”可以否定模式；<mark>被先前模式排除的任何匹配文件将重新包含。如果排除了文件的父目录，则无法重新包含该文件</mark>。出于性能原因，Git不会列出被排除的目录，因此对包含的文件的任何模式都没有影响，无论它们在何处定义。对于以字面“!”开头的模式，例如“<code>\!important!.txt</code>”，可以在第一个“<code>!</code>”前面加上反斜杠（“<code>\</code>”）。</li><li>斜杠“<code>/</code>”用作目录分隔符。分隔符可以出现在.gitignore搜索模式的开头、中间或结尾。<br> 如果模式的开头或中间（或两者都有）有分隔符<code>/</code>，则该模式相对于特定.gitignore文件所在的目录级别。否则，该模式也可以在.gitignore级别以下的任何级别匹配。（比如<code>a/b</code>中间有斜杠，需要<code>a</code>与.gitignore同级才会被匹配，<code>c/a/b</code>不会匹配；<code>/a</code>同样）<br> 如果模式的结尾有分隔符<code>/</code>，则该模式只匹配目录，否则该模式可以匹配文件和目录。<br> 例如，模式<code>doc/frotz/</code>匹配<code>doc/frotz</code>目录，但不匹配<code>a/doc/frotz</code>目录；但是<code>frotz/</code>匹配<code>frotz</code>和<code>a/frotz</code>这两个目录（所有路径都是相对于.gitignore文件的）。</li><li>星号“<code>*</code>”匹配除斜杠以外的任何字符（可匹配多个字符组成的字符串，但字符串中不能包含斜杠<code>/</code>）。问号“<code>?</code>”匹配除斜杠以外的任何一个字符（只能匹配一个字符）。范围表示法，例如<code>[a-zA-Z]</code>，可用于匹配范围内的一个字符。有关更详细的说明，请参阅fnmatch(3)和FNM_PATHNAME标志。</li><li>在与完整路径名匹配的模式中，两个连续的星号（“<code>**</code>”）可能具有特殊含义： 
  <ul><li>以“<code>**</code>”开头的斜杠表示在所有目录中匹配。例如，“<code>**/foo</code>”匹配任何位置的文件或目录“foo”，与模式“<code>foo</code>”相同。“<code>**/foo/bar</code>”匹配直接位于目录“foo”下的文件或目录“bar”。</li><li>以“<code>/**</code>”结尾的斜杠表示匹配其中的所有内容。例如，“<code>abc/**</code>”匹配相对于.gitignore文件位置的目录“abc”中的所有文件，具有无限深度。</li><li>斜杠后面跟着两个连续的星号然后是斜杠，表示匹配零个或多个目录。例如，“<code>a/**/b</code>”匹配“<code>a/b</code>”、“<code>a/x/b</code>”、“<code>a/x/y/b</code>”等。</li></ul> </li><li>其他连续的星号被视为普通的星号，并根据前面的规则进行匹配。</li></ul> 
<h4><a id="2__53"></a>2. 配置方法</h4> 
<ul><li>在项目根目录下创建一个名为<code>.gitignore</code>的文件。</li><li>在<code>.gitignore</code>文件中添加需要忽略的文件或目录的规则。</li><li>每行一个规则，可以使用上述基本语法来定义规则。</li><li>保存<code>.gitignore</code>文件。</li></ul> 
<p>对于有多个目录的情况，想要忽略某种类型文件的目录和不想忽略的目录，可以在<code>.gitignore</code>文件中分别定义规则。例如，假设有两个目录<code>dir1</code>和<code>dir2</code>，想要忽略<code>dir1</code>目录下的<code>.txt</code>文件，但不想忽略<code>dir2</code>目录下的<code>.txt</code>文件，可以按照以下步骤进行配置：</p> 
<ol><li> <p>在<code>.gitignore</code>文件中添加以下规则：</p> <pre><code class="prism language-py"><span class="token comment"># 忽略dir1目录下的.txt文件</span>
<span class="token operator">/</span>dir1<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>txt
</code></pre> </li><li> <p>在<code>dir2</code>目录下创建一个名为<code>.gitignore</code>的文件。</p> </li><li> <p>在<code>dir2/.gitignore</code>文件中添加以下规则：</p> <pre><code class="prism language-py"><span class="token comment"># 不忽略dir2目录下的.txt文件</span>
!<span class="token operator">*</span><span class="token punctuation">.</span>txt
</code></pre> </li></ol> 
<p>这样配置后，Git会忽略<code>dir1</code>目录下的<code>.txt</code>文件，但不会忽略<code>dir2</code>目录下的<code>.txt</code>文件。注意，<code>.gitignore</code>文件的规则是逐级生效的，所以在<code>dir2/.gitignore</code>文件中使用<code>!*.txt</code>来取反，表示不忽略<code>dir2</code>目录下的<code>.txt</code>文件。</p> 
<h3><a id="_77"></a>匹配示例</h3> 
<h4><a id="1_78"></a>示例1</h4> 
<p>模式 <code>hello.*</code> 匹配以 <code>hello.</code> 开头的任何文件或目录。如果只想限制在目录中而不包括其子目录，可以在模式前加上斜杠，即 <code>/hello.*</code>；现在模式匹配 <code>hello.txt</code>、<code>hello.c</code>，但不匹配 <code>a/hello.java</code>。</p> 
<p>模式 <code>foo/</code> 匹配目录 <code>foo</code> 及其下面的路径，但不匹配普通文件或符号链接 <code>foo</code>（这与 Git 中 pathspec 的工作方式一致）。</p> 
<p>模式 <code>doc/frotz</code> 和 <code>/doc/frotz</code> 在任何 <code>.gitignore</code> 文件中具有<mark>相同的效果</mark>。换句话说，如果模式中已经有<mark>中间斜杠</mark>，那么前导斜杠就不相关了。</p> 
<p>模式 “<code>foo/*</code>” 匹配 “<code>foo/test.json</code>”（普通文件）、“<code>foo/bar</code>”（目录），但不匹配 “<code>foo/bar/hello.c</code>”（普通文件），因为模式中的星号不匹配带有斜杠的 “<code>bar/hello.c</code>”。</p> 
<pre><code class="prism language-python">$ git status
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token comment"># Untracked files:</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token comment">#       Documentation/foo.html</span>
<span class="token comment">#       Documentation/gitignore.html</span>
<span class="token comment">#       file.o</span>
<span class="token comment">#       lib.a</span>
<span class="token comment">#       src/internal.o</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
$ cat <span class="token punctuation">.</span>git<span class="token operator">/</span>info<span class="token operator">/</span>exclude
<span class="token comment"># ignore objects and archives, anywhere in the tree.</span>
<span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">[</span>oa<span class="token punctuation">]</span>
$ cat Documentation<span class="token operator">/</span><span class="token punctuation">.</span>gitignore
<span class="token comment"># ignore generated html files,</span>
<span class="token operator">*</span><span class="token punctuation">.</span>html
<span class="token comment"># except foo.html which is maintained by hand</span>
!foo<span class="token punctuation">.</span>html
$ git status
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token comment"># Untracked files:</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token comment">#       Documentation/foo.html</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> 
<p>上面这段代码是一个示例，用来说明git中的文件忽略功能。在这个示例中，首先使用<code>git status</code>命令查看当前仓库的状态，发现有一些未跟踪的文件。然后，通过查看<code>.git/info/exclude</code>文件和<code>Documentation/.gitignore</code>文件，可以看到哪些文件被设置为忽略。最后再次使用<code>git status</code>命令查看仓库的状态，发现只有<code>Documentation/foo.html</code>文件没有被忽略。</p> 
<h4><a id="2_114"></a>示例2</h4> 
<pre><code class="prism language-python">$ cat <span class="token punctuation">.</span>gitignore
vmlinux<span class="token operator">*</span>
$ ls arch<span class="token operator">/</span>foo<span class="token operator">/</span>kernel<span class="token operator">/</span>vm<span class="token operator">*</span>
arch<span class="token operator">/</span>foo<span class="token operator">/</span>kernel<span class="token operator">/</span>vmlinux<span class="token punctuation">.</span>lds<span class="token punctuation">.</span>S
$ echo <span class="token string">'!/vmlinux*'</span> <span class="token operator">&gt;</span>arch<span class="token operator">/</span>foo<span class="token operator">/</span>kernel<span class="token operator">/</span><span class="token punctuation">.</span>gitignore
</code></pre> 
<p>第二个 <code>.gitignore</code> 防止 Git 忽略 <code>arch/foo/kernel/vmlinux.lds.S</code>。</p> 
<h4><a id="3_126"></a>示例3</h4> 
<p>例子：排除除了特定目录 <code>foo/bar</code> 之外的所有内容（注意 <code>/*</code> - 如果没有斜杠，通配符也会排除 <code>foo/bar</code> 内的所有内容）：</p> 
<pre><code class="prism language-python">$ cat <span class="token punctuation">.</span>gitignore
<span class="token comment"># 排除除了目录 foo/bar 之外的所有内容</span>
<span class="token operator">/</span><span class="token operator">*</span>
!<span class="token operator">/</span>foo
<span class="token operator">/</span>foo<span class="token operator">/</span><span class="token operator">*</span>
!<span class="token operator">/</span>foo<span class="token operator">/</span>bar
</code></pre> 
<h3><a id="_140"></a>其他命令</h3> 
<h4><a id="git_status_ignoredGit_141"></a><code>git status --ignored</code>（用于显示被Git忽略的文件和文件夹的状态）</h4> 
<p><code>git status --ignored</code>命令用于显示被Git忽略的文件和文件夹的状态。</p> 
<p>Git有一个名为<code>.gitignore</code>的文件，用于指定哪些文件和文件夹应该被忽略，不纳入版本控制。这些被忽略的文件和文件夹不会出现在<code>git status</code>命令的输出中。</p> 
<p>然而，有时候我们可能想要查看被忽略的文件和文件夹的状态，以确保我们的<code>.gitignore</code>文件配置正确。这时就可以使用<code>git status --ignored</code>命令。</p> 
<p>以下是一个示例输出：</p> 
<pre><code class="prism language-shell">On branch master
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>

Changes not staged <span class="token keyword">for</span> commit:
  <span class="token punctuation">(</span>use <span class="token string">"git add &lt;file&gt;..."</span> to update what will be committed<span class="token punctuation">)</span>
  <span class="token punctuation">(</span>use <span class="token string">"git restore &lt;file&gt;..."</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span>
        modified:   index.html

Ignored files:
  <span class="token punctuation">(</span>use <span class="token string">"git add -f &lt;file&gt;..."</span> to include <span class="token keyword">in</span> what will be committed<span class="token punctuation">)</span>
        ignored_file.txt
        ignored_folder/

no changes added to commit <span class="token punctuation">(</span>use <span class="token string">"git add"</span> and/or <span class="token string">"git commit -a"</span><span class="token punctuation">)</span>
</code></pre> 
<p>在上面的示例中，<code>index.html</code>文件被修改但未暂存，而<code>ignored_file.txt</code>和<code>ignored_folder/</code>被<code>.gitignore</code>文件忽略。</p> 
<h4><a id="git_checkignore_v_fileGit_169"></a><code>git check-ignore -v &lt;file&gt;</code>（用于检查指定文件是否被Git忽略，并显示忽略规则的详细信息）</h4> 
<p><code>git check-ignore -v &lt;file&gt;</code>命令用于检查指定文件是否被Git忽略，并显示忽略规则的详细信息。</p> 
<p>当我们在使用<code>.gitignore</code>文件或其他忽略规则时，有时候我们想要验证某个文件是否被正确地忽略。这时就可以使用<code>git check-ignore -v &lt;file&gt;</code>命令。</p> 
<p>以下是一个示例输出：</p> 
<pre><code class="prism language-shell">.gitignore:3:ignored_file.txt    ignored_file.txt
</code></pre> 
<p>在上面的示例中，<code>.gitignore</code>文件的第3行规则忽略了<code>ignored_file.txt</code>文件，并且<code>git check-ignore -v</code>命令显示了这个信息。</p> 
<p>如果文件没有被忽略，那么该命令将不会有任何输出。</p> 
<p>这个命令对于调试和验证忽略规则非常有用，可以帮助我们确保文件被正确地忽略。</p> 
<h3><a id="_186"></a>答疑</h3> 
<h4><a id="_187"></a>关于“否定模式<code>!</code>中，被先前模式排除的任何匹配文件将重新包含。如果排除了文件的父目录，则无法重新包含该文件”</h4> 
<p>看一个示例：</p> 
<p>我的<code>/test/test/</code>中有<code>a.txt</code>和<code>b.txt</code>两个文件（<code>/test/test/</code>与<code>.gitignore</code>同级）</p> 
<p>模式1：</p> 
<pre><code class="prism language-python"><span class="token operator">/</span><span class="token operator">*</span>
!<span class="token operator">/</span>test<span class="token operator">/</span>test<span class="token operator">/</span>
<span class="token comment"># !/test/</span>
<span class="token operator">/</span>test<span class="token operator">/</span>test<span class="token operator">/</span><span class="token operator">*</span>
!<span class="token operator">/</span>test<span class="token operator">/</span>test<span class="token operator">/</span>a<span class="token punctuation">.</span>txt
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/62/f3/CuKNr3sC_o.png" alt="在这里插入图片描述"></p> 
<p>模式2：</p> 
<pre><code class="prism language-python"><span class="token operator">/</span><span class="token operator">*</span>
<span class="token comment"># !/test/test/</span>
!<span class="token operator">/</span>test<span class="token operator">/</span>
<span class="token operator">/</span>test<span class="token operator">/</span>test<span class="token operator">/</span><span class="token operator">*</span>
!<span class="token operator">/</span>test<span class="token operator">/</span>test<span class="token operator">/</span>a<span class="token punctuation">.</span>txt
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/cc/a1/uozvldso_o.png" alt="在这里插入图片描述"></p> 
<p>就是说，在这个示例中，用<code>/*</code>排除了所有文件后，如果想恢复一个目录或者目录中的文件，一定要先恢复与<code>/*</code>同级下的这个目录或文件的最终父目录，在这个示例中是<code>/test/</code>目录，可以看到，恢复<code>/test/test/</code>是没有效果的。</p> 
<h4><a id="_220"></a>如何取消已跟踪的文件？</h4> 
<p>比如已经有一些大文件已经被跟踪了，但是我们不想跟踪了，想在下一次提交的时候排除掉怎么办？</p> 
<p>可以用：</p> 
<pre><code class="prism language-python">git rm <span class="token operator">-</span><span class="token operator">-</span>cached <span class="token operator">&lt;</span>文件名<span class="token operator">/</span>目录<span class="token operator">&gt;</span>
</code></pre> 
<p>或者用通配符：</p> 
<pre><code class="prism language-python">git rm <span class="token operator">-</span><span class="token operator">-</span>cached <span class="token operator">*</span><span class="token punctuation">.</span>txt
</code></pre> 
<p>或者用递归目录方式：</p> 
<pre><code class="prism language-python">git rm <span class="token operator">-</span><span class="token operator">-</span>cached <span class="token operator">-</span>r <span class="token operator">&lt;</span>文件夹路径<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="_238"></a>示例</h5> 
<p>执行<code>git rm --cached *.tar</code>取消所有<code>.tar</code>文件的跟踪：</p> 
<p><img src="https://images2.imgbox.com/d8/67/7IoWVax9_o.png" alt="在这里插入图片描述"></p> 
<p>在<code>.gitignore</code>中增加一个<code>*.tar</code>：</p> 
<p><img src="https://images2.imgbox.com/63/b4/3HwQ4xZ2_o.png" alt="在这里插入图片描述"></p> 
<p>执行<code>git status --ignored</code>查看，发现文件被取消跟踪了，那我们下次提交的时候，就不会把这些二文件提交上去了：</p> 
<p><img src="https://images2.imgbox.com/1b/51/1V8nLd8g_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/35/1b/7XRCljct_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="gitignore_255"></a>在gitignore中增加忽略的项目后，如何删除云上仓库中相应的项目</h4> 
<p>.gitignore 文件用于告诉 Git 哪些文件或目录不应该被提交到 Git 仓库。然而，如果你在设置 .gitignore 后想从云上的仓库中删除某个文件夹，你需要手动进行这个操作。</p> 
<p>.gitignore 不会自动从远程仓库删除任何文件或目录。它只是忽略了本地的一些文件或目录，防止它们被提交到远程仓库。</p> 
<p>所以，如果你希望删除云端（远程仓库）的文件夹，你需要首先在本地删除那个文件夹，然后提交这次改动，并推送到远程仓库。如此，云上的文件夹才会被删除。</p> 
<p>步骤如下：</p> 
<ol><li>删除本地的文件夹：<code>rm -rf foldername/</code></li><li>将删除操作添加到暂存区：<code>git add .</code></li><li>提交这次改动：<code>git commit -m "remove foldername"</code></li><li>推送到远程仓库：<code>git push origin master</code> (假设你正在主分支上工作)</li></ol> 
<p>注意，以上步骤会永久性地删除文件和文件夹。在执行前，请确保你真的不再需要这些文件和文件夹。</p> 
<h3><a id="_271"></a>参考文章</h3> 
<p><a href="https://git-scm.com/docs/gitignore" rel="nofollow">https://git-scm.com/docs/gitignore</a></p> 
<p><a href="https://www.jb51.net/article/277244.htm" rel="nofollow">.gitignore文件作用及使用方法详解</a></p> 
<p><a href="https://geek-docs.com/git/git-cmds/git-ignore.html" rel="nofollow">Git – Ignore命令</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c39e714304e630df5c952ae0acb85dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu系统基本操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3bd1802c0b15ca1aac0cb27efd3638b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何查看自己的公网ip</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>