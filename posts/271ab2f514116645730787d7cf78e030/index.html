<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Response知识点总结 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Response知识点总结" />
<meta property="og:description" content="1.设置响应行的状态码
setStatus(int sc)
常用的状态码如下：
200 ：请求成功。
302 ：请求重定向。
304 ：请求资源没有改变，访问本地缓存。
404 ：请求资源不存在。通常是用户路径编写错误，也可能是服务器资源已删除。
500 ：服务器内部错误。通常程序抛异常。
2.设置响应头
addHeader(String name, String value) addIntHeader(String name, int value) addDateHeader(String name, long date) setHeader(String name, String value) setDateHeader(String name, long date) setIntHeader(String name, int value)
3.设置响应体
(1)关于设置中文的乱码问题:response.setContentType(&#34;text/html;charset=UTF-8&#34;);
(2)响应头设置字节
ServletOutputStream getOutputStream() ------------可用于文件下载
附：文件下载核心代码
// 获得要下载的文件的名称 String filename = request.getParameter(&#34;filename&#34;); // 解决获得中文参数的乱码 filename = new String(filename.getBytes(&#34;ISO8859-1&#34;), &#34;UTF-8&#34;); // 获得请求头中的User-Agent String agent = request.getHeader(&#34;User-Agent&#34;); // 根据不同浏览器进行不同的编码 String filenameEncoder = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/271ab2f514116645730787d7cf78e030/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-10T00:12:00+08:00" />
<meta property="article:modified_time" content="2018-08-10T00:12:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Response知识点总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>1.设置响应行的状态码</strong></p> 
<p><a href="#setStatus%28int%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>setStatus</u></strong></span></u></strong></a>(int sc)</p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">常用的状态码如下：</span></p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">200 ：请求成功。</span></p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">302 ：请求重定向。</span></p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">304 ：请求资源没有改变，访问本地缓存。</span></p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">404 ：请求资源不存在。通常是用户路径编写错误，也可能是服务器资源已删除。</span></p> 
<p style="margin-left:0pt;"><span style="color:#86ca5e;">500 ：服务器内部错误。通常程序抛异常。</span></p> 
<p style="margin-left:0pt;"><strong>2.设置响应头</strong></p> 
<p style="margin-left:0pt;"><a href="#addHeader%28java.lang.String,%20java.lang.String%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>addHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, <a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> value) </p> 
<p style="margin-left:0pt;"><a href="#addIntHeader%28java.lang.String,%20int%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>addIntHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, int value) </p> 
<p style="margin-left:0pt;"><a href="#addDateHeader%28java.lang.String,%20long%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>addDateHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, long date) </p> 
<p style="margin-left:0pt;"><a href="#setHeader%28java.lang.String,%20java.lang.String%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>setHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, <a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> value) </p> 
<p style="margin-left:0pt;"><a href="#setDateHeader%28java.lang.String,%20long%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>setDateHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, long date) </p> 
<p style="margin-left:0pt;"><a href="#setIntHeader%28java.lang.String,%20int%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>setIntHeader</u></strong></span></u></strong></a>(<a href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html" rel="nofollow"><u><span style="color:#900b09;"><u>String</u></span></u></a> name, int value)</p> 
<p style="margin-left:0pt;"><strong>3.设置响应体</strong></p> 
<p style="margin-left:0pt;"><span style="color:#f33b45;">(1)关于设置中文的乱码问题:response.setContentType("text/html;charset=UTF-8");</span></p> 
<p style="margin-left:0pt;">(2)响应头设置字节</p> 
<p style="margin-left:0pt;"><u><span style="color:#900b09;"><u>ServletOutputStream</u></span></u>  <a href="#getOutputStream%28%29" rel="nofollow"><strong><u><span style="color:#900b09;"><strong><u>getOutputStream</u></strong></span></u></strong></a>() ------------可用于文件下载</p> 
<p style="margin-left:0pt;">附：文件下载核心代码</p> 
<pre class="has"><code>// 获得要下载的文件的名称
String filename = request.getParameter("filename");

// 解决获得中文参数的乱码
filename = new String(filename.getBytes("ISO8859-1"), "UTF-8");

// 获得请求头中的User-Agent
String agent = request.getHeader("User-Agent");

// 根据不同浏览器进行不同的编码
String filenameEncoder = "";
if (agent.contains("MSIE")) {
	// IE浏览器
	filenameEncoder = URLEncoder.encode(filename, "utf-8");
	filenameEncoder = filenameEncoder.replace("+", " ");
} else if (agent.contains("Firefox")) {
	// 火狐浏览器
	BASE64Encoder base64Encoder = new BASE64Encoder();
	filenameEncoder = "=?utf-8?B?" + base64Encoder.encode(filename.getBytes("utf-8")) + "?=";
} else {
	// 其它浏览器
	filenameEncoder = URLEncoder.encode(filename, "utf-8");
}

// 要下载的这个文件的类型-----客户端通过文件的MIME类型去区分类型
response.setContentType(this.getServletContext().getMimeType(filename));
// 告诉客户端该文件不是直接解析 而是以附件形式打开(下载)
response.setHeader("Content-Disposition", "attachment;filename=" + filenameEncoder);
// 获得文件的绝对路径
String path = this.getServletContext().getRealPath("download/" + filename);
// 获得该文件的输入流
InputStream in = new FileInputStream(path);
// 获得输出流---通过response获得输出流，用于向客户端写内容
ServletOutputStream out = response.getOutputStream();
// 文件拷贝的模版代码
int len = 0;
byte[] buffer = new byte[1024];
while ((len = in.read(buffer)) &gt; 0) {
    out.write(buffer, 0, len);
}
in.close();
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4288962a5771567d9f545fe62ab79cb9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring的数据格式化和数据校验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/873a4db1a2c8c0770e3ada59c08b5544/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于各种网站音频mp3的外链地址，真实的外链播放地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>