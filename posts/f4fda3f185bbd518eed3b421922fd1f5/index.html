<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>云服务器环境搭建及项目运行部分问题汇总 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="云服务器环境搭建及项目运行部分问题汇总" />
<meta property="og:description" content="conda create xxx 创建新环境
conda activate xxx 激活新环境
conda info --envs 查看已建立的虚拟环境
ctrl &#43; D 后退
vim ~/.bashrc 进入bashrc 文件
source ~/.bashrc 更新文件
esc &#43; a 进入编辑模式
esc &#43; :wq 保存并退出（注意冒号也要）
/*
查看当前已经安装的包：conda list
查看当前已有的环境：conda env list
创建新的虚拟环境： conda create -n env_name python=3.6
在命令行中激活：conda activate env_name 在命令行中退出：conda deactivate
删除虚拟环境：conda remove -n env_name --all
设置国内镜像：conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
*/
```bash
useradd -m -s /bin/bash xxx
```
* `-m`：在`/home`路径下创建该用户的根目录
* `-s`：指定用户登入后使用的`shell`" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f4fda3f185bbd518eed3b421922fd1f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-13T21:42:36+08:00" />
<meta property="article:modified_time" content="2022-07-13T21:42:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">云服务器环境搭建及项目运行部分问题汇总</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>conda create xxx   创建新环境<br> conda activate xxx  激活新环境<br> conda info --envs 查看已建立的虚拟环境<br> ctrl + D 后退<br> vim ~/.bashrc  进入bashrc 文件<br> source ~/.bashrc 更新文件<br> esc + a 进入编辑模式<br> esc + :wq  保存并退出（注意冒号也要）</p> 
<p>/*<br> 查看当前已经安装的包：conda list</p> 
<p>查看当前已有的环境：conda env list</p> 
<p>创建新的虚拟环境： conda create -n env_name python=3.6</p> 
<p>在命令行中激活：conda activate env_name </p> 
<p>在命令行中退出：conda deactivate</p> 
<p>删除虚拟环境：conda remove -n env_name --all</p> 
<p>设置国内镜像：conda config --add channels  https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</p> 
<p>*/</p> 
<p>```bash<br> useradd -m -s /bin/bash xxx<br> ```</p> 
<p>* `-m`：在`/home`路径下创建该用户的根目录<br> * `-s`：指定用户登入后使用的`shell`<br> 然后把这个用户加入到`sudo`用户组里：</p> 
<p>```bash<br> usermod -G sudo xxx<br> ```</p> 
<p>给这个用户名设置密码，否则无法登录<br> ```bash<br> passwd xxx<br> ```<br> 在云终端安装anaconda:<br> 1.先用MobaXterm将Anaconda安装包上传到云终端<br> 2.安装：bash + 安装包名称<br> 3.重新进入终端，再执行命令：conda --version,无异常</p> 
<p>模块安装慢：<br> pip --default-timeout=100 install 库名称 -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com </p> 
<p>其他：<br> 清华：https://pypi.tuna.tsinghua.edu.cn/simple 阿里云：http://mirrors.aliyun.com/pypi/simple/</p> 
<p>中国科技大学 https://pypi.mirrors.ustc.edu.cn/simple/ 华中科技大学：http://pypi.hustunique.com/</p> 
<p>山东理工大学：http://pypi.sdutlinux.org/ 豆瓣：http://pypi.douban.com/simple/</p> 
<p><br> 检验pytorch与cuda是否兼容：</p> 
<p>import torch</p> 
<p>print(torch.__version__)<br> print(torch.cuda.is_available())</p> 
<p>卸载pytorch:</p> 
<p>conda uninstall pytorch<br> conda uninstall libtorch<br> 查找版本驱动：<br> nvcc -V<br> 最下面一行：<br> cuda compilation tools,release + 版本号<br> （一定要注意下载的pytorch要对应此版本）</p> 
<p>问题1：<br>     import cv2<br>   File "/root/anaconda3/envs/newtext/lib/python3.8/site-packages/cv2/__init__.py", line 8, in &lt;module&gt;<br>     from .cv2 import *<br> ImportError: libGL.so.1: cannot open shared object file: No such file or directory</p> 
<p>解决：<br> 环境是ubuntu16.04。<br> 指令：<br> sudo apt update<br> sudo apt install libgl1-mesa-glx<br> 就ok了</p> 
<p>可能容器内没有sudo指令<br> 可以<br> apt-get update<br> apt-get install sudo</p> 
<p>引用<br> 感谢各位大佬。。。。<br> [1]: https://www.ohazyi.com/docker-docs/<br> [2]: https://github.com/conda-forge/pygridgen-feedstock/issues/10</p> 
<p>问题2：<br>   File "/root/anaconda3/envs/newtext/lib/python3.8/site-packages/torch/serialization.py", line 1039, in find_class<br>     return super().find_class(mod_name, name)<br> AttributeError: Can't get attribute 'SPPF' on &lt;module 'models.common' from '/root/yolov5-5.0/models/common.py'&gt;</p> 
<p>解决：<br> 去Tags6里面的model/common.py里面去找到这个SPPF的类,把它拷过来到你这个Tags5的model/common.py里面,这样你的代码就也有这个类了,还要引入一个warnings包就行了！</p> 
<p>有的同学找不到SPPF这个类，那我现在直接粘贴在这里，你们只需要复制到你们的common.py里面即可，记得把import warnings放在上面去：</p> 
<p>import warnings</p> 
<p>class SPPF(nn.Module):<br>     # Spatial Pyramid Pooling - Fast (SPPF) layer for YOLOv5 by Glenn Jocher<br>     def __init__(self, c1, c2, k=5):  # equivalent to SPP(k=(5, 9, 13))<br>         super().__init__()<br>         c_ = c1 // 2  # hidden channels<br>         self.cv1 = Conv(c1, c_, 1, 1)<br>         self.cv2 = Conv(c_ * 4, c2, 1, 1)<br>         self.m = nn.MaxPool2d(kernel_size=k, stride=1, padding=k // 2)</p> 
<p>    def forward(self, x):<br>         x = self.cv1(x)<br>         with warnings.catch_warnings():<br>             warnings.simplefilter('ignore')  # suppress torch 1.9.0 max_pool2d() warning<br>             y1 = self.m(x)<br>             y2 = self.m(y1)<br>             return self.cv2(torch.cat([x, y1, y2, self.m(y2)], 1))</p> 
<p>问题3：<br> RuntimeError: Given groups=1, weight of size [512, 1024, 1, 1], expected input[1, 512, 8, 8] to have 1024 channels, but got 512 channels instead</p> 
<p>解决：<br> 默认的模型配置文件yaml路径没有指定</p> 
<p>问题3：<br> E: Sub-process /usr/bin/dpkg returned an error code (1)<br> 解决：<br> 将info文件夹更名<br> sudo mv /var/lib/dpkg/info /var/lib/dpkg/info.bk<br> 新建一个新的info文件夹<br> sudo mkdir /var/lib/dpkg/info<br> 安装修复<br> sudo apt-get update<br> sudo apt-get install -f <br> 将上一步新生成的文件移到info。bk文件夹<br> sudo mv /var/lib/dpkg/info/* /var/lib/dpkg/info.bk<br> 把自己新建的info文件夹删掉</p> 
<p>sudo rm -rf /var/lib/dpkg/info<br> 恢复原有info文件夹，修改名字<br> sudo mv /var/lib/dpkg/info.bk /var/lib/dpkg/info<br> 卸载重装<br> sudo apt-get --purge remove libapache2-mod-svn <br> sudo apt-get --purge remove libapache2-svn <br> sudo apt-get autoremove</p> 
<p><br> 问题4：</p> 
<p> <br> ERROR:root:could not open aplay -l<br> Traceback (most recent call last):<br>   File "/usr/share/ubuntu-drivers-common/detect/sl-modem.py", line 35, in detect<br>     aplay = subprocess.Popen(<br>   File "/usr/lib/python3.8/subprocess.py", line 858, in __init__<br>     self._execute_child(args, executable, preexec_fn, close_fds,<br>   File "/usr/lib/python3.8/subprocess.py", line 1704, in _execute_child<br>     raise child_exception_type(errno_num, err_msg, err_filename)<br> FileNotFoundError: [Errno 2] No such file or directory: 'aplay'<br> 解决：<br> sudo apt install alsa-base<br> 问题5：</p> 
<p>解决 ERROR: Could not find a version that satisfies the requirement xxx 的问题<br> 我们经常通过pip安装东西时常常会出现ERROR: Could not find a version that satisfies the requirement xxx的问题。该问题常常会误导我们认为是下载的安装包之间存在冲突，因而花费大量的时间去配置各种各样的环境。<br> 其实出现这个问题的原因是python国内网络不稳定，直接导致报错。因此我们常用镜像源来解决此问题。如下</p> 
<p>pip install 包名 -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com<br> 1</p> 
<p><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e56e29de8dc3e2f733d197ca7f660fb6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">简单模拟快递单号查询页面展示</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7fcc25a218d0c394de53b18f6a39b30b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python数据分析学习day08：柱状图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>