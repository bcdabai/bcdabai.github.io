<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python数据分析与挖掘——使用Matplotlib绘制直方图 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python数据分析与挖掘——使用Matplotlib绘制直方图" />
<meta property="og:description" content="1. 使用hist绘制频数直方图 在Matplotlib中有一个专门绘制直方图的函数hist()，用来显示一组数据的分布情况。
使用hist()函数，无需对数据进行分拣整理，即可自动生成直方图。使用格式如下：
plt.hist(x, bins) # 参数名基于官方文档声明 参数x：用于绘制直方图的一维数组，列表或者DataFrame的列向量形式。
参数bins：分两种情况：
（1）一个整数，按照数组的最小取值范围（即以数组的最小值和最大值作为区间的两端点）均匀分为若干组。
（2）数字列表，以列表的各个数字作为分组的边界点。
例如，随机生成一个含有1000个元素的服从标准正态分布的数组，绘制直方图，代码如下：
# -*- coding: utf-8 -*- import numpy as np import matplotlib.pyplot as plt # 导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] # 用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False # 用来正常显示负号 plt.figure(figsize=(7,5)) data = np.random.randn(1000) # 1000个服从标准正态分布的随机数 plt.hist(data, 10) # 分成10组，结果如图1 plt.show() # div = [-4, -3.5, -3, ..., 3, 3.5, 4] div = [] x = -4 while x &lt;= 4: div." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5229e2abdad638f7b1dade37fea90ab5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-20T00:31:01+08:00" />
<meta property="article:modified_time" content="2021-09-20T00:31:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python数据分析与挖掘——使用Matplotlib绘制直方图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. 使用hist绘制频数直方图</h2> 
<p>在Matplotlib中有一个专门绘制直方图的函数hist()，用来显示一组数据的分布情况。</p> 
<p>使用hist()函数，<strong>无需对数据进行分拣整理</strong>，即可自动生成直方图。使用格式如下：</p> 
<pre><code class="language-python">plt.hist(x, bins)
# 参数名基于官方文档声明</code></pre> 
<p>参数x：用于绘制直方图的一维数组，列表或者DataFrame的列向量形式。</p> 
<p>参数bins：分两种情况：</p> 
<p>（1）一个整数，<strong>按照数组的最小取值范围</strong>（即以数组的最小值和最大值作为区间的两端点）<strong>均匀分为若干组</strong>。</p> 
<p>（2）数字列表，<strong>以列表的各个数字作为分组的边界点</strong>。</p> 
<p>例如，随机生成一个含有1000个元素的服从标准正态分布的数组，绘制直方图，代码如下：</p> 
<pre><code class="language-python"># -*- coding: utf-8 -*-
import numpy as np
import matplotlib.pyplot as plt  # 导入图像库

plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号
plt.figure(figsize=(7,5))

data = np.random.randn(1000)    # 1000个服从标准正态分布的随机数
plt.hist(data, 10)      # 分成10组，结果如图1
plt.show()

# div = [-4, -3.5, -3, ..., 3, 3.5, 4]
div = []
x = -4
while x &lt;= 4:
    div.append(x)
    x += 0.5
plt.hist(data, div)      # 指定分界点，结果如图2
plt.show()
</code></pre> 
<p> 得到的直方图如下：</p> 
<figure class="image"> 
 <img alt="" height="589" src="https://images2.imgbox.com/9b/fe/znsBKgFb_o.png" width="702"> 
 <figcaption>
   图1 
 </figcaption> 
</figure> 
<figure class="image"> 
 <img alt="" height="569" src="https://images2.imgbox.com/95/9a/4dFBxomR_o.png" width="642"> 
 <figcaption>
   图2 
 </figcaption> 
</figure> 
<h2>2. 绘制频率直方图</h2> 
<p>Matplotlib中的hist()函数，实际上是在统计落在各区间的数据个数（相当于放置了若干个桶，把这些数据按照所落在的区间分别放进相应的桶内）并生成直方图，因此<strong>纵坐标是频数</strong>。</p> 
<p>如果要绘制同样的直方图，但是要把纵坐标表示成<strong>频率</strong>或者<strong>频率与各组间距之比</strong>，需要<strong>先对数据进行分拣处理</strong>，然后以<strong>条形图</strong>（bar）形式输出结果。</p> 
<p>以条形图的形式输出，有两种方式：</p> 
<p>（1）直接用<strong>plt.bar()</strong>函数，使用格式：</p> 
<pre><code class="language-python">plt.bar(x, height)
# 参数名基于官方文档声明</code></pre> 
<p>x为横坐标的标签，height为纵坐标的数值，二者均为列表或者DataFrame的列向量，且相同下标一一对应。</p> 
<p>（2）封装成<strong>DataFrame对象</strong>后使用<strong>内置方法plot()</strong>，并<strong>指定kind参数为“bar”</strong>。只能使用该DataFrame对象中指定的一列数据，并且<strong>要在封装对象时指定索引列，以索引列作为横坐标的标签</strong>。使用格式：</p> 
<pre><code class="language-python">df[col].plot(kind = "bar")</code></pre> 
<p> 对于上一节的例子，采用plt.bar()函数绘制直方图的代码如下：</p> 
<pre><code class="language-python"># -*- coding: utf-8 -*-

import numpy as np
import matplotlib.pyplot as plt  # 导入图像库

plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号
plt.figure(figsize=(18,5))

data = np.random.randn(1000)    # 1000个服从正态分布的随机数
# div = [-4, -3.5, -3, ..., 3, 3.5, 4]
div = [-4]
x = []      # 横坐标，分组
y = []      # 纵坐标，频率，初始化为与分组同等数量的0
i = -3.5
j = 1
while i &lt;= 4:
    div.append(i)
    x.append("["+str(div[j-1])+","+str(div[j])+")")
    y.append(0)
    i += 0.5
    j += 1

# 分拣数据
for item in data:
    for i in range(0, len(div) - 1):
        if item &gt;= div[i] and item &lt; div[i + 1]:
            y[i] += 1
            break

# 转换为频率
for i in range(len(y)):
    y[i] = round(y[i] / 1000, 3) * 100      # 化为百分比

plt.bar(x, y)
plt.xlabel("分组")
plt.ylabel(r"频率/%")
plt.show()</code></pre> 
<p>如果封装成DataFrame对象，使用内置方法plot()并指定kind参数为“bar”，则上面代码的后四行应改为：</p> 
<pre><code class="language-python">import pandas as pd

df = pd.DataFrame(y, index=x)
df.plot(kind="bar")
plt.xlabel("分组")
plt.ylabel(r"频率/%")
plt.show()</code></pre> 
<p>结果如图3：（此为采用第一种方法得到的结果，第二种方法得到的形状相同，只是横坐标的标签逆时针旋转90度）</p> 
<figure class="image"> 
 <img alt="" height="431" src="https://images2.imgbox.com/f5/19/v0BiRDVq_o.png" width="1200"> 
 <figcaption>
   图3 
 </figcaption> 
</figure> 
<h2>3. 绘制频率分布直方图（纵轴为频率/组距）</h2> 
<p>将上一节绘制直方图的代码“# 转换为频率”以下的部分改成下列代码，即可将纵轴设置为频率与各分组间距之比，即频率分布直方图：</p> 
<pre><code class="language-python"># 转换为频率/组距
for i in range(len(y)):
    y[i] = round(y[i] / 1000 / 0.5, 3)      # 频率/组距，保留三位小数

plt.bar(x, y)
plt.xlabel("分组")
plt.ylabel("频率/组距")
plt.show()</code></pre> 
<pre><code class="language-python"># 转换为频率/组距
for i in range(len(y)):
    y[i] = round(y[i] / 1000 / 0.5, 3)      # 频率/组距，保留三位小数

df = pd.DataFrame(y, index=x)
df.plot(kind="bar")
plt.xlabel("分组")
plt.ylabel("频率/组距")
plt.show()</code></pre> 
<p> 结果如图4：</p> 
<figure class="image"> 
 <img alt="" height="433" src="https://images2.imgbox.com/5e/dc/Kr4zlPGW_o.png" width="1200"> 
 <figcaption>
   图4 
 </figcaption> 
</figure> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dea37ea29a88cd43d8524d766b1f86ed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">无锁队列概述</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a26ea1e9f1afd6f616539b71be4e6b27/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OpenFeign的降级配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>