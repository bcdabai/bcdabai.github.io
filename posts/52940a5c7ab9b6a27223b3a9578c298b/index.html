<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CubeIDE使用国产版ST-Link/V2升级固件失败（已解决） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CubeIDE使用国产版ST-Link/V2升级固件失败（已解决）" />
<meta property="og:description" content="文末有总结。
网上买了一个新的ST-Link，想用来下载/调试程序，但是CubeIDE说我的ST-Link的固件版本太老，要强制升级，不升级不让用。但是呢，每次升级固件都失败。出现了以下的情况，让我很恼火。
在CubeIDE里点击Help -&gt; ST-Link Upgrade，出现下面的画面。正常来说按照顺序依次点击下面的标号就可以更新了。
注意看，我现在的版本时V2J37S7，需要更新到的版本是V2J42S7。
但是出现了状况
它的提示是这样的：先说更新失败，请再次尝试。然后说更新成功。
版本那里，也变成了V2J42S7。
但是这时去启动下载/调试，还是说ST-Link的固件版本太低。
回来一看，版本仍然是V2J32S7。
就是说，虽然它最后提示更新成功了，但是实际上是更新失败的。
重复多次，结果都是一样。
我向其他人借了一个ST-Link，使用同样的方法来进行操作，发现可以更新。基本上可以确定，问题出在ST-Link上面。
所以我将两个ST-Link都拆开了。（两个ST-Link都是盗版的）
把后面的标签撕掉，把两颗螺丝拆掉，就可以顺利拆开了。
最后发现，不能更新固件的ST-Link的芯片是CKSF103C8T6，
可以更新固件的ST-Link的芯片是STM32F103C8T6
猜测是前两年ST的芯片价格大涨，所以那时候生产的国产ST-Link就使用了价格较为便宜的国产芯片替代，在刚刚推出的时候是可以使用的（否则也不会上市），但是随着ST-Link的固件升级，国产芯片的ST-Link就更新不了固件了。
查了一些资料，CKSF103C8T6是【无锡中科芯】的产品。正常来说CKSF103C8T6是可以兼容STM32F103C8T6的。但是现在确实是出现了问题。
两款产品的Flash容量都是64KB，有可能是ST-Link最新的固件包大小在64KB附近，而CKSF103C8T6的实际有效Flash容量小于64KB，导致无法升级固件。
另外说一句，使用CKSF103C8T6芯片的ST-Link可以给板子供电。而使用STM32F103C8T6芯片的ST-Link不可以给板子供电。
而正版的ST-Link，是不能给板子供电的。
刚好手上也有一个JLINK V9，干脆一起拆了，看一下里面的芯片是什么。
图片上看不清（吐槽一下苹果手机，拍照的对焦能力是真的弱，相册系统是真的难用）。
芯片是STM32F205RCT6。性能是高于STM32F103C8T6的。
总结：不能升级固件的ST-Link的芯片是CKSF103C8T6，而芯片是STM32F103C8T6的ST-Link可以正常升级固件。
换一个芯片是STM32F103C8T6的ST-Link即可。
或者将原来的ST-Link的芯片升级一下。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/52940a5c7ab9b6a27223b3a9578c298b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-05T16:44:27+08:00" />
<meta property="article:modified_time" content="2023-10-05T16:44:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CubeIDE使用国产版ST-Link/V2升级固件失败（已解决）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>    <strong>    文末有总结。</strong></p> 
<p>        网上买了一个新的ST-Link，想用来下载/调试程序，但是CubeIDE说我的ST-Link的固件版本太老，要强制升级，不升级不让用。但是呢，每次升级固件都失败。出现了以下的情况，让我很恼火。</p> 
<p>        在CubeIDE里点击Help -&gt; ST-Link Upgrade，出现下面的画面。正常来说按照顺序依次点击下面的标号就可以更新了。</p> 
<p>        注意看，我现在的版本时V2J37S7，需要更新到的版本是V2J42S7。</p> 
<p><img alt="" height="307" src="https://images2.imgbox.com/59/4c/hAQttxPd_o.png" width="745">        但是出现了状况</p> 
<p>        它的提示是这样的：先说更新失败，请再次尝试。然后说更新成功。</p> 
<p>        版本那里，也变成了V2J42S7。</p> 
<p>        但是这时去启动下载/调试，还是说ST-Link的固件版本太低。</p> 
<p>        回来一看，版本仍然是V2J32S7。</p> 
<p>        就是说，虽然它最后提示更新成功了，但是实际上是更新失败的。</p> 
<p>        重复多次，结果都是一样。</p> 
<p><img alt="" height="312" src="https://images2.imgbox.com/21/14/Nf1ZMlAe_o.png" width="753">       </p> 
<p>        我向其他人借了一个ST-Link，使用同样的方法来进行操作，发现可以更新。基本上可以确定，问题出在ST-Link上面。</p> 
<p></p> 
<p>        所以我将两个ST-Link都拆开了。（两个ST-Link都是盗版的）</p> 
<p>        把后面的标签撕掉，把两颗螺丝拆掉，就可以顺利拆开了。</p> 
<p><img alt="" height="512" src="https://images2.imgbox.com/86/44/ljnCfkip_o.jpg" width="384"></p> 
<p><img alt="" height="428" src="https://images2.imgbox.com/e8/d0/HWeAjBzZ_o.png" width="320"><img alt="" height="424" src="https://images2.imgbox.com/1e/56/Zq0gohZZ_o.png" width="320"></p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/87/11/8qhfw5um_o.png" width="320"><img alt="" height="428" src="https://images2.imgbox.com/e4/5b/DlnLVGfo_o.png" width="320"></p> 
<p>        最后发现，不能更新固件的ST-Link的芯片是CKSF103C8T6，</p> 
<p>        可以更新固件的ST-Link的芯片是STM32F103C8T6</p> 
<p>        猜测是前两年ST的芯片价格大涨，所以那时候生产的国产ST-Link就使用了价格较为便宜的国产芯片替代，在刚刚推出的时候是可以使用的（否则也不会上市），但是随着ST-Link的固件升级，国产芯片的ST-Link就更新不了固件了。</p> 
<p>        查了一些资料，CKSF103C8T6是【无锡中科芯】的产品。正常来说CKSF103C8T6是可以兼容STM32F103C8T6的。但是现在确实是出现了问题。</p> 
<p>        两款产品的Flash容量都是64KB，有可能是ST-Link最新的固件包大小在64KB附近，而CKSF103C8T6的实际有效Flash容量小于64KB，导致无法升级固件。</p> 
<p></p> 
<p>        另外说一句，使用CKSF103C8T6芯片的ST-Link可以给板子供电。而使用STM32F103C8T6芯片的ST-Link不可以给板子供电。</p> 
<p>        而正版的ST-Link，是不能给板子供电的。</p> 
<p></p> 
<p>        刚好手上也有一个JLINK V9，干脆一起拆了，看一下里面的芯片是什么。</p> 
<p><img alt="" height="467" src="https://images2.imgbox.com/41/fd/mHqjXaoo_o.jpg" width="350"></p> 
<p>        图片上看不清（吐槽一下苹果手机，拍照的对焦能力是真的弱，相册系统是真的难用）。</p> 
<p>芯片是STM32F205RCT6。性能是高于STM32F103C8T6的。</p> 
<p></p> 
<p></p> 
<hr> 
<hr> 
<hr> 
<p><strong>        总结</strong>：不能升级固件的ST-Link的芯片是CKSF103C8T6，而芯片是STM32F103C8T6的ST-Link可以正常升级固件。</p> 
<p>        换一个芯片是STM32F103C8T6的ST-Link即可。</p> 
<p>        或者将原来的ST-Link的芯片升级一下。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/380027a6f718717628679b7b16204967/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于升级到win11触摸板只有点击功能这件事</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79506af1a30180cb7fbf312fdb060924/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA 将一个普通Java工程转化为maven工程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>