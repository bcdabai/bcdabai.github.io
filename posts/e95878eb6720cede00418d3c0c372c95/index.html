<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络的设置 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络的设置" />
<meta property="og:description" content="一、网络设置 1.1查看linux基础的网络设置 网关 route -n
ip地址ifconfigDNS服务器cat /etc/resolv.conf主机名hostname路由 route -n
网络连接状态ss 或者 netstat域名解析nslookup host 例题：除了ping，什么命令可以测试DNS服务器来解析服务器？
nslooup 1.2ifconfig命令 默认显示活动的网卡ifconfig显示所有的网卡ifconfig -a只显示前面的网卡信息ifconfig 网卡名称关闭网卡ifconfig 网卡 down开启网卡ifconfig 网卡 up设置虚拟网卡ifconfig ens33:0 IP地址/子网掩码 ens33：以太网，插槽在33口
mtu 1500：最大传输单元，1500字节
1.3主机名 hostname查看主机名hostname主机名临时修改主机名hostnamectl set-hostname主机名永久修改主机名vim /etc/hostname将名字写入文件也是永久修改，写在第一行才行 1.4路由表 route -n显示路由表 -n：数字形式显示路由表route add -net 10.0.0.0/8 gw 172.16.18.4添加一条去往10.0.0.0段的路由，通过网关172.16.18.4转发route del -net 10.0.0.0/8删除去往10.0.0.0段的路由route add -net 0.0.0.0(或者default) gw 172.16.18.4添加默认路由route del -net 0.0.0.0(或者default)删除默认路由 ss：更靠近内核
ss -natp n ：数字 a：详细 t：tcp u：udp p：进程
netstat：靠近用户，他要去遍历 文件查看状态
1.5DNS域名解析 dns：域名解析：将域名翻译成IP地址，然后封装数据包
1.怎么验证dns服务器，是否可以解析域名？
nalookup
dig
host" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e95878eb6720cede00418d3c0c372c95/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-11T18:37:14+08:00" />
<meta property="article:modified_time" content="2024-01-11T18:37:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络的设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、网络设置</h2> 
<h3>1.1查看linux基础的网络设置</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>网关</td><td> <p>route  -n</p> </td></tr><tr><td>ip地址</td><td>ifconfig</td></tr><tr><td>DNS服务器</td><td>cat   /etc/resolv.conf</td></tr><tr><td>主机名</td><td>hostname</td></tr><tr><td>路由</td><td> <p>route   -n</p> </td></tr><tr><td>网络连接状态</td><td>ss    或者   netstat</td></tr><tr><td>域名解析</td><td>nslookup     host</td></tr></tbody></table> 
<p>例题：除了ping，什么命令可以测试DNS服务器来解析服务器？</p> 
<p>nslooup </p> 
<h3> 1.2ifconfig命令</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>默认显示活动的网卡</td><td>ifconfig</td></tr><tr><td>显示所有的网卡</td><td>ifconfig  -a</td></tr><tr><td>只显示前面的网卡信息</td><td>ifconfig   网卡名称</td></tr><tr><td>关闭网卡</td><td>ifconfig   网卡  down</td></tr><tr><td>开启网卡</td><td>ifconfig   网卡   up</td></tr><tr><td>设置虚拟网卡</td><td>ifconfig   ens33:0   IP地址/子网掩码</td></tr></tbody></table> 
<p><img alt="" height="424" src="https://images2.imgbox.com/44/78/wwplIrnS_o.png" width="690">ens33：以太网，插槽在33口</p> 
<p>mtu    1500：最大传输单元，1500字节</p> 
<h3>1.3主机名</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>hostname</td><td>查看主机名</td></tr><tr><td>hostname主机名</td><td>临时修改主机名</td></tr><tr><td>hostnamectl   set-hostname主机名</td><td>永久修改主机名</td></tr><tr><td>vim     /etc/hostname</td><td>将名字写入文件也是永久修改，写在第一行才行</td></tr></tbody></table> 
<h3>1.4路由表</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>route     -n</td><td>显示路由表    -n：数字形式显示路由表</td></tr><tr><td>route  add  -net   10.0.0.0/8  gw   172.16.18.4</td><td>添加一条去往10.0.0.0段的路由，通过网关172.16.18.4转发</td></tr><tr><td>route  del  -net  10.0.0.0/8</td><td>删除去往10.0.0.0段的路由</td></tr><tr><td>route  add  -net  0.0.0.0(或者default)  gw  172.16.18.4</td><td>添加默认路由</td></tr><tr><td>route  del   -net  0.0.0.0(或者default)</td><td>删除默认路由</td></tr></tbody></table> 
<p></p> 
<p><strong>ss：更靠近内核</strong></p> 
<p><strong>ss -natp</strong> <strong>n ：数字 a：详细 t：tcp u：udp p：进程</strong></p> 
<p><strong>netstat：靠近用户，他要去遍历 文件查看状态</strong></p> 
<p></p> 
<h3><strong>1.5DNS域名解析</strong></h3> 
<blockquote> 
 <p>dns：域名解析：将域名翻译成IP地址，然后封装数据包</p> 
 <p></p> 
 <p>1.怎么验证dns服务器，是否可以解析域名？</p> 
 <p>nalookup</p> 
 <p>dig</p> 
 <p>host</p> 
 <p>ping</p> 
 <p></p> 
 <p>2.域名解析</p> 
 <p>/etc/hosts                优先级大于域名服务器(你设置的dns1   8.8.8.8)</p> 
 <p>8.8.8.8    www.baidu.com     11.4.1.4</p> 
 <p>hosts                                                        172.16.18.4</p> 
 <p></p> 
 <p>3.查看服务器上的域名是否生效？</p> 
 <p>cat    /etc/resolv.conf</p> 
</blockquote> 
<p></p> 
<p><span style="color:#be191c;"><strong>为了我们之后操作，down掉自己唯一一块网卡，就连不上了，所以我们添加一块新的网卡来做实验</strong></span></p> 
<p><img alt="" height="932" src="https://images2.imgbox.com/d8/6a/OQxro3mJ_o.png" width="839"></p> 
<p><img alt="" height="780" src="https://images2.imgbox.com/65/23/f1aqztbc_o.png" width="810"></p> 
<p><img alt="" height="924" src="https://images2.imgbox.com/58/bb/DIoi4nnU_o.png" width="831"></p> 
<p><img alt="" height="731" src="https://images2.imgbox.com/1c/72/arm0b4Bh_o.png" width="996"></p> 
<p><img alt="" height="645" src="https://images2.imgbox.com/9b/f6/VEC2Y55W_o.png" width="846"></p> 
<p></p> 
<p></p> 
<h2>二、实验</h2> 
<h3>1.单个网卡修改</h3> 
<blockquote> 
 <p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p> 
</blockquote> 
<p><img alt="" height="426" src="https://images2.imgbox.com/97/0d/O97B7Twj_o.png" width="461"></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>TYPE=Ethernet</td><td>网卡类型 网口</td></tr><tr><td>BOOTPROTO=static</td><td>IP地址获取方式（dhcp动态获取；手动静态：static或者none）</td></tr><tr><td>NAME=ens37</td><td>网卡的描述一般和DEVICE一样</td></tr><tr><td>DEVICE=ens37</td><td>网卡的名称，必须和ifconfig中看到的一样</td></tr><tr><td>ONBOOT=yes</td><td>开机自启动</td></tr><tr><td>IPADDR=172.16.18.4</td><td>IP地址</td></tr><tr><td>NETMASK=255.255.255.0</td><td>子网掩码 PREFIX=24</td></tr><tr><td>GATEWAY=172.16.18.2:Q!</td><td>网卡</td></tr><tr><td>DNS1=8.8.8.8</td><td>dns服务器1</td></tr><tr><td>DNS2=114.114.114.114</td><td>dns服务器2</td></tr></tbody></table> 
<h3>2.双网卡配置</h3> 
<blockquote> 
 <p>cd /etc/sysconfig/network-scripts</p> 
 <p>#切换到网卡配置文件中</p> 
 <p></p> 
 <p>cp ifcfg-ens33 ifcfg-ens37</p> 
 <p>#复制ens33网卡作为模板</p> 
 <p></p> 
</blockquote> 
<p> <img alt="" height="217" src="https://images2.imgbox.com/b7/51/CMgzHmcK_o.png" width="1084"></p> 
<blockquote> 
 <p>vim ifcfg-ens37</p> 
 <p>#修改内容</p> 
 <p>##########################</p> 
 <p>TYPE=Ethernet     </p> 
 <p> # 网卡类型：为以太网<br> BOOTPROTO=static     </p> 
 <p> # 网卡协议为静态</p> 
 <p>NAME=ens37     </p> 
 <p>  # 网卡名字（与DEVICE一致）</p> 
 <p>DEVICE=ens37   </p> 
 <p> #网卡设备<br> ONBOOT=yes     </p> 
 <p> # 是否激活网卡<br> IPADDR=172.16.18.4     </p> 
 <p> #ip地址（static设置）<br> NETMASK=255.255.255.0   </p> 
 <p> #子网掩码<br> GATEWAY=172.16.18.6</p> 
 <p>  #网关<br> DNS1=8.8.8.8 </p> 
 <p> #dns地址解析</p> 
 <p>##########################</p> 
 <p> </p> 
</blockquote> 
<p> <img alt="" height="312" src="https://images2.imgbox.com/02/d4/lYg6qXNy_o.png" width="760"></p> 
<blockquote> 
 <p>systemctl restart network</p> 
 <p>#重启服务</p> 
 <p>ifconfig  ens37</p> 
 <p>#查看ens37网卡的</p> 
 <p> </p> 
</blockquote> 
<p> <img alt="" height="235" src="https://images2.imgbox.com/ac/8f/BXYWFumG_o.png" width="832"></p> 
<h3>3.添加永久路由</h3> 
<blockquote> 
 <p>vim /etc/sysconfig/network-scripts/route-ens33</p> 
 <p>#切换到指定网卡目录下编辑内容</p> 
 <p></p> 
 <p>10.0.0.0/24 via 172.16.18.4</p> 
 <p>#配置路由</p> 
 <p></p> 
 <p>systemctl restart network</p> 
 <p>#重启服务</p> 
</blockquote> 
<p><img alt="" height="317" src="https://images2.imgbox.com/29/4f/SLP0i4EY_o.png" width="641"></p> 
<p> <img alt="" height="347" src="https://images2.imgbox.com/db/46/pSwBMtf4_o.jpg" width="752"></p> 
<h3>4.bond网卡绑定(建立虚拟网卡bond0)</h3> 
<blockquote> 
 <p>cd /etc/sysconfig/network-scripts</p> 
 <p>#切换到网卡配置文件目录下</p> 
 <p></p> 
 <p>cp  ifcfg-ens33  ifcfg-bond0</p> 
 <p>#将ens33作为模板</p> 
 <p></p> 
 <p>vim  ifcfg-bond0</p> 
 <p>#修改bond0文件内容</p> 
 <p>####################</p> 
 <p>BONDING_OPTS=”mode=1  miimon=100  fail_over_mac=1"</p> 
 <p>#主备模式  每100ms检测一次  活着的mac地址  </p> 
 <p>####################</p> 
</blockquote> 
<p><img alt="" height="456" src="https://images2.imgbox.com/3a/74/Gr4uizEx_o.jpg" width="677"></p> 
<blockquote> 
 <p>vim  ifcfg-ens33</p> 
</blockquote> 
<p><img alt="" height="252" src="https://images2.imgbox.com/79/96/iHXZxdn9_o.png" width="561"></p> 
<blockquote> 
 <p>cp  ifcfg-ens33  ifcfg-ens37</p> 
 <p>#将ens33作为ens37的模板</p> 
 <p></p> 
 <p>vim ifcfg-ens37</p> 
 <p>#编辑ens37的文件内容</p> 
</blockquote> 
<p><img alt="" height="257" src="https://images2.imgbox.com/10/8a/etIcpmDx_o.png" width="564"></p> 
<blockquote> 
 <p>systemctl  restart  network</p> 
 <p>#重启服务</p> 
 <p></p> 
 <p>ping  172.16.18.4</p> 
 <p>#ping以下地址，看能不能通</p> 
</blockquote> 
<p> <img alt="" height="215" src="https://images2.imgbox.com/4f/35/9u2rEUha_o.png" width="550"></p> 
<blockquote> 
 <p>cat  /proc/net/bonding/bond0</p> 
 <p>#查看目前bonding状态</p> 
 <p></p> 
 <p>ifconfig   bond0</p> 
 <p>#显示当前网卡信息</p> 
</blockquote> 
<p><img alt="" height="620" src="https://images2.imgbox.com/46/ce/n1OvlJZx_o.jpg" width="691"></p> 
<h3>5.tcpdump抓包(流经本机的流量)</h3> 
<blockquote> 
 <p>tcpdump   src   host  hostname</p> 
 <p>#特定来源</p> 
 <p></p> 
 <p>tcpdump    dst    host   hostname</p> 
 <p>#特定目标地址</p> 
</blockquote> 
<p></p> 
<blockquote> 
 <p>tcpdump   -D</p> 
 <p>#显示当前所有网卡</p> 
</blockquote> 
<p> <img alt="" height="350" src="https://images2.imgbox.com/e0/8a/OM2qn3Tj_o.png" width="691"></p> 
<blockquote> 
 <p>tcpdump   -i   ens33</p> 
 <p>#-i&lt;网络接口&gt; 使用指定的网络截面送出数据包</p> 
</blockquote> 
<p><img alt="" height="197" src="https://images2.imgbox.com/92/96/IHJMYsoI_o.png" width="819"></p> 
<blockquote> 
 <p>tcpdump  -i  ens33   -nn  src  host 172.16.18.4  and  dst  172.16.18.100</p> 
 <p></p> 
 <p>#只抓172.16.18.4发给172.16.18.100的包</p> 
</blockquote> 
<p><img alt="" height="144" src="https://images2.imgbox.com/b4/dd/E0Kd7lsn_o.png" width="860"></p> 
<blockquote> 
 <p> tcpdump   -nn   -i  ens33  icmp  and  src  host  172.16.18.4   and  dst  host  172.16.18.3</p> 
 <p></p> 
 <p>#抓172.16.18.4发给172.16.18.3的  icmp  包</p> 
 <p>#条件之间要加  and</p> 
</blockquote> 
<p><img alt="" height="150" src="https://images2.imgbox.com/bb/d2/xugCqcQ3_o.jpg" width="927"></p> 
<blockquote> 
 <p>port</p> 
 <p>#特定端口</p> 
 <p></p> 
 <p>tcpdump   -i   ens33   port  22</p> 
 <p></p> 
 <p>#抓ens33的22端口</p> 
 <p>#如果网卡是eth0，可以不写-i，因为它默认把eth0作为第一个</p> 
</blockquote> 
<p><img alt="" height="222" src="https://images2.imgbox.com/0a/a3/183K7FfO_o.jpg" width="1185"></p> 
<blockquote> 
 <p>tcpdump   tcp  port  22  and  src  host  10.0.0.100</p> 
 <p>#抓22端口，并且源地址是10.0.0.100的包</p> 
</blockquote> 
<p><img alt="" height="149" src="https://images2.imgbox.com/9e/ec/1fZGJrYc_o.png" width="805"></p> 
<blockquote> 
 <p>tcpdump  -i  ens33  host  172.16.18.4  and  host  172.16.18.3</p> 
 <p>#抓两个地址之间的包</p> 
</blockquote> 
<p><img alt="" height="131" src="https://images2.imgbox.com/5d/ae/DJ3jQked_o.png" width="806"></p> 
<p></p> 
<p></p> 
<p></p> 
<p>网络检测工具：</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>ping</td><td>nmap</td></tr><tr><td>host</td><td>tarceroute</td></tr><tr><td>tcpdump</td><td></td></tr></tbody></table> 
<p>运维命令：</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>top</td><td>free</td></tr><tr><td>lsblk</td><td>ping</td></tr><tr><td>tcpdump</td><td>ps  aux</td></tr><tr><td>df</td><td>find</td></tr><tr><td>grep</td><td>tail   -f</td></tr></tbody></table> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6fbed15e7989655d3cbd123ae5bdaf77/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">shell 判断变量是否为0</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/715c707a97dcfc8afa099532091abadc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言经典练习1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>