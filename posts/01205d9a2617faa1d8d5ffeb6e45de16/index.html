<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>R语言: 如何快速获取一个地方的气象数据？ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="R语言: 如何快速获取一个地方的气象数据？" />
<meta property="og:description" content="作者介绍：
周甜，北京大学硕士研究生，高级分析师，主要从事环保数据分析，擅长于污染溯源和PM2.5源解析，知乎id：周小甜。
获取气象数据十分困难，但是气象数据对于空气质量分析至关重要，那么如何获取一个地方的气象数据（包括温度、风向、风速、气压、相对湿度等）呢？
本篇采用“worldmet”包，获取机场的小时气象数据，包括风向、风速、温度、露点、大气压、相对湿度。关于“worldmet”包，可参考大神github网页：https://github.com/envhyf/worldmet。
1.下载安装“worldmet” require(devtools) install_github(&#39;davidcarslaw/worldmet&#39;) 2.根据一个城市经纬度，找到最近机场信息 library(&#34;worldmet&#34;) #以延庆区的经纬度为例，纬度40.458N，经度115.98E getMeta(lat = 40.458, lon = 115.98) #系统会搜索到此点位周边的机场站点 3.结果示例 结果示例：从结果来看，最近的站点为“HUAILAI”站点，编码544050-99999，数据从1956-08-20就有数据。
# A tibble: 10 x 15 USAF WBAN STATION CTRY ST CALL latitude longitude `ELEV(M)` BEGIN &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt; 1 544050 99999 HUAILAI CH &lt;NA&gt; &lt;NA&gt; 40.4 116. 538 1956-08-20 2 545110 99999 BEIJING - ~ CH &lt;NA&gt; ZBAA 40.1 117. 35.4 1945-10-31 3 543080 99999 FENGNING CH &lt;NA&gt; &lt;NA&gt; 41." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/01205d9a2617faa1d8d5ffeb6e45de16/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-22T10:56:42+08:00" />
<meta property="article:modified_time" content="2018-07-22T10:56:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">R语言: 如何快速获取一个地方的气象数据？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="rich_media_content" id="js_content"> 
 <p style="min-height:1em;"><span style="font-size:15px;"><strong>作者介绍：</strong></span></p> 
 <p style="min-height:1em;"><span style="font-size:15px;">周甜，北京大学硕士研究生，高级分析师，主要从事环保数据分析，擅长于污染溯源和PM2.5源解析，知乎id：周小甜。</span></p> 
 <p style="color:rgb(26,26,26);">获取气象数据十分困难，但是气象数据对于空气质量分析至关重要，那么如何获取一个地方的气象数据（包括温度、风向、风速、气压、相对湿度等）呢？</p> 
 <p style="color:rgb(26,26,26);">本篇采用“worldmet”包，获取机场的小时气象数据，包括风向、风速、温度、露点、大气压、相对湿度。关于“worldmet”包，可参考大神github网页：https://github.com/envhyf/worldmet。</p> 
 <h3><strong>1.下载安装“worldmet”</strong></h3> 
 <pre style="font-size:.9em;background-color:rgb(246,246,246);"><code class="language-text"><span style="font-size:14px;">require(devtools)
install_github('davidcarslaw/worldmet')</span></code></pre> 
 <h3><strong>2.根据一个城市经纬度，找到最近机场信息</strong></h3> 
 <pre style="font-size:.9em;background-color:rgb(246,246,246);"><code class="language-text"><span style="font-size:14px;">library("worldmet")
#以延庆区的经纬度为例，纬度40.458N，经度115.98E
getMeta(lat = 40.458, lon = 115.98)
#系统会搜索到此点位周边的机场站点</span></code></pre> 
 <h3><strong>3.结果示例</strong></h3> 
 <p style="color:rgb(26,26,26);">结果示例：从结果来看，最近的站点为“HUAILAI”站点，编码544050-99999，数据从1956-08-20就有数据。</p> 
 <pre style="font-size:.9em;background-color:rgb(246,246,246);color:rgb(26,26,26);"><code class="language-text"><span style="font-size:12px;"># A tibble: 10 x 15
   USAF    WBAN STATION     CTRY  ST    CALL  latitude longitude `ELEV(M)` BEGIN     
   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;date&gt;    
 1 544050 99999 HUAILAI     CH    &lt;NA&gt;  &lt;NA&gt;      40.4      116.     538   1956-08-20
 2 545110 99999 BEIJING - ~ CH    &lt;NA&gt;  ZBAA      40.1      117.      35.4 1945-10-31
 3 543080 99999 FENGNING    CH    &lt;NA&gt;  &lt;NA&gt;      41.2      117.     661   1957-06-01
 4 544010 99999 ZHANGJIAKOU CH    &lt;NA&gt;  &lt;NA&gt;      40.8      115.     726   1956-08-20
 5 535930 99999 YU XIAN     CH    &lt;NA&gt;  &lt;NA&gt;      39.8      115.     910   1956-08-20
 6 544230 99999 CHENGDE     CH    &lt;NA&gt;  &lt;NA&gt;      41.0      118.     423   1956-08-20
 7 545270 99999 TIAN</span></code><code class="language-text"><span style="font-size:12px;">JIN     CH    &lt;NA&gt;  &lt;NA&gt;      39.1      117.       5   1956-08-20
 8 545273 99999 BINHAI      CH    &lt;NA&gt;  ZBTJ      39.1      117.       3   1981-11-25
 9 542080 99999 DUOLUN      CH    &lt;NA&gt;  &lt;NA&gt;      42.2      116.    1247   1956-08-20
10 546020 99999 BAODING     CH    &lt;NA&gt;  &lt;NA&gt;      38.7      115.      17   1956-08-20
# ... with 5 more variables: END &lt;date&gt;, code &lt;chr&gt;, longR &lt;dbl&gt;, latR &lt;dbl&gt;,
#   dist &lt;dbl&gt;</span></code></pre> 
 <p style="color:rgb(26,26,26);"><img class="origin_image zh-lightbox-thumb lazy" style="margin-left:auto;color:rgb(26,26,26);" width="554" src="https://images2.imgbox.com/4f/02/D5Zkq187_o.png" alt="640?wx_fmt=jpeg"></p> 
 <p style="color:rgb(26,26,26);text-align:center;"><span style="color:rgb(153,153,153);">点位周边的机场站点搜索结果</span></p> 
 <h3><strong>4.导出最近机场的气象数据</strong></h3> 
 <pre style="font-size:.9em;background-color:rgb(246,246,246);"><code class="language-text"><span style="font-size:14px;">#选取2015、2016、2017年，代码为544050-99999（“HUAILAI”站点）
dat &lt;- importNOAA(code = "544050-99999", year = c(2015,2016,2017))
#保存文档为CSV
write.csv(dat, file = "huailai_met.csv", row.names = FALSE)</span></code></pre> 
 <img class="origin_image zh-lightbox-thumb lazy" style="margin-left:auto;" width="554" src="https://images2.imgbox.com/47/f0/mcA6reeU_o.png" alt="640?wx_fmt=jpeg">气象数据导出文本示例 
 <p><span style="color:#1a1a1a;font-family:'-apple-system', BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;"><span style="font-size:15px;">说明：其余功能大家可以安装<span style="font-size:15px;color:rgb(26,26,26);">worldmet包实践操作，也欢迎与我交流～～</span></span></span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28968f372fe88c0ef855c7f79f42bbad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">均匀分布</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e949e2c1045f988b36c8ac2e082363ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JS向数组添加元素，插入数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>