<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu18-安装vmtk - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu18-安装vmtk" />
<meta property="og:description" content="官网教程：http://www.vmtk.org/download/
ubuntu 配置 vmtk :https://www.jianshu.com/p/c3bd28972ca0
按照这下面的流程一步一安装：
1. 安装 python 依赖包(等会 VMTK 要用)
sudo apt-get install python-dev libqt4-dev sudo mkdir /usr/lib/python2.7/config/ sudo cp /usr/lib/python2.7/config-x86_64-linux-gnu/libpython2.7.so /usr/lib/python2.7/config/libpython2.7.so 2. 开始着手安装 VMTK (基本是按照官网流程)
sudo apt-get install git cd ~/Downloads git clone https://github.com/vmtk/vmtk.git sudo apt-get install libxt-dev libgl1-mesa-glx libgl1-mesa-dev libglapi-mesa libosmesa-dev build-essential mkdir vmtk-build cd vmtk-build //如果有了安装包那只要在build文件夹下进行下面的，上面下载源码就不要了 cmake ../vmtk -DPYTHON_INCLUDE_DIR=/usr/include/python2.7 -DPYTHON_LIBRARY=/usr/lib/python2.7/config/libpython2.7.so make -j8 #漫长的等待 在make -j8这一步出了很多问题
1：使用Git clone代码失败的解决方法
fatal: The remote end hung up unexpectedly fatal: 过早的文件结束符(EOF) fatal: index-pack failed 查了一下，发现上因为Git限制了推送数据的大小导致的错误。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/49c782df2db7f2b14a1f393786512a7d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-22T09:40:47+08:00" />
<meta property="article:modified_time" content="2020-09-22T09:40:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu18-安装vmtk</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>官网教程：<a href="http://www.vmtk.org/download/" rel="nofollow">http://www.vmtk.org/download/</a><br> ubuntu 配置 vmtk :<a href="https://www.jianshu.com/p/c3bd28972ca0" rel="nofollow">https://www.jianshu.com/p/c3bd28972ca0</a></p> 
<p>按照这下面的流程一步一安装：<br> <img src="https://images2.imgbox.com/87/ae/HsOEsp6t_o.png" alt="在这里插入图片描述"></p> 
<p><strong>1. 安装 python 依赖包(等会 VMTK 要用)</strong></p> 
<pre><code class="prism language-css">sudo apt-get install python-dev libqt4-dev
sudo mkdir /usr/lib/python2.7/config/
sudo cp /usr/lib/python2.7/config-x86_64-linux-gnu/libpython2.7.so /usr/lib/python2.7/config/libpython2.7.so
</code></pre> 
<p><strong>2. 开始着手安装 VMTK (基本是按照官网流程)</strong></p> 
<pre><code class="prism language-css">sudo apt-get install git
cd ~/Downloads
git clone <span class="token property">https</span><span class="token punctuation">:</span>//github.com/vmtk/vmtk.git
sudo apt-get install libxt-dev libgl1-mesa-glx libgl1-mesa-dev libglapi-mesa libosmesa-dev build-essential

mkdir vmtk-build
cd vmtk-build


//如果有了安装包那只要在build文件夹下进行下面的，上面下载源码就不要了
cmake ../vmtk -DPYTHON_INCLUDE_DIR=/usr/include/python2.7 -DPYTHON_LIBRARY=/usr/lib/python2.7/config/libpython2.7.so 

make -j8      #漫长的等待
</code></pre> 
<p>在make -j8这一步出了很多问题<br> 1：使用Git clone代码失败的解决方法</p> 
<pre><code class="prism language-cpp">fatal<span class="token operator">:</span> The remote end hung up unexpectedly
 fatal<span class="token operator">:</span> 过早的文件结束符<span class="token punctuation">(</span><span class="token constant">EOF</span><span class="token punctuation">)</span>
fatal<span class="token operator">:</span> index<span class="token operator">-</span>pack failed
</code></pre> 
<p>查了一下，发现上因为Git限制了推送数据的大小导致的错误。</p> 
<pre><code class="prism language-cpp">git config <span class="token operator">--</span>global http<span class="token punctuation">.</span>postBuffer <span class="token number">524288000</span>
</code></pre> 
<p>2：libpython2.7.so 目录错误<br> <img src="https://images2.imgbox.com/b6/09/yL36VlmB_o.png" alt="在这里插入图片描述"></p> 
<p>找了一下发现实际在这个文件夹下：</p> 
<p><img src="https://images2.imgbox.com/62/36/Ce8005id_o.png" alt="在这里插入图片描述"></p> 
<p>于是改动路径</p> 
<p><img src="https://images2.imgbox.com/c4/81/czJNEPf0_o.png" alt="在这里插入图片描述"></p> 
<p>路径改为</p> 
<p><img src="https://images2.imgbox.com/8c/6e/O7rJOtTo_o.png" alt="在这里插入图片描述"><br> 下面就顺利了！！！<br> <img src="https://images2.imgbox.com/bb/5e/2KClBqA1_o.png" alt="在这里插入图片描述"></p> 
<p>成功啦！！！</p> 
<p><strong>3. 测试</strong></p> 
<p>执行 Vessel 程序</p> 
<pre><code class="prism language-css">cd ~/Downloads
git clone <span class="token property">https</span><span class="token punctuation">:</span>//github.com/jackyko1991/Vessel-Centerline-Extraction.git
cd Vessel-Centerline-Extraction
vim CMakeList.txt
</code></pre> 
<p>下面修改CMakeList.txt<br> 需要修改三行:<br> 路径是根据实际情况填写/xxxxx/vmtk-build下文件夹下对应三个路径<br> <img src="https://images2.imgbox.com/3a/68/fP3a9XMA_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-css">cmake .
make
./CenterlineExtraction  test_data/left/lumen.stl
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/5e/8qPYGe0q_o.png" alt="在这里插入图片描述"></p> 
<p>注意，最后想把封闭模型和中心线写入的话，改动</p> 
<pre><code class="prism language-css">./CenterlineExtraction  test_data/left/lumen.stl  test_data/lumencap.stl  test_data/lumencenline.vtp

</code></pre> 
<p>那么两个文件就会保存在test_data的文件夹下<br> 目前中心线那个vtp格式还有点问题</p> 
<hr> 
<p>vmtk提取中心线算法：是由 Luca Antiga 在他的博士论文中提出，算法的输入是血管的表面数据和中线的起止点。</p> 
<p>主要思路：是用Delaunay三角剖分算法算出血管Voronoi图，图上的点是血管最大内接球的球心，再由提供的起止点，在这些球心点中根据半径找到最短路径。查找最短路径的算法是Fast Marching算法。算法的最后输出可以得到中线上点的坐标和半径。</p> 
<p><img src="https://images2.imgbox.com/a1/51/WoZGbGHI_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/37c5ff0f9633b9592a9e73d06f6c5295/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">多媒体技术选择题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f47336a2b0f7ae69ec8d66b554633af0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python开发Windows桌面应用程序（二）简单应用程序实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>