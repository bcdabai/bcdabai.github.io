<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS 7 离线安装Python3 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS 7 离线安装Python3" />
<meta property="og:description" content="CentOS 7 离线安装Python 一 安装准备1.1 依赖下载1.2 删除CentOS 7自带的Python2软链接1.3 上传解压 二 安装2.1 安装编译Python所需的依赖2.1.1 gcc2.1.2 zlib2.1.3 bzip22.1.4 openssl2.1.5 ncurses2.1.6 sqlite2.1.7 readline2.1.8 tk(需要有tcl)2.1.9 libffi2.1.10 git 2.2 安装Python2.3 配置软链接2.4 验证是否安装成功 三 更改受影响配置 一 安装准备 1.1 依赖下载 Python 3.9.9 官网下载地址
1.2 删除CentOS 7自带的Python2软链接 cd /usr/bin rm python 1.3 上传解压 # 先创建文件夹 mkdir /usr/local/python3 cd /usr/local/python3 # 上传python安装包到此目录下,解压 tar -xvJf Python-3.6.6.tar.xz 二 安装 2.1 安装编译Python所需的依赖 2.1.1 gcc CentOS 7 gcc下载地址,下载图中gcc所示需要的依赖
# 1 依赖列表 cpp-4.8.5-39.el7.x86_64.rpm gcc-4.8.5-39.el7.x86_64.rpm glibc-devel-2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/89473a39296e839e6483ecd20e35aa56/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T09:14:14+08:00" />
<meta property="article:modified_time" content="2022-08-04T09:14:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS 7 离线安装Python3</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>CentOS 7 离线安装Python</h4> 
 <ul><li><a href="#__1" rel="nofollow">一 安装准备</a></li><li><ul><li><a href="#11__2" rel="nofollow">1.1 依赖下载</a></li><li><a href="#12_CentOS_7Python2_5" rel="nofollow">1.2 删除CentOS 7自带的Python2软链接</a></li><li><a href="#13__12" rel="nofollow">1.3 上传解压</a></li></ul> 
  </li><li><a href="#__21" rel="nofollow">二 安装</a></li><li><ul><li><a href="#21_Python_22" rel="nofollow">2.1 安装编译Python所需的依赖</a></li><li><ul><li><a href="#211_gcc_25" rel="nofollow">2.1.1 gcc</a></li><li><a href="#212_zlib_44" rel="nofollow">2.1.2 zlib</a></li><li><a href="#213_bzip2_73" rel="nofollow">2.1.3 bzip2</a></li><li><a href="#214_openssl_88" rel="nofollow">2.1.4 openssl</a></li><li><a href="#215_ncurses_105" rel="nofollow">2.1.5 ncurses</a></li><li><a href="#216_sqlite_122" rel="nofollow">2.1.6 sqlite</a></li><li><a href="#217_readline_140" rel="nofollow">2.1.7 readline</a></li><li><a href="#218_tktcl_157" rel="nofollow">2.1.8 tk(需要有tcl)</a></li><li><a href="#219_libffi_188" rel="nofollow">2.1.9 libffi</a></li><li><a href="#2110_git_204" rel="nofollow">2.1.10 git</a></li></ul> 
   </li><li><a href="#22_Python_221" rel="nofollow">2.2 安装Python</a></li><li><a href="#23__228" rel="nofollow">2.3 配置软链接</a></li><li><a href="#24__233" rel="nofollow">2.4 验证是否安装成功</a></li></ul> 
  </li><li><a href="#__243" rel="nofollow">三 更改受影响配置</a></li></ul> 
</div> 
<p></p> 
<h2><a id="__1"></a>一 安装准备</h2> 
<h3><a id="11__2"></a>1.1 依赖下载</h3> 
<p><a href="https://www.python.org/ftp/python/3.9.9/" rel="nofollow">Python 3.9.9 官网下载地址</a></p> 
<h3><a id="12_CentOS_7Python2_5"></a>1.2 删除CentOS 7自带的Python2软链接</h3> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/bin
<span class="token function">rm</span> python
</code></pre> 
<p><img src="https://images2.imgbox.com/35/aa/TU8QbfbK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13__12"></a>1.3 上传解压</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 先创建文件夹</span>
<span class="token function">mkdir</span> /usr/local/python3
<span class="token builtin class-name">cd</span> /usr/local/python3
<span class="token comment"># 上传python安装包到此目录下,解压</span>
<span class="token function">tar</span> -xvJf  Python-3.6.6.tar.xz
</code></pre> 
<h2><a id="__21"></a>二 安装</h2> 
<h3><a id="21_Python_22"></a>2.1 安装编译Python所需的依赖</h3> 
<h4><a id="211_gcc_25"></a>2.1.1 gcc</h4> 
<p><a href="http://mirrors.aliyun.com/centos/7/os/x86_64/Packages/" rel="nofollow">CentOS 7 gcc下载地址</a>,下载图中gcc所示需要的依赖</p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 依赖列表</span>
cpp-4.8.5-39.el7.x86_64.rpm
gcc-4.8.5-39.el7.x86_64.rpm
glibc-devel-2.12-1.212.el6.x86_64.rpm
glibc-headers-2.17-292.el7.x86_64.rpm 
kernel-headers-3.10.0-1062.el7.x86_64.rpm
libmpc-1.0.1-3.el7.x86_64.rpm
mpfr-3.1.1-4.el7.x86_64.rpm

<span class="token comment"># 2 将上面下载的依赖上传到服务器/opt/software/gcc,然后强制安装</span>
<span class="token builtin class-name">cd</span> /opt/software/gcc
<span class="token function">rpm</span>  -ivh  *.rpm --nodeps --force

<span class="token comment"># 3 检查是否安装成功</span>
gcc -v
</code></pre> 
<h4><a id="212_zlib_44"></a>2.1.2 zlib</h4> 
<p><a href="https://nchc.dl.sourceforge.net/project/libpng/zlib/1.2.11/zlib-1.2.11.tar.gz" rel="nofollow">zlib下载地址</a>，去sourceforge下载zlib的源码</p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 上传到服务器/opt/software/zlib</span>
<span class="token builtin class-name">cd</span> /opt/software/zlib

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf zlib-1.2.11.tar.gz

<span class="token comment"># 3 配置安装路径</span>
<span class="token builtin class-name">cd</span> zlib-1.2.11/
./configure --prefix<span class="token operator">=</span>/usr/local/zlib

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># 5 构建共享库</span>
<span class="token function">make</span> clean
./configure --shared
<span class="token function">make</span> <span class="token builtin class-name">test</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token function">cp</span> zutil.h /usr/local/include/
<span class="token function">cp</span> zutil.c /usr/local/include/

<span class="token comment"># 6 最后将zlib库写入动态库的路径</span>
<span class="token builtin class-name">echo</span> “/usr/local/zlib/lib” <span class="token operator">&gt;&gt;</span> /etc/ld.so.conf
ldconfig -v
</code></pre> 
<h4><a id="213_bzip2_73"></a>2.1.3 bzip2</h4> 
<p><a href="https://sourceware.org/pub/bzip2/bzip2-1.0.8.tar.gz" rel="nofollow">bzip2下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/bzip2</span>
<span class="token builtin class-name">cd</span> /opt/software/bzip2

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf bzip2-1.0.8.tar.gz

<span class="token comment"># 3 指定将源码编译链接到动态链接库上，然后编译安装</span>
<span class="token builtin class-name">cd</span> bzip2-1.0.8/
<span class="token function">make</span> -f Makefile-libbz2_so
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="214_openssl_88"></a>2.1.4 openssl</h4> 
<p><a href="https://www.openssl.org/source/openssl-1.1.1l.tar.gz" rel="nofollow">openssl下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/openssl</span>
<span class="token builtin class-name">cd</span> /opt/software/openssl

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf openssl-1.1.1l.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> openssl-1.1.1l/
./configure --prefix<span class="token operator">=</span>/usr/local/openssl

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="215_ncurses_105"></a>2.1.5 ncurses</h4> 
<p><a href="https://invisible-island.net/datafiles/release/ncurses.tar.gz" rel="nofollow">ncurses下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/ncurses</span>
<span class="token builtin class-name">cd</span> /opt/software/ncurses

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf ncurses.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> ncurses-6.3/
./configure --prefix<span class="token operator">=</span>/usr/local/ncurses

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="216_sqlite_122"></a>2.1.6 sqlite</h4> 
<p><a href="https://www.sqlite.org/2021/sqlite-autoconf-3370000.tar.gz" rel="nofollow">sqlite下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/sqlite</span>
<span class="token builtin class-name">cd</span> /opt/software/sqlite

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf sqlite-autoconf-3370000.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> sqlite-autoconf-3370000/
./configure    <span class="token comment"># 使用默认配置即可</span>

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="217_readline_140"></a>2.1.7 readline</h4> 
<p><a href="http://ftp.gnu.org/gnu/readline/readline-8.0.tar.gz" rel="nofollow">readline下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/readline</span>
<span class="token builtin class-name">cd</span> /opt/software/readline

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf readline-8.0.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> readline-8.0/
./configure --prefix<span class="token operator">=</span>/usr/local/readline

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="218_tktcl_157"></a>2.1.8 tk(需要有tcl)</h4> 
<p>先安装tlc，<a href="https://nchc.dl.sourceforge.net/project/tcl/Tcl/8.6.12/tcl8.6.12-src.tar.gz" rel="nofollow">下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/tcl</span>
<span class="token builtin class-name">cd</span> /opt/software/tcl

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf tcl8.6.12-src.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> tcl8.6.12/unix/
./configure --prefix<span class="token operator">=</span>/usr/local/tcl

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<p>再安装tk，<a href="https://prdownloads.sourceforge.net/tcl/tk8.6.12-src.tar.gz" rel="nofollow">tk下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/tk</span>
<span class="token builtin class-name">cd</span> /opt/software/tk

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf tk8.6.12-src.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> tk8.6.12/unix/
./configure --prefix<span class="token operator">=</span>/usr/local/tk

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="219_libffi_188"></a>2.1.9 libffi</h4> 
<p><a href="https://github.com/libffi/libffi/releases/download/v3.4.2/libffi-3.4.2.tar.gz">libffi下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/libffi</span>
<span class="token builtin class-name">cd</span> /opt/software/libffi

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf libffi-3.4.2.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> libffi-3.4.2/
./configure --prefix<span class="token operator">=</span>/usr/local/libffi

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h4><a id="2110_git_204"></a>2.1.10 git</h4> 
<p><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.34.1.tar.gz" rel="nofollow">git下载地址</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1 下载后上传到服务器/opt/software/git</span>
<span class="token builtin class-name">cd</span> /opt/software/git

<span class="token comment"># 2 解压</span>
<span class="token function">tar</span> -zxvf git-2.34.1.tar.gz

<span class="token comment"># 3 配置安装目录</span>
<span class="token builtin class-name">cd</span> git-2.34.1/
./configure --prefix<span class="token operator">=</span>/usr/local/git

<span class="token comment"># 4 编译安装</span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h3><a id="22_Python_221"></a>2.2 安装Python</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 进入解压后的目录</span>
<span class="token builtin class-name">cd</span> /usr/local/python3/Python-3.6.6
./configure --prefix<span class="token operator">=</span>/usr/local/python3
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h3><a id="23__228"></a>2.3 配置软链接</h3> 
<pre><code class="prism language-bash"><span class="token function">ln</span> -s /usr/local/python3/bin/python3 /usr/bin/python
<span class="token function">ln</span> -s /usr/local/python3/bin/pip3 /usr/bin/pip3
</code></pre> 
<h3><a id="24__233"></a>2.4 验证是否安装成功</h3> 
<pre><code class="prism language-bash"><span class="token comment"># 启动</span>
python2
python

<span class="token comment"># 查看版本</span>
python -V
pip3 -V
</code></pre> 
<h2><a id="__243"></a>三 更改受影响配置</h2> 
<pre><code class="prism language-bash"><span class="token comment"># 1 更改yum配置，因为其要用到python2才能执行，否则会导致yum不能正常使用</span>
<span class="token function">vim</span> /usr/bin/yum
<span class="token comment"># 把第一行的#! /usr/bin/python 修改为如下</span>
<span class="token comment">#! /usr/bin/python2</span>

<span class="token comment"># 2 其他配置</span>
<span class="token function">vim</span> /usr/libexec/urlgrabber-ext-down
<span class="token comment"># 把第一行的#! /usr/bin/python 修改如下</span>
<span class="token comment">#! /usr/bin/python2</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c789a9612be1f95e2a4057fd93879048/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Vue项目复习笔记】商品数据的展示</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a3034fbca998769b5e73c965aa3ec6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">属于程序猿的浪漫</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>