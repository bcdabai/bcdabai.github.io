<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>M1芯片Mac&#43;vmware fusion13&#43;Centos9&#43;final shell配置方案 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="M1芯片Mac&#43;vmware fusion13&#43;Centos9&#43;final shell配置方案" />
<meta property="og:description" content="M1芯片Mac&#43;vmware fusion13&#43;Centos9&#43;final shell配置方案 整了两天终于搞出来了！
背景：学习搭建kafka集群，想配置多台虚拟机试试
问题：目前网上的方案都是vmware&#43;centos7&#43;final shell。但是m1芯片的Mac并不能安装centos7或者8，我都踩了一遍坑，具体表现是安装界面按e没反应，原因我在外网找了一下，链接：问题描述
大意是，centos7或者8启动内核需要64kb大小，苹果芯片好像设计结构上只有4kb启不起来。
但是好像centos9 stream是可以的。
所以尝试一下centos9.
1. 材料准备 centos9镜像：地址
选择DVD1
fusion 13: https://www.vmware.com/products/fusion/fusion-evaluation.html
finalshell：http://www.hostbuf.com/t/988.html
2. 安装 都不需要破解 正常安装。镜像文件不是可执行的，镜像下好了先别动
3. 安装虚拟机 选择光盘 选择镜像 随便选一个，这里无所谓 配置可以对照一下 注意！！！！！！很多博客说网络要用桥接，但是在后续按照桥接配置的网卡，并不能生效，ssh无法连接虚拟机，所以这里还是选择nat模式！！！！！！！
进去之后正常安装 ​ 软件选择（server with gui）：Legacy Unix ,Developmet Tools,Graphica Adimnistration Toos,Rpm Developmet Tools.
​ 磁盘分区就默认
​ root改一下密码
其他的都默认就行。
4. 配置网卡（重要） 先说一下我觉得最难的网络配置。
centos9修改静态网卡和以前不一样，以前的地址是：
cd /etc/sysconfig/network-scripts 到该目录修改文件。底下的是我改过的
红框需要修改
method=manual 手动，意思就是改成静态的，对应dhcp=static的配置
address1=ip地址/子网掩码位数，网关。
下面解释在哪里找。
具体配置参考这篇配置centos8的文章：https://blog.csdn.net/weixin_42689212/article/details/124463591?csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22124463591%22,%22source%22:%22weixin_42689212%22%7D&amp;ctrtid=kqZ0y
首先在自己的电脑上：
cat /Library/Preferences/VMware\ Fusion/vmnet8/nat.conf 查找网关。
假设这里查到的是172.16.43.8
那你的
address1=172.16.43.x/24,172.16.43.8
x可以随便取，12345都行" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/74cc8417d41b4411f4659a697cc875d2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-07T17:26:50+08:00" />
<meta property="article:modified_time" content="2023-03-07T17:26:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">M1芯片Mac&#43;vmware fusion13&#43;Centos9&#43;final shell配置方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="M1Macvmware_fusion13Centos9final_shell_0"></a>M1芯片Mac+vmware fusion13+Centos9+final shell配置方案</h3> 
<p>整了两天终于搞出来了！</p> 
<p>背景：学习搭建kafka集群，想配置多台虚拟机试试</p> 
<p>问题：目前网上的方案都是vmware+centos7+final shell。但是m1芯片的Mac并不能安装centos7或者8，我都踩了一遍坑，具体表现是安装界面按e没反应，原因我在外网找了一下，链接：<a href="https://communities.vmware.com/t5/Fusion-22H2-Tech-Preview/Unable-to-install-CentOS-7-on-VMWare-fusion-for-Macbook-M1/td-p/2908072" rel="nofollow">问题描述</a><br> <img src="https://images2.imgbox.com/4a/47/EMRtOrds_o.png" alt="在这里插入图片描述"></p> 
<p>大意是，centos7或者8启动内核需要64kb大小，苹果芯片好像设计结构上只有4kb启不起来。</p> 
<p>但是好像centos9 stream是可以的。</p> 
<p>所以尝试一下centos9.</p> 
<h4><a id="1__16"></a>1. 材料准备</h4> 
<p>centos9镜像：<a href="https://mirrors.aliyun.com/centos-stream/9-stream/BaseOS/aarch64/iso/?spm=a2c6h.25603864.0.0.17e84c8crKBXz1" rel="nofollow">地址</a></p> 
<p>选择DVD1<br> <img src="https://images2.imgbox.com/8a/f6/iq2067jO_o.png" alt="在这里插入图片描述"></p> 
<p>fusion 13: https://www.vmware.com/products/fusion/fusion-evaluation.html</p> 
<p>finalshell：http://www.hostbuf.com/t/988.html</p> 
<h4><a id="2__30"></a>2. 安装</h4> 
<p>都不需要破解 正常安装。镜像文件不是可执行的，镜像下好了先别动</p> 
<h4><a id="3__36"></a>3. 安装虚拟机</h4> 
<ol><li>选择光盘</li></ol> 
<p><img src="https://images2.imgbox.com/c8/de/o87xzdgJ_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>选择镜像</li></ol> 
<p><img src="https://images2.imgbox.com/d7/3a/12OrsQ5H_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>随便选一个，这里无所谓</li></ol> 
<p><img src="https://images2.imgbox.com/f4/bf/5Rl3EiHJ_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>配置可以对照一下</li></ol> 
<p><img src="https://images2.imgbox.com/3a/08/ezk8Rpef_o.png" alt="在这里插入图片描述"></p> 
<p>注意！！！！！！很多博客说网络要用桥接，但是在后续按照桥接配置的网卡，并不能生效，ssh无法连接虚拟机，所以这里还是选择nat模式！！！！！！！</p> 
<ol start="5"><li>进去之后正常安装</li></ol> 
<p>​ 软件选择（server with gui）：Legacy Unix ,Developmet Tools,Graphica Adimnistration Toos,Rpm Developmet Tools.</p> 
<p>​ 磁盘分区就默认</p> 
<p>​ root改一下密码</p> 
<p>其他的都默认就行。</p> 
<h4><a id="4__71"></a>4. 配置网卡（重要）</h4> 
<p>先说一下我觉得最难的网络配置。</p> 
<p>centos9修改静态网卡和以前不一样，以前的地址是：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /etc/sysconfig/network-scripts
</code></pre> 
<p><img src="https://images2.imgbox.com/56/0c/OedxrJQg_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/f0/ea/2xCMIjgv_o.png" alt="在这里插入图片描述"></p> 
<p>到该目录修改文件。底下的是我改过的</p> 
<p><img src="https://images2.imgbox.com/16/f2/LknvwHRn_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/96/99/Lnyp49Hw_o.png" alt="在这里插入图片描述"></p> 
<p>红框需要修改</p> 
<p>method=manual 手动，意思就是改成静态的，对应dhcp=static的配置</p> 
<p>address1=ip地址/子网掩码位数，网关。</p> 
<p>下面解释在哪里找。</p> 
<p>具体配置参考这篇配置centos8的文章：https://blog.csdn.net/weixin_42689212/article/details/124463591?csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22124463591%22,%22source%22:%22weixin_42689212%22%7D&amp;ctrtid=kqZ0y</p> 
<p>首先在自己的电脑上：</p> 
<pre><code class="prism language-shell"><span class="token function">cat</span> /Library/Preferences/VMware<span class="token punctuation">\</span> Fusion/vmnet8/nat.conf
</code></pre> 
<p><img src="https://images2.imgbox.com/0d/0b/FflvR5Jg_o.png" alt="在这里插入图片描述"></p> 
<p>查找网关。</p> 
<p>假设这里查到的是172.16.43.8</p> 
<p>那你的</p> 
<p>address1=172.16.43.x/24,172.16.43.8</p> 
<p>x可以随便取，12345都行</p> 
<p>dns在这里找 cat /etc/resolv.conf</p> 
<p>把nameserver后面的都拿出来，中间用；拼接</p> 
<p>配置文件就好了</p> 
<p>然后执行命令：</p> 
<pre><code class="prism language-shell">nmcli connection reload
 
nmcli connection down ens160
 
nmcli connection up ens160
</code></pre> 
<p>然后检查一下这边有没有变</p> 
<p><img src="https://images2.imgbox.com/34/22/ICCLlczN_o.png" alt="在这里插入图片描述"></p> 
<p>最后ping www.baidu.com 就行</p> 
<h4><a id="final_shell_143"></a>final shell连接</h4> 
<p>这里有个配置文件需要修改，不然连接的时候一直会跳要你重新填密码</p> 
<p>参考：https://blog.csdn.net/m0_50932526/article/details/128233228</p> 
<p>最后终于成功！</p> 
<p>m1的坑感觉有很多，参考了网上各路大神的文章，才最终弄好，很多地方我也不明所以，比如为啥桥接不行，nat行，这块儿是怎么让外网发现并且能ssh的，如果有大神知道能说明一下最好！搞了两天，现在整理一下，希望给mac m1芯片的同学一点帮助。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1c7f723b8f29c7536772a4a2b1399893/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">投影仪怎么铺满全屏？投影仪详细设置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8c62576527717994e74d48b57ccfd35/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">centos7 或者麒麟V10在线升级SSH为最新的9.2p1版本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>