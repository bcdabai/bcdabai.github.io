<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VUE-PDF 实现pdf在线预览 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VUE-PDF 实现pdf在线预览" />
<meta property="og:description" content="1、首先安装vue-pdf ，在命令行中输入如下代码：
npm install --save vue-pdf 2、页面引用，新建index.vue
&lt;template&gt; &lt;div class=&#34;ins-submit-docs-content ins-submit-docs-pdf&#34;&gt; &lt;div v-if=&#34;loading&#34; style=&#34;position: absolute; top: 40%; width: 100%;text-align: center;&#34;&gt; &lt;van-loading type=&#34;spinner&#34; color=&#34;#fc8955&#34; /&gt; &lt;/div&gt; &lt;van-empty description=&#34;文档加载失败&#34; v-if=&#34;loadingError&#34; /&gt; &lt;pdf ref=&#34;morePDF&#34; :src=&#34;src&#34;&gt;&lt;/pdf&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Vue from &#39;vue&#39;; import pdf from &#39;vue-pdf&#39; import { Loading } from &#39;vant&#39;; Vue.use(Loading); export default { name : &#39;ins-docs-pdf&#39;, props : { src : { type : String, //默认值，选中值 default : &#39;&#39; } }, data(){ return { loading : true, //加载中 loadingError : false, //加载失败 } }, watch : { src : { deep : true, immediate: true, handler(val){ if(val){ this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/399cff1a656ea9b1b53f4b2458e3fc34/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-27T09:52:29+08:00" />
<meta property="article:modified_time" content="2022-01-27T09:52:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VUE-PDF 实现pdf在线预览</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1、首先安装vue-pdf ，在命令行中输入如下代码：</p> 
<pre><code class="language-javascript">npm install --save vue-pdf</code></pre> 
<p>2、页面引用，新建index.vue</p> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="ins-submit-docs-content ins-submit-docs-pdf"&gt;
        &lt;div v-if="loading" style="position: absolute; top: 40%; width: 100%;text-align: center;"&gt;
            &lt;van-loading type="spinner" color="#fc8955" /&gt;
        &lt;/div&gt;
        &lt;van-empty description="文档加载失败" v-if="loadingError" /&gt;
            &lt;pdf ref="morePDF" :src="src"&gt;&lt;/pdf&gt;
    &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<pre><code class="language-javascript">&lt;script&gt;
import Vue from 'vue';
import pdf from 'vue-pdf'
import { Loading } from 'vant';
Vue.use(Loading);

export default {
    name : 'ins-docs-pdf',
    props : {
        src : {
            type : String,    //默认值，选中值
            default : ''
        }
    },
    data(){
        return {
            loading : true,    //加载中
            loadingError : false,    //加载失败
        }
    },
    watch : {
        src : {
            deep : true,
            immediate: true,
            handler(val){
                if(val){
                    this.getPDFnums(val)
                }
            }
        }
    },
    components: {
        pdf
    },
    methods:{
        //计算pdf页码总数
        getPDFnums(url) {
            this.loading = true
            //let loadURL = pdf.createLoadingTask(url)
            let loadURL = pdf.createLoadingTask({
                  url: url,//你的pdf地址
            })

            loadURL.promise.then(pdf =&gt; {
                this.$set(this, 'docsPDF.numPages', pdf.numPages)
                this.loading = false
            }).catch(err =&gt; {
                this.loading = false;
                this.loadingError = true;
            })
        }
    }
}
&lt;/script&gt;</code></pre> 
<p>3、<strong>当PDF 有很多页的时候，直接v-for 循环</strong>，直接显示完</p> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="ins-submit-docs-content ins-submit-docs-pdf"&gt;
        &lt;div v-if="loading" style="position: absolute; top: 40%; width: 100%;text-align: center;"&gt;
            &lt;van-loading type="spinner" color="#fc8955" /&gt;
        &lt;/div&gt;
        &lt;van-empty description="文档加载失败" v-if="loadingError" /&gt;
        &lt;pdf ref="morePDF" :src="src" :page="i" v-for="i in numPages" :key="i"&gt;&lt;/pdf&gt;
    &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<pre><code class="language-javascript">&lt;script&gt;
import Vue from 'vue';
import pdf from 'vue-pdf'
import { Loading } from 'vant';
Vue.use(Loading);

export default {
    name : 'ins-docs-pdf',
    props : {
        src : {
            type : String,    //默认值，选中值
            default : ''
        }
    },
    data(){
        return {
            loading : true,    //加载中
            loadingError : false,    //加载失败
            numPages : 0,        
        }
    },
    watch : {
        src : {
            deep : true,
            immediate: true,
            handler(val){
                if(val){
                    this.getPDFnums(val)
                }
            }
        }
    },
    components: {
        pdf
    },
    methods:{
        //计算pdf页码总数
        getPDFnums(url) {
            this.loading = true
            //let loadURL = pdf.createLoadingTask(url)
            let loadURL = pdf.createLoadingTask({
                  url: url,//你的pdf地址
            })

            loadURL.promise.then(pdf =&gt; {
                this.numPages = pdf.numPages
                this.$set(this, 'docsPDF.numPages', pdf.numPages)
                this.loading = false
            }).catch(err =&gt; {
                this.loading = false;
                this.loadingError = true;
            })
        }
    }
}
&lt;/script&gt;</code></pre> 
<p>4、当PDF很大的时候，你会发现PDF加载回很慢，并且偶尔会跳出加载；这时就用到了下边的代码；<strong>PDF分页展示；并且解决PDF预览的时候偶尔中文会乱码，借用VUE-PDF中CMapReaderFactory</strong></p> 
<pre><code class="language-html">&lt;template&gt;
    &lt;div class="ins-submit-docs-content ins-submit-docs-pdf"&gt;
        &lt;div v-if="loading" style="position: absolute; top: 40%; width: 100%;text-align: center;"&gt;
            &lt;van-loading type="spinner" color="#fc8955" /&gt;
        &lt;/div&gt;
        &lt;van-empty description="文档加载失败" v-if="loadingError" /&gt;
        &lt;div v-show="numPages &lt;= 50"&gt;
            &lt;pdf ref="morePDF" :src="src" :page="i" v-for="i in numPages" :key="i"&gt;&lt;/pdf&gt;
        &lt;/div&gt;
        &lt;div v-show="numPages &gt; 50"&gt;
            &lt;pdf ref="PDF" :src="src" :page="currentPage" @num-pages="numPages=$event" @loaded="loadPdfHandler"&gt;&lt;/pdf&gt;
            &lt;div class="ins-pdf-button-box"&gt;
                &lt;span @click.stop="prePage"&gt;上一页&lt;/span&gt;
                &lt;span&gt;{<!-- -->{currentPage}}/{<!-- -->{numPages}}&lt;/span&gt;
                &lt;span @click.stop="nextPage"&gt;下一页&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<pre><code class="language-javascript">&lt;script&gt;
import Vue from 'vue';
import pdf from 'vue-pdf'
import CMapReaderFactory from 'vue-pdf/src/CMapReaderFactory.js';
import { Loading } from 'vant';
Vue.use(Loading);

export default {
    name : 'ins-docs-pdf',
    props : {
        src : {
            type : String,    //默认值，选中值
            default : ''
        }
    },
    data(){
        return {
            loading : true,    //加载中
            loadingError : false,    //加载失败
            numPages : 0,        //分页
            currentPage : 1, //当前显示页数
        }
    },
    watch : {
        src : {
            deep : true,
            immediate: true,
            handler(val){
                if(val){
                    this.getPDFnums(val)
                }
            }
        }
    },
    components: {
        pdf
    },
    methods:{
        //计算pdf页码总数
        getPDFnums(url) {
            this.loading = true
            //let loadURL = pdf.createLoadingTask(url)
            let loadURL = pdf.createLoadingTask({
                  url: url,//你的pdf地址
                  CMapReaderFactory
            })

            loadURL.promise.then(pdf =&gt; {
                this.numPages = pdf.numPages
                this.currentPage = 1
                this.$set(this, 'docsPDF.numPages', pdf.numPages)
                this.loading = false
            }).catch(err =&gt; {
                this.loading = false;
                this.loadingError = true;
            })
        },

        // 上一页
        prePage() {
            var page = this.currentPage
            page = page &gt; 1 ? page - 1 : this.numPages
            this.currentPage = page
        },

        // 下一页
        nextPage() {
            var page = this.currentPage
            page = page &lt; this.numPages ? page + 1 : 1
            this.currentPage = page
        },

        // 回调
        loadPdfHandler(e) {
            this.currentPage = e
        }
    }
}
&lt;/script&gt;</code></pre> 
<p><strong>希望这些分享可以帮助到大家</strong></p> 
<p><strong>谢谢各位看官的阅读~</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/807c10c32565533778b6c5528900262e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">人体姿态识别方案详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48ce0d8e76a1dd659530f5fab0f76f18/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nginx技术笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>