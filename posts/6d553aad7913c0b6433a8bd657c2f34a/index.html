<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RFSoC应用笔记 - RF数据转换器 -13- RFSoC多块同步功能 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="RFSoC应用笔记 - RF数据转换器 -13- RFSoC多块同步功能" />
<meta property="og:description" content="应用概述 本文概述了如何在系统中使用RFSoC 射频数据转换器的多块同步功能。
文章目录 应用概述多块同步（MTS）详细说明同步步骤确定性多图块同步 API 使用SYSREF 信号要求SYSREF 频率计算示例PL SYSREF 捕获 数字特征同步模拟同步模拟 SYSREF 捕获/接收模拟 SYSREF 交流和直流耦合 MTS Sequencing用例 1：使用带有 AC 或 DC 耦合的单个设备的 SYSREF 同步数字功能用例 2：使用带有直流耦合的多个器件的 SYSREF 同步数字功能 使用实时信号门控模拟 SYSREF（第 3 代） 多块同步（MTS） RFSoC 具有非常灵活的时钟和数据接口，可在同一器件中实现多种不同的应用。 每个 RF-ADC/RF-DAC 块都有自己独立的时钟和数据基础设施，允许每个块以单独的采样率和 PL 数据字宽驱动。 单个 tile 中的转换器共享时钟和数据基础设施，因此采样率和延迟是固定的。 但是，某些应用可能需要多个块，甚至多个RFSoC 才能一起使用。 对于这些应用程序，跨图块匹配转换器延迟至关重要。 多块同步 (MTS) 功能可用于实现相对和确定的多块和多设备对齐。
详细说明 在任何具有多个独立转换器和时钟结构的系统中，都有几个潜在的延迟不确定性来源，例如时钟分频器相位、NCO 相位、FIFO 延迟、时钟偏移和数据偏移。 分立转换器已标准化 JESD204B SYSREF 方案的同步使用，因此，RFSoC 已使用 SYSREF 实施了一个互补的简化方案。
RFSoC 中的转换器集成消除了用于数据通信的串行收发器链路。 然而，为了为 PL 设计提供灵活的时钟和数据字数，每个 RF-ADC 和 RF-DAC 都包含独立的FIFO。 这些 FIFO 允许在 PL 时钟域和转换器采样时钟域之间传输数据，但这会导致不确定的延迟，也必须使用 SYSREF 进行测量和校正。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6d553aad7913c0b6433a8bd657c2f34a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-22T19:52:26+08:00" />
<meta property="article:modified_time" content="2022-10-22T19:52:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RFSoC应用笔记 - RF数据转换器 -13- RFSoC多块同步功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>应用概述</h2> 
<p>本文概述了如何在系统中使用RFSoC 射频数据转换器的多块同步功能。<br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_0" rel="nofollow">应用概述</a></li><li><a href="#MTS_4" rel="nofollow">多块同步（MTS）</a></li><li><ul><li><a href="#_8" rel="nofollow">详细说明</a></li><li><a href="#_30" rel="nofollow">同步步骤</a></li><li><a href="#_API__46" rel="nofollow">确定性多图块同步 API 使用</a></li><li><a href="#SYSREF__60" rel="nofollow">SYSREF 信号要求</a></li><li><ul><li><a href="#SYSREF__77" rel="nofollow">SYSREF 频率计算示例</a></li><li><a href="#PL_SYSREF__88" rel="nofollow">PL SYSREF 捕获</a></li></ul> 
   </li><li><a href="#_109" rel="nofollow">数字特征同步</a></li><li><a href="#_115" rel="nofollow">模拟同步</a></li><li><ul><li><a href="#_SYSREF__117" rel="nofollow">模拟 SYSREF 捕获/接收</a></li><li><a href="#_SYSREF__123" rel="nofollow">模拟 SYSREF 交流和直流耦合</a></li></ul> 
   </li><li><a href="#MTS_Sequencing_129" rel="nofollow">MTS Sequencing</a></li><li><ul><li><a href="#_1_AC__DC__SYSREF__171" rel="nofollow">用例 1：使用带有 AC 或 DC 耦合的单个设备的 SYSREF 同步数字功能</a></li><li><a href="#_2_SYSREF__223" rel="nofollow">用例 2：使用带有直流耦合的多个器件的 SYSREF 同步数字功能</a></li></ul> 
   </li><li><a href="#_SYSREF_3__272" rel="nofollow">使用实时信号门控模拟 SYSREF（第 3 代）</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="MTS_4"></a>多块同步（MTS）</h2> 
<p>RFSoC 具有非常灵活的时钟和数据接口，可在同一器件中实现多种不同的应用。 每个 RF-ADC/RF-DAC 块都有自己独立的时钟和数据基础设施，允许每个块以单独的采样率和 PL 数据字宽驱动。 单个 tile 中的转换器共享时钟和数据基础设施，因此采样率和延迟是固定的。 但是，某些应用可能需要多个块，甚至多个RFSoC 才能一起使用。 对于这些应用程序，跨图块匹配转换器延迟至关重要。 多块同步 (MTS) 功能可用于实现相对和确定的多块和多设备对齐。</p> 
<h3><a id="_8"></a>详细说明</h3> 
<p>在任何具有多个独立转换器和时钟结构的系统中，都有几个潜在的延迟不确定性来源，例如时钟分频器相位、NCO 相位、FIFO 延迟、时钟偏移和数据偏移。 分立转换器已标准化 JESD204B SYSREF 方案的同步使用，因此，RFSoC 已使用 SYSREF 实施了一个互补的简化方案。</p> 
<p><img src="https://images2.imgbox.com/46/73/PbVj6FPY_o.png" alt="image-20220727111324246"></p> 
<p>RFSoC 中的转换器集成消除了用于数据通信的串行收发器链路。 然而，为了为 PL 设计提供灵活的时钟和数据字数，每个 RF-ADC 和 RF-DAC 都包含独立的FIFO。 这些 FIFO 允许在 PL 时钟域和转换器采样时钟域之间传输数据，但这会导致不确定的延迟，也必须使用 SYSREF 进行测量和校正。</p> 
<p>RFSoC RF 数据转换器和 RFdc 驱动程序 API 解决方案提供了一种易于使用的集成方式来同步给定设备中的每个 Tile。 上图显示了一个示例系统，其中包含要同步的多个图块。 以下适用于上图：</p> 
<ul><li>该方法同样适用于任何数量的RF-ADC 或RF-DAC 块。</li><li>每个器件的单个模拟SYSREF 输入在内部分配给所有RF-ADC 和RF-DAC。</li><li>每个块都有一个内部模拟SYSREF 延迟调整，通过允许在片上优化SYSREF 建立/保持时间来降低PCB 要求。</li><li>每个区块有一个模拟时钟输入； 这些显示为 DAC0_CLK 和 DAC1_CLK。</li><li>PL 用户设计和块的公共时钟显示为PL 时钟(PL_clock)。</li><li>PL 的SYSREF 显示为PL SYSREF (PL_SysRef)。 如果 RF-ADC (user_sysref_adc) 和 RF-DAC (user_sysref_dac) 都在同步组中，则有一个单独的 PL SYSREF。</li><li>同步状态机包含在内核中，它与RFdc 驱动程序API 一起实现同步解决方案。</li><li>对于RF-DAC 多块同步(MTS)，RF-DAC 块主控始终用作所有其他RF-DAC 块同步的参考块。 因此，RF-DAC tile 0 必须是用于 RF-DAC 的 MTS 应用中的活动 tile。</li><li>同样，RF-ADC 主模块始终用作所有其他 RF-ADC 模块同步的参考模块。 因此，RF-ADC tile 0 必须是用于 RF-ADC 的 MTS 应用中的活动 tile。</li><li>如果需要禁用 SYSREF 链中存在的块，则应在第 1 代和第 2 代设备中将其断电至上电序列中的状态 3 和第 3 代设备中的状态 6。 这可确保 SYSREF 仍沿链传播。</li><li>在PCB 设计期间应考虑并调整每个转换器的封装flight时间偏差。</li></ul> 
<h3><a id="_30"></a>同步步骤</h3> 
<p>在高层次上，执行的同步步骤如下：</p> 
<ol><li> <p>启用所有时钟和 SYSREF 发生器：模拟和数字时钟都必须在同步开始之前运行并锁定。对时钟的任何更改都需要重新同步。</p> </li><li> <p>SYSREF 模拟捕捉：通过自动调整用于建立/保持的内部 SYSREF 可编程延迟，确保安全地捕获 SYSREF。 这是针对每个图块完成的，并且需要多个周期性 SYSREF 脉冲，以便可以确定最佳延迟值。 因此，MTS 进程需要一个周期性的 SYSREF 时钟。</p> </li><li> <p>时钟分频器复位：当所有块都安全地捕获 SYSREF 时，随后的 SYSREF 边沿用于同步所有分频器相位。</p> </li><li> <p>FIFO 延迟测量和调整：模拟 SYSREF 和 PL_Sysref 信号用于测量通过每个 FIFO 的延迟。使用所有图块的测量值来调整延迟，使其匹配。</p> </li><li> <p>将数字特征与 SYSREF 动态更新事件同步：当启用会影响瓦片对齐的数字特征时，必须使用 SYSREF 动态更新事件初始化/更新相关的数字功能块。 这些数字特性包括精细混频器/NCO、QMC 和粗延迟。</p> </li></ol> 
<p><strong>步骤 2、3 和 4 由 IP 内核和 RFdc 驱动程序 API 自动处理。</strong></p> 
<p>当 API 用于修改影响 FIFO 时钟速率或宽度的数字设置时，必须重新启动同步过程。 在 MTS 过程中涉及的任何瓦片断电或重新启动后，同步过程也必须重新启动。</p> 
<h3><a id="_API__46"></a>确定性多图块同步 API 使用</h3> 
<p>多片API 使用保证了每组中图块之间的对齐。 但是，通过 Tile 的总延迟可能会因与 FIFO 读取时钟周期相关的字数除以读取字数而变化。 对于总延迟必须恒定的应用程序，可以启用 API 中的 Target_Latency 设置。 此设置将所有小于目标的延迟调整为目标值； 任何大于目标的测量值都会导致错误消息，而 MTS 仍然通过忽略 Target_Latency 来对齐所有瓦片。</p> 
<p>为防止出现此错误，必须首先通过运行 <code>XRFdc_MultiConverter_Sync</code> 并将目标设置为 -1 来确定用户 FIFO 和 tile 配置的 Target_Latency 值。 返回的延迟值（加上一些余量）必须设置为未来运行的目标值。</p> 
<p>要应用的余量值是根据采样时钟指定的。 对于 RF-ADC 块，该值必须是 FIFO 读取字数乘以抽取因子的倍数，对于 RF-DAC 块，该值可以是常数 16。设置目标延迟的示例如下 如下：</p> 
<pre><code class="prism language-c"><span class="token function">XRFdc_MultiConverter_Init</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>DAC_Sync_Config<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Initialize DAC MTS Settings</span>
DAC_Sync_Config<span class="token punctuation">.</span>Tiles <span class="token operator">=</span> <span class="token number">0x3</span><span class="token punctuation">;</span> <span class="token comment">// Tiles to sync bit-mask: DAC tiles 0 and 1</span>
DAC_Sync_Config<span class="token punctuation">.</span>Target_Latency <span class="token operator">=</span> <span class="token number">296</span><span class="token punctuation">;</span> <span class="token comment">// Target latency - measured value (280 + 16 margin)</span>
</code></pre> 
<h3><a id="SYSREF__60"></a>SYSREF 信号要求</h3> 
<p>SYSREF 信号是系统的时序参考，因此必须正确处理以确保它不会降低同步性能。 该信号具有以下要求。</p> 
<ol><li> <p>SYSREF 信号必须是高质量、自由运行、低抖动的方波，以使其能够被模拟采样时钟一致地捕获。</p> </li><li> <p><strong>SYSREF 频率必须满足以下要求：</strong></p> 
  <ol><li> <p>如果同步具有不同采样频率的 RF-ADC 和 RF-DAC 块，则频率必须是以下的整数约数：GCD(DAC_Sample_Rate/16, ADC_Sample_Rate/16)</p> </li><li> <p>SYSREF 还必须是对其进行采样的所有 PL 时钟的整数约数。 这是为了确保始终同步采样周期性 SYSREF。</p> </li><li> <p>小于 10MHz</p> </li></ol> </li><li> <p>SYSREF 在传递给内核之前必须被 PL 安全捕获： PL_SysRef 到 PL_clock 的建立/保持必须作为用户设计的一部分进行处理。可以使用 PCB 上的时钟生成来促进这一点。</p> </li><li> <p>模拟 SYSREF 和 PL SYSREF 必须是相同的频率并且具有恒定的相位关系。 如果需要确定性延迟，模拟 SYSREF 和 PL SYSREF 必须在复位到复位周期内保持相同的相位差。</p> </li><li> <p>对于 MTS 同步，包括分频器相位同步和 FIFO 延迟同步，模拟 SYSREF 和 PL SYSREF 在 MTS 过程期间必须是连续时钟。 它可以是交流耦合或直流耦合。SYSREF 信号可以在 MTS 程序完成后关闭。 请注意，它们应该在 MTS 函数调用之前打开并稳定下来。</p> </li><li> <p>如果模拟 SYSREF 用于跨多个RFSoC 同步 DUC/DDC 混频器 NCO 的相位，则它必须进行直流耦合，并具有生成单个或多个脉冲波形的能力。</p> </li></ol> 
<h4><a id="SYSREF__77"></a>SYSREF 频率计算示例</h4> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          A 
         
        
          D 
         
         
         
           C 
          
          
          
            S 
           
          
            a 
           
          
            m 
           
          
            p 
           
          
            l 
           
          
            e 
           
          
            R 
           
          
            a 
           
          
            t 
           
          
            e 
           
          
         
        
          = 
         
        
          3.93216 
         
        
          G 
         
        
          H 
         
        
          z 
         
         
        
          D 
         
        
          A 
         
         
         
           C 
          
          
          
            S 
           
          
            a 
           
          
            m 
           
          
            p 
           
          
            l 
           
          
            e 
           
          
            R 
           
          
            a 
           
          
            t 
           
          
            e 
           
          
         
        
          = 
         
        
          4.91520 
         
        
          G 
         
        
          H 
         
        
          z 
         
         
        
          G 
         
        
          C 
         
        
          D 
         
        
          ( 
         
        
          A 
         
        
          D 
         
         
         
           C 
          
          
          
            S 
           
          
            a 
           
          
            m 
           
          
            p 
           
          
            l 
           
          
            e 
           
          
            R 
           
          
            a 
           
          
            t 
           
          
            e 
           
          
         
        
          / 
         
        
          16 
         
        
          , 
         
        
          D 
         
        
          A 
         
         
         
           C 
          
          
          
            S 
           
          
            a 
           
          
            m 
           
          
            p 
           
          
            l 
           
          
            e 
           
          
            R 
           
          
            a 
           
          
            t 
           
          
            e 
           
          
         
        
          / 
         
        
          16 
         
        
          ) 
         
        
          = 
         
        
          61.44 
         
        
          M 
         
        
          H 
         
        
          z 
         
         
        
          I 
         
        
          n 
         
        
          t 
         
        
          e 
         
        
          g 
         
        
          e 
         
        
          r 
         
        
            
         
        
          S 
         
        
          u 
         
        
          b 
         
        
            
         
        
          − 
         
        
            
         
        
          M 
         
        
          u 
         
        
          l 
         
        
          t 
         
        
          i 
         
        
          p 
         
        
          l 
         
        
          e 
         
        
            
         
        
          A 
         
        
          N 
         
        
          D 
         
        
            
         
        
          &lt; 
         
        
            
         
        
          10 
         
        
            
         
        
          M 
         
        
          H 
         
        
          z 
         
        
            
         
        
          = 
         
        
            
         
        
          7.68 
         
        
          M 
         
        
          H 
         
        
          z 
         
        
       
         ADC_{SampleRate} = 3.93216 GHz\\ DAC_{SampleRate} = 4.91520 GHz\\ GCD(ADC_{SampleRate}/16 , DAC_{SampleRate}/16) = 61.44 MHz\\ Integer\ Sub\ -\ Multiple\ AND\ &lt;\ 10\ MHz\ =\ 7.68 MHz 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">3.93216</span><span class="mord mathnormal">G</span><span class="mord mathnormal" style="margin-right: 0.044em;">Hz</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">4.91520</span><span class="mord mathnormal">G</span><span class="mord mathnormal" style="margin-right: 0.044em;">Hz</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">GC</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord">/16</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal mtight">am</span><span class="mord mathnormal mtight" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord">/16</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">61.44</span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mord mathnormal" style="margin-right: 0.044em;">Hz</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal" style="margin-right: 0.0278em;">er</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">u</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mord mathnormal">u</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">e</span><span class="mspace"> </span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">10</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mord mathnormal" style="margin-right: 0.044em;">Hz</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord">7.68</span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mord mathnormal" style="margin-right: 0.044em;">Hz</span></span></span></span></span></span></p> 
<p>这些等式生成满足 RFADC/ 要求的 SYSREF 频率 RF-DAC 内部时钟。 SYSREF 信号也被 PL 同步捕获； 因此，SYSREF 频率也必须是驱动 IP 接口的 PL 时钟或与 PL SYSREF 交互的任何其他时钟的约数。</p> 
<h4><a id="PL_SYSREF__88"></a>PL SYSREF 捕获</h4> 
<p>为保证 Tile 之间的有效同步，在器件逻辑中可靠地捕获 PL SYSREF 输入非常重要。 PL SYSREF 和 PL 时钟输入必须是符合器件时钟和存储规则的差分信号。 PL 时钟输入必须在专用时钟引脚上。 RF 数据转换器内核的 AXI4-Stream 时钟必须从 PL 时钟输入生成，而不是从内核本身的时钟输出生成。 下图显示了一个示例 PL SYSREF 捕获电路，其中 RF-ADC 和 RF-DAC 以相同的 AXI4-Stream 时钟频率运行。</p> 
<p><img src="https://images2.imgbox.com/5c/24/2OpX4PC0_o.png" alt="image-20220727113524261"></p> 
<p>可在 Vivado IDE 中使用 <code>report_datasheet</code> 命令计算器件引脚上 PL SYSREF 输入所需的建立和保持时间。 下图显示了具有 500 MHz PL 时钟的 -1 速度等级器件的示例计算。</p> 
<p><img src="https://images2.imgbox.com/ff/e0/YATQeO04_o.png" alt="image-20220727113606593"></p> 
<table><thead><tr><th>Reference Clock</th><th>Input Port</th><th>Setup (ns) to Clk (Edge)</th><th>Hold (ns) to Clk (Edge)</th></tr></thead><tbody><tr><td>pl_clk</td><td>pl_sysref_n</td><td>0.965 ®</td><td>0.285 ®</td></tr><tr><td>pl_clk</td><td>pl_sysref_p</td><td>0.965 ®</td><td>0.285 ®</td></tr></tbody></table> 
<p>在上面的示例中，PL SYSREF 必须延迟到至少在 PL 时钟的上升沿之后 0.285 ns 到达，以确保满足保持要求。 对于每个新设计，或当设计发生更改时，应运行 report_datasheet 步骤以重新评估设置和保持要求。 如果 RF-ADC 和 RF-DAC 在不同的 AXI4-Stream 时钟频率下工作，则可以使用下图所示的电路来捕获 PL SYSREF。</p> 
<p><img src="https://images2.imgbox.com/0c/c4/W7WzpOrJ_o.png" alt="image-20220727113727127"></p> 
<p>在这里，时钟网络去偏斜 MMCM 用于将 PL 时钟的频率合成到所需的速率。 如果需要跨多个芯片的 MTS，PL 时钟必须是 RF-ADC 和 RF-DAC AXI4-Stream 时钟的公倍数或约数（前提是它与整数值相关（例如，1/8、1 /4、1/2、1x、2x、4x、8x))。 此外，PL SYSREF 频率必须是系统中所有时钟的公共约数。</p> 
<h3><a id="_109"></a>数字特征同步</h3> 
<p>同步完成后，时钟的公共状态在所有瓦片之间共享。 使用动态更新事件的数字数据路径功能也可以使用相同的同步基础设施。这方面的一个例子是构成 DDC 和 DUC 链中精细混频器功能的 NCO。NCO 设置可以使用 SYSREF 在多个块和多个RFSoC 上同时应用。 每个 NCO 都支持频率和相位的动态设置，并将更改应用于 SYSREF 或其他更新事件。</p> 
<p>同样，有一个选项可以在 SYSREF 或其他更新事件上重置 NCO 的相位。对于单块同步，块事件可用于同步块内的 NCO。对于多图块同步，应使用 SYSREF 事件。</p> 
<h3><a id="_115"></a>模拟同步</h3> 
<h4><a id="_SYSREF__117"></a>模拟 SYSREF 捕获/接收</h4> 
<p>RF-DAC tile 0 中的模拟 SYSREF 接收器设计用于捕获输入引脚的上升沿并生成同步脉冲，该同步脉冲以平衡的方式在内部分配给所有 RF-DAC 和 RF - ADC 用于 MTS 功能和动态更新事件触发功能的瓦片。MTS 功能需要一个连续的模拟 SYSREF 时钟，该时钟在 MTS 程序调用期间生成连续的同步脉冲序列。 另一方面，动态更新事件触发功能仅使用事件触发后检测到的第一个上升沿（请求事件更新）。 使用相应的 API 函数调用完成的布防应该在没有看到任何同步脉冲生成的情况下完成。否则，一些块将被锁定在新的更新值中，而其他块则不会。</p> 
<p>因此，事件的排序和模拟 SYSREF 波形必须遵循以下指导，才能正确操作这两个功能中的每一个。 为简化某些时钟设计的实现，API 函数调用 XRFdc_MTS_Sysref_Config 可用于启用和禁用模拟 SYSREF 接收器，从而提供一种使 SYSREF 同步脉冲间隙的方法。 请注意，此 API 函数不是定时函数，因此不容易跨多个设备同步。 因此，API XRFdc_MTS_Sysref_Config 并非仅用于在多个设备之间同步 SYSREF 的第一个上升沿。</p> 
<h4><a id="_SYSREF__123"></a>模拟 SYSREF 交流和直流耦合</h4> 
<p>模拟 SYSREF 支持交流和直流耦合。 在交流耦合模式下，模拟 SYSREF 接收器在输出模拟 SYSREF 时钟的关闭状态和时钟的初始开启期间对噪声毛刺很敏感。 在这些时间期间，由于毛刺，接收器的不可预测性会产生同步脉冲。 因此，您必须在启用 SYSREF 接收器之前让时钟稳定下来，以避免错误触发事件。</p> 
<p>如果模拟 SYSREF 发送器在关闭时保持在已知的逻辑状态，则在直流耦合模式下运行有可能避免这些毛刺状态。 具有脉冲功能的时钟输出，例如 TI LMK04826 时钟器件，能够按需生成可预测的脉冲。 如果需要跨多个设备使用模拟 SYSREF 的动态更新事件，则需要这样做； 所有准备更新的设备都需要相同的上升沿。</p> 
<h3><a id="MTS_Sequencing_129"></a>MTS Sequencing</h3> 
<p>为 AC 或 DC 耦合的单个或多个设备执行同步的主序列。以下流程图显示了执行同步的主序列。</p> 
<p><img src="https://images2.imgbox.com/97/a6/c5BZFg4s_o.png" alt="image-20220727114523604"></p> 
<p>以下步骤更详细地反映了主序列流程图并提供了 API 使用示例：</p> 
<ol><li> <p>在连续时钟模式下启用 PL SYSREF 和模拟 SYSREF 时钟。</p> </li><li> <p>等待时钟稳定，通常以微秒 (µs) 为单位，具体取决于所使用的时钟设备。</p> </li><li> <p>如果不需要或未知确定性延迟，则以目标延迟运行 RF-ADC 和/或 RF-DAC MTS API 函数，并将目标延迟设置为 -1。 下面给出了一个同步 DAC tile 0 和 1 的示例：</p> </li></ol> 
<pre><code class="prism language-c"><span class="token keyword">int</span> status_dac<span class="token punctuation">;</span>
XRFdc_MultiConverter_Sync_Config DAC_Sync_Config<span class="token punctuation">;</span> <span class="token comment">// Declare DAC MTS Settings struct</span>
<span class="token function">XRFdc_MultiConverter_Init</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>DAC_Sync_Config<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Initialize DAC MTS Settings</span>
DAC_Sync_Config<span class="token punctuation">.</span>Tiles <span class="token operator">=</span> <span class="token number">0x3</span><span class="token punctuation">;</span> <span class="token comment">// Tiles to sync bit-mask: DAC tiles 0 and 1</span>
DAC_Sync_Config<span class="token punctuation">.</span>Target_Latency <span class="token operator">=</span> <span class="token number">296</span><span class="token punctuation">;</span> <span class="token comment">// Target latency = 280 (measured value) + 16 (margin), set to -1 if unknown</span>
status_dac<span class="token operator">=</span><span class="token function">XRFdc_Multiconverter_Sync</span><span class="token punctuation">(</span>RFdcInstPtr<span class="token punctuation">,</span>XRFDC_DAC_TILE<span class="token punctuation">,</span><span class="token operator">&amp;</span>DAC_Sync_Config<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Run Multi-Tile-Sync for the DAC Group</span>
</code></pre> 
<ol start="4"><li>等待API返回值完成。</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span>status_dac<span class="token operator">!=</span>XRFDC_MTS_OK<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>Execute error code<span class="token punctuation">;</span><span class="token punctuation">}</span> and Report details on <span class="token function">synchronization</span> <span class="token punctuation">(</span>optional<span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token operator">&amp;</span>DAC_Sync_Config<span class="token punctuation">.</span>Tiles<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token function">XRFdc_GetInterpolationFactor</span><span class="token punctuation">(</span>RFdcInstPtr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>factor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token function">xil_printf</span><span class="token punctuation">(</span><span class="token string">" DAC%d: Latency(T1) =%3d, Adjusted Delay (T%d) =%3d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> DAC_Sync_Config<span class="token punctuation">.</span>Latency<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> DAC_Sync_Config<span class="token punctuation">.</span>Offset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="5"><li> <p>根据用例同步数字功能（混频器设置、NCO 相位复位、QMC 和/或粗略延迟）：</p> 
  <ul><li> <p>用例 1：具有交流或直流耦合的单器件 SYSREF。</p> </li><li> <p>用例2：具有直流耦合的多个设备SYSREF。</p> </li></ul> </li><li> <p>可以禁用外部 PL SYSREF 和模拟 SYSREF 时钟（可选）。</p> </li></ol> 
<h4><a id="_1_AC__DC__SYSREF__171"></a>用例 1：使用带有 AC 或 DC 耦合的单个设备的 SYSREF 同步数字功能</h4> 
<ol><li>使用 API 命令禁用模拟 SYSREF 接收器。</li></ol> 
<pre><code class="prism language-c">SysRefEnable <span class="token operator">=</span> <span class="token number">0</span>
status_dac<span class="token operator">|=</span><span class="token function">XRFdc_MTS_Sysref_Config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>InstancePtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DACSyncConfigPtr<span class="token punctuation">,</span><span class="token operator">&amp;</span>ADCSyncConfigPtr<span class="token punctuation">,</span> SysRefEnable<span class="token punctuation">)</span>  
</code></pre> 
<ol start="2"><li> <p>启动混频器设置、NCO 相位复位、QMC 和/或粗略延迟。</p> <pre><code class="prism language-c">XRFdc_Mixer_Settings Mixer_Settings<span class="token punctuation">;</span> <span class="token comment">// declare mixer settings struct</span>
u32 Type <span class="token operator">=</span> XRFDC_DAC_TILE<span class="token punctuation">;</span>
u32 Tile_Id <span class="token punctuation">;</span>
u32 Block_Id <span class="token punctuation">;</span>
u32 Mixer_Settings<span class="token punctuation">.</span>EventSource <span class="token operator">=</span> XRFDC_EVNT_SRC_SYSREF<span class="token punctuation">;</span><span class="token comment">// it is assumed other Mixer settings have been previously assigned in the user code</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Tile_Id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> Tile_Id <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> Tile_Id<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>Block_Id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> Block_Id <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> Block_Id<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">XRFdc_SetMixerSettings</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RFdcInst<span class="token punctuation">,</span> Type<span class="token punctuation">,</span> Tile_Id<span class="token punctuation">,</span> Block_Id<span class="token punctuation">,</span><span class="token operator">&amp;</span>Mixer_Settings<span class="token punctuation">)</span><span class="token punctuation">;</span>
        status_dac <span class="token operator">|=</span> <span class="token function">XRFdc_ResetNCOPhase</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>RFdcInst<span class="token punctuation">,</span>Type<span class="token punctuation">,</span>Tile_Id<span class="token punctuation">,</span>Block_Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//note that Coarse mixer and QMC could also be part of this for loop.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</code></pre> </li><li> <p>等待 API 调用成功返回，确保所有寄存器写入均已完成。</p> </li></ol> 
<pre><code class="prism language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span>status_dac<span class="token operator">!=</span>XST_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>Execute error code<span class="token punctuation">;</span><span class="token punctuation">}</span> 
</code></pre> 
<ol start="4"><li>在连续模式下启用模拟 SYSREF 时钟并确保该时钟稳定。</li><li>使用 API 命令启用模拟 SYSREF 接收器。</li></ol> 
<pre><code class="prism language-c">SysRefEnable <span class="token operator">=</span> <span class="token number">1</span>
status_dac<span class="token operator">|=</span><span class="token function">XRFdc_MTS_Sysref_Config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>InstancePtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DACSyncConfigPtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ADCSyncConfigPtr<span class="token punctuation">,</span> SysRefEnable<span class="token punctuation">)</span> 
</code></pre> 
<ol start="6"><li>等待足够长的时间以确保检测到上升沿，此时将开始更新。</li><li>使用 API 命令禁用模拟 SYSREF 接收器。</li></ol> 
<pre><code class="prism language-c">SysRefEnable <span class="token operator">=</span> <span class="token number">0</span> 
status_dac<span class="token operator">|=</span><span class="token function">XRFdc_MTS_Sysref_Config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>InstancePtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DACSyncConfigPtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ADCSyncConfigPtr<span class="token punctuation">,</span> SysRefEnable<span class="token punctuation">)</span> 
</code></pre> 
<ol start="8"><li>禁用外部模拟 SYSREF 时钟（可选）。</li></ol> 
<p><img src="https://images2.imgbox.com/be/54/XS03KQDG_o.png" alt="image-20220727131908716"></p> 
<h4><a id="_2_SYSREF__223"></a>用例 2：使用带有直流耦合的多个器件的 SYSREF 同步数字功能</h4> 
<p>需要直流耦合和脉冲 SYSREF 时钟。</p> 
<ol><li> <p>将时钟发生器设备编程为使用脉冲 SYSREF 模式； 置于空闲状态（不产生脉冲）。</p> </li><li> <p>等待模拟时钟稳定。</p> </li><li> <p>为所有涉及的设备启用模拟 SYSREF 接收器（此时应该没有检测到脉冲）。</p> <pre><code class="prism language-c"><span class="token comment">// Execute XRFdc_MTS_Sysref_Config on all devices (for loop is pseudo code).</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>Device_Id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> Device_Id <span class="token operator">&lt;</span> NumberOfDevices<span class="token punctuation">;</span> Device_Id<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    SysRefEnable <span class="token operator">=</span> <span class="token number">1</span>
    status_dac<span class="token operator">|=</span><span class="token function">XRFdc_MTS_Sysref_Config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>InstancePtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DACSyncConfigPtr<span class="token punctuation">,</span><span class="token operator">&amp;</span>ADCSyncConfigPtr<span class="token punctuation">,</span> SysRefEnable<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>在所有设备上执行命令以启动混频器设置、NCO 相位重置、QMC 和/或粗略延迟（for 循环是伪代码）。</p> </li></ol> 
<pre><code>for (Device_Id = 0; Device_Id &lt; NumberOfDevices; Device_Id++ ) {
	status_dac |=XRFdc_SetMixerSettings(&amp;RFdcInst, Type, Tile_Id, Block_Id,&amp;Mixer_Settings);
	status_dac |= XRFdc_ResetNCOPhase(&amp;RFdcInst,Type, Tile_Id,Block_Id);
	//note that Coarse mixer and QMC could also be part of this for loop.
}  
</code></pre> 
<ol start="5"><li>等待 API 调用成功返回，以确保所有寄存器写入都已完成。</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">if</span> <span class="token punctuation">(</span>status_dac<span class="token operator">!=</span>XST_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>Execute error code<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> 
<ol start="6"><li> <p>从模拟 SYSREF 向所有相关设备发出一个同步脉冲。</p> </li><li> <p>等待足够长的时间以确保检测到上升沿； 此时更新开始。</p> </li><li> <p>使用 API 命令禁用模拟 SYSREF 接收器。</p> </li></ol> 
<pre><code class="prism language-c"><span class="token keyword">for</span> <span class="token punctuation">(</span>Device_Id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> Device_Id <span class="token operator">&lt;</span> NumberOfDevices<span class="token punctuation">;</span> Device_Id<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	SysRefEnable <span class="token operator">=</span> <span class="token number">0</span>
	status_dac<span class="token operator">|=</span><span class="token function">XRFdc_MTS_Sysref_Config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>InstancePtr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DACSyncConfigPtr<span class="token punctuation">,</span><span class="token operator">&amp;</span>ADCSyncConfigPtr<span class="token punctuation">,</span> SysRefEnable<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5f/5e/Xuu9Cf3q_o.png" alt="image-20220727133238059"></p> 
<h3><a id="_SYSREF_3__272"></a>使用实时信号门控模拟 SYSREF（第 3 代）</h3> 
<p>在前面的 MTS 实现部分中，某些 API 用于门控模拟 SYSREF 信号，或者当某些动态事件（即 NCO 频率）时需要一次性模拟 SYSREF 信号 需要同时更新。</p> 
<p>在第 3 代中，引入了两组实时信号 dacX_sysref_gate 和 adcX_sysref_gate，用于片上模拟 SYSREF 门控。对于单芯片用例，这些实时信号可以替代 SYSREF 门控 API。 对于跨多个 RFSoC 的 MTS，所有相关的 SYSREF 门控信号都应首先断言以门控模拟 SYSREF 输入，等待所有更新被启用，然后同时解除断言。 因此，模拟 SYSREF 的下一个上升沿将触发准备好的动态更新。 在此设计中，所有相关的 SYSREF 门控信号必须在RFSoC 的内部和外部进行良好对齐。 通过这种设计，SYSREF 时钟可以是交流或直流耦合的。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bcbe147173b39de0e5436c3ec118d572/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">重复性的计算公式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/419aa73004872cd8f0743508a3e73455/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">yaml文件配置读取不到on： true，结果是yaml的语法忘记了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>