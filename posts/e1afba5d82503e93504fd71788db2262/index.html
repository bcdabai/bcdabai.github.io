<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于Hadoop搭建HA集群网盘系统 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于Hadoop搭建HA集群网盘系统" />
<meta property="og:description" content="Hadoop云盘项目总结 0. 项目介绍 介绍视频：
基于Hadoop搭建HA高可用网盘系统
视频地址： B站 搭建过程： 我的搭建过程 小组成员的搭建过程 项目地址待完善后会发出来 技术栈:HDFS、Sqoop、Flume、Ganglia、Azkaban、Zookeeper、Redis、Nginx、Docker、Vue-Cli **实现功能：**使用 Hadoop 搭建 HA 集群实现网盘系统，前端采用 vue-cli，后端采用 SpringBoot。实现的功能有：用户上 传下载文件；通过 MapReduce 清洗、挖掘、分析用户数据并生成报表；通过 Ganglia 监控集群状态；使用 Azkaban 进行定时调度；使用 Java ForkJoin 框架搭建 RSS 高性能爬虫，通过布隆过滤器过滤重复信息
项目难点：
由于项目在公网上搭建，项目前期对 Hadoop 集群各种通信端口不够熟悉，导致集群通信失败用户上传相同文件时会出现重复上传现象。通过布隆过滤器过滤相同文件，通过构建用户文档树映射用户路径 和真实路径，将相同文件移至共享文件区，用户上传和删除行为仅做逻辑实现，不做业务实现集群中数据清洗、挖掘、分析的 MR 任务过多，难以控制。通过引入 Azkaban 统一管理集群中的 Flume、Sqoop 和 MR 任务，并进行定时调度 贴一张集群拓扑图：
在线地址（租用的四台云服务器，已经退了，不用访问了）：
https://kdocs.cn/l/cod7zXmDPz98
1. 循环引用导致无意识的递归(java.lang.StackOverflowError)问题 问题描述：在构建用户文档树的时候，采取链表双向指针的方式，分别指向上一个和下一个结点，导致无意识的循环引用，然后报StackOverflowError
问题产生原因：在Java中的每个类从根本上都是继承自Object，标准容器类自然也不例外，因此容器类都有toString()方法，并且重写了该方法，使得它生成的String结果能够表达容器本身，以及容器所包含的对象.例如ArrayList.toString()，它会遍历ArrayList中包含的所有对象，调用没个元素的toString()方法。而我的集合类本身会循环引用，最终导致无限递归
**解决方法：**将集合类由继承改为组合，内部维护一个List；修改双向引用为单向，仅指向下一个结点，将根结点保存在用户的属性中，结点的遍历从根结点开始；重写集合类的toString、equals、hashCode方法，不让其遍历整个集合
测试结果：经测试，自定义的文档树，有良好的程序健壮性和可拓展性，使用黑白测试均通过，文档树构建（showTree方法）如下
├─dir ├─dir2 ├─dir3 │ ├─xx.java │ ├─dir2 │ │ ├─dir3 │ │ ├─dir4 │ │ ├─dir5 │ │ ├─dir6 │ │ │ ├─xx2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e1afba5d82503e93504fd71788db2262/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-08T09:58:10+08:00" />
<meta property="article:modified_time" content="2022-07-08T09:58:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于Hadoop搭建HA集群网盘系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Hadoop_0"></a>Hadoop云盘项目总结</h2> 
<h3><a id="0__2"></a>0. 项目介绍</h3> 
<p><strong>介绍视频：</strong></p> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="hyFfs285-1657205184849" frameborder="0" src="https://player.bilibili.com/player.html?aid=343174582" allowfullscreen="true" data-mediaembed="bilibili"></iframe> 
 <p>基于Hadoop搭建HA高可用网盘系统</p> 
</div> 
<br> 视频地址： 
<a href="https://www.bilibili.com/video/BV1s94y1X7sN?spm_id_from=333.337.search-card.all.click&amp;vd_source=477f38b86644f8114e4b91507bc9c26c" rel="nofollow">B站</a> 
<br> 搭建过程： 
<a href="%E6%88%91%E7%9A%84%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B" rel="nofollow">我的搭建过程</a> 
<a href="https://wiki.zhulinz.top/#/5-%E9%85%8D%E7%BD%AE/1%E3%80%81Hadoop%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE" rel="nofollow">小组成员的搭建过程</a> 
<br> 项目地址待完善后会发出来 
<br> 
<code>技术栈:</code>HDFS、Sqoop、Flume、Ganglia、Azkaban、Zookeeper、Redis、Nginx、Docker、Vue-Cli 
<p></p> 
<p>**实现功能：**使用 Hadoop 搭建 HA 集群实现网盘系统，前端采用 vue-cli，后端采用 SpringBoot。实现的功能有：用户上 传下载文件；通过 MapReduce 清洗、挖掘、分析用户数据并生成报表；通过 Ganglia 监控集群状态；使用 Azkaban 进行定时调度；使用 Java ForkJoin 框架搭建 RSS 高性能爬虫，通过布隆过滤器过滤重复信息</p> 
<p>项目难点：</p> 
<ol><li>由于项目在公网上搭建，项目前期对 Hadoop 集群各种通信端口不够熟悉，导致集群通信失败</li><li>用户上传相同文件时会出现重复上传现象。通过布隆过滤器过滤相同文件，通过构建用户文档树映射用户路径 和真实路径，将相同文件移至共享文件区，用户上传和删除行为仅做逻辑实现，不做业务实现</li><li>集群中数据清洗、挖掘、分析的 MR 任务过多，难以控制。通过引入 Azkaban 统一管理集群中的 Flume、Sqoop 和 MR 任务，并进行定时调度</li></ol> 
<p><strong>贴一张集群拓扑图：</strong></p> 
<p><img src="https://images2.imgbox.com/6b/ee/i7kn1lad_o.png" alt="image-20220707171129116"></p> 
<p>在线地址（租用的四台云服务器，已经退了，不用访问了）：</p> 
<p>https://kdocs.cn/l/cod7zXmDPz98</p> 
<h3><a id="1_javalangStackOverflowError_29"></a>1. 循环引用导致无意识的递归(java.lang.StackOverflowError)问题</h3> 
<p><strong>问题描述</strong>：在构建用户文档树的时候，采取链表双向指针的方式，分别指向上一个和下一个结点，导致无意识的循环引用，然后报StackOverflowError</p> 
<p><strong>问题产生原因</strong>：在Java中的每个类从根本上都是继承自Object，标准容器类自然也不例外，因此容器类都有toString()方法，并且重写了该方法，使得它生成的String结果能够表达容器本身，以及容器所包含的对象.例如ArrayList.toString()，它会遍历ArrayList中包含的所有对象，调用没个元素的toString()方法。而我的集合类本身会循环引用，最终导致无限递归</p> 
<p>**解决方法：**将集合类由继承改为组合，内部维护一个List；修改双向引用为单向，仅指向下一个结点，将根结点保存在用户的属性中，结点的遍历从根结点开始；重写集合类的<code>toString、equals、hashCode</code>方法，不让其遍历整个集合</p> 
<p><strong>测试结果</strong>：经测试，自定义的文档树，有良好的程序健壮性和可拓展性，使用黑白测试均通过，文档树构建（showTree方法）如下</p> 
<pre><code class="prism language-css"> ├─dir
 ├─dir2
 ├─dir3
 │    ├─xx.java
 │    ├─dir2
 │    │    ├─dir3
 │    │    ├─dir4
 │    │    ├─dir5
 │    │    ├─dir6
 │    │    │    ├─xx2.java
 │    │    │    ├─xx2.java
</code></pre> 
<h3><a id="2__53"></a>2. 日志记录和用户鉴权</h3> 
<blockquote> 
 <p>后端用户鉴权</p> 
</blockquote> 
<p><strong>问题描述</strong>：采用传统的AOP进行切面时灵活性不够，无法对具体的接口数据进行记录</p> 
<p><strong>问题产生原因</strong>：通常使用的AOP不能具体记录接口的行为，不能自定义接口的行为，也业务耦合性不高</p> 
<p>**解决方法：**自定义日志注解，手动标记每个接口的具体行为，并设置横切点统一进行用户鉴权，核心代码为：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 对包含注解的请求进行拦截
 */</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"@annotation(cn.hnit.annotation.SysLog)"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logPointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 后置通知 用于拦截操作，在方法返回后执行
 *
 * @param joinPoint 切点
 */</span>
<span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>pointcut <span class="token operator">=</span> <span class="token string">"logPointCut()"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAfterReturn</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">saveLog</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 拦截异常操作，有异常时执行
 */</span>
<span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"logPointCut()"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"e"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAfterThrow</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">saveLog</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>前端用户鉴权</p> 
</blockquote> 
<p>每次请求都会带上token</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">"https://hadoop.fengxianhub.top/api"</span><span class="token punctuation">,</span> <span class="token comment">// 请求的路径</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token comment">// request timeout</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token string">"access-control-allow-origin"</span><span class="token punctuation">,</span> <span class="token comment">// 跨域问题</span>
    <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//所有请求都必须带上token</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>使用vuex进行组件间通信，并保持用户的状态</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">sidebar</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>sidebar<span class="token punctuation">,</span>
  <span class="token function-variable function">device</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>device<span class="token punctuation">,</span>
  <span class="token function-variable function">token</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">,</span>
  <span class="token function-variable function">avatar</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>avatar<span class="token punctuation">,</span>
  <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>uname<span class="token punctuation">,</span>
  <span class="token function-variable function">roles</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>roles <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">permission_routes</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> getters<span class="token punctuation">;</span>
</code></pre> 
<p>每次路由前都要检查用户权限</p> 
<pre><code class="prism language-javascript">router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// start progress bar</span>
  NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// set page title</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">;</span>

  <span class="token comment">// determine whether the user has logged in</span>
  <span class="token keyword">const</span> hasToken <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 判断是否存在token,没有就重新登陆</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasToken<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">"/login"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// if is logged in, redirect to the home page</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// determine whether the user has obtained his permission roles through getInfo</span>
      <span class="token keyword">const</span> hasRoles <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>roles <span class="token operator">&amp;&amp;</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>roles<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//这里指的是src/store/getters.js的roles</span>
      <span class="token comment">//判断是否已经有roles了</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hasRoles<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// get user info</span>
          <span class="token comment">// note: roles must be a object array! such as: ['admin'] or ,['developer','editor']</span>
          <span class="token comment">//获取roles</span>
          <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> roles <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">"user/getInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第一步</span>

          <span class="token comment">// generate accessible routes map based on roles</span>
          <span class="token comment">//获取通过权限验证的路由</span>
          <span class="token keyword">const</span> accessRoutes <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
            <span class="token string">"permission/generateRoutes"</span><span class="token punctuation">,</span>
            roles
          <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第二步</span>
          <span class="token comment">//更新加载路由</span>
          router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_routes<span class="token punctuation">;</span> <span class="token comment">//第三步</span>
          <span class="token comment">// dynamically add accessible routes</span>
          router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>accessRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// hack method to ensure that addRoutes is complete</span>
          <span class="token comment">// set the replace: true, so the navigation will not leave a history record</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>to<span class="token punctuation">,</span> <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// remove token and go to login page to re-login</span>
          <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">"user/resetToken"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error <span class="token operator">||</span> <span class="token string">"Has Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/login?redirect=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>to<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* has no token*/</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>whiteList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// in the free login whitelist, go directly</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// other pages that do not have permission to access are redirected to the login page.</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/login?redirect=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>to<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>根据权限过滤路由</p> 
<pre><code class="prism language-javascript"><span class="token comment">/**
 * Use meta.role to determine if the current user has permission
 * @param roles
 * @param route
 */</span>
<span class="token comment">//匹配权限</span>
<span class="token keyword">function</span> <span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token parameter">roles<span class="token punctuation">,</span> route</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>roles<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> roles<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">role</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Filter asynchronous routing tables by recursion
 * @param routes asyncRoutes
 * @param roles
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span><span class="token parameter">routes<span class="token punctuation">,</span> roles</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> tmp <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>route <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasPermission</span><span class="token punctuation">(</span>roles<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        tmp<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>children<span class="token punctuation">,</span> roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_Hadoop_226"></a>3. Hadoop集群通信问题</h3> 
<p><strong>问题描述</strong>：由于本项目Hadoop集群采用四台2核4G云服务搭建，公网环境复杂，不能关闭防火墙，因此只开启常规端口（8020、50070），在上传数据时发现会上传失败</p> 
<p><strong>问题产生原因</strong>：向集群发起上传文件的请求是发送给namenode的，但是真正上传的对象是datanode，具体由namenode提供，此外集群同步数据是通过50010端口进行的，这个端口的设置在配置文件中并没有很好的体现，导致端口没有开启报异常</p> 
<p>**解决方法：**通过查看datanode报错日志确定是网络通信问题导致，进一步减小问题范围，最终找到解决方案</p> 
<h3><a id="4__234"></a>4. 业务日志分析</h3> 
<pre><code class="prism language-java"><span class="token number">255</span><span class="token punctuation">,</span>lijie<span class="token punctuation">,</span><span class="token number">2022</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">47.0</span><span class="token punctuation">,</span><span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.71</span><span class="token punctuation">,</span>获取用户信息<span class="token punctuation">,</span>success<span class="token punctuation">,</span><span class="token class-name">Firefox</span><span class="token punctuation">,</span><span class="token class-name">Windows</span> <span class="token number">10</span> or <span class="token class-name">Windows</span> <span class="token class-name">Server</span> <span class="token number">2016</span>
</code></pre> 
<ul><li>先根据用户分组</li><li>统计用户的行为（例如登录多少次、查看用户数据多少次）</li></ul> 
<p>Azkaban任务具体如下：</p> 
<p>先写数据源，再写MapReduce</p> 
<p>start.job</p> 
<pre><code class="prism language-shell"><span class="token comment">#执行脚本</span>
<span class="token comment"># start.job</span>
<span class="token assign-left variable">type</span><span class="token operator">=</span>command
<span class="token assign-left variable">command</span><span class="token operator">=</span>sqoop <span class="token function">import</span> --connect jdbc:mysql://localhost:3306/sqoop?serverTimezone<span class="token operator">=</span>UTC --username lijie --table user_logs --num-mappers <span class="token number">3</span> --target-dir /logs/user_logs/user_log2 --delete-target-dir
</code></pre> 
<p>mapreduce：</p> 
<pre><code class="prism language-shell"><span class="token comment">#执行脚本</span>
<span class="token comment"># mapreduce.job</span>
<span class="token assign-left variable">type</span><span class="token operator">=</span>command
<span class="token assign-left variable">dependencies</span><span class="token operator">=</span>start
<span class="token assign-left variable">command</span><span class="token operator">=</span>hadoop jar sqoopTest.jar com.fx.service.App /logs/user_logs/user_log /logs/user_logs/user_log_out 
</code></pre> 
<p>sqoop：</p> 
<pre><code class="prism language-java">#执行脚本
# mapreduce<span class="token punctuation">.</span>job
type<span class="token operator">=</span>command
dependencies<span class="token operator">=</span>mapreduce
command<span class="token operator">=</span>sqoop export <span class="token operator">--</span>connect jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop3<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>sqoop <span class="token operator">--</span>username lijie <span class="token operator">-</span>export<span class="token operator">-</span>dir <span class="token operator">/</span>logs<span class="token operator">/</span>user_logs<span class="token operator">/</span>user_log_out<span class="token operator">/</span>part<span class="token operator">-</span>r<span class="token operator">-</span><span class="token number">00000</span> <span class="token operator">--</span>table user_logs_analyse <span class="token operator">--</span>input<span class="token operator">-</span>fields<span class="token operator">-</span>terminated<span class="token operator">-</span>by <span class="token char">'\t'</span> <span class="token operator">--</span>columns<span class="token operator">=</span><span class="token string">"user_name,user_operate,num"</span>
</code></pre> 
<h3><a id="5__278"></a>5. 木马感染</h3> 
<p>查鲨木马的脚本</p> 
<pre><code class="prism language-shell"><span class="token keyword">for</span> <span class="token for-or-select variable">host</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> ./hosts<span class="token variable">)</span></span>
    <span class="token keyword">do</span> 
    if<span class="token punctuation">[</span> -lt <span class="token variable"><span class="token variable">`</span>"host" <span class="token function">ls</span> /var/tmp<span class="token variable">`</span></span><span class="token punctuation">]</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$host</span>有病毒，正在鲨死"</span> 
        <span class="token function">ssh</span> <span class="token string">"<span class="token variable">$host</span>"</span> <span class="token function">rm</span> -rf /var/tmp/*
        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$host</span>的病毒查鲨成功"</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># check hosts is on/Off</span>
<span class="token comment"># by rivers on 20219-23</span>
<span class="token assign-left variable">str</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">host</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> ./hosts<span class="token variable">)</span></span>
<span class="token keyword">do</span> 
	if<span class="token punctuation">[</span><span class="token punctuation">[</span>-z <span class="token variable"><span class="token variable">$(</span><span class="token function">ssh</span> <span class="token string">"<span class="token variable">$host</span>"</span> <span class="token function">ls</span> /var/tmp<span class="token variable">)</span></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    	<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$host</span>"</span>有病毒
	<span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> 
<pre><code class="prism language-java">#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
# check hosts is on<span class="token operator">/</span><span class="token class-name">Off</span>
# by rivers on <span class="token number">20219</span><span class="token operator">-</span><span class="token number">23</span>

<span class="token class-name">Network</span><span class="token operator">=</span>$<span class="token number">1</span>
<span class="token keyword">for</span> <span class="token class-name">Host</span> in $<span class="token punctuation">(</span>seq <span class="token number">1</span> <span class="token number">254</span><span class="token punctuation">)</span>
<span class="token keyword">do</span>
ping <span class="token operator">-</span>c <span class="token number">1</span> $<span class="token class-name">Network</span><span class="token punctuation">.</span>$<span class="token class-name">Host</span> <span class="token operator">&gt;</span> <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> result<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">||</span> result<span class="token operator">=</span><span class="token number">1</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"$result"</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
  echo <span class="token operator">-</span>e <span class="token string">"\033[32;1m$Network.$Host is up \033[0m"</span>
  echo <span class="token string">"$Network.$Host"</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>up<span class="token punctuation">.</span>txt

<span class="token keyword">else</span>
  echo <span class="token operator">-</span>e <span class="token string">"\033[;31m$Network.$Host is down \033[0m"</span>
  echo <span class="token string">"$Network.$Host"</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>down<span class="token punctuation">.</span>txt
fi
done

</code></pre> 
<h3><a id="6_VueEcharts_330"></a>6. Vue中Echarts图表不显示</h3> 
<p><strong>问题描述</strong>：在使用<code>mounted</code>钩子初始化Echarts图表时，刚打开界面可以展示，但是跳到其他的tab再回来的时候，图标就不能显示了</p> 
<p><strong>问题产生原因</strong>：由于将图标包装成一个组件了，父组件给子组件传递的数据不会每次都进行传递</p> 
<p>**解决方法：**使用Vue的<code>Watch</code>监视属性代替<code>mounted</code>钩子，如果数据没有发生改变，不会进行重新渲染</p> 
<pre><code class="prism language-vue">&lt;script&gt;
import * as echarts from "echarts";
require("echarts/theme/macarons");
export default {
  props: ["userLog"],
  data() {
    return {
      className: "Bar",
      height: "400px",
      width: "600px",
      chart: "",
      userLogData: this.userLog,
    };
  },
  watch: {
    userLog(newVal) {
      this.init(newVal);
    },
  },
  methods: {
    init(newVal) {
      //2.初始化
      this.chart = echarts.init(this.$refs.bar);
      //3.配置数据
      let option = {
        xAxis: {
          type: "category",
          data: ["查询网盘", "登录网盘", "上传文件", "下载文件"],
        }, //X轴
        yAxis: { type: "value" }, //Y轴
        series: [
          {
            data: [
              newVal.loginNum,
              newVal.queryNetworkNum,
              newVal.downLoadNum,
              newVal.uploadNum,
            ],
            type: "bar",
          },
        ], //配置项
      };
      // 4.传入数据
      this.chart.setOption(option);
    },
  },
};
&lt;/script&gt;
</code></pre> 
<h3><a id="7__391"></a>7. 对接口幂等性的研究</h3> 
<pre><code class="prism language-shell">+---------+------+------------+
<span class="token operator">|</span> Method  <span class="token operator">|</span> Safe <span class="token operator">|</span> Idempotent <span class="token operator">|</span>
+---------+------+------------+
<span class="token operator">|</span> CONNECT <span class="token operator">|</span> no   <span class="token operator">|</span> no         <span class="token operator">|</span>
<span class="token operator">|</span> DELETE  <span class="token operator">|</span> no   <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
<span class="token operator">|</span> GET     <span class="token operator">|</span> <span class="token function">yes</span>  <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
<span class="token operator">|</span> HEAD    <span class="token operator">|</span> <span class="token function">yes</span>  <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
<span class="token operator">|</span> OPTIONS <span class="token operator">|</span> <span class="token function">yes</span>  <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
<span class="token operator">|</span> POST    <span class="token operator">|</span> no   <span class="token operator">|</span> no         <span class="token operator">|</span>
<span class="token operator">|</span> PUT     <span class="token operator">|</span> no   <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
<span class="token operator">|</span> TRACE   <span class="token operator">|</span> <span class="token function">yes</span>  <span class="token operator">|</span> <span class="token function">yes</span>        <span class="token operator">|</span>
+---------+------+------------+  
</code></pre> 
<p>**解决方案：**分布式锁</p> 
<h3><a id="8_Nginx_410"></a>8. Nginx反向代理问题</h3> 
<p>nginx路径带 / 和不带 带/ 不会有代理地址 不带 会有代理地址 ！！！</p> 
<blockquote> 
 <p>口诀：加不加、不加加</p> 
</blockquote> 
<p><strong>第一种：</strong></p> 
<p>此时，若请求为www.test1.com/test1/test11，匹配到/test1/或/test后，按照“代理地址+访问URL目录”的规则，将会转发到http://127.0.0.1:8080/test1/test11。</p> 
<pre><code class="prism language-java">location <span class="token operator">/</span>test1<span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">;</span>   # http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test1<span class="token operator">/</span>
<span class="token punctuation">}</span>
#或者
location <span class="token operator">/</span>test1 <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>第二种：</strong></p> 
<p>这种情况下，nginx转发会对localion路径下的匹配进行截取，按照**“代理地址+访问URL目录部分去除location匹配目录”**的规则，重新进行拼接后转发</p> 
<pre><code class="prism language-java">#<span class="token number">1.</span>proxy_pass变化
location <span class="token operator">/</span>test1<span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
#www<span class="token punctuation">.</span>test1<span class="token punctuation">.</span>com<span class="token operator">/</span>test1<span class="token operator">/</span>test11   <span class="token operator">-&gt;</span>  http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test11
 
#或者
location <span class="token operator">/</span>test1<span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test2<span class="token operator">/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
#www<span class="token punctuation">.</span>test1<span class="token punctuation">.</span>com<span class="token operator">/</span>test1<span class="token operator">/</span>test11<span class="token operator">-&gt;</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test2<span class="token operator">/</span>test11
 
#<span class="token number">2.l</span>ocation匹配变化
location <span class="token operator">/</span>test1<span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
#www<span class="token punctuation">.</span>test1<span class="token punctuation">.</span>com<span class="token operator">/</span>test1<span class="token operator">/</span>test11<span class="token operator">-&gt;</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span><span class="token function">test2test11</span><span class="token punctuation">(</span>截取了<span class="token operator">/</span>test1<span class="token operator">/</span><span class="token punctuation">,</span>少个‘<span class="token operator">/</span>’<span class="token punctuation">)</span>
 
#或者
location <span class="token operator">/</span>test1 <span class="token punctuation">{<!-- --></span>
    proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
#www<span class="token punctuation">.</span>test1<span class="token punctuation">.</span>com<span class="token operator">/</span>test1<span class="token operator">/</span>test11<span class="token operator">-&gt;</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>test2<span class="token operator">/</span>test11
</code></pre> 
<h3><a id="9__462"></a>9. 小组成员总结</h3> 
<h4><a id="91__464"></a>9.1 集群脚本编写</h4> 
<h4><a id="92__468"></a>9.2 后续需要优化的点</h4> 
<ul><li> <p>并发场景下如何保护共享资源</p> </li><li> <p>上传/下载大文件问题 ===&gt; 断点续传</p> <p>网盘：客户端，桌面端（qt）、netty</p> <p>web：插件，浏览器插件，不能基于http，RPC</p> </li><li> <p>用户目录树完善</p> </li><li> <p>去重优化（文档树那一段）</p> </li><li> <p>在线预览</p> </li><li> <p>优化下载速度</p> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f7c9c5f2e5cc043d90293e489c887ef2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">个人开发者实现微信扫码登录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ada4c73104c21864f133afde87e71ffc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS7 安装 Elastic8.3.1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>