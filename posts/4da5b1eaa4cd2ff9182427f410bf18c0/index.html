<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SonarQube最全安装步骤，教你完美避开所有的坑 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SonarQube最全安装步骤，教你完美避开所有的坑" />
<meta property="og:description" content=" 在经历了一上午的安装和查找资料后，对于这篇文章，其实我更想口吐芬芳。
值的你关注并提升你薪资待遇的面试算法：开源数据结构和算法实践
目标： 安装一个代码扫描工具，对代码进行静态扫描，及时发现潜在的问题。 SonarQube介绍 SonarQube是一个用于管理代码质量的开放平台 可以快速的定位代码中潜在的或者明显的错误。目前支持java,C#,C/C&#43;&#43;,Python,PL/SQL,Cobol,JavaScrip,Groovy等二十几种编程语言的代码质量管理与检测。集成jenkins和DevOps进行CI/CD工作。 七个维度检测代码质量 复杂度分布(complexity):代码复杂度过高将难以理解重复代码(duplications):程序中包含大量复制、粘贴的代码而导致代码臃肿，sonar可以展示源码中重复严重的地方单元测试统计(unit tests):统计并展示单元测试覆盖率，开发或测试可以清楚测试代码的覆盖情况代码规则检查(coding rules):通过Findbugs,PMD,CheckStyle等检查代码是否符合规范注释率(comments):若代码注释过少，特别是人员变动后，其他人接手比较难接手；若过多，又不利于阅读潜在的Bug(potential bugs):通过Findbugs,PMD,CheckStyle等检测潜在的bug结构与设计(architecture &amp; design):找出循环，展示包与包、类与类之间的依赖、检查程序之间耦合度 安装所需环境（所以的坑都在这） 1.Java环境2.数据库3.SonarQube4.Sonar-Scanner 坑 对于上述的4个环境，我并没有说明是什么版本，为什么不说明呢？因为随着 SonarQube 版本的不同，其他三个环境都会变化，先举例几个明显的坑：
1、SonarQube-7.9.1需要 java11 才能启动。2、SonarQube7.9 及以后的版本不再支持 MySQL，SonarQube7.9 之前的版本要求 MYSQL5.6-8.0（左闭右开区间），否则会出现 java.io.IOException: 远程主机强迫关闭了一个现有的连接。3、有些版本（好像是7以后）的SonarQube，只能扫描master分支，不能扫描其他分支。4、据其他博文说明：SQL Server 2016（sql server version需要在12以上，也就是SQL Server 2012及以下版本是不兼容sonarqube 8.2的）5、SonarQube无法连接远程数据库，必须使用localhost。(这个坑有些文章提到，据我实测，不存在，因为我用的就是远程服务器上的sqlserver数据库) 安装大致步骤 1、安装Java11，并配置环境变量（注意：Java11安装后是没有jre的，运行：bin\jlink.exe --module-path jmods --add-modules java.desktop --output jre，会在本目录下生成jre文件夹）2、安装数据库（根据SonarQube的不同版本，选择不同版本的mysql，或者SonarQube7.9 及以后，直接选择sqlserver吧）（我用的是sonarqube-7.9.1 &#43; Microsoft SQL Server 2017 (RTM-CU20) (KB4541283) - 14.0.3294.2 (X64)）3、下载 SonarQube，（切记选择你想要的版本）。4、解压缩sonarqube，进入conf文件，配置sonar.properties，这里的配置文件写错了，都会出现连接问题。 配置文件如下： sonar.jdbc.url=jdbc:sqlserver://xxxxxxxx;databaseName=sonarqube sonar.jdbc.username=sa sonar.jdbc.password=xxxxx sonar.login=admin sonar.password=admin 5、进入sonarqube\sonarqube-7.9.1\bin\windows-x86-64文件夹，双击StartSonar.bat，出现下图就可以了。
使用步骤 如何扫描扫描后如何导出pdf 下载插件，如何这个型号：sonar-pdfreport-plugin-2.1.1.jar放置到sonarqube-7.3\extensions\plugins目录下重启sonar服务服务重启后可以看到新增了一个配置页，PDF report为添加插件后新增页签。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4da5b1eaa4cd2ff9182427f410bf18c0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-26T18:53:36+08:00" />
<meta property="article:modified_time" content="2020-04-26T18:53:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SonarQube最全安装步骤，教你完美避开所有的坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在经历了一上午的安装和查找资料后，对于这篇文章，其实我更想口吐芬芳。</p> 
<p><strong>值的你关注并提升你薪资待遇的面试算法</strong>：<a href="https://blog.csdn.net/ljfirst/article/details/104446607">开源数据结构和算法实践</a></p> 
<h4><a id="_5"></a>目标：</h4> 
<ul><li>安装一个代码扫描工具，对代码进行静态扫描，及时发现潜在的问题。</li></ul> 
<h4><a id="SonarQube_8"></a>SonarQube介绍</h4> 
<ul><li>SonarQube是一个用于管理代码质量的开放平台 
  <ul><li>可以快速的定位代码中潜在的或者明显的错误。</li><li>目前支持java,C#,C/C++,Python,PL/SQL,Cobol,JavaScrip,Groovy等二十几种编程语言的代码质量管理与检测。</li><li>集成jenkins和DevOps进行CI/CD工作。</li></ul> </li><li>七个维度检测代码质量 
  <ul><li>复杂度分布(complexity):代码复杂度过高将难以理解</li><li>重复代码(duplications):程序中包含大量复制、粘贴的代码而导致代码臃肿，sonar可以展示源码中重复严重的地方</li><li>单元测试统计(unit tests):统计并展示单元测试覆盖率，开发或测试可以清楚测试代码的覆盖情况</li><li>代码规则检查(coding rules):通过Findbugs,PMD,CheckStyle等检查代码是否符合规范</li><li>注释率(comments):若代码注释过少，特别是人员变动后，其他人接手比较难接手；若过多，又不利于阅读</li><li>潜在的Bug(potential bugs):通过Findbugs,PMD,CheckStyle等检测潜在的bug</li><li>结构与设计(architecture &amp; design):找出循环，展示包与包、类与类之间的依赖、检查程序之间耦合度</li></ul> </li></ul> 
<h4><a id="_22"></a>安装所需环境（所以的坑都在这）</h4> 
<ul><li>1.Java环境</li><li>2.数据库</li><li>3.SonarQube</li><li>4.Sonar-Scanner</li></ul> 
<h4><a id="_27"></a>坑</h4> 
<p>对于上述的4个环境，我并没有说明是什么版本，为什么不说明呢？因为随着 SonarQube 版本的不同，其他三个环境都会变化，先举例几个明显的坑：</p> 
<ul><li>1、SonarQube-7.9.1需要 java11 才能启动。</li><li>2、SonarQube7.9 及以后的版本不再支持 MySQL，SonarQube7.9 之前的版本要求 MYSQL5.6-8.0（左闭右开区间），否则会出现 java.io.IOException: 远程主机强迫关闭了一个现有的连接。</li><li>3、有些版本（好像是7以后）的SonarQube，只能扫描master分支，不能扫描其他分支。</li><li>4、据其他博文说明：SQL Server 2016（sql server version需要在12以上，也就是SQL Server 2012及以下版本是不兼容sonarqube 8.2的）</li><li>5、SonarQube无法连接远程数据库，必须使用localhost。(这个坑有些文章提到，据我实测，不存在，因为我用的就是远程服务器上的sqlserver数据库)</li></ul> 
<h4><a id="_34"></a>安装大致步骤</h4> 
<ul><li>1、安装Java11，并配置环境变量（注意：Java11安装后是没有jre的，运行：bin\jlink.exe --module-path jmods --add-modules java.desktop --output jre，会在本目录下生成jre文件夹）</li><li>2、安装数据库（根据SonarQube的不同版本，选择不同版本的mysql，或者SonarQube7.9 及以后，直接选择sqlserver吧）（我用的是sonarqube-7.9.1 + Microsoft SQL Server 2017 (RTM-CU20) (KB4541283) - 14.0.3294.2 (X64)）</li><li>3、下载 <a href="https://www.sonarqube.org/downloads/" rel="nofollow">SonarQube</a>，（切记选择你想要的版本）。</li><li>4、解压缩sonarqube，进入conf文件，配置sonar.properties，这里的配置文件写错了，都会出现连接问题。</li></ul> 
<pre><code class="prism language-java">配置文件如下：
sonar<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>sqlserver<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>xxxxxxxx<span class="token punctuation">;</span>databaseName<span class="token operator">=</span>sonarqube
sonar<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>username<span class="token operator">=</span>sa
sonar<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>password<span class="token operator">=</span>xxxxx
sonar<span class="token punctuation">.</span>login<span class="token operator">=</span>admin
sonar<span class="token punctuation">.</span>password<span class="token operator">=</span>admin
</code></pre> 
<ul><li>5、进入sonarqube\sonarqube-7.9.1\bin\windows-x86-64文件夹，双击StartSonar.bat，出现下图就可以了。<br> <img src="https://images2.imgbox.com/8c/1a/qNNntCC7_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="_50"></a>使用步骤</h4> 
<ul><li>如何扫描</li><li>扫描后如何导出pdf 
  <ul><li>下载插件，如何这个型号：sonar-pdfreport-plugin-2.1.1.jar</li><li>放置到sonarqube-7.3\extensions\plugins目录下</li><li>重启sonar服务</li><li>服务重启后可以看到新增了一个配置页，PDF report为添加插件后新增页签。</li></ul> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fb3054309651b572b2153f00ffd4823d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">支付数据中心架构设计</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7c8d93cb9907c2bb17e54f304354de08/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据库】作业16——第七章： 数据库设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>