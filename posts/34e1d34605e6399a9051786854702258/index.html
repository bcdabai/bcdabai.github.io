<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;:异常、异常的处理方法、C&#43;&#43;常用标准异常 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43;:异常、异常的处理方法、C&#43;&#43;常用标准异常" />
<meta property="og:description" content="关键字：try、catch、throw 程序运行时常会碰到一些异常情况，例如：
- 做除法的时候除数为 0;
- 用户输入年龄时输入了一个负数;
- 用 new 运算符动态分配空间时,空间不够导致无法分配;
- 访问数组元素时,下标越界; - 打开文件读取时,文件不存在 这些异常情况,如果不能发现并加以处理,很可能会导致程序崩溃.
所谓&#34;处理&#34;:
1.可以是给出错误提示信息,然后让程序沿一条不会出错的路径继续执行;
2.也可能是不得不结束程序,但在结束前做一些必要的工作,如将内存中的数据写入文件,关闭打开的文件,释放动态分配的内存空间等
#include &lt;iostream&gt; #include &lt;vector&gt; using namespace std; int main() { int n1 = 12; int n2 = 0; int n3 = 9; //n3 = n1/n2; vector&lt;int&gt; v1; v1.push_back(4); v1.push_back(6); try { v1.at(1); } catch(out_of_range) //常用标准异常 { cout &lt;&lt; &#34;访问越界&#34; &lt;&lt; endl; cout &lt;&lt; &#34;range: &#34; &lt;&lt; &#34;0&#34; &lt;&lt; &#34;~&#34; &lt;&lt; v1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/34e1d34605e6399a9051786854702258/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-13T21:40:56+08:00" />
<meta property="article:modified_time" content="2022-09-13T21:40:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;:异常、异常的处理方法、C&#43;&#43;常用标准异常</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0;text-align:justify;"></h2> 
<h4 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">关键字：try、catch、throw</span></h4> 
<p style="margin-left:0;text-align:justify;"><strong>程序运行时常会碰到一些异常情况，例如：</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  - </strong><strong>做除法的时候除数为 0;</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  - </strong><strong>用户输入年龄时输入了一个负数;</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  - </strong><strong>用 new 运算符动态分配空间时,空间不够导致无法分配;</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  - </strong><strong>访问数组元素时,下标越界; </strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  - </strong><strong>打开文件读取时,文件不存在 </strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  </strong><strong>这些异常情况,如果不能发现并加以处理,很可能会导致程序崩溃.</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  </strong><strong>所谓"处理":</strong></p> 
<p>1.可以是给出错误提示信息,然后让程序沿一条不会出错的路径继续执行;</p> 
<p>2.也可能是不得不结束程序,但在结束前做一些必要的工作,如将内存中的数据写入文件,关闭打开的文件,释放动态分配的内存空间等</p> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

int main()
{
    int n1 = 12;
    int n2 = 0;
    int n3 = 9;
    //n3 = n1/n2;
    vector&lt;int&gt; v1;
    v1.push_back(4);
    v1.push_back(6);
    try
    {
        v1.at(1);
    }
    catch(out_of_range)     //常用标准异常
    {
        cout &lt;&lt; "访问越界" &lt;&lt; endl;
        cout &lt;&lt; "range: " &lt;&lt; "0" &lt;&lt; "~" &lt;&lt; v1.size()-1 &lt;&lt; endl;
    }
    catch(...)
    {
        cout &lt;&lt; "out of range error" &lt;&lt; endl;
    }

    cout &lt;&lt; n3 &lt;&lt; endl;
    return 0;
}
</code></pre> 
<h3 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">处理方法：</span></h3> 
<p style="margin-left:0;text-align:justify;"><strong>  C++ </strong><strong>通过 throw 语句和 try...catch 语句实现对异常的处理</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  throw: </strong><strong>当问题出现时，程序会抛出一个异常.</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  catch: </strong><strong>通过异常处理程序捕获异常.</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>  try: </strong><strong>可能出现异常的代码. 它后面通常跟着一个或多个catch块</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>throw:</strong><strong>该语句拋出一个异常,异常是一个表达式，其值的类型可以是基本类型，也可以是类 </strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     try...catch </strong><strong>语句的语法如下：</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     try {<!-- --></strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>        </strong><strong>语句组</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     }</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     catch(</strong><strong>异常类型) {<!-- --></strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>        </strong><strong>异常处理代码</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     }</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     catch(</strong><strong>异常类型) {<!-- --></strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>        </strong><strong>异常处理代码</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     }</strong></p> 
<p style="margin-left:0;text-align:justify;"><strong>     catch</strong><strong>至少有一个.如果要匹配任意类型,则用catch(...) 一般用到最后位置</strong></p> 
<p>          <span style="background-color:#FFFF00;">try...catch </span><span style="background-color:#FFFF00;">语句的执行过程是：</span></p> 
<p>            1、执行 try 块中的语句，如果执行的过程中没有异常拋出，则不会执行任何catch语句</p> 
<p>            2、如果 try 块执行的过程中拋出了异常，那么拋出异常后立即跳转到第一个“异常类型”和拋出的异常类型匹配的 catch 块中执行（称作异常被该 catch 块“捕获”）</p> 
<p>            3、执行完后再跳转到最后一个 catch 块后面继续执行函数中抛出异常:如果函数内部自己处理了异常try…catch,这个异常就不会抛给调用者;则函数调用后面的代码继续运行。但是如果函数只是抛出异常没有处理,则异常抛给调用者,此函数结束,调用者也去捕获异常了,处理完异常后执行catch之后的代码。</p> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;


class Person
{
public:
    void setAge(int age)
    {
        if(age &lt; 0 || age &gt; 150)
        {
            //throw -1;
            p_age = 0;
            throw "error!!age range is(0~150)";
        }
        cout &lt;&lt; "setage ok" &lt;&lt; endl;
        p_age = age;
    }

    void setNum(int num)
    {
        try
        {
            if(num &lt; 0)
            {
                throw "ERROR!!!!num can't &lt; 0";
            }
        }
        catch(const char *err_msg)
        {
            num = 0;
            cout &lt;&lt; err_msg &lt;&lt; endl;
        }
        cout &lt;&lt; "num: " &lt;&lt; num &lt;&lt; endl;
        p_num = num;
    }

    int getAge(void)
    {
        return p_age;
    }
private:
    string p_name;
    int p_age;
    int p_num;
};

void test01()
{
    Person p1;
    try
    {
        p1.setAge(200);
    }
    catch(int &amp;err_num)
    { 
        cout &lt;&lt; err_num &lt;&lt; endl;
    }
    catch(const char *str)
    {
        cout &lt;&lt; str &lt;&lt; endl;
    }
    catch(...)
    {
        cout &lt;&lt; "other error!!!" &lt;&lt; endl;
    }

    cout &lt;&lt; p1.getAge() &lt;&lt; endl;
}

void test02()
{
    Person p2;
    p2.setNum(-2);
}

int main()
{
    test02();
    return 0;
}
</code></pre> 
<h3 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">C++</span><span style="background-color:#FFFF00;">常用标准异常</span></h3> 
<h4 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">bad_cast</span></h4> 
<p style="margin-left:0;text-align:justify;"><strong>    </strong><strong>在用 dynamic_cast 进行从多态基类对象（或引用）到派生类的引用的强制类型转换时，如果转换是不安全的，则会拋出此异常</strong></p> 
<h4 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">bad_alloc</span></h4> 
<p style="margin-left:0;text-align:justify;"><strong>    </strong><strong>在用 new 运算符进行动态内存分配时，如果没有足够的内存，则会引发此异常</strong></p> 
<h4 style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">out_of_range</span></h4> 
<p style="margin-left:0;text-align:justify;"><strong>    </strong><strong>用 vector 或 string 的 at 成员函数根据下标访问元素时，如果下标越界，则会拋出此异常</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/261222d3dd53e7ea8109d16c1da66ccf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Docker部署Nacos集群</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fd328fb50d5fbe452cb6a04396973422/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mybatis实现联表查询（association实现多对一查询、collection实现一对多查询、级联查询、分步查询）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>