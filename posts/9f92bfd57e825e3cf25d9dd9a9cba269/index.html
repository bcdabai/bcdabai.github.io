<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 实现可拖拽、拖拽组件 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 实现可拖拽、拖拽组件" />
<meta property="og:description" content="描述：
组件仅封装拖拽功能，内容通过#header、#default、#footer插槽 自定义
&lt;template&gt; &lt;div ref=&#34;wrapper&#34; class=&#34;drag-bar-wrapper&#34; &gt; &lt;div ref=&#34;header&#34; class=&#34;drag-bar-header&#34; &gt; &lt;!-- 头部区域 --&gt; &lt;slot name=&#34;header&#34; /&gt; &lt;/div&gt; &lt;div class=&#34;drag-bar-content&#34;&gt; &lt;!-- 主内容区域 --&gt; &lt;slot name=&#34;default&#34; /&gt; &lt;/div&gt; &lt;div class=&#34;drag-bar-footer&#34;&gt; &lt;!-- 底部区域 --&gt; &lt;slot name=&#34;footer&#34; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { wrapperDom: null, headerDom: null, disX: 0, disY: 0, minLeft: 0, maxLeft: 0, minTop: 0, maxTop: 0, prevLeft: 0, prevTop: 0, }; }, methods: { initDrag() { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/9f92bfd57e825e3cf25d9dd9a9cba269/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-14T11:16:33+08:00" />
<meta property="article:modified_time" content="2021-09-14T11:16:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 实现可拖拽、拖拽组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>描述：</strong></p> 
<p style="text-align:center;">        组件仅封装拖拽功能，内容通过#header、#default、#footer插槽 自定义<img alt="" src="https://images2.imgbox.com/9f/ef/JZGv9vQO_o.gif"></p> 
<p> </p> 
<pre><code class="language-html">&lt;template&gt;
  &lt;div
    ref="wrapper"
    class="drag-bar-wrapper"
  &gt;
    &lt;div
      ref="header"
      class="drag-bar-header"
    &gt;
      &lt;!-- 头部区域 --&gt;
      &lt;slot name="header" /&gt;
    &lt;/div&gt;
    &lt;div class="drag-bar-content"&gt;
      &lt;!-- 主内容区域 --&gt;
      &lt;slot name="default" /&gt;
    &lt;/div&gt;
    &lt;div class="drag-bar-footer"&gt;
      &lt;!-- 底部区域 --&gt;
      &lt;slot name="footer" /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      wrapperDom: null,
      headerDom: null,

      disX: 0,
      disY: 0,

      minLeft: 0,
      maxLeft: 0,

      minTop: 0,
      maxTop: 0,

      prevLeft: 0,
      prevTop: 0,
    };
  },
  methods: {
    initDrag() {
      this.wrapperDom = this.$refs.wrapper;
      this.headerDom = this.$refs.header;
      this.headerDom.addEventListener('mousedown', this.onMousedown, false);//点击头部区域拖拽
    },
    onMousedown(e) {
      this.disX = e.clientX - this.headerDom.offsetLeft;
      this.disY = e.clientY - this.headerDom.offsetTop;

      this.minLeft = this.wrapperDom.offsetLeft;
      this.minTop = this.wrapperDom.offsetTop;

      this.maxLeft =
        window.innerWidth - this.minLeft - this.wrapperDom.offsetWidth;
      this.maxTop =
        window.innerHeight - this.minTop - this.wrapperDom.offsetHeight;

      const { left, top } = getComputedStyle(this.wrapperDom, false);
      this.prevLeft = parseFloat(left);
      this.prevTop = parseFloat(top);

      document.addEventListener('mousemove', this.onMousemove, false);
      document.addEventListener('mouseup', this.onMouseup, false);
      document.body.style.userSelect = 'none'; //消除拖拽中选中文本干扰
    },
    onMousemove(e) {
      let left = e.clientX - this.disX;
      let top = e.clientY - this.disY;

      if (-left &gt; this.minLeft) {
        left = -this.minLeft;
      } else if (left &gt; this.maxLeft) {
        left = this.maxLeft;
      }

      if (-top &gt; this.minTop) {
        top = -this.minTop;
      } else if (top &gt; this.maxTop) {
        top = this.maxTop;
      }

      this.wrapperDom.style.left = this.prevLeft + left + 'px';
      this.wrapperDom.style.top = this.prevTop + top + 'px';
    },
    onMouseup() {
      document.removeEventListener('mousemove', this.onMousemove, false);
      document.removeEventListener('mouseup', this.onMouseup, false);
      document.body.style.userSelect = 'auto'; //恢复文本可选中
    },
  },
  mounted() {
    this.initDrag();
  }
};
&lt;/script&gt;

&lt;style scoped&gt;
.drag-bar-wrapper {
  position: fixed;
  z-index: 2;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
}
.drag-bar-header {
  background-color: #eee;
  cursor: move; /*拖拽鼠标样式*/
}
.drag-bar-content {
  background-color: #fff;
}
.drag-bar-footer {
  background-color: #fff;
}
&lt;/style&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fc0714640f4eb235c6f1a990065cf132/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于JDK,JRE,JVM的区别与联系（初步认识）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/994c972971601faa5406e54bb32de71b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux安装golang</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>