<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>redis 配置（单机） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="redis 配置（单机）" />
<meta property="og:description" content="redis 配置（单机） 说明：以下为redis.conf配置说明，可根据关键字在文件中查找。
启动
后台启动：表示退出启动界面仍然运行 ，否则服务随启动界面的关闭而关闭
daemonize no 不是后台启动（默认）
daemonize yes 后台启动
pid
redis以后台进程运行的时候，Redis默认会把pid写入/var/run/redis.pid文件组
pidfile /var/run/redis.pid redis.pid 可以重新命名
端口
指定redis监听端口，默认为6379
port 6379
保护模式
protected-mode yes 开启保护模式，此时需要设置端口和密码，no 所有都可以连接（不安全）
指定redis只接收来自于该IP地址的请求，如果不进行设置，默认将处理所有ip的请求，
bind 127.0.0.1 ------bind 0.0.0.0 等同于不限制ip
密码
requirepass 123456
客户端超时 在客户端空闲N秒后关闭连接， 设置0表示不关闭
timeout 0
健康连接检查 单位是秒
表示将周期性的使用SO_KEEPALIVE检测客户端是否还处于健康状态，避免服务器一直阻塞，官方给出的建议值是300s，如果设置为0，则不会周期性的检测
tcp-keepalive 300
日志 debug 记录很多信息，用于开发和测试
varbose 很多精简的有用信息，不像debug会记录那么多
notice 普通的verbose，常用于生产环境 (默认)
warning 只有非常重要或者严重的信息会记录到日志
loglevel notice
syslog-enabled：是否把日志输出到系统日志中，默认是no
日志文件名称 logfile /var/redis/log/redis_6379.log
数据库数量
默认数量为16 ，默认的数据库是DB 0
databases 16
持久化机制" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/96ede5fbe7a41f1d14c618c87d399be4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-14T11:40:54+08:00" />
<meta property="article:modified_time" content="2020-09-14T11:40:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">redis 配置（单机）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="redis__0"></a>redis 配置（单机）</h3> 
<p>说明：以下为redis.conf配置说明，可根据关键字在文件中查找。<br> <font color="red">启动</font><br> 后台启动：表示退出启动界面仍然运行 ，否则服务随启动界面的关闭而关闭<br> daemonize no 不是后台启动（默认）<br> daemonize yes 后台启动</p> 
<p><font color="red">pid</font><br> redis以后台进程运行的时候，Redis默认会把pid写入/var/run/redis.pid文件组<br> pidfile /var/run/redis.pid redis.pid 可以重新命名</p> 
<p><font color="red">端口</font><br> 指定redis监听端口，默认为6379<br> port 6379</p> 
<p><font color="red">保护模式</font><br> protected-mode yes 开启保护模式，此时需要设置端口和密码，no 所有都可以连接（不安全）<br> 指定redis只接收来自于该IP地址的请求，如果不进行设置，默认将处理所有ip的请求，<br> bind 127.0.0.1 ------bind 0.0.0.0 等同于不限制ip</p> 
<p><font color="red">密码</font><br> requirepass 123456</p> 
<p><font color="red">客户端超时 </font><br> 在客户端空闲N秒后关闭连接， 设置0表示不关闭<br> timeout 0</p> 
<p><font color="red">健康连接检查 </font>单位是秒<br> 表示将周期性的使用SO_KEEPALIVE检测客户端是否还处于健康状态，避免服务器一直阻塞，官方给出的建议值是300s，如果设置为0，则不会周期性的检测<br> tcp-keepalive 300</p> 
<p><font color="red">日志 </font><br> debug 记录很多信息，用于开发和测试<br> varbose 很多精简的有用信息，不像debug会记录那么多<br> notice 普通的verbose，常用于生产环境 <strong>(默认)</strong><br> warning 只有非常重要或者严重的信息会记录到日志<br> loglevel notice<br> syslog-enabled：是否把日志输出到系统日志中，默认是no<br> <font color="red">日志文件名称 </font><br> logfile /var/redis/log/redis_6379.log</p> 
<p><font color="red">数据库数量</font><br> 默认数量为16 ，默认的数据库是DB 0<br> databases 16</p> 
<p><font color="red">持久化机制</font><br> RDB：（<strong>默认</strong>） 数据以快照的方式写入二进制文件中，默认的文件名是dump.rdb<br> AOF：以 Redis 协议的格式来保存，新命令会被追加到文件的末尾<br> 数据允许丢失小部分选RDB，否则AOF，AOF也有可能丢失极少部分，AOF影响redis效率<br> 2种机制区别参考：<a href="https://www.jb51.net/article/121848.htm" rel="nofollow">https://www.jb51.net/article/121848.htm</a><br> appendonly no #no修改为yes则为AOF，AOF和RDB持久性可以同时启用<br> <strong>AOF</strong>：默认文件名appendonly.aof<br> always: 每次操作都会立即写入aof文件中（<strong>效率影响较大</strong>）<br> everysec: 每秒持久化一次(默认配置)<br> no: 不主动进行同步操作，默认30s一次<br> appendfsync everysec</p> 
<p><font color="red">持久化</font><br> 900秒(15分钟)后，如果至少有一个键被改变<br> 300秒后(5分钟)如果至少有10个键被改变<br> 60秒后，如果至少改变了10000个键<br> save 900 1<br> save 300 10<br> save 60 10000（可自行追加，注释所有则不开启持久化）</p> 
<p><font color="red">持久化数据库的文件名</font><br> dbfilename dump.rdb</p> 
<p><font color="red">持久化数据库的文件目录</font><br> dir /usr/local/</p> 
<p><font color="red">最大并发连接</font><br> maxclients 10000</p> 
<p><font color="red">最大内存</font><br> 单位：bytes 字节类型<br> maxmemory 1024000000 1G</p> 
<p><font color="red">内存删除</font><br> 如果达到内存限制了，Redis如何删除key<br> volatile-lru -&gt; 根据LRU算法生成的过期时间来删除。<br> allkeys-lru -&gt; 根据LRU算法删除任何key。<br> volatile-random -&gt; 根据过期设置来随机删除key。<br> allkeys-&gt;random -&gt; 无差别随机删。<br> volatile-ttl -&gt; 根据最近过期时间来删除(辅以TTL)<br> noeviction -&gt; 谁也不删，直接在写操作时返回错误。<br> LRU是最近最少使用的<br> LFU表示使用频率最低<br> maxmemory-policy noeviction</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/095e2b518b400035645071300501c9ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GlusterFS原理及如何配置使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/87876dbd796a5b729f3441c4664c5ff5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IP核</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>