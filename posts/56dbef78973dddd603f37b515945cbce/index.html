<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php中laravel框架中接口开发实战经验总结 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php中laravel框架中接口开发实战经验总结" />
<meta property="og:description" content="一.项目接口实战错误经验总结 1. 逻辑层静态类调用非静态方法报错，如下
Non-static method App\\Services\\Common\\StatisticBusinessService::getLevelUserCarCount() should not be called statically
问题原因:方法定义时没加static
解决方案：
2.变量类型使用错误，如下
问题原因：传了数组，但是罗层里面判断的是字符串
解决方案：修改成传新字段，在加逻辑判断，避免字段相同冲突
二.接口调试的实战经验总结： 1. 使用 Postman 进行接口测试
Postman 是一款非常强大的接口测试工具，可以用来模拟发送请求和接收响应。可以使用 Postman 来测试接口的各种情况，例如正常情况、异常情况、边界情况等等。
2. 使用环境变量进行配置
在进行接口测试时，通常需要切换不同的环境（如开发环境、测试环境、生产环境）和配置参数（如 API 地址、数据库连接信息等）。可以使用 Postman 中的环境变量功能来实现。
3. 使用断言验证结果
在接口测试中，除了验证接口是否能够正常访问和返回正确的数据之外，还需要验证返回的数据是否符合预期。可以使用 Postman 中的断言功能来验证结果。
4. 测试多种情况
在进行接口测试时，应该涵盖尽可能多的情况，例如正常情况、异常情况、边界情况、并发情况等等。通过测试不同的情况，可以发现代码中的潜在问题，并及时进行修复。
5. 记录测试结果和问题
在进行接口测试时，应该记录测试结果和发现的问题。这些记录可以帮助团队更好地追踪和修复问题，并在下一次测试中避免相同的错误。
6. 集成到 CI/CD 工具中
为了保证代码的质量和稳定性，建议将接口测试集成到 CI/CD 工具中。可以使用 Jenkins、GitLab CI 等工具来自动进行接口测试，并及时通知开发人员和运维人员。
三.在 Laravel 框架中进行接口开发时，以下是一些实战经验总结： 使用路由定义接口 在 Laravel 中，可以使用路由来定义接口的访问路径和对应的处理逻辑。建议将接口路由定义在 routes/api.php 文件中，这样可以使代码更加清晰和可维护。
Route::get(&#39;/users&#39;, &#39;UserController@index&#39;); Route::post(&#39;/users&#39;, &#39;UserController@store&#39;); Route::put(&#39;/users/{id}&#39;, &#39;UserController@update&#39;); Route::delete(&#39;/users/{id}&#39;, &#39;UserController@destroy&#39;); 使用控制器处理接口逻辑 建议使用控制器来处理接口的具体逻辑。控制器可以将请求处理、业务逻辑和响应生成等操作封装在一个地方，提高代码的可读性和可维护性。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/56dbef78973dddd603f37b515945cbce/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-25T09:50:33+08:00" />
<meta property="article:modified_time" content="2024-01-25T09:50:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php中laravel框架中接口开发实战经验总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>一.项目接口实战错误经验总结</h4> 
<p>1. 逻辑层静态类调用非静态方法报错，如下</p> 
<p>Non-static method App\\Services\\Common\\StatisticBusinessService::getLevelUserCarCount() should not be called statically<img alt="" height="549" src="https://images2.imgbox.com/94/df/nGUflGj7_o.png" width="1200"></p> 
<p>问题原因:方法定义时没加static<img alt="" height="58" src="https://images2.imgbox.com/d5/1f/CH13PzrL_o.png" width="766"><img alt="" height="237" src="https://images2.imgbox.com/84/b7/9sm4iYS0_o.png" width="615"></p> 
<p>解决方案：<img alt="" height="246" src="https://images2.imgbox.com/a1/f1/ZxBq7uXk_o.png" width="739"></p> 
<p>2.变量类型使用错误，如下</p> 
<p><img alt="" height="511" src="https://images2.imgbox.com/4f/06/75yQzezp_o.png" width="1093">问题原因：传了数组，但是罗层里面判断的是字符串<img alt="" height="159" src="https://images2.imgbox.com/00/3e/QL5Bom2k_o.png" width="385"><img alt="" height="93" src="https://images2.imgbox.com/46/87/Ahu9GyDD_o.png" width="464"></p> 
<p>解决方案：修改成传新字段，在加逻辑判断，避免字段相同冲突</p> 
<p><img alt="" height="163" src="https://images2.imgbox.com/81/83/WJ9qkEBY_o.png" width="439"><img alt="" height="43" src="https://images2.imgbox.com/11/23/ITiBhW9k_o.png" width="933"></p> 
<h4>二.接口调试的实战经验总结：</h4> 
<p>1. 使用 Postman 进行接口测试</p> 
<p>Postman 是一款非常强大的接口测试工具，可以用来模拟发送请求和接收响应。可以使用 Postman 来测试接口的各种情况，例如正常情况、异常情况、边界情况等等。</p> 
<p>2. 使用环境变量进行配置</p> 
<p>在进行接口测试时，通常需要切换不同的环境（如开发环境、测试环境、生产环境）和配置参数（如 API 地址、数据库连接信息等）。可以使用 Postman 中的环境变量功能来实现。</p> 
<p>3. 使用断言验证结果</p> 
<p>在接口测试中，除了验证接口是否能够正常访问和返回正确的数据之外，还需要验证返回的数据是否符合预期。可以使用 Postman 中的断言功能来验证结果。</p> 
<p>4. 测试多种情况</p> 
<p>在进行接口测试时，应该涵盖尽可能多的情况，例如正常情况、异常情况、边界情况、并发情况等等。通过测试不同的情况，可以发现代码中的潜在问题，并及时进行修复。</p> 
<p>5. 记录测试结果和问题</p> 
<p>在进行接口测试时，应该记录测试结果和发现的问题。这些记录可以帮助团队更好地追踪和修复问题，并在下一次测试中避免相同的错误。</p> 
<p>6. 集成到 CI/CD 工具中</p> 
<p>为了保证代码的质量和稳定性，建议将接口测试集成到 CI/CD 工具中。可以使用 Jenkins、GitLab CI 等工具来自动进行接口测试，并及时通知开发人员和运维人员。</p> 
<p></p> 
<h4>三.在 Laravel 框架中进行接口开发时，以下是一些实战经验总结：</h4> 
<ol><li>使用路由定义接口</li></ol> 
<p>在 Laravel 中，可以使用路由来定义接口的访问路径和对应的处理逻辑。建议将接口路由定义在 <code>routes/api.php</code> 文件中，这样可以使代码更加清晰和可维护。</p> 
<pre><code class="hljs">Route::get('/users', 'UserController@index');
Route::post('/users', 'UserController@store');
Route::put('/users/{id}', 'UserController@update');
Route::delete('/users/{id}', 'UserController@destroy');
</code></pre> 
<p></p> 
<ol><li>使用控制器处理接口逻辑</li></ol> 
<p>建议使用控制器来处理接口的具体逻辑。控制器可以将请求处理、业务逻辑和响应生成等操作封装在一个地方，提高代码的可读性和可维护性。</p> 
<pre><code class="hljs">class UserController extends Controller
{
    public function index()
    {
        // 处理获取用户列表的逻辑
    }

    public function store(Request $request)
    {
        // 处理创建新用户的逻辑
    }

    public function update(Request $request, $id)
    {
        // 处理更新用户信息的逻辑
    }

    public function destroy($id)
    {
        // 处理删除用户的逻辑
    }
}
</code></pre> 
<p></p> 
<ol><li>使用请求验证</li></ol> 
<p>在接口开发中，数据的校验是非常重要的一环。Laravel 提供了强大的表单请求验证功能，可以轻松验证请求参数的合法性。</p> 
<pre><code class="hljs">class StoreUserRequest extends FormRequest
{
    public function authorize()
    {
        return true;
    }

    public function rules()
    {
        return [
            'name' =&gt; 'required|string',
            'email' =&gt; 'required|email|unique:users',
            'password' =&gt; 'required|min:6',
        ];
    }
}
</code></pre> 
<p>在控制器中使用请求类来验证请求参数：</p> 
<pre><code class="hljs">public function store(StoreUserRequest $request)
{
    // 参数已经通过验证，可以进行后续操作
}
</code></pre> 
<ol><li>统一响应格式</li></ol> 
<p>为了保持接口响应的统一性和可读性，建议在返回数据时使用统一的响应格式，例如 JSON 格式。可以通过自定义响应宏或使用现有的包（如 DingoAPI）来实现。</p> 
<pre><code class="hljs">return response()-&gt;json([
    'code' =&gt; 200,
    'message' =&gt; 'Success',
    'data' =&gt; $data,
]);
</code></pre> 
<ol><li>使用异常处理</li></ol> 
<p>在接口开发中，异常处理非常重要，可以帮助我们及时捕获并处理代码中的错误。Laravel 提供了异常处理机制，可以通过自定义异常类来处理不同类型的异常情况。</p> 
<pre><code class="hljs">try {
    // 执行代码
} catch (Exception $e) {
    // 处理异常
}
</code></pre> 
<p>可以使用 <code>try-catch</code> 块来捕获异常，并根据实际情况进行处理和返回适当的错误信息。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/02ff363771d076545ca634d51bddbfc7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在Asp.net SignalR与Angular通信添加身份认证（通过jwt）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df3f446e7aedf5271df25ba194089443/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电脑d盘颜色变红怎么恢复？4个方法快速清理空间！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>