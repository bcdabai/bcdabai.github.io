<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot整合Redis以及Redis的原理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring Boot整合Redis以及Redis的原理" />
<meta property="og:description" content="Redis的原理及知识 Redis简介 redis是一个key-value。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hash（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。（来自百度百科）
Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets）与范围查询， bitmaps， hyperloglogs和 地理空间（geospatial）索引半径查询。 Redis 内置了 复制（replication），LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction），事务（transactions）和不同级别的 磁盘持久化（persistence）， 并通过 Redis哨兵（Sentinel）和自动 分区（Cluster）提供高可用性（high availability）。（来自redis中文官方网站）
这里贴上redis中文网地址 http://www.redis.cn/，很好的一个redis学习网站。
Redis特点 Redis将其数据库完全保存在内存中，仅使用磁盘进行持久化。与其它键值数据存储相比，Redis有一组相对丰富的数据类型。Redis可以将数据复制到任意数量的从机中。 Redis优点 异常快 - Redis非常快，每秒可执行大约110000次的设置(SET)操作，每秒大约可执行81000次的读取/获取(GET)操作。支持丰富的数据类型 - Redis支持开发人员常用的大多数数据类型，例如列表，集合，排序集和散列等等。这使得Redis很容易被用来解决各种问题，因为我们知道哪些问题可以更好使用地哪些数据类型来处理解决。操作具有原子性 - 所有Redis操作都是原子操作，这确保如果两个客户端并发访问，Redis服务器能接收更新的值。多实用工具 - Redis是一个多实用工具，可用于多种用例，如：缓存，消息队列(Redis本地支持发布/订阅)，应用程序中的任何短期数据，例如，web应用程序中的会话，网页命中计数等。 Redis安装 因为电脑是Windows系统，这里就介绍一下Windows系统下的安装。linux系统下的安装请另行百度。redis在Windows下的安装十分简单。
下载redis：Redis 没有官方的Windows版本，但是微软开源技术团队（Microsoft Open Tech group）开发和维护着这个 Win64 的版本。所以可以在这里下载releases版本的。网址：https://github.com/MicrosoftArchive/redis/releases。
解压出来的目录： 启动redis：在这个目录下cmd，然后直接redis-server.exe redis.windows.conf，即可启动redis 。 修改密码：在使用之前，先修改一下redis的密码。在先前那个解压目录下，打开redis-cli.exe。
（1）输入config get requirepass可查看当前密码，这里是我已经改过密码之后的。
（2）然后输入 config set requirepass “yourpassword” 可修改redis的密码。
连接redis：这里我是使用的RedisDesktopManager进行连接，这个是一个可视化管理redis的界面工具，下载windows版本的就行，下载网址：https://redisdesktop.com/download
然后在这个工具里可使用redis基本操作，这里有一些我已经添加进去的数据：
Spring Boot集成Redis过程 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b277afec9413122ebd319b814b585b4f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-19T01:57:30+08:00" />
<meta property="article:modified_time" content="2021-03-19T01:57:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot整合Redis以及Redis的原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Redis_0"></a>Redis的原理及知识</h2> 
<h4><a id="Redis_1"></a>Redis简介</h4> 
<blockquote> 
 <p>redis是一个key-value。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hash（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。（来自百度百科）</p> 
</blockquote> 
<blockquote> 
 <p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets）与范围查询， bitmaps， hyperloglogs和 地理空间（geospatial）索引半径查询。 Redis 内置了 复制（replication），LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction），事务（transactions）和不同级别的 磁盘持久化（persistence）， 并通过 Redis哨兵（Sentinel）和自动 分区（Cluster）提供高可用性（high availability）。（来自redis中文官方网站）</p> 
</blockquote> 
<p>这里贴上redis中文网地址 <a href="http://www.redis.cn/" rel="nofollow">http://www.redis.cn/</a>，很好的一个redis学习网站。</p> 
<h4><a id="Redis_9"></a>Redis特点</h4> 
<blockquote> 
 <ul><li>Redis将其数据库完全保存在内存中，仅使用磁盘进行持久化。</li><li>与其它键值数据存储相比，Redis有一组相对丰富的数据类型。</li><li>Redis可以将数据复制到任意数量的从机中。</li></ul> 
</blockquote> 
<h4><a id="Redis_14"></a>Redis优点</h4> 
<blockquote> 
 <ul><li>异常快 - Redis非常快，每秒可执行大约110000次的设置(SET)操作，每秒大约可执行81000次的读取/获取(GET)操作。</li><li>支持丰富的数据类型 - Redis支持开发人员常用的大多数数据类型，例如列表，集合，排序集和散列等等。这使得Redis很容易被用来解决各种问题，因为我们知道哪些问题可以更好使用地哪些数据类型来处理解决。</li><li>操作具有原子性 - 所有Redis操作都是原子操作，这确保如果两个客户端并发访问，Redis服务器能接收更新的值。</li><li>多实用工具 - Redis是一个多实用工具，可用于多种用例，如：缓存，消息队列(Redis本地支持发布/订阅)，应用程序中的任何短期数据，例如，web应用程序中的会话，网页命中计数等。</li></ul> 
</blockquote> 
<h4><a id="Redis_20"></a>Redis安装</h4> 
<p>因为电脑是Windows系统，这里就介绍一下Windows系统下的安装。linux系统下的安装请另行百度。redis在Windows下的安装十分简单。</p> 
<ol><li>下载redis：Redis 没有官方的Windows版本，但是微软开源技术团队（Microsoft Open Tech group）开发和维护着这个 Win64 的版本。所以可以在这里下载releases版本的。网址：<a href="https://github.com/MicrosoftArchive/redis/releases">https://github.com/MicrosoftArchive/redis/releases。</a><br> <img src="https://images2.imgbox.com/15/9e/ILr3glec_o.png" alt="在这里插入图片描述"><br> 解压出来的目录：</li></ol> 
<p><img src="https://images2.imgbox.com/d8/e2/5O5lzSyB_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>启动redis：在这个目录下cmd，然后直接redis-server.exe redis.windows.conf，即可启动redis 。</li></ol> 
<p><img src="https://images2.imgbox.com/db/5b/NwLgg9FE_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li> <p>修改密码：在使用之前，先修改一下redis的密码。在先前那个解压目录下，打开redis-cli.exe。<br> （1）输入config get requirepass可查看当前密码，这里是我已经改过密码之后的。<br> （2）然后输入 config set requirepass “yourpassword” 可修改redis的密码。<br> <img src="https://images2.imgbox.com/e3/77/KwI8XSuf_o.png" alt="在这里插入图片描述"></p> </li><li> <p>连接redis：这里我是使用的RedisDesktopManager进行连接，这个是一个可视化管理redis的界面工具，下载windows版本的就行，下载网址：<a href="https://redisdesktop.com/download" rel="nofollow">https://redisdesktop.com/download</a></p> </li></ol> 
<p><img src="https://images2.imgbox.com/4f/96/mNQYXn5V_o.png" alt="在这里插入图片描述"><br> 然后在这个工具里可使用redis基本操作，这里有一些我已经添加进去的数据：<br> <img src="https://images2.imgbox.com/97/bd/xadag96a_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Spring_BootRedis_45"></a>Spring Boot集成Redis过程</h2> 
<h4><a id="1_pomredis_46"></a>1. 在pom中配置redis的相关依赖包</h4> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>redis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">1.3</span><span class="token number">.8</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="2_applicationymlredis_55"></a>2. application.yml里面配置redis的配置项</h4> 
<pre><code class="prism language-c">spring<span class="token punctuation">:</span>
  datasource<span class="token punctuation">:</span>
        # 驱动配置信息
        url<span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3306</span><span class="token operator">/</span>spring_boot<span class="token operator">?</span>useUnicode<span class="token operator">=</span>true<span class="token operator">&amp;</span>characterEncoding<span class="token operator">=</span>utf8
        username<span class="token punctuation">:</span> root
        password<span class="token punctuation">:</span> root
        type<span class="token punctuation">:</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>DruidDataSource
        driver<span class="token operator">-</span>class<span class="token operator">-</span>name<span class="token punctuation">:</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver

        # 连接池的配置信息
        filters<span class="token punctuation">:</span> stat
        maxActive<span class="token punctuation">:</span> <span class="token number">20</span>
        initialSize<span class="token punctuation">:</span> <span class="token number">1</span>
        maxWait<span class="token punctuation">:</span> <span class="token number">60000</span>
        minIdle<span class="token punctuation">:</span> <span class="token number">1</span>
        timeBetweenEvictionRunsMillis<span class="token punctuation">:</span> <span class="token number">60000</span>
        minEvictableIdleTimeMillis<span class="token punctuation">:</span> <span class="token number">300000</span>
        validationQuery<span class="token punctuation">:</span> select <span class="token string">'x'</span>
        testWhileIdle<span class="token punctuation">:</span> true
        testOnBorrow<span class="token punctuation">:</span> false
        testOnReturn<span class="token punctuation">:</span> false
        poolPreparedStatements<span class="token punctuation">:</span> true
        maxOpenPreparedStatements<span class="token punctuation">:</span> <span class="token number">20</span>
  redis<span class="token punctuation">:</span>
        host<span class="token punctuation">:</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
        port<span class="token punctuation">:</span> <span class="token number">6379</span>
        password<span class="token punctuation">:</span> pass1234
        pool<span class="token punctuation">:</span>
          max<span class="token operator">-</span>active<span class="token punctuation">:</span> <span class="token number">100</span>
          max<span class="token operator">-</span>idle<span class="token punctuation">:</span> <span class="token number">10</span>
          max<span class="token operator">-</span>wait<span class="token punctuation">:</span> <span class="token number">100000</span>
        timeout<span class="token punctuation">:</span> <span class="token number">0</span>

</code></pre> 
<h4><a id="3_Spring_BootRedis_93"></a>3. Spring Boot中Redis相关类</h4> 
<p>项目操作redis是使用的RedisTemplate方式，另外还可以完全使用JedisPool和Jedis来操作redis。整合的内容也是从网上收集整合而来，网上整合的方式和方法非常的多，有使用注解形式的，有使用Jackson2JsonRedisSerializer来序列化和反序列化key value的值等等，很多很多。这里使用的是我认为比较容易理解和掌握的，基于JedisPool配置，使用RedisTemplate来操作redis的方式。</p> 
<p><strong>RedisConfig.java</strong></p> 
<pre><code class="prism language-c">@Configuration
@EnableAutoConfiguration
public class RedisConfig <span class="token punctuation">{<!-- --></span>

    @Bean
    @<span class="token function">ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.redis.pool"</span><span class="token punctuation">)</span>
    public JedisPoolConfig <span class="token function">getRedisConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        JedisPoolConfig config <span class="token operator">=</span> new <span class="token function">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> config<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Bean
    @<span class="token function">ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.redis"</span><span class="token punctuation">)</span>
    public JedisConnectionFactory <span class="token function">getConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        JedisConnectionFactory factory <span class="token operator">=</span> new <span class="token function">JedisConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsePool</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
        JedisPoolConfig config <span class="token operator">=</span> <span class="token function">getRedisConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">setPoolConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Bean
    public RedisTemplate<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token function">getRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        JedisConnectionFactory factory <span class="token operator">=</span> <span class="token function">getConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RedisTemplate<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token operator">&gt;</span> template <span class="token operator">=</span> new <span class="token function">StringRedisTemplate</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> template<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>以上三个方法分别为获取JedisPoolConfig配置、获取JedisConnectionFactory工厂和获取RedisTemplate模板。<br> @Configuration 注解是用于定义配置类，可替换xml配置文件，被注解的类内部包含有一个或多个被@Bean注解的方法，这些方法将会被AnnotationConfigApplicationContext或AnnotationConfigWebApplicationContext类进行扫描，并用于构建bean定义，初始化Spring容器。<br> @EnableAutoConfiguration 注解是启用Spring应用程序上下文的自动配置，尝试猜测和配置您可能需要的bean。自动配置类通常基于类路径和定义的bean应用。<br> @ConfigurationProperties 注解是用于读取配置文件的信息，在这里是读取配置在yml里的redi。s的相关配置项。<br> @Bean 注解用在方法上，告诉Spring容器，你可以从下面这个方法中拿到一个Bean</p> 
<p><strong>RedisService.java</strong></p> 
<pre><code class="prism language-c">public interface RedisService <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * set存数据
     * @param key
     * @param value
     * @return
     */</span>
    boolean <span class="token function">set</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> String value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * get获取数据
     * @param key
     * @return
     */</span>
    String <span class="token function">get</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 设置有效天数
     * @param key
     * @param expire
     * @return
     */</span>
    boolean <span class="token function">expire</span><span class="token punctuation">(</span>String key<span class="token punctuation">,</span> <span class="token keyword">long</span> expire<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 移除数据
     * @param key
     * @return
     */</span>
    boolean <span class="token function">remove</span><span class="token punctuation">(</span>String key<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><strong>RedisServiceImpl.java</strong></p> 
<pre><code class="prism language-c">@<span class="token function">Service</span><span class="token punctuation">(</span><span class="token string">"redisService"</span><span class="token punctuation">)</span>
public class RedisServiceImpl implements RedisService <span class="token punctuation">{<!-- --></span>

    @Resource
    private RedisTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token operator">?</span><span class="token operator">&gt;</span> redisTemplate<span class="token punctuation">;</span>

    @Override
    public boolean <span class="token function">set</span><span class="token punctuation">(</span>final String key<span class="token punctuation">,</span> final String value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        boolean result <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>new RedisCallback<span class="token operator">&lt;</span>Boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            @Override
            public Boolean <span class="token function">doInRedis</span><span class="token punctuation">(</span>RedisConnection connection<span class="token punctuation">)</span> throws DataAccessException <span class="token punctuation">{<!-- --></span>
                RedisSerializer<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> serializer <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                connection<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>serializer<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> serializer<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> true<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    public String <span class="token function">get</span><span class="token punctuation">(</span>final String key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String result <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>new RedisCallback<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            @Override
            public String <span class="token function">doInRedis</span><span class="token punctuation">(</span>RedisConnection connection<span class="token punctuation">)</span> throws DataAccessException <span class="token punctuation">{<!-- --></span>
                RedisSerializer<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> serializer <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                byte<span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>serializer<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> serializer<span class="token punctuation">.</span><span class="token function">deserialize</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    public boolean <span class="token function">expire</span><span class="token punctuation">(</span>final String key<span class="token punctuation">,</span> <span class="token keyword">long</span> expire<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> expire<span class="token punctuation">,</span> TimeUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    public boolean <span class="token function">remove</span><span class="token punctuation">(</span>final String key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        boolean result <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>new RedisCallback<span class="token operator">&lt;</span>Boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            @Override
            public Boolean <span class="token function">doInRedis</span><span class="token punctuation">(</span>RedisConnection connection<span class="token punctuation">)</span> throws DataAccessException <span class="token punctuation">{<!-- --></span>
                RedisSerializer<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> serializer <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                connection<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> true<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>在这里execute()方法具体的底层没有去研究，只知道这样能实现对于redis数据的操作。<br> redis保存的数据会在内存和硬盘上存储，所以需要做序列化；这个里面使用的StringRedisSerializer来做序列化，不过这个方式的泛型指定的是String，只能传String进来。所以项目中采用json字符串做redis的交互。</p> 
<p>到此，redis在springboot中的整合已经完毕，下面就来测试使用一下。</p> 
<p><strong>SpringbootApplicationTests.java</strong></p> 
<pre><code class="prism language-c">@<span class="token function">RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span>class<span class="token punctuation">)</span>
@SpringBootTest
public class SpringbootApplicationTests <span class="token punctuation">{<!-- --></span>

    private JSONObject json <span class="token operator">=</span> new <span class="token function">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    @Autowired
    private RedisService redisService<span class="token punctuation">;</span>

    @Test
    public <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws Exception <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 插入字符串
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">setString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        redisService<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"redis_string_test"</span><span class="token punctuation">,</span> <span class="token string">"springboot redis test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取字符串
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String result <span class="token operator">=</span> redisService<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"redis_string_test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 插入对象
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">setObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Person person <span class="token operator">=</span> new <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"person"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisService<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"redis_obj_test"</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取对象
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String result <span class="token operator">=</span> redisService<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"redis_obj_test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Person person <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> Person<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 插入对象List
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">setList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Person person1 <span class="token operator">=</span> new <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"person1"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Person person2 <span class="token operator">=</span> new <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"person2"</span><span class="token punctuation">,</span> <span class="token string">"female"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Person person3 <span class="token operator">=</span> new <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">"person3"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> list <span class="token operator">=</span> new ArrayList<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisService<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"redis_list_test"</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取list
     */</span>
    @Test
    public <span class="token keyword">void</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String result <span class="token operator">=</span> redisService<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"redis_list_test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> String<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Test
    public <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        redisService<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"redis_test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

class Person <span class="token punctuation">{<!-- --></span>
    private String name<span class="token punctuation">;</span>
    private String sex<span class="token punctuation">;</span>

    public <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

    public <span class="token function">Person</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String sex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public String <span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setSex</span><span class="token punctuation">(</span>String sex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这里就直接使用springboot项目中自带的单元测试类SpringbootApplicationTests进行测试。</p> 
<p>在这里先是用@Autowired注解把redisService注入进来，然后由于是使用json字符串进行交互，所以引入fastjson的JSONObject类。然后为了方便，直接在这个测试类里面加了一个Person的内部类。</p> 
<h4><a id="4__353"></a>4. 测试结果</h4> 
<p>测试分析：对于string类型的存取，对于object类型的存取，对于list类型的存取，其实本质都是转成了json字符串。还有就是根据key来执行remove操作。</p> 
<ul><li>获取字符串：</li></ul> 
<p><img src="https://images2.imgbox.com/f7/7e/xkNBJ116_o.png" alt="在这里插入图片描述"></p> 
<ul><li>获取对象：</li></ul> 
<p><img src="https://images2.imgbox.com/23/b0/FVjzsnYs_o.png" alt="在这里插入图片描述"></p> 
<ul><li>获取list：</li></ul> 
<p><img src="https://images2.imgbox.com/e8/f3/0Wo9ZGhD_o.png" alt="在这里插入图片描述"></p> 
<ul><li>redis管理客户端数据：</li></ul> 
<p><img src="https://images2.imgbox.com/52/d2/0URlZliS_o.png" alt="在这里插入图片描述"><br> 到此，测试完成，对于常用的一些数据类型的转换存取操作也基本调试通过。所以本文对于Spring Boot整合Redis到此结束。</p> 
<p>此篇Spring Boot整合Redis的博客相对来说简单和基础，适合新手学习。</p> 
<p>有很多不足之处，另外也还有很多其他方式方法，希望各位大佬不吝赐教。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f9fc17f4490517451a379a7fdcfe889a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JVM内存模型详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb607b0f71451b5e0f1dc5bcfd02bbec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">fastcgi怎么解析php,在nginx上用FastCGI解析PHP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>