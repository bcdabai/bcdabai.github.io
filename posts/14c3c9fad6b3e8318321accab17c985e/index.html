<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AppCan的图片、文件操作、上传、下载操作 From Ken - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AppCan的图片、文件操作、上传、下载操作 From Ken" />
<meta property="og:description" content="&lt;!DOCTYPE html&gt; &lt;html class=&#34;ui-mobile landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px&#34;&gt; &lt;head&gt; &lt;title&gt; &lt;/title&gt; &lt;meta charset=&#34;utf-8&#34;&gt; &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/ui-media.css&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/ui-base.css&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/ui-apple.css&#34;&gt; &lt;script src=&#34;js/zy_anim.js&#34;&gt; &lt;/script&gt; &lt;script src=&#34;js/zy_control.js&#34;&gt; &lt;/script&gt; &lt;script src=&#34;js/zy_tmpl.js&#34;&gt; &lt;/script&gt; &lt;/head&gt; &lt;body class=&#34;ui-mobile-viewport&#34; &gt; &lt;div id=&#34;page&#34; class=&#34;ui-page ui-body-d ui-page-active ui-header-fixed&#34; tabindex=&#34;0&#34;&gt; &lt;div data-role=&#34;header&#34; class=&#34;ui-header ui-bar-iphone &#34; &gt; &lt;h1 class=&#34;ui-title&#34; tabindex=&#34;0&#34; role=&#34;heading&#34; aria-level=&#34;1&#34;&gt;Images&lt;/h1&gt; &lt;div class=&#34;ui-btn ui-btn-right ui-btn-corner-all ui-shadow ui-btn-a &#34; οnclick=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/14c3c9fad6b3e8318321accab17c985e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-12-07T16:08:56+08:00" />
<meta property="article:modified_time" content="2012-12-07T16:08:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AppCan的图片、文件操作、上传、下载操作 From Ken</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html class="ui-mobile landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px"&gt;
  &lt;head&gt;
    &lt;title&gt;
    &lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"&gt;
    &lt;link rel="stylesheet" href="css/ui-media.css"&gt;
    &lt;link rel="stylesheet" href="css/ui-base.css"&gt;
    &lt;link rel="stylesheet" href="css/ui-apple.css"&gt;
    &lt;script src="js/zy_anim.js"&gt;
    &lt;/script&gt;
    &lt;script src="js/zy_control.js"&gt;
    &lt;/script&gt;
 	&lt;script src="js/zy_tmpl.js"&gt;
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body class="ui-mobile-viewport" &gt;
   
&lt;div id="page" class="ui-page ui-body-d ui-page-active ui-header-fixed" tabindex="0"&gt;

&lt;div data-role="header" class="ui-header ui-bar-iphone " &gt;
&lt;h1 class="ui-title" tabindex="0" role="heading" aria-level="1"&gt;Images&lt;/h1&gt; 
&lt;div class="ui-btn  ui-btn-right ui-btn-corner-all ui-shadow  ui-btn-a  " οnclick="actionsheet();"&gt;  &lt;span class="ui-btn-inner ui-btn-corner-all"&gt; &lt;span class="ui-btn-text"&gt;选择&lt;/span&gt;  &lt;/span&gt;&lt;/div&gt; 

&lt;/div&gt;

&lt;div id="msgid" class="ui-bar ui-bar-e "&gt;
&lt;/div&gt;

&lt;div class="ui-content ui-body-d"&gt;
&lt;img id="imgid" src="img/2.png" style="height:500px;width:450px;position:absolute;left:0.5em;"/&gt; 
&lt;/div&gt;

&lt;div data-role="footer" class="ui-footer ui-bar-a ui-footer-fixed"&gt;
&lt;div class="ui-bar ui-bar-a "&gt;
&lt;div class="ui-btn   ui-btn-corner-all ui-shadow  ui-btn-a ui-btn-inline " οnclick="viewpic();"&gt;  &lt;span class="ui-btn-inner ui-btn-corner-all"&gt; &lt;span class="ui-btn-text"&gt;图片查看器&lt;/span&gt;  &lt;/span&gt; &lt;button class="ui-btn-hidden"&gt;按钮&lt;/button&gt; &lt;/div&gt; 
&lt;div class="ui-btn   ui-btn-corner-all ui-shadow  ui-btn-a ui-btn-inline " οnclick="downloadurl();"&gt;  &lt;span class="ui-btn-inner ui-btn-corner-all"&gt; &lt;span class="ui-btn-text"&gt;下载网络图片&lt;/span&gt;  &lt;/span&gt; &lt;button class="ui-btn-hidden"&gt;按钮&lt;/button&gt; &lt;/div&gt; 
&lt;div class="ui-btn   ui-btn-corner-all ui-shadow  ui-btn-a ui-btn-inline " οnclick="uploadpic();"&gt;  &lt;span class="ui-btn-inner ui-btn-corner-all"&gt; &lt;span class="ui-btn-text"&gt;上传&lt;/span&gt;  &lt;/span&gt; &lt;button class="ui-btn-hidden"&gt;按钮&lt;/button&gt; &lt;/div&gt; 

&lt;/div&gt;


&lt;/div&gt;

&lt;/div&gt;
&lt;script&gt;
var imgurl = "wgt://img/2.png";//默认图片url

//显示log
function setLog(msg){
	document.getElementById("msgid").innerHTML = msg;
}

//弹出actionSheet
function actionsheet(){
	uexWindow.actionSheet("选择图片", "取消", ["照相机拍摄","本地文件","网络文件"]);
}
//通过图片查看器查看图片
function viewpic(){
	var ar = new Array();
	ar[0]=imgurl;
	uexImageBrowser.open(ar);
}

//下载网络图片
var dopCode=1;
var inSavePath=null;
function downloadurl(){
	if(imgurl.indexOf("http://")==0){
		var q = imgurl.match(/.*\.(.*)/);
		inSavePath = (new Date()).getTime()+"."+q[1];
		uexDownloaderMgr.createDownloader(dopCode); 
	}else{
		uexWindow.toast(0,5,"非网络图片",1000);
	}
}
//上传图片
var uploadHttp = "<a target="_blank" href="http://*.*.net/server/upload.php" rel="nofollow noopener noreferrer">http://*.*.net/server/upload.php</a>";
/*upload.php 和普通的上传一样, 你写个upload.php,文件里面就一个&lt;?php file_put_contents('log',print_r($_FILES,1));就知道了，不要来加群，就为了问这个，谢谢*/
var uopCode =2;
function uploadpic(){
	if(imgurl.indexOf("http://")&lt;0)
		uexUploaderMgr.createUploader(uopCode,uploadHttp);
	else
		uexWindow.toast(0,5,"非本地图片",1000);
}

window.uexOnload = function(){

	uexWindow.cbActionSheet = function(opId,dataType,data){
		switch(parseInt(data)){
		case 0:
			uexCamera.open();
			break;
		case 1:
			uexFileMgr.explorer("");
			break;
		case 2:
			uexWindow.prompt("提示", "输入网络图片URL", "",["确定","取消"]);
			break;
		}
	}
	uexWindow.cbPrompt=function(opId,dataType,data){
		if(dataType==1){
			var d = eval("("+data+")");
			if(d.num=="0"){
				if(d.value.indexOf('http://')&gt;-1){
					imgurl=d.value;
					document.getElementById("imgid").src=imgurl;
				}
				else
					alert("网络URL错误");
			}
			
		}
	}
	uexCamera.cbOpen = function(opId,dataType,data){
		if(dataType==0)
		{
			imgurl = data;
			document.getElementById("imgid").src=imgurl;
		}
	}
	uexFileMgr.cbExplorer = function(opId,dataType,data){
		uexLog.sendLog(dataType); 
		if(dataType==0){
			uexLog.sendLog(data);
			imgurl = data;
			document.getElementById("imgid").src=imgurl;
			uexLog.sendLog(document.getElementById("imgid").src);
		}
	}
	//****************下载回调***************
	uexDownloaderMgr.cbCreateDownloader=function(opId,dataType,data){
		uexDownloaderMgr.download(dopCode,imgurl,inSavePath,0);
		setLog("开始下载图片");
	}
	uexDownloaderMgr.onStatus = function(opId,fileSize,percent,status){
		if(status == 0)
			setLog("下载进度："+percent+"%");
		if(status == 1){
			setLog("下载完成");
			imgurl = inSavePath;
			uexDownloaderMgr.closeDownloader(dopCode);
		}
		if(status == 2){
			setLog("下载出错");
			uexDownloaderMgr.closeDownloader(dopCode); 
			uexFileMgr.deleteFileByPath(inSavePath);
		}
	}
	//******************************************
	//****************上传回调***************
	uexUploaderMgr.cbCreateUploader = function(opId,dataType,data){
		uexUploaderMgr.uploadFile(uopCode,imgurl,"filename",1);
		setLog("开始上传图片");
	}
	uexUploaderMgr.onStatus = function(opId,fileSize,percent,serverPath,status){
		if(status==0)
			setLog("上传进度："+percent+"%");
		if(status == 1){
			setLog("上传完成");
			uexUploaderMgr.closeUploader(uopCode);
		}
		if(status == 2){
			setLog("上传出错");
		}
	}
	//******************************************
}
&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p> </p> 
<p> </p> 
<p>我的QQ群：</p> 
<p>PHPer&amp;Webgame&amp;移动开发，群号：95303036</p> 
<p><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/befc31f839bb64d63bc4fd8df925840c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nRF24L01&#43;  多机系统与接收通道地址</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb92566fdc8afbfd6bbdd2ad265ac628/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CF 253C(找中转行)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>