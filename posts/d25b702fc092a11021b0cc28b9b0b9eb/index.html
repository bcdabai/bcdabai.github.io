<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决：uniapp项目打包微信小程序或原生app包（wgt），报错：failed to load config from /xx/xx-mall/vite.config.ts - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决：uniapp项目打包微信小程序或原生app包（wgt），报错：failed to load config from /xx/xx-mall/vite.config.ts" />
<meta property="og:description" content="项目使用技术：uniapp &#43; vue3 &#43; vite4.0.3 &#43; node(v16.20.0)
&#34;@dcloudio/uni-app&#34;: &#34;3.0.0-alpha-3081220230731001&#34;,
&#34;@dcloudio/uni-mp-weixin&#34;: &#34;3.0.0-alpha-3081220230731001&#34;,
&#34;vue&#34;: &#34;^3.3.4&#34;,
&#34;vite&#34;: &#34;4.0.3&#34;,
&#34;engines&#34;: {
&#34;node&#34;: &#34;&gt;=16.20.0&#34;,
&#34;pnpm&#34;: &#34;&gt;=8.0.0&#34;
},
最新测试：使用高版本node（v18.15.0）, 删除node_modules依赖，重新安装，以下2个问题都可以解决了都不报错了。
一、vscode编辑器：终端打包微信小程序 复现步骤：在vscode终端中运行：pnpm build:mp-weixin-prod 命令，打包小程序生产包时，报错failed to load xxx/vite.config.ts，但实际项目根目录中有该vite.config.ts文件。
vscode端使用的node版本是：v16.20.0
最后解决：使用node版本（16.20.0）&#43; 若有@esbuild包，删除即可。
具体解决：之前忘了什么原因，手动在node_modules包下面放入了darwin-x64文件夹 =》 将node_modules下面的@esbuild文件夹整个删除即可。
摘自其他人图：我的报错项目只有darwin-x64文件夹，没有darwin-arm64文件 二、HbuilderX编辑器：点击发行-》 原生app-制作应用wgt包 复现背景： node_modules中也没有@esbuild目录 -》点击发行，终端提示报错：can&#39;t find xx/xx/vite.config.ts, 当前使用的node是v16.20.0。
最后解决：使用node版本（v18.15.0）&#43; 重新安装所有依赖。
具体解决：删除node_modules包 -》 切换node版本为v18.15.0, 重新安装依赖 pnpm install 即可。 参考链接： [报bug] Host version &#34;0.17.19&#34; does not match binary version &#34;0.16.17&#34; - DCloud问答 -- 这个报错是因为@esbuild文件中有2个包，darwin-x64和darwin-arm64，这2个包版本有0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d25b702fc092a11021b0cc28b9b0b9eb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-01T17:25:46+08:00" />
<meta property="article:modified_time" content="2023-12-01T17:25:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决：uniapp项目打包微信小程序或原生app包（wgt），报错：failed to load config from /xx/xx-mall/vite.config.ts</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>项目使用技术：</strong>uniapp + vue3 + vite4.0.3 + node(v16.20.0)</p> 
 <p>"@dcloudio/uni-app": "3.0.0-alpha-3081220230731001",</p> 
 <p>"@dcloudio/uni-mp-weixin": "3.0.0-alpha-3081220230731001",</p> 
 <p>"vue": "^3.3.4",</p> 
 <p>"vite": "4.0.3",</p> 
 <p>"engines": {<!-- --></p> 
 <p>       "node": "&gt;=16.20.0",</p> 
 <p>      "pnpm": "&gt;=8.0.0"</p> 
 <p>},</p> 
</blockquote> 
<blockquote> 
 <p><span style="color:#fe2c24;"><strong>最新测试：</strong></span>使用<span style="color:#fe2c24;">高版本node</span>（v18.15.0）, 删除node_modules依赖，重新安装，以下2个问题都可以解决了都不报错了。</p> 
</blockquote> 
<h2>一、vscode编辑器：终端打包微信小程序</h2> 
<blockquote> 
 <p><strong>复现步骤：</strong>在vscode终端中运行：pnpm build:mp-weixin-prod 命令，打包小程序生产包时，报错failed to load xxx/vite.config.ts，但实际项目根目录中有该vite.config.ts文件。</p> 
 <p>vscode端使用的node版本是：<span style="color:#fe2c24;">v16.20.0</span></p> 
 <p><span style="color:#fe2c24;">最后解决：</span><span style="color:#0d0016;">使用node版本（16.20.0）+ 若有@esbuild包，删除即可。</span></p> 
</blockquote> 
<p><strong><span style="color:#1c7331;">具体解决：</span></strong>之前忘了什么原因，手动在node_modules包下面放入了darwin-x64文件夹 =》 <span style="color:#fe2c24;">将node_modules下面的@esbuild文件夹整个删除即可</span>。</p> 
<figure class="image"> 
 <img alt="" height="202" src="https://images2.imgbox.com/f8/da/ujT6oI83_o.png" width="866"> 
 <figcaption>
   摘自其他人图：我的报错项目只有darwin-x64文件夹，没有darwin-arm64文件 
 </figcaption> 
</figure> 
<p><img alt="" height="396" src="https://images2.imgbox.com/bb/20/jAqbdniO_o.png" width="532"></p> 
<h2>二、HbuilderX编辑器：点击发行-》 原生app-制作应用wgt包</h2> 
<blockquote> 
 <p><strong>复现背景</strong>： node_modules中也没有@esbuild目录 -》点击发行，终端提示报错：can't find xx/xx/vite.config.ts, 当前使用的node是v16.20.0。</p> 
 <p><span style="color:#fe2c24;">最后解决：</span><span style="color:#0d0016;">使用node版本（v18.15.0）+ 重新安装所有依赖。</span></p> 
</blockquote> 
<p><span style="color:#1c7331;">具体解决：</span>删除node_modules包 -》 切换node版本为<span style="color:#fe2c24;">v18.15.0</span>, 重新安装依赖 pnpm install 即可。 </p> 
<h2>参考链接： </h2> 
<ul><li><a href="https://ask.dcloud.net.cn/question/180079" rel="nofollow" title='[报bug]  Host version "0.17.19" does not match binary version "0.16.17" - DCloud问答'>[报bug] Host version "0.17.19" does not match binary version "0.16.17" - DCloud问答</a> -- 这个报错是因为@esbuild文件中有2个包，darwin-x64和darwin-arm64，这2个包版本有0.17.19和0.16.17，若实际没有@esbuild, 可能是node_modules有缓存，重新删除所有依赖再安装。</li><li><a href="https://ask.dcloud.net.cn/question/145281" rel="nofollow" title="【报Bug】HBuilderX mac M1编译 vite/vue3 cli项目时编译不了(hbx运行编译） - DCloud问答">【报Bug】HBuilderX mac M1编译 vite/vue3 cli项目时编译不了(hbx运行编译） - DCloud问答</a></li></ul> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6febd44b6308782ebce1356bd6de104/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kkFileView安装及使用——文件预览解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6546a8913ed9d99344c16af0ba4433c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第六届传智杯c&#43;&#43;B组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>