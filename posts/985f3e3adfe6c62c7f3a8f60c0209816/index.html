<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>合工大路强java实验四思考题 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="合工大路强java实验四思考题" />
<meta property="og:description" content="实验四 Java Web编程 一．实验目的
1．掌握Java Web服务器Tomcat的安装、配置。
2．学会简单的HTML表单设计，表单提交。
3．掌握JSP中的request对象、session对象的使用。
二．实验内容
1．下载安装Tomcat8，对其进行配置。启动Tomcat服务器，在浏览器输入 http://127.0.0.1:8080/，查看浏览器输出界面；
2. 定制配置：
（1）修改Tomcat的服务端口为88（默认安装为8080）；
（2）修改HTTP GET方式的字符编码为UTF-8（默认为ISO-8859-1）；
3.编写一个用户注册模块，功能如下：
（1）设计用户注册表单页面register.jsp，包含：用户名（文本框）、密码（密码框）、性别（下拉框）；
（2）设计用户注册数据保存页面doRegister.jsp，用以保存用户数据至user.txt文件。
user.txt中每行保存一个用户，格式为：“用户名,密码,性别”；
（3）如果user.txt已包含同名的用户，提示用户已存在；否则提示注册成功。
4.编写用户登录模块，功能如下：
（1）设计用户登录表单页面login.jsp，包含：用户名（文本框）、密码（密码框）；
（2）设计登录验证文件doLogin.jsp，获取客户端提交的用户名、密码，然后从user.txt中验证是否存在该用户，登录密码是否正确；
（3）将登录验证结果反馈给用户。
三．思考题（本文章讲的）
1. 对整个实验进行总结，写出实验心得；
2. 学有余力的同学，将实验中注册、登录功能的数据源user.txt换成数据库的user表（自行设计字段），采用JDBC访问数据库； 前期工作 首先安装Apache Tomcat 8以上的版本并启动本地服务器
当然jsp页面不一定要Eclipse那些IDE才可以启动，其实可以记事本启动的
具体的应该是http://localhost:配置文件里的端口，一般是8080/需要访问的jsp的目录&#43;名字
比如说http://localhost:88/test/1.jsp，指的是tomcat中test文件夹下的1.jsp文件
安装教程：
Tomcat安装及配置教程 - 全栈开发者社区 - 博客园
我选用的是Eclipse IDE for java developers，想在里面创建web项目需要先下载对应的插件，教程：
Eclipse下找不到“新建Web项目”_tangju7086的博客-CSDN博客_eclipse没有web
数据库选用的是MySQL 8.0.25版本，安装教程：
超详细MySQL安装及基本使用教程_bobo553443的博客-CSDN博客_mysql安装教程
这里不建议大家使用命令行操作数据库，可以选择下载Mysql Workbench，安装教程：
MySQL Workbench使用教程
注意：如果想要在web项目中使用MySQL，那么一定不要忘了把mysql的驱动jar包重新放置在Tomcat的lib目录下面，否则会疯狂报错；
还有，现在版本的mysql驱动名字已经变成了“com.mysql.cj.jdbc.Driver”，不是以前的“com.mysql.jdbc.Driver”，这里尤其要注意！
mysql-connector-java各种版本下载地址_Bruce_Json的博客-CSDN博客_mysql-connector-java
随后在mysql中创建名为user1的数据库，包含一个user表：
使用MySQL Workbench建立数据库，建立新的表，向表中添加数据 - 星朝 - 博客园
java配置文件读取教程：
Java Properties 类 | 菜鸟教程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/985f3e3adfe6c62c7f3a8f60c0209816/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-02T11:47:58+08:00" />
<meta property="article:modified_time" content="2021-11-02T11:47:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">合工大路强java实验四思考题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:.0001pt;text-align:center;"><strong>实验</strong><strong>四</strong><strong> </strong><strong>Java Web编程</strong></h2> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>一．实验目的</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">1．掌握Java Web服务器Tomcat的安装、配置。</p> 
<p style="margin-left:.0001pt;text-align:justify;">2．学会简单的HTML表单设计，表单提交。</p> 
<p style="margin-left:.0001pt;text-align:justify;">3．掌握JSP中的request对象、session对象的使用。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong>二．实验内容</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">1．下载安装Tomcat8，对其进行配置。启动Tomcat服务器，在浏览器输入 <a href="http://127.0.0.1:8080/" rel="nofollow" title="http://127.0.0.1:8080/">http://127.0.0.1:8080/</a>，查看浏览器输出界面；</p> 
<p style="margin-left:.0001pt;text-align:justify;">2. 定制配置：</p> 
<p style="margin-left:.0001pt;text-align:justify;">（1）修改Tomcat的服务端口为88（默认安装为8080）；</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）修改HTTP GET方式的字符编码为UTF-8（默认为ISO-8859-1）；</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">3.编写一个用户注册模块，功能如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;">（1）设计用户注册表单页面register.jsp，包含：用户名（文本框）、密码（密码框）、性别（下拉框）；</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）设计用户注册数据保存页面doRegister.jsp，用以保存用户数据至user.txt文件。</p> 
<p style="margin-left:.0001pt;text-align:justify;">user.txt中每行保存一个用户，格式为：“用户名,密码,性别”；</p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）如果user.txt已包含同名的用户，提示用户已存在；否则提示注册成功。</p> 
<p style="margin-left:.0001pt;text-align:justify;">4.编写用户登录模块，功能如下：</p> 
<p style="margin-left:.0001pt;text-align:justify;">（1）设计用户登录表单页面login.jsp，包含：用户名（文本框）、密码（密码框）；</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）设计登录验证文件doLogin.jsp，获取客户端提交的用户名、密码，然后从user.txt中验证是否存在该用户，登录密码是否正确；</p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）将登录验证结果反馈给用户。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;"><strong>三．思考题（本文章讲的）</strong></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">1. 对整个实验进行总结，写出实验心得；</p> 
<p style="margin-left:.0001pt;text-align:justify;">2. 学有余力的同学，将实验中注册、登录功能的数据源user.txt换成数据库的user表（自行设计字段），采用JDBC访问数据库； </p> 
<h3 style="margin-left:.0001pt;text-align:justify;"><strong><span style="color:#fe2c24;">前期工作</span></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">首先安装Apache Tomcat 8以上的版本并启动本地服务器</p> 
<p style="margin-left:.0001pt;text-align:justify;">当然jsp页面不一定要Eclipse那些IDE才可以启动，其实可以记事本启动的</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">具体的应该是http://localhost:配置文件里的端口，一般是8080/需要访问的jsp的目录+名字</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">比如说http://localhost:88/test/1.jsp，指的是tomcat中test文件夹下的1.jsp文件</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">安装教程：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://www.cnblogs.com/dgj15222301178/p/7834815.html" rel="nofollow" title="Tomcat安装及配置教程 - 全栈开发者社区 - 博客园">Tomcat安装及配置教程 - 全栈开发者社区 - 博客园</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">我选用的是Eclipse IDE for java developers，想在里面创建web项目需要先下载对应的插件，教程：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://blog.csdn.net/tangju7086/article/details/82890230" title="Eclipse下找不到“新建Web项目”_tangju7086的博客-CSDN博客_eclipse没有web">Eclipse下找不到“新建Web项目”_tangju7086的博客-CSDN博客_eclipse没有web</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">数据库选用的是MySQL 8.0.25版本，安装教程：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://blog.csdn.net/bobo553443/article/details/81383194" title="超详细MySQL安装及基本使用教程_bobo553443的博客-CSDN博客_mysql安装教程">超详细MySQL安装及基本使用教程_bobo553443的博客-CSDN博客_mysql安装教程</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">这里不建议大家使用命令行操作数据库，可以选择下载Mysql Workbench，安装教程：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="http://c.biancheng.net/view/2625.html" rel="nofollow" title="MySQL Workbench使用教程">MySQL Workbench使用教程</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">注意：如果想要在web项目中使用MySQL，那么一定不要忘了把mysql的驱动jar包重新放置在Tomcat的lib目录下面，否则会疯狂报错；</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">还有，现在版本的mysql驱动名字已经变成了“com.mysql.cj.jdbc.Driver”，不是以前的“com.mysql.jdbc.Driver”，这里尤其要注意！</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://blog.csdn.net/milan__kundera/article/details/81182757" title="mysql-connector-java各种版本下载地址_Bruce_Json的博客-CSDN博客_mysql-connector-java">mysql-connector-java各种版本下载地址_Bruce_Json的博客-CSDN博客_mysql-connector-java</a></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="591" src="https://images2.imgbox.com/d1/0c/ZQXjQ6z6_o.png" width="1008"></p> 
<p> 随后在mysql中创建名为user1的数据库，包含一个user表：</p> 
<p><a href="https://www.cnblogs.com/jpfss/p/6647598.html" rel="nofollow" title="使用MySQL Workbench建立数据库，建立新的表，向表中添加数据 - 星朝 - 博客园">使用MySQL Workbench建立数据库，建立新的表，向表中添加数据 - 星朝 - 博客园</a></p> 
<p><img alt="" height="603" src="https://images2.imgbox.com/fe/00/mqlbzh5Z_o.png" width="1200"></p> 
<p>java配置文件读取教程：</p> 
<p><a href="https://www.runoob.com/java/java-properties-class.html" rel="nofollow" title="Java Properties 类 | 菜鸟教程">Java Properties 类 | 菜鸟教程</a></p> 
<p>配置文件的话，应该长这样：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b9/03/LJDg294I_o.png"></p> 
<p></p> 
<h3> 登录界面jsp</h3> 
<pre><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%--这里可以添加引用--%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;mysql的登录界面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="./logincheck1.jsp" method="post"&gt;
	&lt;%--form语句——提交表单时，发送数据，这里产生了链接关系---%&gt;
	&lt;div align="center"&gt;&lt;h1&gt;&lt;b&gt;用户登录&lt;/b&gt;&lt;/h1&gt;
	&lt;p&gt;
		&lt;strong&gt;&lt;font size="5"&gt;登录id：&lt;/font&gt;&lt;/strong&gt;
		&lt;input type="text" name="userid" style="width:300px;height:20px;font:6px"/&gt;
		&lt;%--type应该是标签的类型，name则随便【捂脸】，好像还可以指定初始值value=--%&gt;
	&lt;/p&gt;
	&lt;p&gt;
		&lt;strong&gt;&lt;font size="5"&gt;密码：&lt;/font&gt;&lt;/strong&gt;
		&lt;input type="password" name="password" style="width:300px;height:20px;font:6px"/&gt;&lt;/p&gt;
	&lt;input type="submit" value="确定" style="width:100px;height:25px"/&gt;
	&lt;input type="reset" value="取消" style="width:100px;height:25px"/&gt;
	&lt;select name="sex" style="width:100px;height:25px";font="6px"&gt;
  		&lt;option value="女"&gt;女&lt;/option&gt;
  		&lt;option value="男"&gt;男&lt;/option&gt;
	&lt;/select&gt;
	&lt;input type = "button" value = "注册" onclick = "window.location.href = './doRegister.jsp'"&gt;
	&lt;/div&gt;&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>登录检测界面</h3> 
<pre><code class="language-html">&lt;%@page import="java.io.FileInputStream"%&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.sql.*" %&gt;
&lt;%@ page import="java.util.*" %&gt;
&lt;%@ page import="javax.servlet.*" %&gt;
&lt;%@ page import="java.io.*" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;Server Page Depend !&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;Which Pae will be depend by the user's message!&lt;/h3&gt;

&lt;%
	request.setCharacterEncoding("UTF-8");
 	String name=request.getParameter("userid");//获取name的参数值
 	String password=request.getParameter("password");//获取password的参数值
 	String sex=request.getParameter("sex");//获取性别的参数值
%&gt;
&lt;%!
	public static Connection conn;
	private static Properties prop1;
	public static String Driver1;
	public static String url1;
	public static String user1;
	public static String password1;
	public static PreparedStatement stmt;
	public ResultSet rs;
%&gt;
&lt;%	try{
		prop1=new Properties();
		prop1.load(new FileInputStream(new File("c:/java5/mysqlinfo.properties")));
        //这里应该是你电脑上配置文件的位置
		Driver1=prop1.getProperty("driver");
		url1=prop1.getProperty("url");
		user1=prop1.getProperty("user");
		password1=prop1.getProperty("pass");
 		Class.forName(Driver1);//加载mysql驱动
 		conn=DriverManager.getConnection(url1,user1,password1);
        //localhost是本机地址，3306是端口号，最后是用户名和密码
 		stmt=conn.prepareStatement("SELECT * from user where username='"+name+"' and password='"+password+"' and sex='"+sex+"'");//实例化Statement对象
 		rs=stmt.executeQuery();//执行数据库查询操作并获取结果集
 		boolean flag=false;//初始化flag
 		if(rs.next()){//判断结果,如果超过一条，证明这个用户-密码对是存在的
 			flag=true;
 			session.setAttribute("UserName", name);//将name的内容赋值给UserName
 		}else{
 			flag=false;
 		}
%&gt;
&lt;%
 		if(flag){
%&gt;
			&lt;jsp:forward page="./login_success.jsp"&gt;
       			&lt;jsp:param name="uname" value="&lt;%=name%&gt;"/&gt;
    		&lt;/jsp:forward&gt;
&lt;%
 		}else{
%&gt;
			&lt;jsp:forward page="./login_failure.jsp"&gt;
       			&lt;jsp:param name="uname" value="&lt;%=name%&gt;"/&gt;
    		&lt;/jsp:forward&gt;
&lt;%
 		}
	}catch(Exception excp1){excp1.printStackTrace();}
	finally{
	//关闭上面的几个对象，注意关闭顺序，最后使用的先关闭
		rs.close();
		stmt.close();
		conn.close();
	}
%&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>登录/注册成功界面jsp</h3> 
<pre><code class="language-html">&lt;%@page import="java.util.Date"%&gt;
&lt;%@page import="javax.swing.Timer"%&gt;
&lt;%@page import="java.lang.*" %&gt;
&lt;%@page import="java.text.*" %&gt;
&lt;%@page import="java.lang.Exception" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;登录/注册成功&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;&lt;div align="center"&gt;
	&lt;p&gt;
	&lt;h1&gt;&lt;strong&gt;用户登录/注册成功!!!&lt;/strong&gt;&lt;/h1&gt;
	&lt;h2&gt;当前时间：&lt;strong&gt;
		&lt;%out.println(new SimpleDateFormat("hh:mm:ss").format(new Date()));%&gt;
	&lt;/strong&gt;&lt;/h2&gt;
	&lt;h3&gt;&lt;a href="./doRegister.jsp"&gt;跳转至注册界面&lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>登录失败界面jsp</h3> 
<pre><code class="language-html">&lt;%@page import="java.util.Date"%&gt;
&lt;%@page import="javax.swing.Timer"%&gt;
&lt;%@page import="java.lang.*" %&gt;
&lt;%@page import="java.text.*" %&gt;
&lt;%@page import="java.lang.Exception" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;登录失败&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;&lt;div align="center"&gt;
	&lt;p&gt;
	&lt;h1&gt;&lt;strong&gt;用户注册/登录失败！&lt;/strong&gt;&lt;/h1&gt;
	&lt;h2&gt;当前时间：&lt;strong&gt;&lt;%
		out.println(new SimpleDateFormat("hh:mm:ss").format(new Date()));
	%&gt;&lt;/strong&gt;&lt;/h2&gt;
	&lt;h3&gt;&lt;a href="./register31.jsp"&gt;跳转至登录界面&lt;/a&gt;&lt;/h3&gt;
	&lt;h3&gt;&lt;a href="./doRegister.jsp"&gt;跳转至注册界面&lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;&lt;/body&gt;
&lt;/h</code></pre> 
<h3>注册界面jsp</h3> 
<pre><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%--这里可以添加引用--%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;mysql用户注册界面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="./conduct register.jsp" method="post"&gt;
	&lt;%--form语句——提交表单时，发送数据，这里产生了链接关系---%&gt;
	&lt;div align="center"&gt;&lt;h1&gt;&lt;b&gt;用户注册&lt;/b&gt;&lt;/h1&gt;
	&lt;p&gt;
		&lt;strong&gt;&lt;font size="5"&gt;用户id：&lt;/font&gt;&lt;/strong&gt;
		&lt;input type="text" name="userid" style="width:300px;height:20px;font:6px"/&gt;
		&lt;%--type应该是指定的输入类型，name则随便【捂脸】，好像还可以指定初始值value=--%&gt;
	&lt;/p&gt;
	&lt;p&gt;
		&lt;strong&gt;&lt;font size="5"&gt;用户密码：&lt;/font&gt;&lt;/strong&gt;
		&lt;input type="password" name="password" style="width:300px;height:20px;font:6px"/&gt;&lt;/p&gt;
	&lt;input type="submit" value="确定" style="width:100px;height:25px"/&gt;
	&lt;input type="reset" value="取消" style="width:100px;height:25px"/&gt;
	&lt;select name="sex" style="width:100px;height:25px";font="6px"&gt;
  		&lt;option value="女"&gt;女&lt;/option&gt;
  		&lt;option value="男"&gt;男&lt;/option&gt;
	&lt;/select&gt;
	&lt;/div&gt;&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>注册检测（是否注册重复的用户名）界面jsp</h3> 
<pre><code class="language-html">&lt;%@page import="java.io.FileInputStream"%&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.sql.*" %&gt;
&lt;%@ page import="java.util.*" %&gt;
&lt;%@ page import="javax.servlet.*" %&gt;
&lt;%@ page import="java.io.*" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;Server Page Depend !&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;Which Pae will be depend by the user's message!&lt;/h3&gt;

&lt;%
	request.setCharacterEncoding("UTF-8");
 	String name=request.getParameter("userid");//获取name的参数值
 	String password=request.getParameter("password");//获取password的参数值
 	String sex=request.getParameter("sex");
%&gt;
&lt;%!
	public static Connection conn;
	private static Properties prop1;
	public static String Driver1;
	public static String url1;
	public static String user1;
	public static String password1;
	public static PreparedStatement stmt,stmt1;
	public ResultSet rs,rs1;
%&gt;
&lt;%	try{
		prop1=new Properties();//读取配置文件，初始化数据库连接信息
		prop1.load(new FileInputStream(new File("c:/java5/mysqlinfo.properties")));
		Driver1=prop1.getProperty("driver");
		url1=prop1.getProperty("url");
		user1=prop1.getProperty("user");
		password1=prop1.getProperty("pass");
 		Class.forName(Driver1);//加载mysql驱动，记住一定要把驱动的jar放在tomcat的lib目录下面
 		conn=DriverManager.getConnection(url1,user1,password1);
		stmt1=conn.prepareStatement("SELECT * FROM user WHERE username='"+name+"'");
 		stmt=conn.prepareStatement("INSERT INTO user(username, password,sex) VALUES ('"+name+"', '"+password+"', '"+sex+"')");//实例化PreparedStatement对象
 		rs1=stmt1.executeQuery();
 		if(rs1.next()){//先行判断是否重名
%&gt; 		
			&lt;jsp:forward page="./register_failure.jsp"&gt;&lt;/jsp:forward&gt;
    		&lt;!--标签里面没有元素时不能换行【捂脸】，这里不会继续执行了--&gt;
&lt;%  	}else{
 			stmt.executeUpdate();//执行数据库插入操作
%&gt;
 			&lt;jsp:forward page="./login_success.jsp"&gt;&lt;/jsp:forward&gt;
&lt;%		}
	}catch(Exception excp1){excp1.printStackTrace();}
	finally{//关闭上面的几个对象，注意关闭顺序，最后使用的先关闭
		stmt1.close();
		stmt.close();
		conn.close();
	}
%&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>注册失败（用户名重复）界面jsp</h3> 
<pre><code class="language-html">&lt;%@page import="java.util.Date"%&gt;
&lt;%@page import="javax.swing.Timer"%&gt;
&lt;%@page import="java.lang.*" %&gt;
&lt;%@page import="java.text.*" %&gt;
&lt;%@page import="java.lang.Exception" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;注册失败&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;&lt;div align="center"&gt;
	&lt;p&gt;
	&lt;h1&gt;&lt;strong&gt;用户名重复，请重新注册！&lt;/strong&gt;&lt;/h1&gt;
	&lt;h2&gt;当前时间：&lt;strong&gt;&lt;%
		out.println(new SimpleDateFormat("hh:mm:ss").format(new Date()));
	%&gt;&lt;/strong&gt;&lt;/h2&gt;
	&lt;h3&gt;&lt;a href="./register31.jsp"&gt;跳转至登录界面&lt;/a&gt;&lt;/h3&gt;
	&lt;h3&gt;&lt;a href="./doRegister.jsp"&gt;跳转至注册界面&lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3>示范</h3> 
<h4><span style="color:#fe2c24;">登录示范</span></h4> 
<p style="text-align:left;"><span style="color:#ff0000;">输入用户名：hhh，密码：123456，性别：女</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/63/cb/dSxFl2CN_o.png"></p> 
<p> 数据库中的信息：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/86/1b/LzWWZ2lF_o.png"></p> 
<p> 结果：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c0/00/PDcMOyrM_o.png"></p> 
<h4><span style="color:#fe2c24;"> 注册示范</span></h4> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">用户名：hhhy6  密码：123abc 性别：女</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="color:#ff0000;"><img alt="" src="https://images2.imgbox.com/53/c2/6ssGYTtx_o.png"></span></p> 
<p> 注册完成后，数据库信息：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3b/56/iDZW9qis_o.png"></p> 
<h4><span style="color:#fe2c24;">注册失败示范：</span></h4> 
<p><span style="color:#ff0000;">再注册一个用户名：hhhy6  密码：随便  性别：女</span></p> 
<p style="text-align:center;"><span style="color:#ff0000;"><img alt="" src="https://images2.imgbox.com/6c/36/KJwQfUqG_o.png"></span></p> 
<p><span style="color:#fe2c24;">很明显又重名了，所以失败——</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/50/0f/bfUftUlS_o.png"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3cb414338e89335c0b649fdd94b6507a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VBA之正则表达式（27）-- 提取包含关键字的字段</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/948ec90b201dbeceb365c3b2b0c3c82f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[localhost-startStop-1] liquibase.lockservice.null Waiting for changelog lock....</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>