<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux部署docker（最详细docker，一看就会） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux部署docker（最详细docker，一看就会）" />
<meta property="og:description" content="Docker概述： Docker为什么会出现？ 一款产品：开发...测试..上线,三套环境！
例如：发布一个项目（jar&#43;redis mysql jdk等），项目能不能带上环境安装一起打包
传统：java -- apk（应用）-- 发布（应用商店）--张三使用apk -- 下载安装即可使用
现在：java -- jar（环境）-- 打包项目带上环境（镜像）-- （docker仓库：商店） --下载我们发布的镜像 -- 直接运行即可！
Docker的核心思想：隔离
Docker的历史： 2010年，几个搞it的年轻人，就在美国成立了一家公司叫dotCloud
做一些pass的云计算服务，LXC有关的容器服务！
他们将自己的技术（容器化技术）命名为docker！
Docker刚刚诞生的时候，没有引起行业的注意！dotCloud，就活不下去了！
想到了“开源”
开放源代码！
2013年，docker开源！
Docker越来越多的人发现了docker的优点！火了，docker每个月都会有新的版本诞生！
2014年4月9日，docker1.0发布！
Docker至今短短10年为什么这么火？
十分轻巧
在容器技术出来之前，我们都是使用虚拟机（非常占内存及本地资源），vm、kvm等！
Docker如何安装： Docker的基本组成： 镜像（image）：就好比是个一个模板，可以通过这个模板来启动容器创建容器服务，tomcat镜像 --- run --- tomcat服务，可以经过这个镜像可以启动无数个（最终服务运行或项目运行就是在这个容器中的）
容器（container）：docker利用容器技术，独立运行一个或一组应用，通过镜像来创建的；容器的基本命令，启动、停止、删除！目前就可以把这个容器理解为就是一个简易的Linux系统。
仓库（repository）：仓库就是存放镜像的地方，仓库分为公有仓库和私有仓库。公有仓库有docker Hub（默认是国外的）、阿里云、腾讯云...都有容器服务器（我们需要配置镜像加速）
安装docker： 环境准备：系统centos7
帮助文档：
卸载旧的 版本 yum remove docker \
docker-client \
docker-client-latest \
docker-common \
docker-latest \
docker-latest-logrotate \
docker-logrotate \
docker-engine
安装依赖关系： yum install -y yum-utils" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/350c60d2f5a6b9dc671c447c78ec1a86/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-16T16:48:28+08:00" />
<meta property="article:modified_time" content="2023-06-16T16:48:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux部署docker（最详细docker，一看就会）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:justify;"><strong>Docker概述：</strong></h2> 
<h3 style="text-align:left;"><strong>Docker为什么会出现？</strong></h3> 
<p style="text-align:justify;">一款产品：开发...测试..上线,三套环境！</p> 
<p style="text-align:justify;">例如：发布一个项目（jar+redis mysql jdk等），项目能不能带上环境安装一起打包</p> 
<p style="text-align:justify;">传统：java -- apk（应用）-- 发布（应用商店）--张三使用apk -- 下载安装即可使用</p> 
<p style="text-align:justify;">现在：java -- jar（环境）-- 打包项目带上环境（镜像）-- （docker仓库：商店） --下载我们发布的镜像 -- 直接运行即可！</p> 
<p style="text-align:justify;">Docker的核心思想：隔离</p> 
<h3 style="text-align:left;"><strong>Docker的历史：</strong></h3> 
<p style="text-align:justify;">2010年，几个搞it的年轻人，就在美国成立了一家公司叫dotCloud</p> 
<p style="text-align:justify;">做一些pass的云计算服务，LXC有关的容器服务！</p> 
<p style="text-align:justify;">他们将自己的技术（容器化技术）命名为docker！</p> 
<p style="text-align:justify;">Docker刚刚诞生的时候，没有引起行业的注意！dotCloud，就活不下去了！</p> 
<p style="text-align:justify;">想到了“开源”</p> 
<p style="text-align:justify;">开放源代码！</p> 
<p style="text-align:justify;">2013年，docker开源！</p> 
<p style="text-align:justify;">Docker越来越多的人发现了docker的优点！火了，docker每个月都会有新的版本诞生！</p> 
<p style="text-align:justify;">2014年4月9日，docker1.0发布！</p> 
<p style="text-align:justify;">Docker至今短短10年为什么这么火？</p> 
<p style="text-align:justify;">十分轻巧</p> 
<p style="text-align:justify;">在容器技术出来之前，我们都是使用虚拟机（非常占内存及本地资源），vm、kvm等！</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/35/d2/9MIIVusi_o.png"></p> 
<h2 style="text-align:justify;"><strong>Docker如何安装：</strong></h2> 
<h3 style="text-align:center;"><strong>Docker的基本组成：<img alt="" src="https://images2.imgbox.com/cd/93/jr6vL7t7_o.png"></strong></h3> 
<p style="text-align:justify;">镜像（image）：就好比是个一个模板，可以通过这个模板来启动容器创建容器服务，tomcat镜像 --- run --- tomcat服务，可以经过这个镜像可以启动无数个（最终服务运行或项目运行就是在这个容器中的）</p> 
<p style="text-align:justify;">容器（container）：docker利用容器技术，独立运行一个或一组应用，通过镜像来创建的；容器的基本命令，启动、停止、删除！目前就可以把这个容器理解为就是一个简易的Linux系统。</p> 
<p style="text-align:justify;">仓库（repository）：仓库就是存放镜像的地方，仓库分为公有仓库和私有仓库。公有仓库有docker Hub（默认是国外的）、阿里云、腾讯云...都有容器服务器（我们需要配置镜像加速）</p> 
<h3 style="text-align:left;"><strong>安装docker：</strong></h3> 
<p style="text-align:justify;">环境准备：系统centos7</p> 
<p style="text-align:justify;">帮助文档：</p> 
<ol><li style="text-align:justify;">卸载旧的 版本</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum remove docker </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-client </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-client-latest </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-common </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-latest </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-latest-logrotate </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-logrotate </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">                  docker-engine</span></span></span></p> <p style="text-align:justify;"></p> </td></tr></tbody></table> 
<ol><li style="text-align:justify;">安装依赖关系：</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum install </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">-y</span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"> yum-utils</span></span></span></p> </td></tr></tbody></table> 
<ol><li style="text-align:justify;">设置镜像仓库：</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum-config-manager </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;">    <span style="background-color:#f5f8fa;"><span style="color:#0c5176;">--add-repo</span></span> <span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"><a href="https://download.docker.com/linux/centos/docker-ce.repo%EF%BC%88%E5%9B%BD%E5%A4%96%E7%9A%84%EF%BC%8C%E5%BE%88%E6%85%A2%EF%BC%89" rel="nofollow" title="https://download.docker.com/linux/centos/docker-ce.repo（国外的，很慢）">https://download.docker.com/linux/centos/docker-ce.repo（国外的，很慢）</a></span></span></span></p> <p style="margin-left:0pt;text-align:left;"></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum-config-manager </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;">    <span style="background-color:#f5f8fa;"><span style="color:#0c5176;">--add-repo</span></span> <span style="background-color:#f5f8fa;"><span style="color:#0c5176;">\</span></span></span></p> <p><span style="background-color:#ffffff;"><u><span style="background-color:#f5f8fa;"><span style="color:#0000ff;"><u>http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo（推荐使用阿里云的）</u></span></span></u></span></p> <p style="margin-left:0pt;text-align:left;"></p> </td></tr></tbody></table> 
<ol><li style="text-align:justify;">更新yum软件包索引</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum makecache fast</span></span></p> </td></tr></tbody></table> 
<p style="text-align:justify;"></p> 
<ol><li style="text-align:justify;">安装docker</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">-y </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">install docker-ce docker-ce-cli containerd.io</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">注：docker-ce 社区、docker-ee 企业版</span></span></span></p> </td></tr></tbody></table> 
<ol><li style="text-align:justify;">启动docker</li></ol> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">systemctl start docker</span></span></span></p> </td></tr></tbody></table> 
<ol><li style="text-align:justify;">使用docker version查看是否启动成功</li></ol> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b8/10/njfp0H0n_o.png"></p> 
<p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;">8、测试hello-world</span></p> 
<p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">docker run hello-world</span></span></span></p> 
<p style="margin-left:0pt;text-align:center;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"><img alt="" src="https://images2.imgbox.com/80/b0/CjQE0nGq_o.png"></span></span></span></p> 
<p style="text-align:justify;">9查看一下hello-world镜像在不在？</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">docker images</span></span></p> </td></tr></tbody></table> 
<p style="text-align:justify;">10如何卸载docker</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">yum remove docker-ce docker-ce-cli containerd.io</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">rm </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">-rf</span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"> /var/lib/docker</span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"> #docker默认的工作路径</span></span></span></p> <p style="margin-left:0pt;text-align:left;"><span style="background-color:#f5f8fa;"><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">rm </span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;">-rf</span></span><span style="background-color:#f5f8fa;"><span style="color:#0c5176;"> /var/lib/containerd</span></span></span></p> </td></tr></tbody></table> 
<h3 style="text-align:left;"><strong>阿里云加速：</strong></h3> 
<p style="text-align:justify;">1、登录阿里云平台找到“产品与服务”里的“容器镜像服务”</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/d1/68/GFTnPsMY_o.png"></p> 
<p>2. 点击“镜像工具”-“镜像加速器”<img alt="" src="https://images2.imgbox.com/47/87/89lmgpub_o.png"></p> 
<p></p> 
<h3 style="text-align:left;"><strong>回顾</strong><strong>hello-world</strong><strong>创建流程</strong></h3> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/75/84/jdwu5itH_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/8d/28/8F8pIRyp_o.png"></p> 
<h3 style="text-align:left;"><strong>docker底层原理：</strong></h3> 
<h4 style="text-align:left;"><strong>Docker是怎么工作的？</strong></h4> 
<p style="text-align:justify;">Docker是一个client-server结构的系统，docker的守护进程运行在主机上，通过socket从客户端访问！</p> 
<p style="text-align:justify;">Docker-server接受到docker-client的指令就会执行这个命令！</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/b9/gdPdaFpC_o.png"></p> 
<p></p> 
<h4 style="text-align:left;"><strong>Docker为什么比vm虚拟机快？</strong></h4> 
<p style="text-align:justify;">Docker利用的是宿主机的内核，vm需要Guest OS</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/59/8d/IDPFUNVx_o.png"></p> 
<p style="text-align:justify;">所以说新建一个容器的时候，docker不需要像虚拟机一样重新加载一个操作系统内核，避免一些引导性的操作。</p> 
<h2 style="text-align:justify;"><strong>Docker常用命令：</strong></h2> 
<h3 style="text-align:left;"><strong>帮助命令：</strong></h3> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">Docker version #显示docker的版本信息</p> <p style="text-align:justify;">Docker info #显示docker的系统信息，docker的镜像和容器信息</p> <p style="text-align:justify;">Docker 命令 --help #万能命令</p> </td></tr></tbody></table> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/0b/e4/2oulfmrQ_o.png"></p> 
<p></p> 
<h3 style="text-align:left;"><strong>镜像命令：</strong></h3> 
<p style="text-align:justify;"><strong><strong>Docker images 查看所有本地的主机上的镜像</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">[root@localhost containerd]# docker images</p> <p style="text-align:justify;">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</p> <p style="text-align:justify;">hello-world   latest    d1165f221234   3 months ago   13.3kB</p> <p style="text-align:justify;"><strong><strong>#解释：</strong></strong></p> <p style="text-align:justify;">REPOSITORY  #镜像的仓库源</p> <p style="text-align:justify;">TAG  #镜像的标签</p> <p style="text-align:justify;">IMAGE ID  #镜像的ID</p> <p style="text-align:justify;">CREATED  #镜像的创建时间</p> <p style="text-align:justify;">SIZE  #镜像的大小</p> <p style="text-align:justify;"><strong><strong>#可选项</strong></strong></p> <p style="text-align:justify;">[root@localhost containerd]# docker images --help</p> <p style="text-align:justify;">Usage:  docker images [OPTIONS] [REPOSITORY[:TAG]]</p> <p style="text-align:justify;">List images</p> <p style="text-align:justify;">Options:</p> <p style="text-align:justify;">  -a, --all       #显示所有镜像</p> <p style="text-align:justify;">  -q, --quiet     #只显示镜像的ID</p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>Docker search 镜像名称  #搜索镜像</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">[root@localhost containerd]# docker search mysql</p> <p style="text-align:justify;">NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</p> <p style="text-align:justify;">mysql                             MySQL is a widely used, open-source relation…   11082     [OK]       </p> <p style="text-align:justify;">mariadb                           MariaDB Server is a high performing open sou…   4199      [OK]       </p> <p style="text-align:justify;"><strong><strong>#可选项，通过搜索来过滤</strong></strong></p> <p style="text-align:justify;">--filter=STARS=4000 #就是搜索出来的镜像STARS大于4000的。</p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>Docker pull 镜像名称[:tag]  #下载镜像</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">最新版本下载：</p> <p style="text-align:justify;">[root@localhost containerd]# docker pull mysql</p> <p style="text-align:justify;">Using default tag: latest  #不跟版本，下载默认最新的版本</p> <p style="text-align:justify;">latest: Pulling from library/mysql</p> <p style="text-align:justify;">b4d181a07f80: Pull complete  #分层下载，image的核心，联合文件系统</p> <p style="text-align:justify;">a462b60610f5: Pull complete</p> <p style="text-align:justify;">578fafb77ab8: Pull complete</p> <p style="text-align:justify;">524046006037: Pull complete</p> <p style="text-align:justify;">d0cbe54c8855: Pull complete</p> <p style="text-align:justify;">aa18e05cc46d: Pull complete</p> <p style="text-align:justify;">32ca814c833f: Pull complete</p> <p style="text-align:justify;">9ecc8abdb7f5: Pull complete</p> <p style="text-align:justify;">ad042b682e0f: Pull complete</p> <p style="text-align:justify;">71d327c6bb78: Pull complete</p> <p style="text-align:justify;">165d1d10a3fa: Pull complete</p> <p style="text-align:justify;">2f40c47d0626: Pull complete</p> <p style="text-align:justify;">Digest: sha256:52b8406e4c32b8cf0557f1b74517e14c5393aff5cf0384eff62d9e81f4985d4b #签名信息，防伪标识</p> <p style="text-align:justify;">Status: Downloaded newer image for mysql:latest</p> <p style="text-align:justify;">docker.io/library/mysql:latest  #真实地址</p> <p style="text-align:justify;"></p> <p style="text-align:justify;">指定版本下载：</p> <p style="text-align:justify;">[root@localhost containerd]# docker pull mysql:5.7</p> <p style="text-align:justify;">5.7: Pulling from library/mysql</p> <p style="text-align:justify;">b4d181a07f80: Already exists</p> <p style="text-align:justify;">a462b60610f5: Already exists</p> <p style="text-align:justify;">578fafb77ab8: Already exists</p> <p style="text-align:justify;">524046006037: Already exists</p> <p style="text-align:justify;">d0cbe54c8855: Already exists</p> <p style="text-align:justify;">aa18e05cc46d: Already exists</p> <p style="text-align:justify;">32ca814c833f: Already exists</p> <p style="text-align:justify;">52645b4af634: Pull complete</p> <p style="text-align:justify;">bca6a5b14385: Pull complete</p> <p style="text-align:justify;">309f36297c75: Pull complete</p> <p style="text-align:justify;">7d75cacde0f8: Pull complete</p> <p style="text-align:justify;">Digest: sha256:1a2f9cd257e75cc80e9118b303d1648366bc2049101449bf2c8d82b022ea86b7</p> <p style="text-align:justify;">Status: Downloaded newer image for mysql:5.7</p> <p style="text-align:justify;">docker.io/library/mysql:5.7</p> <p style="text-align:justify;"></p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>Docker rmi 删除镜像</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">docker rmi -f 09361feeb475  #根据镜像ID，删除单个镜像</p> <p style="text-align:justify;">docker rmi -f $(docker images -aq)  #删除全部镜像</p> </td></tr></tbody></table> 
<p style="text-align:justify;"></p> 
<h3 style="text-align:left;"><strong>容器命令：</strong></h3> 
<p style="text-align:justify;"><strong><strong>说明：我们有了镜像才可以创建容器，下载一个centos镜像来测试学习！</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">docker pull centos</p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>创建容器并启动</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">docker run [可选参数] image</p> <p style="text-align:justify;"><strong><strong>参数说明：</strong></strong></p> <p style="text-align:justify;">--name=“name” #容器的名字 tomcat01 tomcat02 用来区分容器</p> <p style="text-align:justify;">-d #后台方式运行</p> <p style="text-align:justify;">-it #使用交互方式运行，进入容器查看内容</p> <p style="text-align:justify;">/bin/bash #给一个控制台</p> <p style="text-align:justify;">-p #指定容器的端口 -p8080：8080</p> <p style="text-align:justify;">-p ip:主机端口：容器端口</p> <p style="text-align:justify;">    -p主机端口：容器端口 (常用)</p> <p style="text-align:justify;">    -p容器端口</p> <p style="text-align:justify;">-P  #随机映射一个 49000~49900 的端口到内部容器开放的网络端口</p> <p style="text-align:justify;">-v 宿主机目录和容器内目录映射</p> <p style="text-align:justify;"></p> <p style="text-align:justify;"><strong><strong>测试 启动并进入容器：</strong></strong></p> <p style="text-align:justify;">[root@localhost containerd]# docker run -it centos /bin/bash</p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]# ls  #查看容器内的centos ，基础版本，很多命令是不完善的</p> <p style="text-align:justify;">bin  etc   lib   lost+found  mnt  proc  run   srv  tmp  var</p> <p style="text-align:justify;">dev  home  lib64  media       opt  root  sbin  sys  usr</p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]# exit   #退出命令</p> <p style="text-align:justify;">exit</p> <p style="text-align:justify;">[root@localhost /]# ls</p> <p style="text-align:justify;">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>列出容器：</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">dokcer ps #查看正在运行中的容器列表</p> <p style="text-align:justify;">-a #查看所有容器</p> <p style="text-align:justify;">-n=？ #显示最近创建的容器</p> <p style="text-align:justify;">-q #只显示容器的ID</p> <p style="text-align:justify;"></p> <p style="text-align:justify;"><strong><strong>[root@localhost /]# docker ps</strong></strong></p> <p style="text-align:justify;">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</p> <p style="text-align:justify;"><strong><strong>[root@localhost /]# docker ps -a</strong></strong></p> <p style="text-align:justify;">CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES</p> <p style="text-align:justify;">c2e9f2af5df6   centos         "/bin/bash"   7 minutes ago   Exited (0) 4 minutes ago             infallible_wu</p> <p style="text-align:justify;">04e4b20d023d   d1165f221234   "/hello"      2 hours ago     Exited (0) 2 hours ago               flamboyant_hellman</p> <p style="text-align:justify;"></p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>退出容器</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">Exit #退出后容器停止</p> <p style="text-align:justify;">Ctrl+p+q #退出容器不停止</p> </td></tr></tbody></table> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;"><strong><strong>删除容器</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">docker rm 容器id  #删除指定容器，不能删除正在运行中的容器</p> <p style="text-align:justify;">docker rm -f $(docker ps -aq)  #删除所有的容器</p> <p style="text-align:justify;">docker ps -a -q | xargs docker rm  #删除所有的容器</p> <p style="text-align:justify;"></p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>启动和停止容器的操作</strong></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">docker start 容器id  #启动容器</p> <p style="text-align:justify;">docker stop容器id   #停止当前运行容器</p> <p style="text-align:justify;">docker restart 容器id  #重启容器</p> <p style="text-align:justify;">docker kill 容器id   #强制停止当前容器</p> </td></tr></tbody></table> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;"></p> 
<h3 style="text-align:left;"><strong>常用其他命令：</strong></h3> 
<h4 style="text-align:left;"><strong>查看日志：</strong></h4> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><strong><strong>docker logs -f -t --tail 10 容器</strong></strong></p> <p style="text-align:justify;">-tf  #显示日志</p> <p style="text-align:justify;">--tail number  #要显示日志条数</p> <p style="text-align:justify;"></p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker ps</strong></strong></p> <p style="text-align:justify;">CONTAINER ID   IMAGE     COMMAND       CREATED        STATUS         PORTS     NAMES</p> <p style="text-align:justify;">c2e9f2af5df6   centos    "/bin/bash"   10 hours ago   Up 6 seconds             infallible_wu</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]#<strong><strong> docker logs -f -t --tail 10 c2e9f2af5df6</strong></strong></p> <p style="text-align:justify;">2021-07-03T16:58:57.371780294Z [root@c2e9f2af5df6 /]# ls</p> <p style="text-align:justify;">2021-07-03T16:58:57.378009686Z bin  etc   lib   lost+found  mnt  proc  run   srv  tmp  var</p> <p style="text-align:justify;">2021-07-03T16:58:57.378060051Z dev  home  lib64  media       opt  root  sbin  sys  usr</p> <p style="text-align:justify;">2021-07-03T17:00:45.937116561Z [root@c2e9f2af5df6 /]# exit  </p> <p style="text-align:justify;">2021-07-03T17:00:45.937156697Z exit</p> </td></tr></tbody></table> 
<h4 style="text-align:left;"><strong>查看容器进程信息</strong></h4> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker top c2e9f2af5df6</strong></strong></p> <p style="text-align:justify;">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</p> <p style="text-align:justify;">root                9559                9538                0                   11:00               pts/0               00:00:00            /bin/bash</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]#<strong><strong> docker inspect --help</strong></strong></p> <p style="text-align:justify;">Usage:  docker inspect [OPTIONS] NAME|ID [NAME|ID...]</p> <p style="text-align:justify;">Return low-level information on Docker objects</p> <p style="text-align:justify;">Options:</p> <p style="text-align:justify;">  -f, --format string   Format the output using the given Go template</p> <p style="text-align:justify;">  -s, --size            Display total file sizes if the type is container</p> <p style="text-align:justify;">      --type string     Return JSON for specified type</p> <p style="text-align:justify;"><strong><strong>[root@MiWiFi-R4A-srv ~]# docker inspect c2e9f2af5df6</strong></strong></p> </td></tr></tbody></table> 
<h4 style="text-align:left;"><strong>进入当前正在运行的容器</strong></h4> 
<p style="text-align:justify;">#我们通常容器都是使用后台方式运行，退出容器后需要再次进入容器修改一些配置</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><strong><strong>#命令</strong></strong></p> <p style="text-align:justify;"><strong><strong>方式一：</strong></strong><strong><strong>docker exec -it 容器id bashshell </strong></strong> #进入容器后开启一个新的终端，可以在里面操作（常用）</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker ps</strong></strong></p> <p style="text-align:justify;">CONTAINER ID   IMAGE     COMMAND       CREATED        STATUS          PORTS     NAMES</p> <p style="text-align:justify;">c2e9f2af5df6   centos    "/bin/bash"   10 hours ago   Up 14 minutes             infallible_wu</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker exec -it c2e9f2af5df6 /bin/bash</strong></strong></p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]# ls</p> <p style="text-align:justify;">bin  etc   lib   lost+found  mnt  proc  run   srv  tmp  var</p> <p style="text-align:justify;">dev  home  lib64  media       opt  root  sbin  sys  usr</p> <p style="text-align:justify;"><strong><strong>方式二：</strong></strong></p> <p style="text-align:justify;"><strong><strong>docker attach 容器id </strong></strong> #进入容器正在执行的终端，不会启动新的进程</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker attach c2e9f2af5df6</strong></strong></p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]# ls</p> <p style="text-align:justify;">bin  etc   lib   lost+found  mnt  proc  run   srv  tmp  var</p> <p style="text-align:justify;">dev  home  lib64  media       opt  root  sbin  sys  usr</p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]#</p> </td></tr></tbody></table> 
<h4 style="text-align:left;"><strong>从容器内拷贝文件到主机上</strong></h4> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><strong><strong>docker cp c2e9f2af5df6:</strong></strong><strong><strong>容器文件路径 本地路径</strong></strong></p> <p style="text-align:justify;"></p> <p style="text-align:justify;">#进入docker容器内部</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]#<strong><strong> docker attach c2e9f2af5df6</strong></strong></p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]# <strong><strong>ls</strong></strong></p> <p style="text-align:justify;">bin  etc   lib   lost+found  mnt  proc  run   srv  <span style="color:#70ad47;">tianda.txt</span><strong> </strong><strong> </strong>usr</p> <p style="text-align:justify;">dev  home  lib64  media       opt  root  sbin  sys  tmp var</p> <p style="text-align:justify;">[root@c2e9f2af5df6 /]#<strong><strong> pwd</strong></strong></p> <p style="text-align:justify;">/</p> <p style="text-align:justify;">#cp容器内部文件到本地</p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]# <strong><strong>docker cp c2e9f2af5df6:/tianda.txt ./</strong></strong></p> <p style="text-align:justify;">[root@MiWiFi-R4A-srv ~]#<strong><strong> ls</strong></strong></p> <p style="text-align:justify;">??               initial-setup-ks.cfg  <span style="color:#70ad47;">tianda.txt</span>  模板  图片  下载  桌面</p> <p style="text-align:justify;">anaconda-ks.cfg  localho</p> <p style="text-align:justify;"><span style="color:#ff0000;">注：cp是一个手动过程，后边我们使用-v选项，以卷的技术实现自动</span></p> </td></tr></tbody></table> 
<h4 style="text-align:left;"><strong>从主机复制到容器:</strong></h4> 
<p style="text-align:justify;">docker cp host_path containerID:container_path</p> 
<p style="text-align:justify;">#docker cp 本地文件 容器id：容器路径</p> 
<h4 style="text-align:center;"><strong>小结：<img alt="" src="https://images2.imgbox.com/6b/01/IaRB1q3K_o.png"></strong></h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6b/0d/qmzwCVoo_o.png"></p> 
<p style="text-align:justify;"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">1. 如何搜索镜像和获取镜像？</p> <p style="text-align:justify;">    dockersearch 关键字和 docker pull 镜像名</p> <p style="text-align:justify;">2、创建一个保持运行的容器命令？</p> <p style="text-align:justify;">    docker run -t -i centos /bin/bash</p> <p style="text-align:justify;">3、容器的启动、停止及重启命令？</p> <p style="text-align:justify;">    docker start 、restart 、stop 容器id</p> <p style="text-align:justify;">4、怎么查看正在运行的容器和所有容器？</p> <p style="text-align:justify;">    docker ps &amp;&amp; docker ps -a</p> <p style="text-align:justify;">5、怎么退出容器：两种方法分别？</p> <p style="text-align:justify;">    exit：bash终止，容器进入停止状态</p> <p style="text-align:justify;">    ctrl+p &amp;&amp; Ctrl+q：退出容器，但容器保持运行状态</p> <p style="text-align:justify;">6、查看容器运行信息（占用的cpu、内存、网络等）</p> <p style="text-align:justify;">    docker stats 容器id</p> <p style="text-align:justify;">7、怎么查看在容器里做过的操作记录？</p> <p style="text-align:justify;">    docker diff 容器id</p> <p style="text-align:justify;">8、怎么连接到运行的容器？</p> <p style="text-align:justify;">    docker attach 容器id</p> <p style="text-align:justify;">    docker exec -ti 容器id /bin/bash</p> <p style="text-align:justify;">9、查看容器或镜像的内部信息？</p> <p style="text-align:justify;">    docker inspect 容器id或镜像id</p> <p style="text-align:justify;">10、如何删除容器？</p> <p style="text-align:justify;">    docker rm 容器id (前提需要关闭运行的容器)，不关闭加-f强行移除</p> <p style="text-align:justify;">11、如何查看所有镜像？</p> <p style="text-align:justify;">     docker images</p> <p style="text-align:justify;">12、如何删除镜像？</p> <p style="text-align:justify;">     在没有容器使用此镜像的前提下使用：</p> <p style="text-align:justify;">     docker rmi 镜像id</p> <p style="text-align:justify;">13、从容器内拷贝文件到主机上</p> <p style="text-align:justify;">docker cp c2e9f2af5df6:容器文件路径 本地路径</p> </td></tr></tbody></table> 
<h4 style="text-align:left;"><strong>作业练习</strong></h4> 
<p style="text-align:justify;">作业一：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;"><strong><strong>Docker安装nginx</strong></strong></p> <p style="text-align:justify;">1、搜索镜像 search 镜像名称 <span style="color:#ff0000;">#建议大家去docker搜索，可以看帮助文档</span></p> <p style="text-align:justify;">2、拉去镜像 pull 镜像名称</p> <p style="text-align:justify;">3、docker images 查看镜像</p> <p style="text-align:justify;">4、docker run -d --name nginx01 -p 3344:80 nginx</p> <p style="text-align:justify;">5、运行测试 ：elinks <a href="http://ip:3344" rel="nofollow" title="http://ip:3344">http://ip:3344</a> --dump</p> <p style="text-align:justify;">6、进入容器查看配置文件</p> <p style="text-align:justify;">docker exec -it nginx01 /bin/bash</p> <p style="text-align:justify;">whereis nginx</p> <p style="text-align:justify;">cd /etc/nginx</p> <p style="text-align:justify;">ls</p> </td></tr></tbody></table> 
<p style="text-align:justify;"><strong><strong>端口暴露的概念：</strong></strong></p> 
<p style="text-align:center;"><strong><strong><img alt="" src="https://images2.imgbox.com/f1/2f/1dKOB7xF_o.png"></strong></strong></p> 
<p></p> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;"><span style="color:#ff0000;">思考问题：</span>我们每次改动nginx配置文件，都需要进入容器内部？十分的麻烦，我要是可以在外部提供一个映射路径，达到在容器外修改文件名，容器内部就可以自动修改？（使用-v数据卷技术实现）</p> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;"></p> 
<p style="text-align:justify;">作业二：</p> 
<p style="text-align:justify;">使用docker安装一个tomcat！</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="text-align:justify;">#官方的使用</p> <p style="text-align:justify;">Docker run -it --rm tomcat:9.0</p> <p style="text-align:justify;">#我们之前的启动都是后台启动，停止了容器之后，容器还是可以查到的，Docker run -it --rm 一般是用来测试的，用完即删。</p> <p style="text-align:justify;"></p> <p style="text-align:justify;">#下载启动</p> <p style="text-align:justify;">docker pull tomcat</p> <p style="text-align:justify;">#启动tomcat</p> <p style="text-align:justify;">docker run -d -p 3355:8080 --name tomcat01 tomcat</p> <p style="text-align:justify;">安装好tomcat后，默认没有webapps，阿里云镜像的原因，默认是最小的镜像，所有不必要的都剔除了，保证最小的可用的环境。</p> <p style="text-align:justify;"></p> <p style="text-align:justify;">将/usr/local/tomcat/下webapps.dist目录里的文件cp到webapps下即可。</p> <p style="text-align:justify;"></p> <p style="text-align:justify;"><span style="color:#ff0000;">思考问题：</span>我们以后要部署项目，如果每次都要进入容器是不是十分麻烦？咱们要是可以在容器外部提供一个映射路径，webapps，我们在外部放置项目，就自动同步到内部就好了！</p> <p style="text-align:justify;"></p> </td></tr></tbody></table> 
<p> docker的总结就到这里！如果可以的话给个赞吧！</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p style="text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6719df2664498435c14aff63f88e3dc2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue2&#43;wangEditor5富文本编辑器（图片视频上传）并加锚链接</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ee94533eedc6e8d095dd5bdf0369918c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">idea设置注释模板</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>