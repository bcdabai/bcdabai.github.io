<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>实时计算 Flink性能调优 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="实时计算 Flink性能调优" />
<meta property="og:description" content="自动配置调优 实时计算 Flink新增自动调优功能autoconf。能够在流作业以及上下游性能达到稳定的前提下，根据您作业的历史运行状况，重新分配各算子资源和并发数，达到优化作业的目的。更多详细说明请您参阅自动配置调优。
首次智能调优 创建一个作业。如何创建作业请参看快速入门。 上线作业。选择智能推荐配置，指定使用CU数为系统默认，不填即可。点击下一步。
数据检查，预估消耗CU数。
在运维界面启动作业，根据实际业务需要指定读取数据时间。
说明:实时计算作业启动时候需要您指定启动时间。实际上就是从源头数据存储的指定时间点开始读取数据。指定读取数据时间需要在作业启动之前。例如，设置启动时间为1小时之前。
待作业稳定运行10分钟后，且以下状态符合要求，即可开始下一次性能调优。
运行信息拓扑图中IN_Q不为100%。
数据输入RPS符合预期。
非首次性能调优 停止&gt;下线作业。
重新上线作业。选择智能推荐配置，指定使用CU数为系统默认，不填即可。点击下一步。
数据检查，再次预估消耗CU数。
在运维界面启动作业，待作业稳定运行十分钟后，即可再一次性能调优。
说明：
自动配置调优一般需要3到5次才能达到理想的调优效果。请完成首次性能调优后，重复非首次性能调优过程多次。每次调优前，请确保足够的作业运行时长，建议10分钟以上。指定CU数（参考值） = 实际消耗CU数*目标RPS/当前RPS。 实际消耗CU数：上一次作业运行时实际消耗CU目标RPS：输入流数据的实际RPS（或QPS）当前RPS：上一次作业运行时实际的输入RPS 手动配置调优 手动配置调优可以分以下三个类型。
资源调优作业参数调优上下游参数调优 资源调优 资源调优即是对作业中的Operator的并发数（parallelism）、CPU（core）、堆内存（heap_memory）等参数进行调优。
分析定位资源调优节点 定位性能瓶颈节点 性能瓶颈节点为Vertex拓扑图最下游中参数IN_Q值为100%的一个或者多个节点。如下图，7号节点为性能瓶颈节点。
分析性能瓶颈因素 性能瓶颈的可分为三类。
并发（parallelism）不足CPU（core）不足MEM（heap_memory）不足 如下图，7号节点的性能瓶颈是资源（CPU和/或MEM）配置不足所导致。
说明：判断性能瓶颈因素方法
瓶颈节点的资源健康分为100，则认为资源已经合理分配，性能瓶颈是并发数不足所导致。瓶颈节点的资源健康分低于100，则认为性能瓶颈是单个并发的资源（CPU和/或MEM）配置不足所导致。无持续反压，但资源健康分低于100，仅表明单个并发的资源使用率较高，但暂不影响作业性能，可暂不做调优。 通过作业运维页面中Metrics Graph功能，进一步判断性能瓶颈是CPU不足还是MEM不足。步骤如下。
运维界面中，点击TaskExecutor，找到性能瓶颈节点ID，点击查看详情。
选择Metrics Graph，根据曲线图判断CPU或者MEM是否配置不足（很多情况下两者同时不足）。
调整资源配置 完成了性能瓶颈因素判断后，点击开发&gt;基本属性&gt;跳转到新窗口配置，开始调整资源配置。
批量修改Operator 点击GROUP框，进入批量修改Operator数据窗口。
说明：
GROUP内所有的operator具有相同的并发数。GROUP的core为所有operator的最大值。GROUP的_memory为所有operator之和。建议单个Job维度的CPU:MEM=1:4，即1个核对应4G内存。 配置修改完成后点击应用当前配置并关闭窗口。
单个修改Operator 点击Operator框，进入修改Operator数据窗口。
配置修改完成后点击应用当前配置并关闭窗口。
参数调整说明 您只需调整parallelism、core和heap_memory三个参数，即能满足大部分的资源调优需求。
Parallelism source节点
资源根据上游Partition数来。例如source的个数是16，那么source的并发可以配置为16、8、4等。不能超过16。中间节点
根据预估的QPS计算。对于数据量较小的任务，设置和source相同的并发度。QPS高的任务，可以配置更大的并发数，例如64、128、或者256。sink节点
并发度和下游存储的Partition数相关，一般是下游Partition个数的2~3倍。如果配置太大会导致数据写入超时或失败。例如，下游sink的个数是16，那么sink的并发最大可以配置48。Core
即CPU，根据实际CPU使用比例配置，建议配置值为0.25，可大于1。Heap_memory
堆内存。根据实际内存使用状况进行配置。其他参数 state_size：默认为0，group by、join、over、window等operator需设置为1。direct_memory：JVM堆外内存，默认值为0, 建议不要修改。native_memory：JVM堆外内存，默认值为0，建议修改为10MB。chainingStrategy：chain策略，根据实际需要修改。 作业参数调优 在开发页面的右侧选择作业参数。
输入调优语句。
优化解决问题调优语句MiniBatch提升吞吐，降低对下游压力仅对Group by有效。 blink.miniBatch.allowLatencyMs=5000" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e965e51de622c296651af602b40fd919/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-05T12:26:23+08:00" />
<meta property="article:modified_time" content="2018-11-05T12:26:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">实时计算 Flink性能调优</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="content-detail markdown-body"> 
 <h3 style="margin-left:0px;font-size:20px;color:rgb(102,102,102);line-height:20px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">自动配置调优</h3> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">实时计算 Flink新增自动调优功能autoconf。能够在流作业以及上下游性能达到稳定的前提下，根据您作业的历史运行状况，重新分配各算子资源和并发数，达到优化作业的目的。更多详细说明请您参阅<a href="https://help.aliyun.com/document_detail/66930.html" rel="nofollow" title="自动配置调优" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;">自动配置调优</a>。</p> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E9%A6%96%E6%AC%A1%E6%99%BA%E8%83%BD%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>首次智能调优</h4> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;">创建一个作业。如何创建作业请参看<a href="https://help.aliyun.com/document_detail/70009.html" rel="nofollow" title="快速入门" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;">快速入门</a>。</li><li style="list-style:decimal;"> <p style="line-height:24px;"><span style="font-weight:700;">上线</span>作业。选择<span style="font-weight:700;">智能推荐配置</span>，<span style="font-weight:700;">指定使用</span>CU数为系统默认，不填即可。点击<span style="font-weight:700;">下一步</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540801304228/%E5%AE%9E%E8%B7%B5%E9%87%8D%E6%96%B0%E8%B0%83%E8%AF%95.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/7d/fd/7N0s9iNP_o.png" width="800" alt="实践上线作业" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">数据检查，预估消耗CU数。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540795569014/%E5%AE%9E%E8%B7%B5%E9%A2%84%E8%AE%A1%E6%B6%88%E8%80%974.5CU.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/72/c8/ByHiTUPz_o.png" width="800" alt="实践数据检查" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">在<span style="font-weight:700;">运维</span>界面<span style="font-weight:700;">启动</span>作业，根据实际业务需要<span style="font-weight:700;">指定读取数据时间</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540804416599/%E5%AE%9E%E8%B7%B5%E5%90%AF%E5%8A%A8%E4%BD%9C%E4%B8%9A.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/62/5e/dT04OQ6h_o.png" width="800" alt="实践启动" style="border:0px;"></a></p> 
   <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-style:italic;"> 
    <p style="line-height:24px;"><span style="font-weight:700;">说明:</span>实时计算作业启动时候需要您指定启动时间。实际上就是从源头数据存储的指定时间点开始读取数据。指定读取数据时间需要在作业启动之前。例如，设置启动时间为1小时之前。</p> 
   </blockquote> </li><li style="list-style:decimal;"> <p style="line-height:24px;">待作业稳定运行10分钟后，且以下状态符合要求，即可开始下一次性能调优。</p> 
   <ul style="list-style:none;"><li style="list-style:circle;"> <span style="font-weight:700;">运行信息</span>拓扑图中<span style="font-weight:700;">IN_Q</span>不为100%。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540798097259/%E5%AE%9E%E8%B7%B5%E6%8B%93%E6%89%91.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/45/f8/E8rNslZj_o.png" width="800" alt="拓扑" style="border:0px;"></a> </li><li style="list-style:circle;">数据输入RPS符合预期。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540798722879/%E5%AE%9E%E8%B7%B5RPS%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/fc/30/6m4xb8iF_o.png" width="800" alt="实践输入RPS" style="border:0px;"></a> </li></ul></li></ol> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E9%9D%9E%E9%A6%96%E6%AC%A1%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>非首次性能调优</h4> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;"> <p style="line-height:24px;"><span style="font-weight:700;">停止</span>&gt;<span style="font-weight:700;">下线</span>作业。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540800905393/%E5%AE%9E%E8%B7%B5%E4%B8%8B%E7%BA%BF%E4%BD%9C%E4%B8%9A.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/bf/aa/GHFJNOIl_o.png" width="800" alt="实践下线作业" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">重新<span style="font-weight:700;">上线</span>作业。选择<span style="font-weight:700;">智能推荐配置</span>，<span style="font-weight:700;">指定使用</span>CU数为系统默认，不填即可。点击<span style="font-weight:700;">下一步</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540801304228/%E5%AE%9E%E8%B7%B5%E9%87%8D%E6%96%B0%E8%B0%83%E8%AF%95.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/b9/59/Zf9qhrme_o.png" width="800" alt="实践重新上线作业" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">数据检查，再次预估消耗CU数。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540795569014/%E5%AE%9E%E8%B7%B5%E9%A2%84%E8%AE%A1%E6%B6%88%E8%80%974.5CU.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/f4/3c/r9sJPFqE_o.png" width="800" alt="实践数据检查" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">在<span style="font-weight:700;">运维</span>界面<span style="font-weight:700;">启动</span>作业，待作业稳定运行十分钟后，即可再一次性能调优。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540804416599/%E5%AE%9E%E8%B7%B5%E5%90%AF%E5%8A%A8%E4%BD%9C%E4%B8%9A.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/3e/c9/AITxIb2b_o.png" width="800" alt="实践启动" style="border:0px;"></a></p> </li></ol> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">说明：</span></p> 
  <ul style="list-style:none;"><li style="list-style:disc;">自动配置调优一般需要3到5次才能达到理想的调优效果。请完成<span style="font-weight:700;">首次性能调优</span>后，重复<span style="font-weight:700;">非首次性能调优</span>过程多次。</li><li style="list-style:disc;">每次调优前，请确保足够的作业运行时长，建议10分钟以上。</li><li style="list-style:disc;">指定CU数（参考值） = 实际消耗CU数*目标RPS/当前RPS。 
    <ul style="list-style:none;"><li style="list-style:circle;">实际消耗CU数：上一次作业运行时实际消耗CU</li><li style="list-style:circle;">目标RPS：输入流数据的实际RPS（或QPS）</li><li style="list-style:circle;">当前RPS：上一次作业运行时实际的输入RPS</li></ul></li></ul> 
 </blockquote> 
 <h3 style="font-size:20px;color:rgb(102,102,102);line-height:20px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>手动配置调优</h3> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">手动配置调优可以分以下三个类型。</p> 
 <ul style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:disc;">资源调优</li><li style="list-style:disc;">作业参数调优</li><li style="list-style:disc;">上下游参数调优</li></ul> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>资源调优</h4> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">资源调优即是对作业中的Operator的并发数（parallelism）、CPU（core）、堆内存（heap_memory）等参数进行调优。</p> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E5%88%86%E6%9E%90%E5%AE%9A%E4%BD%8D%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E8%8A%82%E7%82%B9" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>分析定位资源调优节点</h5> 
 <h6 style="font-size:12px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E5%AE%9A%E4%BD%8D%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%E8%8A%82%E7%82%B9" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>定位性能瓶颈节点</h6> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">性能瓶颈节点为Vertex拓扑图最下游中参数IN_Q值为100%的一个或者多个节点。如下图，7号节点为性能瓶颈节点。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540868525774/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E7%93%B6%E9%A2%88%E8%8A%82%E7%82%B9png.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/f4/92/diowcF4C_o.png" width="800" alt="资源调优瓶颈" style="border:0px;"></a></p> 
 <h6 style="font-size:12px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E5%88%86%E6%9E%90%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%E5%9B%A0%E7%B4%A0" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>分析性能瓶颈因素</h6> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">性能瓶颈的可分为三类。</p> 
 <ul style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:disc;">并发（parallelism）不足</li><li style="list-style:disc;">CPU（core）不足</li><li style="list-style:disc;">MEM（heap_memory）不足</li></ul> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">如下图，7号节点的性能瓶颈是资源（CPU和/或MEM）配置不足所导致。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540868525774/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E7%93%B6%E9%A2%88%E8%8A%82%E7%82%B9png.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/10/e8/joFQFdZw_o.png" width="800" alt="资源调优瓶颈" style="border:0px;"></a></p> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">说明：</span>判断性能瓶颈因素方法</p> 
  <ul style="list-style:none;"><li style="list-style:disc;">瓶颈节点的<span style="font-weight:700;">资源健康分</span>为100，则认为资源已经合理分配，性能瓶颈是并发数不足所导致。</li><li style="list-style:disc;">瓶颈节点的<span style="font-weight:700;">资源健康分</span>低于100，则认为性能瓶颈是单个并发的资源（CPU和/或MEM）配置不足所导致。</li><li style="list-style:disc;">无持续反压，但资源健康分低于100，仅表明单个并发的资源使用率较高，但暂不影响作业性能，可暂不做调优。</li></ul> 
 </blockquote> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">通过作业运维页面中Metrics Graph功能，进一步判断性能瓶颈是CPU不足还是MEM不足。步骤如下。</p> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;"> <p style="line-height:24px;"><span style="font-weight:700;">运维</span>界面中，点击TaskExecutor，找到性能瓶颈节点ID，点击<span style="font-weight:700;">查看详情</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540870953331/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98TaskList.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/2b/c6/sA8f4WE8_o.png" width="800" alt="TaskList" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">选择<span style="font-weight:700;">Metrics Graph</span>，根据曲线图判断CPU或者MEM是否配置不足（很多情况下两者同时不足）。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540875811453/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98MG.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/0b/63/cKIclrLo_o.png" width="800" alt="资源调优MG" style="border:0px;"></a></p> </li></ol> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E8%B0%83%E6%95%B4%E8%B5%84%E6%BA%90%E9%85%8D%E7%BD%AE" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>调整资源配置</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">完成了性能瓶颈因素判断后，点击<span style="font-weight:700;">开发&gt;基本属性&gt;跳转到新窗口配置</span>，开始调整资源配置。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540876712695/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E6%96%B0%E7%AA%97%E5%8F%A3%E9%85%8D%E7%BD%AE.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/88/c8/wJpoDawg_o.png" width="800" alt="资源调优新窗口配置" style="border:0px;"></a></p> 
 <h6 style="font-size:12px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9Operator" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>批量修改Operator</h6> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;"> <p style="line-height:24px;">点击<span style="font-weight:700;">GROUP</span>框，进入<span style="font-weight:700;">批量修改Operator数据</span>窗口。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540877326398/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E6%89%B9%E9%87%8F.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/b0/b9/7ntFBUqt_o.png" width="800" alt="批量" style="border:0px;"></a></p> 
   <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-style:italic;"> 
    <p style="line-height:24px;"><span style="font-weight:700;">说明：</span></p> 
    <ol style="list-style:lower-roman;"><li style="list-style:lower-roman;">GROUP内所有的operator具有相同的并发数。</li><li style="list-style:lower-roman;">GROUP的<span style="font-weight:700;">core</span>为所有operator的最大值。</li><li style="list-style:lower-roman;">GROUP的<span style="font-weight:700;">_memory</span>为所有operator之和。</li><li style="list-style:lower-roman;">建议单个Job维度的CPU:MEM=1:4，即1个核对应4G内存。</li></ol> 
   </blockquote> </li><li style="list-style:decimal;"> <p style="line-height:24px;">配置修改完成后点击应<span style="font-weight:700;">用当前配置并关闭窗口</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540877645593/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E5%BA%94%E7%94%A8%E5%BD%93%E5%89%8D.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/5f/d3/yGltYe1M_o.png" width="800" alt="应用当前配置并关闭窗口" style="border:0px;"></a></p> </li></ol> 
 <h6 style="font-size:12px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E5%8D%95%E4%B8%AA%E4%BF%AE%E6%94%B9Operator" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>单个修改Operator</h6> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;"> <p style="line-height:24px;">点击<span style="font-weight:700;">Operator</span>框，进入<span style="font-weight:700;">修改Operator数据</span>窗口。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540879266541/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E5%8D%95%E4%B8%AA.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/47/5e/JJgrdTNt_o.png" width="800" alt="资源调优单个" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">配置修改完成后点击应<span style="font-weight:700;">用当前配置并关闭窗口</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540877645593/%E8%B5%84%E6%BA%90%E8%B0%83%E4%BC%98%E5%BA%94%E7%94%A8%E5%BD%93%E5%89%8D.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/1e/f4/9BfVMzw2_o.png" width="800" alt="应用当前配置并关闭窗口" style="border:0px;"></a></p> </li></ol> 
 <h6 style="font-size:12px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E5%8F%82%E6%95%B0%E8%B0%83%E6%95%B4%E8%AF%B4%E6%98%8E" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>参数调整说明</h6> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">您只需调整parallelism、core和heap_memory三个参数，即能满足大部分的资源调优需求。</p> 
 <ul style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:disc;">Parallelism 
   <ul style="list-style:none;"><li style="list-style:circle;">source节点<br> 资源根据上游Partition数来。例如source的个数是16，那么source的并发可以配置为16、8、4等。不能超过16。</li><li style="list-style:circle;">中间节点<br> 根据预估的QPS计算。对于数据量较小的任务，设置和source相同的并发度。QPS高的任务，可以配置更大的并发数，例如64、128、或者256。</li><li style="list-style:circle;">sink节点<br> 并发度和下游存储的Partition数相关，一般是下游Partition个数的2~3倍。如果配置太大会导致数据写入超时或失败。例如，下游sink的个数是16，那么sink的并发最大可以配置48。</li></ul></li><li style="list-style:disc;">Core<br> 即CPU，根据实际CPU使用比例配置，建议配置值为0.25，可大于1。</li><li style="list-style:disc;">Heap_memory<br> 堆内存。根据实际内存使用状况进行配置。</li><li style="list-style:disc;">其他参数 
   <ul style="list-style:none;"><li style="list-style:circle;">state_size：默认为0，group by、join、over、window等operator需设置为1。</li><li style="list-style:circle;">direct_memory：JVM堆外内存，默认值为0, 建议不要修改。</li><li style="list-style:circle;">native_memory：JVM堆外内存，默认值为0，建议修改为10MB。</li><li style="list-style:circle;">chainingStrategy：chain策略，根据实际需要修改。</li></ul></li></ul> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E4%BD%9C%E4%B8%9A%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>作业参数调优</h4> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;"> <p style="line-height:24px;">在<span style="font-weight:700;">开发</span>页面的右侧选择<span style="font-weight:700;">作业参数</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540884440957/%E4%BD%9C%E5%8F%82%E8%B0%83%E4%BC%98.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/2c/5b/laL0RaVC_o.png" width="800" alt="作业参数调优" style="border:0px;"></a></p> </li><li style="list-style:decimal;"> <p style="line-height:24px;">输入调优语句。</p> </li></ol> 
 <table style="border-collapse:collapse;border-spacing:0px;table-layout:fixed;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><thead><tr><th style="border-right-width:1px;border-style:none solid none none;border-right-color:rgb(223,223,223);">优化</th><th style="border-right-width:1px;border-left-width:1px;border-style:none solid;border-right-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">解决问题</th><th style="border-left-width:1px;border-style:none none none solid;border-left-color:rgb(223,223,223);">调优语句</th></tr></thead><tbody><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">MiniBatch</td><td style="border:1px solid rgb(223,223,223);">提升吞吐，降低对下游压力仅对Group by有效。</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);"> <code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">blink.miniBatch.allowLatencyMs=5000</code><br><code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">blink.miniBatch.size=1000</code> </td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">LocalGlobal</td><td style="border:1px solid rgb(223,223,223);">优化数据倾斜问题</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);"><code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">blink.localAgg.enable=true</code></td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">TTL</td><td style="border:1px solid rgb(223,223,223);">设置State状态时间</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);"> <code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">1.x：state.backend.rocksdb.ttl.ms=129600000</code><br><code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">2.x：state.backend.niagara.ttl.ms=129600000</code><br> 其中，1.x 表示需显式开启，2.x 表示默认开启。</td></tr></tbody></table> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">注意：</span>添加或删除MiniBatch或LocalGlobal参数，job状态会丢失，修改值大小状态不会丢失。</p> 
 </blockquote> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E4%B8%8A%E4%B8%8B%E6%B8%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>上下游参数调优</h4> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">实时计算 Flink可以在with参数内设置相应的参数，达到调优上下游存储性能的目的。</p> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">调优步骤：</p> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;">进入作业的<span style="font-weight:700;">开发</span>界面。</li><li style="list-style:decimal;">确定需要调优的上下游引用表的语句。</li><li style="list-style:decimal;">在with参数中配置相应的调优参数。如下图。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540887042323/%E4%BD%9C%E4%B8%9A%E8%B0%83%E4%BC%98%E4%B8%8A%E4%B8%8B.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/ac/4b/31vmRf65_o.png" width="800" alt="参数调优上下游" style="border:0px;"></a> </li></ol> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="batchsize%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>batchsize参数调优</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">实时计算 Flink的每条数据均会触发上下游存储的读写，会对上下游存储形成性能压力。可以通过设置batchsize，批量的读写上下游存储数据来降低对上下游存储的压力。</p> 
 <table style="border-collapse:collapse;border-spacing:0px;table-layout:fixed;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><thead><tr><th style="border-right-width:1px;border-style:none solid none none;border-right-color:rgb(223,223,223);">名字</th><th style="border-right-width:1px;border-left-width:1px;border-style:none solid;border-right-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">参数</th><th style="border-right-width:1px;border-left-width:1px;border-style:none solid;border-right-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">详情</th><th style="border-left-width:1px;border-style:none none none solid;border-left-color:rgb(223,223,223);">设置参数值</th></tr></thead><tbody><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">Datahub源表</td><td style="border:1px solid rgb(223,223,223);">batchReadSize</td><td style="border:1px solid rgb(223,223,223);">单次读取条数</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">可选，默认为10</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">Datahub结果表</td><td style="border:1px solid rgb(223,223,223);">batchSize</td><td style="border:1px solid rgb(223,223,223);">单次写入条数</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">可选，默认为300</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">日志服务源表</td><td style="border:1px solid rgb(223,223,223);">batchGetSize</td><td style="border:1px solid rgb(223,223,223);">单次读取logGroup条数</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">可选，默认为10</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">ADB结果表</td><td style="border:1px solid rgb(223,223,223);">batchSize</td><td style="border:1px solid rgb(223,223,223);">每次写入的批次大小</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">可选，默认为1000</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">RDS结果表</td><td style="border:1px solid rgb(223,223,223);">batchSize</td><td style="border:1px solid rgb(223,223,223);">每次写入的批次大小</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">可选，默认为50</td></tr></tbody></table> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">注意：</span> 添加、修改或者删除以上参数后，作业必须停止-启动后，调优才能生效。</p> 
 </blockquote> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="cache%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>cache参数调优</h5> 
 <table style="border-collapse:collapse;border-spacing:0px;table-layout:fixed;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><thead><tr><th style="border-right-width:1px;border-style:none solid none none;border-right-color:rgb(223,223,223);">名字</th><th style="border-right-width:1px;border-left-width:1px;border-style:none solid;border-right-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">参数</th><th style="border-right-width:1px;border-left-width:1px;border-style:none solid;border-right-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">详情</th><th style="border-left-width:1px;border-style:none none none solid;border-left-color:rgb(223,223,223);">设置参数值</th></tr></thead><tbody><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">RDS维表</td><td style="border:1px solid rgb(223,223,223);">Cache</td><td style="border:1px solid rgb(223,223,223);">缓存策略</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>,可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>、<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">RDS维表</td><td style="border:1px solid rgb(223,223,223);">cacheSize</td><td style="border:1px solid rgb(223,223,223);">缓存大小</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>,可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>、<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">RDS维表</td><td style="border:1px solid rgb(223,223,223);">cacheTTLMs</td><td style="border:1px solid rgb(223,223,223);">缓存超时时间</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>,可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>、<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">OTS维表</td><td style="border:1px solid rgb(223,223,223);">Cache</td><td style="border:1px solid rgb(223,223,223);">缓存策略</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>, 可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>,不支持<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">OTS维表</td><td style="border:1px solid rgb(223,223,223);">cacheSize</td><td style="border:1px solid rgb(223,223,223);">缓存大小</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>, 可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>,不支持<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr><tr><td style="border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-style:solid solid solid none;border-top-color:rgb(223,223,223);border-right-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);">OTS维表</td><td style="border:1px solid rgb(223,223,223);">cacheTTLMs</td><td style="border:1px solid rgb(223,223,223);">缓存超时时间</td><td style="border-top-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid none solid solid;border-top-color:rgb(223,223,223);border-bottom-color:rgb(223,223,223);border-left-color:rgb(223,223,223);">默认值为<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">None</code>, 可选<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">LRU</code>,不支持<code style="font-family:'YaHei Consolas Hybrid', Consolas, 'Meiryo UI', 'Malgun Gothic', 'Segoe UI', 'Trebuchet MS', Helvetica, monospace, monospace;">ALL</code>。</td></tr></tbody></table> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">注意：</span> 添加、修改或者删除以上参数后，作业必须停止-启动后，调优才能生效。</p> 
 </blockquote> 
 <h4 style="font-size:16px;color:rgb(102,102,102);line-height:16px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE%E8%B0%83%E4%BC%98%E6%B5%81%E7%A8%8B" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>手动配置调优流程</h4> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;">资源调优、作业参数调优、上下游参数调优</li><li style="list-style:decimal;">开发上线作业</li><li style="list-style:decimal;">资源配置方式：使用上次资源配置</li><li style="list-style:decimal;">数据检查</li><li style="list-style:decimal;">上线</li></ol> 
 <blockquote style="color:rgb(119,119,119);border-left-width:4px;border-left-style:solid;border-left-color:rgb(221,221,221);font-size:14px;font-style:italic;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;line-height:22.4px;"> 
  <p style="line-height:24px;"><span style="font-weight:700;">说明：</span>完成资源、作业参数、上下游参数调优后，手动配置调优后续的步骤与自动配置调优基本一致。区别在于资源配置环节需要选择<span style="font-weight:700;">使用上次资源配置</span>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540888062097/%E4%B8%8A%E6%AC%A1%E8%B5%84%E6%BA%90%E9%85%8D%E7%BD%AE.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/71/fd/NybrA1QC_o.png" width="800" alt="上次资源配置" style="border:0px;"></a></p> 
 </blockquote> 
 <h3 style="font-size:20px;color:rgb(102,102,102);line-height:20px;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="FAQ" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>FAQ</h3> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q%EF%BC%9A%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E5%90%8E%E4%BD%9C%E4%B8%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%90%E8%A1%8C%E4%B8%8D%E8%B5%B7%E6%9D%A5%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q：性能调优后作业为什么运行不起来？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A:可能性1：首次自动配置时指定了CU数，但指定的CU数太小（比如小于自动配置默认算法的建议值，多见于作业比较复杂的情况），建议首次自动配置时不指定CU数。<br> 可能性2：默认算法建议的CU数或指定的CU数超过了项目当前可用的CU数，建议扩容。</p> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q%EF%BC%9AVertex%E6%8B%93%E6%89%91%E4%B8%AD%E7%9C%8B%E4%B8%8D%E5%88%B0%E6%8C%81%E7%BB%AD%E5%8F%8D%E5%8E%8B%EF%BC%8C%E4%BD%86%E5%BB%B6%E8%BF%9F%E5%8D%B4%E9%9D%9E%E5%B8%B8%E5%A4%A7%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q：Vertex拓扑中看不到持续反压，但延迟却非常大，为什么？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A：可能性1：若延时直线上升，需考虑是否上游source中部分partition中没有新的数据，因为目前delay统计的是所有partition的延时最大值。<br> 可能性2：Vertex拓扑中看不到持续反压，那么性能瓶颈点可能出现在source节点。因为source节点没有输入缓存队列，即使有性能问题，IN_Q也永远为0（同样，sink节点的OUT_Q也永远为0）。<br> 解决方案：通过手动配置调优，将source节点（GROUP）中的operator中chainingStrategy修改为HEAD，将其从GROUP中拆解出来。然后上线运行后再看具体是哪个节点是性能瓶颈节点，若依然看不到性能瓶颈节点，则可能是因为上游source吞吐不够，需考虑增加source的batchsize或增加上游source的shard数。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540889818444/Q21.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/5d/5d/aJdRTgLm_o.png" width="800" alt="q21" style="border:0px;"></a><br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540889835897/Q22.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/51/30/yBZFBh3Y_o.png" width="800" alt="q22" style="border:0px;"></a></p> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q:%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%8C%81%E7%BB%AD%E5%8F%8D%E5%8E%8B%EF%BC%8C%E5%8F%8D%E5%8E%8B%E6%97%B6%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%E7%82%B9%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q:如何判断持续反压，反压时如何判断性能瓶颈点？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A:Vertex拓扑中某些节点的IN_Q持续为100%则存在持续反压情况，最后一个(或多个)IN_Q为100%的节点为性能瓶颈点。如下示例：<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540889947215/Q31.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/f7/36/SOf6UCGe_o.png" width="800" alt="q31" style="border:0px;"></a><br> 上图存在反压,瓶颈在6号节点。</p> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1541079890652/Q32.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/49/28/JnZSt1FA_o.png" width="800" alt="q32" style="border:0px;"></a><br> 上图存在反压，瓶颈在2号节点。</p> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1541080012898/Q33.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/03/89/9D1IDOUl_o.png" width="800" alt="q33" style="border:0px;"></a><br> 上图存在反压，瓶颈在8号节点。</p> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540890089187/Q34.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/8a/5e/jQSEUxwY_o.png" width="800" alt="q34" style="border:0px;"></a><br> 上图<span style="font-weight:700;">可能</span>存在节点，瓶颈在0号节点。</p> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q:%20%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%80%BE%E6%96%9C%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q: 如何判断数据倾斜？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A：(1)表象上看，某些节点不论增加多大的并发仍存在性能瓶颈，则可能存在数据倾斜。<br> (2)在Vertex拓扑中点击疑似存在数据倾斜的节点（一般为性能瓶颈节点），进入SubTask List界面，重点观察RecvCnt和InQueue，若各ID对应的RecvCnt值差异较大（一般超过1个数量级）则认为存在数据倾斜，若个别ID的InQueue长期为100%，则认为可能存在数据倾斜。<br> 解决方案：请您参看<a href="https://help.aliyun.com/knowledge_detail/68645.html" rel="nofollow" title="GROUP BY 数据出现热点、数据倾斜" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;">GROUP BY 数据出现热点、数据倾斜</a>。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540890357918/q4.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/b3/aa/l7avCqeq_o.png" width="800" alt="q4" style="border:0px;"></a></p> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q:%20%E4%B8%8A%E7%BA%BF%E6%97%B6%E6%8C%87%E5%AE%9A15CU%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B8%8A%E7%BA%BF%E5%90%8E%E5%AE%9E%E9%99%85%E6%B6%88%E8%80%97%E4%BB%85%E4%B8%BA10CU%EF%BC%8C%E4%BB%80%E4%B9%88%E5%8E%9F%E5%9B%A0%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q: 上线时指定15CU，但是上线后实际消耗仅为10CU，什么原因？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A：这种问题一般发生在Vertex只有一个节点的情况，此时由于source上游的物理表的shard数为1，Flink要求source的并发不能超过上游shard数，导致无法增加并发，因此亦无法增加到指定的CU数。<br> 解决方案：</p> 
 <ol style="list-style:none;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;font-size:14px;line-height:22.4px;"><li style="list-style:decimal;">增加上游物理表的shard数。</li><li style="list-style:decimal;">将ID0的节点中的operator拆开，将source节点（GROUP）中的operator chainingStrategy修改为HEAD，将其从GROUP中拆解出来，然后手动配置调优。</li></ol> 
 <h5 style="font-size:14px;color:rgb(102,102,102);line-height:1.4;font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"> <a name="Q:%20%E4%B8%8A%E7%BA%BF%E6%97%B6%E5%87%BA%E7%8E%B0%E5%A6%82%E5%B7%A6%E4%B8%8A%E5%9B%BE%E7%9A%84%E5%91%8A%E8%AD%A6%EF%BC%8C%E6%88%96%E5%87%BA%E7%8E%B0%E8%AF%B8%E5%A6%82Cannot%20set%20chaining%20strategy%20on%20Union%20Transformation%E9%94%99%E8%AF%AF%EF%BC%8C%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%EF%BC%9F" class="reference-link" style="color:rgb(0,193,222);font-weight:inherit;background:0px 0px;"></a>Q: 上线时出现如左上图的告警，或出现诸如“Cannot set chaining strategy on Union Transformation”错误，如何处理？</h5> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;">A：这是由于作业的SQL有改动，导致DAG改变。<br> 解决方案：通过重新获取配置解决，<span style="font-weight:700;">开发-基本属性-跳转到新窗口配置</span>-重新获取配置信息。<br><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540890649372/q61.png" rel="nofollow" style="text-decoration:none;color:rgb(0,183,211);background:0px 0px;"><img src="https://images2.imgbox.com/ee/66/jGOo3ozo_o.png" width="800" alt="q61" style="border:0px;"></a></p> 
 <p style="font-size:14px;line-height:24px;color:rgb(51,51,51);font-family:PingFangSC, 'helvetica neue', 'hiragino sans gb', arial, 'microsoft yahei ui', 'microsoft yahei', simsun, sans-serif;"><a href="http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/93814/cn_zh/1540890662764/q62.png" rel="nofollow" style="color:rgb(0,175,201);background:0px 0px;"><img src="https://images2.imgbox.com/3a/d0/op2jqYut_o.png" width="800" alt="q62" style="border:0px;"></a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26907642c276c236173a4d859781872d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">梯度下降算法过程详细解读</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3796027e2d2e0100a7382327bd96d849/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c&#43;&#43; 通过函数获得数组的大小</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>