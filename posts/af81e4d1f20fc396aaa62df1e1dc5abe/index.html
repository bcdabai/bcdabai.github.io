<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PyQt5入门教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PyQt5入门教程" />
<meta property="og:description" content="PyQt5入门教程 假定已有环境如下：
Windows
Python VSCode （我们接下来会准备pyqt5和其desinger，没必要手搓qt5界面代码，手搓它，还不如用Tkinter）
1.安装PyQt5
下面使用pip来安装PyQt5，（pip3也行）
豆瓣镜像安装
pip install PyQt5 -i http://pypi.douban.com/simple/ 2.因为Qt Designer在Python3.5版本从PyQt5转移到了tools，故还需要安装pyqt5-tools
pip install pyqt5-tools 到这一步，PyQt5就安装完成了，检查下是否已经安装成功：
Win&#43;S召唤出 搜索框，输入designer，如果看到跟下图类似的结果说明PyQt Designer已经被安装
（可能由于各式各样的原因，可能qt desinger无法命令行安装，直接百度qt desinger 下载一个也行，其大小大致在30-40mb）
初识Qt Designer Qt Designer的界面是全英文的，有汉化方法，有需要自行搜索。
1.总之，先打开它，怎么打开都行
（不知道安装到哪了就，Win&#43;S搜索框，输入designer并敲回车，就能够启动Qt Designer了。）
初次启动会弹出这个“New Form”窗口，一般来说选择“Main Window”然后点击“Create”就可以了。
下方有个“Show this Dialogue on Startup”的checkbox，如果不想每次启动都看到这个“New Form”窗口，可以取消勾选。
创建“Main Window”之后，我们会看到如下画面
下面就来简单介绍下整个画面的构成： 左侧的“Widget Box”就是各种可以自由拖动的组件 中间的“MainWindow - untitled”窗体就是画布 右上方的&#34;Object Inspector&#34;可以查看当前ui的结构 右侧中部的&#34;Property Editor&#34;可以设置当前选中组件的属性 右下方的&#34;Resource Browser&#34;可以添加各种素材，比如图片，背景等等，目前可以不管 大致了解了每个板块之后，就可以正式开始编写第一个UI了 HelloWorld! 通常来说，编写GUI有两种方法：第一种就是直接使用方便快捷的Qt Designer，第二种就是写代码。在有Qt Designer的情况下，是完全不推荐费时费力去手写GUI代码的。Qt Designer可以所见即所得，并且可以方便的修改并做出各种调整。
按照惯例，我们先来实现一个能够显示HelloWorld的窗口。
1）添加文本 ，编辑
在左侧的“Widget Box”栏目中找到“Display Widgets”分类，将“Label”拖拽到屏幕中间的“MainWindow”画布上，你就获得了一个仅用于显示文字的文本框，如下图所示。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/af81e4d1f20fc396aaa62df1e1dc5abe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-06T16:36:07+08:00" />
<meta property="article:modified_time" content="2023-02-06T16:36:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PyQt5入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">PyQt5入门教程</span></h3> 
 <p style="text-align:null;">假定已有环境如下：</p> 
 <p style="text-align:null;">Windows</p> 
 <p style="text-align:null;">Python </p> 
 <p style="text-align:null;">VSCode </p> 
 <p style="text-align:left;">（我们接下来会准备pyqt5和其desinger，没必要手搓qt5界面代码，手搓它，还不如用Tkinter）</p> 
 <hr> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">1.安装PyQt5</span></p> 
 <p style="text-align:null;">下面使用pip来安装PyQt5，<span class="kdocs-strike" style="text-decoration:ine-through;">（pip3也行）</span></p> 
 <p style="text-align:null;">豆瓣镜像安装</p> 
 <pre class="kdocs-python"><code class="language-python">pip install PyQt5 -i http://pypi.douban.com/simple/ </code></pre> 
 <p style="text-align:null;">2.<span class="kdocs-bold" style="font-weight:bold;">因为Qt Designer在Python3.5版本从PyQt5转移到了tools，故还需要安装pyqt5-tools</span></p> 
 <pre class="kdocs-python"><code class="language-python">pip install pyqt5-tools</code></pre> 
 <p style="text-align:null;">到这一步，PyQt5就安装完成了，检查下是否已经安装成功：</p> 
 <p style="text-align:null;">Win+S召唤出 搜索框，输入designer，如果看到跟下图类似的结果说明PyQt Designer已经被安装</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:442px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:21.9457%;height:0;"> 
    <img src="https://images2.imgbox.com/95/20/W63CifR2_o.png" style="margin-left:;display:block;width:442px;margin-top:-21.9457%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">（可能由于各式各样的原因，可能qt desinger无法命令行安装，直接百度qt desinger 下载一个也行，其大小大致在30-40mb）</p> 
 <hr> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">初识Qt Designer</span></h3> 
 <p style="text-align:null;"><span class="kdocs-strike" style="text-decoration:ine-through;">Qt Designer的界面是全英文的，有汉化方法，有需要自行搜索。</span></p> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">1.总之，先打开它，怎么打开都行</span></p> 
 <p style="text-align:null;">（不知道安装到哪了就，Win+S搜索框，输入designer并敲回车，就能够启动Qt Designer了。）</p> 
 <p style="text-align:null;">初次启动会弹出这个“New Form”窗口，一般来说选择“Main Window”然后点击“Create”就可以了。</p> 
 <p style="text-align:null;"><span class="kdocs-strike" style="text-decoration:ine-through;">下方有个“Show this Dialogue on Startup”的checkbox，如果不想每次启动都看到这个“New Form”窗口，可以取消勾选。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:356px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:87.35955%;height:0;"> 
    <img src="https://images2.imgbox.com/07/2a/vCk6IhAQ_o.png" style="margin-left:;display:block;width:356px;margin-top:-87.35955%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">创建“Main Window”之后，我们会看到如下画面</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:740px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:52.972973%;height:0;"> 
    <img src="https://images2.imgbox.com/a5/81/qw9poVOs_o.png" style="margin-left:;display:block;width:740px;margin-top:-52.972973%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <pre class="kdocs-python"><code class="language-python">下面就来简单介绍下整个画面的构成：
左侧的“Widget Box”就是各种可以自由拖动的组件
中间的“MainWindow - untitled”窗体就是画布
右上方的"Object Inspector"可以查看当前ui的结构
右侧中部的"Property Editor"可以设置当前选中组件的属性
右下方的"Resource Browser"可以添加各种素材，比如图片，背景等等，目前可以不管
大致了解了每个板块之后，就可以正式开始编写第一个UI了</code></pre> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">HelloWorld!</span></h3> 
 <p style="text-align:null;">通常来说，编写GUI有两种方法：第一种就是直接使用方便快捷的Qt Designer，第二种就是写代码。在有Qt Designer的情况下，是完全不推荐费时费力去手写GUI代码的。Qt Designer可以所见即所得，并且可以方便的修改并做出各种调整。</p> 
 <p style="text-align:null;">按照惯例，我们先来实现一个能够显示HelloWorld的窗口。</p> 
 <p style="text-align:null;">1）添加文本 ，编辑</p> 
 <p style="text-align:null;">在左侧的“Widget Box”栏目中找到“Display Widgets”分类，将“Label”拖拽到屏幕中间的“MainWindow”画布上，你就获得了一个仅用于显示文字的文本框，如下图所示。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:379px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:74.93404%;height:0;"> 
    <img src="https://images2.imgbox.com/d2/c2/JXiA66D5_o.png" style="margin-left:;display:block;width:379px;margin-top:-74.93404%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:left;">再双击上图中的“TextLabel”，可对文本进行编辑，这里我们将其改成“HelloWorld!”，如下图所示。如果文字没有完全展示出来，可以自行拖拽空间改变尺寸。</p> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">编辑完文本之后记得敲击回车令其生效！</span></p> 
 <p style=""></p> 
 <p style="text-align:null;">3）添加按钮</p> 
 <p style="text-align:null;">使用同样的方法添加一个按钮（PushButton）并将其显示的文本改成“HelloWorld!”，如下图所示。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:521px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:62.1881%;height:0;"> 
    <img src="https://images2.imgbox.com/2e/4d/QkgqvcTr_o.png" style="margin-left:;display:block;width:521px;margin-top:-62.1881%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">4）修改窗口标题</p> 
 <p style="text-align:null;">下面修改窗口标题。选中右上方的"Object Inspector"中的“MainWindow”，然后在右侧中部的"Property Editor"中找到“windowTitle”这个属性，在Value这一栏进行修改，修改完记得敲击回车。</p> 
 <p style="text-align:null;">5）编辑菜单栏</p> 
 <p style="text-align:null;">注意到画布的左上方有个“Type Here”，双击它即可开始编辑菜单栏。菜单栏支持创建多级菜单以及分割线（separator）。我随意创建了一些菜单项目，如下图所示。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:518px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:63.32046%;height:0;"> 
    <img src="https://images2.imgbox.com/1c/6f/ZdbdgE6F_o.png" style="margin-left:;display:block;width:518px;margin-top:-63.32046%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">6）预览</p> 
 <p style="text-align:null;">使用快捷键Ctrl+R预览当前编写的GUI（或者从菜单栏的Form &gt; Preview / Preview in进入）</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:463px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:63.06695%;height:0;"> 
    <img src="https://images2.imgbox.com/df/cf/5bSdPKHJ_o.jpg" style="margin-left:;display:block;width:463px;margin-top:-63.06695%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">7）保存</p> 
 <p style="text-align:null;">如果觉得完成了，那就可以保存成.ui的文件，这里命名为name.ui。</p> 
 <p style="text-align:null;">8）生成Python代码</p> 
 <p style="text-align:null;">使用cmd将目录切到刚刚的ui文件下。请自行将下面命令中的name替换成文件名，比如本例中的“HelloWorld.ui”</p> 
 <pre class="kdocs-python"><code class="language-python">pyuic5 -o name.py name.ui</code></pre> 
 <p style="text-align:null;">9）运行Python代码</p> 
 <p style="text-align:null;">此时尝试运行刚刚生成的“name.py”是没用的，闪现一下结束运行了。</p> 
 <p style="text-align:null;">我们在同一个目录下另外创建一个程序叫做“main.py”，并复制如下内容。</p> 
 <pre class="kdocs-python"><code class="language-python">import sys
from PyQt5.QtWidgets import QApplication, QMainWindow

import file_name                        #第一处
#（更改所有file_name 为之前生成的界面py的文件名，如name，不加.py）
if __name__ == '__main__':
    app = QApplication(sys.argv)
    MainWindow = QMainWindow()
    ui = file_name.Ui_MainWindow()     #第二处
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())</code></pre> 
 <p style="text-align:null;">然后运行“main.py”，你就能看到刚刚编写的GUI了！</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:397px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:62.97229%;height:0;"> 
    <img src="https://images2.imgbox.com/c9/f5/vdi9mcbt_o.jpg" style="margin-left:;display:block;width:397px;margin-top:-62.97229%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">10）组件自适应</p> 
 <p style="text-align:null;">如果你刚刚尝试去缩放窗口，会发现组件并不会自适应缩放，因此我们需要回到Qt Designer中进行一些额外的设置。</p> 
 <p style="text-align:null;">点击画布空白处，然后在上方工具栏找到grid layout或者form layout，在本例中我们使用grid layout。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:705px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:14.468085%;height:0;"> 
    <img src="https://images2.imgbox.com/71/c1/abM1OJrj_o.png" style="margin-left:;display:block;width:705px;margin-top:-14.468085%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">顺带一提，上图中layout的左边有三条横线以及三条竖线的图标，这两个是用于对齐组件，非常实用。</p> 
 <p style="text-align:null;">设置grid layout后，我们使用Ctrl+R预览，这次组件可以自适应了！因为我们已经将UI（HelloWorld.py/HelloWorld.ui）跟逻辑（main.py）分离</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">功能实现</span></h3> 
 <p style="text-align:null;">刚刚写的HelloWorld中，我们设置的按钮（PushButton）是没有实际作用的，因为我们并没有告诉这个按钮应该做什么。实际上，要让这个按钮做点什么只需要增加一行代码就可以了。</p> 
 <p style="text-align:null;">1）获取按钮id</p> 
 <p style="text-align:null;">打开HelloWorld.ui，在designer中选中对应的按钮，从“Property Editor”中可以得知这个按钮的“objectName”叫做“pushButton”，如下图所示。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:256px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:62.5%;height:0;"> 
    <img src="https://images2.imgbox.com/f2/42/GClRVA11_o.jpg" style="margin-left:;display:block;width:256px;margin-top:-62.5%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">2）设置触发</p> 
 <p style="text-align:null;">Qt中有“信号和槽(signal and slot)”这个概念，不过目前无需深究，也无需在Designer中去设置对应按钮的“信号和槽”，直接在“main.py”中“MainWindow.show()”的后面加入下面这样的一行代码</p> 
 <pre class="kdocs-python"><code class="language-python">ui.pushButton.clicked.connect(button_clicked)

#下面简单解释下这行代码
#pushButton就是刚刚获取的按钮id
#clicked就是信号，因为是点击，所以我们这里用clicked
#button_clicked就是对应要调用的槽，注意这里函数并不写成button_clicked()</code></pre> 
 <p style="text-align:null;">3）设置函数</p> 
 <p style="text-align:null;">既然刚刚设置了按钮的触发并绑定了一个函数，我们就要在“main.py”中实现它。示例如下</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">def button_clicked():
    print("临时显示以用来提意！")</code></pre> 
 <p style="text-align:null;">4）运行！</p> 
 <p style="text-align:null;">UI跟逻辑分离的好处就在这里，我们这次不用去管“HelloWorld.py”了，直接运行修改完的“main.py”。点击按钮，这次你会发现在控制台中有了我们预设的输出。</p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;"><span class="kdocs-underline" style="text-decoration:underline;">到这里就差不多了，基本完成</span></span></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"></p> 
 <h3 style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">实战，写个带GUI的汇率转换</span></h3> 
 <p style="text-align:null;">1）设计UI</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:497px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:49.899395%;height:0;"> 
    <img src="https://images2.imgbox.com/43/94/GfDfYNy1_o.jpg" style="margin-left:;display:block;width:497px;margin-top:-49.899395%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">2）传参</p> 
 <p style="text-align:null;">我们已经介绍了如何让按钮响应点击操作，但是并没有接受任何参数，而且只是在控制台输出。但是，已经说明了并不能通过正常的方式进行传参。因此，对于传参，有两种解决方案，一种是使用lambda，还有一种是使用functool.partial。在接下来的环节中我们会使用partial。</p> 
 <p style="text-align:null;">partial的用法如下所示：</p> 
 <pre class="kdocs-python"><code class="language-python">partial(function, arg1, arg2, ......)
#既然使用partial传参，那么我们就要在程序（main.py）的头部加上下面这行。
from functools import partial
#然后我们把上一节中的按钮触发那行代码修改成下面这样。
ui.pushButton.clicked.connect(partial(convert, ui))</code></pre> 
 <p style="text-align:null;">3）编写convert函数</p> 
 <p style="text-align:null;">首先，我们要获取用户输入的数字。为了使得教程简洁易懂，我们这次只讲解单向的汇率转换。既然是单项的转换，那么我们只需要获取左侧的文本框id。在本例中，左侧的文本框id为lineEdit。如果你对此感到一头雾水，请停下并回头复习。</p> 
 <p style="text-align:null;"></p> 
 <pre class="kdocs-python"><code class="language-python">#获取文本使用的是text()方法，因此读取用户输入的代码如下
input = ui.lineEdit.text()
#接着我们进行汇率转换，注意这里要进行类型转换
result = float(input) * 6.71
#最后我们让右边的文本框显示结果
ui.lineEdit_2.setText(str(result))
#下面是convert函数的代码
def convert(ui):
    input = ui.lineEdit.text()
    result = float(input) * 6.7
    ui.lineEdit_2.setText(str(result))1234</code></pre> 
 <p style="text-align:null;">一个简单的汇率转换器就这样诞生了！</p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">那么，如何知道一个组件都有什么方法呢？直接去<a class="kdocs-link" style="color:#0A6CFF;" href="https://link.zhihu.com/?target=https%3A//doc.qt.io/archives/qt-4.8/qtgui-module.html" rel="nofollow noopener noreferrer" target="_blank">Qt官方文档</a>查看就可以了。本节使用到的lineEdit的相关方法在<a class="kdocs-link" style="color:#0A6CFF;" href="https://link.zhihu.com/?target=https%3A//doc.qt.io/archives/qt-4.8/qtextedit.html" rel="nofollow noopener noreferrer" target="_blank">这里</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fb3908b05c6f4e295977cfa45bfd8546/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Go 双链表 接收者是值类型好，还是指针类型好</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/34a49eea00124ac29011ece339e22286/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pinctrl 和 gpio 子系统点灯下</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>