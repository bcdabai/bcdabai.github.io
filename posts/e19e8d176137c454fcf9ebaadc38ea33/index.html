<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot&#43;Vue登录注册 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot&#43;Vue登录注册" />
<meta property="og:description" content="首先创建Login.vue
如何创建一个表单
注意：el-form必须写 :model 否则无法使用表单校验功能
&lt;el-form-item&gt;不能少
&lt;el-form :model=&#34;user&#34; :rules=&#34;rules&#34; ref=&#34;userForm&#34;&gt; &lt;el-form-item prop=&#34;username&#34;&gt; &lt;el-input size=&#34;medium&#34; style=&#34;margin: 10px 0&#34; prefix-icon=&#34;el-icon-user&#34; v-model=&#34;user.username&#34; placeholder=&#34;请输入账号&#34;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item prop=&#34;password&#34;&gt; &lt;el-input size=&#34;medium&#34; style=&#34;margin: 10px 0&#34; prefix-icon=&#34;el-icon-lock&#34; show-password v-model=&#34;user.password&#34; placeholder=&#34;请输入密码&#34;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item style=&#34;margin: 10px 0; text-align: right&#34;&gt; &lt;el-button type=&#34;primary&#34; size=&#34;small&#34; autocomplete=&#34;off&#34; @click=&#34;login()&#34;&gt;登录&lt;/el-button&gt; &lt;el-button type=&#34;warning&#34; size=&#34;small&#34; autocomplete=&#34;off&#34;&gt;注册&lt;/el-button&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; 然后在script中的computed中写表单校验ref=&#34;userForm&#34;
//表单校验 computed: { rules() { return { username: [ { required: true, message: &#39;用户名不能为空&#39;, trigger: &#39;blur&#39; }, { min: 3, max: 20, message: &#39;用户名不合法&#39;, trigger: &#39;blur&#39; } ], password: [ { required: true, message: &#39;密码不能为空&#39;, trigger: &#39;blur&#39; }, { min: 6, max: 20, message: &#39;密码格式不正确&#39;, trigger: &#39;blur&#39; } ], } } }, 然后在提交按钮的方法中添加" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e19e8d176137c454fcf9ebaadc38ea33/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-15T14:40:32+08:00" />
<meta property="article:modified_time" content="2023-03-15T14:40:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot&#43;Vue登录注册</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="">首先创建Login.vue</p> 
 <p style="">如何创建一个表单</p> 
 <p style="text-align:null;">注意：el-form必须写 :model 否则无法使用表单校验功能</p> 
 <p style="text-align:null;">&lt;el-form-item&gt;不能少</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext"> &lt;el-form :model="user" :rules="rules" ref="userForm"&gt;
                &lt;el-form-item prop="username"&gt;
                    &lt;el-input size="medium" style="margin: 10px 0" prefix-icon="el-icon-user"
                        v-model="user.username"  placeholder="请输入账号"&gt;&lt;/el-input&gt;
                &lt;/el-form-item&gt;
                &lt;el-form-item prop="password"&gt;
                    &lt;el-input size="medium" style="margin: 10px 0" prefix-icon="el-icon-lock" show-password
                        v-model="user.password" placeholder="请输入密码"&gt;&lt;/el-input&gt;
                &lt;/el-form-item&gt;
                &lt;el-form-item style="margin: 10px 0; text-align: right"&gt;
                    &lt;el-button type="primary" size="small" autocomplete="off" @click="login()"&gt;登录&lt;/el-button&gt;
                    &lt;el-button type="warning" size="small" autocomplete="off"&gt;注册&lt;/el-button&gt;
                &lt;/el-form-item&gt;
            &lt;/el-form&gt;</code></pre> 
 <p style="">然后在script中的computed中写表单校验ref="userForm"</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">//表单校验
    computed: {
        rules() {
            return {
                username: [
                    { required: true, message: '用户名不能为空', trigger: 'blur' },
                    { min: 3, max: 20, message: '用户名不合法', trigger: 'blur' }
                ],
                password: [
                    { required: true, message: '密码不能为空', trigger: 'blur' },
                    { min: 6, max: 20, message: '密码格式不正确', trigger: 'blur' }
                ],
            }
        }
    },</code></pre> 
 <p style="">然后在提交按钮的方法中添加</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext"> this.$refs['userForm'].validate((valid) =&gt; {
                if (valid) {  // 表单校验合法
}
})</code></pre> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">methods: {
        login() {
            this.$refs['userForm'].validate((valid) =&gt; {
                if (valid) {  // 表单校验合法
                    this.request.post("/user/login", this.user).then(res =&gt; {
                        if (res.code === '200') {
                            localStorage.setItem("user", JSON.stringify(res.data))  // 存储用户信息到浏览器
                            this.$router.push("/")
                            this.$message.success("登录成功")
                        } else {
                            this.$message.error(res.msg)
                        }
                    })
                } else {
                    this.$message.error("表单提交失败，请检验您的表单")
                    return false;
                }
            });
        }
    }</code></pre> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1920px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:37.291664%;height:0;"> 
    <img src="https://images2.imgbox.com/76/03/r7sBCDYd_o.png" style="margin-left:;display:block;width:1920px;margin-top:-37.291664%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">然后在springboot中</p> 
 <p style="">Controller</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">/**
     * 用户登录
     *
     * @param userDto
     * @return
     */
    @PostMapping("/login")
    public Result login(@RequestBody UserDto userDto) {
        User dbUser = userService.checkLoginUserbyUsernameAndPassword(userDto);  //返回的是根据userDto的用户名和密码查询数据库中的用户
        if (dbUser==null){
            return Result.error(Constants.CODE_400,"用户名或密码错误");
        }
        if (!dbUser.isStatus()){
            return Result.error(Constants.CODE_401,"账号状态异常，请联系管理员");
        }
        return Result.success(dbUser);
    }</code></pre> 
 <p style="">ServiceImpl</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">  @Override
    public User checkLoginUserbyUsernameAndPassword(UserDto userDto) {

        LambdaQueryWrapper&lt;User&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();
        queryWrapper.eq(User::getUsername, userDto.getUsername());
        queryWrapper.eq(User::getPassword, userDto.getPassword());
        return userDao.selectOne(queryWrapper); //根据用户名和密码查询用户 返回用户对象
    }
</code></pre> 
 <p style="">登录成功后要设置 localStorage.setItem("user", JSON.stringify(res.data)) // 存储用户信息到浏览器</p> 
 <p style="">退出则删除 <span class="kdocs-fontSize" style="font-size:9pt;">localStorage.removeItem("user")</span></p> 
 <h6 style="">完整代码</h6> 
 <p style="">vue</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">&lt;template&gt;
    &lt;div class="wrapper"&gt;
        &lt;div
            style="margin: 200px auto; background-color: #fff; width: 350px; height: 300px; padding: 20px; border-radius: 10px"&gt;
            &lt;div style="margin: 20px 0; text-align: center; font-size: 24px"&gt;&lt;b&gt;登 录&lt;/b&gt;&lt;/div&gt;
            &lt;el-form :model="user" :rules="rules" ref="userForm"&gt;
                &lt;el-form-item prop="username"&gt;
                    &lt;el-input size="medium" style="margin: 10px 0" prefix-icon="el-icon-user"
                        v-model="user.username"  placeholder="请输入账号"&gt;&lt;/el-input&gt;
                &lt;/el-form-item&gt;
                &lt;el-form-item prop="password"&gt;
                    &lt;el-input size="medium" style="margin: 10px 0" prefix-icon="el-icon-lock" show-password
                        v-model="user.password" placeholder="请输入密码"&gt;&lt;/el-input&gt;
                &lt;/el-form-item&gt;
                &lt;el-form-item style="margin: 10px 0; text-align: right"&gt;
                    &lt;el-button type="primary" size="small" autocomplete="off" @click="login()"&gt;登录&lt;/el-button&gt;
                    &lt;el-button type="warning" size="small" autocomplete="off"&gt;注册&lt;/el-button&gt;
                &lt;/el-form-item&gt;
            &lt;/el-form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
  
&lt;script&gt;
export default {
    name: "Login",
    data() {
        return {
            user: {},
        }
    },
    //表单校验
    computed: {
        rules() {
            return {
                username: [
                    { required: true, message: '用户名不能为空', trigger: 'blur' },
                    { min: 3, max: 20, message: '用户名不合法', trigger: 'blur' }
                ],
                password: [
                    { required: true, message: '密码不能为空', trigger: 'blur' },
                    { min: 6, max: 20, message: '密码格式不正确', trigger: 'blur' }
                ],
            }
        }
    },
    methods: {
        login() {
            this.$refs['userForm'].validate((valid) =&gt; {
                if (valid) {  // 表单校验合法
                    this.request.post("/user/login", this.user).then(res =&gt; {
                        if (res.code === '200') {
                            localStorage.setItem("user", JSON.stringify(res.data))  // 存储用户信息到浏览器
                            this.$router.push("/")
                            this.$message.success("登录成功")
                        } else {
                            this.$message.error(res.msg)
                        }
                    })
                } else {
                    this.$message.error("表单提交失败，请检验您的表单")
                    return false;
                }
            });
        }
    }
}
&lt;/script&gt;
  
&lt;style&gt;
.wrapper {
    height: 100vh;
    background-image: linear-gradient(to bottom right, #FC466B, #3F5EFB);
    overflow: hidden;
}
&lt;/style&gt;</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18f83fab05e5cd76eae2ff857faa677d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;并发编程（十一）多线程应用的测试和除错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dbe5377dd771b4f33b4d06c878d3df54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">算法题--哈希（两数之和、给定差值的组合、最小权重路径解法加步骤）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>