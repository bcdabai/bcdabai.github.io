<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python基础——8.类 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python基础——8.类" />
<meta property="og:description" content="Python基础——8.类 8.0 前言8.1 创建和使用类8.1.1 创建Dog 类1. 方法__init__() 8.1.2 根据类创建实例1. 访问属性2. 调用方法3. 创建多个实例 8.2 使用类和实例8.2.1 Car 类8.2.2 给属性指定默认值8.2.3 修改属性的值1. 直接修改属性的值2. 通过方法修改属性的值 3. 通过方法对属性的值进行递增 8.3 继承8.3.1 子类的方法__init__()8.3.2 给子类定义属性和方法8.3.3 重写父类的方法8.3.4 将实例用作属性8.3.5 模拟实物 8.4 导入类8.4.1 导入单个类8.4.2 在一个模块中存储多个类8.4.3 从一个模块中导入多个类8.4.4 导入整个模块8.4.5 导入模块中的所有类8.4.6 在一个模块中导入另一个模块8.4.7 自定义工作流程 8.7 小结 8.0 前言 面向对象编程是最有效的软件编写方法之一。在面向对象编程中，你编写表示现实世界中的事物和情景的类，并基于这些类来创建对象。编写类时，你定义一大类对
象都有的通用行为。基于类创建对象 时，每个对象都自动具备这种通用行为，然后可根据需要赋予每个对象独特的个性。使用面向对象编程可模拟现实情景，其逼真
程度达到了令你惊讶的地步。
根据类来创建对象被称为实例化，这让你能够使用类的实例。在本章中，你将编写一些类并创建其实例。你将指定可在实例中存储什么信息，定义可对这些实例执行
哪些操作。你还将编写一些类来扩展既有类的功能，让相似的类能够高效地共享代码。你将把自己编写的类存储在模块中，并在自己的程序文件中导入其他程序员编
写的类。
理解面向对象编程有助于你像程序员那样看世界，还可以帮助你真正明白自己编写的代码：不仅是各行代码的作用，还有代码背后更宏大的概念。了解类背后的概念
可培养逻辑思维，让你能够通过编写程序来解决遇到的几乎任何问题。
随着面临的挑战日益严峻，类还能让你以及与你合作的其他程序员的生活更轻松。如果你与其他程序员基于同样的逻辑来编写代码，你们就能明白对方所做的工作；
你编写的程序将能被众多合作者所理解，每个人都能事半功倍。
8.1 创建和使用类 使用类几乎可以模拟任何东西。下面来编写一个表示小狗的简单类Dog ——它表示的不是特定的小狗，而是任何小狗。
对于大多数宠物狗，我们都知道些什么呢？它们都有名字和年龄；我们还知道，大多数小狗还会蹲下和打滚。
由于大多数小狗都具备上述两项信息（名字和年龄）和两种行为（蹲下和打滚），我们的Dog 类将包含它们。
这个类让Python知道如何创建表示小狗的对象。编写这个类后，我们将使用它来创建表示特定小狗的实例。
8.1.1 创建Dog 类 根据Dog 类创建的每个实例都将存储名字和年龄。我们赋予了每条小狗蹲下（sit() ）和打滚（roll_over() ）的能力：
class Dog(): # ❶ &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7076ed4df018ba7bcd5f1c0c28d7a8f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-27T20:37:39+08:00" />
<meta property="article:modified_time" content="2023-03-27T20:37:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python基础——8.类</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Python基础——8.类</h4> 
 <ul><li><a href="#80__1" rel="nofollow">8.0 前言</a></li><li><a href="#81__16" rel="nofollow">8.1 创建和使用类</a></li><li><ul><li><a href="#811_Dog__24" rel="nofollow">8.1.1 创建Dog 类</a></li><li><ul><li><a href="#1___init___51" rel="nofollow">1. 方法__init__()</a></li></ul> 
   </li><li><a href="#812__87" rel="nofollow">8.1.2 根据类创建实例</a></li><li><ul><li><a href="#1__126" rel="nofollow">1. 访问属性</a></li><li><a href="#2__146" rel="nofollow">2. 调用方法</a></li><li><a href="#3__181" rel="nofollow">3. 创建多个实例</a></li></ul> 
  </li></ul> 
  </li><li><a href="#82__222" rel="nofollow">8.2 使用类和实例</a></li><li><ul><li><a href="#821_Car__230" rel="nofollow">8.2.1 Car 类</a></li><li><a href="#822__268" rel="nofollow">8.2.2 给属性指定默认值</a></li><li><a href="#823__309" rel="nofollow">8.2.3 修改属性的值</a></li><li><ul><li><a href="#1__314" rel="nofollow">1. 直接修改属性的值</a></li><li><a href="#2__333" rel="nofollow">2. 通过方法修改属性的值</a></li></ul> 
   </li><li><a href="#3__385" rel="nofollow">3. 通过方法对属性的值进行递增</a></li></ul> 
  </li><li><a href="#83__422" rel="nofollow">8.3 继承</a></li><li><ul><li><a href="#831___init___430" rel="nofollow">8.3.1 子类的方法__init__()</a></li><li><a href="#832__475" rel="nofollow">8.3.2 给子类定义属性和方法</a></li><li><a href="#833__535" rel="nofollow">8.3.3 重写父类的方法</a></li><li><a href="#834__554" rel="nofollow">8.3.4 将实例用作属性</a></li><li><a href="#835__653" rel="nofollow">8.3.5 模拟实物</a></li></ul> 
  </li><li><a href="#84__655" rel="nofollow">8.4 导入类</a></li><li><ul><li><a href="#841__673" rel="nofollow">8.4.1 导入单个类</a></li><li><a href="#842__679" rel="nofollow">8.4.2 在一个模块中存储多个类</a></li><li><a href="#843__808" rel="nofollow">8.4.3 从一个模块中导入多个类</a></li><li><a href="#844__830" rel="nofollow">8.4.4 导入整个模块</a></li><li><a href="#845__852" rel="nofollow">8.4.5 导入模块中的所有类</a></li><li><a href="#846__870" rel="nofollow">8.4.6 在一个模块中导入另一个模块</a></li><li><a href="#847__922" rel="nofollow">8.4.7 自定义工作流程</a></li></ul> 
  </li><li><a href="#87__934" rel="nofollow">8.7 小结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="80__1"></a>8.0 前言</h2> 
<p><strong>面向对象编程</strong>是最有效的软件编写方法之一。在面向对象编程中，你编写表示现实世界中的事物和情景的类，并基于这些类来创建对象。编写类时，你定义一大类对<br> 象都有的通用行为。基于类创建对象 时，每个对象都自动具备这种通用行为，然后可根据需要赋予每个对象独特的个性。使用面向对象编程可模拟现实情景，其逼真<br> 程度达到了令你惊讶的地步。</p> 
<p>根据类来创建对象被称为<strong>实例化</strong>，这让你能够使用类的实例。在本章中，你将编写一些类并创建其实例。你将指定可在实例中存储什么信息，定义可对这些实例执行<br> 哪些操作。你还将编写一些类来扩展既有类的功能，让相似的类能够高效地共享代码。你将把自己编写的类存储在模块中，并在自己的程序文件中导入其他程序员编<br> 写的类。</p> 
<p>理解面向对象编程有助于你像程序员那样看世界，还可以帮助你真正明白自己编写的代码：不仅是各行代码的作用，还有代码背后更宏大的概念。了解类背后的概念<br> 可培养逻辑思维，让你能够通过编写程序来解决遇到的几乎任何问题。</p> 
<p>随着面临的挑战日益严峻，类还能让你以及与你合作的其他程序员的生活更轻松。如果你与其他程序员基于同样的逻辑来编写代码，你们就能明白对方所做的工作；<br> 你编写的程序将能被众多合作者所理解，每个人都能事半功倍。</p> 
<h2><a id="81__16"></a>8.1 创建和使用类</h2> 
<p>使用类几乎可以模拟任何东西。下面来编写一个表示小狗的简单类Dog ——它表示的不是特定的小狗，而是任何小狗。</p> 
<p>对于大多数宠物狗，我们都知道些什么呢？它们都有名字和年龄；我们还知道，大多数小狗还会蹲下和打滚。</p> 
<p>由于大多数小狗都具备上述两项信息（名字和年龄）和两种行为（蹲下和打滚），我们的Dog 类将包含它们。</p> 
<p>这个类让Python知道如何创建表示小狗的对象。编写这个类后，我们将使用它来创建表示特定小狗的实例。</p> 
<h3><a id="811_Dog__24"></a>8.1.1 创建Dog 类</h3> 
<p>根据Dog 类创建的每个实例都将存储名字和年龄。我们赋予了每条小狗蹲下（sit() ）和打滚（roll_over() ）的能力：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
    <span class="token triple-quoted-string string">"""一次模拟小狗的简单尝试"""</span> <span class="token comment"># ❷ </span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❸ </span>
        <span class="token triple-quoted-string string">"""初始化属性name和age"""</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment"># ❹ </span>
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">def</span> <span class="token function">sit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❺ </span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时蹲下"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is now sitting."</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">roll_over</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时打滚"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" rolled over!"</span><span class="token punctuation">)</span>
</code></pre> 
<p>这里需要注意的地方很多，但你也不用担心，本章充斥着这样的结构，你有大把的机会熟悉它。</p> 
<p>在❶处，我们定义了一个名为Dog 的类。</p> 
<p>根据约定，在Python中，首字母大写的名称指的是类。</p> 
<p>这个类定义中的括号是空的，因为我们要从空白创建这个类。</p> 
<p>在❷处，我们编写了一个文档字符串，对这个类的功能作了描述。</p> 
<h4><a id="1___init___51"></a>1. 方法__init__()</h4> 
<p>类中的函数称为方法 ；你前面学到的有关函数的一切都适用于方法，就目前而言，唯一重要的差别是调用方法的方式。</p> 
<p>❸处的方法__init__() 是一个特殊的方法，每当你根据Dog 类创建新实例时，Python都会自动运行它。</p> 
<p>在这个方法的名称中，开头和末尾各有两个下划线，这是一种约定，旨在避免Python默认方法与普通方法发生名称冲突。</p> 
<p>我们将方法__init__() 定义成了包含三个形参：self 、name 和age。</p> 
<p>在这个方法的定义中，形参self 必不可少，还必须位于其他形参的前面。</p> 
<p>为何必须在方法定义中包含形参self 呢？因为Python调用这个__init__() 方法来创建Dog 实例时，将自动传入实参self。</p> 
<p>每个与类相关联的方法调用都自动传递实参self ，它是一个指向实例本身的引用，让实例能够访问类中的属性和方法。</p> 
<p>我们创建Dog 实例时，Python将调用Dog 类的方法__init__()</p> 
<p>我们将通过实参向Dog() 传递名字和年龄；self 会自动传递，因此我们不需要传递它。</p> 
<p>每当我们根据Dog 类创建实例时，都只需给最后两个形参（name 和age ）提供值。</p> 
<p>❹处定义的两个变量都有前缀self 。以self 为前缀的变量都可供类中的所有方法使用，我们还可以通过类的任何实例来访问这些变量。</p> 
<p>self.name = name 获取存储在形参name 中的值，并将其存储到变量name 中，然后该变量被关联到当前创建的实例。</p> 
<p>self.age = age 的作用与此类似。像这样可通过实例访问的变量称为属性 。</p> 
<p>Dog 类还定义了另外两个方法：sit() 和roll_over() （见❺）。</p> 
<p>由于这些方法不需要额外的信息，如名字或年龄，因此它们只有一个形参self 。</p> 
<p>我们后面将创建的实例能够访问这些方法，换句话说，它们都会蹲下和打滚。当前，sit() 和roll_over() 所做的有限，它们只是打印一条消息，指出小狗正蹲下或打滚。</p> 
<p>但可以扩展这些方法以模拟实际情况：如果这个类包含在一个计算机游戏中，这些方法将包含创建小狗蹲下和打滚动画效果的代码。</p> 
<p>如果这个类是用于控制机器狗的，这些方法将引导机器狗做出蹲下和打滚的动作。</p> 
<h3><a id="812__87"></a>8.1.2 根据类创建实例</h3> 
<p>可将类视为有关如何创建实例的说明。</p> 
<p>Dog 类是一系列说明，让Python知道如何创建表示特定小狗的实例。</p> 
<p>下面来创建一个表示特定小狗的实例：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
    <span class="token triple-quoted-string string">"""一次模拟小狗的简单尝试"""</span> <span class="token comment"># ❷ </span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❸ </span>
        <span class="token triple-quoted-string string">"""初始化属性name和age"""</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment"># ❹ </span>
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">def</span> <span class="token function">sit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❺ </span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时蹲下"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is now sitting."</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">roll_over</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时打滚"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" rolled over!"</span><span class="token punctuation">)</span>
    
my_dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token string">'willie'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment"># ❶ </span>
    
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"My dog's name is "</span> <span class="token operator">+</span> my_dog<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">)</span> <span class="token comment"># ❷ </span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"My dog is "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>my_dog<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" years old."</span><span class="token punctuation">)</span> <span class="token comment"># ❸</span>
</code></pre> 
<p>这里使用的是前一个示例中编写的Dog 类。</p> 
<p>在❶处，我们让Python创建一条名字为’willie’ 、年龄为6 的小狗。</p> 
<p>遇到这行代码时，Python使用实参’willie’ 和6 调用Dog 类中的方法__init__() 。方法__init__() 创建一个表示特定小狗的示例，并使用我们提供的值来设置属性name 和age 。</p> 
<p>方法__init__() 并未显式地包含return 语句，但Python自动返回一个表示这条小狗的实例。</p> 
<p>我们将这个实例存储在变量my_dog中。</p> 
<p>在这里，命名约定很有用：我们通常可以认为首字母大写的名称（如Dog）指的是类，而小写的名称（如my_dog）指的是根据类创建的实例。</p> 
<h4><a id="1__126"></a>1. 访问属性</h4> 
<p>要访问实例的属性，可使用句点表示法。在❷处，我们编写了如下代码来访问my_dog 的属性name 的值：</p> 
<pre><code>my_dog.name
</code></pre> 
<p>句点表示法在Python中很常用，这种语法演示了Python如何获悉属性的值。</p> 
<p>在这里，Python先找到实例my_dog ，再查找与这个实例相关联的属性name。</p> 
<p>在Dog 类中引用这个属性时，使用的是self.name。</p> 
<p>在❸处，我们使用同样的方法来获取属性age 的值。</p> 
<p>在前面的第1条print 语句中，my_dog.name.title() 将my_dog 的属性name的值’willie’ 改为首字母大写的；在第2条print 语句中，str(my_dog.age) 将my_dog 的属性age的值6转换为字符串。</p> 
<p>输出是有关my_dog 的摘要：</p> 
<pre><code>My dog's name is Willie.
My dog is 6 years old.
</code></pre> 
<h4><a id="2__146"></a>2. 调用方法</h4> 
<p>根据Dog 类创建实例后，就可以使用句点表示法来调用Dog 类中定义的任何方法。下面来让小狗蹲下和打滚：</p> 
<pre><code>class Dog(): # ❶ 
    """一次模拟小狗的简单尝试""" # ❷ 
    
    def __init__(self, name, age): # ❸ 
        """初始化属性name和age"""
        self.name = name # ❹ 
        self.age = age
    def sit(self): # ❺ 
        """模拟小狗被命令时蹲下"""
        print(self.name.title() + " is now sitting.")
    def roll_over(self):
        """模拟小狗被命令时打滚"""
        print(self.name.title() + " rolled over!")
        
my_dog = Dog('willie', 6)
my_dog.sit()
my_dog.roll_over()
</code></pre> 
<p>要调用方法，可指定实例的名称（这里是my_dog ）和要调用的方法，并用句点分隔它们。</p> 
<p>遇到代码my_dog.sit() 时，Python在类Dog 中查找方法sit() 并运行其代码。</p> 
<p>Python以同样的方式解读代码my_dog.roll_over()。</p> 
<p>Willie按我们的命令做了：</p> 
<pre><code>Willie is now sitting.
Willie rolled over!
</code></pre> 
<p>这种语法很有用。</p> 
<p>如果给属性和方法指定了合适的描述性名称，如name 、age 、sit() 和roll_over() ，即便是从未见过的代码块，我们也能够轻松地推断出它是做什么的。</p> 
<h4><a id="3__181"></a>3. 创建多个实例</h4> 
<p>可按需求根据类创建任意数量的实例。下面再创建一个名为your_dog 的实例：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
    <span class="token triple-quoted-string string">"""一次模拟小狗的简单尝试"""</span> <span class="token comment"># ❷ </span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❸ </span>
        <span class="token triple-quoted-string string">"""初始化属性name和age"""</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment"># ❹ </span>
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">def</span> <span class="token function">sit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❺ </span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时蹲下"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is now sitting."</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">roll_over</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""模拟小狗被命令时打滚"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" rolled over!"</span><span class="token punctuation">)</span>
        
        
my_dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token string">'willie'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
your_dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token string">'lucy'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"My dog's name is "</span> <span class="token operator">+</span> my_dog<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"My dog is "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>my_dog<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" years old."</span><span class="token punctuation">)</span>
my_dog<span class="token punctuation">.</span>sit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nYour dog's name is "</span> <span class="token operator">+</span> your_dog<span class="token punctuation">.</span>name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Your dog is "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>your_dog<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" years old."</span><span class="token punctuation">)</span>
your_dog<span class="token punctuation">.</span>sit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在这个实例中，我们创建了两条小狗，它们分别名为Willie和Lucy。</p> 
<p>每条小狗都是一个独立的实例，有自己的一组属性，能够执行相同的操作：</p> 
<pre><code>My dog's name is Willie.
My dog is 6 years old.
Willie is now sitting.
Your dog's name is Lucy.
Your dog is 3 years old.
Lucy is now sitting.
</code></pre> 
<p>就算我们给第二条小狗指定同样的名字和年龄，Python依然会根据Dog 类创建另一个实例。</p> 
<p>你可按需求根据一个类创建任意数量的实例，条件是将每个实例都存储在不同的变量中，或占用列表或字典的不同位置。</p> 
<h2><a id="82__222"></a>8.2 使用类和实例</h2> 
<p>你可以使用类来模拟现实世界中的很多情景。</p> 
<p>类编写好后，你的大部分时间都将花在使用根据类创建的实例上。</p> 
<p>你需要执行的一个重要任务是修改实例的属性。</p> 
<p>你可以直接修改实例的属性，也可以编写方法以特定的方式进行修改。</p> 
<h3><a id="821_Car__230"></a>8.2.1 Car 类</h3> 
<p>下面来编写一个表示汽车的类，它存储了有关汽车的信息，还有一个汇总这些信息的方法：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""一次模拟汽车的简单尝试"""</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
        <span class="token triple-quoted-string string">"""初始化描述汽车的属性"""</span>
        self<span class="token punctuation">.</span>make <span class="token operator">=</span> make
        self<span class="token punctuation">.</span>model <span class="token operator">=</span> model
        self<span class="token punctuation">.</span>year <span class="token operator">=</span> year
    <span class="token keyword">def</span> <span class="token function">get_descriptive_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
        <span class="token triple-quoted-string string">"""返回整洁的描述性信息"""</span>
        long_name <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>make <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>model
        <span class="token keyword">return</span> long_name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
my_new_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'audi'</span><span class="token punctuation">,</span> <span class="token string">'a4'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span> <span class="token comment"># ❸ </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_new_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们定义了方法__init__() 。</p> 
<p>与前面的Dog 类中一样，这个方法的第一个形参为self ；我们还在这个方法中包含了另外三个形参：make 、model 和year 。</p> 
<p>方法__init__() 接受这些形参的值，并将它们存储在根据这个类创建的实例的属性中。</p> 
<p>创建新的Car实例时，我们需要指定其制造商、型号和生产年份。</p> 
<p>在❷处，我们定义了一个名为get_descriptive_name() 的方法，它使用属性year 、make 和model 创建一个对汽车进行描述的字符串，让我们无需分别打印每个属性的值。</p> 
<p>为在这个方法中访问属性的值，我们使用了self.make 、self.model 和self.year 。</p> 
<p>在❸处，我们根据Car 类创建了一个实例，并将其存储到变量my_new_car 中。</p> 
<p>接下来，我们调用方法get_descriptive_name()，指出我们拥有的是一辆什么样的汽车：</p> 
<pre><code>2016 Audi A4
</code></pre> 
<p>为让这个类更有趣，下面给它添加一个随时间变化的属性，它存储汽车的总里程。</p> 
<h3><a id="822__268"></a>8.2.2 给属性指定默认值</h3> 
<p>类中的每个属性都必须有初始值，哪怕这个值是0或空字符串。</p> 
<p>在有些情况下，如设置默认值时，在方法__init__() 内指定这种初始值是可行的；</p> 
<p>如果你对某个属性这样做了，就无需包含为它提供初始值的形参。</p> 
<p>下面来添加一个名为odometer_reading 的属性，其初始值总是为0。</p> 
<p>我们还添加了一个名为read_odometer() 的方法，用于读取汽车的里程表：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""初始化描述汽车的属性"""</span>
        self<span class="token punctuation">.</span>make <span class="token operator">=</span> make
        self<span class="token punctuation">.</span>model <span class="token operator">=</span> model
        self<span class="token punctuation">.</span>year <span class="token operator">=</span> year
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment"># ❶</span>
        
    <span class="token keyword">def</span> <span class="token function">get_descriptive_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
        
    <span class="token keyword">def</span> <span class="token function">read_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
        <span class="token triple-quoted-string string">"""打印一条指出汽车里程的消息"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>odometer_reading<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" miles on it."</span><span class="token punctuation">)</span>
        
my_new_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'audi'</span><span class="token punctuation">,</span> <span class="token string">'a4'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_new_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_new_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，当Python调用方法__init__() 来创建新实例时，将像前一个示例一样以属性的方式存储制造商、型号和生产年份。</p> 
<p>接下来，Python将创建一个名为odometer_reading 的属性，并将其初始值设置为0（见❶）。</p> 
<p>在❷处，我们还定义了一个名为read_odometer() 的方法，它让你能够轻松地获悉汽车的里程。</p> 
<p>一开始汽车的里程为0：</p> 
<pre><code>2016 Audi A4
This car has 0 miles on it.
</code></pre> 
<h3><a id="823__309"></a>8.2.3 修改属性的值</h3> 
<p>可以以三种不同的方式修改属性的值：直接通过实例进行修改；通过方法进行设置；通过方法进行递增（增加特定的值）。</p> 
<p>下面依次介绍这些方法。</p> 
<h4><a id="1__314"></a>1. 直接修改属性的值</h4> 
<p>要修改属性的值，最简单的方式是通过实例直接访问它。下面的代码直接将里程表读数设置为23：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>

my_new_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'audi'</span><span class="token punctuation">,</span> <span class="token string">'a4'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_new_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_new_car<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> <span class="token number">23</span> <span class="token comment"># ❶ </span>
my_new_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们使用句点表示法来直接访问并设置汽车的属性odometer_reading。</p> 
<p>这行代码让Python在实例my_new_car 中找到属性odometer_reading ，并将该属性的值设置为23：</p> 
<pre><code>2016 Audi A4
This car has 23 miles on it.
</code></pre> 
<p>有时候需要像这样直接访问属性，但其他时候需要编写对属性进行更新的方法。</p> 
<h4><a id="2__333"></a>2. 通过方法修改属性的值</h4> 
<p>如果有替你更新属性的方法，将大有裨益。</p> 
<p>这样，你就无需直接访问属性，而可将值传递给一个方法，由它在内部进行更新。</p> 
<p>下面的示例演示了一个名为update_odometer() 的方法：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
    <span class="token keyword">def</span> <span class="token function">update_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mileage<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
        <span class="token triple-quoted-string string">"""将里程表读数设置为指定的值"""</span>
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> mileage
        my_new_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'audi'</span><span class="token punctuation">,</span> <span class="token string">'a4'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>my_new_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
my_new_car<span class="token punctuation">.</span>update_odometer<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span> <span class="token comment"># ❷ </span>
my_new_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>对Car 类所做的唯一修改是在❶处添加了方法update_odometer()。</p> 
<p>这个方法接受一个里程值，并将其存储到self.odometer_reading 中。</p> 
<p>在❷处，我们调用了update_odometer() ，并向它提供了实参23（该实参对应于方法定义中的形参mileage ）。</p> 
<p>它将里程表读数设置为23；而方法read_odometer() 打印该读数：</p> 
<pre><code>2016 Audi A4
This car has 23 miles on it.
</code></pre> 
<p>可对方法update_odometer() 进行扩展，使其在修改里程表读数时做些额外的工作。</p> 
<p>下面来添加一些逻辑，禁止任何人将里程表读数往回调：</p> 
<pre><code>class Car():
    --snip--

    def update_odometer(self, mileage):
    """ 将里程表读数设置为指定的值
    禁止将里程表读数往回调
    """
    if mileage &gt;= self.odometer_reading: # ❶ 
        self.odometer_reading = mileage
    else:
        print("You can't roll back an odometer!") # ❷ 
</code></pre> 
<p>现在，update_odometer() 在修改属性前检查指定的读数是否合理。</p> 
<p>如果新指定的里程（mileage ）大于或等于原来的里程（self.odometer_reading ）,就将里程表读数改为新指定的里程（见❶）；</p> 
<p>否则就发出警告，指出不能将里程表往回拨（见❷）。</p> 
<h3><a id="3__385"></a>3. 通过方法对属性的值进行递增</h3> 
<p>有时候需要将属性值递增特定的量，而不是将其设置为全新的值。</p> 
<p>假设我们购买了一辆二手车，且从购买到登记期间增加了100英里的里程，下面的方法让我们能够传递这个增量，并相应地增加里程表读数：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
    <span class="token keyword">def</span> <span class="token function">update_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mileage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
        
    <span class="token keyword">def</span> <span class="token function">increment_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> miles<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
        <span class="token triple-quoted-string string">"""将里程表读数增加指定的量"""</span>
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">+=</span> miles
        my_used_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'subaru'</span><span class="token punctuation">,</span> <span class="token string">'outback'</span><span class="token punctuation">,</span> <span class="token number">2013</span><span class="token punctuation">)</span> <span class="token comment"># ❷ </span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>my_used_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        my_used_car<span class="token punctuation">.</span>update_odometer<span class="token punctuation">(</span><span class="token number">23500</span><span class="token punctuation">)</span> <span class="token comment"># ❸ </span>
        my_used_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
        my_used_car<span class="token punctuation">.</span>increment_odometer<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment"># ❹ </span>
        my_used_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，新增的方法increment_odometer() 接受一个单位为英里的数字，并将其加入到self.odometer_reading 中。</p> 
<p>在❷处，我们创建了一辆二手车,——my_used_car 。</p> 
<p>在❸处，我们调用方法update_odometer() 并传入23500 ，将这辆二手车的里程表读数设置为23500。</p> 
<p>在❹处，我们调用increment_odometer()并传入100，以增加从购买到登记期间行驶的100英里：</p> 
<pre><code>2013 Subaru Outback
This car has 23500 miles on it.
This car has 23600 miles on it.
</code></pre> 
<p>你可以轻松地修改这个方法，以禁止增量为负值，从而防止有人利用它来回拨里程表。</p> 
<p><strong>注意</strong>你可以使用类似于上面的方法来控制用户修改属性值（如里程表读数）的方式，但能够访问程序的人都可以通过直接访问属性来将里程表修改为任何值。要确<br> 保安全，除了进行类似于前面的基本检查外，还需特别注意细节。</p> 
<h2><a id="83__422"></a>8.3 继承</h2> 
<p>编写类时，并非总是要从空白开始。</p> 
<p>如果你要编写的类是另一个现成类的特殊版本，可使用继承。</p> 
<p>一个类继承 另一个类时，它将自动获得另一个类的所有属性和方法；原有的类称为父类 ，而新类称为子类。</p> 
<p>子类继承了其父类的所有属性和方法，同时还可以定义自己的属性和方法。</p> 
<h3><a id="831___init___430"></a>8.3.1 子类的方法__init__()</h3> 
<p>创建子类的实例时，Python首先需要完成的任务是给父类的所有属性赋值。</p> 
<p>为此，子类的方法__init__() 需要父类施以援手。</p> 
<p>例如，下面来模拟电动汽车。电动汽车是一种特殊的汽车，因此我们可以在前面创建的Car类的基础上创建新类ElectricCar，这样我们就只需为电动汽车特有的属性和行为编写代码。</p> 
<p>下面来创建一个简单的ElectricCar类版本，它具备Car类的所有功能：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
    <span class="token triple-quoted-string string">"""一次模拟汽车的简单尝试"""</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>make <span class="token operator">=</span> make
        self<span class="token punctuation">.</span>model <span class="token operator">=</span> model
        self<span class="token punctuation">.</span>year <span class="token operator">=</span> year
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">def</span> <span class="token function">get_descriptive_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        long_name <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>make <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>model
        <span class="token keyword">return</span> long_name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">read_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>odometer_reading<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" miles on it."</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">update_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mileage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> mileage <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>odometer_reading<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> mileage
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"You can't roll back an odometer!"</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">increment_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> miles<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">+=</span> miles
    
<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
    <span class="token triple-quoted-string string">"""电动汽车的独特之处"""</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❸ </span>
        <span class="token triple-quoted-string string">"""初始化父类的属性"""</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span> <span class="token comment"># ❹ </span>

my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'model s'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span> <span class="token comment"># ❺ </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>首先是Car 类的代码（见❶）。</p> 
<p>创建子类时，父类必须包含在当前文件中，且位于子类前面。</p> 
<p>在❷处，我们定义了子类ElectricCar 。</p> 
<p>定义子类时，必须在括号内指定父类的名称。方法__init__() 接受创建Car实例所需的信息（见❸）。</p> 
<h3><a id="832__475"></a>8.3.2 给子类定义属性和方法</h3> 
<p>让一个类继承另一个类后，可添加区分子类和父类所需的新属性和方法。</p> 
<p>下面来添加一个电动汽车特有的属性（电瓶），以及一个描述该属性的方法。我们将存储电瓶容量，并编写一个打印电瓶描述的方法：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Represent aspects of a car, specific to electric vehicles."""</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">""" 电动汽车的独特之处
        初始化父类的属性，再初始化电动汽车特有的属性
        """</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>battery_size <span class="token operator">=</span> <span class="token number">70</span> <span class="token comment">#  ❶ </span>
        
    <span class="token keyword">def</span> <span class="token function">describe_battery</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
    <span class="token triple-quoted-string string">"""打印一条描述电瓶容量的消息"""</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has a "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>battery_size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-kWh battery."</span><span class="token punctuation">)</span>
    
my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'model s'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>describe_battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们添加了新属性self.battery_size ，并设置其初始值（如70 ）。</p> 
<p>根据ElectricCar 类创建的所有实例都将包含这个属性，但所有Car 实例都不包含它。</p> 
<p>在❷处，我们还添加了一个名为describe_battery() 的方法，它打印有关电瓶的信息。我们调用这个方法时，将看到一条电动汽车特有的描述：</p> 
<pre><code>2016 Tesla Model S
This car has a 70-kWh battery.
</code></pre> 
<p>对于ElectricCar 类的特殊化程度没有任何限制。</p> 
<p>模拟电动汽车时，你可以根据所需的准确程度添加任意数量的属性和方法。</p> 
<p>如果一个属性或方法是任何汽车都有的，而不是电动汽车特有的，就应将其加入到Car 类而不是ElectricCar 类中。</p> 
<p>这样，使用Car 类的人将获得相应的功能，而ElectricCar 类只包含处理电动汽车特有属性和行为的代码。<br> ❹处的super() 是一个特殊函数，帮助Python将父类和子类关联起来。</p> 
<p>这行代码让Python调用ElectricCar 的父类的方法__init__() ，让ElectricCar 实例包含父类的所有属性。</p> 
<p>父类也称为超类 （superclass），名称super因此而得名。</p> 
<p>为测试继承是否能够正确地发挥作用，我们尝试创建一辆电动汽车，但提供的信息与创建普通汽车时相同。</p> 
<p>在❺处，我们创建ElectricCar 类的一个实例，并将其存储在变量my_tesla中。</p> 
<p>这行代码调用ElectricCar 类中定义的方法__init__() ，后者让Python调用父类Car 中定义的方法__init__() 。我们提供了实参’tesla’ 、‘models’ 和2016 。</p> 
<p>除方法__init__() 外，电动汽车没有其他特有的属性和方法。当前，我们只想确认电动汽车具备普通汽车的行为：</p> 
<pre><code>2016 Tesla Model S
</code></pre> 
<p>ElectricCar 实例的行为与Car实例一样，现在可以开始定义电动汽车特有的属性和方法了。</p> 
<h3><a id="833__535"></a>8.3.3 重写父类的方法</h3> 
<p>对于父类的方法，只要它不符合子类模拟的实物的行为，都可对其进行重写。</p> 
<p>为此，可在子类中定义一个这样的方法，即它与要重写的父类方法同名。</p> 
<p>这样，Python将不会考虑这个父类方法，而只关注你在子类中定义的相应方法。</p> 
<p>假设Car 类有一个名为fill_gas_tank() 的方法，它对全电动汽车来说毫无意义，因此你可能想重写它。下面演示了一种重写方式：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
    <span class="token keyword">def</span> <span class="token function">fill_gas_tank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""电动汽车没有油箱"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car doesn't need a gas tank!"</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，如果有人对电动汽车调用方法fill_gas_tank() ，Python将忽略Car 类中的方法fill_gas_tank()，转而运行上述代码。</p> 
<p>使用继承时，可让子类保留从父类那里继承而来的精华，并剔除不需要的糟粕。</p> 
<h3><a id="834__554"></a>8.3.4 将实例用作属性</h3> 
<p>使用代码模拟实物时，你可能会发现自己给类添加的细节越来越多：属性和方法清单以及文件都越来越长。</p> 
<p>在这种情况下，可能需要将类的一部分作为一个独立的类提取出来。你可以将大型类拆分成多个协同工作的小类。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>

<span class="token keyword">class</span> <span class="token class-name">Battery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❶ </span>
    <span class="token triple-quoted-string string">"""一次模拟电动汽车电瓶的简单尝试"""</span>
        
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> battery_size<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❷ </span>
        <span class="token triple-quoted-string string">"""初始化电瓶的属性"""</span>
        self<span class="token punctuation">.</span>battery_size <span class="token operator">=</span> battery_size
        
    <span class="token keyword">def</span> <span class="token function">describe_battery</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ❸ </span>
        <span class="token triple-quoted-string string">"""打印一条描述电瓶容量的消息"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has a "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>battery_size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-kWh battery."</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""电动汽车的独特之处"""</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">""" 初始化父类的属性，再初始化电动汽车特有的属性"""</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>battery <span class="token operator">=</span> Battery<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># ❹ </span>
    
my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'model s'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>describe_battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们定义了一个名为Battery 的新类，它没有继承任何类。</p> 
<p>❷处的方法__init__() 除self 外，还有另一个形参battery_size 。</p> 
<p>这个形参是可选的：如果没有给它提供值，电瓶容量将被设置为70。</p> 
<p>方法describe_battery() 也移到了这个类中（见❸）。</p> 
<p>在ElectricCar 类中，我们添加了一个名为self.battery 的属性（见❹）。</p> 
<p>这行代码让Python创建一个新的Battery 实例（由于没有指定尺寸，因此为默认值70 ），并将该实例存储在属性self.battery中。</p> 
<p>每当方法__init__() 被调用时，都将执行该操作；因此现在每个ElectricCar 实例都包含一个自动创建的Battery 实例。</p> 
<p>我们创建一辆电动汽车，并将其存储在变量my_tesla 中。</p> 
<p>要描述电瓶时，需要使用电动汽车的属性battery ：</p> 
<pre><code class="prism language-python">my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>describe_battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>这行代码让Python在实例my_tesla 中查找属性battery ，并对存储在该属性中的Battery实例调用方法describe_battery()。</p> 
<p>输出与我们前面看到的相同：</p> 
<pre><code>2016 Tesla Model S
This car has a 70-kWh battery.
</code></pre> 
<p>这看似做了很多额外的工作，但现在我们想多详细地描述电瓶都可以，且不会导致ElectricCar 类混乱不堪。</p> 
<p>下面再给Battery 类添加一个方法，它根据电瓶容量报告汽车的续航里程：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
<span class="token keyword">class</span> <span class="token class-name">Battery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
    <span class="token keyword">def</span> <span class="token function">get_range</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""打印一条消息，指出电瓶的续航里程"""</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>battery_size <span class="token operator">==</span> <span class="token number">70</span><span class="token punctuation">:</span>
            <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token number">240</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>battery_size <span class="token operator">==</span> <span class="token number">85</span><span class="token punctuation">:</span>
            <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token number">270</span>
            
        message <span class="token operator">=</span> <span class="token string">"This car can go approximately "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">)</span>
        message <span class="token operator">+=</span> <span class="token string">" miles on a full charge."</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>

my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'model s'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>describe_battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>get_range<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># ❷</span>
</code></pre> 
<p>❶处新增的方法get_range() 做了一些简单的分析：如果电瓶的容量为70kWh，它就将续航里程设置为240英里；如果容量为85kWh，就将续航里程设置为270英里，然后报告这个值。</p> 
<p>为使用这个方法，我们也通过汽车的属性battery 来调用它（见❷）。</p> 
<p>输出指出了汽车的续航里程（这取决于电瓶的容量）：</p> 
<pre><code>2016 Tesla Model S
This car has a 70-kWh battery.
This car can go approximately 240 miles on a full charge.
</code></pre> 
<h3><a id="835__653"></a>8.3.5 模拟实物</h3> 
<h2><a id="84__655"></a>8.4 导入类</h2> 
<p>模拟较复杂的物件（如电动汽车）时，需要解决一些有趣的问题。续航里程是电瓶的属性还是汽车的属性呢？</p> 
<p>如果我们只需描述一辆汽车，那么将方法get_range()放在Battery 类中也许是合适的；但如果要描述一家汽车制造商的整个产品线，也许应该将方法get_range() 移到ElectricCar类中。</p> 
<p>在这种情况下，get_range()依然根据电瓶容量来确定续航里程，但报告的是一款汽车的续航里程。</p> 
<p>我们也可以这样做：将方法get_range()还留在Battery类中，但向它传递一个参数，如car_model ；在这种情况下，方法get_range() 将根据电瓶容量和汽车型号报告续航里程。</p> 
<p>这让你进入了程序员的另一个境界：解决上述问题时，你从较高的逻辑层面（而不是语法层面）考虑；你考虑的不是Python，而是如何使用代码来表示实物。</p> 
<p>到达这种境界后，你经常会发现，现实世界的建模方法并没有对错之分。</p> 
<p>有些方法的效率更高，但要找出效率最高的表示法，需要经过一定的实践。</p> 
<p>只要代码像你希望的那样运行，就说明你做得很好！</p> 
<p>即便你发现自己不得不多次尝试使用不同的方法来重写类，也不必气馁；要编写出高效、准确的代码，都得经过这样的过程。</p> 
<h3><a id="841__673"></a>8.4.1 导入单个类</h3> 
<p>随着你不断地给类添加功能，文件可能变得很长，即便你妥善地使用了继承亦如此。</p> 
<p>为遵循Python的总体理念，应让文件尽可能整洁。</p> 
<p>为在这方面提供帮助，Python允许你将类存储在模块中，然后在主程序中导入所需的模块。</p> 
<h3><a id="842__679"></a>8.4.2 在一个模块中存储多个类</h3> 
<p>下面来创建一个只包含Car 类的模块。</p> 
<p>这让我们面临一个微妙的命名问题：在本章中，已经有一个名为car.py的文件，但这个模块也应命名为car.py，因为它包含表示汽车的代码。</p> 
<p>我们将这样解决这个命名问题：将Car 类存储在一个名为car.py的模块中，该模块将覆盖前面使用的文件car.py。</p> 
<p>从现在开始，使用该模块的程序都必须使用更具体的文件名，如my_car.py。下面是模块car.py，其中只包含Car 类的代码：</p> 
<pre><code class="prism language-python"><span class="token comment"># car.py</span>
<span class="token triple-quoted-string string">"""一个可用于表示汽车的类"""</span> <span class="token comment"># ❶ </span>

<span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""一次模拟汽车的简单尝试"""</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""初始化描述汽车的属性"""</span>
        self<span class="token punctuation">.</span>make <span class="token operator">=</span> make
        self<span class="token punctuation">.</span>model <span class="token operator">=</span> model
        self<span class="token punctuation">.</span>year <span class="token operator">=</span> year
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> <span class="token number">0</span>
        
    <span class="token keyword">def</span> <span class="token function">get_descriptive_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""返回整洁的描述性名称"""</span>
        long_name <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>make <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>model
        
        <span class="token keyword">return</span> long_name<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">read_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""打印一条消息，指出汽车的里程"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>odometer_reading<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" miles on it."</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">update_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> mileage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        将里程表读数设置为指定的值
        拒绝将里程表往回拨
        """</span>
        <span class="token keyword">if</span> mileage <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>odometer_reading<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> mileage
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"You can't roll back an odometer!"</span><span class="token punctuation">)</span>
            
    <span class="token keyword">def</span> <span class="token function">increment_odometer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> miles<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""将里程表读数增加指定的量"""</span>
        self<span class="token punctuation">.</span>odometer_reading <span class="token operator">+=</span> miles
</code></pre> 
<p>在❶处，我们包含了一个模块级文档字符串，对该模块的内容做了简要的描述。</p> 
<p>你应为自己创建的每个模块都编写文档字符串。</p> 
<p>下面来创建另一个文件——my_car.py，在其中导入Car 类并创建其实例：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> car <span class="token keyword">import</span> Car <span class="token comment"># ❶ </span>

my_new_car <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'audi'</span><span class="token punctuation">,</span> <span class="token string">'a4'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_new_car<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_new_car<span class="token punctuation">.</span>odometer_reading <span class="token operator">=</span> <span class="token number">23</span>
my_new_car<span class="token punctuation">.</span>read_odometer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>❶处的import 语句让Python打开模块car ，并导入其中的Car 类。</p> 
<p>这样我们就可以使用Car 类了，就像它是在这个文件中定义的一样。</p> 
<p>输出与我们在前面看到的一样：</p> 
<pre><code>2016 Audi A4
This car has 23 miles on it.
</code></pre> 
<p>导入类是一种有效的编程方式。如果在这个程序中包含了整个Car 类，它该有多长呀！</p> 
<p>通过将这个类移到一个模块中，并导入该模块，你依然可以使用其所有功能，但主程序文件变得整洁而易于阅读了。</p> 
<p>这还能让你将大部分逻辑存储在独立的文件中；确定类像你希望的那样工作后，你就可以不管这些文件，而专注于主程序的高级逻辑了。</p> 
<p>虽然同一个模块中的类之间应存在某种相关性，但可根据需要在一个模块中存储任意数量的类。</p> 
<p>类Battery 和ElectricCar 都可帮助模拟汽车，因此下面将它们都加入模块car.py中：</p> 
<pre><code class="prism language-python"><span class="token comment"># car.py</span>
<span class="token triple-quoted-string string">"""一组用于表示燃油汽车和电动汽车的类"""</span>
<span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
<span class="token keyword">class</span> <span class="token class-name">Battery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""一次模拟电动汽车电瓶的简单尝试"""</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> battery_size<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""初始化电瓶的属性"""</span>
        self<span class="token punctuation">.</span>battery_size <span class="token operator">=</span> battery_size
        
    <span class="token keyword">def</span> <span class="token function">describe_battery</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""打印一条描述电瓶容量的消息"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This car has a "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>battery_size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-kWh battery."</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">get_range</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""打印一条描述电瓶续航里程的消息"""</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>battery_size <span class="token operator">==</span> <span class="token number">70</span><span class="token punctuation">:</span>
            <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token number">240</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>battery_size <span class="token operator">==</span> <span class="token number">85</span><span class="token punctuation">:</span>
            <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token number">270</span>
            
        message <span class="token operator">=</span> <span class="token string">"This car can go approximately "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">)</span>
        message <span class="token operator">+=</span> <span class="token string">" miles on a full charge."</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    
<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span>Car<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""模拟电动汽车的独特之处"""</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        初始化父类的属性，再初始化电动汽车特有的属性
        """</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>battery <span class="token operator">=</span> Battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，可以新建一个名为my_electric_car.py的文件，导入ElectricCar 类，并创建一辆电动汽车了：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> car <span class="token keyword">import</span> ElectricCar

my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'model s'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>describe_battery<span class="token punctuation">(</span><span class="token punctuation">)</span>
my_tesla<span class="token punctuation">.</span>battery<span class="token punctuation">.</span>get_range<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出与我们前面看到的相同，但大部分逻辑都隐藏在一个模块中：</p> 
<pre><code class="prism language-python"><span class="token number">2016</span> Tesla Model S
This car has a <span class="token number">70</span><span class="token operator">-</span>kWh battery<span class="token punctuation">.</span>
This car can go approximately <span class="token number">240</span> miles on a full charge<span class="token punctuation">.</span>
</code></pre> 
<h3><a id="843__808"></a>8.4.3 从一个模块中导入多个类</h3> 
<p>可根据需要在程序文件中导入任意数量的类。</p> 
<p>如果我们要在同一个程序中创建普通汽车和电动汽车，就需要将Car 和ElectricCar 类都导入：</p> 
<pre><code>from car import Car, ElectricCar # ❶ 

my_beetle = Car('volkswagen', 'beetle', 2016) # ❷ 
print(my_beetle.get_descriptive_name())

my_tesla = ElectricCar('tesla', 'roadster', 2016) # ❸  
print(my_tesla.get_descriptive_name())
</code></pre> 
<p>在❶处从一个模块中导入多个类时，用逗号分隔了各个类。</p> 
<p>导入必要的类后，就可根据需要创建每个类的任意数量的实例。</p> 
<p>在这个示例中，我们在❷处创建了一辆大众甲壳虫普通汽车，并在❸处创建了一辆特斯拉Roadster电动汽车：</p> 
<pre><code>2016 Volkswagen Beetle
2016 Tesla Roadster
</code></pre> 
<h3><a id="844__830"></a>8.4.4 导入整个模块</h3> 
<p>你还可以导入整个模块，再使用句点表示法访问需要的类。</p> 
<p>这种导入方法很简单，代码也易于阅读。</p> 
<p>由于创建类实例的代码都包含模块名，因此不会与当前文件使用的任何名称发生冲突。</p> 
<p>下面的代码导入整个car 模块，并创建一辆普通汽车和一辆电动汽车：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> car <span class="token comment"># ❶ </span>

my_beetle <span class="token operator">=</span> car<span class="token punctuation">.</span>Car<span class="token punctuation">(</span><span class="token string">'volkswagen'</span><span class="token punctuation">,</span> <span class="token string">'beetle'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span> <span class="token comment"># ❷ </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_beetle<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

my_tesla <span class="token operator">=</span> car<span class="token punctuation">.</span>ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'roadster'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span> <span class="token comment"># ❸ </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们导入了整个car 模块。</p> 
<p>接下来，我们使用语法 module_name.class_name 访问需要的类。</p> 
<p>像前面一样，我们在❷处创建了一辆大众甲壳虫汽车，并在❸处创建了一辆特斯拉Roadster汽车。</p> 
<h3><a id="845__852"></a>8.4.5 导入模块中的所有类</h3> 
<p>要导入模块中的每个类，可使用下面的语法：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> module_name <span class="token keyword">import</span> <span class="token operator">*</span>
</code></pre> 
<p>不推荐使用这种导入方式，其原因有二。</p> 
<p>首先，如果只要看一下文件开头的import 语句，就能清楚地知道程序使用了哪些类，将大有裨益；但这种导入方式没有明确地指出你使用了模块中的哪些类。</p> 
<p>这种导入方式还可能引发名称方面的困惑。如果你不小心导入了一个与程序文件中其他东西同名的类，将引发难以诊断的错误。</p> 
<p>这里之所以介绍这种导入方式，是因为虽然不推荐使用这种方式，但你可能会在别人编写的代码中见到它。</p> 
<p>需要从一个模块中导入很多类时，最好导入整个模块，并使用 module_name.class_name 语法来访问类。</p> 
<p>这样做时，虽然文件开头并没有列出用到的所有类，但你清楚地知道在程序的哪些地方使用了导入的模块；</p> 
<p>你还避免了导入模块中的每个类可能引发的名称冲突。</p> 
<h3><a id="846__870"></a>8.4.6 在一个模块中导入另一个模块</h3> 
<p>有时候，需要将类分散到多个模块中，以免模块太大，或在同一个模块中存储不相关的类。</p> 
<p>将类存储在多个模块中时，你可能会发现一个模块中的类依赖于另一个模块中的类。</p> 
<p>在这种情况下，可在前一个模块中导入必要的类。</p> 
<p>例如，下面将Car 类存储在一个模块中，并将ElectricCar 和Battery 类存储在另一个模块中。</p> 
<p>我们将第二个模块命名为electric_car.py （这将覆盖前面创建的文件electric_car.py），并将Battery 和ElectricCar 类复制到这个模块中：</p> 
<pre><code class="prism language-python"><span class="token comment"># electric_car.py</span>
<span class="token triple-quoted-string string">"""一组可用于表示电动汽车的类"""</span>
❶ <span class="token keyword">from</span> car <span class="token keyword">import</span> Car

<span class="token keyword">class</span> <span class="token class-name">Battery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
    
<span class="token keyword">class</span> <span class="token class-name">ElectricCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
</code></pre> 
<p>ElectricCar 类需要访问其父类Car ，因此在❶处，我们直接将Car 类导入该模块中。</p> 
<p>如果我们忘记了这行代码，Python将在我们试图创建ElectricCar 实例时引发错误。</p> 
<p>我们还需要更新模块car ，使其包含Car 类：</p> 
<pre><code class="prism language-python"><span class="token comment"># car.py</span>
<span class="token triple-quoted-string string">"""一个可用于表示汽车的类"""</span>

<span class="token keyword">class</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token operator">-</span><span class="token operator">-</span>snip<span class="token operator">-</span><span class="token operator">-</span>
</code></pre> 
<p>现在可以分别从每个模块中导入类，以根据需要创建任何类型的汽车了：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> car <span class="token keyword">import</span> Car <span class="token comment"># ❶</span>
<span class="token keyword">from</span> electric_car <span class="token keyword">import</span> ElectricCar

my_beetle <span class="token operator">=</span> Car<span class="token punctuation">(</span><span class="token string">'volkswagen'</span><span class="token punctuation">,</span> <span class="token string">'beetle'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_beetle<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
my_tesla <span class="token operator">=</span> ElectricCar<span class="token punctuation">(</span><span class="token string">'tesla'</span><span class="token punctuation">,</span> <span class="token string">'roadster'</span><span class="token punctuation">,</span> <span class="token number">2016</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_tesla<span class="token punctuation">.</span>get_descriptive_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>在❶处，我们从模块car 中导入了Car 类，并从模块electric_car 中导入ElectricCar 类。</p> 
<p>接下来，我们创建了一辆普通汽车和一辆电动汽车。</p> 
<p>这两种汽车都得以正确地创建：</p> 
<pre><code>2016 Volkswagen Beetle
2016 Tesla Roadster
</code></pre> 
<h3><a id="847__922"></a>8.4.7 自定义工作流程</h3> 
<p>正如你看到的，在组织大型项目的代码方面，Python提供了很多选项。</p> 
<p>熟悉所有这些选项很重要，这样你才能确定哪种项目组织方式是最佳的，并能理解别人开发的项目。</p> 
<p>一开始应让代码结构尽可能简单。</p> 
<p>先尽可能在一个文件中完成所有的工作，确定一切都能正确运行后，再将类移到独立的模块中。</p> 
<p>如果你喜欢模块和文件的交互方式，可在项目开始时就尝试将类存储到模块中。</p> 
<p>先找出让你能够编写出可行代码的方式，再尝试让代码更为组织有序。</p> 
<h2><a id="87__934"></a>8.7 小结</h2> 
<p>在本章中，你学习了：如何编写类；如何使用属性在类中存储信息，以及如何编写方法，以让类具备所需的行为；</p> 
<p>如何编写方法__init__() ，以便根据类创建包含所需属性的实例。</p> 
<p>你见识了如何修改实例的属性——包括直接修改以及通过方法进行修改。</p> 
<p>你还了解了：使用继承可简化相关类的创建工作；将一个类的实例用作另一个类的属性可让类更 简洁。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7c5f925d200f2db09b418d5bcef8d5f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Servlet教程思维导图和学习笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dd401a1758411164b12b5c3dd9f4b468/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Socket编程(UDP和TCP)学习(自顶向下计网)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>