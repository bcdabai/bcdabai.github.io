<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VS CODE调试ROS/C&#43;&#43;程序 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VS CODE调试ROS/C&#43;&#43;程序" />
<meta property="og:description" content="文章目录 通常步骤1. 程序编译2. 配置launch.json3. 运行调试 出错解决1. 无法载入断点 该文档将会持续进行更新，涉及ROS调试中遇到的一些问题。 C&#43;&#43;程序的调试也相仿，只是去掉了启动 roscore的部分 通常步骤 1. 程序编译 这部分并不打算采用vscode的tasks.json来配置编译命令，而是选择手动的运行：
catkin_make --only_pkg-with-deps package_name 该命令可以单独的编译某个特定的package及其依赖项。
需要主要的是CMakeLists.txt应当修改成Debug模式：
OPTION(DEBUG_ON &#34;Turn on DEBUG Mode&#34; ON) IF(DEBUG_ON) MESSAGE(&#34;[Debug Mode]&#34;) SET(CMAKE_BUILD_TYPE &#34;Debug&#34;) SET(CMAKE_CXX_FLAGS_DEBUG &#34;$ENV{CXXFLAGS} -O0 -Wall -g -ggdb&#34;) ELSE() MESSAGE(&#34;[Release Mode]&#34;) SET(CMAKE_BUILD_TYPE &#34;Release&#34;) SET(CMAKE_CXX_FLAGS_RELEASE &#34;$ENV{CXXFLAGS} -O3 -Wall&#34;) ENDIF() 这样OPTION改成ON或者OFF，即可指定编译模式，比较方便。
2. 配置launch.json 这部分工作是本文的重点，单击vscode最右侧工具栏的Debug按钮（图标是一个甲虫&#43;暂停），点击debug页里的齿轮按钮，即可打开launch.json。内容修改成如下状态：
{ // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c19bd2f0646adc9eb46a577c73fc60e0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-28T16:55:31+08:00" />
<meta property="article:modified_time" content="2021-04-28T16:55:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VS CODE调试ROS/C&#43;&#43;程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_3" rel="nofollow">通常步骤</a></li><li><ul><li><a href="#1__4" rel="nofollow">1. 程序编译</a></li><li><a href="#2_launchjson_25" rel="nofollow">2. 配置launch.json</a></li><li><a href="#3__63" rel="nofollow">3. 运行调试</a></li></ul> 
   </li><li><a href="#_67" rel="nofollow">出错解决</a></li><li><ul><li><a href="#1__68" rel="nofollow">1. 无法载入断点</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 该文档将会持续进行更新，涉及ROS调试中遇到的一些问题。 
<br> C++程序的调试也相仿，只是去掉了启动 
<code>roscore</code>的部分 
<p></p> 
<h3><a id="_3"></a>通常步骤</h3> 
<h4><a id="1__4"></a>1. 程序编译</h4> 
<p>这部分并不打算采用vscode的tasks.json来配置编译命令，而是选择手动的运行：</p> 
<pre><code class="prism language-bash">catkin_make --only_pkg-with-deps package_name
</code></pre> 
<p>该命令可以单独的编译某个特定的package及其依赖项。<br> 需要主要的是CMakeLists.txt应当修改成Debug模式：</p> 
<pre><code>OPTION(DEBUG_ON "Turn on DEBUG Mode" ON)
IF(DEBUG_ON)
MESSAGE("[Debug Mode]")
SET(CMAKE_BUILD_TYPE "Debug") 
SET(CMAKE_CXX_FLAGS_DEBUG "$ENV{CXXFLAGS} -O0 -Wall -g -ggdb")
ELSE()
MESSAGE("[Release Mode]")
SET(CMAKE_BUILD_TYPE "Release") 
SET(CMAKE_CXX_FLAGS_RELEASE "$ENV{CXXFLAGS} -O3 -Wall")
ENDIF()
</code></pre> 
<p>这样OPTION改成ON或者OFF，即可指定编译模式，比较方便。</p> 
<h4><a id="2_launchjson_25"></a>2. 配置launch.json</h4> 
<p>这部分工作是本文的重点，单击vscode最右侧工具栏的Debug按钮（图标是一个甲虫+暂停），点击debug页里的齿轮按钮，即可打开launch.json。内容修改成如下状态：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Use IntelliSense to learn about possible attributes.</span>
    <span class="token comment">// Hover to view descriptions of existing attributes.</span>
    <span class="token comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span>
    <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>
    <span class="token string">"configurations"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"LiTAMIN2"</span><span class="token punctuation">,</span>
            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"cppdbg"</span><span class="token punctuation">,</span>
            <span class="token string">"request"</span><span class="token punctuation">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>
            <span class="token string">"program"</span><span class="token punctuation">:</span> <span class="token string">"/home/xyw/catkin_ws/devel/lib/test_registration/test_registration_node"</span><span class="token punctuation">,</span>
            <span class="token string">"args"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"251370668.pcd"</span><span class="token punctuation">,</span><span class="token string">"251371071.pcd"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">"stopAtEntry"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string">"cwd"</span><span class="token punctuation">:</span> <span class="token string">"${workspaceFolder}/data"</span><span class="token punctuation">,</span>
            <span class="token string">"environment"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">"externalConsole"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token string">"MIMode"</span><span class="token punctuation">:</span> <span class="token string">"gdb"</span><span class="token punctuation">,</span>
            <span class="token string">"setupCommands"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"description"</span><span class="token punctuation">:</span> <span class="token string">"Enable pretty-printing for gdb"</span><span class="token punctuation">,</span>
                    <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"-enable-pretty-printing"</span><span class="token punctuation">,</span>
                    <span class="token string">"ignoreFailures"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>解释下比较重要的几个选项：<br> <code>program:</code> 输入可执行文件的所在位置，要求是绝对路径。如果是ROS的话，一般编译出来都在<code>~/catkin_ws/devel/lib/包名/节点名</code>。<br> <code>args:</code> 传入到程序里的参数，即main接受的argv，不需要则设置为[]<br> <code>stopAtEntry:</code> 设置为true，则会在刚进入程序后直接暂停，比较方便的一共功能，建议使能。<br> <code>cwd:</code> 指定程序运行的环境，需要注意的是<code>${workspaceFolder}</code>指的是<code>.vscode</code>文件夹的上层路径，以我的环境为例，等价于<code>/home/xyw/catkin_ws/src/test_registration</code>。<br> （详情见于<a href="https://blog.csdn.net/weixin_39249524/article/details/105438814">vscode变量含义</a>）</p> 
<h4><a id="3__63"></a>3. 运行调试</h4> 
<p>在进入调试前，首先需要打开一个终端，运行<code>roscore</code>，否则节点无法正常启用。<br> 启动后，按工具栏左侧的Debug按钮，点击出现的浮窗里的绿色箭头，即可开始调试。</p> 
<h3><a id="_67"></a>出错解决</h3> 
<h4><a id="1__68"></a>1. 无法载入断点</h4> 
<p><strong>报错信息</strong>：Module containing this breakpoint has not yet loaded or the breakpoint address could not be obtained.<br> 这一般是因为编译时没有加<code>-g</code>导致的。有时候即便OPTION改成了ON，但编译依然还会按照OFF进行，这一点可以从编译输出信息里得到确认。<br> <strong>解决方法</strong>：<code>catkin_make --only_pkg-with-deps package_name</code>加上后缀<code>DDEBUG_ON=ON</code>，再重新编译。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/08c81c337c52164a3e6610d97d3c19cc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux 查看u盘挂载目录,Linux下手动挂载U盘</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6074d90c0e9f698acd834cb75531fefe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">整理了以BAT三巨头为例的薪资职别资料，写给想参加春招或想跳槽的学弟学妹们</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>