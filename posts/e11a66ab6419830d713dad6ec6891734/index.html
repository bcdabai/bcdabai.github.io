<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 查看并解决重复依赖 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android 查看并解决重复依赖" />
<meta property="og:description" content="原文链接
exclude group: ‘com.squareup.okhttp3’
exclude group: ‘com.squareup.okio’
exclude group: ‘com.google.code.gson’
//exclude(module: ‘gson’) // 防止版本冲突
}
Android 获取所有依赖库的几种方式
方式一：通过 dependencies 命令
./gradlew :app:dependencies
注意：这里的 app 是指工程下的 app 目录，如果你工程下没有 app 而是别的目录，要把这个 app 改为你的工程实际目录名字。
该 task 会显示如下所示的输出：
输出列表展示了所有 configuration 下的依赖树，依赖关系明显，层次清晰。如果觉得输出的结果太冗长 (通常情况下包含几十个 configuration)，可以通过指定 configuration 来显示特定的依赖树:
./gradlew :app:dependencies --configuration releaseCompileClasspath
该命令只会显示 release 模式下编译过程中的依赖树。
方式二： 通过 androidDependencies 命令
./gradlew :app:androidDependencies
输出结果如下：
图所示，该 task 会平铺展示依赖树，并且只展示几个主要的 variant，看起来较为清爽，但是缺点是不能像方式一那样指定 configuration。
方式三：自定义 task 获取
project.afterEvaluate { project.android.applicationVariants.all { variant -&gt; tasks." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e11a66ab6419830d713dad6ec6891734/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-24T11:08:19+08:00" />
<meta property="article:modified_time" content="2022-11-24T11:08:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 查看并解决重复依赖</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://blog.csdn.net/m0_64603776/article/details/121995557">原文链接</a></p> 
<p>exclude group: ‘com.squareup.okhttp3’<br> exclude group: ‘com.squareup.okio’<br> exclude group: ‘com.google.code.gson’<br> //exclude(module: ‘gson’) // 防止版本冲突<br> }</p> 
<p>Android 获取所有依赖库的几种方式<br> 方式一：通过 dependencies 命令<br> ./gradlew :app:dependencies</p> 
<p>注意：这里的 app 是指工程下的 app 目录，如果你工程下没有 app 而是别的目录，要把这个 app 改为你的工程实际目录名字。</p> 
<p>该 task 会显示如下所示的输出：<br> <img src="https://images2.imgbox.com/36/99/WljYfAZI_o.png" alt="在这里插入图片描述"><br> 输出列表展示了所有 configuration 下的依赖树，依赖关系明显，层次清晰。如果觉得输出的结果太冗长 (通常情况下包含几十个 configuration)，可以通过指定 configuration 来显示特定的依赖树:</p> 
<p>./gradlew :app:dependencies --configuration releaseCompileClasspath</p> 
<p>该命令只会显示 release 模式下编译过程中的依赖树。</p> 
<p>方式二： 通过 androidDependencies 命令<br> ./gradlew :app:androidDependencies</p> 
<p>输出结果如下：<br> <img src="https://images2.imgbox.com/90/46/PxrM7Kbk_o.png" alt="在这里插入图片描述"></p> 
<p>图所示，该 task 会平铺展示依赖树，并且只展示几个主要的 variant，看起来较为清爽，但是缺点是不能像方式一那样指定 configuration。</p> 
<p>方式三：自定义 task 获取</p> 
<pre><code class="prism language-html">project.afterEvaluate {
project.android.applicationVariants.all { variant -&gt;
tasks.create(name: “showDependenciesKaTeX parse error: Expected '}', got 'EOF' at end of input: …onfigurations."{variant.name}CompileClasspath”
} catch (Exception e) {
// 2.x
configuration = project.configurations."_KaTeX parse error: Expected 'EOF', got '}' at position 24: ….name}Compile" }̲ configuration.…{identifier.group}:i d e n t i f i e r . n a m e : {identifier.name}:identifier.name:{identifier.version}")
}
}
}
}
}
</code></pre> 
<p>如上，通过这种自定义 task 的方式，可以选择打印依赖，也可以选择保存到文件中，灵活度最高。</p> 
<p>总结：<br> 方式一：通用 task，按层次展示依赖树，可以通过指定 configuration 来过滤输出。<br> 方式二：android 项目特有的 task，平铺展示依赖树，不能过滤输出结果。<br> 方式三：自定义 task 获取依赖，灵活度最高，但是需要对 gradle 有较深的理解。</p> 
<p>解决重复依赖的方法<br> 1.</p> 
<pre><code class="prism language-html">
Program type already present: android.support.design.widget.CoordinatorLayout$1

需要将所有support包中的design模块移除

implementation(‘com.android.support:appcompat-v7:27.1.0’, {
exclude group: ‘com.android.support’, module: ‘design’
})
implementation(‘com.android.support:recyclerview-v7:27.1.0’, {
exclude group: ‘com.android.support’, module: ‘design’
})
implementation(‘com.android.support:cardview-v7:27.1.0’, {
exclude group: ‘com.android.support’, module: ‘design’
})
implementation(‘com.android.support:customtabs:27.1.0’, {
exclude group: ‘com.android.support’, module: ‘design’
})



</code></pre> 
<p>统一<code>design</code>包的版本，与以上<code>support</code>包版本一致</p> 
<pre><code class="prism language-html">implementation ‘com.android.support:design:27.1.0’
</code></pre> 
<p>接着<code>Sync</code> → <code>Clean</code> → <code>Build apk</code> 即可。<br> 解决依赖主要有两种方式</p> 
<p><strong>1.exclude 方式</strong><br> 特点：</p> 
<p>配置较为麻烦，需要在引起冲突的每个依赖上进行 exclude 操作<br> 配置繁琐，不美观<br> <img src="https://images2.imgbox.com/11/7a/76XqTI6O_o.png" alt="在这里插入图片描述"></p> 
<p>下面的方式也是可以的。</p> 
<pre><code class="prism language-html">implementation ‘org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.0.2’
implementation(‘org.eclipse.paho:org.eclipse.paho.android.service:1.0.2’) {
exclude(group: ‘com.google.android’, module: ‘support-v4’)
}

/* 或者粗暴点，就没有上面的坑了
implementation(‘org.eclipse.paho:org.eclipse.paho.android.service:1.0.2’) {
exclude module: ‘support-v4’
}
*/

</code></pre> 
<p><strong>2.通过 configurations 方式</strong><br> 特点：</p> 
<p>在 configurations 中，统一指定要配置的方式<br> 配置简单，较为整洁</p> 
<p><img src="https://images2.imgbox.com/75/3b/Nh87iI8D_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e08b443babacd07cc5ea30a69add0e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python3--socket编程(tcp协议)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9912b70f0620399f040123230b463939/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新版androd studio怎样连接第三方模拟器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>