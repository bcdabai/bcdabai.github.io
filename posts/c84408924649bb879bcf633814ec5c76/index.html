<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pandas的数据结构 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pandas的数据结构" />
<meta property="og:description" content="目录
1.pandas介绍
2.pandas的数据结构
2.1 Series
2.1 创建一个Series
2.1.1 创建一个具有标签索引的Series
2.1.2 使用python字典创建 Series
2.2 DataFrame
2. 2.1 根据多个字典序列创建dataframe
2.2.2 根据从文件、mysql中读取创建dataframe
1.pandas介绍 python数据分析三剑客：numpy、pandas、Matplotlib
NumPy(Numerical Python)：Python语言的一个扩展程序库，支持大量的维度数据与矩阵运算，针对数组提供大量的数学函数库 Pandas是一个强大的分析结构化数据的工具集；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。 Matplotlib是一个python绘图包
pandas安装： 1、下载使用Python类库集成安装包：anaconda https://www.anaconda.com 当今最流行的Python数据分析发行版 已经安装了数据分析需要的几乎所有的类库
2、pip3 install pandas
本课程演示方式 使用jupyter Jupyter Notebook 的本质是一个 Web 应用程序，便于创建和共享文学化程序文档，支持实时代码，数学方程，可视化和 markdown。 安装： pip3 install jupyter（需要python3.3或更高版本，或python2.7） 运行： jupyter notebook
########################################
2.pandas的数据结构 2.1 Series Series是一种类似于一维数组的对象，它由一组数据（不同数据类型）以及一组与之相关的数据标签（即索引）组成。Seriers的交互式显示的字符串表示形式是索引在左边，值在右边。 类似一个有序的字典。
########################################
2.1 创建一个Series &gt;&gt;&gt; import pandas as pd &gt;&gt;&gt; s1 = pd.Series([1,&#39;a&#39;,5.2,7]) &gt;&gt;&gt; s1 0 1 1 a 2 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c84408924649bb879bcf633814ec5c76/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-09T17:24:54+08:00" />
<meta property="article:modified_time" content="2022-05-09T17:24:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pandas的数据结构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1.pandas%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#1.pandas%E4%BB%8B%E7%BB%8D" rel="nofollow">1.pandas介绍</a></p> 
<p id="2.pandas%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-toc" style="margin-left:0px;"><a href="#2.pandas%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" rel="nofollow">2.pandas的数据结构</a></p> 
<p id="2.1%C2%A0%20Series-toc" style="margin-left:40px;"><a href="#2.1%C2%A0%20Series" rel="nofollow">2.1  Series</a></p> 
<p id="2.1%C2%A0%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASeries-toc" style="margin-left:80px;"><a href="#2.1%C2%A0%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASeries" rel="nofollow">2.1  创建一个Series</a></p> 
<p id="2.1.1%C2%A0%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E6%A0%87%E7%AD%BE%E7%B4%A2%E5%BC%95%E7%9A%84Series-toc" style="margin-left:80px;"><a href="#2.1.1%C2%A0%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E6%A0%87%E7%AD%BE%E7%B4%A2%E5%BC%95%E7%9A%84Series" rel="nofollow">2.1.1  创建一个具有标签索引的Series</a></p> 
<p id="2.1.2%C2%A0%20%E4%BD%BF%E7%94%A8python%E5%AD%97%E5%85%B8%E5%88%9B%E5%BB%BA%20Series-toc" style="margin-left:80px;"><a href="#2.1.2%C2%A0%20%E4%BD%BF%E7%94%A8python%E5%AD%97%E5%85%B8%E5%88%9B%E5%BB%BA%20Series" rel="nofollow">2.1.2  使用python字典创建 Series</a></p> 
<p id="2.2%C2%A0%C2%A0%C2%A0DataFrame-toc" style="margin-left:0px;"><a href="#2.2%C2%A0%C2%A0%C2%A0DataFrame" rel="nofollow">2.2   DataFrame</a></p> 
<p id="2.%202.1%20%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E5%AD%97%E5%85%B8%E5%BA%8F%E5%88%97%E5%88%9B%E5%BB%BAdataframe-toc" style="margin-left:80px;"><a href="#2.%202.1%20%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E5%AD%97%E5%85%B8%E5%BA%8F%E5%88%97%E5%88%9B%E5%BB%BAdataframe" rel="nofollow">2. 2.1 根据多个字典序列创建dataframe</a></p> 
<p id="2.2.2%C2%A0%C2%A0%C2%A0%E6%A0%B9%E6%8D%AE%E4%BB%8E%E6%96%87%E4%BB%B6%E3%80%81mysql%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%88%9B%E5%BB%BAdataframe-toc" style="margin-left:80px;"><a href="#2.2.2%C2%A0%C2%A0%C2%A0%E6%A0%B9%E6%8D%AE%E4%BB%8E%E6%96%87%E4%BB%B6%E3%80%81mysql%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%88%9B%E5%BB%BAdataframe" rel="nofollow">2.2.2   根据从文件、mysql中读取创建dataframe</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.pandas%E4%BB%8B%E7%BB%8D">1.pandas介绍</h2> 
<p>python数据分析三剑客：numpy、pandas、Matplotlib</p> 
<p>NumPy(Numerical Python)：Python语言的一个扩展程序库，支持大量的维度数据与矩阵运算，针对数组提供大量的数学函数库 <span style="color:#fe2c24;"><strong>Pandas是一个强大的分析结构化数据的工具集</strong></span>；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。 Matplotlib是一个python绘图包</p> 
<p>pandas安装： 1、下载使用Python类库集成安装包：anaconda <a href="https://www.anaconda.com/" rel="nofollow" title="https://www.anaconda.com">https://www.anaconda.com</a> 当今最流行的Python数据分析发行版 已经安装了数据分析需要的几乎所有的类库</p> 
<p>2、pip3 install pandas</p> 
<p>本课程演示方式 使用jupyter Jupyter Notebook 的本质是一个 Web 应用程序，便于创建和共享文学化程序文档，支持实时代码，数学方程，可视化和 markdown。 安装： pip3 install jupyter（需要python3.3或更高版本，或python2.7） 运行： jupyter notebook</p> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span></p> 
<h2 id="2.pandas%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">2.pandas的数据结构</h2> 
<h3 id="2.1%C2%A0%20Series">2.1  Series</h3> 
<p>Series是一种类似于一维数组的对象，它由一组数据（不同数据类型）以及一组与之相关的数据标签（即索引）组成。Seriers的交互式显示的字符串表示形式是索引在左边，值在右边。 类似一个有序的字典。</p> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span></p> 
<h4 id="2.1%C2%A0%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASeries">2.1  创建一个Series</h4> 
<pre><code class="language-python">&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; s1 = pd.Series([1,'a',5.2,7])
&gt;&gt;&gt; s1
0      1
1      a
2    5.2
3      7
dtype: object
</code></pre> 
<p>获取索引</p> 
<pre><code class="language-python">&gt;&gt;&gt; s1.index
RangeIndex(start=0, stop=4, step=1)
</code></pre> 
<p>获取数据</p> 
<pre><code class="language-python">&gt;&gt;&gt; s1.values
array([1, 'a', 5.2, 7], dtype=object)
</code></pre> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span> </p> 
<h4 id="2.1.1%C2%A0%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E6%A0%87%E7%AD%BE%E7%B4%A2%E5%BC%95%E7%9A%84Series">2.1.1  创建一个具有标签索引的Series</h4> 
<pre><code class="language-python">&gt;&gt;&gt; s2 = pd.Series([1,'a',5.2,7],index=['d','b','a','c'])
&gt;&gt;&gt; s2.index
Index(['d', 'b', 'a', 'c'], dtype='object')
&gt;&gt;&gt; s2.values
array([1, 'a', 5.2, 7], dtype=object)
</code></pre> 
<p><strong>根据标签索引查询数据</strong></p> 
<p>类似Python的字典dict</p> 
<pre><code class="language-python">&gt;&gt;&gt; s2 = pd.Series([1,'a',5.2,7],index=['d','b','a','c'])
&gt;&gt;&gt; s2['d']
1
&gt;&gt;&gt; s2['c']
7
&gt;&gt;&gt; s2['a']
5.2
&gt;&gt;&gt; type(s2['a'])
&lt;class 'float'&gt;
&gt;&gt;&gt; s2[['b','a']]
b      a
a    5.2
dtype: object
&gt;&gt;&gt; type(s2[['b','a']])
&lt;class 'pandas.core.series.Series'&gt;
</code></pre> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span> </p> 
<h4 id="2.1.2%C2%A0%20%E4%BD%BF%E7%94%A8python%E5%AD%97%E5%85%B8%E5%88%9B%E5%BB%BA%20Series">2.1.2  使用python字典创建 Series</h4> 
<pre><code class="language-python">&gt;&gt;&gt; sdata={'a':35000,'b':72000,'c':16000,'d':5000}
&gt;&gt;&gt; s3=pd.Series(sdata)
&gt;&gt;&gt; s3
a    35000
b    72000
c    16000
d     5000
dtype: int64
</code></pre> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span> </p> 
<h2 id="2.2%C2%A0%C2%A0%C2%A0DataFrame">2.2   DataFrame</h2> 
<p>DataFrame是一个表格型的数据结构</p> 
<ul><li>每列可以是不同的值类型（数值、字符串、布尔值等）</li><li>既有行索引index,也有列索引columns</li><li>可以被看做由Series组成的字典</li></ul> 
<p> <span style="color:#0d0016;"><strong>########################################</strong></span> </p> 
<h4 id="2.%202.1%20%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E5%AD%97%E5%85%B8%E5%BA%8F%E5%88%97%E5%88%9B%E5%BB%BAdataframe">2. 2.1 根据多个字典序列创建dataframe</h4> 
<pre><code class="language-python">&gt;&gt;&gt; data={
...         'state':['Ohio','Ohio','Ohio','Nevada','Nevada'],
...         'year':[2000,2001,2002,2001,2002],
...         'pop':[1.5,1.7,3.6,2.4,2.9]
...     }
&gt;&gt;&gt; df = pd.DataFrame(data)
&gt;&gt;&gt; df
    state  year  pop
0    Ohio  2000  1.5
1    Ohio  2001  1.7
2    Ohio  2002  3.6
3  Nevada  2001  2.4
4  Nevada  2002  2.9
# 查看列的类型
&gt;&gt;&gt; df.dtypes
state     object
year       int64
pop      float64
dtype: object
# 查看有哪些列
&gt;&gt;&gt; df.columns
Index(['state', 'year', 'pop'], dtype='object')
# 查看行的索引
&gt;&gt;&gt; df.index
RangeIndex(start=0, stop=5, step=1)

</code></pre> 
<p><strong>根据标签索引查询数据</strong></p> 
<pre><code class="language-python">&gt;&gt;&gt; df[['state','year']]
    state  year
0    Ohio  2000
1    Ohio  2001
2    Ohio  2002
3  Nevada  2001
4  Nevada  2002
</code></pre> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span>  </p> 
<h4 id="2.2.2%C2%A0%C2%A0%C2%A0%E6%A0%B9%E6%8D%AE%E4%BB%8E%E6%96%87%E4%BB%B6%E3%80%81mysql%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%88%9B%E5%BB%BAdataframe">2.2.2   根据从文件、mysql中读取创建dataframe</h4> 
<p><strong>读取csv、txt文件 --&gt; read_csv() </strong></p> 
<p><strong>读取xlsx文件 --&gt; read_excel() </strong></p> 
<p><strong>读取mysql数据库 --&gt; read_sql() </strong></p> 
<p><strong>从网页读取table --&gt;read_html()</strong></p> 
<p></p> 
<p><strong>从csv文件读取</strong></p> 
<pre><code class="language-python"># 从csv文件里面读取
&gt;&gt;&gt; fpath = "/lianxi/datas/read_test.csv"
&gt;&gt;&gt; df = pd.read_csv(fpath)
&gt;&gt;&gt; df
          date   prov    isp    pv    uv
0   2020-04-26  hunan  cmnet  2000  1000
1   2020-04-26  hunan  cmnet  3000  1500
2   2020-04-26  hunan   cmcc  4000  1000
3   2020-04-26  hubei    ctc  2500  1000
4   2020-04-26  hubei   cmcc  2000  1000
5   2020-04-26  hubei    ctc  2100  1600
6   2020-04-27  hunan  cmnet  4000  1700
7   2020-04-27  hunan  cmnet  3200  1500
8   2020-04-27  hunan   cmcc  2800  1600
9   2020-04-27  hubei    ctc  2600  1400
10  2020-04-27  hubei   cmcc  3800  1900
11  2020-04-27  hubei    ctc  2400  1900


</code></pre> 
<p> <span style="color:#0d0016;"><strong>########################################</strong></span> </p> 
<p><strong>从网页拉取table数据</strong></p> 
<p>从网页拉取table数据需要先安装 lxml库</p> 
<pre><code class="language-python">[root@localhost datas]# pip3 install lxml
</code></pre> 
<p> <img alt="" height="540" src="https://images2.imgbox.com/76/e1/emTb26sm_o.png" width="1020"></p> 
<p> </p> 
<pre><code class="language-python">&gt;&gt;&gt; url =  'http://ranking.promisingedu.com/qs'
&gt;&gt;&gt; df = pd.read_html(url)[0]
&gt;&gt;&gt; df
     Ranking                      University English Name  ... Overall Score  Free
0          1  Massachusetts Institute of Technology (MIT)  ...         100.0  免费评估
1          2                     牛津大学University of Oxford  ...          99.5  免费评估
2          3                          Stanford University  ...          98.7  免费评估
3          3                  剑桥大学University of Cambridge  ...          98.7  免费评估
4          5                           Harvard University  ...          98.0  免费评估
..       ...                                          ...  ...           ...   ...
496      494                           Dongguk University  ...          24.1  免费评估
497      494                        Iowa State University  ...          24.1  免费评估
498      494                            Sogang University  ...          24.1  免费评估
499      494             University of Rome "Tor Vergata"  ...          24.1  免费评估
500      494                              York University  ...          24.1  免费评估

[501 rows x 11 columns]
</code></pre> 
<p><span style="color:#0d0016;"><strong>########################################</strong></span>  </p> 
<p><strong>从数据库拉取</strong></p> 
<pre><code>import pandas as pd
import pymysql
conn = pymysql.connect(
        host='192.168.44.132',
        user='sc',
        password='123456',
        database='sc',
        charset='utf8'
    )
# 从mysql读取数据
mysql_page = pd.read_sql("select * from userinfo", con=conn)
mysql_page
		username	userage
	0		sc1			12
	1		sc2			14
	2		sc3			13</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8185ed0a3de9a4d76797a89247ccc726/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">贷前中后简单记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3622085cecb12cc19d329d68d52e6056/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Echarts官方实例地图不显示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>