<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>模型预测控制（MPC）算法原理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="模型预测控制（MPC）算法原理" />
<meta property="og:description" content="模型预测算法是在欧美等国家兴起的应用于工业领域的一种优化控制算法。目前经过多年的发展，在工业领域、智能控制领域等都有应用。随着算法的理论的完善，其已经成为工业领域内经常使用的一种经典算法。虽然在各个领域算法的应用存在差异。
但他们都遵循预测模型、滚动优化、和反馈校正的基本原理。并且，近年来在汽车工业尤其是在车辆智驾驶技术上，模型预测算法的应用越来越受欢迎。很多科研机构利用了模型预测的原理进行了智能车辆的轨迹跟踪控制研究，下面将详细阐述模型预测算法的原理。
（1）预测模型 预测模型是模型预测控制的基础，它能够通过控制系统中被控平台提供的当前系统状态信息，再加上未来的控制输入变量，预测到未来的被控平台的状态。
预测模型的形式没有确定的形式要求，可以是状态空间方程、传递函数也可以是阶跃响应模型、脉冲响应模型模糊模型等。根据被控对象和需要预测的状态选择合适的预测模型。
对于车辆方向而言，模型预测控制选择状态空间模型比较合适。
（2）滚动优化 预测控制中的优化与通常的离散最优控制算法不同，不是采用一个不变的全局最优目标，而是采用滚动式的有限时域优化策略。
在每一采样时刻，根据该时刻的优化性能指标，求解该时刻起有限时段的最优控制率。计算得到的控制作用序列也只有当前值是实际执行的，在下一个采样时刻又重新求取最优控制率。
也就是说，优化过程不是一次离线完成的，而是反复在线进行（即在每一采样时刻，优化性能指标只涉及从该时刻起到未来有限的时间，而到下一个采样时刻，这一优化时段会同时向前推移）。
通过滚动优化策略，始终在实际的基础上建立新的优化目标，兼顾了对未来有限时域内的理想优化和实际不确定性的影响。这要比建立在理想条件下的传统最优控制更加实际和有效。
（3） 反馈校正 预测控制求解的是一个开环优化问题。在预测控制中，采用预测模型进行过程输出值的预估只是一种理想的方式，对于实际过程，由于存在非线性、时变、模型失配和干扰等不确定因素，使基于模型的预测不可能准确地与实际相符。
因此，在预测控制中，通过输出的测量值与模型的预估值进行比较，得出模型的预测误差，再利用模型预测误差来校正模型的预测值，从而得到更为准确的将来输出的预测值。正是这种由模型加反馈校正的过程，使预测控制具有很强的抗干扰和克服系统不确定的能力。不断根据系统的实际输出对预测输出做出修正，使滚动优化不但基于模型，而且利用反馈信息，构闭环优化控制。
跟据上面所提三要素（预测模型、滚动优化、反馈矫正/误差补偿），模型预测算法的控制原理如上图 所示。
控制过程中，存在一条期望的参考轨迹。在整个控制时域中，令 k 时刻为当前时刻。控制器结合当前系统的测量值和预测模型，预测未来一段时域内 [K,K&#43;p]（也被称为预测时域）系统的输出。
通过求解满足目标函数以及各种约束的优化问题，得到 [K,K&#43;M]（这段时间为控制时域，控制时域的时间段要比预测时域时间段要短）时域内的一系列控制变量序列。并将该时控制系列中的第一个元素作为被控对象的实际控制量，当来到下一时刻 k &#43;1时重复上述过程。如此滚动的完成一个个带约束的优化问题。以此实现对被控对象的持续控制。
模型预测控制原理框架
模型预测控制器原理框图如上图所示，包含了 MPC 控制器、被控车辆、状态估计三个基本模块。
1.MPC控制器结合预测模型、目标函数和约束条件进行最优化求解。得到当前时刻的最优控制序列；
2.将控制序列的第一个元素作为控制变量输入到被控平台中，被控平台执行接受到的控制指令，然后将当前时刻的状态量观测值输入给状态估计器；
3.状态估计器将会对于那些没有办法直接观测的状态量进行估计，如地面附着系数。将状态量输入到 MPC 控制器，再次进行最优化求解，得到下一时刻被控平台所需的控制变量。
如此循环，构成了完整的模型预测控制过程。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5fcc381c45bfe8a60a6f99fa6277ef5c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-05T09:47:28+08:00" />
<meta property="article:modified_time" content="2023-01-05T09:47:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">模型预测控制（MPC）算法原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="">模型预测算法是在欧美等国家兴起的应用于工业领域的一种优化控制算法。目前经过多年的发展，在工业领域、智能控制领域等都有应用。随着算法的理论的完善，其已经成为工业领域内经常使用的一种经典算法。虽然在各个领域算法的应用存在差异。</p> 
 <p style="">但<span class="kdocs-bold" style="font-weight:bold;">他们都遵循</span><span class="kdocs-color" style="color:#C21C13;"><span class="kdocs-bold" style="font-weight:bold;">预测模型</span></span><span class="kdocs-bold" style="font-weight:bold;">、</span><span class="kdocs-color" style="color:#C21C13;"><span class="kdocs-bold" style="font-weight:bold;">滚动优化</span></span><span class="kdocs-bold" style="font-weight:bold;">、和</span><span class="kdocs-color" style="color:#C21C13;"><span class="kdocs-bold" style="font-weight:bold;">反馈校正</span></span><span class="kdocs-bold" style="font-weight:bold;">的基本原理</span>。并且，<span class="kdocs-bold" style="font-weight:bold;">近年来在汽车工业尤其是在车辆智驾驶技术上，模型预测算法的应用越来越受欢迎</span>。<span class="kdocs-bold" style="font-weight:bold;">很多科研机构利用了模型预测的原理进行了</span><span class="kdocs-color" style="color:#58A401;"><span class="kdocs-bold" style="font-weight:bold;">智能车辆的轨迹跟踪控制</span></span><span class="kdocs-bold" style="font-weight:bold;">研究</span>，下面将详细阐述模型预测算法的原理。</p> 
 <h3 style=""><span class="kdocs-color" style="color:#C21C13;"><span class="kdocs-bold" style="font-weight:bold;">（1）预测模型</span></span></h3> 
 <p style="">预测模型是模型预测控制的<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">基础</span></span>，它能够通过控制系统中被控平台提供的<span class="kdocs-color" style="color:#080F17;"><span class="kdocs-bold" style="font-weight:bold;">当前系统状态信息</span></span>，再加上<span class="kdocs-color" style="color:#080F17;"><span class="kdocs-bold" style="font-weight:bold;">未来的控制输入变量</span></span>，<span class="kdocs-color" style="color:#080F17;"><span class="kdocs-bold" style="font-weight:bold;">预测到未来的被控平台的状态</span></span>。</p> 
 <p style="">预测模型的形式没有确定的形式要求，可以是<span class="kdocs-color" style="color:#080F17;"><span class="kdocs-bold" style="font-weight:bold;">状态空间方程</span>、<span class="kdocs-bold" style="font-weight:bold;">传递函数</span>也可以是<span class="kdocs-bold" style="font-weight:bold;">阶跃响应模型</span>、<span class="kdocs-bold" style="font-weight:bold;">脉冲响应模型模糊模型</span>等</span>。根据<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">被控对象</span></span>和<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">需要预测的状态</span></span>选择合适的预测模型。</p> 
 <p style="">对于车辆方向而言，模型预测控制选择状态空间模型比较合适。</p> 
 <h3 style=""><span class="kdocs-color" style="color:#C21C13;">（2）滚动优化</span></h3> 
 <p style="">预测控制中的优化与通常的<span class="kdocs-color" style="color:#078654;"><span class="kdocs-bold" style="font-weight:bold;">离散最优控制算法</span></span>不同，不是采用一个不变的全局最优目标，而是<span class="kdocs-bold" style="font-weight:bold;">采用滚动式的有限时域优化策略</span>。</p> 
 <p style="">在每一采样时刻，<span class="kdocs-bold" style="font-weight:bold;">根据该时刻的优化性能指标</span>，求解该时刻起<span class="kdocs-bold" style="font-weight:bold;">有限时段的最优控制率</span>。<span class="kdocs-bold" style="font-weight:bold;">计算得到的控制作用序列也只有当前值是实际执行的，在下一个采样时刻又重新求取最优控制率。</span></p> 
 <p style="">也就是说，优化过程不是一次离线完成的，而是<span class="kdocs-bold" style="font-weight:bold;">反复在线进行</span>（即在每一采样时刻，优化性能指标只涉及从该时刻起到未来有限的时间，而到下一个采样时刻，这一优化时段会同时向前推移）。</p> 
 <p style="">通过<span class="kdocs-color" style="color:#078654;"><span class="kdocs-bold" style="font-weight:bold;">滚动优化策略</span></span>，<span class="kdocs-bold" style="font-weight:bold;">始终在实际的基础上建立新的优化目标</span>，兼顾了对<span class="kdocs-bold" style="font-weight:bold;">未来有限时域内的理想优化</span>和<span class="kdocs-bold" style="font-weight:bold;">实际不确定性的影响</span>。这要比建立在理想条件下的传统最优控制更加实际和有效。</p> 
 <h3 style=""><span class="kdocs-color" style="color:#C21C13;">（3） 反馈校正</span></h3> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">预测控制求解的是一个开环优化问题。</span>在预测控制中，采用预测模型进行过程输出值的预估只是一种理想的方式，对于实际过程，由于存在<span class="kdocs-bold" style="font-weight:bold;">非线性</span>、<span class="kdocs-bold" style="font-weight:bold;">时变</span>、<span class="kdocs-bold" style="font-weight:bold;">模型失配</span>和<span class="kdocs-bold" style="font-weight:bold;">干扰</span>等不确定因素，使基于模型的预测不可能准确地与实际相符。</p> 
 <p style="">因此，在预测控制中，通过<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">输出的测量值</span></span>与<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">模型的预估值</span></span>进行比较，得出<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">模型的预测误差</span></span>，再利用模型预测误差来校正模型的预测值，从而<span class="kdocs-bold" style="font-weight:bold;">得到更为准确的将来输出的预测值</span>。正是这种由模型加反馈校正的过程，使预测控制具有很强的<span class="kdocs-bold" style="font-weight:bold;">抗干扰</span>和<span class="kdocs-bold" style="font-weight:bold;">克服系统不确定</span>的能力。不断根据系统的实际输出对预测输出做出修正，使滚动优化不但基于模型，而且<span class="kdocs-bold" style="font-weight:bold;">利用反馈信息，构闭环优化控制</span>。</p> 
 <div class="kdocs-line-container" style="display:flex;justify-content:center;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:506;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:58.300396%;height:0;"> 
    <img src="https://images2.imgbox.com/db/4f/HRurPLDE_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-58.300396%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">跟据上面所提<span class="kdocs-bold" style="font-weight:bold;">三要素（预测模型、滚动优化、反馈矫正/误差补偿）</span>，模型预测算法的控制原理如上图 所示。</p> 
 <p style="">控制过程中，存在一条期望的参考轨迹。在整个控制时域中，令 k 时刻为当前时刻。控制器结合当前系统的<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">测量值</span></span>和<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">预测模型</span></span>，预测未来一段时域内<span class="kdocs-bold" style="font-weight:bold;"> [K,K+p]</span>（也被称为<span class="kdocs-bold" style="font-weight:bold;">预测时域</span>）<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">系统的输出</span></span>。</p> 
 <p style="">通过求解满足<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">目标函数</span></span>以及<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">各种约束的优化</span></span>问题，得到<span class="kdocs-bold" style="font-weight:bold;"> [K,K+M]</span>（这段时间为<span class="kdocs-bold" style="font-weight:bold;">控制时域</span>，控制时域的时间段要比预测时域时间段要短）时域内的<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">一系列控制变量序列</span></span>。并将该时控制系列中的<span class="kdocs-bold" style="font-weight:bold;">第一个元素</span>作为<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">被控对象的实际控制量</span></span>，当来到下一时刻 k +1时重复上述过程。如此滚动的完成一个个带约束的优化问题。以此实现对被控对象的持续控制。</p> 
 <div class="kdocs-line-container" style="display:flex;justify-content:center;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:503;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:48.707752%;height:0;"> 
    <img src="https://images2.imgbox.com/81/ed/aMiBJvrN_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-48.707752%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:center;"><span class="kdocs-bold" style="font-weight:bold;">模型预测控制原理框架</span></p> 
 <p style="">模型预测控制器原理框图如上图所示，包含了<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;"> MPC 控制器</span></span>、<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">被控车辆</span></span>、<span class="kdocs-color" style="color:#0E52D4;"><span class="kdocs-bold" style="font-weight:bold;">状态估计</span></span>三个基本模块。</p> 
 <p style="">1.MPC控制器结合预测模型、目标函数和约束条件进行最优化求解。得到当前时刻的最优控制序列；</p> 
 <p style="">2.将控制序列的第一个元素作为控制变量输入到被控平台中，被控平台执行接受到的控制指令，然后将当前时刻的状态量观测值输入给状态估计器；</p> 
 <p style="">3.状态估计器将会对于那些没有办法直接观测的状态量进行估计，如地面附着系数。将状态量输入到 MPC 控制器，再次进行最优化求解，得到下一时刻被控平台所需的控制变量。</p> 
 <p style="">如此循环，构成了完整的模型预测控制过程。</p> 
 <p style=""></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e55ecf645b3ecf5419c4b3d78c09c26f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java集合如何遍历删除指定元素</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2c98a22f65e214e35685a0765e01d709/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于TCP/UDP协议的聊天室</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>