<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机网络自顶向下方法学习笔记—————第二章：应用层 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="计算机网络自顶向下方法学习笔记—————第二章：应用层" />
<meta property="og:description" content="Chapter 2: Application Layer 目录
Chapter 2: Application Layer
一：导论
（1）为什么要有应用层
（2）一些网络应用的例子
二：应用层协议原理（Principles of network applications）
（1）创建一个网络应用
（2）网络应用程序体系架构
客户-服务器模式（Client-Server architecture）
服务端
客户端（eg：HTTP，FTP，SMTP）
P2P体系结构
（2）进程通信
客户-服务器进程
网络套接字（socket）
进程寻址（Addressing processes）
（3）可供应用程序使用的运输服务分类
数据丢失率
吞吐量（throughput）
延时（delay）
安全
（4）因特网提供的服务（也可以叫传输层提供的服务）
TCP
UDP
当前因特网不提供的服务
（5）应用层协议
（6）本节中常见的网络应用以及对应的应用层协议
三：Web 和HTTP
（1）基本概念
什么是Web
而什么是HTTP呢？
（2）两种HTTP（持续&amp;非持续）
非持续连接（Non-persistent HTTP）
一个具体的例子
响应时间（RTT）
持续连接（persistent HTTP）
非持续连接的缺点
持续HTTP（HTTP1.1）：
（3）HTTP报文格式
HTTP请求报文：
HTTP响应报文：
（4）用户与服务器的交互：cookie
cookie的组件
cookie的具体实现（如下图所示）
HTTP cookies的作用
对于cookie的安全性思考
首先就是服务器站点可能将用户的信息泄露给第三方（即很久之前就有过在一个软件搜相关商品，在另外一个软件它给我推荐这商品）
（5）Web 缓存（caches）————代理服务器
目标：不访问原始服务器，就可以满足用户需求
具体方式：浏览器将所有的HTTP请求发送给缓冲
好处
Web缓存（caches）下时延（delay）的计算" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/38dee9d44d46caa66765058cedb13e3b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-31T12:29:10+08:00" />
<meta property="article:modified_time" content="2023-12-31T12:29:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络自顶向下方法学习笔记—————第二章：应用层</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="Chapter%202%3A%20Application%20Layer">Chapter 2: Application Layer</h2> 
<p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="Chapter%202%3A%20Application%20Layer-toc" style="margin-left:0px;"><a href="#Chapter%202%3A%20Application%20Layer" rel="nofollow">Chapter 2: Application Layer</a></p> 
<p id="%E4%B8%80%EF%BC%9A%E5%AF%BC%E8%AE%BA-toc" style="margin-left:40px;"><a href="#%E4%B8%80%EF%BC%9A%E5%AF%BC%E8%AE%BA" rel="nofollow">一：导论</a></p> 
<p id="%EF%BC%881%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E5%BA%94%E7%94%A8%E5%B1%82-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E5%BA%94%E7%94%A8%E5%B1%82" rel="nofollow">（1）为什么要有应用层</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%B8%80%E4%BA%9B%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%9A%84%E4%BE%8B%E5%AD%90-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E4%B8%80%E4%BA%9B%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%9A%84%E4%BE%8B%E5%AD%90" rel="nofollow">（2）一些网络应用的例子</a></p> 
<p id="%E4%BA%8C%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86%EF%BC%88Principles%20of%20network%20applications%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86%EF%BC%88Principles%20of%20network%20applications%EF%BC%89" rel="nofollow">二：应用层协议原理（Principles of network applications）</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8" rel="nofollow">（1）创建一个网络应用</a></p> 
<p id="%EF%BC%882%EF%BC%89%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84" rel="nofollow">（2）网络应用程序体系架构</a></p> 
<p id="%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Client-Server%20architecture%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Client-Server%20architecture%EF%BC%89" rel="nofollow">客户-服务器模式（Client-Server architecture）</a></p> 
<p id="%E6%9C%8D%E5%8A%A1%E7%AB%AF-toc" style="margin-left:160px;"><a href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">服务端</a></p> 
<p id="%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88eg%EF%BC%9AHTTP%EF%BC%8CFTP%EF%BC%8CSMTP%EF%BC%89-toc" style="margin-left:160px;"><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88eg%EF%BC%9AHTTP%EF%BC%8CFTP%EF%BC%8CSMTP%EF%BC%89" rel="nofollow">客户端（eg：HTTP，FTP，SMTP）</a></p> 
<p id="P2P%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-toc" style="margin-left:120px;"><a href="#P2P%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" rel="nofollow">P2P体系结构</a></p> 
<p id="%EF%BC%882%EF%BC%89%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" rel="nofollow">（2）进程通信</a></p> 
<p id="%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B-toc" style="margin-left:120px;"><a href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B" rel="nofollow">客户-服务器进程</a></p> 
<p id="%E7%BD%91%E7%BB%9C%E5%A5%97%E6%8E%A5%E5%AD%97%EF%BC%88socket%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E7%BD%91%E7%BB%9C%E5%A5%97%E6%8E%A5%E5%AD%97%EF%BC%88socket%EF%BC%89" rel="nofollow">网络套接字（socket）</a></p> 
<p id="%E8%BF%9B%E7%A8%8B%E5%AF%BB%E5%9D%80%EF%BC%88Addressing%20processes%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E8%BF%9B%E7%A8%8B%E5%AF%BB%E5%9D%80%EF%BC%88Addressing%20processes%EF%BC%89" rel="nofollow">进程寻址（Addressing processes）</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%8F%AF%E4%BE%9B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1%E5%88%86%E7%B1%BB-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E5%8F%AF%E4%BE%9B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1%E5%88%86%E7%B1%BB" rel="nofollow">（3）可供应用程序使用的运输服务分类</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E7%8E%87-toc" style="margin-left:120px;"><a href="#%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E7%8E%87" rel="nofollow">数据丢失率</a></p> 
<p id="%E5%90%9E%E5%90%90%E9%87%8F%EF%BC%88throughput%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E5%90%9E%E5%90%90%E9%87%8F%EF%BC%88throughput%EF%BC%89" rel="nofollow">吞吐量（throughput）</a></p> 
<p id="%E5%BB%B6%E6%97%B6%EF%BC%88delay%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E5%BB%B6%E6%97%B6%EF%BC%88delay%EF%BC%89" rel="nofollow">延时（delay）</a></p> 
<p id="%E5%AE%89%E5%85%A8-toc" style="margin-left:120px;"><a href="#%E5%AE%89%E5%85%A8" rel="nofollow">安全</a></p> 
<p id="%EF%BC%884%EF%BC%89%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%88%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%8F%AB%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%88%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%8F%AB%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%89" rel="nofollow">（4）因特网提供的服务（也可以叫传输层提供的服务）</a></p> 
<p id="TCP-toc" style="margin-left:120px;"><a href="#TCP" rel="nofollow">TCP</a></p> 
<p id="UDP-toc" style="margin-left:120px;"><a href="#UDP" rel="nofollow">UDP</a></p> 
<p id="%E5%BD%93%E5%89%8D%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1-toc" style="margin-left:120px;"><a href="#%E5%BD%93%E5%89%8D%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1" rel="nofollow">当前因特网不提供的服务</a></p> 
<p id="%EF%BC%885%EF%BC%89%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE" rel="nofollow">（5）应用层协议</a></p> 
<p id="%EF%BC%886%EF%BC%89%E6%9C%AC%E8%8A%82%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E6%9C%AC%E8%8A%82%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE" rel="nofollow">（6）本节中常见的网络应用以及对应的应用层协议</a></p> 
<p id="%E4%B8%89%EF%BC%9AWeb%20%E5%92%8CHTTP-toc" style="margin-left:40px;"><a href="#%E4%B8%89%EF%BC%9AWeb%20%E5%92%8CHTTP" rel="nofollow">三：Web 和HTTP</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="nofollow">（1）基本概念</a></p> 
<p id="%E4%BB%80%E4%B9%88%E6%98%AFWeb-toc" style="margin-left:120px;"><a href="#%E4%BB%80%E4%B9%88%E6%98%AFWeb" rel="nofollow">什么是Web</a></p> 
<p id="%E8%80%8C%E4%BB%80%E4%B9%88%E6%98%AFHTTP%E5%91%A2%EF%BC%9F-toc" style="margin-left:120px;"><a href="#%E8%80%8C%E4%BB%80%E4%B9%88%E6%98%AFHTTP%E5%91%A2%EF%BC%9F" rel="nofollow">而什么是HTTP呢？</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%B8%A4%E7%A7%8DHTTP%EF%BC%88%E6%8C%81%E7%BB%AD%26%E9%9D%9E%E6%8C%81%E7%BB%AD%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E4%B8%A4%E7%A7%8DHTTP%EF%BC%88%E6%8C%81%E7%BB%AD%26%E9%9D%9E%E6%8C%81%E7%BB%AD%EF%BC%89" rel="nofollow">（2）两种HTTP（持续&amp;非持续）</a></p> 
<p id="%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88Non-persistent%20HTTP%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88Non-persistent%20HTTP%EF%BC%89" rel="nofollow">非持续连接（Non-persistent HTTP）</a></p> 
<p id="%E4%B8%80%E4%B8%AA%E5%85%B7%E4%BD%93%E7%9A%84%E4%BE%8B%E5%AD%90-toc" style="margin-left:160px;"><a href="#%E4%B8%80%E4%B8%AA%E5%85%B7%E4%BD%93%E7%9A%84%E4%BE%8B%E5%AD%90" rel="nofollow">一个具体的例子</a></p> 
<p id="%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%EF%BC%88RTT%EF%BC%89-toc" style="margin-left:160px;"><a href="#%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%EF%BC%88RTT%EF%BC%89" rel="nofollow">响应时间（RTT）</a></p> 
<p id="%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88persistent%20HTTP%EF%BC%89-toc" style="margin-left:120px;"><a href="#%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88persistent%20HTTP%EF%BC%89" rel="nofollow">持续连接（persistent HTTP）</a></p> 
<p id="%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%BC%BA%E7%82%B9-toc" style="margin-left:160px;"><a href="#%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%BC%BA%E7%82%B9" rel="nofollow">非持续连接的缺点</a></p> 
<p id="%E6%8C%81%E7%BB%ADHTTP%EF%BC%88HTTP1.1%EF%BC%89%EF%BC%9A-toc" style="margin-left:160px;"><a href="#%E6%8C%81%E7%BB%ADHTTP%EF%BC%88HTTP1.1%EF%BC%89%EF%BC%9A" rel="nofollow">持续HTTP（HTTP1.1）：</a></p> 
<p id="%EF%BC%883%EF%BC%89HTTP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89HTTP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" rel="nofollow">（3）HTTP报文格式</a></p> 
<p id="HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%EF%BC%9A-toc" style="margin-left:120px;"><a href="#HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%EF%BC%9A" rel="nofollow">HTTP请求报文：</a></p> 
<p id="HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%EF%BC%9A-toc" style="margin-left:120px;"><a href="#HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%EF%BC%9A" rel="nofollow">HTTP响应报文：</a></p> 
<p id="%EF%BC%884%EF%BC%89%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92%EF%BC%9Acookie-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92%EF%BC%9Acookie" rel="nofollow">（4）用户与服务器的交互：cookie</a></p> 
<p id="cookie%E7%9A%84%E7%BB%84%E4%BB%B6-toc" style="margin-left:120px;"><a href="#cookie%E7%9A%84%E7%BB%84%E4%BB%B6" rel="nofollow">cookie的组件</a></p> 
<p id="cookie%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%89-toc" style="margin-left:120px;"><a href="#cookie%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%89" rel="nofollow">cookie的具体实现（如下图所示）</a></p> 
<p id="HTTP%20cookies%E7%9A%84%E4%BD%9C%E7%94%A8-toc" style="margin-left:120px;"><a href="#HTTP%20cookies%E7%9A%84%E4%BD%9C%E7%94%A8" rel="nofollow">HTTP cookies的作用</a></p> 
<p id="%E5%AF%B9%E4%BA%8Ecookie%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E6%80%9D%E8%80%83-toc" style="margin-left:120px;"><a href="#%E5%AF%B9%E4%BA%8Ecookie%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E6%80%9D%E8%80%83" rel="nofollow">对于cookie的安全性思考</a></p> 
<p id="%E9%A6%96%E5%85%88%E5%B0%B1%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%99%E7%82%B9%E5%8F%AF%E8%83%BD%E5%B0%86%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E7%BB%99%E7%AC%AC%E4%B8%89%E6%96%B9%EF%BC%88%E5%8D%B3%E5%BE%88%E4%B9%85%E4%B9%8B%E5%89%8D%E5%B0%B1%E6%9C%89%E8%BF%87%E5%9C%A8%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E6%90%9C%E7%9B%B8%E5%85%B3%E5%95%86%E5%93%81%EF%BC%8C%E5%9C%A8%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E5%AE%83%E7%BB%99%E6%88%91%E6%8E%A8%E8%8D%90%E8%BF%99%E5%95%86%E5%93%81%EF%BC%89-toc" style="margin-left:160px;"><a href="#%E9%A6%96%E5%85%88%E5%B0%B1%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%99%E7%82%B9%E5%8F%AF%E8%83%BD%E5%B0%86%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E7%BB%99%E7%AC%AC%E4%B8%89%E6%96%B9%EF%BC%88%E5%8D%B3%E5%BE%88%E4%B9%85%E4%B9%8B%E5%89%8D%E5%B0%B1%E6%9C%89%E8%BF%87%E5%9C%A8%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E6%90%9C%E7%9B%B8%E5%85%B3%E5%95%86%E5%93%81%EF%BC%8C%E5%9C%A8%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E5%AE%83%E7%BB%99%E6%88%91%E6%8E%A8%E8%8D%90%E8%BF%99%E5%95%86%E5%93%81%EF%BC%89" rel="nofollow">首先就是服务器站点可能将用户的信息泄露给第三方（即很久之前就有过在一个软件搜相关商品，在另外一个软件它给我推荐这商品）</a></p> 
<p id="%EF%BC%885%EF%BC%89Web%20%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89Web%20%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">（5）Web 缓存（caches）————代理服务器</a></p> 
<p id="%E7%9B%AE%E6%A0%87%EF%BC%9A%E4%B8%8D%E8%AE%BF%E9%97%AE%E5%8E%9F%E5%A7%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%BB%A1%E8%B6%B3%E7%94%A8%E6%88%B7%E9%9C%80%E6%B1%82-toc" style="margin-left:160px;"><a href="#%E7%9B%AE%E6%A0%87%EF%BC%9A%E4%B8%8D%E8%AE%BF%E9%97%AE%E5%8E%9F%E5%A7%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%BB%A1%E8%B6%B3%E7%94%A8%E6%88%B7%E9%9C%80%E6%B1%82" rel="nofollow">目标：不访问原始服务器，就可以满足用户需求</a></p> 
<p id="%E5%85%B7%E4%BD%93%E6%96%B9%E5%BC%8F%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86%E6%89%80%E6%9C%89%E7%9A%84HTTP%E8%AF%B7%E6%B1%82%E5%8F%91%E9%80%81%E7%BB%99%E7%BC%93%E5%86%B2-toc" style="margin-left:160px;"><a href="#%E5%85%B7%E4%BD%93%E6%96%B9%E5%BC%8F%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86%E6%89%80%E6%9C%89%E7%9A%84HTTP%E8%AF%B7%E6%B1%82%E5%8F%91%E9%80%81%E7%BB%99%E7%BC%93%E5%86%B2" rel="nofollow">具体方式：浏览器将所有的HTTP请求发送给缓冲</a></p> 
<p id="%E5%A5%BD%E5%A4%84-toc" style="margin-left:160px;"><a href="#%E5%A5%BD%E5%A4%84" rel="nofollow">好处</a></p> 
<p id="Web%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E4%B8%8B%E6%97%B6%E5%BB%B6%EF%BC%88delay%EF%BC%89%E7%9A%84%E8%AE%A1%E7%AE%97-toc" style="margin-left:160px;"><a href="#Web%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E4%B8%8B%E6%97%B6%E5%BB%B6%EF%BC%88delay%EF%BC%89%E7%9A%84%E8%AE%A1%E7%AE%97" rel="nofollow">Web缓存（caches）下时延（delay）的计算</a></p> 
<p id="%E5%9B%9B%EF%BC%9AEmail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%92%8CSMTP%2FPOP3%2FIMAP-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%EF%BC%9AEmail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%92%8CSMTP%2FPOP3%2FIMAP" rel="nofollow">四：Email电子邮件和SMTP/POP3/IMAP</a></p> 
<p id="%EF%BC%881%EF%BC%89E-mail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89E-mail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6" rel="nofollow">（1）E-mail电子邮件</a></p> 
<p id="%EF%BC%882%EF%BC%89SMTP-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89SMTP" rel="nofollow">（2）SMTP</a></p> 
<p id="%E5%AE%9E%E7%8E%B0-toc" style="margin-left:120px;"><a href="#%E5%AE%9E%E7%8E%B0" rel="nofollow">实现</a></p> 
<p id="%E5%85%B7%E4%BD%93%E4%BE%8B%E5%AD%90-toc" style="margin-left:120px;"><a href="#%E5%85%B7%E4%BD%93%E4%BE%8B%E5%AD%90" rel="nofollow">具体例子</a></p> 
<p id="%E7%89%B9%E7%82%B9-toc" style="margin-left:120px;"><a href="#%E7%89%B9%E7%82%B9" rel="nofollow">特点</a></p> 
<p id="%EF%BC%883%EF%BC%89%E4%B8%8EHTTP%E7%9A%84%E5%AF%B9%E6%AF%94-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E4%B8%8EHTTP%E7%9A%84%E5%AF%B9%E6%AF%94" rel="nofollow">（3）与HTTP的对比</a></p> 
<p id="%EF%BC%884%EF%BC%89%E9%82%AE%E4%BB%B6%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E9%82%AE%E4%BB%B6%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" rel="nofollow">（4）邮件报文格式</a></p> 
<p id="%EF%BC%885%EF%BC%89%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE" rel="nofollow">（5）邮件访问协议</a></p> 
<p id="%E4%BA%94%EF%BC%9ADNS-toc" style="margin-left:40px;"><a href="#%E4%BA%94%EF%BC%9ADNS" rel="nofollow">五：DNS</a></p> 
<p id="%EF%BC%881%EF%BC%89DNS%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89DNS%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1" rel="nofollow">（1）DNS提供的服务</a></p> 
<p id="%EF%BC%882%EF%BC%89DNS%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89DNS%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0" rel="nofollow">（2）DNS工作机理概述</a></p> 
<p id="%E5%88%86%E5%B8%83%E5%BC%8F%E3%80%81%E5%B1%82%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:120px;"><a href="#%E5%88%86%E5%B8%83%E5%BC%8F%E3%80%81%E5%B1%82%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">分布式、层次数据库</a></p> 
<p id="DNS%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E6%96%B9%E6%B3%95-toc" style="margin-left:120px;"><a href="#DNS%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E6%96%B9%E6%B3%95" rel="nofollow">DNS地址解析方法</a></p> 
<p id="%E9%80%92%E5%BD%92%E8%A7%A3%E6%9E%90%EF%BC%88recursive%20query%EF%BC%89-toc" style="margin-left:160px;"><a href="#%E9%80%92%E5%BD%92%E8%A7%A3%E6%9E%90%EF%BC%88recursive%20query%EF%BC%89" rel="nofollow">递归解析（recursive query）</a></p> 
<p id="%E8%BF%AD%E4%BB%A3%E8%A7%A3%E6%9E%90%EF%BC%88iterated%20query%EF%BC%89-toc" style="margin-left:160px;"><a href="#%E8%BF%AD%E4%BB%A3%E8%A7%A3%E6%9E%90%EF%BC%88iterated%20query%EF%BC%89" rel="nofollow">迭代解析（iterated query）</a></p> 
<p id="%C2%A0DNS%E7%BC%93%E5%AD%98%EF%BC%88DNS%20caching%EF%BC%89-toc" style="margin-left:120px;"><a href="#%C2%A0DNS%E7%BC%93%E5%AD%98%EF%BC%88DNS%20caching%EF%BC%89" rel="nofollow"> DNS缓存（DNS caching）</a></p> 
<p id="%C2%A0DNS%E8%AE%B0%E5%BD%95%E5%92%8C%E6%8A%A5%E6%96%87-toc" style="margin-left:120px;"><a href="#%C2%A0DNS%E8%AE%B0%E5%BD%95%E5%92%8C%E6%8A%A5%E6%96%87" rel="nofollow"> DNS记录和报文</a></p> 
<p id="%E5%85%AD%EF%BC%9A%E5%AF%B9%E7%AD%89%E4%BD%93%E7%BB%93%E6%9E%84%EF%BC%88peert-to-peer%EF%BC%89P2P-toc" style="margin-left:40px;"><a href="#%E5%85%AD%EF%BC%9A%E5%AF%B9%E7%AD%89%E4%BD%93%E7%BB%93%E6%9E%84%EF%BC%88peert-to-peer%EF%BC%89P2P" rel="nofollow">六：对等体结构（peert-to-peer）P2P</a></p> 
<p id="%EF%BC%881%EF%BC%89%E7%89%B9%E7%82%B9%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E7%89%B9%E7%82%B9%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" rel="nofollow">（1）特点        </a></p> 
<p id="%EF%BC%882%EF%BC%89%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%EF%BC%9Aclient-server%E6%A8%A1%E5%BC%8FvsP2P%E6%A8%A1%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%EF%BC%9Aclient-server%E6%A8%A1%E5%BC%8FvsP2P%E6%A8%A1%E5%BC%8F" rel="nofollow">（2）文件分发：client-server模式vsP2P模式</a></p> 
<p id="cliengt-server%E6%A8%A1%E5%BC%8F-toc" style="margin-left:120px;"><a href="#cliengt-server%E6%A8%A1%E5%BC%8F" rel="nofollow">cliengt-server模式</a></p> 
<p id="P2P%E6%A8%A1%E5%BC%8F-toc" style="margin-left:120px;"><a href="#P2P%E6%A8%A1%E5%BC%8F" rel="nofollow">P2P模式</a></p> 
<p id="%EF%BC%883%EF%BC%89BitTorrent-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89BitTorrent" rel="nofollow">（3）BitTorrent</a></p> 
<p id="%E8%AF%B7%E6%B1%82%E6%96%87%E4%BB%B6%E5%9D%97%3A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0-toc" style="margin-left:120px;"><a href="#%E8%AF%B7%E6%B1%82%E6%96%87%E4%BB%B6%E5%9D%97%3A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" rel="nofollow">请求文件块:        </a></p> 
<p id="%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E5%9D%97%3A%E2%80%9C%E4%B8%80%E6%8A%A5%E8%BF%98%E4%B8%80%E6%8A%A5%E2%80%9Dtit-for-tat-toc" style="margin-left:120px;"><a href="#%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E5%9D%97%3A%E2%80%9C%E4%B8%80%E6%8A%A5%E8%BF%98%E4%B8%80%E6%8A%A5%E2%80%9Dtit-for-tat" rel="nofollow">发送文件块:“一报还一报”tit-for-tat</a></p> 
<p id="%E4%B8%83%EF%BC%9A%E8%A7%86%E9%A2%91%E6%B5%81%E5%92%8C%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%88%E7%94%B1%E4%BA%8E%E8%BF%99%E5%9D%97%E4%B8%8D%E7%AE%97%E9%87%8D%E7%82%B9%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%BE%88%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E4%B8%83%EF%BC%9A%E8%A7%86%E9%A2%91%E6%B5%81%E5%92%8C%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%88%E7%94%B1%E4%BA%8E%E8%BF%99%E5%9D%97%E4%B8%8D%E7%AE%97%E9%87%8D%E7%82%B9%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%BE%88%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%EF%BC%89" rel="nofollow">七：视频流和内容分发网络（由于这块不算重点，没有很详细介绍）</a></p> 
<p id="%EF%BC%881%EF%BC%89%E8%A7%86%E9%A2%91%E6%B5%81%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E8%A7%86%E9%A2%91%E6%B5%81%E6%9C%8D%E5%8A%A1" rel="nofollow">（1）视频流服务</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%A4%9A%E5%AA%92%E4%BD%93%EF%BC%9A%E8%A7%86%E9%A2%91-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E5%A4%9A%E5%AA%92%E4%BD%93%EF%BC%9A%E8%A7%86%E9%A2%91" rel="nofollow">（2）多媒体：视频</a></p> 
<p id="(3)CDNS%EF%BC%88%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%89-toc" style="margin-left:80px;"><a href="#%283%29CDNS%EF%BC%88%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%89" rel="nofollow">(3)CDNS（内容分发网络）</a></p> 
<p id="%E5%85%AB%20%E7%BB%93%E8%AF%AD-toc" style="margin-left:40px;"><a href="#%E5%85%AB%20%E7%BB%93%E8%AF%AD" rel="nofollow">八 结语</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%EF%BC%9A%E5%AF%BC%E8%AE%BA">一：导论</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E5%BA%94%E7%94%A8%E5%B1%82">（1）为什么要有应用层</h4> 
<p>        网络应用是计算机网络存在的理由，如果我们不能构想岀任何有用的应用，也就没有 任何必要去设计支持它们的网络协议了。即应用层属于是最上层的，（例如为了去够到树上的苹果，你必须去找一些东西垫着让你能够到，在这里，苹果是目的，而你找的东西比如凳子啥的就是支持，也就是下面的几层）<span style="background-color:#ffd900;">比喻可能不算很恰当，但属于我的理解，如果觉得不对可以直接跳过。</span></p> 
<h4 id="%EF%BC%882%EF%BC%89%E4%B8%80%E4%BA%9B%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%9A%84%E4%BE%8B%E5%AD%90">（2）一些网络应用的例子</h4> 
<ul><li>社交网络 (Social Networking)：如Facebook、Twitter以及我们日常生活中经常使用到的微信，qq等。</li><li>网络 (Web)：指在互联网上使用HTTP协议进行信息交换的一种服务，用户可以通过浏览器访问各种网站。这也是我们平时经常使用的浏览功能的来源</li><li>电子邮件 (E-mail)：如Gmail、Outlook、QQ邮件、163等等，允许用户邮件之间的往来。</li><li>流媒体存储视频 (Streaming Stored Video)：如Bilibili、YouTube、Hulu、Netflix，抖音、快手等，允许用户在线观看各种类型的视频内容。</li><li>P2P文件共享 (P2P File Sharing)：允许用户通过对等网络共享文件。</li><li>语音IP (Voice over IP)</li><li>实时视频会议 (Real-time Video Conferencing)</li><li>网络搜索 (Internet Search)</li><li>远程登录 (Remote Login)</li></ul> 
<p><img alt="" height="114" src="https://images2.imgbox.com/a2/59/mvvqQe0U_o.png" width="150"> ......<img alt="" class="left" height="106" src="https://images2.imgbox.com/4d/a7/84FHkmss_o.png" width="120"></p> 
<p><span style="background-color:#ffd900;">常用的网络应用例子还有很多很多，在这里就不补充了，有兴趣的可以自己去了解一下。</span></p> 
<h3 id="%E4%BA%8C%EF%BC%9A%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86%EF%BC%88Principles%20of%20network%20applications%EF%BC%89">二：应用层协议原理（<span style="color:#cc0000;">Principles of network applications</span>）</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8">（1）创建一个网络应用</h4> 
<ul><li>当研发新应用程序之时，你首先需要编写在能在不同的<strong><span style="color:#fe2c24;">终端系统（end system）</span></strong>上运行的软件，当今时代也有很多编程语言例如C、Java、Python等提供给我们编写软件。（eg：Web服务器软件和浏览器软件等等）</li></ul> 
<p></p> 
<ul><li>无需为网络核心（network core）编写程序，同时也做不到：由于网络核心主要是在网络层一下的较低层起作用，即主要是决定其传播（<strong><span style="color:#fe2c24;">网络核心没有应用层软件eg：路由器ronter，switches</span></strong>）。这种设计让我们设计应用程序之时，仅需在端系统上设计，可以更快速地开发和部署网络应用。</li></ul> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84">（2）网络应用程序体系架构</h4> 
<p>下面介绍的这两个模式都是之前在概述那一章讲过的网络边缘（即主机/端系统）常用的模式之一</p> 
<ul><li> <h5 id="%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Client-Server%20architecture%EF%BC%89">客户-服务器模式（Client-Server architecture）</h5> 
  <hr>该体系结构主要分为两个端——服务端（server）和客户端（client） 
  <ul><li> <h6 id="%E6%9C%8D%E5%8A%A1%E7%AB%AF">服务端</h6> 
    <ul><li>一直运行</li><li>有固定的IP地址（后面会讲）以及端口号（例如HTTP服务使用端口号：80）</li><li>当接收到客户端的请求时，它向该客户端发送所请求的对象作为响应</li></ul></li><li> <h6 id="%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88eg%EF%BC%9AHTTP%EF%BC%8CFTP%EF%BC%8CSMTP%EF%BC%89">客户端（eg：HTTP，FTP，SMTP）</h6> 
    <ul><li>主动与服务端通信，向服务端发送请求</li><li>跟其他的客户端没有通信</li><li>可能是动态IP</li></ul></li></ul></li></ul> 
<p class="img-center"><img alt="" height="529" src="https://images2.imgbox.com/d2/6b/cuhQ82HJ_o.png" width="423"></p> 
<hr> 
<p><span style="color:#0d0016;">从上图我们可以看出右下角的属于服务端，而其余的属于客户端，该服务端是不变的，一直处于那个位置，因此IP地址和端口号是不变的，而客户端可以是变化的，可以是不同的客户端，向该服务端发送请求。但这样会有一个缺点：一台单独的服务器主机跟不上众多客户端请求，负载容易过重，因此一般数据中心都会配备大量主机，从而能创建强大的虚拟服务器。</span></p> 
<p></p> 
<p></p> 
<ul><li> <h5 id="P2P%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span style="color:#0d0016;">P2P体系结构</span></h5> 
  <ul><li><span style="color:#0d0016;">（几乎）没有一直运行的服务器</span></li><li><span style="color:#0d0016;">任何端系统之间可以进行通信（不同于客户服务器模式的客户端间不能通信）</span></li><li><span style="color:#0d0016;">任一节点既可以是客户端也可以是服务端</span></li><li><span style="color:#0d0016;">例子：迅雷，百度网盘等...</span></li><li><span style="color:#0d0016;"><u>不足之处</u>：安全，性能保证，稳定性不足。</span></li></ul></li></ul> 
<p class="img-center"><img alt="" height="517" src="https://images2.imgbox.com/16/a1/iOt56BTd_o.png" width="422"></p> 
<hr> 
<p><span style="color:#0d0016;">从上图我们可以看出任何一个主机都可以是服务端或者是客户端，每一个都是对等体，这就是名字的来源，这种的好处就是尽管每个对等体都会因为请求文件产生工作负载，但其也通过向其他对等体分发文件为系统增加服务能力。</span></p> 
<p></p> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1">（2）进程通信</h4> 
<p>进程：在主机上运行的应用程序</p> 
<p>作用：①在同一主机内，使用进程间的通信机制通信</p> 
<p>           ②在不同主机内，通过交换报文（message）来通信</p> 
<p><span style="background-color:#ffd900;">（在我们上课的时候，便要求我们用Pycharm写服务端和客户端，在不同主机或者自己主机上通信；UDP和TCP都有）</span></p> 
<p></p> 
<ul><li> <h5 id="%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B">客户-服务器进程</h5> 
  <ul><li>客户端进程：发起通信的进程</li><li>服务器进程：等待连接的进程（即等待客户端的请求，并将相应的文件发送）</li><li><u>注意：</u>P2P架构的应用也有客户端进程和服务器进程之分，只是看何时打开罢了。</li></ul></li></ul> 
<p></p> 
<ul><li> <h5 id="%E7%BD%91%E7%BB%9C%E5%A5%97%E6%8E%A5%E5%AD%97%EF%BC%88socket%EF%BC%89"><span style="color:#0d0016;">网络套接字</span>（<span style="color:#0d0016;">socket</span>）</h5> 
  <ul><li>是进程与计算机网络之间的接口（<span style="color:#fe2c24;">进程可类比于一座房子，而它的套接字可以类比于它的门。</span>）</li><li>进程通过socket来发送和接收报文</li><li>也是同一台主机内应用层与运输层之间的应用程序编程接口</li><li>发送跟接收各有一个套接字</li><li>应用程序开发者对于运输层的控制仅限于：①选择运输层协议；②也许能设定几个运输层参数，如最大缓存和最大报文段长度等（将在第3章中涉及）。</li></ul></li></ul> 
<p class="img-center"><img alt="" height="220" src="https://images2.imgbox.com/d2/c1/5SNMYPek_o.png" width="687"></p> 
<ul><li> <h5 id="%E8%BF%9B%E7%A8%8B%E5%AF%BB%E5%9D%80%EF%BC%88Addressing%20processes%EF%BC%89"><span style="color:#0d0016;">进程寻址</span>（<span style="color:#0d0016;"><strong>Addressing processes</strong></span>）</h5> 为了向特定目的的传输文件，需要知晓一个目的地址，因此为了明确进程，需要有一个标识以及主机地址。 
  <ul><li>主机有一个唯一的32位的IP地址（也是别人传输文件给主机的标识）</li><li>除了目的地址外，发送进程还需要指定在接收主机的接收进程（<span style="color:#fe2c24;">即接收套接字</span>），这一方法主要依靠标记目的地端口号实现。</li></ul></li></ul> 
<p><span style="background-color:#ffd900;">eg：发送一个HTTP报文的目的标识</span></p> 
<p><span style="background-color:#ffd900;">                IP地址：128.111.245.12</span></p> 
<p><span style="background-color:#ffd900;">                端口号：80（web服务器）</span></p> 
<p></p> 
<p></p> 
<p></p> 
<h4 id="%EF%BC%883%EF%BC%89%E5%8F%AF%E4%BE%9B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%90%E8%BE%93%E6%9C%8D%E5%8A%A1%E5%88%86%E7%B1%BB">（3）可供应用程序使用的运输服务分类</h4> 
<p>由于觉得这个名字有点不是很能理解，我更愿意将这块知识点称为<span style="color:#fe2c24;"><strong>应用层需要传输层提供什么样的服务（或者是其指标）</strong></span></p> 
<hr> 
<ul><li> <h5 id="%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E7%8E%87">数据丢失率</h5> 
  <ul><li>这个丢失率代表着数据是否能可靠传输，是否能正确，完整交付给接收方</li><li>数据丢失率低的更适用于电子邮件，文件传输等等。（这些一般都需要百分之一百的数据传输率）</li></ul></li><li> <h5 id="%E5%90%9E%E5%90%90%E9%87%8F%EF%BC%88throughput%EF%BC%89">吞吐量（throughput）</h5> 
  <ul><li>之前我们讲过吞吐量在一定时间内代表着就是持续的文件传输速率</li><li>一些应用（eg：多媒体，视频流）有着最低的吞吐量要求</li></ul></li><li> <h5 id="%E5%BB%B6%E6%97%B6%EF%BC%88delay%EF%BC%89">延时（delay）</h5> 
  <ul><li>提供更严格的时间限制，适用于众多实时应用（例如近些年兴起的网课等等）</li><li>需要低延时来保持稳定性以及有效性</li></ul></li><li> <h5 id="%E5%AE%89%E5%85%A8">安全</h5> 
  <ul><li>提供数据加密、数据完整性和端点鉴别等安全服务。</li></ul></li></ul> 
<p></p> 
<h4 id="%EF%BC%884%EF%BC%89%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%88%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%8F%AB%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%89">（4）因特网提供的服务（也可以叫传输层提供的服务）</h4> 
<p>讲完了基本的指标，我们接下来就要讲一些具体的例子，具体有什么服务：</p> 
<hr> 
<ul><li> <h5 id="TCP">TCP</h5> 
  <ul><li>面向连接的服务（指的是要先连接成功我才会传消息）+ 可靠的传输服务</li><li>流量控制：发送方不会淹没接收方</li><li>拥塞控制，当网络出现拥塞的时候，能抑制发送方</li><li>缺点：无法保证时延，最小吞吐量，安全。</li></ul></li><li> <h5 id="UDP">UDP</h5> 
  <ul><li>无连接的服务（指咔咔一顿传） + 不可靠的传输服务</li><li>缺点：无法保证可靠性，流量控制，拥塞控制，时延控制，最小吞吐量，，安全...</li><li>一句话解释就是：TCP有的UDP都没有，TCP没有的UDP也都没有</li></ul></li></ul> 
<p><span style="background-color:#ffd900;">ps：那有人就会好奇了，为什么还需要UDP？</span></p> 
<ol><li><span style="background-color:#ffd900;">UDP是一种不提供不必要服务的协议，由于这个特点，其所需的算力等成本较小</span></li><li><span style="background-color:#ffd900;">同时缺少了TCP建立连接的过程，时延较小，实时性较强</span></li></ol> 
<ul><li> <h5 id="%E5%BD%93%E5%89%8D%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1">当前因特网不提供的服务</h5> </li></ul> 
<p>之前我们讲的几个指标便是可靠性，吞吐量，延时，安全性。而对于TCP和UDP而言，TCP提供了可靠数据传输，同时TCP也能通过<u><span style="color:#fe2c24;">传输层安全协议 Transport Layer Security (TLS) </span></u>对TCP连接进行加密，因而较为安全。但还有两个指标我们都没有提及到，便是<span style="color:#fe2c24;"><strong>吞吐量</strong></span>和<strong><span style="color:#fe2c24;">时延</span></strong>的保证。</p> 
<p>从课本上来说，就是（大概理解就是当前的协议没法保证这两指标就是，<s>虽然是要求提供的</s>）</p> 
<p><strong><span style="color:#fe2c24;">总之，今天的因特网通常能够为时间敏感应用提供满意的服务，但它不能提供任何定时或带宽保证。</span></strong></p> 
<p><img alt="" height="280" src="https://images2.imgbox.com/e2/47/SQx7qsWD_o.png" width="967"></p> 
<p></p> 
<h4 id="%EF%BC%885%EF%BC%89%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE">（5）应用层协议</h4> 
<p>从上面给出的这张图是流行的应用层协议，及传输层提供给这些应用层的协议<s>（有点拗口）</s>。传输层协议上面有粗略提及，而在第三章的传输层我们也会重点讲，这里主要讲应用层协议。</p> 
<hr> 
<p>应用层协议：定义了运行在端系统的不同应用程序进程如何相互传递报文。下面是应用层协议定义的内容。</p> 
<ul><li>报文（message）类型：请求报文/应答报文等等</li><li>报文语法：报文上字段和描述</li><li>报文语义：字段中信息的含义</li><li>规定发送报文的时间以及规则。</li></ul> 
<p><span style="background-color:#ffd900;">按照有无公开可分为两种协议</span></p> 
<p><span style="background-color:#ffd900;">①公开协议：由RFC文档定义；允许互操作，具有发放性（eg：HTTP，SMTP）</span></p> 
<p><span style="background-color:#ffd900;">②私有协议：不公开，属于特定组织，厂商特有，具有定制性。（eg：Skype）</span></p> 
<p></p> 
<h4 id="%EF%BC%886%EF%BC%89%E6%9C%AC%E8%8A%82%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE">（6）本节中常见的网络应用以及对应的应用层协议</h4> 
<ul><li>Web和HTTP</li><li><span style="color:#000000;">SMTP/POP3/IMAP</span></li><li><span style="color:#000000;">DNS</span></li><li><span style="color:#ff0000;">P2P</span></li><li>视频流和<span style="color:#000000;">内容分发网络*</span></li></ul> 
<p></p> 
<h3 id="%E4%B8%89%EF%BC%9AWeb%20%E5%92%8CHTTP">三：Web 和HTTP</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">（1）基本概念</h4> 
<p>首先我们先对这两个概念作基本的解释</p> 
<ul><li> <h5 id="%E4%BB%80%E4%B9%88%E6%98%AFWeb">什么是Web</h5> 
  <ul><li>Web是一个因特网应用，即我们上面所说的应用层应用程序。web页面由一些对象（object）组成，可以称作一个基于互联网的<span style="color:#fe2c24;"><strong>信息系统</strong></span>，由许多互相链接的文档和其他资源组成（eg：HTML文件，JPEG图像，声音文件），可通过网络进行访问。</li></ul></li><li> <h5 id="%E8%80%8C%E4%BB%80%E4%B9%88%E6%98%AFHTTP%E5%91%A2%EF%BC%9F">而什么是HTTP呢？</h5> 
  <ul><li><span style="color:#fe2c24;">HTTP是Web的应用层协议</span>，其主要遵循的是客户/服务器模式 
    <ul><li>客户：浏览器请求，接收（使用HTTP）以及显示Web对象<span style="background-color:#ffd900;">（指的就是各种文件）</span></li><li>服务器：Web服务器对请求进行响应+发送（使用HTTP）Web对象。</li></ul></li><li>HTTP的支撑运输协议从上面我们可以看是TCP，基本步骤如下（划重点） 
    <ul><li>用户向服务器发送TCP连接请求（创建socket），port： 80</li><li>服务器接收用户的TCP连接请求</li><li>浏览器（HTTP用户）和服务器（HTTP服务器）交换HTTP报文/应用层报文（message）</li><li>TCP连接关闭</li></ul></li><li>HTTP是一个无状态协议 
    <ul><li>服务器不维护客户端过去请求的状态</li><li>当TCP连接关闭后就忘掉了之前的连接</li><li>优点：能支持更多的客户端，不用费心维护历史信息。</li></ul></li></ul></li></ul> 
<p class="img-center"><img alt="" height="426" src="https://images2.imgbox.com/a5/d9/8vktXDOW_o.png" width="511"></p> 
<p></p> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89%E4%B8%A4%E7%A7%8DHTTP%EF%BC%88%E6%8C%81%E7%BB%AD%26%E9%9D%9E%E6%8C%81%E7%BB%AD%EF%BC%89"><span style="color:#0d0016;">（2）两种HTTP（持续&amp;非持续）</span></h4> 
<ul><li> <h5 id="%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88Non-persistent%20HTTP%EF%BC%89">非持续连接（Non-persistent HTTP）</h5> 
  <ul><li> <h6 id="%E4%B8%80%E4%B8%AA%E5%85%B7%E4%BD%93%E7%9A%84%E4%BE%8B%E5%AD%90">一个具体的例子</h6> </li><li>（几条路径从上到下我们标为①②③④），假设我们现在要申请一个页面，里面含有一个HTML文件和10个JEEG图像。 
    <ul><li>①现在一个客户在端口号80（HTTP的默认端口）发起一个到服务器www.goodfuture.edu的TCP连接</li><li>②而后服务端允许连接。</li><li>③HTTP经过其本身的套接字A向该服务器发送一个HTTP请求报文（即请求连接啥的，该报文中还包含着自身主机的路径名，以及目的对象的地址）</li><li>④而后HTTP服务器，通过其自身的套接字B接收该请求，同时检索出其申请的对象的文件地址（即HTML），在一个HTTP响应报文中封装，并通过套接字B向客户段发送响应报文。</li><li>HTTP接收响应报文，TCP连接关闭，而客户端会在HTML文件中提取到十个JPEG图像的引用，若要让所有的图片都在页面中显示出来，还得让服务器传输十张图片过来，因此还得经过十次上面的四步。（<u><span style="color:#fe2c24;">由于是无状态的，也就是说每一次需要一次TCP连接，再加文件请求）</span></u> <p class="img-center"><img alt="" height="386" src="https://images2.imgbox.com/54/89/nIeaaA18_o.png" width="504"></p> </li></ul></li><li> <h6 id="%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%EF%BC%88RTT%EF%BC%89">响应时间（RTT）</h6> 
    <ul><li>一个小分组从客户端到服务端再从服务端返回客户端所花费的时间【忽略传输时间——将报文推出去所花的时间】</li><li>非持续连接（Non-persistent） HTTP响应时间包括 
      <ul><li>一个RTT来进行TCP连接</li><li>一个RTT发送TCP请求并等待HTTP响应</li><li><span style="color:#fe2c24;">目标文件传输时间（就我们之前讲的La/R就可以计算，不记得的可以回到第一章笔记看看）</span></li></ul></li><li><u><span style="color:#fe2c24;">非持久HTTP响应时间=2RTT+文件传输时间</span></u></li></ul></li></ul></li></ul> 
<p></p> 
<ul><li> <h5 id="%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%EF%BC%88persistent%20HTTP%EF%BC%89">持续连接（persistent HTTP）</h5> 
  <ul><li> <h6 id="%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%BC%BA%E7%82%B9">非持续连接的缺点</h6> 
    <ul><li>每一个请求的对象都需要重新建立和维护一个全新的连接，假设一个页面有100张图片，那所花费的时间得2RTT×100，<span style="color:#fe2c24;"><strong>时延过长</strong></span>。</li><li>必须为每一个请求的对象分配TCP的缓冲区和保持TCP变量，<span style="color:#fe2c24;"><strong>给Web服务器带来了大大的负担</strong></span></li></ul></li><li> <h6 id="%E6%8C%81%E7%BB%ADHTTP%EF%BC%88HTTP1.1%EF%BC%89%EF%BC%9A">持续HTTP（HTTP1.1）：</h6> 
    <ul><li>服务器发送完对象后保持连接</li><li>在相同的客户端和服务器之间的后续请求响应报文通过第一个连接进行传送</li><li>比如在遇到上面的非持续连接的例子的10张图像的时候，可以只用一个RTT进行TCP连接。</li><li>而对于同类型多对象的时候可以仅用一个RTT进行请求；例如下图 
      <ul><li>首先第一个RTT进行TCP连接</li><li>第二个RTT进行申请HTML文件</li><li>第三个RTT进行对HTML引用的十个JPEG请求</li><li>因此<u><span style="color:#c00000;">总共传输</span><span style="color:#c00000;">时间</span> <span style="color:#c00000;">=  3RTT + </span><span style="color:#c00000;">文件传输时间</span></u></li></ul></li></ul></li></ul></li></ul> 
<p class="img-center"><img alt="" height="443" src="https://images2.imgbox.com/2f/8b/w4IfY7kh_o.png" width="437"></p> 
<hr> 
<p></p> 
<h4 id="%EF%BC%883%EF%BC%89HTTP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F">（3）HTTP报文格式</h4> 
<ul><li> <h5 id="HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%EF%BC%9A">HTTP请求报文：</h5> 
  <ul><li>请求行：包含请求方法、请求目标和协议版本。</li><li>首部行：包含一些关于请求的附加信息，如Host、User-Agent等。</li><li>空行：用于分隔首部行和消息主体。</li><li>消息主体：可选的，包含请求的数据。</li></ul></li></ul> 
<p><span style="background-color:#ffd900;">HTTP的请求方法常见的有GET，POST，PUT，DELETE，具体的作用和语义在这里就不多说了。（这里不算重点）</span></p> 
<p></p> 
<ul><li> <h5 id="HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%EF%BC%9A">HTTP响应报文：</h5> 
  <ul><li>状态行：包含协议版本、状态码和状态描述。</li><li>首部行：包含一些关于响应的附加信息，如Server、Content-Type等。</li><li>空行：用于分隔首部行和消息主体。</li><li>消息主体：包含响应的数据。 </li></ul></li></ul> 
<p><span style="background-color:#ffd900;">这里常见的状态码：200（OK），301，400，404（这个很常见吧），505</span></p> 
<p></p> 
<p></p> 
<h4 id="%EF%BC%884%EF%BC%89%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92%EF%BC%9Acookie">（4）用户与服务器的交互：cookie</h4> 
<p>之前说过，HTTP请求/响应的交互是无状态的，这简化了服务器的设计，同时让服务器的负担大大减少。然而往往一个服务器也希望能识别用户，因而，HTTP使用了cookie，允许站点对用户跟踪，目前大多商务Web站点都使用了cookie。<span style="background-color:#ffd900;">（简单来说就是比如一些购物软件为了知道你买了什么东西以后好推给你的作用差不多差不多，类似ID）</span></p> 
<hr> 
<ul><li> <h5 id="cookie%E7%9A%84%E7%BB%84%E4%BB%B6">cookie的组件</h5> 
  <ul><li>在HTTP响应报文中有一个cookie的首部行</li><li>在HTTP请求报文中的一个cookie的首部行</li><li>在用户端系统中保留一个cookie文件，由用户的浏览器进行管理</li><li>位于Web站点的一个后端数据库</li><li><span style="background-color:#ffd900;">总之就是类似你的一个ID，在哪哪都有，只要你请求或者搜索什么的时候都会带上；具体什么时候用到这几个组件请看下面的具体实现</span></li></ul></li><li> <h5 id="cookie%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%89">cookie的具体实现（如下图所示）</h5> 
  <ul><li>首先我们可以看到下图当没访问的时候，它只有ebay网站的一个cookie</li><li>而后当用户先访问amazon的服务器，该服务器会为其创造一个独特的识别码，用一个Set-cookie=1678的响应报文发送回给主机。同时也会用这个独特的识别码在后端数据库中添加一个索引。</li><li>主机在接受后，在自己特定的cookie文件中添加一行。</li><li>而当下次再次访问该网站的时候，用户的请求报文会带上这个cookie，而在服务器识别到这个cookie的时候，他会访问后端数据库，意识到你的身份后，提供给你它推荐给你的服务。</li><li><span style="color:#fe2c24;"><strong>实际上cookie维持状态的办法便是：</strong></span> 
    <ul><li>协议端节点：比如浏览器的cookie和后端数据库的数据</li><li>报文携带：即请求报文和响应报文都会携带</li></ul></li></ul></li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="712" src="https://images2.imgbox.com/9c/5d/EvZsoJ60_o.png" width="820"></p> 
<ul><li> <h5 id="HTTP%20cookies%E7%9A%84%E4%BD%9C%E7%94%A8">HTTP cookies的作用</h5> 
  <ul><li>用户验证</li><li>购物车</li><li>推荐</li><li>用户状态</li><li><span style="background-color:#ffd900;">（这个就是类似我们现在的购物软件的做法，首先你访问的商品的记录会被他们看到，在你下一次登上后 便会趁机推荐给你；抖音快手啥视频的也是）</span></li></ul></li><li> <h5 id="%E5%AF%B9%E4%BA%8Ecookie%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E6%80%9D%E8%80%83"><span style="color:#fe2c24;">对于cookie的安全性思考</span></h5> 
  <ul><li> <h6 id="%E9%A6%96%E5%85%88%E5%B0%B1%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%99%E7%82%B9%E5%8F%AF%E8%83%BD%E5%B0%86%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E7%BB%99%E7%AC%AC%E4%B8%89%E6%96%B9%EF%BC%88%E5%8D%B3%E5%BE%88%E4%B9%85%E4%B9%8B%E5%89%8D%E5%B0%B1%E6%9C%89%E8%BF%87%E5%9C%A8%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E6%90%9C%E7%9B%B8%E5%85%B3%E5%95%86%E5%93%81%EF%BC%8C%E5%9C%A8%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E5%AE%83%E7%BB%99%E6%88%91%E6%8E%A8%E8%8D%90%E8%BF%99%E5%95%86%E5%93%81%EF%BC%89">首先就是服务器站点可能将用户的信息泄露给第三方（即很久之前就有过在一个软件搜相关商品，在另外一个软件它给我推荐这商品）</h6> </li><li>跨多个网站的第三方持久性cookie可能对某一个用户分配同样的cookie值，综合分析用户在大量网络上的行为，对于安全而言这是个不好的信息。</li></ul></li></ul> 
<p></p> 
<h4 id="%EF%BC%885%EF%BC%89Web%20%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8">（5）Web 缓存（caches）————代理服务器</h4> 
<ul><li> <h6 id="%E7%9B%AE%E6%A0%87%EF%BC%9A%E4%B8%8D%E8%AE%BF%E9%97%AE%E5%8E%9F%E5%A7%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%BB%A1%E8%B6%B3%E7%94%A8%E6%88%B7%E9%9C%80%E6%B1%82">目标：不访问原始服务器，就可以满足用户需求</h6> </li><li>通常用ISP安装（ISP：互联网服务提供商）</li><li>用户设置浏览器：通过缓存来访问Web</li><li> <h6 id="%E5%85%B7%E4%BD%93%E6%96%B9%E5%BC%8F%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86%E6%89%80%E6%9C%89%E7%9A%84HTTP%E8%AF%B7%E6%B1%82%E5%8F%91%E9%80%81%E7%BB%99%E7%BC%93%E5%86%B2">具体方式：浏览器将所有的HTTP请求发送给缓冲</h6> 
  <ul><li>缓存中存在对象，缓存直接返回对象【作为服务器】</li><li>缓存中不存在对象，缓存请求原始服务器，然后再将对象返回给客户端【作为用户】</li><li><span style="background-color:#ffd900;">（实际上可以理解为一个中介，如果你想买的房子他们手上已经有了可以直接给你推荐，如果没有他们替你去谈）</span></li></ul></li><li> <h6 id="%E5%A5%BD%E5%A4%84">好处</h6> 
  <ul><li>降低了客户端的请求响应时间</li><li>减少一个机构内部网络与Internet接入链路的流量</li><li>能让性能较弱的ICP也能够有效提供内容（ICP：互联网内容提供商）</li></ul></li></ul> 
<p class="img-center"><img alt="" height="445" src="https://images2.imgbox.com/d8/80/h1t3uYD4_o.png" width="572"></p> 
<ul><li> <h6 id="Web%E7%BC%93%E5%AD%98%EF%BC%88caches%EF%BC%89%E4%B8%8B%E6%97%B6%E5%BB%B6%EF%BC%88delay%EF%BC%89%E7%9A%84%E8%AE%A1%E7%AE%97">Web缓存（caches）下时延（delay）的计算</h6> </li></ul> 
<p class="img-center"><img alt="" height="539" src="https://images2.imgbox.com/8c/35/62p0W0wZ_o.png" width="350"></p> 
<p>eg：<span style="color:#000000;">如上图所示，机构内的浏览器对这些初始服务器的平均访问速率为每秒15个请求（request），假设对象的长度为1Mb，RRT=2s，假设HTTP报文小到可以忽略<span style="background-color:#ffd900;">（约等于传播时间可以忽略不计）</span></span></p> 
<p><span style="color:#000000;">答：我们用之前的学过的La/R来计算，在机构网络之间</span></p> 
<p>（15request/s）× （1Mb/requet）/（100Mbps）=0.15（时延较小）</p> 
<p>在公共因特网和机构网络之间</p> 
<p>（15request/s）× （1Mb/request）/（15Mbps）= 1（时延巨大）</p> 
<p>而对于这个确实时延过大，因而有两种方案可以提高速率</p> 
<p><strong><span style="color:#fe2c24;">①增加接入链路的速率</span></strong></p> 
<hr> 
<p>假设将15Mbps——&gt;100Mbps</p> 
<p>那这样接入链路减少到0.15，那么两台路由器之间的延时也可以忽略了，总的响应时间将大约为请求和响应的时间RTT也就是两秒。</p> 
<p>average delay=2s</p> 
<p></p> 
<p>然而这种情况成本很高，所以我们来考虑另外一种方法</p> 
<hr> 
<p><span style="color:#fe2c24;"><strong>②安装一个Web缓存器</strong></span></p> 
<hr> 
<p>假设缓存命中率为0.4（40%通过缓存请求，60%通过原始服务器）</p> 
<p>因此加上缓存器后，原来的15个请求每秒就变成了9个请求每秒。也就是说</p> 
<p>（9request/s）× （1Mb/request）/（15Mbps）=  0.6</p> 
<p>当流量强度小于0.8s时候对应的时延比较小，仅为几十毫秒，且加上只有百分之六十要响应</p> 
<p>因此最后的平均时延 </p> 
<p>average delay=0.4×（≈0）s+0.6×（2s+0.01s）≈1.2s</p> 
<hr> 
<p><span style="background-color:#ffd900;">从这可以看出平均时延比第一种方法的平均时延小很多，从这也可以看出Web缓存器的意义所在</span></p> 
<p></p> 
<p></p> 
<h3 id="%E5%9B%9B%EF%BC%9AEmail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%92%8CSMTP%2FPOP3%2FIMAP">四：Email电子邮件和<span style="color:#000000;">SMTP/POP3/IMAP</span></h3> 
<p></p> 
<h4 id="%EF%BC%881%EF%BC%89E-mail%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6">（1）E-mail电子邮件</h4> 
<p><u>组成部分</u></p> 
<ul><li>用户代理 
  <ul><li>又名“邮件阅读器”</li><li>填写，编辑和阅读邮件</li><li>输入和输出邮件都保存在服务器上</li></ul></li><li>邮件服务器 
  <ul><li>邮箱中管理和维护发送给用户的文件（比如重传，还有发送不过去通知发送端啥的）</li><li>输出报文队列保持待发送邮件报文（不让其丢失）</li></ul></li><li>简单的邮件传输协议：SMTP（<strong><span style="color:#fe2c24;">电子邮件中重要的应用层协议</span></strong>） 
  <ul><li>客户：发送方邮件服务器</li><li>”服务器“：接收方邮件服务器</li><li><span style="background-color:#ffd900;">在这里可能有点混，实际上就是自己如果要发送邮件，自己这一方就是我们之前一直提及的client，而发送报文过去的对方便是我们常提及的服务端，只是这次可能没有回应而已</span></li></ul></li></ul> 
<p></p> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89SMTP">（2）SMTP</h4> 
<ul><li> <h5 id="%E5%AE%9E%E7%8E%B0">实现</h5> 
  <ul><li>其仍然是使用TCP在客户端和服务器之间传送报文（port：25【HTTP是80】）</li><li>直接传输，从发送方服务器到接收方服务器</li><li>SMTP传输的3个阶段 
    <ul><li>SMTP握手</li><li>SMTP报文传输</li><li>SMTP关闭</li></ul></li><li>命令/响应交互 
    <ul><li>命令：ASCII文本<span style="background-color:#ffd900;">（7位————传递邮件前，需将二进制多媒体数据编码为ASCII码，发送完毕后到对方邮箱还需要还原；而HTTP不用）</span></li><li>响应：状态码和状态信息</li></ul></li></ul></li><li> <h5 id="%E5%85%B7%E4%BD%93%E4%BE%8B%E5%AD%90">具体例子</h5> 
  <ul><li>Alice写邮件并发送给bob的学校邮箱地址</li><li>Alice的用户代理将邮件发送到Alice的邮件服务器，邮件放进报文队列</li><li>SMTP的客户端打开Bob邮件服务器的TCP连接</li><li>SMTP客户端通过TCP连接发送Alice的邮件</li><li>Bob的邮件服务器将邮件发送到Bob的邮箱</li><li>Bob调用其用户代理阅读邮件</li></ul></li></ul> 
<p><img alt="" height="219" src="https://images2.imgbox.com/96/0c/qAaUsV4N_o.png" width="990"></p> 
<p></p> 
<ul><li> <h5 id="%E7%89%B9%E7%82%B9">特点</h5> 
  <ul><li>SMTP一遍不使用中间邮件服务器发送邮件，哪怕两个服务器位于地球两端也是<strong><span style="color:#fe2c24;">直接相连</span></strong></li><li>如若一方邮件服务器没开机，另一方会一直尝试重新发送。</li><li>SMTP用的是<span style="color:#fe2c24;"><strong>持续连接</strong></span>，如果又多个报文同时发往同一邮件服务器，会采用同一个TCP连接发送这些报文。</li></ul></li></ul> 
<p></p> 
<h4 id="%EF%BC%883%EF%BC%89%E4%B8%8EHTTP%E7%9A%84%E5%AF%B9%E6%AF%94">（3）与HTTP的对比</h4> 
<ul><li>目的 
  <ul><li>HTTP：用户拉（pull），用户想要什么对象，自己从服务器拉出来</li><li>SMTP：用户推（push），用户想让对方接收邮件，自己发送过去</li></ul></li><li>两者都是使用ASCII形式的命令/响应交互，状态码 
  <ul><li>但是SMTP要求报文（头部和主题）为7位ASCII码格式，如果某报文包含了非7bitASCII字符，则必须按照7比特ASCII码进行编码</li><li>HTTP数据不受限制，什么格式都行</li></ul></li><li>封装 
  <ul><li>HTTP：每一个对象封装在各自的响应报文（例如html和JPEG对象在不同报文传输）</li><li>SMTP：多个对象包含在一个报文里</li></ul></li><li>连接方式 
  <ul><li>HTTP既有持续连接也有非持续连接</li><li>SMTP使用持续连接</li></ul></li></ul> 
<p></p> 
<h4 id="%EF%BC%884%EF%BC%89%E9%82%AE%E4%BB%B6%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F">（4）邮件报文格式</h4> 
<p>典型的报文首部如下（header：冒号前的内容；body：内容）</p> 
<p><img alt="" height="66" src="https://images2.imgbox.com/fb/fe/3qsj4ASv_o.png" width="444"></p> 
<p style="margin-left:.02in;text-align:left;"><span style="color:#000000;">SMTP: RFC 5321</span><span style="color:#000000;">（原</span><span style="color:#000000;">RFC821</span><span style="color:#000000;">）</span><span style="color:#c00000;">交换</span><span style="color:#c00000;">email</span><span style="color:#c00000;">报文的协议</span></p> 
<p style="margin-left:.02in;text-align:left;"><span style="color:#000000;">SMTP: RFC 5322</span><span style="color:#000000;">（原</span><span style="color:#000000;">RFC822</span><span style="color:#000000;">）</span><span style="color:#c00000;">定义文本报文的格式</span></p> 
<p style="margin-left:.02in;text-align:left;"></p> 
<h4 id="%EF%BC%885%EF%BC%89%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE">（5）邮件访问协议</h4> 
<p></p> 
<ul><li> <p>SMTP：主要是传送到接收方的邮件服务器【推】，而到了接收方的邮件服务器后，就需要下面这些邮件访问协议了</p> </li><li> <p>邮件访问协议：<u>主要方便接收方查看的时候从邮件服务器拉出</u></p> 
  <ul><li> <p>POP3（Post Office Protocol Version 3）：是一种简单的邮件传输协议，用于将邮件从邮件服务器传送到接收方的用户代理。它包括了用户身份确认、邮件下载和删除等基本操作，并通过TCP连接进行通信，服务无状态，不会保存东西等等【拉pull】</p> </li><li> <p>IMAP（Internet Message Access Protocol）：与POP3类似，也是一个邮件访问协议，但比POP3功能更丰富和复杂。IMAP服务器将每封邮件与一个文件夹联系起来，允许用户创建文件夹、移动邮件以及在远程文件夹中查询邮件，因此属于有状态。【拉pull】</p> </li><li> <p>基于Web的电子邮件：越来越多的用户使用Web浏览器来收发电子邮件，通信通过HTTP进行。当用户打开浏览器，登录远程邮箱后，该电子邮件报文从接收方的邮件服务器发送到浏览器。同时当发送方要从浏览器发送一封邮件，也是依靠的HTTP发送到它的邮件服务器。<span style="background-color:#ffd900;">【总而言之，不管是发送还是阅读，只要从Web浏览器，则用的就说HTTP，而其他都不是用的HTTP】</span></p> </li></ul></li></ul> 
<p></p> 
<h3 id="%E4%BA%94%EF%BC%9ADNS">五：DNS</h3> 
<p>因特网上的主机有着两个名字：</p> 
<p>①主机名：比如网址www.facebook.com</p> 
<p>②IP地址（32bit）: 比如121.7.106.83（具体会等到第四章再来讨论）</p> 
<p>那如何做到给你一个主机名，你能得知它的IP地址呢？</p> 
<p></p> 
<hr> 
<p>Domain Name System（DNS）：域名解析系统</p> 
<ul><li>分布式数据库 
  <ul><li>由有层次结构的域名服务器组成</li><li>采用分布式的原因是由于流量过大，容易单点故障，同时管理维护困难。</li></ul></li><li>应用层协议：主机，DNS服务器互相通信来解析域名 
  <ul><li>属于Internet核心内容之一，在应用层实现</li><li>储存和计算的复杂度分散到网络的边缘（即主机，端系统啥的）</li></ul></li></ul> 
<hr> 
<h4 id="%EF%BC%881%EF%BC%89DNS%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1">（1）DNS提供的服务</h4> 
<ul><li>主机名——&gt;IP地址</li><li>主机别名——&gt;规范名字转换（当一个主机在不同网络环境运行，可能分配不同域名或别名，实际上指向同一个主机的IP地址）</li><li>邮件服务器别名——&gt;规范名字转换</li><li>负载分配：多Web服务器系统；许多IP地址可以对应一个名字，实现分布式服务器提供相同服务<span style="background-color:#ffd900;">（例如，一个大型电商网站可能同时部署了多台服务器来处理用户请求。这些服务器会共享同一个域</span><span style="color:#0d0016;"><span style="background-color:#ffd900;">名，比如www.example.com。当用户访问该网站时，他们的浏览器会发送一个DNS请求，请求www</span></span><span style="background-color:#ffd900;">.example</span><span style="color:#0d0016;"><span style="background-color:#ffd900;"> 的IP</span></span><span style="background-color:#ffd900;">地址。DNS服务器将会返回所有服务器的IP地址，然后客户端会根据负载均衡算法选取其中的一台最空闲服务器来处理用户请求。）</span></li></ul> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89DNS%E5%B7%A5%E4%BD%9C%E6%9C%BA%E7%90%86%E6%A6%82%E8%BF%B0">（2）DNS工作机理概述</h4> 
<ul><li> <h5 id="%E5%88%86%E5%B8%83%E5%BC%8F%E3%80%81%E5%B1%82%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93">分布式、层次数据库</h5> 
  <ul><li>根DNS服务器（Root） 
    <ul><li>有400多个根名字服务器遍及全世界。这些根名字服务器由13 个不同的组织管理。</li></ul></li><li>顶级域DNS服务器（Top level Domain） 
    <ul><li>通用域：对于每个顶级域(如com、org、net、edu和gov)</li><li>国家域：和所有国家的顶级域(如cn--中国、uk、us和jp等等),</li></ul></li><li>权威DNS服务器（Authoritative） 
    <ul><li>因特网上具有公共可访问主机（如Web服务器和邮件服务 器）的每个组织机构必须提供公共可访问的DNS记录，这些记录将这些主机的名 字映射为IP地址。一个组织机构的权威DNS服务器收藏了这些DNS记录。现在比如一些大学和大公司都用的是自己的权威DNS服务器。</li></ul></li><li>本地DNS服务器（local） 
    <ul><li><span style="color:#000000;">本地</span><span style="color:#000000;">DNS</span><span style="color:#000000;">服务器可以看作是DNS查询的代理</span><span style="color:#000000;">，</span>严格意义不属于层次结构，但至关重要。</li><li>比如一个居民区的ISP或者一个机构的ISP（类似中国移动提供的）</li><li><span style="color:#000000;">当主机查询</span><span style="color:#000000;">DNS</span><span style="color:#000000;">信息时</span><span style="color:#000000;">, </span><span style="color:#000000;">查询信息发送到本地</span><span style="color:#000000;">DNS</span><span style="color:#000000;">服务器</span></li></ul></li></ul></li></ul> 
<p class="img-center"><img alt="" height="286" src="https://images2.imgbox.com/3d/4d/lFDE6ijG_o.png" width="791"></p> 
<ul><li> <h5 id="DNS%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E6%96%B9%E6%B3%95">DNS地址解析方法</h5> 
  <ul><li> <h6 id="%E9%80%92%E5%BD%92%E8%A7%A3%E6%9E%90%EF%BC%88recursive%20query%EF%BC%89">递归解析（recursive query）</h6> 
    <ul><li>假设所知的域名在某个权威服务器中，过程如下图左图所示</li><li>首先主机先委托本地DNS服务器查询</li><li>而本地服务器从最高层的DNS根服务器出发</li><li>一直递归往低层次移动发送，经过顶级域名服务器</li><li>再发送到权威DNS服务器，得到想要的IP地址</li><li>最后再原路返回一直到原来的主机</li><li><u>缺点：如果所有的主机都这么查询，容易给上层DNS带来较大的负担</u></li></ul></li><li> <h6 id="%E8%BF%AD%E4%BB%A3%E8%A7%A3%E6%9E%90%EF%BC%88iterated%20query%EF%BC%89">迭代解析<span style="color:#0d0016;">（iterated query</span>）</h6> 
    <ul><li>假设所知的域名在某个权威服务器中，过程如下图右图所示</li><li>首先主机先委托本地DNS服务器查询</li><li>而本地服务器先访问根服务器，先从那得知了顶级域名服务器的IP地址</li><li>而后本地服务器访问顶级域名服务器，再得知了权威域名服务器IP地址</li><li>再访问权威DNS服务器，得到想要的IP地址</li><li>最后再发送给目的主机即可</li></ul></li></ul></li></ul> 
<p><img alt="" height="480" src="https://images2.imgbox.com/8e/7d/Fwm8fGGa_o.png" width="300"><img alt="" height="480" src="https://images2.imgbox.com/0e/4f/QPkcjHdD_o.png" width="318"></p> 
<p></p> 
<ul><li> <h5 id="%C2%A0DNS%E7%BC%93%E5%AD%98%EF%BC%88DNS%20caching%EF%BC%89"> DNS缓存（DNS caching）</h5> 
  <ul><li> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">当一个服务器向另一个服务器请求</span><span style="color:#000000;">DNS</span><span style="color:#000000;">映射并得到回应时，将该</span><span style="color:#000000;">DNS</span><span style="color:#000000;">映射存储在</span><span style="color:#ff0000;">高速缓存</span><span style="color:#000000;">中，用于向之后的相同请求</span><span style="color:#ff0000;">迅速</span><span style="color:#000000;">提供查询服务</span></p> </li><li> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">作用</span></p> 
    <ul><li> <p style="margin-left:0in;text-align:left;"><span style="color:#0d0016;">改善时延</span></p> </li><li> <p style="margin-left:0in;text-align:left;"><span style="color:#0d0016;">减少在Internet上到处传输的DNS报文数量</span></p> </li><li> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">本地</span><span style="color:#000000;">DNS</span><span style="color:#000000;">服务器一般都缓存有顶级域名服务器的</span><span style="color:#000000;">IP</span><span style="color:#000000;">映射（因此不需要再查询</span><span style="color:#000000;">TLD</span><span style="color:#000000;">服务器地址）</span></p> </li></ul></li><li> <p style="margin-left:0in;text-align:left;">然而主机可能动态的改变IP地址，导致缓存的DNS无法访问</p> </li><li> <p style="margin-left:0in;text-align:left;">而当TTL过期后才会去查询新的IP地址<span style="background-color:#ffd900;">（大概就说如果对方主机的IP地址改变，然而我现在缓存的是旧的IP地址，TTL又没过期，导致访问不成功，解决的办法只能是删除旧的记录）</span></p> </li></ul></li></ul> 
<p></p> 
<ul><li> <h5 id="%C2%A0DNS%E8%AE%B0%E5%BD%95%E5%92%8C%E6%8A%A5%E6%96%87"> DNS记录和报文</h5> <span style="color:#000000;">①分布式数据库保存着资源记录</span><span style="color:#000000;">resource records </span><span style="color:#cc0000;">(RR)</span> 
  <ul><li><span style="color:#000000;">RR </span><span style="color:#000000;">格式</span><span style="color:#000000;">: </span><span style="color:#000000;">(</span><span style="color:#000000;">name, value, type, </span><span style="color:#c00000;"><strong>ttl</strong></span><span style="color:#000000;">）</span> 
    <ul><li> <p style="margin-left:0in;text-align:left;"><span style="color:#000000;">ttl：该记录的生存时间————决定了资源记录应该从缓存中删除的时间</span></p> </li><li> <p style="margin-left:0in;text-align:left;">type：</p> 
      <ul><li> <p style="margin-left:0in;text-align:left;">=A：标准映射</p> 
        <ul><li> <p style="margin-left:0in;text-align:left;">name：主机名</p> </li><li> <p style="margin-left:0in;text-align:left;">value：IP地址</p> </li></ul></li><li> <p style="margin-left:0in;text-align:left;">=NS：域——&gt;权威DNS</p> 
        <ul><li> <p style="margin-left:0in;text-align:left;">name：域名（eg：foo.com）</p> </li><li> <p style="margin-left:0in;text-align:left;">Value：是个知道如何获得该域 中主机IP地址的权威DNS服务器的主机名。</p> </li><li> <p style="margin-left:0in;text-align:left;">这个记录用于沿着查询链来路由DNS查询。例如(foo.com, dns.foo.com, NS)就是一条类型为NS的记录</p> </li></ul></li><li> <p style="margin-left:0in;text-align:left;">=CNAME：主机别名——&gt;规范名</p> 
        <ul><li> <p style="margin-left:0in;text-align:left;">name：某个主机名的别名</p> </li><li> <p style="margin-left:0in;text-align:left;">value：某个主机的规范名</p> </li></ul></li><li> <p style="margin-left:0in;text-align:left;">=MX：邮件服务器别名——&gt;规范名</p> 
        <ul><li> <p style="margin-left:0in;text-align:left;">name：是别名</p> </li><li> <p style="margin-left:0in;text-align:left;">value：规范名</p> </li></ul></li></ul></li></ul></li></ul></li></ul> 
<p><span style="color:#000000;">      ②DNS报文</span></p> 
<p><span style="color:#000000;">           分类：查询报文和回答报文（有着相同的格式）                         </span><span style="color:#cc0000;">        </span></p> 
<p></p> 
<p></p> 
<h3 id="%E5%85%AD%EF%BC%9A%E5%AF%B9%E7%AD%89%E4%BD%93%E7%BB%93%E6%9E%84%EF%BC%88peert-to-peer%EF%BC%89P2P">六：对等体结构（peert-to-peer）P2P</h3> 
<p>到目前为止本章描述的应用（包括Web，电子邮件，DNS都用的客户-服务器体系结构，依赖于总是打开的服务器；而前面说过，对于P2P体系结构，没有一直打开的服务器，因而在这里我们来讨论一下P2P体系结构。</p> 
<hr> 
<h4 id="%EF%BC%881%EF%BC%89%E7%89%B9%E7%82%B9%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0">（1）特点        </h4> 
<ul><li> <p>几乎没有一直运行的服务器</p> </li><li> <p>任何端系统都可以通信</p> </li><li> <p>既是服务器也是客户端</p> </li><li> <p>参与的主机间歇性连接且可以改变IP</p> </li><li> <p>例如BitTorrent，迅雷等        </p> </li></ul> 
<p></p> 
<h4 id="%EF%BC%882%EF%BC%89%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%EF%BC%9Aclient-server%E6%A8%A1%E5%BC%8FvsP2P%E6%A8%A1%E5%BC%8F">（2）文件分发：client-server模式vsP2P模式</h4> 
<ul><li><span style="color:#000000;">question：从一台服务器分发大小为</span><span style="color:#000000;"> F </span><span style="color:#000000;">的文件到</span><span style="color:#000000;">N</span><span style="color:#000000;">个</span><span style="color:#000000;">peers</span><span style="color:#000000;">需要多少时间</span><span style="color:#000000;">?</span></li></ul> 
<p></p> 
<ul><li> <h5 id="cliengt-server%E6%A8%A1%E5%BC%8F">cliengt-server模式</h5> 
  <ul><li>服务端：需要顺序传输N份文件————&gt;t2=NF/v（v为速率）</li><li>用户端 
    <ul><li>每个用户端都需要下载</li><li>t1为所有用户的最长时间</li></ul></li><li>total time=t2+t1</li></ul></li></ul> 
<p></p> 
<ul><li> <h5 id="P2P%E6%A8%A1%E5%BC%8F">P2P模式</h5> 
  <ul><li>服务器传输：至少需要上传一个copy文件时间为 
    <ul><li>F/v</li></ul></li><li>用户：每个用户下载一份copy 
    <ul><li>最长时间为t1</li></ul></li><li>系统：总体下载量为NF bits 
    <ul><li>所有的节点都可以上传文件,则总体上传速率为</li><li><img alt="\sum vi" class="mathcode" src="https://images2.imgbox.com/70/42/fWNQrRDl_o.png"><img alt="+vs" class="mathcode" src="https://images2.imgbox.com/6b/41/RvuCXwf4_o.png"></li><li>即总体时间t2远小于c-s模式的t2</li></ul></li><li><img alt="" height="183" src="https://images2.imgbox.com/e4/bb/X2lwTHra_o.png" width="367"></li></ul></li></ul> 
<p class="img-center"><img alt="" height="368" src="https://images2.imgbox.com/06/b0/fVtwzt8K_o.png" width="495"></p> 
<p></p> 
<h4 id="%EF%BC%883%EF%BC%89BitTorrent">（3）BitTorrent</h4> 
<p>BitToiTent是一种用于文件分发的流行P2P协议。</p> 
<ul><li> <h5 id="%E8%AF%B7%E6%B1%82%E6%96%87%E4%BB%B6%E5%9D%97%3A%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0"><span style="color:#0d0016;">请求文件块:        </span></h5> 
  <ul><li><span style="color:#0d0016;">在任何时间，不同的peers拥有不同的文件块分组</span></li><li><span style="color:#0d0016;">Alice节点周期性地向邻居询问他们拥有哪些文件块的信息</span></li><li><span style="color:#0d0016;">Alice向peers请求它需要的文件块</span></li><li>稀缺性优先：平衡网络中文件块的数量</li></ul></li><li> <h5 id="%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E5%9D%97%3A%E2%80%9C%E4%B8%80%E6%8A%A5%E8%BF%98%E4%B8%80%E6%8A%A5%E2%80%9Dtit-for-tat" style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">发送文件块:“一报还一报”tit-for-tat</span></h5> 
  <ul><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">Alice向4个peer发送块，这些peer向自己提供最大带宽的服务</span></p> 
    <ul><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">其它peers被Alice阻塞 (将不会从Alice处获得服务)</span></p> </li><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">每隔10秒钟重新排出前4的peer</span></p> </li></ul></li><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">每隔30秒，随机选择其它一个peer节点，向这个节点发送文件块</span></p> 
    <ul><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">“乐观地疏通”这个peer</span></p> </li><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">新加入的peer可能加入前4的列表<span style="background-color:#ffd900;">（这就解释了刚刚加入的peer怎么获取资源进入P2P体系）</span></span></p> </li></ul></li><li> <p style="margin-left:.02in;text-align:left;"><span style="color:#0d0016;">只向排名前4的peer（前20s）和试探性的peer（20-30s）发送文件</span></p> </li></ul></li></ul> 
<p style="margin-left:.02in;text-align:left;"><img alt="" height="550" src="https://images2.imgbox.com/94/ac/GYN5td3D_o.png" width="772"></p> 
<p style="margin-left:.02in;text-align:left;"></p> 
<h3 id="%E4%B8%83%EF%BC%9A%E8%A7%86%E9%A2%91%E6%B5%81%E5%92%8C%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%88%E7%94%B1%E4%BA%8E%E8%BF%99%E5%9D%97%E4%B8%8D%E7%AE%97%E9%87%8D%E7%82%B9%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%BE%88%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%EF%BC%89">七：视频流和内容分发网络（由于这块不算重点，没有很详细介绍）</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E8%A7%86%E9%A2%91%E6%B5%81%E6%9C%8D%E5%8A%A1">（1）视频流服务</h4> 
<ul><li>视频流量：占据互联网大部分的带宽</li><li>因此得不断完善分布式，应用层面的基础设施</li></ul> 
<h4 id="%EF%BC%882%EF%BC%89%E5%A4%9A%E5%AA%92%E4%BD%93%EF%BC%9A%E8%A7%86%E9%A2%91">（2）多媒体：视频</h4> 
<ul><li>视频：固定速率显示的图像序列 
  <ul><li>eg：24 images/sec</li></ul></li><li>数字化图像：像素的阵列 
  <ul><li>每个像素由若干bit表示</li></ul></li><li>编码：使用图像内和图像间的冗杂来降低编码的比特数 
  <ul><li>CBR：以固定速率编码</li><li>VBR：视频编码速率随时间变化</li></ul></li><li>存储视频的流化服务（如果实现边下边播） 
  <ul><li>主要的挑战： 
    <ul><li>带宽可能会随着网络的拥塞程度随时间变化</li><li>数据包的延迟和丢失会导致播放的延迟，或者导致较差的视频播放质量</li></ul></li><li>流化服务：<span style="color:#000000;">用户在播放视频前段部分，而服务器仍然在继续发送视频后段部分</span>（即先缓存，然后播放缓存的意思）</li><li><span style="color:#fe2c24;"><strong>具体的服务：DASH</strong></span> 
    <ul><li>服务器 
      <ul><li><span style="color:#000000;">将视频文件分割成为固定播放时长的块</span></li><li><span style="color:#000000;">每一块单独存储，用不同码率编码（</span><span style="color:#000000;">8-10</span><span style="color:#000000;">种）</span></li><li><span style="color:#000000;">文件复制存储在多个</span><span style="color:#000000;">CDN</span><span style="color:#000000;">节点</span></li><li><span style="color:#0d0016;">manifest file (告示文件): 提供不同</span><span style="color:#000000;">块的</span> <span style="color:#c00000;">URLs</span></li></ul></li><li>用户<span style="color:#c00000;">:</span> 
      <ul><li>先获取告示文件</li><li>周期性地测量服务器到用户端的带宽</li><li><span style="color:#000000;">查询告示文件，在一个时刻请求一个块</span> 
        <ul><li><span style="color:#000000;">如果带宽足够好，选择最大码率的视频块</span></li><li><span style="color:#c00000;">会话中的不同时刻，可以切换请求不同的编码块（取决于当时的可用带宽）</span></li></ul></li></ul></li><li><span style="color:#0d0016;">流化视频= 编码</span><span style="color:#000000;"> +</span> <span style="color:#000000;">DASH + </span><span style="color:#000000;">播放缓存</span></li></ul></li></ul></li></ul> 
<h4 id="(3)CDNS%EF%BC%88%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C%EF%BC%89"><span style="color:#000000;">(3)CDNS（内容分发网络）</span></h4> 
<p style="margin-left:0in;text-align:left;"><span style="color:#cc0000;">挑战</span><span style="color:#cc0000;">: </span><span style="color:#cc0000;">服务器如何向上百万用户同时发送流化视频内容</span></p> 
<ul><li>超级服务中心（其实从常识还有上面那些的经验就可以判断这个错，由于容易出风险，因此不用）</li><li>通过CDN： 
  <ul><li><span style="color:#000000;">在多个分布式的服务器上存储多个文件的拷贝，就近为用户服务，提高用户体验</span></li><li><em>enter deep: </em>将CDN服务器深入到许多接入网 
    <ul><li><span style="color:#000000;">比如直接部署在本地</span><span style="color:#000000;">ISP</span><span style="color:#000000;">内部</span></li><li><span style="color:#000000;">更接近用户，数量多，离用户近，管理困难</span></li></ul></li><li><span style="color:#000000;">bring home：部署在少数（</span><span style="color:#000000;">10</span><span style="color:#000000;">个左右）关键位置，比如上层</span><span style="color:#000000;">ISP</span><span style="color:#000000;">的网络服务提供点</span> 
    <ul><li><span style="color:#000000;">便于管理和维护</span></li></ul></li></ul></li></ul> 
<p><img alt="" height="253" src="https://images2.imgbox.com/37/fe/qH18tedS_o.png" width="690"></p> 
<p></p> 
<h3 id="%E5%85%AB%20%E7%BB%93%E8%AF%AD">八 结语</h3> 
<p>（1）由于最后一块课上以及要求并非很重，最后一快知识点有点介绍粗略，有兴趣的可以看看计算机网络-自顶向下方法第七版这本书或者其他途径自行了解一下，如果有啥错误的也麻烦指正❀❀❀❀❀❀。</p> 
<p>（2）And 如果文章对你有帮助的话，请各位uu顺带点下👍。</p> 
<p>（3）本文图片以及一些专业解释来源：《计算机网络-自顶向下方法第七版》</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5107bd9f36cfcbe13ae8856975518fc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MyBatis-Plus入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8903369fa65563208f3c1e623936a69c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络自顶向下方法学习笔记—————第一章：概述</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>