<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UVM验证平台 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="UVM验证平台" />
<meta property="og:description" content="参考：《UVM实战》 张强 著 文章目录 UVM 框架DUTtestbench topinterfacemy_case0base_testenvagenttarnsactionsequencesequencerdrivermonitor reference_modelscoreboard UVM 框架 DUT 1 module dut(clk, 2 rst_n, 3 rxd, 4 rx_dv, 5 txd, 6 tx_en); 7 input clk; 8 input rst_n; 9 input[7:0] rxd; 10 input rx_dv; 11 output [7:0] txd; 12 output tx_en; 13 14 reg[7:0] txd; 15 reg tx_en; 16 17 always @(posedge clk) begin 18 if(!rst_n) begin 19 txd &lt;= 8&#39;b0; 20 tx_en &lt;= 1&#39;b0; 21	end 22 else begin 23 txd &lt;= rxd; 24 tx_en &lt;= rx_dv; 25 end 26 end 27 endmodule testbench top 1 `timescale 1ns/1ps 2 `include &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/36c2a97bc10660ee6d342e5695ebd27b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-23T11:16:33+08:00" />
<meta property="article:modified_time" content="2022-06-23T11:16:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UVM验证平台</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code>参考：《UVM实战》 张强 著
</code></pre> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#UVM__3" rel="nofollow">UVM 框架</a></li><li><a href="#DUT_5" rel="nofollow">DUT</a></li><li><a href="#testbench_top_35" rel="nofollow">testbench top</a></li><li><ul><li><a href="#interface_100" rel="nofollow">interface</a></li><li><a href="#my_case0_113" rel="nofollow">my_case0</a></li><li><ul><li><a href="#base_test_160" rel="nofollow">base_test</a></li><li><ul><li><a href="#env_206" rel="nofollow">env</a></li><li><ul><li><a href="#agent_257" rel="nofollow">agent</a></li><li><ul><li><a href="#tarnsaction_299" rel="nofollow">tarnsaction</a></li><li><a href="#sequence_388" rel="nofollow">sequence</a></li><li><a href="#sequencer_414" rel="nofollow">sequencer</a></li><li><a href="#driver_430" rel="nofollow">driver</a></li><li><a href="#monitor_509" rel="nofollow">monitor</a></li></ul> 
      </li><li><a href="#reference_model_616" rel="nofollow">reference_model</a></li><li><a href="#scoreboard_661" rel="nofollow">scoreboard</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="UVM__3"></a>UVM 框架</h2> 
<p><img src="https://images2.imgbox.com/33/6d/0R2RS2AR_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="DUT_5"></a>DUT</h2> 
<pre><code class="prism language-c"><span class="token number">1</span> module <span class="token function">dut</span><span class="token punctuation">(</span>clk<span class="token punctuation">,</span>
<span class="token number">2</span>          rst_n<span class="token punctuation">,</span>
<span class="token number">3</span> 		   rxd<span class="token punctuation">,</span>
<span class="token number">4</span> 		   rx_dv<span class="token punctuation">,</span>
<span class="token number">5</span> 		   txd<span class="token punctuation">,</span>
<span class="token number">6</span> 		   tx_en<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">7</span>  input clk<span class="token punctuation">;</span>
<span class="token number">8</span>  input rst_n<span class="token punctuation">;</span>
<span class="token number">9</span>  input<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rxd<span class="token punctuation">;</span>
<span class="token number">10</span> input rx_dv<span class="token punctuation">;</span>
<span class="token number">11</span> output <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> txd<span class="token punctuation">;</span>
<span class="token number">12</span> output tx_en<span class="token punctuation">;</span>
<span class="token number">13</span>
<span class="token number">14</span> reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> txd<span class="token punctuation">;</span>
<span class="token number">15</span> reg tx_en<span class="token punctuation">;</span>
<span class="token number">16</span>
<span class="token number">17</span> always @<span class="token punctuation">(</span>posedge clk<span class="token punctuation">)</span> begin
<span class="token number">18</span> 	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rst_n<span class="token punctuation">)</span> begin
<span class="token number">19</span> 		txd <span class="token operator">&lt;=</span> <span class="token number">8</span>'b0<span class="token punctuation">;</span>
<span class="token number">20</span> 		tx_en <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
<span class="token number">21</span>	end
<span class="token number">22</span> 	<span class="token keyword">else</span> begin
<span class="token number">23</span> 		txd <span class="token operator">&lt;=</span> rxd<span class="token punctuation">;</span>
<span class="token number">24</span> 		tx_en <span class="token operator">&lt;=</span> rx_dv<span class="token punctuation">;</span>
<span class="token number">25</span> 	end
<span class="token number">26</span> end
<span class="token number">27</span> endmodule
</code></pre> 
<h2><a id="testbench_top_35"></a>testbench top</h2> 
<pre><code class="prism language-c"> <span class="token number">1</span> `timescale <span class="token number">1</span>ns<span class="token operator">/</span><span class="token number">1</span>ps
 <span class="token number">2</span> `include <span class="token string">"uvm_macros.svh"</span>
 <span class="token number">3</span> 
 <span class="token number">4</span> import uvm_pkg<span class="token operator">::</span><span class="token operator">*</span><span class="token punctuation">;</span>
 <span class="token number">5</span> `include <span class="token string">"my_if.sv"</span>
 <span class="token number">6</span> `include <span class="token string">"my_transaction.sv"</span>
 <span class="token number">7</span> <span class="token comment">//`include "my_sequence.sv"</span>
 <span class="token number">8</span> `include <span class="token string">"my_driver.sv"</span>
 <span class="token number">9</span> `include <span class="token string">"my_monitor.sv"</span>
<span class="token number">10</span> `include <span class="token string">"my_sequencer.sv"</span>
<span class="token number">11</span> `include <span class="token string">"my_agent.sv"</span>
<span class="token number">12</span> `include <span class="token string">"my_model.sv"</span>
<span class="token number">13</span> `include <span class="token string">"my_scoreboard.sv"</span>
<span class="token number">14</span> `include <span class="token string">"my_env.sv"</span>
<span class="token number">15</span> `include <span class="token string">"base_test.sv"</span>
<span class="token number">16</span> `include <span class="token string">"my_case0.sv"</span>
<span class="token number">17</span> `include <span class="token string">"my_case1.sv"</span>
<span class="token number">18</span> 
<span class="token number">19</span> module top_tb<span class="token punctuation">;</span>
<span class="token number">20</span> 
<span class="token number">21</span> reg clk<span class="token punctuation">;</span>
<span class="token number">22</span> reg rst_n<span class="token punctuation">;</span>
<span class="token number">23</span> reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rxd<span class="token punctuation">;</span>
<span class="token number">24</span> reg rx_dv<span class="token punctuation">;</span>
<span class="token number">25</span> wire<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> txd<span class="token punctuation">;</span>
<span class="token number">26</span> wire tx_en<span class="token punctuation">;</span>
<span class="token number">27</span> 
<span class="token number">28</span> my_if <span class="token function">input_if</span><span class="token punctuation">(</span>clk<span class="token punctuation">,</span> rst_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span> my_if <span class="token function">output_if</span><span class="token punctuation">(</span>clk<span class="token punctuation">,</span> rst_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">30</span> 
<span class="token number">31</span> dut <span class="token function">my_dut</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">32</span>            <span class="token punctuation">.</span><span class="token function">rst_n</span><span class="token punctuation">(</span>rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">33</span>            <span class="token punctuation">.</span><span class="token function">rxd</span><span class="token punctuation">(</span>input_if<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">34</span>            <span class="token punctuation">.</span><span class="token function">rx_dv</span><span class="token punctuation">(</span>input_if<span class="token punctuation">.</span>valid<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">35</span>            <span class="token punctuation">.</span><span class="token function">txd</span><span class="token punctuation">(</span>output_if<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token number">36</span>            <span class="token punctuation">.</span><span class="token function">tx_en</span><span class="token punctuation">(</span>output_if<span class="token punctuation">.</span>valid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">37</span> 
<span class="token number">38</span> initial begin
<span class="token number">39</span>    clk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">40</span>    forever begin
<span class="token number">41</span>       #<span class="token number">100</span> clk <span class="token operator">=</span> <span class="token operator">~</span>clk<span class="token punctuation">;</span>
<span class="token number">42</span>    end
<span class="token number">43</span> end
<span class="token number">44</span> 
<span class="token number">45</span> initial begin
<span class="token number">46</span>    rst_n <span class="token operator">=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
<span class="token number">47</span>    #<span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token number">48</span>    rst_n <span class="token operator">=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
<span class="token number">49</span> end
<span class="token number">50</span> 
<span class="token number">51</span> initial begin
<span class="token number">52</span>    <span class="token comment">//run_test("my_env");</span>
<span class="token number">53</span>    <span class="token function">run_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">54</span> end
<span class="token number">55</span> 
<span class="token number">56</span> initial begin
<span class="token number">57</span>    uvm_config_db#<span class="token punctuation">(</span>virtual my_if<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"uvm_test_top.env.i_agt.drv"</span><span class="token punctuation">,</span> <span class="token string">"vif"</span><span class="token punctuation">,</span> input_if<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">58</span>    uvm_config_db#<span class="token punctuation">(</span>virtual my_if<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"uvm_test_top.env.i_agt.mon"</span><span class="token punctuation">,</span> <span class="token string">"vif"</span><span class="token punctuation">,</span> input_if<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">59</span>    uvm_config_db#<span class="token punctuation">(</span>virtual my_if<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"uvm_test_top.env.o_agt.mon"</span><span class="token punctuation">,</span> <span class="token string">"vif"</span><span class="token punctuation">,</span> output_if<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">60</span> end
<span class="token number">61</span> 
<span class="token number">62</span> endmodule
</code></pre> 
<h3><a id="interface_100"></a>interface</h3> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_IF__SV
 <span class="token number">2</span> `define MY_IF__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> interface <span class="token function">my_if</span><span class="token punctuation">(</span>input clk<span class="token punctuation">,</span> input rst_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">5</span> 
 <span class="token number">6</span>    logic <span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>
 <span class="token number">7</span>    logic valid<span class="token punctuation">;</span>
 <span class="token number">8</span> endinterface
 <span class="token number">9</span> 
<span class="token number">10</span> `endif
</code></pre> 
<h3><a id="my_case0_113"></a>my_case0</h3> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_CASE0__SV
 <span class="token number">2</span> `define MY_CASE0__SV
 <span class="token number">3</span> class case0_sequence extends uvm_sequence #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">4</span>    my_transaction m_trans<span class="token punctuation">;</span>
 <span class="token number">5</span> 
 <span class="token number">6</span>    function  <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token operator">=</span> <span class="token string">"case0_sequence"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">7</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">8</span>    endfunction 
 <span class="token number">9</span>    
<span class="token number">10</span>    virtual task <span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>starting_phase <span class="token operator">!=</span> null<span class="token punctuation">)</span> 
<span class="token number">12</span>          starting_phase<span class="token punctuation">.</span><span class="token function">raise_objection</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">13</span>       <span class="token function">repeat</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> begin
<span class="token number">14</span>          `<span class="token function">uvm_do</span><span class="token punctuation">(</span>m_trans<span class="token punctuation">)</span>
<span class="token number">15</span>       end
<span class="token number">16</span>       #<span class="token number">100</span><span class="token punctuation">;</span>
<span class="token number">17</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>starting_phase <span class="token operator">!=</span> null<span class="token punctuation">)</span> 
<span class="token number">18</span>          starting_phase<span class="token punctuation">.</span><span class="token function">drop_objection</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">19</span>    endtask
<span class="token number">20</span> 
<span class="token number">21</span>    `<span class="token function">uvm_object_utils</span><span class="token punctuation">(</span>case0_sequence<span class="token punctuation">)</span>
<span class="token number">22</span> endclass
<span class="token number">23</span> 
<span class="token number">24</span> 
<span class="token number">25</span> class my_case0 extends base_test<span class="token punctuation">;</span>
<span class="token number">26</span> 
<span class="token number">27</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"my_case0"</span><span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">28</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span>    endfunction 
<span class="token number">30</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">31</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_case0<span class="token punctuation">)</span>
<span class="token number">32</span> endclass
<span class="token number">33</span> 
<span class="token number">34</span> 
<span class="token number">35</span> function <span class="token keyword">void</span> my_case0<span class="token operator">::</span><span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">36</span>    super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">37</span> 
<span class="token number">38</span>    uvm_config_db#<span class="token punctuation">(</span>uvm_object_wrapper<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span>this<span class="token punctuation">,</span> 
<span class="token number">39</span>                                            <span class="token string">"env.i_agt.sqr.main_phase"</span><span class="token punctuation">,</span> 
<span class="token number">40</span>                                            <span class="token string">"default_sequence"</span><span class="token punctuation">,</span> 
<span class="token number">41</span>                                            case0_sequence<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">42</span> endfunction
<span class="token number">43</span> 
<span class="token number">44</span> `endif
</code></pre> 
<h4><a id="base_test_160"></a>base_test</h4> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef BASE_TEST__SV
 <span class="token number">2</span> `define BASE_TEST__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> class base_test extends uvm_test<span class="token punctuation">;</span>
 <span class="token number">5</span> 
 <span class="token number">6</span>    my_env         env<span class="token punctuation">;</span>
 <span class="token number">7</span>    
 <span class="token number">8</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"base_test"</span><span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">9</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">10</span>    endfunction
<span class="token number">11</span>    
<span class="token number">12</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">13</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">report_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">14</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>base_test<span class="token punctuation">)</span>
<span class="token number">15</span> endclass
<span class="token number">16</span> 
<span class="token number">17</span> 
<span class="token number">18</span> function <span class="token keyword">void</span> base_test<span class="token operator">::</span><span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">19</span>    super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">20</span>    env  <span class="token operator">=</span>  my_env<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"env"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">21</span>    <span class="token comment">//uvm_config_db#(uvm_object_wrapper)::set(this,</span>
<span class="token number">22</span>                                            <span class="token comment">//"env.i_agt.sqr.main_phase",</span>
<span class="token number">23</span>                                            <span class="token comment">//"default_sequence",</span>
<span class="token number">24</span>                                            <span class="token comment">// my_sequence::type_id::get());</span>
<span class="token number">25</span> endfunction
<span class="token number">26</span> 
<span class="token number">27</span> function <span class="token keyword">void</span> base_test<span class="token operator">::</span><span class="token function">report_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">28</span>    uvm_report_server server<span class="token punctuation">;</span>
<span class="token number">29</span>    <span class="token keyword">int</span> err_num<span class="token punctuation">;</span>
<span class="token number">30</span>    super<span class="token punctuation">.</span><span class="token function">report_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">31</span> 
<span class="token number">32</span>    server <span class="token operator">=</span> <span class="token function">get_report_server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">33</span>    err_num <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">get_severity_count</span><span class="token punctuation">(</span>UVM_ERROR<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">34</span> 
<span class="token number">35</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err_num <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> begin
<span class="token number">36</span>       $<span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"TEST CASE FAILED"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">37</span>    end
<span class="token number">38</span>    <span class="token keyword">else</span> begin
<span class="token number">39</span>       $<span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"TEST CASE PASSED"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">40</span>    end
<span class="token number">41</span> endfunction
<span class="token number">42</span> 
<span class="token number">43</span> `endif
</code></pre> 
<h5><a id="env_206"></a>env</h5> 
<pre><code class="prism language-c"><span class="token number">1</span>  `ifndef MY_ENV__SV
<span class="token number">2</span>  `define MY_ENV__SV
<span class="token number">3</span>
<span class="token number">4</span>  class my_env extends uvm_env<span class="token punctuation">;</span>
<span class="token number">5</span> 
<span class="token number">6</span>    my_agent   i_agt<span class="token punctuation">;</span>
<span class="token number">7</span>    my_agent   o_agt<span class="token punctuation">;</span>
<span class="token number">8</span>    my_model   mdl<span class="token punctuation">;</span>
<span class="token number">9</span>    my_scoreboard scb<span class="token punctuation">;</span>
<span class="token number">10</span>   
<span class="token number">11</span>   uvm_tlm_analysis_fifo #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span> agt_scb_fifo<span class="token punctuation">;</span>
<span class="token number">12</span>   uvm_tlm_analysis_fifo #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span> agt_mdl_fifo<span class="token punctuation">;</span>
<span class="token number">13</span>   uvm_tlm_analysis_fifo #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span> mdl_scb_fifo<span class="token punctuation">;</span>
<span class="token number">14</span>   
<span class="token number">15</span>   function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"my_env"</span><span class="token punctuation">,</span> uvm_component parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">16</span>      super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">17</span>   endfunction
<span class="token number">18</span>
<span class="token number">19</span>   virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">20</span>      super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">21</span>      i_agt <span class="token operator">=</span> my_agent<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"i_agt"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">22</span>      o_agt <span class="token operator">=</span> my_agent<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"o_agt"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">23</span>      i_agt<span class="token punctuation">.</span>is_active <span class="token operator">=</span> UVM_ACTIVE<span class="token punctuation">;</span>
<span class="token number">24</span>      o_agt<span class="token punctuation">.</span>is_active <span class="token operator">=</span> UVM_PASSIVE<span class="token punctuation">;</span>
<span class="token number">25</span>      mdl <span class="token operator">=</span> my_model<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"mdl"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">26</span>      scb <span class="token operator">=</span> my_scoreboard<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"scb"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">27</span>      agt_scb_fifo <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"agt_scb_fifo"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">28</span>      agt_mdl_fifo <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"agt_mdl_fifo"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span>      mdl_scb_fifo <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"mdl_scb_fifo"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">30</span>
<span class="token number">31</span>   endfunction
<span class="token number">32</span>
<span class="token number">33</span>   <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">connect_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">34</span>   
<span class="token number">35</span>   `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_env<span class="token punctuation">)</span>
<span class="token number">36</span> endclass
<span class="token number">37</span>
<span class="token number">38</span> function <span class="token keyword">void</span> my_env<span class="token operator">::</span><span class="token function">connect_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">39</span>   super<span class="token punctuation">.</span><span class="token function">connect_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">40</span>   i_agt<span class="token punctuation">.</span>ap<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>agt_mdl_fifo<span class="token punctuation">.</span>analysis_export<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">41</span>   mdl<span class="token punctuation">.</span>port<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>agt_mdl_fifo<span class="token punctuation">.</span>blocking_get_export<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">42</span>   mdl<span class="token punctuation">.</span>ap<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mdl_scb_fifo<span class="token punctuation">.</span>analysis_export<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">43</span>   scb<span class="token punctuation">.</span>exp_port<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mdl_scb_fifo<span class="token punctuation">.</span>blocking_get_export<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">44</span>   o_agt<span class="token punctuation">.</span>ap<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>agt_scb_fifo<span class="token punctuation">.</span>analysis_export<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">45</span>   scb<span class="token punctuation">.</span>act_port<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>agt_scb_fifo<span class="token punctuation">.</span>blocking_get_export<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">46</span> endfunction
<span class="token number">47</span>
<span class="token number">48</span> `endif
</code></pre> 
<h6><a id="agent_257"></a>agent</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_AGENT__SV
 <span class="token number">2</span> `define MY_AGENT__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> class my_agent extends uvm_agent <span class="token punctuation">;</span>
 <span class="token number">5</span>    my_sequencer  sqr<span class="token punctuation">;</span>
 <span class="token number">6</span>    my_driver     drv<span class="token punctuation">;</span>
 <span class="token number">7</span>    my_monitor    mon<span class="token punctuation">;</span>
 <span class="token number">8</span>    
 <span class="token number">9</span>    uvm_analysis_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  ap<span class="token punctuation">;</span>
<span class="token number">10</span>    
<span class="token number">11</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">12</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">13</span>    endfunction 
<span class="token number">14</span>    
<span class="token number">15</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">16</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">connect_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">17</span> 
<span class="token number">18</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_agent<span class="token punctuation">)</span>
<span class="token number">19</span> endclass 
<span class="token number">20</span> 
<span class="token number">21</span> 
<span class="token number">22</span> function <span class="token keyword">void</span> my_agent<span class="token operator">::</span><span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">23</span>    super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">24</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>is_active <span class="token operator">==</span> UVM_ACTIVE<span class="token punctuation">)</span> begin
<span class="token number">25</span>        sqr <span class="token operator">=</span> my_sequencer<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"sqr"</span><span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">26</span>        drv <span class="token operator">=</span> my_driver<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"drv"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">27</span>    end
<span class="token number">28</span>    mon <span class="token operator">=</span> my_monitor<span class="token operator">::</span>type_id<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"mon"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span> endfunction 
<span class="token number">30</span> 
<span class="token number">31</span> function <span class="token keyword">void</span> my_agent<span class="token operator">::</span><span class="token function">connect_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">32</span>    super<span class="token punctuation">.</span><span class="token function">connect_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">33</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>is_active <span class="token operator">==</span> UVM_ACTIVE<span class="token punctuation">)</span>begin
<span class="token number">34</span>         drv<span class="token punctuation">.</span>seq_item_port<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>sqr<span class="token punctuation">.</span>seq_item_export<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token number">35</span>    end
<span class="token number">36</span>    ap <span class="token operator">=</span> mon<span class="token punctuation">.</span>ap<span class="token punctuation">;</span>
<span class="token number">37</span> endfunction
<span class="token number">38</span> 
<span class="token number">39</span> `endif
</code></pre> 
<h6><a id="tarnsaction_299"></a>tarnsaction</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_TRANSACTION__SV
 <span class="token number">2</span> `define MY_TRANSACTION__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> class my_transaction extends uvm_sequence_item<span class="token punctuation">;</span>
 <span class="token number">5</span> 
 <span class="token number">6</span>    rand bit<span class="token punctuation">[</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> dmac<span class="token punctuation">;</span>
 <span class="token number">7</span>    rand bit<span class="token punctuation">[</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> smac<span class="token punctuation">;</span>
 <span class="token number">8</span>    rand bit<span class="token punctuation">[</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> ether_type<span class="token punctuation">;</span>
 <span class="token number">9</span>    rand byte      pload<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">10</span>    rand bit<span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> crc<span class="token punctuation">;</span>
<span class="token number">11</span> 
<span class="token number">12</span>    constraint pload_cons<span class="token punctuation">{<!-- --></span>
<span class="token number">13</span>       pload<span class="token punctuation">.</span>size <span class="token operator">&gt;=</span> <span class="token number">46</span><span class="token punctuation">;</span>
<span class="token number">14</span>       <span class="token comment">//pload.size &lt;= 1500;</span>
<span class="token number">15</span>       pload<span class="token punctuation">.</span>size <span class="token operator">&lt;=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token number">16</span>       dmac <span class="token operator">==</span> <span class="token number">48</span>'h01_02_03_04_05_06<span class="token punctuation">;</span>
<span class="token number">17</span>       smac <span class="token operator">==</span> <span class="token number">48</span>'h60_50_40_30_20_10<span class="token punctuation">;</span>
<span class="token number">18</span> 	  <span class="token punctuation">}</span>
<span class="token number">19</span>    
<span class="token number">20</span> 
<span class="token number">21</span>    function bit<span class="token punctuation">[</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token function">calc_crc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">22</span>       <span class="token keyword">return</span> <span class="token number">32</span>'h0<span class="token punctuation">;</span>
<span class="token number">23</span>    endfunction
<span class="token number">24</span> 
<span class="token number">25</span>    function <span class="token keyword">void</span> <span class="token function">post_randomize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">26</span>       crc <span class="token operator">=</span> calc_crc<span class="token punctuation">;</span>
<span class="token number">27</span>    endfunction
<span class="token number">28</span> 
<span class="token number">29</span>    <span class="token comment">//`uvm_object_utils(my_transaction)</span>
<span class="token number">30</span>    `<span class="token function">uvm_object_utils_begin</span><span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>
<span class="token number">31</span>         `<span class="token function">uvm_field_int</span><span class="token punctuation">(</span>dmac<span class="token punctuation">,</span>UVM_ALL_ON<span class="token punctuation">)</span>
<span class="token number">32</span>         `<span class="token function">uvm_field_int</span><span class="token punctuation">(</span>smac<span class="token punctuation">,</span>UVM_ALL_ON<span class="token punctuation">)</span>
<span class="token number">33</span>         `<span class="token function">uvm_field_int</span><span class="token punctuation">(</span>ether_type<span class="token punctuation">,</span>UVM_ALL_ON<span class="token punctuation">)</span>
<span class="token number">34</span>         `<span class="token function">uvm_field_array_int</span><span class="token punctuation">(</span>pload<span class="token punctuation">,</span>UVM_ALL_ON<span class="token punctuation">)</span>
<span class="token number">35</span>         `<span class="token function">uvm_field_int</span><span class="token punctuation">(</span>crc<span class="token punctuation">,</span>UVM_ALL_ON<span class="token punctuation">)</span>
<span class="token number">36</span>    `uvm_object_utils_end
<span class="token number">37</span> 
<span class="token number">38</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"my_transaction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">39</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">40</span>    endfunction
<span class="token number">41</span> 
<span class="token number">42</span>    <span class="token comment">/*function void my_print();
43       $display("dmac = %0h", dmac);
44       $display("smac = %0h", smac);
45       $display("ether_type = %0h", ether_type);
46       for(int i = 0; i &lt; pload.size; i++) begin
47          $display("pload[%0d] = %0h", i, pload[i]);
48       end
49       $display("crc = %0h", crc);
50    endfunction
51 
52    function void my_copy(my_transaction tr);
53       if(tr == null)
54          `uvm_fatal("my_transaction", "tr is null!!!!")
55       dmac = tr.dmac;
56       smac = tr.smac;
57       ether_type = tr.ether_type;
58       pload = new[tr.pload.size()];
59       for(int i = 0; i &lt; pload.size(); i++) begin
60          pload[i] = tr.pload[i];
61       end
62       crc = tr.crc;
63    endfunction
64 
65    function bit my_compare(my_transaction tr);
66       bit result;
67       
68       if(tr == null)
69          `uvm_fatal("my_transaction", "tr is null!!!!")
70       result = ((dmac == tr.dmac) &amp;&amp;
71                 (smac == tr.smac) &amp;&amp;
72                 (ether_type == tr.ether_type) &amp;&amp;
73                 (crc == tr.crc));
74       if(pload.size() != tr.pload.size())
75          result = 0;
76       else 
77          for(int i = 0; i &lt; pload.size(); i++) begin
78             if(pload[i] != tr.pload[i])
79                result = 0;
80          end
81       return result; 
82    endfunction*/</span>
<span class="token number">83</span> 
<span class="token number">84</span> endclass

<span class="token number">85</span> `endif
</code></pre> 
<h6><a id="sequence_388"></a>sequence</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> class my_sequence extends uvm_sequence #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">2</span>     my_transaction m_trans<span class="token punctuation">;</span>
 <span class="token number">3</span> 
 <span class="token number">4</span>     function <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token operator">=</span><span class="token string">"my_sequence"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">5</span>         super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">6</span>     endfunction
 <span class="token number">7</span> 
 <span class="token number">8</span>     virtual task <span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">9</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>starting_phase <span class="token operator">!=</span> null<span class="token punctuation">)</span>
<span class="token number">10</span>             starting_phase<span class="token punctuation">.</span><span class="token function">raise_objection</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span> 
<span class="token number">12</span>         <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> begin
<span class="token number">13</span>             `<span class="token function">uvm_do</span><span class="token punctuation">(</span>m_trans<span class="token punctuation">)</span>
<span class="token number">14</span>         end
<span class="token number">15</span>         #<span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token number">16</span> 
<span class="token number">17</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>starting_phase <span class="token operator">!=</span> null<span class="token punctuation">)</span>
<span class="token number">18</span>             starting_phase<span class="token punctuation">.</span><span class="token function">drop_objection</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">19</span>     endtask
<span class="token number">20</span> 
<span class="token number">21</span>     `<span class="token function">uvm_object_utils</span><span class="token punctuation">(</span>my_sequence<span class="token punctuation">)</span>
<span class="token number">22</span> 
<span class="token number">23</span> endclass
</code></pre> 
<h6><a id="sequencer_414"></a>sequencer</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_SEQUENCER__SV
 <span class="token number">2</span> `define MY_SEQUENCER__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> class my_sequencer extends uvm_sequencer #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">5</span>    
 <span class="token number">6</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">7</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">8</span>    endfunction 
 <span class="token number">9</span>    
<span class="token number">10</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_sequencer<span class="token punctuation">)</span>
<span class="token number">11</span> endclass
<span class="token number">12</span> 
<span class="token number">13</span> `endif
</code></pre> 
<h6><a id="driver_430"></a>driver</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_DRIVER__SV
 <span class="token number">2</span> `define MY_DRIVER__SV
 
 <span class="token number">3</span> class my_driver extends uvm_driver#<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">4</span> 
 <span class="token number">5</span>    virtual my_if vif<span class="token punctuation">;</span>
 <span class="token number">6</span> 
 <span class="token number">7</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_driver<span class="token punctuation">)</span>
 <span class="token number">8</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"my_driver"</span><span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">9</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">10</span>    endfunction
<span class="token number">11</span> 
<span class="token number">12</span>    virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">13</span>       super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">14</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>uvm_config_db#<span class="token punctuation">(</span>virtual my_if<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span>this<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"vif"</span><span class="token punctuation">,</span> vif<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">15</span>          `<span class="token function">uvm_fatal</span><span class="token punctuation">(</span><span class="token string">"my_driver"</span><span class="token punctuation">,</span> <span class="token string">"virtual interface must be set for vif!!!"</span><span class="token punctuation">)</span>
<span class="token number">16</span>    endfunction
<span class="token number">17</span> 
<span class="token number">18</span>    <span class="token keyword">extern</span> task <span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">19</span>    <span class="token keyword">extern</span> task <span class="token function">drive_one_pkt</span><span class="token punctuation">(</span>my_transaction tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">20</span> endclass
<span class="token number">21</span> 
<span class="token number">22</span> <span class="token comment">/*task my_driver::main_phase(uvm_phase phase);
23    my_transaction tr;
24    phase.raise_objection(this);
25    vif.data &lt;= 8'b0;
26    vif.valid &lt;= 1'b0;
27    while(!vif.rst_n)
28       @(posedge vif.clk);
29    for(int i = 0; i &lt; 2; i++) begin 
30       req = new("req");
31       assert(req.randomize() with {pload.size == 200;
32                                   dmac == 48'h01_02_03_04_05_06;
33                                   smac == 48'h60_50_40_30_20_10;
34                                  }                        
35             );
36       drive_one_pkt(req);
37    end
38    repeat(5) @(posedge vif.clk);
39    phase.drop_objection(this);
40 endtask*/</span>
<span class="token number">41</span> 
<span class="token number">42</span> task my_driver<span class="token operator">::</span><span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">43</span>     vif<span class="token punctuation">.</span>data <span class="token operator">&lt;=</span> <span class="token number">8</span>'b0<span class="token punctuation">;</span>
<span class="token number">44</span>     vif<span class="token punctuation">.</span>valid <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
<span class="token number">45</span>    
<span class="token number">46</span>     <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>vif<span class="token punctuation">.</span>rst_n<span class="token punctuation">)</span>
<span class="token number">47</span>         @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">48</span>     
<span class="token number">49</span>     <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>begin
<span class="token number">50</span>         seq_item_port<span class="token punctuation">.</span><span class="token function">get_next_item</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">51</span>         <span class="token function">drive_one_pkt</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">52</span>         seq_item_port<span class="token punctuation">.</span><span class="token function">item_done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">53</span>     end
<span class="token number">54</span> endtask
<span class="token number">55</span> 
<span class="token number">56</span> task my_driver<span class="token operator">::</span><span class="token function">drive_one_pkt</span><span class="token punctuation">(</span>my_transaction tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">57</span>       
<span class="token number">58</span>    byte <span class="token keyword">unsigned</span> data_q<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">59</span>    <span class="token keyword">int</span> <span class="token keyword">unsigned</span> data_size<span class="token punctuation">;</span>
<span class="token number">60</span> 
<span class="token number">61</span>    data_size <span class="token operator">=</span> tr<span class="token punctuation">.</span><span class="token function">pack_bytes</span><span class="token punctuation">(</span>data_q<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">;</span><span class="token comment">//fill data_q on the order in uvm_object_utils of transaction</span>
<span class="token number">62</span>    `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_driver"</span><span class="token punctuation">,</span><span class="token string">"begin to drive one pkt"</span><span class="token punctuation">,</span>UVM_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">63</span>    <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">64</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>data_size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>begin
<span class="token number">65</span>         @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">66</span>         vif<span class="token punctuation">.</span>valid <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
<span class="token number">67</span>         vif<span class="token punctuation">.</span>data <span class="token operator">&lt;=</span> data_q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">68</span>    end
<span class="token number">69</span>    @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">70</span>    vif<span class="token punctuation">.</span>valid <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
<span class="token number">71</span>    <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">72</span>    `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_driver"</span><span class="token punctuation">,</span><span class="token string">"end drive one pkt"</span><span class="token punctuation">,</span>UVM_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">73</span> endtask
<span class="token number">74</span> 
<span class="token number">75</span> `endif
</code></pre> 
<h6><a id="monitor_509"></a>monitor</h6> 
<pre><code class="prism language-c">  <span class="token number">1</span> `ifndef MY_MONITOR__SV
  <span class="token number">2</span> `define MY_MONITOR__SV
  <span class="token number">3</span> class my_monitor extends uvm_monitor<span class="token punctuation">;</span>
  <span class="token number">4</span> 
  <span class="token number">5</span>    virtual my_if vif<span class="token punctuation">;</span>
  <span class="token number">6</span> 
  <span class="token number">7</span>    uvm_analysis_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  ap<span class="token punctuation">;</span>
  <span class="token number">8</span>    
  <span class="token number">9</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_monitor<span class="token punctuation">)</span>
 <span class="token number">10</span>    function <span class="token function">new</span><span class="token punctuation">(</span>string name <span class="token operator">=</span> <span class="token string">"my_monitor"</span><span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">11</span>       super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">12</span>    endfunction
 <span class="token number">13</span> 
 <span class="token number">14</span>    virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">15</span>       super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">16</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>uvm_config_db#<span class="token punctuation">(</span>virtual my_if<span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span>this<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"vif"</span><span class="token punctuation">,</span> vif<span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token number">17</span>          `<span class="token function">uvm_fatal</span><span class="token punctuation">(</span><span class="token string">"my_monitor"</span><span class="token punctuation">,</span> <span class="token string">"virtual interface must be set for vif!!!"</span><span class="token punctuation">)</span>
 <span class="token number">18</span>       ap <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"ap"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">19</span>    endfunction
 <span class="token number">20</span> 
 <span class="token number">21</span>    <span class="token keyword">extern</span> task <span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">22</span>    <span class="token keyword">extern</span> task <span class="token function">collect_one_pkt</span><span class="token punctuation">(</span>my_transaction tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">23</span> endclass
 <span class="token number">24</span> 
 <span class="token number">25</span> task my_monitor<span class="token operator">::</span><span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">26</span>    my_transaction tr<span class="token punctuation">;</span>
 <span class="token number">27</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> begin
 <span class="token number">28</span>       tr <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"tr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">29</span>       <span class="token function">collect_one_pkt</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">30</span>       ap<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">31</span>    end
 <span class="token number">32</span> endtask
 <span class="token number">33</span> 
 <span class="token number">34</span> <span class="token comment">/*task my_monitor::collect_one_pkt(my_transaction tr);
 35    bit[7:0] data_q[$]; 
 36    int psize;
 37    while(1) begin
 38       @(posedge vif.clk);
 39       if(vif.valid) break;
 40    end
 41 
 42    `uvm_info("my_monitor", "begin to collect one pkt", UVM_LOW);
 43    while(vif.valid) begin
 44       data_q.push_back(vif.data);
 45       @(posedge vif.clk);
 46    end
 47    //pop dmac
 48    for(int i = 0; i &lt; 6; i++) begin
 49       tr.dmac = {tr.dmac[39:0], data_q.pop_front()};
 50    end
 51    //pop smac
 52    for(int i = 0; i &lt; 6; i++) begin
 53       tr.smac = {tr.smac[39:0], data_q.pop_front()};
 54    end
 55    //pop ether_type
 56    for(int i = 0; i &lt; 2; i++) begin
 57       tr.ether_type = {tr.ether_type[7:0], data_q.pop_front()};
 58    end
 59 
 60    psize = data_q.size() - 4;
 61    tr.pload = new[psize];
 62    //pop payload
 63    for(int i = 0; i &lt; psize; i++) begin
 64       tr.pload[i] = data_q.pop_front();
 65    end
 66    //pop crc
 67    for(int i = 0; i &lt; 4; i++) begin
 68       tr.crc = {tr.crc[23:0], data_q.pop_front()};
 69    end
 70    `uvm_info("my_monitor", "end collect one pkt", UVM_LOW);
 71 endtask*/</span>
 <span class="token number">72</span> 
 <span class="token number">73</span> task my_monitor<span class="token operator">::</span><span class="token function">collect_one_pkt</span><span class="token punctuation">(</span>my_transaction tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">74</span>     byte <span class="token keyword">unsigned</span> data_q<span class="token punctuation">[</span>$<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token number">75</span>     byte <span class="token keyword">unsigned</span> data_array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token number">76</span> 
 <span class="token number">77</span>     logic <span class="token punctuation">[</span><span class="token number">8</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>
 <span class="token number">78</span>     logic valid<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token number">79</span>     <span class="token keyword">int</span> data_size<span class="token punctuation">;</span>
 <span class="token number">80</span> 
 <span class="token number">81</span>     <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> begin
 <span class="token number">82</span>       @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">83</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>vif<span class="token punctuation">.</span>valid<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
 <span class="token number">84</span>     end
 <span class="token number">85</span> 
 <span class="token number">86</span> 
 <span class="token number">87</span>     `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_monitor"</span><span class="token punctuation">,</span><span class="token string">"begin to collect one pkt"</span><span class="token punctuation">,</span>UVM_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">88</span>     <span class="token keyword">while</span><span class="token punctuation">(</span>vif<span class="token punctuation">.</span>valid<span class="token punctuation">)</span>begin
 <span class="token number">89</span>         data_q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>vif<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">90</span>         @<span class="token punctuation">(</span>posedge vif<span class="token punctuation">.</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">91</span>     end
 <span class="token number">92</span> 
 <span class="token number">93</span>     data_size <span class="token operator">=</span> data_q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token number">94</span>     data_array <span class="token operator">=</span> new<span class="token punctuation">[</span>data_size<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token number">95</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>data_size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>begin
 <span class="token number">96</span>         data_array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data_q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token number">97</span>     end
 <span class="token number">98</span> 
 <span class="token number">99</span>     tr<span class="token punctuation">.</span>pload <span class="token operator">=</span> new<span class="token punctuation">[</span>data_size<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">100</span>     data_size <span class="token operator">=</span> tr<span class="token punctuation">.</span><span class="token function">unpack_bytes</span><span class="token punctuation">(</span>data_array<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">;</span>
<span class="token number">101</span>     `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_monitor"</span><span class="token punctuation">,</span><span class="token string">"end collect one pkt"</span><span class="token punctuation">,</span>UVM_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">102</span> endtask
<span class="token number">103</span> 
<span class="token number">104</span> `endif
</code></pre> 
<h6><a id="reference_model_616"></a>reference_model</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_MODEL__SV
 <span class="token number">2</span> `define MY_MODEL__SV
 <span class="token number">3</span> 
 <span class="token number">4</span> class my_model extends uvm_component<span class="token punctuation">;</span>
 <span class="token number">5</span>    
 <span class="token number">6</span>    uvm_blocking_get_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  port<span class="token punctuation">;</span>
 <span class="token number">7</span>    uvm_analysis_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  ap<span class="token punctuation">;</span>
 <span class="token number">8</span> 
 <span class="token number">9</span>    <span class="token keyword">extern</span> function <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">10</span>    <span class="token keyword">extern</span> function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span>    <span class="token keyword">extern</span> virtual  task <span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">12</span> 
<span class="token number">13</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_model<span class="token punctuation">)</span>
<span class="token number">14</span> endclass 
<span class="token number">15</span> 
<span class="token number">16</span> function my_model<span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">17</span>    super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">18</span> endfunction 
<span class="token number">19</span> 
<span class="token number">20</span> function <span class="token keyword">void</span> my_model<span class="token operator">::</span><span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">21</span>    super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">22</span>    port <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"port"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">23</span>    ap <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"ap"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">24</span> endfunction
<span class="token number">25</span> 
<span class="token number">26</span> task my_model<span class="token operator">::</span><span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">27</span>    my_transaction tr<span class="token punctuation">;</span>
<span class="token number">28</span>    my_transaction new_tr<span class="token punctuation">;</span>
<span class="token number">29</span>    super<span class="token punctuation">.</span><span class="token function">main_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">30</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> begin
<span class="token number">31</span>       port<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">32</span>       new_tr <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"new_tr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">33</span>       <span class="token comment">//new_tr.my_copy(tr);</span>
<span class="token number">34</span>       new_tr<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">35</span>       `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_model"</span><span class="token punctuation">,</span> <span class="token string">"get one transaction, copy and print it:"</span><span class="token punctuation">,</span> UVM_LOW<span class="token punctuation">)</span>
<span class="token number">36</span>       <span class="token comment">//new_tr.my_print();</span>
<span class="token number">37</span>       new_tr<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">38</span>       ap<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>new_tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">39</span>    end
<span class="token number">40</span> endtask
<span class="token number">41</span>
<span class="token number">42</span> `endif
</code></pre> 
<h6><a id="scoreboard_661"></a>scoreboard</h6> 
<pre><code class="prism language-c"> <span class="token number">1</span> `ifndef MY_SCOREBOARD__SV
 <span class="token number">2</span> `define MY_SCOREBOARD__SV
 <span class="token number">3</span> class my_scoreboard extends uvm_scoreboard<span class="token punctuation">;</span>
 <span class="token number">4</span>    my_transaction  expect_queue<span class="token punctuation">[</span>$<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token number">5</span>    uvm_blocking_get_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  exp_port<span class="token punctuation">;</span>
 <span class="token number">6</span>    uvm_blocking_get_port #<span class="token punctuation">(</span>my_transaction<span class="token punctuation">)</span>  act_port<span class="token punctuation">;</span>
 <span class="token number">7</span>    `<span class="token function">uvm_component_utils</span><span class="token punctuation">(</span>my_scoreboard<span class="token punctuation">)</span>
 <span class="token number">8</span> 
 <span class="token number">9</span>    <span class="token keyword">extern</span> function <span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">10</span>    <span class="token keyword">extern</span> virtual function <span class="token keyword">void</span> <span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">11</span>    <span class="token keyword">extern</span> virtual task <span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">12</span> endclass 
<span class="token number">13</span> 
<span class="token number">14</span> function my_scoreboard<span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> uvm_component parent <span class="token operator">=</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">15</span>    super<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">16</span> endfunction 
<span class="token number">17</span> 
<span class="token number">18</span> function <span class="token keyword">void</span> my_scoreboard<span class="token operator">::</span><span class="token function">build_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">19</span>    super<span class="token punctuation">.</span><span class="token function">build_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">20</span>    exp_port <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"exp_port"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">21</span>    act_port <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"act_port"</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">22</span> endfunction 
<span class="token number">23</span> 
<span class="token number">24</span> task my_scoreboard<span class="token operator">::</span><span class="token function">main_phase</span><span class="token punctuation">(</span>uvm_phase phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">25</span>    my_transaction  get_expect<span class="token punctuation">,</span>  get_actual<span class="token punctuation">,</span> tmp_tran<span class="token punctuation">;</span>
<span class="token number">26</span>    bit result<span class="token punctuation">;</span>
<span class="token number">27</span>  
<span class="token number">28</span>    super<span class="token punctuation">.</span><span class="token function">main_phase</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">29</span>    fork 
<span class="token number">30</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> begin
<span class="token number">31</span>          exp_port<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>get_expect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">32</span>          expect_queue<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>get_expect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">33</span>       end
<span class="token number">34</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> begin
<span class="token number">35</span>          act_port<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>get_actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">36</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>expect_queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> begin
<span class="token number">37</span>             tmp_tran <span class="token operator">=</span> expect_queue<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">38</span>             <span class="token comment">//result = get_actual.my_compare(tmp_tran);</span>
<span class="token number">39</span>             result <span class="token operator">=</span> get_actual<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>tmp_tran<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">40</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> begin 
<span class="token number">41</span>                `<span class="token function">uvm_info</span><span class="token punctuation">(</span><span class="token string">"my_scoreboard"</span><span class="token punctuation">,</span> <span class="token string">"Compare SUCCESSFULLY"</span><span class="token punctuation">,</span> UVM_LOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">42</span>             end
<span class="token number">43</span>             <span class="token keyword">else</span> begin
<span class="token number">44</span>                `<span class="token function">uvm_error</span><span class="token punctuation">(</span><span class="token string">"my_scoreboard"</span><span class="token punctuation">,</span> <span class="token string">"Compare FAILED"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">45</span>                $<span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"the expect pkt is"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">46</span>                <span class="token comment">//tmp_tran.my_print();</span>
<span class="token number">47</span>                tmp_tran<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">48</span>                $<span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"the actual pkt is"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">49</span>                <span class="token comment">//get_actual.my_print();</span>
<span class="token number">50</span>                get_actual<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">51</span>             end
<span class="token number">52</span>          end
<span class="token number">53</span>          <span class="token keyword">else</span> begin
<span class="token number">54</span>             `<span class="token function">uvm_error</span><span class="token punctuation">(</span><span class="token string">"my_scoreboard"</span><span class="token punctuation">,</span> <span class="token string">"Received from DUT, while Expect Queue is empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">55</span>             $<span class="token function">display</span><span class="token punctuation">(</span><span class="token string">"the unexpected pkt is"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">56</span>             <span class="token comment">//get_actual.my_print();</span>
<span class="token number">57</span>             get_actual<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">58</span>          end 
<span class="token number">59</span>       end
<span class="token number">60</span>    join
<span class="token number">61</span> endtask
<span class="token number">62</span>
<span class="token number">63</span> `endif
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a6c9828bd4714109a7a7fdab4d0c0ccb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言 pivot_root的Invalid argument错误解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ab903bc20141f389b5adaf93f431cee2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Strapi日志功能：保存日志为文件到本地</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>