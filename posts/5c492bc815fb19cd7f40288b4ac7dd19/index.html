<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>bundle fusion代码精讲 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="bundle fusion代码精讲" />
<meta property="og:description" content="引言
慕尼黑工大的bundlefusion开发至少超过数年时间，至今在RGBD类型的开源项目中依然是性能较佳的存在
原版在Windows环境中完成，且不易移植到其他框架中，东北大学的关老师做了Linux环境的移植，还在进行中
笔者在slam领域历时不久，且欣喜此份代码的高完成度和实时性，决定对各个模块逐一注释修改，希望将来有所启迪
1，FriedLiver/Source/FriedLiver.cpp
工程编译的main函数在此其中zParametersDefault.txt zParametersBundlingDefault.txt被定义为抽取的配置文件
根据代码可以./FriedLiver 或者./FriedLiver zParametersDefault.txt zParametersBundlingDefault.txt执行
这里调用的ParameterFile 格式的类专门读取储存配置文件 和增删改查
parameterFile.h中ml空间中用一个类ParameterFile 定义了对文件读取和使用方法
GlobalAppState.h中有个
private:
bool m_bIsInitialized;
ParameterFile m_ParameterFile; 此次可以储存定义过得的数据类型
//ID3D11Query* m_pQuery;
回到FriedLiver.cpp main函数中：
//Read the global app state
ParameterFile parameterFileGlobalApp(fileNameDescGlobalApp);// 初始化默认配置
std::ofstream out;
GlobalAppState::getInstance().readMembers(parameterFileGlobalApp); //读入配置
//Read the global camera tracking state
ParameterFile parameterFileGlobalBundling(fileNameDescGlobalBundling);// 初始化融合配置
GlobalBundlingState::getInstance().readMembers(parameterFileGlobalBundling); //读入配置
//Gpu方法的初始化
DualGPU&amp; dualGPU = DualGPU::get(); //needs to be called to initialize devices 这用了引用的小方法，可以节省资源
dualGPU.setDevice(DualGPU::DEVICE_RECONSTRUCTION); //main gpu 这个GPU是固定的，很奇怪，为什么不适用cuda多GPU方法
//线程初始化
ConditionManager::init();" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5c492bc815fb19cd7f40288b4ac7dd19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-06T19:28:22+08:00" />
<meta property="article:modified_time" content="2020-11-06T19:28:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">bundle fusion代码精讲</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>引言</p> 
<p>慕尼黑工大的bundlefusion开发至少超过数年时间，至今在RGBD类型的开源项目中依然是性能较佳的存在</p> 
<p>原版在Windows环境中完成，且不易移植到其他框架中，东北大学的关老师做了Linux环境的移植，还在进行中</p> 
<p>笔者在slam领域历时不久，且欣喜此份代码的高完成度和实时性，决定对各个模块逐一注释修改，希望将来有所启迪</p> 
<p>1，FriedLiver/Source/FriedLiver.cpp</p> 
<p>工程编译的main函数在此其中zParametersDefault.txt  zParametersBundlingDefault.txt被定义为抽取的配置文件</p> 
<p>根据代码可以./FriedLiver  或者./FriedLiver  zParametersDefault.txt  zParametersBundlingDefault.txt执行</p> 
<p>这里调用的ParameterFile 格式的类专门读取储存配置文件 和增删改查</p> 
<p>parameterFile.h中ml空间中用一个类ParameterFile 定义了对文件读取和使用方法</p> 
<p>GlobalAppState.h中有个</p> 
<p>private:<br>     bool            m_bIsInitialized;<br>     ParameterFile    m_ParameterFile;  此次可以储存定义过得的数据类型<br>     //ID3D11Query*    m_pQuery;</p> 
<p>回到FriedLiver.cpp   main函数中：</p> 
<p>        //Read the global app state<br>         ParameterFile parameterFileGlobalApp(fileNameDescGlobalApp);// 初始化默认配置<br>         std::ofstream out;</p> 
<p>        GlobalAppState::getInstance().readMembers(parameterFileGlobalApp);   //读入配置</p> 
<p>        //Read the global camera tracking state<br>         ParameterFile parameterFileGlobalBundling(fileNameDescGlobalBundling);// 初始化融合配置</p> 
<p>        GlobalBundlingState::getInstance().readMembers(parameterFileGlobalBundling); //读入配置</p> 
<p>//Gpu方法的初始化</p> 
<p>DualGPU&amp; dualGPU = DualGPU::get();    //needs to be called to initialize devices  这用了引用的小方法，可以节省资源</p> 
<p> dualGPU.setDevice(DualGPU::DEVICE_RECONSTRUCTION);    //main gpu  这个GPU是固定的，很奇怪，为什么不适用cuda多GPU方法</p> 
<p>//线程初始化</p> 
<p>ConditionManager::init();</p> 
<p>g_RGBDSensor = getRGBDSensor();</p> 
<p>        if (g_RGBDSensor == NULL) throw MLIB_EXCEPTION("No RGBD sensor specified");<br>         g_RGBDSensor-&gt;createFirstConnected();//  这个需要你自己写createFirstConnected的实现<br>            g_imageManager = new CUDAImageManager(GlobalAppState::get().s_integrationWidth, GlobalAppState::get().s_integrationHeight, GlobalBundlingState::get().s_widthSIFT, GlobalBundlingState::get().s_heightSIFT, g_RGBDSensor, false); 里面包含了 siftGPU的实现方法</p> 
<p> </p> 
<p>#ifdef RUN_MULTITHREADED<br>         std::thread bundlingThread(bundlingThreadFunc); //又指定了GPU  表示重点<br>         //waiting until bundler is initialized<br>         while (!g_bundler)    sleep(0);<br>                  //std::cout &lt;&lt; "g_bundler" &lt;&lt; std::endl;<br> #else<br>         g_bundler = new OnlineBundler(g_RGBDSensor, g_imageManager);<br>                <br> #endif</p> 
<p> </p> 
<p>        //start depthSensing render loop<br>         startDepthSensing(g_bundler, getRGBDSensor(), g_imageManager); //表示重点</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2f53c29375a48ec779913cd59556752/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python安装教程（新手）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/978081195d3e60214fb313a9f6c00726/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">7-4 jmu-Java-01入门-取数字浮点数 (2分) JAVA</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>