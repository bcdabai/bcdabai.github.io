<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>音乐人声分离工具：极简的人声和背景音乐分离工具 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="音乐人声分离工具：极简的人声和背景音乐分离工具" />
<meta property="og:description" content="这是一个极简的人声和背景音乐分离工具，本地化网页操作，无需连接外网，使用 2stems/4stems/5stems 模型。
将一首歌曲或者含有背景音乐的音视频文件，拖拽到本地网页中，即可将其中的人声和音乐声分离为单独的音频wav文件，可选单独分离“钢琴声”、“贝斯声”、“鼓声”等
自动调用本地浏览器打开本地网页，模型已内置，无需连接外网下载。
支持视频(mp4/mov/mkv/avi/mpeg)和音频(mp3/wav)格式
只需点两下鼠标，一选择音视频文件，二启动处理。
预编译Win版使用方法/Linux和Mac源码部署 点击此处打开Releases页面下载预编译文件；
下载后解压到某处，比如 E:/vocal-separate；
双击 start.exe ，等待自动打开浏览器窗口即可；
点击页面中的上传区域，在弹窗中找到想分离的音视频文件，或直接拖拽音频文件到上传区域，然后点击“立即分离”，稍等片刻，底部会显示每个分离文件以及播放控件，点击播放；
如果机器拥有英伟达GPU，并正确配置了CUDA环境，将自动使用CUDA加速。
源码部署(Linux/Mac/Window) 要求 python 3.9-&gt;3.11
创建空目录，比如 E:/vocal-separate, 在这个目录下打开 cmd 窗口，方法是地址栏中输入 cmd, 然后回车。
使用git拉取源码到当前目录 git clone git@github.com:jianchang512/vocal-separate.git .
创建虚拟环境 python -m venv venv
激活环境，win下命令 %cd%/venv/scripts/activate，linux和Mac下命令 source ./venv/bin/activate
安装依赖: pip install -r requirements.txt
win下解压 ffmpeg.7z，将其中的ffmpeg.exe和ffprobe.exe放在项目目录下, linux和mac 到 ffmpeg官网下载对应版本ffmpeg，解压其中的ffmpeg和ffprobe二进制程序放到项目根目录下
下载模型压缩包，在项目根目录下的 pretrained_models 文件夹中解压，解压后，pretrained_models中将有3个文件夹，分别是2stems/3stems/5stems
执行 python start.py ，等待自动打开本地浏览器窗口。
API 接口地址: http://127.0.0.1:9999/api
请求方法: POST
请求参数:
file: 要分离的音视频文件 model: 模型名称 2stems,4stems,5stems 返回响应: json code:int, 0 处理成功完成，&gt;0 出错" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/902a684c29e7ed04a378be7c37d51bf2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T10:51:27+08:00" />
<meta property="article:modified_time" content="2024-01-19T10:51:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">音乐人声分离工具：极简的人声和背景音乐分离工具</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这是一个极简的人声和背景音乐分离工具，本地化网页操作，无需连接外网，使用 2stems/4stems/5stems 模型。</p> 
<blockquote> 
 <p>将一首歌曲或者含有背景音乐的音视频文件，拖拽到本地网页中，即可将其中的人声和音乐声分离为单独的音频wav文件，可选单独分离“钢琴声”、“贝斯声”、“鼓声”等</p> 
 <p>自动调用本地浏览器打开本地网页，模型已内置，无需连接外网下载。</p> 
 <p>支持视频(mp4/mov/mkv/avi/mpeg)和音频(mp3/wav)格式</p> 
 <p>只需点两下鼠标，一选择音视频文件，二启动处理。</p> 
</blockquote> 
<h2 style="text-align:center;">预编译Win版使用方法/Linux和Mac源码部署</h2> 
<ol><li> <p>点击此处打开Releases页面下载预编译文件；</p> </li><li> <p>下载后解压到某处，比如 E:/vocal-separate；</p> </li><li> <p>双击 start.exe ，等待自动打开浏览器窗口即可；</p> </li><li> <p>点击页面中的上传区域，在弹窗中找到想分离的音视频文件，或直接拖拽音频文件到上传区域，然后点击“立即分离”，稍等片刻，底部会显示每个分离文件以及播放控件，点击播放；</p> </li><li> <p>如果机器拥有英伟达GPU，并正确配置了CUDA环境，将自动使用CUDA加速。</p> </li></ol> 
<h2 style="text-align:center;">源码部署(Linux/Mac/Window)</h2> 
<ol><li> <p>要求 python 3.9-&gt;3.11</p> </li><li> <p>创建空目录，比如 E:/vocal-separate, 在这个目录下打开 cmd 窗口，方法是地址栏中输入 cmd, 然后回车。</p> </li><li> <p>使用git拉取源码到当前目录 git clone git@github.com:jianchang512/vocal-separate.git .</p> </li><li> <p>创建虚拟环境 python -m venv venv</p> </li><li> <p>激活环境，win下命令 %cd%/venv/scripts/activate，linux和Mac下命令 source ./venv/bin/activate</p> </li><li> <p>安装依赖: pip install -r requirements.txt</p> </li><li> <p>win下解压 ffmpeg.7z，将其中的ffmpeg.exe和ffprobe.exe放在项目目录下, linux和mac 到 ffmpeg官网下载对应版本ffmpeg，解压其中的ffmpeg和ffprobe二进制程序放到项目根目录下</p> </li><li> <p>下载模型压缩包，在项目根目录下的 pretrained_models 文件夹中解压，解压后，pretrained_models中将有3个文件夹，分别是2stems/3stems/5stems</p> </li><li> <p>执行 python  start.py ，等待自动打开本地浏览器窗口。</p> </li></ol> 
<h2 style="background-color:transparent;text-align:center;">API </h2> 
<p>接口地址: http://127.0.0.1:9999/api</p> 
<p>请求方法: POST</p> 
<p>请求参数:</p> 
<pre><code class="hljs">file: 要分离的音视频文件

model: 模型名称 2stems,4stems,5stems</code></pre> 
<p>返回响应: json code:int, 0 处理成功完成，&gt;0 出错</p> 
<pre><code class="hljs">msg:str,  出错时填充错误信息

data: List[str], 每个分离后的wav url地址，例如 ['http://127.0.0.1:9999/static/files/2/accompaniment.wav']

status_text: dict[str,str], 每个分离后wav文件的包含信息,{'accompaniment': '伴奏', 'bass': '低音', 'drums': '鼓', 'other': '其他', 'piano': '琴', 'vocals': '人声'}</code></pre> 
<pre><code class="hljs">import requests
# 请求地址
url = "http://127.0.0.1:9999/api"
files = {"file": open("C:\\Users\\c1\\Videos\\2.wav", "rb")}
data={"model":"2stems"}
response = requests.request("POST", url, timeout=600, data=data,files=files)
print(response.json())

{'code': 0, 'data': ['http://127.0.0.1:9999/static/files/2/accompaniment.wav', 'http://127.0.0.1:9999/static/files/2/vocals.wav'], 'msg': '分离成功
', 'status_text': {'accompaniment': '伴奏', 'bass': '低音', 'drums': '鼓', 'other': '其他', 'piano': '琴', 'vocals': '人声'}}</code></pre> 
<h2 style="text-align:center;">CUDA 加速支持</h2> 
<p>安装CUDA工具 详细安装方法</p> 
<p>如果你的电脑拥有 Nvidia 显卡，先升级显卡驱动到最新，然后去安装对应的 CUDA Toolkit 11.8 和 cudnn for CUDA11.X。</p> 
<p>安装完成成，按Win + R,输入 cmd然后回车，在弹出的窗口中输入nvcc --version,确认有版本信息显示，类似该图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="102" src="https://images2.imgbox.com/d4/38/VOWm0rBV_o.png" width="585"></p> 
<p>然后继续输入nvidia-smi,确认有输出信息，并且能看到cuda版本号，类似该图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="509" src="https://images2.imgbox.com/61/61/aQjRhlt1_o.png" width="745"></p> 
<h2 style="text-align:center;">注意事项</h2> 
<ol><li> <p>中文音乐或中式乐器，建议选择使用2stems模型，其他模型对“钢琴、贝斯、鼓”可单独分离出文件；</p> </li><li> <p>如果电脑没有NVIDIA显卡或未配置cuda环境，不要选择 4stems和5stems模型，尤其是处理较长时长的音频时, 否则很可能耗尽内存。</p> </li></ol> 
<h2 style="text-align:center;">项目链接</h2> 
<blockquote> 
 <p>https://github.com/jianchang512/vocal-separate</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8032d90d16dcf124d82852c7dca9716e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">背包问题（贪心）&amp; 二维01背包问题 Java</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/024bc64c2613ac19e9b712bfb79cecc2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">攻防_.git泄露_GitHack使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>