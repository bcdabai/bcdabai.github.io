<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Httpd&#43;tomcat搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Httpd&#43;tomcat搭建" />
<meta property="og:description" content="https://www.aliyun.com/jiaocheng/186362.html
https://blog.csdn.net/kesixin/article/details/77779021
在这个网页下找对应的mod_jk下载包配合上边网址进行配置
https://archive.apache.org/dist/tomcat/tomcat-connectors/jk/
配置完之后
最后别忘了setenforce 0 和service firewalld stop 后再重启
第一步：
先是 安装apache系列
yum -y install httpd.x86_64 //&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;
yum -y install httpd-devel.x86_64 //&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;
然后看我的另一个博客进行简单的配置https://mp.csdn.net/postedit/80009072
第二步 安装对应的jdk
yum -y install java-1.8.0_171-openjdk* //&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;
安装完之后用下边的命令检测是否安装完成
输入java -version
之后显示
openjdk version “1.8.0_171”
OpenJDK Runtime Environment (build 1.8.0_171-b10)
OpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)
表明安装成功
第三步安装 apache-tomcat-9.0.8.tar.gz 到 /opt 下边
自己找怎么下载(wget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.8/bin/apache-tomcat-9.0.8.tar.gz)
之后再解压到 /opt 下边
tar -xzvf apache-tomcat-9.0.8.tar.gz
mv apache-tomcat-9.0.8 tomcat" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f86fb65da02a15587e88cb2e8c35c85c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-03T10:27:06+08:00" />
<meta property="article:modified_time" content="2021-06-03T10:27:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Httpd&#43;tomcat搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>https://www.aliyun.com/jiaocheng/186362.html<br> https://blog.csdn.net/kesixin/article/details/77779021<br> 在这个网页下找对应的mod_jk下载包配合上边网址进行配置<br> https://archive.apache.org/dist/tomcat/tomcat-connectors/jk/<br> 配置完之后<br> 最后别忘了setenforce 0 和service firewalld stop 后再重启</p> 
<p>第一步：<br> 先是 安装apache系列<br> yum -y install httpd.x86_64 //++++++++++++++++++++++++++<br> yum -y install httpd-devel.x86_64 //+++++++++++++++++++++++++</p> 
<p>然后看我的另一个博客进行简单的配置https://mp.csdn.net/postedit/80009072</p> 
<p>第二步 安装对应的jdk<br> yum -y install java-1.8.0_171-openjdk* //++++++++++++++++++++++<br> 安装完之后用下边的命令检测是否安装完成<br> 输入java -version<br> 之后显示<br> openjdk version “1.8.0_171”<br> OpenJDK Runtime Environment (build 1.8.0_171-b10)<br> OpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)<br> 表明安装成功</p> 
<p>第三步安装 apache-tomcat-9.0.8.tar.gz 到 /opt 下边<br> 自己找怎么下载(wget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.8/bin/apache-tomcat-9.0.8.tar.gz)<br> 之后再解压到 /opt 下边<br> tar -xzvf apache-tomcat-9.0.8.tar.gz<br> mv apache-tomcat-9.0.8 tomcat<br> 第四步：<br> 安装mod_jk (这个随着tomcat不同版本也不同本文中的mod_jk为tomcat-connectors-1.2.42-src.tar.gz)<br> 在下边这个网址上下载<br> wget https://archive.apache.org/dist/tomcat/tomcat-connectors/jk/tomcat-connectors-1.2.42-src.tar.gz</p> 
<p>之后再 解压<br> tar -xzvf tomcat-connectors-1.2.42-src.tar.gz</p> 
<p>接着进入native文件夹<br> # cd /opt/tomcat-connectors-1.2.42-src/native</p> 
<p># ./configure --with-apxs=/usr/bin/apxs(此处apxs地址可能不一样，可用命令" whereis apxs "来查看)<br> 1<br> 2<br> # make<br> make install</p> 
<p>cd apache-2.0<br> cp mod_jk.so /etc/httpd/modules/mod_jk.so</p> 
<p>https://www.aliyun.com/jiaocheng/186362.html<br> 接着一个可选项｛<br> 1） 检查 apxs 有没有安装。” # whereis apxs ”<br> （2） 如果没有的话，先安装apxs<br> # cd /etc/<br> # vi yum.conf<br> // 如果有关于 apache or httpd 的 “exclude”这样一行，把它注释掉；如果没有，就直接退出就行<br> // 保存并退出<br> # yum install apr-util-devel<br> # yum install httpd-devel<br> # whereis apxs<br> // 做完这几步以后，你就应该有 “/usr/bin/apxs” 这个文件了。<br> ｝</p> 
<p>第五步(最重要)：整合Apache和Tomcat</p> 
<p>进入apache安装路径下的conf文件夹，创建两个文件，mod_jk.conf以及workers.properties。</p> 
<p>mod_jk.conf 内容如下：</p> 
<p> </p> 
<pre><code>#加载 mod_jk.so 文件，放置在最上
LoadModule jk_module /etc/httpd/modules/mod_jk.so
#加载 tomcat 参数配置文件
JkWorkersFile /etc/httpd/conf/workers.properties
#日志保存文件
JkLogFile /var/log/httpd/mod_jk.log
#日志等级
JkLogLevel info
JkLogStampFormat "[%a %b %d %H:%M:%S %Y]"
JkOptions +ForwardKeySize +ForwardURICompat -ForwardDirectories
#JkRequestLogFormat "%w %V %T"
#######请求拦截， controller负载均衡控制器名称
JkMount /servlet/* controller
JkMount /*.jsp controller
JkMount /*.do controller
JkMount /* controller
############## end #######################
</code></pre> 
<p><br> 接着：</p> 
<p>其中，前两个参数（JkWorkerFile和JkLogFile(cd /var/log/httpd/ 之后 touch mod_jk.log)）具体的值会因为apache安装路径的不同而不同，此处需写入自己的apache服务器的路径。<br> 文件末尾的几行JkMount意思是将符合条件的文件交给Tomcat处理。中间则是一些常规参数的设置。<br> workers.properties内容如下</p> 
<p>#server<br> worker.list = controller</p> 
<p>#========tomcat========<br> worker.tomcat.port=8009 #端口号与tomcat一致<br> worker.tomcat.host=localhost<br> worker.tomcat.type=ajp13<br> worker.tomcat.lbfactor = 1</p> 
<p>#========tomcat2========<br> #worker.tomcat2.port=9009 #端口号与tomcat一致<br> #worker.tomcat2.host=localhost<br> #worker.tomcat2.type=ajp13<br> #worker.tomcat2.lbfactor = 1</p> 
<p>#========controller=负载均衡控制器名称=======<br> worker.controller.type=lb<br> worker.controller.balanced_workers=tomcat #多个tomcat以”,”隔开<br> worker.controller.sticky_session=false<br> worker.controller.sticky_session_force=1<br> #worker.controller.sticky_session=1</p> 
<p>第六步：<br> 在/etc/httpd/conf/httpd.conf 最后边加上如下表示把这个文件载入<br> Include /etc/httpd/conf/mod_jk.conf<br> 开启8080端口</p> 
<p>firewall-cmd –permanent –add-port=8080/tcp<br> firewall-cmd –reload</p> 
<p>第七步：<br> 保存之后重启Apache和Tomcat。<br> service httpd restart<br> 对于tomcat的启动要进入到tomcat文件夹下边<br> cd conf<br> vi server.xml</p> 
<p>&lt;Engine name="Catalina" defaultHost="localhost" jvmRoute="controller"&gt;<br> 1<br> 解开tomcat中对于8009端口的枷锁</p> 
<p>&lt;Connector port="8009" protocol="AJP/1.3"redirectPort="8443" /&gt;<br> 1<br> cd /opt/tomcat/bin<br> sh startup.sh<br> 如果是重启｛sh startup.sh sh startdown.sh｝<br> 如果出现Apache启动报错，那可能是mod_jk.so文件的版本跟Apache版本不符合，需要重新下载，编译。</p> 
<p>访问页面的时候用http://192.168.200.2:8080<br> 因为apache的是80 duankou<br> tomcat的是8080端口</p> 
<p>打开默认网页之后是 /opt/tomcat/webapps/Root 下的index.jsp<br> 可以在这个目录下创建对应的测试网页<br> eg： vi test.jsp</p> 
<p>&lt;html&gt;<br> &lt;body&gt;<br>     &lt;center&gt;Now time is: &lt;%=new java.util.Date()%&gt;&lt;/center&gt;<br> &lt;/body&gt;<br> &lt;/html&gt;</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/08521350adad742701e072e7e5dedf31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker 容器的生命周期</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/59c105dc9154635a1e0db99e0cb14589/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HDFS架构图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>