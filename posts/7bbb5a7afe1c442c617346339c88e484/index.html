<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue项目 --- JSJDK微信分享朋友和朋友圈功能 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue项目 --- JSJDK微信分享朋友和朋友圈功能" />
<meta property="og:description" content="1. 在Vue项目index.html引入官方js https://res.wx.qq.com/open/js/jweixin-1.4.0.js 2. src下新建文件夹 weixin/wxjdk.js，代码如下 import axios from &#39;axios&#39;
export default {
wxShowMenu: function() {
let url = location.href; //获取当前页面地址
axios.get(&#39;hyr/user/customApply/getJsapiTicket?url=&#39;&#43;url).then(function(res) {
var getMsg = res.data.resultBody;
console.log(getMsg.appid,getMsg.timestamp,getMsg.nonceStr,getMsg.signature)
wx.config({
debug: false, //生产环境需要关闭debug模式
appId: getMsg.appid, //appId通过微信服务号后台查看
timestamp: getMsg.timestamp, //生成签名的时间戳
nonceStr: getMsg.nonceStr, //生成签名的随机字符串
signature: getMsg.signature, //签名
jsApiList: [ //需要调用的JS接口列表
&#39;onMenuShareTimeline&#39;, //分享给好友
&#39;onMenuShareAppMessage&#39;, //分享到朋友圈
]
});
wx.ready(function() {
//分享到朋友圈
wx.onMenuShareTimeline({
title: &#34;&#34;, // 分享标题
desc: &#34;&#34;, //分享描述
link:url,
imgUrl: &#39;&#39; , // 分享图标" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7bbb5a7afe1c442c617346339c88e484/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-09T16:12:12+08:00" />
<meta property="article:modified_time" content="2021-09-09T16:12:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue项目 --- JSJDK微信分享朋友和朋友圈功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. 在Vue项目index.html引入官方js</h2> 
<p>https://res.wx.qq.com/open/js/jweixin-1.4.0.js </p> 
<h2>2. src下新建文件夹 weixin/wxjdk.js，代码如下</h2> 
<p>import axios from 'axios'</p> 
<p>export default {<!-- --></p> 
<p>    wxShowMenu: function() {<!-- --></p> 
<p>        let url = location.href; //获取当前页面地址</p> 
<p>        axios.get('hyr/user/customApply/getJsapiTicket?url='+url).then(function(res) {<!-- --></p> 
<p>            var getMsg = res.data.resultBody;</p> 
<p>            console.log(getMsg.appid,getMsg.timestamp,getMsg.nonceStr,getMsg.signature)</p> 
<p>            wx.config({<!-- --></p> 
<p>                debug: false, //生产环境需要关闭debug模式</p> 
<p></p> 
<p>                appId: getMsg.appid, //appId通过微信服务号后台查看</p> 
<p></p> 
<p>                timestamp: getMsg.timestamp, //生成签名的时间戳</p> 
<p></p> 
<p>                nonceStr: getMsg.nonceStr, //生成签名的随机字符串</p> 
<p></p> 
<p>                signature: getMsg.signature, //签名</p> 
<p></p> 
<p>                jsApiList: [ //需要调用的JS接口列表</p> 
<p></p> 
<p>                    'onMenuShareTimeline', //分享给好友</p> 
<p></p> 
<p>                    'onMenuShareAppMessage', //分享到朋友圈</p> 
<p></p> 
<p>                ]</p> 
<p></p> 
<p>            });</p> 
<p></p> 
<p>            wx.ready(function() {<!-- --></p> 
<p>                //分享到朋友圈</p> 
<p>                wx.onMenuShareTimeline({<!-- --></p> 
<p></p> 
<p>                    title: "", // 分享标题</p> 
<p></p> 
<p>                    desc: "", //分享描述</p> 
<p>                    link:url,</p> 
<p>                    imgUrl: '' , // 分享图标</p> 
<p></p> 
<p>                });</p> 
<p></p> 
<p>                //分享给朋友</p> 
<p></p> 
<p>                wx.onMenuShareAppMessage({<!-- --></p> 
<p></p> 
<p>                    title: "", // 分享标题</p> 
<p></p> 
<p>                    desc: "", // 分享描述</p> 
<p>                    link:url,</p> 
<p>                    imgUrl: '' , // 分享图标</p> 
<p>                    success: function () {<!-- --></p> 
<p>                        // 成功回调函数</p> 
<p>                    },</p> 
<p>                    cancel: function () {<!-- --></p> 
<p>                        // 失败回调函数</p> 
<p>                    }</p> 
<p>                });</p> 
<p> });</p> 
<p>})</p> 
<p>}</p> 
<p>}</p> 
<h2>3.  main.js中导入</h2> 
<p>import WXConfig from './weixin/wxsdk' // 微信分享</p> 
<p>Vue.prototype.WXConfig = WXConfig</p> 
<h2>4. 页面调用</h2> 
<p>this.WXConfig.wxShowMenu();</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/32c2e1ac633e15acfd4c5053b56fc3d6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言中常见的表达式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49ebe7572eeeeb72e4e7fa6f1754aeba/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在live server开启https</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>