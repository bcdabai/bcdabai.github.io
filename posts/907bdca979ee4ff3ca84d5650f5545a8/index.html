<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>大小端模式详解及其测定 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="大小端模式详解及其测定" />
<meta property="og:description" content="大小端的寓言故事 有关大小端的争论，最早来自于《格列夫游记》里一个有趣的故事：
Lilliput和Blefuscu这两个强国在过去的36个月中一直在苦战。战争的原因：大家都知道，吃鸡蛋的时候，原始的方法是打破鸡蛋较大的一端，可以那时的皇帝的祖父由于小时侯吃鸡蛋，按这种方法把手指弄破了，因此他的父亲，就下令，命令所有的子民吃鸡蛋的时候，必须先打破鸡蛋较小的一端，违令者重罚。然后老百姓对此法令极为反感，期间发生了多次叛乱，其中一个皇帝因此送命，另一个丢了王位，产生叛乱的原因就是另一个国家Blefuscu的国王大臣煽动起来的，叛乱平息后，就逃到这个帝国避难。据估计，先后几次有11000余人情愿死也不肯去打破鸡蛋较小的端吃鸡蛋。这个其实讽刺当时英国和法国之间持续的冲突。
什么是大小端 目前普遍采用的是单字节编址方式，即对于每一个字节（8个位）编一个地址编号，这种方式对于单字节数据存储没有问题，但多字节的数据存储会带来问题，比如：要将整形 0x 87 65 43 21 （占四个字节）存储在其起始地址为 100处，是将高位 87 存储在高地址 103 处，还是将 21 存储在 103 处，这是一个问题。
将数据的高位存储在低地址处的方式称为大端模式；相反的，将数据的低位存储在低地址处的方式称为小端模式。 这样对于 0x 87 65 43 21 就有两种存储方式： 大小端的测定 下面给出两种测试方法（C语言）：
用一个 char 的指针取得 int 的第一个字节， 通过查看 char 对应的是 int 的高位数据还是低位数据，从而得出结果。代码如下： #include &lt;stdio.h&gt; int main() { int i = 0x87654321; char *cp = (char*)&amp;i; printf(&#34;%d\n&#34;, *cp); return 0; } 结果如下： 通过联合体的特点：所有成员共享同一内存，来达到测试目的。代码如下： #include&lt;stdio.h&gt; int check() { union{ int i; char c; }ic; ic." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/907bdca979ee4ff3ca84d5650f5545a8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-16T16:33:56+08:00" />
<meta property="article:modified_time" content="2018-02-16T16:33:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大小端模式详解及其测定</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5 id="大小端的寓言故事"><strong>大小端的寓言故事</strong></h5> 
<p>有关大小端的争论，最早来自于《格列夫游记》里一个有趣的故事：</p> 
<blockquote> 
 <p>Lilliput和Blefuscu这两个强国在过去的36个月中一直在苦战。战争的原因：大家都知道，吃鸡蛋的时候，原始的方法是打破鸡蛋较大的一端，可以那时的皇帝的祖父由于小时侯吃鸡蛋，按这种方法把手指弄破了，因此他的父亲，就下令，命令所有的子民吃鸡蛋的时候，必须先打破鸡蛋较小的一端，违令者重罚。然后老百姓对此法令极为反感，期间发生了多次叛乱，其中一个皇帝因此送命，另一个丢了王位，产生叛乱的原因就是另一个国家Blefuscu的国王大臣煽动起来的，叛乱平息后，就逃到这个帝国避难。据估计，先后几次有11000余人情愿死也不肯去打破鸡蛋较小的端吃鸡蛋。这个其实讽刺当时英国和法国之间持续的冲突。</p> 
</blockquote> 
<h5 id="什么是大小端"><strong>什么是大小端</strong></h5> 
<p>目前普遍采用的是单字节编址方式，即对于每一个字节（8个位）编一个地址编号，这种方式对于单字节数据存储没有问题，但多字节的数据存储会带来问题，比如：要将整形 <code>0x 87 65 43 21</code> （占四个字节）存储在其起始地址为 <code>100</code>处，是将高位 <code>87</code> 存储在高地址 103 处，还是将 <code>21</code> 存储在 103 处，这是一个问题。</p> 
<blockquote> 
 <ul><li>将数据的高位存储在低地址处的方式称为<strong>大端模式</strong>；</li><li>相反的，将数据的低位存储在低地址处的方式称为<strong>小端模式</strong>。</li></ul> 
</blockquote> 
<p>这样对于 <strong>0x 87 65 43 21</strong> 就有两种存储方式： <br> <img src="https://images2.imgbox.com/55/c3/2zQPWC9H_o.png" alt="这里写图片描述" title=""></p> 
<h5 id="大小端的测定"><strong>大小端的测定</strong></h5> 
<p>下面给出两种测试方法（C语言）：</p> 
<ul><li>用一个 <code>char</code> 的指针取得 <code>int</code> 的第一个字节， 通过查看 <code>char</code> 对应的是 <code>int</code> 的高位数据还是低位数据，从而得出结果。代码如下：</li></ul> 
<pre class="prettyprint"><code class="language-c hljs "><span class="hljs-preprocessor">#include &lt;stdio.h&gt;</span>

<span class="hljs-keyword">int</span> main()
{
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0x87654321</span>;
    <span class="hljs-keyword">char</span> *cp = (<span class="hljs-keyword">char</span>*)&amp;i;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, *cp);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre> 
<p>结果如下： <br> <img src="https://images2.imgbox.com/67/68/wLvtZP8S_o.png" alt="这里写图片描述" title=""></p> 
<ul><li>通过联合体的特点：所有成员共享同一内存，来达到测试目的。代码如下：</li></ul> 
<pre class="prettyprint"><code class="language-c hljs "><span class="hljs-preprocessor">#include&lt;stdio.h&gt;</span>

<span class="hljs-keyword">int</span> check()
{
    <span class="hljs-keyword">union</span>{
        <span class="hljs-keyword">int</span> i;
        <span class="hljs-keyword">char</span> c;
    }ic;
    ic.i = <span class="hljs-number">0x87654321</span>;

    <span class="hljs-keyword">return</span> ic.c == <span class="hljs-number">0x21</span>;
}
<span class="hljs-keyword">int</span> main()
{
    <span class="hljs-keyword">if</span> (check())
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"小端模式\n"</span>);
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"大端模式\n"</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre> 
<p>结果如下： <br> <img src="https://images2.imgbox.com/ac/76/QcmF9mzi_o.png" alt="这里写图片描述" title=""></p> 
<hr> 
<p>【作者：果冻 <a href="http://blog.csdn.net/jelly_9">http://blog.csdn.net/jelly_9</a>】</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9db168c051f9713ce6b22051a6c554c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">memset初始化机构体struct</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71d716d8ae4e0cdea6c68d8d6ba9db7a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一.springboot与shiro整合(示例)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>