<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux系统启动过程及关机、重启指令 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux系统启动过程及关机、重启指令" />
<meta property="og:description" content="大家好，这是鄙人第一次写blog，如有不当之处，还请斧正，万分感谢！
最近正在学习Linux，对于其相关内容做了一部分整理、归纳，特此进行分享。
Linux系统启动过程 Linux系统的启动过程大致可分为五个部分：内核加载、运行init、初始化系统、用户登入、进入login shell。
一、内核加载 Linux系统开机时，BIOS(Basic Input Output System)首先会进行开机自检，待到操作系统接管硬件之后，会读入/boot目录下的内核文件。
二、运行init init进程是Linux内核启动的第一个用户级进程，它的进程编号（pid）为1，是Linux系统最基本的程序之一，init程序首先需要读取配置文件/etc/inittab。
Linux系统的七个运行级别（runlevel） 在linux开机过程中，许多程序需要启动，称为“守护进程”（daemon）。Linux有7个运行级别（0：关机、停机；1：单用户模式；2：多用户模式；3：完整的多用户模式；4：系统未使用、保留；5：图形化模式；6：重启模式）。
具体内容如下：
运行级别0：系统停机状态，系统默认运行级别不能为0，否则不能正常启动。运行级别1：单用户工作状态，root权限，用于系统的维护、阻止远程登录等，如同Windows的安全模式登录。运行级别2：多用户状态（没有NFS）。运行级别3：完全的多用户状态（有NFS），登录后进入控制台命令行模式。运行级别4：系统未使用，保留一般不使用。运行级别5：X11控制台，登录后进入图形GUI模式或者GNOME、KDE图形化界面。运行级别6：系统正常关闭并重启，系统默认运行级别不能为6，否则不能正常启动。 三、系统初始化 在Linux系统中，/etc/rc.d/rc(0~6).d/目录下的文件都是一些连接文件，真正的启动脚本存放在/etc/rc.d/init.d/目录下,rc启动脚本以K和S打头，字母S表示Start，以start为运行参数，即启动脚本；字母K表示Kill，以stop为运行参数，指明需要停止的程序。
#ls / #cd /etc/rc.d #ls rc(0~6).d #ls init.d 示例如下（以rc2.d为例）:
之后，init会打开6个终端，以便用户登录，其中用户输入的信息作为参数传给login来验证。
四、用户登入 一般的，用户登录方式有三种：
（1）命令行登录：init进程将调用getty程序，核对用户信息。
（2）ssh登录：系统调用sshd程序，取代getty和login。
（3）图形界面登录：init进程调用gdm显示管理器，核对用户信息。
五、进入login shell Linux预设提供了六个命令窗口终端机让我们来进行登录：tty1~6；
shell即命令行界面，取得bash时要完整的登录流程，称为login shell。
Linux系统启动示意图如下：
Linux关机、重启指令 halt	//关机，用于root用户，只关闭系统，而电源还在运行 halt -p	//关闭系统和电源 poweroff	//关机，用于root用户，向acpi发送关闭电源的信号 reboot	//重启，用于root用户 init	//init 0为关机，init 6为重启，用于root用户 systemctl	//systemctl (halt/poweroff/reboot) (-i),效果同上，普通用户需要加-i，root用户不用 sync	//将内存中的数据保存到硬盘中 shutdown指令是最常用到的关机重启指令，因此单独拿出来讲。
//基本格式：shutdown [类型] [时间] [警告信息] shutdown	//关机指令，默认一分钟后关机 shutdown -h now	//立即关机 shutdown -h 20:20	//最近的20:20关机 shutdown -h &#43;10	//十分钟后关机 shutdown -r now	//立即重启 shutdown -r 20:20	//最近的20:20重启 shutdown -r &#43;10	//十分钟后重启 shutdown -k &#43;10 &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5e46b6c759740af0f0631d1387fb505e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T20:34:17+08:00" />
<meta property="article:modified_time" content="2022-08-04T20:34:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux系统启动过程及关机、重启指令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>大家好，这是鄙人第一次写blog，如有不当之处，还请斧正，万分感谢！</p> 
<p>最近正在学习Linux，对于其相关内容做了一部分整理、归纳，特此进行分享。</p> 
<h2><a id="Linux_3"></a>Linux系统启动过程</h2> 
<p>Linux系统的启动过程大致可分为五个部分：内核加载、运行init、初始化系统、用户登入、进入login shell。</p> 
<h3><a id="_6"></a>一、内核加载</h3> 
<p>Linux系统开机时，BIOS(Basic Input Output System)首先会进行开机自检，待到操作系统接管硬件之后，会读入/boot目录下的内核文件。</p> 
<h3><a id="init_9"></a>二、运行init</h3> 
<p>init进程是Linux内核启动的第一个用户级进程，它的进程编号（pid）为1，是Linux系统最基本的程序之一，init程序首先需要读取配置文件/etc/inittab。</p> 
<h4><a id="Linuxrunlevel_12"></a>Linux系统的七个运行级别（runlevel）</h4> 
<p>在linux开机过程中，许多程序需要启动，称为“守护进程”（daemon）。Linux有7个运行级别（0：关机、停机；1：单用户模式；2：多用户模式；3：完整的多用户模式；4：系统未使用、保留；5：图形化模式；6：重启模式）。</p> 
<p>具体内容如下：</p> 
<ol><li>运行级别0：系统停机状态，系统默认运行级别不能为0，否则不能正常启动。</li><li>运行级别1：单用户工作状态，root权限，用于系统的维护、阻止远程登录等，如同Windows的安全模式登录。</li><li>运行级别2：多用户状态（没有NFS）。</li><li>运行级别3：完全的多用户状态（有NFS），登录后进入控制台命令行模式。</li><li>运行级别4：系统未使用，保留一般不使用。</li><li>运行级别5：X11控制台，登录后进入图形GUI模式或者GNOME、KDE图形化界面。</li><li>运行级别6：系统正常关闭并重启，系统默认运行级别不能为6，否则不能正常启动。</li></ol> 
<h3><a id="_24"></a>三、系统初始化</h3> 
<p>在Linux系统中，/etc/rc.d/rc(0~6).d/目录下的文件都是一些连接文件，真正的启动脚本存放在/etc/rc.d/init.d/目录下,rc启动脚本以K和S打头，字母S表示Start，以start为运行参数，即启动脚本；字母K表示Kill，以stop为运行参数，指明需要停止的程序。</p> 
<pre><code>#ls /
#cd /etc/rc.d
#ls rc(0~6).d
#ls init.d
</code></pre> 
<p>示例如下（以rc2.d为例）:<br> <img src="https://images2.imgbox.com/48/bd/ss1DccU3_o.png" alt="rc启动脚本示例"><br> 之后，init会打开6个终端，以便用户登录，其中用户输入的信息作为参数传给login来验证。</p> 
<h3><a id="_36"></a>四、用户登入</h3> 
<p>一般的，用户登录方式有三种：<br> （1）命令行登录：init进程将调用getty程序，核对用户信息。<br> （2）ssh登录：系统调用sshd程序，取代getty和login。<br> （3）图形界面登录：init进程调用gdm显示管理器，核对用户信息。</p> 
<h3><a id="login_shell_42"></a>五、进入login shell</h3> 
<p>Linux预设提供了六个命令窗口终端机让我们来进行登录：tty1~6；<br> shell即命令行界面，取得bash时要完整的登录流程，称为login shell。</p> 
<p>Linux系统启动示意图如下：</p> 
<p><img src="https://images2.imgbox.com/47/2c/2VdJCpIk_o.png" alt="Linux系统启动示意图"></p> 
<h2><a id="Linux_50"></a>Linux关机、重启指令</h2> 
<pre><code>halt		//关机，用于root用户，只关闭系统，而电源还在运行
halt -p		//关闭系统和电源
poweroff		//关机，用于root用户，向acpi发送关闭电源的信号
reboot		//重启，用于root用户
init		//init 0为关机，init 6为重启，用于root用户
systemctl		//systemctl (halt/poweroff/reboot) (-i),效果同上，普通用户需要加-i，root用户不用
sync		//将内存中的数据保存到硬盘中
</code></pre> 
<p>shutdown指令是最常用到的关机重启指令，因此单独拿出来讲。</p> 
<pre><code>//基本格式：shutdown [类型] [时间] [警告信息]
shutdown		//关机指令，默认一分钟后关机
shutdown -h now		//立即关机
shutdown -h 20:20		//最近的20:20关机
shutdown -h +10		//十分钟后关机
shutdown -r now		//立即重启
shutdown -r 20:20		//最近的20:20重启
shutdown -r +10		//十分钟后重启
shutdown -k +10 "This system will shutdown after 10 minutes"		//系统在十分钟后不关机，但会发送警告信息给用户
shutdown -c		//取消上述的关机重启操作
</code></pre> 
<p>为防止在关机或重启时，部分内存数据未保存同步到硬盘当中，从而导致数据的丢失，在关机或重启系统前，应当先执行sync指令，将数据保存到硬盘中。</p> 
<p>今日分享到此结束！谢谢大家！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fddd90f0c55fc3461d74a89a9e2ceb17/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">踩坑记录 PIL与Opencv读取图像的差别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a68e9216f971b6530b560d1dddd3616e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue 报错 ：Invalid prop: type check failed for prop “defaultExpandAll“. Expected Boolean,</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>