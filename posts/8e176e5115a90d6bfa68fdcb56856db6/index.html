<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何部署vue前端项目到服务器上（nginx处理跨域） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何部署vue前端项目到服务器上（nginx处理跨域）" />
<meta property="og:description" content="注：
本文选择了nginx做web服务器。
因为在本文vue前端项目中，需要从接口获取数据，可是数据与vue前端项目是在同一ip地址但不同端口号，所以需要跨域读取数据。本文的跨域处理是使用了nginx。 环境：
阿里云服务器（ubuntu 64bit）
xshellnginx
1.使用xshell登录到阿里云服务器。安装nginx（本文安装到/etc下）
cd /etc apt-get update apt-get install nginx 2.首先先配置nginx，然后再根据配置文件做下一步操作
打开/etc/nginx/nginx.conf文件
vim /etc/nginx/nginx.conf在nginx.conf中配置如下： user www-data; worker_processes auto; pid /run/nginx.pid; events { worker_connections 768; # multi_accept on; } http { ## # Basic Settings ## tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; # server_tokens off; # server_names_hash_bucket_size 64; # server_name_in_redirect off; include /etc/nginx/mime.types; default_type application/octet-stream; ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ## # Logging Settings ## access_log /var/log/nginx/access." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8e176e5115a90d6bfa68fdcb56856db6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-14T10:18:04+08:00" />
<meta property="article:modified_time" content="2018-01-14T10:18:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何部署vue前端项目到服务器上（nginx处理跨域）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>注：</p> 
<ul><li>本文选择了nginx做web服务器。<br> </li><li>因为在本文vue前端项目中，需要从接口获取数据，可是数据与vue前端项目是在同一ip地址但不同端口号，所以需要跨域读取数据。本文的跨域处理是使用了nginx。</li></ul> 
<p>环境：</p> 
<ul><li>阿里云服务器（ubuntu 64bit）<br> </li><li>xshell</li><li>nginx<br> </li></ul> 
<p>1.使用xshell登录到阿里云服务器。安装nginx（本文安装到/etc下）</p> 
<p></p> 
<pre><code class="language-plain">cd /etc
apt-get update
apt-get install nginx</code></pre> 
<p></p> 
<p>2.首先先配置nginx，然后再根据配置文件做下一步操作</p> 
<p>打开/etc/nginx/nginx.conf文件</p> 
<p></p> 
<pre><code class="language-plain">vim /etc/nginx/nginx.conf</code></pre>在nginx.conf中配置如下： 
<p></p> 
<p></p> 
<pre><code class="language-plain">user www-data;
worker_processes auto;
pid /run/nginx.pid;
events {
        worker_connections 768;
        # multi_accept on;
}
http {

        ##
        # Basic Settings
        ##

        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;

        # server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##
        # SSL Settings
        ##

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
        ssl_prefer_server_ciphers on;

        ##
        # Logging Settings
        ##

        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        ##
        # Gzip Settings
        ##

        gzip on;
        gzip_disable "msie6";

        # gzip_vary on;
        # gzip_proxied any;
        # gzip_comp_level 6;
        # gzip_buffers 16 8k;
        # gzip_http_version 1.1;

        ##
        # Virtual Host Configs
        ##


        gzip on;
        gzip_disable "msie6";

        # gzip_vary on;
        # gzip_proxied any;
        # gzip_comp_level 6;
        # gzip_buffers 16 8k;
        # gzip_http_version 1.1;
        # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

        ##
        # Virtual Host Configs
        ##

        include /etc/nginx/conf.d/*.conf;
        include /etc/nginx/sites-enabled/*;
        #以下为我们添加的内容
       server {             
              listen 80;
              server_name your-ipaddress;

              root /home/my-project/;
              index index.html;
              location /datas {
              rewrite ^.+datas/?(.*)$ /$1 break;
              include uwsgi_params;
              proxy_pass http://ip:port;
                              }
             }
}
</code></pre>接下来就根据配置文件进行下一步工作。配置文件中的server_name后面是阿里云服务器的ip地址 
<p></p> 
<p>3.配置文件中的listen是nginx监听的端口号，所以需要在阿里云服务器上为80端口添加安全组规则</p> 
<p>在本地的浏览器登录阿里云服务器-&gt;进入控制台-&gt;点击安全组-&gt;点击配置规则-&gt;点击添加安全组规则，之后配置如下（注：入方向和出方向都要配置）</p> 
<p><img src="https://images2.imgbox.com/24/c3/ylTamsvm_o.png" alt=""><br> </p> 
<p>4.配置文件中的root和index那两行表示我们把项目文件夹放在/home/my-project下</p> 
<p>例如有两个项目文件夹分别为test1，test2，里面都有index.html。则目录结构如下</p> 
<p>/home</p> 
<p>       |--my-project</p> 
<p>              |--test1</p> 
<p>                      |--index.html</p> 
<p>              |--test2</p> 
<p>                      |--index.html</p> 
<p>则在浏览器输入http://ip/test1/index.html</p> 
<p>服务器便会在/home/my-project中找到test1下的index.html执行；</p> 
<p>如果在浏览器中输入http://ip/test2/index.html</p> 
<p>服务器便会在/home/my-project中找到test2下的index.html执行；</p> 
<p>这样便可以在服务器下放多个项目文件夹。</p> 
<p>5.所以我们也需要在本地项目的config/index.js里的build下进行修改,如果要把项目放到test1下，则</p> 
<p></p> 
<pre><code class="language-javascript">assetsPublicPath: '/test1/',</code></pre>如果用到了vue-router，则修改/router/index.js 
<p></p> 
<p></p> 
<pre><code class="language-javascript">export default new Router({
  base: '/test1/',   //添加这行
  linkActiveClass: 'active',
  routes
});</code></pre>6.nginx配置文件中的location则是针对跨域处理，表示把对/datas的请求转发给http://ip:port,本文中这个http://ip:port下就是需要的数据，例如http://ip:port/seller,在本地项目文件中ajax请求数据的地方如下 
<p></p> 
<p></p> 
<pre><code class="language-javascript">      const url = '/datas/seller';
      this.$http.get(url).then((response) =&gt; {
        .....
      });</code></pre>7.修改后在本地命令行下运行:cnpm run build 生成dist文件。把dist文件里的index.html和static文件上传到服务器的/home/my-project/test1下，目录结构如下 
<p></p> 
<p></p> 
<p>/home</p> 
<p>       |--my-project</p> 
<p>              |--test1</p> 
<p>                      |--index.html</p> 
<p>                      |--static<br> </p> 
<p>8.启动nginx</p> 
<p></p> 
<pre><code class="language-plain">service nginx start</code></pre>9.至此项目部署成功，在浏览器下输入:  http://ip/test1/index.html  即可 
<br> 
<br> 
<p></p> 
<p>     <br> </p> 
<p>      <br> </p> 
<p><br> </p> 
<br> 
<p><br> </p> 
<p><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a8972f3c8ad4adeff0c0e85872654635/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Postgresql】数据库postgresql 10的data目录迁移(不用重新安装)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7a23e7d8eeb7658baeee65a27132194a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ios面试数据结构与算法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>