<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows10系统下使用VS code远程连接集群（在有跳板机的情况下） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows10系统下使用VS code远程连接集群（在有跳板机的情况下）" />
<meta property="og:description" content="Windows10系统下使用VS code远程连接集群（在有跳板机的情况下） 一、使用PowerShell安装适用于Windows10的OpenSSH二、在本地机器上生成SSH key三、远程服务器配置四、安装Visual Studio Code五、在插件市场中搜索Remote SSH并安装六、配置VS code设置七、连接到服务器 一、使用PowerShell安装适用于Windows10的OpenSSH step1: 使用快捷键Windows&#43;X，接着按A或点选「Windows PowerShell（管理员）」，以管理员身份打开PowerShell。
step2: 输入指令Get-WindowsCapability -Online | ? Name -like &#39;OpenSSH*&#39;，这是为了检查本地OpenSSH客户端及服务端是否已经安装，如果都未安装，应打印：
Name : OpenSSH.Client~~~~0.0.1.0 State : NotPresent Name : OpenSSH.Server~~~~0.0.1.0 State : NotPresent step3: 输入指令Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0，这是为了安装OpenSSH客户端，安装成功时应打印：
Path : Online : True RestartNeeded : False 在本地机器上，我们只需要安装客户端即可，不需要安装服务端。
二、在本地机器上生成SSH key step1: 使用快捷键Windows&#43;X，接着按A或点选「Windows PowerShell（管理员）」，以管理员身份打开PowerShell。
step2: 输入指令ssh-keygen -t rsa -b 4096，生成公钥和私钥，在C:\Users\XXX\.ssh目录下（XXX是你的用户名），id_rsa是私钥，本地机器持有，千万不可外泄，千万不能丢失。id_rsa.pub是公钥，后面需要进一步操作。
三、远程服务器配置 用你自己的方式连接到远程服务器（我用的是MobaXterm），把本地机器上的ssh公钥(C:\Users\XXX\.ssh\id_rsa.pub里面的内容)加到服务器的authorized_keys(~/.ssh/authorized_keys)里面。
四、安装Visual Studio Code 传送门
五、在插件市场中搜索Remote SSH并安装 六、配置VS code设置 step1: 点击VS code边栏的远程连接图标。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/03cdc1be5efe6a8f4a855714b397bf4b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-21T21:24:56+08:00" />
<meta property="article:modified_time" content="2020-08-21T21:24:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows10系统下使用VS code远程连接集群（在有跳板机的情况下）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Windows10系统下使用VS code远程连接集群（在有跳板机的情况下）</h4> 
 <ul><li><a href="#PowerShellWindows10OpenSSH_1" rel="nofollow">一、使用PowerShell安装适用于Windows10的OpenSSH</a></li><li><a href="#SSH_key_20" rel="nofollow">二、在本地机器上生成SSH key</a></li><li><a href="#_25" rel="nofollow">三、远程服务器配置</a></li><li><a href="#Visual_Studio_Code_28" rel="nofollow">四、安装Visual Studio Code</a></li><li><a href="#Remote_SSH_31" rel="nofollow">五、在插件市场中搜索Remote SSH并安装</a></li><li><a href="#VS_code_34" rel="nofollow">六、配置VS code设置</a></li><li><a href="#_52" rel="nofollow">七、连接到服务器</a></li></ul> 
</div> 
<p></p> 
<h2><a id="PowerShellWindows10OpenSSH_1"></a>一、使用PowerShell安装适用于Windows10的OpenSSH</h2> 
<p>step1: 使用快捷键<code>Windows+X</code>，接着按<code>A</code>或点选「Windows PowerShell（管理员）」，以管理员身份打开PowerShell。</p> 
<p>step2: 输入指令<code>Get-WindowsCapability -Online | ? Name -like 'OpenSSH*'</code>，这是为了检查本地OpenSSH客户端及服务端是否已经安装，如果都未安装，应打印：</p> 
<pre><code>Name  : OpenSSH.Client~~~~0.0.1.0
State : NotPresent
Name  : OpenSSH.Server~~~~0.0.1.0
State : NotPresent
</code></pre> 
<p>step3: 输入指令<code>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</code>，这是为了安装OpenSSH客户端，安装成功时应打印：</p> 
<pre><code>Path          :
Online        : True
RestartNeeded : False
</code></pre> 
<blockquote> 
 <p>在本地机器上，我们只需要安装客户端即可，不需要安装服务端。<br>  </p> 
</blockquote> 
<h2><a id="SSH_key_20"></a>二、在本地机器上生成SSH key</h2> 
<p>step1: 使用快捷键<code>Windows+X</code>，接着按<code>A</code>或点选「Windows PowerShell（管理员）」，以管理员身份打开PowerShell。</p> 
<p>step2: 输入指令<code>ssh-keygen -t rsa -b 4096</code>，生成公钥和私钥，在<code>C:\Users\XXX\.ssh</code>目录下（XXX是你的用户名），id_rsa是私钥，本地机器持有，千万不可外泄，千万不能丢失。id_rsa.pub是公钥，后面需要进一步操作。<br>  </p> 
<h2><a id="_25"></a>三、远程服务器配置</h2> 
<p>用你自己的方式连接到远程服务器（我用的是MobaXterm），把本地机器上的ssh公钥(<code>C:\Users\XXX\.ssh\id_rsa.pub</code>里面的内容)加到服务器的authorized_keys(~/.ssh/authorized_keys)里面。<br>  </p> 
<h2><a id="Visual_Studio_Code_28"></a>四、安装Visual Studio Code</h2> 
<p><a href="https://code.visualstudio.com/" rel="nofollow">传送门</a><br>  </p> 
<h2><a id="Remote_SSH_31"></a>五、在插件市场中搜索Remote SSH并安装</h2> 
<p><img src="https://images2.imgbox.com/66/a7/a7HXIgDh_o.png" alt="在这里插入图片描述"><br>  </p> 
<h2><a id="VS_code_34"></a>六、配置VS code设置</h2> 
<p>step1: 点击VS code边栏的远程连接图标。<br> <img src="https://images2.imgbox.com/99/04/NItJR6ze_o.png" alt="在这里插入图片描述"><br> step2: 点击SSH TARGETS右边的齿轮状⚙️按钮。<br> <img src="https://images2.imgbox.com/9e/14/BYDWroNY_o.png" alt="在这里插入图片描述"><br> step3: 在弹出来的<code>C:\Users\XXX\.ssh\config</code>文件中添加下面内容，根据自己的用户名以及想要连接的跳板机（也即<code>Host jump</code>）和服务器（也即<code>Host target</code>）填写好各个字段，<code>Ctrl + s</code>保存。</p> 
<pre><code class="prism language-text">Host jump
    HostName [跳板机url或者ip地址]
    User [你的username]
    ForwardAgent yes

Host target
    HostName [目标服务器url或者ip地址]
    User [你的username]
    ProxyCommand C:\Windows\System32\OpenSSH\ssh.exe -W %h:%p jump
</code></pre> 
<p> </p> 
<h2><a id="_52"></a>七、连接到服务器</h2> 
<p>step1: 点击target右边的小按钮，在弹出的窗口里面分别输入verification code和password即可连接到服务器，这一步可能需要多尝试几次，要注意verification code的有效时间。<br> <img src="https://images2.imgbox.com/e5/41/sBFXKjDr_o.png" alt="在这里插入图片描述"><br> step2: 连接到远程服务器之后，打开VS code的资源管理器，点击“打开文件夹”按钮，即可选择自己想要打开的工程文件夹，然后VS code会重新建立连接，再次输入verification code和password即可！<br> <img src="https://images2.imgbox.com/81/50/DnXel2A9_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注：VS code是自带ssh服务的，所以理论上我们不需要安装OpenSSH，但是使用VS code自带的ssh时会出现<code>试图写入的管道不存在的错误</code>，这可能是由于vscode自带的ssh的实现有问题（https://github.com/microsoft/vscode-remote-release/issues/1398），因此我们需要自行安装OpenSSH。</p> 
</blockquote> 
<blockquote> 
 <p>注：有一个大佬级别的教程，技术细节比我这篇博客多，如果遇到无法解决的问题，可以参考一下：<a href="https://blog.csdn.net/maokelong95/article/details/91801944">链接</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff0dec61060db00d4c41dd6f45cca90d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python爬虫笔记——多线程（threading）传参</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b96971589e42d524cf49a564bca74d6c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决问题：ngxin 交替出现404 和200的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>