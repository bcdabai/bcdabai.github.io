<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker搭建镜像仓库Harbor,并且登录使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker搭建镜像仓库Harbor,并且登录使用" />
<meta property="og:description" content="1.先安装好最新版的docker环境( 最新版默认安装了docker compose )
2.到官网下载最新harbor安装包(最新版)
https://github.com/goharbor/harbor/releases/download/v2.8.3/harbor-offline-installer-v2.8.3.tgz
3.将安装包上传到虚拟机中，进行解压
[root@docker-2 harbor]# tar xf harbor-offline-installer-v2.8.3.tgz
[root@docker-2 harbor]# ls
harbor harbor-offline-installer-v2.8.3.tgz
[root@docker-2 harbor]# cd harbor
[root@docker-2 harbor]# ls
common docker-compose.yml install.sh prepare
common.sh harbor.v2.8.3.tar.gz harbor.yml.tmpl LICENSE
4.将harbor.yml.tmpl文件复制一份并改名为harbor.yml
[root@docker-2 harbor]# cp harbor.yml.tmpl harbor.yml
[root@docker-2 harbor]# ls
common docker-compose.yml harbor.yml install.sh prepare
common.sh harbor.v2.8.3.tar.gz harbor.yml.tmpl LICENSE
5.更改配置文件harbor.yml
[root@docker-2 harbor]# vim harbor.yml
hostname: 192.168.118.138 #更改为自己主机的ip地址
http:
# port for http, default is 80. If https enabled, this port will redirect to https port" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0cc3aa5023f2bfbdaca6852b15ad1b52/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-15T13:24:18+08:00" />
<meta property="article:modified_time" content="2023-08-15T13:24:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker搭建镜像仓库Harbor,并且登录使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>1.先安装好最新版的docker环境( 最新版默认安装了docker compose )</strong></p> 
<p><strong>2.到官网下载最新harbor安装包(最新版)</strong></p> 
<p><a href="https://github.com/goharbor/harbor/releases/download/v2.8.3/harbor-offline-installer-v2.8.3.tgz" title="https://github.com/goharbor/harbor/releases/download/v2.8.3/harbor-offline-installer-v2.8.3.tgz">https://github.com/goharbor/harbor/releases/download/v2.8.3/harbor-offline-installer-v2.8.3.tgz</a></p> 
<p><strong>3.将安装包上传到虚拟机中，进行解压</strong></p> 
<blockquote> 
 <p><strong>[root@docker-2 harbor]# tar xf harbor-offline-installer-v2.8.3.tgz</strong></p> 
 <p><strong>[root@docker-2 harbor]# ls<br> harbor  harbor-offline-installer-v2.8.3.tgz<br> [root@docker-2 harbor]# cd harbor</strong></p> 
 <p><strong>[root@docker-2 harbor]# ls<br> common     docker-compose.yml         install.sh  prepare<br> common.sh  harbor.v2.8.3.tar.gz  harbor.yml.tmpl  LICENSE</strong></p> 
</blockquote> 
<p><strong>4.将harbor.yml.tmpl文件复制一份并改名为harbor.yml</strong></p> 
<blockquote> 
 <p>[root@docker-2 harbor]# cp harbor.yml.tmpl harbor.yml</p> 
 <p>[root@docker-2 harbor]# ls<br> common     docker-compose.yml    harbor.yml       install.sh  prepare<br> common.sh  harbor.v2.8.3.tar.gz  harbor.yml.tmpl  LICENSE</p> 
</blockquote> 
<p><strong>5.更改配置文件harbor.yml</strong></p> 
<blockquote> 
 <p> [root@docker-2 harbor]# vim harbor.yml</p> 
 <p>hostname: 192.168.118.138  <strong>#更改为自己主机的ip地址</strong></p> 
 <p>http:<br>   # port for http, default is 80. If https enabled, this port will redirect to https port<br>   port: 8079 <strong> #并设置端口为8079,防止与其他进程冲突</strong></p> 
 <p></p> 
 <p><strong>harbor_admin_password: 123456 #记住这个密码,等下登陆要用</strong></p> 
</blockquote> 
<p><strong> 6.执行harbor自动安装可执行文件（全部started才算成功）</strong></p> 
<blockquote> 
 <p>[root@docker-2 harbor]# ./install.sh </p> 
 <p>[Step 5]: starting Harbor ...<br> [+] Running 10/10<br>  ✔ Network harbor_harbor        Created                             0.1s <br>  ✔ Container harbor-log         Started                             0.4s <br>  ✔ Container registry           Started                             1.1s <br>  ✔ Container harbor-db          Started                             1.2s <br>  ✔ Container registryctl        Started                             1.0s <br>  ✔ Container harbor-portal      Starte...                           1.1s <br>  ✔ Container redis              Started                             0.8s <br>  ✔ Container harbor-core        Started                             1.5s <br>  ✔ Container nginx              Started                             2.0s <br>  ✔ Container harbor-jobservice  St...                               2.0s <br> ✔ ----Harbor has been installed and started successfully.----</p> 
</blockquote> 
<p><strong>7.查看镜像启动情况</strong></p> 
<blockquote> 
 <p>[root@docker-2 harbor]# docker compose ls<br> NAME                STATUS              CONFIG FILES<br> harbor              running(9)          /harbor/harbor/docker-compose.yml </p> 
</blockquote> 
<p><strong>8.去网页上访问192.168.118.138:8079（填你自己的ip地址）</strong> (确保你的防火墙已经关闭)</p> 
<p><img alt="" height="690" src="https://images2.imgbox.com/ad/5c/rmd4UeDk_o.png" width="1200"></p> 
<p><strong> 9.点击项目,新建自己的项目hello,设置10G</strong></p> 
<p><img alt="" height="607" src="https://images2.imgbox.com/2d/40/u4V2ua47_o.png" width="265"></p> 
<p> </p> 
<p><img alt="" height="420" src="https://images2.imgbox.com/a8/fa/DyOP2dop_o.png" width="629"></p> 
<p><strong>10.点击用户管理,新建用户superman</strong></p> 
<p><img alt="" height="173" src="https://images2.imgbox.com/c9/0d/Jchrn6ON_o.png" width="257"></p> 
<p> </p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/a8/7b/KzHpuFS1_o.png" width="604"></p> 
<p><strong>11.点击hello项目,添加成员superman</strong></p> 
<p><img alt="" height="408" src="https://images2.imgbox.com/81/fc/2RlavuBV_o.png" width="1200"></p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/e7/1f/Ec0M4IK5_o.png" width="609"></p> 
<p></p> 
<p><strong>12.再用另一台有harbor的虚拟机client进行配置,镜像加速仓库</strong></p> 
<blockquote> 
 <p>[root@docker-1 ~]# vim /etc/docker/daemon.json </p> 
 <p>{<!-- --><br>   "registry-mirrors": ["https://naxm4z64.mirror.aliyuncs.com"],<br>    "insecure-registries": ["192.168.118.138:8079"]  #添加镜像加速私有地址<br> }</p> 
 <p>[root@docker-1 ~]# systemctl daemon-reload    #重新加载服务</p> 
</blockquote> 
<p><strong>13.在client端登录到 Docker 镜像仓库(自己的私有仓库) superman 用户 密码自己设的</strong></p> 
<blockquote> 
 <p>[root@docker-1 ~]# docker login 192.168.118.138:8079 <br> Username: superman<br> Password: <br> WARNING! Your password will be stored unencrypted in /root/.docker/config.json.<br> Configure a credential helper to remove this warning. See<br> https://docs.docker.com/engine/reference/commandline/login/#credentials-store</p> 
 <p>Login Succeeded<br>  </p> 
</blockquote> 
<p><strong>14.client端拉取一个busybox镜像,打标签 </strong></p> 
<blockquote> 
 <p>[root@docker-1 ~]# docker pull busybox<br> [root@docker-1 ~]# docker tag busybox 192.168.118.138:8079/hello/busybox:9.9</p> 
 <p>                                                        #格式一定要ip地址+端口号+hello项目+镜像名:tag</p> 
 <p>                                                        #不然找不到对应的私有仓库位置</p> 
 <p>[root@docker-1 ~]# docker images |tail -1<br> 192.168.118.138:8079/hello/busybox       9.9       beae173ccac6   19 months ago   1.24MB</p> 
 <p></p> 
</blockquote> 
<p><strong>15.上传镜像到私有仓库</strong></p> 
<blockquote> 
 <p>[root@docker-1 ~]# docker push 192.168.118.138:8079/hello/busybox:9.9 </p> 
</blockquote> 
<p><strong>16.去Harbor查看是否有对应的镜像,如果有表示成功</strong></p> 
<p><img alt="" height="232" src="https://images2.imgbox.com/54/67/U1unR205_o.png" width="1200"><strong> 17.再在client上拉取私有仓库的镜像(先把本地的镜像删除 docker rm 镜像名)</strong></p> 
<blockquote> 
 <p>[root@docker-1 ~]# docker rmi 192.168.118.138:8079/hello/busybox:9.9</p> 
 <p>[root@docker-1 ~]# docker pull 192.168.118.138:8079/hello/busybox:9.9<br> #再进行拉取 ,最后查看本地镜像,是否拉取成功</p> 
 <p>[root@docker-1 ~]# docker images |tail -3</p> 
 <p>192.168.118.138:8079/hello/busybox       9.9       beae173ccac6   19 months ago   1.24MB</p> 
</blockquote> 
<p></p> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb730a44e27eb02ea0edd8876cedb82f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">时间序列自监督学习综述</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba720969efb4b9dfac00d6d8e3bf3c73/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">抖音小程序页面链接/导航</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>