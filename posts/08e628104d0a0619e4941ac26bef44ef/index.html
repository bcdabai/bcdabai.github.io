<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>(二)SQL大小写规范和 sql_mode - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="(二)SQL大小写规范和 sql_mode" />
<meta property="og:description" content="SQL大小写规范和 sql_mode 一、SQL大小写规范1、Windows和Linux平台区别2、Linux下大小写规则设置3、SQL编写建议 二、sql_mode的合理设置（了解即可,一般不动）1、 宽松模式 vs 严格模式2、模式查看和设置 一、SQL大小写规范 1、Windows和Linux平台区别 在 SQL 中，关键字和函数名是不用区分字母大小写的，比如 SELECT、WHERE、ORDER、GROUP BY 等关键字，以及 ABS、MOD、ROUND、MAX 等函数名。
不过在 SQL 中，你还是要确定大小写的规范，因为在 Linux 和 Windows 环境下，你可能会遇到不同的大小写问题。 windows系统默认大小写不敏感 ，但是linux系统是大小写敏感的。
通过如下命令查看
SHOW VARIABLES LIKE &#39;%lower_case_table_names%&#39; Windows系统下：
Linux系统下：
lower_case_table_names参数值的设置： 默认为0，大小写敏感。设置1，大小写不敏感。创建的表，数据库都是以小写形式存放在磁盘上，对于sql语句都是转换为小写对表和数据库进行查找。设置2，创建的表和数据库依据语句上格式存放，凡是查找都是转换为小写进行 两个平台上SQL大小写的区别具体来说： 下面这个记住
MySQL在Linux下数据库名、表名、列名、别名大小写规则是这样的：
1、数据库名、表名、表的别名、变量名是严格区分大小写的；
2、关键字、函数名称在 SQL 中不区分大小写；
3、列名（或字段名）与列的别名（或字段别名）在所有的情况下均是忽略大小写的；
MySQL在Windows的环境下全部不区分大小写
2、Linux下大小写规则设置 当想设置为大小写不敏感时，要在 my.cnf 这个配置文件[mysqld] 中加入
lower_case_table_names=1 ，然后重启服务器。
但是要在重启数据库实例之前就需要将原来的数据库和表转换为小写，否则将找不到数据库名。
此参数适用于MySQL5.7。在MySQL 8下禁止在重新启动 MySQL 服务时将lower_case_table_names 设置成不同于初始化 MySQL 服务时设置的lower_case_table_names 值。
如果非要将MySQL8设置为大小写不敏感，具体步骤为：
1、停止MySQL服务 2、删除数据目录，即删除 /var/lib/mysql 目录 3、在MySQL配置文件（ /etc/my.cnf ）中添加 lower_case_table_names=1 4、启动MySQL服务 3、SQL编写建议 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/08e628104d0a0619e4941ac26bef44ef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-13T19:42:11+08:00" />
<meta property="article:modified_time" content="2022-02-13T19:42:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">(二)SQL大小写规范和 sql_mode</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>SQL大小写规范和 sql_mode</h4> 
 <ul><li><a href="#SQL_1" rel="nofollow">一、SQL大小写规范</a></li><li><ul><li><a href="#1WindowsLinux_2" rel="nofollow">1、Windows和Linux平台区别</a></li><li><a href="#2Linux_29" rel="nofollow">2、Linux下大小写规则设置</a></li><li><a href="#3SQL_45" rel="nofollow">3、SQL编写建议</a></li></ul> 
  </li><li><a href="#sql_mode_54" rel="nofollow">二、sql_mode的合理设置（了解即可,一般不动）</a></li><li><ul><li><a href="#1__vs__55" rel="nofollow">1、 宽松模式 vs 严格模式</a></li><li><a href="#2_74" rel="nofollow">2、模式查看和设置</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="SQL_1"></a>一、SQL大小写规范</h2> 
<h3><a id="1WindowsLinux_2"></a>1、Windows和Linux平台区别</h3> 
<p>在 SQL 中，关键字和函数名是不用区分字母大小写的，比如 SELECT、WHERE、ORDER、GROUP BY 等关键字，以及 ABS、MOD、ROUND、MAX 等函数名。</p> 
<p>不过在 SQL 中，你还是要确定大小写的规范，因为在 Linux 和 Windows 环境下，你可能会遇到不同的大小写问题。 <code>windows系统默认大小写不敏感</code> ，但是<code>linux系统是大小写敏感的</code>。</p> 
<p>通过如下命令查看</p> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%lower_case_table_names%'</span>
</code></pre> 
<ul><li>Windows系统下：<br> <img src="https://images2.imgbox.com/8b/2a/HyaKITWo_o.png" alt="在这里插入图片描述"></li><li>Linux系统下：<br> <img src="https://images2.imgbox.com/7c/c2/mijOJNxJ_o.png" alt="在这里插入图片描述"></li><li><code>lower_case_table_names</code>参数值的设置： 
  <ul><li><code>默认为0，大小写敏感</code>。</li><li><code>设置1，大小写不敏感</code>。创建的表，数据库都是以小写形式存放在磁盘上，对于sql语句都是转换为小写对表和数据库进行查找。</li><li>设置2，创建的表和数据库依据语句上格式存放，凡是查找都是转换为小写进行</li></ul> </li><li>两个平台上SQL大小写的区别具体来说：</li></ul> 
<p><mark>下面这个记住</mark></p> 
<blockquote> 
 <p><strong>MySQL在Linux下数据库名、表名、列名、别名大小写规则是这样的：<br> 1、数据库名、表名、表的别名、变量名是严格区分大小写的；<br> 2、关键字、函数名称在 SQL 中不区分大小写；<br> 3、列名（或字段名）与列的别名（或字段别名）在所有的情况下均是忽略大小写的；</strong><br> <code>MySQL在Windows的环境下全部不区分大小写</code></p> 
</blockquote> 
<h3><a id="2Linux_29"></a>2、Linux下大小写规则设置</h3> 
<p>当想设置为大小写不敏感时，要在 <code>my.cnf</code> 这个配置文件<code>[mysqld]</code> 中加入<br> l<code>ower_case_table_names=1</code> ，<strong>然后重启服务器。</strong></p> 
<ul><li> <p><mark>但是要在重启数据库实例之前就需要将原来的数据库和表转换为小写，否则将找不到数据库名</mark>。</p> </li><li> <p><code>此参数适用于MySQL5.7</code>。在MySQL 8下禁止在重新启动 MySQL 服务时将<code>lower_case_table_names</code> 设置成不同于初始化 MySQL 服务时设置的<code>lower_case_table_names</code> 值。</p> </li></ul> 
<p>如果非要将MySQL8设置为大小写不敏感，具体步骤为：</p> 
<pre><code class="prism language-bash"><span class="token number">1</span>、停止MySQL服务 
<span class="token number">2</span>、删除数据目录，即删除 /var/lib/mysql 目录 
<span class="token number">3</span>、在MySQL配置文件（ /etc/my.cnf ）中添加 <span class="token assign-left variable">lower_case_table_names</span><span class="token operator">=</span><span class="token number">1</span> 
<span class="token number">4</span>、启动MySQL服务
</code></pre> 
<h3><a id="3SQL_45"></a>3、SQL编写建议</h3> 
<blockquote> 
 <p><strong>1. 关键字和函数名称全部大写；<br> 2. 数据库名、表名、表别名、字段名、字段别名等全部小写；<br> 3. SQL 语句必须以分号结尾。</strong></p> 
</blockquote> 
<p>数据库名、表名和字段名在 Linux MySQL 环境下是区分大小写的，因此建议你统一这些字段的命名规则，比如全部采用小写的方式。</p> 
<p>虽然关键字和函数名称在 SQL 中不区分大小写，也就是如果小写的话同样可以执行。但是同时将关键词和函数名称全部大写，以便于区分数据库名、表名、字段名。</p> 
<h2><a id="sql_mode_54"></a>二、sql_mode的合理设置（了解即可,一般不动）</h2> 
<h3><a id="1__vs__55"></a>1、 宽松模式 vs 严格模式</h3> 
<blockquote> 
 <p>宽松模式</p> 
</blockquote> 
<p>如果设置的是宽松模式，那么我们在插入数据的时候，即便是给了一个错误的数据，也可能会被接受，并且不报错。</p> 
<p><code>举例</code>：我在创建一个表时，该表中有一个字段为<code>name</code>，给<code>name</code>设置的字段类型时 <code>char(10)</code>，如果我在插入数据的时候，其中<code>name</code>这个字段对应的有一条数据的 <code>长度超过了10</code> ，例如<code>'1234567890abc'</code>，超过了设定的字段长度10，那么不会报错，并且取前10个字符存上，也就是说你这个数据被存为了<code>'1234567890'</code>，而<code>'abc'</code>就没有了。但是，我们给的这条数据是错误的，因为超过了字段长度，但是并没有报错，并且mysql自行处理并接受了，这就是宽松模式的效果。</p> 
<p><code>应用场景</code> ：通过设置sql mode为宽松模式，来保证大多数sql符合标准的sql语法，这样应用在不同数据库之间进行 迁移 时，则不需要对业务sql 进行较大的修改。</p> 
<blockquote> 
 <p>严格模式</p> 
</blockquote> 
<p>出现上面宽松模式的错误，应该报错才对，所以<code>MySQL5.7</code>版本就将<code>sql_mode默认值改为了严格模式</code>。所以在 生产等环境 中，我们必须采用的是严格模式，进而 开发、测试环境 的数据库也必须要设置，这样在开发测试阶段就可以发现问题。并且我们即便是用的MySQL5.6，也应该自行将其改为严格模式。</p> 
<p><code>开发经验</code> ：MySQL等数据库总想把关于数据的所有操作都自己包揽下来，包括数据的校验，其实开发中，我们应该在自己 开发的项目程序级别将这些校验给做了 ，虽然写项目的时候麻烦了一些步骤，但是这样做之后，我们在进行数据库迁移或者在项目的迁移时，就会方便很多。</p> 
<p><strong>改为严格模式后可能会存在的问题：</strong></p> 
<p>若设置模式中包含了 <code>NO_ZERO_DATE</code> ，那么MySQL数据库不允许插入零日期，插入零日期会抛出错误而不是警告。例如，表中含字段TIMESTAMP列（如果未声明为NULL或显示DEFAULT子句）将自动分配DEFAULT ‘0000-00-00 00:00:00’（零时间戳），这显然是不满足sql_mode的NO_ZERO_DATE而报错。</p> 
<h3><a id="2_74"></a>2、模式查看和设置</h3> 
<blockquote> 
 <p>查看当前的sql_mode</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> @<span class="token variable">@session.sql_mode</span> 

<span class="token keyword">select</span> @<span class="token variable">@global.sql_mode</span> 

<span class="token comment">#或者</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'sql_mode'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/49/35/wyRT43bp_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>临时设置方式：设置当前窗口中设置sql_mode</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> sql_mode <span class="token operator">=</span> <span class="token string">'modes...'</span><span class="token punctuation">;</span> <span class="token comment">#全局 </span>

<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> sql_mode <span class="token operator">=</span> <span class="token string">'modes...'</span><span class="token punctuation">;</span> <span class="token comment">#当前会话</span>
</code></pre> 
<p><strong>举例：</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">#改为严格模式。此方法只在当前会话中生效，关闭当前会话就不生效了。 </span>
<span class="token keyword">set</span> <span class="token keyword">SESSION</span> sql_mode<span class="token operator">=</span><span class="token string">'STRICT_TRANS_TABLES'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">#改为严格模式。此方法在当前服务中生效，重启MySQL服务后失效。 </span>
<span class="token keyword">set</span> <span class="token keyword">GLOBAL</span> sql_mode<span class="token operator">=</span><span class="token string">'STRICT_TRANS_TABLES'</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>永久设置方式：在<code>/etc/my.cnf</code>中配置sql_mode</p> 
</blockquote> 
<p>在my.cnf文件(windows系统是my.ini文件)，新增</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span> <span class="token assign-left variable">sql_mode</span><span class="token operator">=</span>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR _DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION
</code></pre> 
<p>然后 <code>重启MySQL</code> 。</p> 
<p>当然生产环境上是禁止重启MySQL服务的，所以采用 <code>临时设置方式 + 永久设置方式</code>来解决线上的问题，那么即便是有一天真的重启了MySQL服务，也会永久生效了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/103831ecac48eba5002da496f07cb37f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">学生信息的那些操作：按姓名，查个人</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df6d3f46f42ae3e83eabb56ba8e04e4f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">信号槽机制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>