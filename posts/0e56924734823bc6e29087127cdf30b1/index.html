<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CVE-2019-0708漏洞 复现利用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CVE-2019-0708漏洞 复现利用" />
<meta property="og:description" content="这几天我研究了一下cve-2019-0708，一开始出错只能把win7打成蓝屏，但经过多次的更换靶机和攻击的试探最终功夫不负有心人，我利用cve-2020-0708终于拿到了win7的shell权限 演示步骤如下
首先搭建虚拟机漏洞环境：
靶机：win7旗舰版 IP：192.168.220.151
攻击机：kali2021 IP：192.168.220.148
靶机需要额外的内部环境配置，首先需要将靶机的防火墙关闭，其次将远程控制功能开启并允许所有机可以远程控制。然后将防火墙设置高级模式，在高级模式中的添加入站规则，设置新增端口3389开放并命名为ceshi。演示如图，依次排列
虚拟机环境搭建完成。
下面开始实验：
首先打开kali的msf（msfconsole），输入命令：search cve-2019-0708，得到漏洞模块（有一点就是我的kali是新版里面有漏洞模块，老版本的没有需要下载并更改。避免麻烦建议大家用新版本的）。第一个模块是检测靶机里有没有该漏洞。我们先检测输入命令： use auxiliary/scanner/rdp/cve_2019_0708_bluekeep
然后指定IP 输入 set RHOSTS 192.168.220.151 再输入 show options 查看攻击模块，确定之后最后输入命令运行。最后得到有该漏洞。演示图依次排列.
下面开始利用模块攻击，输入命令：use exploit/windows/rdp/cve_2019_0708_bluekeep_rce，其次查询攻击板块输入命令：show targets，然后确定板块之后我先输入的set target 1 我感觉不匹配于是改成 set target 4，接着指定IP 输入命令：set RHOSTS 192.168.220.151 最后运行 输入命令run 结果显示还是蓝屏于是我就尝试输入 set target 1 然后攻击。不料真的可以获取权限，得到shell权限可以使用命令shell提权查看IP是否是的,使用exit退出最高权限。使用 screenshot 命令截屏等等一些命令
漏洞修复：
及时打对应系统的安全补丁
关闭3389端口或添加防火墙安全策略限制对3389端口的访问
打不了补丁的可以开启远程桌面（网络级别身份验证(NLA)），可以临时防止漏洞攻击
本文只是我的愚见大佬不喜欢勿喷 此文仅供实验参考请勿做他用" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0e56924734823bc6e29087127cdf30b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-09T16:54:55+08:00" />
<meta property="article:modified_time" content="2022-03-09T16:54:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CVE-2019-0708漏洞 复现利用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:left;">这几天我研究了一下cve-2019-0708，一开始出错只能把win7打成蓝屏，但经过多次的更换靶机和攻击的试探最终功夫不负有心人，我利用cve-2020-0708终于拿到了win7的shell权限 演示步骤如下</p> 
<p> 首先搭建虚拟机漏洞环境：</p> 
<p style="margin-left:0;text-align:left;">靶机：win7旗舰版  IP：192.168.220.151</p> 
<p style="margin-left:0;text-align:left;">攻击机：kali2021  IP：192.168.220.148</p> 
<p style="margin-left:0;text-align:left;">靶机需要额外的内部环境配置，首先需要将靶机的防火墙关闭，其次将远程控制功能开启并允许所有机可以远程控制。然后将防火墙设置高级模式，在高级模式中的添加入站规则，设置新增端口3389开放并命名为ceshi。演示如图，依次排列<img alt="" height="334" src="https://images2.imgbox.com/50/1a/PCDqvnqf_o.png" width="585"><img alt="" height="362" src="https://images2.imgbox.com/70/7a/hBNTtUob_o.png" width="654"><img alt="" height="345" src="https://images2.imgbox.com/4f/a1/OYb7UjkR_o.png" width="575"></p> 
<p style="margin-left:0;text-align:left;">虚拟机环境搭建完成。</p> 
<p style="margin-left:0;text-align:left;">下面开始实验：</p> 
<p style="margin-left:0;text-align:left;">首先打开kali的msf（msfconsole），输入命令：search cve-2019-0708，得到漏洞模块（有一点就是我的kali是新版里面有漏洞模块，老版本的没有需要下载并更改。避免麻烦建议大家用新版本的）。第一个模块是检测靶机里有没有该漏洞。我们先检测输入命令： use auxiliary/scanner/rdp/cve_2019_0708_bluekeep</p> 
<p style="margin-left:0;text-align:left;">然后指定IP 输入 set RHOSTS 192.168.220.151  再输入 show options 查看攻击模块，确定之后最后输入命令运行。最后得到有该漏洞。演示图依次排列.</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="256" src="https://images2.imgbox.com/4d/9c/9hHOI9GV_o.png" width="654"><img alt="" height="364" src="https://images2.imgbox.com/68/31/dkqoQ7bZ_o.png" width="638"><img alt="" height="107" src="https://images2.imgbox.com/c0/6b/WrSoF29c_o.png" width="638"></p> 
<p style="margin-left:0;text-align:left;">下面开始利用模块攻击，输入命令：use exploit/windows/rdp/cve_2019_0708_bluekeep_rce，其次查询攻击板块输入命令：show targets，然后确定板块之后我先输入的set target 1 我感觉不匹配于是改成 set target 4，接着指定IP 输入命令：set RHOSTS 192.168.220.151 最后运行 输入命令run 结果显示还是蓝屏于是我就尝试输入 set target 1 然后攻击。不料真的可以获取权限，得到shell权限可以使用命令shell提权查看IP是否是的,使用exit退出最高权限。使用 screenshot 命令截屏等等一些命令</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="178" src="https://images2.imgbox.com/8f/48/F4vWHbtr_o.png" width="649"><img alt="" height="96" src="https://images2.imgbox.com/09/11/2uPzeDYl_o.png" width="637">  <img alt="" height="69" src="https://images2.imgbox.com/5d/d3/JnjUomt6_o.png" width="649"><img alt="" height="116" src="https://images2.imgbox.com/3b/2b/1ySAKZxS_o.png" width="586"><img alt="" height="125" src="https://images2.imgbox.com/cc/57/dlNa3Jbx_o.png" width="533"><img alt="" height="39" src="https://images2.imgbox.com/d1/a6/wyL1ZUEp_o.png" width="265"><img alt="" height="34" src="https://images2.imgbox.com/0a/77/Idfo8t8N_o.png" width="526"></p> 
<p><strong> 漏洞修复</strong>：</p> 
<p>及时打对应系统的安全补丁<br> 关闭3389端口或添加防火墙安全策略限制对3389端口的访问<br> 打不了补丁的可以开启远程桌面（网络级别身份验证(NLA)），可以临时防止漏洞攻击</p> 
<p>                                                                    本文只是我的愚见大佬不喜欢勿喷                                                                                                          <strong>此文仅供实验参考请勿做他用</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e3a1db112d5906a4881c08d9d35cee18/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">oracle基础常用命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45cb7c3054e21780f3f60151fe7b574d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">resnet18到resnet152模型pytorch实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>