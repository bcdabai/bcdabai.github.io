<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mvvm light入门 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mvvm light入门" />
<meta property="og:description" content="WPF / MVVM快速入门教程 假设你有C＃的一个体面的理解，在WPF中起步并不太难。我开始看WPF前一阵子，并没有找到很多有用的MVVM教程。希望这篇文章解决了。
如同学习任何新的技术，你得到事后的好处。从我的角度来看，在WPF中几乎每一个教程中，我已经遇到不足以几个原因：
· 这个例子是所有在XAML。
· 这个例子掩盖了，将真正使您的生活更轻松的关键事实。
· 该示例尝试炫耀的WPF/ XAML的功能有很多毫无意义的效果，不帮助你。
· 该示例使用有出现过于相似，框架的关键字和类别，并因此难以确定在（XAML）代码作为用户定义（该属性的类ListBox中的GroupStyle的名称属性是一个完整的头疼的新手）。
因此，要解决这个问题，我写此基础上我本来希望找到的＃1命中谷歌上键入“WPF教程”之后。本文可能不是100％正确的，甚至做的事情“唯一正确的方法”，但它会说明，我想我已经找到一个地方3个月前的要点。
我会很快推出一些主题，然后表明，解释或说明每个点的例子。因此，我还没有真正试图使图形用户界面漂亮，这不是本文的点（见上面的要点）。
由于本教程是相当长的，我已经省略为简便起见，相当多的代码，所以请下载附件中的压缩文件，并查看示例（。NET4.0/VS2010）。每个例子的基础上的前一个。
基础知识 1. 在有关WPF最重要的是数据绑定。总之，你有一些数据，通常以某种形式的集合，并且要显示给用户。你可以&#39;绑定&#39;你的XAML来的数据。
2. WPF中有两个部分，其中描述你的GUI布局和效果的XAML和代码隐藏一个被捆绑到XAML。
3. 最巧妙的也可能是最可重用的方式来组织你的代码是使用&#39;MVVM图案：模型，视图，视图模型。这可确保您的浏览包含极少（或根本没有）代码的目的，而应该是XAML的唯一。
该关键点，你需要知道 1. 你应该使用来保存你的数据的收集是的ObservableCollection &lt;&gt; 。不是一个列表，而不是一个字典，而是一个的ObservableCollection。这个词&#39; 可察觉 &#39;是线索在这里：WPF窗口需要能够“看到”您的数据收集。此集合类实现WPF使用某些接口。
2. 每个WPF控件（包括“窗口的）有一个&#39; 的DataContext &#39;和收集控件有一个&#39; 的ItemsSource “属性绑定到。
3. “该接口INotifyPropertyChanged的 &#39;将被广泛用于通信的图形用户界面和代码之间的数据进行任何修改。
例1：按自己（主要是）错误的 以最好的方式开始就是一个例子。我们将开始与宋级，而不是通常的人物类。我们可以安排成歌曲专辑，或者一个大的集合，或者艺术家。一个简单的松类将如下所示：
收起| 复制代码
public class Song { #region Members string _artistName; string _songTitle; #endregion #region Properties /// The artist name. public string ArtistName { get { return _artistName; } set { _artistName = value; } } /// The song title." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/35a87928fb2f25afdd9982c50bbaa016/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-20T10:06:32+08:00" />
<meta property="article:modified_time" content="2013-12-20T10:06:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mvvm light入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:#333333">WPF / MVVM</span><span style="color:#333333">快速入门教程</span></h2> 
<p><span style="color:#111111">假设你有</span><span style="color:#111111">C</span><span style="color:#111111">＃的一个体面的理解，在</span><span style="color:#111111">WPF</span><span style="color:#111111">中起步并不太难。我开始看</span><span style="color:#111111">WPF</span><span style="color:#111111">前一阵子，并没有找到很多有用的</span><span style="color:#111111">MVVM</span><span style="color:#111111">教程。希望这篇文章解决了。</span></p> 
<p><span style="color:#111111">如同学习任何新的技术，你得到事后的好处。从我的角度来看，在</span><span style="color:#111111">WPF</span><span style="color:#111111">中几乎每一个教程中，我已经遇到不足以几个原因：</span></p> 
<p align="left"><span style="color:#111111">·                                </span><span style="color:#111111">这个例子是所有在</span><span style="color:#111111">XAML</span><span style="color:#111111">。</span></p> 
<p align="left"><span style="color:#111111">·                                </span><span style="color:#111111">这个例子掩盖了，将真正使您的生活更轻松的关键事实。</span></p> 
<p align="left"><span style="color:#111111">·                                </span><span style="color:#111111">该示例尝试炫耀的</span><span style="color:#111111">WPF/ XAML</span><span style="color:#111111">的功能有很多毫无意义的效果，不帮助你。</span></p> 
<p align="left"><span style="color:#111111">·                                </span><span style="color:#111111">该示例使用有出现过于相似，框架的关键字和类别，并因此难以确定在（</span><span style="color:#111111">XAML</span><span style="color:#111111">）代码作为用户定义（该属性的类</span><code><span style="color:#990000">ListBox</span></code><code><span style="color:#990000">中的</span></code><code><span style="color:#990000">GroupStyle</span></code><span style="color:#111111">的</span><code><span style="color:#990000">名称</span></code><span style="color:#111111">属性是一个完整的头疼的新手）。</span></p> 
<p><span style="color:#111111">因此，要解决这个问题，我写此基础上我本来希望找到的＃</span><span style="color:#111111">1</span><span style="color:#111111">命中谷歌上键入</span><span style="color:#111111">“WPF</span><span style="color:#111111">教程</span><span style="color:#111111">”</span><span style="color:#111111">之后。本文可能不是</span><span style="color:#111111">100</span><span style="color:#111111">％正确的，甚至做的事情</span><span style="color:#111111">“</span><span style="color:#111111">唯一正确的方法</span><span style="color:#111111">”</span><span style="color:#111111">，但它会说明，我想我已经找到一个地方</span><span style="color:#111111">3</span><span style="color:#111111">个月前的要点。</span></p> 
<p><span style="color:#111111">我会很快推出一些主题，然后表明，解释或说明每个点的例子。因此，我还没有真正试图使图形用户界面漂亮，这不是本文的点（见上面的要点）。</span></p> 
<p><strong><span style="color:#111111">由于本教程是相当长的，我已经省略为简便起见，相当多的代码，所以请下载附件中的压缩文件，并查看示例（。</span><span style="color:#111111">NET4.0/VS2010</span><span style="color:#111111">）。</span></strong><span style="color:#111111">每个例子的基础上的前一个。</span></p> 
<h4><span style="color:#666666">基础知识</span></h4> 
<p align="left"><span style="color:#111111">1.                              </span><span style="color:#111111">在有关</span><span style="color:#111111">WPF</span><span style="color:#111111">最重要的是数据绑定。总之，你有一些数据，通常以某种形式的集合，并且要显示给用户。你可以</span><span style="color:#111111">'</span><span style="color:#111111">绑定</span><span style="color:#111111">'</span><span style="color:#111111">你的</span><span style="color:#111111">XAML</span><span style="color:#111111">来的数据。</span></p> 
<p align="left"><span style="color:#111111">2.                              </span><span style="color:#111111">WPF</span><span style="color:#111111">中有两个部分，其中描述你的</span><span style="color:#111111">GUI</span><span style="color:#111111">布局和效果的</span><span style="color:#111111">XAML</span><span style="color:#111111">和代码隐藏一个被捆绑到</span><span style="color:#111111">XAML</span><span style="color:#111111">。</span></p> 
<p align="left"><span style="color:#111111">3.                              </span><span style="color:#111111">最巧妙的也可能是最可重用的方式来组织你的代码是使用</span><span style="color:#111111">'MVVM</span><span style="color:#111111">图案：模型，视图，视图模型。这可确保您的浏览包含极少（或根本没有）代码的目的，而应该是</span><span style="color:#111111">XAML</span><span style="color:#111111">的唯一。</span></p> 
<h4><span style="color:#666666">该关键点，你需要知道</span></h4> 
<p align="left"><span style="color:#111111">1.                              </span><span style="color:#111111">你应该使用来保存你的数据的收集是</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ObservableCollection &lt;&gt;</span></code><span style="color:#990000"> </span><span style="color:#111111">。不是一个</span><code><span style="color:#990000">列表</span></code><span style="color:#111111">，而不是一个</span><code><span style="color:#990000">字典</span></code><span style="color:#111111">，而是一个</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ObservableCollection</span></code><span style="color:#111111">。这个词</span><span style="color:#111111">' </span><code><span style="color:#990000">可察觉</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">是线索在这里：</span><span style="color:#111111">WPF</span><span style="color:#111111">窗口需要能够</span><span style="color:#111111">“</span><span style="color:#111111">看到</span><span style="color:#111111">”</span><span style="color:#111111">您的数据收集。此集合类实现</span><span style="color:#111111">WPF</span><span style="color:#111111">使用某些接口。</span></p> 
<p align="left"><span style="color:#111111">2.                              </span><span style="color:#111111">每个</span><span style="color:#111111">WPF</span><span style="color:#111111">控件（包括</span><span style="color:#111111">“</span><span style="color:#111111">窗口的）有一个</span><span style="color:#111111">' </span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">DataContext</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">和</span><code><span style="color:#990000">收集</span></code><span style="color:#111111">控件有一个</span><span style="color:#111111">' </span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ItemsSource</span></code><span style="color:#111111"> </span><span style="color:#111111">“</span><span style="color:#111111">属性绑定到。</span></p> 
<p align="left"><span style="color:#111111">3.                              </span><span style="color:#111111">“</span><span style="color:#111111">该接口</span><code><span style="color:#990000">INotifyPropertyChanged</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">将被广泛用于通信的图形用户界面和代码之间的数据进行任何修改。</span></p> 
<h3><span style="color:#FF9900">例</span><span style="color:#FF9900">1</span><span style="color:#FF9900">：按自己（主要是）错误的</span></h3> 
<p><span style="color:#111111">以最好的方式开始就是一个例子。我们将开始与</span><code><span style="color:#990000">宋</span></code><span style="color:#111111">级，而不是通常的</span><code><span style="color:#990000">人物</span></code><span style="color:#111111">类。我们可以安排成歌曲专辑，或者一个大的集合，或者艺术家。一个简单的</span><code><span style="color:#990000">松</span></code><span style="color:#111111">类将如下所示：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">  <span style="color:blue">public</span> <span style="color:blue">class</span> Song</pre> 
 <pre style="background:#FBEDBB">    {<!-- --></pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Members</pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">string</span> _artistName;</pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">string</span> _songTitle;</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Properties</pre> 
 <pre style="background:#FBEDBB">        <span style="color:gray">///</span><em><span style="color:green"> The artist name.</span></em></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> <span style="color:blue">string</span> ArtistName</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span> { <span style="color:blue">return</span> _artistName; }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span> { _artistName = value; }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:gray">///</span><em><span style="color:green"> The song title.</span></em></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> <span style="color:blue">string</span> SongTitle</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span> { <span style="color:blue">return</span> _songTitle; }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span> { _songTitle = value; }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB">    }</pre> 
 <pre style="background:#FBEDBB"> </pre> 
</div> 
<p><span style="color:#111111">在</span><span style="color:#111111">WPF</span><span style="color:#111111">中的术语，这是我们的</span><span style="color:#111111">'</span><span style="color:#111111">模式</span><span style="color:#111111">'</span><span style="color:#111111">。图形用户界面是我们的</span><span style="color:#111111">“</span><span style="color:#111111">查看</span><span style="color:#111111">”</span><span style="color:#111111">。这些数据结合在一起神奇的是我们的</span><span style="color:#111111">'</span><span style="color:#111111">视图模型</span><span style="color:#111111">“</span><span style="color:#111111">，这实际上只是一个适配器，把我们的型号到的东西，</span><span style="color:#111111">WPF</span><span style="color:#111111">框架可以使用。因此，只是为了重申一下，这是我们的</span><span style="color:#111111">'</span><span style="color:#111111">模式</span><span style="color:#111111">'</span><span style="color:#111111">。</span></p> 
<p><span style="color:#111111">既然我们已经创建了一个</span><code><span style="color:#990000">歌</span></code><span style="color:#111111">作为一个引用类型，拷贝很便宜，光记忆。我们可以创建</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111">很容易。我们首先需要考虑的是，什么是我们要（潜在的）显示？假设我们只关心</span><code><span style="color:#990000">歌曲</span></code><span style="color:#111111">的歌手名，而不是</span><code><span style="color:#990000">歌曲</span></code><span style="color:#111111">的标题，然后</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111">可以定义如下：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">public</span> <span style="color:blue">class</span> SongViewModel</pre> 
 <pre style="background:#FBEDBB">{<!-- --></pre> 
 <pre style="background:#FBEDBB">    Song _song;</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> Song Song</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span></pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                <span style="color:blue">return</span> _song;</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span></pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                _song = value;</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> <span style="color:blue">string</span> ArtistName</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span> { <span style="color:blue">return</span> Song.ArtistName; }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span> { Song.ArtistName = value; }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">}</pre> 
</div> 
<p><span style="color:#111111">不同之处在于，这是不太正确的。因为我们揭露的属性在我们的</span><code><span style="color:#990000">视图模型</span></code><span style="color:#111111">，我们显然希望更改了</span><code><span style="color:#990000">歌曲</span></code><span style="color:#111111">中的代码用来被在</span><span style="color:#111111">GUI</span><span style="color:#111111">中自动显示，反之亦然的艺术家的名字：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">SongViewModel song = ...;</pre> 
 <pre style="background:#FBEDBB"><em><span style="color:green">// ... enable the databinding ...</span></em></pre> 
 <pre style="background:#FBEDBB"><em><span style="color:green">//  change the name</span></em></pre> 
 <pre style="background:#FBEDBB">song.ArtistName = <span style="color:purple">"Elvis"</span>;</pre> 
 <pre style="background:#FBEDBB"><em><span style="color:green">//  the gui should change</span></em></pre> 
</div> 
<p><span style="color:#111111">请注意，在这里所有的例子中，我们创建我们的视图模型</span><span style="color:#111111">*</span><span style="color:#111111">声明</span><span style="color:#111111">*</span><span style="color:#111111">，也就是说，我们为此在</span><span style="color:#111111">XAML</span><span style="color:#111111">中：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"> <span style="color:blue">&lt;</span><span style="color:maroon">Window</span> <span style="color:red">x:Class</span><span style="color:blue">="Example1.MainWindow"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">xmlns:local</span><span style="color:blue">="clr-namespace:Example1"&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;</span><span style="color:maroon">Window.DataContext</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <em><span style="color:green">&lt;!-- Declaratively create an instance of our SongViewModel </span></em><span style="color:blue">--&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">local:SongViewModel</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;/</span><span style="color:maroon">Window.DataContext</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
</div> 
<p><span style="color:#111111">这相当于在您的代码隐藏这样</span><em><span style="color:#111111">MainWindow.cs</span></em><span style="color:#111111">：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">    <span style="color:blue">public</span> <span style="color:blue">partial</span> <span style="color:blue">class</span> MainWindow : Window</pre> 
 <pre style="background:#FBEDBB">    {<!-- --></pre> 
 <pre style="background:#FBEDBB">        SongViewModel _viewModel = <span style="color:blue">new</span> SongViewModel();</pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> MainWindow()</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            InitializeComponent();</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">base</span>.DataContext = _viewModel;</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">    }</pre> 
</div> 
<p><span style="color:#111111">和删除您</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">DataContext</span></code><span style="color:#111111">元素在</span><span style="color:#111111">XAML</span><span style="color:#111111">：</span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">&lt;</span><span style="color:maroon">Window</span> <span style="color:red">x:Class</span><span style="color:blue">="Example1.MainWindow"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">xmlns:local</span><span style="color:blue">="clr-namespace:Example1"&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <em><span style="color:green">&lt;!--  no data context </span></em><span style="color:blue">--&gt;</span></pre> 
</div> 
<p><span style="color:#111111">这是我们的观点：</span></p> 
<p></p> 
<p><strong><span style="color:#111111">点击该按钮不会更新任何内容，因为我们还没有完全实现数据绑定</span></strong><span style="color:#111111">。</span></p> 
<h4><span style="color:#666666">数据绑定</span></h4> 
<p><span style="color:#111111">还记得我说过的，我会选择突出的一个属性开始。在这个例子中，我们要显示的</span><code><span style="color:#990000">ArtistName</span></code><span style="color:#111111">。我选择了这个名字，因为它是<strong>不</strong></span>一样的任何<span style="color:#111111">WPF</span><span style="color:#111111">属性。还有的例子是选择在网络上无数</span><code><span style="color:#990000">人</span></code><span style="color:#111111">类，然后一个</span><code><span style="color:#990000">名称</span></code><span style="color:#111111">属性（该</span><code><span style="color:#990000">名称</span></code><span style="color:#111111">属性存在多个。</span><span style="color:#111111">NET WPF</span><span style="color:#111111">类）。也许是文章的作者根本没有意识到，这是对初学者特别混乱（谁是，奇怪的是，目标受众这些文章）。</span></p> 
<p><span style="color:#111111">有几十个有关数据绑定在那里的其他文章，所以我就不在这里。我希望这个例子是如此微不足道，你可以看到正在发生的事情。</span></p> 
<p><span style="color:#111111">绑定到</span><code><span style="color:#990000">ArtistName</span></code><span style="color:#111111">对我们的财产</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111">，我们简单地做到这一点的</span><em><span style="color:#111111">MainWindow.xaml</span></em><span style="color:#111111">：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">   <span style="color:blue">&lt;</span><span style="color:maroon">Label</span> <span style="color:red">Content</span><span style="color:blue">="{Binding ArtistName}"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
</div> 
<p><span style="color:#111111">在</span><span style="color:#111111">' </span><code><span style="color:#990000">绑定</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">关键字绑定控件的内容，在这种情况下，</span><code><span style="color:#990000">标签</span></code><span style="color:#111111">，物业</span><span style="color:#111111">' </span><code><span style="color:#990000">ArtistName</span></code><span style="color:#111111">通过返回的对象</span><span style="color:#111111">“ </span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">DataContext</span></code><span style="color:#111111">。正如你看到的上面，我们设置我们</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">DataContext</span></code><span style="color:#111111">的实例</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111">，因此我们正在有效地显示</span><code><span style="color:#990000">_songViewModel.ArtistName</span></code><span style="color:#111111">的</span><code><span style="color:#990000">标签</span></code><span style="color:#111111">。</span></p> 
<p><span style="color:#111111">再次：<strong>单击该按钮不会更新任何事情，因为我们还没有完全实现数据绑定。</strong></span><strong><span style="color:#111111">GUI</span><span style="color:#111111">是没有收到该属性已更改的任何通知</span></strong><span style="color:#111111">。</span></p> 
<h3><span style="color:#FF9900">实施例</span><span style="color:#FF9900">2</span><span style="color:#FF9900">：</span><span style="color:#FF9900">INotifyPropertyChanged</span><span style="color:#FF9900">的</span></h3> 
<p><span style="color:#111111">这是我们必须实现的巧妙命名接口：</span><code><span style="color:#990000">INotifyPropertyChanged</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">。因为它说，实现该接口的类，通</span><span style="color:#111111"> ​​</span><span style="color:#111111">知当一个属性已经改变了任何侦听器。因此，我们需要修改我们的</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111">类多一点点：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">public</span> <span style="color:blue">class</span> SongViewModel : INotifyPropertyChanged</pre> 
 <pre style="background:#FBEDBB">    {<!-- --></pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Construction</pre> 
 <pre style="background:#FBEDBB">        <span style="color:gray">///</span><em><span style="color:green"> Constructs the default instance of a SongViewModel</span></em></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> SongViewModel()</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            _song = <span style="color:blue">new</span> Song { ArtistName = <span style="color:purple">"Unknown"</span>, SongTitle = <span style="color:purple">"Unknown"</span> };</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Members</pre> 
 <pre style="background:#FBEDBB">        Song _song;</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Properties</pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> Song Song</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span></pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                <span style="color:blue">return</span> _song;</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span></pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                _song = value;</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> <span style="color:blue">string</span> ArtistName</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">get</span> { <span style="color:blue">return</span> Song.ArtistName; }</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">set</span></pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                <span style="color:blue">if</span> (Song.ArtistName != value)</pre> 
 <pre style="background:#FBEDBB">                {<!-- --></pre> 
 <pre style="background:#FBEDBB">                    Song.ArtistName = value;</pre> 
 <pre style="background:#FBEDBB">                    RaisePropertyChanged(<span style="color:purple">"ArtistName"</span>);</pre> 
 <pre style="background:#FBEDBB">                }</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> INotifyPropertyChanged Members</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> <span style="color:blue">event</span> PropertyChangedEventHandler PropertyChanged;</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Methods</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">private</span> <span style="color:blue">void</span> RaisePropertyChanged(<span style="color:blue">string</span> propertyName)</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            <em><span style="color:green">// take a copy to prevent thread issues</span></em></pre> 
 <pre style="background:#FBEDBB">            PropertyChangedEventHandler handler = PropertyChanged;</pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">if</span> (handler != <span style="color:blue">null</span>)</pre> 
 <pre style="background:#FBEDBB">            {<!-- --></pre> 
 <pre style="background:#FBEDBB">                handler(<span style="color:blue">this</span>, <span style="color:blue">new</span> PropertyChangedEventArgs(propertyName));</pre> 
 <pre style="background:#FBEDBB">            }</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB">    }</pre> 
</div> 
<p><span style="color:#111111">有几件事情现在发生在这里。首先，我们要检查一下，如果我们要真正改变属性：这个稍微提高性能的更复杂的对象。其次，如果该值发生了变化，我们调高</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">PropertyChanged</span></code><span style="color:#111111">事件，任何侦听器。</span></p> 
<p><span style="color:#111111">所以，现在我们有一个</span><code><span style="color:#990000">模型</span></code><span style="color:#111111">，和一个</span><code><span style="color:#990000">视图模型</span></code><span style="color:#111111">。我们只需要定义我们的</span><code><span style="color:#990000">视图</span></code><span style="color:#111111">。这仅仅是我们的</span><code><span style="color:#990000">主窗口</span></code><span style="color:#111111">：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">&lt;</span><span style="color:maroon">Window</span> <span style="color:red">x:Class</span><span style="color:blue">="Example2.MainWindow"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">xmlns</span><span style="color:blue">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">xmlns:x</span><span style="color:blue">="http://schemas.microsoft.com/winfx/2006/xaml"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">xmlns:local</span><span style="color:blue">="clr-namespace:Example2"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">Title</span><span style="color:blue">="Example 2"</span>  <span style="color:red">SizeToContent</span><span style="color:blue">="WidthAndHeight"</span> <span style="color:red">ResizeMode</span><span style="color:blue">="NoResize"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">Height</span><span style="color:blue">="350"</span> <span style="color:red">Width</span><span style="color:blue">="525"&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;</span><span style="color:maroon">Window.DataContext</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <em><span style="color:green">&lt;!-- Declaratively create an instance of our SongViewModel </span></em><span style="color:blue">--&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">local:SongViewModel</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;/</span><span style="color:maroon">Window.DataContext</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;</span><span style="color:maroon">Grid</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Grid.RowDefinitions</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">&lt;</span><span style="color:maroon">RowDefinition</span> <span style="color:red">Height</span><span style="color:blue">="Auto"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">&lt;</span><span style="color:maroon">RowDefinition</span> <span style="color:red">Height</span><span style="color:blue">="Auto"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">&lt;</span><span style="color:maroon">RowDefinition</span> <span style="color:red">Height</span><span style="color:blue">="Auto"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;/</span><span style="color:maroon">Grid.RowDefinitions</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Grid.ColumnDefinitions</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">&lt;</span><span style="color:maroon">ColumnDefinition</span> <span style="color:red">Width</span><span style="color:blue">="Auto"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">            <span style="color:blue">&lt;</span><span style="color:maroon">ColumnDefinition</span> <span style="color:red">Width</span><span style="color:blue">="Auto"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;/</span><span style="color:maroon">Grid.ColumnDefinitions</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Label</span> <span style="color:red">Grid.Column</span><span style="color:blue">="0"</span> <span style="color:red">Grid.Row</span><span style="color:blue">="0"</span> <span style="color:red">Content</span><span style="color:blue">="Example 2 - this works!"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Label</span> <span style="color:red">Grid.Column</span><span style="color:blue">="0"</span> <span style="color:red">Grid.Row</span><span style="color:blue">="1"</span> <span style="color:red">Content</span><span style="color:blue">="Artist:  "</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Label</span> <span style="color:red">Grid.Column</span><span style="color:blue">="1"</span> <span style="color:red">Grid.Row</span><span style="color:blue">="1"</span> <span style="color:red">Content</span><span style="color:blue">="{Binding ArtistName}"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">&lt;</span><span style="color:maroon">Button</span> <span style="color:red">Grid.Column</span><span style="color:blue">="1"</span> <span style="color:red">Grid.Row</span><span style="color:blue">="2"</span> <span style="color:red">Name</span><span style="color:blue">="ButtonUpdateArtist"</span></pre> 
 <pre style="background:#FBEDBB">        <span style="color:red">Content</span><span style="color:blue">="Update Artist Name"</span> <span style="color:red">Click</span><span style="color:blue">="ButtonUpdateArtist_Click"</span> <span style="color:blue">/&gt;</span></pre> 
 <pre style="background:#FBEDBB">    <span style="color:blue">&lt;/</span><span style="color:maroon">Grid</span><span style="color:blue">&gt;</span></pre> 
 <pre style="background:#FBEDBB"><span style="color:blue">&lt;/</span><span style="color:maroon">Window</span><span style="color:blue">&gt;</span></pre> 
</div> 
<p><span style="color:#111111">要测试的数据绑定，我们可以采取传统的方式，创建一个按钮和线到其</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">OnClick</span></code><span style="color:#111111">事件，所以上面的</span><span style="color:#111111">XAML</span><span style="color:#111111">有一个按钮，</span><code><span style="color:#990000">点击</span></code><span style="color:#111111">事件，给后面的代码：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">    <span style="color:blue">public</span> <span style="color:blue">partial</span> <span style="color:blue">class</span> MainWindow : Window</pre> 
 <pre style="background:#FBEDBB">    {<!-- --></pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Members</pre> 
 <pre style="background:#FBEDBB">        SongViewModel _viewModel;</pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">int</span> _count = <span style="color:navy">0</span>;</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">public</span> MainWindow()</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            InitializeComponent();</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">            <em><span style="color:green">//  We have declared the view model instance declaratively in the xaml.</span></em></pre> 
 <pre style="background:#FBEDBB">            <em><span style="color:green">//  Get the reference to it here, so we can use it in the button click event.</span></em></pre> 
 <pre style="background:#FBEDBB">            _viewModel = (SongViewModel)<span style="color:blue">base</span>.DataContext;</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB">        <span style="color:blue">private</span> <span style="color:blue">void</span> ButtonUpdateArtist_Click(<span style="color:blue">object</span> sender, RoutedEventArgs e)</pre> 
 <pre style="background:#FBEDBB">        {<!-- --></pre> 
 <pre style="background:#FBEDBB">            ++_count;</pre> 
 <pre style="background:#FBEDBB">            _viewModel.ArtistName = <span style="color:blue">string</span>.Format(<span style="color:purple">"Elvis ({0})"</span>, _count);</pre> 
 <pre style="background:#FBEDBB">        }</pre> 
 <pre style="background:#FBEDBB">    }    </pre> 
 <pre style="background:#FBEDBB"> </pre> 
</div> 
<p><span style="color:#111111">这是确定的，但它不是我们应该如何使用</span><span style="color:#111111">WPF</span><span style="color:#111111">：首先，我们增加了我们的</span><span style="color:#111111">'</span><span style="color:#111111">更新艺术家的逻辑到我们的后台代码。它不属于那里。该</span><code><span style="color:#990000">窗口</span></code><span style="color:#111111">类是关注的窗口。第二个问题是，假设我们要移动逻辑上的</span><span style="color:#111111">*</span><span style="color:#111111">键</span><span style="color:#111111">*</span><span style="color:#111111">单击事件到不同的控制，例如，使一个菜单项。这意味着我们将</span><span style="color:#111111">cut'n'pasting</span><span style="color:#111111">，和编辑在多个地方。</span></p> 
<p><span style="color:#111111">这里是我们改进的视图，其中点击现在工作：</span></p> 
<p></p> 
<h3><span style="color:#FF9900">例</span><span style="color:#FF9900">3</span><span style="color:#FF9900">：命令</span></h3> 
<p><span style="color:#111111">绑定到</span><span style="color:#111111">GUI</span><span style="color:#111111">事件是有问题的。</span><span style="color:#111111">WPF</span><span style="color:#111111">为您提供一个更好的办法。这是</span><code><span style="color:#990000">ICommand</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">。许多控件有一个</span><code><span style="color:#990000">命令</span></code><span style="color:#111111">属性。这些服从同样的方式绑定</span><code><span style="color:#990000">内容</span></code><span style="color:#111111">和</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ItemsSource</span></code><span style="color:#111111">，除非你需要将其绑定到一个</span><span style="color:#111111">*</span><span style="color:#111111">属性</span><span style="color:#111111">*</span><span style="color:#111111">返回一个</span><code><span style="color:#990000">ICommand</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">。为此，我们正在寻找在这里简单的例子，我们只需要实现一个简单的类称为</span><span style="color:#111111">“ </span><code><span style="color:#990000">RelayCommand</span></code><span style="color:#111111"> </span><span style="color:#111111">“</span><span style="color:#111111">实现</span><code><span style="color:#990000">ICommand</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">。</span></p> 
<p><code><span style="color:#990000">ICommand</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">需要用户定义了两个方法：</span><code><span style="color:#990000">BOOL CanExecute</span></code><span style="color:#111111">和</span><code><span style="color:#990000">无效执行</span></code><span style="color:#111111">。该</span><code><span style="color:#990000">CanExecute</span></code><span style="color:#111111">方法真的只是说给用户，我可以执行这个命令？这是用于控制您可以执行</span><span style="color:#111111">GUI</span><span style="color:#111111">操作的上下文中。在我们的例子中，我们不关心，所以我们返回</span><code><span style="color:#990000">真</span></code><span style="color:#111111">，这意味着该框架可以随时拨打我们的</span><span style="color:#111111">' </span><code><span style="color:#990000">执行</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">的方法。这可能是因为你有一个情况下，你必须绑定到按钮的命令，如果你选择在一个列表中的项目也只能执行。你会实现这个逻辑在</span><span style="color:#111111">“ </span><code><span style="color:#990000">CanExecute</span></code><span style="color:#111111"> </span><span style="color:#111111">'</span><span style="color:#111111">方法。</span></p> 
<p><span style="color:#111111">既然我们要重用</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ICommand</span></code><span style="color:#111111">代码，我们使用</span><code><span style="color:#990000">RelayCommand</span></code><span style="color:#111111">包含所有我们不想继续写作的重复代码类。</span></p> 
<p><span style="color:#111111">要显示它是多么容易重用</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ICommand</span></code><span style="color:#111111">，我们绑定更新艺术家命令两个按钮和一个菜单项。请注意，我们不再绑定到特定的按钮的</span><span style="color:#111111">Click</span><span style="color:#111111">事件，或特定的菜单</span><span style="color:#111111">Click</span><span style="color:#111111">事件。</span></p> 
<p></p> 
<h3><span style="color:#FF9900">实施例</span><span style="color:#FF9900">4</span><span style="color:#FF9900">：框架</span></h3> 
<p><span style="color:#111111">现在，如果你已经仔细阅读，你可能会注意到，有很多这仅仅是重复的代码：养</span><span style="color:#111111">INPC</span><span style="color:#111111">，或创建命令。这主要是样板，并为</span><span style="color:#111111">INPC</span><span style="color:#111111">，我们可以将其移动到基类，我们称之为</span><span style="color:#111111">' </span><code><span style="color:#990000">ObservableObject</span></code><span style="color:#111111"> </span><span style="color:#111111">“</span><span style="color:#111111">。对于</span><code><span style="color:#990000">RelayCommand</span></code><span style="color:#111111">类，我们只是移动了到我们的。</span><span style="color:#111111">NET</span><span style="color:#111111">类库。这是怎么回事的</span><span style="color:#111111">MVVM</span><span style="color:#111111">框架，你发现在网络上开始（棱镜，</span><span style="color:#111111">Caliburn</span><span style="color:#111111">等）。</span></p> 
<p><span style="color:#111111">至于</span><code><span style="color:#990000">ObservableObject</span></code><span style="color:#111111">和</span><code><span style="color:#990000">RelayCommand</span></code><span style="color:#111111">类而言，他们是相当基本的和重构的必然结果。不出所料，这些类是几乎相同的那些由</span><span style="color:#111111"><a target="_blank" href="http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030" rel="nofollow noopener noreferrer"><span style="color:purple">约什</span></a></span><span style="color:purple">-</span><span style="color:purple">史密斯</span><span style="color:#111111">。</span></p> 
<p><span style="color:#111111">因此，我们将这些类放到一个小的类库，我们可以在未来重复使用。</span></p> 
<p><span style="color:#111111">该视图看起来非常像以前一样：</span></p> 
<p></p> 
<h3><span style="color:#FF9900">例</span><span style="color:#FF9900">5</span><span style="color:#FF9900">：歌曲的集合，这样做是错误</span></h3> 
<p><span style="color:#111111">正如我以前说过，为了显示项目的集合在你的</span><code><span style="color:#990000">视图</span></code><span style="color:#111111">（即</span><span style="color:#111111">XAML</span><span style="color:#111111">）中，你需要使用一个</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ObservableCollection</span></code><span style="color:#111111">。在这个例子中，我们创建了一个</span><code><span style="color:#990000">AlbumViewModel</span></code><span style="color:#111111">，这很好地收集我们的歌曲一起的东西，人们明白了。我们还介绍了一个简单的歌曲资料库，纯粹的，所以我们可以很快产生一些歌曲信息这个例子。</span></p> 
<p><span style="color:#111111">你的第一次尝试可能如下所示：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB">  <span style="color:blue">class</span> AlbumViewModel</pre> 
 <pre style="background:#FBEDBB">    {<!-- --></pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#region</span> Members</pre> 
 <pre style="background:#FBEDBB">        ObservableCollection&lt;Song&gt; _songs = <span style="color:blue">new</span> ObservableCollection&lt;Song&gt;();</pre> 
 <pre style="background:#FBEDBB">        <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB">    }</pre> 
</div> 
<p><span style="color:#111111">你可能会想：</span><span style="color:#111111">“</span><span style="color:#111111">我有一个不同的视图模型这一次，我想显示的歌曲作为</span><code><span style="color:#990000">AlbumViewModel</span></code><span style="color:#111111">，而不是一个</span><code><span style="color:#990000">SongViewModel</span></code><span style="color:#111111"> </span><span style="color:#111111">“</span><span style="color:#111111">。</span><span style="color:#111111">我们还创建了一些更</span><code><span style="color:#990000">个</span></code><code><span style="color:#990000">ICommand</span></code><span style="color:#111111">，并将其附加在某些按钮：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">public</span> ICommand AddAlbumArtist {}</pre> 
 <pre style="background:#FBEDBB"> </pre> 
 <pre style="background:#FBEDBB"><span style="color:blue">public</span> ICommand UpdateAlbumArtists {}</pre> 
</div> 
<p><span style="color:#111111">在这个例子中，点击</span><span style="color:#111111">“</span><span style="color:#111111">添加艺术家的工作正常。但点击</span><span style="color:#111111">“</span><span style="color:#111111">更新艺术家的名字</span><span style="color:#111111">'</span><span style="color:#111111">，失败。如果你读了黄色突出显示记下这个上</span><span style="color:#111111"><a target="_blank" href="http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&amp;l=EN-US&amp;k=k%28%22SYSTEM.COLLECTIONS.OBJECTMODEL.OBSERVABLECOLLECTION%601%22%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&amp;rd=true" rel="nofollow noopener noreferrer"><span style="color:purple">页</span></a></span><span style="color:purple">MSDN</span><span style="color:purple">上</span><span style="color:#111111">，它解释了为什么：</span></p> 
<p><span style="color:#111111">全面支持从源对象绑定到绑定目标传输数据值，在您的收藏支持可绑定属性的每个对象都必须实现适当的属性更改通知机制，如</span><code><span style="color:#990000">INotifyPropertyChanged</span></code><code><span style="color:#990000">的</span></code><span style="color:#111111">接口。</span></p> 
<p><span style="color:#111111">我们的观点是这样的：</span></p> 
<p></p> 
<h3><span style="color:#FF9900">例</span><span style="color:#FF9900">6</span><span style="color:#FF9900">：歌曲的集合，正道</span></h3> 
<p><span style="color:#111111">在这最后的例子中，我们修复</span><code><span style="color:#990000">AlbumViewModel</span></code><span style="color:#111111">有一个</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ObservableCollection</span></code><span style="color:#111111">的</span><code><span style="color:#990000">SongViewModels</span></code><span style="color:#111111">我们前面创建：</span></p> 
<p align="right"><span style="color:#005782">收起</span><span style="color:#005782">| </span><span style="color:#005782"><a target="_blank" href="http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial" rel="nofollow noopener noreferrer"><span style="color:purple">复制代码</span></a></span></p> 
<div style="background:#FBEDBB"> 
 <pre style="background:#FBEDBB"><span style="color:blue">class</span> AlbumViewModel</pre> 
 <pre style="background:#FBEDBB">{<!-- --></pre> 
 <pre style="background:#FBEDBB">    <span style="color:navy">#region</span> Members</pre> 
 <pre style="background:#FBEDBB">    ObservableCollection&lt;SongViewModel&gt; _songs = <span style="color:blue">new</span> ObservableCollection&lt;SongViewModel&gt;();</pre> 
 <pre style="background:#FBEDBB">    <span style="color:navy">#endregion</span></pre> 
 <pre style="background:#FBEDBB">    <em><span style="color:green">//  code elided for brevity</span></em></pre> 
 <pre style="background:#FBEDBB">}</pre> 
</div> 
<p><span style="color:#111111">现在，我们所有的按钮绑定到命令我们收集工作。<strong>我们的代码隐藏在</strong></span><em><strong><span style="color:#111111">MainWindow.cs</span></strong></em><strong><span style="color:#111111">仍然是完全空的。</span></strong></p> 
<p><span style="color:#111111">我们的观点是这样的：</span></p> 
<h3><span style="color:#FF9900">结论</span></h3> 
<h4><span style="color:#666666">实例化你的视图模型</span></h4> 
<p><span style="color:#111111">最后一点是值得一提的是，当你声明你</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ViewModel</span></code><span style="color:#111111">在</span><span style="color:#111111">XAML</span><span style="color:#111111">中声明，你不能传递任何参数：换句话说，你</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ViewModel</span></code><span style="color:#111111">必须有一个隐含的或明确的默认构造函数。你如何添加状态到您的</span><code><span style="color:#990000">视图模型</span></code><span style="color:#111111">是由你。您可能会发现更容易申报</span><code><span style="color:#990000">的</span></code><code><span style="color:#990000">ViewModel</span></code><span style="color:#111111">在</span><em><span style="color:#111111">MainWindow.cs</span></em><span style="color:#111111">代码隐藏，在那里你可以通过在施工参数。</span></p> 
<h4><span style="color:#666666">其他框架</span></h4> 
<p><span style="color:#111111">有很多其他的</span><span style="color:#111111"><a target="_blank" href="http://www.google.co.uk/search?q=mvvm+framework&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-GB:official&amp;client=firefox-a" rel="nofollow noopener noreferrer"><span style="color:purple">MVVM</span><span style="color:purple">框架</span></a></span><span style="color:#111111">的完全不同的复杂性和功能性，针对</span><span style="color:#111111">WPF</span><span style="color:#111111">，</span><span style="color:#111111">WP7</span><span style="color:#111111">，</span><span style="color:#111111">Silverlight</span><span style="color:#111111">和三者的任意组合。</span></p> 
<h4><span style="color:#666666">终于</span><span style="color:#666666">...</span></h4> 
<p><span style="color:#111111; background:#C9D7F1">但愿这六个例子显示你是多么容易使用</span><span style="color:#111111; background:#C9D7F1">MVVM</span><span style="color:#111111; background:#C9D7F1">写一个</span><span style="color:#111111; background:#C9D7F1">WPF</span><span style="color:#111111; background:#C9D7F1">应用程序。</span><span style="color:#111111">我一直试图掩盖一切，我觉得是很重要的，而且往往在多篇文章中讨论的要点。</span></p> 
<p><span style="color:#111111">如果您发现这篇文章有帮助，请随时投起来</span><span style="color:#111111">​​</span><span style="color:#111111">。</span></p> 
<p><span style="color:#111111">如果您发现本文中的故障，还是我说的任何错误，或您有其他问题的时候，请在下面留下解释为什么一个评论，你将如何解决它。</span></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea36aa4864cae574f41214b0a5eb6208/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java Thread.yield详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2bdc85f2017c8edb418b8c137415e117/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">学习mvvm的好帖子</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>