<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GitHub Actions入门教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GitHub Actions入门教程" />
<meta property="og:description" content="GitHub Actions入门教程 GitHub Marketplace · Actions to improve your workflow · GitHub
概述 GitHub Actions 是一个持续集成和持续交付(CI/CD)平台，允许您自动化构建、测试和部署流水线。您可以创建工作流来构建和测试存储库中的每个请求，或者将合并的请求部署到生产环境中。
GitHub Actions 组件 Workflows 工作流 工作流是一个可配置的自动化流程，它将运行一个或多个作业。工作流是由签入存储库的 YAML 文件定义的，并且在由 repository 中的事件触发时运行，或者可以手动触发，或者按照定义的时间表运行。
工作流在.github/workflows 目录中定义, 并且存储库可以有多个工作流，每个工作流可以执行不同的任务集。例如，您可以使用一个工作流来构建和测试拉请求，使用另一个工作流在每次创建发行版时部署您的应用程序，还可以使用另一个工作流在每次有人打开新问题时添加标签。
Events 事件 事件是存储库中触发工作流运行的特定活动。例如，活动可以来自 GitHub 创建请求(pull request)、打开问题(open an issue)或向存储库提交(push an commit)。您还可以通过向 REST API 发布或手动触发按计划运行的工作流。
Jobs 作业 作业是工作流中在同一运行程序上执行的一组步骤。每个步骤要么是将要执行的 shell 脚本，要么是将要运行的操作。步骤按顺序执行，并相互依赖。由于每个步骤都在同一个运行程序上执行，因此可以将数据从一个步骤共享到另一个步骤。例如，您可以有一个生成应用程序的步骤，然后有一个测试生成的应用程序的步骤。
Actions 动作 动作是 GitHub Actions 平台的自定义应用程序，它执行复杂但经常重复的任务。使用一个操作来帮助减少在工作流文件中编写的重复代码的数量。操作可以从 GitHub 获取 git 存储库，为构建环境设置正确的工具链，或者为云提供商设置身份验证o
Runners 运行器 运行器是在工作流被触发时运行它们的服务器。每个运行器可以一次运行一个作业。GitHub 提供 Ubuntu Linux、 Microsoft Windows 和 macOS 运行程序来运行您的工作流; 每个工作流运行在一个全新的、新配置的虚拟机中执行。GitHub 还提供了更大的运行器，可以进行更大的配置。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d23c4f3a6d0c0b3479da2493d4f6637a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-30T11:05:00+08:00" />
<meta property="article:modified_time" content="2022-12-30T11:05:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GitHub Actions入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="GitHub_Actions_0"></a>GitHub Actions入门教程</h2> 
<p><a href="https://github.com/marketplace?type=actions">GitHub Marketplace · Actions to improve your workflow · GitHub</a></p> 
<h3><a id="_4"></a>概述</h3> 
<p>GitHub Actions 是一个持续集成和持续交付(CI/CD)平台，允许您自动化构建、测试和部署流水线。您可以创建工作流来构建和测试存储库中的每个请求，或者将合并的请求部署到生产环境中。</p> 
<h3><a id="GitHub_Actions__8"></a>GitHub Actions 组件</h3> 
<ol><li>Workflows 工作流</li></ol> 
<p>工作流是一个可配置的自动化流程，它将运行一个或多个作业。工作流是由签入存储库的 YAML 文件定义的，并且在由 repository 中的事件触发时运行，或者可以手动触发，或者按照定义的时间表运行。</p> 
<p>工作流在<code>.github/workflows</code> 目录中定义, 并且存储库可以有多个工作流，每个工作流可以执行不同的任务集。例如，您可以使用一个工作流来构建和测试拉请求，使用另一个工作流在每次创建发行版时部署您的应用程序，还可以使用另一个工作流在每次有人打开新问题时添加标签。</p> 
<ol start="2"><li>Events 事件</li></ol> 
<p>事件是存储库中触发工作流运行的特定活动。例如，活动可以来自 GitHub 创建请求(<code>pull request</code>)、打开问题(<code>open an issue</code>)或向存储库提交(<code>push an commit</code>)。您还可以通过向 REST API 发布或手动触发按计划运行的工作流。</p> 
<ol start="3"><li>Jobs 作业</li></ol> 
<p>作业是工作流中在同一运行程序上执行的一组步骤。每个步骤要么是将要执行的 shell 脚本，要么是将要运行的操作。步骤按顺序执行，并相互依赖。由于每个步骤都在同一个运行程序上执行，因此可以将数据从一个步骤共享到另一个步骤。例如，您可以有一个生成应用程序的步骤，然后有一个测试生成的应用程序的步骤。</p> 
<ol start="4"><li>Actions 动作</li></ol> 
<p>动作是 GitHub Actions 平台的自定义应用程序，它执行复杂但经常重复的任务。使用一个操作来帮助减少在工作流文件中编写的重复代码的数量。操作可以从 GitHub 获取 git 存储库，为构建环境设置正确的工具链，或者为云提供商设置身份验证o</p> 
<ol start="5"><li>Runners 运行器</li></ol> 
<p>运行器是在工作流被触发时运行它们的服务器。每个运行器可以一次运行一个作业。GitHub 提供 Ubuntu Linux、 Microsoft Windows 和 macOS 运行程序来运行您的工作流; 每个工作流运行在一个全新的、新配置的虚拟机中执行。GitHub 还提供了更大的运行器，可以进行更大的配置。</p> 
<hr> 
<h3><a id="Context__35"></a>Context 上下文</h3> 
<p>具体可看 <a href="https://docs.github.com/en/actions/learn-github-actions/contexts" rel="nofollow">Contexts - GitHub Docs</a></p> 
<hr> 
<h4><a id="_41"></a>概念</h4> 
<p>Context 上下文就是工作流各个步骤的信息。例如<code>env.sha</code>，就是自己设置的环境变量里面的<code>sha</code>变量。</p> 
<hr> 
<h4><a id="Context__47"></a>Context 上下文的种类</h4> 
<p>上下文种类和工作流步骤相关</p> 
<p>共有十一种:</p> 
<p><code>github、env、job、jobs、steps、runner、secrets、strategy、matrix、needs、inputs</code></p> 
<hr> 
<h4><a id="_57"></a>访问上下文</h4> 
<p>你可以使用表达式语法访问上下文。</p> 
<p><code>${<!-- -->{ &lt;context&gt;.&lt;attribute&gt; }}</code> 或 <code>${<!-- -->{ &lt;context&gt;[attribute]}}</code></p> 
<hr> 
<h4><a id="secrets_65"></a><code>secrets</code>上下文</h4> 
<p><code>secrets</code>可以通过仓库里的设置栏Actions选项进行设置。<br> <img src="https://images2.imgbox.com/85/a6/pF7eXOYt_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="_73"></a>工作流示例</h3> 
<h4><a id="1__75"></a>1. 创建文件目录</h4> 
<p>在仓库中，创建<code>.github/workflow/</code>目录来存储工作流文件。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-dTqkORYs-1672369344358)(file:///home/hhoa/文档/blog/assets/2022-12-22-19-00-28-image.png?msec=1672369340086)]</p> 
<h4><a id="2__81"></a>2. 配置工作流文件</h4> 
<h5><a id="_83"></a>主要工作流文件</h5> 
<p>用于触发的工作流、对照下面的可复用工作流</p> 
<blockquote> 
 <p>deploy-project.yml</p> 
</blockquote> 
<pre><code class="prism language-yml"><span class="token comment"># 工作流名称</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy Project

<span class="token comment"># 工作流触发设置</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># push进入仓库时触发</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token comment"># 分支条件设置</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> main

<span class="token comment"># 工作流作业</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># 作业名称</span>
  <span class="token key atrule">deploy-project</span><span class="token punctuation">:</span>
    <span class="token comment"># 使用可复用工作流</span>
    <span class="token comment"># 也可以通过GitHub仓库引用自己或其他人的工作流</span>
    <span class="token key atrule">uses</span><span class="token punctuation">:</span> ./.github/workflows/deploy.yml
    <span class="token comment"># 使用策略复用工作流，例如它会并发执行project-name为vblog-server-admin、</span>
    <span class="token comment"># vblog-server-portal、vblog-server-search 的作业，</span>
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token comment"># 矩阵，就是搭配出各种可能，依次复用，可以有多维矩阵</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token comment"># 矩阵的一行，行名称用于引用（可以有多行，多列）</span>
        <span class="token key atrule">project-name</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> vblog<span class="token punctuation">-</span>server<span class="token punctuation">-</span>admin<span class="token punctuation">,</span> vblog<span class="token punctuation">-</span>server<span class="token punctuation">-</span>portal<span class="token punctuation">,</span> vblog<span class="token punctuation">-</span>server<span class="token punctuation">-</span>search <span class="token punctuation">]</span>
    <span class="token comment"># 发送过去的普通属性</span>
    <span class="token key atrule">with</span><span class="token punctuation">:</span>
      <span class="token comment"># 引用上面的矩阵</span>
      <span class="token key atrule">project-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> matrix.project<span class="token punctuation">-</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment"># 秘密，秘密可以在仓库中设置，可复用工作流要获取秘密属性，只能通过这里传播过去之后获取</span>
    <span class="token key atrule">secrets</span><span class="token punctuation">:</span>
      <span class="token comment"># server-host是自定义的秘密名，后面为引用仓库的秘密</span>
      <span class="token key atrule">server-host</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.SERVER_HOST <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">mysql-root-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.MYSQL_ROOT_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">jwt-secret</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.JWT_SECRET <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">elastic-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.ELASTIC_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">docker-username</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.DOCKER_USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">docker-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.DOCKER_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_130"></a>可复用工作流文件</h5> 
<p>可复用工作流顾名思义就是可以复用的工作流、对照上面的主工作流</p> 
<p>官方可复用工作流平台 https://github.com/marketplace/actions</p> 
<p>能用平台上面的可复用工作流就用平台上面的可复用工作流。</p> 
<blockquote> 
 <p>deploy.yml</p> 
</blockquote> 
<pre><code class="prism language-yml"><span class="token comment"># 工作流名称</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy

<span class="token comment"># 设置触发条件</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># 说明该工作流为可复用工作流（可被其他工作流引用）</span>
  <span class="token key atrule">workflow_call</span><span class="token punctuation">:</span>
    <span class="token comment"># 定义参数，就和函数参数一样</span>
    <span class="token comment"># function inputs(string project-name){}</span>
    <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
      <span class="token comment"># 自定义参数名</span>
      <span class="token key atrule">project-name</span><span class="token punctuation">:</span>
        <span class="token comment"># 设置是否必须</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token comment"># 类型（必要）</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token comment"># 安全参数，只能</span>
    <span class="token key atrule">secrets</span><span class="token punctuation">:</span>
      <span class="token comment"># 自定义参数名</span>
      <span class="token key atrule">server-host</span><span class="token punctuation">:</span>
        <span class="token comment"># 是否必须</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">mysql-root-password</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">jwt-secret</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">elastic-password</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">docker-username</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">docker-password</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment"># 工作流作业</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># 自定义作业名称</span>
  <span class="token key atrule">check-update</span><span class="token punctuation">:</span>
    <span class="token comment"># 运行时名称</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Check if the project is updated
    <span class="token comment"># 运行的操作系统</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token comment"># 其他作业能从该作业获取的变量设置</span>
    <span class="token key atrule">outputs</span><span class="token punctuation">:</span>
      <span class="token comment"># 自定义变量, 该变量为步骤2输出的 'is_update' 变量</span>
      <span class="token key atrule">is_update</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> steps.step2.outputs.is_update <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment"># 设置步骤名称</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 步骤 id 用于上面的outputs</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> step1
        <span class="token comment"># 步骤名</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Check out the repository
        <span class="token comment"># 复用其他仓库的工作流 "actions/checkout"，该工作流的作用是拉取最近仓库的代码</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
        <span class="token comment"># 设置输入到复用工作流属性</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 拉取仓库的深度，这是 "actions/checkout" 工作流规定的</span>
          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">2</span>
      <span class="token comment"># 步骤 id 用于上面的outputs</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> step2
        <span class="token comment"># 步骤名</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> Check out project update
        <span class="token comment"># 在设置的操作系统的 shell 或 bash 上运行脚本，该脚本的功能是检测传入项目是否更新</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          if [ -n "$(git diff HEAD^ -- ${<!-- -->{ inputs.project-name }})" ];
          then
            echo "is_update=true" &gt;&gt; $GITHUB_OUTPUT
          fi</span>
  <span class="token comment"># 自定义作业名称</span>
  <span class="token key atrule">push-to-docker-registry</span><span class="token punctuation">:</span>
    <span class="token comment"># 依赖 check-update， 只有check-update 运行完才开始启动</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> check<span class="token punctuation">-</span>update
    <span class="token comment"># 运行时名称</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Build<span class="token punctuation">,</span> test and push docker image to docker hub
    <span class="token comment"># 运行的操作系统</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token comment"># 运行条件，这里使用了上面作业输出的 is_update变量</span>
    <span class="token key atrule">if</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> needs.check<span class="token punctuation">-</span>update.outputs.is_update == 'true' <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token comment"># 设置步骤名称</span>
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 使用可复用工作流，拉取最新代码</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Check out the repo
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
      <span class="token comment"># 使用可复用工作流，安装JDK17</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up JDK 17
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>java@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">java-version</span><span class="token punctuation">:</span> <span class="token string">'17'</span>
          <span class="token key atrule">distribution</span><span class="token punctuation">:</span> <span class="token string">'adopt'</span>
      <span class="token comment"># 验证gradle包是否错误</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout gradle
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> gradle/wrapper<span class="token punctuation">-</span>validation<span class="token punctuation">-</span>action@v1
      <span class="token comment"># 安装Gradle</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Gradle
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> gradle/gradle<span class="token punctuation">-</span>build<span class="token punctuation">-</span>action@v2
      <span class="token comment"># 运行Gradle进行构建</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run build with Gradle wrapper
        <span class="token comment"># 设置进行构建时的环境变量，环境变量会输入运行操作系统的环境变量中</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># 这里通过主工作流输入的秘密设置环境变量</span>
          <span class="token key atrule">SERVER_HOST</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.server<span class="token punctuation">-</span>host <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.mysql<span class="token punctuation">-</span>root<span class="token punctuation">-</span>password  <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">JWT_SECRET</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.jwt<span class="token punctuation">-</span>secret <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">ELASTIC_PASSWORD</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.elastic<span class="token punctuation">-</span>password <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          ./gradlew :${<!-- -->{ inputs.project-name }}:build;</span>
      <span class="token comment"># 上传构建完成后的报告</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload build reports
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">name</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>reports
          <span class="token key atrule">path</span><span class="token punctuation">:</span> build/reports/
      <span class="token comment"># 登陆Docker Hub</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Login to Docker Hub
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.docker<span class="token punctuation">-</span>username <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.docker<span class="token punctuation">-</span>password <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token comment"># 获取Docker tags和 labels</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Extract metadata (tags<span class="token punctuation">,</span> labels) for Docker
        <span class="token key atrule">id</span><span class="token punctuation">:</span> meta
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/metadata<span class="token punctuation">-</span>action@98669ae865ea3cffbcbaa878cf57c20bbf1c6c38
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">images</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> secrets.docker<span class="token punctuation">-</span>username <span class="token punctuation">}</span><span class="token punctuation">}</span>/$<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> inputs.project<span class="token punctuation">-</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token comment"># 通过上面步骤获取的tags和labels构建docker 镜像</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build and push Docker image
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">context</span><span class="token punctuation">:</span> ./$<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> inputs.project<span class="token punctuation">-</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">tags</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> steps.meta.outputs.tags <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">labels</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> steps.meta.outputs.labels <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<h4><a id="3__273"></a>3. 推送代码，工作流自动运行</h4> 
<h4><a id="4__275"></a>4. 查看工作流</h4> 
<p>当您的工作流被触发时，将创建一个执行该工作流的工作流运行。工作流运行开始后，您可以看到运行进度的可视化图表，并在 GitHub 上查看每个步骤的活动。<br> <img src="https://images2.imgbox.com/8a/36/0Kly1Kkb_o.png" alt="请添加图片描述"></p> 
<p><img src="https://images2.imgbox.com/82/3d/pcCVPnUi_o.png" alt="请添加图片描述"></p> 
<h3><a id="httpsimgblogcsdnimgcn7326de3a8d6b445a959af2d57f7ad867png_282"></a><img src="https://images2.imgbox.com/51/7e/PCWru6fB_o.png" alt="请添加图片描述"></h3> 
<h3><a id="_285"></a>参考</h3> 
<ol><li> <p><a href="https://docs.github.com/zh/actions" rel="nofollow">GitHub Actions文档 - GitHub Docs</a></p> </li><li> <p><a href="https://github.com/marketplace?type=actions">GitHub Marketplace · Actions to improve your workflow · GitHub</a></p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/50b8d3279cae579645486291400c7b45/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【娱乐大闯关】C语言实现奖牌榜文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b277d364fc48dc949c97f2d4e02b14a9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">kafka日志清理策略</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>