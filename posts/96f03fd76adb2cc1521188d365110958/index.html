<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库的索引原理、聚簇索引与非聚簇索引的区别、索引结构的各自优势、索引的设计原则 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库的索引原理、聚簇索引与非聚簇索引的区别、索引结构的各自优势、索引的设计原则" />
<meta property="og:description" content="数据库的索引原理 索引作用
索引是用来快速查找特定值的记录。如果没有索引、一般来说执行查询时会遍历整个表。索引就是把无须的数据变成有序的，然后提高查询效率。
索引原理
1、把创建了索引的列进行排序
2、对排序结构生成倒排表
3、在倒排内容中拼接对应的数据地址
4、查询时先拿到倒排表的内容，再取出数据地址，然后在拿到具体的数据
聚簇索引与非聚簇索引 聚簇索引
聚簇索引是索引与数据存储在一块，并且是按顺序存储的。查询到聚簇索引就可以直接获取数据，不需要进行二次查询。使用范围查询速度效率高，其数据是可以按照大小排序的，因为是有序的也更合适这排序场合使用。相对来说维护成本高，特别是插入新数据或者更新导致要分页时。还有使用随机ID做主键时，导致数据稀疏导致效率很低。辅助索引存的是主键值，如果参数过大会导致占用磁盘空间过多
非聚簇索引
非聚簇索引中，索引与数据是分离的，索引中存储的是内存地址，也就是每次索引后需要进行二次查询。以书本的目录为例子，我们看到目录中想要的内容在这多少页以后，还需要自己再次翻页过去。但是维护成本低，因为不会存储数据
Hash索引结构与B&#43;Tree索引结构 Hash索引
当查询都为单个查询，例如说 ID=3这种，hash索引的效率是非常高的。但是这范围查询的情况下，因为hash索引是无序的，效率就低了。如果出现hash冲突的，还会有一个维护的链表进行检索。例如下图中，有两个key的hash值都是152，此时将会有一个自己维护的链表进行遍历，如果出现大量冲突时效率也会降低很多
B&#43;Tree
B&#43;Tree是一个平衡的多叉树，也就是一个父节点可以对应多个子节点。每个节点的高度不会超过1，而且同级别节点有指针相连，也就是从根节点到子叶子节点效率是基本差不多的，幅度不会太大。做顺序扫描时，也就是范围值查询时，可以进行双向移动指针，效率非常高
索引的设计原则 1、索引的列是出现这where子句中的列，或是链接子句中的列
2、数据量小的表没有必要建立索引，因为索引本身也会有一个索引表需要维护
3、尽量使用短索引，也就是字符数量较少的，如果需要使用长字符串做索引，那就使用前缀索引，这样减少索引空间使用
4、不要过度索引，索引也是需要维护的，索引过多维护成本也会增加
5、这定义外键的数据列上建立索引
6、更新频繁的字段不适合做索引
7、那些很少查询的列，重复值较多的列没有必要建索引
8、列辨识度不是很高，不能有效区分数据的列没有必要建立索引，比如说性别" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/96f03fd76adb2cc1521188d365110958/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-01T23:45:59+08:00" />
<meta property="article:modified_time" content="2021-06-01T23:45:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库的索引原理、聚簇索引与非聚簇索引的区别、索引结构的各自优势、索引的设计原则</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>数据库的索引原理</h3> 
<p><strong>索引作用</strong><br> 索引是用来快速查找特定值的记录。如果没有索引、一般来说执行查询时会遍历整个表。索引就是把无须的数据变成有序的，然后提高查询效率。</p> 
<p><strong>索引原理</strong><br> 1、把创建了索引的列进行排序<br> 2、对排序结构生成倒排表<br> 3、在倒排内容中拼接对应的数据地址<br> 4、查询时先拿到倒排表的内容，再取出数据地址，然后在拿到具体的数据</p> 
<h3><a id="_10"></a>聚簇索引与非聚簇索引</h3> 
<p><strong>聚簇索引</strong><br> 聚簇索引是索引与数据存储在一块，并且是按顺序存储的。查询到聚簇索引就可以直接获取数据，不需要进行二次查询。使用范围查询速度效率高，其数据是可以按照大小排序的，因为是有序的也更合适这排序场合使用。相对来说维护成本高，特别是插入新数据或者更新导致要分页时。还有使用随机ID做主键时，导致数据稀疏导致效率很低。辅助索引存的是主键值，如果参数过大会导致占用磁盘空间过多</p> 
<p><strong>非聚簇索引</strong><br> 非聚簇索引中，索引与数据是分离的，索引中存储的是内存地址，也就是每次索引后需要进行二次查询。以书本的目录为例子，我们看到目录中想要的内容在这多少页以后，还需要自己再次翻页过去。但是维护成本低，因为不会存储数据</p> 
<h3><a id="HashBTree_17"></a>Hash索引结构与B+Tree索引结构</h3> 
<p><strong>Hash索引</strong><br> 当查询都为单个查询，例如说 ID=3这种，hash索引的效率是非常高的。但是这范围查询的情况下，因为hash索引是无序的，效率就低了。如果出现hash冲突的，还会有一个维护的链表进行检索。例如下图中，有两个key的hash值都是152，此时将会有一个自己维护的链表进行遍历，如果出现大量冲突时效率也会降低很多<br> <img src="https://images2.imgbox.com/9c/35/vtL587Ds_o.png" alt="在这里插入图片描述"></p> 
<p><strong>B+Tree</strong><br> B+Tree是一个平衡的多叉树，也就是一个父节点可以对应多个子节点。每个节点的高度不会超过1，而且同级别节点有指针相连，也就是从根节点到子叶子节点效率是基本差不多的，幅度不会太大。做顺序扫描时，也就是范围值查询时，可以进行双向移动指针，效率非常高<br> <img src="https://images2.imgbox.com/98/ff/wFiNTCaQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_26"></a>索引的设计原则</h3> 
<p>1、索引的列是出现这where子句中的列，或是链接子句中的列<br> 2、数据量小的表没有必要建立索引，因为索引本身也会有一个索引表需要维护<br> 3、尽量使用短索引，也就是字符数量较少的，如果需要使用长字符串做索引，那就使用前缀索引，这样减少索引空间使用<br> 4、不要过度索引，索引也是需要维护的，索引过多维护成本也会增加<br> 5、这定义外键的数据列上建立索引<br> 6、更新频繁的字段不适合做索引<br> 7、那些很少查询的列，重复值较多的列没有必要建索引<br> 8、列辨识度不是很高，不能有效区分数据的列没有必要建立索引，比如说性别</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f8cb7a90a13f18cc8ba902ba2933ec2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python自学书籍推荐：从入门到精通，这三本书就够了！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/660b0048baa2d35b8759722f9563cdef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小米电视4a刷鸿蒙,小米电视4A精简系统教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>