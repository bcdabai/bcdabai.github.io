<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言实现扫雷【超详细讲解】 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言实现扫雷【超详细讲解】" />
<meta property="og:description" content="目录
一、实现扫雷的基本思路
二、代码实现的具体步骤
三、完整代码
1、saolei.h部分
2、saolei.c部分
3、test.c部分
扫雷和三子棋有很多相似的地方，相信大家认真学习完三子棋再将本篇博客认真学习完，会很好的掌握相关的知识，融会贯通
一、实现扫雷的基本思路 1、创建菜单
2、实现switch case语句，进行游戏或退出游戏的选择
3、选择进行游戏，实现游戏的代码
4、游戏部分创建两个二维数组，分别是mine和show数组。mine数组是有关炸弹的数组，有炸弹的位置是1，没有炸弹的位置是0；show数组是查找炸弹的数组，不知道的位置是‘*’，查出来的位置的数字是周围的炸弹个数
5、初始化这两个二维数组，mine数组初始化为‘0’，show数组初始化为‘*’
6、打印棋盘，每次输入坐标后都打印一次棋盘，以便观察
7、实现布置雷的操作：和三子棋一样需要rand（头文件：stdlib.h）和time（头文件：time.h），结合使用可以使电脑随机布置雷
8、实现排查雷的操作：玩家输入一个坐标，若踩雷则会提醒游戏结束；若未踩雷，则在show数组中的相应位置中显示周围一圈雷的个数
9、在游戏结束后，继续打印选择的菜单，由玩家决定是否继续进行游戏
二、代码实现的具体步骤 1、创建如下所示的三个部分：
2、 同样在saolei.h中引用头文件，在saolei.c和test.c中只需要引用saolei.h即可
3、在test.c中创建main函数及test函数的switch case语句
4、创建简易的菜单
5、扫雷标准是9行9列，但是由于考虑到靠边的坐标计算周围的地雷数时，还需要不包括越界的地方，所以将两个数组都扩大一圈，就不会有这方面的困扰了，即变为了11行11列的二维数组，使用宏定义的方式分别定义ROW9，COL9，ROWS11，COLS11，以及设置的地雷数MINE_COUNT10
6、test.c中game函数的实现（依然是先完成框架的梳理，再具体实现） 7、在saolei.c中具体实现game函数中的要求（在saolei.h中声明，在saolei.c中实现），下面第一个图片即为声明，第二个图片为函数的实现 （1）、数组初始化函数的实现
（2）、打印棋盘
在9×9的棋盘上方和左方，分别打印一行和一列的数字，方便玩家读取第几行第几列的准确坐标
（3）、布置地雷
在test函数中添加：
（4）、排查地雷
在排查雷函数中，需要用到统计雷个数的函数Find_count，如下：
三、完整代码 1、saolei.h部分 #pragma once #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;time.h&gt; #define ROWS 11 #define COLS 11 #define ROW 9 #define COL 9 #define MINE_COUNT 10 //数组的初始化函数 void Init_board(char arr[ROWS][COLS], int rows, int cols, char set); //打印棋盘 void Display_board(char arr[ROWS][COLS], int row, int col); //布置地雷的函数 void Set_mine(char mine[ROWS][COLS], int row, int col); //排查地雷 void Find_mine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col); 2、saolei." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c489b7202cf9643349cd89f8742f9fa4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-09T16:20:22+08:00" />
<meta property="article:modified_time" content="2022-07-09T16:20:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言实现扫雷【超详细讲解】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%AE%9E%E7%8E%B0%E6%89%AB%E9%9B%B7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%AE%9E%E7%8E%B0%E6%89%AB%E9%9B%B7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF" rel="nofollow">一、实现扫雷的基本思路</a></p> 
<p id="%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4" rel="nofollow">二、代码实现的具体步骤</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" rel="nofollow">三、完整代码</a></p> 
<p id="1%E3%80%81saolei.h%E9%83%A8%E5%88%86-toc" style="margin-left:80px;"><a href="#1%E3%80%81saolei.h%E9%83%A8%E5%88%86" rel="nofollow">1、saolei.h部分</a></p> 
<p id="2%E3%80%81saolei.c%E9%83%A8%E5%88%86-toc" style="margin-left:80px;"><a href="#2%E3%80%81saolei.c%E9%83%A8%E5%88%86" rel="nofollow">2、saolei.c部分</a></p> 
<p id="3%E3%80%81test.c%E9%83%A8%E5%88%86-toc" style="margin-left:80px;"><a href="#3%E3%80%81test.c%E9%83%A8%E5%88%86" rel="nofollow">3、test.c部分</a></p> 
<hr> 
<p><span style="color:#333333;"><strong>扫雷和三子棋</strong></span>有很多相似的地方，相信大家认真学习完三子棋再将本篇博客认真学习完，会很好的掌握相关的知识，融会贯通</p> 
<hr> 
<p></p> 
<blockquote> 
 <h2 id="%E4%B8%80%E3%80%81%E5%AE%9E%E7%8E%B0%E6%89%AB%E9%9B%B7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%9D%E8%B7%AF">一、实现扫雷的基本思路</h2> 
 <p>1、创建菜单</p> 
 <p>2、实现<span style="color:#ff9900;"><strong>switch case</strong></span>语句，进行游戏或退出游戏的选择</p> 
 <p>3、选择进行游戏，实现游戏的代码</p> 
 <p>4、游戏部分创建两个二维数组，分别是<span style="color:#38d8f0;"><strong>mine和show数组</strong></span>。<strong><span style="color:#956fe7;">mine数组是有关炸弹的数组</span></strong>，有炸弹的位置是1，没有炸弹的位置是0；<span style="color:#956fe7;"><strong>show数组是查找炸弹的数组</strong></span>，不知道的位置是‘*’，查出来的位置的数字是周围的炸弹个数</p> 
 <p>5、初始化这两个二维数组，<span style="color:#fe2c24;"><strong>mine数组初始化为‘0’，show数组初始化为‘*’</strong></span></p> 
 <p>6、打印棋盘，每次输入坐标后都打印一次棋盘，以便观察</p> 
 <p>7、实现布置雷的操作：和三子棋一样需要<strong>rand（头文件：stdlib.h）和time（头文件：time.h），</strong>结合使用可以使电脑<span style="color:#511b78;"><strong>随机布置雷</strong></span></p> 
 <p>8、实现排查雷的操作：玩家输入一个坐标，若踩雷则会提醒游戏结束；若未踩雷，则在show数组中的相应位置中<span style="color:#fe2c24;"><strong>显示周围一圈雷的个数</strong></span></p> 
 <p>9、在游戏结束后，<strong>继续打印</strong>选择的菜单，由玩家决定是否继续进行游戏</p> 
</blockquote> 
<hr> 
<blockquote> 
 <h2 id="%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4">二、代码实现的具体步骤</h2> 
 <p>1、创建如下所示的三个部分：</p> 
 <p><img alt="" height="215" src="https://images2.imgbox.com/54/c7/xfaU5K7b_o.png" width="225"></p> 
 <p>2、 同样在<span style="color:#fe2c24;"><strong>saolei.h</strong></span>中引用头文件，在<span style="color:#fe2c24;"><strong>saolei.c和test.c</strong></span>中只需要引用<span style="color:#fe2c24;"><strong>saolei.h</strong></span>即可</p> 
 <p><img alt="" height="181" src="https://images2.imgbox.com/a9/94/aEaci5ZN_o.png" width="325"></p> 
 <hr> 
 <p><img alt="" height="115" src="https://images2.imgbox.com/09/fc/tCcbsWnz_o.png" width="315"></p> 
 <hr> 
 <p><img alt="" height="112" src="https://images2.imgbox.com/5a/2f/Qrg7FfP3_o.png" width="349"></p> 
 <p>3、在test.c中创建main函数及test函数的switch case语句</p> 
 <p> <img alt="" height="694" src="https://images2.imgbox.com/ff/c6/1lc0YgSE_o.png" width="520"></p> 
 <p>4、创建简易的菜单</p> 
 <p><img alt="" height="192" src="https://images2.imgbox.com/96/94/gH0VXWEu_o.png" width="545"></p> 
 <p>5、扫雷标准是9行9列，但是由于考虑到靠边的坐标计算周围的地雷数时，还需要不包括越界的地方，所以将两个数组都扩大一圈，就不会有这方面的困扰了，即变为了11行11列的二维数组，使用<span style="color:#511b78;"><strong>宏定义</strong></span>的方式分别定义<span style="color:#956fe7;"><strong>ROW9，COL9，ROWS11，COLS11</strong></span>，以及设置的地雷数<span style="color:#956fe7;"><strong>MINE_COUNT10</strong></span></p> 
 <p><img alt="" height="259" src="https://images2.imgbox.com/e2/dc/mg3FSR6Y_o.png" width="338"></p> 
 <p>6、test.c中game函数的实现（依然是<span style="color:#ff9900;"><strong>先完成框架的梳理，再具体实现</strong></span>） </p> 
 <p><img alt="" height="569" src="https://images2.imgbox.com/09/06/NzAcV44B_o.png" width="634"></p> 
 <p></p> 
 <p>7、在saolei.c中具体实现game函数中的要求（<strong>在saolei.h中声明，在saolei.c中实现</strong>），下面第一个图片即为声明，第二个图片为函数的实现 </p> 
 <p>（1）、数组初始化函数的实现</p> 
 <p><img alt="" height="140" src="https://images2.imgbox.com/52/d1/INIRgK3U_o.png" width="851"></p> 
 <hr> 
 <p><img alt="" height="391" src="https://images2.imgbox.com/a9/a0/0Uq0UlLK_o.png" width="845"></p> 
 <p>（2）、打印棋盘</p> 
 <p><img alt="" height="123" src="https://images2.imgbox.com/78/75/LCL5Bq8s_o.png" width="678"></p> 
 <p>在9×9的棋盘上方和左方，分别<span style="color:#333333;"><strong>打印一行和一列的数字</strong></span>，<span style="color:#9c8ec1;"><strong>方便玩家读取第几行第几列的准确坐标</strong></span></p> 
 <p><img alt="" height="548" src="https://images2.imgbox.com/ab/00/qNDXtR9Z_o.png" width="651"></p> 
 <p></p> 
 <p> （3）、布置地雷</p> 
 <p>在test函数中添加：</p> 
 <p><img alt="" height="244" src="https://images2.imgbox.com/d0/47/PgiaLDfd_o.png" width="532"></p> 
 <hr> 
 <p><img alt="" height="134" src="https://images2.imgbox.com/5f/e6/z5FmXahI_o.png" width="705"></p> 
 <hr> 
 <p><img alt="" height="386" src="https://images2.imgbox.com/72/96/4JyjaHuh_o.png" width="546"></p> 
 <p></p> 
 <p>（4）、排查地雷</p> 
 <p><img alt="" height="141" src="https://images2.imgbox.com/be/34/P2ZzeCo4_o.png" width="962"></p> 
 <hr> 
 <p><img alt="" height="823" src="https://images2.imgbox.com/30/5a/dcfhqJUS_o.png" width="793"></p> 
 <p>在排查雷函数中，需要用到<span style="color:#ff9900;"><strong>统计雷个数的函数Find_count</strong></span>，如下：</p> 
 <p><img alt="" height="277" src="https://images2.imgbox.com/ff/76/yYBnYter_o.png" width="520"></p> 
</blockquote> 
<hr> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">三、完整代码</h2> 
<h4 id="1%E3%80%81saolei.h%E9%83%A8%E5%88%86">1、saolei.h部分</h4> 
<pre><code>#pragma once
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;

#define ROWS 11
#define COLS 11

#define ROW 9
#define COL 9

#define MINE_COUNT 10


//数组的初始化函数
void Init_board(char arr[ROWS][COLS], int rows, int cols, char set);

//打印棋盘
void Display_board(char arr[ROWS][COLS], int row, int col);

//布置地雷的函数
void Set_mine(char mine[ROWS][COLS], int row, int col);

//排查地雷
void Find_mine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col);</code></pre> 
<h4 id="2%E3%80%81saolei.c%E9%83%A8%E5%88%86">2、saolei.c部分</h4> 
<pre><code>#include "saolei.h"

//数组初始化函数的实现
void Init_board(char arr[ROWS][COLS], int rows, int cols, char set)
{
	int i = 0;
	int j = 0;
	for (i = 0; i &lt; rows; i++)
	{
		for (j = 0; j &lt; cols; j++)
		{
			arr[i][j] = set;
		}
	}
}

//打印棋盘
void Display_board(char arr[ROWS][COLS], int row, int col)
{
	int i = 0;
	int j = 0;
	printf("-----------------\n");
	for (i = 0; i &lt;= row; i++)
	{
		printf("%d ", i);
	}
	printf("\n");
	for (i = 1; i &lt;= row; i++)
	{
		printf("%d ", i);
		for (j = 1; j &lt;= col; j++)
		{
			printf("%c ", arr[i][j]);
		}
		printf("\n");
	}
}


//布置地雷函数
void Set_mine(char mine[ROWS][COLS], int row, int col)
{
	int x = 0;
	int y = 0;
	int ret = MINE_COUNT;
	while (ret)
	{
		x = rand() % 9 + 1;
		y = rand() % 9 + 1;
		if (mine[x][y] == '0')
		{
			mine[x][y] = '1';
			ret--;
		}
	}
}



//统计雷的个数
int Find_count(char mine[ROWS][COLS], int x, int y)
{
	return mine[x + 1][y - 1] +
		mine[x][y - 1] +
		mine[x - 1][y - 1] +
		mine[x + 1][y] +
		mine[x - 1][y] +
		mine[x + 1][y + 1] +
		mine[x][y + 1] +
		mine[x - 1][y + 1] - 8 * '0';
}


//排查地雷
void Find_mine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col)
{
	int x = 0;
	int y = 0;
	int count = 0;
	while (count &lt; row * col - MINE_COUNT)
	{
		printf("请输入想要排查的坐标：");
		scanf("%d %d", &amp;x, &amp;y);
		if (x &gt;= 1 &amp;&amp; x &lt;= 9 &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= 9)
		{
			if (mine[x][y] == '1')
			{
				printf("很遗憾，你被炸死了！\n");
				break;
			}
			else
			{
				count++;
				//Find_count是统计周围雷的个数的函数
				int ret = Find_count(mine, x, y);
				show[x][y] = ret + '0';
				//输入坐标正确后，再打印一次棋盘，方便玩家观察
				Display_board(show, ROW, COL);
			}
		}
		else
		{
			printf("坐标输入错误，请重新输入！\n");
		}
	}
	if (count == row * col - MINE_COUNT)
	{
		printf("恭喜你，排雷成功！\n");
	}
}</code></pre> 
<h4 id="3%E3%80%81test.c%E9%83%A8%E5%88%86">3、test.c部分</h4> 
<pre><code>#include "saolei.h"

void game()
{
	char mine[ROWS][COLS] = { 0 };
	char show[ROWS][COLS] = { 0 };

	//两个数组的初始化
	//mine数组元素全部初始化为字符0
	//show数组元素全部初始化为字符*
	Init_board(mine, ROWS, COLS, '0');
	Init_board(show, ROWS, COLS, '*');


	//打印棋盘,以便让玩家可以清楚的选择相应的位置对应的坐标
	Display_board(show, ROW, COL);


	//布置地雷
	Set_mine(mine, ROW, COL	);

	//排查地雷
	Find_mine(mine, show, ROW, COL);
	//两个数组都传入是因为排查时两个数组元素都会有相应的改变
	//排查结束，再打印一次地雷棋盘，向玩家展示地雷的位置
	Display_board(mine, ROW, COL);
}


void menu()
{
	printf("*******************************\n");
	printf("*********  1. play  ***********\n");
	printf("*********  0. exit  ***********\n");
	printf("*******************************\n");
}


void test()
{
	int input = 0;
	do
	{
		menu();
		srand((unsigned int)time(NULL));
		printf("请选择：");
		scanf("%d", &amp;input);
		switch (input)
		{
		case 1:
			game();
			break;
		case 0:
			printf("退出扫雷！\n");
			break;
		default:
			printf("输入错误，请重新输入！\n");
			break;
		}
	} while (input);
}

int main()
{
	test();
	return 0;
}</code></pre> 
<hr> 
<p>以上便是C语言实现扫雷全部内容啦，我们下篇博客再见ヾ(￣▽￣)Bye~Bye~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f4fbbc803edcab5f976b72785d3c612/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">神经网络到底是怎样一回事，神经网络是什么意思</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/908957e1e552fb878039851f99b60ede/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">完全搞懂java中的时间戳，时区，日期格式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>