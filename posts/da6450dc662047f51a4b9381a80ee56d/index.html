<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【鸿蒙开发】第八章 ArkTS语言UI范式-基础语法（二） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【鸿蒙开发】第八章 ArkTS语言UI范式-基础语法（二）" />
<meta property="og:description" content="1 前言 前面章节介绍了如何ArkTS语言UI范式-基础语法（一）。了解了自定义组件的创建与使用，本章节我们来学习下UI相关的装饰器。
2 @Builder装饰器 @Builder装饰器是自定义构建函数，ArkUI中提供了一种更轻量的UI元素复用机制@Builder，@Builder所装饰的函数遵循build()函数语法规则，开发者可以将重复使用的UI元素抽象成一个方法，在build方法里调用。
为了简化语言，我们将@Builder装饰的函数也称为“自定义构建函数”。
2.1 自定义组件内自定义构建函数 // 定义 @Builder MyBuilderFunction() { ... } // 使用 this.MyBuilderFunction() 自定义组件内可以定义多个@Builder方法，对该组件私有、不允许组件外调用，通过this访问自定义组件的状态变量而不是参数传递。
2.2 全局自定义构建函数 // 定义 @Builder function MyGlobalBuilderFunction() { ... } // 使用 MyGlobalBuilderFunction() 全局的自定义构建函数可以被整个应用获取，不允许使用this和bind方法。如果不涉及组件状态变化，建议使用全局的自定义构建方法。
2.3 参数传递规则 自定义构建函数的参数传递有按值传递和按引用传递两种，均需遵守以下规则：
参数的类型必须与参数声明的类型一致，不允许undefined、null和返回undefined、null的表达式。在@Builder修饰的函数内部，不允许改变参数值。@Builder内UI语法遵循UI语法规则。只有传入一个参数，且参数需要直接传入对象字面量才会按引用传递该参数，其余传递方式均为按值传递。 2.4 按引用传递参数 按引用传递参数时，传递的参数可为状态变量，且状态变量的改变会引起@Builder方法内的UI刷新。ArkUI提供$$作为按引用传递参数的范式。
class ABuilderParam { paramA1: string = &#39;&#39; paramB1: string = &#39;&#39; } @Builder function ABuilder($$ : ABuilderParam) {...} class ABuilderParam { paramA1: string = &#39;&#39; } @Builder function ABuilder($$: ABuilderParam) { Row() { Text(`UseStateVarByReference: ${$$." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/da6450dc662047f51a4b9381a80ee56d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T22:51:06+08:00" />
<meta property="article:modified_time" content="2024-01-06T22:51:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【鸿蒙开发】第八章 ArkTS语言UI范式-基础语法（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 前言</h2> 
<p>前面章节介绍了如何<a href="https://blog.csdn.net/u010687761/article/details/135038425">ArkTS语言UI范式-基础语法（一）</a>。了解了自定义组件的创建与使用，本章节我们来学习下<code>UI相关的装饰器</code>。</p> 
<h2><a id="2_Builder_3"></a>2 @Builder装饰器</h2> 
<p><code>@Builder装饰器</code>是<code>自定义构建函数</code>，<code>ArkUI</code>中提供了一种更<code>轻量的UI元素复用</code>机制<code>@Builder</code>，<code>@Builder</code>所装饰的函数遵循<code>build()</code>函数语法规则，开发者可以将<code>重复使用</code>的UI元素抽象成一个方法，在<code>build</code>方法里调用。<br> 为了简化语言，我们将<code>@Builder装饰</code>的函数也称为“<code>自定义构建函数</code>”。</p> 
<h3><a id="21__7"></a>2.1 自定义组件内自定义构建函数</h3> 
<pre><code class="prism language-typescript"><span class="token comment">// 定义</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">MyBuilderFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MyBuilderFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>自定义组件内可以定义<code>多个@Builder方法</code>，对该组件<code>私有</code>、<code>不允许组件外调用</code>，通过<code>this</code>访问自定义组件的<code>状态变量</code>而<code>不是参数传递</code>。</p> 
<h3><a id="22__18"></a>2.2 全局自定义构建函数</h3> 
<pre><code class="prism language-typescript"><span class="token comment">// 定义</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">MyGlobalBuilderFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token function">MyGlobalBuilderFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>全局的自定义构建函数<code>可以被整个应用获取</code>，<code>不允许使用this和bind方法</code>。如果不涉及组件状态变化，建议使用全局的自定义构建方法。</p> 
<h3><a id="23__30"></a>2.3 参数传递规则</h3> 
<p>自定义构建函数的参数传递有按值传递和按引用传递两种，均需遵守以下规则：</p> 
<ol><li>参数的类型必须与参数声明的<code>类型一致</code>，不允许undefined、null和返回undefined、null的表达式。</li><li>在<code>@Builder</code>修饰的函数内部，不允许改变参数值。</li><li><code>@Builder</code>内UI语法遵循UI语法规则。</li><li>只有传入一个参数，且参数需要直接传入对象字面量才会按引用传递该参数，其余传递方式均为按值传递。</li></ol> 
<h3><a id="24__38"></a>2.4 按引用传递参数</h3> 
<p>按引用传递参数时，传递的参数可为状态变量，且状态变量的改变会引起<code>@Builder</code>方法内的UI刷新。ArkUI提供<code>$$</code>作为<code>按引用传递参数的范式</code>。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">class</span> <span class="token class-name">ABuilderParam</span> <span class="token punctuation">{<!-- --></span>
  paramA1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
  paramB1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">ABuilder</span><span class="token punctuation">(</span>$$ <span class="token operator">:</span> ABuilderParam<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">ABuilderParam</span> <span class="token punctuation">{<!-- --></span>
  paramA1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">ABuilder</span><span class="token punctuation">(</span>$$<span class="token operator">:</span> ABuilderParam<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">UseStateVarByReference: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>$$<span class="token punctuation">.</span>paramA1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Parent <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在Parent组件中调用ABuilder的时候，将this.label引用传递给ABuilder</span>
      <span class="token function">ABuilder</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> paramA1<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>label <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'Click me'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 点击“Click me”后，UI从“Hello”刷新为“ArkUI”</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'ArkUI'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="25__77"></a>2.5 按值传递参数</h3> 
<p>调用<code>@Builder</code>装饰的函数默认<code>按值传递</code>。当传递的参数为状态变量时，状态变量的改变不会引起<code>@Builder</code>方法内的UI刷新。所以<code>当使用状态变量的时候，推荐使用按引用传递</code>。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">ABuilder</span><span class="token punctuation">(</span>paramA1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">UseStateVarByValue: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>paramA1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Parent <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">ABuilder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="3_BuilderParam_99"></a>3 @BuilderParam装饰器</h2> 
<p><code>@BuilderParam</code>装饰器是引用<code>@Builder</code>函数。当开发者创建了自定义组件，并想对该组件添加特定功能时，例如在自定义组件中添加一个点击跳转操作。若直接在组件内嵌入事件方法，将会导致所有引入该自定义组件的地方均增加了该功能。为解决此问题，<code>ArkUI</code>引入了<code>@BuilderParam装饰器</code>，<code>@BuilderParam</code>用来装饰指向<code>@Builder</code>方法的变量，开发者可在初始化自定义组件时对此属性进行赋值，为自定义组件增加特定的功能。该装饰器用于<code>声明任意UI描述的一个元素</code>，类似<code>slot占位符</code>。</p> 
<h3><a id="31_BuilderParam_101"></a>3.1 初始化@BuilderParam装饰的方法</h3> 
<p><code>@BuilderParam</code>装饰的方法只能被<code>自定义构建函数（@Builder装饰的方法）初始化</code>。<br> 使用所属自定义组件的自定义构建函数或者全局的自定义构建函数，<code>在本地初始化@BuilderParam</code>。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">GlobalBuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Child <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">doNothingBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder0</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doNothingBuilder<span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> GlobalBuilder0<span class="token punctuation">;</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>用父组件自定义构建函数初始化子组件<code>@BuilderParam</code>装饰的方法。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Child <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">FunABuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder0</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FunABuilder0<span class="token punctuation">;</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aBuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Parent <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Parent builder </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> aBuilder0<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentBuilder <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>需注意<code>this</code>指向正确。</p> 
<p>以下示例中，<code>Parent</code>组件在调用<code>this.componentBuilder()</code>时，<code>this</code>指向其所属组件，即“Parent”。<code>@Builder componentBuilder()</code>传给子组件<code>@BuilderParam aBuilder0</code>，<strong>在Child组件中调用this.aBuilder0()时，this指向在Child的label，即“Child”</strong>。对于<code>@BuilderParam aBuilder1</code>，<strong>在将this.componentBuilder传给aBuilder1时，<code>调用bind绑定了this，因此其this.label指向Parent的label</code></strong>。使用<code>bind</code>改变函数调用的上下文，可能会使<code>this</code>指向混乱。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Child <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Child</span><span class="token template-punctuation string">`</span></span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span>
  <span class="token function">FunABuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span>
  <span class="token function">FunABuilder1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder0</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FunABuilder0<span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FunABuilder1<span class="token punctuation">;</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aBuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aBuilder1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Parent <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Parent</span><span class="token template-punctuation string">`</span></span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span>
  <span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里是当Child的build调用时才调用this.componentBuilder</span>
        <span class="token comment">// 所以this.label指向Child内的</span>
        aBuilder0<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentBuilder<span class="token punctuation">,</span>
        <span class="token comment">// 调用bind绑定了this，因此其this.label指向Parent的label。</span>
        <span class="token comment">// 可以理解为这里是先调用this.componentBuilder()那到值后再返回函数赋值给aBuilder1</span>
        aBuilder1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/1e/41/8BNTMbFV_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__207"></a>3.2 参数初始化组件</h3> 
<p><code>@BuilderParam</code>装饰的方法可以是<code>有参数</code>和<code>无参数</code>的两种形式，需与指向的<code>@Builder</code>方法<code>类型一致</code>。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">class</span> <span class="token class-name">Tmp</span><span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">GlobalBuilder1</span><span class="token punctuation">(</span>$$ <span class="token operator">:</span> Tmp<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Text</span><span class="token punctuation">(</span>$$<span class="token punctuation">.</span>label<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Green<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Child <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Child'</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">FunABuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token comment">// 无参数类，指向的componentBuilder也是无参数类型</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder0</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FunABuilder0<span class="token punctuation">;</span>
  <span class="token comment">// 有参数类型，指向的GlobalBuilder1也是有参数类型的方法</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">aBuilder1</span><span class="token operator">:</span> <span class="token punctuation">(</span>$$ <span class="token operator">:</span> Tmp<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> GlobalBuilder1<span class="token punctuation">;</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aBuilder0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aBuilder1</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>label<span class="token operator">:</span> <span class="token string">'global Builder label'</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct Parent <span class="token punctuation">{<!-- --></span>
  label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Parent'</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">componentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> aBuilder0<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentBuilder<span class="token punctuation">,</span> aBuilder1<span class="token operator">:</span> GlobalBuilder1 <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/f4/97/jRLhEdC9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33__257"></a>3.3 尾随闭包初始化组件</h3> 
<p>在自定义组件中使用<code>@BuilderParam</code>装饰的属性时也可通过<code>尾随闭包</code>进行初始化。在初始化自定义组件时，组件后紧跟一个大括号<code>“{}”</code>形成<code>尾随闭包场景</code>。</p> 
<ol><li>此场景下自定义组件内有且仅有一个使用<code>@BuilderParam</code>装饰的属性。</li><li>此场景下自定义组件<code>不支持使用通用属性</code>。</li></ol> 
<p>开发者可以将尾随闭包内的内容看做<code>@Builder</code>装饰的函数传给<code>@BuilderParam</code>。示例如下：</p> 
<pre><code class="prism language-typescript"><span class="token comment">// xxx.ets</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct CustomContainer <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span> header<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">CloserFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">BuilderParam</span></span> <span class="token function-variable function">closer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>CloserFun

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>header<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">closer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token keyword">function</span> <span class="token function">specificParam</span><span class="token punctuation">(</span>label1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> label2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span>label1<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
    <span class="token function">Text</span><span class="token punctuation">(</span>label2<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct CustomContainerUser <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 创建CustomContainer，在创建CustomContainer时，通过其后紧跟一个大括号“{}”形成尾随闭包</span>
      <span class="token comment">// 作为传递给子组件CustomContainer @BuilderParam closer: () =&gt; void的参数</span>
      <span class="token function">CustomContainer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> header<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">specificParam</span><span class="token punctuation">(</span><span class="token string">'testA'</span><span class="token punctuation">,</span> <span class="token string">'testB'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Yellow<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'changeHeader'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/f1/d4/Oy69fe2P_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_Styles_315"></a>4 @Styles装饰器</h2> 
<p>如果每个组件的样式都需要<code>单独设置</code>，在开发过程中会出现大量代码在进行重复样式设置，虽然可以复制粘贴，但为了代码简洁性和后续方便维护，我们推出了可以提炼公共样式进行<code>复用</code>的装饰器<code>@Styles</code>。</p> 
<p><code>@Styles</code>装饰器可以将多条样式设置提炼成一个方法，直接在组件声明的位置调用。通过<code>@Styles</code>装饰器可以快速定义并复用自定义样式。<code>用于快速定义并复用自定义样式</code>。</p> 
<h3><a id="41_320"></a>4.1装饰器使用说明</h3> 
<p>当前<code>@Styles</code>仅支持<code>通用属性</code>和<code>通用事件</code>。</p> 
<p><code>@Styles</code>方法不支持参数，反例如下。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 反例： @Styles不支持参数</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token keyword">function</span> <span class="token function">globalFancy</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><code>@Styles</code>可以定义在<code>组件内</code>或<code>全局</code>，在全局定义时需在方法名前面添加<code>function</code>关键字，组件内定义时则不需要添加<code>function</code>关键字。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 全局</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token keyword">function</span> <span class="token function">functionName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token comment">// 在组件内</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token function">fancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>定义在组件内的<code>@Styles</code>可以通过<code>this</code>访问组件的常量和状态变量，并可以在<code>@Styles</code>里通过事件来改变状态变量的值，示例如下：</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> heightValue<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token function">fancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>heightValue<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Yellow<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>heightValue <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>组件内@Styles的优先级高于全局@Styles</strong>。 框架优先找当前组件内的<code>@Styles</code>，如果找不到，则会全局查找。</p> 
<h3><a id="42__367"></a>4.2 使用场景</h3> 
<p>以下示例中演示了<code>组件内@Styles</code>和<code>全局@Styles</code>的用法。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 定义在全局的@Styles封装的样式</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token keyword">function</span> <span class="token function">globalFancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Pink<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> heightValue<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span>
  <span class="token comment">// 定义在组件内的@Styles封装的样式</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token function">fancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>heightValue<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Yellow<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>heightValue <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 使用全局的@Styles封装的样式</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'FancyA'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">globalFancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
      <span class="token comment">// 使用组件内的@Styles封装的样式</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'FancyB'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="5_Extend_408"></a>5 @Extend装饰器</h2> 
<p>在前文的示例中，可以使用<code>@Styles</code>用于样式的扩展，在<code>@Styles</code>的基础上，我们提供了<code>@Extend</code>，用于<code>扩展原生组件样式</code>。</p> 
<h3><a id="51_411"></a>5.1装饰器使用说明</h3> 
<p>语法</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>UIComponentName<span class="token punctuation">)</span> <span class="token keyword">function</span> functionName <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre> 
<p>使用规则</p> 
<ol><li>和<code>@Styles</code>不同，<code>@Extend</code>仅支持在全局定义，<code>不支持在组件内部定义</code>。</li><li>和<code>@Styles</code>不同，<code>@Extend</code>支持封装指定的组件的<code>私有属性</code>和<code>私有事件</code>，以及预定义相同组件的<code>@Extend</code>的方法。</li></ol> 
<pre><code class="prism language-typescript"><span class="token comment">// @Extend(Text)可以支持Text的私有属性fontColor</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">fancy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// superFancyText可以调用预定义的fancy</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">superFancyText</span><span class="token punctuation">(</span>size<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fancy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>和<code>@Styles</code>不同，<code>@Extend</code>装饰的方法<code>支持参数</code>，开发者可以在调用时传递参数，调用遵循<code>TS</code>方法传值调用。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// xxx.ets</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">fancy</span> <span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Fancy'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancy</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Fancy'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancy</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>@Extend</code>装饰的方法的参数可以为<code>function</code>，作为<code>Event</code>事件的句柄。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">makeMeClick</span><span class="token punctuation">(</span><span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Blue<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span>onClick<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>

  <span class="token function">onClickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'Hello ArkUI'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">makeMeClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onClickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>@Extend</code>的参数可以为<code>状态变量</code>，当状态变量改变时，UI可以正常的被刷新渲染。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">fancy</span> <span class="token punctuation">(</span>fontSize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> fontSizeValue<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">20</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Fancy'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fontSizeValue<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>fontSizeValue <span class="token operator">=</span> <span class="token number">30</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="52__508"></a>5.2 使用场景</h3> 
<p>以下示例声明了3个Text组件，每个<code>Text</code>组件均设置了<code>fontStyle</code>、<code>fontWeight</code>和<code>backgroundColor</code>样式。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello World'</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontStyle</span><span class="token punctuation">(</span>FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Blue<span class="token punctuation">)</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontStyle</span><span class="token punctuation">(</span>FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Pink<span class="token punctuation">)</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontStyle</span><span class="token punctuation">(</span>FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Orange<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token string">'20%'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>@Extend</code>将样式组合复用，示例如下。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Extend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">fancyText</span><span class="token punctuation">(</span>weightValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">fontStyle</span><span class="token punctuation">(</span>FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>weightValue<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>通过<code>@Extend</code>组合样式后，使得代码更加简洁，增强可读性。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct FancyUse <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'Hello World'</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancyText</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Blue<span class="token punctuation">)</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancyText</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Pink<span class="token punctuation">)</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fancyText</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Orange<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token string">'20%'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="6_stateStyles_569"></a>6 stateStyles</h2> 
<p><code>@Styles</code>和<code>@Extend</code>仅仅应用于<code>静态页面的样式复用</code>，<code>stateStyles</code>可以依据组件的内部状态的不同，快速设置不同样式。这就是我们要介绍的内容<code>stateStyles</code>（又称为：多态样式）。</p> 
<h3><a id="61__572"></a>6.1 概述</h3> 
<p><code>stateStyles</code>是<code>属性方法</code>，可以根据UI内部状态来设置样式，类似于<code>css</code>伪类，但语法不同。<code>ArkUI</code>提供以下五种状态：</p> 
<ol><li><code>focused</code>：获焦态。</li><li><code>normal</code>：正常态。</li><li><code>pressed</code>：按压态。</li><li><code>disabled</code>：不可用态。</li><li><code>selected10+</code>：选中态。</li></ol> 
<h3><a id="62__581"></a>6.2 使用场景</h3> 
<p>下面的示例展示了<code>stateStyles</code>最基本的使用场景。<code>Button</code>处于第一个组件，默认获焦，生效<code>focused</code>指定的粉色样式。按压时显示为<code>pressed</code>态指定的黑色。如果在<code>Button</code>前再放一个组件，使其不处于获焦态，就会生效<code>normal</code>态的黄色。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct StateStylesSample <span class="token punctuation">{<!-- --></span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'Click me'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stateStyles</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          focused<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Pink<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          pressed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          normal<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Yellow<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token string">'30%'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/70/52/J1GKuBc2_o.gif" alt="在这里插入图片描述"></p> 
<p><code>@Styles</code>和<code>stateStyles</code>联合使用<br> 以下示例通过<code>@Styles</code>指定<code>stateStyles</code>的不同状态。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct MyComponent <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token function">normalStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Gray<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Styles</span></span> <span class="token function">pressedStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Text1'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stateStyles</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          normal<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>normalStyle<span class="token punctuation">,</span>
          pressed<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pressedStyle<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d1/3a/m7OHVQtm_o.gif" alt="在这里插入图片描述"></p> 
<p>在<code>stateStyles</code>里使用常规变量和状态变量<br> <code>stateStyles</code>可以通过<code>this</code>绑定组件内的常规变量和状态变量。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct CompWithInlineStateStyles <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> focusedColor<span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">;</span>
  normalColor<span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'clickMe'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stateStyles</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          normal<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>normalColor<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          focused<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>focusedColor<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>focusedColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>Pink
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token string">'30%'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>Button</code>默认获焦显示红色，点击事件触发后，获焦态变为粉色。</p> 
<p><img src="https://images2.imgbox.com/d1/e2/a1gdlxit_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="7_AnimatableExtend_678"></a>7 @AnimatableExtend装饰器</h2> 
<p><code>@AnimatableExtend</code>装饰器用于自定义可动画的属性方法，在这个属性方法中修改组件不可动画的属性。在动画执行过程时，通过逐帧回调函数修改不可动画属性值，让不可动画属性也能实现动画效果。</p> 
<ol><li> <p><code>可动画属性</code>：如果一个属性方法在<code>animation</code>属性前调用，改变这个属性的值可以生效animation属性的动画效果，这个属性称为可动画属性。比如height、width、backgroundColor、translate属性，Text组件的fontSize属性等。</p> </li><li> <p><code>不可动画属性</code>：如果一个属性方法在<code>animation</code>属性前调用，改变这个属性的值不能生效animation属性的动画效果，这个属性称为不可动画属性。比如Ployline组件的points属性等。</p> </li></ol> 
<p><code>该装饰器从API Version 10开始支持</code>。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p> 
<h3><a id="71__687"></a>7.1 装饰器使用说明</h3> 
<p>语法</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">AnimatableExtend</span></span><span class="token punctuation">(</span>UIComponentName<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">functionName</span><span class="token punctuation">(</span>value<span class="token operator">:</span> typeName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token punctuation">.</span><span class="token function">propertyName</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>1.<code> @AnimatableExtend</code>仅支持定义在<code>全局</code>，不支持在组件内部定义。<br> 2. <code>@AnimatableExtend</code>定义的函数参数类型必须为<code>number</code>类型或者实现 <code>AnimtableArithmetic&lt;T&gt;</code>接口的自定义类型。<br> 3. <code>@AnimatableExtend</code>定义的函数体内只能调用<code>@AnimatableExtend</code>括号内组件的<code>属性方法</code>。</p> 
<p><code>AnimtableArithmetic&lt;T&gt;</code>接口说明<br> 对复杂数据类型做动画，需要实现AnimtableArithmetic接口中加法、减法、乘法和判断相等函数。<br> <img src="https://images2.imgbox.com/32/83/J2xoOdd8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="72__704"></a>7.2 使用场景</h3> 
<p>以下示例实现字体大小的动画效果。</p> 
<pre><code class="prism language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">AnimatableExtend</span></span><span class="token punctuation">(</span>Text<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">animatableFontSize</span><span class="token punctuation">(</span>size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct AnimatablePropertyExample <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> fontSize<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">20</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"AnimatableProperty"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">animatableFontSize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fontSize<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>duration<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> curve<span class="token operator">:</span> <span class="token string">"ease"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"Play"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fontSize <span class="token operator">==</span> <span class="token number">20</span> <span class="token operator">?</span> <span class="token number">36</span> <span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dd/9e/mtB1uqux_o.gif" alt="在这里插入图片描述"></p> 
<p>以下示例实现折线的动画效果。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{<!-- --></span>
  x<span class="token operator">:</span> <span class="token builtin">number</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
  <span class="token punctuation">}</span>
  <span class="token function">plus</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> rhs<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">-</span> rhs<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">multiply</span><span class="token punctuation">(</span>scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> scale<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> scale<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">equals</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">===</span> rhs<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">===</span> rhs<span class="token punctuation">.</span>y
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">PointVector</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">AnimatableArithmetic<span class="token operator">&lt;</span>PointVector<span class="token operator">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    value<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">plus</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> PointVector<span class="token punctuation">)</span><span class="token operator">:</span> PointVector <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointVector</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> rhs<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rhs <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> PointVector<span class="token punctuation">)</span><span class="token operator">:</span> PointVector <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointVector</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> rhs<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rhs <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  <span class="token function">multiply</span><span class="token punctuation">(</span>scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> PointVector <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointVector</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  <span class="token function">equals</span><span class="token punctuation">(</span>rhs<span class="token operator">:</span> PointVector<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">!=</span> rhs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rhs <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> result<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">AnimatableExtend</span></span><span class="token punctuation">(</span>Polyline<span class="token punctuation">)</span> <span class="token keyword">function</span> <span class="token function">animatablePoints</span><span class="token punctuation">(</span>points<span class="token operator">:</span> PointVector<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">.</span><span class="token function">points</span><span class="token punctuation">(</span>points<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct AnimatablePropertyExample <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> points<span class="token operator">:</span> PointVector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointVector</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Polyline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">animatablePoints</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>points<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>duration<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> curve<span class="token operator">:</span> <span class="token string">"ease"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>height<span class="token operator">:</span><span class="token number">220</span><span class="token punctuation">,</span> width<span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Green<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">'#eeaacc'</span><span class="token punctuation">)</span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"Play"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointVector</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a1/ce/AyXaVxc3_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26a58380cfbafcb0b104818ab84d654a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Visio导出eps格式图片</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cdb5a484fdecc7797025598286a30d4a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【鸿蒙开发】第九章 ArkTS语言UI范式-状态管理（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>