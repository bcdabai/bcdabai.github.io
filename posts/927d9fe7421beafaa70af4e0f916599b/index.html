<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【实战原创】Centos7下Samba服务器配置（实战） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【实战原创】Centos7下Samba服务器配置（实战）" />
<meta property="og:description" content="这篇文章主要介绍了Centos7下Samba服务器配置（实战），文中通过示例代码介绍的非常详细，对大家的学习或者工作具有一定的参考学习价值，需要的朋友们下面随着小编来一起学习学习吧
Samba概述
Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机/服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置“NetBIOS over TCP/IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。
一，Samba共享服务的匿名访问
1，安装Samba服务
1
[root@localhost ~]# yum install samba -y ##安装Samba服务
2，配置Samba配置文件信息
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
[root@localhost ~]# cd /etc/samba/ ##切换到Samba配置文件目录
[root@localhost samba]# mv smb.conf smb.conf.bak ##备份
[root@localhost samba]# grep -v &#34;#&#34; smb.conf.bak &gt; smb.conf ##重新创建一个配置文件（除去注释的）
[root@localhost samba]# vim smb.conf ##修改配置文件
[global] ##全局" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/927d9fe7421beafaa70af4e0f916599b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-10T10:06:53+08:00" />
<meta property="article:modified_time" content="2022-08-10T10:06:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【实战原创】Centos7下Samba服务器配置（实战）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:left;"><span style="background-color:#ebf5fd;"><span style="color:#333333;">这篇文章主要介绍了</span><span style="color:#333333;">Centos7</span><span style="color:#333333;">下</span><span style="color:#333333;">Samba</span><span style="color:#333333;">服务器配置（实战），文中通过示例代码介绍的非常详细，对大家的学习或者工作具有一定的参考学习价值，需要的朋友们下面随着小编来一起学习学习吧</span></span></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">Samba</span></strong><strong><span style="color:#FF0000;">概述</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#f1f7fd;"><span style="color:#222222;">Samba</span><span style="color:#222222;">是在</span><span style="color:#222222;">Linux</span><span style="color:#222222;">和</span><span style="color:#222222;">UNIX</span><span style="color:#222222;">系统上实现</span><span style="color:#222222;">SMB</span><span style="color:#222222;">协议的一个免费软件，由服务器及客户端程序构成。</span><span style="color:#222222;">SMB</span><span style="color:#222222;">（</span><span style="color:#222222;">Server Messages Block</span><span style="color:#222222;">，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。</span><span style="color:#222222;">SMB</span><span style="color:#222222;">协议是客户机</span><span style="color:#222222;">/</span><span style="color:#222222;">服务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置</span><span style="color:#222222;">“NetBIOS over TCP/IP”</span><span style="color:#222222;">使得</span><span style="color:#222222;">Samba</span><span style="color:#222222;">不但能与局域网络主机分享资源，还能与全世界的电脑分享资源。</span></span></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">一，</span></strong><strong><span style="color:#FF0000;">Samba</span></strong><strong><span style="color:#FF0000;">共享服务的匿名访问</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">1</span><span style="color:#222222;">，安装</span><span style="color:#222222;">Samba</span><span style="color:#222222;">服务</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># yum install samba -y ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">安装</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">服务</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">2</span><span style="color:#222222;">，配置</span><span style="color:#222222;">Samba</span><span style="color:#222222;">配置文件信息</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">9</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">10</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">11</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">12</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">13</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">14</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">15</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">16</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">17</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">18</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">19</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">20</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">21</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">22</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">23</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">24</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /etc/samba/  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">切换到</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">配置文件目录</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># mv smb.conf smb.conf.bak  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">备份</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># grep -v "#" smb.conf.bak &gt; smb.conf  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">重新创建一个配置文件（除去注释的）</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># vim smb.conf  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">修改配置文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[global]                   </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">全局</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">workgroup = SAMBA</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">security = user</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">passdb backend = tdbsam</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">printing = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;">printcap</span> <span style="background-color:#FFFFFF;"><span style="color:#000000;">name = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">load printers = </span></span><span style="background-color:#FFFFFF;">yes</span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">cups options = raw</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">map to guest = Bad User   </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">添加此项，开启匿名用户访问</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">大</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">G</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">到末行添加下面的配置信息</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[myshare]                   </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">添加的</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">share</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">path=/opt/abc</span></span>            <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">路径</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">public=</span></span><span style="background-color:#FFFFFF;">yes</span>              <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">公共访问</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">browseable=</span></span><span style="background-color:#FFFFFF;">yes</span>          <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">能够访问</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">writable=</span></span><span style="background-color:#FFFFFF;">yes</span>             <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">写权限</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">create mask=0644        </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">设置权限</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">directory mask=0755</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">3</span><span style="color:#222222;">，创建</span><span style="color:#222222;">myshare</span><span style="color:#222222;">路径目录，并给权限</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># mkdir /opt/abc   ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建目录</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># chmod 777 /opt/abc  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">给全部权限</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># systemctl stop firewalld.service  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">关闭防火墙</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># setenforce 0  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">关闭增强功能</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># systemctl start smb.service  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">开启</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">服务</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">4</span><span style="color:#222222;">，利用测试机访问</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">利用测试机访问共享</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="107" src="https://images2.imgbox.com/08/9e/0HxhdW9c_o.png" width="785"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">查看共享文件夹</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="203" src="https://images2.imgbox.com/e8/c7/xg5NStwe_o.png" width="790"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">创建一个文件到共享文件夹中</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="203" src="https://images2.imgbox.com/75/f6/ZCrAVKkY_o.png" width="792"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">在</span><span style="color:#222222;">Linux</span><span style="color:#222222;">中查看创建的文件</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /opt/abc/  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">查看共享文件目录，查看到创建的文本</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost abc]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># ls</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">111.txt</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost abc]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># ls -l   ##Linux</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">的匿名访问用户是</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">nobody</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">总用量</span></span><span style="background-color:#FFFFFF;"><span style="color:#000000;"> 0</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">-rw-r--r--. 1 nobody nobody 0 11</span></span><span style="background-color:#FFFFFF;"><span style="color:#000000;">月</span></span><span style="background-color:#FFFFFF;"><span style="color:#000000;"> 5 15:51 111.txt</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">二，</span></strong><strong><span style="color:#FF0000;">Samba</span></strong><strong><span style="color:#FF0000;">共享服务的身份验证</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">1</span><span style="color:#222222;">，配置</span><span style="color:#222222;">Samba</span><span style="color:#222222;">配置文件信息</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">9</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">10</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">11</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">12</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">13</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">14</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">15</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">16</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">17</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">18</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">19</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">20</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">21</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /etc/samba/  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">切换到</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">配置文件目录</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># vim smb.conf  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">修改配置文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[global]</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">workgroup = SAMBA</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">security = user</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">passdb backend = tdbsam</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">printing = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;">printcap</span> <span style="background-color:#FFFFFF;"><span style="color:#000000;">name = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">load printers = </span></span><span style="background-color:#FFFFFF;">yes</span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">cups options = raw  </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">将匿名访问的一项删除</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">大</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">G</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">到末行添加下面的配置信息</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[</span></span><span style="background-color:#FFFFFF;">test</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">]</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">path=/opt/test</span></span>     <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">共享文件目录路径</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">browseable=</span></span><span style="background-color:#FFFFFF;">yes</span>   <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">能够访问，将</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">public</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">项去除</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">create mask=0644</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">directory mask=0755</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">valid </span></span><span style="background-color:#FFFFFF;">users</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">=zhangsan, lisi   </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">允许访问的用户</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">write list=zhangsan        </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">允许写入的用户</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">2</span><span style="color:#222222;">，创建</span><span style="color:#222222;">smb</span><span style="color:#222222;">用户</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">9</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">10</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">11</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">12</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">13</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">14</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">15</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">16</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">17</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">18</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">19</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># useradd zhangsan   ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建两个用户</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># useradd lisi</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># smbpasswd -a zhangsan  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">smb</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">用户并设置密码</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">New SMB password:    </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">设置密码</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Retype new SMB password:   </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">确认密码</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Added user zhangsan.</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># smbpasswd -a lisi</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">New SMB password:</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Retype new SMB password:</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Added user lisi.</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># pdbedit -L  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">列出</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">smb</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">用户列表</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">zhangsan:1001:</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">lisi:1002:</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /opt/  </span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost opt]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># mkdir test  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建共享目录</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost opt]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># ls</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">abc rh </span></span><span style="background-color:#FFFFFF;">test</span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost opt]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># chmod 777 test/  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">给最大权限</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost opt]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># systemctl restart smb.service  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">重启</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">服务</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">3</span><span style="color:#222222;">，用测试机访问共享</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">为了避免错误可以先在测试上清除缓存</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="406" src="https://images2.imgbox.com/19/61/AZRuXC5P_o.png" width="677"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">利用测试机访问共享</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="107" src="https://images2.imgbox.com/d0/32/do51FRlP_o.png" width="785"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">需要身份验证，输入用户名密码</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="359" src="https://images2.imgbox.com/5e/c0/jTfEtTPh_o.png" width="704"></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="195" src="https://images2.imgbox.com/33/ba/Tz2yFP0H_o.png" width="700"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">创建一个文件到</span><span style="color:#222222;">test</span><span style="color:#222222;">共享文件夹中</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="80" src="https://images2.imgbox.com/6a/e7/JokQXtTJ_o.png" width="700"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">在</span><span style="color:#222222;">Linux</span><span style="color:#222222;">中查看创建的文件</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost opt]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /opt/test/</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost </span></span><span style="background-color:#FFFFFF;">test</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># ls  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建成功</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">222.txt</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">4</span><span style="color:#222222;">，因为在配置文件中只允许</span><span style="color:#222222;">zhangsan</span><span style="color:#222222;">写入权限，测试</span><span style="color:#222222;">lisi</span><span style="color:#222222;">能否写入</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">用</span><span style="color:#222222;">lisi</span><span style="color:#222222;">访问共享</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="329" src="https://images2.imgbox.com/ba/5f/APYTJGEA_o.png" width="704"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">测试创建文件</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="296" src="https://images2.imgbox.com/8f/4b/wXFg2FbT_o.png" width="701"></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">三，</span></strong><strong><span style="color:#FF0000;">Samba</span></strong><strong><span style="color:#FF0000;">共享服务的账户名映射（账户别名登录）</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">1</span><span style="color:#222222;">，配置映射文件和</span><span style="color:#222222;">Samba</span><span style="color:#222222;">配置文件</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">9</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">10</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">11</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">12</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">13</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">14</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">15</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">16</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">17</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">18</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">19</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">20</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /etc/samba/</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># vim smbusers  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建账户映射配置文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">zhangsan = t01 t02  </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">别名</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">t01 t02 </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">密码还是</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">zhangsan</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">用户的密码</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># vim smb.conf  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">配置</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">配置文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[global]</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">workgroup = SAMBA</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">security = user</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">passdb backend = tdbsam</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">printing = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;">printcap</span> <span style="background-color:#FFFFFF;"><span style="color:#000000;">name = cups</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">load printers = </span></span><span style="background-color:#FFFFFF;">yes</span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">cups options = raw</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">        <span style="background-color:#FFFFFF;"><span style="color:#000000;">username map = /etc/samba/smbusers</span></span>  <span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">添加别名的配置文件路径</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># systemctl restart smb.service  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">重启</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">服务</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">2</span><span style="color:#222222;">，用测试机测试别名访问使用别名登录</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="334" src="https://images2.imgbox.com/47/1a/KfmHna3i_o.png" width="702"></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="207" src="https://images2.imgbox.com/28/7a/TCFJkpnY_o.png" width="700"></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">四，</span></strong><strong><span style="color:#FF0000;">Samba</span></strong><strong><span style="color:#FF0000;">共享服务的访问控制列表</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">1</span><span style="color:#222222;">，配置</span><span style="color:#222222;">Samba</span><span style="color:#222222;">配置文件信息</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">9</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">10</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">11</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">12</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /etc/samba/  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">切换到</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">配置文件目录</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># vim smb.conf  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">修改配置文件</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[</span></span><span style="background-color:#FFFFFF;">test</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">]</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">path=/opt/test</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">browseable=</span></span><span style="background-color:#FFFFFF;">yes</span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">create mask=0644</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">directory mask=0755</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">valid </span></span><span style="background-color:#FFFFFF;">users</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">=zhangsan, lisi</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">write list=zhangsan</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;">  <span style="background-color:#FFFFFF;"><span style="color:#000000;">hosts deny=192.168.13.  </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">添加拒绝</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">192.168.13</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">段访问</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">test</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost samba]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># systemctl restart smb.service  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">重启</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">Samba</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">服务</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">2</span><span style="color:#222222;">，用测试机访问</span><span style="color:#222222;">test</span><span style="color:#222222;">共享文件夹</span></p> 
<p style="margin-left:0;text-align:center;"><img alt="" height="362" src="https://images2.imgbox.com/e2/c8/xnnRsKPU_o.png" width="699"></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#FF0000;">五，通过</span></strong><strong><span style="color:#FF0000;">Windows</span></strong><strong><span style="color:#FF0000;">共享文件夹直接挂载到</span></strong><strong><span style="color:#FF0000;">Linux</span></strong><strong><span style="color:#FF0000;">中使用</span></strong></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">1</span><span style="color:#222222;">，利用</span><span style="color:#222222;">Linux</span><span style="color:#222222;">访问</span><span style="color:#222222;">Windows</span><span style="color:#222222;">共享的文件</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># smbclient -L //192.168.100.99/share  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">访问共享</span></span> </span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Enter SAMBA\root's password:                </span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">密码</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"><span style="color:#222222;">2</span><span style="color:#222222;">，将共享的文件挂载到</span><span style="color:#222222;">Linux</span><span style="color:#222222;">中，直接访问文件</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#c1dad7;vertical-align:bottom;width:.3pt;"> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">1</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">2</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">3</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">4</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">5</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">6</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">7</span></span></p> <p style="margin-left:0;text-align:right;"><span style="background-color:#fcfcfc;"><span style="color:#9fb8cc;">8</span></span></p> </td><td style="border-color:#c1dad7;vertical-align:bottom;"> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># mkdir -p /opt/share01  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">创建挂载点</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># mount.cifs //192.168.100.99/share /opt/share01  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">将共享文件夹挂载到挂载点</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">Password </span></span><strong><span style="background-color:#FFFFFF;"><span style="color:#006699;">for</span></span></strong> <span style="background-color:#FFFFFF;"><span style="color:#000000;">root@//192.168.100.99/share: </span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost ~]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cd /opt/share01  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">切换到挂载点</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost share01]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># ls</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;">test</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">.txt</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">[root@localhost share01]</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;"># cat test.txt  ##</span></span><span style="background-color:#FFFFFF;"><span style="color:#008200;">查看共享文件夹的文件内容</span></span></span></p> <p style="margin-left:0;text-align:left;"><span style="background-color:#fcfcfc;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">this is a </span></span><span style="background-color:#FFFFFF;">test</span><span style="background-color:#FFFFFF;"><span style="color:#000000;">!!</span></span></span></p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aa60f63493ce469b68e5913f9cdda622/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">地理探测器——Geodetector</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f2f8f0545ebf8dd1c757a7005ddb028/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Idea （优选）cherry-pick操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>