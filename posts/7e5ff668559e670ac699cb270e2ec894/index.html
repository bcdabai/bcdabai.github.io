<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>android 4.0 打开gps,Android获取定位权限，手动打开GPS - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="android 4.0 打开gps,Android获取定位权限，手动打开GPS" />
<meta property="og:description" content="获取定位权限，并且在没有打开GPS的时候引导用户打开手机GPS定位。
超级简单的
private Button button;
private int GPS_REQUEST_CODE = 1;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
button = findViewById(R.id.open_gps);
button.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View view) {
openGPSSEtting();
}
});
}
private boolean checkGpsIsOpen() {
boolean isOpen;
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
isOpen = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
return isOpen;
}
private void openGPSSEtting() {
if (checkGpsIsOpen()){
Toast.makeText(this, &#34;true&#34;, Toast.LENGTH_SHORT).show();
}else {
new AlertDialog.Builder(this).setTitle(&#34;open GPS&#34;)
.setMessage(&#34;go to open&#34;)
// 取消选项" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7e5ff668559e670ac699cb270e2ec894/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-27T04:53:01+08:00" />
<meta property="article:modified_time" content="2021-05-27T04:53:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">android 4.0 打开gps,Android获取定位权限，手动打开GPS</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>获取定位权限，并且在没有打开GPS的时候引导用户打开手机GPS定位。</p> 
 <p>超级简单的</p> 
 <p>private Button button;</p> 
 <p>private int GPS_REQUEST_CODE = 1;</p> 
 <p>@Override</p> 
 <p>protected void onCreate(Bundle savedInstanceState) {<!-- --></p> 
 <p>super.onCreate(savedInstanceState);</p> 
 <p>setContentView(R.layout.activity_main);</p> 
 <p>button = findViewById(R.id.open_gps);</p> 
 <p>button.setOnClickListener(new View.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(View view) {<!-- --></p> 
 <p>openGPSSEtting();</p> 
 <p>}</p> 
 <p>});</p> 
 <p>}</p> 
 <p>private boolean checkGpsIsOpen() {<!-- --></p> 
 <p>boolean isOpen;</p> 
 <p>LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);</p> 
 <p>isOpen = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);</p> 
 <p>return isOpen;</p> 
 <p>}</p> 
 <p>private void openGPSSEtting() {<!-- --></p> 
 <p>if (checkGpsIsOpen()){<!-- --></p> 
 <p>Toast.makeText(this, "true", Toast.LENGTH_SHORT).show();</p> 
 <p>}else {<!-- --></p> 
 <p>new AlertDialog.Builder(this).setTitle("open GPS")</p> 
 <p>.setMessage("go to open")</p> 
 <p>// 取消选项</p> 
 <p>.setNegativeButton("cancel",new DialogInterface.OnClickListener(){<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(DialogInterface dialogInterface, int i) {<!-- --></p> 
 <p>Toast.makeText(MainActivity.this, "close", Toast.LENGTH_SHORT).show();</p> 
 <p>// 关闭dialog</p> 
 <p>dialogInterface.dismiss();</p> 
 <p>}</p> 
 <p>})</p> 
 <p>// 确认选项</p> 
 <p>.setPositiveButton("setting", new DialogInterface.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(DialogInterface dialogInterface, int i) {<!-- --></p> 
 <p>//跳转到手机原生设置页面</p> 
 <p>Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);</p> 
 <p>startActivityForResult(intent,GPS_REQUEST_CODE);</p> 
 <p>}</p> 
 <p>})</p> 
 <p>.setCancelable(false)</p> 
 <p>.show();</p> 
 <p>}</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {<!-- --></p> 
 <p>super.onActivityResult(requestCode, resultCode, data);</p> 
 <p>if (requestCode ==GPS_REQUEST_CODE){<!-- --></p> 
 <p>openGPSSEtting();</p> 
 <p>}</p> 
 <p>}</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a024546f8ae33437eaea69c3315de6c5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">杜比专为旧版本Android,杜比音效app(dolby audio) v2.1.0 安卓版</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/316cc7974578767b8cc89f2bb4300504/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">android fragment页面切换,CorePage(Android使用Fragment打造万能页面切换框架)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>