<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Shell脚本入门 03：字符串与数组 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Shell脚本入门 03：字符串与数组" />
<meta property="og:description" content="文章目录 目的字符串获取字符串长度拼接字符串截取字符串替换字符串判断与默认值 内嵌文档与内嵌字符串内嵌文档 Here Document内嵌字符串 Here String 数组数组定义与使用获取数组长度拼接数组删除数组或其中元素 关联数组总结 目的 字符串与数组是Shell编程中常用的数据类型，这篇文章将对相关内容进行介绍。
字符串 Shell中的变量基本上默认都是字符串，通常使用下面方式声明和定义字符串类型的变量：
variable=value # value中不能出现空格 variable=&#39;value&#39; # &#39;&#39;内部所有内容都变为单纯的字符串，即使遇到$和``也不进行替换 variable=&#34;value: \&#34;233\&#34;&#34; # &#34;&#34;内部遇到$和``以及转义符会进行替换 # variable是变量名，value是赋给变量的值 # 赋值=周围不能有空格（重点） # 所有变量的值都是字符串，比如var=123，123也会以字符串形式存储，即&#39;123&#39;或是&#34;123&#34; # 变量定义后可以使用=重新赋值 下面是一些常用的字符串操作，需要注意的是对于复杂的字符串操作往往更多的时候会使用 cut grep awk sed expr 等命令。
获取字符串长度 在Shell中可以使用 ${#string_name} 来获取字符串长度：
拼接字符串 在Shell中拼接字符串不需要任何运算符，只需要把字符串变量排列在一起就行：
截取字符串 在Shell中截取字符串主要有下面方法：
${string:start} # 从左边start位置开始，从左到右截取剩余所有的字符串 ${string:start:length} # 从左边start位置开始，从左到右截取length长度的字符串 ${string:0-start} # 从右边start位置开始，从左到右截取剩余所有的字符串 ${string:0-start:length} # 从右边start位置开始，从左到右截取length长度的字符串 ${string#chars} # 从左开始匹配第一个chars字符串，截取其右边的字符串 ${string##chars} # 从左开始匹配最后一个chars字符串，截取其右边的字符串 ${string%chars} # 从右开始匹配第一个chars字符串，截取其左边的字符串 ${string%%chars} # 从右开始匹配最后一个chars字符串，截取其左边的字符串 替换字符串 在Shell中替换字符串主要有下面方法：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/1bda97a37d02a26690b9985a10815f5c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-22T17:33:03+08:00" />
<meta property="article:modified_time" content="2021-12-22T17:33:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Shell脚本入门 03：字符串与数组</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">目的</a></li><li><a href="#_4" rel="nofollow">字符串</a></li><li><ul><li><a href="#_18" rel="nofollow">获取字符串长度</a></li><li><a href="#_22" rel="nofollow">拼接字符串</a></li><li><a href="#_26" rel="nofollow">截取字符串</a></li><li><a href="#_40" rel="nofollow">替换字符串</a></li><li><a href="#_50" rel="nofollow">判断与默认值</a></li></ul> 
  </li><li><a href="#_59" rel="nofollow">内嵌文档与内嵌字符串</a></li><li><ul><li><a href="#_Here_Document_60" rel="nofollow">内嵌文档 Here Document</a></li><li><a href="#_Here_String_76" rel="nofollow">内嵌字符串 Here String</a></li></ul> 
  </li><li><a href="#_86" rel="nofollow">数组</a></li><li><ul><li><a href="#_88" rel="nofollow">数组定义与使用</a></li><li><a href="#_102" rel="nofollow">获取数组长度</a></li><li><a href="#_107" rel="nofollow">拼接数组</a></li><li><a href="#_112" rel="nofollow">删除数组或其中元素</a></li></ul> 
  </li><li><a href="#_117" rel="nofollow">关联数组</a></li><li><a href="#_133" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>目的</h2> 
<p>字符串与数组是Shell编程中常用的数据类型，这篇文章将对相关内容进行介绍。</p> 
<h2><a id="_4"></a>字符串</h2> 
<p>Shell中的变量基本上默认都是字符串，通常使用下面方式声明和定义字符串类型的变量：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">variable</span><span class="token operator">=</span>value <span class="token comment"># value中不能出现空格</span>
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token string">'value'</span> <span class="token comment"># ''内部所有内容都变为单纯的字符串，即使遇到$和``也不进行替换</span>
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token string">"value: <span class="token entity" title='\"'>\"</span>233<span class="token entity" title='\"'>\"</span>"</span> <span class="token comment"># ""内部遇到$和``以及转义符会进行替换</span>
<span class="token comment"># variable是变量名，value是赋给变量的值</span>
<span class="token comment"># 赋值=周围不能有空格（重点）</span>
<span class="token comment"># 所有变量的值都是字符串，比如var=123，123也会以字符串形式存储，即'123'或是"123"</span>
<span class="token comment"># 变量定义后可以使用=重新赋值</span>
</code></pre> 
<p>下面是一些常用的字符串操作，需要注意的是对于复杂的字符串操作往往更多的时候会使用 <code>cut</code> <code>grep</code> <code>awk</code> <code>sed</code> <code>expr</code> 等命令。</p> 
<h3><a id="_18"></a>获取字符串长度</h3> 
<p>在Shell中可以使用 <code>${#string_name}</code> 来获取字符串长度：<br> <img src="https://images2.imgbox.com/cb/6f/djADoZBI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_22"></a>拼接字符串</h3> 
<p>在Shell中拼接字符串不需要任何运算符，只需要把字符串变量排列在一起就行：<br> <img src="https://images2.imgbox.com/d7/3f/6PQwUIv2_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_26"></a>截取字符串</h3> 
<p>在Shell中截取字符串主要有下面方法：</p> 
<pre><code class="prism language-bash"><span class="token variable">${string<span class="token operator">:</span>start}</span> <span class="token comment"># 从左边start位置开始，从左到右截取剩余所有的字符串</span>
<span class="token variable">${string<span class="token operator">:</span>start<span class="token operator">:</span>length}</span> <span class="token comment"># 从左边start位置开始，从左到右截取length长度的字符串</span>
<span class="token variable">${string<span class="token operator">:</span>0-start}</span> <span class="token comment"># 从右边start位置开始，从左到右截取剩余所有的字符串</span>
<span class="token variable">${string<span class="token operator">:</span>0-start<span class="token operator">:</span>length}</span> <span class="token comment"># 从右边start位置开始，从左到右截取length长度的字符串</span>
<span class="token variable">${string<span class="token operator">#</span>chars}</span> <span class="token comment"># 从左开始匹配第一个chars字符串，截取其右边的字符串</span>
<span class="token variable">${string<span class="token operator">##</span>chars}</span> <span class="token comment"># 从左开始匹配最后一个chars字符串，截取其右边的字符串</span>
<span class="token variable">${string<span class="token operator">%</span>chars}</span> <span class="token comment"># 从右开始匹配第一个chars字符串，截取其左边的字符串</span>
<span class="token variable">${string<span class="token operator">%%</span>chars}</span> <span class="token comment"># 从右开始匹配最后一个chars字符串，截取其左边的字符串</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/13/72/RuJVYb4b_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_40"></a>替换字符串</h3> 
<p>在Shell中替换字符串主要有下面方法：</p> 
<pre><code class="prism language-bash"><span class="token variable">${string<span class="token operator">/</span>substring<span class="token operator">/</span>replacement}</span> <span class="token comment"># 使用$replacement, 来代替第一个匹配的$substring</span>
<span class="token variable">${string<span class="token operator">/</span><span class="token operator">/</span>substring<span class="token operator">/</span>replacement}</span> <span class="token comment"># 使用$replacement, 代替所有匹配的$substring</span>
<span class="token variable">${string<span class="token operator">/</span><span class="token operator">#</span>substring<span class="token operator">/</span>replacement}</span> <span class="token comment"># 如果$string的前缀匹配$substring, 那么就用$replacement来代替匹配到的$substring</span>
<span class="token variable">${string<span class="token operator">/</span><span class="token operator">%</span>substring<span class="token operator">/</span>replacement}</span> <span class="token comment"># 如果$string的后缀匹配$substring, 那么就用$replacement来代替匹配到的$substring</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/ca/imAeh1kR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_50"></a>判断与默认值</h3> 
<pre><code class="prism language-bash"><span class="token variable">${str<span class="token operator">:-</span>DEFAULT}</span> <span class="token comment"># 如果str为空, 那么就以DEFAULT作为返回值</span>
<span class="token variable">${str<span class="token operator">:=</span>DEFAULT}</span> <span class="token comment"># 如果str为空, 那么就以DEFAULT作为返回值, 并将str赋值为DEFAULT</span>
<span class="token variable">${str<span class="token operator">:+</span>OTHER}</span> <span class="token comment"># 如果str不为空, 那么就以OTHER作为返回值</span>
<span class="token variable">${str<span class="token operator">:?</span>ERR_MSG}</span> <span class="token comment"># 如果str为空, 那么输出报错信息ERR_MSG并推出程序</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/66/68/m0OAavqx_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_59"></a>内嵌文档与内嵌字符串</h2> 
<h3><a id="_Here_Document_60"></a>内嵌文档 Here Document</h3> 
<p>Linux中很多命令都是对文件中文本的操作，但有些小的内容放到一个个文件中再由这些命令来操作有时候并不合适，毕竟文件操作速度比较慢。这种情况中有一部分可以用 Here Document 来处理，其使用方式如下：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">command</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF
    document
EOF</span>
</code></pre> 
<p><code>command</code> 是 Shell 命令， <code>&lt;&lt;EOF</code> 是开始标志， <code>EOF</code> 是结束标志， <code>document</code> 是输入的文档，就是一行或多行的字符串。开始标志和结束标志中字符串部分可以自行定义，只要前后一致就行；开始标志的 <code>&lt;&lt;</code> 和字符串中间可以有空格；结束标志必须单独一行顶格写，不然会被识别为普通文本。<br> <img src="https://images2.imgbox.com/e8/69/wMtFrmcz_o.png" alt="在这里插入图片描述"><br> 默认情况下 Here Document 中特定内容会被替换或转义，可以使用单双引号包围开始标志的字段来忽略：<br> <img src="https://images2.imgbox.com/1d/49/uKYxFRlH_o.png" alt="在这里插入图片描述"><br> 默认情况下 Here Document 会保留文本行首的制表符（主要就是Tab的缩进），可以在 <code>&lt;&lt;</code> 符号后加 <code>-</code> 来忽略行首的制表符：<br> <img src="https://images2.imgbox.com/50/dd/33N3XR6O_o.png" alt="在这里插入图片描述"><br> Here Document 通常也被用来作为 <strong>多行字符串</strong> 使用：<br> <img src="https://images2.imgbox.com/dc/91/GpUyNLVT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_Here_String_76"></a>内嵌字符串 Here String</h3> 
<p>Here String 是 Here Document 的一个变种，它的用法如下：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">command</span> <span class="token operator">&lt;&lt;&lt;</span> string
</code></pre> 
<p><code>command</code> 是 Shell 命令， <code>string</code> 是字符串，其使用方法和Shell中的一般字符串的使用方式一样：<br> <img src="https://images2.imgbox.com/90/0a/mcJ9tz27_o.png" alt="在这里插入图片描述"><br> 字符串在被引号包围的时候也可以作为 <strong>多行字符串</strong> 使用：<br> <img src="https://images2.imgbox.com/9f/db/DiQQO9Yi_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_86"></a>数组</h2> 
<p><em>Shell中只有一维数组。</em></p> 
<h3><a id="_88"></a>数组定义与使用</h3> 
<p>Shell中使用下面方式定义数组：</p> 
<pre><code class="prism language-bash"><span class="token assign-left variable">array_name</span><span class="token operator">=</span><span class="token punctuation">(</span>ele1  ele2  ele3 <span class="token punctuation">..</span>. elen<span class="token punctuation">)</span>
</code></pre> 
<p>数组定义后可以使用索引（下标来取用数组中的元素）：<br> <img src="https://images2.imgbox.com/5e/d3/DHSgi51q_o.png" alt="在这里插入图片描述"></p> 
<p>Shell的数组可以在定义时只给出特定几个元素；数组中的元素可以类型不同；可以在使用时再增加长度：<br> <img src="https://images2.imgbox.com/1c/9d/IqJyycjQ_o.png" alt="在这里插入图片描述"></p> 
<p>索引可以使用 <code>*</code> 或 <code>@</code> 来获取数组中所有元素：<br> <img src="https://images2.imgbox.com/ba/e0/qxJ9XfxO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_102"></a>获取数组长度</h3> 
<p>可以用 <code>#</code> 结合 <code>*</code> 或 <code>@</code> 来获取数组的长度：<br> <img src="https://images2.imgbox.com/9d/ba/jwpsioz6_o.png" alt="在这里插入图片描述"><br> 需要注意的是这里这计算出的长度只包含非空元素的数量。</p> 
<h3><a id="_107"></a>拼接数组</h3> 
<p>Shell中拼接数组主要方法就是将原有数组中内容全部取出，然后生成新数组：<br> <img src="https://images2.imgbox.com/c9/4c/8PapTDYf_o.png" alt="在这里插入图片描述"><br> 需要注意的是空元素并不会出现在新数组中。</p> 
<h3><a id="_112"></a>删除数组或其中元素</h3> 
<p>可以使用 <code>unset</code> 关键词删除数组或其中元素：<br> <img src="https://images2.imgbox.com/69/49/5Ty5z14u_o.png" alt="在这里插入图片描述"><br> 需要注意的是删除数组其中元素后其它元素原本的索引号不会改变。</p> 
<h2><a id="_117"></a>关联数组</h2> 
<p>通常数组都是靠数字索引需要来使用的，在Shell还有一个叫关联数组的东西，内部存储的是一个个键值对（key-value），其内部的元素可以通过字符串（key）索引来取用。可以使用下面方式声明和定义关联数组：</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">declare</span> -A array1
array1<span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token operator">=</span>value1
array1<span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token operator">=</span>value2

<span class="token builtin class-name">declare</span> -A <span class="token assign-left variable">array2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token operator">=</span>value1 <span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token operator">=</span>value2<span class="token punctuation">)</span>
</code></pre> 
<p>关联数组元素取用和普通数组相似，只是数字索引变成了键名：<br> <img src="https://images2.imgbox.com/11/ca/Tdj2iMZc_o.png" alt="在这里插入图片描述"></p> 
<p>可以用 <code>!</code> 结合 <code>*</code> 或 <code>@</code> 来获取关联数组中所有键名：<br> <img src="https://images2.imgbox.com/84/d9/woDiQ6Nl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_133"></a>总结</h2> 
<p>基本上到这里为止就包含了Shell中变量大部分的基本内容了，在网上就是变量的数值和逻辑运算了，这个将在后面的文章中进行介绍。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7a92d806f58b5294c7eaf92ab42f09e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">gis坐标|如何将excel中的坐标导入gis</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/33f824198ca888dc05c23ded5acf7d6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">window系统下JDK1.8的安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>