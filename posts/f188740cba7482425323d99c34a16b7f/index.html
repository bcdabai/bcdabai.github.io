<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>1、安装 docker 环境 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="1、安装 docker 环境" />
<meta property="og:description" content="1、安装 docker 环境 1 2 3 4 5 6 7 8 9 10 11 1）安装 docker curl -sSL https://get.daocloud.io/docker | sh 2）启动服务 systemctl start docker 3）查看服务状态 systemctl status docker 4）设置开机自启动 systemctl enable docker 官方文档：Install Docker Engine on CentOS | Docker Documentation
2、实现 docker 镜像加速 1 curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io 3、安装 docker-compose 1 2 curl -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose chmod &#43;x /usr/local/bin/docker-compose 4、开放指定端口 1 2 3 4 5 # 请将 * 修改成需要开放的端口（请自行查看 docker-compose." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f188740cba7482425323d99c34a16b7f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-27T19:22:53+08:00" />
<meta property="article:modified_time" content="2021-11-27T19:22:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">1、安装 docker 环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="1、安装-docker-环境">1、安装 docker 环境</h4> 
<table><tbody><tr><td> <pre>1
2
3
4
5
6
7
8
9
10
11
</pre> </td><td> <pre>1）安装 docker
	curl -sSL https://get.daocloud.io/docker | sh

2）启动服务
	systemctl start docker
	
3）查看服务状态
	systemctl status docker
	
4）设置开机自启动
	systemctl enable docker
</pre> </td></tr></tbody></table> 
<p>官方文档：<a href="https://docs.docker.com/engine/install/centos/" rel="nofollow" title="Install Docker Engine on CentOS | Docker Documentation">Install Docker Engine on CentOS | Docker Documentation</a></p> 
<h4 id="2、实现-docker-镜像加速">2、实现 docker 镜像加速</h4> 
<table><tbody><tr><td> <pre>1
</pre> </td><td> <pre>curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io
</pre> </td></tr></tbody></table> 
<h4 id="3、安装-docker-compose">3、安装 docker-compose</h4> 
<table><tbody><tr><td> <pre>1
2
</pre> </td><td> <pre>curl -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
</pre> </td></tr></tbody></table> 
<h4 id="4、开放指定端口">4、开放指定端口</h4> 
<table><tbody><tr><td> <pre>1
2
3
4
5
</pre> </td><td> <pre># 请将 * 修改成需要开放的端口（请自行查看 docker-compose.yml 文件中的 ports 属性）
firewall-cmd --permanent --zone=public --add-port=*/tcp

# 重载防火墙配置
firewall-cmd --reload
</pre> </td></tr></tbody></table> 
<h4 id="5、将-docker-compose-yml-文件上传至-home-目录下">5、将 docker-compose.yml 文件上传至 home 目录下，内容如下</h4> 
<p>version: "3.8"</p> 
<p></p> 
<p>services:</p> 
<p>  redis:</p> 
<p>    image: redis</p> 
<p>    container_name: redis</p> 
<p>    restart: always</p> 
<p>    ports:</p> 
<p>      - "6379:6379"</p> 
<p>    volumes:</p> 
<p>      - "/home/redis:/data"</p> 
<p>    command: ["redis-server", "--requirepass", "123456"]</p> 
<p>  mysql:</p> 
<p>    image: mysql:5.7</p> 
<p>    container_name: mysql</p> 
<p>    restart: always</p> 
<p>    ports:</p> 
<p>      - "3306:3306"</p> 
<p>    volumes:</p> 
<p>      # 设置容器的服务器时间与宿主机的时间同步</p> 
<p>      - "/etc/localtime:/etc/localtime"</p> 
<p>      - "/home/mysql/data:/var/lib/mysql"</p> 
<p>      - "/home/mysql/mysqld.cnf:/etc/mysql/mysql.conf.d/mysqld.cnf"</p> 
<p>    environment:</p> 
<p>      - MYSQL_ROOT_PASSWORD=123456</p> 
<p>    command: ["--character-set-server=utf8", "--collation-server=utf8_general_ci"]</p> 
<p>  rabbitmq:</p> 
<p>    image: rabbitmq:3.8.9-management</p> 
<p>    container_name: rabbitmq</p> 
<p>    restart: always</p> 
<p>    hostname: xinyzm_rabbit</p> 
<p>    ports:</p> 
<p>      - 15672:15672</p> 
<p>      - 5672:5672</p> 
<p>    environment:</p> 
<p>      - RABBITMQ_DEFAULT_USER=root</p> 
<p>      - RABBITMQ_DEFAULT_PASS=123456  </p> 
<p>   </p> 
<p># docker network create <span style="color:#ff9900;">yourName</span> -&gt; 使用桥接方式支持多容器之间可以正常通信  </p> 
<p>networks:</p> 
<p>  default:</p> 
<p>    external:</p> 
<p>      name: <span style="color:#ff9900;">yourName</span></p> 
<h4 id="6、根据-docker-compose-yml-文件的-volumes-属性创建目录或上传文件到指定目录（只关注-home-目录相关）">6、根据 docker-compose.yml 文件的 volumes 属性创建目录或上传文件到指定目录（只关注 home 目录相关）</h4> 
<p>以 “<strong>/home/tomcat/conf/server.xml:/usr/local/tomcat/conf/server.xml</strong>”为例，根据这句脚本命令，我们需要在 home 目录下创建 tomcat 目录，然后在 tomcat 目录下创建 conf 目录，进入到 /home/tomcat/conf 目录，将 server.xml 文件上传到当前目录</p> 
<h4 id="7、创建网络实现各容器之间的正常通信">7、创建网络实现各容器之间的正常通信</h4> 
<table><tbody><tr><td> <pre>1
</pre> </td><td> <pre>docker network create arfysica
</pre> </td></tr></tbody></table> 
<h4 id="8、执行-docker-compose-yml-文件">8、执行 docker-compose.yml 文件</h4> 
<table><tbody><tr><td> <pre>1
2
3
</pre> </td><td> <pre>cd /home

docker-compose up -d
</pre> </td></tr></tbody></table> 
<h4 id="9、查看容器是否启动成功">9、查看容器是否启动成功</h4> 
<table><tbody><tr><td> <pre>1
</pre> </td><td> <pre>docker ps
</pre> </td></tr></tbody></table> 
<p style="text-align:center;"><img alt="查看容器是否启动成功" src="https://images2.imgbox.com/f1/5f/zi1Obp9Y_o.png"></p> 
<h4 id="10、执行-SQL-脚本">10、执行 SQL 脚本</h4> 
<p>（1）使用可视化 SQL 工具（推荐使用 navicat）</p> 
<p>（2）连接数据库，数据库密码自行查看 docker-compose.yml 文件的 MYSQL_ROOT_PASSWORD 属性</p> 
<p>（3）连接成功后，执行 SQL 脚本</p> 
<h4 id="11、服务应用升级">11、服务应用升级</h4> 
<table><tbody><tr><td> <pre>1
2
</pre> </td><td> <pre># 直接将新的应用包替换原来的，如果是后端升级再执行下面的命令，前端升级直接替换即可
docker restart tomcat
</pre> </td></tr></tbody></table> 
<h4 id="附：">附：</h4> 
<p>如果在首次安装启动服务时，后端应用访问异常，可能原因是当前应用在启动加载过程中需要访问数据库，这时数据库并不存在，从而导致服务异常，只需要重启服务即可，执行 <strong>docker restart tomcat</strong> 命令</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f659c351ad0387df2d1dbf7c3fd8443/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言中指针传参</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2858b6b1fbba419748ec8ee6a630d9ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">几步教会你螺母拧出螺栓动画</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>