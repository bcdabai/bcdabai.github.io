<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux记录14-4.32,4.33 nginx虚拟主机、本地hosts文件配置本地域名解析、 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux记录14-4.32,4.33 nginx虚拟主机、本地hosts文件配置本地域名解析、" />
<meta property="og:description" content="虚拟主机：
就是一个服务器上可以有多个虚拟主机，在 HTTP 相关的概念里就是host (域名)
HTTP1.1以后一个WEB服务可以有多个站点，一个站点就是一个虚拟主机
(在最开始，一个服务器跑了一个nginx就只能有一个域名，如果需要起一个新的域名就需要起一个新的nginx服务)
在nginx.conf配置文件里（yum安装的nginx）
红色，include的文件就是虚拟主机所有配置文件
查看有个default.conf 每一个server都是一个虚拟主机
listen 是监听端口
server_name 是域名
一个站点需要对应一个域名和一个目录，/usr/share/nginx/html 就是这个站点所在的目录
index 是索引意思
直接输入IP地址就可以访问，但是目前无法显示，原因是80端口没有通
怎么检测80端口是否通了呢？
windows里面就是在cmd下使用 telnet 192.168.222.128 80 可以测试
（如果没有加载telnet命令需要去开放）
linux下也是使用telnet命令，如果没有就yum安装一下
测试发现端口不通，很大可能是因为防火墙
CentOS7自带firewalld服务，默认开启状态，因此80端口需要添加到白名单，或者关闭防火墙
iptables -nvL 查看防火墙命令规则
不建议关闭，但是想排除防火墙影响可以直接 关闭防火墙 systemctl stop firewalld
打开防火墙 是 systemctl start firewalld
关闭防护墙后， telnet 80 端口是connected 已通
重新用IP登陆，成功显示网页
这里还不通的话检查下nginx服务是否在线，ping一下网络是否通的。
firewall-cmd --add-port=80/tcp
临时增加防火墙的一个80端口
firewall-cmd --add-port=80/tcp --permanent
永久增加防火墙的一个80端口，还要加一个 --permanent
这样就成功加入了白名单，但是因为防火墙没有重启并没有生效，reload 重载
firewall-cmd --reload
再次访问 IP ,可以看到网页了。如果还不行，ps检查下有没有nginx进程，没有设自启动，服务器重启后是没有nginx服务的
每个虚拟主机就是一个站点，每个站点应该要有一个域名
之前用的IP直接访问，其实IP就是域名解析的结果
现在用nginx为IP指定一个域名
进入 default." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f67bf96256e7107c50e4689eb2062e57/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-12T07:46:44+08:00" />
<meta property="article:modified_time" content="2022-08-12T07:46:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux记录14-4.32,4.33 nginx虚拟主机、本地hosts文件配置本地域名解析、</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0cm;">虚拟主机：</p> 
<p style="margin-left:0cm;">就是一个服务器上可以有多个虚拟主机，在 HTTP 相关的概念里就是host (域名)</p> 
<p style="margin-left:0cm;">HTTP1.1以后一个WEB服务可以有多个站点，一个站点就是一个虚拟主机</p> 
<p style="margin-left:0cm;">(在最开始，一个服务器跑了一个nginx就只能有一个域名，如果需要起一个新的域名就需要起一个新的nginx服务)</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">在nginx.conf配置文件里（yum安装的nginx）</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="34" src="https://images2.imgbox.com/78/10/YNUi0but_o.png" width="661"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">红色，include的文件就是虚拟主机所有配置文件</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="302" src="https://images2.imgbox.com/f5/f3/0Ez1Olgm_o.png" width="574"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">查看有个default.conf </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="74" src="https://images2.imgbox.com/72/8e/PR10tFYf_o.png" width="380"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">每一个server都是一个虚拟主机</p> 
<p style="margin-left:0cm;">listen  是监听端口</p> 
<p style="margin-left:0cm;">server_name  是域名</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="338" src="https://images2.imgbox.com/e9/9a/9fmxySLA_o.png" width="532"></p> 
<p style="margin-left:0cm;">一个站点需要对应一个域名和一个目录，/usr/share/nginx/html 就是这个站点所在的目录</p> 
<p style="margin-left:0cm;">index 是索引意思</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="80" src="https://images2.imgbox.com/1e/a3/okO5sMuB_o.png" width="301"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">直接输入IP地址就可以访问，但是目前无法显示，原因是80端口没有通<img alt="" class="has" height="327" src="https://images2.imgbox.com/62/49/ma8kkzID_o.png" width="333"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">怎么检测</span><span style="color:#ff0000;">80</span><span style="color:#ff0000;">端口是否通了呢？</span></p> 
<p style="margin-left:0cm;">windows里面就是在cmd下使用 telnet 192.168.222.128  80 可以测试</p> 
<p style="margin-left:0cm;">（如果没有加载telnet命令需要去开放）</p> 
<p style="margin-left:0cm;"><img alt="" height="568" src="https://images2.imgbox.com/a7/78/YmIPns6W_o.png" width="533"></p> 
<p> </p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">linux下也是使用telnet命令，如果没有就yum安装一下</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="136" src="https://images2.imgbox.com/04/cf/aKD7l3h0_o.png" width="749"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">测试发现端口不通，<span style="color:#0d0016;">很大可能是因为防火墙</span></p> 
<p style="margin-left:0cm;"><img alt="" height="80" src="https://images2.imgbox.com/6b/ee/dh7Oofi1_o.png" width="771"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">CentOS7自带firewalld服务，默认开启状态，因此80端口需要添加到白名单，或者关闭防火墙</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">iptables  -nvL </span> 查看防火墙命令规则</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">不建议关闭，但是想排除防火墙影响可以直接  <span style="color:#ff0000;">关闭防火墙 </span>systemctl stop firewalld</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="39" src="https://images2.imgbox.com/8c/52/Kp6sBOUc_o.png" width="735"></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">打开防火墙 </span><span style="color:#0d0016;">是 systemctl start firewalld</span></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="32" src="https://images2.imgbox.com/7f/37/E2GtoQF9_o.png" width="751"></p> 
<p style="margin-left:0cm;">关闭防护墙后， telnet  80 端口是connected  已通</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="86" src="https://images2.imgbox.com/9b/77/pNGFhtWj_o.png" width="676"></p> 
<p style="margin-left:0cm;">重新用IP登陆，成功显示网页</p> 
<p style="margin-left:0cm;">这里还不通的话检查下nginx服务是否在线，ping一下网络是否通的。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="189" src="https://images2.imgbox.com/05/fe/2DJbeXTj_o.png" width="487"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">firewall-cmd  --add-port=80/tcp</p> 
<p style="margin-left:0cm;"><span style="color:#fe2c24;">临时</span>增加防火墙的一个80端口</p> 
<p style="margin-left:0cm;"><img alt="" height="57" src="https://images2.imgbox.com/a6/13/cdrOxv0a_o.png" width="825"></p> 
<p></p> 
<p style="margin-left:0cm;">firewall-cmd  --add-port=80/tcp  --permanent</p> 
<p style="margin-left:0cm;"><span style="color:#fe2c24;">永久</span>增加防火墙的一个80端口，还要加一个 --permanent</p> 
<p style="margin-left:0cm;"><img alt="" height="59" src="https://images2.imgbox.com/c6/05/RG458ydJ_o.png" width="932"></p> 
<p></p> 
<p style="margin-left:0cm;">这样就成功加入了白名单，但是因为防火墙没有重启并没有生效，reload 重载</p> 
<p style="margin-left:0cm;">firewall-cmd  --reload</p> 
<p style="margin-left:0cm;"><img alt="" height="57" src="https://images2.imgbox.com/e8/61/aU1NLDUx_o.png" width="735"></p> 
<p>再次访问 IP ,可以看到网页了。如果还不行，ps检查下有没有nginx进程，没有设自启动，服务器重启后是没有nginx服务的</p> 
<p><img alt="" height="303" src="https://images2.imgbox.com/6c/e8/7C8XhNc0_o.png" width="523"></p> 
<p></p> 
<p></p> 
<p></p> 
<p style="margin-left:0cm;">每个虚拟主机就是一个站点，每个站点应该要有一个域名</p> 
<p style="margin-left:0cm;">之前用的IP直接访问，其实IP就是域名解析的结果</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">现在用nginx为IP指定一个域名</p> 
<p style="margin-left:0cm;">进入 default.conf 配置文件 ，把 server_name  中 localhost 改为 www.lwj.com</p> 
<p style="margin-left:0cm;"><img alt="" height="104" src="https://images2.imgbox.com/b9/0b/EO1Trqok_o.png" width="342"></p> 
<p></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">nginx  -t 检测是否有错误 （要使用nginx可执行程序）</p> 
<p style="margin-left:0cm;"><img alt="" height="139" src="https://images2.imgbox.com/72/57/rN2CREyr_o.png" width="796"></p> 
<p></p> 
<p style="margin-left:0cm;">nginx -s  reload  重载配置。  没有报错就是成功</p> 
<p style="margin-left:0cm;"><img alt="" height="65" src="https://images2.imgbox.com/c4/90/iajYEjqH_o.png" width="762"></p> 
<p></p> 
<p style="margin-left:0cm;">systemctl  restart  nginx        可以重启nginx</p> 
<p style="margin-left:0cm;">重启也可以达到同样效果，但<span style="color:#ff0000;">尽量用重载不用重启</span>，因为如果已经有人正在访问服务器，<strong>重启就会中断进程，重载不会。</strong></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">现在这个域名www.lwj.com 还并没有指向到我们的IP上，需要DNS验证才能解析到我们想要的IP上</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">随意ping一下域名不是我们的IP</p> 
<p style="margin-left:0cm;"><img alt="" height="101" src="https://images2.imgbox.com/f8/31/fPB87DSs_o.png" width="792"></p> 
<p></p> 
<p></p> 
<p></p> 
<h3><span style="color:#956fe7;"><strong>配置本地域名解析：</strong></span></h3> 
<p style="margin-left:0cm;"><span style="color:#f33b45;">可通过改本机的hosts文件，引导本机解析域名。（但只在本机有效）</span></p> 
<p style="margin-left:0cm;"><span style="color:#4da8ee;">linux 路径： /ect/hosts</span></p> 
<p style="margin-left:0cm;"><span style="color:#4da8ee;">windows 路径：c/windows/System32/drivers/etc/hosts   （</span><span style="color:#0d0016;">可能需要增加管理员权限</span><span style="color:#4da8ee;">）</span></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><img alt="" height="24" src="https://images2.imgbox.com/d2/6d/wLBGfMEz_o.png" width="586"></p> 
<p style="margin-left:0cm;">在hosts文件中写上域名和IP地址<img alt="" height="111" src="https://images2.imgbox.com/0d/ab/2oJYPnrn_o.png" width="311"></p> 
<p style="margin-left:0cm;"></p> 
<p></p> 
<p style="margin-left:0cm;">再ping一次，域名解析过来的IP已经对了，解析的就是我们设定的IP</p> 
<p style="margin-left:0cm;"><img alt="" height="124" src="https://images2.imgbox.com/32/2f/qUn9Sy8e_o.png" width="777"></p> 
<p></p> 
<p style="margin-left:0cm;">在windows下也可以改：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="173" src="https://images2.imgbox.com/be/b1/GC0u2FEo_o.png" width="833"></p> 
<p style="margin-left:0cm;">记事本打开，添加上IP和域名，保存</p> 
<p style="margin-left:0cm;"><img alt="" height="142" src="https://images2.imgbox.com/ae/59/cA3Kc2cE_o.png" width="351"></p> 
<p></p> 
<p></p> 
<p style="margin-left:0cm;">win中启动 cmd 是 窗口 + R 调出运行，运行中输入cmd，启动</p> 
<p style="margin-left:0cm;">cmd中ping一下，同样成功了</p> 
<p style="margin-left:0cm;"><img alt="" height="92" src="https://images2.imgbox.com/80/da/kCGW9fI7_o.png" width="474"></p> 
<p style="margin-left:0cm;"><strong>本地</strong>用浏览器也能通过这个域名访问到我们的服务器</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/fe/b3/MOm4LB1A_o.png" width="377"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h3 style="margin-left:0cm;"><span style="color:#956fe7;"><strong>默认虚拟主机的定义：</strong></span></h3> 
<p style="margin-left:0cm;">一个server_name就是一个虚拟主机。</p> 
<p style="margin-left:0cm;"><strong><span style="color:#0d0016;">同一个IP可以被多个域名解析。</span></strong></p> 
<p style="margin-left:0cm;">也就是，换别的域名也能访问到这个IP，只要这个域名能被正确的解析到这个IP  。</p> 
<p style="margin-left:0cm;"></p> 
<p><img alt="" height="130" src="https://images2.imgbox.com/0a/a1/H2M7zkin_o.png" width="325"></p> 
<p>但注意，nginx.conf 里也可以配置不同域名指引访问到同一服务器不同的页面，</p> 
<p><strong><span style="color:#fe2c24;">NGINX配置文件中没有找到对应域名（server_name）的配置，才会走默认虚拟主机。</span></strong></p> 
<p>就是，只要是解析到这个服务器 IP上，没有在nginx配置文件中被指定server_name的所有域名，都会访问默认虚拟主机的配置。</p> 
<p></p> 
<p><img alt="" height="184" src="https://images2.imgbox.com/e4/3e/7WneI8si_o.png" width="375"></p> 
<p>这里 nginx.conf 中没配置 www.qwt.com ，那么www.qwt.com <span style="color:#0d0016;"><strong>域名解析到这个IP，就会找这个IP下的默认虚拟主机。</strong>也就是www.lwj.com的配置</span></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h3 style="margin-left:0cm;"><span style="color:#956fe7;">虚拟主机的认定：</span></h3> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">在conf.d配置里面暂时只有这一个主机（yum安装情况），<span style="color:#f33b45;">主机配置名字其实可以随便改的</span>，虽然叫default但是不一定就是默认虚拟主机。default命名的主机名字和默认主机没有必然关系。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="70" src="https://images2.imgbox.com/49/ea/R4mVR2Yu_o.png" width="443"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">拷贝一个主机配置文件做测试</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="97" src="https://images2.imgbox.com/7f/18/XwDpkmqg_o.png" width="731"></p> 
<p style="margin-left:0cm;">这种情况下 <strong><span style="color:#4da8ee;"> 排序在前的配置文件</span>会被当成<span style="color:#4da8ee;">默认虚拟主机</span></strong></p> 
<p style="margin-left:0cm;">这里 2.conf 会被当成默认主机。</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">这种靠排序认定默认虚拟主机的方式并不靠谱！</p> 
<p style="margin-left:0cm;"><strong><span style="color:#f33b45;">设定默认主机方式</span>：</strong></p> 
<p style="margin-left:0cm;">在.conf配置文件的<span style="color:#f33b45;">监听端口后加上  <strong>default_server </strong> ，</span><span style="color:#0d0016;">这个配置文件的主机</span>就成为了<span style="color:#f33b45;">默认虚拟主机</span></p> 
<p style="margin-left:0cm;"><img alt="" height="96" src="https://images2.imgbox.com/b9/b5/q3JUHgq5_o.png" width="404"></p> 
<p> </p> 
<p style="margin-left:0cm;"><span style="color:#4da8ee;"><strong>设置默认虚拟主机以后，只要是解析到这个服务器IP上，没有被指定为server_name的所有域名，都会访问default_server的配置。</strong></span></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h3 style="margin-left:0cm;"><strong><span style="color:#956fe7;">在nginx配置文件上设置一个访问其他指定页面的虚拟主机：</span></strong></h3> 
<p style="margin-left:0cm;">打算用www.abc.com 这个域名。</p> 
<p style="margin-left:0cm;">首先要把这个域名也解析到这个IP。</p> 
<p style="margin-left:0cm;"><img alt="" height="88" src="https://images2.imgbox.com/c5/1f/dsCQAQXE_o.png" width="463"></p> 
<p> </p> 
<p style="margin-left:0cm;">新<span style="color:#0d0016;">定义一个虚拟主机名 server_name  w</span>ww.abc.com</p> 
<p style="margin-left:0cm;">分配一个给  www.abc.com的 root  路径 /tmp/html</p> 
<p style="margin-left:0cm;">（一个虚拟主机至少要有 server_name 和 root）</p> 
<p style="margin-left:0cm;"><img alt="" height="620" src="https://images2.imgbox.com/c5/8e/A7UTcODT_o.png" width="496"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">给 www.abc.com 在指定路径下写一个 index.html</p> 
<p style="margin-left:0cm;"><img alt="" height="125" src="https://images2.imgbox.com/b3/bb/mPwOh02a_o.png" width="905"></p> 
<p> </p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">浏览器登陆 www.abc.com   可以显示出我们定义的内容</p> 
<p style="margin-left:0cm;"><img alt="" height="132" src="https://images2.imgbox.com/86/05/ET7FHv0E_o.png" width="499"></p> 
<p> </p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h3 style="margin-left:0cm;"><span style="color:#956fe7;">默认虚拟主机最重要的作用  范解析 :</span></h3> 
<p style="margin-left:0cm;">范解析是相当多的域名解析过来都可以访问到同一个IP地址，而不用每个域名逐个去配置。</p> 
<p style="margin-left:0cm;">但是这样的话只要设置域名解析到我们的IP就能访问服务器（就好像在windows里hosts设置的www.qwt.com，这个在linux的主机里并没有设置）。</p> 
<p style="margin-left:0cm;">这导致<span style="color:#f33b45;">任何设置了解析到这个IP的域名都能访问到服务器</span>。</p> 
<p style="margin-left:0cm;">这个功能好用但是有安全风险。</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h4 style="margin-left:0cm;"><span style="color:#956fe7;">禁止泛解析：</span></h4> 
<p style="margin-left:0cm;">在配置文件中 <strong><span style="color:#ff0000;">deny all</span></strong></p> 
<p style="margin-left:0cm;"><img alt="" height="145" src="https://images2.imgbox.com/db/e6/25k75He9_o.png" width="396"></p> 
<p> </p> 
<p style="margin-left:0cm;">这样，<strong>只有配置文件定义了的sever_name 域名的</strong><strong>可以被访问的到</strong>。（www.lwj.com 和 www.abc.com ）</p> 
<p style="margin-left:0cm;">而之前  www.qwt.com则变成了403，无法访问 。（虽然www.qwt.com能解析到服务器IP）</p> 
<p style="margin-left:0cm;"><img alt="" height="207" src="https://images2.imgbox.com/36/ca/NSCh51XR_o.png" width="579"></p> 
<p> </p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">虚拟主机配置文件 用 <span style="color:#ff9900;"><strong>域名 </strong></span><span style="color:#0d0016;">作为</span><span style="color:#ff9900;"><strong> 虚拟主机配置文件的名字</strong></span><span style="color:#0d0016;">，这样易于区分</span></p> 
<p style="margin-left:0cm;">新建一个域名的对应配置文件</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="97" src="https://images2.imgbox.com/9c/44/LNryd9xe_o.png" width="850"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">windows 中hosts文件记事本打开，因为是在自己电脑里的hosts里面设置了解析，所以也只能是自己访问，别人访问不了这个网站，因为别人的DNS上没有这个域名的解析。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="46" src="https://images2.imgbox.com/7a/cf/5ABefXsY_o.png" width="875"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">直接ping域名是能通的，但是nginx –t 错误检测不会通过，因为这个配置文件是cp 2.conf得来的，那个已经定义了一个一样的域名www.ccc.com了，还没有修改成新的blog.aminglinux.cc导致域名冲突。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="143" src="https://images2.imgbox.com/4d/6e/kXE4jvZV_o.png" width="1036"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">修改一下新的配置文件</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="39" src="https://images2.imgbox.com/34/91/zDuZKtRr_o.png" width="803"></p> 
<p style="margin-left:0cm;">域名修改成对应的：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="116" src="https://images2.imgbox.com/91/d3/sCmnbLc7_o.png" width="517"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="763" src="https://images2.imgbox.com/1e/f5/ccN587rv_o.png" width="997"></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">charset</span>   定义的是一个字符集</p> 
<p style="margin-left:0cm;">下面网页源码中的 utf-8 就是一个字符集编码</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="137" src="https://images2.imgbox.com/e8/ca/Y7omw1TI_o.png" width="314"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">access_log</span>   是访问日志</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">location</p> 
<p style="margin-left:0cm;">定义一下root的路径，也就是网站放在哪里？</p> 
<p style="margin-left:0cm;">这样定义路径也是为了方便找到这个站点</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="136" src="https://images2.imgbox.com/20/7a/zYNPVzts_o.png" width="685"></p> 
<p style="margin-left:0cm;"><span style="color:#f33b45;">ctrl + z </span>暂停下vi编辑，先出去命令行 mkdir 一下刚设置的站点的root路径，设置完路径以后再  <span style="color:#f33b45;">fg </span> 返回vi继续编辑。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="36" src="https://images2.imgbox.com/ae/97/LTj4dahs_o.png" width="649"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">index需要加上php，因为打算做的博客是需要php而不是html</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="149" src="https://images2.imgbox.com/9c/8c/9iOzoikk_o.png" width="635"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">需要把PHP的相关#注释的去掉，刚去掉以后如下：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="218" src="https://images2.imgbox.com/2c/29/IHNTn0Hb_o.png" width="938"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">fastcgi_pass，当时测试PHP监听的地址就是127.0.0.1 : 9000</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">这个PHP的root路径是定义你PHP所在的路径，改成与location的root路径一样就好。</p> 
<p style="margin-left:0cm;">fastcgi_param 的路径也要改成一样</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="53" src="https://images2.imgbox.com/d0/f9/laAfuGQf_o.png" width="1200"></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="218" src="https://images2.imgbox.com/20/88/drCj9eXG_o.png" width="1200"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">没用的#可以删除</p> 
<p style="margin-left:0cm;">-t 检错, -s 重新加载</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">需要把网站程序wordpress放到之前设的root目录下</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="34" src="https://images2.imgbox.com/34/83/EQDonViU_o.png" width="1022"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">wordpress   是用PHP语言开发的一个博客平台</p> 
<p style="margin-left:0cm;">wordpress官网下载</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="62" src="https://images2.imgbox.com/c8/b4/rduvffEU_o.png" width="434">  去下载  .tar.gz  格式的在linux上用的</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">放到路径下，用wget下载</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="94" src="https://images2.imgbox.com/06/a8/umiyoPh5_o.png" width="1200"></p> 
<p style="margin-left:0cm;">解压</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="46" src="https://images2.imgbox.com/e9/7f/hpU0Q2Bz_o.png" width="1076"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">解压完成以后，把所有  <span style="color:#ff0000;">wordpress/*  (word里面的所有文件 )  都移动到 ./  (当前目录下)</span></p> 
<p style="margin-left:0cm;"><span style="color:#f33b45;">* 就是所有文件意思</span></p> 
<p style="margin-left:0cm;">./ 就是当前目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="97" src="https://images2.imgbox.com/f6/21/KMmjo225_o.png" width="814"></p> 
<p style="margin-left:0cm;">移动后是这样：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="156" src="https://images2.imgbox.com/0f/ca/IcAg5JI0_o.png" width="1200"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">然后把旧的wordpress目录（里面已空）和wordpress-5.0.2这个安装包删掉</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="48" src="https://images2.imgbox.com/6c/79/Jz955Ktb_o.png" width="1197"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">剩下：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="125" src="https://images2.imgbox.com/eb/dc/edJr9DuV_o.png" width="1200"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">这时候我们输入blog.aminglinux.cc就进入了也要wordpress安装的页面</p> 
<p style="margin-left:0cm;">（有时候打不开是因为 SELINUX没有关闭）</p> 
<p style="margin-left:0cm;">（如果用linux ping不到可能是因为没有写入hosts  , 地址是 /etc/hosts ）</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="822" src="https://images2.imgbox.com/7c/f4/KO7CyhP6_o.png" width="1200"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">总结：</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="689" src="https://images2.imgbox.com/66/ad/hH8TGwIX_o.png" width="920"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><span style="color:#e579b6;">快捷键  </span></p> 
<p style="margin-left:0cm;"><span style="color:#ff0000;">ctrl + z </span> 暂停一个进程。比如：vi的时候，可以先退出vi，然后释放命令行出来运行别的命令，运行完以后再返回vi。</p> 
<p style="margin-left:0cm;">按<span style="color:#ff0000;">fg</span>就可以回到vi 窗口里。</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="168" src="https://images2.imgbox.com/10/8a/yzRLrIur_o.png" width="958"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f47397d06fd2622145d5007ac70fafeb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于FPGA的正弦PWM产生系统verilog实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c98813a7b005d643beb909d030365b68/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自动编译插件--springboot实现热部署</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>