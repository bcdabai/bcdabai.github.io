<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c语言之文件管理 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="c语言之文件管理" />
<meta property="og:description" content="一.文件存储在磁盘上。常见的磁盘有磁盘C、磁盘D。
二.文件分类：程序文件、数据文件
常见的程序文件:源程序文件(.c文件，编译编写的程序)、目标文件(.obj文件)、可执行文件(.exe文件)
数据文件：程序文件写入数据到A文件，程序文件从B文件读取数据，像A文件、B文件这样的称为数据文件
三.文件名：
文件名有一些不能使用的符号
文件名可以不含后缀名
文件后缀表示文件打开方式
文件路径是文件从盘符到找到文件通过的路径的所有符号的集合
四.关于文件的打开和关闭
@1.文件的打开相关函数
a.头文件:&lt;stdio.h&gt;
b.第一个参数是打开文件的路径（相对路径或者绝对路径），第二个参数是打开的方式，注意是以字符串的形式表示的
c.关于常见的打开文件的方式
在选择&#34;w&#34;的打开方式，这次所写入的数据会完全覆盖原先的数据。
@2.文件的关闭相关函数
a.头文件:&lt;stdio.h&gt;
关于文件的打开和关闭使用操作如下图所示
代码执行前 代码执行后
可以发现新创建了一个text.txt文件 五.文件的顺序函数
1.fgetc()函数
a.头文件:&lt;stdio.h&gt;
b.功能:从文件中读取一个字符
c.使用
2.fputc()函数
a.头文件:&lt;stdio.h&gt;
b.功能:向文件中写入一个字符
c.解析:第一个参数表示写入文件的字符
d.使用:
程序执行前：
程序执行后：
3.fgets()函数
a.头文件:&lt;stdio.h&gt;
b.功能:从文件中读取一行字符
c.解析:第一个表示要存储读取的字符串的地址，第二个参数表示要读取字符串的字符个数
d.使用
4.fputs()函数
a.头文件:&lt;stdio.h&gt;
b.功能:向文件中写入一行数据
c.解析:第一个参数表示写入文件的字符串
d.使用:
程序执行前：
程序执行后：
5.fprintf()函数--格式化输出函数
a.头文件:&lt;stdio.h&gt;
b.功能:向文件中写入一行格式化的数据
c.使用:
程序执行前：
程序执行后： 6.fscanf()函数--格式化输入函数
a.头文件:&lt;stdio.h&gt;
b.功能:从文件中读取格式化的数据
d.使用:
这里少了struct Stu的定义
7.fread()函数 --二进制输入函数
a.头文件:&lt;stdio.h&gt;
b.功能:从文件中读取二进制形式存储的数据
c.解析:第一个参数表示存储以二进制形式存储的数据地址 ，第二个参数表示要读取以二进制数据存储的每个元素的大小，第三个参数表示要读取以二进制数据存储的元素的个数
d.使用:
8.fwrite()函数
a.头文件:&lt;stdio.h&gt;
b.功能:向文件中写入数据转换位二进制
c.解析:第一个参数表示存储以二进制形式存储的数据地址 ，第二个参数表示以二进制数据存储的每个元素的大小，第三个参数表示以二进制数据存储的元素的个数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/deaf48fa92c3b7e0d283884dd0f9a09c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-17T22:21:38+08:00" />
<meta property="article:modified_time" content="2022-07-17T22:21:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c语言之文件管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一.文件存储在磁盘上。常见的磁盘有磁盘C、磁盘D。</p> 
<p>二.文件分类：程序文件、数据文件</p> 
<p>常见的程序文件:源程序文件(.c文件，编译编写的程序)、目标文件(.obj文件)、可执行文件(.exe文件)</p> 
<p>数据文件：程序文件写入数据到A文件，程序文件从B文件读取数据，像A文件、B文件这样的称为数据文件</p> 
<p>三.文件名：<img alt="" height="396" src="https://images2.imgbox.com/b1/cb/3cvP2Lwg_o.png" width="1200"></p> 
<p> 文件名有一些不能使用的符号</p> 
<p>文件名可以不含后缀名</p> 
<p>文件后缀表示文件打开方式</p> 
<p>文件路径是文件从盘符到找到文件通过的路径的所有符号的集合</p> 
<p>四.关于文件的打开和关闭</p> 
<p></p> 
<p>@1.文件的打开相关函数</p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/e9/59/O4bRtsrm_o.png" width="1200"></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.第一个参数是打开文件的路径（相对路径或者绝对路径），第二个参数是打开的方式，注意是以字符串的形式表示的</p> 
<p>c.关于常见的打开文件的方式</p> 
<p></p> 
<p><img alt="" height="936" src="https://images2.imgbox.com/ed/2f/54CZtWkG_o.png" width="1200"></p> 
<p>在选择"w"的打开方式，这次所写入的数据会完全覆盖原先的数据。</p> 
<p>@2.文件的关闭相关函数</p> 
<p><img alt="" height="262" src="https://images2.imgbox.com/7d/47/SHWli56e_o.png" width="1030"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>关于文件的打开和关闭使用操作如下图所示</p> 
<p><img alt="" height="634" src="https://images2.imgbox.com/fc/89/EPaZ14Ri_o.png" width="1200"></p> 
<p></p> 
<p>代码执行前 </p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/b5/a4/k64lxxkA_o.png" width="1200"></p> 
<p>代码执行后</p> 
<p><img alt="" height="712" src="https://images2.imgbox.com/2a/bb/omZTSgxy_o.png" width="1200"></p> 
<p>可以发现新创建了一个text.txt文件 </p> 
<p>五.文件的顺序函数</p> 
<p>1.fgetc()函数</p> 
<p><img alt="" height="237" src="https://images2.imgbox.com/f1/ae/vbWHV1bn_o.png" width="907"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:从文件中读取一个字符</p> 
<p>c.使用</p> 
<p><img alt="" height="994" src="https://images2.imgbox.com/c2/02/kUj79eD2_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p>2.fputc()函数</p> 
<p><img alt="" height="251" src="https://images2.imgbox.com/a2/64/f6d5zbu3_o.png" width="1200"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:向文件中写入一个字符</p> 
<p>c.解析:第一个参数表示写入文件的字符</p> 
<p>d.使用:<img alt="" height="950" src="https://images2.imgbox.com/f2/b4/WMSiOamQ_o.png" width="1200"></p> 
<p>程序执行前：<img alt="" height="894" src="https://images2.imgbox.com/e3/ef/PbMNvVMz_o.png" width="1160"></p> 
<p></p> 
<p>程序执行后：</p> 
<p> <img alt="" height="581" src="https://images2.imgbox.com/3b/79/3MRPPD0X_o.png" width="1200"></p> 
<p></p> 
<p>3.fgets()函数</p> 
<p><img alt="" height="244" src="https://images2.imgbox.com/ac/3b/QZKLoZY4_o.png" width="1200"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:从文件中读取一行字符</p> 
<p>c.解析:第一个表示要存储读取的字符串的地址，第二个参数表示要读取字符串的字符个数</p> 
<p>d.使用</p> 
<p><img alt="" height="938" src="https://images2.imgbox.com/b4/51/XbAPYFms_o.png" width="1200"></p> 
<p></p> 
<p>4.fputs()函数</p> 
<p><img alt="" height="283" src="https://images2.imgbox.com/20/70/aMuzX2Uk_o.png" width="1200"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:向文件中写入一行数据</p> 
<p>c.解析:第一个参数表示写入文件的字符串</p> 
<p>d.使用:</p> 
<p><img alt="" height="954" src="https://images2.imgbox.com/33/68/whonA1Dv_o.png" width="1200"></p> 
<p></p> 
<p>程序执行前：</p> 
<p><img alt="" height="522" src="https://images2.imgbox.com/7a/3d/xyFwJOm8_o.png" width="1200"></p> 
<p></p> 
<p>程序执行后：<img alt="" height="395" src="https://images2.imgbox.com/c9/3c/5JlPnErD_o.png" width="1200"></p> 
<p></p> 
<p>5.fprintf()函数--格式化输出函数</p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/e0/eb/hG50dHib_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:向文件中写入一行格式化的数据</p> 
<p>c.使用:</p> 
<p><img alt="" height="950" src="https://images2.imgbox.com/ef/e3/F7VyYi0S_o.png" width="1200"></p> 
<p>程序执行前：</p> 
<p><img alt="" height="522" src="https://images2.imgbox.com/6f/bf/0kOHvSFf_o.png" width="1200"></p> 
<p>程序执行后： </p> 
<p><img alt="" height="456" src="https://images2.imgbox.com/4b/86/kLPtcQbX_o.png" width="1071"></p> 
<p></p> 
<p>6.fscanf()函数--格式化输入函数</p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/39/18/oC8uWdVs_o.png" width="1200"></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:从文件中读取格式化的数据</p> 
<p>d.使用:</p> 
<p>这里少了struct Stu的定义</p> 
<p><img alt="" height="205" src="https://images2.imgbox.com/41/33/WZnncfIe_o.png" width="594"></p> 
<p></p> 
<p><img alt="" height="989" src="https://images2.imgbox.com/c6/de/fWr1J5JH_o.png" width="1200"></p> 
<p></p> 
<p>7.fread()函数 --二进制输入函数</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/11/19/IicofInf_o.png" width="1200"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:从文件中读取二进制形式存储的数据</p> 
<p>c.解析:第一个参数表示存储以二进制形式存储的数据地址  ，第二个参数表示要读取以二进制数据存储的每个元素的大小，第三个参数表示要读取以二进制数据存储的元素的个数</p> 
<p>d.使用:</p> 
<p><img alt="" height="913" src="https://images2.imgbox.com/3d/0e/Xa4zeWUX_o.png" width="1200"></p> 
<p>8.fwrite()函数</p> 
<p><img alt="" height="266" src="https://images2.imgbox.com/d6/c0/NY3L9LDN_o.png" width="1200"></p> 
<p></p> 
<p>a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能:向文件中写入数据转换位二进制</p> 
<p>c.解析:第一个参数表示存储以二进制形式存储的数据地址  ，第二个参数表示以二进制数据存储的每个元素的大小，第三个参数表示以二进制数据存储的元素的个数</p> 
<p>d.使用:</p> 
<p>由于是以二进制的方式写入数据，所以在选取写入方式时应该最好用"wb"，而不是"w"。</p> 
<p><img alt="" height="854" src="https://images2.imgbox.com/7f/7c/ec9xAj9P_o.png" width="1200"></p> 
<p> 程序执行前：</p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/fe/8a/rYq5PMHM_o.png" width="885"></p> 
<p>程序执行后：</p> 
<p><img alt="" height="388" src="https://images2.imgbox.com/b0/67/DGg3DzIW_o.png" width="1066"></p> 
<p>因为是以二进制形式存储，其中一些规则我们现在还是不了解的，所以当文本输出你不认识的内容也是正常的，不要慌张。</p> 
<p>如果你想看的懂该二进制形式存储的文件，首先在vs编译器中添加文本文件到目录。鼠标右击文件，点开打开方式，选择二进制编译器，就出现了以下的页面。</p> 
<p><img alt="" height="928" src="https://images2.imgbox.com/0b/6b/7dlEQIPB_o.png" width="1200"></p> 
<p></p> 
<p>这样，你就可以根据二进制数字的排序读出相应的ASCII码，解密为你所熟悉的文本形式。</p> 
<p></p> 
<p> <img alt="" height="690" src="https://images2.imgbox.com/01/1a/0fKaHA05_o.jpg" width="690"></p> 
<p>为什么向文件输入数据、从文件中读取数据和函数名称恰恰相反。比如fprintf()，printf表示输出，为什么这个函数确实向文件写入数据呢？</p> 
<p>这就要究其本质了。</p> 
<p><img alt="" height="819" src="https://images2.imgbox.com/f3/dd/aOVhBjX3_o.png" width="1200"></p> 
<p>****一些常见的默认流:1.stdin--标准输入流（键盘）</p> 
<p>2.stdout--标准输出流（屏幕）</p> 
<p>3. stderr--标准错误流（屏幕）</p> 
<p>（）内代表的是与流对接的外部设备。</p> 
<p>此外，前六个文件函数针对于所有输出输入流，而fread、fwrite函数是只针对于文件的。</p> 
<p>关于文件这部分的知识我在学校真的是从未接触过的，但是不能着急，得要慢慢接触理解，像有耐心地对待一个陌生人，时间久了你不仅对他/她更熟悉了解，而且会发现他/她更多的闪光点。</p> 
<p>七.文件的随机读写</p> 
<p>1.fseek()函数</p> 
<p><img alt="" height="242" src="https://images2.imgbox.com/d1/7b/6DFYCG5F_o.png" width="1200"></p> 
<p>a.功能：</p> 
<p>根据文件指针与指定位置的偏移量来定位文件指针</p> 
<p>三种指定位置：<img alt="" height="723" src="https://images2.imgbox.com/b6/92/NqKyJddf_o.png" width="1200"></p> 
<p></p> 
<p>b.使用：</p> 
<p><img alt="" height="987" src="https://images2.imgbox.com/a4/ca/vHTsOSL5_o.png" width="1200"></p> 
<p><img alt="" height="776" src="https://images2.imgbox.com/44/25/IB1TvgSj_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<p>2.ftell()函数</p> 
<p><img alt="" height="237" src="https://images2.imgbox.com/22/ad/gu9e9faW_o.png" width="1200"></p> 
<p></p> 
<p>a.功能：告知程序员当前文件指针与起始地址的偏移量</p> 
<p>b.使用：</p> 
<p><img alt="" height="924" src="https://images2.imgbox.com/65/8c/1VkSIW5Z_o.png" width="1153"></p> 
<p></p> 
<p>3.rewind()函数</p> 
<p><img alt="" height="229" src="https://images2.imgbox.com/04/6a/fXyN2vyx_o.png" width="932"></p> 
<p></p> 
<p>a.功能：使文件指针重回起始地址</p> 
<p>b.使用：</p> 
<p><img alt="" height="920" src="https://images2.imgbox.com/3a/31/NmKkFn3c_o.png" width="1200"></p> 
<p> 八.详解比较相近的文件函数</p> 
<p></p> 
<p><img alt="" height="198" src="https://images2.imgbox.com/92/b6/nJg7afRq_o.png" width="636"></p> 
<p>1.sscanf()函数</p> 
<p><img alt="" height="544" src="https://images2.imgbox.com/de/dc/NAKc49tz_o.png" width="1200"></p> 
<p> a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能：将字符串转化为格式化的数据</p> 
<p>c.使用：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ba/29/GCYIdpP9_o.png" width="1200"></p> 
<p> </p> 
<p>2.sprintf()函数</p> 
<p><img alt="" height="229" src="https://images2.imgbox.com/bf/34/Tp15m1UN_o.png" width="1200"></p> 
<p>  a.头文件:&lt;stdio.h&gt;</p> 
<p>b.功能：将格式化数据转换为字符串</p> 
<p>c.使用：</p> 
<p><img alt="" height="702" src="https://images2.imgbox.com/84/7c/SK7CuvZr_o.png" width="1200"></p> 
<p> </p> 
<p>3.scanf 是针对标准输入（键盘）的格式化输入语句</p> 
<p>printf 是针对标准输出（屏幕）的格式化输出语句</p> 
<p>fscanf 是针对所有输入流的格式化输入语句</p> 
<p>fprintf 是针对所有输出流的格式化输出语句</p> 
<p>fscanf、fprintf的输入输出是针对程序而言的</p> 
<p>sscanf 是可以将字符串转换为格式化数据的输入语句</p> 
<p>sprintf 是可以将格式化数据转换为字符串的输出语句</p> 
<p>sscanf、sprintf的输入输出是针对于程序而言,且不针对文件</p> 
<p>九.文本文件和二进制文件</p> 
<p>文本文件：以ASCII码值存储的方式存储数据的文件</p> 
<p>二进制文件：以二进制存储的方式存储数据的文件</p> 
<p>注：字符型以ASCII码值形式存储；数值既可以ASCII码值存储，也可以二进制形式存储，不同的情况各有利弊。</p> 
<p>比如，整型数10000，ASCII码值存储占五个字节，二进制形式存储占四个字节。</p> 
<p>整型数10，ASCII码值存储占两个字节，二进制形式存储占四个字节。</p> 
<p>十.被误解的feof()函数</p> 
<p>feof()函数功能：是在已经得知文件读取结束时判断因为什么原因而结束，并不是直接判断文件是否读取结束。通常与ferror()函数配套使用，feof()函数判文件是因为读到文件结束而不继续读，而ferror()函数是因为读取出错而不再读取。</p> 
<p>判断文件读取结束的标志：1.文本文件是否已经结束，可以使用fgetc()函数得到的值是否为EOF，若为EOF则证明文件读取结束。</p> 
<p><img alt="" height="854" src="https://images2.imgbox.com/b1/32/m8pWv7fk_o.png" width="1200"></p> 
<p>2.文本文件是否已经结束，可以使用fgets()函数得到的指针是否为NULL，若为NULL则证明文件读取结束。</p> 
<p><img alt="" height="935" src="https://images2.imgbox.com/d1/21/6tZgVuvi_o.png" width="1200"></p> 
<p>3. 二进制文件是否已经结束，可以使用fread()函数返回的值（即成功读取到元素的个数）小于要读取的元素的个数，若为小于则证明文件读取结束。</p> 
<p><img alt="" height="973" src="https://images2.imgbox.com/ca/11/gx1L5QNG_o.png" width="1200"></p> 
<p>十一.文件缓冲区</p> 
<p>内存向硬盘中传输数据，只有当数据填满文件缓冲区时，数据才会传输。相当于货物装满货车，货车才发动开往目的地。 </p> 
<p>注意:fclose()函数在关闭文件的时候会刷新缓冲区，将缓冲区上的数据传输。</p> 
<p>测试缓冲区存在的程序如图所示：</p> 
<p><img alt="" height="884" src="https://images2.imgbox.com/a0/e9/6PPF0Pp5_o.png" width="1200"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a1798a733ac824d6b5d1bc44c3030f7c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">打印万年历</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ecee91cacb1d42339f051b1f219a58e6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">oracle数据库plsqldev导出表、表结构的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>