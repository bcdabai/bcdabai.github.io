<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java基础疑难点梳理(泛型到反射9章内容) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java基础疑难点梳理(泛型到反射9章内容)" />
<meta property="og:description" content="文章目录 1. 泛型2. 基础类库3. 集合4. 异常5. 注解6. JDBC7. IO流8. 网络编程9. 类加载和反射 1. 泛型 静态方法的形参，静态变量，静态代码块中不能使用泛型（因为即使泛型不同，还是同一个类，静态变量是属于类的）
instanceof运算符后不能跟泛型类：a instanceof ArrayList&lt;String&gt;
A extends B A[]是B[]的子类 但是List&lt;A&gt; 不是List&lt;B&gt;的子类
通配符的使用
public static void main(String[] args) { List&lt;Integer&gt; integers = new ArrayList&lt;&gt;(); //f1(integers); 不能调用 List&lt;Integer&gt; 不是 List&lt;Object&gt; list子类 f2(integers);//可以使用通配符调用 } public static void f1(List&lt;Object&gt; list){ for (Object o : list) { System.out.println(o); } list.add(&#34;123&#34;); list.add(123); } public static void f2(List&lt;?&gt; list){ for (Object o : list) { System." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d9d19490899ff74b112ba10d139d583a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-15T11:36:54+08:00" />
<meta property="article:modified_time" content="2022-12-15T11:36:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java基础疑难点梳理(泛型到反射9章内容)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1. 泛型</a></li><li><a href="#2__230" rel="nofollow">2. 基础类库</a></li><li><a href="#3__359" rel="nofollow">3. 集合</a></li><li><a href="#4__572" rel="nofollow">4. 异常</a></li><li><a href="#5__703" rel="nofollow">5. 注解</a></li><li><a href="#6_JDBC_799" rel="nofollow">6. JDBC</a></li><li><a href="#7_IO_935" rel="nofollow">7. IO流</a></li><li><a href="#8__1279" rel="nofollow">8. 网络编程</a></li><li><a href="#9__1510" rel="nofollow">9. 类加载和反射</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__2"></a>1. 泛型</h2> 
<ol><li> <p>静态方法的形参，静态变量，静态代码块中不能使用泛型（因为即使泛型不同，还是同一个类，静态变量是属于类的）</p> </li><li> <p>instanceof运算符后不能跟泛型类：<code>a instanceof ArrayList&lt;String&gt;</code></p> </li><li> <p>A extends B A[]是B[]的子类 但是<code>List&lt;A&gt; 不是List&lt;B&gt;</code>的子类</p> </li><li> <p>通配符的使用</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//f1(integers); 不能调用 List&lt;Integer&gt; 不是 List&lt;Object&gt; list子类</span>
        <span class="token function">f2</span><span class="token punctuation">(</span>integers<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以使用通配符调用</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//不能添加元素 因为不知道?是什么类型</span>
        <span class="token comment">//list.add("123"); 如果?是Integer类型呢</span>
       <span class="token comment">// list.add(123); 如果?是String类型呢</span>
        <span class="token comment">//只能添加null</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以添加null 因为null是所有类的子类</span>
    <span class="token punctuation">}</span>
</code></pre> 
  <ul><li>? 普通通配符：可以匹配所有的泛型，不能添加元素（除了null）</li><li>？extends A 上限通配符：可以匹配A以及A的子类的泛型，不能添加元素（除了null）</li><li>？super A 下限通配符：可以匹配A以及A的父类的泛型,可以添加A类型对象和null</li></ul> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A1</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A2</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> list1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">f1</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
       <span class="token function">f2</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
       <span class="token function">f3</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>A2<span class="token punctuation">&gt;</span></span> list2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">f1</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
        <span class="token function">f2</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
        <span class="token function">f3</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//not ok A2不是A1的子类</span>
    <span class="token punctuation">}</span>
<span class="token comment">//f1 f2 f3不构成参数重载 函数名必须不同</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> A1<span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>上下限的设置不仅仅可以配合?一起使用，也可以单独作为类的泛型界限</p> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">T</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>关于泛型类（接口的继承）</p> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A1</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A2</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span><span class="token comment">//A2&lt;T&gt;是子类中的新的泛型 与A无关 A中的泛型默认是Object</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A3</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span><span class="token comment">//A2&lt;T&gt;中的T和A&lt;T&gt;相同  继承了T</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A4</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span><span class="token comment">//继承了T并且拓展了泛型E</span>
<span class="token punctuation">}</span>
<span class="token comment">//class A5&lt;T2,E&gt; extends A&lt;T&gt;{<!-- --></span>
<span class="token comment">//}</span>
<span class="token comment">//class A6 extends A&lt;T&gt;{<!-- --></span>
<span class="token comment">//}</span>
</code></pre> </li><li> <p>泛型方法</p> <pre><code class="prism language-java"> 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Integer</span> f <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Double</span> f1 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span>  <span class="token class-name">E</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span><span class="token class-name">E</span> value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span>  value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//泛型方法中的形参也可以和？一起使用</span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        
    <span class="token punctuation">}</span>
</code></pre> 
  <ul><li>泛型方法一般可以替代通配符？</li><li>泛型方法一般用于参数之间具有依赖性或者参数与返回值之间有依赖性的情况</li></ul> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        src<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        src<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">copy</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">//参数互相依赖</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>  <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> src<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dest<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> src<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> dest<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token comment">// dest.add(src.get(i)); dest的类型是？ 只能往里面添加null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//参数与返回值依赖</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>  <span class="token class-name">T</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>构造器泛型和菱形语法失效</p> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token class-name">T</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 <span class="token comment">//构造器泛型</span>
    <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">"1.23"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token class-name">T</span> x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// A&lt;String&gt; a2=new A&lt;Integer&gt;(123); 显示指定了泛型构造器中的形参类型</span>
 <span class="token punctuation">}</span>
</code></pre> </li><li> <p>泛型擦除</p> 
  <ol><li>具有泛型信息的对象赋值给一个没有泛型信息的的变量时会发生泛型擦除</li></ol> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//not ok</span>
        <span class="token class-name">List</span> list2<span class="token operator">=</span>list1<span class="token punctuation">;</span><span class="token comment">//泛型擦除 </span>
    	list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ok</span>
        <span class="token class-name">List</span> list3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不带泛型的对象赋值给一个带泛型的变量--&gt;"堆污染"</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list4<span class="token operator">=</span>list3<span class="token punctuation">;</span><span class="token comment">//list4只能添加Integer元素</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>没有泛型数组</p> 
  <ul><li>泛型信息只在编译期间有，在运行期间是没有的</li><li>不管是List List List在运行期间都是List</li></ul> <pre><code class="prism language-java"><span class="token comment">//java数组存在型变的问题：A是B的子类 A[]也是B[]的子类 可以向上转型</span>
<span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b<span class="token operator">=</span>a<span class="token punctuation">;</span>
b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"hello"</span><span class="token punctuation">;</span><span class="token comment">//编译ok 运行期间错误</span>

<span class="token comment">//由于上面的型变问题，假设可以创建泛型数组</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//编译ok(假设可以创建泛型数组)</span>
<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b<span class="token operator">=</span>a<span class="token punctuation">;</span><span class="token comment">//ok</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运行期间错误 </span>
<span class="token comment">//所以不能创建泛型数组</span>

<span class="token comment">//此外</span>
<span class="token class-name">T</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//这种方式也不行</span>
<span class="token comment">//数组的创建在运行期间，泛型信息在运行期间没有，所以不知道创建什么类型的数组</span>

<span class="token comment">//ps:这样的创建数组是可以的 即不给ArrayList添加泛型</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//a[1]=new ArrayList&lt;Double&gt;(); not ok</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//not ok 引用类型的泛型限制</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
<span class="token comment">//或者</span>
<span class="token class-name">List</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//上面的Integer泛型失效 因为引用类型的泛型是Object 所以可以添加"123"</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
</code></pre> </li></ol> 
<hr> 
<h2><a id="2__230"></a>2. 基础类库</h2> 
<ol><li> <p>Scanner可以读键盘输入、也可以读取文件</p> 
  <ul><li>next以空格为分隔符读取</li><li>nextLine以换行符为分隔符读取</li><li>可以指定分隔符：<code>scanner.useDelimiter("\n");</code></li><li>读键盘：<code>Scanner scanner=new Scanner(System.in);</code></li><li>读文件：<code>Scanner scanner = new Scanner(new File("data.txt"));</code></li></ul> </li><li> <p>System类</p> <pre><code class="prism language-java"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/**
         * getenv:获取系统变量
         * getProperties: 获取系统属性值
         */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token string">"JAVA_HOME"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"os.name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> env <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取所有环境变量</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> env<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token operator">+</span><span class="token string">"---&gt;"</span><span class="token operator">+</span>env<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取系统所有的属性值</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/**
         * 获取毫秒和纳秒时间戳
         */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取当前时间戳ms</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取当前时间戳ns</span>

        <span class="token comment">/**
         * identityHashCode：唯一标识对象
         * 值相同则说明两个对象的地址相同 是同一个对象
         */</span>
        <span class="token class-name">Object</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//460141958</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//460141958</span>

        <span class="token class-name">String</span> s1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//460141958</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//356573597</span>

        <span class="token class-name">String</span> s3<span class="token operator">=</span><span class="token string">"hello"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s4<span class="token operator">=</span><span class="token string">"hello"</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1735600054</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">identityHashCode</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1735600054</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>Runtime类</p> <pre><code class="prism language-java"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可用cpu核数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">freeMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//空闲jvm内存 单位字节</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最大jvm内存</span>
        runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"notepad.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打开记事本</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>Object类</p> 
  <ul><li>boolean equals(Object obj)</li><li>protected void finalize()</li><li>Class&lt;?&gt; getClass()</li><li>int hashCode()</li><li>String toString()</li><li>wait()</li><li>notify()</li><li>notifyAll()</li><li>protected native clone():本地方法，自定义的类可以实现Cloneable接口实现克隆（对于引用类型是浅拷贝）</li></ul> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pet <span class="token operator">=</span> pet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Pet</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Person</span> p2<span class="token operator">=</span>p1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * clone是浅拷贝
         * Pet这个引用类型的变量只是拷贝了引用
         */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token operator">==</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>pet<span class="token operator">==</span>p2<span class="token punctuation">.</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    <span class="token punctuation">}</span>

<span class="token comment">//如何修改为深拷贝？</span>
<span class="token comment">//1. 给Pet类也实现 clone()方法</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">Pet</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//2. 修改Person类的clone方法如下</span>
 <span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">Person</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Person</span> p<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>pet<span class="token operator">=</span>pet<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<hr> 
<h2><a id="3__359"></a>3. 集合</h2> 
<ol><li> <p>集合转化为数组</p> <pre><code class="prism language-java"><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//不能是int[] 必须是Integer[]</span>
arr<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这种方式只能返回Object[]类型的数组</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>集合框架</p> 
  <ol><li> <p>Collection接口</p> 
    <ul><li>List 
      <ul><li>ArrayList</li><li>LinkedList</li></ul> </li><li>Set 
      <ul><li>HashSet(无序指的是元素按照hashCode值排列的，输出时的序列是固定的) 
        <ul><li>LinkedHashSet（有序指的是按照元素输出是按添加顺序排列的）</li></ul> </li><li>SortedSet 
        <ul><li>TreeSet（判断对象是否相同是根据compareTo方法，而不是hashCode方法）(不能添加null,因为需要排序)</li></ul> </li></ul> </li><li>Queue 
      <ul><li>PriorityQueue(不能添加null,因为需要排序)</li><li>ArrayDeque(常用做栈)</li></ul> </li></ul> </li><li> <p>Map接口</p> 
    <ul><li>HashMap 
      <ul><li>LinkedHashMap</li></ul> </li><li>SortedMap 
      <ul><li>TreeMap(不能添加null,因为需要排序)</li></ul> </li></ul> </li><li> <p>Lambda表达式遍历集合</p> <pre><code class="prism language-java">list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> integer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lambda的本质：匿名内部类</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以添加{}进行其他操作</span>
list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只能单纯打印 比较方便</span>

</code></pre> </li><li> <p>使用Iterator遍历集合</p> 
    <ul><li>在使用增强for循环遍历集合时是不能进行删除操作的</li><li>可以使用iterator遍历集合使用iterator.remove()方法删除集合中的元素，不能使用集合自身的remove方法</li><li>在使用iterator遍历集合修改元素对原集合没有影响</li></ul> </li><li> <p>HashSet(HashMap)添加元素过程</p> 
    <ul><li>先根据hashCode方法计算出hash值找到对应的槽</li><li>如果该槽位没有元素，直接添加；如果有元素了，则沿着该槽位上的链表遍历，如果通过equals比较得到一个true,则添加失败；如果遍历完了该链表还没有equals成功，则在末尾添加上该元素</li><li>一般情况下，hashCode相同equals不一定相同；但是<strong>equals相同hashCode应该也相同</strong></li><li>ps: 不要修改已经添加进set中的元素的变量（参与hashCode equals计算）值</li></ul> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">A</span> x<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token operator">==</span>x<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">A</span> x<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> set<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">456</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false 删除失败 因为x在set中的位置是123 位置456是空着的</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//添加成功 该对象会落到123位置 该位置已经有x了 然后使用equals比较 由于x的a属性值被修改了 比较失败 equals返回false 因此添加成功</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>TreeSet注意事项</p> 
    <ol><li>默认升序，可以使用使用定制排序（Comparable）和自然排序（Comparable）自定义排序规则</li></ol> <pre><code class="prism language-java"><span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> treeSet<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>treeSet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1 2 3</span>
<span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> treeSet2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token operator">-&gt;</span>b<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lambda简化了new Comparator</span>
treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>treeSet2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3 2 1</span>
</code></pre> 
    <ol start="2"><li>对自定义的对象如果相应使用TreeSet必须实现Comparable接口或者传入Comparator</li><li>添加进TreeSet中的对象，如果再修改其属性值，不会触发二次排序</li><li>如果compareTo（compare）方法总是返回1，则每次都能添加成功，有可能treeset中有多个元素引用，但是这些引用都是指向同一个对象的</li><li>equals返回true时，compareTo（compare)方法应该返回0</li></ol> </li><li> <p>List接口注意事项</p> 
    <ol><li>删除元素remove(Object obj)时是从头开始调用equals比较的，如果重写的equals一直返回true,则每次都会删除第一个元素</li><li>同理，由于List是根据equals方法比较元素，如果重写的equals一直返回true,indexOf(obj)也会一直返回0</li></ol> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">A</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">A</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span>
        list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//看似删除a2实际上把a1删除了</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//456</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>Arrays工具类</p> 
    <ol><li>可以使用asList方法创建一个List,但是不能删除,也不能添加</li></ol> <pre><code class="prism language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> numbers <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//class java.util.Arrays$ArrayList</span>
numbers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错</span>
numbers<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错</span>
</code></pre> 
    <ol start="2"><li>常用方法还有： 
      <ul><li><code>public static void sort(int[] a)</code></li><li><code>public static int binarySearch(int[] a, int key)</code></li><li><code>public static void fill(int[] a, int val)</code></li><li><code>public static int[] copyOf(int[] original, int newLength)</code></li></ul> </li></ol> </li><li> <p>HashMap</p> 
    <ul><li>判断两个键是否相等：hashCode相同并且equals方法返回true</li><li>判断两个值是否相同：equals方法返回true即可</li></ul> </li><li> <p>Properties的使用</p> <pre><code class="prism language-java"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"passwd"</span><span class="token punctuation">,</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//写到文件中</span>
        properties<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"info.properties"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"user info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Properties</span> properties1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//从properties文件中读取</span>
        properties1<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"info.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>properties1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{passwd=123, name=root}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>properties1<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//root</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>WeakHashMap</p> 
    <ul><li>HashMap中的key是强引用</li><li>WeakHashMap中的key是弱引用，若除了key之外没有其他引用引用对象，则该对象会被gc回收</li></ul> <pre><code class="prism language-java"> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> weakHashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        weakHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ob1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        weakHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ob2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        weakHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ob3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>weakHashMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">runFinalization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>weakHashMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span>
    <span class="token punctuation">}</span>
<span class="token comment">//map中的key实际上是对象的引用 当发生gc后 三个obj对象被回收 之后weakHashMap会删除这三个对象对应的引用变量key-value对</span>
</code></pre> </li><li> <p>Collections工具类拥有的功能</p> 
    <ul><li>逆序 随机排序 排序 交换元素位置</li><li>二分查找 max min fill 求某个元素出现的次数 替换</li><li>包装原来的Collection接口实现类得到一个线程安全的实现类（本质上就是返回一个新的Collection实现类，该实现类的set get等操作加上了synchronized）</li></ul> </li></ol> </li></ol> 
<hr> 
<h2><a id="4__572"></a>4. 异常</h2> 
<ol><li> <p>无论使没使用try…catch，JVM都会产生一个异常对象，如果处理了，程序正常退出（Process finished with exit code 0），否则程序异常退出(Process finished with exit code 1)</p> </li><li> <p>try后面的catch捕获的范围应该从小到大，从大到小会编译异常，cathch块只会执行一个</p> </li><li> <p>try后面至少需要一个catch块<strong>或者</strong>finally块</p> </li><li> <p>一个catch块中可以有多个异常</p> <pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> <span class="token operator">|</span> <span class="token class-name">IndexOutOfBoundsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>Throable(分类和继承体系)</p> 
  <ol><li>Error 
    <ul><li>IOError</li><li>LinkageError</li><li>ThreadDeath</li></ul> </li><li>Exception 
    <ul><li>RuntimeException 
      <ul><li>IndexOfBoundsException</li><li>NullPointerException</li><li>ClassCastException</li></ul> </li><li>IOException</li></ul> </li></ol> </li><li> <p>fianlly块</p> 
  <ul><li>常用来回收关闭资源</li><li>不管有没有发生异常，fianlly块一定会执行</li><li>即使try中使用了return语句，fianlly块一定会执行</li></ul> <pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"finally"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
  <ul><li>finally返回值的几种情况</li></ul> <pre><code class="prism language-java"><span class="token comment">/**
 * finally块中对a的累加赋值不会影响最终的返回值1
 * 因为在return a时a的值被保存了一份到栈中
 * @return 1
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
        a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
        a<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 在finally块中直接返回了
 * @return 6
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
        a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
        a<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
  <ul><li>但是如果在try块中调用了System.exit(1)等方法，finally块是不会执行的</li></ul> </li><li> <p>运行时异常和编译时异常</p> 
  <ul><li>运行时异常：比如数组越界、除0异常，在编译期间是不能发现的</li><li>编译时异常：比如IO读取，不使用try…catch进行处理编译是不能通过的</li></ul> </li><li> <p>Throws和Throw</p> 
  <ul><li>Throws: 在函数签名后添加，表示当前函数不知道怎么处理异常，交给调用者处理，逐层往上，如果main函数也没有处理，则JVM会报错并打印错误信息</li><li>Throw： 一般用在catch或者finally块中，指定异常类型抛出，并给出自定义的异常信息, throw出类什么异常，方法签名应该throws出该异常或者该异常的父类</li></ul> <pre><code class="prism language-java"><span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre> </li><li> <p>子类重写父类的方法时，子类重写的方法的异常&lt;=父类中的异常</p> </li><li> <p>自定义异常类</p> <pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">MyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义异常"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token string">"除数不能为0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<hr> 
<h2><a id="5__703"></a>5. 注解</h2> 
<ol><li> <p>自定义注解使用@interface, 注解中的成员变量使用无参方法声明</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTag</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"tom"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@MyTag</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>注解不会自己生效，需要开发者处理</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token comment">//声明注解可以保留到运行时</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTag</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"tom"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A1</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@MyTag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"bob"</span><span class="token punctuation">,</span>age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"annotation.A1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>annotations<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1 @Override注解在运行时获取不到</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Annotation</span> annotation <span class="token operator">:</span> annotations<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>annotation <span class="token keyword">instanceof</span> <span class="token class-name">MyTag</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tag.name="</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MyTag</span><span class="token punctuation">)</span> annotation<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tag.age="</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MyTag</span><span class="token punctuation">)</span> annotation<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>3种注解范围</p> 
  <ol><li><code>@Retention(RetentionPolicy.SOURCE)</code></li><li><code>@Retention(RetentionPolicy.CLASS)</code>: 默认，不能通过发射获取</li><li><code>@Retention(RetentionPolicy.RUNTIME)</code>，保留到运行时，可以通过反射获取</li></ol> </li><li> <p><code>@Target(value = ElementType.FIELD)</code>用来指明注解作用范围，作用于类、方法、属性…</p> </li><li> <p>自定义一个类似于Junit中的@Test注解</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@MyTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"f1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@MyTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"f2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@MyTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"f3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@MyTest</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"f4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"annotation.Demo1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Demo1</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MyTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<hr> 
<h2><a id="6_JDBC_799"></a>6. JDBC</h2> 
<ol><li> <p>JBDC提供了一套接口，底层实现可以是mysql的驱动jar包，也可以是oracle的驱动jar包（这些jar包由数据库产商提供实现）</p> </li><li> <p>数据库语言分类</p> 
  <ul><li>DML： 数据操作语言，比如update insert deletw</li><li>DDL: 数据库定义语言，比如create alter drop truncate</li><li>DCL: 数据控制语言，grant revoke</li><li>查询语句：select</li></ul> </li><li> <p>JDBC常用API</p> 
  <ul><li>DriverManager</li><li>Connection</li><li>Statement</li><li>PreparedStatement</li></ul> </li><li> <p>JDBC编程步骤</p> 
  <ol><li>加载数据库驱动<code>Class.forName("com.mysql.jdbc.Driver")</code>,最新的数据库驱动不需要这一步</li></ol> </li></ol> 
<p><img src="https://images2.imgbox.com/dd/f4/NKNa42zi_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>通过DriverManager获取Connection</li><li>通过Connnection创建Statement对象（基本的Statement preparedStatement prepareCall）</li><li>通过Statement执行SQL语句 
  <ul><li>boolean execute: 可以执行任何SQL语句</li><li>int executeUpdate: 执行DML DDL</li><li>ResultSet executeQuery: 查询</li></ul> </li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//加载数据库驱动 高版本mysql.jar包可以省略这一步</span>
        <span class="token class-name">String</span> url<span class="token operator">=</span><span class="token string">"jdbc:mysql://localhost:3306/test?useSSL=true&amp;serverTimezone=Asia/Shanghai"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userName<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password<span class="token operator">=</span><span class="token string">"123"</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token comment">//自动关闭资源的try用法</span>
            <span class="token comment">//获取数据库连接</span>
            <span class="token class-name">Connection</span> connection<span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>userName<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select  * from student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stuNo: "</span><span class="token operator">+</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"stuno"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" name: "</span><span class="token operator">+</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ol start="5"><li> <p>execute</p> 
  <ul><li>可以执行几乎所有的sql语句</li><li>只返回boolean值，表示是否返回了Result对象</li><li>使用getResult方法获得Result对象，使用getUpdateCount获得DML语句影响的记录条数(是查询语句的话getUpdateCount返回-1)</li></ul> <pre><code class="prism language-java"><span class="token class-name">Connection</span> connection<span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>userName<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> hasResult <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">"select  * from student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>hasResult<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">getResultSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"stuno"</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"  "</span><span class="token operator">+</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"  "</span><span class="token operator">+</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>PreparedStatement</p> 
  <ul><li>适用于被反复被执行的一条相似的sql语句,比如批量添加数据</li></ul> <pre><code class="prism language-java"><span class="token class-name">Connection</span> connection<span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>userName<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//由于主键自增 所以第一个参数可以设置为null</span>
<span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"insert into student values(null,?) "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Tim"</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
  <ul><li>使用？占位符代替拼接的参数，普通的执行语句当参数时字符串时需要使用单引号引起来，这样容易导致Sql注入，所以PreparedStatement也可以防止sql注入</li><li>优点总结： 
    <ul><li>预编译，性能好</li><li>无需拼接sql语句，编程简单</li><li>防止sql注入</li></ul> </li></ul> </li><li> <p>Blob: 存储二进制数据到数据库（图片 视频等）</p> <pre><code class="prism language-java"><span class="token comment">//存储图片数据</span>
<span class="token class-name">Connection</span> connection<span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>userName<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"insert into student values(null,?,?) "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Tim"</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setBinaryStream</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>fileInputStream<span class="token punctuation">,</span>fileInputStream<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//读取图片数据</span>
 <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select * from student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token class-name">String</span> name<span class="token operator">=</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Blob</span> blob <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//数据库表第3列村存储的是图片</span>
       <span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">".jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>blob<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> blob<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>JDBC默认事务自动提交</p> 
  <ol><li><code>connection.setAutoCommit(false);</code>： 开启事务，需要手动提交</li><li><code>connection.commit();</code>: 手动提交事务</li><li><code>connection.rollback();</code>: 回滚事务</li></ol> </li><li> <p>批量操作</p> <pre><code class="prism language-java"><span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//只能添加DDL DML语句 不能执行查询语句</span>
statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token string">"update student set name='tom111' where stuno=1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token string">"update student set name='tom222' where stuno=2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token string">"update student set name='tom333' where stuno=3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ret <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每个sql语句执行结果的返回值</span>
</code></pre> </li></ol> 
<hr> 
<h2><a id="7_IO_935"></a>7. IO流</h2> 
<ol><li> <p>File类</p> 
  <ul><li>只能新建、删除、重命名文件和目录，不能访问文件内容本身</li><li>如要访问文件内容本身，需要IO流</li><li>常用方法分类 
    <ul><li>访问文件名相关操作：获取文件（目录）相对路径，获取文件（目录）绝对路径，获取上一级目录</li><li>文件检查相关方法：判断文件（目录）是否存在、判断是否可写（可读）、判断是否是文件（目录）</li><li>获取文件信息：获得修改时间、获得文件内容长度</li><li>文件操作相关方法：创建新的文件、删除文件、创建临时文件</li><li>目录操作相关方法：创建目录、列数目录下的内容</li></ul> </li></ul> </li><li> <p>输入/输出流</p> 
  <ul><li>输入流：只能从中读数据</li><li>输出流：只能往里写数据</li><li>从内存的角度，往磁盘写数据是输出流，从磁盘读数据是输入流</li><li>从网络编程的服务器角度，发送数据给客户端是输出流，客户端接受数据时输入流</li></ul> </li><li> <p>流的分类</p> 
  <ol><li>输入流 
    <ol><li>InputStream</li><li>Reader</li></ol> </li><li>输出流 
    <ol><li>OutputStream</li><li>Writer</li></ol> </li></ol> </li><li> <p>InputStream和Reader（两个都是抽象类）</p> 
  <ol><li>InputStream中的方法 
    <ul><li>int read(): 返回字节数据</li><li>int read(byte[] b)：返回读取的实际字节数</li><li>int readByte(byte[] b,int off,int len)：返回读取的实际字节数</li></ul> </li><li>Reader中的方法 
    <ul><li>int read(): 返回字符数据</li><li>int read(char[] buf)：返回读取的实际字符数</li><li>int readByte(char[] buf,int off,int len)：返回读取的实际字符数</li></ul> </li></ol> </li><li> <p>FileInputStream和FileReader</p> <pre><code class="prism language-java"><span class="token comment">/**
* FileInputStream
* 逐个字节读取 当有汉字时会出现乱码
*/</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token operator">=</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * FileInputStream
 * 使用字节数组读取
 * 也会出现中文乱码
 * 假设文件内容：中国
 * 字节数组b为3时可以读取正确（utf-8汉字3个字节编码）
 * 字节数组b为4时就会乱码
 */</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

 <span class="token comment">/**
 * FileReader
 * 逐个字符读取 不会发生中文乱码
 */</span>
<span class="token class-name">FileReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> c<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
* FileReader
* 用字符数组读取
*/</span>
<span class="token class-name">FileReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>关于Unicode字符集和编码格式的一些思考</p> 
  <blockquote> 
   <p>Unicode给各国语言字符都设置了一个编号，比如汉字’中’的编号是20013，而UTF-8和GBK是编码格式，举个例子，8可以怎么表示，可以是0001000一个字节表示，也可以是0000000，0001000两个字节表示，不管你怎么表示，只要能最终根据表示方式还原成8即可；因此不管使用utf-8编码也好、gbk编码也好，只是把字符用不同的形式编码而已，码点值都是一样的，那么在解码时就可以安装相同的编码方式解码，得到正确的码点值，这样就不会产生乱码</p> 
  </blockquote> <pre><code class="prism language-java"><span class="token class-name">String</span> s<span class="token operator">=</span><span class="token string">"你好"</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6 u8采用3个字节表示一个汉字</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4 gbk采用2个字节表示一个汉字</span>

<span class="token comment">//将一个utf-8编码的字符串转化成gbk编码的字符串</span>
<span class="token class-name">String</span> s_utf8<span class="token operator">=</span><span class="token string">"你好"</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> s_utf8<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//先以gbk方式获取字节</span>
<span class="token class-name">String</span> s_gbk<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//再以gbk方式创建字符串</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s_gbk<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//所以字节是通用的 这也就是为什么后面有转化流的出现</span>
<span class="token comment">//假如一个文件的编码格式是gbk 平台系统的编码方式是utf-8 则可以先使用字节流以gbk的方式读取，然后转化成utf-8格式的字符输入流</span>
<span class="token comment">//假如当前平台系统的编码方式是utf-8，需要将数据以gbk格式存储，则可以将字符数据以utf-8方式获取字节输出流，然后再转化成gbk格式的字符输出流</span>
</code></pre> </li><li> <p>OutputStream和Writer</p> 
  <ol><li> <p>OutputStream中的方法</p> 
    <ul><li>void write(int c)</li><li>void write(byte[] b)</li><li>void write(byte[] b,int off,int len)</li></ul> </li><li> <p>Writer中的方法</p> 
    <ul><li>void write(char c)</li><li>void write(char[] buf)</li><li>void write(char[] buf,int off,int len)</li><li>void write(String str)</li><li>void write(String str,int off,int len)</li></ul> </li><li> <p>FileOutputStream和Writer</p> <pre><code class="prism language-java"><span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">67</span><span class="token punctuation">;</span>
outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token char">'a'</span><span class="token punctuation">,</span><span class="token char">'b'</span><span class="token punctuation">,</span><span class="token char">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
outputStream<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
outputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//文件内容：Cabcbc</span>
</code></pre> <pre><code class="prism language-java"><span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> c<span class="token operator">=</span><span class="token char">'a'</span><span class="token punctuation">;</span>
<span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token char">'b'</span><span class="token punctuation">,</span><span class="token char">'c'</span><span class="token punctuation">,</span><span class="token char">'d'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str<span class="token operator">=</span><span class="token string">"efg"</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不要忘记刷新</span>
writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不要忘记关闭流 一般关闭时会自动刷新</span>
</code></pre> </li><li> <p>处理流(PrinsStream)用来包装节点流（FileInputStream FileOutputStream FileReader FileWriter）</p> <pre><code class="prism language-java"><span class="token comment">//处理流1PrintStream</span>
<span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
printStream<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//没有换行符</span>
printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//自动写入换行符</span>
printStream<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//没有换行符</span>
printStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以只关闭最上层处理流 被包装的节点流会被自动关闭</span>
outputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>转化流</p> 
    <ol><li> <p>InputStreamReader: 字符输入流-&gt;字节输入流</p> </li><li> <p>OututStreamReader: 字符输出流-&gt;字符输出流</p> </li><li> <p>ps: 没有字符流-&gt;字节流，因为没有必要，一是字符流使用起来更方便，二是字节流可以转化为字符流</p> </li><li> <p>InputStreamReader使用场景：</p> <pre><code class="prism language-java"><span class="token comment">//out.txt是gbk编码的 内容：中国是一个伟大的国家!</span>
<span class="token class-name">FileReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出：�й���һ��ΰ��Ĺ���!  因为机器是utf-8去解码的 所以乱码了</span>

<span class="token comment">//解决：使用InputStreamReader转化</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//字节读取是不管文件编码方式的</span>
<span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用gbk方式解码得到字符输出流</span>
<span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>OutputStreamReader使用场景：</p> <pre><code class="prism language-java"><span class="token comment">//当前系统编码是utf-8 需要将"中国是一个伟大的国家!"以gbk的编码格式写出</span>
<span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">OutputStreamWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">,</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"中国是一个伟大的国家!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li></ol> </li><li> <p>重定向输出</p> <pre><code class="prism language-java"><span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span>printStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"你好 世界"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//本来应该打印到控制台 现在重定向到了文件中</span>
printStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>重定向输入</p> <pre><code class="prism language-java"><span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setIn</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//无需键盘输入 直接从out.txt文件中读取数据</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"键盘输入的内容： "</span><span class="token operator">+</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>对象流以及序列化反序列化</p> <pre><code class="prism language-java"><span class="token comment">//序列化</span>
<span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectOutputStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//反序列化</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectInputStream</span> objectInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name: "</span><span class="token operator">+</span>p<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">" age: "</span><span class="token operator">+</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
objectInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//序列化反序列化的对象需要实现Serializable（空接口）</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//如果序列化之后又修改了Person类就会反序列化失败</span>
<span class="token comment">//添加序列化号的作用：</span>
<span class="token comment">//private static final long serialVersionUID = 1; 名字必须是serialVersionUID</span>
<span class="token comment">//序列号不变，即使修改了Person类也可以反序列化</span>
<span class="token comment">//序列号改变，即使没有修改Person类反序列化也会失败</span>
<span class="token comment">//总之，序列化和反序列化时的serialVersionUID应该是一样的 否则会反序列化失败</span>
</code></pre> </li></ol> 
  <ul><li> <p>反序列化时不会调用构造器创建对象</p> </li><li> <p>对某个成员属性如果不想被序列化，可以使用transient修饰</p> </li><li> <p>静态变量不会被序列化</p> </li><li> <p>带有引用属性的序列化</p> <pre><code class="prism language-java"><span class="token comment">//序列化</span>
<span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectOutputStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Pet</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"bob"</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//同一个对象只会被序列化一次  这里的dog只是一个引用编号</span>
<span class="token comment">//每个序列化后的对象在磁盘中都有1个编号</span>
stream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//反序列化</span>
<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectInputStream</span> objectInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>pet<span class="token operator">==</span>p2<span class="token punctuation">.</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true  </span>
objectInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//两个类都要实现序列化接口</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pet <span class="token operator">=</span> pet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//多次写入同一个对象时 第二次以及后面写入时如果修改了对象的属性值是无效的</span>
<span class="token class-name">Pet</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"small dog"</span><span class="token punctuation">;</span><span class="token comment">//这里虽然修改了name 但是写入的还是原来的"dog"</span>
<span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"bob"</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>对象类不仅可以写对象数据，基本类型的包装类型也可以写入</p> <pre><code class="prism language-java"><span class="token class-name">FileOutputStream</span> outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectOutputStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeByte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">FileInputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"obj.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ObjectInputStream</span> objectInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>objectInputStream<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//读出顺序和吸入顺序需要一致</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>objectInputStream<span class="token punctuation">.</span><span class="token function">readByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>objectInputStream<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li></ul> 
  <ol start="14"><li>文件复制的几种方式 
    <ol><li>传统IO读写（一个输入流，一个输出流）</li><li>NIO中的channel</li><li>Apache Commons IO中的FileUtils</li><li>Files文件工具类</li></ol> </li></ol> </li></ol> 
<hr> 
<h2><a id="8__1279"></a>8. 网络编程</h2> 
<ol><li> <p>IntetAddress表示IP地址，有Intet4Address和Intet6Address两个子类</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 获取远程的InetAddress 对象
     */</span>
    <span class="token class-name">InetAddress</span> address <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"是否可达： "</span><span class="token operator">+</span>address<span class="token punctuation">.</span><span class="token function">isReachable</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//www.baidu.com</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>address<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//14.215.177.39</span>

    <span class="token comment">/**
     * 获取本地的netAddress 对象
     */</span>
    <span class="token class-name">InetAddress</span> localHost <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>localHost<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10.170.11.18 本地机器的ip地址</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>localHost<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//DESKTOP-GQBJPB6 计算机名称</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>URLDecoder和URLEncoder</p> 
  <ul><li>当在浏览器输入的网址中含有中文字符时就会使用URL编码，如果能直接看到中文是因为浏览器自动解码了，复制网址重新黏贴就可以看到</li></ul> <pre><code class="prism language-java"><span class="token class-name">String</span> keyWord<span class="token operator">=</span><span class="token string">"中国"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> encode <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>keyWord<span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>encode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//%E4%B8%AD%E5%9B%BD 可以看到是6个字节 因为u8编码每个汉字是3个字节</span>
<span class="token class-name">String</span> decode <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>encode<span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>decode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//中国</span>
</code></pre> </li><li> <p>TCP通信</p> <pre><code class="prism language-java"><span class="token comment">//服务端代码</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Socket</span><span class="token punctuation">&gt;</span></span> sockets<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Socket</span> accept <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sockets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>accept<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
            <span class="token comment">//开启一个单独的线程处理连接上来的客户端</span>
            <span class="token comment">//不开启多线程的话 代码会一直在content=bufferedReader.readLine()阻塞 导致不能连接下一个客户端</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> accept<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">InputStreamReader</span> inputStreamReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>inputStreamReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> content<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token comment">//服务端收发信息都是用到客户端socket的输入输出流</span>
                    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>content<span class="token operator">=</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"服务端收到： "</span><span class="token operator">+</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Socket</span> socket <span class="token operator">:</span> sockets<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>socket<span class="token operator">==</span>accept<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                                <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment">//不发送信息给自己</span>
                            <span class="token punctuation">}</span>
                            <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            printStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//关闭会导致客户端socket</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token comment">//客户端代码</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//负责接受消息的线程</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">InputStreamReader</span> inputStreamReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>inputStreamReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">=</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//主线程负责发送消息</span>
        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//包装成打印流</span>
        <span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> content<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>content<span class="token operator">=</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>半关闭状态</p> 
  <ul><li>服务端怎么知道客户端发送数据结束了呢？可以通过直接关闭客户端的socket实现：<code>socket.close()</code>, 但这样会导致一个问题，客户端只是不想发送数据了，关闭socket会导致也不能接受数据</li><li>shutdownOutput(): 关闭socket的输出流，输入流不受影响</li><li>shutdownInput(): 关闭socket的输入流，输出流不受影响</li></ul> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStreamReader</span> inputStreamReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>inputStreamReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">=</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"读取结束..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//防止服务器主线程结束</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PrintStream</span> printStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是第一条消息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是第二条消息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    printStream<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是最后一条消息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//防止客户端主线程结束</span>
<span class="token punctuation">}</span>
<span class="token comment">//虽然客户端数据发送完毕了 但是服务器还是一直在等待数据的发送</span>
<span class="token comment">//在printStream.println("这是最后一条消息");后加上socket.shutdownOutput();则通知服务器客户度消息已经发送完毕了</span>
<span class="token comment">//相当于四次挥手的前两次挥手操作</span>
</code></pre> </li><li> <p>UDP通信</p> <pre><code class="prism language-java"><span class="token comment">//服务端</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span> <span class="token number">9999</span><span class="token punctuation">,</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DatagramPacket</span> outPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9998</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">DatagramPacket</span> inPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span>inBuf<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>inPacket<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接收客户端的消息</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"客户端ip: "</span><span class="token operator">+</span>inPacket<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"客户度端口："</span><span class="token operator">+</span>inPacket<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> resp<span class="token operator">=</span><span class="token string">"我是服务端，我收到了消息: "</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>inPacket<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        outPacket<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送消息给客户端</span>
        socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>outPacket<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//客户端</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span> <span class="token number">9998</span><span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DatagramPacket</span> outPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">DatagramPacket</span> inPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span>inBuf<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">=</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            outPacket<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>outPacket<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送给服务端</span>
            socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>inPacket<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接受服务端的消息</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>inPacket<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment">//接收包和发送包的端口都是目的端口</span>
</code></pre> 
  <ul><li>UPD通信时客户端和服务端并没有明显的区分</li><li>UDP通信步骤：1.创建DatagramSocket 2.创建DatagramPacket（发送包和接收包） 3. send发送 receive接收</li><li>send receive方法是阻塞的</li></ul> </li><li> <p>UPD实现广播通信</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">MulticastSocket</span> multicastSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MulticastSocket</span><span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//广播地址：224.0.0.0~239.255.255.255</span>
    <span class="token class-name">InetAddress</span> address <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"230.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    multicastSocket<span class="token punctuation">.</span><span class="token function">joinGroup</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    multicastSocket<span class="token punctuation">.</span><span class="token function">setLoopbackMode</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DatagramPacket</span> outPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> address<span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">DatagramPacket</span> inPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span>inBuf<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//接收数据</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                multicastSocket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>inPacket<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>inBuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> inPacket<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> s<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//发送数据</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">=</span>scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        outPacket<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        multicastSocket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>outPacket<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
  <ul><li>启动多个客户端,<code>MulticastSocket multicastSocket = new MulticastSocket(9999);</code>, 端口不冲突</li></ul> </li><li> <p>端口问题</p> 
  <ul><li>DatagramSocket ServerSocket Socket MulticastSocket 可以同时共享一个端口</li><li>UDP通信时客户端服务端端口不能相同</li><li>TCP通信和UDP通信时可以端口相同</li></ul> </li></ol> 
<hr> 
<h2><a id="9__1510"></a>9. 类加载和反射</h2> 
<ol><li> <p>java程序运行在JVM进程中，即使这个java程序中有多个线程（一个进程里面可以有多个线程，这个进程就是JVM进程），每运行一次JVM进程，上一次运行时JVM内存中的变量数据都会丢失，可以有多个JVM进程，多个进程之间相互独立，不会共享数据</p> <p><img src="https://images2.imgbox.com/e5/a5/Xtv8w6Wp_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/0d/51/OTN0dA1N_o.png" alt="在这里插入图片描述"></p> </li><li> <p>类的加载分为三个阶段</p> 
  <ol><li>类加载：将类的class文件读入内存，并为之创建一个java.lang.Class对象（类也是一种对象，是Class类实例化得到的对象,通常是说类的实例化得到对象，eg: 名字可以实例化，你的名字叫"李明"（“李明"是对象），我的名字就叫"名字”（"名字"是类对象），类加载由类加载器完成</li><li>连接：将类的二进制数据合并到JRE中 
    <ul><li>验证：class文件格式是否正确</li><li>准备：给类的静态变量分配内存并设置初始值</li><li>解析：将类的二进制数据中的符号引用替换成直接引用</li></ul> </li><li>初始化：对静态变量初始化赋值（程序员显示设置的值） 
    <ul><li>如果当前类还没有被加载和连接，先进行加载和连接再初始化</li><li>如果当前类的父类还没有被初始化，先初始化父类</li><li>类中的初始化语句（静态变量赋值语句 静态代码块）按顺序执行</li></ul> </li></ol> </li><li> <p>class文件来源：本地的class文件 jar包中的class文件 从网络加载class文件 把一个Java源文件动态编译并完成加载</p> </li><li> <p>类的初始化时机：</p> 
  <ul><li>创建类的实例</li><li>调用类的静态方法</li><li>访问类的静态变量(fianl修饰的在编译期间可以确定下来的常量除外) 
    <ul><li>可以确定：<code>static fianl String s="hello"</code></li><li>不可以确定：<code>static final String s=System.currentMills()+""</code></li></ul> </li><li>使用反射创建某个类的Class对象</li><li>初始化当前类的子类（父类要在子类前初始化）</li><li>java.exe命令运行某个main方法，main方法所在的类会被初始化</li></ul> </li><li> <p>同一个类只会被JVM加载到内存一次，怎么算同一个类? 由类的全限定类名和类加载器确定，即使全限定类名相同，类加载器不同，也是不同的类</p> </li><li> <p>类加载器分类</p> 
  <div class="mermaid sequence-diagram"> 
   <svg id="mermaid-svg-cQ0ll47tuLzZR8VP" width="100%" xmlns="http://www.w3.org/2000/svg" height="254" style="max-width: 330px;" viewbox="0 0 330 254"> 
    <style>#mermaid-svg-cQ0ll47tuLzZR8VP {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .error-icon{fill:#552222;}#mermaid-svg-cQ0ll47tuLzZR8VP .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-cQ0ll47tuLzZR8VP .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-cQ0ll47tuLzZR8VP .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-cQ0ll47tuLzZR8VP .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-cQ0ll47tuLzZR8VP .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-cQ0ll47tuLzZR8VP .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-cQ0ll47tuLzZR8VP .marker{fill:#333333;stroke:#333333;}#mermaid-svg-cQ0ll47tuLzZR8VP .marker.cross{stroke:#333333;}#mermaid-svg-cQ0ll47tuLzZR8VP svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-cQ0ll47tuLzZR8VP .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .cluster-label text{fill:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .cluster-label span{color:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .label text,#mermaid-svg-cQ0ll47tuLzZR8VP span{fill:#333;color:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .node rect,#mermaid-svg-cQ0ll47tuLzZR8VP .node circle,#mermaid-svg-cQ0ll47tuLzZR8VP .node ellipse,#mermaid-svg-cQ0ll47tuLzZR8VP .node polygon,#mermaid-svg-cQ0ll47tuLzZR8VP .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-cQ0ll47tuLzZR8VP .node .label{text-align:center;}#mermaid-svg-cQ0ll47tuLzZR8VP .node.clickable{cursor:pointer;}#mermaid-svg-cQ0ll47tuLzZR8VP .arrowheadPath{fill:#333333;}#mermaid-svg-cQ0ll47tuLzZR8VP .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-cQ0ll47tuLzZR8VP .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-cQ0ll47tuLzZR8VP .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-cQ0ll47tuLzZR8VP .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-cQ0ll47tuLzZR8VP .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-cQ0ll47tuLzZR8VP .cluster text{fill:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP .cluster span{color:#333;}#mermaid-svg-cQ0ll47tuLzZR8VP div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-cQ0ll47tuLzZR8VP :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
    <g> 
     <g class="output"> 
      <g class="clusters"></g> 
      <g class="edgePaths"> 
       <g class="edgePath LS-用户自定义加载器 LE-应用类类加载器" style="opacity: 1;" id="L-用户自定义加载器-应用类类加载器"> 
        <path class="path" d="M82,200L82,195.83333333333334C82,191.66666666666666,82,183.33333333333334,82,175C82,166.66666666666666,82,158.33333333333334,82,154.16666666666666L82,150" marker-end="url(#arrowhead1801)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1801" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-应用类加载器 LE-拓展类加载器" style="opacity: 1;" id="L-应用类加载器-拓展类加载器"> 
        <path class="path" d="M264,200L264,195.83333333333334C264,191.66666666666666,264,183.33333333333334,264,175C264,166.66666666666666,264,158.33333333333334,264,154.16666666666666L264,150" marker-end="url(#arrowhead1802)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1802" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-拓展类加载器 LE-根类加载器" style="opacity: 1;" id="L-拓展类加载器-根类加载器"> 
        <path class="path" d="M264,104L264,99.83333333333333C264,95.66666666666667,264,87.33333333333333,264,79C264,70.66666666666667,264,62.333333333333336,264,58.166666666666664L264,54" marker-end="url(#arrowhead1803)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1803" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
      </g> 
      <g class="edgeLabels"> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-用户自定义加载器-应用类类加载器" class="edgeLabel L-LS-用户自定义加载器' L-LE-应用类类加载器"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-应用类加载器-拓展类加载器" class="edgeLabel L-LS-应用类加载器' L-LE-拓展类加载器"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-拓展类加载器-根类加载器" class="edgeLabel L-LS-拓展类加载器' L-LE-根类加载器"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
      </g> 
      <g class="nodes"> 
       <g class="node default" style="opacity: 1;" id="flowchart-用户自定义加载器-1462" transform="translate(82,223)"> 
        <rect rx="0" ry="0" x="-74" y="-23" width="148" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-64,-13)"> 
          <foreignobject width="128" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             用户自定义加载器 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-应用类类加载器-1463" transform="translate(82,127)"> 
        <rect rx="0" ry="0" x="-66" y="-23" width="132" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-56,-13)"> 
          <foreignobject width="112" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             应用类类加载器 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-应用类加载器-1464" transform="translate(264,223)"> 
        <rect rx="0" ry="0" x="-58" y="-23" width="116" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-48,-13)"> 
          <foreignobject width="96" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             应用类加载器 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-拓展类加载器-1465" transform="translate(264,127)"> 
        <rect rx="0" ry="0" x="-58" y="-23" width="116" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-48,-13)"> 
          <foreignobject width="96" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             拓展类加载器 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-根类加载器-1467" transform="translate(264,31)"> 
        <rect rx="0" ry="0" x="-50" y="-23" width="100" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-40,-13)"> 
          <foreignobject width="80" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             根类加载器 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
      </g> 
     </g> 
    </g> 
   </svg> 
  </div> <p>类加载机制：</p> 
  <ol><li>全盘负责：一个类加载器加载某个类时会加载该类所依赖和引用的其他类</li><li>父类委托：先让父类加载，父类无法加载时自己才加载</li><li>缓存机制：加载过的类会被缓存，需要时先从缓存区找，找不到再加载</li></ol> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ClassLoader</span> systemClassLoader <span class="token operator">=</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//系统类加载器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>systemClassLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span>
        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">Demo1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当前类的加载器</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>systemClassLoader<span class="token operator">==</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true 当前类的加载器就是系统类加载器</span>
        <span class="token comment">//获取系统类加载器路径</span>
        <span class="token comment">//如果配置CLASSPATH环境变量会打印环境变量 否则打印当前类的路径</span>
        <span class="token class-name">URL</span> resource <span class="token operator">=</span> systemClassLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//file:/D:/IdeaSpace/java_basis/out/production/java_basis/</span>

        <span class="token class-name">ClassLoader</span> extendsLoader <span class="token operator">=</span> systemClassLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>extendsLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sun.misc.Launcher$ExtClassLoader@74a14482</span>

        <span class="token class-name">ClassLoader</span> rootLoader <span class="token operator">=</span> extendsLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rootLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null 根加载器不是java实现的</span>
    <span class="token punctuation">}</span>
</code></pre> </li><li> <p>类加载器加载Class步骤（不包含连接、初始化）</p> 
  <div class="mermaid sequence-diagram"> 
   <svg id="mermaid-svg-CNejOy436Ukr3LGR" width="100%" xmlns="http://www.w3.org/2000/svg" height="466.489990234375" style="max-width: 1959.9649658203125px;" viewbox="0 0 1959.9649658203125 466.489990234375"> 
    <style>#mermaid-svg-CNejOy436Ukr3LGR {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-CNejOy436Ukr3LGR .error-icon{fill:#552222;}#mermaid-svg-CNejOy436Ukr3LGR .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-CNejOy436Ukr3LGR .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-CNejOy436Ukr3LGR .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-CNejOy436Ukr3LGR .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-CNejOy436Ukr3LGR .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-CNejOy436Ukr3LGR .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-CNejOy436Ukr3LGR .marker{fill:#333333;stroke:#333333;}#mermaid-svg-CNejOy436Ukr3LGR .marker.cross{stroke:#333333;}#mermaid-svg-CNejOy436Ukr3LGR svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-CNejOy436Ukr3LGR .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-CNejOy436Ukr3LGR .cluster-label text{fill:#333;}#mermaid-svg-CNejOy436Ukr3LGR .cluster-label span{color:#333;}#mermaid-svg-CNejOy436Ukr3LGR .label text,#mermaid-svg-CNejOy436Ukr3LGR span{fill:#333;color:#333;}#mermaid-svg-CNejOy436Ukr3LGR .node rect,#mermaid-svg-CNejOy436Ukr3LGR .node circle,#mermaid-svg-CNejOy436Ukr3LGR .node ellipse,#mermaid-svg-CNejOy436Ukr3LGR .node polygon,#mermaid-svg-CNejOy436Ukr3LGR .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-CNejOy436Ukr3LGR .node .label{text-align:center;}#mermaid-svg-CNejOy436Ukr3LGR .node.clickable{cursor:pointer;}#mermaid-svg-CNejOy436Ukr3LGR .arrowheadPath{fill:#333333;}#mermaid-svg-CNejOy436Ukr3LGR .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-CNejOy436Ukr3LGR .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-CNejOy436Ukr3LGR .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-CNejOy436Ukr3LGR .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-CNejOy436Ukr3LGR .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-CNejOy436Ukr3LGR .cluster text{fill:#333;}#mermaid-svg-CNejOy436Ukr3LGR .cluster span{color:#333;}#mermaid-svg-CNejOy436Ukr3LGR div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-CNejOy436Ukr3LGR :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
    <g> 
     <g class="output"> 
      <g class="clusters"></g> 
      <g class="edgePaths"> 
       <g class="edgePath LS-A LE-B" style="opacity: 1;" id="L-A-B"> 
        <path class="path" d="M149.09464747461436,144.16214243921397L164.00887320068776,123.63511869934497C178.92309892676113,103.10809495947598,208.75155037890792,62.05404747973799,244.15702646101968,41.527023739868994C279.56250254313153,21,320.5450032552083,21,361.52750396728516,21C402.510004679362,21,443.4925053914388,21,482.1212552388509,21C520.7500050862631,21,557.0250040690104,21,591.9666697184244,21C626.9083353678385,21,660.5166676839193,21,691.6787503560384,21C722.8408330281576,21,751.5566660563151,21,781.605832417806,21C811.6549987792969,21,843.0374984741211,21,875.2287483215332,21C907.4199981689453,21,940.4199981689453,21,972.0866648356119,21C1003.7533315022787,21,1034.086664835612,21,1069.7533315022786,21C1105.4199981689453,21,1146.4199981689453,21,1188.7533315022786,21C1231.086664835612,21,1274.7533315022786,21,1312.2779146830242,21C1349.8024978637695,21,1381.1849975585938,21,1412.567497253418,21C1443.9499969482422,21,1475.3324966430664,21,1512.7404136657715,21C1550.1483306884766,21,1593.5816650390625,21,1635.6816660563152,21C1677.7816670735676,21,1718.548334757487,21,1753.2056134381862,35.162291844685875C1787.862892118885,49.32458368937174,1816.4107817963638,77.64916737874348,1830.6847266351033,91.81145922342937L1844.9586714738425,105.97375106811523" marker-end="url(#arrowhead1892)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1892" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-A LE-C" style="opacity: 1;" id="L-A-C"> 
        <path class="path" d="M174.3098905402716,232.91761724171084L185.0215757554021,237.95155606019034C195.7332609705326,242.98549487866987,217.15663140079366,253.05337251562887,233.45165045788383,258.1706446674417C249.74666951497397,263.2879168192546,260.91333719889326,263.4545834859212,266.4966710408529,263.5379168192546L272.08000488281255,263.6212501525879" marker-end="url(#arrowhead1893)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1893" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"> 
        <path class="path" d="M414.9164791760422,226.5627262768723L426.5095669972877,218.2978970754128C438.1026548185334,210.03306787395329,461.2888304610245,193.50340947103427,478.3819182822701,185.23858026957475C495.4750061035156,176.97375106811523,506.4750061035156,176.97375106811523,511.9750061035156,176.97375106811523L517.4750061035156,176.97375106811523" marker-end="url(#arrowhead1894)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1894" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-C LE-E" style="opacity: 1;" id="L-C-E"> 
        <path class="path" d="M405.02969436801123,310.56655273281893L418.270579657262,325.0292104072319C431.51146494651266,339.4918680816449,457.99323552501414,368.4171834304709,489.3716203056386,382.87984110488395C520.7500050862631,397.3424987792969,557.0250040690104,397.3424987792969,591.9666697184244,397.3424987792969C626.9083353678385,397.3424987792969,660.5166676839193,397.3424987792969,691.6787503560384,397.3424987792969C722.8408330281576,397.3424987792969,751.5566660563151,397.3424987792969,781.605832417806,397.3424987792969C811.6549987792969,397.3424987792969,843.0374984741211,397.3424987792969,875.2287483215332,397.3424987792969C907.4199981689453,397.3424987792969,940.4199981689453,397.3424987792969,972.0866648356119,397.3424987792969C1003.7533315022787,397.3424987792969,1034.086664835612,397.3424987792969,1057.4199981689453,397.3424987792969C1080.7533315022786,397.3424987792969,1097.086664835612,397.3424987792969,1105.2533315022786,397.3424987792969L1113.4199981689453,397.3424987792969" marker-end="url(#arrowhead1895)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1895" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-D LE-F" style="opacity: 1;" id="L-D-F"> 
        <path class="path" d="M669.125,176.97375106811523L673.2916666666666,176.97375106811523C677.4583333333334,176.97375106811523,685.7916666666666,176.97375106811523,694.2083333333334,177.05708440144858C702.625,177.1404177347819,711.125,177.30708440144858,715.375,177.3904177347819L719.625,177.47375106811523" marker-end="url(#arrowhead1896)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1896" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-F LE-B" style="opacity: 1;" id="L-F-B"> 
        <path class="path" d="M814.4094738861422,149.96322678531226L824.4112279332761,141.63164749911274C834.4129819804099,133.30006821291326,854.4164900746777,116.63690964051425,880.9182441218114,108.30533035431473C907.4199981689453,99.97375106811523,940.4199981689453,99.97375106811523,972.0866648356119,99.97375106811523C1003.7533315022787,99.97375106811523,1034.086664835612,99.97375106811523,1069.7533315022786,99.97375106811523C1105.4199981689453,99.97375106811523,1146.4199981689453,99.97375106811523,1188.7533315022786,99.97375106811523C1231.086664835612,99.97375106811523,1274.7533315022786,99.97375106811523,1312.2779146830242,99.97375106811523C1349.8024978637695,99.97375106811523,1381.1849975585938,99.97375106811523,1412.567497253418,99.97375106811523C1443.9499969482422,99.97375106811523,1475.3324966430664,99.97375106811523,1512.7404136657715,99.97375106811523C1550.1483306884766,99.97375106811523,1593.5816650390625,99.97375106811523,1635.6816660563152,99.97375106811523C1677.7816670735676,99.97375106811523,1718.548334757487,99.97375106811523,1743.0983352661133,101.08409645494582C1767.6483357747395,102.1944418417764,1775.981669108073,104.41513261543757,1780.1483357747395,105.52547800226814L1784.3150024414062,106.63582338909875" marker-end="url(#arrowhead1897)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1897" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-E LE-G" style="opacity: 1;" id="L-E-G"> 
        <path class="path" d="M1261.4199981689453,397.3424987792969L1270.9199981689453,397.3424987792969C1280.4199981689453,397.3424987792969,1299.4199981689453,397.3424987792969,1314.5033315022786,397.4258321126302C1329.586664835612,397.50916544596356,1340.7533315022786,397.6758321126302,1346.336664835612,397.75916544596356L1351.9199981689453,397.8424987792969" marker-end="url(#arrowhead1898)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1898" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-G LE-B" style="opacity: 1;" id="L-G-B"> 
        <path class="path" d="M1452.8263576206534,376.45386006205945L1461.8077974068594,371.4940500008536C1470.789237193066,366.5342399396477,1488.7521167654784,356.61461981723596,1519.4502237269774,351.6548097560301C1550.1483306884766,346.6949996948242,1593.5816650390625,346.6949996948242,1635.6816660563152,346.6949996948242C1677.7816670735676,346.6949996948242,1718.548334757487,346.6949996948242,1755.1531287013124,314.24145825703937C1791.757922645138,281.7879168192546,1824.2008428488698,216.8808339436849,1840.4223029507357,184.42729250590006L1856.6437630526016,151.97375106811523" marker-end="url(#arrowhead1899)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1899" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-G LE-H" style="opacity: 1;" id="L-G-H"> 
        <path class="path" d="M1465.0965459143201,406.9609492028672L1472.0329543182486,408.1078741322722C1478.9693627221768,409.25479906167703,1492.8421795300337,411.548648920487,1517.8796750347558,393.5043240024798C1542.9171705394776,375.45999908447266,1579.119344741065,337.07749938964844,1597.2204318418587,317.8862495422363L1615.3215189426523,298.6949996948242" marker-end="url(#arrowhead1900)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1900" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-F LE-I" style="opacity: 1;" id="L-F-I"> 
        <path class="path" d="M821.2508676100042,198.14288162705628L830.1123893698277,202.62698479093885C838.9739111296512,207.1110879548214,856.6969546492983,216.0792942825865,871.0584764091218,220.56339744646903C885.4199981689453,225.04750061035156,896.4199981689453,225.04750061035156,901.9199981689453,225.04750061035156L907.4199981689453,225.04750061035156" marker-end="url(#arrowhead1901)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1901" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-I LE-J" style="opacity: 1;" id="L-I-J"> 
        <path class="path" d="M1039.4199981689453,225.04750061035156L1043.586664835612,225.04750061035156C1047.7533315022786,225.04750061035156,1056.086664835612,225.04750061035156,1064.4199981689453,225.04750061035156C1072.7533315022786,225.04750061035156,1081.086664835612,225.04750061035156,1085.2533315022786,225.04750061035156L1089.4199981689453,225.04750061035156" marker-end="url(#arrowhead1902)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1902" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-J LE-K" style="opacity: 1;" id="L-J-K"> 
        <path class="path" d="M1285.4199981689453,225.04750061035156L1290.9199981689453,225.04750061035156C1296.4199981689453,225.04750061035156,1307.4199981689453,225.04750061035156,1318.5033315022786,225.1308339436849C1329.586664835612,225.21416727701822,1340.7533315022786,225.3808339436849,1346.336664835612,225.46416727701822L1351.9199981689453,225.54750061035156" marker-end="url(#arrowhead1903)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1903" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-K LE-L" style="opacity: 1;" id="L-K-L"> 
        <path class="path" d="M1453.5668669303482,204.89937120280928L1462.424888498272,200.257392770733C1471.2829100661957,195.6154143386567,1488.9989532020434,186.33145747450416,1506.9361424538863,181.68947904242785C1524.8733317057292,177.04750061035156,1543.0316670735676,177.04750061035156,1552.110834757487,177.04750061035156L1561.1900024414062,177.04750061035156" marker-end="url(#arrowhead1904)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1904" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-K LE-H" style="opacity: 1;" id="L-K-H"> 
        <path class="path" d="M1452.8263576206534,246.93613932758896L1461.8077974068594,251.72928272212815C1470.789237193066,256.5224261166674,1488.7521167654784,266.1087129057458,1503.2335565516844,270.90185630028503C1517.7149963378906,275.6949996948242,1528.7149963378906,275.6949996948242,1534.2149963378906,275.6949996948242L1539.7149963378906,275.6949996948242" marker-end="url(#arrowhead1905)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1905" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
       <g class="edgePath LS-L LE-B" style="opacity: 1;" id="L-L-B"> 
        <path class="path" d="M1712.8399963378906,177.04750061035156L1720.5858306884766,177.04750061035156C1728.3316650390625,177.04750061035156,1743.8233337402344,177.04750061035156,1761.029115024429,172.86854235331217C1778.2348963086233,168.6895840962728,1797.1547901758404,160.331667582194,1806.6147371094492,156.15270932515463L1816.0746840430575,151.97375106811523" marker-end="url(#arrowhead1906)" style="fill:none"></path> 
        <defs> 
         <marker id="arrowhead1906" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path> 
         </marker> 
        </defs> 
       </g> 
      </g> 
      <g class="edgeLabels"> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(973.4199981689453,21)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B">是</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(238.5800018310547,263.1212501525879)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-A-C" class="edgeLabel L-LS-A' L-LE-C">否</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(484.4750061035156,176.97375106811523)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D">是</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(780.2724990844727,397.3424987792969)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-C-E" class="edgeLabel L-LS-C' L-LE-E">否</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-D-F" class="edgeLabel L-LS-D' L-LE-F"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(1318.4199981689453,99.97375106811523)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-F-B" class="edgeLabel L-LS-F' L-LE-B">是</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-E-G" class="edgeLabel L-LS-E' L-LE-G"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(1637.0149993896484,346.6949996948242)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-G-B" class="edgeLabel L-LS-G' L-LE-B">是</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(1506.7149963378906,413.8424987792969)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-G-H" class="edgeLabel L-LS-G' L-LE-H">否</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(874.4199981689453,225.04750061035156)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-F-I" class="edgeLabel L-LS-F' L-LE-I">否</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-I-J" class="edgeLabel L-LS-I' L-LE-J"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-J-K" class="edgeLabel L-LS-J' L-LE-K"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(1506.7149963378906,177.04750061035156)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-K-L" class="edgeLabel L-LS-K' L-LE-L">是</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform="translate(1506.7149963378906,275.6949996948242)"> 
        <g transform="translate(-8,-13)" class="label"> 
         <rect rx="0" ry="0" width="16" height="26"></rect> 
         <foreignobject width="16" height="26"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-K-H" class="edgeLabel L-LS-K' L-LE-H">否</span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
       <g class="edgeLabel" style="opacity: 1;" transform=""> 
        <g transform="translate(0,0)" class="label"> 
         <rect rx="0" ry="0" width="0" height="0"></rect> 
         <foreignobject width="0" height="0"> 
          <div style="display: inline-block; white-space: nowrap;"> 
           <span id="L-L-L-B" class="edgeLabel L-LS-L' L-LE-B"></span> 
          </div> 
         </foreignobject> 
        </g> 
       </g> 
      </g> 
      <g class="nodes"> 
       <g class="node default" style="opacity: 1;" id="flowchart-A-1510" transform="translate(106.79000091552734,200.64749908447266)"> 
        <polygon points="98.79000320434571,0 197.58000640869142,-98.79000320434571 98.79000320434571,-197.58000640869142 0,-98.79000320434571" transform="translate(-98.79000320434571,98.79000320434571)" class="label-container"></polygon> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-76.76667022705078,-13)"> 
          <foreignobject width="153.53334045410156" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             Class是否已经被加载? 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-B-1511" transform="translate(1868.1399993896484,128.97375106811523)"> 
        <rect rx="0" ry="0" x="-83.82499694824219" y="-23" width="167.64999389648438" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-73.82499694824219,-13)"> 
          <foreignobject width="147.64999389648438" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             返回对应的Class对象 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-C-1514" transform="translate(361.52750396728516,263.1212501525879)"> 
        <polygon points="89.94749908447265,0 179.8949981689453,-89.94749908447265 89.94749908447265,-179.8949981689453 0,-89.94749908447265" transform="translate(-89.94749908447265,89.94749908447265)" class="label-container"></polygon> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-66.94166564941406,-13)"> 
          <foreignobject width="133.88333129882812" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             父加载器是否存在? 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-D-1517" transform="translate(593.3000030517578,176.97375106811523)"> 
        <rect rx="0" ry="0" x="-75.82499694824219" y="-23" width="151.64999389648438" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-65.82499694824219,-13)"> 
          <foreignobject width="131.64999389648438" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             父加载器加载Class 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-E-1520" transform="translate(1187.4199981689453,397.3424987792969)"> 
        <rect rx="0" ry="0" x="-74" y="-23" width="148" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-64,-13)"> 
          <foreignobject width="128" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             使用根加载器加载 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-F-1523" transform="translate(780.2724990844727,176.97375106811523)"> 
        <polygon points="61.147499084472656,0 122.29499816894531,-61.147499084472656 61.147499084472656,-122.29499816894531 0,-61.147499084472656" transform="translate(-61.147499084472656,61.147499084472656)" class="label-container"></polygon> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-34.94166564941406,-13)"> 
          <foreignobject width="69.88333129882812" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             加载成功? 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-G-1528" transform="translate(1412.567497253418,397.3424987792969)"> 
        <polygon points="61.147499084472656,0 122.29499816894531,-61.147499084472656 61.147499084472656,-122.29499816894531 0,-61.147499084472656" transform="translate(-61.147499084472656,61.147499084472656)" class="label-container"></polygon> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-34.94166564941406,-13)"> 
          <foreignobject width="69.88333129882812" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             加载成功? 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-H-1533" transform="translate(1637.0149993896484,275.6949996948242)"> 
        <rect rx="0" ry="0" x="-97.30000305175781" y="-23" width="194.60000610351562" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-87.30000305175781,-13)"> 
          <foreignobject width="174.60000610351562" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             ClassNotFoundException 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-I-1536" transform="translate(973.4199981689453,225.04750061035156)"> 
        <rect rx="0" ry="0" x="-66" y="-23" width="132" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-56,-13)"> 
          <foreignobject width="112" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             使用当前类加载 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-J-1539" transform="translate(1187.4199981689453,225.04750061035156)"> 
        <rect rx="0" ry="0" x="-98" y="-23" width="196" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-88,-13)"> 
          <foreignobject width="176" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             从当前类路径中寻找该类 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-K-1542" transform="translate(1412.567497253418,225.04750061035156)"> 
        <polygon points="61.147499084472656,0 122.29499816894531,-61.147499084472656 61.147499084472656,-122.29499816894531 0,-61.147499084472656" transform="translate(-61.147499084472656,61.147499084472656)" class="label-container"></polygon> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-34.94166564941406,-13)"> 
          <foreignobject width="69.88333129882812" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             是否找到? 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
       <g class="node default" style="opacity: 1;" id="flowchart-L-1545" transform="translate(1637.0149993896484,177.04750061035156)"> 
        <rect rx="0" ry="0" x="-75.82499694824219" y="-23" width="151.64999389648438" height="46" class="label-container"></rect> 
        <g class="label" transform="translate(0,0)"> 
         <g transform="translate(-65.82499694824219,-13)"> 
          <foreignobject width="131.64999389648438" height="26"> 
           <div style="display: inline-block; white-space: nowrap;">
             从文件中加载Class 
           </div> 
          </foreignobject> 
         </g> 
        </g> 
       </g> 
      </g> 
     </g> 
    </g> 
   </svg> 
  </div> </li><li> <p>自定义类加载器</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClassLoader</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//    包路径</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token class-name">Path</span><span class="token punctuation">;</span>

    <span class="token comment">//    构造方法，用于初始化Path属性</span>
    <span class="token keyword">public</span> <span class="token class-name">MyClassLoader</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token namespace">this<span class="token punctuation">.</span></span>Path</span> <span class="token operator">=</span> path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//    重写findClass方法，参数name表示要加载类的全类名(包名.类名)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">findClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findclass方法执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        检查该类的class文件是否已被加载，如果已加载则返回class文件(字节码文件)对象，如果没有加载返回null</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> loadedClass <span class="token operator">=</span> <span class="token function">findLoadedClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        如果已加载直接返回该类的class文件(字节码文件)对象</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>loadedClass <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> loadedClass<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

<span class="token comment">//        字节数组，用于存储class文件的字节流</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//            获取class文件的字节流</span>
            bytes <span class="token operator">=</span> <span class="token function">getBytes</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">if</span> <span class="token punctuation">(</span>bytes <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//        如果字节数组不为空，则将class文件加载到JVM中</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//            将class文件加载到JVM中，返回class文件对象</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">defineClass</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> aClass<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//    获取class文件的字节流</span>
    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//        拼接class文件路径 replace(".",File.separator) 表示将全类名中的"."替换为当前系统的分隔符，File.separator返回当前系统的分隔符</span>
        <span class="token class-name">String</span> <span class="token class-name">FileUrl</span> <span class="token operator">=</span> <span class="token class-name">Path</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".class"</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">;</span>
<span class="token comment">//        相当于一个缓存区，动态扩容，也就是随着写入字节的增加自动扩容</span>
        <span class="token class-name">ByteArrayOutputStream</span> arrayOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">FileUrl</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        创建输入流</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> content<span class="token punctuation">;</span>
<span class="token comment">//        循环将输入流中的所有数据写入到缓存区中</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>content <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            arrayOutputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrayOutputStream<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        bytes <span class="token operator">=</span> arrayOutputStream<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bytes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//构造器的参数是类的class文件所在的目录</span>
    <span class="token class-name">MyClassLoader</span> myClassLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClassLoader</span><span class="token punctuation">(</span><span class="token string">"D:\\IdeaSpace\\java_basis\\out\\production\\java_basis\\"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> loadClass <span class="token operator">=</span> myClassLoader<span class="token punctuation">.</span><span class="token function">findClass</span><span class="token punctuation">(</span><span class="token string">"test.Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> loadClass2 <span class="token operator">=</span> myClassLoader<span class="token punctuation">.</span><span class="token function">findClass</span><span class="token punctuation">(</span><span class="token string">"test.Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>loadClass<span class="token operator">==</span>loadClass2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true 相同的类加载器某个类只会被加载一次</span>

    <span class="token class-name">MyClassLoader</span> myClassLoader2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClassLoader</span><span class="token punctuation">(</span><span class="token string">"D:\\IdeaSpace\\java_basis\\out\\production\\java_basis\\"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> loadClass3 <span class="token operator">=</span> myClassLoader2<span class="token punctuation">.</span><span class="token function">findClass</span><span class="token punctuation">(</span><span class="token string">"test.Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>loadClass<span class="token operator">==</span>loadClass3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false 相同的类 但是是不同的类加载器（创建了两个MyClassLoader对象）</span>


    <span class="token class-name">Object</span> o <span class="token operator">=</span> loadClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//test.Hello@6d6f6e28</span>
    <span class="token class-name">ClassLoader</span> myLoader <span class="token operator">=</span> loadClass<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ClassLoader</span> appLoader <span class="token operator">=</span> myLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ClassLoader</span> extendsLoader <span class="token operator">=</span> appLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ClassLoader</span> rootLoader <span class="token operator">=</span> extendsLoader<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//test.MyClassLoader@1540e19d</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>appLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sun.misc.Launcher$AppClassLoader@18b4aac2</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>extendsLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sun.misc.Launcher$ExtClassLoader@7f31245a</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rootLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null</span>

<span class="token punctuation">}</span>

</code></pre> </li><li> <p>获得Class对象</p> 
  <ul><li>Class.forName</li><li>Person.class这种形式</li><li>p.getClass()</li></ul> </li><li> <p>Class对象和普通对象一样，里面有很多方法</p> 
  <ul><li>可以获得Class对象对应类的构造器</li><li>可以获得Class对象对应类的的方法</li><li>可以获得Class对象对应类的成员变量</li></ul> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personClass <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * 获取Person类中的构造器
         * 输出结果
         * public test.Person()
         * public test.Person(java.lang.String,int)
         */</span>
        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * 获取Person类中的方法
         * 会打印方法签名 不包括父类中的方法
         * static int test.Person.f()
         * void test.Person.info(java.lang.String)
         */</span>
        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * 获取Person类中的属性
         * java.lang.String test.Person.name
         * int test.Person.age
         * static int test.Person.a
         */</span>
        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment">//带Declared的获得的方法或属性和访问权限无关</span>
<span class="token comment">//不带Declared只能获得public权限的方法或属性</span>
</code></pre> </li><li> <p>使用反射创建对象</p> <pre><code class="prism language-java"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personClass <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> person1 <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用无参构造器创建对象</span>
<span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> constructor1 <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取无参构造器</span>
<span class="token class-name">Person</span> person2 <span class="token operator">=</span> constructor1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> constructor2 <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取有参构造器</span>
<span class="token class-name">Person</span> person3 <span class="token operator">=</span> constructor2<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Person{name='null', age=0}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Person{name='null', age=0}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Person{name='tom', age=18}</span>
</code></pre> </li><li> <p>使用反射调用方法</p> <pre><code class="prism language-java"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personClass <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Method</span> f1 <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"f1"</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> ret1 <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//f1是成员方法 第一个参数需要一个peron对象</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ret1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回1</span>
<span class="token class-name">Method</span> f2 <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"f2"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> ret2 <span class="token operator">=</span> f2<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//f2是一个静态方法 不需要对象 所以第一个参数为null</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ret2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//f2是void类型 返回null</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"a="</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"s="</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"a="</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>访问成员变量的值</p> <pre><code class="prism language-java"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personClass <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
<span class="token class-name">Field</span> a <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//通过反射修改a的值 a是成员变量 第一个参数需要传入一个person对象</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//111</span>
<span class="token class-name">Field</span> b <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//b是private 需要先取消权限访问检查</span>
b<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Field</span> c <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c是静态变量 设置值时第一个参数为null即可</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//333</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
   <span class="token keyword">static</span> <span class="token keyword">int</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>使用反射操作数组</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建大小为10的int类型数组</span>
        <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//给数组元素赋值 arr[1]=100</span>
        <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> ele <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取数组元素的值</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/**
         * 使用Array获取数组属性
         */</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">getArrayDimensions</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getArrayDimensions</span><span class="token punctuation">(</span><span class="token class-name">Object</span> arr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打印数组维度</span>
        <span class="token function">getArrayDimensions</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>JDK动态代理步骤</p> 
  <ol><li>创建一个接口和实现类（被代理的类）</li><li>创建一个InvocationHandler</li><li>创建代理对象</li><li>代理对象调用方法</li></ol> <pre><code class="prism language-java"><span class="token comment">//1. 创建一个接口和实现类（被代理的类）</span>
<span class="token keyword">interface</span> <span class="token class-name">Dog</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">JinMao</span> <span class="token keyword">implements</span> <span class="token class-name">Dog</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我是一只金毛"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"金毛： name="</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">" age="</span><span class="token operator">+</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Keji</span> <span class="token keyword">implements</span> <span class="token class-name">Dog</span><span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我是一只柯基"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"柯基： name="</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">" age="</span><span class="token operator">+</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//2. 创建一个InvocationHandler</span>
<span class="token keyword">class</span> <span class="token class-name">MyInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Dog</span> dog<span class="token punctuation">;</span><span class="token comment">//被代理的对象 用接口类型表示 可以接受多个子类对象</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDog</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dog <span class="token operator">=</span> dog<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"方法开始执行..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//class test.$Proxy0</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"参数："</span><span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//反射调用方法 传入一个对象</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"方法执行结束..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//3. 创建代理对象</span>
<span class="token comment">// Dog dog = new JinMao();</span>
<span class="token class-name">Dog</span> dog<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Keji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyInvocationHandler</span> myInvocationHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyInvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myInvocationHandler<span class="token punctuation">.</span><span class="token function">setDog</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//只能强转为接口Dog类型 不能强转为子类类型</span>
<span class="token class-name">Dog</span> dogProxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dog<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>myInvocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 代理对象调用方法</span>
dogProxy<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dogProxy<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p>反射与泛型</p> <pre><code class="prism language-java"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personClass <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token class-name">Field</span> a <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//int</span>
<span class="token class-name">Field</span> intList <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"intList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Field</span> doubleList <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"doubleList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Field</span> map <span class="token operator">=</span> personClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"map"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intList<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//interface java.util.List </span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intList<span class="token punctuation">.</span><span class="token function">getGenericType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//java.util.List&lt;java.lang.Integer&gt;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>doubleList<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//interface java.util.List</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>doubleList<span class="token punctuation">.</span><span class="token function">getGenericType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//java.util.List&lt;java.lang.Double&gt;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//interface java.util.Map</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">getGenericType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//java.util.Map&lt;java.lang.String, java.lang.Integer&gt;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> intList<span class="token punctuation">;</span>
   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> doubleList<span class="token punctuation">;</span>
   <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getType只能获取基本类型的形式 不能获取泛型参数信息 getGenericType可以获取泛型参数信息</span>
</code></pre> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/383af8669a047039904e5362490c4dbd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">webstorm上没有Element-ui的提示</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7f06227003c9cb649aa42ca6293a8fac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GanttChart</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>