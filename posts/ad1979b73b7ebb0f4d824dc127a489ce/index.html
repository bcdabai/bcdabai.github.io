<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下磁盘分区与扩容 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下磁盘分区与扩容" />
<meta property="og:description" content="虚拟机增加磁盘进行磁盘分区 查看磁盘情况
[root@localhost /]#df
查看设备
[root@localhost /]#ls /dev/sd*
增加磁盘
[root@localhost /]#ls /dev/sd*
找到对应增加的设备(假设增加的sdb)
[root@localhost /]#fdisk /dev/sdb
输入n，新建分区
p 设置主分区
1-4 选择分区号
选择 sector
选择容量
看到磁盘分区成功
[root@localhost /]#ls /dev/sd*
磁盘格式化（假设ext4格式 sdb1）
[root@localhost /]#mkfs.ext4 /dev/sdb1
创建目录
[root@localhost /]#mkdir /home/xxx/mountdir
挂载到目录（将相应设备分区挂载到目录）
[root@localhost /]#mount /dev/sdb1 /home/xxx/mountdir
查看是否挂载成功
[root@localhost /]#df
VMware虚拟机扩展分区容量 有时候一开始进行磁盘分区时给对应分区容量分配少了，需要进行分区扩容；
VMware设置里选择扩展磁盘容量
[root@localhost /]#ls /dev/sd*
sda sda1 sda2 sda3
假设进行/dev/sda3分区进行扩展
查看/dev/sda3是否进行挂载
[root@localgost /]# df
如果挂载了需要卸载磁盘分区
[root@localhost /]# umount /dev/sda3
[root@localhost /]# fdisk /dev/sda" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ad1979b73b7ebb0f4d824dc127a489ce/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-25T08:29:28+08:00" />
<meta property="article:modified_time" content="2018-05-25T08:29:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下磁盘分区与扩容</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a><strong>虚拟机增加磁盘进行磁盘分区</strong></h3> 
<p>查看磁盘情况<br> <strong>[root@localhost /]#df</strong><br> 查看设备<br> <strong>[root@localhost /]#ls /dev/sd</strong>*<br> 增加磁盘<br> <strong>[root@localhost /]#ls /dev/sd</strong>*<br> 找到对应增加的设备(假设增加的sdb)</p> 
<p><strong>[root@localhost /]#fdisk /dev/sdb</strong><br> 输入n，新建分区<br> p 设置主分区<br> 1-4 选择分区号<br> 选择 sector<br> 选择容量</p> 
<p>看到磁盘分区成功<br> <strong>[root@localhost /]#ls /dev/sd</strong>*</p> 
<p>磁盘格式化（假设ext4格式 sdb1）<br> <strong>[root@localhost /]#mkfs.ext4 /dev/sdb1</strong></p> 
<p>创建目录<br> <strong>[root@localhost /]#mkdir /home/xxx/mountdir</strong></p> 
<p>挂载到目录（将相应设备分区挂载到目录）<br> <strong>[root@localhost /]#mount /dev/sdb1 /home/xxx/mountdir</strong></p> 
<p>查看是否挂载成功<br> <strong>[root@localhost /]#df</strong></p> 
<h3><a id="VMware_33"></a><strong>VMware虚拟机扩展分区容量</strong></h3> 
<p>有时候一开始进行磁盘分区时给对应分区容量分配少了，需要进行分区扩容；<br> VMware设置里选择扩展磁盘容量<br> <strong>[root@localhost /]#ls /dev/sd</strong>*<br> <strong>sda sda1 sda2 sda3</strong></p> 
<p>假设进行/dev/sda3分区进行扩展<br> 查看/dev/sda3是否进行挂载<br> <strong>[root@localgost /]# df</strong></p> 
<p>如果挂载了需要卸载磁盘分区<br> <strong>[root@localhost /]# umount /dev/sda3</strong></p> 
<p><strong>[root@localhost /]# fdisk /dev/sda</strong><br> d //删除分区<br> 3 //删除sda3<br> p //看到/dev/sda3已被删除<br> n //创建新分区<br> 3<br> First cylinder //default<br> Last cylinder //default<br> w</p> 
<p>重启操作系统以重新加载分区表：<br> <strong>[root@localhost /]# init 6</strong></p> 
<p>调整分区大小<br> <strong>[root@localhost /]#resize2fs -p /dev/sda3</strong></p> 
<h3><a id="_64"></a><strong>虚拟机根目录扩容</strong></h3> 
<p>假设新增了一个磁盘设备为sdc<br> <strong>[root@localhost /] fdisk /dev/sdc</strong><br> n<br> p<br> 1<br> default<br> …<br> 格式化新分区<br> <strong>[root@localhost /] mkfs.ext4 /dev/sdc1</strong></p> 
<p>将/dev/sdc1制作为物理卷，即PV<br> <strong>[root@localhost /]pvcreate /dev/sdc1</strong></p> 
<p>将/dev/sdc1加入到逻辑卷组xxx(df查看根目录的逻辑卷组)<br> <strong>[root@localhost /]vgextend VolGroup00 /dev/sdc1</strong></p> 
<p>扩展逻辑卷xxx(增加容量略小于最大值)<br> <strong>[root@localhost /]lvextend -L +20G /dev/VolGroup00/LogVol00</strong></p> 
<p>查看是否扩容成功<br> <strong>[root@localhost /]# lvdisplay</strong></p> 
<p>激活VG：<br> <strong>[root@localhost /]#lvm vgchange -a y /dev/VolGgroup00</strong></p> 
<p>e2fsck 检查文件系统<br> <strong>[root@localhost /]# e2fsck /dev/VolGroup00/LogVol00</strong></p> 
<p>调整分区大小<br> <strong>[root@localhost /]#resize2fs -p /dev/mapper/VolGroup00-LogVol00</strong></p> 
<p>df查看，扩容成功<br> <strong>[root@localhost /]#df</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf676d77ce0238e6c4109239c5c3df37/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">低优先级任务在执行过程中高优先级任务在干什么</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/44817ea7d39bd1ba2484f162f7c8e935/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">海思3531获取多个摄像头在整个屏幕的画面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>