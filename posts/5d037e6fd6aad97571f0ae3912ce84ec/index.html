<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>03线索二叉树_ThreadBinaryTree - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="03线索二叉树_ThreadBinaryTree" />
<meta property="og:description" content="#include&lt;stdio.h&gt; #include&lt;stdlib.h&gt; #include&lt;math.h&gt; #define OK 1 #define ERROR 0 #define TRUE 1 #define FALSE 0 #define MAXSIZE 100 /* 存储空间初始分配量 */ typedef int Status;	/* Status是函数的类型,其值是函数结果状态代码,如OK等 */ typedef char TElemType; typedef enum {Link,Thread} PointerTag;	/* Link==0表示指向左右孩子指针, */ /* Thread==1表示指向前驱或后继的线索 */ typedef struct BiThrNode	/* 二叉线索存储结点结构 */ { TElemType data;	/* 结点数据 */ struct BiThrNode *lchild, *rchild;	/* 左右孩子指针 */ PointerTag LTag; PointerTag RTag;	/* 左右标志 */ } BiThrNode, *BiThrTree; TElemType Nil=&#39;#&#39;; /* 字符型以空格符为空 */ Status visit(TElemType e) { printf(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5d037e6fd6aad97571f0ae3912ce84ec/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-06T15:59:28+08:00" />
<meta property="article:modified_time" content="2020-10-06T15:59:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">03线索二叉树_ThreadBinaryTree</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> OK 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> ERROR 0</span>
<span class="token macro property">#<span class="token directive keyword">define</span> TRUE 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> FALSE 0</span>

<span class="token macro property">#<span class="token directive keyword">define</span> MAXSIZE 100 </span><span class="token comment">/* 存储空间初始分配量 */</span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> Status<span class="token punctuation">;</span>	<span class="token comment">/* Status是函数的类型,其值是函数结果状态代码,如OK等 */</span>
<span class="token keyword">typedef</span> <span class="token keyword">char</span> TElemType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token punctuation">{<!-- --></span>Link<span class="token punctuation">,</span>Thread<span class="token punctuation">}</span> PointerTag<span class="token punctuation">;</span>	<span class="token comment">/* Link==0表示指向左右孩子指针, */</span>
										<span class="token comment">/* Thread==1表示指向前驱或后继的线索 */</span>
<span class="token keyword">typedef</span>  <span class="token keyword">struct</span> BiThrNode	<span class="token comment">/* 二叉线索存储结点结构 */</span>
<span class="token punctuation">{<!-- --></span>
	TElemType data<span class="token punctuation">;</span>	<span class="token comment">/* 结点数据 */</span>
	<span class="token keyword">struct</span> BiThrNode <span class="token operator">*</span>lchild<span class="token punctuation">,</span> <span class="token operator">*</span>rchild<span class="token punctuation">;</span>	<span class="token comment">/* 左右孩子指针 */</span>
	PointerTag LTag<span class="token punctuation">;</span>
	PointerTag RTag<span class="token punctuation">;</span>		<span class="token comment">/* 左右标志 */</span>
<span class="token punctuation">}</span> BiThrNode<span class="token punctuation">,</span> <span class="token operator">*</span>BiThrTree<span class="token punctuation">;</span>

TElemType Nil<span class="token operator">=</span><span class="token string">'#'</span><span class="token punctuation">;</span> <span class="token comment">/* 字符型以空格符为空 */</span>

Status <span class="token function">visit</span><span class="token punctuation">(</span>TElemType e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c "</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 按前序输入二叉线索树中结点的值,构造二叉线索树T */</span>
<span class="token comment">/* 0(整型)/空格(字符型)表示空结点 */</span>
Status <span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span>BiThrTree <span class="token operator">*</span>T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> 
	TElemType h<span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>h<span class="token operator">==</span>Nil<span class="token punctuation">)</span>
		<span class="token operator">*</span>T<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">*</span>T<span class="token operator">=</span><span class="token punctuation">(</span>BiThrTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiThrNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span>T<span class="token punctuation">)</span>
			<span class="token function">exit</span><span class="token punctuation">(</span>OVERFLOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>data<span class="token operator">=</span>h<span class="token punctuation">;</span> <span class="token comment">/* 生成根结点(前序) */</span>
		<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归构造左子树 */</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span> <span class="token comment">/* 有左孩子 */</span>
			<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>LTag<span class="token operator">=</span>Link<span class="token punctuation">;</span>
		<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归构造右子树 */</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span> <span class="token comment">/* 有右孩子 */</span>
			<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>RTag<span class="token operator">=</span>Link<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

BiThrTree pre<span class="token punctuation">;</span> <span class="token comment">/* 全局变量,始终指向刚刚访问过的结点 */</span>
<span class="token comment">/* 中序遍历进行中序线索化 */</span>
<span class="token keyword">void</span> <span class="token function">InThreading</span><span class="token punctuation">(</span>BiThrTree p<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> 
	<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归左子树线索化 */</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span> <span class="token comment">/* 没有左孩子 */</span>
		<span class="token punctuation">{<!-- --></span>
			p<span class="token operator">-&gt;</span>LTag<span class="token operator">=</span>Thread<span class="token punctuation">;</span> <span class="token comment">/* 前驱线索 */</span>
			p<span class="token operator">-&gt;</span>lchild<span class="token operator">=</span>pre<span class="token punctuation">;</span> <span class="token comment">/* 左孩子指针指向前驱 */</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pre<span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span> <span class="token comment">/* 前驱没有右孩子 */</span>
		<span class="token punctuation">{<!-- --></span>
			pre<span class="token operator">-&gt;</span>RTag<span class="token operator">=</span>Thread<span class="token punctuation">;</span> <span class="token comment">/* 后继线索 */</span>
			pre<span class="token operator">-&gt;</span>rchild<span class="token operator">=</span>p<span class="token punctuation">;</span> <span class="token comment">/* 前驱右孩子指针指向后继(当前结点p) */</span>
		<span class="token punctuation">}</span>
		pre<span class="token operator">=</span>p<span class="token punctuation">;</span> <span class="token comment">/* 保持pre指向p的前驱 */</span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归右子树线索化 */</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 中序遍历二叉树T,并将其中序线索化,Thrt指向头结点 */</span>
Status <span class="token function">InOrderThreading</span><span class="token punctuation">(</span>BiThrTree <span class="token operator">*</span>Thrt<span class="token punctuation">,</span>BiThrTree T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> 
	<span class="token operator">*</span>Thrt<span class="token operator">=</span><span class="token punctuation">(</span>BiThrTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiThrNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span>
		<span class="token function">exit</span><span class="token punctuation">(</span>OVERFLOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>LTag<span class="token operator">=</span>Link<span class="token punctuation">;</span> <span class="token comment">/* 建头结点 */</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>RTag<span class="token operator">=</span>Thread<span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 右指针回指 */</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>T<span class="token punctuation">)</span> <span class="token comment">/* 若二叉树空,则左指针回指 */</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token operator">=</span><span class="token operator">*</span>Thrt<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token operator">=</span>T<span class="token punctuation">;</span>
		pre<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历进行中序线索化 */</span>
		pre<span class="token operator">-&gt;</span>rchild<span class="token operator">=</span><span class="token operator">*</span>Thrt<span class="token punctuation">;</span>
		pre<span class="token operator">-&gt;</span>RTag<span class="token operator">=</span>Thread<span class="token punctuation">;</span> <span class="token comment">/* 最后一个结点线索化 */</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token operator">=</span>pre<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 中序遍历二叉线索树T(头结点)的非递归算法 */</span>
Status <span class="token function">InOrderTraverse_Thr</span><span class="token punctuation">(</span>BiThrTree T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> 
	BiThrTree p<span class="token punctuation">;</span>
	p<span class="token operator">=</span>T<span class="token operator">-&gt;</span>lchild<span class="token punctuation">;</span> <span class="token comment">/* p指向根结点 */</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span>T<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token comment">/* 空树或遍历结束时,p==T */</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>LTag<span class="token operator">==</span>Link<span class="token punctuation">)</span>
			p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">visit</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">/* 访问其左子树为空的结点 */</span>
			<span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>RTag<span class="token operator">==</span>Thread<span class="token operator">&amp;&amp;</span>p<span class="token operator">-&gt;</span>rchild<span class="token operator">!=</span>T<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">;</span>
			<span class="token function">visit</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 访问后继结点 */</span>
		<span class="token punctuation">}</span>
		p<span class="token operator">=</span>p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	BiThrTree H<span class="token punctuation">,</span>T<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请按前序输入二叉树(如:'ABDH##I##EJ###CF##G##')\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 按前序产生二叉树 */</span>
	<span class="token function">InOrderThreading</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>H<span class="token punctuation">,</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历,并中序线索化二叉树 */</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"中序遍历(输出)二叉线索树:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">InOrderTraverse_Thr</span><span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历(输出)二叉线索树 */</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在VS2019下，需将源文件的scanf改为scanf_s：</p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> OK 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> ERROR 0</span>
<span class="token macro property">#<span class="token directive keyword">define</span> TRUE 1</span>
<span class="token macro property">#<span class="token directive keyword">define</span> FALSE 0</span>

<span class="token macro property">#<span class="token directive keyword">define</span> MAXSIZE 100 </span><span class="token comment">/* 存储空间初始分配量 */</span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> Status<span class="token punctuation">;</span>	<span class="token comment">/* Status是函数的类型,其值是函数结果状态代码,如OK等 */</span>
<span class="token keyword">typedef</span> <span class="token keyword">char</span> TElemType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token punctuation">{<!-- --></span> Link<span class="token punctuation">,</span> Thread <span class="token punctuation">}</span> PointerTag<span class="token punctuation">;</span>	<span class="token comment">/* Link==0表示指向左右孩子指针, */</span>
										<span class="token comment">/* Thread==1表示指向前驱或后继的线索 */</span>
<span class="token keyword">typedef</span>  <span class="token keyword">struct</span> BiThrNode	<span class="token comment">/* 二叉线索存储结点结构 */</span>
<span class="token punctuation">{<!-- --></span>
	TElemType data<span class="token punctuation">;</span>	<span class="token comment">/* 结点数据 */</span>
	<span class="token keyword">struct</span> BiThrNode<span class="token operator">*</span> lchild<span class="token punctuation">,</span> <span class="token operator">*</span> rchild<span class="token punctuation">;</span>	<span class="token comment">/* 左右孩子指针 */</span>
	PointerTag LTag<span class="token punctuation">;</span>
	PointerTag RTag<span class="token punctuation">;</span>		<span class="token comment">/* 左右标志 */</span>
<span class="token punctuation">}</span> BiThrNode<span class="token punctuation">,</span> <span class="token operator">*</span> BiThrTree<span class="token punctuation">;</span>

TElemType Nil <span class="token operator">=</span> <span class="token string">'#'</span><span class="token punctuation">;</span> <span class="token comment">/* 字符型以空格符为空 */</span>

Status <span class="token function">visit</span><span class="token punctuation">(</span>TElemType e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c "</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 按前序输入二叉线索树中结点的值,构造二叉线索树T */</span>
<span class="token comment">/* 0(整型)/空格(字符型)表示空结点 */</span>
Status <span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span>BiThrTree<span class="token operator">*</span> T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TElemType h<span class="token punctuation">;</span>
	<span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>h<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>h <span class="token operator">==</span> Nil<span class="token punctuation">)</span>
		<span class="token operator">*</span>T <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">*</span>T <span class="token operator">=</span> <span class="token punctuation">(</span>BiThrTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiThrNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span>T<span class="token punctuation">)</span>
			<span class="token function">exit</span><span class="token punctuation">(</span>OVERFLOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>data <span class="token operator">=</span> h<span class="token punctuation">;</span> <span class="token comment">/* 生成根结点(前序) */</span>
		<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归构造左子树 */</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span> <span class="token comment">/* 有左孩子 */</span>
			<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>LTag <span class="token operator">=</span> Link<span class="token punctuation">;</span>
		<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归构造右子树 */</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span> <span class="token comment">/* 有右孩子 */</span>
			<span class="token punctuation">(</span><span class="token operator">*</span>T<span class="token punctuation">)</span><span class="token operator">-&gt;</span>RTag <span class="token operator">=</span> Link<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

BiThrTree pre<span class="token punctuation">;</span> <span class="token comment">/* 全局变量,始终指向刚刚访问过的结点 */</span>
<span class="token comment">/* 中序遍历进行中序线索化 */</span>
<span class="token keyword">void</span> <span class="token function">InThreading</span><span class="token punctuation">(</span>BiThrTree p<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归左子树线索化 */</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">)</span> <span class="token comment">/* 没有左孩子 */</span>
		<span class="token punctuation">{<!-- --></span>
			p<span class="token operator">-&gt;</span>LTag <span class="token operator">=</span> Thread<span class="token punctuation">;</span> <span class="token comment">/* 前驱线索 */</span>
			p<span class="token operator">-&gt;</span>lchild <span class="token operator">=</span> pre<span class="token punctuation">;</span> <span class="token comment">/* 左孩子指针指向前驱 */</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pre<span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span> <span class="token comment">/* 前驱没有右孩子 */</span>
		<span class="token punctuation">{<!-- --></span>
			pre<span class="token operator">-&gt;</span>RTag <span class="token operator">=</span> Thread<span class="token punctuation">;</span> <span class="token comment">/* 后继线索 */</span>
			pre<span class="token operator">-&gt;</span>rchild <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">/* 前驱右孩子指针指向后继(当前结点p) */</span>
		<span class="token punctuation">}</span>
		pre <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">/* 保持pre指向p的前驱 */</span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 递归右子树线索化 */</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 中序遍历二叉树T,并将其中序线索化,Thrt指向头结点 */</span>
Status <span class="token function">InOrderThreading</span><span class="token punctuation">(</span>BiThrTree<span class="token operator">*</span> Thrt<span class="token punctuation">,</span> BiThrTree T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span>Thrt <span class="token operator">=</span> <span class="token punctuation">(</span>BiThrTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiThrNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span>
		<span class="token function">exit</span><span class="token punctuation">(</span>OVERFLOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>LTag <span class="token operator">=</span> Link<span class="token punctuation">;</span> <span class="token comment">/* 建头结点 */</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>RTag <span class="token operator">=</span> Thread<span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 右指针回指 */</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>T<span class="token punctuation">)</span> <span class="token comment">/* 若二叉树空,则左指针回指 */</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild <span class="token operator">=</span> <span class="token operator">*</span>Thrt<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>lchild <span class="token operator">=</span> T<span class="token punctuation">;</span>
		pre <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">InThreading</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历进行中序线索化 */</span>
		pre<span class="token operator">-&gt;</span>rchild <span class="token operator">=</span> <span class="token operator">*</span>Thrt<span class="token punctuation">;</span>
		pre<span class="token operator">-&gt;</span>RTag <span class="token operator">=</span> Thread<span class="token punctuation">;</span> <span class="token comment">/* 最后一个结点线索化 */</span>
		<span class="token punctuation">(</span><span class="token operator">*</span>Thrt<span class="token punctuation">)</span><span class="token operator">-&gt;</span>rchild <span class="token operator">=</span> pre<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 中序遍历二叉线索树T(头结点)的非递归算法 */</span>
Status <span class="token function">InOrderTraverse_Thr</span><span class="token punctuation">(</span>BiThrTree T<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	BiThrTree p<span class="token punctuation">;</span>
	p <span class="token operator">=</span> T<span class="token operator">-&gt;</span>lchild<span class="token punctuation">;</span> <span class="token comment">/* p指向根结点 */</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> T<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token comment">/* 空树或遍历结束时,p==T */</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>LTag <span class="token operator">==</span> Link<span class="token punctuation">)</span>
			p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>lchild<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">visit</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">/* 访问其左子树为空的结点 */</span>
			<span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>RTag <span class="token operator">==</span> Thread <span class="token operator">&amp;&amp;</span> p<span class="token operator">-&gt;</span>rchild <span class="token operator">!=</span> T<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">;</span>
			<span class="token function">visit</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 访问后继结点 */</span>
		<span class="token punctuation">}</span>
		p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>rchild<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	BiThrTree H<span class="token punctuation">,</span> T<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请按前序输入二叉树(如:'ABDH##I##EJ###CF##G##')\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">CreateBiThrTree</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 按前序产生二叉树 */</span>
	<span class="token function">InOrderThreading</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>H<span class="token punctuation">,</span> T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历,并中序线索化二叉树 */</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"中序遍历(输出)二叉线索树:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">InOrderTraverse_Thr</span><span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 中序遍历(输出)二叉线索树 */</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/86ae5835e50a47fe6d733fa24f78b2f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux中容易忽略的文件寻址问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/216fe379dd60b4dd3192e456e45d3441/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装ubuntu出现Minimal BASH-like line editingis supported.解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>