<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GitLab与jekins结合构建持续集成（cl）环境(2) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GitLab与jekins结合构建持续集成（cl）环境(2)" />
<meta property="og:description" content="目录
GItlab配置邮箱
绑定邮箱
创建群组
添加人员
创建一个项目
添加文件
新建分支
如何拉取代码
Git bash 演示
Git GUI演示
安装jenkins
更改插件镜像源
配置jenkins使用gitlab更新代码
安装jekins插件
配置jenkins免密拉取gatlab代码
jenkins创建项目
将代码发布到web服务器
测试
给不同的用户分配权限
开启role
设置角色
给lyh用户分配角色
创建角色
分配角色
分支回滚
项目合并
回滚操作
GItlab配置邮箱 #修改配置文件 vim /etc/gitlab/gitlab.rb #去掉注释并修改内容 gitlab_rails[&#39;smtp_enable&#39;] = true gitlab_rails[&#39;smtp_address&#39;] = &#34;smtp.163.com&#34; gitlab_rails[&#39;smtp_port&#39;] = 465 gitlab_rails[&#39;smtp_user_name&#39;] = &#34;17633164083@163.com&#34; gitlab_rails[&#39;smtp_password&#39;] = &#34;BMEOXDBBMJGWOIHT&#34; #这是邮箱域名（可写可不写） #gitlab_rails[&#39;smtp_domain&#39;] = &#34;example.com&#34; gitlab_rails[&#39;smtp_authentication&#39;] = &#34;login&#34; gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true gitlab_rails[&#39;smtp_tls&#39;] = true gitlab_rails[&#39;smtp_pool&#39;] = true #手动添加 gitlab_rails[&#39;gitlab_email_from&#39;] = &#39;17633164083@163." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2ae80a96c940769740cb986f1b2a726a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-15T11:03:56+08:00" />
<meta property="article:modified_time" content="2023-04-15T11:03:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GitLab与jekins结合构建持续集成（cl）环境(2)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="GItlab%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1-toc" style="margin-left:0px;"><a href="#GItlab%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1" rel="nofollow">GItlab配置邮箱</a></p> 
<p id="%C2%A0%E7%BB%91%E5%AE%9A%E9%82%AE%E7%AE%B1-toc" style="margin-left:40px;"><a href="#%C2%A0%E7%BB%91%E5%AE%9A%E9%82%AE%E7%AE%B1" rel="nofollow">绑定邮箱</a></p> 
<p id="%C2%A0%E5%88%9B%E5%BB%BA%E7%BE%A4%E7%BB%84-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%88%9B%E5%BB%BA%E7%BE%A4%E7%BB%84" rel="nofollow">创建群组</a></p> 
<p id="%C2%A0%E6%B7%BB%E5%8A%A0%E4%BA%BA%E5%91%98-toc" style="margin-left:0px;"><a href="#%C2%A0%E6%B7%BB%E5%8A%A0%E4%BA%BA%E5%91%98" rel="nofollow">添加人员</a></p> 
<p id="%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE" rel="nofollow">创建一个项目</a></p> 
<p id="%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6" rel="nofollow">添加文件</a></p> 
<p id="%C2%A0%E6%96%B0%E5%BB%BA%E5%88%86%E6%94%AF-toc" style="margin-left:80px;"><a href="#%C2%A0%E6%96%B0%E5%BB%BA%E5%88%86%E6%94%AF" rel="nofollow">新建分支</a></p> 
<p id="%E5%A6%82%E4%BD%95%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E5%A6%82%E4%BD%95%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81" rel="nofollow">如何拉取代码</a></p> 
<p id="Git%20bash%20%E6%BC%94%E7%A4%BA-toc" style="margin-left:80px;"><a href="#Git%20bash%20%E6%BC%94%E7%A4%BA" rel="nofollow">Git bash 演示</a></p> 
<p id="%C2%A0Git%20GUI%E6%BC%94%E7%A4%BA-toc" style="margin-left:80px;"><a href="#%C2%A0Git%20GUI%E6%BC%94%E7%A4%BA" rel="nofollow"> Git GUI演示</a></p> 
<p id="%E5%AE%89%E8%A3%85jenkins-toc" style="margin-left:0px;"><a href="#%E5%AE%89%E8%A3%85jenkins" rel="nofollow">安装jenkins</a></p> 
<p id="%C2%A0%E6%9B%B4%E6%94%B9%E6%8F%92%E4%BB%B6%E9%95%9C%E5%83%8F%E6%BA%90-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%9B%B4%E6%94%B9%E6%8F%92%E4%BB%B6%E9%95%9C%E5%83%8F%E6%BA%90" rel="nofollow">更改插件镜像源</a></p> 
<p id="%E9%85%8D%E7%BD%AEjenkins%E4%BD%BF%E7%94%A8gitlab%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E9%85%8D%E7%BD%AEjenkins%E4%BD%BF%E7%94%A8gitlab%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81" rel="nofollow">配置jenkins使用gitlab更新代码</a></p> 
<p id="%E5%AE%89%E8%A3%85jekins%E6%8F%92%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85jekins%E6%8F%92%E4%BB%B6" rel="nofollow">安装jekins插件</a></p> 
<p id="%E9%85%8D%E7%BD%AEjenkins%E5%85%8D%E5%AF%86%E6%8B%89%E5%8F%96gatlab%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E9%85%8D%E7%BD%AEjenkins%E5%85%8D%E5%AF%86%E6%8B%89%E5%8F%96gatlab%E4%BB%A3%E7%A0%81" rel="nofollow">配置jenkins免密拉取gatlab代码</a></p> 
<p id="%C2%A0jenkins%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:40px;"><a href="#%C2%A0jenkins%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" rel="nofollow">jenkins创建项目</a></p> 
<p id="%E5%B0%86%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E5%88%B0web%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:0px;"><a href="#%E5%B0%86%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E5%88%B0web%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">将代码发布到web服务器</a></p> 
<p id="%C2%A0%E6%B5%8B%E8%AF%95-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%B5%8B%E8%AF%95" rel="nofollow">测试</a></p> 
<p id="%C2%A0%E6%9B%B4%E6%96%B0gitlab%E4%B8%8A%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8Cjenkins%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;"><a href="#%C2%A0%E6%9B%B4%E6%96%B0gitlab%E4%B8%8A%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8Cjenkins%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2" rel="nofollow">给不同的用户分配权限</a></p> 
<p id="%E5%BC%80%E5%90%AFrole-toc" style="margin-left:40px;"><a href="#%E5%BC%80%E5%90%AFrole" rel="nofollow">开启role</a></p> 
<p id="%C2%A0%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2-toc" style="margin-left:40px;"><a href="#%C2%A0%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2" rel="nofollow">设置角色</a></p> 
<p id="%C2%A0%E7%BB%99lyh%E7%94%A8%E6%88%B7%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2-toc" style="margin-left:40px;"><a href="#%C2%A0%E7%BB%99lyh%E7%94%A8%E6%88%B7%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2" rel="nofollow"> 给lyh用户分配角色</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2-toc" style="margin-left:80px;"><a href="#%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2" rel="nofollow">创建角色</a></p> 
<p id="%C2%A0%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2" rel="nofollow">分配角色</a></p> 
<p id="%E5%88%86%E6%94%AF%E5%9B%9E%E6%BB%9A-toc" style="margin-left:0px;"><a href="#%E5%88%86%E6%94%AF%E5%9B%9E%E6%BB%9A" rel="nofollow">分支回滚</a></p> 
<p id="%C2%A0%E9%A1%B9%E7%9B%AE%E5%90%88%E5%B9%B6-toc" style="margin-left:40px;"><a href="#%C2%A0%E9%A1%B9%E7%9B%AE%E5%90%88%E5%B9%B6" rel="nofollow">项目合并</a></p> 
<p id="%C2%A0%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%C2%A0%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C" rel="nofollow">回滚操作</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="GItlab%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1">GItlab配置邮箱</h2> 
<pre><code class="language-bash">#修改配置文件
vim /etc/gitlab/gitlab.rb 

#去掉注释并修改内容
gitlab_rails['smtp_enable'] = true
gitlab_rails['smtp_address'] = "smtp.163.com"
gitlab_rails['smtp_port'] = 465
gitlab_rails['smtp_user_name'] = "17633164083@163.com"
gitlab_rails['smtp_password'] = "BMEOXDBBMJGWOIHT"

#这是邮箱域名（可写可不写）
#gitlab_rails['smtp_domain'] = "example.com"

gitlab_rails['smtp_authentication'] = "login"
gitlab_rails['smtp_enable_starttls_auto'] = true
gitlab_rails['smtp_tls'] = true
gitlab_rails['smtp_pool'] = true
#手动添加
gitlab_rails['gitlab_email_from'] = '17633164083@163.com'

#重载gitlab
gitlab-ctl reconfigure

#登录控制台测试
gitlab-rails console

#往邮箱发送邮件
Notify.test_email('17633164083@163.com','test','lyh').deliver_now</code></pre> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/07/f5/z1jBfTCq_o.png" width="1200"></p> 
<h3 id="%C2%A0%E7%BB%91%E5%AE%9A%E9%82%AE%E7%AE%B1">绑定邮箱</h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/6b/84/dJDKOTwX_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/be/37/u5sihXqM_o.png" width="1200"></p> 
<p><img alt="" height="473" src="https://images2.imgbox.com/d1/02/dUyHQpgL_o.png" width="1200"></p> 
<h2 id="%C2%A0%E5%88%9B%E5%BB%BA%E7%BE%A4%E7%BB%84">创建群组</h2> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ff/40/LW9GNFLO_o.png" width="1200"></p> 
<p><img alt="" height="1006" src="https://images2.imgbox.com/1e/32/CaQmdZTM_o.png" width="1200"></p> 
<p></p> 
<pre><code class="language-bash">Gitlab中的组和项目有三种访问权限：Private、Internal、Public

Private：    只有组成员才能看到
Internal：   只要登录的用户就能看到
Public：     所有人都能看到
开源项目和组设置的是Internal</code></pre> 
<p>群组名称随便起，但最好是英文，不然访问的时候群组URL会变成别的</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/e9/a0/dMvzGYua_o.png" width="688"></p> 
<p>随便选，最后点击创建群组</p> 
<p><img alt="" height="566" src="https://images2.imgbox.com/17/da/Pni1QY7x_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/1c/65/TCy00cQi_o.png" width="1200"></p> 
<h2 id="%C2%A0%E6%B7%BB%E5%8A%A0%E4%BA%BA%E5%91%98">添加人员</h2> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/61/63/jNhbxgAb_o.png" width="1200"></p> 
<p>用户名是登录时候的用户名，访问级别是根据这个人来定的，这里选的是管理员，改完点击创建即可。</p> 
<p><img alt="" height="1077" src="https://images2.imgbox.com/55/72/9j3zrFFb_o.png" width="1200"></p> 
<p> 登录这个账户</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/46/88/axMFlifh_o.png" width="1200"></p> 
<p> 会向qq邮箱里面发送一个初始密码</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/68/7b/zNhKuyRK_o.png" width="1200"></p> 
<p>点击<a href="http://192.168.100.5/users/password/edit?reset_password_token=8EfRKqp811oJ_to1HGka" rel="nofollow" title="Click here to set your password">Click here to set your password</a>会让他设置密码，跟着引导走即可</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/18/a0/ZMYNJ21r_o.png" width="1200"></p> 
<p> 改完密码也会发送一个邮件</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/53/29/JSzV37et_o.png" width="1200"></p> 
<p></p> 
<p>将lyh加入到project group<img alt="" height="1200" src="https://images2.imgbox.com/32/46/VDxEowDq_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ff/bd/qNkTPsPN_o.png" width="1200"></p> 
<p>  角色：</p> 
<pre><code class="language-bash">Guest：        可以创建issue、发表评论，不能读写版本库
Reporter：     可以克隆代码，不能提交，QA、PM可以赋予这个权限（总监）
Developer：    可以克隆代码、开发、提交、push，RD可以赋予这个权限（开发）
Master：       可以创建项目、添加tag、保护分支、添加项目成员、编辑项目，核心RD负责人可以赋予这个权限（项目开发头头）
Owner：        可以设置项目访问权限 - Visibility Level、删除项目、迁移项目、管理组成员，开发组leader可以赋予这个权限（运维人员）</code></pre> 
<p>也可以</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/e7/6d/9DbOJ5pb_o.png" width="1200"></p> 
<p>在这里可以设置用户最大角色，和过期时间，同时也会发送一封邮件</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/61/74/56mFwvv2_o.png" width="1200"></p> 
<h2 id="%C2%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE">创建一个项目</h2> 
<p>在首页点击新建项目到下图</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/77/ba/uCfJ9tlQ_o.png" width="1200"></p> 
<p>空白项目就是一个空文档</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ba/60/9SziX353_o.png" width="1200"></p> 
<p></p> 
<p>从模板创建就是可以选择一些已经创好的模板 </p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/61/75/J0gHBz3R_o.png" width="1200"></p> 
<p></p> 
<p> 导入就是将其他地方导入到gitlab </p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2f/f9/VZ8kWT3Q_o.png" width="1200"></p> 
<p> 我们选择创建空文档</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/a9/c7/RvnCZMMg_o.png" width="1200"></p> 
<p> 项目名称最好起英文名，可见界别根据具体情况而定，然后点击创建新建项目</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/c6/62/7WqQ2nts_o.png" width="1200"></p> 
<p> 使用说明：跟使用GitHub一样，需要注意的是没有在账号中新建ssh公钥之前，将无法通过ssh拉取或推送代码</p> 
<h4 id="%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6">添加文件</h4> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/87/2c/cb8pQ3Ub_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/90/51/Aj4oq3TM_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/45/0c/4fdfJ3Fw_o.png" width="1200"></p> 
<h4 id="%C2%A0%E6%96%B0%E5%BB%BA%E5%88%86%E6%94%AF">新建分支</h4> 
<p><img alt="" height="1186" src="https://images2.imgbox.com/e9/4b/DDBFIjap_o.png" width="1200"></p> 
<p> 创建两个分支wyb和lzz<img alt="" height="1200" src="https://images2.imgbox.com/2f/cb/vGWrCQRf_o.png" width="1200"></p> 
<p> 在wyb中添加文件</p> 
<p><img alt="" height="302" src="https://images2.imgbox.com/97/9d/Iw6iBK2y_o.png" width="1200"></p> 
<p>这个是在其他分支看不到的</p> 
<p><img alt="" height="272" src="https://images2.imgbox.com/2a/70/rgBs9bJc_o.png" width="1200"></p> 
<p><img alt="" height="259" src="https://images2.imgbox.com/58/7d/yp3BU4Ly_o.png" width="1200"> 但是main是他们的主分支，在main里面新建文件，在其他子分支是看得到的</p> 
<h2 id="%E5%A6%82%E4%BD%95%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81">如何拉取代码</h2> 
<p> 首先公司的开发肯定用的是windows系统或者Mac系统，所以需要在他们的电脑上安装一个软件叫做“Git Bash”</p> 
<p>下载地址<a class="link-info" href="https://git-scm.com/download/win" rel="nofollow" title="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/88/6a/4kxLCViE_o.png" width="1200"></p> 
<p> 下载完之后安装</p> 
<p><img alt="" height="39" src="https://images2.imgbox.com/9c/6d/5xVHWDj7_o.png" width="1015"></p> 
<p> <img alt="" height="582" src="https://images2.imgbox.com/dd/a8/HtIaVreO_o.png" width="768"></p> 
<p><img alt="" height="582" src="https://images2.imgbox.com/7c/35/Fr6p6nDE_o.png" width="768"> 之后一直默认到下图，选择第一个</p> 
<p><img alt="" height="582" src="https://images2.imgbox.com/20/34/tOLYhS7T_o.png" width="768"></p> 
<p> 之后一直默认安装即可。装完之后桌面上就有Git bash了</p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/b5/c3/L3rPlk5g_o.png" width="762"></p> 
<p> Git bash是命令行</p> 
<p>Git gui是图形化</p> 
<h4 id="Git%20bash%20%E6%BC%94%E7%A4%BA">Git bash 演示</h4> 
<p>打开Git bash输入ls 就会把你桌面上的内容</p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/13/97/skIhSb6x_o.png" width="930"></p> 
<p>  git config --global user.name "lyh"，作用是声明是谁，只需要声明1次 </p> 
<p> git config --global user.email "1684954874@qq.com"，写的是当时创用户的邮箱</p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/f0/2a/OW80tlan_o.png" width="930"></p> 
<p>这时就可以直接拉代码了，复制第二个</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/23/00/ISfQH0ET_o.png" width="1200"></p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/eb/d9/vpOLEA8M_o.png" width="930"></p> 
<p> 会弹出这个界面，这里写的用户名和密码是登录gitlab的用户名密码</p> 
<p></p> 
<p><img alt="" height="480" src="https://images2.imgbox.com/b3/a2/N0dbFqfW_o.png" width="621"></p> 
<p>确定以后，桌面上会有一个test目录，目录里的文件就是刚刚在gitlab上创建的</p> 
<p><img alt="" height="846" src="https://images2.imgbox.com/b0/15/s0rvm8B9_o.png" width="1200"></p> 
<p>修改一下内容，重新上传到gitlab，再到gitlab看看数据是否更改</p> 
<p>Git bush上传流程</p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/f3/32/R6Icv0RC_o.png" width="1200"></p> 
<p>工作区到暂存区是可以撤回的，一旦发送到本地仓库后，就不可以撤回了</p> 
<p><img alt="" height="817" src="https://images2.imgbox.com/4e/39/nb9HVdrM_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2a/fc/bU3LZPZg_o.png" width="1200"></p> 
<p> 可以看到gitlab中的内容已经修改了</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/d3/f3/O7zzRXUi_o.png" width="1200"></p> 
<h4 id="%C2%A0Git%20GUI%E6%BC%94%E7%A4%BA"> Git GUI演示</h4> 
<p><img alt="" height="296" src="https://images2.imgbox.com/d7/79/ZCGKwsoq_o.png" width="715"></p> 
<p> source源                target是目标地址</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2a/91/nw5OUrpI_o.png" width="1200"><img alt="" height="377" src="https://images2.imgbox.com/b5/d1/YHipYYXw_o.png" width="997"></p> 
<p>进到里面有五个按钮，一个一个点，注意是一个一个，就OK了</p> 
<p>linux系统的操作方法跟Git bash的操作一样</p> 
<h2 id="%E5%AE%89%E8%A3%85jenkins">安装jenkins</h2> 
<p>首先安装jdk</p> 
<pre><code class="language-bash">#安装jdk
yum -y install java-11-openjdk

#解压
rpm -ivh jenkins-2.387.2-1.1.noarch.rpm 

#修改配置文件
vim /etc/sysconfig/jenkins 

...
JENKINS_USER="root"    #改成root
...


#启动
/etc/init.d/jenkins start

[root@localhost ~]# /etc/init.d/jenkins start
Starting jenkins (via systemctl):                          [  确定  ]

</code></pre> 
<p>访问 jenkins服务器IP:8080 </p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/c3/8d/fGppJqIy_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/f0/d4/itenRP42_o.png" width="1200"></p> 
<p>主要把汉化包安装上</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/eb/3e/sc3SnO3m_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/3a/4a/ayKEWg9S_o.png" width="1200"></p> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/c8/df/pebyNJDF_o.png" width="1200"></p> 
<p>之后一直默认就行了</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/1f/94/ur6zEoCI_o.png" width="1200"></p> 
<h3 id="%C2%A0%E6%9B%B4%E6%94%B9%E6%8F%92%E4%BB%B6%E9%95%9C%E5%83%8F%E6%BA%90">更改插件镜像源</h3> 
<p>Manage jekins ----&gt;Manage Plugins ---&gt;Advanced在最下面的升级站点改成国内的</p> 
<p>我用的是<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json" rel="nofollow" title="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p> 
<p><img alt="" height="463" src="https://images2.imgbox.com/c2/75/QsUmkzqi_o.png" width="1200"></p> 
<p>除此之外还需要修改这个文件</p> 
<pre><code class="language-bash">cd /var/lib/jenkins/updates/
sed -i 's/https:\/\/updates.jenkins.io\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g' default.json 
sed -i 's/https:\/\/www.google.com/https:\/\/www.baidu.com/g' default.json </code></pre> 
<p>如果是手动安装插件，导致版本不匹配，则需要下载</p> 
<pre><code class="language-bash">wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/war/latest/jenkins.war

关闭jekins
然后把/usr/share/java/中的jekins.war替换掉
开启jenkins</code></pre> 
<h2 id="%E9%85%8D%E7%BD%AEjenkins%E4%BD%BF%E7%94%A8gitlab%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81">配置jenkins使用gitlab更新代码</h2> 
<h3 id="%E5%AE%89%E8%A3%85jekins%E6%8F%92%E4%BB%B6">安装jekins插件</h3> 
<p>Manage jekins ----&gt;Manage Plugins---&gt;Avaiable plugins</p> 
<p>搜索要安装的插件</p> 
<p>Gitlab、Git、Git Clinet、Gitlab Authentication、SSH agent、Publish Over SSH</p> 
<p>Geneic Webhook Trigger 、Build Authorization Token、Build Token、Role-based Authorization Strategy</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/a0/46/vMdUcTeE_o.png" width="1197"></p> 
<p>等他下完自动重启即可 </p> 
<h2 id="%E9%85%8D%E7%BD%AEjenkins%E5%85%8D%E5%AF%86%E6%8B%89%E5%8F%96gatlab%E4%BB%A3%E7%A0%81">配置jenkins免密拉取gatlab代码</h2> 
<pre><code class="language-bash">[root@bogon ~]# ssh-keygen 
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): 
Created directory '/root/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:NDVi5sr6a7jorx9Rvs/cG7xKrk+SGMAIyVqVSd/SRds root@bogon
The key's randomart image is:
+---[RSA 2048]----+
|o. ooo  +.=      |
|o+. o. * + +     |
|o.o   + * . E    |
|.  . + + .       |
|    o + S        |
|     = o .       |
|    +.+ o o      |
|   ..o.O . o     |
| .+++o++B.+.     |
+----[SHA256]-----+'

[root@bogon ~]# cat .ssh/id_rsa
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAwAlMU1euHJwb0bbc9f0ceqjL7zTchKMkH/3AUEqZG4p6e81f
h9e0jQ5VeT7p4+zvRbN7BM8W6SlWZwuNIi/lAw/NqADdhMHZq1Q/WGzzBavvBZF4
OmGTZj++2385jRyl1V+vle2W0/g9bXM47WlKP00Rtny0D8qA5oaEXef2tTqLKqzZ
YE1fmlQyCOu6n6/CzYTJr+OOlymM06vVyl38Q7iaZIOs6vYKbC8eZv6X0N8qKtXQ
EYpHDUye1ZCtvK4QZcijsQkiVXDZdeIBz9rww2WMQ92Ks5AQtSk6Y6uAPOQU84m8
ieDEISc9W/Y3DEguEsL4KaiOquwaFzTcb2A3EwIDAQABAoIBAGyv1ocFBQIkSIp1
GLIQw2GYz3NfU7+uJfAFSicnUWiJA7G2Fu9nYkTDbBTnSrE5lGK6plGec7UbNE+1
9fb3bIJDG36OntFYdb3GPOPrJdB78xgPsSA5wZcJVRgd9ZCsOh99vH76rXbi9MFR
iVK1WNRi5jeGdNLLJhFS6O/NLZB7yNyaxokHBlULK6egYlCwVb+B5LNh3lF7v88e
1N50bK3ux0+dEyd4JNEcpZuhkeCNpESiN6S2FuBDIoF+SOlRVa/2HKQ1wr5G8Fht
Ef3bOmc3kh4o/gzQH4vZzsFkNVSFMkidlzPs2XPbokwcns7WQe7Y609QIF8ymnDw
yliGtmECgYEA/Ee+fMVEj1r6bEMcDLWPYvN7Qr4oDZmV5d9iB4w8YBuiTfjrxpKo
60jU1WvZYW6QIx9+641/gR+UBue6KTOg96NNILIw9kykpkikgcxxZJdxK88IzF4d
fKc3H/k5CJ8yTgqgzsaiU2IAaYdhTToiwx0lfeigpvKiJyAV7mef+cUCgYEAwt4o
V6pRZZLL3hpQ7AzywDOKq9+o4o7p3CkqR0poUUwzalRtq2Zw3upcldZLr6y2hUaK
EvxeghT24ij3fdRgEA32I1IzecaHd8jZ7rKD6RSAqp/gZGe8bLbyVWrlYGS5REnW
ys08vzNz3SK+opIlTVRXwUH5MVo9IMvPiXLi8vcCgYEA+yIUHrJlAGupdBIOHxyx
ougL4LHYv0kPbehD9o2EIIwBsqrDUkX2f1ld/SJCH/pm43/b4XJW5dvgiEsvBwrN
Bxb5lT2s/dHn6VvQ3yD8FA2pa9nJwV9C7S6r8lkujEWlVwi/cXdMacLZ9DL/Clh/
+EjQZJkpK2fHQTlwe4WOO50CgYAVS6Xo/qnqicJRwVp6kWet7XQIGGciay/PaYg/
RjhkOgmcYyGhC47mLYJ0tXiL+DnyEqVgMcg6OwRH7uYtEBp3Zq8xaPhLJJEFXCPE
3CliPWVaQCKLlnKXBt8wyn/Kqvc8KT2Z6BftZTgSQIvIxGPjMYZtjkInTI9FmEBT
6wQ2PQKBgQDY6nU+BVZm5wFKwFSeHQVsT7P6yZxsXzp08hYhAvKmKyhsACQVEnBO
SilPkJqpePaFOTlsxoMM9K7ZBaVIJi5iMM32MVQcrANERxRZ6xv6EFP7r9ke2VLJ
Da27rah7tCs1si70YVXTRYAJ9cR41/mv8/CFiocDWrhyGPWseCBgMg==
-----END RSA PRIVATE KEY-----</code></pre> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/92/ca/PepYsWM4_o.png" width="1200"></p> 
<p><img alt="" height="489" src="https://images2.imgbox.com/6c/33/E4odt1lk_o.png" width="1200"></p> 
<p><img alt="" height="407" src="https://images2.imgbox.com/68/d3/FXqYs7XF_o.png" width="1200"></p> 
<p><img alt="" height="526" src="https://images2.imgbox.com/89/47/ZlFGvUWx_o.png" width="1200"></p> 
<p><img alt="" height="1008" src="https://images2.imgbox.com/20/2c/hbswmkR3_o.png" width="1200"></p> 
<p><img alt="" height="554" src="https://images2.imgbox.com/66/3c/2nfrfMs6_o.png" width="1200"></p> 
<p><img alt="" height="431" src="https://images2.imgbox.com/a7/22/CrMDojUz_o.png" width="1200"></p> 
<pre><code class="language-bash">[root@bogon ~]# cat .ssh/id_rsa.pub 
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDACUxTV64cnBvRttz1/Rx6qMvvNNyEoyQf/cBQSpkbinp7zV+H17SNDlV5Punj7O9Fs3sEzxbpKVZnC40iL+UDD82oAN2EwdmrVD9YbPMFq+8FkXg6YZNmP77bfzmNHKXVX6+V7ZbT+D1tczjtaUo/TRG2fLQPyoDmhoRd5/a1OosqrNlgTV+aVDII67qfr8LNhMmv446XKYzTq9XKXfxDuJpkg6zq9gpsLx5m/pfQ3yoq1dARikcNTJ7VkK28rhBlyKOxCSJVcNl14gHP2vDDZYxD3YqzkBC1KTpjq4A85BTzibyJ4MQhJz1b9jcMSC4SwvgpqI6q7BoXNNxvYDcT root@bogon</code></pre> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/90/6a/6ntiTzZV_o.png" width="1200"></p> 
<h3 id="%C2%A0jenkins%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">jenkins创建项目</h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2f/ac/13c0MmUs_o.png" width="1200"></p> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/49/82/M4mmqx6F_o.png" width="1200"></p> 
<p> 这只是一个描述信息，随便写，之后点击源码管理<img alt="" height="1200" src="https://images2.imgbox.com/b4/93/mLZXHFQi_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/e8/1e/OAo0Mvyl_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ce/88/3XJsF7bZ_o.png" width="1200"></p> 
<p><img alt="" height="525" src="https://images2.imgbox.com/18/e4/eygdGulC_o.png" width="1200"><img alt="" height="1200" src="https://images2.imgbox.com/b3/9d/xMCjGqWt_o.png" width="1200"></p> 
<p> 如果出现这样的</p> 
<p><img alt="" height="591" src="https://images2.imgbox.com/fa/07/8Pkdr8jL_o.png" width="1200"></p> 
<p> 就需要打开 Manage jenkins --&gt; Configure Global Security ，找到 Git   Host Key Verification Configuration，按下图修改后保存。警告信息可以忽略</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/94/58/HvCzDFDW_o.png" width="1200"></p> 
<p> 或者改成Known hosts file就OK了<img alt="" height="440" src="https://images2.imgbox.com/04/f3/NOMZhGJS_o.png" width="1200"></p> 
<p> 就不报错了<img alt="" height="580" src="https://images2.imgbox.com/dc/8c/WS9sSb8a_o.png" width="1200"></p> 
<p> 构建一次</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/c8/12/Y9qt9OyN_o.png" width="1200"> 在gitlab里面修改文件再重新构建，看看内容是否修改</p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/99/48/xaQesafH_o.png" width="1200"></p> 
<p> <img alt="" height="392" src="https://images2.imgbox.com/0c/83/Kl1e7uc7_o.png" width="1200"></p> 
<p><img alt="" height="401" src="https://images2.imgbox.com/4c/0c/oWNxlyFH_o.png" width="1200"></p> 
<p> <img alt="" height="679" src="https://images2.imgbox.com/9f/a6/G0SnSHHr_o.png" width="1200"></p> 
<p> 查看内容，免密构建成功<img alt="" height="293" src="https://images2.imgbox.com/d0/37/K2NMZT1t_o.png" width="1200"> </p> 
<h2 id="%E5%B0%86%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E5%88%B0web%E6%9C%8D%E5%8A%A1%E5%99%A8">将代码发布到web服务器</h2> 
<p>这里我开了一台docker机器模拟网站服务，nginx和apache都可以</p> 
<pre><code class="language-bash">[root@localhost ~]# docker run -itd -p 80:80 -v /var/www/html/:/usr/local/apache2/htdocs/  httpd:2.4.57 

将本地的/var/www/html/挂载到容器内部的/usr/local/apache2/htdocs/  </code></pre> 
<p><img alt="" height="115" src="https://images2.imgbox.com/85/e4/HGsleEBE_o.png" width="1200"></p> 
<p>配置免登</p> 
<pre><code class="language-bash">[root@localhost ~]# ssh-copy-id root@192.168.100.10</code></pre> 
<p>写脚本</p> 
<pre><code class="language-bash">vim /root/deploy.sh

#!/bin/bash
scp /var/lib/jenkins/workspace/web-test/index.html root@192.168.100.10:/var/www/html

#将/var/lib/jenkins/workspace/web-test/index.html复制到192.168.100.10的/var/www/html目录下


#给权限
[root@localhost ~]# chmod 777 deploy.sh </code></pre> 
<p>在jenkins上配置</p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/86/2e/qsCUA2n9_o.png" width="1200"></p> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/5c/44/a0Kky0Lw_o.png" width="1200"></p> 
<p><img alt="" height="550" src="https://images2.imgbox.com/9e/a8/GQ0dLk9o_o.png" width="1200"></p> 
<p>保存 </p> 
<h3 id="%C2%A0%E6%B5%8B%E8%AF%95">测试</h3> 
<p>到jenkins服务器把之前的文件全删掉</p> 
<pre><code class="language-bash">[root@localhost ~]# rm -rf /var/lib/jenkins/workspace/*</code></pre> 
<p><img alt="" height="655" src="https://images2.imgbox.com/10/f8/3Tw1k3dA_o.png" width="1200"></p> 
<p> 如果报错没权限，如下图：</p> 
<p><img alt="" height="697" src="https://images2.imgbox.com/55/71/38WIWUFh_o.png" width="1200"></p> 
<p> 则需要</p> 
<pre><code class="language-bash">#首先
vim /etc/sysconfig/jenkins 

....
JENKINS_USER="root"
JENKINS_GROUP="root"
....

#然后
vim /usr/lib/systemd/system/jenkins.service 

....
User=root
Group=root
....

systemctl daemon-reload 
systemctl restart jenkins.service </code></pre> 
<p><img alt="" height="765" src="https://images2.imgbox.com/5b/32/fFgz1Fqs_o.png" width="1200"></p> 
<p>访问网站 </p> 
<p><img alt="" height="296" src="https://images2.imgbox.com/3a/ca/2nTTdroN_o.png" width="1200"></p> 
<h2 id="%C2%A0%E6%9B%B4%E6%96%B0gitlab%E4%B8%8A%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8Cjenkins%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2">给不同的用户分配权限</h2> 
<h3 id="%E5%BC%80%E5%90%AFrole">开启role</h3> 
<p>Manage jenkins --&gt; Configure Global Security---&gt;授权策略</p> 
<p><img alt="" height="612" src="https://images2.imgbox.com/8a/93/6pJtU6iL_o.png" width="1200"></p> 
<h3 id="%C2%A0%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2">设置角色</h3> 
<p>开启了Role-Based后，系统管理里多了个Manage and AssignRoles</p> 
<p><img alt="" height="462" src="https://images2.imgbox.com/41/8d/pj5cPzTT_o.png" width="1200"></p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/1b/4f/x2zIroOh_o.png" width="1200"></p> 
<p> 他有两个角色需要配置：一个是global roles全局角色，另一个是item roles项目角色</p> 
<p><img alt="" height="666" src="https://images2.imgbox.com/06/4e/lLRPoFMj_o.png" width="1200"></p> 
<p><img alt="" height="503" src="https://images2.imgbox.com/0a/25/i0wCLkUK_o.png" width="1200"> <img alt="" height="1018" src="https://images2.imgbox.com/24/02/53PF5lRP_o.png" width="1200"><img alt="" height="569" src="https://images2.imgbox.com/49/8f/swdIQA0D_o.png" width="1200"></p> 
<h3 id="%C2%A0%E7%BB%99lyh%E7%94%A8%E6%88%B7%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2"> 给lyh用户分配角色</h3> 
<h4 id="%E5%88%9B%E5%BB%BA%E8%A7%92%E8%89%B2">创建角色</h4> 
<p><img alt="" height="506" src="https://images2.imgbox.com/ae/ef/ftjZDvbT_o.png" width="1200"></p> 
<p> 添加baserole，给予权限<img alt="" height="730" src="https://images2.imgbox.com/77/9f/VyRYwfRY_o.png" width="1200"></p> 
<p>添加role1 ，pattern里面是项目名称，再把上面的√点上，然后点击save保存</p> 
<p><img alt="" height="758" src="https://images2.imgbox.com/c1/e0/aBEqEFmj_o.png" width="1200"></p> 
<h4 id="%C2%A0%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2">分配角色</h4> 
<p><img alt="" height="489" src="https://images2.imgbox.com/d9/06/ORECpxvg_o.png" width="1111"></p> 
<p><img alt="" height="668" src="https://images2.imgbox.com/23/ec/pcVjxna6_o.png" width="1200"></p> 
<p><img alt="" height="585" src="https://images2.imgbox.com/8d/4b/g06N2i1m_o.png" width="1200"></p> 
<p> 点击save保存，登录lyh</p> 
<p><img alt="" height="665" src="https://images2.imgbox.com/55/02/6yQ0GADP_o.png" width="1008"></p> 
<p>能够进行相应的操作</p> 
<p><img alt="" height="512" src="https://images2.imgbox.com/a5/b6/79HXBwan_o.png" width="1200"></p> 
<p><img alt="" height="458" src="https://images2.imgbox.com/5d/6e/pd0tj9od_o.png" width="1200"></p> 
<p> 在创建一个用户alex，在创建一个item过程省略，向上面找</p> 
<p><img alt="" height="968" src="https://images2.imgbox.com/83/4d/zqEQE3HP_o.png" width="1200"></p> 
<p> <img alt="" height="260" src="https://images2.imgbox.com/37/88/pkolZsZw_o.png" width="1200"></p> 
<p> 有项目以后分配权限</p> 
<p><img alt="" height="695" src="https://images2.imgbox.com/36/0c/qAk8uQoX_o.png" width="1200"></p> 
<p><img alt="" height="1004" src="https://images2.imgbox.com/b8/7c/Ruvy8P2e_o.png" width="1200"></p> 
<p> 登录lyh，只能看到web-test项目</p> 
<p><img alt="" height="517" src="https://images2.imgbox.com/54/42/4lhVvv0c_o.png" width="1200">登录alex，只能看到web-test项目</p> 
<p><img alt="" height="549" src="https://images2.imgbox.com/a7/b2/BcfvnR3S_o.png" width="1200"></p> 
<h2 id="%E5%88%86%E6%94%AF%E5%9B%9E%E6%BB%9A">分支回滚</h2> 
<p>首先先说一下项目合并</p> 
<pre><code class="language-bash">#在linux上git下载
git config --global user.name "lyh"
git config --global user.email "1684954874@qq.com"
git clone http://192.168.100.5/liuyuhao/test.git
cd test

#查看所有分支，前面的*表示当前在那个分支
[root@localhost test]# git branch 
* main

#创建分支
[root@localhost test]# git branch lyh

#切换分支
[root@localhost test]# git checkout lyh
切换到分支 'lyh'

#创建并切换分支
[root@localhost test]# git checkout -b lzz
切换到一个新分支 'lzz'

#列出所有分支
[root@localhost test]# git branch 
  lyh
* lzz
  main

#在lzz分支创建一个文件，名字和内容随意
vim 123.txt

#将文件上传到暂存区---&gt;本地仓库---&gt;远程仓库
[root@localhost test]# git add 123.txt
[root@localhost test]# git commit -m "add 123.txt"
[lzz da2e3f1] add 123.txt
 1 file changed, 1 insertion(+)
 create mode 100644 123.txt
[root@localhost test]# git push origin lzz
Username for 'http://192.168.100.5': liuyuhao
Password for 'http://liuyuhao@192.168.100.5': 
Counting objects: 4, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 305 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: 
remote: To create a merge request for lzz, visit:
remote:   http://192.168.100.5/liuyuhao/test/-/merge_requests/new?merge_request%5Bsource_branch%5D=lzz
remote: 
To http://192.168.100.5/liuyuhao/test.git
   aac72a4..da2e3f1  lzz -&gt; lzz
</code></pre> 
<p>在gitlab仓库的项目查看</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/62/5e/iLPPWqhR_o.png" width="1200"><img alt="" height="315" src="https://images2.imgbox.com/dd/b8/IY4QJg0I_o.png" width="1200"></p> 
<h3 id="%C2%A0%E9%A1%B9%E7%9B%AE%E5%90%88%E5%B9%B6">项目合并</h3> 
<p>方法一：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/e3/98/H08VyuUV_o.png" width="1200"></p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/97/a5/xjiiQj8L_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/cb/4b/vR62nfLf_o.png" width="1200"></p> 
<p><img alt="" height="644" src="https://images2.imgbox.com/3f/75/cO5sxCJx_o.png" width="1200"></p> 
<p><img alt="" height="794" src="https://images2.imgbox.com/f7/53/UtpwLXmA_o.png" width="1200"></p> 
<p> main主分支就有123.txt了</p> 
<p><img alt="" height="810" src="https://images2.imgbox.com/53/7d/VeSjRRUO_o.png" width="1200"></p> 
<p>方法二：在linux上操作</p> 
<pre><code class="language-bash">#切换到lyh分支
[root@localhost test]# git checkout zmy
切换到分支 'zmy'

#内容随意
[root@localhost test]# vim lzz.txt

#上传
git add .
git commit  -m "add lzz.txt"
git push origin zmy

#切换至main
git checkout main 

#合并
git merge zmy

#上传
git push -u origin main
</code></pre> 
<h3 id="%C2%A0%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C">回滚操作</h3> 
<p>删除没用的文件 </p> 
<p><img alt="" height="403" src="https://images2.imgbox.com/61/2b/M1ej6xc7_o.png" width="1200"></p> 
<p><img alt="" height="223" src="https://images2.imgbox.com/d3/d6/5QuDKxeR_o.png" width="1200"></p> 
<p> lzz里面是合并前的文件，main里面是合并后的文件。</p> 
<p>现在网站发布的是合并后的网页（即2.0），现在2.0出现问题了，想让网站发布合并前的网站（1.0）</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/61/1d/0T4sgiBI_o.png" width="1200"></p> 
<p><img alt="" height="416" src="https://images2.imgbox.com/90/00/hO9RvN4r_o.png" width="1200"></p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/5c/4b/ZiiaygYc_o.png" width="1200"></p> 
<pre><code class="language-bash">#在jenkins服务器上
#写脚本
vim test.sh
#!/bin/bash
cd /root
git clone -b lzz git@192.168.100.5:liuyuhao/test.git
cd /root/test
scp -r ./* root@192.168.100.10:/var/www/html

#给予权限
chmod 777 test.sh 

#手动执行
[root@localhost ~]# ./test.sh 
正克隆到 'test'...
remote: Enumerating objects: 59, done.
remote: Counting objects: 100% (39/39), done.
remote: Compressing objects: 100% (26/26), done.
remote: Total 59 (delta 5), reused 0 (delta 0), pack-reused 20
接收对象中: 100% (59/59), 7.72 KiB | 0 bytes/s, done.
处理 delta 中: 100% (7/7), done.
index.html                                                100%   16     7.2KB/s   00:00    </code></pre> 
<p><img alt="" height="318" src="https://images2.imgbox.com/f5/64/ddP4z1LN_o.png" width="1200">回滚成功！</p> 
<p> </p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/49f49b68e89d301de95c09e641f1c3ff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java反序列化漏洞及实例详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03d3e10f072ae25d491b55767b4fc37e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Deep learning</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>