<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>openGL中绕任意轴旋转 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="openGL中绕任意轴旋转" />
<meta property="og:description" content="openGL中绕任意轴旋转 1 代码2 参考文献： 直接上代码,具体细节请看参考文献部分
1 代码 glm::mat4 RotateArbitraryLine(glm::vec3 v1, glm::vec3 v2, float theta) 第一个参数v1是旋转轴的尾部，第二个参数v2是旋转轴的头部，第三个参数theta是绕v1v2轴的角度; //绕任意轴的旋转 glm::mat4 RotateArbitraryLine(glm::vec3 v1, glm::vec3 v2, float theta) { glm::mat4 rmatrix; float a = v1.x; float b = v1.y; float c = v1.z; glm::vec3 p1 = v2 - v1; glm::vec3 p = glm::normalize(p1); float u = p.x; float v = p.y; float w = p.z; float uu = u * u; float uv = u * v; float uw = u * w; float vv = v * v; float vw = v * w; float ww = w * w; float au = a * u; float av = a * v; float aw = a * w; float bu = b * u; float bv = b * v; float bw = b * w; float cu = c * u; float cv = c * v; float cw = c * w; float costheta = glm::cos(theta); float sintheta = glm::sin(theta); rmatrix[0][0] = uu &#43; (vv &#43; ww) * costheta; rmatrix[0][1] = uv * (1 - costheta) &#43; w * sintheta; rmatrix[0][2] = uw * (1 - costheta) - v * sintheta; rmatrix[0][3] = 0; rmatrix[1][0] = uv * (1 - costheta) - w * sintheta; rmatrix[1][1] = vv &#43; (uu &#43; ww) * costheta; rmatrix[1][2] = vw * (1 - costheta) &#43; u * sintheta; rmatrix[1][3] = 0; rmatrix[2][0] = uw * (1 - costheta) &#43; v * sintheta; rmatrix[2][1] = vw * (1 - costheta) - u * sintheta; rmatrix[2][2] = ww &#43; (uu &#43; vv) * costheta; rmatrix[2][3] = 0; rmatrix[3][0] = (a * (vv &#43; ww) - u * (bv &#43; cw)) * (1 - costheta) &#43; (bw - cv) * sintheta; rmatrix[3][1] = (b * (uu &#43; ww) - v * (au &#43; cw)) * (1 - costheta) &#43; (cu - aw) * sintheta; rmatrix[3][2] = (c * (uu &#43; vv) - w * (au &#43; bv)) * (1 - costheta) &#43; (av - bu) * sintheta; rmatrix[3][3] = 1; return rmatrix; } 2 参考文献： https://www." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f0f62f675a3ae96216852820b2a5a04e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-02T09:47:49+08:00" />
<meta property="article:modified_time" content="2019-12-02T09:47:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">openGL中绕任意轴旋转</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>openGL中绕任意轴旋转</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1 代码</a></li><li><a href="#2__71" rel="nofollow">2 参考文献：</a></li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>直接上代码,具体细节请看参考文献部分</p> 
</blockquote> 
<h2><a id="1__2"></a>1 代码</h2> 
<pre><code class="prism language-cpp">glm<span class="token operator">::</span>mat4 <span class="token function">RotateArbitraryLine</span><span class="token punctuation">(</span>glm<span class="token operator">::</span>vec3 v1<span class="token punctuation">,</span> glm<span class="token operator">::</span>vec3 v2<span class="token punctuation">,</span> <span class="token keyword">float</span> theta<span class="token punctuation">)</span>
</code></pre> 
<ol><li>第一个参数v1是旋转轴的尾部，</li><li>第二个参数v2是旋转轴的头部，</li><li>第三个参数theta是绕v1v2轴的角度;</li></ol> 
<pre><code class="prism language-cpp"><span class="token comment">//绕任意轴的旋转</span>
glm<span class="token operator">::</span>mat4 <span class="token function">RotateArbitraryLine</span><span class="token punctuation">(</span>glm<span class="token operator">::</span>vec3 v1<span class="token punctuation">,</span> glm<span class="token operator">::</span>vec3 v2<span class="token punctuation">,</span> <span class="token keyword">float</span> theta<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	glm<span class="token operator">::</span>mat4 rmatrix<span class="token punctuation">;</span>
	<span class="token keyword">float</span> a <span class="token operator">=</span> v1<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
	<span class="token keyword">float</span> b <span class="token operator">=</span> v1<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
	<span class="token keyword">float</span> c <span class="token operator">=</span> v1<span class="token punctuation">.</span>z<span class="token punctuation">;</span>

	glm<span class="token operator">::</span>vec3 p1 <span class="token operator">=</span> v2 <span class="token operator">-</span> v1<span class="token punctuation">;</span>
	glm<span class="token operator">::</span>vec3 p <span class="token operator">=</span> glm<span class="token operator">::</span><span class="token function">normalize</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> u <span class="token operator">=</span> p<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
	<span class="token keyword">float</span> v <span class="token operator">=</span> p<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
	<span class="token keyword">float</span> w <span class="token operator">=</span> p<span class="token punctuation">.</span>z<span class="token punctuation">;</span>

	<span class="token keyword">float</span> uu <span class="token operator">=</span> u <span class="token operator">*</span> u<span class="token punctuation">;</span>
	<span class="token keyword">float</span> uv <span class="token operator">=</span> u <span class="token operator">*</span> v<span class="token punctuation">;</span>
	<span class="token keyword">float</span> uw <span class="token operator">=</span> u <span class="token operator">*</span> w<span class="token punctuation">;</span>
	<span class="token keyword">float</span> vv <span class="token operator">=</span> v <span class="token operator">*</span> v<span class="token punctuation">;</span>
	<span class="token keyword">float</span> vw <span class="token operator">=</span> v <span class="token operator">*</span> w<span class="token punctuation">;</span>
	<span class="token keyword">float</span> ww <span class="token operator">=</span> w <span class="token operator">*</span> w<span class="token punctuation">;</span>
	<span class="token keyword">float</span> au <span class="token operator">=</span> a <span class="token operator">*</span> u<span class="token punctuation">;</span>
	<span class="token keyword">float</span> av <span class="token operator">=</span> a <span class="token operator">*</span> v<span class="token punctuation">;</span>
	<span class="token keyword">float</span> aw <span class="token operator">=</span> a <span class="token operator">*</span> w<span class="token punctuation">;</span>
	<span class="token keyword">float</span> bu <span class="token operator">=</span> b <span class="token operator">*</span> u<span class="token punctuation">;</span>
	<span class="token keyword">float</span> bv <span class="token operator">=</span> b <span class="token operator">*</span> v<span class="token punctuation">;</span>
	<span class="token keyword">float</span> bw <span class="token operator">=</span> b <span class="token operator">*</span> w<span class="token punctuation">;</span>
	<span class="token keyword">float</span> cu <span class="token operator">=</span> c <span class="token operator">*</span> u<span class="token punctuation">;</span>
	<span class="token keyword">float</span> cv <span class="token operator">=</span> c <span class="token operator">*</span> v<span class="token punctuation">;</span>
	<span class="token keyword">float</span> cw <span class="token operator">=</span> c <span class="token operator">*</span> w<span class="token punctuation">;</span>

	<span class="token keyword">float</span> costheta <span class="token operator">=</span> glm<span class="token operator">::</span><span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> sintheta <span class="token operator">=</span> glm<span class="token operator">::</span><span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span>

	rmatrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> uu <span class="token operator">+</span> <span class="token punctuation">(</span>vv <span class="token operator">+</span> ww<span class="token punctuation">)</span> <span class="token operator">*</span> costheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> uv <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> w <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> uw <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">-</span> v <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	rmatrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> uv <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">-</span> w <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> vv <span class="token operator">+</span> <span class="token punctuation">(</span>uu <span class="token operator">+</span> ww<span class="token punctuation">)</span> <span class="token operator">*</span> costheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> vw <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> u <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	rmatrix<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> uw <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> v <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> vw <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">-</span> u <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> ww <span class="token operator">+</span> <span class="token punctuation">(</span>uu <span class="token operator">+</span> vv<span class="token punctuation">)</span> <span class="token operator">*</span> costheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	rmatrix<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">*</span> <span class="token punctuation">(</span>vv <span class="token operator">+</span> ww<span class="token punctuation">)</span> <span class="token operator">-</span> u <span class="token operator">*</span> <span class="token punctuation">(</span>bv <span class="token operator">+</span> cw<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bw <span class="token operator">-</span> cv<span class="token punctuation">)</span> <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>b <span class="token operator">*</span> <span class="token punctuation">(</span>uu <span class="token operator">+</span> ww<span class="token punctuation">)</span> <span class="token operator">-</span> v <span class="token operator">*</span> <span class="token punctuation">(</span>au <span class="token operator">+</span> cw<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>cu <span class="token operator">-</span> aw<span class="token punctuation">)</span> <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">*</span> <span class="token punctuation">(</span>uu <span class="token operator">+</span> vv<span class="token punctuation">)</span> <span class="token operator">-</span> w <span class="token operator">*</span> <span class="token punctuation">(</span>au <span class="token operator">+</span> bv<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> costheta<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>av <span class="token operator">-</span> bu<span class="token punctuation">)</span> <span class="token operator">*</span> sintheta<span class="token punctuation">;</span>
	rmatrix<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> rmatrix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="2__71"></a>2 参考文献：</h2> 
<p><a href="https://www.cnblogs.com/graphics/archive/2012/08/10/2627458.html" rel="nofollow">https://www.cnblogs.com/graphics/archive/2012/08/10/2627458.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84a540e0935db65a1bf05072b2f933a4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js阻止ajax表单提交。出现表单数据无法提交，出现页面打开后回调函数自动执行的可能原因和解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2d3f37e6a689f3d6e7efb7515d45babb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决There is no getter for property named in class java.lang.String</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>