<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx加载静态资源；反向代理实现负载均衡 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx加载静态资源；反向代理实现负载均衡" />
<meta property="og:description" content="一、加载静态资源 Nginx命令 cd /usr/local/nginx/sbin
./nginx -v 查看版本号
./nginx -t 检查配置文件nginx/conf/nginx.conf文件
【启动和停止】
./nginx 启动服务
./nginx -s stop 停止服务
ps -ef | grep nginx 查看进程
./nginx -s reload 重新加载配置文件
【nginx.conf配置】
全局块 nginx相关
events块 网络连接相关
http
-全局
-server 配置端口号；后续也可以用来配置负载均衡
-location 配置加载静态资源的路径和html和index
加载静态资源 把静态资源复制到/usr/local/nginx/html下，配置conf文件中的加载路径和server端口 即可访问
二、反向代理 正向代理： 一个位于客户端和原始服务器之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求，并指定目标（原始服务器），然后代理向原始服务器提交请求，并将获得的内容返回给客户端。
正向代理的典型用途：在防火墙内的局域网客户端提供方位Internet的途径
在客户端设置代理服务器，通过代理服务器转发请求，最终访问到目标服务器
(客户端 正向代理服务器）Web服务器
反向代理： 位于用户与目标服务器之间，但是对于用户而言，反向代理服务器相当于目标服务器，用户直接访问反向代理服务器就可以获得目标服务器的资源，反向代理服务器负责将请求转发给目标服务器；
用户不需要知道目标服务器的地址，也无须在用户端做任何设定
反向代理隐藏了真正的目标服务器
(客户端）（反向代理服务器 Web服务器)
具体应用 在反向代理服务器的nginx的conf中配置server，将82端口的请求发送到101这台机器的8080端口
三、负载均衡 单点故障问题-&gt;多台服务器组成应用集群 水平扩展性能 避免单点故障出现
应用集群：将同一应用部署到多台机器上，组成应用集群，接受负载均衡器发送的请求，进行业务处理并返回响应数据负载均衡器：将用户请求根据对应的负载均衡算法分发到应用集群中的一台服务器进行处理
具体应用 用upstream指定一组服务器，配置在proxy pass中
配置nginx的服务器充当一个负载均衡器，分发请求给服务器
负载均衡算法 weight越大，被分发请求的概率越大
ip_hash url_hash 分别是通过ip和url计算hash值进行请求分发，只要ip、url不变，分发的服务器也不变" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/98f70ddd76881b84450b8e9055ff1cfb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-16T00:03:00+08:00" />
<meta property="article:modified_time" content="2023-03-16T00:03:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx加载静态资源；反向代理实现负载均衡</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一、加载静态资源</h3> 
<h4><a id="Nginx_1"></a>Nginx命令</h4> 
<p>cd /usr/local/nginx/sbin<br> ./nginx -v 查看版本号<br> ./nginx -t 检查配置文件nginx/conf/nginx.conf文件<br> 【启动和停止】<br> ./nginx 启动服务<br> ./nginx -s stop 停止服务<br> ps -ef | grep nginx 查看进程<br> ./nginx -s reload 重新加载配置文件<br> 【nginx.conf配置】<br> 全局块 nginx相关<br> events块 网络连接相关<br> http<br> -全局<br> -server 配置端口号；后续也可以用来配置负载均衡<br> -location 配置加载静态资源的路径和html和index</p> 
<h4><a id="_17"></a>加载静态资源</h4> 
<p>把静态资源复制到/usr/local/nginx/html下，配置conf文件中的加载路径和server端口 即可访问</p> 
<h3><a id="_20"></a>二、反向代理</h3> 
<h5><a id="_21"></a>正向代理：</h5> 
<p>一个位于客户端和原始服务器<strong>之间</strong>的<strong>服务器</strong>，为了从原始服务器取得内容，客户端向代理发送一个请求，并指定目标（原始服务器），然后<strong>代理向原始服务器提交请求</strong>，并将<strong>获得的内容返回给客户端</strong>。<br> 正向代理的典型用途：在防火墙内的局域网客户端提供方位Internet的途径<br> <mark>在客户端设置代理服务器，通过代理服务器转发请求，最终访问到目标服务器</mark><br> (客户端 正向代理服务器）Web服务器<br> <img src="https://images2.imgbox.com/48/c4/bnk2ejUa_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_28"></a>反向代理：</h5> 
<p>位于用户与目标服务器<strong>之间</strong>，但是对于用户而言，<strong>反向代理服务器相当于目标服务器</strong>，用户直接访问反向代理服务器就可以获得目标服务器的资源，反向代理服务器负责将请求转发给目标服务器；<br> <mark>用户不需要知道目标服务器的地址，也无须在用户端做任何设定</mark><br> 反向代理隐藏了真正的目标服务器<br> (客户端）（反向代理服务器 Web服务器)<br> <img src="https://images2.imgbox.com/5f/08/lRoNAmYF_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_34"></a>具体应用</h4> 
<p>在反向代理服务器的nginx的conf中配置server，将82端口的请求发送到101这台机器的8080端口<br> <img src="https://images2.imgbox.com/70/c4/ddfSvO4J_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_37"></a>三、负载均衡</h3> 
<p>单点故障问题-&gt;多台服务器组成应用集群 水平扩展性能 避免单点故障出现</p> 
<ul><li>应用集群：将同一应用部署到多台机器上，组成应用集群，<strong>接受负载均衡器发送的请求</strong>，进行业务处理并返回响应数据</li><li>负载均衡器：将用户请求根据对应的<strong>负载均衡算法</strong>分发到应用集群中的一台服务器进行处理<br> <img src="https://images2.imgbox.com/cd/23/LIOfKbyn_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="_42"></a>具体应用</h4> 
<p>用upstream指定一组服务器，配置在proxy pass中<br> 配置nginx的服务器充当一个负载均衡器，分发请求给服务器<br> <img src="https://images2.imgbox.com/12/07/CezBc557_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_46"></a>负载均衡算法</h4> 
<p><img src="https://images2.imgbox.com/da/97/fnpVPAJm_o.png" alt="在这里插入图片描述"><br> weight越大，被分发请求的概率越大<br> <img src="https://images2.imgbox.com/bf/df/gAV9doVH_o.png" alt="在这里插入图片描述"><br> ip_hash url_hash 分别是通过ip和url计算hash值进行请求分发，只要ip、url不变，分发的服务器也不变</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/140996ccf530dfcfd0498c9b73e63e30/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git上传文件到指定仓库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/714ad0bc29b50415d4fadb02b64e072f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CSS--弹性布局（Flex-Layout）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>