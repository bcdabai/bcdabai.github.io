<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Thinkphp中的 I 函数（Thinkphp3.2.3版本） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Thinkphp中的 I 函数（Thinkphp3.2.3版本）" />
<meta property="og:description" content="Thinkphp中的 I 函数（Thinkphp3.2.3版本） I 函数的作用是获取系统变量，必要时还可以对变量值进行过滤及强制转化，I 函数的语法格式：
I(&#39;变量类型.变量名/修饰符&#39;,[&#39;默认值&#39;],[&#39;过滤方法或正则&#39;],[&#39;额外数据源&#39;]) 一、获取变量
在PHP中获取变量值的方法有很多，比如：$_GET[&#39;变量名&#39;]，$_POST[&#39;变量名&#39;]，$_SESSION[&#39;变量名&#39;]，$_COOKIE[&#39;变量名&#39;]，$_SERVER[&#39;变量名&#39;] 都可以获取相应的变量值，但在thinkphp中为了安全的原因建议统一使用 I 函数来获取变量值。例如：获取 URL 地址栏中参数 id 的值，在php中我们用 $_GET[&#39;id&#39;] 来获取，在thinkphp中我们可以用 I(&#39;get.id&#39;) 来获取。同样的， $_POST[&#39;id&#39;] 就用 I(&#39;post.id&#39;) 取代，I 函数的语法格式中的变量类型就是指的像 get 和 post 之类的请求方式，类似的变量类型还包括：
变量类型含义get获取GET参数post获取POST参数param自动判断请求类型获取GET、POST或者PUT参数request获取REQUEST 参数put获取PUT 参数session获取 $_SESSION 参数cookie获取 $_COOKIE 参数server获取 $_SERVER 参数globals获取 $GLOBALS参数path获取 PATHINFO模式的URL参数data获取 其他类型的参数，需要配合额外数据源参数 如果要获取的变量类型是get、post 或 put，可以统一用 param 变量类型，param 变量类型是框架特有的支持自动判断当前请求类型的变量获取方式，例如：I(&#39;param.id&#39;) ，如果当前请求类型是GET，那么等效于 $_GET[&#39;id&#39;]，如果当前请求类型是POST或者PUT，那么相当于获取 $_POST[&#39;id&#39;] 或者 PUT参数id。而事实上当 I 函数获取的变量类型是param时变量类型可以省略直接写为：I(&#39;变量名&#39;) ，那么 $_GET[&#39;id&#39;]、$_POST[&#39;id&#39;] 都可以简写为：I(&#39;id&#39;) 。但当变量类型为其他类型时就不能这么简写，比如 I(&#39;cookie.id&#39;)、I(&#39;session.id&#39;)就不能简写。
注意：I 函数的变量类型不区分大小写，但变量名严格区分大小写，比如 I(&#39;get.id&#39;) 可以写成 I(&#39;GET.id&#39;)，但不能写成 I(&#39;get.ID&#39;)
二、变量过滤
I 函数本身默认的过滤机制是 htmlspecialchars，因为在配置文件中配置了：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2d0db78274f5f790bff7d02e8c2e98ba/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-23T10:58:30+08:00" />
<meta property="article:modified_time" content="2021-04-23T10:58:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Thinkphp中的 I 函数（Thinkphp3.2.3版本）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a href="https://www.cnblogs.com/programs/p/5490151.html" rel="nofollow" id="cb_post_title_url">Thinkphp中的 I 函数（Thinkphp3.2.3版本）</a></h2> 
<p>I 函数的作用是获取系统变量，必要时还可以对变量值进行过滤及强制转化，I 函数的语法格式：</p> 
<pre>I('变量类型.变量名/修饰符',['默认值'],['过滤方法或正则'],['额外数据源'])</pre> 
<p> </p> 
<p><strong>一、获取变量</strong></p> 
<p>在PHP中获取变量值的方法有很多，比如：$_GET['变量名']，$_POST['变量名']，$_SESSION['变量名']，$_COOKIE['变量名']，$_SERVER['变量名'] 都可以获取相应的变量值，但在thinkphp中为了安全的原因建议统一使用 I 函数来获取变量值。例如：获取 URL 地址栏中参数 id 的值，在php中我们用 $_GET['id'] 来获取，在thinkphp中我们可以用<strong> I('get.id')</strong> 来获取。同样的， $_POST['id'] 就用<strong> I('post.id')</strong> 取代，I 函数的语法格式中的变量类型就是指的像 get 和 post 之类的请求方式，类似的变量类型还包括：</p> 
<table><thead><tr><th>变量类型</th><th>含义</th></tr></thead><tbody><tr><td>get</td><td>获取GET参数</td></tr><tr><td>post</td><td>获取POST参数</td></tr><tr><td>param</td><td>自动判断请求类型获取GET、POST或者PUT参数</td></tr><tr><td>request</td><td>获取REQUEST 参数</td></tr><tr><td>put</td><td>获取PUT 参数</td></tr><tr><td>session</td><td>获取 $_SESSION 参数</td></tr><tr><td>cookie</td><td>获取 $_COOKIE 参数</td></tr><tr><td>server</td><td>获取 $_SERVER 参数</td></tr><tr><td>globals</td><td>获取 $GLOBALS参数</td></tr><tr><td>path</td><td>获取 PATHINFO模式的URL参数</td></tr><tr><td>data</td><td>获取 其他类型的参数，需要配合额外数据源参数</td></tr></tbody></table> 
<p>如果要获取的变量类型是get、post 或 put，可以统一用 param 变量类型，param 变量类型是框架特有的支持自动判断当前请求类型的变量获取方式，例如：<strong>I('param.id')</strong> ，如果当前请求类型是GET，那么等效于 $_GET['id']，如果当前请求类型是POST或者PUT，那么相当于获取 $_POST['id'] 或者 PUT参数id。而事实上当 I 函数获取的变量类型是param时变量类型可以省略直接写为：<strong>I('变量名')</strong> ，那么 $_GET['id']、$_POST['id'] 都可以简写为：<strong>I('id')</strong> 。但当变量类型为其他类型时就不能这么简写，比如 I('cookie.id')、I('session.id')就不能简写。</p> 
<p><strong>注意：I 函数的变量类型不区分大小写，但变量名严格区分大小写，比如 I('get.id') 可以写成 I('GET.id')，但不能写成 I('get.ID')</strong></p> 
<p> </p> 
<p><strong>二、变量过滤</strong></p> 
<p>I 函数本身默认的过滤机制是 htmlspecialchars，因为在配置文件中配置了：</p> 
<pre>// 系统默认的变量过滤机制
'DEFAULT_FILTER'        =&gt; 'htmlspecialchars'</pre> 
<p>所以 I('post.变量名') 就等同于 htmlspecialchars($_POST('变量名'))，如果 I 函数自身带了过滤方法，则用自身带的过滤机制过滤变量，比如：</p> 
<pre>I('post.email','请输入正确的email地址',FILTER_VALIDATE_EMAIL);</pre> 
<p>表示会对<code>$_POST['email']</code> 进行格式验证判断是否符合 email 的格式要求，如果不符合的话，返回提示信息。上面的代码也可以简化：</p> 
<pre>I('post.email','请输入正确的email地址','email')</pre> 
<p>请注意，上面的 FILTER_VALIDATE_EMAIL 是不带引号的，下面的 email 是带引号的。</p> 
<p>像上面 email 那样简写的过滤方法名必须是 <code>filter_list</code>方法中的有效值（不同的服务器环境可能有所不同），可能支持的包括：</p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/f5/8a/oYeEwGCZ_o.png"></p> 
<pre>int
boolean
float
validate_regexp
validate_url
validate_email
validate_ip
string
stripped
encoded
special_chars
unsafe_raw
email
url
number_int
number_float
magic_quotes
callback</pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/09/e7/LXMTwYZ5_o.png"></p> 
<p>但我发现用简写的过滤名有时也会出现问题，我在我的笔记本上测试 print_r(filter_list()) 是包含 email 的，但 I('email','请输入正确的email地址','email') 却不能正确判断，改成 I('email','请输入正确的email地址',FILTER_VALIDATE_EMAIL) 就没问题。 </p> 
<p>I 函数的过滤方法也能支持正则表达式，如果要过滤的方法比较复制的话可以考虑使用正则表达式。在有些特殊的情况下，我们不希望进行任何过滤，即使<strong>DEFAULT_FILTER</strong>已经有所设置，可以使用：</p> 
<pre>// 下面两种方式都不采用任何过滤方法
I('get.name','','');
I('get.id','',false);</pre> 
<p> </p> 
<p><strong>三、变量修饰符</strong></p> 
<p>变量修饰符和变量名称之间用“/”分割开来，变量修饰符的作用是强制转化变量的字符类型，比如：</p> 
<pre>I('get.id/d'); // 强制变量转换为整型
I('post.name/s'); // 强制转换变量为字符串类型
I('post.ids/a'); // 强制变量转换为数组类型</pre> 
<p>可以使用的修饰符包括：</p> 
<table><thead><tr><th>修饰符</th><th>作用</th></tr></thead><tbody><tr><td>s</td><td>强制转换为字符串类型</td></tr><tr><td>d</td><td>强制转换为整型类型</td></tr><tr><td>b</td><td>强制转换为布尔类型</td></tr><tr><td>a</td><td>强制转换为数组类型</td></tr><tr><td>f</td><td>强制转换为浮点类型</td></tr></tbody></table> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c7caf987dac7bd1b9fe6bdb9f72e4b8f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在项目中将打印日志保存到本地</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a241e2cd977b2fa1eaaa19a20a7f6d86/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电脑突然经常死机？（ubuntu系统如何检查原因）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>