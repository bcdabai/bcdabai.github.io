<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>音乐播放器微信小程序 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="音乐播放器微信小程序" />
<meta property="og:description" content="一：学习目标：
掌握swiper组件、scroll-view组件的使用；掌握image组件的使用；掌握slider组件的使用；掌握音频API的使用； 二：目录：
1. 开发前的准备
1.1 音乐小程序项目展示：
1.1.1：音乐推荐界面展示：
1.1.2：播放器界面展示：
1.1.3：播放列表界面展示：
1.2：项目分析：
①：音乐播放器项目（项目结构图）
tab导航栏 content内容区 player音乐播放控件 ②：音乐播放器小程序项目主要文件：
app.js：应用程序的逻辑文件app.json：应用程序的配置文件pages/index/index1.js：index页面的逻辑文件pages/index/index1.json：index页面的配置文件pages/index/index1.wxss：index页面的样式文件pages/index/index1.wxml：index页面的结构文件pages/index/info.wxml：“音乐推荐”标签页的结构文件pages/index/play.wxml：“播放器”标签页的结构文件pages/index/playlist.wxml：“播放列表”标签页的结构文件images：图片文件 1.3：项目初始化：
开发者工具创建项目：
2. 标签页切换 2.1：任务分析：
标签页和页面结构图：
2.2 前导知识：
swiper组件常用属性：
可选值
说明
默认
indicator-dots
Boolean
是否显示面板指示点，默认为false
indicator-color
Color
指示点颜色，默认为rgba(0,0,0,.3)
indicator-active-color
Color
当前选中的指示点颜色，默认为#000000
autoplay
Boolean
是否自动切换，默认为false
current
Number
当前所在滑块的index，默认为0
current-item-id
String
当前所在滑块的item-id（不能同时指定current）
interval
Number
自动切换时间间隔（毫秒），默认为5000
duration
Number
滑动动画时长（毫秒），默认为500
circular
Boolean
是否采用衔接滑动，默认为false
vertical
Boolean
滑动方向是否为纵向，默认为false
bindchange
EventHandle
current改变时会触发change事件
swiper组件编写滑动页面结构 index1.wxml（本项目已完成，无此项代码）
③：include主要用途：
将代码拆分到多个文件中，可以更方便地查找代码。将代码公共部分抽取出来。通过外部文件引入。 ④：编写页面结构和样式-tab导航栏 2.3 编写页面结构和样式 ：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/510348cf06c70bd3556ee43bb3e04ada/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-18T00:48:42+08:00" />
<meta property="article:modified_time" content="2022-12-18T00:48:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">音乐播放器微信小程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>一：学习目标：</strong></p> 
<ol><li style="margin-left:.0001pt;text-align:justify;">掌握swiper组件、scroll-view组件的使用；</li><li style="margin-left:.0001pt;text-align:justify;">掌握image组件的使用；</li><li style="margin-left:.0001pt;text-align:justify;">掌握slider组件的使用；</li><li style="margin-left:.0001pt;text-align:justify;">掌握音频API的使用；</li></ol> 
<p><strong> 二：目录：</strong></p> 
<p><img alt="" src="https://images2.imgbox.com/ce/79/DhNwW4mX_o.png"></p> 
<p></p> 
<p><strong>1. 开发前的准备</strong></p> 
<p><strong>1.1 音乐小程序</strong>项目展示<strong>：</strong></p> 
<p>1.1.1：<strong>音乐推荐</strong>界面展示：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/9d/6c/DsfdmIRb_o.png"></p> 
<p></p> 
<p>1.1.2：<strong>播放器</strong>界面展示：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/3e/3f/ykR9pW23_o.png"></p> 
<p></p> 
<p>1.1.3：<strong>播放列表</strong>界面展示：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/f4/4d/ToN5rw9e_o.png"></p> 
<p></p> 
<p><strong>1.2：</strong>项目<strong>分析：</strong></p> 
<p><strong>①：</strong>音乐播放器项目<strong>（项目结构图）</strong></p> 
<ul><li><strong>tab</strong>导航栏<strong> </strong></li><li><strong>content</strong>内容区<strong> </strong></li><li><strong>player</strong>音乐播放控件</li></ul> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e9/22/8mgNiU6F_o.png"></p> 
<p><strong> ②：</strong>音乐播放器<strong>小程序</strong>项目<strong>主要文件</strong>：</p> 
<ul><li><strong>app.js</strong>：应用程序的逻辑文件</li><li><strong>app.json</strong>：应用程序的配置文件</li><li><strong>pages/index/index1.js</strong>：index页面的逻辑文件</li><li><strong>pages/index/index1.json</strong>：index页面的配置文件</li><li><strong>pages/index/index1.wxss</strong>：index页面的样式文件</li><li><strong>pages/index/index1.wxml</strong>：index页面的结构文件</li><li><strong>pages/index/info.wxml</strong>：“音乐推荐”标签页的结构文件</li><li><strong>pages/index/play.wxml</strong>：“播放器”标签页的结构文件</li><li><strong>pages/index/playlist.wxml</strong>：“播放列表”标签页的结构文件</li><li><strong>images</strong>：图片文件</li></ul> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/56/d3/jFEfuVgz_o.png"></p> 
<p> <strong>1.3：</strong>项目初始化<strong>：</strong></p> 
<p>开发者工具创建项目：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/74/2d/SrOJh7AJ_o.png"></p> 
<p><strong>2. 标签页切换 </strong></p> 
<p><strong>2.1：</strong>任务分析：</p> 
<p>标签页和页面结构图：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/92/41/hF9mA0mu_o.png"></p> 
<p><strong>2.2 </strong>前导知识：</p> 
<p>swiper组件常用属性：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>可选值</p> </td><td> <p>说明</p> </td><td> <p>默认</p> </td></tr><tr><td> <p>indicator-dots</p> </td><td> <p>Boolean</p> </td><td> <p>是否显示面板指示点，默认为false</p> </td></tr><tr><td> <p>indicator-color</p> </td><td> <p>Color</p> </td><td> <p>指示点颜色，默认为rgba(0,0,0,.3)</p> </td></tr><tr><td> <p>indicator-active-color</p> </td><td> <p>Color</p> </td><td> <p>当前选中的指示点颜色，默认为#000000</p> </td></tr><tr><td> <p>autoplay</p> </td><td> <p>Boolean</p> </td><td> <p>是否自动切换，默认为false</p> </td></tr><tr><td> <p>current</p> </td><td> <p>Number</p> </td><td> <p>当前所在滑块的index，默认为0</p> </td></tr><tr><td> <p>current-item-id</p> </td><td> <p>String</p> </td><td> <p>当前所在滑块的item-id（不能同时指定current）</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>interval</p> </td><td> <p>Number</p> </td><td> <p>自动切换时间间隔（毫秒），默认为5000</p> </td></tr><tr><td> <p>duration</p> </td><td> <p>Number</p> </td><td> <p>滑动动画时长（毫秒），默认为500</p> </td></tr><tr><td> <p>circular</p> </td><td> <p>Boolean</p> </td><td> <p>是否采用衔接滑动，默认为false</p> </td></tr><tr><td> <p>vertical</p> </td><td> <p>Boolean</p> </td><td> <p>滑动方向是否为纵向，默认为false</p> </td></tr><tr><td> <p>bindchange</p> </td><td> <p>EventHandle</p> </td><td> <p>current改变时会触发change事件</p> </td></tr></tbody></table> 
<p>swiper组件编写滑动页面结构 index1.wxml（本项目已完成，无此项代码）</p> 
<p><strong>③：include</strong>主要用途：</p> 
<ul><li>将代码拆分到多个文件中，可以更方便地查找代码。</li><li>将代码公共部分抽取出来。通过外部文件引入。</li></ul> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4e/91/eEThRrmg_o.png"></p> 
<p><strong>④：</strong>编写页面结构和样式-tab导航栏  </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/02/73/Wegyr6cf_o.png"></p> 
<p><strong> 2.3</strong> 编写页面结构和样式 ：</p> 
<p><strong>①：</strong>音乐小程序基础页面和样式：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c0/13/IiYUlgv1_o.png"></p> 
<p><strong>②：</strong>音乐小程序基础页面和样式-tab导航的样式：</p> 
<p><img alt="" src="https://images2.imgbox.com/17/0f/qGDTWHQC_o.png"></p> 
<p> tab导航样式效果：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/60/a7/CXC3Xopv_o.png"></p> 
<p><strong> 2.4：</strong>实现标签页切换：</p> 
<p>单击导航栏选项卡实现标签页切换（js）：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/2c/f8/HQy2hKQc_o.png"></p> 
<p>通过滚动事件切换页面效果（js）：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/0a/cb/Ps2Expa0_o.png"></p> 
<p> 效果：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/18/30/02QmuB2H_o.png"></p> 
<p><strong> 3. 音乐推荐</strong></p> 
<p><strong>3.1</strong> 任务分析</p> 
<p>音乐推荐页面结构图：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/97/ad/I0RHcHBZ_o.png"></p> 
<p><strong>3.2 </strong>前导知识 </p> 
<p>image组件属性及说明：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>可选值</p> </td><td> <p>说明</p> </td><td> <p>默认</p> </td></tr><tr><td> <p>src</p> </td><td> <p>String</p> </td><td> <p>图片资源地址</p> </td></tr><tr><td> <p>mode</p> </td><td> <p>String</p> </td><td> <p>图片裁剪、缩放的模式，默认为'scaleToFill'</p> </td></tr><tr><td> <p>lazy-load</p> </td><td> <p>Boolean</p> </td><td> <p>图片是否懒加载，默认为false。只针对page与scroll-view下的image有效</p> </td></tr><tr><td> <p>binderror</p> </td><td> <p>HandleEvent</p> </td><td> <p>图片发生错误时的事件</p> </td></tr><tr><td> <p>bindload</p> </td><td> <p>HandleEvent</p> </td><td> <p>图片载入完成时的事件</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>scaleToFill</p> </td><td> <p>不保持纵横比缩放图片，使图片的宽高完全拉伸至填满image元素。适用于容器与图片宽高比相同的情况，如果不同，图片会变形。</p> </td></tr><tr><td> <p>aspectFit</p> </td><td> <p>保持纵横比缩放图片，使图片的长边能完全显示出来。适用于将图片完整显示出来。例如，详情页的图片</p> </td></tr><tr><td> <p>aspectFill</p> </td><td> <p>保持纵横比缩放图片，只保证图片的短边能完全显示出来，长边将会发生截取。适用于容器固定，图片自动缩放的情况，如列表页的缩略图</p> </td></tr><tr><td> <p>widthFix</p> </td><td> <p>宽度不变，高度自动变化，保持原图宽高比不变</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>top</p> </td><td> <p>不缩放图片，只显示图片的顶部区域</p> </td></tr><tr><td> <p>bottom</p> </td><td> <p>不缩放图片，只显示图片的底部区域</p> </td></tr><tr><td> <p>center</p> </td><td> <p>不缩放图片，只显示图片的中间区域</p> </td></tr><tr><td> <p>left</p> </td><td> <p>不缩放图片，只显示图片的左边区域</p> </td></tr><tr><td> <p>right</p> </td><td> <p>不缩放图片，只显示图片的右边区域</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>top left</p> </td><td> <p>不缩放图片，只显示图片的左上边区域</p> </td></tr><tr><td> <p>top right</p> </td><td> <p>不缩放图片，只显示图片的右上边区域</p> </td></tr><tr><td> <p>bottom left</p> </td><td> <p>不缩放图片，只显示图片的左下边区域</p> </td></tr><tr><td> <p>bottom right</p> </td><td> <p>不缩放图片，只显示图片的右下边区域</p> </td></tr></tbody></table> 
<p>image组件缩放模式和裁剪模式测试（效果图）：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/89/a4/PpbbUoCe_o.png"></p> 
<p><strong>3.3 </strong>轮播图</p> 
<p>在info.wxml中使用swiper组件实现轮播图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/da/63/SY2Ib6Sd_o.png"></p> 
<p><strong>3.4 </strong>功能按钮 </p> 
<p>flex布局实现功能按钮：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2e/dd/ZqY0AGfs_o.png"></p> 
<p>flex布局样式：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/24/0c/CUZLK2Rh_o.png"></p> 
<p> 效果图：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/f1/83/tHP2hJVd_o.png"></p> 
<p><strong>3.5 </strong>热门音乐 </p> 
<p><strong>①：</strong>flex布局实现页面布局：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b4/26/A6FE7LQd_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/8b/6a/vTz36bAQ_o.png">  flex布局实现页面布局（样式）：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/9e/b6/QxJEVf2j_o.png"></p> 
<p><strong>②：</strong>index页面底部播放：</p> 
<p><img alt="" src="https://images2.imgbox.com/3d/34/yIdF3ruI_o.png"></p> 
<p>index页面底部播放（样式）：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/9f/64/cnrkefjh_o.png"></p> 
<p>index页面播放底部呈现效果 ：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/51/c1/qsXhRDrh_o.png"></p> 
<p><strong>4. 播放器</strong></p> 
<p><strong>4.1</strong> 任务分析</p> 
<p><strong>4.1.1 </strong>播放器的具体功能进行分析：</p> 
<ul><li>音乐信息：显示当前播放曲目的标题和艺术家。</li><li>专辑封面：当音乐播放时，专辑封面会顺时针旋转。</li><li>播放进度：显示播放进度，调节音乐进度。 </li></ul> 
<p><strong>4.1.2</strong> 播放器标签页结构图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/23/3XMKE4zW_o.png"></p> 
<p><strong>4.2</strong> 前导知识</p> 
<p><strong>①：</strong>音频API接口的属性及说明：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>可选值</p> </td><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td rowspan="5"> <p>属性</p> </td><td> <p>src</p> </td><td> <p>音频资源的地址，用于直接播放</p> </td></tr><tr><td> <p>startTime</p> </td><td> <p>开始播放的位置（秒），默认为0</p> </td></tr><tr><td> <p>autoplay</p> </td><td> <p>是否自动开始播放，默认为false</p> </td></tr><tr><td> <p>loop</p> </td><td> <p>是否循环播放，默认为false</p> </td></tr><tr><td> <p>volume</p> </td><td> <p>音量。范围0~1。默认为1</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td rowspan="3"> <p>属性</p> </td><td> <p>duration</p> </td><td> <p>音频的长度（秒）。在当前有合法的src时返回（只读）</p> </td></tr><tr><td> <p>currentTime</p> </td><td> <p>音频的播放位置（秒）。在当前有合法的src时返回（只读）</p> </td></tr><tr><td> <p>paused</p> </td><td> <p>当前是是否暂停或停止状态（只读）</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td rowspan="7"> <p>方法</p> </td><td> <p>play()</p> </td><td> <p>播放</p> </td></tr><tr><td> <p>pause()</p> </td><td> <p>暂停（暂停后的音频再播放会从暂停处开始播放）</p> </td></tr><tr><td> <p>stop()</p> </td><td> <p>停止（停止后的音频再播放会从头开始播放）</p> </td></tr><tr><td> <p>seek()</p> </td><td> <p>跳转到指定位置</p> </td></tr><tr><td> <p>destroy()</p> </td><td> <p>销毁当前实例</p> </td></tr><tr><td> <p>onCanplay()</p> </td><td> <p>音频进入可以播放状态的事件（参数为回调函数）</p> </td></tr><tr><td> <p>onPlay()</p> </td><td> <p>音频播放事件（参数为回调函数）</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td rowspan="6"> <p>方法</p> </td><td> <p>onPause()</p> </td><td> <p>音频暂停事件（参数为回调函数）</p> </td></tr><tr><td> <p>onStop()</p> </td><td> <p>音频停止事件（参数为回调函数）</p> </td></tr><tr><td> <p>onEnded()</p> </td><td> <p>音频自然播放至结束的事件（参数为回调函数）</p> </td></tr><tr><td> <p>onSeeked()</p> </td><td> <p>音频进行跳转操作的事件（参数为回调函数）</p> </td></tr><tr><td> <p>onTimeUpdate()</p> </td><td> <p>音频播放进度更新事件（参数为回调函数）</p> </td></tr><tr><td> <p>onError()</p> </td><td> <p>音频播放错误事件（参数为回调函数）</p> </td></tr></tbody></table> 
<p><strong>②：</strong>innerAudioContext案例使用：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d0/81/oR6uKA6z_o.png"></p> 
<p></p> 
<p><strong>③：</strong>slider组件属性及说明：</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>可选值</p> </td><td> <p>类型</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>min</p> </td><td> <p>Number</p> </td><td> <p>最小值，默认为0</p> </td></tr><tr><td> <p>max</p> </td><td> <p>Number</p> </td><td> <p>最大值，默认为100</p> </td></tr><tr><td> <p>step</p> </td><td> <p>Number</p> </td><td> <p>步长，取值大于0，可被(max-min)整除，默认为1</p> </td></tr><tr><td> <p>value</p> </td><td> <p>Number</p> </td><td> <p>当前取值，默认为0</p> </td></tr><tr><td> <p>activeColor</p> </td><td> <p>Color</p> </td><td> <p>已选择的颜色，默认为#1aad19</p> </td></tr><tr><td> <p>backgroundColor</p> </td><td> <p>Color</p> </td><td> <p>背景条的颜色，默认为#e9e9e9</p> </td></tr></tbody></table> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>block-size</p> </td><td> <p>Number</p> </td><td> <p>滑块的大小，取值范围为12~28，默认为28</p> </td></tr><tr><td> <p>block-color</p> </td><td> <p>Color</p> </td><td> <p>滑块的颜色，默认为#ffffff</p> </td></tr><tr><td> <p>show-value</p> </td><td> <p>Boolean</p> </td><td> <p>是否显示当前value，默认为false</p> </td></tr><tr><td> <p>bindchange</p> </td><td> <p>EventHandle</p> </td><td> <p>完成一次拖动后触发的事件</p> </td></tr><tr><td> <p>bindchanging</p> </td><td> <p>EventHandle</p> </td><td> <p>拖动过程中触发的事件</p> </td></tr></tbody></table> 
<p><strong>4.3</strong> 定义基础数据</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/51/7c/kqQZ5kcA_o.png"></p> 
<p><strong>4.4</strong> 实现音乐播放功能</p> 
<p><strong>①：</strong>音乐播放逻辑代码（js）：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3f/b6/dC7ByBvT_o.png"></p> 
<p><strong>②：</strong>底部播放器暂停/播放按钮控制歌曲：</p> 
<p><img alt="" src="https://images2.imgbox.com/1d/b7/VvwQNMRZ_o.png"></p> 
<p>js:</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/40/6b/IPF4Hzwa_o.png"></p> 
<p><strong>③：</strong>播放器切换到下一首歌曲：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7a/e8/Rx7QDsm4_o.png"></p> 
<p>js：<img alt="" src="https://images2.imgbox.com/5a/f2/fzz5KYnP_o.png"></p> 
<p><strong>4.5</strong> 编写播放器页面</p> 
<p><strong>①：</strong>播放页面 play.wxml 结构代码：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c4/19/240Y2AoM_o.png"></p> 
<p>播放页面<strong>样式</strong>代码：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/13/b4/ECKPNFN6_o.png"></p> 
<p>效果：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/00/53/jUl9zPo1_o.png"></p> 
<p><strong>②：</strong>播放器样式代码：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/61/be/HuxH8ezj_o.png"></p> 
<p><strong>③：</strong>通过样式动画实现海报的旋转功能：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9f/a0/GwKSUaJc_o.png"></p> 
<p>海报的旋转功能样式代码：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1a/3e/v1BXSIWm_o.png"></p> 
<p><strong>4.6 </strong>控制播放进度</p> 
<p>播放器页面下方的滑块结构（play.wxml中）：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ae/3e/2WYlfQRb_o.png"></p> 
<p>滑块样式代码：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7f/92/oCMMLJr0_o.png"></p> 
<p></p> 
<p><strong>5. 播放列表</strong></p> 
<p><strong>5.1 </strong>任务分析结构图</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3d/76/Kk93YaLs_o.png"></p> 
<p><strong>5.2 </strong>编写页面结构和样式</p> 
<p>控制进度条的长度控制歌曲播放进度：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f9/55/XBTULu7M_o.png"></p> 
<p>控制进度条的长度控制歌曲播放进度样式：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/73/ce/QgWtOV6A_o.png"></p> 
<p><strong>5.3 </strong>实现换曲功能</p> 
<p>换曲功能（js）代码：<img alt="" src="https://images2.imgbox.com/a6/a0/r29fWKZd_o.png"></p> 
<p>代码：</p> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/index1.js：</p> 
<pre><code class="language-javascript">// pages/index/index1.js
Page({
  /**
   * 页面的初始数据
   * item控制页面显示的，0-2，表示显示不同的页面和顶部不同的导航
   *  state控制图标或当前音乐播放的状态:'paused'表示暂停,'running'表示在运行
   */
  data: {
    item:2,
    state:'paused',
    playindex:0,
    playlist:[{
      id:1,
      title:"운명（命运）",
      singer:"why",
      coverImage:"../images/cover.jpg",
      src:"http://www.ytmp3.cn/down/78392.mp3"
    },{
      id:2,
      title:"玫瑰花的葬礼",
      singer:"许嵩",
      coverImage:"../images/cover.jpg",
      src:"http://www.ytmp3.cn/down/78393.mp3"
    },{
      id:3,
      title:"小酒窝",
      singer:"蔡卓妍/林俊杰",
      coverImage:"../images/cover.jpg",
      src:"http://www.ytmp3.cn/down/78378.mp3"
    },{
      id:4,
      title:"十年",
      singer:"陈奕迅",
      coverImage:"../images/cover.jpg",
      src:"http://www.ytmp3.cn/down/78384.mp3"
    }],
    currentplay:{
      id:0,
      title:"",
      singer:"",
      coverImage:"",
      src:"",
      duration:"00:01",
      currentTime:"00:01",

    }

  },
  changeItem:function(e){
   
    this.setData({
      item:e.target.dataset.item
    })

  },
  changeTab:function(e){
    console.log(e)
    this.setData({
      item:e.detail.current
    })
  },
  play:function(e){
    // 还缺音乐播放里面暂停播放的逻辑
    this.audioCtx.play();
    this.setData({
      state:'running'
    })
  },
  pause:function(e){
    // 还缺音乐播放里面暂停播放的逻辑
    this.audioCtx.pause();
   this.setData({
     state:'paused'
   })
  },
  next:function(e){
    var index = this.data.playindex
    var count = this.data.playlist.length;
    index = index +1;
    index = index%count;
    this.setMusic(index)
    this.play()
  
  },
  changeMusic:function(e){
    console.log(e)
    var index = e.currentTarget.dataset.index;
    this.setMusic(index);
    this.play();

  },
  scroll: function(e) {
    console.log(e.detail)
  },
  testBind:function(e){
    console.log(e)
  } ,
  testBinding:function(e){
    console.log(e)
  } ,
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad(options) {

  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  audioCtx:null,
  onReady() {
    this.audioCtx = wx.createInnerAudioContext();
    this.setMusic(0);//默认选择第一首
    var outthis = this;
    this.audioCtx.onTimeUpdate(function(){
      var duration = outthis.timeFormat(outthis.audioCtx.duration);
      var currentTime = outthis.timeFormat(outthis.audioCtx.currentTime);
      console.log("播放回调方法调用"+duration+";currenttime"+currentTime)
      outthis.setData({
        'currentplay.currentTime':currentTime,
        'current.duration':duration
      })
    });
   
  },
  timeFormat:function(time){
    var minutes = Math.floor(time/60);
    var lminutes = ""
    if(minutes&lt;10){
      lminutes = '0'+ minutes
    }else{
      lminutes = minutes
    }
    var seconds = Math.floor(time)%60;
    var lseconds = ""
    if(seconds&lt;10){
      lseconds = '0'+ seconds
    }else{
      lseconds = seconds;
    }
    console.log(lminutes+":"+lseconds)
    return(lminutes+":"+lseconds);
  },
  setMusic:function(tempIndex){
    //当前播放歌曲的信息
     var currentMusic =  this.data.playlist[tempIndex];
     //设置音频播放的地址
     this.audioCtx.src = currentMusic.src;
     this.setData({
      playindex:tempIndex,
      'currentplay.id':currentMusic.id,
      'currentplay.title':currentMusic.title,
      'currentplay.singer':currentMusic.singer,
      'currentplay.coverImage':currentMusic.coverImage,
      'currentplay.src':currentMusic.src,
     });

  },


  /**
   * 生命周期函数--监听页面显示
   */
  onShow() {

  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide() {

  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload() {

  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh() {

  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom() {

  },

  /**
   * 用户点击右上角分享
   */
  onShareAppMessage() {

  }
})</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/index1.wxss：</p> 
<pre><code class="language-css">.tab{
  display: flex;
  flex-direction: row;
}
.tab-item{
  flex: 1;
  text-align: center;
  border-bottom: 6rpx solid #eee;
  font-size: 10pt;
  line-height: 72rpx;
  color: white;
}

.tab-item.active{
  border-bottom: 6rpx solid #c25b5b;
  color: #c25b5b;
}

page{
  background-color: #1a1818;
  display: flex;
  flex-direction: column;
  height: 100%;
  color: #ccc;
}
.content{
  flex: 1;
}
.content-info-portal{
  display: flex;
  flex-direction: row;
}

.content-info-portal image{
  width: 120rpx;
  height:120rpx;
}

/* 轮播图 */
.content-info-side{
  height: 150px;
}
.content-info-side image{
  width: 100%;
  height: 100%;
}
.content &gt;swiper{
  height: 100%;
}
/* 功能按钮 */
.content-info-portal{
  display: flex;
  flex-direction: row;
  }
  .content-info-portal &gt;view{
    flex: 1;
    font-size: 11pt;
    text-align: center;
  }
  
  .content-info-portal image{
    width: 120rpx;
    height: 120rpx;
    display: block;
    margin: 20rpx auto;
  }
  .list-inner{
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
  }
  .list-item{
    flex:1;
    margin: 15rpx;
    font-size: 10pt;
  }
  
  .list-item image{
    width: 200rpx;
    height: 200rpx;
    display: block;
    margin: 0 auto;
    border-radius: 10rpx;
    border: 1rpx solid #555;
  }
  /* 播放器部分 */
.player{
  height: 112rpx;
  display: flex;
  flex-direction: row;
  align-items: center;
  background: chocolate;
}
.player&gt;image{
  width: 80rpx;
  height: 80rpx;
  margin-left: 15rpx;
  border-radius: 10rpx;
  border: 1px solid #333;
}

.player-control image{
  width: 80rpx;
  height: 80rpx;
}
.player-info{
  flex: 1;
  font-size: 10pt;
  line-height: 38rpx;
  margin-left: 20rpx;

}
.player-info-singer{
  color: #555;
}

/* 实现播放器的样式 */
.content-play{
  display: flex;
  flex-direction: column;
  height: 100%;
  text-align: center;
  justify-content: space-around;
}
.content-play-cover&gt;image{
    width: 320rpx;
    height: 320rpx;
    border-radius: 50%;
    border: 1px solid #555;
    animation: roateImage 10s linear infinite;
}
@keyframes roateImage{
  from{
    transform: rotate(0deg);
  }
  to{
    transform: rotate(360deg);
  }
}

/* 播放进度条的样式 */
.content-play-progress{
  display: flex;
  text-align: center;
  margin: 0 35rpx;
  font-size: 10pt;
  align-items: center;
}
.content-play-progress&gt;slider{
  flex: 1;
}
.playlist-content{
  display: flex;
  flex-direction: column;
  height: 100%;
}
.playlist-item{
display: flex;
height: 112rpx;
align-items: center;
border-bottom: 1px solid #555;
}
.playlist-item&gt;image{
width: 80rpx;
height: 80rpx;
border-radius: 10rpx;
border: 1px solid #555;
margin-left: 15rpx;
}
.playlist-item-info{
  flex: 1;
  font-size: 10pt;
  line-height: 38rpx;
  margin-left: 20rpx;
  padding: 0 5rpx;
}
.playlist-item-play{
  font-size: 10pt;
  color: #c25b5b;
  margin-right: 20rpx;
}</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/index1.wxml：</p> 
<pre><code class="language-html">&lt;view class="tab"&gt;
  &lt;view class="tab-item {<!-- -->{item ==0?'active':'' }}" data-item="0" bindtap="changeItem"&gt;音乐推荐&lt;/view&gt;
  &lt;view class="tab-item {<!-- -->{item ==1?'active':'' }}" data-item="1" bindtap="changeItem"&gt;播放器&lt;/view&gt;
  &lt;view class="tab-item {<!-- -->{item ==2?'active':'' }}" data-item="2" bindtap="changeItem"&gt;播放列表&lt;/view&gt;
&lt;/view&gt;
&lt;!-- 正文信息--&gt;
&lt;view class="content"&gt;
  &lt;swiper current="{<!-- -->{item}}" bindchange="changeTab"&gt;
    &lt;swiper-item&gt;
      &lt;include src="./info"&gt;&lt;/include&gt;
    &lt;/swiper-item&gt;
    &lt;swiper-item&gt;
      &lt;include src="./play"&gt;&lt;/include&gt;
    &lt;/swiper-item&gt;
    &lt;swiper-item&gt;
      &lt;include src="./playlist"&gt;&lt;/include&gt;
    &lt;/swiper-item&gt;
  &lt;/swiper&gt;
&lt;/view&gt;
&lt;!-- 播放器--&gt;
&lt;view class="player"&gt;
  &lt;image src="{<!-- -->{currentplay.coverImage}}" /&gt;
  &lt;view class="player-info"&gt;
    &lt;view&gt;{<!-- -->{currentplay.title}}&lt;/view&gt;
    &lt;view class="player-info-singer"&gt;{<!-- -->{currentplay.singer}}&lt;/view&gt;
  &lt;/view&gt;
  &lt;view class="player-control"&gt;
    &lt;image src="../images/01.png" /&gt;
    &lt;!-- 播放或暂停 --&gt;
    &lt;image wx:if="{<!-- -->{state=='paused'}}" src="../images/02.png" bindtap="play" /&gt;
    &lt;image wx:if="{<!-- -->{state =='running'}}" src="../images/02stop.png" bindtap="pause" /&gt;
    &lt;!-- 切换到下一首 --&gt;
    &lt;image src="../images/03.png" bindtap="next" /&gt;
  &lt;/view&gt;
&lt;/view&gt;</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/info.wxml：</p> 
<pre><code class="language-html">&lt;swiper class="content-info-side" indicator-dots="true" indicator-color="#eee" indicator-active-color="#ffffff"&gt;
  &lt;swiper-item&gt;
    &lt;image src="../images/banner.jpg" mode="aspectFill"&gt;&lt;/image&gt;
  &lt;/swiper-item&gt;
  &lt;swiper-item&gt;
    &lt;image src="../images/banner.jpg" mode="aspectFill"&gt;&lt;/image&gt;
  &lt;/swiper-item&gt;
  &lt;swiper-item&gt;
    &lt;image src="../images/banner.jpg" mode="aspectFill"&gt;&lt;/image&gt;
  &lt;/swiper-item&gt;
&lt;/swiper&gt;
&lt;!--功能按钮功能区域--&gt;
&lt;view class="content-info-portal"&gt;
  &lt;view&gt;
    &lt;image src="../images/04.png"&gt;&lt;/image&gt;
    &lt;text&gt;私人FM&lt;/text&gt;
  &lt;/view&gt;
  &lt;view&gt;
    &lt;image src="../images/05.png"&gt;&lt;/image&gt;
    &lt;text&gt;每日歌曲推荐&lt;/text&gt;
  &lt;/view&gt;
  &lt;view&gt;
    &lt;image src="../images/06.png"&gt;&lt;/image&gt;
    &lt;text&gt;云音乐新歌榜&lt;/text&gt;
  &lt;/view&gt;

&lt;/view&gt;
&lt;!--推荐歌曲区域--&gt;
&lt;view class="content-info-list"&gt;
  &lt;text&gt;推荐歌曲&lt;/text&gt;
  &lt;view class="list-inner"&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;紫罗兰&lt;/text&gt;
    &lt;/view&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;欢乐颂&lt;/text&gt;
    &lt;/view&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;再见&lt;/text&gt;
    &lt;/view&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;紫罗兰&lt;/text&gt;
    &lt;/view&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;紫罗兰&lt;/text&gt;
    &lt;/view&gt;
    &lt;view class="list-item"&gt;
      &lt;image src="../images/cover.jpg"&gt;&lt;/image&gt;
      &lt;text&gt;紫罗兰&lt;/text&gt;
    &lt;/view&gt;

  &lt;/view&gt;

&lt;/view&gt;</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/play.wxml：</p> 
<pre><code class="language-html">&lt;view class="content-play"&gt;
  &lt;!-- 显示播放信息 --&gt;
  &lt;view&gt;
    &lt;view&gt;肖邦的夜曲&lt;/view&gt;
    &lt;view&gt;--肖邦--&lt;/view&gt;
  &lt;/view&gt;
  &lt;view class="content-play-cover"&gt;
    &lt;image src="../images/cover.jpg" style="animation-play-state: {<!-- -->{state}};" /&gt;
  &lt;/view&gt;
  &lt;view class="content-play-progress"&gt;
    &lt;text&gt;{<!-- -->{currentplay.currentTime}}&lt;/text&gt;
    &lt;slider activeColor="#555" backgroundColor="#e9e9e9" block-size="12" block-color="#e9e9e9" value="80" bindchange="testBind" bindchanging="testBinding"&gt;&lt;/slider&gt;
    &lt;text&gt;{<!-- -->{currentplay.duration}}&lt;/text&gt;
  &lt;/view&gt;
&lt;/view&gt;</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;">pages/index/playlist.wxml：</p> 
<pre><code class="language-html">&lt;view class="playlist-content"&gt;
  &lt;label wx:for="{<!-- -->{playlist}}" wx:key="id"&gt;
    &lt;view class="playlist-item" data-index="{<!-- -->{index}}" bindtap="changeMusic"&gt;
      &lt;!-- &lt;image src="../images/cover.jpg" /&gt; --&gt;
      &lt;image src="{<!-- -->{item.coverImage}}"&gt;&lt;/image&gt;
      &lt;view class="playlist-item-info"&gt;
        &lt;!-- &lt;view&gt;肖邦的夜曲&lt;/view&gt; --&gt;
        &lt;view&gt;{<!-- -->{item.title}}&lt;/view&gt;
        &lt;view&gt;{<!-- -->{item.singer}}&lt;/view&gt;
      &lt;/view&gt;
      &lt;view class="playlist-item-play" wx:if="{<!-- -->{index==playindex}}"&gt;
        正在播放
      &lt;/view&gt;
    &lt;/view&gt;
  &lt;/label&gt;
&lt;/view&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6e61caf2c0100d171770e01f537c97de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">curl: (1) Protocol “‘http“ not supported or disabled in libcurl的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e12ace6b574ad0537639194057d089bc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vit 中的 Token 改进版本：Token Mreging: Your Vit But Faster 论文阅读笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>