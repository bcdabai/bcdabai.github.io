<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序引用Map地图规划制定路径行走并显示路径 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序引用Map地图规划制定路径行走并显示路径" />
<meta property="og:description" content="先上个效果图： //index.wxml &lt;map id=&#34;map&#34; latitude=&#34;{{latitude}}&#34; longitude=&#34;{{longitude}}&#34; scale=&#34;{{scale}}&#34; markers=&#34;{{calloutMarkers}}&#34; polyline=&#34;{{polyline}}&#34; &gt;&lt;/map&gt; //index.wxss map{ width: 100%; height: 100vh; } //index.js const app = getApp() // 路径数据 const INIT_POLYLINE = { points: [{ latitude: 40.040129, longitude: 116.274968 }, { latitude: 40.038974, longitude: 116.275214 }, { latitude: 40.038974, longitude: 116.275214 }, { latitude: 40.038565000000006, longitude: 116.272683 }, { latitude: 40.03848200000001, longitude: 116.27209500000001 }, { latitude: 40.03836100000001, longitude: 116.27074 }, { latitude: 40.03832700000001, longitude: 116." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/f1eb3b916cd1cb1f801559bbd5e76750/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-27T17:47:40+08:00" />
<meta property="article:modified_time" content="2022-07-27T17:47:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序引用Map地图规划制定路径行走并显示路径</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>先上个效果图：    </p> 
<div class="csdn-video-box"> 
 <iframe id="ynnquCvG-1658914666073" frameborder="0" src="https://live.csdn.net/v/embed/227723" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p></p> 
</div> 
<p></p> 
<p></p> 
<pre><code>//index.wxml


  &lt;map id="map"
    latitude="{<!-- -->{latitude}}"
    longitude="{<!-- -->{longitude}}"
    scale="{<!-- -->{scale}}"
    markers="{<!-- -->{calloutMarkers}}" 
    polyline="{<!-- -->{polyline}}"
    &gt;&lt;/map&gt;
</code></pre> 
<pre><code>//index.wxss


map{
  width: 100%;
  height: 100vh;
}</code></pre> 
<pre><code>//index.js


const app = getApp()
// 路径数据
const INIT_POLYLINE = {
  points: [{
      latitude: 40.040129,
      longitude: 116.274968
    },
    {
      latitude: 40.038974,
      longitude: 116.275214
    },
    {
      latitude: 40.038974,
      longitude: 116.275214
    },
    {
      latitude: 40.038565000000006,
      longitude: 116.272683
    },
    {
      latitude: 40.03848200000001,
      longitude: 116.27209500000001
    },
    {
      latitude: 40.03836100000001,
      longitude: 116.27074
    },
    {
      latitude: 40.03832700000001,
      longitude: 116.270515
    },
    {
      latitude: 40.03807400000001,
      longitude: 116.268038
    },
    {
      latitude: 40.03801400000001,
      longitude: 116.26763600000001
    },
    {
      latitude: 40.03801400000001,
      longitude: 116.26763600000001
    },
    {
      latitude: 40.03790800000001,
      longitude: 116.267508
    },
    {
      latitude: 40.03450300000001,
      longitude: 116.270961
    },
    {
      latitude: 40.03419900000001,
      longitude: 116.271221
    },
    {
      latitude: 40.03396500000001,
      longitude: 116.271401
    },
    {
      latitude: 40.03245000000001,
      longitude: 116.272472
    }
  ],
  color: '#3875FF',
  width: 8,
  dottedLine: false,
  arrowLine: false,
  borderWidth: 0,
  arrowLine: true
  // colorList: ['#3875FF']
};
// 气泡窗口 我
const INIT_CALLOUT1 = {
  content: '我',
  padding: 12,
  display: 'ALWAYS',
  fontSize: 14,
  textAlign: 'center',
  borderRadius: 4,
  borderWidth: 2,
  bgColor: '#ffffff'
};
// 气泡窗口 充小猫
const INIT_CALLOUT2 = {
  content: '小猫',
  padding: 12,
  display: 'ALWAYS',
  fontSize: 14,
  textAlign: 'center',
  borderRadius: 4,
  borderWidth: 2,
  bgColor: '#ffffff'
};
// 覆盖物点 我
const INIT_CALLOUT_MARKER1 = {
  id: 1,
  callout: {
    ...INIT_CALLOUT1
  },
  latitude: 40.03245000000001,
  longitude: 116.272472,
  width: 30,
  height: 40
};
// 气覆盖物点 小猫
const INIT_CALLOUT_MARKER2 = {
  id: 2,
  callout: {
    ...INIT_CALLOUT2
  },
  latitude: 40.040129,
  longitude: 116.274968,
  width: 30,
  height: 40
};

Page({
  data: {
    // 中心点经纬度
    latitude: 40.03245000000001,
    longitude: 116.272472,
    // 地图缩放等级
    scale: 15,
    // 路径数据
    polyline: [],
    // 标记点数据
    calloutMarkers: [],
  },
  onLoad() {
    // 1.创建 map 上下文 Context 对象，传入 map id
    this.mapCtx = wx.createMapContext('map');

    // 2.设置路径及点位
    this.setData({
      polyline: [{
        ...INIT_POLYLINE
      }],
      calloutMarkers: [{
        ...INIT_CALLOUT_MARKER1
      }, {
        ...INIT_CALLOUT_MARKER2
      }]
    })

    // 3.开始移动,这里我做了个循环的效果
    this.run()
  },
  run() {
    this.mapCtx.moveAlong({
      markerId: 2,
      path: this.data.polyline[0].points,
      duration: 10000,
      autoRotate: true,
      success(res) {
        console.log(res)
      },
      fail(err) {
        console.log(err)
      }
    })
  }
})</code></pre> 
<p><strong>第一次写博客，这个功能是最近接触到要使用到，参考了部分博主的思想逻辑，然后自己动手敲写出来，如若侵权，请联系删帖。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0d78f4026bf9bbc952c5d9b008c8b3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">canvas基本使用（获取画布、绘制矩形、清除屏幕内容、动画、绘制不规则图形、圆形、虚线、绘制文字、颜色渐变、设置阴影、渲染图片、变形偏移、canvas文档）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e1b25a8886c7bd25615da6d327d9db6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Node.js的学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>