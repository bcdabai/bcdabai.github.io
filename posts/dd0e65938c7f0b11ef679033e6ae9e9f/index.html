<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决asterisk 噪音问题总结 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决asterisk 噪音问题总结" />
<meta property="og:description" content="修改：sip_general_additional.conf
; do not edit this file, this is an auto-generated file by freepbx ; all modifications must be done from the web gui vmexten=*97 bindport=5060 #使用×××时修改该地方，IP为asterisk主机的内部IPbindaddr=192.168.1.10 #这里增加asterisk所支持的编码#也可增加至sip.conf中disallow=all allow=ulaw allow=alaw context=from-sip-external callerid=Unknown notifyringing=yes notifyhold=yes limitonpeers=yes tos_sip=cs3 tos_audio=ef tos_video=af41 如果以上设置后拨入无法拨通则修改sip_nat.conf
externip = 62.69.4.121 # 该处为asterisk 机的外部IPlocalnet=192.168.0.0/255.255.0.0 修改 zapata.conf 增加以下三项如果该三项不存在的话
echocancel=yes echocancelwhenbridged=yesechotraining=yes 使用 ztmonitor &lt;channel num&gt; -vv 该命令查看 rxgain/txgain 的变化 根据变化的值适当调整 rxgain/txgain 的值
ztmontor 中的&lt;channel num&gt;的指你当前通话的通道编号 如 zap/32-xxxxx ， 32则为 channel num 该命令一定要在你测试的通话经行过程中使用 运行如下 [root@elastix ~]# ztmonitor 32 -vv Visual Audio Levels." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dd0e65938c7f0b11ef679033e6ae9e9f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-06-17T16:00:52+08:00" />
<meta property="article:modified_time" content="2011-06-17T16:00:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决asterisk 噪音问题总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="artical-content-bak main-content editor-side-new"> 
 <div class="con editor-preview-side" id="result"> 
  <p><span style="color:rgb(255,0,255);"> 修改：sip_general_additional.conf</span></p> 
  <pre></pre> 
  <ol class="dp-sql"><li class="alt">; do <span class="op">not</span> edit this file, this <span class="keyword">is</span> an auto-generated file <span class="keyword">by</span> freepbx </li><li>; <span class="op">all</span> modifications must be done <span class="keyword">from</span> the web gui </li><li class="alt"> </li><li> </li><li class="alt">vmexten=*97 </li><li>bindport=5060  <br></li><li class="alt">#<span style="color:rgb(255,0,0);">使用×××时修改该地方，IP为asterisk主机的内部IP</span></li><li class="alt">bindaddr=192.168.1.10  </li><li>#<span style="color:rgb(255,0,0);">这里增加asterisk所支持的编码</span></li><li>#<span style="color:rgb(255,0,255);">也可增加至sip.conf中</span></li><li>disallow=<span class="op">all</span>  </li><li class="alt">allow=ulaw  </li><li>allow=alaw  </li><li class="alt">context=<span class="keyword">from</span>-sip-external </li><li>callerid=Unknown </li><li class="alt">notifyringing=yes </li><li>notifyhold=yes </li><li class="alt">limitonpeers=yes </li><li>tos_sip=cs3 </li><li class="alt">tos_audio=ef </li><li>tos_video=af41 </li></ol> 
  <p><span style="color:rgb(255,0,255);"><span style="font-size:14px;">如果以上设置后拨入无法拨通则修改sip_nat.conf</span></span></p> 
  <pre></pre> 
  <ol class="dp-xml"><li class="alt"><span class="attribute">externip</span> = <span class="attribute-value">62</span>.69.4.121  # <span style="color:rgb(255,0,0);">该处为asterisk 机的外部IP</span></li><li><span class="attribute">localnet</span>=<span class="attribute-value">192</span>.168.0.0/255.255.0.0 </li></ol> 
  <p><span style="color:rgb(255,0,255);">修改  zapata.conf </span></p> 
  <p><span style="font-size:12px;">增加以下三项如果该三项不存在的话</span></p> 
  <pre></pre> 
  <ul><li class="alt"><span style="color:rgb(255,0,0);"><span class="attribute">echocancel</span>=<span class="attribute-value">yes</span> <br></span></li><li><span style="color:rgb(255,0,0);"><span class="attribute">echocancelwhenbridged</span>=<span class="attribute-value">ye</span>s</span></li><li><span style="color:rgb(255,0,0);"><span class="attribute">echotraining</span>=<span class="attribute-value">yes</span>  </span></li></ul> 
  <p>使用 <span style="color:rgb(0,0,255);">ztmonitor &lt;channel num&gt; -vv </span>该命令查看 <span class="attribute">rxgain</span>/<span class="attribute">txgain 的变化 根据变化的值适当调整</span> <span class="attribute">rxgain</span>/<span class="attribute">txgain 的值</span></p>ztmontor 中的&lt;channel num&gt;的指你当前通话的通道编号 如 zap/32-xxxxx ， 32则为 channel num 该命令一定要在你测试的通话经行过程中使用 
  <span style="color:rgb(0,0,255);">运行如下 </span> 
  <pre></pre> 
  <ol class="dp-xml"><li class="alt">[root@elastix ~]# ztmonitor  32 -vv </li><li> </li><li class="alt">Visual Audio Levels. </li><li>-------------------- </li><li class="alt"> Use zapata.conf file to adjust the gains if needed. </li><li> </li><li class="alt">( # = Audio Level  * = Max Audio Hit ) </li><li><span class="tag">&lt;</span><span class="tag-name">----------------</span>(RX <span class="tag">&lt;</span><span class="tag-name">----------------</span>(TX </li><li class="alt">                                                                               Rx:     0 (    0) Tx:     0 (    0) </li></ol> 
  <pre> 

以下为我的asterisk中的配置文件：
</pre> 
  <p><span id="1308296575381S"> </span></p> 
  <pre></pre> 
  <ol class="dp-xml"><li class="alt">[trunkgroups] </li><li> </li><li class="alt">[channels] </li><li><span class="attribute">context</span>=<span class="attribute-value">from</span>-pstn </li><li class="alt"><span class="attribute">signalling</span>=<span class="attribute-value">fxs_ks</span> </li><li><span class="attribute">rxwink</span>=<span class="attribute-value">300</span>              ; Atlas seems to use long (250ms) winks </li><li class="alt"><span class="attribute">usecallerid</span>=<span class="attribute-value">yes</span> </li><li><span class="attribute">hidecallerid</span>=<span class="attribute-value">no</span> </li><li class="alt"><span class="attribute">callwaiting</span>=<span class="attribute-value">yes</span> </li><li><span class="attribute">usecallingpres</span>=<span class="attribute-value">yes</span> </li><li class="alt"><span class="attribute">callwaitingcallerid</span>=<span class="attribute-value">yes</span> </li><li><span class="attribute">threewaycalling</span>=<span class="attribute-value">yes</span> </li><li class="alt"><span class="attribute">transfer</span>=<span class="attribute-value">yes</span> </li><li><span class="attribute">canpark</span>=<span class="attribute-value">yes</span> </li><li class="alt"><span class="attribute">cancallforward</span>=<span class="attribute-value">yes</span> </li><li><span class="attribute">callreturn</span>=<span class="attribute-value">yes</span> </li><li class="alt"><span class="attribute">echocancel</span>=<span class="attribute-value">yes</span> <br></li><li><span class="attribute">echocancelwhenbridged</span>=<span class="attribute-value">yes</span> <br></li><li class="alt"><span class="attribute">faxdetect</span>=<span class="attribute-value">incoming</span> </li><li><span class="attribute">echotraining</span>=<span class="attribute-value">yes</span>  </li><li class="alt"><span class="attribute">hanguponpolarityswitch</span>=<span class="attribute-value">yes</span> ;拆线   </li><li><span class="attribute">answeronpolarityswitch</span>=<span class="attribute-value">yes</span> ;对端应答（用于计费） </li><li class="alt"><span class="attribute">rxgain</span>=-6.3  #该处为修改后的值</li><li><span class="attribute">txgain</span>=<span class="attribute-value">5</span>.3  #该处为修改后的值</li><li class="alt"><span class="attribute">callgroup</span>=<span class="attribute-value">1</span> </li><li><span class="attribute">pickupgroup</span>=<span class="attribute-value">1</span> </li><li class="alt"> </li><li>;Uncomment these lines if you have problems with the disconection of your analog lines </li><li class="alt">;<span class="attribute">busydetect</span>=<span class="attribute-value">yes</span> </li><li>;<span class="attribute">busycount</span>=<span class="attribute-value">3</span> </li><li class="alt"> </li><li> </li><li class="alt"><span class="attribute">immediate</span>=<span class="attribute-value">no</span> </li><li> </li><li class="alt">#include zapata_additional.conf </li><li>#include zapata-channels.conf </li></ol> 
  <p> 可参考： <a href="http://strugglelinux.blog.51cto.com/1009905/587092" rel="nofollow"><span style="color:rgb(51,102,255);"> Asterisk卡常见问题汇总 </span></a></p> 
 </div> 
</div> 
<p>转载于:https://blog.51cto.com/strugglelinux/590633</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/07b9bfa3ad7be3599d8bfa71b87395d0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">android GPS开启方法  代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/602f8342034159dd82f6ad13ec595cae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OSGi控制台命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>