<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下PostgreSQL安装部署详细步骤 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下PostgreSQL安装部署详细步骤" />
<meta property="og:description" content="目录
一、安装环境
二、pg数据库安装包下载
三、安装依赖包
四、安装postgres
五、创建用户组postgres并创建用户postgres 六、创建postgresql数据库的数据主目录并修改文件所有者
七、配置环境变量
八、切换用户到postgres并使用initdb初使用化数据库
九、配置服务
十、设置PostgreSQL开机自启动
十一、开始测试
一、安装环境 postgresql-11.1CentOS-6.4注意：确认linux系统可以正常连接网络，因为在后面需要添加依赖包。 二、pg数据库安装包下载 下载地址：http://www.postgresql.org/ftp/source/
选择要安装的版本进行下载：
三、安装依赖包 在要安装postgresql数据库的Linux服务器（hostname：weekend02）上执行以下命令安装所需要的依赖包：
yum install -y perl-ExtUtils-Embed readline-devel zlib-devel pam-devel libxml2-devel libxslt-devel openldap-devel python-devel gcc-c&#43;&#43; openssl-devel cmake
四、安装postgres 1、在根目录下新建pgsql文件夹，并将pgsql的压缩包移入。
[root@weekend02 pgsql]# ls postgresql-11.1.tar.gz [root@weekend02 pgsql]# pwd //pgsql 2、解压压缩包
[root@weekend02 pgsql]# tar -zxvf postgresql-11.1.tar.gz 3、进入解压后的文件夹 [root@weekend02 pgsql]# cd postgresql-11.1 [root@weekend02 postgresql-11.1]# ls aclocal.m4 configure contrib doc HISTORY Makefile src config configure.in COPYRIGHT GNUmakefile.in INSTALL README 4、编译postgresql源码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/10470dcfd1326ee05f67e962c12ebcd5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-04T14:59:47+08:00" />
<meta property="article:modified_time" content="2020-09-04T14:59:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下PostgreSQL安装部署详细步骤</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83" rel="nofollow">一、安装环境</a></p> 
<p id="%E4%BA%8C%E3%80%81pg%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8B%E8%BD%BD-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81pg%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8B%E8%BD%BD" rel="nofollow">二、pg数据库安装包下载</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85" rel="nofollow">三、安装依赖包</a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85postgres-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85postgres" rel="nofollow">四、安装postgres</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84postgres%E5%B9%B6%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7postgres%C2%A0-toc" style="margin-left:40px;"><a href="#%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84postgres%E5%B9%B6%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7postgres%C2%A0" rel="nofollow">五、创建用户组postgres并创建用户postgres </a></p> 
<p id="%E5%85%AD%E3%80%81%E5%88%9B%E5%BB%BApostgresql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%BB%E7%9B%AE%E5%BD%95%E5%B9%B6%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85-toc" style="margin-left:40px;"><a href="#%E5%85%AD%E3%80%81%E5%88%9B%E5%BB%BApostgresql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%BB%E7%9B%AE%E5%BD%95%E5%B9%B6%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85" rel="nofollow">六、创建postgresql数据库的数据主目录并修改文件所有者</a></p> 
<p id="%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">七、配置环境变量</a></p> 
<p id="%E5%85%AB%E3%80%81%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E5%88%B0postgres%E5%B9%B6%E4%BD%BF%E7%94%A8initdb%E5%88%9D%E4%BD%BF%E7%94%A8%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#%E5%85%AB%E3%80%81%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E5%88%B0postgres%E5%B9%B6%E4%BD%BF%E7%94%A8initdb%E5%88%9D%E4%BD%BF%E7%94%A8%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">八、切换用户到postgres并使用initdb初使用化数据库</a></p> 
<p id="%E4%B9%9D%E3%80%81%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#%E4%B9%9D%E3%80%81%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1" rel="nofollow">九、配置服务</a></p> 
<p id="%E5%8D%81%E3%80%81%E8%AE%BE%E7%BD%AEPostgreSQL%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E3%80%81%E8%AE%BE%E7%BD%AEPostgreSQL%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8" rel="nofollow">十、设置PostgreSQL开机自启动</a></p> 
<p id="%E5%8D%81%E4%B8%80%E3%80%81%E5%BC%80%E5%A7%8B%E6%B5%8B%E8%AF%95-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%BC%80%E5%A7%8B%E6%B5%8B%E8%AF%95" rel="nofollow">十一、开始测试</a></p> 
<hr id="hr-toc"> 
<h3 id="%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><strong>一、安装环境</strong></h3> 
<ul><li>postgresql-11.1</li><li>CentOS-6.4</li><li>注意：确认linux系统可以正常连接网络，因为在后面需要添加依赖包。</li></ul> 
<h3 id="%E4%BA%8C%E3%80%81pg%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8B%E8%BD%BD"><strong>二、pg数据库安装包下载</strong></h3> 
<p>下载地址：<a href="http://www.postgresql.org/ftp/source/" rel="nofollow">http://www.postgresql.org/ftp/source/</a></p> 
<p>选择要安装的版本进行下载：</p> 
<p><img alt="" height="965" src="https://images2.imgbox.com/18/54/PyFegLUZ_o.png" width="1200"></p> 
<h3 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85"><strong>三、安装依赖包</strong></h3> 
<p>在要安装postgresql数据库的Linux服务器（hostname：weekend02）上执行以下命令安装所需要的依赖包：</p> 
<p>yum install -y perl-ExtUtils-Embed readline-devel zlib-devel pam-devel libxml2-devel libxslt-devel openldap-devel python-devel gcc-c++ openssl-devel cmake</p> 
<h3 id="%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85postgres"><strong>四、安装postgres</strong></h3> 
<p>1、在根目录下新建pgsql文件夹，并将pgsql的压缩包移入。</p> 
<pre><code>[root@weekend02 pgsql]# ls
postgresql-11.1.tar.gz
[root@weekend02 pgsql]# pwd
//pgsql</code></pre> 
<p>2、解压压缩包</p> 
<pre><code>[root@weekend02 pgsql]# tar -zxvf postgresql-11.1.tar.gz </code></pre> 
<p>3、进入解压后的文件夹 </p> 
<pre><code>[root@weekend02 pgsql]# cd postgresql-11.1
[root@weekend02 postgresql-11.1]# ls
aclocal.m4  configure     contrib    doc             HISTORY  Makefile  src
config      configure.in  COPYRIGHT  GNUmakefile.in  INSTALL  README</code></pre> 
<p>4、编译postgresql源码</p> 
<pre><code>[root@weekend02 postgresql-11.1]# ./configure --prefix=/pgsql/postgresql</code></pre> 
<table border="1" cellpadding="2" cellspacing="0"><tbody><tr><td style="width:203px;">选项</td><td>描述</td></tr><tr><td style="width:203px;">–prefix=prefix</td><td>安装到prefix指向的目录；默认为/usr/local/pgsql</td></tr><tr><td style="width:203px;">–bindir=dir</td><td>安装应用程序到dir；默认为prefix/bin</td></tr><tr><td style="width:203px;">–with-docdir=dir</td><td>安装文档到dir；默认为prefix/doc</td></tr><tr><td style="width:203px;">–with-pgport=port</td><td>设置默认的服务器端网络连接服务TCP端口号</td></tr><tr><td style="width:203px;">–with-tcl</td><td>为服务端提供Tcl存储过程支持</td></tr><tr><td style="width:203px;">–with-perl</td><td>为服务端提供Perl存储过程支持</td></tr><tr><td style="width:203px;">–with-python</td><td>为服务端提供Python存储过程支持</td></tr></tbody></table> 
<pre><code>[root@weekend02 postgresql-11.1]# make</code></pre> 
<pre><code>[root@weekend02 postgresql-11.1]# make install</code></pre> 
<p>至此，已完成postgreql的安装。进入/pgsql/postgresql目录可以看到安装后的postgresql的文件。</p> 
<pre><code>[root@weekend02 postgresql]# ls
bin  include  lib  share</code></pre> 
<h3 id="%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%BB%84postgres%E5%B9%B6%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7postgres%C2%A0"><strong>五、创建用户组postgres并创建用户postgres </strong></h3> 
<pre><code>[root@weekend02 postgresql-11.1]# groupadd postgres
[root@weekend02 postgresql-11.1]# useradd -g postgres postgres
[root@weekend02 postgresql-11.1]# id postgres
uid=501(postgres) gid=501(postgres) 组=501(postgres)</code></pre> 
<h3 id="%E5%85%AD%E3%80%81%E5%88%9B%E5%BB%BApostgresql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%BB%E7%9B%AE%E5%BD%95%E5%B9%B6%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85"><strong>六、创建postgresql数据库的数据主目录并修改文件所有者</strong></h3> 
<p>这个数据库主目录是随实际情况而不同，这里我们的主目录是在/pgsql/postgresql/data目录下：</p> 
<pre><code>[root@weekend02 postgresql-11.1]# cd /pgsql/postgresql
[root@weekend02 postgresql]# mkdir data
[root@weekend02 postgresql]# chown postgres:postgres data
[root@weekend02 postgresql]# ls -al
总用量 28
drwxr-xr-x. 7 root     root     4096 12月 15 23:39 .
drwxr-xr-x. 4 root     root     4096 12月 15 23:14 ..
drwxr-xr-x. 2 root     root     4096 12月 15 23:14 bin
drwxr-xr-x. 2 postgres postgres 4096 12月 15 23:39 data
drwxr-xr-x. 6 root     root     4096 12月 15 23:14 include
drwxr-xr-x. 4 root     root     4096 12月 15 23:14 lib
drwxr-xr-x. 6 root     root     4096 12月 15 23:14 share</code></pre> 
<h3 id="%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><strong>七、配置环境变量</strong></h3> 
<p><strong>进入home/postgres目录可以看到</strong>.bash_profile文件。</p> 
<pre><code>[root@weekend02 postgresql]# cd /home/postgres
[root@weekend02 postgres]# ls -al
总用量 28
drwx------. 4 postgres postgres 4096 12月 15 23:37 .
drwxr-xr-x. 5 root     root     4096 12月 15 23:19 ..
-rw-r--r--. 1 postgres postgres   18 5月  11 2012 .bash_logout
-rw-r--r--. 1 postgres postgres  178 12月 15 23:37 .bash_profile
-rw-r--r--. 1 postgres postgres  124 5月  11 2012 .bashrc
drwxr-xr-x. 2 postgres postgres 4096 11月 12 2010 .gnome2
drwxr-xr-x. 4 postgres postgres 4096 9月  29 05:12 .mozilla
[root@weekend02 postgres]# </code></pre> 
<p>编辑修改.bash_profile文件。</p> 
<pre><code>[root@weekend02 postgres]# vi .bash_profile </code></pre> 
<p>添加以下内容。</p> 
<pre><code>export PGHOME=/pgsql/postgresql

export PGDATA=/pgsql/postgresql/data

PATH=$PATH:$HOME/bin:$PGHOME/bin
</code></pre> 
<p>保存，退出vi。执行以下命令，使环境变量生效</p> 
<pre><code>[root@weekend02 postgres]# source .bash_profile </code></pre> 
<h3 id="%E5%85%AB%E3%80%81%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E5%88%B0postgres%E5%B9%B6%E4%BD%BF%E7%94%A8initdb%E5%88%9D%E4%BD%BF%E7%94%A8%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93"><strong>八、切换用户到postgres并使用initdb初使用化数据库</strong></h3> 
<pre><code>[root@weekend02 postgres]# su - postgres

[postgres@weekend02 ~]$ initdb
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale "zh_CN.UTF-8".
The default database encoding has accordingly been set to "UTF8".
initdb: could not find suitable text search configuration for locale "zh_CN.UTF-8"
The default text search configuration will be set to "simple".

Data page checksums are disabled.

fixing permissions on existing directory /pgsql/postgresql/data ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting dynamic shared memory implementation ... posix
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
syncing data to disk ... ok

WARNING: enabling "trust" authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    pg_ctl -D /pgsql/postgresql/data -l logfile start</code></pre> 
<p>可以看到 /pgsql/postgresql/data已经有文件了。</p> 
<pre><code>[postgres@weekend02 /]$ cd /pgsql/postgresql/data

[postgres@weekend02 data]$ ls
base          pg_ident.conf  pg_serial     pg_tblspc    postgresql.auto.conf
global        pg_logical     pg_snapshots  pg_twophase  postgresql.conf
pg_commit_ts  pg_multixact   pg_stat       PG_VERSION
pg_dynshmem   pg_notify      pg_stat_tmp   pg_wal
pg_hba.conf   pg_replslot    pg_subtrans   pg_xact</code></pre> 
<h3 id="%E4%B9%9D%E3%80%81%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1"><strong>九、配置服务</strong></h3> 
<p><strong>修改/pgsql/postgresql/data目录下的两个文件。</strong></p> 
<p>postgresql.conf   配置PostgreSQL数据库服务器的相应的参数。  </p> 
<p>pg_hba.conf        配置对数据库的访问权限。</p> 
<pre><code>[postgres@weekend02 data]$ vi postgresql.conf 

listen_addresses = '*'                  # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost'; use '*' for all
                                        # (change requires restart)
#port = 5432                            # (change requires restart)</code></pre> 
<p>其中，参数“listen_addresses”表示监听的IP地址，默认是在localhost处监听，也就是127.0.0.1的ip地址上监听，只接受来自本机localhost的连接请求，这会让远程的主机无法登陆这台数据库，如果想从其他的机器上登陆这台数据库，需要把监听地址改为实际网络的地址，一种简单的方法是，将行开头的#去掉，把这个地址改为*，表示在本地的所有地址上监听。</p> 
<pre><code>[postgres@weekend02 data]$ vi pg_hba.conf </code></pre> 
<p>找到最下面这一行 ，这样局域网的人才能访问。红色为新添加内容。</p> 
<p># IPv4 local connections:<br><span style="color:#f33b45;"><strong>host    all             all             0.0.0.0/0                  trust</strong></span><br> host    all             all             127.0.0.1/32            trust</p> 
<h3 id="%E5%8D%81%E3%80%81%E8%AE%BE%E7%BD%AEPostgreSQL%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"><strong>十、设置PostgreSQL开机自启动</strong></h3> 
<p>PostgreSQL的开机自启动脚本位于PostgreSQL源码目录的contrib/start-scripts路径下。</p> 
<p>linux文件即为linux系统上的启动脚本</p> 
<pre><code>[postgres@weekend02 pgsql]$ cd /pgsql/postgresql-11.1/contrib/start-scripts
[postgres@weekend02 start-scripts]$ ls
freebsd  linux  macos</code></pre> 
<p>1）切换为root用户，修改linux文件属性，添加X属性</p> 
<pre><code>[root@weekend02 start-scripts]# chmod a+x linux</code></pre> 
<p>2) 复制linux文件到/etc/init.d目录下，更名为postgresql</p> 
<pre><code>[root@weekend02 start-scripts]# cp linux /etc/init.d/postgresql</code></pre> 
<p>3）修改/etc/init.d/postgresql文件的两个变量</p> 
<p>prefix设置为postgresql的安装路径：/pgsql/postgresql</p> 
<p>PGDATA设置为postgresql的数据目录路径：/pgsql/postgresql/data</p> 
<p>4）设置postgresql服务开机自启动</p> 
<pre><code>[root@weekend02 init.d]# chkconfig --add postgresql</code></pre> 
<p>查看开机自启动服务设置成功。</p> 
<pre><code>[root@weekend02 init.d]# chkconfig

postgresql         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭</code></pre> 
<p>5）编辑/etc/sysconfig/iptables文件开放5432端口。</p> 
<pre><code>[root@weekend02 sysconfig]# cd /etc/sysconfig
[root@weekend02 sysconfig]# vi iptables</code></pre> 
<p>添加以下内容</p> 
<pre><code>-A INPUT -p tcp -m tcp --dport 5432 -j ACCEPT</code></pre> 
<p>重启服务</p> 
<pre><code>[root@weekend02 sysconfig]# /etc/init.d/iptables restart
iptables：清除防火墙规则：                                 [确定]
iptables：将链设置为政策 ACCEPT：filter           [确定]
iptables：正在卸载模块：                                     [确定]
iptables：应用防火墙规则：                                 [确定]</code></pre> 
<p>查看端口是否开放</p> 
<pre><code>[root@weekend02 sysconfig]# /sbin/iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED 
ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0           
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:5432 
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 
REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited 

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited 

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination   </code></pre> 
<p>6）执行service postgresql start，启动PostgreSQL服务</p> 
<pre><code>[root@weekend02 init.d]# service postgresql start
Starting PostgreSQL: ok</code></pre> 
<p>查看PostgreSQL服务</p> 
<pre><code>[root@weekend02 init.d]# ps -ef | grep postgres
root      12040   3014  0 Dec15 pts/0    00:00:00 su - postgres
postgres  12041  12040  0 Dec15 pts/0    00:00:00 -bash
postgres  12177      1  0 00:29 ?        00:00:00 /pgsql/postgresql/bin/postmaster -D /pgsql/postgresql/data
postgres  12179  12177  0 00:29 ?        00:00:00 postgres: checkpointer                                    
postgres  12180  12177  0 00:29 ?        00:00:00 postgres: background writer                               
postgres  12181  12177  0 00:29 ?        00:00:00 postgres: walwriter                                       
postgres  12182  12177  0 00:29 ?        00:00:00 postgres: autovacuum launcher                             
postgres  12183  12177  0 00:29 ?        00:00:00 postgres: stats collector                                 
postgres  12184  12177  0 00:29 ?        00:00:00 postgres: logical replication launcher                    
root      12198  12132  0 00:30 pts/0    00:00:00 grep postgres</code></pre> 
<h3 id="%E5%8D%81%E4%B8%80%E3%80%81%E5%BC%80%E5%A7%8B%E6%B5%8B%E8%AF%95">十一、开始测试</h3> 
<p>切换为postgres用户，进入客户端：</p> 
<pre><code>$ su - postgres
$ psql</code></pre> 
<p><a name="t10"></a><a id="_54"></a>创建数据库用户</p> 
<p>赋予账号权限</p> 
<p>新建数据库<br> 退出</p> 
<pre><code>[postgres@weekend02 ~]$ psql 
psql (11.1)
Type "help" for help.

postgres=# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(3 rows)

postgres=# create user pg password 'pg';
CREATE ROLE
postgres=# ALTER ROLE pg SUPERUSER;
ALTER ROLE
postgres=# create database pg;
CREATE DATABASE
postgres=# \q</code></pre> 
<p>重新登录数据库<br> 输入密码<br> 显示数据库</p> 
<pre><code>[postgres@weekend02 ~]$ psql -U pg -d pg -h weekend02
psql (11.1)
Type "help" for help.

pg=# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 pg        | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(4 rows)

pg=# </code></pre> 
<p>说明数据库安装成功。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69f5ee6da79e948ffeb8f15d93e82153/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IPsec 配置干货,理论&#43;配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c05b0c47fe2050c0216bd96f858437a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java时间戳与Php时间戳精度转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>