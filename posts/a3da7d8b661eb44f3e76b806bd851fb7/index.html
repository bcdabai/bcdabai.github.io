<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序第五篇：页面弹出效果及共享元素动画 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序第五篇：页面弹出效果及共享元素动画" />
<meta property="og:description" content="系列文章传送门：
微信小程序第一篇：自定义组件详解
微信小程序第二篇：七种主流通信方法详解
微信小程序第三篇：获取页面节点信息
微信小程序第四篇：生成图片并保存到手机相册
目录
一、page-caontainer 实现假页弹出
二、share-element 实现共享元素动画
首先我们先看一下要完成的效果：
我们要实现的效果就是点击歌单图片的时候，弹出一个假页并且伴随动画效果，当退出假页页面的时候，假页的歌单封面图会缩小到歌单页的封面图大小，并且移动到相应的位置。
一、page-caontainer 实现假页弹出 我们先看一下官网对于 page-container 的介绍：
小程序如果在页面内进行复杂的界面设计（如在页面内弹出半屏的弹窗、在页面内加载一个全屏的子页面等），用户进行返回操作会直接离开当前页面，不符合用户预期，预期应为关闭当前弹出的组件。 为此提供“假页”容器组件，效果类似于 popup 弹出层，页面内存在该容器时，当用户进行返回操作，关闭该容器不关闭页面。返回操作包括三种情形，右滑手势、安卓物理返回键和调用 navigateBack 接口。
也就是说它主要是帮助我们实现一些 popup 组件的效果，值得注意的是，position属性用来控制弹出位置，如果为 center ，则会有假页效果。如果为 top 或者 bottom 则是 popup 效果，如果为 right 就和新页面一样，是从右向左的效果。
下面我们就把需要包裹的元素都放在 page-container 标签中：
通过 showCover 来控制假页的显示与隐藏，当单击歌单页封面图时让 showCover 为 true，在假页页面点击背景图或者返回按钮时就让 showCover 为 false，duration 属性控制动画的持续时间。这样我们就成功实现了假页的弹出效果。
二、share-element 实现共享元素动画 为什么叫共享元素动画呢，因为在歌单页和假页的图片在我们看来默认他们就是一种元素，但是代码不知道呀，所以需要 key 属性进行标记，被 share-element 标签包裹，且 key 属性相同的元素就是一对共享元素。
在歌单页包裹封面图元素：
注意：关于位置，大小等 css 属性要放在 share-element 标签上，否则不能正确实现动画效果。
在假页包裹封面图元素：
share-element 上 duration 属性控制动画时间，transform 来控制是否发生动画。因为我们只想在返回的时候发生动画，所以在进入假页的时候一直让 showAnimate 属性为 false ，当点击假页背景返回的时候再开始动画，就有了开头的效果。是不是很简单呀！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a3da7d8b661eb44f3e76b806bd851fb7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-09T17:41:29+08:00" />
<meta property="article:modified_time" content="2022-12-09T17:41:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序第五篇：页面弹出效果及共享元素动画</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>系列文章传送门：</p> 
 <p><a href="https://blog.csdn.net/qq_49900295/article/details/128057312" title="微信小程序第一篇：自定义组件详解">微信小程序第一篇：自定义组件详解</a></p> 
 <p><a href="https://blog.csdn.net/qq_49900295/article/details/128057336" title="微信小程序第二篇：七种主流通信方法详解">微信小程序第二篇：七种主流通信方法详解</a></p> 
 <p><a href="https://blog.csdn.net/qq_49900295/article/details/128057570" title="微信小程序第三篇：获取页面节点信息">微信小程序第三篇：获取页面节点信息</a></p> 
 <p><a class="link-info" href="https://blog.csdn.net/qq_49900295/article/details/128252612?spm=1001.2014.3001.5502" title="微信小程序第四篇：生成图片并保存到手机相册">微信小程序第四篇：生成图片并保存到手机相册</a></p> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81page-caontainer%20%E5%AE%9E%E7%8E%B0%E5%81%87%E9%A1%B5%E5%BC%B9%E5%87%BA-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81page-caontainer%20%E5%AE%9E%E7%8E%B0%E5%81%87%E9%A1%B5%E5%BC%B9%E5%87%BA" rel="nofollow">一、page-caontainer 实现假页弹出</a></p> 
<p id="%E4%BA%8C%E3%80%81share-element%20%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81share-element%20%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB" rel="nofollow">二、share-element 实现共享元素动画</a></p> 
<hr id="hr-toc"> 
<p>首先我们先看一下要完成的效果：</p> 
<p> <img alt="" height="649" src="https://images2.imgbox.com/83/58/Fg4axDMI_o.gif" width="300"></p> 
<p>我们要实现的效果就是点击歌单图片的时候，弹出一个假页并且伴随动画效果，当退出假页页面的时候，假页的歌单封面图会缩小到歌单页的封面图大小，并且移动到相应的位置。</p> 
<p></p> 
<h3 id="%E4%B8%80%E3%80%81page-caontainer%20%E5%AE%9E%E7%8E%B0%E5%81%87%E9%A1%B5%E5%BC%B9%E5%87%BA">一、page-caontainer 实现假页弹出</h3> 
<p>我们先看一下官网对于 page-container 的介绍：</p> 
<blockquote> 
 <p><span style="background-color:#fefcd8;">小程序如果在页面内进行复杂的界面设计（如在页面内弹出半屏的弹窗、在页面内加载一个全屏的子页面等），用户进行返回操作会直接离开当前页面，不符合用户预期，预期应为关闭当前弹出的组件。 为此提供“假页”容器组件，效果类似于 </span><code><span style="background-color:#fefcd8;">popup</span></code><span style="background-color:#fefcd8;"> 弹出层，页面内存在该容器时，当用户进行返回操作，关闭该容器不关闭页面。返回操作包括三种情形，右滑手势、安卓物理返回键和调用 </span><code><span style="background-color:#fefcd8;">navigateBack</span></code><span style="background-color:#fefcd8;"> 接口。</span></p> 
</blockquote> 
<p>也就是说它主要是帮助我们实现一些 popup 组件的效果，值得注意的是，position属性用来控制弹出位置，如果为 center ，则会有假页效果。如果为 top 或者 bottom 则是 popup 效果，如果为 right 就和新页面一样，是从右向左的效果。</p> 
<p><strong><span style="color:#1c7892;"><span style="background-color:#e7fafa;">下面我们就把需要包裹的元素都放在 page-container 标签中：</span></span></strong></p> 
<p><img alt="" height="560" src="https://images2.imgbox.com/6f/62/Arkx5x7V_o.png" width="1200"></p> 
<p> 通过 showCover 来控制假页的显示与隐藏，当单击歌单页封面图时让 showCover 为 true，在假页页面点击背景图或者返回按钮时就让 showCover 为 false，duration 属性控制动画的持续时间。这样我们就成功实现了假页的弹出效果。</p> 
<p></p> 
<h3 id="%E4%BA%8C%E3%80%81share-element%20%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB">二、share-element 实现共享元素动画</h3> 
<p>为什么叫共享元素动画呢，因为在歌单页和假页的图片在我们看来默认他们就是一种元素，但是代码不知道呀，所以需要 key 属性进行标记，被 share-element 标签包裹，且 key 属性相同的元素就是一对共享元素。</p> 
<p>在歌单页包裹封面图元素：</p> 
<p><img alt="" height="135" src="https://images2.imgbox.com/04/30/I6fGd4F9_o.png" width="1200"></p> 
<p><strong><span style="color:#be191c;"><span style="background-color:#fef2f0;">注意：关于位置，大小等 css 属性要放在 share-element 标签上，否则不能正确实现动画效果。</span></span></strong></p> 
<p>在假页包裹封面图元素：</p> 
<p><img alt="" height="119" src="https://images2.imgbox.com/41/d7/xFuIX3xj_o.png" width="1200"></p> 
<p>share-element 上 duration 属性控制动画时间，transform 来控制是否发生动画。因为我们只想在返回的时候发生动画，所以在进入假页的时候一直让 showAnimate 属性为 false ，当点击假页背景返回的时候再开始动画，就有了开头的效果。是不是很简单呀！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e87efdeb871818b1091e6cc17c50412b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python java lambda表达式自定义排序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bd86081c0113eab12a5d21afe205d6f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">分分钟搭建出nginx的https服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>