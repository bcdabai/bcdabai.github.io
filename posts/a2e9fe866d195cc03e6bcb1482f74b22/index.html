<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySql使用存储过程开发 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySql使用存储过程开发" />
<meta property="og:description" content="文章目录 废 话一、Navicat for MySQL1.1 连接数据库1.2 查询数据库1.2.1 打开数据库连接1.2.2 最简单的查询数据 二、创建存储过程2.1 新建存储过程2.2 编写一个存储过程2.2.1 需求2.2.2 编写存储过程体 三、应用储存过程3.1 创建Django工程3.1.1 创建Django工程，命名为【**country**】3.1.2 创建子应用【world】 3.2 配置文件【settings.py】3.2.1 安装MySql驱动MySqlClient3.2.2 数据库连接信息 3.3 路由地址【urls.py】3.2.1 创建应用路由3.3.2 添加应用路由到主路由 3.4 创建页面3.4.1 编写页面代码3.4.2 查询数据库python实现 四、查看结果4.1 启动程序4.2 通过浏览器验证结果 五、总结附件 废 话 过去初入职场时，使用Microsoft SqlServer进行开发工作，经常使用存储过程解决数据处理问题，很多变化频繁的业务逻辑，如果通过存储过程实现，在变更时，就会显得特别简单和方便。只要通过发布脚本就可实现。不得不说，当年，通过Microsoft SqlServer开发数据库及报表应用，是真的好用。
多年后的今天，发现如今的数据库应用是MySql的天下了，免费开源是真香，使用第三方工具进行MySql的开发还是不错的，不过个人感觉，开发过程不如Microsoft Sql Server官方开发环境使用方便，逻辑性更强，但是谁叫他收费呢，而且还不是一般的贵。
所谓废话少说，接下来直入主题吧。
一、Navicat for MySQL 当然，使用命令行进行开发，也是完全可以的，不过那简直是闲的蛋疼才那样干。学生时候，看到别人在“黑窗口”里敲代码，认为牛的不得了。现在再看到这样做，第一感觉是这人脑子有问题，放着简洁，美观，方便的工具不用，还用最原始的命令方式操作，您咋不用二进制写呢？所以我们选择Navicat for MySQL做为开发工具。
数据库安装过程就不说了，又不用天天安装，某度一下就解决的事。
Navicat for MySQL有绿色版本，不用安装。序列号，自己解决，下点工夫还是能找到的，某宝也就几块钱的事，我觉得与其搜索好几个小时，还不如花几块钱搞定，难道你的几个小时连几块钱都不值吗？
在安装目录下找到美丽的navicat.exe图标，双击之打开开发工具。
1.1 连接数据库 一眼就看到工具栏上有连接图标，这太醒目了，都无法形容了。
打开这个窗口时，发现其实很多内容都已经填好了。如果是安装在本机上的话，只需要随便填个名字（这个时候咱叫他“小甜甜&#34;），密码（这个不能随便输）只有你自己知道。填好之后，“连接测试”一下。他会告诉你是否连接成功。
看到这个提示时，整个人都轻松了很多。
1.2 查询数据库 1.2.1 打开数据库连接 此时我们看到，”小甜甜“已经安静的在房间时等着咱了，还不快点过陪陪他，难道要等到她变成”牛夫人“？
双击”小甜甜“也行，右击”小甜甜“也行。她都会立马开心（打开连接）的。
1.2.2 最简单的查询数据 选择一个数据库，然后【查询-&gt;新建查询】就可以打开一个查询窗口。
在窗口里输入最简单的查询语言" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a2e9fe866d195cc03e6bcb1482f74b22/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-10T10:52:24+08:00" />
<meta property="article:modified_time" content="2022-07-10T10:52:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySql使用存储过程开发</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#__3" rel="nofollow">废 话</a></li><li><a href="#Navicat_for_MySQL_12" rel="nofollow">一、Navicat for MySQL</a></li><li><ul><li><a href="#11__23" rel="nofollow">1.1 连接数据库</a></li><li><a href="#12__30" rel="nofollow">1.2 查询数据库</a></li><li><ul><li><a href="#121__31" rel="nofollow">1.2.1 打开数据库连接</a></li><li><a href="#122__36" rel="nofollow">1.2.2 最简单的查询数据</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_48" rel="nofollow">二、创建存储过程</a></li><li><ul><li><a href="#21__53" rel="nofollow">2.1 新建存储过程</a></li><li><a href="#22__61" rel="nofollow">2.2 编写一个存储过程</a></li><li><ul><li><a href="#221__62" rel="nofollow">2.2.1 需求</a></li><li><a href="#222__64" rel="nofollow">2.2.2 编写存储过程体</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_101" rel="nofollow">三、应用储存过程</a></li><li><ul><li><a href="#31_Django_103" rel="nofollow">3.1 创建Django工程</a></li><li><ul><li><a href="#311_Djangocountry_104" rel="nofollow">3.1.1 创建Django工程，命名为【**country**】</a></li><li><a href="#312_world_106" rel="nofollow">3.1.2 创建子应用【world】</a></li></ul> 
   </li><li><a href="#32_settingspy_108" rel="nofollow">3.2 配置文件【settings.py】</a></li><li><ul><li><a href="#321_MySqlMySqlClient_111" rel="nofollow">3.2.1 安装MySql驱动MySqlClient</a></li><li><a href="#322__126" rel="nofollow">3.2.2 数据库连接信息</a></li></ul> 
   </li><li><a href="#33_urlspy_162" rel="nofollow">3.3 路由地址【urls.py】</a></li><li><ul><li><a href="#321__181" rel="nofollow">3.2.1 创建应用路由</a></li><li><a href="#332__195" rel="nofollow">3.3.2 添加应用路由到主路由</a></li></ul> 
   </li><li><a href="#34__207" rel="nofollow">3.4 创建页面</a></li><li><ul><li><a href="#341__210" rel="nofollow">3.4.1 编写页面代码</a></li><li><a href="#342_python_264" rel="nofollow">3.4.2 查询数据库python实现</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_301" rel="nofollow">四、查看结果</a></li><li><ul><li><a href="#41__302" rel="nofollow">4.1 启动程序</a></li><li><a href="#42__324" rel="nofollow">4.2 通过浏览器验证结果</a></li></ul> 
  </li><li><a href="#_338" rel="nofollow">五、总结</a></li><li><a href="#_345" rel="nofollow">附件</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="__3"></a>废 话</h2> 
<p>过去初入职场时，使用Microsoft SqlServer进行开发工作，经常使用存储过程解决数据处理问题，很多变化频繁的业务逻辑，如果通过存储过程实现，在变更时，就会显得特别简单和方便。只要通过发布脚本就可实现。不得不说，当年，通过Microsoft SqlServer开发数据库及报表应用，是真的好用。</p> 
<p>多年后的今天，发现如今的数据库应用是MySql的天下了，免费开源是真香，使用第三方工具进行MySql的开发还是不错的，不过个人感觉，开发过程不如Microsoft Sql Server官方开发环境使用方便，逻辑性更强，但是谁叫他收费呢，而且还不是一般的贵。</p> 
<p>所谓废话少说，接下来直入主题吧。</p> 
<hr> 
<h2><a id="Navicat_for_MySQL_12"></a>一、Navicat for MySQL</h2> 
<p>当然，使用命令行进行开发，也是完全可以的，不过那简直是闲的蛋疼才那样干。学生时候，看到别人在“黑窗口”里敲代码，认为牛的不得了。现在再看到这样做，第一感觉是这人脑子有问题，放着简洁，美观，方便的工具不用，还用最原始的命令方式操作，您咋不用二进制写呢？所以我们选择Navicat for MySQL做为开发工具。</p> 
<p>数据库安装过程就不说了，又不用天天安装，某度一下就解决的事。<br> Navicat for MySQL有绿色版本，不用安装。序列号，自己解决，下点工夫还是能找到的，某宝也就几块钱的事，我觉得与其搜索好几个小时，还不如花几块钱搞定，难道你的几个小时连几块钱都不值吗？</p> 
<p>在安装目录下找到美丽的navicat.exe图标，双击之打开开发工具。<br> <img src="https://images2.imgbox.com/3d/5c/Zg97HWng_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="11__23"></a>1.1 连接数据库</h3> 
<p>一眼就看到工具栏上有连接图标，这太醒目了，都无法形容了。<br> <img src="https://images2.imgbox.com/b9/26/rIbkebGh_o.png" alt="在这里插入图片描述"><br> 打开这个窗口时，发现其实很多内容都已经填好了。如果是安装在本机上的话，只需要随便填个名字（这个时候咱叫他“小甜甜"），密码（这个不能随便输）只有你自己知道。填好之后，“连接测试”一下。他会告诉你是否连接成功。<br> <img src="https://images2.imgbox.com/8c/96/wLJpm5AA_o.png" alt="在这里插入图片描述"><br> 看到这个提示时，整个人都轻松了很多。<br> <img src="https://images2.imgbox.com/9b/bd/euAa33SQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__30"></a>1.2 查询数据库</h3> 
<h4><a id="121__31"></a>1.2.1 打开数据库连接</h4> 
<p>此时我们看到，”小甜甜“已经安静的在房间时等着咱了，还不快点过陪陪他，难道要等到她变成”牛夫人“？<br> <img src="https://images2.imgbox.com/da/68/t76Xiz6W_o.png" alt="在这里插入图片描述"><br> 双击”小甜甜“也行，右击”小甜甜“也行。她都会立马开心（打开连接）的。<br> <img src="https://images2.imgbox.com/60/ac/8NE974Rx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="122__36"></a>1.2.2 最简单的查询数据</h4> 
<p>选择一个数据库，然后【查询-&gt;新建查询】就可以打开一个查询窗口。<br> <img src="https://images2.imgbox.com/79/85/fGg0dkn6_o.png" alt="在这里插入图片描述"><br> 在窗口里输入最简单的查询语言</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> country<span class="token punctuation">;</span>
</code></pre> 
<p>”运行“，数据展现在了"结果1”中。<br> <img src="https://images2.imgbox.com/51/f6/lI25a6xH_o.png" alt="在这里插入图片描述"><br> 到现在mysql数据库，已经完美的安装，并可正常使用了。开心不！</p> 
<h2><a id="_48"></a>二、创建存储过程</h2> 
<p>MySql这个“函数”让我困扰了很久，一度以为MySql不支持存储过程，而我好几年面对的都没有一个对MySql溜的知道这个问题，或都说他们故意不告诉我，因为在Microsoft SqlServer中，函数和存储过程是分开两个节点的，所以创建函数就是创建函数，创建存储过程就是存储过程。而MySql把函数和存储过程都归类在函数的子项。</p> 
<p><img src="https://images2.imgbox.com/67/af/PrLGzDsy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21__53"></a>2.1 新建存储过程</h3> 
<ol><li>右键【函数-&gt;新建函数】，选择【过程】，【下一步】<br> <img src="https://images2.imgbox.com/a3/9a/IfrnVyvL_o.png" alt="在这里插入图片描述"></li><li>配置参数，注意，这里的类型，选择varchar时，后面需要自己填上长度。否则在使用存储过程时会出错。当然，编写存储过程体时也可以再修改变量。</li><li>【完成】打开编辑窗口。<br> <img src="https://images2.imgbox.com/1e/1e/BsD75Z2B_o.png" alt="在这里插入图片描述"></li><li>存储过程体就写在”BEGIN"和“END"内。在参数区可以对参数进行修改。<br> <img src="https://images2.imgbox.com/b1/4b/OMCvdRgz_o.png" alt="在这里插入图片描述"></li></ol> 
<h3><a id="22__61"></a>2.2 编写一个存储过程</h3> 
<h4><a id="221__62"></a>2.2.1 需求</h4> 
<p>就在上文的样例数据库world中的country表中查询某洲，超过某个数据人口的国家。</p> 
<h4><a id="222__64"></a>2.2.2 编写存储过程体</h4> 
<ol><li>常用的查询脚本<br> 通常使用的查询脚本，<strong>例如：</strong> 查询亚洲，超过10亿人的国家</li></ol> 
<pre><code class="prism language-sql"><span class="token comment"># 查询亚洲，超过10亿人的国家</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> country
<span class="token keyword">WHERE</span> Continent <span class="token operator">=</span> <span class="token string">'Asia'</span> <span class="token operator">And</span> Population <span class="token operator">&gt;</span> <span class="token number">1000000000</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li> <p>存储过程<br> 这时需要把洲（Continent）人口数（Population）作为参数传给存储过程。于是先修改参数为：</p> <p><em><mark>这里要注意，参数名称不可与表字段名称相同。</mark></em></p> </li></ol> 
<pre><code class="prism language-sql"><span class="token operator">IN</span> <span class="token identifier"><span class="token punctuation">`</span>vContinent<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">IN</span> <span class="token identifier"><span class="token punctuation">`</span>lPopulation<span class="token punctuation">`</span></span> long
</code></pre> 
<p>编写脚本：</p> 
<pre><code class="prism language-sql"><span class="token keyword">BEGIN</span>
	<span class="token comment">#Routine body goes here...</span>
	<span class="token keyword">SELECT</span> <span class="token operator">*</span>
	<span class="token keyword">FROM</span> country
  <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>Continent<span class="token punctuation">`</span></span> <span class="token operator">=</span> vContinent <span class="token operator">And</span> <span class="token identifier"><span class="token punctuation">`</span>Population<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> lPopulation
<span class="token punctuation">;</span>
<span class="token keyword">END</span>
</code></pre> 
<p>保存存储过程（点【<strong>保存</strong>】或者<strong>Ctrl+s</strong>）：<br> 填写一个实用的名字就可以了。<br> <img src="https://images2.imgbox.com/1e/06/exP4BkDD_o.png" alt="在这里插入图片描述"><br> 执行存储过程（点【<strong>运行</strong>】）<br> 先输入参数，再【<strong>确定</strong>】<br> <img src="https://images2.imgbox.com/74/93/kZw0BwzT_o.png" alt="在这里插入图片描述"><br> 此时在【<strong>结果1</strong>】中可以看到查询到的结果。<br> <img src="https://images2.imgbox.com/a9/29/dmdeIjBY_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_101"></a>三、应用储存过程</h2> 
<p>使用Python环境，Django框架查询并显示数据。</p> 
<h3><a id="31_Django_103"></a>3.1 创建Django工程</h3> 
<h4><a id="311_Djangocountry_104"></a>3.1.1 创建Django工程，命名为【<strong>country</strong>】</h4> 
<p><em><mark>这里创建过程忽略</mark></em></p> 
<h4><a id="312_world_106"></a>3.1.2 创建子应用【world】</h4> 
<p><em><mark>创建过程忽略</mark></em></p> 
<h3><a id="32_settingspy_108"></a>3.2 配置文件【settings.py】</h3> 
<p>打开配置文件【country-&gt;country-&gt;settings.py】<br> <img src="https://images2.imgbox.com/4a/aa/9oteP7ie_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="321_MySqlMySqlClient_111"></a>3.2.1 安装MySql驱动MySqlClient</h4> 
<p>在命令行直接执行：</p> 
<pre><code class="prism language-powershell">pip install mysqlclient
</code></pre> 
<p>这个大概率会报错。于是我们可以通过把对应文件下载到本地。下载地址就是pip源地址。在源目录里依据机器python版本来选择具体要下载的文件。<br> <a href="https://pypi.tuna.tsinghua.edu.cn/simple/mysqlclient/" rel="nofollow">清华源的mysqlclient下载连接</a><br> 下载到本地之后，在命令行导航到下载目录，然后执行pip命令。<br> 下图是下载的mysqlclient 2.0.4版本，实用于python3.6版本的windows64位版本。<br> <img src="https://images2.imgbox.com/04/c3/ebe9S2En_o.png" alt="在这里插入图片描述"><br> 执行后，显示mysqlclient成功安装完成。<br> 通过pip list命令列出所有安装的包，可以找到安装好的mysqlclient.<br> <img src="https://images2.imgbox.com/78/c8/mb6jEy2C_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="322__126"></a>3.2.2 数据库连接信息</h4> 
<ol><li>配置充许访问服务器的范围为任何主机</li></ol> 
<pre><code class="prism language-python">ALLOWED_HOSTS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">]</span>
</code></pre> 
<ol start="2"><li>添加app到配置文件列表</li></ol> 
<pre><code class="prism language-python">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>
    <span class="token string">'world.apps.WorldConfig'</span><span class="token punctuation">,</span>  <span class="token comment"># 添加创建的应用，也可以写成'world',</span>
<span class="token punctuation">]</span>
</code></pre> 
<ol start="3"><li>修改【DATABASE】默认数据库连接信息为：</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">DATABASES</span> <span class="token operator">=</span> {
    <span class="token string">'default'</span>: {
        <span class="token string">'ENGINE'</span>: <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span>
        <span class="token string">'NAME'</span>: <span class="token string">'world'</span><span class="token punctuation">,</span>
        <span class="token string">'HOST'</span>: <span class="token string">'localhost'</span><span class="token punctuation">,</span>
        <span class="token string">'PORT'</span>: <span class="token number">3306</span><span class="token punctuation">,</span>
        <span class="token string">'USER'</span>: <span class="token string">'root'</span><span class="token punctuation">,</span>
        <span class="token string">'PASSWORD'</span>: <span class="token string">'Aa@123456'</span><span class="token punctuation">,</span>
        <span class="token string">'CHARSET'</span>: <span class="token string">'utf8'</span>
    }
}
</code></pre> 
<h3><a id="33_urlspy_162"></a>3.3 路由地址【urls.py】</h3> 
<p>打开主路由文件【country-&gt;country-&gt;urls.py】<br> <img src="https://images2.imgbox.com/20/53/wfcECx97_o.png" alt="在这里插入图片描述"><br> 添加如下代码，让使可能通过主路由路由到应用中。</p> 
<pre><code class="prism language-python">path<span class="token punctuation">(</span><span class="token string">'world/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">"world.urls"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> 
<p>添加后文件内容如下样式:</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'world/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">"world.urls"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

</code></pre> 
<h4><a id="321__181"></a>3.2.1 创建应用路由</h4> 
<p>在【country-&gt;world】目录下创建urls.py文件<br> <mark>可完成后面查询数据代码后再添加这里内容</mark><br> 引用了views.py文件中定义的视图类World。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path
<span class="token keyword">from</span> world<span class="token punctuation">.</span>views <span class="token keyword">import</span> World

app_name <span class="token operator">=</span> <span class="token string">'world'</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> World<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
</code></pre> 
<h4><a id="332__195"></a>3.3.2 添加应用路由到主路由</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'world/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">"world.urls"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="34__207"></a>3.4 创建页面</h3> 
<p>在目录【country-&gt;template】下，创建html文件【index.html】<br> <img src="https://images2.imgbox.com/d3/92/1G08dRPu_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="341__210"></a>3.4.1 编写页面代码</h4> 
<p>这里需要在后端返回名为data的数据集（此代码在【country-&gt;world-&gt;views.py】文件中实现。</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>各大洲的国家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">table</span><span class="token punctuation">{<!-- --></span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> darkgray<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">table thead</span><span class="token punctuation">{<!-- --></span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> deepskyblue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">table tbody</span><span class="token punctuation">{<!-- --></span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
{% csrf_token %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>continentInput<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>洲：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>continentInput<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>continentInput<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>populationInput<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>人口：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>populationInput<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>populationInput<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>查询<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>查询<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
{% if data == None %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ strtip }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
{% else %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>名称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>洲<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>地区<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>国土面积<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>人口<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
        {% for item in data %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.1 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.2 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.3 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.4 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ item.6 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        {% endfor %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
{% endif %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="342_python_264"></a>3.4.2 查询数据库python实现</h4> 
<p>打开【country-&gt;world-&gt;views.py】文件，编辑如下代码：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render

<span class="token comment"># Create your views here.</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> View
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> connection


<span class="token keyword">class</span> <span class="token class-name">World</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>

        strtip <span class="token operator">=</span> <span class="token string">'请通过洲名和人口数查询'</span>
        data <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> template_name<span class="token operator">=</span><span class="token string">"world/index.html"</span><span class="token punctuation">,</span> context<span class="token operator">=</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        continent_name <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"continentInput"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        population <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"populationInput"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">with</span> connection<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cursor<span class="token punctuation">:</span>
            sql <span class="token operator">=</span> <span class="token string">"call sp_get_countrys(%(continent)s,%(population)s)"</span>
            params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">'continent'</span><span class="token punctuation">:</span> continent_name<span class="token punctuation">,</span>
                <span class="token string">'population'</span><span class="token punctuation">:</span> population<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>

            <span class="token comment"># callproc 无法返回数据表</span>
            <span class="token comment"># cursor.callproc(sql, params=params)</span>
            
            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params<span class="token punctuation">)</span>
            data <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> template_name<span class="token operator">=</span><span class="token string">"world/index.html"</span><span class="token punctuation">,</span> context<span class="token operator">=</span><span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_301"></a>四、查看结果</h2> 
<h3><a id="41__302"></a>4.1 启动程序</h3> 
<ol><li>确认命令行当前位于根目录，即manage.py文件所在的目录。<br> <img src="https://images2.imgbox.com/ae/b9/yui7QK52_o.png" alt="在这里插入图片描述"></li><li>输入启动命令</li></ol> 
<pre><code class="prism language-powershell">python manage<span class="token punctuation">.</span>py runserver 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:8000
</code></pre> 
<p>如下样式，表示工程成功启动，就可以通过浏览器打开页面了。</p> 
<pre><code class="prism language-powershell">
<span class="token punctuation">(</span>country<span class="token punctuation">)</span> D:\PyCharm 4<span class="token punctuation">.</span>5<span class="token punctuation">.</span>3\MyProject\01<span class="token punctuation">.</span>查询MySql数据\country&gt;python manage<span class="token punctuation">.</span>py runserver 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:8000
Watching <span class="token keyword">for</span> file changes with StatReloader
Performing system checks<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

System check identified no issues <span class="token punctuation">(</span>0 silenced<span class="token punctuation">)</span><span class="token punctuation">.</span>
July 09<span class="token punctuation">,</span> 2022 <span class="token operator">-</span> 19:13:56
Django version 3<span class="token punctuation">.</span>2<span class="token punctuation">.</span>14<span class="token punctuation">,</span> <span class="token keyword">using</span> settings <span class="token string">'country.settings'</span>
Starting development server at http:<span class="token operator">/</span><span class="token operator">/</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:8000/
Quit the server with CTRL-<span class="token keyword">BREAK</span><span class="token punctuation">.</span>

</code></pre> 
<h3><a id="42__324"></a>4.2 通过浏览器验证结果</h3> 
<ol><li>在浏览器地址栏输入url：</li></ol> 
<pre><code class="prism language-markup">http://127.0.0.1:8000/world/
或者
http://localhost:8000/world/
</code></pre> 
<ol start="2"><li>浏览器加载出这样的内容，这是从后台<strong>get</strong>到的内容。<br> <img src="https://images2.imgbox.com/73/4c/GOWyaIPC_o.png" alt="在这里插入图片描述"></li><li>输入参数（Asia, 100000000)点击【<strong>查询</strong>】：<br> <img src="https://images2.imgbox.com/44/77/XlGhvfI3_o.png" alt="在这里插入图片描述"><br> 在亚洲，人口数量大于100000000的国家列表就显示出来了。<br> <img src="https://images2.imgbox.com/ad/30/IpwxDcmZ_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="_338"></a>五、总结</h2> 
<p>内容较多，包括了前端后端，数据库等，并非难点知识。但要学会这些，还是有不少内容的。比如sql语言，Html，python，还要熟悉django框架。</p> 
<p>尽量详细的描述，希望能给已经做好心理准备想做码农的有所帮助。</p> 
<p>一向的目的就是能让一点都不懂的读者，在不用消耗太多脑细胞的情况下，能够完整的理解知识。</p> 
<h2><a id="_345"></a>附件</h2> 
<p><a href="https://download.csdn.net/download/all_night_in/85983531">本文源码下载</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8605ee85695fb107b1023ab804b6e5bc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">渗透测试 ( 9 ) --- 社会工程攻击工具 setoolkit</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/28186dd44e68d7cc66e307a9e5432183/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot的消息转换器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>