<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CASå®ç°SSOå•ç‚¹ç™»å½•ä¹‹æœåŠ¡æ­å»º - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CASå®ç°SSOå•ç‚¹ç™»å½•ä¹‹æœåŠ¡æ­å»º" />
<meta property="og:description" content="CASå•ç‚¹ç™»å½• æ–‡ç« ç›®å½• CASå•ç‚¹ç™»å½•1. What is CAS?1. å®˜ç½‘åŠæ–‡æ¡£2. å…³äºCASCAS provides enterprise single sign-on service for the Web:CASä¸ºWebæä¾›ä¼ä¸šå•ä¸€ç™»å½•æœåŠ¡ï¼š3. CAS-Java-Client-Downlaod 2. Dockerå®‰è£…3. Tomcatä¸­æ­å»ºHTTPSè¯·æ±‚çš„æ”¯æŒ1. ç”Ÿæˆå¯†é’¥åº“2. ä»å¯†é’¥åº“å¯¼å‡ºè¯ä¹¦3. å°†è¯ä¹¦å¯¼å…¥åˆ°JDKè¯ä¹¦åº“ä¸­4.Tomcatä¸­çš„Server.xmlé…ç½®httpsåè®®çš„æ”¯æŒ5. ä¸‹è½½CAS Serverç«¯éƒ¨ç½²åˆ°Tomcatä¸­6. CASé…ç½®æ•°æ®æº1.application.propertiesä¸­é…ç½®æ•°æ®æº2. åŠ å…¥è¿æ¥æ•°æ®æºçš„é©±åŠ¨åˆ°libä¸­ 4. å¸¸è§é—®é¢˜å¤„ç†ï¼š1. æœªè®¤è¯æˆæƒçš„æœåŠ¡ 1. What is CAS? 1. å®˜ç½‘åŠæ–‡æ¡£ CASå®˜ç½‘ï¼šhttps://www.apereo.org/projects/cas
CAS Server GitHubä¸‹è½½åœ°å€ï¼š https://github.com/apereo/cas
æ–‡æ¡£åœ°å€ï¼šhttps://apereo.github.io/cas/5.3.x/
https://github.com/apereo/cas-overlay-template
https://repo1.maven.org./maven2/cas/
2. å…³äºCAS Central Authentication Service (CAS),ä¸­å¤®è®¤è¯æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªä¼ä¸šå¤šè¯­è¨€å•ç‚¹ç™»å½•è§£å†³æ–¹æ¡ˆã€‚
Enterprise Single Sign-On - CAS provides a friendly open source community that actively supports and contributes to the project. While the project is rooted in higher-ed open source, it has grown to an international audience spanning Fortune 500 companies and small special-purpose installations." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e020bbbc6400fe2ebd8e3457aa0e594a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T08:28:27+08:00" />
<meta property="article:modified_time" content="2024-01-19T08:28:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CASå®ç°SSOå•ç‚¹ç™»å½•ä¹‹æœåŠ¡æ­å»º</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CAS_0"></a>CASå•ç‚¹ç™»å½•</h2> 
<p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><a href="#CAS_0" rel="nofollow">CASå•ç‚¹ç™»å½•</a></li><li><a href="#1_What_is_CAS_2" rel="nofollow">1. What is CAS?</a></li><li><ul><li><a href="#1__4" rel="nofollow">1. å®˜ç½‘åŠæ–‡æ¡£</a></li><li><a href="#2_CAS_16" rel="nofollow">2. å…³äºCAS</a></li><li><a href="#CAS_provides_enterprise_single_signon_service_for_the_Web_24" rel="nofollow">CAS provides enterprise single sign-on service for the Web:</a></li><li><a href="#CASWeb_35" rel="nofollow">CASä¸ºWebæä¾›ä¼ä¸šå•ä¸€ç™»å½•æœåŠ¡ï¼š</a></li><li><a href="#3_CASJavaClientDownlaod_46" rel="nofollow">3. CAS-Java-Client-Downlaod</a></li></ul> 
  </li><li><a href="#2_Docker_70" rel="nofollow">2. Dockerå®‰è£…</a></li><li><a href="#3_TomcatHTTPS_135" rel="nofollow">3. Tomcatä¸­æ­å»ºHTTPSè¯·æ±‚çš„æ”¯æŒ</a></li><li><ul><li><a href="#1__139" rel="nofollow">1. ç”Ÿæˆå¯†é’¥åº“</a></li><li><a href="#2__198" rel="nofollow">2. ä»å¯†é’¥åº“å¯¼å‡ºè¯ä¹¦</a></li><li><a href="#3_JDK_212" rel="nofollow">3. å°†è¯ä¹¦å¯¼å…¥åˆ°JDKè¯ä¹¦åº“ä¸­</a></li><li><a href="#4TomcatServerxmlhttps_261" rel="nofollow">4.Tomcatä¸­çš„Server.xmlé…ç½®httpsåè®®çš„æ”¯æŒ</a></li><li><a href="#5_CAS_ServerTomcat_277" rel="nofollow">5. ä¸‹è½½CAS Serverç«¯éƒ¨ç½²åˆ°Tomcatä¸­</a></li><li><a href="#6_CAS_295" rel="nofollow">6. CASé…ç½®æ•°æ®æº</a></li><li><ul><li><a href="#1applicationproperties_297" rel="nofollow">1.application.propertiesä¸­é…ç½®æ•°æ®æº</a></li><li><a href="#2_lib_299" rel="nofollow">2. åŠ å…¥è¿æ¥æ•°æ®æºçš„é©±åŠ¨åˆ°libä¸­</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4__301" rel="nofollow">4. å¸¸è§é—®é¢˜å¤„ç†ï¼š</a></li><li><ul><li><a href="#1__303" rel="nofollow">1. æœªè®¤è¯æˆæƒçš„æœåŠ¡</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_What_is_CAS_2"></a>1. What is CAS?</h2> 
<h3><a id="1__4"></a>1. å®˜ç½‘åŠæ–‡æ¡£</h3> 
<blockquote> 
 <p>CASå®˜ç½‘ï¼šhttps://www.apereo.org/projects/cas</p> 
 <p>CAS Server GitHubä¸‹è½½åœ°å€ï¼š https://github.com/apereo/cas</p> 
 <p>æ–‡æ¡£åœ°å€ï¼šhttps://apereo.github.io/cas/5.3.x/</p> 
 <p>https://github.com/apereo/cas-overlay-template</p> 
 <p>https://repo1.maven.org./maven2/cas/</p> 
</blockquote> 
<h3><a id="2_CAS_16"></a>2. å…³äºCAS</h3> 
<blockquote> 
 <p>Central Authentication Service (CAS),ä¸­å¤®è®¤è¯æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªä¼ä¸šå¤šè¯­è¨€å•ç‚¹ç™»å½•è§£å†³æ–¹æ¡ˆã€‚</p> 
 <p>Enterprise Single Sign-On - CAS provides a friendly open source community that actively supports and contributes to the project. While the project is rooted in higher-ed open source, it has grown to an international audience spanning Fortune 500 companies and small special-purpose installations.</p> 
 <p>ä¼ä¸šå•ä¸€ç™»å½•-CASæä¾›äº†ä¸€ä¸ªå‹å¥½çš„å¼€æºç¤¾åŒºï¼Œè¯¥ç¤¾åŒºç§¯ææ”¯æŒè¯¥é¡¹ç›®å¹¶ä¸ºè¯¥é¡¹ç›®åšå‡ºè´¡çŒ®ã€‚å°½ç®¡è¯¥é¡¹ç›®ä»¥æ›´é«˜ç‰ˆæœ¬çš„å¼€æºä¸ºæ ¹åŸºï¼Œä½†å·²ç»å¸å¼•äº†å›½é™…è¯»è€…ï¼Œæ¶µç›–äº†ã€Šè´¢å¯Œã€‹ 500å¼ºå…¬å¸å’Œå°å‹ä¸“ç”¨è£…ç½®ã€‚</p> 
 <h3><a id="CAS_provides_enterprise_single_signon_service_for_the_Web_24"></a>CAS provides enterprise single sign-on service for the Web:</h3> 
 <ul><li>An open and well-documented protocol</li><li>An open-source Java server component</li><li>Pluggable authentication support (LDAP, database, X.509, 2-factor)</li><li>Support for multiple protocols (CAS, SAML, OAuth, OpenID)</li><li>A library of clients for Java, .Net, PHP, Perl, Apache, <a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>, and others</li><li>Integrates with <a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>, BlueSocket, TikiWiki, Mule, Liferay, Moodle and others</li><li>Community documentation and implementation support</li><li>An extensive community of adopters</li></ul> 
 <h3><a id="CASWeb_35"></a>CASä¸ºWebæä¾›ä¼ä¸šå•ä¸€ç™»å½•æœåŠ¡ï¼š</h3> 
 <ul><li>ä¸€ä¸ªå¼€æ”¾ä¸”æœ‰æ®å¯æŸ¥çš„åè®®</li><li>å¼€æºJavaæœåŠ¡å™¨ç»„ä»¶</li><li>å¯æ’æ‹”èº«ä»½éªŒè¯æ”¯æŒï¼ˆLDAPï¼Œæ•°æ®åº“ï¼ŒX.509ã€2å› å­ï¼‰</li><li>æ”¯æŒå¤šç§åè®®ï¼ˆCASï¼ŒSAMLï¼ŒOAuthï¼ŒOpenIDï¼‰</li><li>Javaï¼Œ.Netï¼ŒPHPï¼ŒPerlï¼ŒApacheï¼Œ<a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>ç­‰å®¢æˆ·ç«¯çš„åº“</li><li>ä¸<a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>ï¼ŒBlueSocketï¼ŒTikiWikiï¼ŒMuleï¼ŒLiferayï¼ŒMoodleç­‰é›†æˆ</li><li>ç¤¾åŒºæ–‡æ¡£å’Œå®æ–½æ”¯æŒ</li><li>å¹¿æ³›çš„é‡‡ç”¨è€…ç¤¾åŒº</li></ul> 
</blockquote> 
<h3><a id="3_CASJavaClientDownlaod_46"></a>3. CAS-Java-Client-Downlaod</h3> 
<blockquote> 
 <p>ä¸‹è½½åœ°å€ï¼šhttps://github.com/apereo/java-cas-client</p> 
 <p>æ‰¾åˆ°ç‰ˆæœ¬å·å¯ç›´æ¥ä¸‹è½½ï¼Œå¦‚ä¸‹ï¼š</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/6.3.4/cas-server-webapp-tomcat-6.3.4.war</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/6.3.3/cas-server-webapp-tomcat-6.3.3.war</p> 
 <p>Mavenä»“åº“waråŒ…ä¸‹è½½åœ°å€ï¼š</p> 
 <p>https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-tomcat</p> 
 <p>https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-tomcat/6.3.0</p> 
 <p>å¦‚ä¸‹è½½5.3.16ç‰ˆæœ¬</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
</blockquote> 
<h2><a id="2_Docker_70"></a>2. Dockerå®‰è£…</h2> 
<p>åœ°å€ï¼šhttps://hub.docker.com/r/apereo/cas</p> 
<ol><li>é•œåƒæ‹‰å–</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> pull apereo/cas:6.3.3
</code></pre> 
<ol start="2"><li>å¯åŠ¨caså®¹å™¨</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> run  <span class="token parameter variable">--name</span> cas <span class="token parameter variable">-p</span> <span class="token number">8443</span>:8443 <span class="token parameter variable">-p</span> <span class="token number">8442</span>:8080  apereo/cas /bin/sh /cas-overlay/bin/run-cas.sh
</code></pre> 
<ol start="3"><li>å¯åŠ¨å®¹å™¨ä¼šæœ‰æ¼«é•¿çš„ç­‰å¾…ï¼Œç„¶åæç¤ºæ²¡æœ‰sslè¯ä¹¦</li></ol> 
<pre><code class="prism language-tex">Caused by: java.io.FileNotFoundException: /etc/cas/thekeystore (No such file or directory)
        at java.base/java.io.FileInputStream.open0(Native Method)
        at java.base/java.io.FileInputStream.open(Unknown Source)
        at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)
        at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)
        at java.base/sun.net.www.protocol.file.FileURLConnection.connect(Unknown Source)
        at java.base/sun.net.www.protocol.file.FileURLConnection.getInputStream(Unknown Source)
        at org.apache.catalina.startup.CatalinaBaseConfigurationSource.getResource(CatalinaBaseConfigurationSource.java:121)
        at org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:197)
        at org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:207)
        at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:282)
        at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:246)
        at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97)
        ... 33 more
</code></pre> 
<ol start="4"><li>ç”Ÿæˆè¯ä¹¦</li></ol> 
<ul><li>unbuntuä¸­ç”Ÿæˆæ–¹æ³•å¦‚ä¸‹ï¼š</li></ul> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> keytool <span class="token parameter variable">-genkeypair</span> <span class="token parameter variable">-alias</span> cas <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keypass</span> changeit <span class="token parameter variable">-storepass</span> changeit <span class="token parameter variable">-keystore</span> server.keystore <span class="token parameter variable">-dname</span> <span class="token string">"CN=cas,OU=cas,OU=cas,C=cas"</span>  <span class="token parameter variable">-ext</span> <span class="token assign-left variable">SAN</span><span class="token operator">=</span><span class="token string">"dns:localhost,ip:127.0.0.1"</span>
</code></pre> 
<ul><li>windowsä¸‹æŸ¥çœ‹<strong>ç”Ÿæˆå¯†é’¥åº“</strong></li></ul> 
<ol start="5"><li>è¯ä¹¦ç”Ÿæˆå,å°†sslè¯ä¹¦å¤åˆ¶åˆ°å®¹å™¨å†…</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token function">cp</span> server.keystore cas:/etc/cas/thekeystore
</code></pre> 
<ol start="6"><li>é…ç½®å®Œæ¯•ï¼Œé‡å¯å®¹å™¨</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> restart cas
</code></pre> 
<ol start="7"><li>è®¿é—®</li></ol> 
<pre><code class="prism language-tex">è®¿é—®åœ°å€ï¼šhttps://127.0.0.1:8443/cas/login
åˆå§‹ç”¨æˆ·åï¼šcasuser
åˆå§‹å¯†ç ï¼šMellon
</code></pre> 
<h2><a id="3_TomcatHTTPS_135"></a>3. Tomcatä¸­æ­å»ºHTTPSè¯·æ±‚çš„æ”¯æŒ</h2> 
<blockquote> 
 <p>CASé‡‡ç”¨httpsåè®®å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œæ‰€ä»¥å¿…é¡»éœ€è¦é…ç½®Tomcatå¯¹httpsåè®®çš„æ”¯æŒ</p> 
</blockquote> 
<h3><a id="1__139"></a>1. ç”Ÿæˆå¯†é’¥åº“</h3> 
<p>é‡‡ç”¨JDKè‡ªå¸¦çš„keytoolå·¥å…·ç”Ÿæˆå¯†é’¥åº“</p> 
<p>åœ¨D:\cas\ç”Ÿæˆä¸€ä¸ªåˆ«åä¸ºyuan-keyçš„å¯†é’¥åº“</p> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keystore</span> D:<span class="token punctuation">\</span>cas<span class="token punctuation">\</span>yuan-key.keystore
</code></pre> 
<p>å‘½ä»¤è¡Œè¾“å‡ºå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -genkey -v -alias yuan-key -keyalg RSA -keystore d:\cas\yuan-key.keystore
è¾“å…¥å¯†é’¥åº“å£ä»¤: yuan123456
å†æ¬¡è¾“å…¥æ–°å£ä»¤: yuan123456
æ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆ?
  [Unknown]:  jinshengyuan.comï¼ˆè¿™é‡Œå¾ˆé‡è¦é…ç½®çš„å°±æ˜¯åŸŸåï¼Œåœ¨windows\system32\driver\etchostæ–‡ä»¶é‡Œé…ç½®å¥½ï¼‰
æ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆ?
  [Unknown]:  yuan
æ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆ?
  [Unknown]:  yuan
æ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆ?
  [Unknown]:  shanxi
æ‚¨æ‰€åœ¨çš„çœ/å¸‚/è‡ªæ²»åŒºåç§°æ˜¯ä»€ä¹ˆ?
  [Unknown]:  xian
è¯¥å•ä½çš„åŒå­—æ¯å›½å®¶/åœ°åŒºä»£ç æ˜¯ä»€ä¹ˆ?
  [Unknown]:  zh
CN=yuan, OU=yuan, O=yuan, L=shanxi, ST=xian, C=zhæ˜¯å¦æ­£ç¡®?
  [å¦]:  y

æ­£åœ¨ä¸ºä»¥ä¸‹å¯¹è±¡ç”Ÿæˆ 2,048 ä½RSAå¯†é’¥å¯¹å’Œè‡ªç­¾åè¯ä¹¦ (SHA256withRSA) (æœ‰æ•ˆæœŸä¸º 90 å¤©):
         CN=yuan, OU=yuan, O=yuan, L=shanxi, ST=xian, C=zh
è¾“å…¥ &lt;yuan-key&gt; çš„å¯†é’¥å£ä»¤
        (å¦‚æœå’Œå¯†é’¥åº“å£ä»¤ç›¸åŒ, æŒ‰å›è½¦):
[æ­£åœ¨å­˜å‚¨d:\cas\yuan-key.keystore]

Warning:
JKS å¯†é’¥åº“ä½¿ç”¨ä¸“ç”¨æ ¼å¼ã€‚å»ºè®®ä½¿ç”¨ "keytool -importkeystore -srckeystore d:\cas\yuan-key.keystore -destkeystore d:\cas\yuan-key.keystore -deststoretype pkcs12" è¿ç§»åˆ°è¡Œä¸šæ ‡å‡†æ ¼å¼ PKCS12ã€‚

C:\Users\infodba&gt;
</code></pre> 
<p>æ ¹æ®æç¤ºè¿ç§»å¾—åˆ°è¡Œä¸šæ ‡å‡†æ ¼å¼,ä¹Ÿå¯ä»¥ä¸è¿ç§»ï¼š</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -importkeystore -srckeystore d:/cas/yuan-key.keystore -destkeystore d:/cas/yuan-key.keystore -deststoretype pkcs12
è¾“å…¥æºå¯†é’¥åº“å£ä»¤:
å·²æˆåŠŸå¯¼å…¥åˆ«å yuan-key çš„æ¡ç›®ã€‚
å·²å®Œæˆå¯¼å…¥å‘½ä»¤: 1 ä¸ªæ¡ç›®æˆåŠŸå¯¼å…¥, 0 ä¸ªæ¡ç›®å¤±è´¥æˆ–å–æ¶ˆ

Warning:
å·²å°† "d:/cas/yuan-key.keystore" è¿ç§»åˆ° Non JKS/JCEKSã€‚å°† JKS å¯†é’¥åº“ä½œä¸º "d:/cas/yuan-key.keystore.old" è¿›è¡Œäº†å¤‡ä»½ã€‚
</code></pre> 
<h3><a id="2__198"></a>2. ä»å¯†é’¥åº“å¯¼å‡ºè¯ä¹¦</h3> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-export</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> d:/cas/yuan-key.keystore
</code></pre> 
<p>å‘½ä»¤è¡Œä¸­æç¤ºè¾“å…¥å¯†é’¥å£ä»¤ï¼Œå°±æ˜¯ä¸Šé¢çš„yuan123456</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -export -trustcacerts -alias yuan-key -file d:/cas/yuan-key.cer -keystore d:/cas/yuan-key.keystore
è¾“å…¥å¯†é’¥åº“å£ä»¤:
å­˜å‚¨åœ¨æ–‡ä»¶ &lt;d:/cas/yuan-key.cer&gt; ä¸­çš„è¯ä¹¦
</code></pre> 
<h3><a id="3_JDK_212"></a>3. å°†è¯ä¹¦å¯¼å…¥åˆ°JDKè¯ä¹¦åº“ä¸­</h3> 
<p>å‘½ä»¤ï¼š</p> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.er <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
</code></pre> 
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p> 
<pre><code class="prism language-shell">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>infodba<span class="token operator">&gt;</span>keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
è¾“å…¥å¯†é’¥åº“å£ä»¤: yuan123456
keytool é”™è¯¯: java.io.IOException: Keystore was tampered with, or password was incorrect
</code></pre> 
<ul><li>æ³¨æ„å‡ºç°ä¸Šé¢çš„é”™è¯¯æ˜¯å› ä¸ºè¾“å…¥äº†é”™è¯¯å¯†ç  yuan123456,è¿™é‡Œçš„å¯†ç æ˜¯jdkä¸‹cacertsæ‰€ç‰¹æœ‰çš„å¯†ç  â€œchangeitâ€</li></ul> 
<p>æ­£ç¡®çš„æ‰§è¡Œå¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-shell">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>infodba<span class="token operator">&gt;</span>keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
è¾“å…¥å¯†é’¥åº“å£ä»¤:
æ‰€æœ‰è€…: <span class="token assign-left variable">CN</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">OU</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">O</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">L</span><span class="token operator">=</span>shanxi, <span class="token assign-left variable">ST</span><span class="token operator">=</span>xian, <span class="token assign-left variable">C</span><span class="token operator">=</span>zh
å‘å¸ƒè€…: <span class="token assign-left variable">CN</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">OU</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">O</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">L</span><span class="token operator">=</span>shanxi, <span class="token assign-left variable">ST</span><span class="token operator">=</span>xian, <span class="token assign-left variable">C</span><span class="token operator">=</span>zh
åºåˆ—å·: 424e20f1
æœ‰æ•ˆæœŸä¸º Wed Jan <span class="token number">27</span> <span class="token number">20</span>:28:02 CST <span class="token number">2021</span> è‡³ Tue Apr <span class="token number">27</span> <span class="token number">20</span>:28:02 CST <span class="token number">2021</span>
è¯ä¹¦æŒ‡çº¹:
         MD5:  EF:17:47:78:0B:40:DF:3A:49:B4:29:E4:6E:24:57:EC
         SHA1: <span class="token number">56</span>:D6:89:3E:7E:BD:D0:42:A3:B6:12:33:BE:6D:96:AC:87:90:99:24
         SHA256: 8E:33:25:6B:F9:C0:AF:74:05:21:AB:0C:02:01:61:88:46:41:5A:27:EF:53:49:29:7D:52:BE:CD:64:60:01:08
ç­¾åç®—æ³•åç§°: SHA256withRSA
ä¸»ä½“å…¬å…±å¯†é’¥ç®—æ³•: <span class="token number">2048</span> ä½ RSA å¯†é’¥
ç‰ˆæœ¬: <span class="token number">3</span>

æ‰©å±•:

<span class="token comment">#1: ObjectId: 2.5.29.14 Criticality=false</span>
SubjectKeyIdentifier <span class="token punctuation">[</span>
KeyIdentifier <span class="token punctuation">[</span>
0000: D2 5E <span class="token number">14</span> C9 B3 <span class="token number">28</span> 06 <span class="token number">91</span>   8A F5 <span class="token number">92</span> FA E0 FF B2 <span class="token number">67</span>  .^<span class="token punctuation">..</span>.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.g
0010: CD <span class="token number">24</span> B1 <span class="token number">66</span>                                        .$.f
<span class="token punctuation">]</span>
<span class="token punctuation">]</span>

æ˜¯å¦ä¿¡ä»»æ­¤è¯ä¹¦? <span class="token punctuation">[</span>å¦<span class="token punctuation">]</span>:  y
è¯ä¹¦å·²æ·»åŠ åˆ°å¯†é’¥åº“ä¸­
</code></pre> 
<h3><a id="4TomcatServerxmlhttps_261"></a>4.Tomcatä¸­çš„Server.xmlé…ç½®httpsåè®®çš„æ”¯æŒ</h3> 
<p>D:\apache-tomcat-9.0.41\conf\server.xmlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8444<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.coyote.http11.Http11NioProtocol<span class="token punctuation">"</span></span>
               <span class="token attr-name">maxThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span>
			   <span class="token attr-name">SSLEnabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> 
			   <span class="token attr-name">scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https<span class="token punctuation">"</span></span>
			   <span class="token attr-name">secure</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
			   <span class="token attr-name">clientAuth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
			   <span class="token attr-name">sslProtocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TLS<span class="token punctuation">"</span></span>
			   <span class="token attr-name">keystoreFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d:\cas\yuan-key.keystore<span class="token punctuation">"</span></span>
			   <span class="token attr-name">keystorePass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yuan123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<h3><a id="5_CAS_ServerTomcat_277"></a>5. ä¸‹è½½CAS Serverç«¯éƒ¨ç½²åˆ°Tomcatä¸­</h3> 
<ol><li>ä¸‹è½½cas-server-webapp-tomcat-5.3.16.warç‰ˆæœ¬çš„CAS Server</li></ol> 
<p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
<ol start="2"><li> <p>å°†ä¸‹è½½çš„cas-server-webapp-tomcat-5.3.16.waré‡å‘½åä¸ºcas.warå¹¶æ‹·è´åˆ°Tomcatä¸‹çš„webappsä¸‹</p> </li><li> <p>å¯åŠ¨tomcat</p> </li><li> <p>è¾“å…¥åœ°å€è®¿é—®ï¼šhttps://localhost:8444/cas</p> </li><li> <p>è¾“å…¥ç”¨æˆ·åä¸å¯†ç è¿›è¡ŒéªŒè¯CASæœåŠ¡å™¨æ˜¯å¦æ­å»ºæˆåŠŸ</p> <p>ç”¨æˆ·å/å¯†ç :casuser/Mellon</p> <p>ç”¨æˆ·åå¯†ç å…·ä½“åœ¨:D:\apache-tomcat-9.0.41\webapps\cas\WEB-INF\classes\application.propertiesä¸­è¿›è¡Œé…ç½®</p> <p>cas.authn.accept.users=casuser::Mellon</p> </li></ol> 
<h3><a id="6_CAS_295"></a>6. CASé…ç½®æ•°æ®æº</h3> 
<h4><a id="1applicationproperties_297"></a>1.application.propertiesä¸­é…ç½®æ•°æ®æº</h4> 
<h4><a id="2_lib_299"></a>2. åŠ å…¥è¿æ¥æ•°æ®æºçš„é©±åŠ¨åˆ°libä¸­</h4> 
<h2><a id="4__301"></a>4. å¸¸è§é—®é¢˜å¤„ç†ï¼š</h2> 
<h3><a id="1__303"></a>1. æœªè®¤è¯æˆæƒçš„æœåŠ¡</h3> 
<p>CASçš„æœåŠ¡è®°å½•æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰å®šä¹‰æœåŠ¡ã€‚ å¸Œæœ›é€šè¿‡CASè¿›è¡Œè®¤è¯çš„åº”ç”¨ç¨‹åºå¿…é¡»åœ¨æœåŠ¡è®°å½•ä¸­æ˜ç¡®å®šä¹‰ã€‚</p> 
<p>è§£å†³åŠæ³•ï¼š</p> 
<p>1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶wabapp\casæ ¹ç›®å½•\WEB-INF\classes\services\HTTPSandIMAPS-10000001.json<br> å°†<br> â€œserviceIdâ€ : â€œ^(https|imaps)ğŸ˜•/.<em>"<br> æ”¹ä¸º<br> â€œserviceIdâ€ : "^(https|http|imaps)ğŸ˜•/.</em>â€,<br> 2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶wabapp\casæ ¹ç›®å½•\WEB-INF\classes\application.properties,è¿½åŠ ä¸‹é¢ä¸¤è¡Œä»£ç <br> cas.tgc.secure=false<br> cas.serviceRegistry.initFromJson=true</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/17b5e5a6900e9963148aa00af6243bc5/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Linuxä¹‹Shellè„šæœ¬ç¼–ç¨‹å…¥é—¨</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb09c7ab24b9723620516796ffd02d73/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">è‚ºç™Œç›¸å…³æ–‡çŒ®4</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>