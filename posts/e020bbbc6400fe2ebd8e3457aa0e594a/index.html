<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CAS实现SSO单点登录之服务搭建 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CAS实现SSO单点登录之服务搭建" />
<meta property="og:description" content="CAS单点登录 文章目录 CAS单点登录1. What is CAS?1. 官网及文档2. 关于CASCAS provides enterprise single sign-on service for the Web:CAS为Web提供企业单一登录服务：3. CAS-Java-Client-Downlaod 2. Docker安装3. Tomcat中搭建HTTPS请求的支持1. 生成密钥库2. 从密钥库导出证书3. 将证书导入到JDK证书库中4.Tomcat中的Server.xml配置https协议的支持5. 下载CAS Server端部署到Tomcat中6. CAS配置数据源1.application.properties中配置数据源2. 加入连接数据源的驱动到lib中 4. 常见问题处理：1. 未认证授权的服务 1. What is CAS? 1. 官网及文档 CAS官网：https://www.apereo.org/projects/cas
CAS Server GitHub下载地址： https://github.com/apereo/cas
文档地址：https://apereo.github.io/cas/5.3.x/
https://github.com/apereo/cas-overlay-template
https://repo1.maven.org./maven2/cas/
2. 关于CAS Central Authentication Service (CAS),中央认证服务，是一个企业多语言单点登录解决方案。
Enterprise Single Sign-On - CAS provides a friendly open source community that actively supports and contributes to the project. While the project is rooted in higher-ed open source, it has grown to an international audience spanning Fortune 500 companies and small special-purpose installations." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e020bbbc6400fe2ebd8e3457aa0e594a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T08:28:27+08:00" />
<meta property="article:modified_time" content="2024-01-19T08:28:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CAS实现SSO单点登录之服务搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CAS_0"></a>CAS单点登录</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#CAS_0" rel="nofollow">CAS单点登录</a></li><li><a href="#1_What_is_CAS_2" rel="nofollow">1. What is CAS?</a></li><li><ul><li><a href="#1__4" rel="nofollow">1. 官网及文档</a></li><li><a href="#2_CAS_16" rel="nofollow">2. 关于CAS</a></li><li><a href="#CAS_provides_enterprise_single_signon_service_for_the_Web_24" rel="nofollow">CAS provides enterprise single sign-on service for the Web:</a></li><li><a href="#CASWeb_35" rel="nofollow">CAS为Web提供企业单一登录服务：</a></li><li><a href="#3_CASJavaClientDownlaod_46" rel="nofollow">3. CAS-Java-Client-Downlaod</a></li></ul> 
  </li><li><a href="#2_Docker_70" rel="nofollow">2. Docker安装</a></li><li><a href="#3_TomcatHTTPS_135" rel="nofollow">3. Tomcat中搭建HTTPS请求的支持</a></li><li><ul><li><a href="#1__139" rel="nofollow">1. 生成密钥库</a></li><li><a href="#2__198" rel="nofollow">2. 从密钥库导出证书</a></li><li><a href="#3_JDK_212" rel="nofollow">3. 将证书导入到JDK证书库中</a></li><li><a href="#4TomcatServerxmlhttps_261" rel="nofollow">4.Tomcat中的Server.xml配置https协议的支持</a></li><li><a href="#5_CAS_ServerTomcat_277" rel="nofollow">5. 下载CAS Server端部署到Tomcat中</a></li><li><a href="#6_CAS_295" rel="nofollow">6. CAS配置数据源</a></li><li><ul><li><a href="#1applicationproperties_297" rel="nofollow">1.application.properties中配置数据源</a></li><li><a href="#2_lib_299" rel="nofollow">2. 加入连接数据源的驱动到lib中</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4__301" rel="nofollow">4. 常见问题处理：</a></li><li><ul><li><a href="#1__303" rel="nofollow">1. 未认证授权的服务</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_What_is_CAS_2"></a>1. What is CAS?</h2> 
<h3><a id="1__4"></a>1. 官网及文档</h3> 
<blockquote> 
 <p>CAS官网：https://www.apereo.org/projects/cas</p> 
 <p>CAS Server GitHub下载地址： https://github.com/apereo/cas</p> 
 <p>文档地址：https://apereo.github.io/cas/5.3.x/</p> 
 <p>https://github.com/apereo/cas-overlay-template</p> 
 <p>https://repo1.maven.org./maven2/cas/</p> 
</blockquote> 
<h3><a id="2_CAS_16"></a>2. 关于CAS</h3> 
<blockquote> 
 <p>Central Authentication Service (CAS),中央认证服务，是一个企业多语言单点登录解决方案。</p> 
 <p>Enterprise Single Sign-On - CAS provides a friendly open source community that actively supports and contributes to the project. While the project is rooted in higher-ed open source, it has grown to an international audience spanning Fortune 500 companies and small special-purpose installations.</p> 
 <p>企业单一登录-CAS提供了一个友好的开源社区，该社区积极支持该项目并为该项目做出贡献。尽管该项目以更高版本的开源为根基，但已经吸引了国际读者，涵盖了《财富》 500强公司和小型专用装置。</p> 
 <h3><a id="CAS_provides_enterprise_single_signon_service_for_the_Web_24"></a>CAS provides enterprise single sign-on service for the Web:</h3> 
 <ul><li>An open and well-documented protocol</li><li>An open-source Java server component</li><li>Pluggable authentication support (LDAP, database, X.509, 2-factor)</li><li>Support for multiple protocols (CAS, SAML, OAuth, OpenID)</li><li>A library of clients for Java, .Net, PHP, Perl, Apache, <a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>, and others</li><li>Integrates with <a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>, BlueSocket, TikiWiki, Mule, Liferay, Moodle and others</li><li>Community documentation and implementation support</li><li>An extensive community of adopters</li></ul> 
 <h3><a id="CASWeb_35"></a>CAS为Web提供企业单一登录服务：</h3> 
 <ul><li>一个开放且有据可查的协议</li><li>开源Java服务器组件</li><li>可插拔身份验证支持（LDAP，数据库，X.509、2因子）</li><li>支持多种协议（CAS，SAML，OAuth，OpenID）</li><li>Java，.Net，PHP，Perl，Apache，<a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>等客户端的库</li><li>与<a href="https://www.apereo.org/projects/uportal/uportal-community" rel="nofollow">uPortal</a>，BlueSocket，TikiWiki，Mule，Liferay，Moodle等集成</li><li>社区文档和实施支持</li><li>广泛的采用者社区</li></ul> 
</blockquote> 
<h3><a id="3_CASJavaClientDownlaod_46"></a>3. CAS-Java-Client-Downlaod</h3> 
<blockquote> 
 <p>下载地址：https://github.com/apereo/java-cas-client</p> 
 <p>找到版本号可直接下载，如下：</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/6.3.4/cas-server-webapp-tomcat-6.3.4.war</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/6.3.3/cas-server-webapp-tomcat-6.3.3.war</p> 
 <p>Maven仓库war包下载地址：</p> 
 <p>https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-tomcat</p> 
 <p>https://mvnrepository.com/artifact/org.apereo.cas/cas-server-webapp-tomcat/6.3.0</p> 
 <p>如下载5.3.16版本</p> 
 <p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
</blockquote> 
<h2><a id="2_Docker_70"></a>2. Docker安装</h2> 
<p>地址：https://hub.docker.com/r/apereo/cas</p> 
<ol><li>镜像拉取</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> pull apereo/cas:6.3.3
</code></pre> 
<ol start="2"><li>启动cas容器</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> run  <span class="token parameter variable">--name</span> cas <span class="token parameter variable">-p</span> <span class="token number">8443</span>:8443 <span class="token parameter variable">-p</span> <span class="token number">8442</span>:8080  apereo/cas /bin/sh /cas-overlay/bin/run-cas.sh
</code></pre> 
<ol start="3"><li>启动容器会有漫长的等待，然后提示没有ssl证书</li></ol> 
<pre><code class="prism language-tex">Caused by: java.io.FileNotFoundException: /etc/cas/thekeystore (No such file or directory)
        at java.base/java.io.FileInputStream.open0(Native Method)
        at java.base/java.io.FileInputStream.open(Unknown Source)
        at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)
        at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)
        at java.base/sun.net.www.protocol.file.FileURLConnection.connect(Unknown Source)
        at java.base/sun.net.www.protocol.file.FileURLConnection.getInputStream(Unknown Source)
        at org.apache.catalina.startup.CatalinaBaseConfigurationSource.getResource(CatalinaBaseConfigurationSource.java:121)
        at org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:197)
        at org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:207)
        at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:282)
        at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:246)
        at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97)
        ... 33 more
</code></pre> 
<ol start="4"><li>生成证书</li></ol> 
<ul><li>unbuntu中生成方法如下：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> keytool <span class="token parameter variable">-genkeypair</span> <span class="token parameter variable">-alias</span> cas <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keypass</span> changeit <span class="token parameter variable">-storepass</span> changeit <span class="token parameter variable">-keystore</span> server.keystore <span class="token parameter variable">-dname</span> <span class="token string">"CN=cas,OU=cas,OU=cas,C=cas"</span>  <span class="token parameter variable">-ext</span> <span class="token assign-left variable">SAN</span><span class="token operator">=</span><span class="token string">"dns:localhost,ip:127.0.0.1"</span>
</code></pre> 
<ul><li>windows下查看<strong>生成密钥库</strong></li></ul> 
<ol start="5"><li>证书生成后,将ssl证书复制到容器内</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> <span class="token function">cp</span> server.keystore cas:/etc/cas/thekeystore
</code></pre> 
<ol start="6"><li>配置完毕，重启容器</li></ol> 
<pre><code class="prism language-shell"><span class="token function">docker</span> restart cas
</code></pre> 
<ol start="7"><li>访问</li></ol> 
<pre><code class="prism language-tex">访问地址：https://127.0.0.1:8443/cas/login
初始用户名：casuser
初始密码：Mellon
</code></pre> 
<h2><a id="3_TomcatHTTPS_135"></a>3. Tomcat中搭建HTTPS请求的支持</h2> 
<blockquote> 
 <p>CAS采用https协议处理用户请求，所以必须需要配置Tomcat对https协议的支持</p> 
</blockquote> 
<h3><a id="1__139"></a>1. 生成密钥库</h3> 
<p>采用JDK自带的keytool工具生成密钥库</p> 
<p>在D:\cas\生成一个别名为yuan-key的密钥库</p> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keystore</span> D:<span class="token punctuation">\</span>cas<span class="token punctuation">\</span>yuan-key.keystore
</code></pre> 
<p>命令行输出如下：</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -genkey -v -alias yuan-key -keyalg RSA -keystore d:\cas\yuan-key.keystore
输入密钥库口令: yuan123456
再次输入新口令: yuan123456
您的名字与姓氏是什么?
  [Unknown]:  jinshengyuan.com（这里很重要配置的就是域名，在windows\system32\driver\etchost文件里配置好）
您的组织单位名称是什么?
  [Unknown]:  yuan
您的组织名称是什么?
  [Unknown]:  yuan
您所在的城市或区域名称是什么?
  [Unknown]:  shanxi
您所在的省/市/自治区名称是什么?
  [Unknown]:  xian
该单位的双字母国家/地区代码是什么?
  [Unknown]:  zh
CN=yuan, OU=yuan, O=yuan, L=shanxi, ST=xian, C=zh是否正确?
  [否]:  y

正在为以下对象生成 2,048 位RSA密钥对和自签名证书 (SHA256withRSA) (有效期为 90 天):
         CN=yuan, OU=yuan, O=yuan, L=shanxi, ST=xian, C=zh
输入 &lt;yuan-key&gt; 的密钥口令
        (如果和密钥库口令相同, 按回车):
[正在存储d:\cas\yuan-key.keystore]

Warning:
JKS 密钥库使用专用格式。建议使用 "keytool -importkeystore -srckeystore d:\cas\yuan-key.keystore -destkeystore d:\cas\yuan-key.keystore -deststoretype pkcs12" 迁移到行业标准格式 PKCS12。

C:\Users\infodba&gt;
</code></pre> 
<p>根据提示迁移得到行业标准格式,也可以不迁移：</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -importkeystore -srckeystore d:/cas/yuan-key.keystore -destkeystore d:/cas/yuan-key.keystore -deststoretype pkcs12
输入源密钥库口令:
已成功导入别名 yuan-key 的条目。
已完成导入命令: 1 个条目成功导入, 0 个条目失败或取消

Warning:
已将 "d:/cas/yuan-key.keystore" 迁移到 Non JKS/JCEKS。将 JKS 密钥库作为 "d:/cas/yuan-key.keystore.old" 进行了备份。
</code></pre> 
<h3><a id="2__198"></a>2. 从密钥库导出证书</h3> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-export</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> d:/cas/yuan-key.keystore
</code></pre> 
<p>命令行中提示输入密钥口令，就是上面的yuan123456</p> 
<pre><code class="prism language-tex">C:\Users\infodba&gt;keytool -export -trustcacerts -alias yuan-key -file d:/cas/yuan-key.cer -keystore d:/cas/yuan-key.keystore
输入密钥库口令:
存储在文件 &lt;d:/cas/yuan-key.cer&gt; 中的证书
</code></pre> 
<h3><a id="3_JDK_212"></a>3. 将证书导入到JDK证书库中</h3> 
<p>命令：</p> 
<pre><code class="prism language-shell">keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.er <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
</code></pre> 
<p>执行命令：</p> 
<pre><code class="prism language-shell">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>infodba<span class="token operator">&gt;</span>keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
输入密钥库口令: yuan123456
keytool 错误: java.io.IOException: Keystore was tampered with, or password was incorrect
</code></pre> 
<ul><li>注意出现上面的错误是因为输入了错误密码 yuan123456,这里的密码是jdk下cacerts所特有的密码 “changeit”</li></ul> 
<p>正确的执行如下：</p> 
<pre><code class="prism language-shell">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>infodba<span class="token operator">&gt;</span>keytool <span class="token parameter variable">-import</span> <span class="token parameter variable">-trustcacerts</span> <span class="token parameter variable">-alias</span> yuan-key <span class="token parameter variable">-file</span> d:/cas/yuan-key.cer <span class="token parameter variable">-keystore</span> <span class="token string">"D:\Program Files\Java\jdk1.8.0_202\jre\lib\security<span class="token entity" title="\c">\c</span>acerts"</span>
输入密钥库口令:
所有者: <span class="token assign-left variable">CN</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">OU</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">O</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">L</span><span class="token operator">=</span>shanxi, <span class="token assign-left variable">ST</span><span class="token operator">=</span>xian, <span class="token assign-left variable">C</span><span class="token operator">=</span>zh
发布者: <span class="token assign-left variable">CN</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">OU</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">O</span><span class="token operator">=</span>yuan, <span class="token assign-left variable">L</span><span class="token operator">=</span>shanxi, <span class="token assign-left variable">ST</span><span class="token operator">=</span>xian, <span class="token assign-left variable">C</span><span class="token operator">=</span>zh
序列号: 424e20f1
有效期为 Wed Jan <span class="token number">27</span> <span class="token number">20</span>:28:02 CST <span class="token number">2021</span> 至 Tue Apr <span class="token number">27</span> <span class="token number">20</span>:28:02 CST <span class="token number">2021</span>
证书指纹:
         MD5:  EF:17:47:78:0B:40:DF:3A:49:B4:29:E4:6E:24:57:EC
         SHA1: <span class="token number">56</span>:D6:89:3E:7E:BD:D0:42:A3:B6:12:33:BE:6D:96:AC:87:90:99:24
         SHA256: 8E:33:25:6B:F9:C0:AF:74:05:21:AB:0C:02:01:61:88:46:41:5A:27:EF:53:49:29:7D:52:BE:CD:64:60:01:08
签名算法名称: SHA256withRSA
主体公共密钥算法: <span class="token number">2048</span> 位 RSA 密钥
版本: <span class="token number">3</span>

扩展:

<span class="token comment">#1: ObjectId: 2.5.29.14 Criticality=false</span>
SubjectKeyIdentifier <span class="token punctuation">[</span>
KeyIdentifier <span class="token punctuation">[</span>
0000: D2 5E <span class="token number">14</span> C9 B3 <span class="token number">28</span> 06 <span class="token number">91</span>   8A F5 <span class="token number">92</span> FA E0 FF B2 <span class="token number">67</span>  .^<span class="token punctuation">..</span>.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.g
0010: CD <span class="token number">24</span> B1 <span class="token number">66</span>                                        .$.f
<span class="token punctuation">]</span>
<span class="token punctuation">]</span>

是否信任此证书? <span class="token punctuation">[</span>否<span class="token punctuation">]</span>:  y
证书已添加到密钥库中
</code></pre> 
<h3><a id="4TomcatServerxmlhttps_261"></a>4.Tomcat中的Server.xml配置https协议的支持</h3> 
<p>D:\apache-tomcat-9.0.41\conf\server.xml中添加如下配置：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8444<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.coyote.http11.Http11NioProtocol<span class="token punctuation">"</span></span>
               <span class="token attr-name">maxThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span>
			   <span class="token attr-name">SSLEnabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> 
			   <span class="token attr-name">scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https<span class="token punctuation">"</span></span>
			   <span class="token attr-name">secure</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
			   <span class="token attr-name">clientAuth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
			   <span class="token attr-name">sslProtocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TLS<span class="token punctuation">"</span></span>
			   <span class="token attr-name">keystoreFile</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d:\cas\yuan-key.keystore<span class="token punctuation">"</span></span>
			   <span class="token attr-name">keystorePass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yuan123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<h3><a id="5_CAS_ServerTomcat_277"></a>5. 下载CAS Server端部署到Tomcat中</h3> 
<ol><li>下载cas-server-webapp-tomcat-5.3.16.war版本的CAS Server</li></ol> 
<p>https://repo1.maven.org/maven2/org/apereo/cas/cas-server-webapp-tomcat/5.3.16/cas-server-webapp-tomcat-5.3.16.war</p> 
<ol start="2"><li> <p>将下载的cas-server-webapp-tomcat-5.3.16.war重命名为cas.war并拷贝到Tomcat下的webapps下</p> </li><li> <p>启动tomcat</p> </li><li> <p>输入地址访问：https://localhost:8444/cas</p> </li><li> <p>输入用户名与密码进行验证CAS服务器是否搭建成功</p> <p>用户名/密码:casuser/Mellon</p> <p>用户名密码具体在:D:\apache-tomcat-9.0.41\webapps\cas\WEB-INF\classes\application.properties中进行配置</p> <p>cas.authn.accept.users=casuser::Mellon</p> </li></ol> 
<h3><a id="6_CAS_295"></a>6. CAS配置数据源</h3> 
<h4><a id="1applicationproperties_297"></a>1.application.properties中配置数据源</h4> 
<h4><a id="2_lib_299"></a>2. 加入连接数据源的驱动到lib中</h4> 
<h2><a id="4__301"></a>4. 常见问题处理：</h2> 
<h3><a id="1__303"></a>1. 未认证授权的服务</h3> 
<p>CAS的服务记录是空的，没有定义服务。 希望通过CAS进行认证的应用程序必须在服务记录中明确定义。</p> 
<p>解决办法：</p> 
<p>1、修改配置文件wabapp\cas根目录\WEB-INF\classes\services\HTTPSandIMAPS-10000001.json<br> 将<br> “serviceId” : “^(https|imaps)😕/.<em>"<br> 改为<br> “serviceId” : "^(https|http|imaps)😕/.</em>”,<br> 2、修改配置文件wabapp\cas根目录\WEB-INF\classes\application.properties,追加下面两行代码<br> cas.tgc.secure=false<br> cas.serviceRegistry.initFromJson=true</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/17b5e5a6900e9963148aa00af6243bc5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux之Shell脚本编程入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb09c7ab24b9723620516796ffd02d73/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">肺癌相关文献4</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>