<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>javascript购物车实现详细代码讲解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="javascript购物车实现详细代码讲解" />
<meta property="og:description" content="我们肯定都很熟悉商品购物车这一功能，每当我们在某宝某东上购买商品的时候，看中了哪件商品，就会加入购物车中，最后结算。购物车这一功能，方便消费者对商品进行管理，可以添加商品，删除商品，选中购物车中的某一项或几项商品，最后商品总价也会随着消费者的操作随着变化。 现在，笔者对购物车进行了简单实现，能够实现真实购物车当中的大部分功能。在本示例当中，用到了javascript中BOM操作，DOM操作，表格操作，cookie，json等知识点，同时，采用三层架构方式对购物车进行设计，对javascript的综合应用较强，对javascript初学者进阶有一定的益处。 请看主页效果图： 现在读者已经对主页的效果图进行了了解，我在这里附上主页的html代码，供读者参考，建议读者根据自己的思路写代码。请看html代码：
&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&#34;utf-8&#34; /&gt; &lt;title&gt;商品列表页面&lt;/title&gt; &lt;!--商品列表样式表--&gt; &lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;../css/index.css&#34; /&gt; &lt;!--cookie操作的js库--&gt; &lt;script src=&#34;../js/cookie.js&#34; type=&#34;text/javascript&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&#34;container&#34;&gt; &lt;h1&gt;商品列表&lt;/h1&gt; &lt;div class=&#34;mycar&#34;&gt; &lt;a href=&#34;cart.html&#34;&gt;我的购物车&lt;/a&gt;&lt;i id=&#34;ccount&#34;&gt;0&lt;/i&gt; &lt;/div&gt; &lt;div class=&#34;list&#34;&gt; &lt;dl pid=&#34;1001&#34;&gt; &lt;dt&gt; &lt;img src=&#34;../images/p1.jpg&#34; /&gt; &lt;/dt&gt; &lt;dd&gt;智能手表&lt;/dd&gt; &lt;dd&gt;酷黑，棒，棒，棒，棒&lt;/dd&gt; &lt;dd&gt;￥&lt;span&gt;998&lt;/span&gt;&lt;/dd&gt; &lt;dd&gt; &lt;button&gt;添加购物车&lt;/button&gt; &lt;/dd&gt; &lt;/dl&gt; &lt;dl pid=&#34;1002&#34;&gt; &lt;dt&gt; &lt;img src=&#34;../images/p2.jpg&#34; /&gt; &lt;/dt&gt; &lt;dd&gt;智能手机001&lt;/dd&gt; &lt;dd&gt;金红色，酷酷酷酷&lt;/dd&gt; &lt;dd&gt;￥&lt;span&gt;1998&lt;/span&gt;&lt;/dd&gt; &lt;dd&gt; &lt;button&gt;添加购物车&lt;/button&gt; &lt;/dd&gt; &lt;/dl&gt; &lt;dl pid=&#34;1003&#34;&gt; &lt;dt&gt; &lt;img src=&#34;../images/p3.jpg&#34; /&gt; &lt;/dt&gt; &lt;dd&gt;华为手机002&lt;/dd&gt; &lt;dd&gt;帅帅帅帅帅帅帅帅帅帅&lt;/dd&gt; &lt;dd&gt;￥&lt;span&gt;998&lt;/span&gt;&lt;/dd&gt; &lt;dd&gt; &lt;button&gt;添加购物车&lt;/button&gt; &lt;/dd&gt; &lt;/dl&gt; &lt;dl pid=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8a6365ec267075c98249b42a3d9cf058/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-09-27T21:13:37+08:00" />
<meta property="article:modified_time" content="2016-09-27T21:13:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">javascript购物车实现详细代码讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>我们肯定都很熟悉商品购物车这一功能，每当我们在某宝某东上购买商品的时候，看中了哪件商品，就会加入购物车中，最后结算。购物车这一功能，方便消费者对商品进行管理，可以添加商品，删除商品，选中购物车中的某一项或几项商品，最后商品总价也会随着消费者的操作随着变化。 <br> 现在，笔者对购物车进行了简单实现，能够实现真实购物车当中的大部分功能。在本示例当中，用到了javascript中BOM操作，DOM操作，表格操作，cookie，json等知识点，同时，采用三层架构方式对购物车进行设计，对javascript的综合应用较强，对javascript初学者进阶有一定的益处。 <br> 请看主页效果图： <br> <img src="https://images2.imgbox.com/db/71/AqZhcK8u_o.png" alt="这里写图片描述" title=""> <br> 现在读者已经对主页的效果图进行了了解，我在这里附上主页的html代码，供读者参考，建议读者根据自己的思路写代码。请看html代码：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>商品列表页面<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
        <span class="hljs-comment">&lt;!--商品列表样式表--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"../css/index.css"</span> /&gt;</span>
        <span class="hljs-comment">&lt;!--cookie操作的js库--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/cookie.js"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>商品列表<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mycar"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"cart.html"</span>&gt;</span>我的购物车<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">i</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"ccount"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"list"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dl</span> <span class="hljs-attribute">pid</span>=<span class="hljs-value">"1001"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dt</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../images/p1.jpg"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>智能手表<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>酷黑，棒，棒，棒，棒<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>￥<span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>998<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">button</span>&gt;</span>添加购物车<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dl</span> <span class="hljs-attribute">pid</span>=<span class="hljs-value">"1002"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dt</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../images/p2.jpg"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>智能手机001<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>金红色，酷酷酷酷<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>￥<span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>1998<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">button</span>&gt;</span>添加购物车<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dl</span> <span class="hljs-attribute">pid</span>=<span class="hljs-value">"1003"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dt</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../images/p3.jpg"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>华为手机002<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>帅帅帅帅帅帅帅帅帅帅<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>￥<span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>998<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">button</span>&gt;</span>添加购物车<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dl</span> <span class="hljs-attribute">pid</span>=<span class="hljs-value">"1004"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dt</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../images/p4.jpg"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dt</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>华为手机003<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>杠杠的<span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>￥<span class="hljs-tag">&lt;<span class="hljs-title">span</span>&gt;</span>2000<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">dd</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">button</span>&gt;</span>添加购物车<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">dd</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">dl</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!--
            描述：数据访问层，操作本地数据的模块
        --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/server.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-comment">&lt;!--
            描述：本页面的js操作
        --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/index.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre> 
<p>html结构代码有了之后，就可以对主页进行css表现设计，这里不对css进行过多讲解。 <br> 我们对主页进行设计之后，就可以进行与主页相关的DOM操作，涉及到添加按钮的点击事件，cookie和json的应用，cookie主要为了让当前数据与购物车进行共享，以方便操作。请看与之相关的javascript代码： <br> 这是index.js代码，主要是主页的相关操作：</p> 
<pre class="prettyprint"><code class=" hljs actionscript"><span class="hljs-comment">/*
    思路：
        第一步：获取所要操作的节点对象
        第二步：当页面加载完后，需要计算本地cookie存了多少【个】商品，把个数赋值给ccount
        第三步：为每一个商品对应的添加购物车按钮绑定一个点击事件onclick
             更改本地的cookie
            获取当前商品的pid
            循环遍历本地的cookie转换后的数组，取出每一个对象的pid进行对比，若相等则该商品不是第一次添加
            从购物车中取出该商品，然后更pCount值追加1
            否则：创建一个新的对象，保存到购物中。同时该商品的数量为1
 */</span>

<span class="hljs-keyword">var</span> ccount = document.getElementById(<span class="hljs-string">"ccount"</span>); <span class="hljs-comment">//显示商品总数量的标签节点对象</span>
<span class="hljs-keyword">var</span> btns = document.querySelectorAll(<span class="hljs-string">".list dl dd button"</span>); <span class="hljs-comment">//所有的购物车按钮</span>

<span class="hljs-comment">//约定好用名称为datas的cookie来存放购物车里的数据信息  datas里所存放的就是一个json字符串</span>
<span class="hljs-keyword">var</span> listStr = cookieObj.<span class="hljs-keyword">get</span>(<span class="hljs-string">"datas"</span>);
<span class="hljs-comment">/*判断一下本地是否有一个购物车（datas），没有的话，创建一个空的购物车，有的话就直接拿来使用*/</span>
<span class="hljs-keyword">if</span>(!listStr) { <span class="hljs-comment">//没有购物车     datas  json</span>
    cookieObj.<span class="hljs-keyword">set</span>({
        name: <span class="hljs-string">"datas"</span>,
        value: <span class="hljs-string">"[]"</span>
    });
    listStr = cookieObj.<span class="hljs-keyword">get</span>(<span class="hljs-string">"datas"</span>);
}

<span class="hljs-keyword">var</span> listObj = JSON.parse(listStr); <span class="hljs-comment">//数组</span>
<span class="hljs-comment">/*循环遍历数组，获取每一个对象中的pCount值相加总和*/</span>
<span class="hljs-keyword">var</span> totalCount = <span class="hljs-number">0</span>; <span class="hljs-comment">//默认为0</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = listObj.length; i &lt; len; i++) {
    totalCount = listObj[i].pCount + totalCount;
}
ccount.innerHTML = totalCount;

<span class="hljs-comment">/*循环为每一个按钮添加点击事件*/</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = btns.length; i &lt; len; i++) {
    btns[i].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> dl = <span class="hljs-keyword">this</span>.parentNode.parentNode;
        <span class="hljs-keyword">var</span> pid = dl.getAttribute(<span class="hljs-string">"pid"</span>);<span class="hljs-comment">//获取自定义属性</span>
        <span class="hljs-keyword">var</span> arrs = dl.children;<span class="hljs-comment">//获取所有子节点</span>
        <span class="hljs-keyword">if</span>(checkObjByPid(pid)) {
            listObj = updateObjById(pid, <span class="hljs-number">1</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> imgSrc = arrs[<span class="hljs-number">0</span>].firstElementChild.src;
            <span class="hljs-keyword">var</span> pName = arrs[<span class="hljs-number">1</span>].innerHTML;
            <span class="hljs-keyword">var</span> pDesc = arrs[<span class="hljs-number">2</span>].innerHTML;
            <span class="hljs-keyword">var</span> price = arrs[<span class="hljs-number">3</span>].firstElementChild.innerHTML;
            <span class="hljs-keyword">var</span> obj = {
                pid: pid,
                pImg: imgSrc,
                pName: pName,
                pDesc: pDesc,
                price: price,
                pCount: <span class="hljs-number">1</span>
            };
            listObj.push(obj)
            listObj = updateData(listObj);
        }
        ccount.innerHTML = getTotalCount();
    }
}</code></pre> 
<p>这是cookie.js的代码，主要涉及cookie的设置获取操作，采用单例设计模式进行了封装设计，请看代码：</p> 
<pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-comment">/*
    单例设计模式
    完整形式：[]中是可选项
    document.cookie  = “name=value[;expires=date][;path=path-to-resource][;domain=域名][;secure]”
*/</span>

<span class="hljs-keyword">var</span> cookieObj = {
    <span class="hljs-comment">/*
        增加或修改cookie
        参数：o 对象{}
        name:string cookie名
        value:string cookie值
        expires:Date对象 过期时间
        path:string 路径限制
        domain:string 域名限制
        secure:boolean  true https  false或undeinfed 
    */</span>
    set: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(o)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> cookieStr = <span class="hljs-built_in">encodeURIComponent</span>(o.name) + <span class="hljs-string">"="</span> + <span class="hljs-built_in">encodeURIComponent</span>(o.value);
        <span class="hljs-keyword">if</span>(o.expires) {
            cookieStr += <span class="hljs-string">";expires="</span> + o.expires;
        }
        <span class="hljs-keyword">if</span>(o.path) {
            cookieStr += <span class="hljs-string">";path="</span> + o.path;
        }
        <span class="hljs-keyword">if</span>(o.domain) {
            cookieStr += <span class="hljs-string">";domain="</span> + o.domain;
        }
        <span class="hljs-keyword">if</span>(o.secure) {
            cookieStr += <span class="hljs-string">";secure"</span>;
        }

        document.cookie = cookieStr;
    },
    <span class="hljs-comment">/*
        删除
        参数：n string cookie的名字
    */</span>
    del: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        date.setHours(-<span class="hljs-number">1</span>);
        <span class="hljs-comment">//this代表的是当前函数的对象</span>
        <span class="hljs-keyword">this</span>.set({
            name: n,
            expires: date
        });
    },
    <span class="hljs-comment">/*查找*/</span>
    get: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span> {<!-- --></span>
        n = <span class="hljs-built_in">encodeURIComponent</span>(n);
        <span class="hljs-keyword">var</span> cooikeTotal = document.cookie;
        <span class="hljs-keyword">var</span> cookies = cooikeTotal.split(<span class="hljs-string">"; "</span>);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cookies.length; i &lt; len; i++) {
            <span class="hljs-keyword">var</span> arr = cookies[i].split(<span class="hljs-string">"="</span>);
            <span class="hljs-keyword">if</span>(n == arr[<span class="hljs-number">0</span>]) {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(arr[<span class="hljs-number">1</span>]);
            }
        }
    }
}</code></pre> 
<p>下面的是server.js代码，主要对购物车中各种操作进行了封装，比如商品个数统计，更新获取本地数据等操作，方便代码管理，请看代码：</p> 
<pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-comment">/*
    功能：查看本地数据中是否含有指定的对象（商品），根据id
    参数：id：商品的标识
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkObjByPid</span><span class="hljs-params">(id)</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> jsonStr = cookieObj.get(<span class="hljs-string">"datas"</span>);
    <span class="hljs-keyword">var</span> jsonObj = <span class="hljs-built_in">JSON</span>.parse(jsonStr);
    <span class="hljs-keyword">var</span> isExist = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = jsonObj.length; i &lt; len; i++) {
        <span class="hljs-keyword">if</span>(jsonObj[i].pid == id) {
            isExist = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-keyword">return</span> isExist; <span class="hljs-comment">//return false;</span>
}

<span class="hljs-comment">/*
    功能：更新本地数据
    参数：arr    数组对象
    返回一个值：最新的本地转换后的数组对象
 * */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateData</span><span class="hljs-params">(arr)</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> jsonStr = <span class="hljs-built_in">JSON</span>.stringify(arr);
    cookieObj.set({
        name: <span class="hljs-string">"datas"</span>,
        value: jsonStr
    });
    jsonStr = cookieObj.get(<span class="hljs-string">"datas"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(jsonStr);
}

<span class="hljs-comment">/*
    获取商品的总数量
    返回：数字
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTotalCount</span><span class="hljs-params">()</span> {<!-- --></span>
    <span class="hljs-comment">/*循环遍历数组，获取每一个对象中的pCount值相加总和*/</span>
    <span class="hljs-keyword">var</span> totalCount = <span class="hljs-number">0</span>; <span class="hljs-comment">//默认为0</span>
    <span class="hljs-keyword">var</span> jsonStr = cookieObj.get(<span class="hljs-string">"datas"</span>);
    <span class="hljs-keyword">var</span> listObj = <span class="hljs-built_in">JSON</span>.parse(jsonStr);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = listObj.length; i &lt; len; i++) {
        totalCount = listObj[i].pCount + totalCount;
    }
    <span class="hljs-keyword">return</span> totalCount;
}

<span class="hljs-comment">/*
    更新本地数据根据pid
    id:商品的标识
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateObjById</span><span class="hljs-params">(id, num)</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> jsonStr = cookieObj.get(<span class="hljs-string">"datas"</span>);
    <span class="hljs-keyword">var</span> listObj = <span class="hljs-built_in">JSON</span>.parse(jsonStr);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = listObj.length; i &lt; len; i++) {
        <span class="hljs-keyword">if</span>(listObj[i].pid == id) {
            listObj[i].pCount = listObj[i].pCount + num;
            <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-keyword">return</span> updateData(listObj)
}

<span class="hljs-comment">/*
    获取本地数据
    返回 数组对象
 * */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllData</span><span class="hljs-params">()</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> jsonStr = cookieObj.get(<span class="hljs-string">"datas"</span>);
    <span class="hljs-keyword">var</span> listObj = <span class="hljs-built_in">JSON</span>.parse(jsonStr);
    <span class="hljs-keyword">return</span> listObj;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deleteObjByPid</span><span class="hljs-params">(id)</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> lisObj = getAllData();
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = lisObj.length; i &lt; len; i++) {
        <span class="hljs-keyword">if</span>(lisObj[i].pid == id) {
            lisObj.splice(i, <span class="hljs-number">1</span>);
            <span class="hljs-keyword">break</span>;
        }
    }
    updateData(lisObj);
    <span class="hljs-keyword">return</span> lisObj;
}</code></pre> 
<p>因为上述代码中涉及了进入购物车后的一些操作，读者看了之后可能会感动疑惑，不用担心，下面请看点击进入我的购物车之后的分析。 <br> 请看效果图： <br> <img src="https://images2.imgbox.com/9f/4e/ZcEAcYpI_o.png" alt="这里写图片描述" title=""> <br> 笔者在主页中点击了三种商品，共点击了七次，在购物车中出现了相应商品以及价格计算。对于途中的各种信息，相信读者一目了然。请看本购物车的html代码：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>购物车<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
        <span class="hljs-comment">&lt;!--购物车样式表--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"../css/cart.css"</span> /&gt;</span>
        <span class="hljs-comment">&lt;!--操作cookie的js文件--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/cookie.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>购物车<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">h3</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"index.html"</span>&gt;</span>返回商品列表页面<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"table"</span> <span class="hljs-attribute">border</span>=<span class="hljs-value">"1"</span> <span class="hljs-attribute">cellspacing</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">cellpadding</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hide"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">thead</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"allCheck"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"ck"</span> /&gt;</span>全选
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            图片
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            描述
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            数量
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            单价
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            小计
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>
                            操作
                        <span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">thead</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">tbody</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tbody"</span>&gt;</span>
                    <span class="hljs-comment">&lt;!--
                    &lt;tr&gt;
                        &lt;td&gt;
                            &lt;input type="checkbox" class="ck"  /&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            &lt;img src="../images/p1.jpg" alt="" /&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            酷黑，棒棒棒棒
                        &lt;/td&gt;
                        &lt;td&gt;
                            &lt;button class="down"&gt;-&lt;/button&gt;&lt;input type="text" value="1" readonly="readonly" /&gt;&lt;button class="up"&gt;+&lt;/button&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            ￥&lt;span&gt;111&lt;/span&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            ￥&lt;span&gt;111&lt;/span&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            &lt;button class="del"  &gt;删除&lt;/button&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    --&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">tbody</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"box"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"box"</span>&gt;</span>购物车里没有任何商品<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">h2</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"h2"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">""</span>&gt;</span>总价格：￥<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"totalPrice"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/server.js"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-comment">&lt;!--操作购物车页面的cart.js--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../js/cart.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre> 
<p>在对购物车进行相关的表现设计之后，既要进行javascript行为设计，请看与本页相关的cart.js代码：</p> 
<pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-comment">/*
    思路：
        第一步：当页面加载完后，根据本地的数据，动态生成表格（购物车列表）
              获取所要操作的节点对象
             判断购物车中是否有数据？
                有：
                    显示出购物列表
                没有：
                    提示购物车为空
        第二步：当购物车列表动态生成后，获取tbody里所有 的checkeBox标签节点对象，看那个被选中就获取对应行小计进行总价格运算。
        第三步：
            为每一个checkbox添加一个onchange事件，根据操作更改总价格
        第四步：全选
        第五步：
            为加减按钮添加一个鼠标点击事件
            更改该商品的数量
        第六步：删除
            获取所有的删除按钮
            为删除按钮添加一个鼠标点击事件
            删除当前行，并更新本地数据
 */</span>

<span class="hljs-keyword">var</span> listObj = getAllData();
<span class="hljs-keyword">var</span> table = document.getElementById(<span class="hljs-string">"table"</span>)
<span class="hljs-keyword">var</span> box = document.getElementById(<span class="hljs-string">"box"</span>)
<span class="hljs-keyword">var</span> tbody = document.getElementById(<span class="hljs-string">"tbody"</span>);
<span class="hljs-keyword">var</span> totalPrice = document.getElementById(<span class="hljs-string">"totalPrice"</span>);
<span class="hljs-keyword">var</span> allCheck = document.getElementById(<span class="hljs-string">"allCheck"</span>);

<span class="hljs-keyword">if</span>(listObj.length == <span class="hljs-number">0</span>) { <span class="hljs-comment">//购物车为空</span>
    box.className = <span class="hljs-string">"box"</span>;
    table.className = <span class="hljs-string">"hide"</span>;
} <span class="hljs-keyword">else</span> {
    box.className = <span class="hljs-string">"box hide"</span>;
    table.className = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = listObj.length; i &lt; len; i++) {
        <span class="hljs-keyword">var</span> tr = document.createElement(<span class="hljs-string">"tr"</span>);
        tr.setAttribute(<span class="hljs-string">"pid"</span>, listObj[i].pid);
            <span class="hljs-comment">//{"pid":值,"pImg":值,"pName":值,"pDesc":值,"price":值,"pCount":1},</span>
        tr.innerHTML = <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'&lt;input type="checkbox" class="ck"  /&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'&lt;img src="'</span> + listObj[i].pImg + <span class="hljs-string">'" alt="" /&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            listObj[i].pDesc +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'&lt;button class="down"&gt;-&lt;/button&gt;&lt;input type="text" value="'</span> + listObj[i].pCount + <span class="hljs-string">'" readonly="readonly" /&gt;&lt;button class="up"&gt;+&lt;/button&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'￥&lt;span&gt;'</span> + listObj[i].price + <span class="hljs-string">'&lt;/span&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'￥&lt;span&gt;'</span> + listObj[i].price * listObj[i].pCount + <span class="hljs-string">'&lt;/span&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span> +
            <span class="hljs-string">'&lt;td&gt;'</span> +
            <span class="hljs-string">'&lt;button class="del" &gt;删除&lt;/button&gt;'</span> +
            <span class="hljs-string">'&lt;/td&gt;'</span>;
        tbody.appendChild(tr);
    }
}

<span class="hljs-comment">/*
    功能：计算总价格
 */</span>
<span class="hljs-keyword">var</span> cks = document.querySelectorAll(<span class="hljs-string">"tbody .ck"</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTotalPrice</span><span class="hljs-params">()</span> {<!-- --></span>
    cks = document.querySelectorAll(<span class="hljs-string">"tbody .ck"</span>);
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cks.length; i &lt; len; i++) {
        <span class="hljs-keyword">if</span>(cks[i].checked) { <span class="hljs-comment">//如果当前被选中</span>
            <span class="hljs-keyword">var</span> tr = cks[i].parentNode.parentNode;
            <span class="hljs-keyword">var</span> temp = tr.children[<span class="hljs-number">5</span>].firstElementChild.innerHTML;
            sum = <span class="hljs-built_in">Number</span>(temp) + sum;
        }
    }
    <span class="hljs-keyword">return</span> sum;
}
<span class="hljs-comment">/*循环遍历为每一个checkbox添加一个onchange事件*/</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cks.length; i &lt; len; i++) {
    cks[i].onchange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        checkAllChecked();
        totalPrice.innerHTML = getTotalPrice();
    }
}

<span class="hljs-comment">/*全选实现*/</span>
allCheck.onchange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.checked) {
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cks.length; i &lt; len; i++) {
            cks[i].checked = <span class="hljs-literal">true</span>;
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = cks.length; i &lt; len; i++) {
            cks[i].checked = <span class="hljs-literal">false</span>;
        }
    }
    totalPrice.innerHTML = getTotalPrice();
}

<span class="hljs-keyword">var</span> downs = document.querySelectorAll(<span class="hljs-string">".down"</span>); <span class="hljs-comment">//一组减的按钮</span>
<span class="hljs-keyword">var</span> ups = document.querySelectorAll(<span class="hljs-string">".up"</span>); <span class="hljs-comment">//一组加的按钮</span>
<span class="hljs-keyword">var</span> dels = document.querySelectorAll(<span class="hljs-string">".del"</span>); <span class="hljs-comment">//一组删除按钮</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = downs.length; i &lt; len; i++) {
    downs[i].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> txtObj = <span class="hljs-keyword">this</span>.nextElementSibling;<span class="hljs-comment">//下一个兄弟节点</span>
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.parentNode.parentNode;
        <span class="hljs-keyword">var</span> pid = tr.getAttribute(<span class="hljs-string">"pid"</span>);
        txtObj.value = txtObj.value - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span>(txtObj.value &lt; <span class="hljs-number">1</span>) {
            txtObj.value = <span class="hljs-number">1</span>;
            updateObjById(pid, <span class="hljs-number">0</span>)
        } <span class="hljs-keyword">else</span> {
            updateObjById(pid, -<span class="hljs-number">1</span>)
        }
        tr.children[<span class="hljs-number">0</span>].firstElementChild.checked = <span class="hljs-literal">true</span>;
        checkAllChecked();
        <span class="hljs-keyword">var</span> price = tr.children[<span class="hljs-number">4</span>].firstElementChild.innerHTML;
        tr.children[<span class="hljs-number">5</span>].firstElementChild.innerHTML = price * txtObj.value;
        totalPrice.innerHTML = getTotalPrice();

    }

    ups[i].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> txtObj = <span class="hljs-keyword">this</span>.previousElementSibling;<span class="hljs-comment">//上一个兄弟节点</span>
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.parentNode.parentNode;
        <span class="hljs-keyword">var</span> pid = tr.getAttribute(<span class="hljs-string">"pid"</span>);
        txtObj.value = <span class="hljs-built_in">Number</span>(txtObj.value) + <span class="hljs-number">1</span>;
        updateObjById(pid, <span class="hljs-number">1</span>)
        tr.children[<span class="hljs-number">0</span>].firstElementChild.checked = <span class="hljs-literal">true</span>;
        checkAllChecked()
        <span class="hljs-keyword">var</span> price = tr.children[<span class="hljs-number">4</span>].firstElementChild.innerHTML;
        tr.children[<span class="hljs-number">5</span>].firstElementChild.innerHTML = price * txtObj.value;
        totalPrice.innerHTML = getTotalPrice();
    }

    dels[i].onclick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> tr = <span class="hljs-keyword">this</span>.parentNode.parentNode;
        <span class="hljs-keyword">var</span> pid = tr.getAttribute(<span class="hljs-string">"pid"</span>)
        <span class="hljs-keyword">if</span>(confirm(<span class="hljs-string">"确定删除？"</span>)) {
            <span class="hljs-comment">//remove()  自杀</span>
            tr.remove();
            listObj = deleteObjByPid(pid);
        }
        <span class="hljs-keyword">if</span>(listObj.length == <span class="hljs-number">0</span>) { <span class="hljs-comment">//购物车为空</span>
            box.className = <span class="hljs-string">"box"</span>;
            table.className = <span class="hljs-string">"hide"</span>;
        } <span class="hljs-keyword">else</span> {
            box.className = <span class="hljs-string">"box hide"</span>;
            table.className = <span class="hljs-string">""</span>;
        }
        totalPrice.innerHTML = getTotalPrice();
    }
}

<span class="hljs-comment">/*检测是否要全选*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAllChecked</span><span class="hljs-params">()</span> {<!-- --></span>
    <span class="hljs-keyword">var</span> isSelected = <span class="hljs-literal">true</span>; <span class="hljs-comment">//全选是否会选中</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, len = cks.length; j &lt; len; j++) {
        <span class="hljs-keyword">if</span>(cks[j].checked == <span class="hljs-literal">false</span>) {
            isSelected = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">break</span>;
        }
    }
    allCheck.checked = isSelected;
}</code></pre> 
<p>上述代码完成了购物车中的相关操作，比如价格计算，商品数量更换，商品删除等操作。 <br> 到这里我们已经完成了购物车的大部分功能，我们对html，css, BOM,DOM,json,cookie等进行了综合应用，相信读者理解之后一定会对自己的javascript学习更进一步，本示例中涉及的大部分代码都在本页中贴出，部分代码资源未向读者展示，读者可以点击下面的资源链接，下载本示例的全部代码及图片资料。本示例采用HBuilder编译器编译运行，涉及cookie操作，请读者自行安装服务器或者添加到HBuilder中运行查看。 <br> 资源链接：<a href="http://download.csdn.net/detail/zhongguohaoshaonian/9641561">购物车全部资源下载</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c9a53e0cf822dcafbd871076bb8ced3f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将两个字符转化成一个十六进制数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c300cc9ed6409032610a244d9840bb6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java中Collection集合成员花名册</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>