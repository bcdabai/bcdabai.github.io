<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>达梦数据库统计信息和执行计划的命令 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="达梦数据库统计信息和执行计划的命令" />
<meta property="og:description" content="--可参考 DM8_SQL语言使用手册 PDF 手册， 首先，以下对象不支持统计信息： 1. 外部表、 DBLINK 远程表、动态视图、记录类型数组所用的临时表； 2. 所在表空间为 OFFLINE 的对象； 3. 位图索引，位图连接索引、虚索引、 无效的索引、全文索引； 4. 列：BLOB、CLOB 、 TEXT 、IMAGE、 LONGVARBINARY 、 LONGVARCHAR 等列类型。 收集统计信息，可以通过命令和系统函数的方式进行。 第一、通过STAT 命令收集统计信息； 设置表生成统计信息 STAT ON [&lt; 模式名 &gt;.]&lt; 表名 &gt; [GLOBAL]; 举例说明 ： STAT ON SYS.SYSOBJECTS; 收集列、索引生成统计信息 语法格式： STAT &lt; 采样率百分比 &gt; [SIZE &lt; 直方图桶数 &gt;] ON &lt; 统计对象 &gt; [GLOBAL] &lt; 统计对象 &gt; ：：= [&lt; 模式名 &gt;.] &lt;表名 &gt; (&lt; 列名&gt;{,&lt; 列名&gt;}) | INDEX [&lt; 模式名 &gt;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b76bc337f6405423eac0c592614974c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-11T10:18:22+08:00" />
<meta property="article:modified_time" content="2022-07-11T10:18:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">达梦数据库统计信息和执行计划的命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <div> 
  <div></div> 
  <div> 
   <strong><span style="color:#fe2c24;"><span style="background-color:#ffd900;">--可参考 DM8_SQL语言使用手册  PDF 手册，</span></span></strong> 
  </div> 
  <div></div> 
  <div></div> 
  <div> 
   <span style="color:#000000;">首先，以下对象不支持统计信息：</span> 
  </div> 
  <div> 
   <span style="color:#000000;">1. </span> 
   <span style="color:#000000;">外部表、</span> 
   <span style="color:#000000;">DBLINK 远程表、动态视图、记录类型数组所用的临时表；</span> 
  </div> 
  <div> 
   <span style="color:#000000;">2. </span> 
   <span style="color:#000000;">所在表空间为 </span> 
   <span style="color:#000000;">OFFLINE </span> 
   <span style="color:#000000;">的对象；</span> 
  </div> 
  <div> 
   <span style="color:#000000;">3. 位图索引，位图连接索引、虚索引、 无效的索引、全文索引；</span> 
  </div> 
  <div> 
   <span style="color:#000000;">4. 列：BLOB、CLOB</span> 
   <span style="color:#000000;">、</span> 
   <span style="color:#000000;">TEXT</span> 
   <span style="color:#000000;">、IMAGE、</span> 
   <span style="color:#000000;">LONGVARBINARY</span> 
   <span style="color:#000000;">、</span> 
   <span style="color:#000000;">LONGVARCHAR 等列类型。 </span> 
  </div> 
 </div> 
 <div></div> 
 <div></div> 
 <div> 
  <strong>收集统计信息，可以通过命令和系统函数的方式进行。</strong> 
 </div> 
 <div></div> 
 <div></div> 
 <div> 
  <strong><span style="background-color:#79c6cd;">第一、通过STAT 命令收集统计信息；</span></strong> 
 </div> 
 <div></div> 
 <div></div> 
 <div> 
  <span style="color:#000000;"><strong>设置表生成统计信息 </strong></span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#000000;">STAT ON            [&lt;</span> 
  <span style="color:#000000;">模式名</span> 
  <span style="color:#000000;">&gt;.]&lt;</span> 
  <span style="color:#000000;">表名</span> 
  <span style="color:#000000;">&gt; [GLOBAL];</span> 
 </div> 
</div> 
<div></div> 
<div> 
 <div> 
  <span style="color:#000000;"><strong>举例说明 </strong></span>：  
  <span style="color:#000000;">STAT ON      SYS.SYSOBJECTS; </span> 
 </div> 
 <div></div> 
 <div></div> 
</div> 
<div> 
 <span style="color:#000000;"><strong>收集列、索引生成统计信息 </strong></span> 
</div> 
<div></div> 
<div></div> 
<div> 
 <span style="color:#000000;"><strong>语法格式：</strong></span> 
 <span style="color:#000000;">STAT  &lt;</span> 
 <span style="color:#000000;"><span style="background-color:#956fe7;">采样率百分比</span></span> 
 <span style="color:#000000;">&gt;   [SIZE &lt;</span> 
 <span style="color:#000000;">直方图桶数</span> 
 <span style="color:#000000;">&gt;]    ON &lt;</span> 
 <span style="color:#000000;"><span style="background-color:#956fe7;">统计对象</span></span> 
 <span style="color:#000000;">&gt;          [GLOBAL] </span> 
</div> 
<div></div> 
<div></div> 
<div> 
 <span style="color:#000000;">&lt;</span> 
 <span style="color:#000000;">统计对象</span> 
 <span style="color:#000000;">&gt;</span> 
 <span style="color:#000000;">：：= [&lt;</span> 
 <span style="color:#000000;">模式名</span> 
 <span style="color:#000000;">&gt;.]<strong> <span style="background-color:#ff9900;"> </span></strong></span> 
 <strong><span style="color:#000000;"><span style="background-color:#ff9900;">&lt;</span></span><span style="color:#000000;"><span style="background-color:#ff9900;">表名</span></span></strong> 
 <span style="color:#000000;"><strong><span style="background-color:#ff9900;">&gt; </span></strong><span style="background-color:#ff9900;"> </span><strong><span style="background-color:#ff9900;">(&lt;</span></strong></span> 
 <strong><span style="color:#000000;"><span style="background-color:#ff9900;">列名</span></span><span style="color:#000000;"><span style="background-color:#ff9900;">&gt;{,&lt;</span></span></strong> 
 <span style="color:#000000;"><strong><span style="background-color:#ff9900;">列名&gt;}) </span></strong><span style="background-color:#ff9900;"> </span>  |    <strong><span style="background-color:#ff9900;">INDEX  </span></strong></span> 
 <span style="color:#000000;"><span style="background-color:#ff9900;"> [&lt;</span></span> 
 <span style="color:#000000;"><span style="background-color:#ff9900;">模式名</span></span> 
 <span style="color:#000000;"><span style="background-color:#ff9900;">&gt;.] &lt;</span></span> 
 <span style="color:#000000;"><span style="background-color:#ff9900;">索引名</span></span> 
 <span style="color:#000000;"><span style="background-color:#ff9900;">&gt; </span></span> 
</div> 
<div></div> 
<div></div> 
<div> 
 <div> 
  <span style="color:#000000;"><strong>举例说明 </strong></span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#000000;">STAT 30 ON  SYS.SYSOBJECTS (ID); </span> 
 </div> 
 <div> 
  <span style="color:#000000;">STAT 30 ON  SYS.SYSOBJECTS (PID,NAME);</span> 
 </div> 
 <div> 
  <span style="color:#000000;">STAT 50 ON  INDEX    PURCHASING.S1; </span> 
 </div> 
 <div></div> 
 <div></div> 
 <div> 
  <strong><span style="color:#000000;"><span style="background-color:#79c6cd;">第二、通过系统函数收集统计信息；</span></span></strong> 
 </div> 
 <div></div> 
 <div></div> 
 <div> 
  <strong>对库DB，表TAB，索引INDEX，列COL，SQL语句，共5类对象，收集统计信息的函数：</strong> 
 </div> 
 <div></div> 
 <div> 
  <hr> 
  <p><span style="color:#000000;">1. SP_</span><strong><span style="color:#0d0016;"><span style="background-color:#ff9900;">DB_STAT</span></span></strong><span style="color:#000000;">_INIT  ----<strong>功能： </strong></span><span style="color:#000000;">对库上所有模式的所有用户表以及表上的所有索引生成统计信息</span></p> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;"><strong>定义： </strong>SP_DB_STAT_INIT ( ) </span> 
  </div> 
  <div> 
   <span style="color:#000000;"><strong>举例： </strong></span> 
   <span style="color:#000000;">CALL   SP_DB_STAT_INIT ();</span> 
  </div> 
  <div></div> 
  <div></div> 
  <div> 
   <div> 
    <span style="color:#000000;">2. SP_<strong><span style="background-color:#ff9900;">TAB_STAT</span></strong>_INIT  ------------</span> 
    <strong>功能：</strong>对某张表或某个索引生成统计信息 
   </div> 
   <div> 
    <p><span style="color:#000000;"><strong>定义：</strong>SP_TAB_STAT_INIT ( schname varchar(128), tablename varchar(128) ) </span></p> 
    <div> 
     <span style="color:#000000;"><strong>举例： </strong></span> 
     <span style="color:#000000;">CALL   SP_TAB_STAT_INIT ('SYS', 'SYSOBJECTS');</span> 
    </div> 
    <div></div> 
    <div></div> 
    <div> 
     <div> 
      <div> 
       <span style="color:#000000;">3. SP_</span> 
       <span style="color:#0d0016;"><strong><span style="background-color:#ff9900;">INDEX_STAT</span></strong></span> 
       <span style="color:#000000;">_INIT    <strong>-------------功能： </strong></span> 
       <span style="color:#000000;">对指定的索引生成统计信息</span> 
      </div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>定义： </strong>SP_INDEX_STAT_INIT ( schname varchar(128), indexname varchar(128) ) </span> 
      </div> 
      <div> 
       <span style="color:#000000;"><strong>举例： </strong></span> 
       <span style="color:#000000;">CALL   SP_INDEX_STAT_INIT ('SYSDBA', 'IND');</span> 
      </div> 
     </div> 
     <div></div> 
     <div></div> 
     <div> 
      <div></div> 
      <div> 
       <div> 
        <span style="color:#000000;">4. SP_<strong><span style="background-color:#ff9900;">COL_STAT</span></strong>_INIT   -----<strong>功能： </strong></span> 
        <span style="color:#000000;">对指定的列生成统计信息，不支持大字段列和虚拟列</span> 
       </div> 
       <div> 
        <span style="color:#000000;"><strong>定义：</strong></span> 
       </div> 
       <div> 
        <span style="color:#000000;">SP_COL_STAT_INIT ( schname varchar(128), tablename varchar(128), colname varchar(128) ) </span> 
       </div> 
       <div></div> 
      </div> 
     </div> 
     <div> 
      <span style="color:#000000;"><strong>举例： </strong></span> 
      <span style="color:#000000;">CALL   SP_COL_STAT_INIT ('SYS', 'SYSOBJECTS', 'ID');</span> 
     </div> 
     <div></div> 
     <div> 
      <div> 
       <span style="color:#000000;">5. SP_<strong><span style="background-color:#ff9900;">SQL_STAT</span></strong>_INIT</span> 
       <span style="color:#000000;"><strong>*    --------------------</strong></span> 
      </div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>定义：</strong></span> 
       <span style="color:#000000;">SP_SQL_STAT_INIT ( sql varchar(8187) ) </span> 
      </div> 
      <div> 
       <span style="color:#000000;"><strong>举例说明： </strong></span> 
       <span style="color:#000000;">CALL SP_SQL_STAT_INIT ('SELECT * FROM SYSOBJECTS');</span> 
      </div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>功能： </strong></span> 
      </div> 
      <div> 
       <span style="color:#000000;">对某个 </span> 
       <span style="color:#000000;">SQL </span> 
       <span style="color:#000000;">查询语句中涉及的所有表和过滤条件中的列</span> 
       <span style="color:#000000;">(不包括大字段、 ROWID)</span> 
       <span style="color:#000000;">生成统计信息。 </span> 
      </div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>可能返回的错误提示：</strong> </span> 
      </div> 
      <div> 
       <span style="color:#000000;">1</span> 
       <span style="color:#000000;">） 语法分析出错，</span> 
       <span style="color:#000000;">sql 语句语法错误 </span> 
      </div> 
      <div> 
       <span style="color:#000000;">2</span> 
       <span style="color:#000000;">） 对象不支持统计信息，统计的表或者列不存在，或者不允许被统计 </span> 
      </div> 
      <div> 
       <hr> 
       <p><span style="color:#000000;">1. ET          ------------<strong>功能： </strong></span><span style="color:#000000;">统计执行 </span><span style="color:#000000;">ID </span><span style="color:#000000;">为 </span><span style="color:#000000;">ID_IN </span><span style="color:#000000;">的所有操作符的执行时间。</span></p> 
       <p><span style="color:#000000;">需设置 </span><span style="color:#000000;">INI 参数，ENABLE_MONITOR=1</span><span style="color:#000000;">、</span><span style="color:#000000;">MONITOR_TIME=1 </span><span style="color:#000000;">和 </span><span style="color:#000000;">MONITOR_SQL_EXEC=1</span><span style="color:#000000;">。</span></p> 
      </div> 
     </div> 
     <div> 
      <div> 
       <div> 
        <div> 
         <div> 
          <div> 
           <div> 
            <span style="color:#000000;"><strong>定义</strong>： ET( ID_IN INT ); </span> 
           </div> 
           <div></div> 
           <div> 
            <span style="color:#000000;"><strong>举例：</strong>et(26);   -----------可以得到执行号为 </span> 
            <span style="color:#000000;">26</span> 
            <span style="color:#000000;">。 </span>是通过下面SQL语句获得。 
           </div> 
           <div></div> 
           <div> 
            <span style="color:#000000;">select count(*) from sysobjects where name='SYSDBA'; </span> 
           </div> 
           <div> 
            <span style="color:#000000;">行号</span> 
            <span style="color:#000000;"> COUNT(*) </span> 
           </div> 
           <div> 
            <span style="color:#000000;">---------- -------------------- </span> 
           </div> 
           <div> 
            <span style="color:#000000;">1 2 </span> 
           </div> 
           <div> 
            <span style="color:#000000;">已用时间</span> 
            <span style="color:#000000;">: 14.641(</span> 
            <span style="color:#000000;">毫秒</span> 
            <span style="color:#000000;">). </span> 
            <span style="color:#000000;">执行号</span> 
            <span style="color:#000000;">:</span> 
            <span style="color:#ff0000;">26</span> 
            <span style="color:#000000;">. </span> 
           </div> 
           <div></div> 
           <div> 
            <hr> 
            <p></p> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div> 
       <div></div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#000000;">1. SP_</span> 
   <span style="color:#0d0016;"><strong><span style="background-color:#ff9900;">TAB_INDEX_STAT</span></strong></span> 
   <span style="color:#000000;">_INIT    ---- </span> 
   <strong>功能：</strong>对 
   <span style="background-color:#fefcd8;">表上所有的索引</span>生成统计信息 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#000000;"><strong>定义： </strong></span> 
   <span style="color:#000000;">SP_TAB_INDEX_STAT_INIT ( schname varchar(128), tablename varchar(128) ) </span> 
  </div> 
 </div> 
 <div> 
  <span style="color:#000000;"><strong>举例： </strong></span> 
  <span style="color:#000000;">CALL   SP_TAB_INDEX_STAT_INIT ('SYS', 'SYSOBJECTS'); </span> 
 </div> 
 <div>
     
  <div></div> 
 </div> 
 <div> 
  <div></div> 
  <div> 
   <span style="color:#000000;">2. SP_<strong><span style="background-color:#ff9900;">TAB_COL_STAT</span></strong>_INIT<strong>*  ----------</strong></span> 
   <strong>功能：</strong>对 
   <span style="background-color:#ffd900;">某个表上所有的列</span>生成统计信息 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#000000;"><strong>定义： </strong></span> 
   <span style="color:#000000;">SP_</span> 
   <span style="color:#0d0016;">TAB_COL_STAT</span> 
   <span style="color:#000000;">_INIT ( schname varchar(128), tablename varchar(128) ) </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#000000;"><strong>举例： </strong></span> 
   <span style="color:#000000;">CALL SP_TAB_COL_STAT_INIT ('SYS', 'SYSOBJECTS'); </span> 
  </div> 
  <div></div> 
  <div></div> 
  <div> 
   <span style="color:#000000;">3. <strong><span style="background-color:#ff9900;">SP_STAT_ON</span></strong>_TABLE_COLS -----<strong>功能：</strong></span> 
   <span style="color:#000000;">对某个表上所有的列按照指定采样率生成统计信息</span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#000000;"><strong>定义： </strong></span> 
  </div> 
  <div> 
   <span style="color:#000000;">SP_STAT_ON_TABLE_COLS( </span> 
  </div> 
  <div> 
   <span style="color:#000000;">SCHEMA_NAME VARCHAR(128),TABLE_NAMEVARCHAR(128), E_PERCENT INT </span> 
  </div> 
  <div> 
   <span style="color:#000000;">) </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#000000;"><strong>举例： </strong></span> 
   <span style="color:#000000;">CALL SP_STAT_ON_TABLE_COLS ('SYS','SYSOBJECTS',90); </span> 
  </div> 
  <div> 
   <hr> 
   <div> 
    <span style="color:#000000;">17. SP_CREATE_AUTO_STAT_TRIGGER  </span> 
   </div> 
   <div></div> 
   <div> 
    <span style="color:#000000;"><strong>功能： </strong></span> 
    <span style="color:#000000;">INI </span> 
    <span style="color:#000000;">参数 </span> 
    <span style="color:#000000;">AUTO_STAT_OBJ </span> 
    <span style="color:#000000;">开启时，启用自动收集统计信息功能。</span> 
   </div> 
   <div> 
    <span style="color:#000000;"><strong>举例： </strong>SP_CREATE_AUTO_STAT_TRIGGER(1, 1, 0, 2,'22:00', '2020/2/18',0, 1);</span> 
   </div> 
   <div></div> 
   <div> 
    <div> 
     <span style="color:#000000;">INI </span> 
     <span style="color:#000000;">参数 </span> 
     <span style="color:#000000;">AUTO_STAT_OBJ </span> 
     <span style="color:#000000;">开启时，</span> 
    </div> 
    <div> 
     <span style="color:#000000;">自 </span> 
     <span style="color:#000000;">2020 </span> 
     <span style="color:#000000;">年 </span> 
     <span style="color:#000000;">2 </span> 
     <span style="color:#000000;">月 </span> 
     <span style="color:#000000;">18 </span> 
     <span style="color:#000000;">日起，每天 </span> 
     <span style="color:#000000;">22 时开 始，</span> 
    </div> 
    <div> 
     <span style="color:#000000;">每隔两分钟更新一次符合要求的表的统计信息，</span> 
    </div> 
    <div> 
     <span style="color:#000000;">更新统计信息执行最大时间不做限制。 </span> 
    </div> 
    <div></div> 
   </div> 
   <hr> 
   <p><strong>可以删除统计信息：从表、索引、列 3个对象上删除；</strong></p> 
  </div> 
 </div> 
 <div> 
  <span style="color:#000000;">1. SP_TAB_STAT_DEINIT           -----------------删除某张表的统计信息</span> 
  <div> 
   <span style="color:#000000;">2. SP_INDEX_STAT_DEINIT       -----------------删除指定索引的统计信息 </span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;">3. SP_COL_STAT_DEINIT           -----------------删除指定列的统计信息 </span> 
   </div> 
   <div> 
    <div> 
     <span style="color:#000000;">4. SP_TAB_COL_STAT_DEINIT  -----------------删除表上所有列的统计信息</span> 
    </div> 
    <div> 
     <div> 
      <span style="color:#000000;">5. SP_TAB_MSTAT_DEINIT        -----------------<strong> </strong></span> 
      <span style="color:#000000;">删除一个表的多维统计信息。</span> 
     </div> 
     <div></div> 
     <div></div> 
     <div> 
      <span style="color:#000000;"> SF_GET_MD_COL_STR   -------------</span> 
      <strong>功能：</strong>获取表上建多维统计信息的列信息。 
     </div> 
     <div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>定义： </strong></span> 
       <span style="color:#000000;">SF_GET_MD_COL_STR( tabid int, col_info varbinary(4096), col_num int ) </span> 
      </div> 
      <div></div> 
      <div> 
       <span style="color:#000000;"><strong>举例： </strong>获取表 L1 </span> 
       <span style="color:#000000;">上建的多维统计信息的列信息 </span> 
      </div> 
      <div> 
       <span style="color:#000000;">SELECT  SF_GET_MD_COL_STR(ID, MCOLID, N_DIMENSION) </span> 
      </div> 
      <div> 
       <span style="color:#000000;">FROM SYS.SYSMSTATS </span> 
      </div> 
      <div> 
       <span style="color:#000000;">WHERE ID IN (SELECT ID FROM SYSOBJECTS WHERE NAME='L1');</span> 
      </div> 
     </div> 
    </div> 
    <div> 
     <div> 
      <div> 
       <hr> 
       <p></p> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div> 
   <div> 
    <span style="color:#000000;"> SP_UPDATE_SYSSTATS </span> 
   </div> 
   <div> 
    <span style="color:#000000;"><strong>定义： </strong>SP_UPDATE_SYSSTATS（ flag int ) </span> 
   </div> 
   <div> 
    <span style="color:#000000;"><strong>功能： </strong></span> 
    <span style="color:#000000;">用以升级及迁移统计信息。</span> 
    <span style="color:#000000;">7.1.5.173 </span> 
    <span style="color:#000000;">及之后的版本支持该功能。 </span> 
   </div> 
   <div> 
    <div> 
     <span style="color:#000000;"><strong>举例： </strong></span> 
     <span style="color:#000000;">如果想要将老库升级，需要手动升级，升级步骤如下： </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(99); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">或者 </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(1); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(2); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(3); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(4); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">如果想使用老库，且使用了之前的加列版本服务器且升级失败，那么需要先回 退版本，再升级： </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(0); </span> 
    </div> 
    <div> 
     <span style="color:#000000;">SP_UPDATE_SYSSTATS(99);</span> 
    </div> 
   </div> 
   <div></div> 
   <div> 
    <span style="color:#000000;"><strong>参数说明： </strong></span> 
   </div> 
   <div> 
    <span style="color:#000000;">flag</span> 
    <span style="color:#000000;">：标记，取值 </span> 
    <span style="color:#000000;">0</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">1</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">2</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">3</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">4</span> 
    <span style="color:#000000;">、</span> 
    <span style="color:#000000;">99</span> 
    <span style="color:#000000;">。 </span> 
   </div> 
   <div> 
    <span style="color:#000000;">0</span> 
    <span style="color:#000000;">：回退版本；</span> 
   </div> 
   <div> 
    <span style="color:#000000;">1：创建统计信息 升级辅助表； </span> 
   </div> 
   <div> 
    <span style="color:#000000;">2</span> 
    <span style="color:#000000;">：升级 </span> 
    <span style="color:#000000;">SYS.SYSSTATS </span> 
    <span style="color:#000000;">表结构； </span> 
   </div> 
   <div> 
    <span style="color:#000000;">3</span> 
    <span style="color:#000000;">：导入 </span> 
    <span style="color:#000000;">SYS.SYSSTATS 表数 据； </span> 
   </div> 
   <div> 
    <span style="color:#000000;">4</span> 
    <span style="color:#000000;">：删除升级辅助表；</span> 
   </div> 
   <div> 
    <span style="color:#000000;">参数 99：理想状态下使用，集合了参数 1、2、3、4 的功能。</span> 
   </div> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8b17e7ed6bf597ee4d29934ba94d2b77/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">黑马 Spring_day01</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/44e808b426907a5c1336129f41c504e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从树莓派系统安装小白到系统SD卡复制克隆高手</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>