<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>POJ 2553(The Bottom of a Graph-缩点求出度) - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="POJ 2553(The Bottom of a Graph-缩点求出度)" />
<meta property="og:description" content="Language: Default The Bottom of a Graph Time Limit: 3000MS Memory Limit: 65536KTotal Submissions: 7308 Accepted: 3003 Description
We will use the following (standard) definitions from graph theory. Let V be a nonempty and finite set, its elements being called vertices (or nodes). Let E be a subset of the Cartesian product V×V, its elements being called edges. Then G=(V,E) is called a directed graph. Let n be a positive integer, and let p=(e1,." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4cde1af39d424143b48f1ba6ec12d4b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-03-31T17:17:35+08:00" />
<meta property="article:modified_time" content="2013-03-31T17:17:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">POJ 2553(The Bottom of a Graph-缩点求出度)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table border="0" width="100%" background="http://poj.org/images/table_back.jpg" style="font-family:宋体"><tbody><tr><td> 
    <div style="position:absolute; right:10px">
      Language: 
     <option value="default"> Default</option> 
    </div> 
    <div class="ptt" lang="en-US" style="text-align:center; font-size:18pt; font-weight:bold; color:blue">
      The Bottom of a Graph 
    </div> 
    <div class="plm" style="text-align:center; font-size:12pt"> 
     <table align="center"><tbody><tr><td><strong>Time Limit:</strong> 3000MS</td><td width="10px"> </td><td><strong>Memory Limit:</strong> 65536K</td></tr><tr><td><strong>Total Submissions:</strong> 7308</td><td width="10px"> </td><td><strong>Accepted:</strong> 3003</td></tr></tbody></table> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Description</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt">
      We will use the following (standard) definitions from graph theory. Let  
     <em>V</em> be a nonempty and finite set, its elements being called vertices (or nodes). Let  
     <em>E</em> be a subset of the Cartesian product  
     <em>V×V</em>, its elements being called edges. Then  
     <em>G=(V,E)</em> is called a directed graph.  
     <br> Let  
     <em>n</em> be a positive integer, and let  
     <em>p=(e<sub>1</sub>,...,e<sub>n</sub>)</em> be a sequence of length  
     <em>n</em> of edges  
     <em>e<sub>i</sub>∈E</em> such that  
     <em>e<sub>i</sub>=(v<sub>i</sub>,v<sub>i+1</sub>)</em> for a sequence of vertices  
     <em>(v<sub>1</sub>,...,v<sub>n+1</sub>)</em>. Then  
     <em>p</em> is called a path from vertex  
     <em>v<sub>1</sub></em> to vertex  
     <em>v<sub>n+1</sub></em> in  
     <em>G</em> and we say that  
     <em>v<sub>n+1</sub></em> is reachable from  
     <em>v<sub>1</sub></em>, writing  
     <em>(v<sub>1</sub>→v<sub>n+1</sub>)</em>.  
     <br> Here are some new definitions. A node  
     <em>v</em> in a graph  
     <em>G=(V,E)</em> is called a sink, if for every node  
     <em>w</em> in  
     <em>G</em> that is reachable from  
     <em>v</em>,  
     <em>v</em> is also reachable from  
     <em>w</em>. The bottom of a graph is the subset of all nodes that are sinks, i.e., 
     <em>bottom(G)={v∈V|∀w∈V:(v→w)⇒(w→v)}</em>. You have to calculate the bottom of certain graphs. 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Input</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt">
      The input contains several test cases, each of which corresponds to a directed graph  
     <em>G</em>. Each test case starts with an integer number  
     <em>v</em>, denoting the number of vertices of  
     <em>G=(V,E)</em>, where the vertices will be identified by the integer numbers in the set  
     <em>V={1,...,v}</em>. You may assume that  
     <em>1&lt;=v&lt;=5000</em>. That is followed by a non-negative integer  
     <em>e</em> and, thereafter,  
     <em>e</em> pairs of vertex identifiers  
     <em>v<sub>1</sub>,w<sub>1</sub>,...,v<sub>e</sub>,w<sub>e</sub></em> with the meaning that  
     <em>(v<sub>i</sub>,w<sub>i</sub>)∈E</em>. There are no edges other than specified by these pairs. The last test case is followed by a zero. 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Output</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt">
      For each test case output the bottom of the specified graph on a single line. To this end, print the numbers of all nodes that are sinks in sorted order separated by a single space character. If the bottom is empty, print an empty line. 
     <img src="https://images2.imgbox.com/51/06/70ogwadK_o.png" alt=""> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Sample Input</p> <pre class="sio" style="font-family:'Courier New',Courier,monospace; font-size:12pt">3 3
1 3 2 3 3 1
2 1
1 2
0
</pre> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Sample Output</p> <pre class="sio" style="font-family:'Courier New',Courier,monospace; font-size:12pt">1 3
2
</pre> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Source</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt"> 
     <a href="http://poj.org/searchproblem?field=source&amp;key=Ulm+Local+2003" rel="nofollow" style="text-decoration:initial">Ulm Local 2003</a> 
    </div> </td></tr></tbody></table> 
<br> 
<p><span style="font-size:14px">Tarjen缩点统计出度。</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;algorithm&gt;
#include&lt;functional&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
using namespace std;
#define MAXN (5000+10)
#define MAXM (1000000+10)
int n,m,h[MAXN],t[MAXN],dfs[MAXN],tim,kind,s[MAXN],tot;
bool b[MAXN];
int edge[MAXM],next[MAXM],pre[MAXN],size;
int x[MAXM],y[MAXM],numk[MAXN];
void addedge(int u,int v)
{
	edge[++size]=v;
	next[size]=pre[u];
	pre[u]=size;
}
void tar(int u)
{
	dfs[u]=t[u]=++tim;b[u]=1;s[++tot]=u;
	for (int p=pre[u];p;p=next[p])
	{
		int &amp;v=edge[p];
		if (!b[v]) tar(v),dfs[u]=min(dfs[u],dfs[v]);
		else if (!h[v]) dfs[u]=min(dfs[u],t[v]);  //保证指向祖先 
	}
	if (dfs[u]==t[u])
	{
		kind++;
		while (s[tot]!=u) h[s[tot--]]=kind,numk[kind]++;
		h[s[tot--]]=kind;numk[kind]++;
				
	}	
}
int outdegree[MAXN];
int main()
{
	while (scanf("%d",&amp;n)&amp;&amp;n)
	{
		scanf("%d",&amp;m);
		tot=size=tim=kind=0;
		memset(h,0,sizeof(h));
		memset(t,0,sizeof(t));
		memset(dfs,0,sizeof(dfs));
		memset(s,0,sizeof(s));
		memset(pre,0,sizeof(pre));
		memset(b,0,sizeof(b));
		memset(numk,0,sizeof(numk));
		memset(outdegree,0,sizeof(outdegree));
		
		for (int i=1;i&lt;=m;i++)
		{
			scanf("%d%d",&amp;x[i],&amp;y[i]);
			addedge(x[i],y[i]);
		}
		for (int i=1;i&lt;=n;i++) if (!b[i]) tar(i);
//		for (int i=1;i&lt;=n;i++) cout&lt;&lt;h[i]&lt;&lt;' ';cout&lt;&lt;endl;
		for (int i=1;i&lt;=m;i++)
		{
			if (h[x[i]]^h[y[i]]) outdegree[h[x[i]]]++;
		} 
		/*
		int ans=0;
		for (int i=1;i&lt;=kind;i++)
			if (!outdegree[i]) ans+=numk[i];
		cout&lt;&lt;ans&lt;&lt;endl;
		*/
		bool flag=0;
		for (int i=1;i&lt;=n;i++)
			if (!outdegree[h[i]])
			{
				if (flag) printf(" ");else flag=1;printf("%d",i);
			}
			
		
	//	cout&lt;&lt;ans&lt;&lt;endl;		
		cout&lt;&lt;endl;
	}
	return 0;
}
</code></pre> 
<br> 
<br> 
<p></p> 
<span style="font-size:14px; color:#333399; font-family:宋体; font-size:14px"></span>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/01837530a3d3d90cd269f1a94f67fc86/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最好的程序员大多是自学成才的</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/91607d1fc554e867ee820b7ed86574b2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">gdb结合coredump定位崩溃进程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>