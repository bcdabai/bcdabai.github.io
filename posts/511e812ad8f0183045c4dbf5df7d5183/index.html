<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Django 基础快速入门 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Django 基础快速入门" />
<meta property="og:description" content="注：知识点参考【武沛齐】
一、创建Django项目 pip 安装完毕 Django 后，命令行进入某个目录，输入命令：
进入到目录后，输入创建 Django 项目命令（注意，Django 创建项目后还需要通过命令在当前 Django 下创建对应的 app）：
django-admin startproject DjangoAutoServer 以上代码中，django-admin startproject 是创建 Django 项目的命令，之后所跟上的 DjangoAutoServer 是对应的项目名：
若提示 “django-admin startproject ” 无法识别，请将对应的 Django 目录下的 Script 加入到环境变量之中。
创建好项目后可以在所选择的目录下看到一个以项目名作为名称的文件夹：
目录文件介绍 二、创建 app 应用 在 Django 中，创建好一个项目后，我们还需要对项目得创建一个 app，创建 app 在需要在对应的项目目录下，首先进入对应的项目目录：
随后输入对应的创建 app 命令（需要注意：这个目录需要是有 manage.py 的目录）：
命令如下：
python manage.py startapp server 创建完毕后会有一个文件夹是 app 文件夹：
app 文件夹内容如下：
作用如下：
三、注册 app 到项目中 在 Django 中，我们需要对创建的 APP 进行注册，需要在 Django 下的 setting." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/511e812ad8f0183045c4dbf5df7d5183/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-06T03:41:43+08:00" />
<meta property="article:modified_time" content="2023-02-06T03:41:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Django 基础快速入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>注：知识点参考【武沛齐】</p> 
<h2><a id="Django_1"></a>一、创建Django项目</h2> 
<p>pip 安装完毕 Django 后，命令行进入某个目录，输入命令：</p> 
<p><img src="https://images2.imgbox.com/6a/e9/0LiJSX3N_o.png" alt="在这里插入图片描述"><br> 进入到目录后，输入创建 Django 项目命令（注意，Django 创建项目后还需要通过命令在当前 Django 下创建对应的 app）：</p> 
<pre><code class="prism language-bash">django-admin startproject DjangoAutoServer
</code></pre> 
<p>以上代码中，<code>django-admin startproject</code> 是创建 Django 项目的命令，之后所跟上的 <code>DjangoAutoServer</code> 是对应的项目名：<br> <img src="https://images2.imgbox.com/ba/41/JcOnUIoc_o.png" alt="在这里插入图片描述"><br> 若提示 “<code>django-admin startproject</code> ” 无法识别，请将对应的 Django 目录下的 Script 加入到环境变量之中。</p> 
<p>创建好项目后可以在所选择的目录下看到一个以项目名作为名称的文件夹：</p> 
<p><img src="https://images2.imgbox.com/a0/8b/j26u3XbB_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_18"></a>目录文件介绍</h3> 
<p><img src="https://images2.imgbox.com/99/97/qgusWYae_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_app__21"></a>二、创建 app 应用</h2> 
<p>在 Django 中，创建好一个项目后，我们还需要对项目得创建一个 app，创建 app 在需要在对应的项目目录下，首先进入对应的项目目录：</p> 
<p><img src="https://images2.imgbox.com/70/a1/OQa7X3ZJ_o.png" alt="在这里插入图片描述"><br> 随后输入对应的创建 app 命令（需要注意：这个目录需要是有 manage.py 的目录）：<br> <img src="https://images2.imgbox.com/bf/38/0uPml8vx_o.png" alt="在这里插入图片描述"><br> 命令如下：</p> 
<pre><code class="prism language-bash">python manage.py startapp server
</code></pre> 
<p><img src="https://images2.imgbox.com/41/73/q1GLeLle_o.png" alt="在这里插入图片描述"></p> 
<p>创建完毕后会有一个文件夹是 app 文件夹：</p> 
<p><img src="https://images2.imgbox.com/02/0b/worGXtJr_o.png" alt="在这里插入图片描述"></p> 
<p>app 文件夹内容如下：</p> 
<p><img src="https://images2.imgbox.com/31/1a/FuOYzkoP_o.png" alt="在这里插入图片描述"><br> 作用如下：<br> <img src="https://images2.imgbox.com/3b/aa/Vp3NECtA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9c/ba/cfw4I7q1_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_app__46"></a>三、注册 app 到项目中</h2> 
<p>在 Django 中，我们需要对创建的 APP 进行注册，需要在 Django 下的 setting.py 文件下找到 INSTALLED_APPS 配置项，在 INSTALLED_APPS 配置项中加入 app 的配置项 ，首先我们要知道 app 的配置项在哪。</p> 
<p>在以上操作中，我们创建了一个 server app，在 server app 中我们找到 apps.py，其内容如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>apps <span class="token keyword">import</span> AppConfig


<span class="token keyword">class</span> <span class="token class-name">ServerConfig</span><span class="token punctuation">(</span>AppConfig<span class="token punctuation">)</span><span class="token punctuation">:</span>
    default_auto_field <span class="token operator">=</span> <span class="token string">'django.db.models.BigAutoField'</span>
    name <span class="token operator">=</span> <span class="token string">'server'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/5d/jkPIP3J7_o.png" alt="在这里插入图片描述"><br> 此处就是 app 的 config，其名称为 app 名+COnfig 的形式命名 class。</p> 
<p>此时已经找到了对应的 app 的 config，我们回到对应的 Django 项目中的 setting.py 下，找到 INSTALLED_APPS，在其中加入 app：</p> 
<pre><code class="prism language-python"><span class="token string">'server.apps.ServerConfig'</span><span class="token punctuation">,</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/45/5a/Qf3ffA5B_o.png" alt="在这里插入图片描述"><br> 启动项目使用以下命令：</p> 
<pre><code class="prism language-bash">python manage.py runserver
</code></pre> 
<h2><a id="_url__74"></a>四、绑定 url 与路由</h2> 
<p>在 Django 项目中的 urls.py 文件下可以配置对应的 Django 路由，给与对应的 path 可使这个 path 指定到对应的处理方法：</p> 
<p><img src="https://images2.imgbox.com/ea/42/4YN53evK_o.png" alt="在这里插入图片描述"><br> 在此使用 path 方法让路由与处理方法绑定，在此绑定的是 index 路由下，绑定 view下 的 index 方法，view 为 app下的 view，所以需要在当前 urls.py 文件头上使用 from 从 server app 下导入 views ：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> server <span class="token keyword">import</span> views
</code></pre> 
<p><img src="https://images2.imgbox.com/90/0c/uLnXyMDw_o.png" alt="在这里插入图片描述"><br> 此时我们回到 server app 下的 views.py 文件查看对应的 index 方法：</p> 
<p><img src="https://images2.imgbox.com/08/25/vxfH2kyM_o.png" alt="在这里插入图片描述"><br> 该 index 方法为直接返回一个 HTTPresponse，在此需要注意的时，对路由绑定的方法需要添加一个 request 参数，当然这个参数名你可以自定义。</p> 
<p>接着我们可以使用以下命令启动当前 Django 项目：</p> 
<pre><code class="prism language-bash">python manage.py runserver
</code></pre> 
<p>接着我们在当前 Django 目录下使用命令即可：</p> 
<p><img src="https://images2.imgbox.com/0e/69/hxSmXik8_o.png" alt="在这里插入图片描述"><br> 接着访问 http://127.0.0.1:8000/ 即可：</p> 
<p><img src="https://images2.imgbox.com/63/b2/ObPvvuut_o.png" alt="在这里插入图片描述"><br> 此时由于没有配置当前路由，可在端口号后面直接访问 index 即可：</p> 
<p><img src="https://images2.imgbox.com/59/d3/YeW6Hjgq_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_105"></a>五、静态模板</h2> 
<p>在 Django 中可使用对路由的处理方法跳转到对应的静态模板，此时我们在 server app 中的 views.py 文件下添加一个方法 us：</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">us</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">"us.html"</span><span class="token punctuation">)</span>
</code></pre> 
<p>此时这个方法返回的内容并不是一个 HttpResponse，而是用 render 指定的 html 静态模板。此时我们在 render 方法的第一个参数中传入对应的 request，第二个参数传入对应的 html 文件名即可。</p> 
<p>不过在这里做完这一步并不完善，此时还需要在当前的 server app 下创建一个 templates 目录：</p> 
<p><img src="https://images2.imgbox.com/5b/0d/wLQ49Jm2_o.png" alt="在这里插入图片描述"><br> 这个 templates 文件夹为存放静态html 模板的文件夹，在其中我们存入对应的 us.html 文件，并且给定对应的 html 内容如下：</p> 
<p><img src="https://images2.imgbox.com/b0/73/QRMQOTbJ_o.png" alt="在这里插入图片描述"><br> 最后我们再到 Django 下的 urls.py 文件下配置好一个路由，使其使用 us 方法做处理：</p> 
<p><img src="https://images2.imgbox.com/4f/79/QYz1BaWq_o.png" alt="在这里插入图片描述"><br> 接着我们刷新服务或关闭服务后启动 Django 项目，那么此时你输入对应的 us 后则会执行绑定的处理方法跳转到静态 us.html ：</p> 
<p><img src="https://images2.imgbox.com/11/ca/bLbsIxJ2_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_127"></a>五、静态模板中的文件引入</h2> 
<p>在 Django 的 html 文件中若要引入静态文件，需要在起 app 目录下创建对应的 static 文件夹：</p> 
<p><img src="https://images2.imgbox.com/2b/9d/XsAvoFJ8_o.png" alt="在这里插入图片描述"></p> 
<p>创建完毕后，在 static 文件夹中可创建不同类型的文件夹，使其静态资源分类：</p> 
<p><img src="https://images2.imgbox.com/3f/bb/PlT2MXLS_o.png" alt="在这里插入图片描述"></p> 
<p>此时存放一些文件到对应的文件夹中，接着回到 html 文件，在第一行使用 Django 的模板加载对应的 static 静态文件目录：</p> 
<pre><code class="prism language-html">{%  load  static %}<span class="token comment">&lt;!--加载 static 静态文件目录--&gt;</span>
</code></pre> 
<p>若此时我在 static 下的 img 目录中存储了一张图片，那么此时代码如下：</p> 
<pre><code class="prism language-html">{%  load  static %}<span class="token comment">&lt;!--加载 static 静态文件目录--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Django template learn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% static 'img/h.jpg' %}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>我们可以看到 {%%} 为 Django 中模板语法的书写方式（之后会详细讲解），在其中 static 表示静态文件目录，而后所接着的路径则是这个静态目录下的路径。</p> 
<p>此时我们刷新页面，当前页面如下：</p> 
<p><img src="https://images2.imgbox.com/1f/36/E0pQDvH2_o.png" alt="在这里插入图片描述"></p> 
<p>若页面加载不了图片，请检查路径是否输入正确以及是否清理了缓存。</p> 
<h3><a id="_164"></a>可配置静态文件目录名</h3> 
<p>在 Django 中，并非是指定 static 目录后无法更改静态文件名称，可在 setting.py 文件下找到 STATIC_URL 配置项对其进行配置：</p> 
<p><img src="https://images2.imgbox.com/94/9f/wJ6qu1QP_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_170"></a>六、模板语法</h2> 
<h3><a id="61__171"></a>6.1 处理方法前端传值与读取</h3> 
<p>在进行开发的过程中，往往需要处理方法往前端进行传值，若此时在 us 方法中添加如下数据：</p> 
<pre><code class="prism language-python">roles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"CEO"</span><span class="token punctuation">,</span> <span class="token string">"CTO"</span><span class="token punctuation">]</span>
uinfo <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"1_bit"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">179</span><span class="token punctuation">}</span>
valList <span class="token operator">=</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"郭"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"洗碗仙人"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"仙"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"修仙大师"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"林"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"富婆杀手"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
val <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"1_bit"</span><span class="token punctuation">,</span> <span class="token string">"roles"</span><span class="token punctuation">:</span> roles<span class="token punctuation">,</span> <span class="token string">"uinfo"</span><span class="token punctuation">:</span> uinfo<span class="token punctuation">,</span> <span class="token string">"valList"</span><span class="token punctuation">:</span> valList<span class="token punctuation">}</span>
</code></pre> 
<p>从以上数据中我们可以得知，其 val dict 为其他数据的一个组合，集合了 roles、uinfo、valList 这三个变量值，那如何将最终的 val 值传入到前端模板呢？</p> 
<p>此时我们只需在 render 模板中添加值即可，完整 us 方法如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">us</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    roles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"CEO"</span><span class="token punctuation">,</span> <span class="token string">"CTO"</span><span class="token punctuation">]</span>
    uinfo <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"1_bit"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"height"</span><span class="token punctuation">:</span> <span class="token number">179</span><span class="token punctuation">}</span>
    valList <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"郭"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"洗碗仙人"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"仙"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"修仙大师"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"林"</span><span class="token punctuation">,</span> <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"富婆杀手"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
    val <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"1_bit"</span><span class="token punctuation">,</span> <span class="token string">"roles"</span><span class="token punctuation">:</span> roles<span class="token punctuation">,</span> <span class="token string">"uinfo"</span><span class="token punctuation">:</span> uinfo<span class="token punctuation">,</span> <span class="token string">"valList"</span><span class="token punctuation">:</span> valList<span class="token punctuation">}</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"us.html"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
</code></pre> 
<p>那前端模板如何获取值呢？使用两对花括号 <code>{<!-- -->{name}}</code> 中间写上对应的 key 名称即可。</p> 
<p>此时在前端页面 us.html 添加如下内容：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>传入到前端模板的 name 值为 : {<!-- -->{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>以上代码 <code>{<!-- -->{name}}</code> 则为取值的前端模板，此时运行项目访问 us 后页面如下：</p> 
<p><img src="https://images2.imgbox.com/5a/7f/eGsUjpnQ_o.png" alt="在这里插入图片描述"></p> 
<p>要注意，这个 name 值是我直接在 val dict 中所写入：</p> 
<p><img src="https://images2.imgbox.com/6d/07/FOMPL5rM_o.png" alt="在这里插入图片描述"></p> 
<p>通过上图应该还可以看到，其 roles 是一个数组，那如何取到数组值呢？此时只需要通过 val 中的 key 键名中的下标即可取值，例如：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>显示传入过来的数组值： {<!-- -->{roles.1}}-{<!-- -->{roles.0}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>以上代码中 <code>{<!-- -->{roles.1}}</code> 表示取到这个 roles 值的第一个元素，刷新页面即可看到如下显示内容：</p> 
<p><img src="https://images2.imgbox.com/54/49/9TG2Aavi_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="62__228"></a>6.2 遍历取值</h3> 
<p>若当数组过多，取值并不方便且需要显示时，可以通过前端模板的循环语法取值。前端模板取值十分简单，只需要将 for 嵌套与 <code>{% %}</code> 之内即可，在结束时添加一个 endfor 即可，代码示例如下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
   {% for item in roles %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>以上代码使用 for 对 roles 进行遍历，其每一项在遍历时用 item 作为指向，随后循环体为 <code>&lt;span&gt;{<!-- -->{item}}&lt;/span&gt;</code>，整个循环体内容为 <code>{% endfor %}</code> 截止之前。</p> 
<p>保存后刷新页面显示如下：</p> 
<p><img src="https://images2.imgbox.com/5f/f8/C1AVT1Ar_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="63__244"></a>6.3 字典取值</h3> 
<h4><a id="_245"></a>字典直接取值</h4> 
<p>在之前所给与的数据中，有一个字典数据还未取到，字典数据使用传到目标的某一个键名加上对应的点运算符 “.” 即可获取：<br> <img src="https://images2.imgbox.com/f6/89/BqyZanAF_o.png" alt="在这里插入图片描述"></p> 
<p>代码如下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>dict 取值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ uinfo.name }}-{<!-- -->{ uinfo.age }}-{<!-- -->{ uinfo.height }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>显示如下：</p> 
<p><img src="https://images2.imgbox.com/16/64/DaV43qXx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_for__260"></a>字典 for 循环取值</h4> 
<p>在对字典取值时还可以使用 for 循环取值（键名）。在 Django 前端模板语法中，一个字典的键名有一个 keys 属性，通过 for 循环对这个属性进行遍历即可渠道所有的键名：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
   keys 键名:
   {% for key in uinfo.keys %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{key}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>除了有 keys 属性外，还有一个 values 属性，通过 values 的遍历即可渠道所有字典值：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    values 值:
    {% for val in uinfo.values %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{val}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>保存页面后刷新预览，显示结果如下：</p> 
<p><img src="https://images2.imgbox.com/f1/d8/YDgdsm4y_o.png" alt="在这里插入图片描述"></p> 
<p>当然，这样单独 keys 和 values 分开显示并不是很方便对应值的含义，在此通过 for 循环可一次性的对字典的 items 属性进行变量，可同时得到 key 以及 val，示例如下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
   键名-&gt;键值:
   {% for key,val in uinfo.items %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{key}}-&gt;{<!-- -->{val}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>此时保存后预览如下：</p> 
<p><img src="https://images2.imgbox.com/72/27/uXwwifU6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="64__if__301"></a>6.4 前端模板语法 if 判断</h3> 
<p>在前端显示数据时，不止可以使用循环对数据进行遍历，还可以使用 if 对数据进行判断或进行其他的业务操作。if 语句的使用也很简单，使用一对花括号以及一个百分号 <code>{% %}</code>，在其中添加 if 即可。</p> 
<p>此时我们对 vallist 这个数据在前端进行遍历，随后进行判断：</p> 
<p><img src="https://images2.imgbox.com/b3/51/EmNtlwJt_o.png" alt="在这里插入图片描述"><br> 首先我们需要一个循环遍历 valList 这个字典数据：</p> 
<pre><code class="prism language-html">{% for item in valList %}
{% endfor %}
</code></pre> 
<p>随后在 for 循环开始以及 endfor 结束循环之间添加 if 语句的模板语法：</p> 
<pre><code class="prism language-html">{% if item.name == "郭" %}
</code></pre> 
<p>以上模板语法表示 item（也就是遍历到的那一条字典数据中的 name）的 name 属性是否等于 “郭”，若相等将会执行某一个流程，接下来我编写一个完整的 if 模板语法示例如下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
   {% if item.name == "郭" %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} 这是洗碗仙人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% elif item.name == "仙" %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} woc仙人！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% else %}
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} 洗碗仙人呢？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
   {% endif %} 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>以上代码中可以得知 endif 为 if 判断结束，通过 elif 对多个条件进行判断，并且有一个最终的 else 对其进行判断之外的逻辑执行。</p> 
<p>此时该部分的完整代码如下：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>模板语法 if 判断<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    {% for item in valList %}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            {% if item.name == "郭" %}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} 这是洗碗仙人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            {% elif item.name == "仙" %}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} woc仙人！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            {% else %}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}} 洗碗仙人呢？<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            {% endif %} 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>最终的显示结果如下：<br> <img src="https://images2.imgbox.com/dc/85/WDbgeiUg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="CSRF__358"></a>七、CSRF 校验</h3> 
<p>在我们进行用户登录时，在 Django 中自带了 csrf 校验，若在做登录功能时未提供 csrf 将会出现 403 错误，在此演示一下登录示例。</p> 
<p>此时先在 templates 目录下添加一个 login.html 模板：</p> 
<p><img src="https://images2.imgbox.com/ec/7d/LIr2GyE4_o.png" alt="在这里插入图片描述"></p> 
<p>添加完毕后，编写一个登陆页面：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>用户登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    {% csrf_token %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>用户名<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>密码<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span> {<!-- -->{error_msg}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>以上 html 代码的 action 已经制定为了 login 方法进行处理，之后我们再去进行添加。再接着看 <code>{% csrf_token %}</code>，此为 Django 中自带的 csrf token，我们需要进行添加，否则将会出现 403；最后再看 {<!-- -->{error_msg}} 这是一个错误提示，若没有这个传值也不会报错，默认为空值，剩下的其他代码则为正常的 html 表单代码，在此不再赘述。</p> 
<p>接着我们到 urls.py 中添加对应的 url：</p> 
<p><img src="https://images2.imgbox.com/d4/72/i9KSkVrd_o.png" alt="在这里插入图片描述"></p> 
<p>随后在 views.py 中添加对应的 login 方法做 login 处理。由于我们使用的 form 表单的 method 为 post，那么在此时就需要对其登录提交做限制，非 post 的请求都将会被限制，所以此时的 login 方法编写如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"login.html"</span><span class="token punctuation">)</span>
</code></pre> 
<p>此时便可知道 request 其实就是请求对象，其内包含了请求相关的内容。我们回到 if 判断，在此添加了 POST 判定后那么接下来则是正常提交后，我们需要对应的流程进行处理，在此简单的进行编写即可。</p> 
<p>当是正常的 POST 请求后，通过 request 对象内的 POST get 方法可以获取 post 请求中的数据，例如 form 表单传入过来的 user 以及 pw：</p> 
<pre><code class="prism language-python">username <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span>
password <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span>
</code></pre> 
<p>在此可以随便做一个判断，查看账号密码是否正确，若正确在此显示 SUCCESS ，错误则传递一个变量到前端模板，进行错误提示：</p> 
<pre><code class="prism language-python"><span class="token keyword">if</span> username <span class="token operator">==</span> <span class="token string">"root"</span> <span class="token keyword">and</span> password <span class="token operator">==</span> <span class="token string">"123"</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"SUCCESS"</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"login.html"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"error_msg"</span><span class="token punctuation">:</span> <span class="token string">"登录失败"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>此时完整的 login 处理方法如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"login.html"</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        username <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> username <span class="token operator">==</span> <span class="token string">"root"</span> <span class="token keyword">and</span> password <span class="token operator">==</span> <span class="token string">"123"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"SUCCESS"</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">"login.html"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"error_msg"</span><span class="token punctuation">:</span> <span class="token string">"登录失败"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_429"></a>八、数据库操作</h3> 
<h4><a id="81_Django__430"></a>8.1 Django 数据库连接配置</h4> 
<p>在对数据库进行操作前，我们需要在 setting 配置文件下的 DATABASES 对数据库连接进行配置：</p> 
<p><img src="https://images2.imgbox.com/92/ce/cfjQGE0S_o.png" alt="在这里插入图片描述"><br> 由于我们需要使用的是 mysql，在此处我们更改 DATABASES 配置项如下：</p> 
<pre><code class="prism language-python">DATABASES <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span><span class="token comment">#引擎</span>
        <span class="token string">'NAME'</span><span class="token punctuation">:</span> <span class="token string">'djangotest'</span><span class="token punctuation">,</span><span class="token comment">#数据库名</span>
        <span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span><span class="token comment">#账户</span>
        <span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span><span class="token comment">#密码</span>
        <span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token comment"># host 默认为localhost</span>
        <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token comment"># 端口默认 3306</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接着我们需要在 mysql 创建一个数据库，并且与配置项同名（自由创建在此不再赘述）：</p> 
<p><img src="https://images2.imgbox.com/36/3a/lpBzcdVI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="82__452"></a>8.2 表操作</h4> 
<h5><a id="821__modelspy__453"></a>8.2.1 通过 models.py 创建表</h5> 
<p>在 Django 中提供了 ORM 对数据库进行间接的操作，这一小点将会通过 models.py 演示如何通过代码创建数据库表。</p> 
<p>我们找到 modes.py 文件，随后在其中编写一个类继承至 models.Model：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
</code></pre> 
<p>随后我们可以通过 models 对象指定创建类型以及长度大小，例如：</p> 
<pre><code class="prism language-python">name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
</code></pre> 
<p>以上代码表示创建一个字符串字段，最大长度为32，其字段名为 name，那么同理，我们多创建几个字段，整个 UserInfo 类如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>接着我们先执行命令：</p> 
<pre><code class="prism language-python">python manage<span class="token punctuation">.</span>py makemigrations
</code></pre> 
<p><img src="https://images2.imgbox.com/bb/2d/fJus38tA_o.png" alt="在这里插入图片描述"><br> 接着执行：</p> 
<pre><code class="prism language-python">python manage<span class="token punctuation">.</span>py migrate
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/42/7RvFTKpz_o.png" alt="在这里插入图片描述"></p> 
<p>执行成功后将会看到数据库中已创建好数据表：</p> 
<p><img src="https://images2.imgbox.com/ec/79/FM1zfqZ1_o.png" alt="在这里插入图片描述"><br> 此时你会发现创建了不止 userinfo 表，还有其他表，这些表是 Django 中自带的内容，暂时不用理会，我们查看创建的表 userinfo 后会发现在这之前多了一个前缀“server_”，这是我们的 app 名，是默认创建表名的方式。</p> 
<p>展开表后我们可以发现，在这张表中默认添加了一个 id 为主键，并且是可自增主键，这也是默认创建的方式之一：</p> 
<p><img src="https://images2.imgbox.com/e0/ff/JkEmLqye_o.png" alt="在这里插入图片描述"></p> 
<p>若你还想创建多张表，只需要在 models.py 中创建多个类即可。</p> 
<p>若想删除某个键，只需要删除该行代码即可。</p> 
<p>创建表时还有很多字段属性指定的方式，例如：</p> 
<pre><code class="prism language-python"><span class="token comment"># decimal 精准的小数 max_digits 总数字长度宽度10 小数位2</span>
accout <span class="token operator">=</span> models<span class="token punctuation">.</span>DecimalField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"账户余额"</span><span class="token punctuation">,</span> max_digits<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> decimal_places<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment"># 时间类型</span>
create_time<span class="token operator">=</span>models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"入职时间"</span><span class="token punctuation">)</span>
title<span class="token operator">=</span>models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"这里是注释"</span><span class="token punctuation">,</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token comment"># 若删除一列后新增一列，需要设置一个默认值，可以在执行的时候设置又或者直接设置默认值</span>
height<span class="token operator">=</span>models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment"># 也可以设置可为空</span>
height<span class="token operator">=</span>models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># 有约束 to 是表示要关联哪一个表，to field 那个表的哪个列，此时创建的这个列数据需要存在于那个表的指定列 id 中有值在生成 depart时将会生成 depart_id 表示指向的某一个表的列名</span>
<span class="token comment"># on_delete 表示在删除对应关联的表内容时，自动删除所关联的对应内容 ，级联删除</span>
<span class="token comment"># 若想置空不删除对应所关联的内容，需要允许当前列内容为空：null=True , blank=True，on_delete=models.SET_NULL</span>
depart <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">"tablename"</span><span class="token punctuation">,</span> to_field<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
<span class="token comment"># django 的约束，设置某个字段的可选内容</span>
gender_choices<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
gender<span class="token operator">=</span>models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">"性别"</span><span class="token punctuation">,</span>choices<span class="token operator">=</span>gender_choices<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="822__523"></a>8.2.2 增删查改</h5> 
<h5><a id="_524"></a>增</h5> 
<p>首先我们在 urls.py 中添加对应的路由：</p> 
<p><img src="https://images2.imgbox.com/4d/90/CY0BFkPm_o.png" alt="在这里插入图片描述"><br> 其中每一个路由对应一个数据库操作，首先是增 insert：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 增</span>
    models<span class="token punctuation">.</span>UserInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">"123"</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"insert"</span><span class="token punctuation">)</span><span class="token comment">#注意，需要添加 HttpResponse 返回，否则会报错</span>
</code></pre> 
<p>以上代码中 models.UserInfo.objects.create 是一个数据库的 insert 操作，其中 models.UserInfo 表示直接使用 models 中的 UserInfo 的表对象 进行 create 操作，其中只需要在 create 中填入对应的字段名即可。</p> 
<p>需要注意，要在 views 中引入 model：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> server <span class="token keyword">import</span> models  <span class="token comment"># 引入 model</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e1/98/ZzMCX7k6_o.png" alt="在这里插入图片描述"></p> 
<p>直接访问这个 url 后：</p> 
<p><img src="https://images2.imgbox.com/3e/50/c1YAYnOm_o.png" alt="在这里插入图片描述"></p> 
<p>查看数据库：</p> 
<p><img src="https://images2.imgbox.com/54/06/lNR6U9d1_o.png" alt="在这里插入图片描述"><br> 成功 insert 值。</p> 
<h5><a id="_554"></a>删</h5> 
<p>删除操作也很简单，直接使用 model 指定对应的表通过指定 filter 后调用 delete 方法即可：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 删</span>
    models<span class="token punctuation">.</span>UserInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># models.UserInfo.objects.all().delete()  # 删除所有表内容</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"delete"</span><span class="token punctuation">)</span>
</code></pre> 
<p>此时访问 delete 后：</p> 
<p><img src="https://images2.imgbox.com/20/aa/XbvsT9oP_o.png" alt="在这里插入图片描述"><br> 查看数据库内容已被删除：</p> 
<p><img src="https://images2.imgbox.com/c0/cc/ULkNgbuT_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_570"></a>查</h5> 
<p>此时数据库有两条记录：</p> 
<p><img src="https://images2.imgbox.com/ba/73/ysCvjRTF_o.png" alt="在这里插入图片描述"></p> 
<p>随后通过指定 model 进行 filter 即可查询：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">select</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 查</span>
    data_list <span class="token operator">=</span> models<span class="token punctuation">.</span>UserInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">)</span>  <span class="token comment"># QuerySet 数据，for循环取即可</span>
    <span class="token comment"># data = models.UserInfo.objects.filter(id=1).first()  # 只取出一条数据，单独是一个 obj，不是 QuerySet</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> data_list<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">,</span> item<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"select"</span><span class="token punctuation">)</span>
</code></pre> 
<p>访问 url ：</p> 
<p><img src="https://images2.imgbox.com/d7/88/SjJEjV3a_o.png" alt="在这里插入图片描述"><br> 得到的结果如下查看 DOS 或 终端：</p> 
<p><img src="https://images2.imgbox.com/47/8e/Mdg0AY0z_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_594"></a>改</h5> 
<p>改数据的操作也很简单，指定 model 类后通过 filter 给与条件再使用 update 方法即可：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 改</span>
    models<span class="token punctuation">.</span>UserInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">)</span>  <span class="token comment"># filter data update</span>
    <span class="token comment"># models.UserInfo.objects.all().update(age=11) #all data update</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">"update"</span><span class="token punctuation">)</span>
</code></pre> 
<p>访问方法后：</p> 
<p><img src="https://images2.imgbox.com/bb/17/fLI1Hkul_o.png" alt="在这里插入图片描述"></p> 
<p>查看数据库内容：</p> 
<p><img src="https://images2.imgbox.com/5e/c2/jJihyd5o_o.png" alt="在这里插入图片描述"></p> 
<p><strong>到这里基础快速入门已全部讲解，接下来还会有 2 篇实战内容将会推出。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5119b3b0ba828a47d6a722dfbe7afed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">更改input [type=file]的样式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7955cc46b34a2c9016a30aa47c5633ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">函数栈帧（函数调用执行过程剖析）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>