<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS 搭建 GitLab &amp;&amp; Git - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS 搭建 GitLab &amp;&amp; Git" />
<meta property="og:description" content="本文目录 1. CentOS7 搭建 Gitlab1. 安装 sshd1. 安装 sshd 依赖2. 启动并设置开机自启3. 安装防火墙4. 开启防火墙5. 开放 ssh 以及 http 服务 2. 安装 postfix1. 安装 postfix2. 启动并设置开机自启3. 几个补充知识 3. 下载并安装 gitlab1. 在线下载安装包2. 安装 4. 修改 gitlab 配置5. 重载配置及启动 gitlab6. 把端口添加到防火墙7. 登录 GitLab 页面 2. CentOS7 安装 Git1. 安装 Git2. 验证是否安装成功3. 配置基本信息4. 验证配置是否成功 1. CentOS7 搭建 Gitlab 1. 安装 sshd 1. 安装 sshd 依赖 输入以下命令： yum install -y curl policycoreutils-python openssh-server 注：因为我之前已经装过了 sshd 依赖，所以就如上图所示。没装过的耐心等待就好。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/5557801af47c482b5485bbd6df362897/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-27T16:20:59+08:00" />
<meta property="article:modified_time" content="2023-07-27T16:20:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS 搭建 GitLab &amp;&amp; Git</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>本文目录</h4> 
 <ul><li><a href="#1_CentOS7__Gitlab_1" rel="nofollow">1. CentOS7 搭建 Gitlab</a></li><li><ul><li><a href="#1__sshd_2" rel="nofollow">1. 安装 sshd</a></li><li><ul><li><a href="#1__sshd__3" rel="nofollow">1. 安装 sshd 依赖</a></li><li><a href="#2__14" rel="nofollow">2. 启动并设置开机自启</a></li><li><a href="#3__20" rel="nofollow">3. 安装防火墙</a></li><li><a href="#4__57" rel="nofollow">4. 开启防火墙</a></li><li><a href="#5__ssh__http__65" rel="nofollow">5. 开放 ssh 以及 http 服务</a></li></ul> 
   </li><li><a href="#2__postfix_84" rel="nofollow">2. 安装 postfix</a></li><li><ul><li><a href="#1__postfix_88" rel="nofollow">1. 安装 postfix</a></li><li><a href="#2__98" rel="nofollow">2. 启动并设置开机自启</a></li><li><a href="#3__109" rel="nofollow">3. 几个补充知识</a></li></ul> 
   </li><li><a href="#3__gitlab_158" rel="nofollow">3. 下载并安装 gitlab</a></li><li><ul><li><a href="#1__160" rel="nofollow">1. 在线下载安装包</a></li><li><a href="#2__170" rel="nofollow">2. 安装</a></li></ul> 
   </li><li><a href="#4__gitlab__182" rel="nofollow">4. 修改 gitlab 配置</a></li><li><a href="#5__gitlab_204" rel="nofollow">5. 重载配置及启动 gitlab</a></li><li><a href="#6__220" rel="nofollow">6. 把端口添加到防火墙</a></li><li><a href="#7__GitLab__231" rel="nofollow">7. 登录 GitLab 页面</a></li></ul> 
  </li><li><a href="#2_CentOS7__Git_250" rel="nofollow">2. CentOS7 安装 Git</a></li><li><ul><li><a href="#1__Git_263" rel="nofollow">1. 安装 Git</a></li><li><a href="#2__279" rel="nofollow">2. 验证是否安装成功</a></li><li><a href="#3__291" rel="nofollow">3. 配置基本信息</a></li><li><a href="#4__304" rel="nofollow">4. 验证配置是否成功</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_CentOS7__Gitlab_1"></a>1. CentOS7 搭建 Gitlab</h2> 
<h3><a id="1__sshd_2"></a>1. 安装 sshd</h3> 
<h4><a id="1__sshd__3"></a>1. 安装 sshd 依赖</h4> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span> policycoreutils-python openssh-server
</code></pre> 
<p><img src="https://images2.imgbox.com/12/de/llw2pY5K_o.png" alt="在这里插入图片描述"></p> 
<p>注：因为我之前已经装过了 sshd 依赖，所以就如上图所示。没装过的耐心等待就好。</p> 
<h4><a id="2__14"></a>2. 启动并设置开机自启</h4> 
<ul><li>依次输入以下命令：</li></ul> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> sshd
systemctl start sshd
</code></pre> 
<h4><a id="3__20"></a>3. 安装防火墙</h4> 
<ul><li>如果已经安装了防火墙并且已经在运行状态，则可直接进行第 5 步。</li></ul> 
<blockquote> 
 <p>那如何判断 CentOS7 是否安装了防火墙呢？这里提供两种方法：</p> 
 <p>方法 1：执行以下命令来查看防火墙服务的运行状态：</p> 
 <pre><code class="prism language-shell">systemctl status firewalld
</code></pre> 
 <p>如果返回结果显示防火墙服务正在运行，则表示已安装了防火墙。如果显示防火墙服务处于停止状态或未安装，则表示未安装防火墙。</p> 
 <p>方法 2：运行以下命令来查看是否安装了防火墙软件包：</p> 
 <pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> firewalld
</code></pre> 
 <p>如果返回结果中包含 “firewalld” 字段，则表示已安装防火墙。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/04/d1/ukFksxh7_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果虚拟机中没有安装防火墙，可以输入以下命令进行安装：</li></ul> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> firewalld systemd <span class="token parameter variable">-y</span>
</code></pre> 
<h4><a id="4__57"></a>4. 开启防火墙</h4> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">service</span> firewalld  start
</code></pre> 
<h4><a id="5__ssh__http__65"></a>5. 开放 ssh 以及 http 服务</h4> 
<ul><li>依次输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token comment"># pemmanent 表示永久生效，若不加 --permanent，系统下次启动后就会失效。</span>
firewall-cmd --add-service<span class="token operator">=</span>ssh <span class="token parameter variable">--permanent</span>
firewall-cmd --add-service<span class="token operator">=</span>http <span class="token parameter variable">--permanent</span>

<span class="token comment"># 重新加载防火墙列表</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<p>注：如果关闭防火墙就不需要做以上配置。</p> 
<p><img src="https://images2.imgbox.com/68/d0/mnbY9yAd_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__postfix_84"></a>2. 安装 postfix</h3> 
<blockquote> 
 <p>GitLab 需要使用 postfix 来发送邮件。当然，也可以使用 SMTP 服务器。</p> 
</blockquote> 
<h4><a id="1__postfix_88"></a>1. 安装 postfix</h4> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> postfix
</code></pre> 
<h4><a id="2__98"></a>2. 启动并设置开机自启</h4> 
<ul><li>依次输入以下命令：</li></ul> 
<pre><code class="prism language-shell">systemctl <span class="token builtin class-name">enable</span> postfix 
systemctl start postfix
</code></pre> 
<h4><a id="3__109"></a>3. 几个补充知识</h4> 
<blockquote> 
 <p>检查系统中是否已经安装 wget，可以输入以下命令查看：</p> 
 <pre><code class="prism language-shell"><span class="token function">wget</span> <span class="token parameter variable">-V</span>
</code></pre> 
 <p>注：若报系统找不到命令，说明 wget 未安装。可以输入以下命令进行安装：</p> 
 <pre><code class="prism language-shell">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">wget</span>
</code></pre> 
</blockquote> 
<p><img src="https://images2.imgbox.com/bb/27/SDdhvamH_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>要判断在 CentOS 上是否安装了 Vim 编辑器，可以使用以下方法之一：</p> 
 <p>方法 1：使用 rpm 命令。输入以下命令：</p> 
 <pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> vim-enhanced
</code></pre> 
 <p>如果返回结果中包含 “vim-enhanced” 字段，则表示 Vim 已安装。如果没有返回任何结果，则表示 Vim 未安装。</p> 
 <p>方法 2：使用 yum 命令。输入以下命令：</p> 
 <pre><code class="prism language-shell">yum list installed <span class="token operator">|</span> <span class="token function">grep</span> vim-enhanced
</code></pre> 
 <p>如果返回结果中包含 “vim-enhanced” 字段，则表示 Vim 已安装。如果没有返回任何结果，则表示 Vim 未安装。</p> 
 <p>若发现 Vim 未安装，可以输入以下命令进行安装：</p> 
 <pre><code class="prism language-shell">yum <span class="token function">install</span> <span class="token function">vim</span> <span class="token parameter variable">-y</span>
</code></pre> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ef/93/Q1iVnZXP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__gitlab_158"></a>3. 下载并安装 gitlab</h3> 
<h4><a id="1__160"></a>1. 在线下载安装包</h4> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm
</code></pre> 
<p><img src="https://images2.imgbox.com/5d/14/dOsdATGk_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2__170"></a>2. 安装</h4> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">rpm</span> <span class="token parameter variable">-i</span> gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm
</code></pre> 
<p>注：安装过程需要些时间，如果出现下图，则说明安装成功。</p> 
<p><img src="https://images2.imgbox.com/6d/30/wK2VSUf8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__gitlab__182"></a>4. 修改 gitlab 配置</h3> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">vim</span>  /etc/gitlab/gitlab.rb
</code></pre> 
<p>注：进入编辑器后，按下键键盘的“i”键进入编辑状态，按“Esc”键退出编辑状态。按下“Esc“后输入 <code>:wq</code> 保存并退出。</p> 
<ul><li>修改 gitlab 访问地址和端口，默认为 80，我这里改为 82：</li></ul> 
<pre><code class="prism language-shell">external_url <span class="token string">'http://192.168.138.129:82'</span> 
nginx<span class="token punctuation">[</span><span class="token string">'listen_port'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">82</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/76/51/BS9sfyAx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5__gitlab_204"></a>5. 重载配置及启动 gitlab</h3> 
<ul><li>依次输入以下命令：</li></ul> 
<pre><code class="prism language-shell"> gitlab-ctl reconfigure
 gitlab-ctl restart
</code></pre> 
<p>注：输入第一条命令后耐心等待一段时间。</p> 
<p>提示 <code>ok: run:</code> 表示启动成功：</p> 
<p><img src="https://images2.imgbox.com/87/83/fsdkLAAC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6__220"></a>6. 把端口添加到防火墙</h3> 
<ul><li>依次输入以下命令：</li></ul> 
<pre><code class="prism language-shell">firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">82</span>/tcp <span class="token parameter variable">--permanent</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/57/1f/DsrMyDlm_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7__GitLab__231"></a>7. 登录 GitLab 页面</h3> 
<ul><li>登录 GitLab 网页，地址为第 4 步配置的 <code>http://192.168.138.129:82</code>。</li><li>启动成功后，看到以下修改管理员 root 密码的页面，修改密码后，然后登录即可：</li></ul> 
<p><img src="https://images2.imgbox.com/8f/6d/wNeeCaxA_o.png" alt="在这里插入图片描述"></p> 
<ul><li>修改密码后，跳转到下面的登录界面，填入用户名和密码登录即可（用户名为 <code>root</code>，密码为上一步修改的密码）：</li></ul> 
<p><img src="https://images2.imgbox.com/9e/d4/hgt7ryyB_o.png" alt="在这里插入图片描述"></p> 
<ul><li>登录成功后的界面如下：</li></ul> 
<p><img src="https://images2.imgbox.com/59/0c/Wu6JktqR_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_CentOS7__Git_250"></a>2. CentOS7 安装 Git</h2> 
<blockquote> 
 <p>git 提供了一个叫做 <code>git config</code> 的工具，专门用来配置或读取相应的工作环境变量。这些环境变量，决定了 git 在各个环节的具体工作方式和行为。这些变量可以存放在以下三个不同的地方：</p> 
 <ul><li><code>/etc/gitconfig</code> 文件：系统中对所有用户都普遍适用的配置。若使用 <code>git config</code> 时用 <code>--system</code> 选项，读写的就是这个文件。</li><li><code>~/.gitconfig</code> 文件：用户目录下的配置文件只适用于该用户。若使用 <code>git config</code> 时用 <code>--global</code> 选项，读写的就是这个文件。</li><li>当前项目的 git 目录中的配置文件（也就是工作目录中的 <code>.git/config</code> 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 <code>.git/config</code> 里的配置会覆盖 <code>/etc/gitconfig</code> 中的同名变量。</li></ul> 
 <p>初次使用 git 需要设置用户名以及邮箱，这将作为当前机器 git 的标识，如果用它来下载远程仓库一些需要登录权限的仓库会要求登录，git 默认使用配置邮箱以及用户名登入，但会要求手动输入密码。</p> 
</blockquote> 
<h3><a id="1__Git_263"></a>1. 安装 Git</h3> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/05/f9/i92LEMyO_o.png" alt="在这里插入图片描述"></p> 
<p>注：因为我的虚拟机已经安装了 Git，所以就有上图所示的情况。</p> 
<h3><a id="2__279"></a>2. 验证是否安装成功</h3> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">git</span> <span class="token parameter variable">--version</span>
</code></pre> 
<p>注：这将显示已安装的 Git 版本信息。</p> 
<p><img src="https://images2.imgbox.com/78/0f/MfTNlUXr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__291"></a>3. 配置基本信息</h3> 
<ul><li>配置 Git 的用户名和邮箱，输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token comment"># 将 “Your Name” 替换为你自己的名字</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"Your Name"</span>

<span class="token comment"># 将 “youremail@example.com” 替换为你的邮箱地址</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"youremail@example.com"</span>
</code></pre> 
<h3><a id="4__304"></a>4. 验证配置是否成功</h3> 
<ul><li>输入以下命令：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">git</span> config <span class="token parameter variable">--list</span>
</code></pre> 
<p>注：这将显示设置的用户名和邮箱。</p> 
<ul><li>配置文件被存储在 <code>~/.gitconfig</code> 文件，可以输入以下命令进行查看：</li></ul> 
<pre><code class="prism language-shell"><span class="token function">ls</span> <span class="token parameter variable">-a</span> <span class="token operator">|</span> <span class="token function">grep</span> gitconfig
<span class="token function">vim</span> .gitconfig
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/52ba1250e7eb9697ae9708ed51521ba0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">两个瓶子倒水问题python版本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/38ba63f35b47ca91d01511a93785e887/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">准备面试 记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>