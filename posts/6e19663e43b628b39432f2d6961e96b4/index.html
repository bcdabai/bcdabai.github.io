<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MongoDB 从入门到入神】全网最全通透篇之 MongoDB 概述及详细使用 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MongoDB 从入门到入神】全网最全通透篇之 MongoDB 概述及详细使用" />
<meta property="og:description" content="通过本篇文章，您将了解到MongoDB的以下内容：
MongoDB概述MongoDB业务场景MySQL与MongoDB对比MongoDB的基本使用及文档的增删改查 文章目录 一 前言二 MongoDB是什么三 MongoDB存储的数据结构四 什么情况下使用MongoDB？五 常见的MongoDB应用场景六 MongoDB与Mysql的对比七 MongoDB使用7.1 MongoDB的安装 （Mac 平台）7.2 进入MongoDB7.3 数据库操作7.4 集合操作7.4.1 显式创建7.4.2 隐式创建7.4.3 删除集合 7.5 文档的增删改查（CRUD）7.5.1 单个文档插入7.5.2 多个文档插入7.5.3 文档查询7.5.4 投影查询7.5.5 文档的更新7.5.6 删除文档 一 前言 由于传统的关系型数据库（例如，Mysql），在数据操作的“三高”需求以及应对web2.0的网站需求时，显得力不从心，其中三高需求指的是
high performance：对数据库高并发读写的需求，例如双十一淘宝，同时在淘宝下单，mysql很难应付。Huge Storage，对海量数据的搞笑存储和访问的需求High Scalability &amp;&amp; High Availability：对数据库的高可扩展性和高可用性的需求。（在刚开始的时候不需要固定格式） 二 MongoDB是什么 MongoDB是一个开源、高性能、无模式的文档型数据库。是 NoSQL数据库产品中的一种，是最像关系数据库（Mysql）的非关系型数据库。MongoDB最初的设计是用来简化开发和方便扩展的。
注意以下内容：
无模式指的是没有具体的列“最像关系数据库（Mysql）的非关系型数据库”表示：MongoDB 命令的使用和 Mysql 类似。 三 MongoDB存储的数据结构 MongoDB 支持的数据结构非常松散，MongoDB 将数据存储为对应的 BSON 格式文件，这个文件是二进制的，可以通过 MongoDB 提供的命令行工具进行读取和写入。BSON是Binary JSON的缩写，是JSON的一种扩展，能够更快地将数据存储和读取到MongoDB数据库中。
MongoDB中的记录是一个文档，它是由一个字段和值对组成的数据结构，MongoDB文档类似于JSON对象，即一个文档认为就是一个对象。字段的数据类型是字符型，它的值除了使用基本的一些类型外，还可以包括其他文档，普通数据和文档数组。
四 什么情况下使用MongoDB？ 数据量大写入操作频繁（读写都很频繁）价值较低的数据，对事务性要求不高
对于以上情况，更适合使用 MongoDB 来实现数据的存储。 在架构选型上，除了上述的三个特点外呢，如果你还犹豫是否要选择它，则可以考虑以下问题：
应用不需要事务以及复杂的 join 支持对于新应用，需求会变，数据模型无法确定想快速迭代开发的读写速度更高需求，需要很大存储空间等 五 常见的MongoDB应用场景 社交场景、游戏场景：使用MongoDB存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、地点等功能；存储游戏用户、信息、积分装备等方便查询、高效存储和访问。物流场景：使用MongoDB存储订单信息，订单状态在运送过程中会不断更新，以MongoDB内嵌数组的形式来存储，一次查询就可以将订单所有的变更读取出来。物流网场景：使用MongoDB存储所有接入的智能设备信息，以及设备汇报的日志信息，并对这些信息进行多维度的分析视频直播：使用MongoDB存储用户信息，点赞互动信息等。 六 MongoDB与Mysql的对比 MySQL 关系型数据库包含：数据库、表、行MongoDB 数据库包含：数据库、Collection、Document" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6e19663e43b628b39432f2d6961e96b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-12T01:15:00+08:00" />
<meta property="article:modified_time" content="2024-01-12T01:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MongoDB 从入门到入神】全网最全通透篇之 MongoDB 概述及详细使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>通过本篇文章，您将了解到MongoDB的以下内容：</p> 
<ul><li>MongoDB概述</li><li>MongoDB业务场景</li><li>MySQL与MongoDB对比</li><li>MongoDB的基本使用及文档的增删改查</li></ul> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#__9" rel="nofollow">一 前言</a></li><li><a href="#_MongoDB_14" rel="nofollow">二 MongoDB是什么</a></li><li><a href="#_MongoDB_21" rel="nofollow">三 MongoDB存储的数据结构</a></li><li><a href="#_MongoDB_25" rel="nofollow">四 什么情况下使用MongoDB？</a></li><li><a href="#_MongoDB_37" rel="nofollow">五 常见的MongoDB应用场景</a></li><li><a href="#__MongoDBMysql_46" rel="nofollow">六 MongoDB与Mysql的对比</a></li><li><a href="#_MongoDB_54" rel="nofollow">七 MongoDB使用</a></li><li><ul><li><a href="#71_MongoDB_Mac__55" rel="nofollow">7.1 MongoDB的安装 （Mac 平台）</a></li><li><a href="#72_MongoDB_69" rel="nofollow">7.2 进入MongoDB</a></li><li><a href="#73__78" rel="nofollow">7.3 数据库操作</a></li><li><a href="#74__125" rel="nofollow">7.4 集合操作</a></li><li><ul><li><a href="#741__127" rel="nofollow">7.4.1 显式创建</a></li><li><a href="#742__135" rel="nofollow">7.4.2 隐式创建</a></li><li><a href="#743__137" rel="nofollow">7.4.3 删除集合</a></li></ul> 
   </li><li><a href="#75_CRUD_146" rel="nofollow">7.5 文档的增删改查（CRUD）</a></li><li><ul><li><a href="#751__148" rel="nofollow">7.5.1 单个文档插入</a></li><li><a href="#752___159" rel="nofollow">7.5.2 多个文档插入</a></li><li><a href="#753__185" rel="nofollow">7.5.3 文档查询</a></li><li><a href="#754__202" rel="nofollow">7.5.4 投影查询</a></li><li><a href="#755__214" rel="nofollow">7.5.5 文档的更新</a></li><li><a href="#756___243" rel="nofollow">7.5.6 删除文档</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="__9"></a>一 前言</h2> 
<p>由于传统的关系型数据库（例如，Mysql），在数据操作的“三高”需求以及应对web2.0的网站需求时，显得力不从心，其中三高需求指的是</p> 
<ul><li><code>high performance</code>：对数据库高并发读写的需求，例如双十一淘宝，同时在淘宝下单，mysql很难应付。</li><li><code>Huge Storage</code>，对海量数据的搞笑存储和访问的需求</li><li><code>High Scalability</code> &amp;&amp; <code>High Availability</code>：对数据库的高可扩展性和高可用性的需求。（在刚开始的时候不需要固定格式）</li></ul> 
<h2><a id="_MongoDB_14"></a>二 MongoDB是什么</h2> 
<blockquote> 
 <p>MongoDB是一个开源、高性能、无模式的文档型数据库。是 NoSQL数据库产品中的一种，是最像关系数据库（Mysql）的非关系型数据库。MongoDB最初的设计是用来简化开发和方便扩展的。<br> 注意以下内容：</p> 
 <ul><li>无模式指的是没有具体的列</li><li>“最像关系数据库（Mysql）的非关系型数据库”表示：MongoDB 命令的使用和 Mysql 类似。</li></ul> 
</blockquote> 
<h2><a id="_MongoDB_21"></a>三 MongoDB存储的数据结构</h2> 
<blockquote> 
 <p>MongoDB 支持的数据结构非常松散，MongoDB 将数据存储为对应的 BSON 格式文件，这个文件是二进制的，可以通过 MongoDB 提供的命令行工具进行读取和写入。BSON是Binary JSON的缩写，是JSON的一种扩展，能够更快地将数据存储和读取到MongoDB数据库中。<br> MongoDB中的记录是一个文档，它是由一个字段和值对组成的数据结构，MongoDB文档类似于JSON对象，即一个文档认为就是一个对象。字段的数据类型是字符型，它的值除了使用基本的一些类型外，还可以包括其他文档，普通数据和文档数组。</p> 
</blockquote> 
<h2><a id="_MongoDB_25"></a>四 什么情况下使用MongoDB？</h2> 
<ul><li>数据量大</li><li>写入操作频繁（读写都很频繁）</li><li>价值较低的数据，对事务性要求不高<br> 对于以上情况，更适合使用 MongoDB 来实现数据的存储。</li></ul> 
<p>在架构选型上，除了上述的三个特点外呢，如果你还犹豫是否要选择它，则可以考虑以下问题：</p> 
<ul><li>应用不需要事务以及复杂的 join 支持</li><li>对于新应用，需求会变，数据模型无法确定想快速迭代开发的</li><li>读写速度更高需求，需要很大存储空间等</li></ul> 
<h2><a id="_MongoDB_37"></a>五 常见的MongoDB应用场景</h2> 
<blockquote> 
 <ol><li>社交场景、游戏场景：使用MongoDB存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、地点等功能；存储游戏用户、信息、积分装备等方便查询、高效存储和访问。</li><li>物流场景：使用MongoDB存储订单信息，订单状态在运送过程中会不断更新，以MongoDB内嵌数组的形式来存储，一次查询就可以将订单所有的变更读取出来。</li><li>物流网场景：使用MongoDB存储所有接入的智能设备信息，以及设备汇报的日志信息，并对这些信息进行多维度的分析</li><li>视频直播：使用MongoDB存储用户信息，点赞互动信息等。</li></ol> 
</blockquote> 
<h2><a id="__MongoDBMysql_46"></a>六 MongoDB与Mysql的对比</h2> 
<ul><li>MySQL 关系型数据库包含：数据库、表、行</li><li>MongoDB 数据库包含：数据库、Collection、Document<br> <img src="https://images2.imgbox.com/3b/3a/0tZ8ijDE_o.png" alt="在这里插入图片描述"></li></ul> 
<hr> 以上信息应该是把MongoDB讲明白了，接下来正式开始进入 
<font color="red">MongoDB的使用</font>。 
<hr> 
<h2><a id="_MongoDB_54"></a>七 MongoDB使用</h2> 
<h3><a id="71_MongoDB_Mac__55"></a>7.1 MongoDB的安装 （Mac 平台）</h3> 
<p>在Mac平台安装MongoDB具体如下<br> 第一步：<code>brew tap mongodb/brew</code><br> 第二步：<code>brew install mongodb-community</code><br> 第三步：验证安装是否成功：mongod --version<br> 第四步：启动：<code>brew services start mongodb/brew/mongodb-community</code></p> 
<p><img src="https://images2.imgbox.com/74/ed/sAgC5Zj4_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意：相关文件位置：<br> 1. 数据库配置文件：/usr/local/etc/mongod.conf<br> 2. 数据库文件默认存放位置：/usr/local/var/mongodb<br> 3. 日志存放位置：/usr/local/var/log/mongodb/mongo.log</p> 
</blockquote> 
<h3><a id="72_MongoDB_69"></a>7.2 进入MongoDB</h3> 
<p>在终端输入</p> 
<pre><code class="prism language-bash">mongosh
</code></pre> 
<p>其中，在 MongoDB 中，如果你没有选择数据库则默认会使用test数据库。</p> 
<p><img src="https://images2.imgbox.com/4e/90/Jz0e2gQi_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="73__78"></a>7.3 数据库操作</h3> 
<ol><li> <p>查看所有数据库</p> <pre><code class="prism language-bash">show dbs
<span class="token comment">#或者</span>
show databases
</code></pre> <p><img src="https://images2.imgbox.com/33/3d/qThmPQ7w_o.png" alt="在这里插入图片描述"><br> 当我们刚开始<code>show dbs</code>的时候会默认展示三个数据库：</p> 
  <blockquote> 
   <ul><li>admin：这算是root 数据库，要是将一个用户添加到这个数据库，则这个用户将自动继承所有数据库的权限。</li><li>config：当MongoDB用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</li><li>local：存在这里的数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合。</li></ul> 
  </blockquote> <p>另外需要说明的是，数据库的命名规则：</p> 
  <blockquote> 
   <ul><li>不能是空字符串，不能含有非法字符</li><li>数据库名应全部小写</li><li>最多64字节</li></ul> 
  </blockquote> </li><li> <p>切换数据库（创建数据库）</p> <pre><code class="prism language-bash">use 数据库名
<span class="token comment">#例如：use demodb</span>
</code></pre> <p>需要主要的是如果数据库不存在则会自动创建。但是当<code>show dbs</code>的时候看不到当前所创建的<code>demodb</code>数据库，这是为什么呢？这就涉及到<strong>MongoDB 的存储机制</strong>：存储分为上下两部分，上面是内存，下面是硬盘。当使用use 创建数据库的时候，数据库存放的位置是内存，并没有持久化到磁盘，所以当<code>show dbs</code>的时候 看不到新创建的数据库。<br> 当demodb中有一个集合的时候或者不是一个空的数据库的时候，就会被持久化到磁盘。<br> 另外查看当前所使用的数据库可以使用<code>db</code>命令。<br> <img src="https://images2.imgbox.com/e0/ac/yu4zg5WV_o.png" alt="在这里插入图片描述"></p> </li><li> <p>删除数据库</p> <pre><code class="prism language-bash">demodb<span class="token operator">&gt;</span> db.<span class="token function-name function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> ok: <span class="token number">1</span>, dropped: <span class="token string">'demodb'</span> <span class="token punctuation">}</span>
<span class="token comment"># db表示当前数据库对象</span>
</code></pre> <p><img src="https://images2.imgbox.com/3e/35/VVCovshl_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h3><a id="74__125"></a>7.4 集合操作</h3> 
<p>MongoDB中的集合相当于关系型数据库中的表，总共有两种操作，一种是<code>显式操作</code>；一种是<code>隐式操作</code></p> 
<h4><a id="741__127"></a>7.4.1 显式创建</h4> 
<pre><code class="prism language-bash">db.createCollection<span class="token punctuation">(</span><span class="token string">"MyCollection"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/20/77/ebmzFazs_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="742__135"></a>7.4.2 隐式创建</h4> 
<p>在文档创建时，如果集合不存在，则默认创建，例如<code>db.comment.insertOne({...})</code>，comment 是集合名，如果集合不存在，则自动创建，这就是隐式创建。</p> 
<h4><a id="743__137"></a>7.4.3 删除集合</h4> 
<pre><code class="prism language-bash">db.集合名.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 例如 db.MyCollection.drop()</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/8d/a2/zPXaGSfv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="75_CRUD_146"></a>7.5 文档的增删改查（CRUD）</h3> 
<p>文档的数据结构和 JSON 基本一致，所有存储在集合中的数据都是<code>BSON</code>格式。如果集合不存在，则会隐式创建。</p> 
<h4><a id="751__148"></a>7.5.1 单个文档插入</h4> 
<p>使用<code>insertOne()</code>或者save() 方法向集中插入文档</p> 
<pre><code class="prism language-bash">db.集合名.insertOne<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
例如：db.comment.insertOne<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"zeng"</span>,<span class="token string">"age"</span>:18,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"12233"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海浦东"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/18/pXLuBbPx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="752___159"></a>7.5.2 多个文档插入</h4> 
<pre><code class="prism language-bash">db.comments.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"01"</span>,<span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"zeng"</span>,<span class="token string">"age"</span>:18,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"12233"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海浦东"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"02"</span>,<span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"wang"</span>,<span class="token string">"age"</span>:18,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"1200"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海闵行"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"03"</span>,<span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"heng"</span>,<span class="token string">"age"</span>:19,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"2003"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海普陀"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/42/2d/cquUiTmU_o.png" alt="在这里插入图片描述"></p> 
<p>在文档插入时，需要注意以下几个问题：</p> 
<ul><li>MongoDB 中的数字，默认情况下是double类型，如果要存整型，则必须使用函数NumberInt(整型数字)， 
  <ul><li>例如<code>db.comments.insert({"name":"jing","age":NumberInt(18),"tel":"12233","address":"上海浦东"})</code></li></ul> </li><li>如果想要插入时间，则使用new Date() 
  <ul><li>例如：<code>db.comments.insert({"name":"Tom","time":new Date()})</code></li></ul> </li><li>如果某字段没有值，可以赋值为null， 
  <ul><li>例如 <code>db.comments.insert({"name":"Jenny","address":null})</code></li></ul> </li><li>如果插入的数据没有指定_id，会自动生成主键值。当插入的数据指定了_id,则表明该值为主键。</li></ul> 
<p>另外需要注意的是，当批量插入时，容易出现错误的情况，可以使用<code>try catch</code> 进行一场捕获，</p> 
<pre><code class="prism language-bash">try <span class="token punctuation">{<!-- --></span> db.comments.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"09"</span>,<span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"zeng"</span>,<span class="token string">"age"</span>:18,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"12233"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海浦东"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"10"</span>,<span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"wang"</span>,<span class="token string">"age"</span>:18,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"1200"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海闵行"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"11"</span>,<span class="token string">"name"</span>:heng,<span class="token string">"age"</span>:19,<span class="token string">"tel"</span><span class="token builtin class-name">:</span><span class="token string">"2003"</span>,<span class="token string">"address"</span><span class="token builtin class-name">:</span><span class="token string">"上海普陀"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>catch<span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> print<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/79/77/36OpxZHo_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="753__185"></a>7.5.3 文档查询</h4> 
<pre><code class="prism language-bash">db.集合名.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#例如：</span>
db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3e/3f/MYAWJ3d1_o.png" alt="在这里插入图片描述"><br> 查询一条数据</p> 
<pre><code class="prism language-bash">db.集合名.findOne<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#例如</span>
db.comments.findOne<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 默认打印第一条数据</span>
db.comments.findOne<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">'03'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># 指定数据输出</span>
</code></pre> 
<h4><a id="754__202"></a>7.5.4 投影查询</h4> 
<p>投影查询，相当于只查询部分数据。</p> 
<pre><code class="prism language-bash">db.comments.find<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"age"</span>:18<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>表示查询age:18的所有数据，默认会显示_id，如果不想显示_id的话可以使用下面的方式。</p> 
<pre><code class="prism language-bash">db.comments.find<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"age"</span>:18<span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span>_id:0<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1e/8c/bY3RenAE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="755__214"></a>7.5.5 文档的更新</h4> 
<ol><li>更新字段</li></ol> 
<pre><code class="prism language-bash">db.comments.update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>_id:<span class="token string">"09"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$set</span>:<span class="token punctuation">{<!-- --></span><span class="token string">"age"</span><span class="token builtin class-name">:</span><span class="token string">"20"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果你直接使用 <code>db.comments.updateOne({_id:"09"},{"age":"20"})</code>，则会报<code>MongoInvalidArgumentError: Update document requires atomic operators</code> 错误，表示在更新文档时没有使用原子操作符。</p> 
<p>如果需要更新多条数据，则加入<code>multi:true</code>字段。如果不加这个字段，则默认只更新第一条数据。</p> 
<pre><code class="prism language-bash">db.comments.update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token builtin class-name">:</span><span class="token string">"zeng"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$set</span>:<span class="token punctuation">{<!-- --></span><span class="token string">"age"</span><span class="token builtin class-name">:</span><span class="token string">"30"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span>multi:true<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0b/01/BydmS7fS_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>删除字段</li></ol> 
<pre><code class="prism language-bash">db.comments.update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>_id:<span class="token string">"09"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$unset</span>:<span class="token punctuation">{<!-- --></span><span class="token string">"age"</span><span class="token builtin class-name">:</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/ca/ksriMCRt_o.png" alt="在这里插入图片描述"><br> 3. 列值增长的修改<br> 实现对某列值在原有的值的基础上进行增加或者减少，可以使用<code>$inc</code>运算符实现，前提是：数字类型，如果不是的话则会报 <code>MongoServerError: Cannot increment with non-numeric argument: {age: "20"} demodb&gt; db.comments.update({"name":"zeng"},{$inc:{"age":NumberInt(1)}})</code>错误，需要先转为数字类型，<code>{$set:{"age":NumberInt(20)}})</code>，这样就不会有问题啦。</p> 
<pre><code class="prism language-bash">db.comments.update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token builtin class-name">:</span><span class="token string">"09"</span><span class="token punctuation">}</span>,<span class="token punctuation">{<!-- --></span><span class="token variable">$inc</span>:<span class="token punctuation">{<!-- --></span><span class="token string">"age"</span>:NumberInt<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="756___243"></a>7.5.6 删除文档</h4> 
<p>在最新MongoDB版本中已经废弃了 db.comments.remove()，所以我们一般使用 <code>db.comments.deleteOne(),db.comments.deleteMany()</code>。</p> 
<p><img src="https://images2.imgbox.com/75/5c/YzwXEop4_o.png" alt="在这里插入图片描述"></p> 
<p><strong>❤️好了好了今天的内容已经够消化的了。小伙伴们别忘记一键三连哦❤️。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/97c0d62dcbae0ae0e5670ad94cbc0184/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">shell mapfile命令（readarray命令）介绍（读取行到数组变量）（进程替换&#43;重定向＜ ＜()、()＞ ＞）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/793a9660a5d811b1b333ca2317d95d91/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Discourse 访问统计数据的不一致</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>