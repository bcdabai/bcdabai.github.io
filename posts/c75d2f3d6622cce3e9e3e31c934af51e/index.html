<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【CTF】【winhex】超详细jpg图片结构分析 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【CTF】【winhex】超详细jpg图片结构分析" />
<meta property="og:description" content="文章目录 前言段结构字节高位在前段标识段类型文件头文件尾帧开始（标准JPEG)标志08y轴分辨率x轴分辨率组件数量03 定义Huffman表（霍夫曼表） 段长度段数据 参考资料 前言 本文排版有些乱，例子镶嵌在每个知识点里，但整体实例都是按照顺序讲解的，而对于讲过的知识点不再赘述。
本文也将持续更新。
段结构 JPG文件由一个个段构成
JPG图片所有数据都是高位在前
字节 这个红色框框里的两个数表示一个字节
高位在前 什么是高位在前？
例如现实生活中1234，高位在前则表示12 34
而winhex的都是低位在前，在后面会讲到段长度，如00 10，低位在前则表示10 00
段结构包括： 段标识|段类型|段长度|端数据
段标识 1字节，固定为FFH，H表示16进制
段类型 1字节
文件头 名称 SOI 标记码 D8
如图，D8表示本jpg文件的文件头，前面的FF表示段标识
文件尾 名称 EOI 标记码 D9
拉到最后，FF D9表示文件尾
帧开始（标准JPEG) 名称 SOF0 标记码 C0名称 SOF1 标记码 C1
C0与C1在一个文件里只会存在一种，下面以C0为例，C1同样操作 我们查找 FF C0
后面两个字节00 11表示段长度，将十六进制转为十进制，可以知道后面有15个字节的数据（段长度占了2字节，并且不包括段标识和段类型）
那么我们可以看到后面的数据
标志08 1个字节
这个标志固定是08
y轴分辨率 2字节
计算一下，
与实际的分辨率（高度）一样
x轴分辨率 2字节
这两字节表示x轴分辨率，计算一下
与实际上文件的属性是一样的
组件数量03 这1个字节固定为03
从03之后的9个字节，都为组件数据，且每个组件数据为3个字节。
组件大小和数量都为固定的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c75d2f3d6622cce3e9e3e31c934af51e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-18T19:48:51+08:00" />
<meta property="article:modified_time" content="2022-10-18T19:48:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【CTF】【winhex】超详细jpg图片结构分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#_7" rel="nofollow">段结构</a></li><li><a href="#_14" rel="nofollow">字节</a></li><li><ul><li><a href="#_18" rel="nofollow">高位在前</a></li><li><a href="#_27" rel="nofollow">段标识</a></li><li><a href="#_32" rel="nofollow">段类型</a></li><li><ul><li><a href="#_35" rel="nofollow">文件头</a></li><li><a href="#_41" rel="nofollow">文件尾</a></li><li><a href="#JPEG_46" rel="nofollow">帧开始（标准JPEG)</a></li><li><ul><li><a href="#08_60" rel="nofollow">标志08</a></li><li><a href="#y_67" rel="nofollow">y轴分辨率</a></li><li><a href="#x_81" rel="nofollow">x轴分辨率</a></li><li><a href="#03_89" rel="nofollow">组件数量03</a></li></ul> 
    </li><li><a href="#Huffman_100" rel="nofollow">定义Huffman表（霍夫曼表）</a></li></ul> 
   </li><li><a href="#_105" rel="nofollow">段长度</a></li><li><a href="#_111" rel="nofollow">段数据</a></li></ul> 
  </li><li><a href="#_115" rel="nofollow">参考资料</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>本文排版有些乱，例子镶嵌在每个知识点里，但整体实例都是按照顺序讲解的，而对于讲过的知识点不再赘述。</p> 
<p>本文也将持续更新。</p> 
<h2><a id="_7"></a>段结构</h2> 
<p>JPG文件由一个个段构成<br> JPG图片所有数据都是高位在前</p> 
<p><img src="https://images2.imgbox.com/1a/fe/EuJguE2C_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_14"></a>字节</h2> 
<p><img src="https://images2.imgbox.com/b3/16/mbH5uL6p_o.png" alt="在这里插入图片描述"><br> 这个红色框框里的两个数表示一个字节</p> 
<h3><a id="_18"></a>高位在前</h3> 
<p>什么是高位在前？<br> 例如现实生活中1234，高位在前则表示12 34</p> 
<p>而winhex的都是低位在前，在后面会讲到段长度，如00 10，低位在前则表示10 00</p> 
<p>段结构包括： <br> 段标识|段类型|段长度|端数据</p> 
<h3><a id="_27"></a>段标识</h3> 
<p><code>1字节</code>，固定为<code>FF</code>H，H表示16进制</p> 
<h3><a id="_32"></a>段类型</h3> 
<p><code>1字节</code></p> 
<h4><a id="_35"></a>文件头</h4> 
<p>名称 <code>SOI</code> 标记码 <code>D8</code></p> 
<p><img src="https://images2.imgbox.com/e8/87/zIgi3Cz2_o.png" alt="在这里插入图片描述">如图，D8表示本jpg文件的文件头，前面的FF表示段标识</p> 
<h4><a id="_41"></a>文件尾</h4> 
<p>名称 <code>EOI</code> 标记码 <code>D9</code><br> <img src="https://images2.imgbox.com/0e/35/mX6sUrKX_o.png" alt="在这里插入图片描述">拉到最后，FF D9表示文件尾</p> 
<h4><a id="JPEG_46"></a>帧开始（标准JPEG)</h4> 
<ul><li>名称 <code>SOF0</code> 标记码 <code>C0</code></li><li>名称 <code>SOF1</code> 标记码 <code>C1</code><br> C0与C1在一个文件里只会存在一种，下面以C0为例，C1同样操作</li></ul> 
<p>我们查找 <code>FF C0</code></p> 
<p><img src="https://images2.imgbox.com/38/64/990xHutR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ea/6b/141y4168_o.png" alt="在这里插入图片描述"></p> 
<p>后面两个字节<code>00 11</code>表示段长度，将十六进制转为十进制，可以知道后面有15个字节的数据（段长度占了2字节，并且不包括段标识和段类型）<br> 那么我们可以看到后面的数据</p> 
<h5><a id="08_60"></a>标志08</h5> 
<p>1个字节</p> 
<p><img src="https://images2.imgbox.com/6d/88/7LIgj955_o.png" alt="在这里插入图片描述"></p> 
<p>这个标志固定是08</p> 
<h5><a id="y_67"></a>y轴分辨率</h5> 
<p>2字节<br> <img src="https://images2.imgbox.com/8d/1b/IvkXnuqU_o.png" alt="在这里插入图片描述"></p> 
<p>计算一下，<br> <img src="https://images2.imgbox.com/ed/ab/JkTn0xDg_o.png" alt="在这里插入图片描述"></p> 
<p>与实际的分辨率（高度）一样<br> <img src="https://images2.imgbox.com/c8/65/ZIdks6aw_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="x_81"></a>x轴分辨率</h5> 
<p>2字节</p> 
<p><img src="https://images2.imgbox.com/0c/57/noMCTJzz_o.png" alt="在这里插入图片描述">这两字节表示x轴分辨率，计算一下</p> 
<p><img src="https://images2.imgbox.com/bd/38/roFq3FUY_o.png" alt="在这里插入图片描述">与实际上文件的属性是一样的</p> 
<p><img src="https://images2.imgbox.com/1e/ad/hbQfMwXd_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="03_89"></a>组件数量03</h5> 
<p>这1个字节固定为<code>03</code></p> 
<p><img src="https://images2.imgbox.com/c9/7a/JhLFomZu_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/d9/f7/v8pmb63E_o.png" alt="在这里插入图片描述"><br> 从03之后的9个字节，都为组件数据，且每个组件数据为<code>3个字节</code>。</p> 
<p>组件大小和数量都为固定的。</p> 
<h4><a id="Huffman_100"></a>定义Huffman表（霍夫曼表）</h4> 
<p>名称 <code>DHT</code> 标记码 <code>C4</code></p> 
<p>固定<code>4</code>个<code>FF C4</code><br> 其中2个记录亮度，2个记录色度</p> 
<h3><a id="_105"></a>段长度</h3> 
<p><code>2字节</code><br> 不包含段标识、段类型</p> 
<p>例子在帧开始处讲了</p> 
<h3><a id="_111"></a>段数据</h3> 
<p>长度为<code>段长度-2</code></p> 
<h2><a id="_115"></a>参考资料</h2> 
<p>https://www.bilibili.com/video/BV1MJ411p7Ly/?spm_id_from=333.999.0.0&amp;vd_source=b914a8de9ea8b12ba5cb6d8edd1b346c</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/72dfa7b0b397982c78ea6b98c44a627e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">leetcode 38. Count and Say（计数和读）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/95b3803bc9074cfc10827526ec568a4d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux常用命令之配置及硬件检测</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>