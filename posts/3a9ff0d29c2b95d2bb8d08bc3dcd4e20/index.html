<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android：More than one file was found with OS independent path &#39;res/values/values.xml - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android：More than one file was found with OS independent path &#39;res/values/values.xml" />
<meta property="og:description" content="概述：
最近在集成一个一键登录的sdk时遇到了这个问题：
More than one file was found with OS independent path &#39;res/values/values.xml。
分析问题：
1.首先根据报错日记：这是由于相同命名的资源文件重复，所以系统编译的时候无法识别到底需要加载哪一个文件；
2.接着，顺着这个思路，去全局搜索，看看自己的资源文件或者导引用的jar、aar或者资源文件是否有多个日记报错的资源文件；
3.通过搜索发现，导入的aar包中确实存在多个相同命名的文件：
4.由此，问题的原因已经找到了，接下来就是如何解决的问题。
解决思路：
根据网上大多数人的建议，主要以下几种：
1.找到对应的资源文件，修改命名（这种方法视项目的大小、冲突文件的数量多少而定，要只是一两个资源文件，找出来修改以下，o了；但是，如果冲突的文件太多，不建议使用这种方法）；
2.在gradle配置项packagingOptions中使用exclude，过滤掉某些文件或者目录不添加到APK中，作用于APK，不能过滤aar和jar中的内容：
... android{ packagingOptions { exclude &#39;res/values/values.xml&#39; exclude &#39;libs/loginsdk1.0.4-release.aar/res/values/values.xml&#39; } } ... exclude后面的，就是需要过滤的文件路径。这种方法直接，简单，也是大多数人使用的方法。
3.与方法2相类似：packagingOptions中使用pickFirst，匹配到多个相同文件，只提取第一个。只作用于APK，不能过滤aar和jar中的文件。
比如：
... android{ packagingOptions { // pickFirst &#39;res/values/values.xml&#39; // pickFirst &#39;AndroidManifest.xml&#39; } } ... 4.但是，当我们是引用的三方的jar包或者aar资源文件，无法修改重复命名的资源文件，同时，虽然文件名相同、但文件内容不同的情况下，显然几种方法都无法解决问题，因此，这个时候，我们可以大胆的猜测：既然packagingOptions 的配置项可以过滤文件、提取文件等等，那我们是不是还可以通过标识完整的重复命名的资源文件，然后让系统进行提取，或者，我们还可以让重复命名的文件进行合并？而，顺着这个思路，我度娘了一下关于gradle配置项packagingOptions使用说明
gradle配置项packagingOptions使用说明
从这个帖子里面，果然找到了解决方法：
merge，将匹配的文件都添加到APK中，和pickFirst有些相反，会合并所有文件
于是，把重复文件进行了合并：
android{ packagingOptions { merge &#39;res/values/values.xml&#39; merge &#39;AndroidManifest.xml&#39; merge &#39;res/drawable/login_bg.xml&#39; merge &#39;R.txt&#39; merge &#39;classes.jar&#39; } } 最后，编译，通过。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/3a9ff0d29c2b95d2bb8d08bc3dcd4e20/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-13T00:02:04+08:00" />
<meta property="article:modified_time" content="2020-02-13T00:02:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android：More than one file was found with OS independent path &#39;res/values/values.xml</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>概述：</strong><br> 最近在集成一个一键登录的sdk时遇到了这个问题：<br> More than one file was found with OS independent path 'res/values/values.xml。<br> <img src="https://images2.imgbox.com/a6/7b/jfuSjyXv_o.png" alt="在这里插入图片描述"></p> 
<p><strong>分析问题：</strong><br> 1.首先根据报错日记：这是由于相同命名的资源文件重复，所以系统编译的时候无法识别到底需要加载哪一个文件；<br> 2.接着，顺着这个思路，去全局搜索，看看自己的资源文件或者导引用的jar、aar或者资源文件是否有多个日记报错的资源文件；<br> 3.通过搜索发现，导入的aar包中确实存在多个相同命名的文件：<br> <img src="https://images2.imgbox.com/c3/d4/BXlLruNU_o.png" alt="在这里插入图片描述"><br> 4.由此，问题的原因已经找到了，接下来就是如何解决的问题。</p> 
<p><strong>解决思路：</strong><br> 根据网上大多数人的建议，主要以下几种：<br> 1.找到对应的资源文件，修改命名（这种方法视项目的大小、冲突文件的数量多少而定，要只是一两个资源文件，找出来修改以下，o了；但是，如果冲突的文件太多，不建议使用这种方法）；<br> 2.在gradle配置项packagingOptions中使用exclude，过滤掉某些文件或者目录不添加到APK中，作用于APK，不能过滤aar和jar中的内容：</p> 
<pre><code>...
android{
    packagingOptions {
        exclude 'res/values/values.xml'
        exclude 'libs/loginsdk1.0.4-release.aar/res/values/values.xml'
    }
}
...
</code></pre> 
<p>exclude后面的，就是需要过滤的文件路径。这种方法直接，简单，也是大多数人使用的方法。<br> 3.与方法2相类似：packagingOptions中使用pickFirst，匹配到多个相同文件，只提取第一个。只作用于APK，不能过滤aar和jar中的文件。<br> 比如：</p> 
<pre><code>...
android{
    packagingOptions {
//        pickFirst 'res/values/values.xml'
//        pickFirst 'AndroidManifest.xml'
    }
    }
    ...
</code></pre> 
<p>4.但是，当我们是引用的三方的jar包或者aar资源文件，无法修改重复命名的资源文件，同时，虽然文件名相同、但文件内容不同的情况下，显然几种方法都无法解决问题，因此，这个时候，我们可以大胆的猜测：既然packagingOptions 的配置项可以过滤文件、提取文件等等，那我们是不是还可以通过标识完整的重复命名的资源文件，然后让系统进行提取，或者，我们还可以让重复命名的文件进行合并？而，顺着这个思路，我度娘了一下关于gradle配置项packagingOptions使用说明<br> <a href="https://blog.csdn.net/liuzehn/article/details/103587571">gradle配置项packagingOptions使用说明</a><br> 从这个帖子里面，果然找到了解决方法：<br> merge，将匹配的文件都添加到APK中，和pickFirst有些相反，会合并所有文件<br> 于是，把重复文件进行了合并：</p> 
<pre><code>android{
    packagingOptions {
        merge 'res/values/values.xml'
        merge 'AndroidManifest.xml'
        merge 'res/drawable/login_bg.xml'
        merge 'R.txt'
        merge 'classes.jar'
    }
    }
</code></pre> 
<p>最后，编译，通过。</p> 
<p><strong>总结：</strong><br> 有时候，遇到问题，根据网上大多数人遇到的类似问题以及大家提供的思路，若问题没有解决，可以顺着相同的思路进一步尝试，说不定问题就解决了，比如：从gradle配置项packagingOptions使用的过滤、提取，若问题仍无法解决，则可以顺着这个思路，猜测packagingOptions是否还有其他的使用方法，多尝试，问题则或许有可以解决。当然，我现在也不知道使用这个merg会不会引起其他什么问题，也欢迎大神指教。谢谢。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/605d048c4b8f5f584805f053887aef6c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA  蓝桥 组队</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bafaf16881ac5dfc63db99b20cf74975/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">echarts_自定义实现x-range图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>