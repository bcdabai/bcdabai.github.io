<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>十一、工具盒类(MyQQ)（Qt5 GUI系列） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="十一、工具盒类(MyQQ)（Qt5 GUI系列）" />
<meta property="og:description" content="目录
​编辑
一、设计需求
二、实现代码
三、代码解析
四、总结
一、设计需求 抽屉效果是软件界面设计中的一种常用形式，可以以一种动态直观的方式在有限大小的界面上扩展出更多的功能。本例要求实现类似 QQ 抽屉效果。
二、实现代码 #include &#34;dialog.h&#34; #include &lt;QApplication&gt; #include &#34;drawer.h&#34; int main(int argc, char *argv[]) { QApplication a(argc, argv); Drawer drawer; drawer.show(); return a.exec(); } #include &lt;QToolBox&gt; #include &lt;QToolButton&gt; class Drawer : public QToolBox { Q_OBJECT public: Drawer(QWidget *parent=0,Qt::WindowFlags f=0); private: QToolButton *toolBtn1_1; QToolButton *toolBtn1_2; QToolButton *toolBtn1_3; QToolButton *toolBtn1_4; QToolButton *toolBtn1_5; QToolButton *toolBtn2_1; QToolButton *toolBtn2_2; QToolButton *toolBtn3_1; QToolButton *toolBtn3_2; }; #include &#34;drawer.h&#34; #include &lt;QGroupBox&gt; #include &lt;QVBoxLayout&gt; Drawer::Drawer(QWidget *parent, Qt::WindowFlags f) :QToolBox(parent,f) { setWindowTitle(tr(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/804003646c035a7627a37540c959b9b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T17:08:05+08:00" />
<meta property="article:modified_time" content="2024-01-08T17:08:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">十一、工具盒类(MyQQ)（Qt5 GUI系列）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center;"><img alt="" height="400" src="https://images2.imgbox.com/a8/dd/dvejG8CS_o.gif" width="483"></h3> 
<hr> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">​编辑</a></p> 
<p id="%E4%B8%80%E3%80%81%E8%AE%BE%E8%AE%A1%E9%9C%80%E6%B1%82-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E8%AE%BE%E8%AE%A1%E9%9C%80%E6%B1%82" rel="nofollow">一、设计需求</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" rel="nofollow">二、实现代码</a></p> 
<p id="%E4%B8%89%E3%80%81%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90" rel="nofollow">三、代码解析</a></p> 
<p id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93" rel="nofollow">四、总结</a></p> 
<hr id="hr-toc"> 
<h3>一、设计需求</h3> 
<p>        抽屉效果是软件界面设计中的一种常用形式，可以以一种动态直观的方式在有限大小的界面上扩展出更多的功能。本例要求实现类似 QQ 抽屉效果。</p> 
<h3 id="%E4%BA%8C%E3%80%81%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81">二、实现代码</h3> 
<pre><code class="language-cpp">#include "dialog.h"
#include &lt;QApplication&gt;
#include "drawer.h"
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Drawer drawer;
    drawer.show();
    return a.exec();
}
</code></pre> 
<pre><code class="language-cpp">#include &lt;QToolBox&gt;
#include &lt;QToolButton&gt;
class Drawer : public QToolBox
{
    Q_OBJECT
public:
    Drawer(QWidget *parent=0,Qt::WindowFlags f=0);
private:
    QToolButton *toolBtn1_1;
    QToolButton *toolBtn1_2;
    QToolButton *toolBtn1_3;
    QToolButton *toolBtn1_4;
    QToolButton *toolBtn1_5;
    QToolButton *toolBtn2_1;
    QToolButton *toolBtn2_2;
    QToolButton *toolBtn3_1;
    QToolButton *toolBtn3_2;
};

</code></pre> 
<pre><code class="language-cpp">#include "drawer.h"
#include &lt;QGroupBox&gt;
#include &lt;QVBoxLayout&gt;

Drawer::Drawer(QWidget *parent, Qt::WindowFlags f)
    :QToolBox(parent,f)
{
    setWindowTitle(tr("My QQ"));                   //设置主窗体的标题
    //创建一个 QToolButton 类实例，分别对应于抽屉中的每一个按钮
    toolBtn1_1 =new QToolButton;
    //设置按钮的文字
    toolBtn1_1-&gt;setText(tr("张三"));
    //设置按钮的图标
    toolBtn1_1-&gt;setIcon(QPixmap("11.png"));
    //设置按钮的大小，本例将其设置为与图标的大小相同
    toolBtn1_1-&gt;setIconSize(QPixmap("11.png").size());
    //当鼠标离开时，按钮自动恢复为弹起状态
    toolBtn1_1-&gt;setAutoRaise(true);
    //设置按钮的ToolButtonStyle 属性
    //ToolButtonStyle 属性主要用来描述按钮的文字和图标的显示方式
    //Qt定义了五种ToolButtonStyle 类型，可以根据需要选择显示的方式，分别介绍如下
    //Qt::ToolButtonIconOnly：只显示图标
    //Qt::ToolButtonTextOnly：只显示文字
    //Qt::ToolButtonTextBesideIcon：文字显示在图标旁边
    //Qt::ToolButtonTextUnderIcon：文字显示在图标下面
    //Qt::ToolButtonFollowStyle：遵循 Style 标准
    toolBtn1_1-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn1_2 =new QToolButton;
    toolBtn1_2-&gt;setText(tr("李四"));
    toolBtn1_2-&gt;setIcon(QPixmap("22.png"));
    toolBtn1_2-&gt;setIconSize(QPixmap("22.png").size());
    toolBtn1_2-&gt;setAutoRaise(true);
    toolBtn1_2-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn1_3 =new QToolButton;
    toolBtn1_3-&gt;setText(tr("王五"));
    toolBtn1_3-&gt;setIcon(QPixmap("33.png"));
    toolBtn1_3-&gt;setIconSize(QPixmap("33.png").size());
    toolBtn1_3-&gt;setAutoRaise(true);
    toolBtn1_3-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn1_4 =new QToolButton;
    toolBtn1_4-&gt;setText(tr("小赵"));
    toolBtn1_4-&gt;setIcon(QPixmap("44.png"));
    toolBtn1_4-&gt;setIconSize(QPixmap("44.png").size());
    toolBtn1_4-&gt;setAutoRaise(true);
    toolBtn1_4-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn1_5 =new QToolButton;
    toolBtn1_5-&gt;setText(tr("小孙"));
    toolBtn1_5-&gt;setIcon(QPixmap("55.png"));
    toolBtn1_5-&gt;setIconSize(QPixmap("55.png").size());
    toolBtn1_5-&gt;setAutoRaise(true);
    toolBtn1_5-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    //创建一个 QGroupBox 类实例，在本例中对应每一个抽屉
    QGroupBox *groupBox1=new QGroupBox;
    QVBoxLayout *layout1=new QVBoxLayout(groupBox1);    //(groupBox1);
    layout1-&gt;setMargin(10);                             //布局中各窗体的显示间距
    layout1-&gt;setAlignment(Qt::AlignHCenter);            //布局中各窗体的显示位置
    layout1-&gt;addWidget(toolBtn1_1);
    layout1-&gt;addWidget(toolBtn1_2);
    layout1-&gt;addWidget(toolBtn1_3);
    layout1-&gt;addWidget(toolBtn1_4);
    layout1-&gt;addWidget(toolBtn1_5);
    //在按钮之后插入一个占位符，使得所有按钮能够靠上对齐，并且在整个抽屉大小发生改变时保证按钮的大小不发生变化
    layout1-&gt;addStretch();

    toolBtn2_1 =new QToolButton;
    toolBtn2_1-&gt;setText(tr("小王"));
    toolBtn2_1-&gt;setIcon(QPixmap("66.png"));
    toolBtn2_1-&gt;setIconSize(QPixmap("66.png").size());
    toolBtn2_1-&gt;setAutoRaise(true);
    toolBtn2_1-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn2_2 =new QToolButton;
    toolBtn2_2-&gt;setText(tr("小张"));
    toolBtn2_2-&gt;setIcon(QPixmap("77.png"));
    toolBtn2_2-&gt;setIconSize(QPixmap("77.png").size());
    toolBtn2_2-&gt;setAutoRaise(true);
    toolBtn2_2-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    QGroupBox *groupBox2=new QGroupBox;
    QVBoxLayout *layout2=new QVBoxLayout(groupBox2);
    layout2-&gt;setMargin(10);
    layout2-&gt;setAlignment(Qt::AlignHCenter);
    layout2-&gt;addWidget(toolBtn2_1);
    layout2-&gt;addWidget(toolBtn2_2);

    toolBtn3_1 =new QToolButton;
    toolBtn3_1-&gt;setText(tr("小陈"));
    toolBtn3_1-&gt;setIcon(QPixmap("88.png"));
    toolBtn3_1-&gt;setIconSize(QPixmap("88.png").size());
    toolBtn3_1-&gt;setAutoRaise(true);
    toolBtn3_1-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    toolBtn3_2 =new QToolButton;
    toolBtn3_2-&gt;setText(tr("小李"));
    toolBtn3_2-&gt;setIcon(QPixmap("99.png"));
    toolBtn3_2-&gt;setIconSize(QPixmap("99.png").size());
    toolBtn3_2-&gt;setAutoRaise(true);
    toolBtn3_2-&gt;setToolButtonStyle(Qt::ToolButtonTextBesideIcon);

    QGroupBox *groupBox3=new QGroupBox;
    QVBoxLayout *layout3=new QVBoxLayout(groupBox3);
    layout3-&gt;setMargin(10);
    layout3-&gt;setAlignment(Qt::AlignHCenter);
    layout3-&gt;addWidget(toolBtn3_1);
    layout3-&gt;addWidget(toolBtn3_2);

    //将准备好的抽屉插入ToolBox中
    this-&gt;addItem((QWidget*)groupBox1,tr("我的好友"));
    this-&gt;addItem((QWidget*)groupBox2,tr("陌生人"));
    this-&gt;addItem((QWidget*)groupBox3,tr("黑名单"));
}
</code></pre> 
<p><strong>效果展示：</strong></p> 
<p style="text-align:center;"><img alt="" height="400" src="https://images2.imgbox.com/67/df/noP0rZrd_o.png" width="304"></p> 
<h3 id="%E4%B8%89%E3%80%81%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90">三、代码解析</h3> 
<p>        本例代码较为清晰，参考注释即可。下面列出QPushButton和QToolButton的区别与联系。</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:680px;"><tbody><tr><td></td><td>QPushButton</td><td>QToolButton</td></tr><tr><td>样式</td><td>传统按钮样式</td><td>带有图标和文本的复合按钮</td></tr><tr><td>功能</td><td>用于触发单个操作</td><td>通常用于实现一个工具栏或下拉菜单中的一组相关操作</td></tr><tr><td>继承关系</td><td>继承自 QAbstractButton 类</td><td>继承自 QAbstractButton 类</td></tr><tr><td>文本和图标</td><td>可设置文本和图标</td><td>可设置文本和图标</td></tr><tr><td>快捷键</td><td>支持设置快捷键</td><td>支持设置快捷键</td></tr><tr><td>提示文本</td><td>支持设置提示文本</td><td>支持设置提示文本</td></tr><tr><td>信号</td><td>提供 clicked() 信号</td><td>提供 clicked() 信号</td></tr><tr><td>功能扩展</td><td>可以通过继承自QPushButton类来扩展自定义功能</td><td>可以通过继承自 QToolButton 类来扩展自定义功能</td></tr><tr><td>使用场景</td><td>适用于一般按钮点击操作</td><td>适用于工具栏、下拉菜单等需要展示图标和文本的场景</td></tr></tbody></table> 
<h3 id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93">四、总结</h3> 
<p>        本例程序提供了一个实现QQ类似界面的思路，当然距离QQ界面还有一定的差距。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c3aa49815942aa716849582132b3105c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring Cloud远程消费</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3fbeb502d90ffa38bd616a4039c08ec8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python的for循环怎么不停止？Python无限循环的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>