<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux管理文件命令（2）rm命令-删除文件或者目录 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux管理文件命令（2）rm命令-删除文件或者目录" />
<meta property="og:description" content="目录
前言
一、rm命令的介绍
二、命令语法及参数
三、参考实例 四、删错文件如何恢复
前言 rm是一个很危险的命令，使用的时候要特别当心，尤其对于新手更要格外注意，如执行“rm -rf /*”命令则会清空系统中所有的文件，甚至无法恢复回来。所以我们在执行之前一定要再次确认下在哪个目录中，到底要删除什么文件，考虑好后再敲击回车，时刻保持清醒的头脑。
一、rm命令的介绍 rm命令来自于英文单词remove的缩写，作用是用来删除文件或者目录的命令，一次可以删除多个文件，或者递归删除目录及目录下的所有子文件。
二、命令语法及参数 还是一样先通过man查看语法和参数
语法： rm [参数] file
NAME rm - 移除文件或者目录 总览 rm [options&#34;]file... POSIX(Portable Operating System Interface 可移植的操作系统接口) 选项: [-fiRr] GNU 选项 (最短格式): [-dfirvR][--help][--version][--] GNU选项 -d，--directory 用unlink（2）来替代rmdir（2）移除目录，而且不要求目录为空 移除目录使用的方式是unlink（2），而非rmdir（2）， 且在试图unlink目录之前不要求其为空。 这仅在你有合适权限时才能生效。 因为unlink一个目录会导致在删除目录下的文件非关联化， 因此聪明的方法是在执行此之后fsck（8）文件系统。 -f，--force 忽略不存在的文件，并且从不向用户提示。 -i，--interactive 提示是否移除每个文件。如果回答是否定的，文件将被跳过。 -r，-R，--recursive 递归地移除目录中的内容。 -v，--verbose 在移除每个文件之前打印其名称。 可以看到的是参数并不是很多，常用的参数就是这几个了
-f强制删除（不二次询问）-i删除前会询问用户是否操作-r/R递归删除-v显示指令的详细执行过程 三、参考实例 1）可以看到的是rm -f 无法删除目录，加上-r代表递归删除，-rf一起就是强制删除目录了
[root@localhost ~]# mkdir -p /data/test [root@localhost ~]# touch /data/test/{a..f}.txt [root@localhost ~]# rm -f /data/test/ rm: 无法删除&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/77b29c9381d99d7f48195c34884fef5d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-18T23:02:48+08:00" />
<meta property="article:modified_time" content="2023-02-18T23:02:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux管理文件命令（2）rm命令-删除文件或者目录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E4%B8%80%E3%80%81rm%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81rm%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BB%8B%E7%BB%8D" rel="nofollow">一、rm命令的介绍</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%91%BD%E4%BB%A4%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%8F%82%E6%95%B0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%91%BD%E4%BB%A4%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%8F%82%E6%95%B0" rel="nofollow">二、命令语法及参数</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%8F%82%E8%80%83%E5%AE%9E%E4%BE%8B%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%8F%82%E8%80%83%E5%AE%9E%E4%BE%8B%C2%A0" rel="nofollow">三、参考实例 </a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%88%A0%E9%94%99%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E5%88%A0%E9%94%99%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D" rel="nofollow">四、删错文件如何恢复</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%89%8D%E8%A8%80">前言</h2> 
<p>rm是一个很危险的命令，使用的时候要特别当心，尤其对于新手更要格外注意，如执行“rm -rf /*”命令则会清空系统中所有的文件，甚至无法恢复回来。所以我们在执行之前一定要再次确认下在哪个目录中，到底要删除什么文件，考虑好后再敲击回车，时刻保持清醒的头脑。</p> 
<h2 id="%E4%B8%80%E3%80%81rm%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BB%8B%E7%BB%8D">一、rm命令的介绍</h2> 
<p>rm命令来自于英文单词remove的缩写，作用是用来删除文件或者目录的命令，一次可以删除多个文件，或者递归删除目录及目录下的所有子文件。</p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%91%BD%E4%BB%A4%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%8F%82%E6%95%B0">二、命令语法及参数</h2> 
<p>还是一样先通过man查看语法和参数</p> 
<p>语法： rm [参数] file</p> 
<pre><code class="language-bash">NAME
       rm - 移除文件或者目录

总览
       rm [options"]file...

POSIX(Portable Operating System Interface 可移植的操作系统接口) 选项:
       [-fiRr]

GNU 选项 (最短格式):
       [-dfirvR][--help][--version][--]

GNU选项
       -d，--directory
              用unlink（2）来替代rmdir（2）移除目录，而且不要求目录为空
              移除目录使用的方式是unlink（2），而非rmdir（2），
              且在试图unlink目录之前不要求其为空。
              这仅在你有合适权限时才能生效。
              因为unlink一个目录会导致在删除目录下的文件非关联化，
              因此聪明的方法是在执行此之后fsck（8）文件系统。

       -f，--force
              忽略不存在的文件，并且从不向用户提示。

       -i，--interactive
              提示是否移除每个文件。如果回答是否定的，文件将被跳过。

       -r，-R，--recursive
              递归地移除目录中的内容。

       -v，--verbose
              在移除每个文件之前打印其名称。

</code></pre> 
<p>可以看到的是参数并不是很多，常用的参数就是这几个了</p> 
<table><tbody><tr><td>-f</td><td>强制删除（不二次询问）</td></tr><tr><td>-i</td><td>删除前会询问用户是否操作</td></tr><tr><td>-r/R</td><td>递归删除</td></tr><tr><td>-v</td><td>显示指令的详细执行过程</td></tr></tbody></table> 
<h2 id="%E4%B8%89%E3%80%81%E5%8F%82%E8%80%83%E5%AE%9E%E4%BE%8B%C2%A0">三、参考实例 </h2> 
<p>1）可以看到的是rm -f 无法删除目录，加上-r代表递归删除，-rf一起就是强制删除目录了</p> 
<pre><code class="language-bash">[root@localhost ~]# mkdir -p /data/test
[root@localhost ~]# touch /data/test/{a..f}.txt
[root@localhost ~]# rm -f /data/test/
rm: 无法删除"/data/test/": 是一个目录
[root@localhost ~]# rm -rf /data/test/

[root@localhost ~]# rm -r /data/test/
rm：是否进入目录"/data/test/"? y
rm：是否删除普通空文件 "/data/test/a.txt"？y
rm：是否删除普通空文件 "/data/test/b.txt"？y
rm：是否删除普通空文件 "/data/test/c.txt"？y
rm：是否删除普通空文件 "/data/test/d.txt"？y
rm：是否删除普通空文件 "/data/test/e.txt"？y
rm：是否删除普通空文件 "/data/test/f.txt"？y
rm：是否删除目录 "/data/test/"？y
[root@localhost ~]# 
</code></pre> 
<p>若只使用-r是可以删除目录的，但会有提问逐一确认是否要删除文件信息，很显然不加-f要显得繁琐很多；生产过程中建议能不使用-f就不使用-f，就算要用也要确认再三。</p> 
<p>2）通过命令alias -p 可以看到rm='rm -i'，默认敲这个rm命令就等于rm -i，表删除前会询问用户是否操作的提问</p> 
<pre><code class="language-bash">[root@localhost ~]# alias -p
alias cp='cp -i'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias l.='ls -d .* --color=auto'
alias ll='ls -l --color=auto'
alias ls='ls --color=auto'
alias mv='mv -i'
alias rm='rm -i'
alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'
</code></pre> 
<p>3）加-v参数则会显示命令执行的过程，若一口气删除的文件比较多，可以直接看到要删除文件的文件名</p> 
<pre><code class="language-bash">[root@localhost ~]# rm -rfv /data/test/
已删除"/data/test/1.txt"
已删除"/data/test/2.txt"
已删除"/data/test/3.txt"
已删除"/data/test/4.txt"
已删除"/data/test/5.txt"
已删除"/data/test/6.txt"
已删除目录："/data/test/"
[root@localhost ~]# 
</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E5%88%A0%E9%94%99%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D">四、删错文件如何恢复</h2> 
<p>        由于centos7以上的系统是搭配xfs的文件系统类型，此系统自带有工具，可备份还原，所以这里演示是以centos6的系统来做测试，centos6系统是搭配ext4的文件系统类型，所以可以用这个命令来做为恢复的准备工具。</p> 
<h3>4.1 准备实验环境、工具</h3> 
<p>系统版本和IP</p> 
<pre><code class="hljs">cat /etc/redhat-release
CentOS release 6.8(Final)

ifconfig eth0 | awk -F ":" 'NR==2{print $2}'| awk '{print $1}'
192.168.212.206
</code></pre> 
<p><strong>工具：extundelete</strong></p> 
<h3>4.2 增加硬盘，做挂载操作</h3> 
<p>        虚拟机上加硬盘是需要关机操作的，而物理机一般是不需要，大部分都支持热拔插的功能。 </p> 
<p><img alt="" height="643" src="https://images2.imgbox.com/d4/30/d5miAy89_o.png" width="708"></p> 
<pre><code class="hljs">fdisk /dev/sdb   #分区
n
p
1
+2G
w


mkfs.ext4 /dev/sdb1  #格式化

mkdir /sdb1  创建挂载点
mount /dev/sdb1 /sdb1  #挂载</code></pre> 
<h3> 4.3 创建目录和文件</h3> 
<p>复制了一些参考文件和创建了几个有数据的文件，其中c和kong.txt是无数据的。 </p> 
<p> <img alt="" height="293" src="https://images2.imgbox.com/d6/c6/X4diQkrI_o.png" width="640"></p> 
<p> 下面开始删除文件</p> 
<p><img alt="" height="92" src="https://images2.imgbox.com/5e/42/nublAXbX_o.png" width="633"></p> 
<h3> 4.4 使用工具进行恢复</h3> 
<h4>4.4.1解压文件</h4> 
<p><img alt="" height="112" src="https://images2.imgbox.com/45/92/MNAja0p0_o.png" width="639"></p> 
<h4> 4.4.2 进入到文件进行编译并安装需要的程序</h4> 
<pre><code class="hljs">cd extundelete-0.2.4  #进入目录
yum install gcc-c++ *ext2fs* -y   #下载所需软件包
./configure     #启动服务
make &amp;&amp; make install  #开始编译
</code></pre> 
<h3>4.5 开始恢复</h3> 
<h4>4.5.1 查看删除文件的inode值</h4> 
<pre><code class="hljs">extundelete /dev/sdb1 --inode 2</code></pre> 
<p><img alt="" height="166" src="https://images2.imgbox.com/4e/52/93YZQ11F_o.png" width="642"></p> 
<h4> 4.5.2 恢复inode值为19的文件</h4> 
<pre><code class="hljs">extundelete /dev/sdb1 --inode 12</code></pre> 
<p> 在RECOVERED_FILES中显示有恢复的文件信息，使用md5sum查看文件和源文件inode是用一样的</p> 
<p><img alt="" height="191" src="https://images2.imgbox.com/1e/48/YjGHSRYl_o.png" width="636"></p> 
<h4> 4.5.3 以文件名的方式进行恢复</h4> 
<pre><code class="hljs">extundelete /dev/sdb1 --restore-file hosts
</code></pre> 
<p><img alt="" height="178" src="https://images2.imgbox.com/c5/21/JMDbly9v_o.png" width="644"></p> 
<h4>4.5.4 以目录的方式进行恢复</h4> 
<pre><code class="hljs">extundelete /dev/sdb1 --restore-directory a</code></pre> 
<h4><img alt="" height="130" src="https://images2.imgbox.com/3d/75/gglQ9wfz_o.png" width="635"> </h4> 
<h4> 4.5.5 恢复所有文件</h4> 
<pre><code class="hljs">extundelete /dev/sdb1 --restore-all</code></pre> 
<p><img alt="" height="409" src="https://images2.imgbox.com/30/49/NcjZCAZ4_o.png" width="634"></p> 
<h4> 4.5.6 对比</h4> 
<p><img alt="" height="209" src="https://images2.imgbox.com/86/cd/zikDfIUd_o.png" width="278"><img alt="" height="162" src="https://images2.imgbox.com/80/c1/lLUamXbl_o.png" width="335"></p> 
<p> 最开始创建的文件和目录，和恢复了所有数据的文件和目录，发现有c目录和kong.txt并没有恢复，这个是因为ext文件系统中，extundelete恢复数据，默认情况会认为空目录和空文件没有恢复的必要。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/37fa9ee0a59cd8355a5ac4196861fe45/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">30天自制操作系统（Mac版）读书笔记（day13）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8cdbb5c6c0de755625150492ba17448c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何实现一个线程安全的list</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>