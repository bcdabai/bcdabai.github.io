<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tarjan算法详解（AcWing 1174 受欢迎的牛） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Tarjan算法详解（AcWing 1174 受欢迎的牛）" />
<meta property="og:description" content="题目描述：
每一头牛的愿望就是变成一头最受欢迎的牛。
现在有 N 头牛，编号从 1 到 N，给你 M 对整数 (A,B)，表示牛 A 认为牛 B 受欢迎。
这种关系是具有传递性的，如果 A 认为 B 受欢迎，B 认为 C 受欢迎，那么牛 A 也认为牛 C 受欢迎。
你的任务是求出有多少头牛被除自己之外的所有牛认为是受欢迎的。
输入格式
第一行两个数 N,M；
接下来 M 行，每行两个数 A,B，意思是 A 认为 B 是受欢迎的（给出的信息有可能重复，即有可能出现多个 A,B）。
输出格式
输出被除自己之外的所有牛认为是受欢迎的牛的数量。
数据范围
1≤N≤104,
1≤M≤5×104
输入样例：
3 3
1 2
2 1
2 3
输出样例：
1
样例解释
只有第三头牛被除自己之外的所有牛认为是受欢迎的。
分析：
本题考察tarjan算法，又是一个精彩的图论算法。下面会分两部分展开论述，第一部分主要讲解一下 tarjan算法及其在求有向图的强连通分量上的应用，第二部分主要分析如何用tarjan算法去求解本题。
1、Tarjan算法 几个概念 DAG：有向无环图连通分量：简单地说就是一组顶点中每个顶点都可以到达其他的顶点强连通分量：极大的连通分量 上面的定义或许不够严谨，但是基本可以概括这些词的含义。或者说，有向图的强连通分量既要求顶点间的连通性，有要求顶点的极大性，即再增加任意一个节点都会使得原连通分量不再连通。
遍历图时点的状态 在之前写的数据结构专栏的图论那章，详细说过图的遍历中节点的状态以及边的分类，这里还是要简单的概述下这些概念。
在对一个图做遍历时，不论是BFS还是DFS，节点在遍历的不同节点被划分成了不同的状态。
undiscovered：节点还未被访问到discovered：节点已经被访问到，但其相邻的节点还没有访问完visited：节点及其相邻的节点均已被访问完 如果用伪码形容遍历过程中节点的状态就是" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/2d0111f72c1085207e1eb3c34038907f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-23T12:21:33+08:00" />
<meta property="article:modified_time" content="2023-01-23T12:21:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Tarjan算法详解（AcWing 1174 受欢迎的牛）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>题目描述</strong>：<br> 每一头牛的愿望就是变成一头最受欢迎的牛。</p> 
<p>现在有 N 头牛，编号从 1 到 N，给你 M 对整数 (A,B)，表示牛 A 认为牛 B 受欢迎。</p> 
<p>这种关系是具有传递性的，如果 A 认为 B 受欢迎，B 认为 C 受欢迎，那么牛 A 也认为牛 C 受欢迎。</p> 
<p>你的任务是求出有多少头牛被除自己之外的所有牛认为是受欢迎的。</p> 
<p>输入格式<br> 第一行两个数 N,M；</p> 
<p>接下来 M 行，每行两个数 A,B，意思是 A 认为 B 是受欢迎的（给出的信息有可能重复，即有可能出现多个 A,B）。</p> 
<p>输出格式<br> 输出被除自己之外的所有牛认为是受欢迎的牛的数量。</p> 
<p>数据范围<br> 1≤N≤10<sup>4,</sup><br> 1≤M≤5×10<sup>4</sup><br> 输入样例：<br> 3 3<br> 1 2<br> 2 1<br> 2 3<br> 输出样例：<br> 1<br> 样例解释<br> 只有第三头牛被除自己之外的所有牛认为是受欢迎的。<br> <strong>分析：</strong><br> 本题考察tarjan算法，又是一个精彩的图论算法。下面会分两部分展开论述，第一部分主要讲解一下 tarjan算法及其在求有向图的强连通分量上的应用，第二部分主要分析如何用tarjan算法去求解本题。</p> 
<h3><a id="1Tarjan_32"></a>1、Tarjan算法</h3> 
<h4><a id="_33"></a>几个概念</h4> 
<ul><li>DAG：有向无环图</li><li>连通分量：简单地说就是一组顶点中每个顶点都可以到达其他的顶点</li><li>强连通分量：极大的连通分量</li></ul> 
<p>上面的定义或许不够严谨，但是基本可以概括这些词的含义。或者说，有向图的强连通分量既要求顶点间的连通性，有要求顶点的极大性，即再增加任意一个节点都会使得原连通分量不再连通。</p> 
<h4><a id="_40"></a>遍历图时点的状态</h4> 
<p>在之前写的数据结构专栏的图论那章，详细说过图的遍历中节点的状态以及边的分类，这里还是要简单的概述下这些概念。</p> 
<p>在对一个图做遍历时，不论是BFS还是DFS，节点在遍历的不同节点被划分成了不同的状态。</p> 
<ul><li><strong>undiscovered</strong>：节点还未被访问到</li><li><strong>discovered</strong>：节点已经被访问到，但其相邻的节点还没有访问完</li><li><strong>visited</strong>：节点及其相邻的节点均已被访问完</li></ul> 
<p>如果用伪码形容遍历过程中节点的状态就是</p> 
<pre><code class="prism language-C++">enum{
    undiscovered,
    discovered,
    visited
}
status(u) = undiscovered;
dfs(u) {
    status(u) = discovered;
    for(int i = h[u];~i;i = ne[i]) {
        j = e[i];
        dfs(j);
    }
    status(u) = visited;
}
</code></pre> 
<h4><a id="_65"></a>遍历图时边的分类</h4> 
<p>用通俗语言对边进行分类就是</p> 
<ul><li><strong>tree</strong>：dfs生成的dfs支撑树中的边就是树边</li><li><strong>backward</strong>：dfs树中后代节点指向祖先节点的边就是后向边</li><li><strong>forward</strong>：dfs树中祖先节点指向后代节点（孩子节点除外）的边就是前向边</li><li><strong>cross</strong>：dfs树中节点指向在此之前访问的节点（祖先节点除外）的边就是跨越边</li></ul> 
<p>当然，这四类边还有更加精准的定义。在此之前，需要引入节点的生命周期的概念。在dfs遍历图时，一个节点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         u 
        
       
      
        u 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span>刚被遍历到，状态随即转化为了<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
         i 
        
       
         s 
        
       
         c 
        
       
         o 
        
       
         v 
        
       
         e 
        
       
         r 
        
       
         e 
        
       
         d 
        
       
      
        discovered 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">sco</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">ere</span><span class="mord mathnormal">d</span></span></span></span></span>，记录下被访问到的时间<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
         t 
        
       
         i 
        
       
         m 
        
       
         e 
        
       
      
        dtime 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span></span></span></span>；紧接着会去访问<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         u 
        
       
      
        u 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span>的相邻节点，在此之前，节点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         u 
        
       
      
        u 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span>会被压入栈中。当<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         u 
        
       
      
        u 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span>的相邻节点都被遍历回溯完后，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         u 
        
       
      
        u 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span>从栈中弹出，状态随即转化为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         i 
        
       
         s 
        
       
         i 
        
       
         t 
        
       
         e 
        
       
         d 
        
       
      
        visited 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span></span></span></span></span>，记录下此时的时间为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         f 
        
       
         t 
        
       
         i 
        
       
         m 
        
       
         e 
        
       
      
        ftime 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span></span></span></span>。</p> 
<p>dfs过程中，每个节点从刚被访问完的入栈到其相邻节点都访问完后的出栈的这段时间，被称为这个节点的生命周期（<strong>dtime, ftime</strong>）。（当然，还有些概念像括号引理，以及证明会用到的割边，桥，关节点之类的这里就不再说明了。）</p> 
<p>于是我们可以得到更加精确的定义</p> 
<ul><li><strong>tree</strong>：discovered节点到undiscovered节点的边</li><li><strong>backward</strong>：discovered节点到discovered节点的边</li><li><strong>forward</strong>：discovered节点u到visited节点v的边，并且dtime(u) &lt; dtime(v)</li><li><strong>cross</strong>：discovered节点u到visited节点v的边，并且dtime(u) &gt; dtime(v)</li></ul> 
<p>上面这些概念虽然看起来繁杂，但是只要仔细体会dfs遍历的过程，也就不难理解了。</p> 
<h4><a id="Tarjan_83"></a>Tarjan算法的推导</h4> 
<p>对于一个DAG而言，每个节点都是单独的一个强连通分量，也就没必要去求解了，需要求解的图往往包含环路，如何判断一个图是否有环呢？</p> 
<p>答案很简单，就是DFS过程中含有后向边的图就一定包含环路。解释起来也很简单，显然祖先节点一定可以到达后代节点，而存在后向边的条件就是后代节点存在指向祖先节点的边，所以环路一定存在。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-HfCRr6Lj72kpmwdf" width="100%" xmlns="http://www.w3.org/2000/svg" height="97" style="max-width: 542px;" viewbox="0 0 542 97"> 
  <style>#mermaid-svg-HfCRr6Lj72kpmwdf {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .error-icon{fill:#552222;}#mermaid-svg-HfCRr6Lj72kpmwdf .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-HfCRr6Lj72kpmwdf .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-HfCRr6Lj72kpmwdf .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-HfCRr6Lj72kpmwdf .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-HfCRr6Lj72kpmwdf .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-HfCRr6Lj72kpmwdf .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-HfCRr6Lj72kpmwdf .marker{fill:#333333;stroke:#333333;}#mermaid-svg-HfCRr6Lj72kpmwdf .marker.cross{stroke:#333333;}#mermaid-svg-HfCRr6Lj72kpmwdf svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-HfCRr6Lj72kpmwdf .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .cluster-label text{fill:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .cluster-label span{color:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .label text,#mermaid-svg-HfCRr6Lj72kpmwdf span{fill:#333;color:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .node rect,#mermaid-svg-HfCRr6Lj72kpmwdf .node circle,#mermaid-svg-HfCRr6Lj72kpmwdf .node ellipse,#mermaid-svg-HfCRr6Lj72kpmwdf .node polygon,#mermaid-svg-HfCRr6Lj72kpmwdf .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-HfCRr6Lj72kpmwdf .node .label{text-align:center;}#mermaid-svg-HfCRr6Lj72kpmwdf .node.clickable{cursor:pointer;}#mermaid-svg-HfCRr6Lj72kpmwdf .arrowheadPath{fill:#333333;}#mermaid-svg-HfCRr6Lj72kpmwdf .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-HfCRr6Lj72kpmwdf .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-HfCRr6Lj72kpmwdf .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-HfCRr6Lj72kpmwdf .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-HfCRr6Lj72kpmwdf .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-HfCRr6Lj72kpmwdf .cluster text{fill:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf .cluster span{color:#333;}#mermaid-svg-HfCRr6Lj72kpmwdf div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-HfCRr6Lj72kpmwdf :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M54,60L58.166666666666664,60C62.333333333333336,60,70.66666666666667,60,79,60C87.33333333333333,60,95.66666666666667,60,99.83333333333333,60L104,60" marker-end="url(#arrowhead277)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead277" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M146.6860574647532,48.106340281711624L151.40504788729433,45.25528356809301C156.12403830983547,42.404226854474416,165.56201915491772,36.70211342723721,174.44767624412552,33.851056713618604C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead278)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead278" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"> 
      <path class="path" d="M246,31L250.16666666666666,31C254.33333333333334,31,262.6666666666667,31,271,31C279.3333333333333,31,287.6666666666667,31,291.8333333333333,31L296,31" marker-end="url(#arrowhead279)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead279" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M342,31L346.1666666666667,31C350.3333333333333,31,358.6666666666667,31,367.5523237558745,33.851056713618604C376.43798084508234,36.70211342723721,385.87596169016456,42.404226854474416,390.5949521127057,45.25528356809301L395.31394253524684,48.106340281711624" marker-end="url(#arrowhead280)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead280" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-B" style="opacity: 1;" id="L-E-B"> 
      <path class="path" d="M395.31394253524684,71.89365971828838L390.5949521127057,74.74471643190698C385.87596169016456,77.59577314552558,376.43798084508234,83.29788657276279,363.71899042254114,86.1489432863814C351,89,335,89,319,89C303,89,287,89,271,89C255,89,239,89,223,89C207,89,191,89,178.2810095774589,86.1489432863814C165.56201915491772,83.29788657276279,156.12403830983547,77.59577314552558,151.40504788729433,74.74471643190698L146.6860574647532,71.89365971828838" marker-end="url(#arrowhead281)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead281" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-F" style="opacity: 1;" id="L-E-F"> 
      <path class="path" d="M438,60L442.1666666666667,60C446.3333333333333,60,454.6666666666667,60,463,60C471.3333333333333,60,479.6666666666667,60,483.8333333333333,60L488,60" marker-end="url(#arrowhead282)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead282" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-B" class="edgeLabel L-LS-E' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-F" class="edgeLabel L-LS-E' L-LE-F"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-184" transform="translate(31,60)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-185" transform="translate(127,60)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-187" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-189" transform="translate(319,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-191" transform="translate(415,60)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-F-195" transform="translate(511,60)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           6 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>如上图所示，图里一共有三个强连通分量：1，【2,3,4,5】，6。因为2 3 4 5构成了一条回路，他们之间是彼此可达的。我们需要求的是</p> 
<ul><li>哪些点属于同一个强连通分量</li><li>这些强连通分量可以缩到哪个节点里</li></ul> 
<p>2,3,4,5属于同一个强连通分量毫无疑问，如果将它们缩成一个节点2，原图就变成了1到2再到6的DAG了。为什么选择2作为这个强连通分量的代表呢？</p> 
<p>如果从节点1开始遍历，那么2的dtime就是2，是这个强连通分量里dtime最小的节点，也是dfs支撑树里3,4,5节点的祖先节点，所以选择2作为这个强连通分量的代表节点。</p> 
<p>那么如何判断哪些节点属于同一个强连通分量呢？Tarjan算法可以解决这一问题。</p> 
<p>首先需要引入low[u]的概念，我们暂且将low[u]理解为u可以到达的节点中dtime的最小值。对low数组的理解会直接影响对Tarjan算法的理解，我们前面说到，一个强连通分量里如果包含多个节点，这个强连通分量一定含环路，并且环路中一定含有backward边。如果这里的环路是像上面的图一样，仅仅由tree边和backward边构成，那么在low[u]表示u可以到达的dtime最小的节点的dtime时，可以看出low[1] = 1,low[2] = low[3] = low[4] = low[5] = 2,low[6] = 6，然后发现原来同一个强连通分量内节点的low值都相等，所以只用一遍DFS，一边统计每个节点的low值就可以解决该问题了。</p> 
<p>问题并非这么简单。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-WhfUvEZrCg7XNkYu" width="100%" xmlns="http://www.w3.org/2000/svg" height="158" style="max-width: 542px;" viewbox="0 0 542 158"> 
  <style>#mermaid-svg-WhfUvEZrCg7XNkYu {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .error-icon{fill:#552222;}#mermaid-svg-WhfUvEZrCg7XNkYu .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-WhfUvEZrCg7XNkYu .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-WhfUvEZrCg7XNkYu .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-WhfUvEZrCg7XNkYu .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-WhfUvEZrCg7XNkYu .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-WhfUvEZrCg7XNkYu .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-WhfUvEZrCg7XNkYu .marker{fill:#333333;stroke:#333333;}#mermaid-svg-WhfUvEZrCg7XNkYu .marker.cross{stroke:#333333;}#mermaid-svg-WhfUvEZrCg7XNkYu svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-WhfUvEZrCg7XNkYu .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .cluster-label text{fill:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .cluster-label span{color:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .label text,#mermaid-svg-WhfUvEZrCg7XNkYu span{fill:#333;color:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .node rect,#mermaid-svg-WhfUvEZrCg7XNkYu .node circle,#mermaid-svg-WhfUvEZrCg7XNkYu .node ellipse,#mermaid-svg-WhfUvEZrCg7XNkYu .node polygon,#mermaid-svg-WhfUvEZrCg7XNkYu .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-WhfUvEZrCg7XNkYu .node .label{text-align:center;}#mermaid-svg-WhfUvEZrCg7XNkYu .node.clickable{cursor:pointer;}#mermaid-svg-WhfUvEZrCg7XNkYu .arrowheadPath{fill:#333333;}#mermaid-svg-WhfUvEZrCg7XNkYu .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-WhfUvEZrCg7XNkYu .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-WhfUvEZrCg7XNkYu .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-WhfUvEZrCg7XNkYu .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-WhfUvEZrCg7XNkYu .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-WhfUvEZrCg7XNkYu .cluster text{fill:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu .cluster span{color:#333;}#mermaid-svg-WhfUvEZrCg7XNkYu div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-WhfUvEZrCg7XNkYu :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M54,79L58.166666666666664,79C62.333333333333336,79,70.66666666666667,79,79,79C87.33333333333333,79,95.66666666666667,79,99.83333333333333,79L104,79" marker-end="url(#arrowhead317)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead317" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-G" style="opacity: 1;" id="L-B-G"> 
      <path class="path" d="M141.6640574227872,61.28093061413214L147.22004785232266,54.56744217844345C152.77603828185815,47.853953742754754,163.88801914092906,34.42697687137738,177.44400957046454,27.71348843568869C191,21,207,21,223,21C239,21,255,21,271,21C287,21,303,21,319,21C335,21,351,21,367,21C383,21,399,21,415,21C431,21,447,21,459.2472417243392,21.884842025903996C471.4944834486784,22.769684051807996,479.9889668973567,24.539368103615985,484.2362086216959,25.42421012951998L488.48345034603506,26.309052155423977" marker-end="url(#arrowhead318)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead318" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M145.0330539626205,93.2761677204079L150.0275449688504,97.23013976700658C155.02203597508034,101.18411181360527,165.01101798754016,109.09205590680263,174.17217566043675,113.04602795340132C183.33333333333334,117,191.66666666666666,117,195.83333333333334,117L200,117" marker-end="url(#arrowhead319)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead319" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"> 
      <path class="path" d="M246,117L250.16666666666666,117C254.33333333333334,117,262.6666666666667,117,271,117C279.3333333333333,117,287.6666666666667,117,291.8333333333333,117L296,117" marker-end="url(#arrowhead320)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead320" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M342,117L346.1666666666667,117C350.3333333333333,117,358.6666666666667,117,367,117C375.3333333333333,117,383.6666666666667,117,387.8333333333333,117L392,117" marker-end="url(#arrowhead321)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead321" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-F" style="opacity: 1;" id="L-E-F"> 
      <path class="path" d="M437.51654965396494,121.69094784457603L441.7637913783041,122.57578987048002C446.0110331026433,123.46063189638403,454.5055165513216,125.23031594819201,462.91942494232745,126.11515797409601C471.3333333333333,127,479.6666666666667,127,483.8333333333333,127L488,127" marker-end="url(#arrowhead322)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead322" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-G" style="opacity: 1;" id="L-E-G"> 
      <path class="path" d="M431.2634559672906,100.7365440327094L436.5528799727422,95.44712002725782C441.84230397819374,90.15769602180626,452.42115198909687,79.57884801090313,462.70506700077834,70.33545195885289C472.98898201245987,61.092055906802635,482.9779640249197,53.18411181360526,487.9724550311496,49.23013976700659L492.9669460373795,45.276167720407905" marker-end="url(#arrowhead323)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead323" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-G" class="edgeLabel L-LS-B' L-LE-G"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-F" class="edgeLabel L-LS-E' L-LE-F"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-G" class="edgeLabel L-LS-E' L-LE-G"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-210" transform="translate(31,79)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-211" transform="translate(127,79)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-G-213" transform="translate(511,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           7 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-215" transform="translate(223,117)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-217" transform="translate(319,117)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-219" transform="translate(415,117)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-F-221" transform="translate(511,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           6 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>如图所示，1遍历到2，2遍历到7,7的状态转为visited，然后2，继续遍历到3,4,5, 5在遍历到7的时候发现7的状态是visited，而dtime[7] &lt; dtime[5]，所以5到7的这条边是cross边，这条cross导致了5可以到达7，也就使得了low[5] = low[7] = 3，但是很显然，5和7并不在同一个强连通分量里，这就推翻了前面的节点low值相同，就在同一个强连通分量里的结论。那是否可以加上cross边不更新low值的限制呢？这样一来5的low值就和7不同了。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-6VfImiwhWs2Vhcml" width="100%" xmlns="http://www.w3.org/2000/svg" height="193" style="max-width: 350px;" viewbox="0 0 350 193"> 
  <style>#mermaid-svg-6VfImiwhWs2Vhcml {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .error-icon{fill:#552222;}#mermaid-svg-6VfImiwhWs2Vhcml .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-6VfImiwhWs2Vhcml .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-6VfImiwhWs2Vhcml .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-6VfImiwhWs2Vhcml .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-6VfImiwhWs2Vhcml .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-6VfImiwhWs2Vhcml .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-6VfImiwhWs2Vhcml .marker{fill:#333333;stroke:#333333;}#mermaid-svg-6VfImiwhWs2Vhcml .marker.cross{stroke:#333333;}#mermaid-svg-6VfImiwhWs2Vhcml svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-6VfImiwhWs2Vhcml .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .cluster-label text{fill:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .cluster-label span{color:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .label text,#mermaid-svg-6VfImiwhWs2Vhcml span{fill:#333;color:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .node rect,#mermaid-svg-6VfImiwhWs2Vhcml .node circle,#mermaid-svg-6VfImiwhWs2Vhcml .node ellipse,#mermaid-svg-6VfImiwhWs2Vhcml .node polygon,#mermaid-svg-6VfImiwhWs2Vhcml .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-6VfImiwhWs2Vhcml .node .label{text-align:center;}#mermaid-svg-6VfImiwhWs2Vhcml .node.clickable{cursor:pointer;}#mermaid-svg-6VfImiwhWs2Vhcml .arrowheadPath{fill:#333333;}#mermaid-svg-6VfImiwhWs2Vhcml .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-6VfImiwhWs2Vhcml .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-6VfImiwhWs2Vhcml .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-6VfImiwhWs2Vhcml .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-6VfImiwhWs2Vhcml .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-6VfImiwhWs2Vhcml .cluster text{fill:#333;}#mermaid-svg-6VfImiwhWs2Vhcml .cluster span{color:#333;}#mermaid-svg-6VfImiwhWs2Vhcml div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-6VfImiwhWs2Vhcml :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M41.28591269649903,106.42817460700194L47.57159391374919,93.85681217250162C53.85727513099935,81.28544973800129,66.42863756549967,56.14272486900065,80.71431878274984,43.57136243450032C95,31,111,31,127,31C143,31,159,31,171.16666666666666,31C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead350)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead350" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-D" style="opacity: 1;" id="L-A-D"> 
      <path class="path" d="M54,127L58.166666666666664,127C62.333333333333336,127,70.66666666666667,127,79,127C87.33333333333333,127,95.66666666666667,127,99.83333333333333,127L104,127" marker-end="url(#arrowhead351)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead351" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M246,31L250.16666666666666,31C254.33333333333334,31,262.6666666666667,31,273.1190145505835,43.57136243450032C283.5713624345003,56.14272486900065,296.14272486900063,81.28544973800129,302.4284060862508,93.85681217250162L308.71408730350095,106.42817460700194" marker-end="url(#arrowhead352)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead352" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-A" style="opacity: 1;" id="L-C-A"> 
      <path class="path" d="M304.3359425772128,144.71906938586787L298.7799521476773,151.43255782155657C293.2239617181419,158.14604625724525,282.1119808590709,171.57302312862262,268.5559904295355,178.28651156431133C255,185,239,185,223,185C207,185,191,185,175,185C159,185,143,185,127,185C111,185,95,185,81.44400957046453,178.28651156431133C67.88801914092907,171.57302312862262,56.77603828185813,158.14604625724525,51.220047852322665,151.43255782155657L45.664057422787195,144.71906938586787" marker-end="url(#arrowhead353)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead353" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M150,127L154.16666666666666,127C158.33333333333334,127,166.66666666666666,127,175,127C183.33333333333334,127,191.66666666666666,127,195.83333333333334,127L200,127" marker-end="url(#arrowhead354)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead354" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-C" style="opacity: 1;" id="L-E-C"> 
      <path class="path" d="M246,127L250.16666666666666,127C254.33333333333334,127,262.6666666666667,127,271,127C279.3333333333333,127,287.6666666666667,127,291.8333333333333,127L296,127" marker-end="url(#arrowhead355)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead355" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-D" class="edgeLabel L-LS-A' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-A" class="edgeLabel L-LS-C' L-LE-A"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-C" class="edgeLabel L-LS-E' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-236" transform="translate(31,127)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-237" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-239" transform="translate(127,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-241" transform="translate(319,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-245" transform="translate(223,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>如图所示，1遍历到2，再到3, 3到1是backward边；然后3变成visited状态，接着1<br> 遍历到4,5, 5遍历到3时发现3的状态是visited，并且dtime[3] &lt; dtime[5]，所以5到3是cross边，如果此时不用3的low值更新5的low值的话，3和5就被判定不在同一连通分量里了，但是显然，此时的图就是一个强连通分量。<br> 既然不能通过cross边不更新low值这个条件解决该问题，那么还有其它什么办法可以解决问题呢？</p> 
<p>不难发现，一个节点刚遍历到的low值就是等于dtime值的，此时能到达的最早遍历的节点就是节点本身，而最早更新low值的节点一定是通过backward边更新的low值，上图的例子是5经过cross边到达3，因为3可以经过backward边到达1，才使得包含cross的边也成为了回路的一员，这时5通过3的low值更新low值时，会发现3的dtime值是小于low值的；如果3没有通过backward边到1的回路，3的dtime值就等于low值，此时不可更新通过cross边连向3的节点5的low值。从而我们可以得出结论，<strong>通过跨边更新low值，只有当目标节点的low值小于dtime值时才能进行更新</strong>。</p> 
<p>这样一来，low数组的含义就要稍微改变下了，不再是节点能够到达的节点中最小的dtime值了，而是节点通过backward边能够到达节点的dtime值。</p> 
<p>于是不难得出以下Tarjan算法的伪码：</p> 
<pre><code class="prism language-C++">void tarjan(int u) {
    dtime[u] = low[u] = ++t;
    for(int i = h[u];~i;i = ne[i]) {
        int j = e[i];
        if(!dtime[j]) { //Tree
            tarjan(j);
            low[u] = min(low[u], low[j]);
        } else if(!ftime[j] || (dtime[j] &gt; dtime[u] &amp;&amp; low[j] &lt; dtime[j]) { //backward or cross which has ever passed backward
            low[u] = min(low[u], low[j]);
        }
    }
    ftime[u] = ++t;
}
</code></pre> 
<p>稍微解释下就是dtime的值为0，说明节点第一次被访问到，对于tree边而言，我们需要用相邻节点的low值去更新u的low值；如果ftime[j]是0，说明j的相邻节点还没有访问完，此时的边是backward边，也可以更新u的low值；如果ftime[j]非0，并且j的dtime大于u的dtime，说明此时是cross边，只要这时候j的low值小于dtime值，就可以更新u的low值。</p> 
<p>上面的算法看似可以准确的求出所有节点的low值，实际上存在着不小的漏洞，这点在后续的分析中会讲到。<br> 我们暂且认为可以通过这种方式正确的求出每个节点的low值，然后low值相同的就是处在同一个强连通分量内的节点。且不说我们需要继续遍历所有节点的low值才能获取强连通分量，我们还需要遍历时记录下dtime对应的节点号，才能知道最后强连通分量需要缩到哪个点上，还是比较麻烦的。</p> 
<h4><a id="Tarjan_158"></a>真正的Tarjan算法</h4> 
<pre><code class="prism language-C++">void tarjan(int u) {
    dtime[u] = low[u] = ++t;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u];~i;i = ne[i]) {
        int j = e[i];
        if(!dtime[j]) { //Tree
            tarjan(j);
            low[u] = min(low[u], low[j]);
        } else if(in_stk[j]) { //backward or cross which has ever passed backward
            low[u] = min(low[u], dtime[j]);
        }
    }
    if (low[u] == dtime[u]) {//visited and u is the lowest node
        scc_cnt++;
        int y;
        do {
            y = stk[top--];
            id[y] = scc_cnt;
            scc_size[scc_cnt]++;
            in_stk[y] = false;
        } while(y != u);
    }
}
</code></pre> 
<p>观察代码可以发现，真正的Tarjan算法和之前伪码的实现还是有些许差异的。这其中的差异包括，backward边以及符合条件cross边的判断，以及该分支下更新u的low值是采用了j的dtime值而不是low值。</p> 
<p>之前我们在分析dfs遍历过程时，曾经说过，遍历到某节点时，该节点会被压入栈中，而当该节点相邻节点均被访问完成后，该节点会从栈中弹出，虽然这一过程是不需要我们进行干涉的，但是却是tarjan算法的重要思路。</p> 
<p>强连通分量在进行缩点时，会选择缩到dtime最小的节点，该节点也是其他节点的祖先节点，因此，当强连通分量里dtime最小的节点出栈之际，这个强连通分量里的其他节点肯定也都被遍历过了，此时就可以开始统计这个强连通分量里所有的节点了。</p> 
<p>既然缩点的节点是强连通分量里dtime最小的节点，那么它的dtime肯定是等于low的，换句话说，我们可以在dtime[u] == low[u]之际开始统计强连通分量节点，为了能方便统计强连通分量的节点，我们模仿系统栈也设置一个栈，节点首次被访问时入栈，节点相邻节点被访问完成之际却不一定可以出栈，因为我们需要在缩点的节点出栈之际统计下强连通分量的节点，因此，如果某个节点相邻节点被访问完成了，如果它不是强连通分量里最高的节点，dtime不等于low的话，就需要一直留在栈中。这样一来，遍历以u为根的dfs子树时，如果某个节点和u不在同一强连通分量里，那么在u的状态变成visited时，该节点所在的强连通分量肯定都已经出栈了，此时栈里面在u节点上方的节点，只会是和u在同一个强连通分量里的节点。</p> 
<p>这个栈的作用不仅仅是方便统计强连通分量的节点，tarjan算法的else if分支里面的判断条件，是u到j的边是backward边或者是j的dtime值大于low值的cross边。此时栈中节点有两种状态，一种是discovered状态，表示这个节点孩子节点还没有访问完成，此时u到j就是backward边；另一种是visited状态，但是因为dtime值不等于low值，迟迟不能出栈，这也就正好是dtime值小于low值的cross边。可以发现，只要j还在栈中，就能够准确的表示这两种状态。到这里Tarjan算法的基本思想也就分析完了，但是还有值得深究的地方。</p> 
<h4><a id="dtimej_or_lowj_193"></a>dtime[j] or low[j]</h4> 
<pre><code class="prism language-C++">else if(in_stk[j]) { //backward or cross which has ever passed backward
            low[u] = min(low[u], dtime[j]);
        }
</code></pre> 
<p>为什么在第二个分支下是用j的dtime值而不是low值去更新u的low值？这个问题算是Tarjan最大的难点之一了。如果直接用low[j]去更新low[u]，程序执行结果完全一致，而且似乎更加合理。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-NTmydljP7pMfGDEu" width="100%" xmlns="http://www.w3.org/2000/svg" height="193" style="max-width: 350px;" viewbox="0 0 350 193"> 
  <style>#mermaid-svg-NTmydljP7pMfGDEu {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-NTmydljP7pMfGDEu .error-icon{fill:#552222;}#mermaid-svg-NTmydljP7pMfGDEu .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-NTmydljP7pMfGDEu .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-NTmydljP7pMfGDEu .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-NTmydljP7pMfGDEu .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-NTmydljP7pMfGDEu .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-NTmydljP7pMfGDEu .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-NTmydljP7pMfGDEu .marker{fill:#333333;stroke:#333333;}#mermaid-svg-NTmydljP7pMfGDEu .marker.cross{stroke:#333333;}#mermaid-svg-NTmydljP7pMfGDEu svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-NTmydljP7pMfGDEu .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-NTmydljP7pMfGDEu .cluster-label text{fill:#333;}#mermaid-svg-NTmydljP7pMfGDEu .cluster-label span{color:#333;}#mermaid-svg-NTmydljP7pMfGDEu .label text,#mermaid-svg-NTmydljP7pMfGDEu span{fill:#333;color:#333;}#mermaid-svg-NTmydljP7pMfGDEu .node rect,#mermaid-svg-NTmydljP7pMfGDEu .node circle,#mermaid-svg-NTmydljP7pMfGDEu .node ellipse,#mermaid-svg-NTmydljP7pMfGDEu .node polygon,#mermaid-svg-NTmydljP7pMfGDEu .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-NTmydljP7pMfGDEu .node .label{text-align:center;}#mermaid-svg-NTmydljP7pMfGDEu .node.clickable{cursor:pointer;}#mermaid-svg-NTmydljP7pMfGDEu .arrowheadPath{fill:#333333;}#mermaid-svg-NTmydljP7pMfGDEu .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-NTmydljP7pMfGDEu .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-NTmydljP7pMfGDEu .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-NTmydljP7pMfGDEu .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-NTmydljP7pMfGDEu .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-NTmydljP7pMfGDEu .cluster text{fill:#333;}#mermaid-svg-NTmydljP7pMfGDEu .cluster span{color:#333;}#mermaid-svg-NTmydljP7pMfGDEu div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-NTmydljP7pMfGDEu :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M41.28591269649903,106.42817460700194L47.57159391374919,93.85681217250162C53.85727513099935,81.28544973800129,66.42863756549967,56.14272486900065,80.71431878274984,43.57136243450032C95,31,111,31,127,31C143,31,159,31,171.16666666666666,31C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead382)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead382" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-D" style="opacity: 1;" id="L-A-D"> 
      <path class="path" d="M54,127L58.166666666666664,127C62.333333333333336,127,70.66666666666667,127,79,127C87.33333333333333,127,95.66666666666667,127,99.83333333333333,127L104,127" marker-end="url(#arrowhead383)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead383" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M246,31L250.16666666666666,31C254.33333333333334,31,262.6666666666667,31,273.1190145505835,43.57136243450032C283.5713624345003,56.14272486900065,296.14272486900063,81.28544973800129,302.4284060862508,93.85681217250162L308.71408730350095,106.42817460700194" marker-end="url(#arrowhead384)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead384" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-A" style="opacity: 1;" id="L-C-A"> 
      <path class="path" d="M304.3359425772128,144.71906938586787L298.7799521476773,151.43255782155657C293.2239617181419,158.14604625724525,282.1119808590709,171.57302312862262,268.5559904295355,178.28651156431133C255,185,239,185,223,185C207,185,191,185,175,185C159,185,143,185,127,185C111,185,95,185,81.44400957046453,178.28651156431133C67.88801914092907,171.57302312862262,56.77603828185813,158.14604625724525,51.220047852322665,151.43255782155657L45.664057422787195,144.71906938586787" marker-end="url(#arrowhead385)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead385" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M150,127L154.16666666666666,127C158.33333333333334,127,166.66666666666666,127,175,127C183.33333333333334,127,191.66666666666666,127,195.83333333333334,127L200,127" marker-end="url(#arrowhead386)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead386" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-C" style="opacity: 1;" id="L-E-C"> 
      <path class="path" d="M246,127L250.16666666666666,127C254.33333333333334,127,262.6666666666667,127,271,127C279.3333333333333,127,287.6666666666667,127,291.8333333333333,127L296,127" marker-end="url(#arrowhead387)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead387" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-D" class="edgeLabel L-LS-A' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-A" class="edgeLabel L-LS-C' L-LE-A"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-C" class="edgeLabel L-LS-E' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-260" transform="translate(31,127)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-261" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-263" transform="translate(127,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-265" transform="translate(319,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-269" transform="translate(223,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>如图所示，1遍历到2再到3，此时3的dtime是3, 3到1有一条backward边，所以3的low值会被更新成1，之后1通过4,5再次遍历到3时，5到3有一条cross边，如果通过3的low值更新5的low值，那么low[5] = low[3] = 1，最后所有节点的low值都是1，也就是整个强连通分量里面节点的low值都是1，符合low数组最初的定义，通过backward边能够到达的节点的最小dtime值。</p> 
<p>如果通过3的dtime值更新5的low值，那么low[5] = 3，以至于后续的4,5节点的low值都被更新成了3，这与low数组的定义不符，明明这些节点都可以到达更高的节点1，low值记录的却是3，是否是tarjan算法这里写的不对呢？</p> 
<p>如果low[u] = min(low[u], dtime[j]);不对，那么low[u] = min(low[u], low[j]);是否就正确呢？</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-KreGHWIuWXRvkr13" width="100%" xmlns="http://www.w3.org/2000/svg" height="193" style="max-width: 542px;" viewbox="0 0 542 193"> 
  <style>#mermaid-svg-KreGHWIuWXRvkr13 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .error-icon{fill:#552222;}#mermaid-svg-KreGHWIuWXRvkr13 .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-KreGHWIuWXRvkr13 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-KreGHWIuWXRvkr13 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-KreGHWIuWXRvkr13 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-KreGHWIuWXRvkr13 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-KreGHWIuWXRvkr13 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-KreGHWIuWXRvkr13 .marker{fill:#333333;stroke:#333333;}#mermaid-svg-KreGHWIuWXRvkr13 .marker.cross{stroke:#333333;}#mermaid-svg-KreGHWIuWXRvkr13 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-KreGHWIuWXRvkr13 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .cluster-label text{fill:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .cluster-label span{color:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .label text,#mermaid-svg-KreGHWIuWXRvkr13 span{fill:#333;color:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .node rect,#mermaid-svg-KreGHWIuWXRvkr13 .node circle,#mermaid-svg-KreGHWIuWXRvkr13 .node ellipse,#mermaid-svg-KreGHWIuWXRvkr13 .node polygon,#mermaid-svg-KreGHWIuWXRvkr13 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-KreGHWIuWXRvkr13 .node .label{text-align:center;}#mermaid-svg-KreGHWIuWXRvkr13 .node.clickable{cursor:pointer;}#mermaid-svg-KreGHWIuWXRvkr13 .arrowheadPath{fill:#333333;}#mermaid-svg-KreGHWIuWXRvkr13 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-KreGHWIuWXRvkr13 .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-KreGHWIuWXRvkr13 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-KreGHWIuWXRvkr13 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-KreGHWIuWXRvkr13 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-KreGHWIuWXRvkr13 .cluster text{fill:#333;}#mermaid-svg-KreGHWIuWXRvkr13 .cluster span{color:#333;}#mermaid-svg-KreGHWIuWXRvkr13 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-KreGHWIuWXRvkr13 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-F LE-G" id="L-F-G" style="opacity: 1;"> 
      <path class="path" d="M50.686057464753176,115.10634028171162L55.40504788729431,112.25528356809302C60.12403830983545,109.40422685447442,69.56201915491772,103.7021134272372,78.44767624412553,100.8510567136186C87.33333333333333,98,95.66666666666667,98,99.83333333333333,98L104,98" marker-end="url(#arrowhead428)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead428" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-G LE-A" style="opacity: 1;" id="L-G-A"> 
      <path class="path" d="M150,98L154.16666666666666,98C158.33333333333334,98,166.66666666666666,98,175.55232375587445,100.8510567136186C184.43798084508228,103.7021134272372,193.87596169016456,109.40422685447442,198.59495211270567,112.25528356809302L203.3139425352468,115.10634028171162" marker-end="url(#arrowhead429)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead429" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-F" style="opacity: 1;" id="L-A-F"> 
      <path class="path" d="M203.3139425352468,138.89365971828838L198.59495211270567,141.744716431907C193.87596169016456,144.59577314552558,184.43798084508228,150.2978865727628,171.71899042254117,153.1489432863814C159,156,143,156,127,156C111,156,95,156,82.28100957745886,153.1489432863814C69.56201915491772,150.2978865727628,60.12403830983545,144.59577314552558,55.40504788729431,141.744716431907L50.686057464753176,138.89365971828838" marker-end="url(#arrowhead430)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead430" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-B" style="opacity: 1;" id="L-A-B"> 
      <path class="path" d="M233.28591269649903,106.42817460700194L239.57159391374918,93.85681217250162C245.85727513099937,81.28544973800129,258.4286375654997,56.14272486900065,272.71431878274984,43.57136243450032C287,31,303,31,319,31C335,31,351,31,363.1666666666667,31C375.3333333333333,31,383.6666666666667,31,387.8333333333333,31L392,31" marker-end="url(#arrowhead431)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead431" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-A LE-D" style="opacity: 1;" id="L-A-D"> 
      <path class="path" d="M246,127L250.16666666666666,127C254.33333333333334,127,262.6666666666667,127,271,127C279.3333333333333,127,287.6666666666667,127,291.8333333333333,127L296,127" marker-end="url(#arrowhead432)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead432" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M438,31L442.1666666666667,31C446.3333333333333,31,454.6666666666667,31,465.1190145505835,43.57136243450032C475.5713624345003,56.14272486900065,488.14272486900063,81.28544973800129,494.4284060862508,93.85681217250162L500.71408730350095,106.42817460700194" marker-end="url(#arrowhead433)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead433" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-A" style="opacity: 1;" id="L-C-A"> 
      <path class="path" d="M496.3359425772128,144.71906938586787L490.7799521476773,151.43255782155657C485.2239617181419,158.14604625724525,474.1119808590709,171.57302312862262,460.5559904295355,178.28651156431133C447,185,431,185,415,185C399,185,383,185,367,185C351,185,335,185,319,185C303,185,287,185,273.4440095704645,178.28651156431133C259.8880191409291,171.57302312862262,248.77603828185815,158.14604625724525,243.22004785232266,151.43255782155657L237.6640574227872,144.71906938586787" marker-end="url(#arrowhead434)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead434" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-E" style="opacity: 1;" id="L-D-E"> 
      <path class="path" d="M342,127L346.1666666666667,127C350.3333333333333,127,358.6666666666667,127,367,127C375.3333333333333,127,383.6666666666667,127,387.8333333333333,127L392,127" marker-end="url(#arrowhead435)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead435" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-E LE-C" style="opacity: 1;" id="L-E-C"> 
      <path class="path" d="M438,127L442.1666666666667,127C446.3333333333333,127,454.6666666666667,127,463,127C471.3333333333333,127,479.6666666666667,127,483.8333333333333,127L488,127" marker-end="url(#arrowhead436)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead436" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-F-G" class="edgeLabel L-LS-F' L-LE-G"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-G-A" class="edgeLabel L-LS-G' L-LE-A"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-F" class="edgeLabel L-LS-A' L-LE-F"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-D" class="edgeLabel L-LS-A' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-A" class="edgeLabel L-LS-C' L-LE-A"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-E" class="edgeLabel L-LS-D' L-LE-E"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-E-C" class="edgeLabel L-LS-E' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-F-290" transform="translate(31,127)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           6 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-G-291" transform="translate(127,98)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           7 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-A-293" transform="translate(223,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-297" transform="translate(415,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-299" transform="translate(319,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-301" transform="translate(511,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-E-305" transform="translate(415,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           5 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>对于上图的场景，6到7到1,1的dtime是3，然后到2到3,3的dtime是5，low[3] = 3，之后1遍历到4到5，此时通过3的low值更新5的low值的话，low[5] = 3，之后1开始遍历到下一个相邻节点6，通过6的low值更新了自己的low值为1。</p> 
<p>可以发现，此时图中强连通分量的最小的low值应该是1，而3和5的low值却还是3，这是不是也不符合low数组的定义呢？</p> 
<p>在j的low值后续会更新的场景下，即使通过j的low值去更新u的low值，u的low也不能保证是真正的low值，因为j的low值后续可能会被更新到更小。因此，<strong>写成low[u] = min(low[u], low[j]);low数组的定义会被破坏</strong>，而且我们无法找到一个合适的定义去修正此时low的定义。</p> 
<p><strong>实际上low数组并不需要表示节点通过backward边能够到达节点的最小的dtime值。只需要保证强连通分量里除了dtime最小节点外，其它节点的low值比dtime值小即可</strong>。我们只需要考虑low值小于dtime值就可以更新跨边的low值，至于用low表示节点能够到达节点的最小dtime，只是为了方便找出强连通分量里有哪些节点，但是tarjan算法里强连通分量的点都会保存在栈中，以致于low的具体值并没有那么重要了，这也是为什么不管用j的dtime还是low去更新u的low值都不会影响算法的正确性。</p> 
<p>那么为什么最后还是选择通过dtime值去更新呢？因为low[u] = min(low[u], dtime[j]);会使得low数组有个准确的定义。尽管此时low数组无法表示节点通过backward边可以到达节点的最小dtime值，却可以表示节点通过backward边后能够到达的dtime值或者是通过cross边后能够到达的被backward边更新过low值节点的dtime值。这才是tarjan算法中low数组真正的含义。</p> 
<h3><a id="2_235"></a>2、受欢迎的牛</h3> 
<p>下面开始分析本题的求解思路。</p> 
<p>题目要找出除自己外受其他所有牛欢迎的牛的数量，也就是在图中找出其它节点都可以到达节点的数量。如果这张图是DAG，那么如果图里只有一个出度为0的节点，这个节点就是所要求的点；如果有两个出度为0的节点，那么就没有符合要求的点。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-dcfowfmlU1ZLBHKi" width="100%" xmlns="http://www.w3.org/2000/svg" height="62" style="max-width: 254px;" viewbox="0 0 254 62"> 
  <style>#mermaid-svg-dcfowfmlU1ZLBHKi {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .error-icon{fill:#552222;}#mermaid-svg-dcfowfmlU1ZLBHKi .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-dcfowfmlU1ZLBHKi .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-dcfowfmlU1ZLBHKi .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-dcfowfmlU1ZLBHKi .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-dcfowfmlU1ZLBHKi .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-dcfowfmlU1ZLBHKi .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-dcfowfmlU1ZLBHKi .marker{fill:#333333;stroke:#333333;}#mermaid-svg-dcfowfmlU1ZLBHKi .marker.cross{stroke:#333333;}#mermaid-svg-dcfowfmlU1ZLBHKi svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-dcfowfmlU1ZLBHKi .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .cluster-label text{fill:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .cluster-label span{color:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .label text,#mermaid-svg-dcfowfmlU1ZLBHKi span{fill:#333;color:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .node rect,#mermaid-svg-dcfowfmlU1ZLBHKi .node circle,#mermaid-svg-dcfowfmlU1ZLBHKi .node ellipse,#mermaid-svg-dcfowfmlU1ZLBHKi .node polygon,#mermaid-svg-dcfowfmlU1ZLBHKi .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-dcfowfmlU1ZLBHKi .node .label{text-align:center;}#mermaid-svg-dcfowfmlU1ZLBHKi .node.clickable{cursor:pointer;}#mermaid-svg-dcfowfmlU1ZLBHKi .arrowheadPath{fill:#333333;}#mermaid-svg-dcfowfmlU1ZLBHKi .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-dcfowfmlU1ZLBHKi .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-dcfowfmlU1ZLBHKi .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-dcfowfmlU1ZLBHKi .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-dcfowfmlU1ZLBHKi .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-dcfowfmlU1ZLBHKi .cluster text{fill:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi .cluster span{color:#333;}#mermaid-svg-dcfowfmlU1ZLBHKi div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-dcfowfmlU1ZLBHKi :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M54,31L58.166666666666664,31C62.333333333333336,31,70.66666666666667,31,79,31C87.33333333333333,31,95.66666666666667,31,99.83333333333333,31L104,31" marker-end="url(#arrowhead448)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead448" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M150,31L154.16666666666666,31C158.33333333333334,31,166.66666666666666,31,175,31C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead449)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead449" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-312" transform="translate(31,31)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-313" transform="translate(127,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-315" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>像上图这样出度为0的节点只有3，所以3就是最受欢迎的牛。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-Vj0lNZqnrIJx6Qan" width="100%" xmlns="http://www.w3.org/2000/svg" height="158" style="max-width: 254px;" viewbox="0 0 254 158"> 
  <style>#mermaid-svg-Vj0lNZqnrIJx6Qan {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .error-icon{fill:#552222;}#mermaid-svg-Vj0lNZqnrIJx6Qan .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-Vj0lNZqnrIJx6Qan .marker{fill:#333333;stroke:#333333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .marker.cross{stroke:#333333;}#mermaid-svg-Vj0lNZqnrIJx6Qan svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .cluster-label text{fill:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .cluster-label span{color:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .label text,#mermaid-svg-Vj0lNZqnrIJx6Qan span{fill:#333;color:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .node rect,#mermaid-svg-Vj0lNZqnrIJx6Qan .node circle,#mermaid-svg-Vj0lNZqnrIJx6Qan .node ellipse,#mermaid-svg-Vj0lNZqnrIJx6Qan .node polygon,#mermaid-svg-Vj0lNZqnrIJx6Qan .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .node .label{text-align:center;}#mermaid-svg-Vj0lNZqnrIJx6Qan .node.clickable{cursor:pointer;}#mermaid-svg-Vj0lNZqnrIJx6Qan .arrowheadPath{fill:#333333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-Vj0lNZqnrIJx6Qan .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-Vj0lNZqnrIJx6Qan .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-Vj0lNZqnrIJx6Qan .cluster text{fill:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan .cluster span{color:#333;}#mermaid-svg-Vj0lNZqnrIJx6Qan div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-Vj0lNZqnrIJx6Qan :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M54,79L58.166666666666664,79C62.333333333333336,79,70.66666666666667,79,79,79C87.33333333333333,79,95.66666666666667,79,99.83333333333333,79L104,79" marker-end="url(#arrowhead462)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead462" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M143.26345596729058,62.7365440327094L148.55287997274215,57.44712002725783C153.8423039781937,52.15769602180627,164.42115198909687,41.57884801090314,173.8772426612151,36.289424005451565C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead463)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead463" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-D" style="opacity: 1;" id="L-B-D"> 
      <path class="path" d="M143.26345596729058,95.2634559672906L148.55287997274215,100.55287997274218C153.8423039781937,105.84230397819374,164.42115198909687,116.42115198909687,173.8772426612151,121.71057599454844C183.33333333333334,127,191.66666666666666,127,195.83333333333334,127L200,127" marker-end="url(#arrowhead464)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead464" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-D" class="edgeLabel L-LS-B' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-322" transform="translate(31,79)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-323" transform="translate(127,79)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-325" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-327" transform="translate(223,127)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>而向这样的出度为0的点不止一个，那么就没有每个节点都可以到达的节点了，因为3和4是彼此不可达的。<br> 对于含有环的图而言，则需要进行缩点，转化为DAG进行求解。</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-HqTr6q74z3TgIEBm" width="100%" xmlns="http://www.w3.org/2000/svg" height="97" style="max-width: 350px;" viewbox="0 0 350 97"> 
  <style>#mermaid-svg-HqTr6q74z3TgIEBm {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .error-icon{fill:#552222;}#mermaid-svg-HqTr6q74z3TgIEBm .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-HqTr6q74z3TgIEBm .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-HqTr6q74z3TgIEBm .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-HqTr6q74z3TgIEBm .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-HqTr6q74z3TgIEBm .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-HqTr6q74z3TgIEBm .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-HqTr6q74z3TgIEBm .marker{fill:#333333;stroke:#333333;}#mermaid-svg-HqTr6q74z3TgIEBm .marker.cross{stroke:#333333;}#mermaid-svg-HqTr6q74z3TgIEBm svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-HqTr6q74z3TgIEBm .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .cluster-label text{fill:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .cluster-label span{color:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .label text,#mermaid-svg-HqTr6q74z3TgIEBm span{fill:#333;color:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .node rect,#mermaid-svg-HqTr6q74z3TgIEBm .node circle,#mermaid-svg-HqTr6q74z3TgIEBm .node ellipse,#mermaid-svg-HqTr6q74z3TgIEBm .node polygon,#mermaid-svg-HqTr6q74z3TgIEBm .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-HqTr6q74z3TgIEBm .node .label{text-align:center;}#mermaid-svg-HqTr6q74z3TgIEBm .node.clickable{cursor:pointer;}#mermaid-svg-HqTr6q74z3TgIEBm .arrowheadPath{fill:#333333;}#mermaid-svg-HqTr6q74z3TgIEBm .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-HqTr6q74z3TgIEBm .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-HqTr6q74z3TgIEBm .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-HqTr6q74z3TgIEBm .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-HqTr6q74z3TgIEBm .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-HqTr6q74z3TgIEBm .cluster text{fill:#333;}#mermaid-svg-HqTr6q74z3TgIEBm .cluster span{color:#333;}#mermaid-svg-HqTr6q74z3TgIEBm div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-HqTr6q74z3TgIEBm :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M54,60L58.166666666666664,60C62.333333333333336,60,70.66666666666667,60,79,60C87.33333333333333,60,95.66666666666667,60,99.83333333333333,60L104,60" marker-end="url(#arrowhead485)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead485" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-C" style="opacity: 1;" id="L-B-C"> 
      <path class="path" d="M146.6860574647532,48.106340281711624L151.40504788729433,45.25528356809301C156.12403830983547,42.404226854474416,165.56201915491772,36.70211342723721,174.44767624412552,33.851056713618604C183.33333333333334,31,191.66666666666666,31,195.83333333333334,31L200,31" marker-end="url(#arrowhead486)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead486" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-C LE-D" style="opacity: 1;" id="L-C-D"> 
      <path class="path" d="M246,31L250.16666666666666,31C254.33333333333334,31,262.6666666666667,31,271.5523237558745,33.851056713618604C280.4379808450823,36.70211342723721,289.87596169016456,42.404226854474416,294.5949521127057,45.25528356809301L299.31394253524684,48.106340281711624" marker-end="url(#arrowhead487)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead487" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-D LE-B" style="opacity: 1;" id="L-D-B"> 
      <path class="path" d="M299.31394253524684,71.89365971828838L294.5949521127057,74.74471643190698C289.87596169016456,77.59577314552558,280.4379808450823,83.29788657276279,267.71899042254114,86.1489432863814C255,89,239,89,223,89C207,89,191,89,178.2810095774589,86.1489432863814C165.56201915491772,83.29788657276279,156.12403830983547,77.59577314552558,151.40504788729433,74.74471643190698L146.6860574647532,71.89365971828838" marker-end="url(#arrowhead488)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead488" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-C" class="edgeLabel L-LS-B' L-LE-C"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-C-D" class="edgeLabel L-LS-C' L-LE-D"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-D-B" class="edgeLabel L-LS-D' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-336" transform="translate(31,60)" style="opacity: 1;"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           1 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-337" transform="translate(127,60)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           2 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-C-339" transform="translate(223,31)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           3 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-D-341" transform="translate(319,60)"> 
      <circle x="-14.197916984558105" y="-23" r="23" class="label-container"></circle> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-4.1979169845581055,-13)"> 
        <foreignobject width="8.395833969116211" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           4 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>比如上图，2，3，4构成了一个强连通分量，将它们缩到节点2，得到了一个1到2的DAG，此时2的出度是0，而构成2的强连通分量由3个节点构成，那么最受欢迎的牛就是3头。</p> 
<p>由于本题只需要求受欢迎的牛的数目，所以并不需要真的进行缩点，只需要记录下每个节点属于哪个强连通分量，以及每个强连通分量包含节点的数目。</p> 
<p>总的代码如下：</p> 
<pre><code class="prism language-C++">#include &lt;algorithm&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;
const int N = 10005, M = 50005;
int idx,h[N],e[M],ne[M];
int dtime[N],low[N];
int stk[N],id[N],scc_size[N];
int outd[N];
int t = 0, top = 0, scc_cnt = 0;
bool in_stk[N];
void add(int a,int b) {
    e[idx] = b,ne[idx] = h[a],h[a] = idx++;
}
void tarjan(int u) {
    dtime[u] = low[u] = ++t;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u];~i;i = ne[i]) {
        int j = e[i];
        if(!dtime[j]) { //Tree
            tarjan(j);
            low[u] = min(low[u], low[j]);
        } else if(in_stk[j]) { //backward or cross which has ever passed backward
            low[u] = min(low[u], dtime[j]);
        }
    }
    if (low[u] == dtime[u]) {//visited and u is the lowest node
        scc_cnt++; //the num of SCC
        int y;
        do {
            y = stk[top--];
            id[y] = scc_cnt;
            scc_size[scc_cnt]++;
            in_stk[y] = false;
        } while(y != u);
    }
}
int main() {
    memset(h, -1, sizeof h);
    int n, m, a, b;
    scanf("%d%d",&amp;n,&amp;m);
    for(int i = 0;i &lt; m;i++) {
        scanf("%d%d",&amp;a,&amp;b);
        add(a, b);
    }
    for(int i = 1;i &lt;= n;i++) {
        if(!dtime[i]) { //undiscovered
            tarjan(i);
        }
    }
    for(int i = 1;i &lt;= n;i++) {
        for(int j = h[i];~j;j = ne[j]) {
            int k = e[j];
            if(id[i] != id[k]) {
                outd[id[i]]++; //count the outdegree of SCC
            }
        }
    }
    int cnt = 0, ans = 0;
    for(int i = 1;i &lt;= scc_cnt; i++) {
        if(!outd[i]) {
            cnt++;
            if(cnt &gt; 1) {
                ans = 0;
                break;
            }
            ans += scc_size[i];
        }
    }
    printf("%d\n",ans);
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/879b682d55d91741659f4a4c107b3ca1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">（图解）循环队列的三种判断队空、队满操作（附带源码和插入删除操作等一些基本操作）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/da8066bb7c6769bdfc2d1711f56c08ea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Centos7离线安装mysql5.7</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>