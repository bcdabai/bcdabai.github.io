<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring-Boot框架 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring-Boot框架" />
<meta property="og:description" content="1. spring boot 简介 Spring Boot 是由 Pivotal 团队提供的全新框架。Spring Boot 是所有基于 Spring Framework 5.0 开发的项目的起点。Spring Boot 的设计是为了让你尽可能快的跑起来 Spring 应用程序并且尽可能减少你的配置文件。
1.1 springboot的好处 ①　创建独立的 Spring 应用程序
②　嵌入的 Tomcat，无需部署 WAR 文件
③　简化 Maven 配置
④　自动配置 Spring
⑤　开箱即用，没有代码生成，也无需 XML 配置。
1.2 spring boot 快速入门 （1）JDK 环境必须是 1.8 及以上，传送门：jdk1.8.191 下载
（2）后面要使用到 Maven 管理工具 3.2.5 及以上版本.
（3）开发工具建议使用 IDEA
创建步骤
默认springboot扫描的包为主启动类所在的包以及子包。
测试：
@RestController public class Hello { @GetMapping(&#34;/hello&#34;) public Map&lt;String ,Object&gt; hello(){ Map&lt;String,Object&gt; map=new HashMap&lt;&gt;(); map." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e0d8ae18abcf3dd5b16ff6d197ea29a5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-25T08:41:55+08:00" />
<meta property="article:modified_time" content="2022-07-25T08:41:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring-Boot框架</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. spring boot 简介</h2> 
<p>Spring Boot 是由 Pivotal 团队提供的全新框架。Spring Boot 是所有基于 Spring Framework 5.0 开发的项目的起点。Spring Boot 的设计是为了让你尽可能快的跑起来 Spring 应用程序并且尽可能减少你的配置文件。</p> 
<h3>1.1 springboot的好处</h3> 
<p>①　创建独立的 Spring 应用程序<br> ②　嵌入的 Tomcat，无需部署 WAR 文件<br> ③　简化 Maven 配置<br> ④　自动配置 Spring<br> ⑤　开箱即用，没有代码生成，也无需 XML 配置。</p> 
<h3>1.2 spring boot 快速入门</h3> 
<p>（1）JDK 环境必须是 1.8 及以上，传送门：jdk1.8.191 下载<br> （2）后面要使用到 Maven 管理工具 3.2.5 及以上版本.<br> （3）开发工具建议使用 IDEA</p> 
<p style="text-align:center;">创建步骤<img alt="" src="https://images2.imgbox.com/99/f3/BLYFDyZk_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8e/0c/DcH2x7Dm_o.png"> <img alt="" height="416" src="https://images2.imgbox.com/f1/96/rJh7xcgH_o.png" width="1200"></p> 
<p> <img alt="" height="301" src="https://images2.imgbox.com/0a/24/6HfcWRHX_o.png" width="561"></p> 
<p> 默认springboot扫描的包为主启动类所在的包以及子包。</p> 
<p>测试：</p> 
<pre><code class="language-java">@RestController
public class Hello {
   @GetMapping("/hello")
    public Map&lt;String ,Object&gt; hello(){
        Map&lt;String,Object&gt; map=new HashMap&lt;&gt;();
        map.put("name","wang");
        return map;
    }
}
</code></pre> 
<p> 运行程序</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/b2/c5/3qWtBLsl_o.png" width="356"></p> 
<h3> 1.3 springboot的配置文件</h3> 
<p> 第一种： properties属性文件</p> 
<p>  # 修改springboot中tomcat端口号.<br>     server.port=8888</p> 
<p>第二种:  yml文件<br>     server:<br>     port: 6666</p> 
<p>不管是哪种，他们的名字必须以application开始。<br> 如果两个配置文件同时存在，而且有些内容一样。按照properties的优先级高。<br> 如果有些不一样，两个配置文件不一样的会合并在一起。</p> 
<h4>yml文件的语法</h4> 
<pre><code class="language-XML">student:
  id: 1
  name: xiaoming
  age: ${a.age}
  hobby:
    - LOL
    - DNF
    - CF
    - LOL
  lists:
    - LOL
    - DNF
  maps:
    k1: v1
    k2: v2
  sets:
    - LOL
    - DNF
    - CF
    - LOL
  birth: 2019/12/12
a:
  age: ${random.int(1,100)}</code></pre> 
<p>Properties 没有层级关系 使用=赋值</p> 
<p>yml 有层级关系 使用: 赋值</p> 
<p>两种语法的配置是互补的</p> 
<p>读取springboot配置文件中的内容</p> 
<p>在application.properties中写入</p> 
<pre><code class="language-java">student.name=zs
student.age=18
student.hobby[0]=sing
student.hobby[1]=swimming
student.map.clazz=qy151</code></pre> 
<p>创建实体类 将读取application.properties配置文件中的值并赋值给Student类中的属性</p> 
<pre><code class="language-java">@Data
@Component //该类对象的创建和销毁都有spring容器来管理
@ConfigurationProperties(prefix = "student") //读取springboot中的配置内容,读取以前缀为student
public class Student {
    String name;
    String age;
    String[] hobby;
    Map&lt;String,Object&gt; map;
}</code></pre> 
<p> <img alt="" height="339" src="https://images2.imgbox.com/b7/3b/XsjHVksE_o.png" width="435"></p> 
<p></p> 
<p>读取application.yml配置文件中的值并赋值给Student类中的属性</p> 
<pre><code class="language-java">server:
  port: 8082

student:
  name: zs
  age: 18
  hobby:
    - sing
    - dance
    - rap
    - basketball
  map:
    clazz: qy151</code></pre> 
<p> <img alt="" height="427" src="https://images2.imgbox.com/75/34/5Tw3hemc_o.png" width="669"></p> 
<p></p> 
<p>@Value 只能放在我们的类属性上。而且它只能读取基本类型和字符串类型。</p> 
<p><img alt="" height="677" src="https://images2.imgbox.com/e7/3f/FyM4WJVU_o.png" width="947"></p> 
<p></p> 
<h3>1.4 profiles配置详解</h3> 
<p>为什么要使用profiles?</p> 
<p>在开发中，一般有两种环境<br>     1，生产环境  [项目上线，客户在使用中，就是生产环境]<br>     2，开发环境[就是开发环境，不解释]<br>     有时候开发环境和生产环境的配置方法是不一样的，那么如何快速的切换呢，这里就要使用profiles文件</p> 
<p>使用方法</p> 
<p>1，创建applicatin-developer.properties<br>  <br> server.port=8081<br> 2，创建applicatin-product.properties<br>  <br> server.port=8082<br> 3，修改application.properties<br>  <br> #server.port=8080<br> spring.profiles.active=developer<br> 4. 测试<br> 5，总结<br> 在application.properteis里面激活哪个文件就会使用哪个端口</p> 
<h2>2. WEB三大组件的注册</h2> 
<p>web的三个组件: Servlet和Filter以及Linstener监听器。</p> 
<h3>2.1 注册Servlet</h3> 
<p>创建Servlet</p> 
<pre><code class="language-java">public class MyServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("这时自己定义的servlet~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    }
}</code></pre> 
<p>配置类</p> 
<pre><code class="language-java">@Configuration //该类为配置类 xml文件
public class MyConfig {

    @Bean  //理解为配置文件中&lt;bean &gt;
    public ServletRegistrationBean&lt;Servlet&gt; registrationBean(){
        //创建一个Servlet注册器.
         ServletRegistrationBean&lt;Servlet&gt; registrationBean=new ServletRegistrationBean&lt;&gt;();
         registrationBean.setName("my");
         registrationBean.setServlet(new MyServlet());
         registrationBean.addUrlMappings("/my");
         return registrationBean;
    }

  }</code></pre> 
<h3>2.2 注册Filter</h3> 
<p>创建Filter</p> 
<pre><code class="language-java">public class MyFilter implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        System.out.println("经过了过滤器");
        filterChain.doFilter(servletRequest,servletResponse);
    }
}</code></pre> 
<p>配置类</p> 
<pre><code class="language-java">@Configuration //该类为配置类 xml文件
public class MyConfig {
    @Bean
    public FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean(){
          FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean=new FilterRegistrationBean&lt;&gt;();
          filterRegistrationBean.setName("myfilter");
          filterRegistrationBean.setFilter(new MyFilter());
          filterRegistrationBean.addUrlPatterns("/*");
          return filterRegistrationBean;
    }
}
</code></pre> 
<h2>3. springboot自动装配</h2> 
<p>自动装配在SpringBoot是基于EnableAutoConfiguration来实现的。springboot的自动装配启动类上的注解@SpringBootApplication有关</p> 
<p>spring boot自动装配原理</p> 
<p>注解@EnableAutoConfiguraction，@Configuration，@ConditionalOnClass 就是⾃动配置 的核⼼，⾸先它得是⼀个配置⽂件，其次根 据类路径下是否有这个类取⾃动配置。<img alt="" src="https://images2.imgbox.com/ee/b4/rZLfTbEI_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0b/6d/Ea1P1LAq_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cd/99/umS8XYwV_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9b/66/49m905H6_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/c5/FQJqd3vF_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/37/d9/HGZikuwO_o.png"> <img alt="" height="711" src="https://images2.imgbox.com/7a/a0/CDeLqkFx_o.png" width="1200"></p> 
<p></p> 
<h2>4. springboot整合数据源</h2> 
<h3>4.1 整合数据源</h3> 
<p>数据源即数据库中的数据，也就是springboot连接数据库 默认数据源使用的连接池Hikari。如果不想使用默认的连接池，我们可以引入第三方的连接池。如druid<br> （1）导入依赖</p> 
<pre><code class="language-XML">&lt;!--加入数据源的启动依赖: springboot启动时会加载对应的自动装配类。--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;repMaven.org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
            &lt;version&gt;2.6.7&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<p> （2）配置数据源信息—application.properties</p> 
<pre><code class="language-XML">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/mydb?serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=123456
</code></pre> 
<p> （3）单元测试</p> 
<pre><code class="language-java">@SpringBootTest
class ApplicationTests {

    @Autowired
    private DataSource dataSource;

    @Test
    void contextLoads() throws SQLException {
        System.out.println(dataSource.getConnection());
    }
}</code></pre> 
<h3>4.2  集成druid数据源</h3> 
<p>（1）引入依赖</p> 
<pre><code class="language-XML">	   &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.2.8&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p> （2）配置文件</p> 
<pre><code>spring.datasource.druid.url=jdbc:mysql://localhost:3306/mydb?serverTimezone=Asia/Shanghai
spring.datasource.druid.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.druid.username=root
spring.datasource.druid.password=123456
#初始化的个数
spring.datasource.druid.initial-size=5
# 最大活跃数
spring.datasource.druid.max-active=10
# 最大等待时间
spring.datasource.druid.max-wait=3000
# 最小的闲置个数
spring.datasource.druid.min-idle=5</code></pre> 
<p>（3）测试</p> 
<pre><code class="language-java"> @Test
    void test01() {
        System.out.println(dataSource);
    }</code></pre> 
<h2>5. springboot整合mybatis</h2> 
<p>(1)引入依赖</p> 
<pre><code class="language-XML">
	&lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;2.2.2&lt;/version&gt;
    &lt;/dependency&gt;</code></pre> 
<p>（2）修改配置文件</p> 
<pre><code class="language-XML">#指定映射文件的路径
mybatis.mapper-locations=classpath:mapper/*.xml</code></pre> 
<p>（3）创建数据</p> 
<p>  (1)创建实体类</p> 
<pre><code class="language-java">@Data
public class Dept {
    private Integer id;
    private String name;
    private String address;
}</code></pre> 
<p>（2）在dao层中写一个简单得查询接口</p> 
<pre><code class="language-java">@Mapper
@Component
public interface DeptDao {
    Dept findById (Integer id);
    List&lt;Dept&gt; findAll();
}
</code></pre> 
<p>（3）在mapper层中写查询语句</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.example.dao.DeptDao"&gt;
    &lt;select id="findById" resultType="com.example.entity.Dept"&gt;
                select * from tb_dept where id=#{id}
    &lt;/select&gt;
    &lt;select id="findAll" resultType="com.example.entity.Dept"&gt;
        select * from tb_dept
    &lt;/select&gt;

&lt;/mapper&gt;</code></pre> 
<p>（4）在主启动类上加入注解</p> 
<pre><code class="language-java">@SpringBootApplication
@MapperScan(basePackages = "com.example.dao") //为指定包下的接口生成代理实现类
public class DemoApplication {
    public static void main(String[] args) {
      SpringApplication.run(DemoApplication.class,args);
    }

}
</code></pre> 
<p>（5） 测试</p> 
<pre><code class="language-java"> @Autowired
    private DeptDao deptDao;
    @Test
    void test02(){
        System.out.println(deptDao.findById(4));
    }</code></pre> 
<h2>6. springboot整合PageHelper分页插件</h2> 
<p>（1）引入依赖</p> 
<pre><code class="language-XML">	&lt;dependency&gt;
            &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
            &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.4.2&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p>(2) 测试</p> 
<pre><code class="language-java"> @Autowired
    private DeptDao deptDao;
    @Test
    void test03() {
        PageHelper.startPage(1,10);
        List&lt;Dept&gt; list = deptDao.findAll();
        PageInfo&lt;Dept&gt; pageInfo = new PageInfo&lt;&gt;(list);
        System.out.println("当前页数"+pageInfo.getPageNum());
        System.out.println("当前总页码"+pageInfo.getPages());
        System.out.println("总条数"+pageInfo.getTotal());
        System.out.println("当前页码的纪录"+pageInfo.getList());
    }</code></pre> 
<h2>7. springboot整合swagger</h2> 
<p>swagger它是一个接口文档----用来前后端分离的一款文档。</p> 
<p>swagger通过注解表明该接口会生成文档，包括接口名、请求方法、参数、返回信息的等等。<br>      @Api：修饰整个类，描述Controller的作用<br>     @ApiOperation：描述一个类的一个方法，或者说一个接口<br>     @ApiParam：单个参数描述<br>     @ApiModel：用对象来接收参数<br>     @ApiModelProperty：用对象接收参数时，描述对象的一个字段<br>     @ApiImplicitParam：一个请求参数<br>     @ApiImplicitParams：多个请求参数</p> 
<p>（1）引入依赖</p> 
<pre><code class="language-XML">	&lt;dependency&gt;
            &lt;groupId&gt;com.spring4all&lt;/groupId&gt;
            &lt;artifactId&gt;swagger-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;1.9.1.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;
            &lt;artifactId&gt;swagger-bootstrap-ui&lt;/artifactId&gt;
            &lt;version&gt;1.7.8&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre> 
<p>（2）创建swagger配置类</p> 
<pre><code class="language-java">
@Configuration
public class SwaggerConfig {

    @Bean //swagger中所有的功能都封装再Docket类中。
    public Docket docket() {
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())//设置api文档信息
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.example.demo.controller")) //指定为哪些包下的类生成接口文档。
                .build()
                ;

        return docket;
    }

    //定义自己接口文档信息
    private ApiInfo apiInfo() {
        Contact DEFAULT_CONTACT = new Contact("名称", "www.baidu.com", "www.baidu.com");
        ApiInfo apiInfo = new ApiInfo("CRUD", "对tb_dept表进行增删改查", "3.0T", "www.baidu.com",
                DEFAULT_CONTACT, "AAA", "www.baidu.com", new ArrayList&lt;VendorExtension&gt;());

        return apiInfo;
    }
}
</code></pre> 
<p> （3）在主启动类中开启swagger注解</p> 
<p><img alt="" src="https://images2.imgbox.com/46/57/Gq2Bs0pz_o.png"></p> 
<p>（4）访问</p> 
<p>第一种: <a href="http://localhost:8081/swagger-ui.html" rel="nofollow" title="http://localhost:8081/swagger-ui.html">http://localhost:8081/swagger-ui.html</a></p> 
<p>第二种: <a href="http://localhost:8081/doc.html" rel="nofollow" title="http://localhost:8081/doc.html">http://localhost:8081/doc.html</a></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0ec0e0a24409ccb0480ee72777a58ff1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">k8s部署metrics server资源监控及日志查看</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db52b4ee659489ecc0f16d7d9eb8b72c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PLSQL查询结果中文显示乱码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>