<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScript setTimeout和setInterval的用法与区别详解 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaScript setTimeout和setInterval的用法与区别详解" />
<meta property="og:description" content="目录
I. 总述
II. setTimeout()函数
III. setInterval()函数
IV. 新年倒计时案例
Javascript的setTimeOut和setInterval函数应用非常广泛，它们都用来处理延时和定时任务，下面这篇文章主要给大家介绍了关于JavaScript setTimeout和setInterval的用法与区别，如果大家有需要可以参考下。
I. 总述 首先，setTimeout()和setInterval()函数是JavaScript中两个很重要的关于&#34;时间的函数&#34;，因此，我们在学习JavaScript的过程中，一定要对这两个函数有一个深入的学习，它们两个函数也是经常被使用的！
其中，如果分别用一句话来概括这两个函数，那么应该是这样的：
setTimeout(): 该函数能够按照设定的时间值延迟执行其中的事件。
setInterval(): 该函数能够按照设定的时间值作为间隔，周期性的执行其中的时间。
当然了，只是简述，细节方面，我们在下面的部分给大家做讲解。
II. setTimeout()函数 首先是我们的setTimeout()函数，它的格式是怎么样的呢：
setTimeout(function,times, param1, param2, …);
setTimeout 是一个定时器函数，它允许我们在指定的时间后执行一次函数。其中，function 是我们要执行的函数，times 是延迟的时间（以毫秒为单位），param1, param2, … 等是传递给函数的参数（可选）。例如我们看这段简单的代码：
setTimeout(function(){ alert(&#34;hello,setTimeout()&#34;); }, 1000); 运行之后，它会在1s的延迟之后，弹出一个弹框，其中，1000的单位是毫秒！
学到这里，大家觉得很简单，对吗？好的，那我给一段代码，大家猜一下它会输出什么：
for (var i = 1; i &lt;= 5; i&#43;&#43;) { setTimeout(function () { alert(i) }, 1000) } 哎，有人要说了，简单啊，这不是输出：1 2 3 4 5 吗？
然而实际上，它输出了6 6 6 6 6，所以这是为什么呢？因为setTimeout()是一个异步执行函数，说人话就是，它里面的函数体，并不会在每一次执行的时候立刻运行，而是会丢进执行队列中，等待&#34;主线任务&#34;全部完成，才会执行它。
于是在5次for循环后，i的值是5，传进去，弹出了6个6。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/da36b7de38f87cf7125a9e179fb49321/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-01T09:15:00+08:00" />
<meta property="article:modified_time" content="2024-01-01T09:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaScript setTimeout和setInterval的用法与区别详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="I.%20%E6%80%BB%E8%BF%B0-toc" style="margin-left:40px;"><a href="#I.%20%E6%80%BB%E8%BF%B0" rel="nofollow">I. 总述</a></p> 
<p id="II.%20setTimeout()%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#II.%20setTimeout%28%29%E5%87%BD%E6%95%B0" rel="nofollow">II. setTimeout()函数</a></p> 
<p id="III.%20setInterval()%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#III.%20setInterval%28%29%E5%87%BD%E6%95%B0" rel="nofollow">III. setInterval()函数</a></p> 
<p id="IV.%20%E6%96%B0%E5%B9%B4%E5%80%92%E8%AE%A1%E6%97%B6%E6%A1%88%E4%BE%8B-toc" style="margin-left:40px;"><a href="#IV.%20%E6%96%B0%E5%B9%B4%E5%80%92%E8%AE%A1%E6%97%B6%E6%A1%88%E4%BE%8B" rel="nofollow">IV. 新年倒计时案例</a></p> 
<hr id="hr-toc"> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/21/FB2sgwuW_o.jpg"><img alt="" src="https://images2.imgbox.com/ff/72/w4n08ZZC_o.gif"></p> 
<blockquote> 
 <p>Javascript的setTimeOut和setInterval函数应用非常广泛，它们都用来处理延时和定时任务，下面这篇文章主要给大家介绍了关于JavaScript setTimeout和setInterval的用法与区别，如果大家有需要可以参考下。</p> 
</blockquote> 
<p><a name="_label0"></a></p> 
<h3 id="I.%20%E6%80%BB%E8%BF%B0">I. 总述</h3> 
<p>首先，<strong>setTimeout()和setInterval()函数是JavaScript中两个很重要的关于"时间的函数"</strong>，因此，我们在学习JavaScript的过程中，一定要对这两个函数有一个深入的学习，它们两个函数也是经常被使用的！</p> 
<p> 其中，如果分别<strong>用一句话来概括这两个函数</strong>，那么应该是这样的：</p> 
<blockquote> 
 <p><strong>setTimeout(): 该函数能够按照设定的时间值延迟执行其中的事件。</strong></p> 
 <p><strong>setInterval(): 该函数能够按照设定的时间值作为间隔，周期性的执行其中的时间。</strong></p> 
</blockquote> 
<p>当然了，只是简述，细节方面，我们在下面的部分给大家做讲解。</p> 
<p><a name="_label1"></a></p> 
<h3 id="II.%20setTimeout()%E5%87%BD%E6%95%B0">II. setTimeout()函数</h3> 
<p>首先是我们的<strong>setTimeout()函数</strong>，它的格式是怎么样的呢：</p> 
<blockquote> 
 <p><strong>setTimeout(function,times, param1, param2, …);</strong></p> 
</blockquote> 
<p>setTimeout 是一个定时器函数，它允许我们在指定的时间后执行一次函数。其中，<strong>function</strong> 是我们要执行的函数，<strong>times</strong> 是延迟的时间（以毫秒为单位），p<strong>aram1, param2, …</strong> 等是传递给函数的参数（可选）。例如我们看这段简单的代码：</p> 
<pre><code class="language-javascript">setTimeout(function(){

    alert("hello,setTimeout()");

}, 1000);</code></pre> 
<p>运行之后，它会在1s的延迟之后，弹出一个弹框，其中，<strong>1000的单位是毫秒！</strong></p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/20/e8/pBtzCqtq_o.jpg"></p> 
<p>学到这里，大家觉得很简单，对吗？好的，那我<strong>给一段代码，大家猜一下它会输出什么</strong>：</p> 
<pre><code class="language-javascript">for (var i = 1; i &lt;= 5; i++) {
    setTimeout(function () {
        alert(i)
    }, 1000)
}</code></pre> 
<p>哎，有人要说了，简单啊，这不是<strong>输出：1 2 3 4 5 吗？</strong></p> 
<p>然而实际上，它<strong>输出了6 6 6 6 6，所以这是为什么呢？</strong>因为<strong>setTimeout()是一个异步执行函数</strong>，说人话就是，它<strong>里面的函数体，并不会在每一次执行的时候立刻运行，而是会丢进执行队列中，等待"主线任务"全部完成，才会执行它</strong>。</p> 
<blockquote> 
 <p><strong>于是在5次for循环后，i的值是5，传进去，弹出了6个6。</strong></p> 
</blockquote> 
<p>那么有没有解法呢？我给大家两种解法：</p> 
<p>1️⃣ <strong>使用关键字let：</strong></p> 
<pre><code class="language-javascript">for (let i = 1; i &lt;= 5; i++) {
   setTimeout(function () { 
       alert(i);
   }, 1000)
}</code></pre> 
<p>执行结果：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/85/b6/NDTfWSUB_o.gif"></p> 
<p><strong>那为啥使用let就可以了呢：</strong></p> 
<p>其实<strong>使用let之后，也没有改变执行机制</strong>，<strong>仍然是最后执行的alert()</strong>，<strong>但是let可以在每一次把更新的变量i传进函数体内</strong>，也就是<strong>每一次的i加1之后，会把这个新值放进队列中对应的函数内</strong>，于是就解决了这个问题。</p> 
<p>2️⃣ <strong>定义一个外部变量：</strong></p> 
<p>我们在<strong>外部定义一个变量，这样这个变量每一次会被放入队列中</strong>，依旧不改变本身的执行机制：</p> 
<pre><code class="language-javascript">var j = 1;
for (i = 1; i &lt;= 5; i++) {
    setTimeout(function () {
        alert(j)
        j++;
    }, 1000);
}</code></pre> 
<p>第二种做法，更容易被别人看懂，也更适合做项目时实际使用。</p> 
<p><strong>注</strong>：setTimeout 返回一个唯一的标识符，我们可以使用 clearTimeout 函数来取消这个定时器。代码如下：</p> 
<pre><code class="language-javascript">// 延迟 1 秒后输出 "Hello, world!"
const timerId = setTimeout(() =&gt; {
  console.log("Hello, world!");
}, 1000);
// 取消定时器
clearTimeout(timerId);</code></pre> 
<blockquote> 
 <p>这段代码定义了一个 setTimeout 定时器，它会在 1 秒后执行一个函数，输出字符串 “Hello,world!”。同时，它会将返回的计时器 ID 存储在变量 timerId 中。 接下来的一行代码调用了 clearTimeout 函数，并传timerId。这个函数会取消之前设置的定时器，从而避免了执行函数的操作。因此，这段代码最终不会输出任何内容。</p> 
</blockquote> 
<p><a name="_label2"></a></p> 
<h3 id="III.%20setInterval()%E5%87%BD%E6%95%B0">III. setInterval()函数</h3> 
<p>setInterval() 也是JavaScript的一个定时器函数，用于设置周期性的定时任务，相较于 setTimeout函数，它就没那么复杂了，但是它的功能确实很强大的，我们先看看它的使用<strong>语法</strong>：</p> 
<blockquote> 
 <p>setInterval(function,times,param1, param2, …);</p> 
</blockquote> 
<p>同setTimeout()格式一致，其中，function参数表示要执行的函数，delay参数表示定时器的时间间隔（以毫秒为单位），param1, param2, …表示传递给函数的参数（可选）。setInterval()函数可以<strong>以设置的times为间隔来循环重复function</strong>，我们用一个小例子来测试一下：</p> 
<pre><code class="language-javascript">setInterval(function(){
    alert('hello,setInterval()');
}, 1000);</code></pre> 
<p>运行之后，每过1秒，就会弹出一个弹窗，显示这段话。</p> 
<p>那运行之后，我们想当然会有一个问题，那就是<strong>可不可以在某个特定的时机让它不再循环执行</strong>？答案是肯定滴，只不过我们<strong>需要定义一个setInterval()函数的对象</strong>，我们一般取名叫：<strong>timer</strong>：</p> 
<pre><code class="language-javascript">var i = 5;
var timer = setInterval(function(){  
    i --;   
    if(i &lt; 0){   
       clearInterval(timer);
    }    
    alert(i);     
 }, 1000);</code></pre> 
<p>上面的代码中，我们<strong>给setInterval创建了一个对象叫timer</strong>，在<strong>外部我们定义了另一个变量i</strong>，之后我们每一次执行Interval内的函数时，<strong>就让 i-1 </strong>，<strong>减到0以下，清除定时器</strong>：</p> 
<blockquote> 
 <p><strong>clearInterval(timer对象)；</strong></p> 
</blockquote> 
<p>上面这句话是<strong>清除定时器</strong>的代码，传入一个<strong>setInterval()函数的对象</strong>即可。</p> 
<p><strong>✔ 小结：setInterval（）和setTimeout（）的区别</strong></p> 
<p>setInterval() 和 setTimeout() 都是 JavaScript 中的定时器函数，但它们有以下几个区别：</p> 
<p><strong>1. </strong>setInterval() 在延迟指定时间后重复执行指定任务，直到被取消或页面关闭。而 setTimeout() 在延迟指定时间后执行指定任务，只执行一次；</p> 
<p><strong>2. </strong>setInterval() 的执行间隔时间是固定的，而 setTimeout() 可以动态调整延迟时间；</p> 
<p><strong>3. </strong>setInterval() 可能会存在累积性误差，因为它的执行时间是相对于上一次任务结束的时间计算的，如果执行的任务耗时超过了指定的时间间隔，就会出现累积性误差。而 setTimeout() 每次执行都是相对于上一次任务开始的时间计算的，不存在累积性误差；</p> 
<p><strong>4. </strong>setInterval() 可能会对性能产生影响，因为它会不断地重复执行指定任务，占用 CPU 资源。而 setTimeout() 只会在指定时间后执行一次任务，对性能影响较小。</p> 
<p>所以，一般情况下，<strong>如果</strong>我们需要周期性地执行指定任务，就可以使用 setInterval()；<strong>如果</strong>我们只需要在指定时间后执行一次任务，就可以使用 setTimeout()。</p> 
<p><strong>✔ 注意事项</strong></p> 
<p>使用setInterval()时要注意以下几点：</p> 
<p><strong>1.</strong> delay参数的最小值是4毫秒，如果设置的值小于4毫秒，则会被强制转换为4毫秒。</p> 
<p><strong>2.</strong> setInterval()返回一个定时器ID，可以使用clearInterval()函数来取消定时器。</p> 
<p><strong>3. </strong>由于JavaScript是单线程的，因此，如果function函数执行的时间过长，可能会影响页面的响应性能。因此，建议在编写function函数时要尽量减少执行时间。</p> 
<p><a name="_label3"></a></p> 
<h3 id="IV.%20%E6%96%B0%E5%B9%B4%E5%80%92%E8%AE%A1%E6%97%B6%E6%A1%88%E4%BE%8B">IV. 新年倒计时案例</h3> 
<p>最后，我们用学习的<strong>setTimeout()函数和setInterval()函数联动做一个新年倒计时案例</strong>吧：</p> 
<p>我们想要这样的效果：</p> 
<blockquote> 
 <p><strong>首先，实现在屏幕上展示60秒倒计时；</strong></p> 
 <p><strong>在倒计时为0后，弹窗展示新年快乐！</strong></p> 
</blockquote> 
<p>有人看了这个说明，觉得那么我们的代码应该是这样的：</p> 
<pre><code class="language-javascript">var element = document.getElementById("xin-nian")
var clock = 60;
var timer = null;
timer = setInterval(function () {
  element.innerHTML = "新年倒计时：" + clock + " !";
  console.log(clock)
  clock--;
  if (clock &lt; 0) {
    clearInterval(timer);
    alert("新年快乐！");
  }
}, 1000);</code></pre> 
<p>乍一看，好像没问题，但实际运行的时候，由于<strong>向html写入内容有一个小延迟，会导致最后倒计时0这个数字没被写进去就会弹窗</strong>，因此，我们要<strong>在倒计时最后一秒，用setTimeout()做一个小缓冲</strong>：</p> 
<pre><code class="language-javascript">if (clock &lt; 0) {
   clearInterval(timer);
   setTimeout(function () {
      alert("新年快乐！") 
   }, 500)};</code></pre> 
<p>于是完整的代码应该是这样的：</p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;新年倒计时&lt;/title&gt;
  &lt;style&gt;
    body {
      background-image: url(./1.jpg);
    }
  &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;h1 id="xin-nian" style="text-align: center;margin-top: 250px;font-size: 50px;"&gt;&lt;/h1&gt;
  &lt;script&gt;
    var element = document.getElementById("xin-nian")
    var clock = 60; var timer = null; timer = setInterval(function () {
      element.innerHTML = "新年倒计时：" + clock + " !";
      console.log(clock)
      clock--;
      if (clock &lt; 0) {
        clearInterval(timer);
        setTimeout(function () {
          alert("新年快乐！")
        }, 500)
      }
    }, 1000)
  &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre> 
<p><strong>实现的效果如下：</strong></p> 
<p style="text-align:center;"><strong><img alt="" src="https://images2.imgbox.com/1b/bd/4UllXBkC_o.gif"></strong></p> 
<p><strong>参考资料</strong></p> 
<p><a href="https://blog.csdn.net/weixin_46372993/article/details/129900212" title="setInterval()和setTimeout()的用法">setInterval()和setTimeout()的用法</a> | <a href="https://blog.csdn.net/Smallwhitestrive/article/details/125989076" title="定时器 setTimeout、setInterval详解">定时器 setTimeout、setInterval详解</a></p> 
<p><a href="https://www.jb51.net/article/252478.htm" rel="nofollow" title="JS中定时器setTimeout()和setInterval()的用法">JS中定时器setTimeout()和setInterval()的用法</a> | <a href="https://www.jb51.net/article/177340.htm" rel="nofollow" title="JS的setInterval()与setTimeout()计时器">JS的setInterval()与setTimeout()计时器</a></p> 
<p><a href="https://www.jb51.net/article/262775.htm" rel="nofollow" title="页面中实现setInterval和setTimeout效果示例详解">页面中实现setInterval和setTimeout效果示例详解</a> | <a href="https://www.jb51.net/article/168646.htm" rel="nofollow" title="浅谈对于“不用setInterval，用setTimeout”的理解">浅谈对于“不用setInterval，用setTimeout”的理解</a></p> 
<p><img alt="" height="36" src="https://images2.imgbox.com/a9/11/7ZF965gH_o.gif" width="960"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c0b572bc997aa92543a989e540788139/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">移动端开发框架mui代码在安卓模拟器上运行（HbuilderX连接到模拟器）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/52b2f74f5ba1f9c8452d1427c7208acd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2023年职业规划与心灵成长：对技术行业的深度思考与未来规划</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>