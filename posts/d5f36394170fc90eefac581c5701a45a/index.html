<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派4B/400/3B&#43;等等 的USB大容量存储启动 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="树莓派4B/400/3B&#43;等等 的USB大容量存储启动" />
<meta property="og:description" content="仅在Raspberry Pi 2B v1.2、3A &#43;，3B，3B &#43;，4B，400，计算模块3，计算模块3&#43;和计算模块4上可用。
本页说明如何从USB大容量存储设备（如闪存驱动器或USB硬盘）引导Raspberry Pi。连接USB设备（尤其是硬盘和SSD）时，请注意其电源要求。如果您希望在Pi上连接多个SSD或硬盘，则通常需要外部电源-有源硬盘盒或有源USB集线器。请注意，Pi 4B之前的型号存在已知问题，无法使用某些USB设备引导。
树莓派400 要从USB大容量存储设备启动Pi 400，只需使用Raspberry Pi Imager实用程序使用Raspberry Pi OS 2020-08-20或更高版本对USB驱动器进行映像：从SD CardRaspberry Pi Imager的列表中选择USB驱动器。
树莓派4B 根据Raspberry Pi 4B的制造时间，可能需要更新Bootloader EEPROM才能从USB大容量存储设备启动。
检查您的Pi 4B是否具有所需的Bootloader EEPROM版本
要检查您的Pi 4B是否具有所需的Bootloader EEPROM版本，请在未插入SD卡且显示器连接至HDMI端口之一的情况下打开电源。Pi 4B将在随附的显示器上显示诊断屏幕，该诊断屏幕的顶部包括引导加载程序的EEPROM版本。引导加载程序必须标有日期Sep 3 2020或更高版本才能支持USB大容量存储引导。如果诊断屏幕报告的日期早于Sep 3 2020，或者没有显示诊断屏幕，则需要首先更新Bootloader EEPROM以启用USB大容量存储引导。
要在Pi 4B上启动USB大容量存储，需要使用Raspberry Pi OS 2020-08-20或更高版本。
通过更新引导加载程序EEPROM在Pi 4B上启用USB大容量存储引导
如果您的Pi 4B需要更新的引导程序EEPROM以支持USB大容量存储引导，则可以执行以下更新：
使用Raspberry Pi Imager中的“其他实用程序映像”选项来创建具有最新“ Raspberry Pi 4 EEPROM引导恢复”映像的SD卡。
使用此SD卡引导Pi 4B。
引导加载程序EEPROM将更新为最新的出厂版本，然后Pi将快速闪烁其绿色ACT灯，并在HDMI输出上显示绿色，以指示成功。
Pi 4B现在可以从USB大容量存储设备启动。
更改Pi 4B和Pi 400的启动顺序
该raspi-配置实用程序可用于SD / USB（默认）或SD /网络引导模式之间进行选择。
完整的引导模式选项集记录在引导加载程序配置页面上。
树莓派3B &#43; Raspberry Pi 3B &#43;支持开箱即用的USB海量存储启动。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d5f36394170fc90eefac581c5701a45a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-31T13:29:06+08:00" />
<meta property="article:modified_time" content="2021-01-31T13:29:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派4B/400/3B&#43;等等 的USB大容量存储启动</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>仅在Raspberry Pi 2B v1.2、3A +，3B，3B +，4B，400，计算模块3，计算模块3+和计算模块4上可用。</p> 
<p>本页说明如何从USB大容量存储设备（如闪存驱动器或USB硬盘）引导Raspberry Pi。连接USB设备（尤其是硬盘和SSD）时，请注意其电源要求。如果您希望在Pi上连接多个SSD或硬盘，则通常需要外部电源-有源硬盘盒或有源USB集线器。请注意，Pi 4B之前的型号存在已知问题，无法使用某些USB设备引导。</p> 
<h3><a id="400_5"></a><em><strong>树莓派400</strong></em></h3> 
<p>要从USB大容量存储设备启动Pi 400，只需使用Raspberry Pi Imager实用程序使用Raspberry Pi OS 2020-08-20或更高版本对USB驱动器进行映像：从SD CardRaspberry Pi Imager的列表中选择USB驱动器。</p> 
<h3><a id="4B_10"></a><em><strong>树莓派4B</strong></em></h3> 
<p>根据Raspberry Pi 4B的制造时间，可能需要更新Bootloader EEPROM才能从USB大容量存储设备启动。</p> 
<p>检查您的Pi 4B是否具有所需的Bootloader EEPROM版本<br> 要检查您的Pi 4B是否具有所需的Bootloader EEPROM版本，请在未插入SD卡且显示器连接至HDMI端口之一的情况下打开电源。Pi 4B将在随附的显示器上显示诊断屏幕，该诊断屏幕的顶部包括引导加载程序的EEPROM版本。引导加载程序必须标有日期Sep 3 2020或更高版本才能支持USB大容量存储引导。如果诊断屏幕报告的日期早于Sep 3 2020，或者没有显示诊断屏幕，则需要首先更新Bootloader EEPROM以启用USB大容量存储引导。</p> 
<p>要在Pi 4B上启动USB大容量存储，需要<em>使用Raspberry Pi OS 2020-08-20或更高版本</em>。</p> 
<p>通过更新引导加载程序EEPROM在Pi 4B上启用USB大容量存储引导<br> 如果您的Pi 4B需要更新的引导程序EEPROM以支持USB大容量存储引导，则可以执行以下更新：</p> 
<p>使用Raspberry Pi Imager中的“其他实用程序映像”选项来创建具有最新“ Raspberry Pi 4 EEPROM引导恢复”映像的SD卡。<br> 使用此SD卡引导Pi 4B。<br> 引导加载程序EEPROM将更新为最新的出厂版本，然后Pi将快速闪烁其绿色ACT灯，并在HDMI输出上显示绿色，以指示成功。<br> Pi 4B现在可以从USB大容量存储设备启动。</p> 
<p>更改Pi 4B和Pi 400的启动顺序<br> 该raspi-配置实用程序可用于SD / USB（默认）或SD /网络引导模式之间进行选择。</p> 
<p>完整的引导模式选项集记录在引导加载程序配置页面上。</p> 
<h3><a id="3B__32"></a><em><strong>树莓派3B +</strong></em></h3> 
<p>Raspberry Pi 3B +支持开箱即用的USB海量存储启动。</p> 
<p><em>Raspberry Pi 2B v1.2、3A +，3B</em>，计算模块3、3+<br> 在Raspberry Pi 2B v1.2、3A +，3B和计算模块3、3+上，必须首先启用USB主机启动模式。这是为了允许USB大容量存储启动和网络启动。请注意，Raspberry Pi 3A +不支持网络启动。</p> 
<p>要启用USB主机引导模式，需要使用特殊选项从SD卡引导Raspberry Pi，以将一次性可编程（OTP）内存中的USB主机引导模式位置为1。设置该位后，就不再需要SD卡。请注意，您对OTP所做的任何更改都是永久性的，无法撤消。</p> 
<p>在Raspberry Pi 3A +上，将OTP位置1以启用USB主机启动模式将永久阻止Pi在USB设备模式下启动。</p> 
<p>您可以使用任何运行Raspberry Pi OS的SD卡对OTP位进行编程。</p> 
<p>使用以下代码启用USB主机引导模式：</p> 
<p>echo program_usb_boot_mode=1 | sudo tee -a /boot/config.txt<br> 这program_usb_boot_mode=1增加到的结尾/boot/config.txt。</p> 
<p>请注意，尽管该选项名为program_usb_boot_mode，但仅启用USB主机引导模式。USB设备启动模式仅在某些型号的Raspberry Pi上可用-请参见USB设备启动模式。</p> 
<p>下一步是使用重启Raspberry Pi，sudo reboot并检查是否已使用以下方法对OTP进行了编程：</p> 
<p>$ vcgencmd otp_dump | grep 17:<br> 17:3020000a<br> 检查0x3020000a是否显示输出。如果不是，则说明OTP位未成功编程。在这种情况下，请再次执行编程步骤。如果该位仍未设置，则可能表明Pi硬件本身存在故障。</p> 
<p>如果愿意，可以从中删除该program_usb_boot_mode行config.txt，这样，如果将SD卡放入另一个Raspberry Pi中，则不会对USB主机启动模式进行编程。确保末尾没有空白行config.txt。</p> 
<p>现在，您可以从USB大容量存储设备中进行引导，就像从SD卡中进行引导一样-有关更多信息，请参见以下部分。</p> 
<p>从USB大容量存储设备启动<br> 该过程与SD卡相同-仅用操作系统映像对USB存储设备进行映像。</p> 
<p>准备好存储设备后，将驱动器连接到Raspberry Pi并打开Pi的电源，注意外部驱动器的额外USB电源要求。五到十秒钟后，Raspberry Pi应该开始启动，并在连接的显示器上显示Rainbow初始屏幕。确保您没有在Pi上插入SD卡，因为如果这样做，它将首先从那启动。</p> 
<p>有关引导顺序和替代引导模式（网络，USB设备，GPIO或SD引导），请参阅引导模式文档。</p> 
<p>已知问题（不是Pi 4B，CM4和Pi 400）<br> 检查可启动USB设备的默认超时为2秒。一些闪存驱动器和硬盘上电太慢。可以将超时时间延长到5秒（timeout向SD卡添加新文件），但是请注意，某些设备的响应时间甚至更长。<br> 一些闪存驱动器具有非常特殊的协议要求，而引导代码未处理这些协议要求，因此可能不兼容。<br> 特殊的仅bootcode.bin引导模式（非Pi 4B，CM4和Pi 400）<br> 如果您无法使用特定的USB设备启动您的树莓派，为PI 2B V1.2替代，3A +，3B和3B +是描述使用特殊唯一bootcode.bin引导模式在这里。Pi仍将从SD卡启动，但这bootcode.bin是从其中读取的唯一文件。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63dbdfeed81e7875b3dc0f99b4524da7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何制作网站的入门教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f5f89e993f3ef144a2e96d429a694c8d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【GNSS】GNSS数据下载工具</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>