<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jmeter获取系统偏离时间 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="jmeter获取系统偏离时间" />
<meta property="og:description" content="方法1：jmeter time函数处理
1.使用背景
在做接口测试的时候，需要获取时间戳函数，常用的是获取当前时间的时间戳。但有时候为了达到某种预期效果，会需要用未来时间，此时我们就需要在系统时间上进行增加操作。
2.操作步骤
当前时间很容易获取
时间戳表达（精确到毫秒）
当前时间：${__time(,)}
当前时间：${__timeShift(,,,,)}
在当前时间上增加一天：${__timeShift(,,P1d,,)}
在当前时间上增加一小时：${__timeShift(,,PT1H,,)}
在当前时间上增加十分钟：${__timeShift(,,PT10m,,)}
在当前时间上增加二十秒：${__timeShift(,,PT20s,,)}
在当前时间上增加一天小时十分二十秒：${__timeShift(,,P1dT1H10m20s,,)}
明文表达（精确到毫秒）
当前年月日时分秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,,,)}
当前年月日时分秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P5H,,)}
在当前时间上增加一天：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P1d,,)}
在当前时间上增加一小时：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT1H,,)}
在当前时间上增加十分钟：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT10m,,)}
在当前时间上增加二十秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT20S,,)}
在当前时间上增加一天一小时十分二十秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P1dT1H10m20s,,)}
不带横杠的明文（精确到毫秒）
${__time(YMDHMS,)}
${__time(YYYYMMDHMS,)}
关于减少（1 时=3600000毫秒，需要多长时间自己百度换算）
在当前时间上减少一小时：${__longSum(${__time},-3600000,)}
最后，我们用BeanShell 取样器查看一下
方法2：beasn shell中写代码获取
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
try{
Date date =new Date(); //获取当前时间
SimpleDateFormat sf = new SimpleDateFormat(&#34;yyyy-MM-dd&#34;);
String nowDate = sf.format(date);
Calendar cal = Calendar.getInstance();
cal.setTime(sf.parse(nowDate));
cal.add(Calendar.DAY_OF_YEAR,&#43;1); //后一天
String orderDate = sf." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7630749cd43783c0323e80d70003053c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-17T17:13:50+08:00" />
<meta property="article:modified_time" content="2021-03-17T17:13:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">jmeter获取系统偏离时间</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> </p> 
<p>方法1：jmeter time函数处理</p> 
<p><strong>1.使用背景</strong></p> 
<p>在做接口测试的时候，需要获取时间戳函数，常用的是获取当前时间的时间戳。但有时候为了达到某种预期效果，会需要用未来时间，此时我们就需要在系统时间上进行增加操作。</p> 
<p><strong>2.操作步骤</strong></p> 
<p>当前时间很容易获取</p> 
<p>时间戳表达（精确到毫秒）</p> 
<p><em id="__mceDel">当前时间：${__time(,)}<br> 当前时间：${__timeShift(,,,,)}<br> 在当前时间上增加一天：${__timeShift(,,P1d,,)}<br> 在当前时间上增加一小时：${__timeShift(,,PT1H,,)}<br> 在当前时间上增加十分钟：${__timeShift(,,PT10m,,)}<br> 在当前时间上增加二十秒：${__timeShift(,,PT20s,,)}<br> 在当前时间上增加一天小时十分二十秒：${__timeShift(,,P1dT1H10m20s,,)}</em></p> 
<p>明文表达（精确到毫秒）<br> 当前年月日时分秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,,,)}<br> 当前年月日时分秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P5H,,)}<br> 在当前时间上增加一天：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P1d,,)}<br> 在当前时间上增加一小时：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT1H,,)}<br> 在当前时间上增加十分钟：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT10m,,)}<br> 在当前时间上增加二十秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,PT20S,,)}<br> 在当前时间上增加一天一小时十分二十秒：${__timeShift(yyyy-MM-dd HH:mm:ss:SSS,,P1dT1H10m20s,,)}</p> 
<p>不带横杠的明文（精确到毫秒）<br> ${__time(YMDHMS,)}<br> ${__time(YYYYMMDHMS,)}</p> 
<p> </p> 
<p>关于减少（1 时=3600000毫秒，需要多长时间自己百度换算）<br> 在当前时间上减少一小时：${__longSum(${__time},-3600000,)}</p> 
<p>最后，我们用<strong>BeanShell 取样器</strong>查看一下</p> 
<p><img alt="" src="https://images2.imgbox.com/93/52/ZgscQQoN_o.png"></p> 
<p>方法2：beasn shell中写代码获取</p> 
<p>import java.text.SimpleDateFormat;<br> import java.util.Calendar;<br> import java.util.Date;</p> 
<p>try{<!-- --><br>     Date date =new Date();  //获取当前时间<br>     SimpleDateFormat sf = new SimpleDateFormat("yyyy-MM-dd");<br>     String nowDate = sf.format(date);<br>     Calendar cal = Calendar.getInstance();<br>     cal.setTime(sf.parse(nowDate));<br>     cal.add(Calendar.DAY_OF_YEAR,+1);  //后一天<br>     String orderDate = sf.format(cal.getTime());<br>     cal.add(Calendar.DAY_OF_YEAR,+1);  //竞猜下,怎么还是加1<br>     String senderDate = sf.format(cal.getTime());<br>     vars.put("orderDate",orderDate);<br>     vars.put("senderDate",senderDate);<br>     <br> }<br> catch(Exception e){<!-- --><br> }</p> 
<p><img alt="" height="652" src="https://images2.imgbox.com/7e/37/3clXD1D1_o.png" width="1165"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e4d3858e22239c33b808fe1d88ca91c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">idea前后跳转箭头的快捷键</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49c1fff33a55a3b13eb27f51aebd92b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA连接数据库及一些基本操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>