<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python脚本实现数据自动获取 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python脚本实现数据自动获取" />
<meta property="og:description" content="前言 背景介绍
自动化运维在当前IT行业中变得越来越重要，特别是在大型企业中，由于服务器数量的增加和复杂性的提高，手动运维已经变得非常困难，甚至是不可行的。自动化运维脚本可以显著降低运维的复杂性和成本，并提高系统的稳定性和可靠性。
在现实应用中，自动化运维脚本通常用于完成系统的配置、部署、监控、维护和更新等任务。以Python为例，这种脚本可以使用各种Python库和工具进行开发，例如Fabric、Ansible和Saltstack等。
一个典型的自动化运维脚本可以自动化完成一系列任务，例如：自动更新操作系统、安装和配置软件、自动备份数据、自动化监控系统等等。此外，自动化运维脚本还可以根据不同的需求和情况，自动化调整和优化系统资源，例如：自动化调整服务器的内存、CPU和网络带宽等。
【----帮助Python学习，以下所有学习资料文末免费领！----】
自动化运维脚本的应用场景非常广泛，特别是在大型企业和互联网公司中，他们需要维护大量的服务器和网络设备。使用自动化运维脚本可以极大地提高运维效率，减少人为错误，提高系统的稳定性和可靠性。
此外，自动化运维脚本还可以帮助企业节省大量的运维成本，特别是在人力和时间方面。企业可以利用这些成本节省来进一步提高其业务的竞争力和市场份额。
项目分析
假设我们有一个简单的网站应用程序，它需要每天从一个外部API获取数据，并将数据存储在本地MySQL数据库中。我们可以编写一个自动化的Python脚本来完成这些任务。
代码如下。
import requests import pymysql from datetime import datetime, timedelta # 配置参数 API_ENDPOINT = &#34;https://api.example.com/data&#34; DB_HOST = &#34;localhost&#34; DB_USER = &#34;root&#34; DB_PASS = &#34;password&#34; DB_NAME = &#34;myapp&#34; TABLE_NAME = &#34;data&#34; # 获取当前时间 now = datetime.now() # 计算昨天日期 yesterday = now - timedelta(days=1) yesterday_str = yesterday.strftime(&#39;%Y-%m-%d&#39;) # 发送请求获取数据 response = requests.get(API_ENDPOINT, params={&#34;date&#34;: yesterday_str}) data = response.json() # 连接数据库 conn = pymysql." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/ceb7a3e2382825cd93d319513fe5dafd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-18T23:21:29+08:00" />
<meta property="article:modified_time" content="2024-01-18T23:21:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python脚本实现数据自动获取</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p><em><strong>背景介绍</strong></em></p> 
<p>自动化运维在当前IT行业中变得越来越重要，特别是在大型企业中，由于服务器数量的增加和复杂性的提高，手动运维已经变得非常困难，甚至是不可行的。自动化运维脚本可以显著降低运维的复杂性和成本，并提高系统的稳定性和可靠性。</p> 
<p>在现实应用中，自动化运维脚本通常用于完成系统的配置、部署、监控、维护和更新等任务。以Python为例，这种脚本可以使用各种Python库和工具进行开发，例如Fabric、Ansible和Saltstack等。</p> 
<p>一个典型的自动化运维脚本可以自动化完成一系列任务，例如：自动更新操作系统、安装和配置软件、自动备份数据、自动化监控系统等等。此外，自动化运维脚本还可以根据不同的需求和情况，自动化调整和优化系统资源，例如：自动化调整服务器的内存、CPU和网络带宽等。</p> 
<p><mark><strong>【----帮助Python学习，以下所有学习资料文末免费领！----】</strong></mark></p> 
<p>自动化运维脚本的应用场景非常广泛，特别是在大型企业和互联网公司中，他们需要维护大量的服务器和网络设备。使用自动化运维脚本可以极大地提高运维效率，减少人为错误，提高系统的稳定性和可靠性。</p> 
<p>此外，自动化运维脚本还可以帮助企业节省大量的运维成本，特别是在人力和时间方面。企业可以利用这些成本节省来进一步提高其业务的竞争力和市场份额。</p> 
<p><em><strong>项目分析</strong></em></p> 
<p>假设我们有一个简单的网站应用程序，它需要每天从一个外部API获取数据，并将数据存储在本地MySQL数据库中。我们可以编写一个自动化的Python脚本来完成这些任务。</p> 
<p>代码如下。</p> 
<pre><code>
import requests
import pymysql
from datetime import datetime, timedelta

# 配置参数
API_ENDPOINT = "https://api.example.com/data"
DB_HOST = "localhost"
DB_USER = "root"
DB_PASS = "password"
DB_NAME = "myapp"
TABLE_NAME = "data"

# 获取当前时间
now = datetime.now()

# 计算昨天日期
yesterday = now - timedelta(days=1)
yesterday_str = yesterday.strftime('%Y-%m-%d')

# 发送请求获取数据
response = requests.get(API_ENDPOINT, params={"date": yesterday_str})
data = response.json()

# 连接数据库
conn = pymysql.connect(host=DB_HOST, user=DB_USER, password=DB_PASS, db=DB_NAME, charset='utf8mb4')
cursor = conn.cursor()

# 创建数据表
create_table_sql = f"CREATE TABLE IF NOT EXISTS {TABLE_NAME} (id INT AUTO_INCREMENT PRIMARY KEY, date DATE, value FLOAT)"
cursor.execute(create_table_sql)

# 插入数据
for record in data:
    date_str = record['date']
    value = record['value']
    insert_sql = f"INSERT INTO {TABLE_NAME} (date, value) VALUES ('{date_str}', {value})"
    cursor.execute(insert_sql)
    
# 提交事务并关闭连接
conn.commit()
conn.close()
</code></pre> 
<p>这个脚本的工作流程如下：</p> 
<p>1、配置API_ENDPOINT，DB_HOST，DB_USER，DB_PASS，DB_NAME和TABLE_NAME参数。</p> 
<p>2、获取当前日期和昨天日期。</p> 
<p>3、发送请求到API_ENDPOINT以获取昨天的数据。</p> 
<p>4、连接到MySQL数据库。</p> 
<p>5、创建数据表（如果不存在）。</p> 
<p>6、将数据插入到数据表中。</p> 
<p>7、提交事务并关闭数据库连接。</p> 
<p>我们可以将这个脚本保存为一个Python文件，并在每天定时运行它，以自动获取和存储数据。可以使用Linux中的crontab或其他任务调度工具来实现这个目的。</p> 
<h3><a id="_92"></a>结束!</h3> 
<p>如有不足之处，欢迎指正！</p> 
<p>谢谢你这么好看还关注我</p> 
<h2><a id="Python_103"></a>零基础Python学习资源介绍</h2> 
<h3><a id="Python_105"></a>👉Python学习路线汇总👈</h3> 
<p>Python所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照上面的知识点去找对应的学习资源，保证自己学得较为全面。<mark><strong>（全套教程文末领取哈）</strong></mark><br> <img src="https://images2.imgbox.com/2e/33/S37JZC5j_o.png" alt=""></p> 
<h3><a id="Python_111"></a>👉Python必备开发工具👈</h3> 
<p><img src="https://images2.imgbox.com/ef/e6/lgIA2JGR_o.png" alt=""></p> 
<p><strong>温馨提示：篇幅有限，已打包文件夹，获取方式在：文末</strong></p> 
<h3><a id="Python600_117"></a>👉Python学习视频600合集👈</h3> 
<p>观看零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。<br> <img src="https://images2.imgbox.com/3f/21/zpBtkqxa_o.png" alt=""></p> 
<h3><a id="Python_122"></a>👉Python基础👈</h3> 
<p><img src="https://images2.imgbox.com/0f/66/nRwyruC2_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="Python_127"></a>👉Python自动化办公教程👈</h3> 
<p><img src="https://images2.imgbox.com/35/ab/ffVeGNg1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="python__129"></a>👉python爬虫 👈</h3> 
<p><img src="https://images2.imgbox.com/2d/d8/45jCr4Mw_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="python__131"></a>👉python机器学习 👈</h3> 
<p><img src="https://images2.imgbox.com/b7/48/RGNtAPq1_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_134"></a>👉实战案例👈</h3> 
<p>光学理论是没用的，要学会跟着一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。</p> 
<p><img src="https://images2.imgbox.com/06/b2/unszGxWF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="100Python_152"></a>👉100道Python练习题👈</h3> 
<p>检查学习结果。<img src="https://images2.imgbox.com/4e/4c/M5wIo6gN_o.png" alt=""></p> 
<h3><a id="_157"></a>👉面试刷题👈</h3> 
<p><img src="https://images2.imgbox.com/b2/a9/f518Cj7C_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/67/10/kVQ4P47w_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/56/9d/MCHSyAEu_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_165"></a>资料领取</h2> 
<p><mark>这份完整版的Python全套学习资料已经上传网盘，朋友们如果需要可以点击下方微信卡片免费领取 <strong>↓↓↓</strong>【保证100%免费】</mark> <font color="red" size="3"><br> <strong>或者</strong></font><br> 【<a href="https://mp.weixin.qq.com/s/DQJlHPMjozDTnzuyoXJ6qA" rel="nofollow">点此链接</a>】领取</p> 
<img src="https://images2.imgbox.com/18/7c/XDsrr6Kp_o.png"> 
<h2><a id="_182"></a>好文推荐</h2> 
<p><strong>了解python的前景：</strong><a href="https://blog.csdn.net/xiangxue888/article/details/129726286">https://blog.csdn.net/xiangxue888/article/details/129726286</a></p> 
<p><strong>了解python的副业：</strong><a href="https://blog.csdn.net/xiangxue888/article/details/129726009">https://blog.csdn.net/xiangxue888/article/details/129726009</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc8401cca98bf2780416625b51561d04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">花了一周时间，终于把python爬虫入门必学知识整理出来了</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/96c82b187589695196ffe4436ef1474b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">蓝桥杯练习题（十）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>