<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>dockerä½¿ç”¨å…¥é—¨ - ç¼–ç¨‹å¤§ç™½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="dockerä½¿ç”¨å…¥é—¨" />
<meta property="og:description" content="å‚è€ƒèµ„æ–™ åˆçº§æŒ‡å¯¼ï¼š Docker overview | Docker Documentation åè¯è§£é‡Š é•œåƒï¼ˆImageï¼‰ï¼šDocker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚å®¹å™¨ï¼ˆContainerï¼‰ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚ä»“åº“ï¼ˆRepositoryï¼‰ï¼šä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚ä¸»æœºï¼š ä¸€ä¸ªç‰©ç†æˆ–è€…è™šæ‹Ÿçš„æœºå™¨ç”¨äºæ‰§è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨ã€‚Docker Registryï¼š Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚Docker Hub(https://hub.docker.com) æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨PGPï¼š Pretty Good Privacy æ˜¯ä¸€å¥—ç”¨äºæ¶ˆæ¯åŠ å¯†ã€éªŒè¯çš„åº”ç”¨ç¨‹åº. PGP æœ¬èº«æ˜¯å•†ä¸šåº”ç”¨ç¨‹åºï¼›å¯¹åº”çš„å¼€æºè½¯ä»¶ä¸º GPGï¼ˆGnuPGï¼‰GPG: GNU Privacy Guard, ä¹Ÿæ˜¯ä¸€ç§åŠ å¯†è½¯ä»¶ï¼Œå®ƒæ˜¯ PGP åŠ å¯†è½¯ä»¶çš„å¼€æºæ›¿ä»£ç¨‹åº. åœ¨dockerä¸­ä¸»è¦ç”¨äºå®¹å™¨çš„åŠ å¯†ï¼Ÿvolume: å·Flaskï¼š æ˜¯ä¸€ä¸ªPythonç¼–å†™çš„Web å¾®æ¡†æ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Pythonè¯­è¨€å¿«é€Ÿå®ç°ä¸€ä¸ªç½‘ç«™æˆ–WebæœåŠ¡bind mountï¼š linuxå‘½ä»¤ï¼Œå°†ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ°å¦ä¸€ä¸ªCI / CD: Continuous Integrate, Continuous Deploy æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜Dockerfile: æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚Compose: æ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚ æ¯”Dockerfileé›†æˆåº¦æ›´é«˜ã€‚æˆ–è€…è¯´å‰è€…ç”¨æ¥å¯åŠ¨ç¨‹åºï¼Œåè€…ç”¨æ¥ç”Ÿæˆé•œåƒoverlay: ç›¸å½“äºåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œå°†ä¸»æœºï¼Œå¤šä¸ªå®¹å™¨ï¼Œç”šè‡³å¤šä¸ªdocker daemonå‡è¦†ç›–è¿›æ¥ï¼Œå½¼æ­¤ä¹‹é—´å‡å¯ä»¥é€šä¿¡CNM: Container Network Modelbridge: æ—©æœŸçš„äº¤æ¢æœºé›å½¢ï¼Œäº¤æ¢æœºå¯ä»¥è®¤ä¸ºæ˜¯å¤šä¸ªbridgeçš„é›†åˆã€‚è½¬å‘äºŒå±‚å¸§ï¼Œèµ·åˆ°ä¿¡å·æ”¾å¤§çš„ä½œç”¨ã€‚ç½‘å¡ç›¸å½“äºæ˜¯ä¸€ä¸ªç½‘æ¡¥/äº¤æ¢æœºï¼Œä¸¤è€…åœ¨ä¸€ä¸ªç½‘æ®µå†…ã€‚arpå’Œpingå‡å¯ä»¥é€šè¿‡automatic service discoveryï¼š ç±»ä¼¼äºDNSæœåŠ¡ï¼Œä½¿å¾— ping -c 2 alpine2 è¿™æ ·çš„æ“ä½œå¯ä»¥å®ç°kvm: Kernel-based Virtual Machine,æ˜¯ä¸€ç§å†…å»ºäºlinuxä¸­çš„å¼€æºè™šæ‹ŸåŒ–æŠ€æœ¯QEMUï¼š ä¸€ç§é€šç”¨çš„å¼€æºè®¡ç®—æœºä»¿çœŸå™¨å’Œè™šæ‹Ÿå™¨ å®‰è£… docker desktop ä»¥ä¸‹å®‰è£…æ–¹æ³•é’ˆå¯¹ubuntu" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/4f7747b014e6d0639573c2674694fad6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-08T09:22:49+08:00" />
<meta property="article:modified_time" content="2022-09-08T09:22:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§ç™½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§ç™½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">dockerä½¿ç”¨å…¥é—¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>å‚è€ƒèµ„æ–™</h2> 
<ol><li>åˆçº§æŒ‡å¯¼ï¼š <a href="https://docs.docker.com/get-started/overview/" rel="nofollow">Docker overview | Docker Documentation</a></li><li></ol> 
<h2><a id="_5"></a>åè¯è§£é‡Š</h2> 
<ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šDocker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</li><li><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong>ï¼šä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚</li><li>ä¸»æœºï¼š ä¸€ä¸ªç‰©ç†æˆ–è€…è™šæ‹Ÿçš„æœºå™¨ç”¨äºæ‰§è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨ã€‚</li><li>Docker Registryï¼š Docker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚Docker Hub(<a href="https://hub.docker.com/" rel="nofollow">https://hub.docker.com</a>) æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨</li><li>PGPï¼š Pretty Good Privacy æ˜¯ä¸€å¥—ç”¨äºæ¶ˆæ¯åŠ å¯†ã€éªŒè¯çš„åº”ç”¨ç¨‹åº. <strong>PGP æœ¬èº«æ˜¯å•†ä¸šåº”ç”¨ç¨‹åº</strong>ï¼›å¯¹åº”çš„å¼€æºè½¯ä»¶ä¸º GPGï¼ˆGnuPGï¼‰</li><li>GPG: GNU Privacy Guard, ä¹Ÿæ˜¯ä¸€ç§åŠ å¯†è½¯ä»¶ï¼Œå®ƒæ˜¯ PGP åŠ å¯†è½¯ä»¶çš„å¼€æºæ›¿ä»£ç¨‹åº. åœ¨dockerä¸­ä¸»è¦ç”¨äºå®¹å™¨çš„åŠ å¯†ï¼Ÿ</li><li>volume: å·</li><li>Flaskï¼š æ˜¯ä¸€ä¸ªPythonç¼–å†™çš„Web å¾®æ¡†æ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Pythonè¯­è¨€å¿«é€Ÿå®ç°ä¸€ä¸ªç½‘ç«™æˆ–WebæœåŠ¡</li><li>bind mountï¼š linuxå‘½ä»¤ï¼Œå°†ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ°å¦ä¸€ä¸ª</li><li>CI / CD: Continuous Integrate, Continuous Deploy æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜</li><li>Dockerfile: æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚</li><li>Compose: æ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚ æ¯”Dockerfileé›†æˆåº¦æ›´é«˜ã€‚æˆ–è€…è¯´å‰è€…ç”¨æ¥å¯åŠ¨ç¨‹åºï¼Œåè€…ç”¨æ¥ç”Ÿæˆé•œåƒ</li><li>overlay: ç›¸å½“äºåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œå°†ä¸»æœºï¼Œå¤šä¸ªå®¹å™¨ï¼Œç”šè‡³å¤šä¸ªdocker daemonå‡è¦†ç›–è¿›æ¥ï¼Œå½¼æ­¤ä¹‹é—´å‡å¯ä»¥é€šä¿¡</li><li>CNM: Container Network Model</li><li>bridge: æ—©æœŸçš„äº¤æ¢æœºé›å½¢ï¼Œäº¤æ¢æœºå¯ä»¥è®¤ä¸ºæ˜¯å¤šä¸ªbridgeçš„é›†åˆã€‚è½¬å‘äºŒå±‚å¸§ï¼Œèµ·åˆ°ä¿¡å·æ”¾å¤§çš„ä½œç”¨ã€‚ç½‘å¡ç›¸å½“äºæ˜¯ä¸€ä¸ªç½‘æ¡¥/äº¤æ¢æœºï¼Œä¸¤è€…åœ¨ä¸€ä¸ªç½‘æ®µå†…ã€‚arpå’Œpingå‡å¯ä»¥é€šè¿‡</li><li><strong>automatic service discovery</strong>ï¼š ç±»ä¼¼äºDNSæœåŠ¡ï¼Œä½¿å¾— ping -c 2 alpine2 è¿™æ ·çš„æ“ä½œå¯ä»¥å®ç°</li><li>kvm: Kernel-based Virtual Machine,æ˜¯ä¸€ç§å†…å»ºäºlinuxä¸­çš„å¼€æºè™šæ‹ŸåŒ–æŠ€æœ¯</li><li>QEMUï¼š ä¸€ç§é€šç”¨çš„å¼€æºè®¡ç®—æœºä»¿çœŸå™¨å’Œè™šæ‹Ÿå™¨</li></ul> 
<h2><a id="_31"></a>å®‰è£…</h2> 
<h3><a id="docker_desktop_33"></a>docker desktop</h3> 
<p>ä»¥ä¸‹å®‰è£…æ–¹æ³•é’ˆå¯¹ubuntu</p> 
<h4><a id="_37"></a>ç³»ç»Ÿå‡†å¤‡</h4> 
<p>åœ¨è™šæ‹Ÿæœºä¸Šä½¿ç”¨dockeréœ€è¦å®‰è£…kvm</p> 
<pre><code class="prism language-bash">modprobe kvm
modprobe kvm_intel  
lsmod <span class="token operator">|</span> <span class="token function">grep</span> kvm
<span class="token function">ls</span> -al /dev/kvm
<span class="token function">sudo</span> <span class="token function">usermod</span> -aG kvm <span class="token environment constant">$USER</span>   <span class="token comment"># æ·»åŠ ç”¨æˆ·æ€æƒé™</span>

</code></pre> 
<p>å®‰è£…æ–°ç‰ˆqemuï¼Œæ–‡æ¡£è¦æ±‚5.2ä»¥ä¸Š</p> 
<pre><code class="prism language-bash"><span class="token function">wget</span> https://download.qemu.org/qemu-7.1.0-rc3.tar.xz
<span class="token function">tar</span> xvJf qemu-7.1.0-rc3.tar.xz
<span class="token builtin class-name">cd</span> qemu-7.1.0-rc3
./configure
<span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>

</code></pre> 
<p>configureéœ€è¦å®‰è£…ninja</p> 
<pre><code>sudo apt install re2c
git clone https://gitee.com/hclink_ai/ninja.git

cd ninja
python3 configure.py --bootstrap 

sudo cp ./ninja  /usr/bin
ninja --version
</code></pre> 
<p>æ–‡ä»¶å…±äº«</p> 
<pre><code class="prism language-bash"> <span class="token function">grep</span> <span class="token string">"<span class="token environment constant">$USER</span>"</span> /etc/subuid <span class="token operator">&gt;&gt;</span> /dev/null <span class="token number">2</span><span class="token operator">&amp;&gt;</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token punctuation">(</span>echo <span class="token string">"<span class="token environment constant">$USER</span>:100000:65536"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> -a /etc/subuid<span class="token punctuation">)</span>
 <span class="token function">grep</span> <span class="token string">"<span class="token environment constant">$USER</span>"</span> /etc/subgid <span class="token operator">&gt;&gt;</span> /dev/null <span class="token number">2</span><span class="token operator">&amp;&gt;</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token punctuation">(</span>echo <span class="token string">"<span class="token environment constant">$USER</span>:100000:65536"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> -a /etc/subgid<span class="token punctuation">)</span>
 
 <span class="token builtin class-name">echo</span> <span class="token environment constant">$USER</span>
 <span class="token function">cat</span> /etc/subuid
 <span class="token function">cat</span> /etc/subgid
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> add-apt-repository ppa:jacob/virtualisation
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> -y <span class="token function">install</span> libvirt-clients libvirt-daemon bridge-utils 
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> grub-common
grub2-editenv - <span class="token builtin class-name">set</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>grub2-editenv - list <span class="token operator">|</span> <span class="token function">grep</span> kernelopts<span class="token variable">)</span></span> intel_iommu=on"</span>   <span class="token comment"># å¼€å¯IOMMU</span>

<span class="token function">sudo</span> <span class="token function">chmod</span> a+rw /var/lib/docker

$ <span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> stop
$ <span class="token function">sudo</span> systemctl disable docker.service
$ <span class="token function">sudo</span> systemctl disable docker.socket
</code></pre> 
<h4><a id="_106"></a>å¼€å§‹å®‰è£…</h4> 
<p>å®‰è£…å‰é¦–å…ˆè¦æ¸…ç†åŸæœ‰çš„è€æ–‡ä»¶</p> 
<pre><code class="prism language-bash"> <span class="token function">sudo</span> <span class="token function">apt</span> remove docker-desktop
 <span class="token function">rm</span> -r <span class="token environment constant">$HOME</span>/.docker/desktop
 <span class="token function">sudo</span> <span class="token function">rm</span> /usr/local/bin/com.docker.cli
 <span class="token function">sudo</span> <span class="token function">apt</span> purge docker-desktop
</code></pre> 
<p>å¦‚æœæ²¡æœ‰gnomeï¼Œéœ€è¦å…ˆå®‰è£…</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gnome-terminal
</code></pre> 
<p>å¼€å§‹å®‰è£…Docker</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token comment"># ä¾èµ–</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ca-certificates <span class="token function">curl</span> gnupg lsb-release
<span class="token comment"># GPG key</span>
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/apt/keyrings
<span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg
<span class="token comment"># è®¾ç½®repository</span>
<span class="token builtin class-name">echo</span> <span class="token punctuation">\</span>
<span class="token string">"deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
<span class="token comment"># å®‰è£…engine</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-compose-plugin
<span class="token comment"># éœ€è¦updateä¹‹åæ‰è¡Œï¼Œæ¯”è¾ƒå¤§ï¼Œæœ‰500å¤šM</span>
<span class="token comment"># ä¹Ÿå¯ä»¥é€šè¿‡debå®‰è£… Docker Desktop</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ./docker-desktop-<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>-<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
<span class="token comment"># 80å¤šM</span>
</code></pre> 
<p>ç”Ÿæˆå‡­æ®,å¦åˆ™æ— æ³•ç™»å½•</p> 
<pre><code class="prism language-bash">gpg --generate-key
pass init 7865BA9185AFA2C26C5B505669FC4F36530097C2

</code></pre> 
<p>æ³¨å†Œ</p> 
<p>ç™»å½•</p> 
<p>éªŒè¯</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> compose version
<span class="token function">docker</span> --version
<span class="token function">docker</span> version
</code></pre> 
<p>åŠ å…¥ç”¨æˆ·ç»„</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> <span class="token function">ps</span> <span class="token comment"># æ­£å¸¸ä¼šæ˜¾ç¤ºæƒé™é”™è¯¯ï¼Œæ­¤æ—¶éœ€è¦åŠ å…¥ç»„</span>
<span class="token function">sudo</span> gpasswd -a <span class="token environment constant">$USER</span> <span class="token function">docker</span> 
newgrp <span class="token function">docker</span>
</code></pre> 
<h3><a id="docker_engine_177"></a>docker engine</h3> 
<p>å¯ä»¥ä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–å®‰è£…</p> 
<pre><code class="prism language-bash"><span class="token function">curl</span> -sSL https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre> 
<p>ä¸€èˆ¬å®‰è£…</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ca-certificates <span class="token function">curl</span> gnupg lsb-release
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/apt/keyrings

 <span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg
 
<span class="token builtin class-name">echo</span> <span class="token string">"deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
  
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io <span class="token function">docker-compose</span>
 
</code></pre> 
<h3><a id="_204"></a>æ¢æº</h3> 
<p>é˜¿é‡Œäº‘çš„åŠ é€Ÿå™¨ï¼šhttps://help.aliyun.com/document_detail/60750.html</p> 
<p>ç½‘æ˜“åŠ é€Ÿå™¨ï¼šhttp://hub-mirror.c.163.com</p> 
<p>å®˜æ–¹ä¸­å›½åŠ é€Ÿå™¨ï¼šhttps://registry.docker-cn.com</p> 
<p>ustc çš„é•œåƒï¼šhttps://docker.mirrors.ustc.edu.cn</p> 
<p>åœ¨ settings-&gt; Docker Engine ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®å³å¯</p> 
<pre><code class="prism language-json"><span class="token string-property property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"http://hub-mirror.c.163.com"</span>
  <span class="token punctuation">]</span>
</code></pre> 
<p>å¦‚æœæ˜¯docker engineï¼Œæ¢æºæ–¹æ³•å¦‚ä¸‹</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /etc/docker
<span class="token function">vim</span> daemon.json
<span class="token comment"># æ·»åŠ æº</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"registry-mirrors"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">"https://hub-mirror.c.163.com"</span>,
    <span class="token string">"https://ghcr.io"</span>,
    <span class="token string">"https://mirror.baidubce.com"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function">service</span> <span class="token function">docker</span> restart


</code></pre> 
<h2><a id="_245"></a>ä½¿ç”¨</h2> 
<h3><a id="_247"></a>å¸¸ç”¨æ–¹æ³•</h3> 
<h4><a id="_249"></a>æŸ¥çœ‹ç±»</h4> 
<pre><code class="prism language-bash"><span class="token function">docker</span> images      <span class="token comment"># æŸ¥çœ‹é•œåƒ</span>
<span class="token function">docker</span> <span class="token function">ps</span>          <span class="token comment"># æŸ¥çœ‹å®¹å™¨</span>
<span class="token function">docker</span> <span class="token function">ps</span> -a       <span class="token comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span>
<span class="token function">docker</span> --help      <span class="token comment"># æŸ¥çœ‹å¸®åŠ©</span>
<span class="token function">docker</span> -v          <span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
<span class="token function">docker</span> attach xx   <span class="token comment"># æŸ¥çœ‹xxå®¹å™¨è¿è¡Œæƒ…å†µ</span>
</code></pre> 
<h4><a id="_260"></a>è¿è¡Œç±»</h4> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run xx     <span class="token comment"># è¿è¡Œxxé•œåƒ</span>
<span class="token function">docker</span> run xx <span class="token operator">&amp;&amp;</span> python3 hello.py -yy zz <span class="token comment"># è¿è¡Œxxé•œåƒå¹¶å¯åŠ¨å®¹å™¨ä¸­çš„ç¨‹åº,åé¢å¯ä»¥åŠ å…¥å‘½ä»¤è¡Œå‚æ•°zz</span>
<span class="token function">docker</span> run xx python3 hello.py     <span class="token comment"># åŒä¸Š</span>
<span class="token function">docker</span> run -dit xx <span class="token comment"># ä»¥äº’åŠ¨æ–¹å¼åå°è¿è¡Œé•œåƒ</span>
<span class="token function">docker</span> start xx   <span class="token comment"># è¿è¡Œxxå®¹å™¨</span>
<span class="token function">docker</span> stop  xx
<span class="token function">docker</span> restart xx
</code></pre> 
<h4><a id="_272"></a>ç®¡ç†ç±»</h4> 
<pre><code class="prism language-bash">systemctl start <span class="token function">docker</span>   <span class="token comment"># å¯åŠ¨å®ˆæŠ¤ç¨‹åº</span>
systemctl stop <span class="token function">docker</span>
systemctl restart <span class="token function">docker</span>

<span class="token function">docker</span> system prune <span class="token comment"># åˆ é™¤åœæ­¢çš„å®¹å™¨ï¼Œæ— ç”¨çš„ç½‘ç»œï¼Œæ¸…ç¼“å­˜ï¼Œåˆ é™¤æ— ç”¨çš„é•œåƒ</span>
<span class="token function">docker</span> <span class="token function">rm</span> xx        <span class="token comment"># åˆ é™¤æŒ‡å®šå®¹å™¨ï¼Œæ”¯æŒç®€å†™å‰å‡ ä½è¿›è¡Œæ¨¡ç³ŠåŒ¹é…</span>
<span class="token function">docker</span> rmi xx       <span class="token comment"># åˆ é™¤æŒ‡å®šé•œåƒ</span>

<span class="token function">docker</span> build -t xx <span class="token builtin class-name">.</span>  <span class="token comment"># åœ¨å½“å‰æ–‡ä»¶å¤¹é€‰æ‹©Dockerfileè¿›è¡Œé•œåƒæ„å»ºï¼Œé•œåƒåä¸ºxx</span>
<span class="token function">sudo</span> <span class="token function">docker</span> login -u xxx -p xxx  <span class="token comment"># ä¸Šä¼ å‰éœ€è¦å…ˆç™»å½•</span>
<span class="token function">sudo</span> <span class="token function">docker</span> tag storm moonfish/storm:v1.1 <span class="token comment"># ä¸Šä¼ å‰è¦å…ˆé‡å‘½åï¼Œæ ¼å¼ä¸º  è´¦å·/é•œåƒåï¼šç‰ˆæœ¬å·</span>
<span class="token function">sudo</span> <span class="token function">docker</span> push moonfish/baikal:v1  <span class="token comment"># ä¸Šä¼ </span>
<span class="token function">sudo</span> <span class="token function">docker</span> pull moonfish/baikal:v1  <span class="token comment"># ä¸‹è½½</span>

</code></pre> 
<h3><a id="_293"></a>å‘½ä»¤è¡Œå‚æ•°</h3> 
<h4><a id="docker_build_295"></a>docker build</h4> 
<p>â€“network=host ç›¸å½“äºè™šæ‹Ÿæœºä¸­çš„host onlyé€‰é¡¹ï¼Œä¸»æœºå’Œå®¹å™¨å…±äº«ç½‘å¡ï¼Œåå­—ä¹Ÿç›¸åŒã€‚</p> 
<p>å¦‚æœä¸è¾“å…¥å‚æ•°ï¼Œé‚£ä¹ˆdockerä¼šè‡ªåŠ¨æ„å»ºä¸€ä¸ªæ¡¥æ¥ç½‘ç»œï¼Œå®¹å™¨ä¼šè¿æ¥è‡³è™šæ‹Ÿç½‘å¡ docker0ï¼Œ åœ°å€ä¸º127.17.0.1; è€Œå®¹å™¨ä¼šè‡ªåŠ¨è¢«èµ‹äºˆä¸€ä¸ª127ç½‘æ®µçš„åœ°å€</p> 
<h4><a id="docker_run_301"></a>docker run</h4> 
<ul><li><strong>-a stdin:</strong> æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›</li><li><strong>-d:</strong> åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</li><li><strong>-i:</strong> ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</li><li><strong>-P:</strong> éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£<strong>éšæœº</strong>æ˜ å°„åˆ°ä¸»æœºçš„ç«¯å£</li><li><strong>-p:</strong> æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼š<strong>ä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</strong></li><li><strong>-t:</strong> ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›æç¤ºç¬¦ä¼šå˜ä¸º#å·</li><li><strong>â€“name=â€œnginx-lbâ€:</strong> ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</li><li><strong>â€“dns 8.8.8.8:</strong> æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li><li><strong>-e username=â€œritchieâ€:</strong> è®¾ç½®ç¯å¢ƒå˜é‡</li><li><strong>â€“env-file=[]:</strong> ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›</li><li>**-m ğŸ˜—*è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</li><li><strong>â€“link=[]:</strong> æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›</li><li><strong>â€“volume , -v:</strong> ç»‘å®šä¸€ä¸ªå·</li></ul> 
<h4><a id="docker_exec_317"></a>docker exec</h4> 
<ul><li>-d: Detached Mode: åå°è¿è¡Œ</li><li>-e: è®¾ç½®ç¯å¢ƒå˜é‡</li><li>-i: å±•ç¤ºå®¹å™¨è¾“å…¥ä¿¡æ¯<code>STDIN</code></li><li>â€“privileged: ä¸ºå‘½ä»¤æä¾›ä¸€äº›æ‰©å±•æƒé™</li><li>-t: å‘½ä»¤è¡Œäº¤äº’æ¨¡å¼</li><li>-u: è®¾ç½®ç”¨æˆ·å(format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</li><li>-w: æŒ‡å®šå®¹å™¨å†…çš„ç›®å½•</li></ul> 
<h4><a id="docker_network_327"></a>docker network</h4> 
<p>dockerçš„ç½‘ç»œç®¡ç†è°ƒç”¨çš„æ˜¯iptable</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> network create -d bridge my-bridge-network  <span class="token comment"># å»ºç«‹ä¸€ä¸ªè‡ªå®šä¹‰çš„ç½‘ç»œï¼ŒæŒ‡å®šä¸ºbridgeæ¨¡å¼ï¼›è¿˜å¯ä»¥ä¸ºoverlayæ¨¡å¼</span>
<span class="token function">docker</span> network create -d overlay my-multihost-network  <span class="token comment"># overlayæ¨¡å¼ï¼Œå¤šä¸ªå®¹å™¨ä¹‹é—´å¯ä»¥æ”¾å…¥åŒä¸€ä¸ªç½‘æ®µï¼Œæœ‰dockerç»Ÿä¸€ç®¡ç†</span>
sysctl net.ipv4.conf.all.forwarding<span class="token operator">=</span><span class="token number">1</span>   <span class="token comment"># è®©è‡ªå®šä¹‰ç½‘ç»œèƒ½å¤Ÿä¸å¤–ç•Œé€šä¿¡</span>
<span class="token function">sudo</span> iptables -P FORWARD ACCEPT  <span class="token comment"># iptables æ”¾é€š</span>
</code></pre> 
<h4><a id="other_338"></a>other</h4> 
<pre><code class="prism language-bash"><span class="token function">docker</span> create --name my-nginx --network my-net --publish <span class="token number">8080</span>:80 nginx <span class="token comment"># é€šè¿‡nginxé•œåƒåˆ›å»ºå®¹å™¨ï¼ŒæŒ‡å®šåç§°ï¼ŒæŒ‡å®šç½‘ç»œï¼ŒæŒ‡å®šç«¯å£æ˜ å°„</span>
<span class="token function">docker</span> network connect my-net my-nginx  <span class="token comment"># è¿æ¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œ</span>
</code></pre> 
<h3><a id="_347"></a>é•œåƒåˆ¶ä½œ</h3> 
<h4><a id="python_349"></a>python</h4> 
<h5><a id="_351"></a>ä»£ç </h5> 
<p>pythonä¾èµ–</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /path/to/python-docker
pip3 <span class="token function">install</span> Flask
pip3 freeze <span class="token operator">|</span> <span class="token function">grep</span> Flask <span class="token operator">&gt;&gt;</span> requirements.txt
</code></pre> 
<p>requirements.txt</p> 
<pre><code>scapy==2.4.5
pika==1.3.0
nmap==0.0.1
</code></pre> 
<p>Dockerfile</p> 
<pre><code class="prism language-dockerfile"># syntax=docker/dockerfile:1
FROM python:3.8-slim-buster
WORKDIR /app
COPY requirements.txt requirements.txt
RUN pip3 install -r requirements.txt
COPY . .

</code></pre> 
<pre><code class="prism language-dockerfile">FROM ubuntu:20.04
WORKDIR /app
RUN ["mkdir", "-p", "/var/log/stormEngine"]
RUN ["apt", "update"]
RUN ["apt", "-y", "install", "ethtool", "tcpreplay", "iputils-ping"]
COPY . /app
</code></pre> 
<pre><code class="prism language-dockerfile">FROM ubuntu:20.04
WORKDIR /app
COPY . /app

ENV TZ=Asia/Shanghai \
    DEBIAN_FRONTEND=noninteractive

RUN mkdir -p /var/log/stormEngine \
    &amp;&amp; apt update \
    &amp;&amp; apt install -y tzdata net-tools ethtool tcpreplay iputils-ping\
    &amp;&amp; ln -fs /usr/share/zoneinfo/${TZ} /etc/localtime \
    &amp;&amp; echo ${TZ} &gt; /etc/timezone \
    &amp;&amp; dpkg-reconfigure --frontend noninteractive tzdata \
    &amp;&amp; rm -rf /var/lib/apt/lists/* 
</code></pre> 
<h5><a id="build_407"></a>build</h5> 
<pre><code class="prism language-bash"><span class="token function">docker</span> build --tag hello <span class="token builtin class-name">.</span>
<span class="token function">docker</span> build -t hello <span class="token builtin class-name">.</span>
</code></pre> 
<h5><a id="run_414"></a>run</h5> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run hello
</code></pre> 
<h5><a id="push_420"></a>push</h5> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">docker</span> tag storm moonfish/storm:v1.1
<span class="token function">sudo</span> <span class="token function">docker</span> login -u moonfish -p xxx
<span class="token function">sudo</span> <span class="token function">docker</span> push moonfish/storm:v1.1
</code></pre> 
<h4><a id="java_430"></a>java</h4> 
<h5><a id="jdk_432"></a>jdkå®‰è£…</h5> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> https://download.oracle.com/java/18/latest/jdk-18_linux-x64_bin.tar.gz

<span class="token function">sudo</span> <span class="token function">vi</span> /etc/profile
<span class="token comment"># æ·»åŠ ä»¥ä¸‹3è¡Œ</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/home/ubuntu/Programm/openjdk-18.0.2.1_linux-x64_bin/jdk-18.0.2.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token environment constant">$PATH</span>

<span class="token builtin class-name">source</span> /etc/profile 
</code></pre> 
<p>æˆ–è€…</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-18-jre-headless  <span class="token comment"># version 18~36ea-1</span>
</code></pre> 
<h5><a id="_452"></a>ä»£ç </h5> 
<p>å°†ä»£ç æ‰“åŒ…ä¸ºjaråŒ…,éœ€è¦åœ¨pom.xmlæ–‡ä»¶ä¸­åŠ å…¥æ’ä»¶ï¼Œä»¥ä¸‹ä»£ç å¯ä»¥åŒæ—¶ç”Ÿæˆèƒ–åŒ…å’Œç˜¦åŒ…</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- thin jar --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-jar-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>archive</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addClasspath</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addClasspath</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classpathPrefix</span><span class="token punctuation">&gt;</span></span>lib/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classpathPrefix</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mainClass</span><span class="token punctuation">&gt;</span></span>main.MainApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mainClass</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>archive</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- add dependencies this jar --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-dependency-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>copy-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>copy-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>${project.build.directory}/lib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- fat jar --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-assembly-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>descriptorRefs</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>descriptorRef</span><span class="token punctuation">&gt;</span></span>jar-with-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>descriptorRef</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>descriptorRefs</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>archive</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mainClass</span><span class="token punctuation">&gt;</span></span>main.MainApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mainClass</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--è¿™é‡Œæ”¹æˆè‡ªå·±çš„ä¸»ç±»ä½ç½®--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>archive</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>make-assembly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>single<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code>FROM amazoncorretto:17.0.4-alpine3.15
WORKDIR /app
COPY . /app
ENV PATH=$PATH:$JAVA_HOME/bin
ENV JRE_HOME=${JAVA_HOME}/jre
ENV CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib

</code></pre> 
<pre><code class="prism language-dockerfile">FROM eclipse-temurin:11-jre-jammy
WORKDIR /app
COPY . /app
RUN ["mkdir", "-p", "/app/data"]
RUN ["mkdir", "-p", "/data/pcap_files"]
RUN ["cp", "/app/libpcap.so.1.9.1", "/usr/lib/x86_64-linux-gnu"]
</code></pre> 
<p>åŠ å…¥libpcap.so.1.9.1</p> 
<pre><code class="prism language-dockerfile">FROM eclipse-temurin:11-jre-jammy
WORKDIR /app
COPY . /app
ENV TZ=Asia/Shanghai \
    DEBIAN_FRONTEND=noninteractive
RUN mkdir -p /app/data /data/pcap_files \
    &amp;&amp; cp /app/libpcap.so.1.9.1 /usr/lib/x86_64-linux-gnu \
    &amp;&amp; apt update \
    &amp;&amp; apt install -y tzdata \
    &amp;&amp; ln -fs /usr/share/zoneinfo/${TZ} /etc/localtime \
    &amp;&amp; echo ${TZ} &gt; /etc/timezone \
    &amp;&amp; dpkg-reconfigure --frontend noninteractive tzdata \
    &amp;&amp; rm -rf /var/lib/apt/lists/* 
</code></pre> 
<h4><a id="C_562"></a>C</h4> 
<p>éœ€è¦å°†æ‰€æœ‰ä¾èµ–çš„åº“éƒ½æ‹·è´åˆ°/appç›®å½•ä¸‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¼˜å…ˆé“¾æ¥,ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹</p> 
<pre><code class="prism language-bash">lld baikal
</code></pre> 
<h5><a id="_570"></a>ä»£ç </h5> 
<pre><code class="prism language-dockerfile">FROM ubuntu:16.04
WORKDIR /app
COPY . /app
ENV TZ=Asia/Shanghai \
    DEBIAN_FRONTEND=noninteractive
RUN mkdir -p /usr/local/baikal /data/pcap_files \
    &amp;&amp; apt update \
    &amp;&amp; apt install -y tzdata \
    &amp;&amp; ln -fs /usr/share/zoneinfo/${TZ} /etc/localtime \
    &amp;&amp; echo ${TZ} &gt; /etc/timezone \
    &amp;&amp; dpkg-reconfigure --frontend noninteractive tzdata \
    &amp;&amp; rm -rf /var/lib/apt/lists/* 
</code></pre> 
<h3><a id="_589"></a>å¤šé˜¶æ®µæ„å»º</h3> 
<h2><a id="_597"></a>å¤‡æ³¨</h2> 
<ol><li> <p>A 2018 analysis found that a typical Docker use case involves running eight containers per host</p> </li><li> <p>éœ€è¦å¼€å¯nested virtualizationï¼Œå¦åˆ™docker desktopæ— æ³•ä½¿ç”¨<br> æ–¹æ³•ï¼š è™šæ‹Ÿæœºè®¾ç½®-&gt;ç¡¬ä»¶-&gt;å¤„ç†å™¨-&gt;è™šæ‹ŸåŒ– IntelVT-x/EPT<br> å¦å¤–</p> <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> -y <span class="token function">install</span> libvirt-clients libvirt-daemon qemu
<span class="token function">sudo</span> add-apt-repository ppa:jacob/virtualisation
</code></pre> </li><li> <p>imageæ˜¯é•œåƒ,ä½ç½®åœ¨/var/lib/docker,é‡Œé¢æœ‰ï¼ˆæ²¡æœ‰é•œåƒ,ï¼‰å®¹å™¨å’Œåˆ†å±‚,éƒ½å­˜å‚¨åœ¨è¿™é‡Œï¼› é•œåƒä½ç½®æ˜¯ï¼šsetting-&gt;advanced-&gt;disk image locationä¸­å¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹</p> </li><li> <p>and the volumeâ€™s contents exist outside the lifecycle of a given container.</p> </li><li> <p>Cè¯­è¨€å¦‚æœä½¿ç”¨é™æ€ç¼–è¯‘ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å‘å®¹å™¨ä¸­æ‹·è´ä¾èµ–åº“äº†ï¼Œé•œåƒä¹Ÿä¼šå˜å¾—éå¸¸å°ã€‚æ„å»ºæ—¶åªéœ€è¦ From scratchå³å¯</p> </li><li> <p>å¦‚æœæ˜¯Cçš„helloworld é•œåƒå¿…é¡»æ·»åŠ CMDï¼Œå¦åˆ™æ— æ³•è¿è¡Œã€‚ å› ä¸ºé•œåƒä¸­æ²¡å“Ÿbashç¨‹åº</p> </li><li> <p>â€œ#â€ prompt é»˜è®¤æ˜¯rootæƒé™</p> </li><li> <p>è‹¥æ— ç‰¹æ®Šé…ç½®ï¼Œä¸åŒhostä¹‹é—´çš„å®¹å™¨æ— æ³•é€šä¿¡ï¼› é™¤éä½¿ç”¨overlayæ¨¡å¼</p> </li><li> <p>File sharing å¯ä»¥åœ¨IDEä¸­ä¿®æ”¹æºä»£ç ï¼Œåœ¨å®¹å™¨ä¸­æµ‹è¯•</p> </li><li> <p>linuxä¸‹docker desktop ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæœ€å¥½ç”¨å‘½ä»¤è¡Œæ“ä½œ</p> </li><li> <p>å‘å¸ƒé•œåƒæ—¶ï¼Œ éœ€è¦é‡å‘½åä¸º<strong>dockerhubç”¨æˆ·å/é•œåƒå</strong>ï¼Œç„¶åå†push</p> </li><li> <p>desktop å’Œ docker engineçš„é…ç½®å¹¶ä¸é€šç”¨, bugå¤ªå¤šï¼Œæ— æ³•ä½¿ç”¨</p> </li><li> <p>æ—¶åŒºä¿®æ”¹</p> <pre><code class="prism language-dockerfile">ENV TZ=Asia/Shanghai \
    DEBIAN_FRONTEND=noninteractive

RUN apt update \
    &amp;&amp; apt install -y tzdata \
    &amp;&amp; ln -fs /usr/share/zoneinfo/${TZ} /etc/localtime \
    &amp;&amp; echo ${TZ} &gt; /etc/timezone \
    &amp;&amp; dpkg-reconfigure --frontend noninteractive tzdata \
    &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre> </li><li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9727be5c6fcba0f061ac5a6f5ca3e677/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ç”µé‡è®¡é‡èŠ¯ç‰‡HLWï¼·8110çš„å‰ç«¯ç”µè·¯è®¾è®¡ä¸è¯¯å·®åˆ†ææ ¡æ­£</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb037b989e3fef99244d5eacc55aea6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Springçš„@Autowiredæ³¨è§£åŸç†åˆ†æ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§ç™½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>