<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WPF 菜单栏滚动到顶部后固定的两种方法 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="WPF 菜单栏滚动到顶部后固定的两种方法" />
<meta property="og:description" content="最近项目中有这么个需求：
菜单栏滚动到顶部后固定在顶部，专业的名词叫吸顶。。这在移动端还是比较常见的。
看看效果：
下面直接看看代码喽，代码不多：
第一种方法思路：
写一个和菜单一模一样的菜单，放在窗口顶部隐藏，当菜单滚动到上方时，就显示出来，反之隐藏。
MainWindow1.xaml如下：
&lt;Window x:Class=&#34;wpfcore.MainWindow1&#34; xmlns=&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34; xmlns:x=&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34; xmlns:d=&#34;http://schemas.microsoft.com/expression/blend/2008&#34; xmlns:mc=&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34; xmlns:local=&#34;clr-namespace:wpfcore&#34; mc:Ignorable=&#34;d&#34; Title=&#34;MainWindow1&#34; Height=&#34;450&#34; Width=&#34;800&#34;&gt; &lt;Grid&gt; &lt;ScrollViewer ScrollChanged=&#34;ScrollViewer_ScrollChanged&#34;&gt; &lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition Height=&#34;200&#34;/&gt; &lt;RowDefinition Height=&#34;auto&#34;/&gt; &lt;RowDefinition Height=&#34;*&#34;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;Grid Grid.Row=&#34;0&#34; x:Name=&#34;banner&#34;&gt; &lt;Image Source=&#34;D:\bizhi\国漫\2-9.jpg&#34; Stretch=&#34;UniformToFill&#34; HorizontalAlignment=&#34;Center&#34; VerticalAlignment=&#34;Center&#34;/&gt; &lt;TextBlock HorizontalAlignment=&#34;Center&#34; VerticalAlignment=&#34;Center&#34; FontSize=&#34;30&#34; Foreground=&#34;White&#34; Text=&#34;这是顶部Banner&#34;/&gt; &lt;/Grid&gt; &lt;StackPanel Grid.Row=&#34;1&#34; Panel.ZIndex=&#34;100&#34; x:Name=&#34;menu&#34; Orientation=&#34;Horizontal&#34; TextBlock.FontSize=&#34;18&#34; Background=&#34;LightBlue&#34;&gt; &lt;TextBlock Text=&#34;首页&#34; Margin=&#34;10&#34;&gt;&lt;/TextBlock&gt; &lt;TextBlock Text=&#34;编辑&#34; Margin=&#34;10&#34;&gt;&lt;/TextBlock&gt; &lt;TextBlock Text=&#34;视图&#34; Margin=&#34;10&#34;&gt;&lt;/TextBlock&gt; &lt;TextBlock Text=&#34;调试&#34; Margin=&#34;10&#34;&gt;&lt;/TextBlock&gt; &lt;TextBlock Text=&#34;WPF UI&#34; Margin=&#34;10&#34;&gt;&lt;/TextBlock&gt; &lt;/StackPanel&gt; &lt;Border Height=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/94076f1bdb8a838deb42c4ef2f1a2598/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-23T07:45:00+08:00" />
<meta property="article:modified_time" content="2021-06-23T07:45:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">WPF 菜单栏滚动到顶部后固定的两种方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p>最近项目中有这么个需求：<br></p> 
 <p>    菜单栏滚动到顶部后固定在顶部，专业的名词叫吸顶。。这在移动端还是比较常见的。<br></p> 
 <p>看看效果：<br></p> 
 <p>下面直接看看代码喽，代码不多：</p> 
 <p>第一种方法思路：<br></p> 
 <p>    写一个和菜单一模一样的菜单，放在窗口顶部隐藏，当菜单滚动到上方时，就显示出来，反之隐藏。<br></p> 
 <p>MainWindow1.xaml如下：<br></p> 
 <pre class="has"><code class="language-xml">&lt;Window x:Class="wpfcore.MainWindow1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:wpfcore"
        mc:Ignorable="d"
        Title="MainWindow1" Height="450" Width="800"&gt;
    &lt;Grid&gt;
        &lt;ScrollViewer ScrollChanged="ScrollViewer_ScrollChanged"&gt;
            &lt;Grid&gt;
                &lt;Grid.RowDefinitions&gt;
                    &lt;RowDefinition Height="200"/&gt;
                    &lt;RowDefinition Height="auto"/&gt;
                    &lt;RowDefinition Height="*"/&gt;
                &lt;/Grid.RowDefinitions&gt;
                &lt;Grid Grid.Row="0" x:Name="banner"&gt;
                    &lt;Image Source="D:\bizhi\国漫\2-9.jpg" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/&gt;
                    &lt;TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="30" Foreground="White" Text="这是顶部Banner"/&gt;
                &lt;/Grid&gt;
                &lt;StackPanel Grid.Row="1" Panel.ZIndex="100" x:Name="menu" Orientation="Horizontal" TextBlock.FontSize="18" Background="LightBlue"&gt;
                    &lt;TextBlock Text="首页" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="编辑" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="视图" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="调试" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="WPF UI" Margin="10"&gt;&lt;/TextBlock&gt;
                &lt;/StackPanel&gt;
                &lt;Border Height="1000" Grid.Row="22"&gt;
                    &lt;Border.Background&gt;
                        &lt;LinearGradientBrush&gt;
                            &lt;GradientStop Color="Red" Offset="0"/&gt;
                            &lt;GradientStop Color="Green" Offset="0.5"/&gt;
                            &lt;GradientStop Color="Blue" Offset="1"/&gt;
                        &lt;/LinearGradientBrush&gt;
                    &lt;/Border.Background&gt;
                    &lt;TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="30" Foreground="White" Text="这是顶部Banner"/&gt;
                &lt;/Border&gt;
            &lt;/Grid&gt;
        &lt;/ScrollViewer&gt;
        &lt;StackPanel x:Name="topMenu" VerticalAlignment="Top" Visibility="Hidden" Orientation="Horizontal" TextBlock.FontSize="18" Background="LightBlue"&gt;
            &lt;TextBlock Text="首页" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="编辑" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="视图" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="调试" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="WPF UI" Margin="10"&gt;&lt;/TextBlock&gt;
        &lt;/StackPanel&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;
</code></pre> 
 <p>MainWindow1.cs代码：<br></p> 
 <pre class="has"><code class="language-cs">using System.Windows;


namespace wpfcore
{
    public partial class MainWindow1 : Window
    {
        public MainWindow1()
        {
            InitializeComponent();
        }
        private void ScrollViewer_ScrollChanged(object sender, System.Windows.Controls.ScrollChangedEventArgs e)
        {
            if (e.VerticalOffset &gt; banner.ActualHeight)
            {
                 topMenu.Visibility = Visibility.Visible;
            }
            else
            {
                topMenu.Visibility = Visibility.Hidden;
            }
        }
    }
}
</code></pre> 
 <p style="text-align: center">---------------分隔线------------------</p> 
 <p style="text-align: left">第二种方法：</p> 
 <p style="text-align: left">    在菜单 栏内添加RenderTransform。当菜单滚动到上方时，就设置TranslateTransform.YProperty  达到 同样效果<br></p> 
 <p style="text-align: left">MainWindow.xaml代码如下 ：</p> 
 <pre class="has"><code class="language-xml">&lt;Window x:Class="wpfcore.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:wpfcore" 
        xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
        mc:Ignorable="d"
        UseLayoutRounding="True"
        Title="MainWindow" Width="600" Height="340"&gt;
    &lt;Grid&gt;
        &lt;ScrollViewer ScrollChanged="ScrollViewer_ScrollChanged"&gt;
            &lt;Grid&gt;
            &lt;Grid.RowDefinitions&gt;
                &lt;RowDefinition Height="200"/&gt;
                &lt;RowDefinition Height="auto"/&gt;
                &lt;RowDefinition Height="*"/&gt;
            &lt;/Grid.RowDefinitions&gt;
            &lt;Grid Grid.Row="0" x:Name="banner"&gt;
                &lt;Image Source="D:\bizhi\国漫\2-9.jpg" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/&gt;
                &lt;TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="30" Foreground="White" Text="这是顶部Banner"/&gt;
            &lt;/Grid&gt;
            &lt;StackPanel Grid.Row="1" Panel.ZIndex="100" x:Name="menu" Orientation="Horizontal" TextBlock.FontSize="18" Background="LightBlue"&gt;
                    &lt;StackPanel.RenderTransform&gt;
                        &lt;TranslateTransform x:Name="menuTranslate" Y="0.0"/&gt;
                    &lt;/StackPanel.RenderTransform&gt;
                    &lt;TextBlock Text="首页" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="编辑" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="视图" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="调试" Margin="10"&gt;&lt;/TextBlock&gt;
                    &lt;TextBlock Text="WPF UI" Margin="10"&gt;&lt;/TextBlock&gt;
                &lt;/StackPanel&gt;
            &lt;Border Height="1000" Grid.Row="22"&gt;
                &lt;Border.Background&gt;
                    &lt;LinearGradientBrush&gt;
                        &lt;GradientStop Color="Red" Offset="0"/&gt;
                        &lt;GradientStop Color="Green" Offset="0.5"/&gt;
                        &lt;GradientStop Color="Blue" Offset="1"/&gt;
                    &lt;/LinearGradientBrush&gt;
                &lt;/Border.Background&gt;
                    &lt;TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="30" Foreground="White" Text="这是顶部Banner"/&gt;
                &lt;/Border&gt;
        &lt;/Grid&gt;
    &lt;/ScrollViewer&gt;
        &lt;StackPanel x:Name="topMenu" VerticalAlignment="Top" Visibility="Hidden" Orientation="Horizontal" TextBlock.FontSize="18" Background="LightBlue"&gt;
            &lt;TextBlock Text="首页" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="编辑" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="视图" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="调试" Margin="10"&gt;&lt;/TextBlock&gt;
            &lt;TextBlock Text="WPF UI" Margin="10"&gt;&lt;/TextBlock&gt;
        &lt;/StackPanel&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;


</code></pre> 
 <p style="text-align: left">MainWindow.cs代码：<br></p> 
 <pre class="has"><code class="language-cs">using System.Windows;
using System.Windows.Media;


namespace wpfcore
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }


        private void ScrollViewer_ScrollChanged(object sender, System.Windows.Controls.ScrollChangedEventArgs e)
        {
            menuTranslate.SetValue(TranslateTransform.YProperty, e.VerticalOffset);
            if (e.VerticalOffset &gt; banner.ActualHeight)
            {
                menuTranslate.SetValue(TranslateTransform.YProperty, e.VerticalOffset-banner.ActualHeight);
            }
            else
            {
                menuTranslate.SetValue(TranslateTransform.YProperty, 0.0);
            }
        }
    }
}


</code></pre> 
 <p style="text-align: left">你还有更好的方法吗？</p> 
 <p style="text-align: left">欢迎加入WPF UI交流群哦，关注本公众号后，回复加群，即可获取群二维码。</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/18/ff/Z95llr1f_o.png"></p> 
 <p style="text-align: right">如果喜欢，点个赞呗~</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6e36b644816716f7c4f48b476217f276/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">学计算机专业独立显卡有必要吗,不玩游戏独立显卡有什么作用_如果不玩游戏需要选择独立显卡吗－系统城...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7c07e5f2360db7dcf532836a08660ffb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">怎么更改计算机管理员用户名和密码,Win10系统无法修改管理员账户密码怎么办？...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>