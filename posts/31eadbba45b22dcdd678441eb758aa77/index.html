<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C#系列学习笔记9：泛型 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C#系列学习笔记9：泛型" />
<meta property="og:description" content="泛型 泛型常用泛型集合协变和逆变 泛型 泛型，在初始化类、方法、接口等之前，延迟指定一个或多个类型，直到实际在程序中使用它的时候，这样可以降低运行时转换或装箱操作的成本或风险。有时候在封装代码的时候，我们不关心组件之间传递的是什么类型的数据，这时就可以用泛型来定义数据。System.Collections.Generic命名空间包含几个基于泛型的集合类。
在声明泛型类、结构的时候，我们可以通过使用 where 上下文关键字指定约束
public class Employee { public Employee(string s, int i) =&gt; (Name, ID) = (s, i); public string Name { get; set; } public int ID { get; set; } } public class GenericList&lt;T&gt; where T : Employee // 类型参数必须是指定的基类或派生自指定的基类 { private class Node { public Node(T t) =&gt; (Next, Data) = (null, t); public Node Next { get; set; } public T Data { get; set; } } private Node head; public void AddHead&lt;T&gt;(T t) where T struct // T必须是不可为 null 的值类型 { Node n = new Node(t) { Next = head }; head = n; } public IEnumerator&lt;T&gt; GetEnumerator() { Node current = head; while (current !" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/31eadbba45b22dcdd678441eb758aa77/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-14T19:20:10+08:00" />
<meta property="article:modified_time" content="2020-09-14T19:20:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C#系列学习笔记9：泛型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>泛型</h4> 
 <ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">泛型</a></li><li><a href="#_45" rel="nofollow">常用泛型集合</a></li><li><a href="#_53" rel="nofollow">协变和逆变</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_1"></a>泛型</h4> 
<p>泛型，在初始化类、方法、接口等之前，延迟指定一个或多个类型，直到实际在程序中使用它的时候，这样可以降低运行时转换或装箱操作的成本或风险。有时候在封装代码的时候，我们不关心组件之间传递的是什么类型的数据，这时就可以用泛型来定义数据。System.Collections.Generic命名空间包含几个基于泛型的集合类。</p> 
<p>在声明泛型类、结构的时候，我们可以通过使用 <code>where</code> 上下文关键字指定约束</p> 
<pre><code>public class Employee
{
    public Employee(string s, int i) =&gt; (Name, ID) = (s, i);
    public string Name { get; set; }
    public int ID { get; set; }
}

public class GenericList&lt;T&gt; where T : Employee  // 类型参数必须是指定的基类或派生自指定的基类
{
    private class Node
    {
        public Node(T t) =&gt; (Next, Data) = (null, t);

        public Node Next { get; set; }
        public T Data { get; set; }
    }

    private Node head;

    public void AddHead&lt;T&gt;(T t) where T struct   // T必须是不可为 null 的值类型
    {
        Node n = new Node(t) { Next = head };
        head = n;
    }

    public IEnumerator&lt;T&gt; GetEnumerator()
    {
        Node current = head;

        while (current != null)
        {
            yield return current.Data;
            current = current.Next;
        }
    }

}
</code></pre> 
<h4><a id="_45"></a>常用泛型集合</h4> 
<p><code>List&lt;T&gt;</code>. ArrayList的泛型等效类。位于 System.Collections.Generic<br> <code>Dictionary&lt;Tkey, Tvalue&gt;</code>. 与Hashtable等效的，称为泛型哈希表。位于 System.Collections.Generic<br> <code>Queue&lt;T&gt;</code><br> <code>Stack&lt;T&gt;</code></p> 
<p><strong>泛型是类的模板，类是实例的模板</strong>。使用泛型的类，在确定真正类型的时候才实例化；一个类，在实例化的实收才真正确定为对象。</p> 
<h4><a id="_53"></a>协变和逆变</h4> 
<p>协变，简单的说可以认为是一个细节化程度高的类型赋值给细节化程度低的类型，向下兼容。逆变反之。</p> 
<p>例如String继承自Object，因此：</p> 
<pre><code>// String -&gt; Object 协变转换
string str = "test";  
object obj = str;  

// String -&gt; Object 协变转换
IEnumerable&lt;string&gt; strings = new List&lt;string&gt;();  
IEnumerable&lt;object&gt; objects = strings;

static void SetObject(object obj) { }  
static object GetObject() { return null; }  

// Object -&gt; String 逆变转换
Action&lt;object&gt; actObject = SetObject;  
Action&lt;string&gt; actString = GetObject;  
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eae3ee17179db648940012b1a101f886/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#系列学习笔记8：程序集和命名空间</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4355f34297eebdc8ae4f775379de2869/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springCloud微服务 解决 Too many open files 导致的应用宕机问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>