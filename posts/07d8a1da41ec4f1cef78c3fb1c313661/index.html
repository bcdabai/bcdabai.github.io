<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>POJ 3304(线段与直线相交）[改] - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="POJ 3304(线段与直线相交）[改]" />
<meta property="og:description" content="Language: Default Segments Time Limit: 1000MS Memory Limit: 65536KTotal Submissions: 7144 Accepted: 2135 Description
在平面内给 n 条线段，问是否存在一条直线，使得所有线段在这条直线上的投影有公共点.
Input
第一行输入 T 表示数据组数，接下来 T 组数据每组第一行一个整数 n ≤ 100 表示线段数，接下来n 行每行有 x1 y1 x2 y2 表示线段的两个端点 (x1, y1) 和 (x2, y2) .
Output
对于每组数据,如果存在这样的直线，输出一行 &#34;Yes!&#34;, 否则输出 &#34;No!&#34; . 精度|a - b| &lt; 10-8.
Sample Input
3 2 1.0 2.0 3.0 4.0 4.0 5.0 6.0 7.0 3 0.0 0.0 0.0 1.0 0.0 1.0 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/07d8a1da41ec4f1cef78c3fb1c313661/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-01-11T17:00:40+08:00" />
<meta property="article:modified_time" content="2013-01-11T17:00:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">POJ 3304(线段与直线相交）[改]</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table border="0" width="100%" background="http://poj.org/images/table_back.jpg" style="font-family:Simsun"><tbody><tr><td> 
    <div style="position:absolute; right:10px">
      Language: 
     <option value="default"> Default</option> 
    </div> 
    <div class="ptt" lang="en-US" style="text-align:center; font-size:18pt; font-weight:bold; color:blue">
      Segments 
    </div> 
    <div class="plm" style="text-align:center; font-size:12pt"> 
     <table align="center"><tbody><tr><td><strong>Time Limit:</strong> 1000MS</td><td width="10px"> </td><td><strong>Memory Limit:</strong> 65536K</td></tr><tr><td><strong>Total Submissions:</strong> 7144</td><td width="10px"> </td><td><strong>Accepted:</strong> 2135</td></tr></tbody></table> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Description</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt"> 
     <p>在平面内给 <em>n</em> 条线段，问是否存在一条直线，使得所有线段在这条直线上的投影有公共点.</p> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Input</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt"> 
     <p>第一行输入 <em>T</em> 表示数据组数，接下来 <em>T</em> 组数据每组第一行一个整数 <em>n</em> ≤ 100 表示线段数，接下来<em>n</em> 行每行有 <em>x</em><sub>1</sub> <em>y</em><sub>1</sub> <em>x</em><sub>2</sub> <em>y</em><sub>2</sub> 表示线段的两个端点 (<em>x</em><sub>1</sub>, <em>y</em><sub>1</sub>) 和 (<em>x</em><sub>2</sub>, <em>y</em><sub>2</sub>) .</p> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Output</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt"> 
     <p>对于每组数据,如果存在这样的直线，输出一行 "Yes!", 否则输出 "No!" . 精度|<em>a</em> - <em>b</em>| &lt; 10<sup>-8</sup>.</p> 
    </div> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Sample Input</p> <pre class="sio" style="font-family:'Courier New',Courier,monospace; font-size:12pt">3
2
1.0 2.0 3.0 4.0
4.0 5.0 6.0 7.0
3
0.0 0.0 0.0 1.0
0.0 1.0 0.0 2.0
1.0 1.0 2.0 1.0
3
0.0 0.0 0.0 1.0
0.0 2.0 0.0 3.0
1.0 1.0 2.0 1.0</pre> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Sample Output</p> <pre class="sio" style="font-family:'Courier New',Courier,monospace; font-size:12pt">Yes!
Yes!
No!</pre> <p class="pst" style="font-size:18pt; font-weight:bold; color:blue">Source</p> 
    <div class="ptx" lang="en-US" style="font-family:'Times New Roman',Times,serif; font-size:12pt"> 
     <a target="_blank" href="http://poj.org/searchproblem?field=source&amp;key=Amirkabir+University+of+Technology+Local+Contest+2006" rel="nofollow noopener noreferrer" style="text-decoration:none">Amirkabir University of Technology Local Contest 2006</a> 
    </div> </td></tr></tbody></table> 
<span style="font-size:14px"><br> </span> 
<p><span style="font-size:14px">1.该题可转换为是否存在一条直线与所有线段相交(垂直这条直线的直线即为所求)。</span></p> 
<p><span style="font-size:14px">2.如果存在，则必能通过移动旋转，使其过这2个线段的端点</span></p> 
<p><span style="font-size:14px">需要特判2个点如果相同，那么连不成线段，因为最后叉积算出来为0.</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px"></span></p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;cmath&gt;
#include&lt;iostream&gt;
using namespace std;
#define eps 1e-8
#define MAXN (200+10)
struct P
{
	long double x,y;
	P(){}
	P(long double _x,long double _y):x(_x),y(_y){}
}a[MAXN*2];
struct V
{
	long double x,y;
	V(){}
	V(long double _x,long double _y):x(_x),y(_y){}
	V(P a,P b):x(b.x-a.x),y(b.y-a.y){}
};
struct S
{
	P A,B;
	S(P _A,P _B):A(_A),B(_B){}
	S(){}
};
double operator*(V a,V b)
{
	return a.x*b.y-b.x*a.y;
}
bool corr(P A,P B,P C,P D)
{
	V AB=V(A,B),AC=V(A,C),AD=V(A,D);
	return ((AC*AB)*(AB*AD)&gt;-eps);
}
bool fabs (double a,double b)
{
	if (abs(a-b)&lt;eps) return 1 ;return 0;
}
bool fabs(P A,P B)
{
	return (fabs(A.x,B.x)&amp;&amp;fabs(A.y,B.y));
}
int t,n;
int main()
{
//	freopen("poj3304.in","r",stdin);
	scanf("%d",&amp;t);
	while (t--)
	{
		cin&gt;&gt;n;
		bool flag=0;
		for (int i=1;i&lt;=2*n;i++) cin&gt;&gt;a[i].x&gt;&gt;a[i].y;
		for (int i=1;i&lt;2*n&amp;&amp;!flag;i++) 
		{
			for (int j=i+1;j&lt;=2*n;j++)
			{
				if (fabs(a[i],a[j])) continue;
				S l=S(a[i],a[j]);
				int k;
				for (k=1;k&lt;=n;k++)
				{
					if (!corr(l.A,l.B,a[k*2-1],a[k*2])) break;
				//	cout&lt;&lt;k;
				}				
				if (k==n+1) {cout&lt;&lt;"Yes!\n"; flag=1;break;}	
			}
		}

		if (!flag) cout&lt;&lt;"No!\n";
		

	}
	return 0;
}</code></pre> 
<br> 
<br> 
<p></p> 
<p><span style="font-size:14px"><br> </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1deae68362b180dce51786de1d3181de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VS调试，提示 函数计算超时。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b2109163e767ea756eecbaae754d5690/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">修改hMailServer管理密码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>