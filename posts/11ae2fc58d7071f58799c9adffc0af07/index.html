<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超好用的uthash万岁~~~ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="超好用的uthash万岁~~~" />
<meta property="og:description" content="#include &#34;uthash.h&#34; #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;unistd.h&gt; /*这个uthash必须构造一个结构体*/ struct packet { int key; /*这个是用来做hash的key值*/ char msg[10]; UT_hash_handle hh; /*这个结构是uthash的结构体，里面包含next，prev，hash值等信息*/ }; int main() { struct packet *pkt, *tmp; int i; struct packet *hash_packet = NULL; /*必须初始化为NULL*/ /*打印这个hash的节点数*/ printf (&#34;hash count = %d \n&#34;, HASH_COUNT(hash_packet)); /*往hash中添加节点*/ for (i=0; i&lt;10; i&#43;&#43;) { pkt = (struct packet *)malloc(sizeof(struct packet)); pkt-&gt;key=i; sprintf (pkt-&gt;msg, &#34;i=%d&#34;, i); HASH_FIND_INT(hash_packet, &amp;i, tmp); if (tmp != NULL) { printf (&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/11ae2fc58d7071f58799c9adffc0af07/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-07-19T16:28:39+08:00" />
<meta property="article:modified_time" content="2012-07-19T16:28:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超好用的uthash万岁~~~</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-cpp">#include "uthash.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;


/*这个uthash必须构造一个结构体*/
struct packet
{
        int key;       /*这个是用来做hash的key值*/
        char msg[10]; 
        UT_hash_handle hh; /*这个结构是uthash的结构体，里面包含next，prev，hash值等信息*/
};

int main()
{
        struct packet *pkt, *tmp;
        int i;

        struct packet *hash_packet = NULL; /*必须初始化为NULL*/
        


        /*打印这个hash的节点数*/
        printf ("hash count = %d \n", HASH_COUNT(hash_packet));




        /*往hash中添加节点*/

        for (i=0; i&lt;10; i++)
        {
                pkt = (struct packet *)malloc(sizeof(struct packet));
                pkt-&gt;key=i;
                sprintf (pkt-&gt;msg, "i=%d", i);

                HASH_FIND_INT(hash_packet, &amp;i, tmp);
                if (tmp != NULL)
                {
                        printf ("The key(%d) exists in hash. \n", i);
                        continue;
                }
                HASH_ADD_INT(hash_packet, key, pkt);
                printf ("insert item. key=%d,value=%p \n", i, pkt);
        }
        printf ("hash count = %d \n", HASH_COUNT(hash_packet));




        /*通过key查找*/
        for (i=0; i&lt;13; i++)
        {
                HASH_FIND_INT(hash_packet, &amp;i, tmp);
                if (tmp == NULL)
                {
                        printf ("find not item. key=%d,value=%p \n", i, tmp);
                        continue;
                }
                printf ("find item. key=%d,value=%p \n", i, tmp);
        }

        printf ("hash count = %d \n", HASH_COUNT(hash_packet));




        /*遍历这个hash表*/
        for (tmp=hash_packet; tmp != NULL; tmp=tmp-&gt;hh.next)
                printf (" %d =&gt; %s \n", tmp-&gt;key, tmp-&gt;msg);
        /*删除节点*/
        for (i=0; i&lt;13; i++)
        {
                HASH_FIND_INT(hash_packet, &amp;i, tmp);
                if (tmp == NULL)
                {
                        printf ("find not item. key=%d,value=%p \n", i, tmp);
                        continue;
                }

                /*删除节点不会释放你的空间必须自己释放*/
                HASH_DEL(hash_packet, tmp);
                free(tmp);
                printf ("delete itme. key=%d,value=%p \n", i, tmp);
        }
        printf ("hash count = %d \n", HASH_COUNT(hash_packet));
        return 0;
}
</code></pre> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/527d905067952e801e157377eddffeb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【转】网页调试语法错误代码说明(通用于IIS,MYSQL,FTP,ASP，VBScript)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ffc739e20d24dc4cc3b303055b4a70e7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">poj  1043</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>