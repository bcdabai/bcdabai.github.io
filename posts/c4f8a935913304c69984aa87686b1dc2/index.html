<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>查看cuda cudnn 版本 &amp; 一些常见疑问 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="查看cuda cudnn 版本 &amp; 一些常见疑问" />
<meta property="og:description" content="一、快速确定版 查看cuda nvcc -V 查看cudnn dpkg -l | grep cudnn 二、历史方法 有一些已经失效，这里仅仅作为备选 查看cuda 方法一 nvcc -V 或者 nvcc —version 方法二 cat /usr/local/cuda/version.txt 或者 cat /usr/local/cuda/version.json 查看cudnn 方法一 dpkg -l | grep cudnn 方法二 whereis cudnn_version 或者 whereis cudnn.h 获得真实路径。这里以/usr/local/cuda/include/为例 cat /usr/local/cuda/include/cudnn.h |grep CUDNN_MAJOR -A 2 cat /usr/local/cuda/include/cudnn_version.h |grep CUDNN_MAJOR -A 2 三、不建议使用的方法 方法一、pytorch 接口 import torch # 查看torch的版本 print(torch.__version__) # 查看cuda的版本 print(torch.version.cuda) # 查看cudnn的版本 print(torch.backends.cudnn.version()) 方法二、nvidia-smi 命令 原因简单介绍 对于算法工程师我们知道一般层级为GPU硬件-GPU驱动（driver）—cuda-(cudnn)-pytorch. 其中cuda 一般也分两种:driver api(nvidia-smi显示的)和runtime api (nvcc -v等显示的)。用于支持driver api的必要文件由 GPU driver installer 安装，nvidia-smi就属于这一类API；而用于支持runtime api的必要文件是由 CUDA Toolkit installer 安装。nvcc是与CUDA Toolkit一起安装的CUDA compiler-driver tool，它只知道它自身构建时的CUDA runtime版本，并不知道安装了什么版本的GPU driver，甚至不知道是否安装了GPU driver。如果driver API和runtime API的CUDA版本不一致可能是因为你使用的是单独的GPU driver installer，而不是CUDA Toolkit installer里的GPU driver installer。一般现在大家使用docker 开发技术，宿主机安装driver， docker 内部安装cuda cudnn，这时一般nvidia-smi 和 nvcc -v 的结果便是不一样的，通常driver api 的版本能向下兼容 runtime api 的版本。 Nvidia 驱动和cuda对应表： CUDA 12." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/c4f8a935913304c69984aa87686b1dc2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-13T16:20:54+08:00" />
<meta property="article:modified_time" content="2022-12-13T16:20:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">查看cuda cudnn 版本 &amp; 一些常见疑问</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:#0433ff;">一、快速确定版</span></h2> 
<h3><span style="color:#9437ff;">查看cuda</span></h3> 
<div>
      nvcc -V 
</div> 
<h3><span style="color:#9437ff;">查看cudnn</span></h3> 
<div>
      dpkg -l | grep cudnn 
</div> 
<div></div> 
<h2><span style="color:#0433ff;">二、历史方法</span></h2> 
<div>
      有一些已经失效，这里仅仅作为备选 
</div> 
<h3><span style="color:#9437ff;">查看cuda</span></h3> 
<div>
      方法一 
</div> 
<div>
      nvcc -V 或者 nvcc —version 
</div> 
<div>
      方法二 
</div> 
<div>
      cat /usr/local/cuda/version.txt 或者 cat /usr/local/cuda/version.json 
</div> 
<div></div> 
<h3><span style="color:#9437ff;">查看cudnn</span></h3> 
<div>
      方法一 
</div> 
<div>
      dpkg -l | grep cudnn 
</div> 
<div>
      方法二 
</div> 
<div>
      whereis cudnn_version 或者 whereis cudnn.h 获得真实路径。这里以/usr/local/cuda/include/为例 
</div> 
<div>
      cat /usr/local/cuda/include/cudnn.h |grep CUDNN_MAJOR -A 2 
</div> 
<div>
      cat /usr/local/cuda/include/cudnn_version.h |grep CUDNN_MAJOR -A 2 
</div> 
<div></div> 
<h2><span style="color:#0433ff;">三、不建议使用的方法</span></h2> 
<h3><span style="color:#956fe7;">方法一、pytorch 接口</span></h3> 
<div>
      import torch 
</div> 
<div>
      # 查看torch的版本 
</div> 
<div>
      print(torch.__version__) 
</div> 
<div>
      # 查看cuda的版本 
</div> 
<div>
      print(torch.version.cuda) 
</div> 
<div>
      # 查看cudnn的版本 
</div> 
<div>
      print(torch.backends.cudnn.version()) 
</div> 
<div></div> 
<h3><span style="color:#9437ff;">方法二、nvidia-smi 命令</span></h3> 
<div></div> 
<h3><span style="color:#9437ff;">原因简单介绍</span></h3> 
<div>
      对于算法工程师我们知道一般层级为GPU硬件-GPU驱动（driver）—cuda-(cudnn)-pytorch. 
</div> 
<div>
      其中cuda 一般也分两种:driver api(nvidia-smi显示的)和runtime api (nvcc -v等显示的)。用于支持driver api的必要文件由 GPU driver installer 安装，nvidia-smi就属于这一类API；而用于支持runtime api的必要文件是由 CUDA Toolkit installer 安装。nvcc是与CUDA Toolkit一起安装的CUDA compiler-driver tool，它只知道它自身构建时的CUDA runtime版本，并不知道安装了什么版本的GPU driver，甚至不知道是否安装了GPU driver。如果driver API和runtime API的CUDA版本不一致可能是因为你使用的是单独的GPU driver installer，而不是CUDA Toolkit installer里的GPU driver installer。一般现在大家使用docker 开发技术，宿主机安装driver， docker 内部安装cuda cudnn，这时一般nvidia-smi 和 nvcc -v 的结果便是不一样的，通常driver api 的版本能向下兼容 runtime api 的版本。 
</div> 
<div>
  Nvidia 驱动和cuda对应表： 
 <a href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html" rel="nofollow" title="CUDA 12.0 Release Notes — cuda-toolkit-release-notes 12.0 documentation">CUDA 12.0 Release Notes — cuda-toolkit-release-notes 12.0 documentation</a> 
</div> 
<div>
      Conda安装的CUDA Toolkit和NVIDIA的CUDA Toolkit区别：Nvidia 官方提供的 CUDA Toolkit 是一个完整的工具安装包，其中提供了 Nvidia 驱动程序、开发 CUDA 程序相关的开发工具包等可供安装的选项。 Pytorch 之类的深度学习框架，一般仅使用 CUDA 的动态链接库支持程序的运行( Pytorch 本身与 CUDA 相关的部分是提前编译好的 )，就像常见的可执行程序一样。 
</div> 
<div>
      Pytorch 接口输出的 cuda 的版本并不一定是 Pytorch 在实际系统上运行时使用的 cuda 版本，而是编译该 Pytorch release 版本时使用的 cuda 版本。　　 
 torch.version.cuda 是位于 torch/version.py 中的一个变量， Pytorch 在基于源码进行编译时，通过tools/setup_helpers/cuda.py 来确定编译 Pytorch 所使用的 cuda 的安装目录和版本号。 
</div> 
<div>
       
</div> 
<h3><span style="color:#9437ff;">切换多个版本的cuda:</span></h3> 
<div>
      *查看环境变量  
</div> 
<div>
      echo CUDA_HOME 或 CUDA_PATH 
</div> 
<div>
      *在/usr/local下，我们可以安装多个版本的cuda， 
</div> 
<div>
      *命令行输入以下命令，断开cuda文件与cuda-10.1的符号链接： 
</div> 
<div>
      sudo rm -rf cuda //注意：/usr/local/cuda 仅删除软链接， /usr/local/cuda/ 删除软链接所指向的目录的所有内容 
</div> 
<div>
      *命令行输入以下命令，建立cuda文件与cuda-9.0的符号链接： 
</div> 
<div>
      sudo ln -s /usr/local/cuda-9.0 /usr/local/cuda 
</div> 
<div>
      *此时查看cuda版本，已经更改成功， 
</div> 
<div>
      Nvcc -v 
</div> 
<div></div> 
<div></div> 
<div></div> 
<div>
  参考链接 
</div> 
<div> 
 <a href="https://zhuanlan.zhihu.com/p/91334380" rel="nofollow" title="显卡，显卡驱动,nvcc, cuda driver,cudatoolkit,cudnn到底是什么？ - 知乎">显卡，显卡驱动,nvcc, cuda driver,cudatoolkit,cudnn到底是什么？ - 知乎</a> 
</div> 
<div> 
 <a href="https://codeantenna.com/a/2NxQIRgerp" rel="nofollow" title="Ubuntu下查看cuda和cudnn版本 - CodeAntenna">Ubuntu下查看cuda和cudnn版本 - CodeAntenna</a> 
</div> 
<div> 
 <a href="https://www.jianshu.com/p/eb5335708f2a" rel="nofollow" title="【CUDA】nvcc和nvidia-smi显示的版本不一致？ - 简书">【CUDA】nvcc和nvidia-smi显示的版本不一致？ - 简书</a> 
</div> 
<div> 
 <a href="https://codeantenna.com/a/hhZc1PbJ7S" rel="nofollow" title="查看linux环境下cudnn是否安装,Linux下安装cuda和对应版本的cudnn - CodeAntenna">查看linux环境下cudnn是否安装,Linux下安装cuda和对应版本的cudnn - CodeAntenna</a> 
</div> 
<div> 
 <a href="https://cloud.tencent.com/developer/article/2038557" rel="nofollow" title="Pytorch版本、CUDA版本与显卡驱动版本的对应关系 - 腾讯云开发者社区-腾讯云">Pytorch版本、CUDA版本与显卡驱动版本的对应关系 - 腾讯云开发者社区-腾讯云</a> 
</div> 
<div> 
 <a href="https://blog.csdn.net/kellyroslyn/article/details/109668001" title="Pytorch版本、CUDA版本与显卡驱动版本的对应关系_ruolyn的博客-CSDN博客_pytorch cuda版本对应关系">Pytorch版本、CUDA版本与显卡驱动版本的对应关系_ruolyn的博客-CSDN博客_pytorch cuda版本对应关系</a> 
</div> 
<div> 
 <a href="https://zhuanlan.zhihu.com/p/504730733" rel="nofollow" title="Pytorch 使用不同版本的 cuda - 知乎">Pytorch 使用不同版本的 cuda - 知乎</a> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6ce6c2d5ef56fe5d0ac23e4b0d1b673f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ubuntu安装postgresql并修改数据存储目录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf0d834fe8ca5c529215a806da330aa0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springboot开启mybatis驼峰命名自动映射的三种方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>