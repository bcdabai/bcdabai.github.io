<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>记录一次npm install报错 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="记录一次npm install报错" />
<meta property="og:description" content="报错信息： gyp ERR! stack Error: Command failed: C:\Users\liufei\AppData\Local\Programs\Python\Python37\python.EXE -c import sys; print “%s.%s.%s” %
完整报错：
F:\webstorm\cloud-desktop&gt; npm install npm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14&#43; and could be using insecure binaries. Upgrade to fsevents 2. &gt; xxhash-addon@1.4.0 install F:\webstorm\cloud-desktop\node_modules\xxhash-addon &gt; node-gyp rebuild --ensure F:\webstorm\cloud-desktop\node_modules\xxhash-addon&gt;if not defined npm_config_node_gyp (node &#34;E:\node\node_modules\npm\node_modules\npm-lifecycle\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js&#34; rebuild --ensure ) else (node &#34;E:\node\node_modules\npm\node_modules\node-gyp\bin\node-gyp.js&#34; rebuild --ensure ) gyp ERR! configure error gyp ERR! stack Error: Command failed: C:\Users\liufei\AppData\Local\Programs\Python\Python37\python." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/0ff094c50d4d201de8914c8da325a4a7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-10T11:01:10+08:00" />
<meta property="article:modified_time" content="2021-06-10T11:01:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">记录一次npm install报错</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>报错信息：</h3> 
<p><strong>gyp ERR! stack Error: Command failed: C:\Users\liufei\AppData\Local\Programs\Python\Python37\python.EXE -c import sys; print “%s.%s.%s” %</strong></p> 
<p>完整报错：</p> 
<pre><code class="prism language-shell">F:<span class="token punctuation">\</span>webstorm<span class="token punctuation">\</span>cloud-desktop<span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> WARN deprecated fsevents@1.2.13: fsevents <span class="token number">1</span> will <span class="token builtin class-name">break</span> on node v14+ and could be using insecure binaries. Upgrade to fsevents <span class="token number">2</span>.

<span class="token operator">&gt;</span> xxhash-addon@1.4.0 <span class="token function">install</span> F:<span class="token punctuation">\</span>webstorm<span class="token punctuation">\</span>cloud-desktop<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>xxhash-addon
<span class="token operator">&gt;</span> node-gyp rebuild --ensure


F:<span class="token punctuation">\</span>webstorm<span class="token punctuation">\</span>cloud-desktop<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>xxhash-addon<span class="token operator">&gt;</span>if not defined npm_config_node_gyp <span class="token punctuation">(</span>node <span class="token string">"E:<span class="token entity" title="\n">\n</span>ode<span class="token entity" title="\n">\n</span>ode_modules<span class="token entity" title="\n">\n</span>pm<span class="token entity" title="\n">\n</span>ode_modules<span class="token entity" title="\n">\n</span>pm-lifecycle<span class="token entity" title="\n">\n</span>ode-gyp-bin<span class="token entity" title="\\">\\</span>..\..<span class="token entity" title="\n">\n</span>ode_modules<span class="token entity" title="\n">\n</span>ode-gyp<span class="token entity" title="\b">\b</span>in<span class="token entity" title="\n">\n</span>ode-gyp.js"</span> rebuild --ensure <span class="token punctuation">)</span>  <span class="token keyword">else</span> <span class="token punctuation">(</span>node <span class="token string">"E:<span class="token entity" title="\n">\n</span>ode<span class="token entity" title="\n">\n</span>ode_modules<span class="token entity" title="\n">\n</span>pm<span class="token entity" title="\n">\n</span>ode_modules<span class="token entity" title="\n">\n</span>ode-gyp<span class="token entity" title="\b">\b</span>in<span class="token entity" title="\n">\n</span>ode-gyp.js"</span> rebuild --ensure <span class="token punctuation">)</span>
gyp ERR<span class="token operator">!</span> configure error
gyp ERR<span class="token operator">!</span> stack Error: Command failed: C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>liufei<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Programs<span class="token punctuation">\</span>Python<span class="token punctuation">\</span>Python37<span class="token punctuation">\</span>python.EXE -c <span class="token function">import</span> sys<span class="token punctuation">;</span> print <span class="token string">"%s.%s.%s"</span> % sys.version_info<span class="token punctuation">[</span>:3<span class="token punctuation">]</span><span class="token punctuation">;</span>
gyp ERR<span class="token operator">!</span> stack   File <span class="token string">"&lt;string&gt;"</span>, line <span class="token number">1</span>
gyp ERR<span class="token operator">!</span> stack     <span class="token function">import</span> sys<span class="token punctuation">;</span> print <span class="token string">"%s.%s.%s"</span> % sys.version_info<span class="token punctuation">[</span>:3<span class="token punctuation">]</span><span class="token punctuation">;</span>
gyp ERR<span class="token operator">!</span> stack                                ^
gyp ERR<span class="token operator">!</span> stack SyntaxError: invalid syntax
gyp ERR<span class="token operator">!</span> stack
gyp ERR<span class="token operator">!</span> stack     at ChildProcess.exithandler <span class="token punctuation">(</span>child_process.js:294:12<span class="token punctuation">)</span>
gyp ERR<span class="token operator">!</span> stack     at ChildProcess.emit <span class="token punctuation">(</span>events.js:198:13<span class="token punctuation">)</span>
gyp ERR<span class="token operator">!</span> stack     at maybeClose <span class="token punctuation">(</span>internal/child_process.js:982:16<span class="token punctuation">)</span>
gyp ERR<span class="token operator">!</span> stack     at Process.ChildProcess._handle.onexit <span class="token punctuation">(</span>internal/child_process.js:259:5<span class="token punctuation">)</span>
gyp ERR<span class="token operator">!</span> System Windows_NT <span class="token number">10.0</span>.17763
gyp ERR<span class="token operator">!</span> <span class="token builtin class-name">command</span> <span class="token string">"E:<span class="token entity" title="\\">\\</span>node<span class="token entity" title="\\">\\</span>node.exe"</span> <span class="token string">"E:<span class="token entity" title="\\">\\</span>node<span class="token entity" title="\\">\\</span>node_modules<span class="token entity" title="\\">\\</span>npm<span class="token entity" title="\\">\\</span>node_modules<span class="token entity" title="\\">\\</span>node-gyp<span class="token entity" title="\\">\\</span>bin<span class="token entity" title="\\">\\</span>node-gyp.js"</span> <span class="token string">"rebuild"</span> <span class="token string">"--ensure"</span>
gyp ERR<span class="token operator">!</span> cwd F:<span class="token punctuation">\</span>webstorm<span class="token punctuation">\</span>cloud-desktop<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>xxhash-addon
gyp ERR<span class="token operator">!</span> node -v v10.16.0
gyp ERR<span class="token operator">!</span> node-gyp -v v3.8.0
gyp ERR<span class="token operator">!</span> not ok
<span class="token function">npm</span> WARN @babel/plugin-syntax-jsx@7.14.5 requires a peer of @babel/core@^7.0.0-0 but none is installed. You must <span class="token function">install</span> peer dependencies yourself.
<span class="token function">npm</span> WARN @vue/babel-plugin-transform-vue-jsx@1.2.1 requires a peer of @babel/core@^7.0.0-0 but none is installed. You must <span class="token function">install</span> peer dependencies yourself.
<span class="token function">npm</span> WARN cloud-desktop@1.0.0 No repository field.
<span class="token function">npm</span> WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 <span class="token punctuation">(</span>node_modules<span class="token punctuation">\</span>webpack-dev-server<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>fsevents<span class="token punctuation">)</span>:
<span class="token function">npm</span> WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="token keyword">for</span> fsevents@1.2.13: wanted <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"darwin"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"any"</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>current: <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"win32"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"x64"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">npm</span> WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 <span class="token punctuation">(</span>node_modules<span class="token punctuation">\</span>fsevents<span class="token punctuation">)</span>:
<span class="token function">npm</span> WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="token keyword">for</span> fsevents@2.3.2: wanted <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"darwin"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"any"</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>current: <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"win32"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"x64"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">npm</span> WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 <span class="token punctuation">(</span>node_modules<span class="token punctuation">\</span>watchpack-chokidar2<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>fsevents<span class="token punctuation">)</span>:
<span class="token function">npm</span> WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="token keyword">for</span> fsevents@1.2.13: wanted <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"darwin"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"any"</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>current: <span class="token punctuation">{<!-- --></span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"win32"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"x64"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">npm</span> ERR<span class="token operator">!</span> code ELIFECYCLE
<span class="token function">npm</span> ERR<span class="token operator">!</span> errno <span class="token number">1</span>
<span class="token function">npm</span> ERR<span class="token operator">!</span> xxhash-addon@1.4.0 install: <span class="token variable"><span class="token variable">`</span>node-gyp rebuild --ensure<span class="token variable">`</span></span>
<span class="token function">npm</span> ERR<span class="token operator">!</span> Exit status <span class="token number">1</span>
<span class="token function">npm</span> ERR<span class="token operator">!</span>
<span class="token function">npm</span> ERR<span class="token operator">!</span> Failed at the xxhash-addon@1.4.0 <span class="token function">install</span> script.
<span class="token function">npm</span> ERR<span class="token operator">!</span> This is probably not a problem with npm. There is likely additional logging output above.

<span class="token function">npm</span> ERR<span class="token operator">!</span> A complete log of this run can be found in:
<span class="token function">npm</span> ERR<span class="token operator">!</span>     C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>liufei<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Roaming<span class="token punctuation">\</span>npm-cache<span class="token punctuation">\</span>_logs<span class="token punctuation">\</span><span class="token number">2021</span>-06-10T02_12_29_752Z-debug.log
</code></pre> 
<h3><a id="_52"></a>解决办法</h3> 
<p><strong>步骤一</strong></p> 
<p>npm install --global --production windows-build-tools<br> npm install -g node-gyp</p> 
<p>如果执行第一句执行没有成功，例如我的：<br> <img src="https://images2.imgbox.com/59/7a/FNJ73xgT_o.png" alt="执行失败"><br> 这里卡在安装python了，直接终止执行步骤二即可。</p> 
<p><strong>步骤二</strong></p> 
<p>上面步骤一如果没有安装好python2.7，则安装下</p> 
<p>npm install --python=python2.7</p> 
<p>npm config set python python2.7</p> 
<p><strong>步骤三</strong></p> 
<p>npm install</p> 
<p>npm run dev</p> 
<p>启动成功！！</p> 
<p><strong>参考</strong><br> https://blog.csdn.net/qfxlw/article/details/85331869</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e6c320f47fdf5c54ebd00676c97da465/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">局域网、广域网、互联网</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/30baf87462a164c9523596dd1953be12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序 share-element page-container 组件的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>