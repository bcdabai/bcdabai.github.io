<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3 &#43;Echarts5 可视化大屏——屏幕适配 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3 &#43;Echarts5 可视化大屏——屏幕适配" />
<meta property="og:description" content="项目基于Vue3 &#43; Echarts5 开发，屏幕适配是使用 scale 方案
Echarts组件按需引入，减少打包体积
地图组件封装（全国&amp;省份地图按需加载）
效果图：
屏幕适配 大屏适配常用的方案有 rem &#43; vw/vh 和 scale 。
rem &#43; vw/vh 方案 结合使用rem（相对于根元素字体大小的单位）和vw/vh（视窗宽度/高度的单位）来实现大屏的适配。它的优点是灵活性高、兼容性好、适应性强，但需要进行计算，可能存在误差问题，且代码复杂度较高。
scale 方案 通过改变页面根元素的缩放比例来实现大屏适配。它的优点是实现简单，不需要进行计算，且适用范围广，但可能会存在像素失真问题。
此项目使用 scale 缩放这种方式来实现。
利用 CSS 的 transform：scale 属性对页面布局进行自适应缩放，CSS 元素设置完全按照设计稿大小设置 px，不需要转换长度单位。此项目设计稿给的尺寸是 1920*1080。具体方法如下：
首先根据浏览器大小推断缩放比例 思路：
首先要确定设计稿尺寸，默认是 1920 x 1080分别计算浏览器和设计图宽高比如果浏览器的宽高比大于设计稿的宽高比，就取浏览器高度和设计稿高度之比；如果浏览器的宽高比小于设计稿的宽高比，就取浏览器宽度和设计稿宽度之比 // 根据浏览器大小推断缩放比例 // 首先要确定设计稿尺寸，默认是 1920 x 1080 // 分别计算浏览器和设计图宽高比 // 如果浏览器的宽高比大于设计稿的宽高比，就取浏览器高度和设计稿高度之比 // 如果浏览器的宽高比小于设计稿的宽高比，就取浏览器宽度和设计稿宽度之比 const getScale = (width = 1920, height = 1080) =&gt; { let ww = window." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8e1d5a3e40f5e756e5062a9435b4d23d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-11T17:53:26+08:00" />
<meta property="article:modified_time" content="2023-07-11T17:53:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3 &#43;Echarts5 可视化大屏——屏幕适配</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>项目基于Vue3 + Echarts5 开发，屏幕适配是使用 <code>scale</code> 方案<br> Echarts组件按需引入，减少打包体积<br> 地图组件封装（全国&amp;省份地图按需加载）</p> 
</blockquote> 
<p>效果图：</p> 
<p><img src="https://images2.imgbox.com/51/ed/w37E5vGY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_8"></a>屏幕适配</h3> 
<p>大屏适配常用的方案有 <code>rem + vw/vh</code> 和 <code>scale</code> 。</p> 
<ul><li><code>rem + vw/vh</code> 方案</li></ul> 
<p>结合使用rem（相对于根元素字体大小的单位）和vw/vh（视窗宽度/高度的单位）来实现大屏的适配。它的优点是灵活性高、兼容性好、适应性强，但需要进行计算，可能存在误差问题，且代码复杂度较高。</p> 
<ul><li><code>scale</code> 方案</li></ul> 
<p>通过改变页面根元素的缩放比例来实现大屏适配。它的优点是实现简单，不需要进行计算，且适用范围广，但可能会存在像素失真问题。</p> 
<p>此项目使用 <code>scale</code> 缩放这种方式来实现。</p> 
<blockquote> 
 <p>利用 <code>CSS</code> 的 <code>transform：scale</code> 属性对页面布局进行自适应缩放，<code>CSS</code> 元素设置完全按照设计稿大小设置 <code>px</code>，不需要转换长度单位。此项目设计稿给的尺寸是 <code>1920*1080</code>。具体方法如下：</p> 
</blockquote> 
<ol><li>首先根据浏览器大小推断缩放比例</li></ol> 
<p>思路：</p> 
<ul><li>首先要确定设计稿尺寸，默认是 1920 x 1080</li><li>分别计算浏览器和设计图宽高比</li><li>如果浏览器的宽高比大于设计稿的宽高比，就取浏览器高度和设计稿高度之比；如果浏览器的宽高比小于设计稿的宽高比，就取浏览器宽度和设计稿宽度之比</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">// 根据浏览器大小推断缩放比例</span>
<span class="token comment">// 首先要确定设计稿尺寸，默认是 1920 x 1080</span>
<span class="token comment">// 分别计算浏览器和设计图宽高比</span>
<span class="token comment">// 如果浏览器的宽高比大于设计稿的宽高比，就取浏览器高度和设计稿高度之比</span>
<span class="token comment">// 如果浏览器的宽高比小于设计稿的宽高比，就取浏览器宽度和设计稿宽度之比</span>
<span class="token keyword">const</span> <span class="token function-variable function">getScale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">width <span class="token operator">=</span> <span class="token number">1920</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">1080</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> ww <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> width
  <span class="token keyword">let</span> wh <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">/</span> height
  <span class="token keyword">return</span> ww <span class="token operator">&lt;</span> wh <span class="token operator">?</span> ww <span class="token operator">:</span> wh
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>初始化的时候直接设置数据大屏的缩放比例，<code>dataScreenRef</code> 为整个大盒子 <code>DOM</code></li></ol> 
<pre><code class="prism language-javascript"><span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 初始化时为外层盒子加上缩放属性，防止刷新界面时就已经缩放</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">getScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) translate(-50%, -50%)</span><span class="token template-punctuation string">`</span></span>
    dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1920px</span><span class="token template-punctuation string">`</span></span>
    dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1080px</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**  其他代码 */</span>
  <span class="token comment">// 为浏览器绑定事件</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> resize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="3"><li>监听浏览器的窗口大小变化, 将新的比例赋给 <code>scale</code> 变量</li></ol> 
<pre><code class="prism language-javascript"><span class="token comment">// 监听浏览器 resize 事件</span>
<span class="token keyword">const</span> <span class="token function-variable function">resize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    dataScreenRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">getScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) translate(-50%, -50%)</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**  其他代码 */</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_71"></a>地图数据下载</h3> 
<p>数据来源 <a href="https://datav.aliyun.com/portal/school/atlas/area_selector" rel="nofollow">https://datav.aliyun.com/portal/school/atlas/area_selector</a>，获取各区域的 <code>json</code> 数据。</p> 
<h3><a id="_75"></a>图表资源推荐</h3> 
<ul><li>isqqw: <a href="https://www.isqqw.com/" rel="nofollow">https://www.isqqw.com/</a></li><li>MCChart: <a href="http://echarts.zhangmuchen.top/#/index" rel="nofollow">http://echarts.zhangmuchen.top/#/index</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0b410356091bda3deb962b97928fdf1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">maven3.x 各个版本安装包官网下载地址</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2034ee60c0c159262315dfef18991b5c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用 Apache POI 将 Word 文档转换为 PDF，PDF 转图片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>