<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>canvas基本使用（获取画布、绘制矩形、清除屏幕内容、动画、绘制不规则图形、圆形、虚线、绘制文字、颜色渐变、设置阴影、渲染图片、变形偏移、canvas文档） - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="canvas基本使用（获取画布、绘制矩形、清除屏幕内容、动画、绘制不规则图形、圆形、虚线、绘制文字、颜色渐变、设置阴影、渲染图片、变形偏移、canvas文档）" />
<meta property="og:description" content="目录
canvas使用
获取画布
var canvas = document.getElementById(canvasID)
vat ctx = canvas.getContext(&#39;2d&#39;)
绘制矩形
ctx.fillStyle = &#39;red&#39;
ctx.fillRect(100,100,200,50)
ctx.strokeStyle = &#39;blue&#39;
ctx.strokeRect(300,100,200,50)
清除屏幕内容（动画）
ctx.clearRect(0,0,600,600)
像素化
绘制不规则图形
ctx.beginPath()
ctx.moveTo(100,100)
ctx.lineTo(200,200);
ctx.closePath()
ctx.strokeStyle = &#39;yellow&#39;
ctx.stroke()
ctx.fillStyle = &#39;blue&#39;
ctx.fill()
绘制圆形
ctx.arc(x,y,radius,start,end,anticlockwise)
设置绘制属性（线条属性、虚线等）
ctx.globalAlpha = 0.1
ctx.lineWidth = 1
ctx.lineCap = ’round‘
ctx.lineJoin = &#39;round&#39;
ctx.setLineDash([4,20,...,])
绘制文字
ctx.font=&#39;30px 宋体&#39;
ctx.fillText(str,x,y)
ctx.textAlign = &#39;center&#39;
颜色渐变
let linear = ctx.createLinearGradient(100,100,200,200)
linear.addColorStop(0,&#39;red&#39;)
设置阴影
ctx.shadowOffsetX|Y = 1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/e0d78f4026bf9bbc952c5d9b008c8b3c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-27T17:31:42+08:00" />
<meta property="article:modified_time" content="2022-07-27T17:31:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">canvas基本使用（获取画布、绘制矩形、清除屏幕内容、动画、绘制不规则图形、圆形、虚线、绘制文字、颜色渐变、设置阴影、渲染图片、变形偏移、canvas文档）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="canvas%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#canvas%E4%BD%BF%E7%94%A8" rel="nofollow">canvas使用</a></p> 
<p id="%E8%8E%B7%E5%8F%96%E7%94%BB%E5%B8%83-toc" style="margin-left:40px;"><a href="#%E8%8E%B7%E5%8F%96%E7%94%BB%E5%B8%83" rel="nofollow">获取画布</a></p> 
<p id="var%20canvas%20%3D%20document.getElementById(canvasID)-toc" style="margin-left:80px;"><a href="#var%20canvas%20%3D%20document.getElementById%28canvasID%29" rel="nofollow">var canvas = document.getElementById(canvasID)</a></p> 
<p id="vat%20ctx%20%3D%20canvas.getContext('2d')-toc" style="margin-left:80px;"><a href="#vat%20ctx%20%3D%20canvas.getContext%28'%20rel=">vat ctx = canvas.getContext('2d')</a></p> 
<p id="%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2-toc" style="margin-left:40px;"><a href="#%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2" rel="nofollow">绘制矩形</a></p> 
<p id="ctx.fillStyle%20%3D%20'red'-toc" style="margin-left:80px;"><a href="#ctx.fillStyle%20%3D%20'%20rel=">ctx.fillStyle = 'red'</a></p> 
<p id="ctx.fillRect(100%2C100%2C200%2C50)-toc" style="margin-left:80px;"><a href="#ctx.fillRect%28100%2C100%2C200%2C50%29" rel="nofollow">ctx.fillRect(100,100,200,50)</a></p> 
<p id="ctx.strokeStyle%20%3D%20'blue'-toc" style="margin-left:80px;"><a href="#ctx.strokeStyle%20%3D%20'%20rel=">ctx.strokeStyle = 'blue'</a></p> 
<p id="ctx.strokeRect(300%2C100%2C200%2C50)-toc" style="margin-left:80px;"><a href="#ctx.strokeRect%28300%2C100%2C200%2C50%29" rel="nofollow">ctx.strokeRect(300,100,200,50)</a></p> 
<p id="%E6%B8%85%E9%99%A4%E5%B1%8F%E5%B9%95%E5%86%85%E5%AE%B9%EF%BC%88%E5%8A%A8%E7%94%BB%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E6%B8%85%E9%99%A4%E5%B1%8F%E5%B9%95%E5%86%85%E5%AE%B9%EF%BC%88%E5%8A%A8%E7%94%BB%EF%BC%89" rel="nofollow">清除屏幕内容（动画）</a></p> 
<p id="ctx.clearRect(0%2C0%2C600%2C600)-toc" style="margin-left:80px;"><a href="#ctx.clearRect%280%2C0%2C600%2C600%29" rel="nofollow">ctx.clearRect(0,0,600,600)</a></p> 
<p id="%E5%83%8F%E7%B4%A0%E5%8C%96-toc" style="margin-left:80px;"><a href="#%E5%83%8F%E7%B4%A0%E5%8C%96" rel="nofollow">像素化</a></p> 
<p id="%E7%BB%98%E5%88%B6%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%BD%A2-toc" style="margin-left:40px;"><a href="#%E7%BB%98%E5%88%B6%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%BD%A2" rel="nofollow">绘制不规则图形</a></p> 
<p id="ctx.beginPath()-toc" style="margin-left:80px;"><a href="#ctx.beginPath%28%29" rel="nofollow">ctx.beginPath()</a></p> 
<p id="ctx.moveTo(100%2C100)-toc" style="margin-left:80px;"><a href="#ctx.moveTo%28100%2C100%29" rel="nofollow">ctx.moveTo(100,100)</a></p> 
<p id="ctx.lineTo(200%2C200)%3B-toc" style="margin-left:80px;"><a href="#ctx.lineTo%28200%2C200%29%3B" rel="nofollow">ctx.lineTo(200,200);</a></p> 
<p id="ctx.closePath()-toc" style="margin-left:80px;"><a href="#ctx.closePath%28%29" rel="nofollow">ctx.closePath()</a></p> 
<p id="ctx.strokeStyle%20%3D%20'yellow'-toc" style="margin-left:80px;"><a href="#ctx.strokeStyle%20%3D%20'%20rel=">ctx.strokeStyle = 'yellow'</a></p> 
<p id="ctx.stroke()-toc" style="margin-left:80px;"><a href="#ctx.stroke%28%29" rel="nofollow">ctx.stroke()</a></p> 
<p id="ctx.fillStyle%20%3D%20'blue'-toc" style="margin-left:80px;"><a href="#ctx.fillStyle%20%3D%20'%20rel=">ctx.fillStyle = 'blue'</a></p> 
<p id="ctx.fill()-toc" style="margin-left:80px;"><a href="#ctx.fill%28%29" rel="nofollow">ctx.fill()</a></p> 
<p id="%E7%BB%98%E5%88%B6%E5%9C%86%E5%BD%A2-toc" style="margin-left:40px;"><a href="#%E7%BB%98%E5%88%B6%E5%9C%86%E5%BD%A2" rel="nofollow">绘制圆形</a></p> 
<p id="ctx.arc(x%2Cy%2Cradius%2Cstart%2Cend%2Canticlockwise)-toc" style="margin-left:80px;"><a href="#ctx.arc%28x%2Cy%2Cradius%2Cstart%2Cend%2Canticlockwise%29" rel="nofollow">ctx.arc(x,y,radius,start,end,anticlockwise)</a></p> 
<p id="%E8%AE%BE%E7%BD%AE%E7%BB%98%E5%88%B6%E5%B1%9E%E6%80%A7-toc" style="margin-left:40px;"><a href="#%E8%AE%BE%E7%BD%AE%E7%BB%98%E5%88%B6%E5%B1%9E%E6%80%A7" rel="nofollow">设置绘制属性（线条属性、虚线等）</a></p> 
<p id="ctx.globalAlpha%20%3D%200.1-toc" style="margin-left:80px;"><a href="#ctx.globalAlpha%20%3D%200.1" rel="nofollow">ctx.globalAlpha = 0.1</a></p> 
<p id="ctx.lineWidth%20%3D%201-toc" style="margin-left:80px;"><a href="#ctx.lineWidth%20%3D%201" rel="nofollow">ctx.lineWidth = 1</a></p> 
<p id="ctx.lineCap%20%3D%20%E2%80%99round%E2%80%98-toc" style="margin-left:80px;"><a href="#ctx.lineCap%20%3D%20%E2%80%99round%E2%80%98" rel="nofollow">ctx.lineCap = ’round‘</a></p> 
<p id="ctx.lineJoin%20%3D%20'round'-toc" style="margin-left:80px;"><a href="#ctx.lineJoin%20%3D%20'%20rel=">ctx.lineJoin = 'round'</a></p> 
<p id="ctx.setLineDash(%5B4%2C20%2C...%2C%5D)-toc" style="margin-left:80px;"><a href="#ctx.setLineDash%28%5B4%2C20%2C...%2C%5D%29" rel="nofollow">ctx.setLineDash([4,20,...,])</a></p> 
<p id="%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97-toc" style="margin-left:40px;"><a href="#%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97" rel="nofollow">绘制文字</a></p> 
<p id="ctx.font%3D'30px%20%E5%AE%8B%E4%BD%93'-toc" style="margin-left:80px;"><a href="#ctx.font%3D'%20rel=">ctx.font='30px 宋体'</a></p> 
<p id="ctx.fillText(str%2Cx%2Cy)-toc" style="margin-left:80px;"><a href="#ctx.fillText%28str%2Cx%2Cy%29" rel="nofollow">ctx.fillText(str,x,y)</a></p> 
<p id="ctx.textAlign%20%3D%C2%A0'center'-toc" style="margin-left:80px;"><a href="#ctx.textAlign%20%3D%C2%A0'%20rel=">ctx.textAlign = 'center'</a></p> 
<p id="%E9%A2%9C%E8%89%B2%E6%B8%90%E5%8F%98-toc" style="margin-left:40px;"><a href="#%E9%A2%9C%E8%89%B2%E6%B8%90%E5%8F%98" rel="nofollow">颜色渐变</a></p> 
<p id="let%20linear%20%3D%20ctx.createLinearGradient(100%2C100%2C200%2C200)-toc" style="margin-left:80px;"><a href="#let%20linear%20%3D%20ctx.createLinearGradient%28100%2C100%2C200%2C200%29" rel="nofollow">let linear = ctx.createLinearGradient(100,100,200,200)</a></p> 
<p id="linear.addColorStop(0%2C'red')-toc" style="margin-left:80px;"><a href="#linear.addColorStop%280%2C'%20rel=">linear.addColorStop(0,'red')</a></p> 
<p id="%E8%AE%BE%E7%BD%AE%E9%98%B4%E5%BD%B1-toc" style="margin-left:40px;"><a href="#%E8%AE%BE%E7%BD%AE%E9%98%B4%E5%BD%B1" rel="nofollow">设置阴影</a></p> 
<p id="ctx.shadowOffsetX%7CY%20%3D%201-toc" style="margin-left:80px;"><a href="#ctx.shadowOffsetX%7CY%20%3D%201" rel="nofollow">ctx.shadowOffsetX|Y = 1</a></p> 
<p id="ctx.shadowBlur%20%3D%2020-toc" style="margin-left:80px;"><a href="#ctx.shadowBlur%20%3D%2020" rel="nofollow">ctx.shadowBlur = 20</a></p> 
<p id="ctx.%20shadowColor%20%3D%20'red'-toc" style="margin-left:80px;"><a href="#ctx.%20shadowColor%20%3D%20'%20rel=">ctx. shadowColor = 'red'</a></p> 
<p id="%E6%B8%B2%E6%9F%93%E5%9B%BE%E7%89%87-toc" style="margin-left:40px;"><a href="#%E6%B8%B2%E6%9F%93%E5%9B%BE%E7%89%87" rel="nofollow">渲染图片</a></p> 
<p id="ctx.drawImage(img%2Cx0%2Cy0%2Cw0%2Cy0%2Cx1%2Cy1%2Cw1%2Ch1)-toc" style="margin-left:80px;"><a href="#ctx.drawImage%28img%2Cx0%2Cy0%2Cw0%2Cy0%2Cx1%2Cy1%2Cw1%2Ch1%29" rel="nofollow">ctx.drawImage(img,x0,y0,w0,y0,x1,y1,w1,h1)</a></p> 
<p id="%E5%8F%98%E5%BD%A2-toc" style="margin-left:40px;"><a href="#%E5%8F%98%E5%BD%A2" rel="nofollow">变形偏移</a></p> 
<p id="ctx.save()-toc" style="margin-left:80px;"><a href="#ctx.save%28%29" rel="nofollow">ctx.save()</a></p> 
<p id="ctx.restore()-toc" style="margin-left:80px;"><a href="#ctx.restore%28%29" rel="nofollow">ctx.restore()</a></p> 
<p id="ctx.translate(x%2Cy)-toc" style="margin-left:80px;"><a href="#ctx.translate%28x%2Cy%29" rel="nofollow">ctx.translate(x,y)</a></p> 
<p id="ctx.rotate(deg)-toc" style="margin-left:80px;"><a href="#ctx.rotate%28deg%29" rel="nofollow">ctx.rotate(deg)</a></p> 
<p id="ctx.scale(x%2Cy)-toc" style="margin-left:80px;"><a href="#ctx.scale%28x%2Cy%29" rel="nofollow">ctx.scale(x,y)</a></p> 
<p id="ctx.transform(a%2Cb%2Cc%2Cd%2Ce%2Cf)-toc" style="margin-left:80px;"><a href="#ctx.transform%28a%2Cb%2Cc%2Cd%2Ce%2Cf%29" rel="nofollow">ctx.transform(a,b,c,d,e,f)</a></p> 
<p id="canvas.toDataURL(type%2CencoderOptions)%C2%A0-toc" style="margin-left:40px;"><a href="#canvas.toDataURL%28type%2CencoderOptions%29%C2%A0" rel="nofollow">canvas.toDataURL(type,encoderOptions) </a></p> 
<p id="html%E8%8A%82%E7%82%B9%E8%BD%ACcanvas%E8%BD%ACbase64%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E7%A4%BA%E4%BE%8B%EF%BC%88html2canvas%EF%BC%89-toc" style="margin-left:40px;"><a href="#html%E8%8A%82%E7%82%B9%E8%BD%ACcanvas%E8%BD%ACbase64%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E7%A4%BA%E4%BE%8B%EF%BC%88html2canvas%EF%BC%89" rel="nofollow">html节点转canvas转base64图片下载示例（html2canvas）</a></p> 
<p id="%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90-toc" style="margin-left:80px;"><a href="#%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90" rel="nofollow">示例使用方法解析</a></p> 
<p id="canvas%E6%96%87%E6%A1%A3-toc" style="margin-left:0px;"><a href="#canvas%E6%96%87%E6%A1%A3" rel="nofollow">canvas文档</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="canvas%E4%BD%BF%E7%94%A8">canvas使用</h2> 
<p>canvas标签的宽和高使用属性设置，用css的样式设置会导致画布失真。</p> 
<h3 id="%E8%8E%B7%E5%8F%96%E7%94%BB%E5%B8%83">获取画布</h3> 
<h4 id="var%20canvas%20%3D%20document.getElementById(canvasID)">var canvas = document.getElementById(canvasID)</h4> 
<p>得到画布上下文，有两个分别为2d和3d的上下文，</p> 
<h4 id="vat%20ctx%20%3D%20canvas.getContext('2d')">vat ctx = canvas.getContext('2d')</h4> 
<p>选择2d的上下文，所有的图像绘制都是通过ctx属性或者事方法进行设置，和canvas标签没有关系了 。</p> 
<h3 id="%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2">绘制矩形</h3> 
<h4 id="ctx.fillStyle%20%3D%20'red'">ctx.fillStyle = 'red'</h4> 
<p>设置<strong>下次填充内容的颜色</strong>为红色。注意要在绘制内容前设置颜色不然无法生效。</p> 
<h4 id="ctx.fillRect(100%2C100%2C200%2C50)">ctx.fillRect(100,100,200,50)</h4> 
<p><strong>绘制</strong><span style="color:#fe2c24;"><strong>填充</strong></span><span style="color:#0d0016;"><strong>矩形</strong></span>，前2个参数为x，y轴坐标，后2个参数为x、y轴方向的长度（x轴为水平向右，y轴垂直向下）。</p> 
<h4 id="ctx.strokeStyle%20%3D%20'blue'">ctx.strokeStyle = 'blue'</h4> 
<p>设置下次绘制线条颜色为蓝色。注意要在绘制内容前设置颜色不然无法生效。</p> 
<h4 id="ctx.strokeRect(300%2C100%2C200%2C50)">ctx.strokeRect(300,100,200,50)</h4> 
<p><span style="color:#0d0016;"><strong>绘制矩形</strong></span><span style="color:#fe2c24;"><strong>边框</strong></span>，前2个参数为x，y轴坐标，后2个参数为x、y轴方向的长度（x轴为水平向右，y轴垂直向下）。</p> 
<h3 id="%E6%B8%85%E9%99%A4%E5%B1%8F%E5%B9%95%E5%86%85%E5%AE%B9%EF%BC%88%E5%8A%A8%E7%94%BB%EF%BC%89">清除屏幕内容（动画）</h3> 
<h4 id="ctx.clearRect(0%2C0%2C600%2C600)">ctx.clearRect(0,0,600,600)</h4> 
<p>清除矩形范围内容，前2个参数为x，y轴坐标，后2个参数为x、y轴方向的长度。</p> 
<h4 id="%E5%83%8F%E7%B4%A0%E5%8C%96">像素化</h4> 
<p>使用canvas 绘制图片成功后就会像素化，无法从画布上再次得到这个图形（即无法修改画布内容，flash可以）。</p> 
<p>注意<span style="color:#fe2c24;"><strong>canvas动画是通过清屏-更新-渲染的逻辑进行。</strong></span></p> 
<h3 id="%E7%BB%98%E5%88%B6%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%BD%A2">绘制不规则图形</h3> 
<h4 id="ctx.beginPath()">ctx.beginPath()</h4> 
<p>创建路径</p> 
<h4 id="ctx.moveTo(100%2C100)">ctx.moveTo(100,100)</h4> 
<p>设置起点坐标。</p> 
<h4 id="ctx.lineTo(200%2C200)%3B">ctx.lineTo(200,200);</h4> 
<p>设置下一点坐标以及连接方式为直线。</p> 
<h4 id="ctx.closePath()">ctx.closePath()</h4> 
<p>封闭路径，将最后一点坐标和起点坐标相连。注意用fill填充时，不写该条语句也会自动相连。</p> 
<h4 id="ctx.strokeStyle%20%3D%20'yellow'">ctx.strokeStyle = 'yellow'</h4> 
<p>设置边框颜色</p> 
<h4 id="ctx.stroke()">ctx.stroke()</h4> 
<p>通过线条绘制图形轮廓。</p> 
<h4 id="ctx.fillStyle%20%3D%20'blue'">ctx.fillStyle = 'blue'</h4> 
<p>设置填充颜色。</p> 
<h4 id="ctx.fill()">ctx.fill()</h4> 
<p>通过填充路径的内容区域生成实心的图形。</p> 
<h3 id="%E7%BB%98%E5%88%B6%E5%9C%86%E5%BD%A2">绘制圆形</h3> 
<h4 id="ctx.arc(x%2Cy%2Cradius%2Cstart%2Cend%2Canticlockwise)">ctx.arc(x,y,radius,start,end,anticlockwise)</h4> 
<p>绘制圆弧，x、y为绘制圆弧的圆心；radius为半径 ；start为起始弧度（0表示x轴即水平向右）；end为结束弧度（<strong>顺时针时，是按起始弧度转end-start弧度，即相差2π时绘制的是圆，逆时针旋转时，是从start弧度逆时针转到end弧度，且start、end弧度是按照顺时针的弧度，大于2π时%2π</strong>）；anticlockwise为是否逆时针转，false为顺时针旋转；</p> 
<p>注意<strong>使用前需要beginPath</strong>。</p> 
<h3 id="%E8%AE%BE%E7%BD%AE%E7%BB%98%E5%88%B6%E5%B1%9E%E6%80%A7">设置绘制属性（线条属性、虚线等）</h3> 
<h4 id="ctx.globalAlpha%20%3D%200.1">ctx.globalAlpha = 0.1</h4> 
<p>设置线条的透明度，取值为0～1。</p> 
<h4 id="ctx.lineWidth%20%3D%201">ctx.lineWidth = 1</h4> 
<p>设置线条的宽度，默认为1。</p> 
<h4 id="ctx.lineCap%20%3D%20%E2%80%99round%E2%80%98">ctx.lineCap = ’round‘</h4> 
<p>设置线段末端结束方式，默认butt为方形结束，round为半圆型结束。</p> 
<h4 id="ctx.lineJoin%20%3D%20'round'">ctx.lineJoin = 'round'</h4> 
<p>设置线段连接处的样式，默认为miter为正常线性连接，round为连接处圆形，bevel为连接处底部为平的。</p> 
<h4 id="ctx.setLineDash(%5B4%2C20%2C...%2C%5D)">ctx.setLineDash([4,20,...,])</h4> 
<p>设置虚线，接受一个数组，数组第一位为实线长度，第二位为虚线长度即空白的长度，第三位为实线长度，以此类推，然后用数组的内容循环设置线段的虚实。</p> 
<p><img alt="" height="174" src="https://images2.imgbox.com/9b/0b/FtNVGujq_o.png" width="208"></p> 
<p>ctx.lineDashOffset = 4</p> 
<p>设置起始的偏移量，如果设置为4，则上面从虚线即空白长度20开始。</p> 
<h3 id="%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97">绘制文字</h3> 
<h4 id="ctx.font%3D'30px%20%E5%AE%8B%E4%BD%93'">ctx.font='30px 宋体'</h4> 
<p>设置字体大小和字体样式。</p> 
<h4 id="ctx.fillText(str%2Cx%2Cy)">ctx.fillText(str,x,y)</h4> 
<p>绘制文字内容，x、y为绘制的起始坐标。</p> 
<h4 id="ctx.textAlign%20%3D%C2%A0'center'">ctx.textAlign = 'center'</h4> 
<p>设置文本水平方向对齐方式，参数有start（默认）、end（文字都在起始坐标x轴左边）、center。</p> 
<p>注意center表示基于起始坐标x轴居中，此时想让文本在整个canvas居中，设置fillText的x值为canvas的宽度一半即可。</p> 
<h3 id="%E9%A2%9C%E8%89%B2%E6%B8%90%E5%8F%98">颜色渐变</h3> 
<h4 id="let%20linear%20%3D%20ctx.createLinearGradient(100%2C100%2C200%2C200)">let linear = ctx.createLinearGradient(100,100,200,200)</h4> 
<p>设置颜色渐变的起始坐标和终点坐标，颜色会从起始坐标向总店坐标渐变</p> 
<h4 id="linear.addColorStop(0%2C'red')">linear.addColorStop(0,'red')</h4> 
<p>设置起始坐标到终点坐标上的颜色，第一个参数为当前渐变的位置（0～1之间的小数，0表示起点，0.5表示中点，1表示终点，可设置多段，从0开始向1过程中设置的颜色渐变），第二个参数为颜色。</p> 
<p>注意最后需要将颜色设置上去即ctx.fillStyle = linear。</p> 
<h3 id="%E8%AE%BE%E7%BD%AE%E9%98%B4%E5%BD%B1">设置阴影</h3> 
<h4 id="ctx.shadowOffsetX%7CY%20%3D%201">ctx.shadowOffsetX|Y = 1</h4> 
<p>X为设置阴影向右偏离距离，Y为向下的偏离距离，负为方向。</p> 
<h4 id="ctx.shadowBlur%20%3D%2020">ctx.shadowBlur = 20</h4> 
<p>设置模糊状态</p> 
<h4 id="ctx.%20shadowColor%20%3D%20'red'">ctx. shadowColor = 'red'</h4> 
<p>设置阴影颜色。</p> 
<h3 id="%E6%B8%B2%E6%9F%93%E5%9B%BE%E7%89%87">渲染图片</h3> 
<h4 id="ctx.drawImage(img%2Cx0%2Cy0%2Cw0%2Cy0%2Cx1%2Cy1%2Cw1%2Ch1)">ctx.drawImage(img,x0,y0,w0,y0,x1,y1,w1,h1)</h4> 
<p>img为图片对象，</p> 
<p>接受3个参数时(img,x,y):x、y为图片加载位置，即渲染图片的左上角坐标起点。</p> 
<p>注意由于图片渲染是异步的，要在onload事件中渲染</p> 
<pre><code class="language-javascript">let img = new Image();
img.src = '图片地址'
img.onload = function() {
    ctx.drawImage(img,100,100)
}</code></pre> 
<p>接受5个参数时（img,x,y,w,h)： x、y为图片加载位置，即渲染图片的左上角坐标起点。w为宽度，h为高度。</p> 
<p>接受9个参数时(img,x0,y0,w0,y0,x1,y1,w1,h1)：x0、y0、w0、h0表示从图片x0、y0位置裁剪w0宽、h0高的图片；x1、y1为图片加载位置，即渲染图片的左上角坐标起点。w1、h1为图片最后的宽、高。</p> 
<h3 id="%E5%8F%98%E5%BD%A2">变形偏移</h3> 
<p>canvas可以进行变形偏移，变形的是整个画布的渲染区域。</p> 
<p>注意canvas的每次绘制都是在上次的基础上，通过save、restore可以重新定义绘制的状态。</p> 
<h4 id="ctx.save()">ctx.save()</h4> 
<p>保存画布的颜色、透明度等属性（strokeStyle、fillStyle、gloabalAlpha、lineWidth、lineCap、lineJoin、miterLimit、lineDashOffset、shadowOffsetX｜Y、shadowBlur、shadowColor、font、textBaseline、direction、translate等），将每次所有的属性放入一个栈中。</p> 
<h4 id="ctx.restore()">ctx.restore()</h4> 
<p>恢复canvas状态，canvas状态是当前画面应用的所有样式和变形的一个快照。从save存放的栈中取出一次状态.</p> 
<h4 id="ctx.translate(x%2Cy)">ctx.translate(x,y)</h4> 
<p>绘制内容左上角起点坐标偏移到x、y，水平向右和竖直向下为正向。</p> 
<h4 id="ctx.rotate(deg)">ctx.rotate(deg)</h4> 
<p>图案顺时针旋转deg弧度，初始圆心为图片的左上角顶点（<strong>可以通过translate改变圆心，x、y负数时相当于圆心在水平和竖直方向上正向移动）</strong>。</p> 
<h4 id="ctx.scale(x%2Cy)">ctx.scale(x,y)</h4> 
<p>图案在x、y轴方向的缩放倍数，默认为1，大于1代表放大，小于1代表缩小。</p> 
<h4 id="ctx.transform(a%2Cb%2Cc%2Cd%2Ce%2Cf)">ctx.transform(a,b,c,d,e,f)</h4> 
<p>是上述属性的综合写法，a、d表示水平和竖直防线的；b、c为竖直和水平防线的倾斜偏移；e、f为水平和竖直方向的移动。</p> 
<h3 id="canvas.toDataURL(type%2CencoderOptions)%C2%A0">canvas.toDataURL(type,encoderOptions) </h3> 
<p>将指定<span style="color:#fe2c24;"><strong>canvas内容转换为base64编码的图片</strong></span>（<strong>图片转换为base64位编码后，图片会跟随代码（html、css、js）一起请求加载，<span style="color:#fe2c24;">不会单独进行请求加载</span></strong>），canvas为html中canvas节点而不是画布上下文。type为指定的格式（image/png、image/jpeg、image/webp等，默认为image/png）；encoderOptions为用于设置转换为base64编码后图片的质量，取值范围为0-1，超出范围用默认值0.92代替。</p> 
<h3 id="html%E8%8A%82%E7%82%B9%E8%BD%ACcanvas%E8%BD%ACbase64%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E7%A4%BA%E4%BE%8B%EF%BC%88html2canvas%EF%BC%89">html节点转canvas转base64图片下载示例（html2canvas）</h3> 
<p>注意html节点中如果有img标签，避免图片渲染不出来，需要设置属性crossOrigin="anonymous"。</p> 
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image" rel="nofollow" title="Allowing cross-origin use of images and canvas - HTML: HyperText Markup Language | MDN">Allowing cross-origin use of images and canvas - HTML: HyperText Markup Language | MDN</a></p> 
<p><a href="https://blog.csdn.net/AIWWY/article/details/126017250" title="html标签中crossOrigin、integrity属性详解_YF-SOD的博客-CSDN博客">html标签中crossOrigin、integrity属性详解_YF-SOD的博客-CSDN博客</a> </p> 
<pre><code class="language-TypeScript">import html2canvas from "html2canvas";
const downloadFile = (content, fileName) =&gt; {
  //下载base64图片
  let base64ToBlob = function (code) {
    let parts = code.split(";base64,");
    let contentType = parts[0].split(":")[1];
    let raw = window.atob(parts[1]); //base64解码
    let rawLength = raw.length;
    let uInt8Array = new Uint8Array(rawLength);
    for (let i = 0; i &lt; rawLength; ++i) {
      uInt8Array[i] = raw.charCodeAt(i); //将每一位转换为unicode编码
    }
    return new Blob([uInt8Array], {
      //生成二进制流
      type: contentType,
    });
  };
  let aLink = document.createElement("a");
  let blob = base64ToBlob(content); //new Blob([content]);
  let evt = document.createEvent("htmlEvents");
  evt.initEvent("click", true, true); //initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为
  aLink.download = fileName;
  aLink.href = URL.createObjectURL(blob);
  aLink.click();
};
const DPR = () =&gt; {
  if (window.devicePixelRatio &amp;&amp; window.devicePixelRatio &gt; 1) {
    return window.devicePixelRatio;
  } else {
    return 1;
  }
};
const downloadDomPng = async () =&gt; {
  const dom = document.getElementById("convertCanvasDom"); // 获取想要转换的 DOM 节点
  const box = window.getComputedStyle(dom);
  const width = box.width; // 根据DOM节点设置宽高
  const height = box.height;
  const scaleBy = DPR(); // 获取像素比-防止模糊
  const canvas = document.createElement("canvas"); // 创建自定义 canvas 元素
  canvas.width = width * scaleBy; // 设定 canvas 元素属性宽高为 DOM 节点宽高 * 像素比
  canvas.height = height * scaleBy;
  // 设定 canvas css宽高为 DOM 节点宽高
  canvas.style.width = `${width}px`;
  canvas.style.height = `${height}px`;
  return await html2canvas(dom, {
    canvas,
    proxy: "https://baidu.com", //设置和线上相同的域名地址
    useCORS: true,//true加载跨域图像的配置
  }).then((canvas) =&gt; {
    downloadFile(canvas.toDataURL("image/png"), "filename");
  });
};
</code></pre> 
<h4 id="%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90">示例使用方法解析</h4> 
<p><a href="https://blog.csdn.net/AIWWY/article/details/125991860" title="URL.createObjectURL、URL.revokeObjectURL、Uint8Array、Blob使用详解_YF-SOD的博客-CSDN博客">URL.createObjectURL、URL.revokeObjectURL、Uint8Array、Blob使用详解_YF-SOD的博客-CSDN博客</a></p> 
<h2 id="canvas%E6%96%87%E6%A1%A3">canvas文档</h2> 
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" rel="nofollow" title="Canvas - Web API 接口参考 | MDN">Canvas - Web API 接口参考 | MDN</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84a222ca2398cd5cf91cdbbb6e73a23e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java学习-Stream流和异常</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f1eb3b916cd1cb1f801559bbd5e76750/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序引用Map地图规划制定路径行走并显示路径</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>