<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React native 生成资源清单文件 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="React native 生成资源清单文件" />
<meta property="og:description" content="在开发中,我们时常要引用很多资源,比如图片,字符串,颜色等等，
react 这个引用方法 import和require 必须传递相对路径,不便于移动应用开发,本人实在受不了这种引用方式,而且require加载图片,不能是变量,很烦人,我给出一种映射解决办法
上面这种图片引用方式实在太痛苦,我给出一种优雅方案,动态产生资源清单文件:
第一步:在项目根目录新建一个init.js文件
第二步:在init文件中加入代码:
/** * @author youxuan E-mail:xuanyouwu@163.com * @Description * @Company Beijing dsb */ //获取项目工程里的图片 var fs = require(&#39;fs&#39;);//引用文件系统模块 //小心勿动 gennerateResource(&#39;Resource.ts&#39;); /** * 生成清单 */ function gennerateResource(fileName) { var notice = `\n//!!!!!代码自动生成,请勿手动修改!!!!!\n`; var content = `\n/**\n* @author youxuan E-mail:xuanyouwu@163.com\n* @Description 资源清单\n*/\n`; var images = `${listImages(&#34;./react_native/imgs&#34;)}`; var strings = `export const String={\n${listStrings(&#34;./react_native/res/strings&#34;)}\n};`; var colors = `export const Color={\n${listColors(&#34;./react_native/res/colors&#34;)}\n};`; var values = `export const Value={\n${listDimen(&#34;./react_native/res/values&#34;)}\n};`; content = `${content} \n${notice}\n${images} \n${notice}\n${strings} \n${notice}\n${colors} \n${notice}\n${values}`; fs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8945116814d7a19b3f95b4f4f7756589/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-05T11:09:49+08:00" />
<meta property="article:modified_time" content="2023-09-05T11:09:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">React native 生成资源清单文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在开发中,我们时常要引用很多资源,比如图片,字符串,颜色等等，</p> 
<p><img alt="" class="has" height="374" src="https://images2.imgbox.com/6a/85/zJZpOERq_o.png" width="1200"><br> react 这个引用方法 import和require 必须传递相对路径,不便于移动应用开发,本人实在受不了这种引用方式,而且require加载图片,不能是变量,很烦人,我给出一种映射解决办法</p> 
<p><img alt="" class="has" height="394" src="https://images2.imgbox.com/de/39/pjuDZb8h_o.png" width="1200"></p> 
<h4>上面这种图片引用方式实在太痛苦,我给出一种优雅方案,动态产生资源清单文件:<br> 第一步:在项目根目录新建一个init.js文件<br><img alt="" class="has" height="710" src="https://images2.imgbox.com/8e/73/odjdoCLq_o.png" width="458"></h4> 
<h3>第二步:在init文件中加入代码:<br>  </h3> 
<pre class="has"><code class="language-javascript">/**
 * @author youxuan  E-mail:xuanyouwu@163.com
 * @Description
 * @Company Beijing dsb
 */
//获取项目工程里的图片
var fs = require('fs');//引用文件系统模块

//小心勿动
gennerateResource('Resource.ts');


/**
 * 生成清单
 */
function gennerateResource(fileName) {
    var notice = `\n//!!!!!代码自动生成,请勿手动修改!!!!!\n`;
    var content = `\n/**\n* @author youxuan  E-mail:xuanyouwu@163.com\n* @Description 资源清单\n*/\n`;

    var images = `${listImages("./react_native/imgs")}`;
    var strings = `export const String={\n${listStrings("./react_native/res/strings")}\n};`;
    var colors = `export const Color={\n${listColors("./react_native/res/colors")}\n};`;
    var values = `export const Value={\n${listDimen("./react_native/res/values")}\n};`;

    content = `${content}
    \n${notice}\n${images}
    \n${notice}\n${strings}
    \n${notice}\n${colors}
    \n${notice}\n${values}`;
    fs.writeFile(fileName, content, function (error) {
    })
}


/**
 * 列出图片清单
 * @param dirPath
 * @param fileName
 * @returns {string}
 */
function listImages(dirPath) {
    var content = ``;
    var files = fs.readdirSync(dirPath);
    files.forEach(function (itm, index) {
        if (!(itm.includes('@2x') || itm.includes('@3x'))) {
            content = `${content}\nexport let ${itm.replace('.png', '')}=()=&gt;require('${dirPath}/${itm}');`;
        }
    });
    return content;
}

/**
 * 列出所有的字符串
 * 1个目录对应多个string.json文件
 *  1.需要解决声明重复问题
 *  2.需要不同的命名空间
 * @param dirPath
 */
function listStrings(dirPath) {
    let stringResource = '';
    var files = fs.readdirSync(dirPath);
    files.forEach(function (itm, index) {
        if (itm.endsWith('.json')) {
            var data = fs.readFileSync(`${dirPath}/${itm}`);
            let jsonObj = JSON.parse(data.toString());
            Object.keys(jsonObj).map((key) =&gt; {
                stringResource = `${stringResource}\t${key}:()=&gt;"${jsonObj[key]}",\n`
            });
        } else {
            throw new Error('you must rename filename endwith .json')
        }
    });
    if (stringResource) {
        stringResource = stringResource.substring(0, stringResource.lastIndexOf(','));
    }
    console.log(`stringResource:\n` + stringResource);
    return stringResource;
}


/**
 * 列出所有的颜色
 * 1个目录对应多个color.json文件
 *  1.需要解决声明重复问题
 *  2.需要不同的命名空间
 * @param dirPath
 */
function listColors(dirPath) {
    let colorResource = '';
    var files = fs.readdirSync(dirPath);
    files.forEach(function (itm, index) {
        if (itm.endsWith('.json')) {
            var data = fs.readFileSync(`${dirPath}/${itm}`);
            let jsonObj = JSON.parse(data.toString());
            Object.keys(jsonObj).map((key) =&gt; {
                colorResource = `${colorResource}\t${key}:()=&gt;"${jsonObj[key]}",\n`
            });
        } else {
            throw new Error('you must rename filename endwith .json')
        }
    });
    if (colorResource) {
        colorResource = colorResource.substring(0, colorResource.lastIndexOf(','));
    }
    //console.log(`colorResource:\n` + colorResource);
    return colorResource;
}

/**
 * 列出所有的单位
 * 1个目录对应多个dimen.json文件
 *  1.需要解决声明重复问题
 *  2.需要不同的命名空间
 * @param dirPath
 */
function listDimen(dirPath) {
    let dimenResource = '';
    var files = fs.readdirSync(dirPath);
    files.forEach(function (itm, index) {
        if (itm.endsWith('.json')) {
            var data = fs.readFileSync(`${dirPath}/${itm}`);
            let jsonObj = JSON.parse(data.toString());
            Object.keys(jsonObj).map((key) =&gt; {
                dimenResource = `${dimenResource}\t${key}:()=&gt;${jsonObj[key]},\n`
            });
        } else {
            throw new Error('you must rename filename endwith .json')
        }
    });
    if (dimenResource) {
        dimenResource = dimenResource.substring(0, dimenResource.lastIndexOf(','));
    }
    //console.log(`dimenResource:\n` + dimenResource);
    return dimenResource;
}
</code></pre> 
<p><span style="color:#f33b45;">注意其中的路径,路径填充好了,就执行node init命令就好了(webstorm term)</span><br><img alt="" class="has" height="870" src="https://images2.imgbox.com/37/bd/McAn3dML_o.png" width="1200"></p> 
<p><img alt="" class="has" height="886" src="https://images2.imgbox.com/be/72/dDEF5JY0_o.png" width="1200"></p> 
<p>这样就会在项目根目录生成Resouce文件,如下:<br>  </p> 
<pre class="has"><code class="language-javascript">
/**
* @author youxuan  E-mail:xuanyouwu@163.com
* @Description 资源清单
*/

    

//!!!!!代码自动生成,请勿手动修改!!!!!


export let bg_filelist=()=&gt;require('./react_native/imgs/bg_filelist.png');
export let bg_filelist_selected_multi=()=&gt;require('./react_native/imgs/bg_filelist_selected_multi.png');
export let bg_filelist_selected_single=()=&gt;require('./react_native/imgs/bg_filelist_selected_single.png');
export let bg_filelist_selected_two=()=&gt;require('./react_native/imgs/bg_filelist_selected_two.png');
export let bg_white_round_rect=()=&gt;require('./react_native/imgs/bg_white_round_rect.png');
export let filetype_excel_tilemode=()=&gt;require('./react_native/imgs/filetype_excel_tilemode.png');
export let filetype_file_tilemode=()=&gt;require('./react_native/imgs/filetype_file_tilemode.png');
export let filetype_folder=()=&gt;require('./react_native/imgs/filetype_folder.png');
export let filetype_folder_tilemode=()=&gt;require('./react_native/imgs/filetype_folder_tilemode.png');
export let filetype_other=()=&gt;require('./react_native/imgs/filetype_other.png');
export let filetype_ppt_tilemode=()=&gt;require('./react_native/imgs/filetype_ppt_tilemode.png');
export let filetype_word_tilemode=()=&gt;require('./react_native/imgs/filetype_word_tilemode.png');
export let ic_add=()=&gt;require('./react_native/imgs/ic_add.png');
export let ic_avatar=()=&gt;require('./react_native/imgs/ic_avatar.png');
export let ic_back=()=&gt;require('./react_native/imgs/ic_back.png');
export let ic_close=()=&gt;require('./react_native/imgs/ic_close.png');
export let ic_filelist_back=()=&gt;require('./react_native/imgs/ic_filelist_back.png');
export let ic_filelist_collaboration=()=&gt;require('./react_native/imgs/ic_filelist_collaboration.png');
export let ic_filelist_list_style=()=&gt;require('./react_native/imgs/ic_filelist_list_style.png');
export let ic_filelist_main=()=&gt;require('./react_native/imgs/ic_filelist_main.png');
export let ic_filelist_more=()=&gt;require('./react_native/imgs/ic_filelist_more.png');
export let ic_filelist_pub=()=&gt;require('./react_native/imgs/ic_filelist_pub.png');
export let ic_filelist_search=()=&gt;require('./react_native/imgs/ic_filelist_search.png');
export let ic_filelist_selected=()=&gt;require('./react_native/imgs/ic_filelist_selected.png');
export let ic_filelist_selected_group_action_toclose=()=&gt;require('./react_native/imgs/ic_filelist_selected_group_action_toclose.png');
export let ic_filelist_selected_group_action_tofolder=()=&gt;require('./react_native/imgs/ic_filelist_selected_group_action_tofolder.png');
export let ic_filelist_selected_group_action_tostarred=()=&gt;require('./react_native/imgs/ic_filelist_selected_group_action_tostarred.png');
export let ic_filelist_selected_group_action_totrash=()=&gt;require('./react_native/imgs/ic_filelist_selected_group_action_totrash.png');
export let ic_filelist_selected_group_more=()=&gt;require('./react_native/imgs/ic_filelist_selected_group_more.png');
export let ic_filelist_sorttype=()=&gt;require('./react_native/imgs/ic_filelist_sorttype.png');
export let ic_filelist_star=()=&gt;require('./react_native/imgs/ic_filelist_star.png');
export let ic_filelist_tile_style=()=&gt;require('./react_native/imgs/ic_filelist_tile_style.png');
export let ic_filelist_unselected=()=&gt;require('./react_native/imgs/ic_filelist_unselected.png');
export let ic_filetype_excel=()=&gt;require('./react_native/imgs/ic_filetype_excel.png');
export let ic_filetype_folder=()=&gt;require('./react_native/imgs/ic_filetype_folder.png');
export let ic_filetype_ppt=()=&gt;require('./react_native/imgs/ic_filetype_ppt.png');
export let ic_filetype_word=()=&gt;require('./react_native/imgs/ic_filetype_word.png');
export let ic_menu_collect=()=&gt;require('./react_native/imgs/ic_menu_collect.png');
export let ic_menu_desktop=()=&gt;require('./react_native/imgs/ic_menu_desktop.png');
export let ic_menu_recent_use=()=&gt;require('./react_native/imgs/ic_menu_recent_use.png');
export let ic_menu_recycle_bin=()=&gt;require('./react_native/imgs/ic_menu_recycle_bin.png');
export let ic_menu_setting=()=&gt;require('./react_native/imgs/ic_menu_setting.png');
export let ic_menu_share=()=&gt;require('./react_native/imgs/ic_menu_share.png');
export let ic_tab_setting_normal=()=&gt;require('./react_native/imgs/ic_tab_setting_normal.png');
export let ic_tab_setting_selected=()=&gt;require('./react_native/imgs/ic_tab_setting_selected.png');
export let main=()=&gt;require('./react_native/imgs/main.png');
export let main_list_search=()=&gt;require('./react_native/imgs/main_list_search.png');
export let main_list_sort=()=&gt;require('./react_native/imgs/main_list_sort.png');
export let main_list_tile=()=&gt;require('./react_native/imgs/main_list_tile.png');
export let selected=()=&gt;require('./react_native/imgs/selected.png');
    

//!!!!!代码自动生成,请勿手动修改!!!!!

export const String={
	titleMain:()=&gt;"主页",
	titleSetting:()=&gt;"设置",
	testMain:()=&gt;"test主页",
	testSetting:()=&gt;"test设置"
};
    

//!!!!!代码自动生成,请勿手动修改!!!!!

export const Color={
	titleColor:()=&gt;"#6cf",
	windowBackground:()=&gt;"#fff",
	testColor:()=&gt;"#6cf",
	testBackground:()=&gt;"#fff"
};
    

//!!!!!代码自动生成,请勿手动修改!!!!!

export const Value={
	titleSize:()=&gt;16,
	contentSize:()=&gt;12,
	testTitleSize:()=&gt;17,
	testContentSize:()=&gt;11
};</code></pre> 
<p>这个时候我们就可以引用这个类了<br>  </p> 
<pre class="has"><code class="language-javascript">1. 执行命令 node init
2. import * as Resource from '../../../../Resource';
3. &lt;Image source={Resource.ic_menu_desktop()} style={<!-- -->{width: 40, height: 40}}&gt;&lt;/Image&gt;
  </code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b8ffd1be1980a5240f4bd2db1f2bb224/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;程序架构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1734486e11c3b2bcd75bc41348d80980/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AHB_Matrix</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>