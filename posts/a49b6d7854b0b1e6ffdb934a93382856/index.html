<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Clickhouse 入门到精通]-单机安装部署 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[Clickhouse 入门到精通]-单机安装部署" />
<meta property="og:description" content="Clickhouse官网：ClickHouse - Fast Open-Source OLAP DBMS
Clickhouse中文官网：什么是ClickHouse？ | ClickHouse Docs
1、安装 curl 工具 [root@master package]# yum install -y curl 已加载插件：fastestmirror, langpacks Loading mirror speeds from cached hostfile * base: mirrors.aliyun.com * extras: mirrors.huaweicloud.com * updates: mirrors.aliyun.com base | 3.6 kB 00:00:00 extras | 2.9 kB 00:00:00 updates | 2.9 kB 00:00:00 updates/7/x86_64/primary_db | 4.7 MB 00:00:05 正在解决依赖关系 --&gt; 正在检查事务 ---&gt; 软件包 curl.x86_64.0.7.29.0-59.el7 将被 升级 ---&gt; 软件包 curl.x86_64.0.7.29.0-59.el7_9.1 将被 更新 --&gt; 正在处理依赖关系 libcurl = 7." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/a49b6d7854b0b1e6ffdb934a93382856/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-12T17:50:51+08:00" />
<meta property="article:modified_time" content="2023-01-12T17:50:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Clickhouse 入门到精通]-单机安装部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Clickhouse官网：<a href="https://clickhouse.tech/" rel="nofollow" title="ClickHouse - Fast Open-Source OLAP DBMS">ClickHouse - Fast Open-Source OLAP DBMS</a></p> 
<p>Clickhouse中文官网：<a href="https://clickhouse.tech/docs/zh/" rel="nofollow" title="什么是ClickHouse？ | ClickHouse Docs">什么是ClickHouse？ | ClickHouse Docs</a></p> 
<h2> 1、安装 curl 工具</h2> 
<pre><code>[root@master package]# yum install -y curl
已加载插件：fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.aliyun.com
base                                                                                                                                          | 3.6 kB  00:00:00
extras                                                                                                                                        | 2.9 kB  00:00:00
updates                                                                                                                                       | 2.9 kB  00:00:00
updates/7/x86_64/primary_db                                                                                                                   | 4.7 MB  00:00:05
正在解决依赖关系
--&gt; 正在检查事务
---&gt; 软件包 curl.x86_64.0.7.29.0-59.el7 将被 升级
---&gt; 软件包 curl.x86_64.0.7.29.0-59.el7_9.1 将被 更新
--&gt; 正在处理依赖关系 libcurl = 7.29.0-59.el7_9.1，它被软件包 curl-7.29.0-59.el7_9.1.x86_64 需要
--&gt; 正在检查事务
---&gt; 软件包 libcurl.x86_64.0.7.29.0-59.el7 将被 升级
---&gt; 软件包 libcurl.x86_64.0.7.29.0-59.el7_9.1 将被 更新
--&gt; 解决依赖关系完成

依赖关系解决

=====================================================================================================================================================================
 Package                              架构                                版本                                            源                                    大小
=====================================================================================================================================================================
正在更新:
 curl                                 x86_64                              7.29.0-59.el7_9.1                               updates                              271 k
为依赖而更新:
 libcurl                              x86_64                              7.29.0-59.el7_9.1                               updates                              223 k

事务概要
=====================================================================================================================================================================
升级  1 软件包 (+1 依赖软件包)

总下载量：494 k
Downloading packages:
No Presto metadata available for updates
警告：/var/cache/yum/x86_64/7/updates/packages/curl-7.29.0-59.el7_9.1.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY
curl-7.29.0-59.el7_9.1.x86_64.rpm 的公钥尚未安装
(1/2): curl-7.29.0-59.el7_9.1.x86_64.rpm                                                                                                      | 271 kB  00:00:00
(2/2): libcurl-7.29.0-59.el7_9.1.x86_64.rpm                                                                                                   | 223 kB  00:00:00
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
总计                                                                                                                                 1.5 MB/s | 494 kB  00:00:00
从 file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 检索密钥
导入 GPG key 0xF4A80EB5:
 用户ID     : "CentOS-7 Key (CentOS 7 Official Signing Key) &lt;security@centos.org&gt;"
 指纹       : 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5
 软件包     : centos-release-7-9.2009.0.el7.centos.x86_64 (@anaconda)
 来自       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  正在更新    : libcurl-7.29.0-59.el7_9.1.x86_64                                                                                                                 1/4
  正在更新    : curl-7.29.0-59.el7_9.1.x86_64                                                                                                                    2/4
  清理        : curl-7.29.0-59.el7.x86_64                                                                                                                        3/4
  清理        : libcurl-7.29.0-59.el7.x86_64                                                                                                                     4/4
  验证中      : curl-7.29.0-59.el7_9.1.x86_64                                                                                                                    1/4
  验证中      : libcurl-7.29.0-59.el7_9.1.x86_64                                                                                                                 2/4
  验证中      : libcurl-7.29.0-59.el7.x86_64                                                                                                                     3/4
  验证中      : curl-7.29.0-59.el7.x86_64                                                                                                                        4/4

更新完毕:
  curl.x86_64 0:7.29.0-59.el7_9.1

作为依赖被升级:
  libcurl.x86_64 0:7.29.0-59.el7_9.1

完毕！
[root@master package]#</code></pre> 
<h2>2、添加clickhouse的yum镜像</h2> 
<pre><code>[root@master package]# curl -s https://packagecloud.io/install/repositories/altinity/clickhouse/script.rpm.sh | sudo bash
Detected operating system as centos/7.
Checking for curl...
Detected curl...
Downloading repository file: https://packagecloud.io/install/repositories/Altinity/clickhouse/config_file.repo?os=centos&amp;dist=7&amp;source=script
done.
Installing pygpgme to verify GPG signatures...
已加载插件：fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirrors.huaweicloud.com
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.huaweicloud.com
Altinity_clickhouse-source/signature                                                                                                          |  833 B  00:00:00
从 https://packagecloud.io/Altinity/clickhouse/gpgkey 检索密钥
导入 GPG key 0x0F6E36F6:
 用户ID     : "https://packagecloud.io/altinity/clickhouse (https://packagecloud.io/docs#gpg_signing) &lt;support@packagecloud.io&gt;"
 指纹       : 7001 38a9 6a20 6b22 bf28 3c06 ed26 58f3 0f6e 36f6
 来自       : https://packagecloud.io/Altinity/clickhouse/gpgkey
Altinity_clickhouse-source/signature                                                                                                          | 1.0 kB  00:00:00 !!!
Altinity_clickhouse-source/primary                                                                                                            |  175 B  00:00:03
软件包 pygpgme-0.3-9.el7.x86_64 已安装并且是最新版本
无须任何处理
Installing yum-utils...
已加载插件：fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirrors.bfsu.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.bfsu.edu.cn
软件包 yum-utils-1.1.31-54.el7_8.noarch 已安装并且是最新版本
无须任何处理
Generating yum cache for Altinity_clickhouse...
导入 GPG key 0x0F6E36F6:
 用户ID     : "https://packagecloud.io/altinity/clickhouse (https://packagecloud.io/docs#gpg_signing) &lt;support@packagecloud.io&gt;"
 指纹       : 7001 38a9 6a20 6b22 bf28 3c06 ed26 58f3 0f6e 36f6
 来自       : https://packagecloud.io/Altinity/clickhouse/gpgkey
Generating yum cache for Altinity_clickhouse-source...

The repository is setup! You can now install packages.
[root@master package]#</code></pre> 
<p>检查镜像情况，如下所示：</p> 
<p>安装包列表：<br> 　　clickhouse-common-static — ClickHouse编译的二进制文件。<br> 　　clickhouse-server — 创建clickhouse-server软连接，并安装默认配置服务<br> 　　clickhouse-client — 创建clickhouse-client客户端工具软连接，并安装客户端配置文件。<br> 　　clickhouse-common-static-dbg — 带有调试信息的ClickHouse二进制文件。</p> 
<pre><code>[root@master package]# yum list | grep clickhouse
clickhouse-client.x86_64                    20.8.3.18-1.el7            Altinity_clickhouse
clickhouse-common-static.x86_64             20.8.3.18-1.el7            Altinity_clickhouse
clickhouse-debuginfo.x86_64                 20.1.11.73-1.el7           Altinity_clickhouse
clickhouse-odbc.x86_64                      1.1.9-1.el7                Altinity_clickhouse
clickhouse-server.x86_64                    20.8.3.18-1.el7            Altinity_clickhouse
clickhouse-server-common.x86_64             20.8.3.18-1.el7            Altinity_clickhouse
clickhouse-test.x86_64                      20.8.3.18-1.el7            Altinity_clickhouse
clicktail.x86_64                            1.0.20180401-1             Altinity_clickhouse
[root@master package]#</code></pre> 
<h2>3、安装clickhouse的服务端和客户端</h2> 
<p>        使用yum安装，yum可以解决依赖关系，如下所示</p> 
<pre><code>[root@master ~]#  yum install -y clickhouse-server clickhouse-client
已加载插件：fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirrors.huaweicloud.com
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.huaweicloud.com
Altinity_clickhouse/x86_64/signature                                                                                                          |  833 B  00:00:00
Altinity_clickhouse/x86_64/signature                                                                                                          | 1.0 kB  00:00:00 !!!
Altinity_clickhouse-source/signature                                                                                                          |  833 B  00:00:00
Altinity_clickhouse-source/signature                                                                                                          | 1.0 kB  00:00:00 !!!
正在解决依赖关系
--&gt; 正在检查事务
---&gt; 软件包 clickhouse-client.x86_64.0.20.8.3.18-1.el7 将被 安装
---&gt; 软件包 clickhouse-server.x86_64.0.20.8.3.18-1.el7 将被 安装
--&gt; 正在处理依赖关系 clickhouse-server-common = 20.8.3.18-1.el7，它被软件包 clickhouse-server-20.8.3.18-1.el7.x86_64 需要
--&gt; 正在处理依赖关系 clickhouse-common-static = 20.8.3.18-1.el7，它被软件包 clickhouse-server-20.8.3.18-1.el7.x86_64 需要
--&gt; 正在检查事务
---&gt; 软件包 clickhouse-common-static.x86_64.0.20.8.3.18-1.el7 将被 安装
---&gt; 软件包 clickhouse-server-common.x86_64.0.20.8.3.18-1.el7 将被 安装
--&gt; 解决依赖关系完成

依赖关系解决

=====================================================================================================================================================================
 Package                                        架构                         版本                                    源                                         大小
=====================================================================================================================================================================
正在安装:
 clickhouse-client                              x86_64                       20.8.3.18-1.el7                         Altinity_clickhouse                       6.2 k
 clickhouse-server                              x86_64                       20.8.3.18-1.el7                         Altinity_clickhouse                        35 M
为依赖而安装:
 clickhouse-common-static                       x86_64                       20.8.3.18-1.el7                         Altinity_clickhouse                        66 M
 clickhouse-server-common                       x86_64                       20.8.3.18-1.el7                         Altinity_clickhouse                        14 k

事务概要
=====================================================================================================================================================================
安装  2 软件包 (+2 依赖软件包)

总下载量：101 M
安装大小：547 M
Downloading packages:
(1/4): clickhouse-client-20.8.3.18-1.el7.x86_64.rpm                                                                                           | 6.2 kB  00:00:01
(2/4): clickhouse-common-static-20.8.3.18-1.el7.x86_64.rpm                                                                                    |  66 MB  00:00:33
(3/4): clickhouse-server-common-20.8.3.18-1.el7.x86_64.rpm                                                                                    |  14 kB  00:00:00
(4/4): clickhouse-server-20.8.3.18-1.el7.x86_64.rpm                                                                                           |  35 MB  00:00:44
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
总计                                                                                                                                 2.2 MB/s | 101 MB  00:00:45
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  正在安装    : clickhouse-common-static-20.8.3.18-1.el7.x86_64                                                                                                  1/4
  正在安装    : clickhouse-server-common-20.8.3.18-1.el7.x86_64                                                                                                  2/4
  正在安装    : clickhouse-server-20.8.3.18-1.el7.x86_64                                                                                                         3/4
Create user clickhouse.clickhouse with datadir /var/lib/clickhouse
  正在安装    : clickhouse-client-20.8.3.18-1.el7.x86_64                                                                                                         4/4
Create user clickhouse.clickhouse with datadir /var/lib/clickhouse
  验证中      : clickhouse-server-common-20.8.3.18-1.el7.x86_64                                                                                                  1/4
  验证中      : clickhouse-common-static-20.8.3.18-1.el7.x86_64                                                                                                  2/4
  验证中      : clickhouse-client-20.8.3.18-1.el7.x86_64                                                                                                         3/4
  验证中      : clickhouse-server-20.8.3.18-1.el7.x86_64                                                                                                         4/4

已安装:
  clickhouse-client.x86_64 0:20.8.3.18-1.el7                                        clickhouse-server.x86_64 0:20.8.3.18-1.el7

作为依赖被安装:
  clickhouse-common-static.x86_64 0:20.8.3.18-1.el7                                 clickhouse-server-common.x86_64 0:20.8.3.18-1.el7

完毕！
[root@master ~]#</code></pre> 
<h2>4、启动clickhouse服务daunt</h2> 
<pre><code>[root@master ~]# service clickhouse-server start 
Start clickhouse-server service: Path to data directory in /etc/clickhouse-server/config.xml: /var/lib/clickhouse/
DONE
[root@master ~]# </code></pre> 
<p> 关闭clickhouse服务的命令，service clickhouse-server stop。</p> 
<p>启动交互式客户端，客户端支持的参数，如下所示：</p> 
<p>　　1）、--host，-h，服务端的host名称，默认是localhost。<br> 　　2）、--port，连接的端口，默认值是9000。<br> 　　3）、--user，-u，用户名称，默认值是default。<br> 　　4）、--password，密码，默认值是空字符串。<br> 　　5）、--query，-q，非交互模式下的查询语句。<br> 　　6）、--databases，-d，默认当前操作的数据库，默认值是default。<br> 　　7）、--multiline，-m，允许多行语句查询。<br> 　　8）、--format，-f，使用指定的默认格式输出结果。<br> 　　9）、--time，-t，非交互模式下会打印查询执行的时间到窗口。<br> 　　10）、--stacktrace，如果出现异常，会打印堆栈跟踪信息。<br> 　　11）、--config-file，配置文件的名称。</p> 
<h2>5、启动 clickhouse 客户端</h2> 
<pre><code>[root@master ~]# clickhouse-client -m     # -m参数可以让输入多行，即换行之后也可以继续输入
ClickHouse client version 20.8.3.18.
Connecting to localhost:9000 as user default.
Connected to ClickHouse server version 20.8.3 revision 54438.

master :) select 1
:-] ;

SELECT 1

┌─1─┐
│ 1 │
└───┘

1 rows in set. Elapsed: 0.010 sec.

master :) select 1 + 1;

SELECT 1 + 1

┌─plus(1, 1)─┐
│          2 │
└────────────┘

1 rows in set. Elapsed: 0.007 sec.

master :)</code></pre> 
<h2>6、查看数据库信息</h2> 
<pre><code>master :)
master :) show databases;

SHOW DATABASES

┌─name───────────────────────────┐
│ _temporary_and_external_tables │
│ default                        │
│ system                         │
└────────────────────────────────┘

3 rows in set. Elapsed: 0.006 sec.

master :)</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dfd26380bdaecdbfd270dbe60952468d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ResNet网络解析及实战案例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce122c5a1f4e506a3ffe2153e1650b16/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ctfshow-36D杯-pwn(1024_happy_unlink )</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>