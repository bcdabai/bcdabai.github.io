<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>无招胜有招-Vivado非工程模式下的FPGA设计流程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="无招胜有招-Vivado非工程模式下的FPGA设计流程" />
<meta property="og:description" content="参考：UG892 UG835
Vivado集成开发工具为设计者提供了非工程模式下的FPGA设计流程。在Vivado非工程模式下，FPGA开发人员可以更加灵活地对设计过程的每个阶段进行控制，从而进一步提高FPGA的设计效率。
非工程模式下基本命令列表
命令
功能
read_edif
将EDIF或者NGC网表导入当前工程的设计源文件集合中
read_verilog
读入用于非工程模式会话的Verilog(.v)和SystemVerilog(.sv)源文件
read_vhdl
读入用于非工程模式会话的VHDL(.vhd或vhdl)源文件
read_ip
读入用于非工程模式会话的已经存在的IP(.xco或者.xci)工程文件。使用来自.xco IP工程的.ngc网表。对于.xci IP，使用RTL用于编译；或者如果存在网表，则使用网表
read_xdc
读入用于非工程模式会话的.sdc或者.xdc文件
set_param
set_property
用于多个目的。例如，它可以定义设计配置和工具设置等
link_design
如果会话中使用网表文件，则对设计进行编译，用于综合目的
synth_design
启动Vivado综合，包含设计的顶层模块名字和目标器件参数
opt_design
执行高层次设计优化
power_opt_design
执行智能时钟门控，用于降低系统的整体功耗（可选）
place_design
对设计进行布局
phys_opt_design
执行物理逻辑优化，以改善时序和布线能力（可选）
route_design
对设计进行布线
report*
运行多个标准的报告，可以在设计过程的任何一个阶段运行它
write_bitstream
生成一个比特流文件，并且运行DRC
write_checkpoint
read_checkpoint
在设计流程的任何点保存设计。一个设计检査点由网表和约束构成，它们在设计流程的该点进行了优化，以及包含实现的结果
start_gui
stop_gui
调用在存储器中当前设计的Vivado集成开发环境
典型TCL脚本
为了方便读者从整体上了解在Vivado非工程模式下的基本命令的功能，下面将给出用于Vivado设计套件示例的非工程模式TCL脚本，该脚本可以说明使用设计检查点、用于保存设计流程中各个阶段的数据库状态和手工生成各种报告的方法。
通过下面的命令运行该Tcl脚本文件:
vivado -mode tcl –source create_bft_batch.tcl
Following is an example of a Non-Project Mode script, which reads in various source files:
# create_bft_batch." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/dbcb26ae3626fc44d724ac623e5f0404/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-17T08:00:00+08:00" />
<meta property="article:modified_time" content="2021-06-17T08:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">无招胜有招-Vivado非工程模式下的FPGA设计流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align:justify;">参考：UG892 UG835</p> 
 <p style="text-align:justify;">Vivado集成开发工具为设计者提供了非工程模式下的FPGA设计流程。在Vivado非工程模式下，FPGA开发人员可以更加灵活地对设计过程的每个阶段进行控制，从而进一步提高FPGA的设计效率。</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/72/37/H3e9h2wp_o.png"></p> 
 <p><img alt="" src="https://images2.imgbox.com/e6/fa/Difkekuq_o.png"></p> 
 <p>非工程模式下基本命令列表</p> 
 <p><img alt="" src="https://images2.imgbox.com/97/40/J8NQNIt1_o.png"></p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/3e/44/ZSi9RV97_o.png"></p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/f2/65/OwBJ2kuW_o.png"></p> 
 <table><tbody><tr><td style="vertical-align:middle;"> <p style="text-align:left;">命令</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">功能</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">read_edif</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">将EDIF或者NGC网表导入当前工程的设计源文件集合中</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">read_verilog</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">读入用于非工程模式会话的Verilog(.v)和SystemVerilog(.sv)源文件</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">read_vhdl</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">读入用于非工程模式会话的VHDL(.vhd或vhdl)源文件</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">read_ip</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">读入用于非工程模式会话的已经存在的IP(.xco或者.xci)工程文件。使用来自.xco IP工程的.ngc网表。对于.xci IP，使用RTL用于编译；或者如果存在网表，则使用网表</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">read_xdc</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">读入用于非工程模式会话的.sdc或者.xdc文件</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">set_param</p> <p style="text-align:left;">set_property</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">用于多个目的。例如，它可以定义设计配置和工具设置等</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">link_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">如果会话中使用网表文件，则对设计进行编译，用于综合目的</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">synth_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">启动Vivado综合，包含设计的顶层模块名字和目标器件参数</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">opt_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">执行高层次设计优化</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">power_opt_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">执行智能时钟门控，用于降低系统的整体功耗（可选）</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">place_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">对设计进行布局</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">phys_opt_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">执行物理逻辑优化，以改善时序和布线能力（可选）</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">route_design</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">对设计进行布线</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">report*</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">运行多个标准的报告，可以在设计过程的任何一个阶段运行它</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">write_bitstream</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">生成一个比特流文件，并且运行DRC</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">write_checkpoint</p> <p style="text-align:left;">read_checkpoint</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">在设计流程的任何点保存设计。一个设计检査点由网表和约束构成，它们在设计流程的该点进行了优化，以及包含实现的结果</p> </td></tr><tr><td style="vertical-align:middle;"> <p style="text-align:left;">start_gui</p> <p style="text-align:left;">stop_gui</p> </td><td style="vertical-align:middle;"> <p style="text-align:left;">调用在存储器中当前设计的Vivado集成开发环境</p> </td></tr></tbody></table> 
 <p><img alt="" src="https://images2.imgbox.com/29/2f/TpdLpDL5_o.png"></p> 
 <p>典型TCL脚本</p> 
 <p><img alt="" src="https://images2.imgbox.com/f5/c3/s1vNeDC3_o.png"></p> 
 <p style="text-align:center;"><br><img alt="" src="https://images2.imgbox.com/9e/79/ErrObnH7_o.png"></p> 
 <p style="text-align:justify;">为了方便读者从整体上了解在Vivado非工程模式下的基本命令的功能，下面将给出用于Vivado设计套件示例的非工程模式TCL脚本，该脚本可以说明使用设计检查点、用于保存设计流程中各个阶段的数据库状态和手工生成各种报告的方法。</p> 
 <p style="text-align:justify;">通过下面的命令运行该Tcl脚本文件:</p> 
 <p style="text-align:justify;">vivado -mode tcl –source create_bft_batch.tcl</p> 
 <table><tbody><tr><td style="vertical-align:top;width:414.8pt;"> <p style="text-align:justify;">Following is an example of a Non-Project Mode script, which reads in various source files:</p> <p style="text-align:justify;"># create_bft_batch.tcl</p> <p style="text-align:justify;"># bft sample design</p> <p style="text-align:justify;"># A Vivado script that demonstrates a very simple RTL-to-bitstream batch flow</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># NOTE: typical usage would be "vivado -mode tcl -source create_bft_batch.tcl"</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#0: define output directory area.</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">set outputDir ./Tutorial_Created_Data/bft_output</p> <p style="text-align:justify;">file mkdir $outputDir</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#1: setup design sources and constraints</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">read_vhdl -library bftLib [ glob ./Sources/hdl/bftLib/*.vhdl ]</p> <p style="text-align:justify;">read_vhdl ./Sources/hdl/bft.vhdl</p> <p style="text-align:justify;">read_verilog [ glob ./Sources/hdl/*.v ]</p> <p style="text-align:justify;">read_xdc ./Sources/bft_full.xdc</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#2: run synthesis, report utilization and timing estimates, write checkpoint</p> <p style="text-align:justify;">design</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">synth_design -top bft -part xc7k70tfbg484-2 -flatten rebuilt</p> <p style="text-align:justify;">write_checkpoint -force $outputDir/post_synth</p> <p style="text-align:justify;">report_timing_summary -file $outputDir/post_synth_timing_summary.rpt</p> <p style="text-align:justify;">report_power -file $outputDir/post_synth_power.rpt</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#3: run placement and logic optimzation, report utilization and timing</p> <p style="text-align:justify;">estimates, write checkpoint design</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">opt_design</p> <p style="text-align:justify;">place_design</p> <p style="text-align:justify;">phys_opt_design</p> <p style="text-align:justify;">write_checkpoint -force $outputDir/post_place</p> <p style="text-align:justify;">report_timing_summary -file $outputDir/post_place_timing_summary.rpt</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#4: run router, report actual utilization and timing, write checkpoint design,</p> <p style="text-align:justify;">run drc, write verilog and xdc out</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">route_design</p> <p style="text-align:justify;">write_checkpoint -force $outputDir/post_route</p> <p style="text-align:justify;">report_timing_summary -file $outputDir/post_route_timing_summary.rpt</p> <p style="text-align:justify;">report_timing -sort_by group -max_paths 100 -path_type summary -file</p> <p style="text-align:justify;">$outputDir/post_route_timing.rpt</p> <p style="text-align:justify;">report_clock_utilization -file $outputDir/clock_util.rpt</p> <p style="text-align:justify;">report_utilization -file $outputDir/post_route_util.rpt</p> <p style="text-align:justify;">report_power -file $outputDir/post_route_power.rpt</p> <p style="text-align:justify;">report_drc -file $outputDir/post_imp_drc.rpt</p> <p style="text-align:justify;">write_verilog -force $outputDir/bft_impl_netlist.v</p> <p style="text-align:justify;">write_xdc -no_fixed_only -force $outputDir/bft_impl.xdc</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;"># STEP#5: generate a bitstream</p> <p style="text-align:justify;">#</p> <p style="text-align:justify;">write_bitstream -force $outputDir/bft.bit</p> </td></tr></tbody></table> 
 <p><img alt="" src="https://images2.imgbox.com/4b/c4/SR5pEs7J_o.png"></p> 
 <p>Vivado集成开发环境分析</p> 
 <p><img alt="" src="https://images2.imgbox.com/4f/42/RPWPWJAA_o.png"></p> 
 <p style="text-align:justify;">3.1 启 动 Vivado集 成 开 发 环 境</p> 
 <p style="text-align:justify;">当工作在非工程模式时，对于存储器中活动的设计来说，使用下面的命令打开/关闭Vivado集成开发环境。</p> 
 <p style="text-align:justify;">(l)start_gui，打开Vivado集成开发环境，用于存储器中活动的设计。</p> 
 <p style="text-align:justify;">(2)stop_gui，关闭Vivado集成开发环境，并且返回“Vivado Design Suite Tcl shell”界面。</p> 
 <p style="text-align:justify;">在设计过程的每个阶段，设计者均可以打开Vivado集成开发环境，对存储器中保存的当前设计进行分析和操作。在非工程模式下，在Vivado集成开发环境中，一些工程的特性是不可用的，如Flow Navigator、Project Summary，以及源文件的访问、管理和运行。然而，通过Vivado集成开发环境的Tools菜单，可以使用分析及修改约束等很多特性。</p> 
 <p style="text-align:justify;">需要知道的是，在Vivado集成开发环境中，对存储器中的设计所做的任何变化都会自动应用到下游工具中，这里没有保存的功能。如果设计者想要将约束的变化用于后续的运行，则在Vivado集成幵发的环境的主菜单下，执行菜单命令【File】—【Export】—【Export Constraints】，写到一个新的包含所有XDC文件的文件中。</p> 
 <p style="text-align:justify;">3.2 打开设计检查点的方法</p> 
 <p style="text-align:justify;">通过Vivado集成设计环境，设计者可以在保存的设计点上对设计进行分析。通过使用Tcl命令（synth_design、opt_design、power_opt_design、place_design、phys_opt_design和route_deSign)，设计者可以在非工程模式下运行一个设计，并且可以在任何阶段保存一个设计。这样，就可以在Vivado集成设计环境中读取设计。设计者可以从一个布线后的设计开始，分析时序，仅通过布局来解决时序问题。然后保存刚才的工作，甚至设计中还没有进行的布线操作。Vivado集成设计环境显示打开设计点的名字。</p> 
 <p style="text-align:justify;">设计者可以打开、分析和保存设计检查点，也可以将变化保存到新的设计点。</p> 
 <p style="text-align:justify;">(1)在Vivado集成开发环境下，执行菜单命令【File】-&gt;【Save Checkpoint】，保存对当前设计检查点的修改。</p> 
 <p style="text-align:justify;">(2)在Vivado集成开发环境下，执行菜单命令【File】—【Write Checkpoint】，将设计检查点的当前状态保存到一个新的设计检查点中。</p> 
 <p style="text-align:justify;">关于具体的每个命令的使用下一节将细致分析。</p> 
 <p style="text-align:center;">- END -</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1f/7e/KRKYwiYA_o.gif" width="120"></p> 
 <pre class="has"><code class="language-php">ＮＯＷ现在行动！
推荐阅读
【Vivado那些事】如何查找官网例程及如何使用官网例程【Vivado使用误区与进阶】总结篇【Vivado那些事】Vivado中常用的快捷键（一）F4键【Vivado那些事】Vivado中常用的快捷键（二）其他常用快捷键
SystemVerilog数字系统设计_夏宇闻 PDFVerilog 里面，always，assign和always@(*)区别
FPGA上如何求32个输入的最大值和次大值：分治图书推荐|ARM Cortex-M0 全可编程SoC原理及实现
简谈：如何学习FPGARISC-V再进阶！世界首款5纳米RISC-V SOC成功流片！
几款开源SDR平台Vitis尝鲜（一）
SDR/无线设计中LNA和PA的基本原理
拆解1968年的美国军用电脑，真的怀疑是“穿越”啊！
一文最全科普FPGA技术知识你见过1-bit CPU吗？高级FPGA设计技巧！多时钟域和异步信号处理解决方案
【Vivado那些事】Vivado中电路结构的网表描述
ZYNQ中裸机开发和Linux开发有什么区别？
现代计算机的雏形-微型计算机MCS-4
世界上第一个微处理器真的是Intel 4004吗？其实这是个很复杂的故事…
【每周一问】如何控制加载FPGA程序时，Xilinx FPGA的IO管脚输出高低电平
【Vivado那些事】vivado生成.bit文件时报错-ERROR: [Drc 23-20]
AD9361 和Zynq及其参考设计说明1202年了，还在使用虚拟机吗？Win10安装Ubuntu子系统及图形化界面详细教程谈谈Xilinx FPGA设计的实现过程
Github 上有哪些优秀的 VHDL/Verilog/FPGA 项目
AD936x+ZYNQ搭建收音机（一）
AD936x+ZYNQ搭建收音机（二）含视频演示
AD936x+ZYNQ搭建收音机（三）-终篇
AD936x+ZYNQ搭建OpenWIFI
Verilog 版本：Verilog-95、Verilog-2001与System Verilog区别简谈
FPGA时钟设计方案
【Vivado那些事】Vivado中增量编译与设计锁定
点击上方字体即可跳转阅读
</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1584dd6d5e2228c6b1c9d75f6e5c5ca5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">科学计算机 百分号,普通计算器上百分号（%）有什么用？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/15921c5d4e8da9535874f6db7d42c0a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决qt5安装后界面显示不全（已成功）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>