<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>有关BGP协议的13条选路规则，一些总结和看法 [收藏] - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="有关BGP协议的13条选路规则，一些总结和看法 [收藏]" />
<meta property="og:description" content="via 卢琪的博客 对于一个NE来说，BGP协议是一门必修课，它是全球互联网的大框架。而当BGP路由器从多个途径获取路有时候，却有一套繁琐的选路过程。总共有13个步骤。而在文章的最后，我总结了一套比较快速的记忆方法。当然，我也在用，很容易就能记住这冗长的13条。
首先奉上原文（中英文对照），这些是网上摘录。
1.weight
prefer the path that has the largest weight
优先选择高权重值的路径
cisco私有属性
2.loacl preference if the routes have the same weight,use the route with the highest loacl preference. 具有相同权重值的，将选取最高优先级得路径
the loacl preference attribute only is local to the autonomous system and does not get passed to EBGP neighbor
本地优先属性只在本自治系统有效，不会传递给EBGP邻居
3.originated
if the routes have same local preference,prefer the route that was originated by BGP on this router." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/702847b3739d5a45e8b1d965d51a23fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-05-27T23:25:23+08:00" />
<meta property="article:modified_time" content="2012-05-27T23:25:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">有关BGP协议的13条选路规则，一些总结和看法 [收藏]</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>via <a href="http://blog.sina.com.cn/s/blog_73779cf30100ykxl.html" rel="nofollow noopener noreferrer" target="_blank">卢琪的博客</a> </p> 
<p><br> </p> 
<p></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 对于一个NE来说，BGP协议是一门必修课，它是全球互联网的大框架。而当BGP路由器从多个途径获取路有时候，却有一套繁琐的选路过程。总共有13个步骤。而在文章的最后，我总结了一套比较快速的记忆方法。当然，我也在用，很容易就能记住这冗长的13条。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 首先奉上原文（中英文对照），这些是网上摘录。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 1.weight</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> prefer the path that has the largest weight</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 优先选择高权重值的路径</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> cisco私有属性</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 2.loacl preference <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if the routes have the same weight,use the route with the highest loacl preference. <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 具有相同权重值的，将选取最高优先级得路径</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> the loacl preference attribute only is local to the autonomous system and does not get passed to EBGP neighbor</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 本地优先属性只在本自治系统有效，不会传递给EBGP邻居</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 3.originated</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if the routes have same local preference,prefer the route that was originated by BGP on this router.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 优选从本地路由器使发的路由，包括本地network，redistribute和IGP已有的路由，有BGP配置的聚合地址也包括在内。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 4,AS Path <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if no route was originated,prefer the route with the shortest AS path <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 5,origin code <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if all paths are of the same as length,prefer the route with lowest origin code(IGP &lt; EGP &lt; incomplete)</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> EGP已经不在使用</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 6，MED</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if the origin codes are the same,prefer the path with the lowest multi exit dicriminator(多路径入口，主要影响入站流量)</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> the MED is exchanged between ASs;however,the MED that comes into an AS does not leave.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> the MED can be used to influence the outbound decision of another AS.the lower the MED,the more preferred the route.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> MED只在相同AS的情况下才对比，默认情况下不同的AS路由是进行MED对比的。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> MED通告规则：</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 1，ebgp在发布从ibgp学来的路由时，会清除MED的值。如果想强制通告，可以在宣告的路由上使用"set metric-type internal"</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 2,如果使用network或redistribute命令将来自IGP的路由通告到BGP中，那么BGP的MED是从IGP的metric导出的。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 3，如果是aggregate-address命令注入路由，BGP的MED不被设置。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 7,External paths over internal paths</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if the MEDs are the same,prefer external paths over internal paths.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> EBGP &gt; confederation &gt; IBGP <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 8.The path through the closest IGP neighbor <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> if they are still the same,prefer the path through the closest IGP neighbor <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 优先选取BGP下一条具有最低IGP度量值的路径</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 9. Multiple paths</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> Determine if multiple paths require installation in the routing table for BGP Multipath.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 如果配置了“maximum-path N”。而且从同一个AS的对等体收到多条外部路由，侧可以将N条路由加入到路由表中，使EBGP负载分担。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> N最大不能超过6；没有配置此命令是，默认是1。可以通过“sh ip bgp X.X.X.X”来查看最优的路径，这个最优是按接收时间来定的。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 在这条最优路由转发到内部对等体之前，需要执行与“next-hop-self”一样的功能。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 10. Prefer the path that was received first</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> When both paths are external, prefer the path that was received first (the oldest one)。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 这可以使路由抖动重新收敛的影响降到最低，因为新的路径不会取代老的路径。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 11. BGP Router ID</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> If they are still the same, prefer the path with the lowest BGP Router ID.</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 12. Cluster-ID</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 如果从路由反射器学到，优选最小Cluster-ID的路由。</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 13. Peer Adress</p> 
<p align="left" style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 优选具有最低对等体地址的路由。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 以上便是13条步骤，如果要记忆的话，其实只需要记住它的关键字母而已。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 总结如下： WLOAO  <wbr></wbr>EMI  <wbr></wbr>MP FP RID  <wbr></wbr>CID PA</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> W weight。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> L  <wbr></wbr>local-preference 。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> O originate（优选本地路由器产生的路由。）</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> A (AS_PATH,优选条数最少的)。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> O（originate code。 选择优先级  <wbr></wbr>i&gt;e&gt;?(incomplete)）</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> E  <wbr></wbr>(ebgp 路由优于  <wbr></wbr>ibgp 路由)</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> M（MED,对于同一路由，优选MED比较小的那一条）</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr>I（如果从多条路径学到同一路由条目，优选IGP的cost最小的那个邻居作为数据包的下一跳）</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> MP：若果设置了多路径multiple-path，则做负载均衡。数据同时走多条路线。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> FP：最先学习到的那一条路径。oldest path。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> RIP:如果对端设置了router-id，则选择router-id最小的那一台路由器作为下一跳。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> CID：选择cluster-id最小的那一台路由器作为下一跳。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> PA：选择peer-address最小的那一台路由器作为下一跳。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 总之记住</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> WLOAO  <wbr></wbr>EMI  <wbr></wbr>MP FP RID  <wbr></wbr>CID PA  <wbr></wbr>这一个序列基本上可以推导出以上的内容。背单词总会的吧。这么多个字母充其量，两个单词，四六级都过来的人，这几个破字母难不倒你的。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 重点是，在记住这一串字母的之前，首先要了解每个字母的意义，当背到相应字母的时候，停下来，想一下，这个字母代表什么，冥想一下，理清楚之后再背下一个，最后再连贯起来，就很容易记住这些规则。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif">  <wbr></wbr></p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> 最后说一句：重要的不在于努力，重要的在于方法。好方法可以帮助你少走很多弯路。</p> 
<p style="margin-top:0px; margin-bottom:0.8em; padding-top:0px; padding-bottom:0px; border:0px; list-style:none; word-wrap:normal; word-break:normal; line-height:21px; font-size:14px; text-align:left; color:rgb(51,51,51); font-family:Tahoma,Verdana,sTHeiTi,simsun,sans-serif"> over</p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e74a046dc379fe74a775d708c02e3f68/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">osgi 学习系列（三）自定义osgi控制台命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5edb933fc33471f431b31b8a07e86d6e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">程序员必备的七大面向对象设计原则（三）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>