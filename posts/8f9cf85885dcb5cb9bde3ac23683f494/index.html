<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>揭秘大厂Linux面试通关秘诀：锁定这5大核心问题，offer不请自来！ - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="揭秘大厂Linux面试通关秘诀：锁定这5大核心问题，offer不请自来！" />
<meta property="og:description" content="文章目录 1、CPU负载和CPU利用率的区别是什么2、如果CPU负载很高，利用率很低怎么办3、如果负载很低，利用率很高呢？4、那如果CPU使用率达到100%呢?怎么排查5、常见的Linux命令常用权限命令 1、CPU负载和CPU利用率的区别是什么 首先，我们可以通过 uptime ，w 或者 top 命令来看到 cpu 的平均负载
load average ：负载的3个数字，比如上图的 0.09 、0.05、0.01 分别代表系统在过去的1分钟 、5分钟、15分钟内的系统平均负载，他代表的是当前系统正在运行和处于等待进行的进程数之和，也指的是处于可运行状态和不可中断状态的平均进程数。
​ 如果是单核Cpu的话，负载达到1就代表 CPU 已经达到了满负荷的状态，超过1后，后面的进行就要排队等待处理了，如果是多核多CPU的话，假设现在的服务器是2个CPU 每个 CPU 有2个线程，那么总负载不超过4都没有问题。
查看 CPU 情况
[root@Xiang ~]# cat /proc/cpuinfo | grep &#34;model name&#34; model name	: AMD EPYC 7K62 48-Core Processor 查看 CPU 核数
[root@Xiang ~]# cat /proc/cpuinfo | grep &#34;cpu cores&#34; cpu cores	: 1 ​ CPU 利用率：和负载不同，CPU 利用率指的是当前正在运行的进程实时用 CPU 的百分比，他是对一段时间内 CPU 使用状态的统计
我举个 栗子" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/8f9cf85885dcb5cb9bde3ac23683f494/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-11T23:27:54+08:00" />
<meta property="article:modified_time" content="2024-01-11T23:27:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">揭秘大厂Linux面试通关秘诀：锁定这5大核心问题，offer不请自来！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1CPUCPU_1" rel="nofollow">1、CPU负载和CPU利用率的区别是什么</a></li><li><a href="#2CPU_34" rel="nofollow">2、如果CPU负载很高，利用率很低怎么办</a></li><li><a href="#3_76" rel="nofollow">3、如果负载很低，利用率很高呢？</a></li><li><a href="#4CPU100_88" rel="nofollow">4、那如果CPU使用率达到100%呢?怎么排查</a></li><li><a href="#5Linux_97" rel="nofollow">5、常见的Linux命令</a></li><li><ul><li><a href="#_108" rel="nofollow">常用权限命令</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1CPUCPU_1"></a>1、CPU负载和CPU利用率的区别是什么</h2> 
<blockquote> 
 <p>首先，我们可以通过 uptime ，w 或者 top 命令来看到 cpu 的平均负载</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/f2/dc/nNHf25Zd_o.png" alt="在这里插入图片描述"></p> 
<p>load average ：负载的3个数字，比如上图的 0.09 、0.05、0.01 分别代表系统在过去的1分钟 、5分钟、15分钟内的系统平均负载，他代表的是当前系统正在运行和处于等待进行的进程数之和，也指的是处于可运行状态和不可中断状态的平均进程数。</p> 
<p>​ 如果是单核Cpu的话，负载达到1就代表 CPU 已经达到了满负荷的状态，超过1后，后面的进行就要排队等待处理了，如果是多核多CPU的话，假设现在的服务器是2个CPU 每个 CPU 有2个线程，那么总负载不超过4都没有问题。</p> 
<blockquote> 
 <p>查看 CPU 情况</p> 
 <pre><code class="prism language-sh"><span class="token punctuation">[</span>root@Xiang ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/cpuinfo | grep "model name"</span>
model name	<span class="token builtin class-name">:</span> AMD EPYC 7K62 <span class="token number">48</span>-Core Processor
</code></pre> 
</blockquote> 
<blockquote> 
 <p>查看 CPU 核数</p> 
 <pre><code class="prism language-sh"><span class="token punctuation">[</span>root@Xiang ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/cpuinfo | grep "cpu cores"</span>
cpu cores	<span class="token builtin class-name">:</span> <span class="token number">1</span>
</code></pre> 
</blockquote> 
<p>​ CPU 利用率：和负载不同，CPU 利用率指的是当前正在运行的进程实时用 CPU 的百分比，他是对一段时间内 CPU 使用状态的统计</p> 
<p>我举个 栗子</p> 
<p>假设那么公司厕所有1个坑位，有一个占了一个坑位，这时负载就是1，如果还有一个人在排队，那么负载就是2了，如果1小时内，A上厕所花了10分钟，B上厕所花了20分钟，剩下30分钟厕所都没人用，那么这1个小时利用率就是50%</p> 
<h2><a id="2CPU_34"></a>2、如果CPU负载很高，利用率很低怎么办</h2> 
<p>CPU负载很高，利用率很低，说明处于等待状态的任务很多，负载越高，代表可能很多僵死的进程，通常这种情况是IO密集型任务，大量请求在请求相同的IO，导致任务队列堆积</p> 
<p>同样，可以通过 top 命令观察，假设发现现在确实是高负载低使用率</p> 
<pre><code class="prism language-shtotal,">%Cpu(s):  1.3 us,  0.3 sy,  0.0 ni, 98.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   1827.0 total,    135.0 free,    165.2 used,   1526.8 buff/cache
MiB Swap:   1025.0 total,    935.2 free,     89.8 used.   1477.2 avail Mem 
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                             
   1509 root      20   0  428916  10888   1656 S   0.3   0.6   1:03.90 barad_agent                                                         
      1 root      20   0  179520   5980   3788 S   0.0   0.3   0:03.65 systemd   
      2 root      20   0       0      0      0 S   0.0   0.0   0:00.00 kthreadd 
      3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_gp   
      4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_par_gp 
      6 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker/0:0H-kblockd  
      8 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 mm_percpu_wq         
      9 root      20   0       0      0      0 S   0.0   0.0   0:02.33 ksoftirqd/0       
     10 root      20   0       0      0      0 R   0.0   0.0   0:01.55 rcu_sched       
     11 root      rt   0       0      0      0 S   0.0   0.0   0:00.00 migration/0     
     12 root      rt   0       0      0      0 S   0.0   0.0   0:00.01 watchdog/0      
     13 root      20   0       0      0      0 S   0.0   0.0   0:00.00 cpuhp/0       
     15 root      20   0       0      0      0 S   0.0   0.0   0:00.00 kdevtmpfs    
     16 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 netns      
</code></pre> 
<p>然后再通过 ps -axjf 查看是否存在状态为 D+ 状态的进程，这个状态指的是不可中断的睡眠状态进程，处于这个状态的进程无法终止。也无法退出，只能通过回复其他依赖的资源或者重启系统来解决。</p> 
<pre><code class="prism language-sh"><span class="token punctuation">[</span>root@Xiang ~<span class="token punctuation">]</span><span class="token comment"># ps -axjf</span>
   <span class="token environment constant">PPID</span>     PID    PGID     SID TTY        TPGID STAT   <span class="token environment constant">UID</span>   TIME COMMAND
      <span class="token number">0</span>       <span class="token number">2</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> S        <span class="token number">0</span>   <span class="token number">0</span>:00 <span class="token punctuation">[</span>kthreadd<span class="token punctuation">]</span>
      <span class="token number">2</span>       <span class="token number">3</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> I<span class="token operator">&lt;</span>       <span class="token number">0</span>   <span class="token number">0</span>:00  <span class="token punctuation">\</span>_ <span class="token punctuation">[</span>rcu_gp<span class="token punctuation">]</span>
      <span class="token number">2</span>       <span class="token number">4</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> I<span class="token operator">&lt;</span>       <span class="token number">0</span>   <span class="token number">0</span>:00  <span class="token punctuation">\</span>_ <span class="token punctuation">[</span>rcu_par_gp<span class="token punctuation">]</span>
      <span class="token number">2</span>       <span class="token number">6</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> I<span class="token operator">&lt;</span>       <span class="token number">0</span>   <span class="token number">0</span>:00  <span class="token punctuation">\</span>_ <span class="token punctuation">[</span>kworker/0:0H-kblockd<span class="token punctuation">]</span>
      <span class="token number">2</span>       <span class="token number">8</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> I<span class="token operator">&lt;</span>       <span class="token number">0</span>   <span class="token number">0</span>:00  <span class="token punctuation">\</span>_ <span class="token punctuation">[</span>mm_percpu_wq<span class="token punctuation">]</span>
      <span class="token number">2</span>       <span class="token number">9</span>       <span class="token number">0</span>       <span class="token number">0</span> ?             <span class="token parameter variable">-1</span> S        <span class="token number">0</span>   <span class="token number">0</span>:02  <span class="token punctuation">\</span>_ <span class="token punctuation">[</span>ksoftirqd/0<span class="token punctuation">]</span>
</code></pre> 
<h2><a id="3_76"></a>3、如果负载很低，利用率很高呢？</h2> 
<p>如果你的公司只有一个人上厕所，外面人没排队，却有一个人在里面上大半个小时，这说明什么？</p> 
<p>两种可能，他没带纸，或者一些奇怪的事情发生了</p> 
<p>这表示CPU 的任务并不多，但是任务执行的时间太长了，大概率是你的代码本身有问题，通常是计算密集型任务，生成了大量耗时短的计算任务</p> 
<p>直接 top 命令找到使用率最高的任务，定位到去看看就行了，如果代码本身没问题，那么过段时间 cpu 使用率就会下降</p> 
<h2><a id="4CPU100_88"></a>4、那如果CPU使用率达到100%呢?怎么排查</h2> 
<ol><li>通过 top 找到占用率搞的进程</li><li>通过 <code>top -Hp pid</code> 找到占用 cpu 高的线程ID , 这里找到了这个 985</li><li>再把线程转换为 16 进制， <code>printf "0x%x\n" 985 </code> 得到线程 0x3be</li><li>通过 jstack 163 | grep ‘0x3be’ -C5 --clor 或者 jstack 163|vim +/0x3be - 找到有问题的代码即可</li></ol> 
<h2><a id="5Linux_97"></a>5、常见的Linux命令</h2> 
<ul><li>ls 用户查看目录下的文件， 
  <ul><li>-a 可以用来查看隐藏文件</li><li>-l 可以用于查看文件的信息，包括权限、大小、所有者等信息</li></ul> </li><li>touch：用于创建文件，如果文件不存在，则创建一个新的 文件，如果文件已存在，则会修改文件等时间戳。</li><li>cat：cat的英文是 concatenate 的缩写，用于查看文件内容，使用 cat 查看文件的话，不管文件的内容有多少，都会一次性显示，所以不适合查看太大的文件。</li><li>more：more 和 cat 的区别，more用于分屏显示文件内容， 可以用 <code>空格键</code> 向下翻页，<code>b</code> 向下翻页</li><li>less：和 more 类型，less 用于分行显示</li><li>tail：可能是平时用的最多的命令了，查看日志文件基本都靠它了，一般用户 tail -fn 100 xx.log. 查看最后100行内容</li></ul> 
<h3><a id="_108"></a>常用权限命令</h3> 
<ul><li>chmod 修改权限命令。一般用 + 号添加权限，- 号删除权限， 
  <ul><li>x 代表执行权限</li><li>r 代表可读权限</li><li>w 代表写入权限</li><li>常见写法比如 chmod +x 文件名 添加执行权限</li></ul> </li><li>还有另外一种写法，就是用数字授权，因为 r = 4 ，w = 2 ， x = 1，平时执行命令 chmod 777 文件名，这样就是最高权限 
  <ul><li>第一个数字 7 = 4+2+1 代表所有者的最高权限，第二个数字7 代表所属组的权限，第三个数字代表其他人的权限</li><li>常见的权限数字还有 644，所有者的读写权限，其他人只有读权限，755 代表其他人只有只读和执行权限</li></ul> </li><li>chown：用于修改文件和目录的所有者和所属组，一般用法 chown user 文件 用于修改文件所有者，chown user：user 文件，修改文件所有者和组，冒号前面是者，后面是组</li><li>zip ：压缩zip文件命令 比如 zip test.zip 文件，可以把文件压缩成 zip 文件，如果压缩目录的添加 -r 参数</li><li>unzip ：与zip 对应，解压 zip 文件命令。unzip xxx.zip 直接解压，还可以通过 -d 选项解压到指定目录</li></ul> 
<p><code>gzip</code>：用于压缩.gz后缀文件，gzip命令不能打包目录。需要注意的是直接使用<code>gzip 文件名</code>源文件会消失，如果要保留源文件，可以使用<code>gzip -c 文件名 &gt; xx.gz</code>，解压缩直接使用`gzip -d xx.gz</p> 
<p><code>tar</code>：tar常用几个选项，<code>-x</code>解打包，<code>-c</code>打包，<code>-f</code>指定压缩包文件名，<code>-v</code>显示打包文件过程，一般常用<code>tar -cvf xx.tar 文件</code>来打包，解压则使用<code>tar -xvf xx.tar</code>。</p> 
<p>Linux的打包和压缩是分开的操作，如果要打包并且压缩的话，按照前面的做法必须先用tar打包，然后再用gzip压缩。当然，还有更好的做法就是<code>-z</code>命令，打包并且压缩。</p> 
<p>使用命令<code>tar -zcvf xx.tar.gz 文件</code>来打包压缩，使用命令<code>tar -zxvf xx.tar.gz</code>来解压缩</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ee99cd929670987ef492874ebb3a5d34/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于JavaWeb&#43;BS架构&#43;SpringBoot&#43;Vue&#43;Hadoop短视频流量数据分析与可视化系统的设计和实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/484fe9b5a7beadc56ffd3c2b5f41415c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[JavaScript] 第七章 对象</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>