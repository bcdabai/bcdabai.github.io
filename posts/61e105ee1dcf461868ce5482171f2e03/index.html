<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>javaweb搭配ajax和json - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="javaweb搭配ajax和json" />
<meta property="og:description" content="ajax一般用来前端界面与后端界面交互使用。数据格式一般使用json，优点是便于对象与字符串的转化。
1.不适用json对象封装。 jsp:
&lt;script&gt; $.ajax({ url: &#34;/LoginServlet&#34;, data: {&#34;name&#34;:name, &#34;pwd&#34;:password}, dataType: &#34;json&#34;, type: &#34;post&#34;, success: function (result) { if (result.code == &#34;200&#34;) { alert(result.msg); } } }) &lt;/script&gt; 后端：
String json1 = &#34;{\&#34;code\&#34;:200, \&#34;message\&#34;:\&#34;访问成功\&#34;}&#34;; out.print(json1); 2.使用json对象封装json格式化。 首先导入 fastjson-1.1.13.jar lib库。
这是json格式化代码，这个方法在我们刚导入的jar包中：
public String toJSONString(){
JSONObject jsonObject=new JSONObject();
return jsonObject.toJSONString(this);
}
加一层封装，这是一个工具类，用到了泛型：
package com.hz.utils; import com.alibaba.fastjson.JSONObject; public class JsonMessage&lt;E&gt; { private String code;//状态码 private String msg;//状态码描述信息 private E data;//数据 public String getCode() { return code; } public void setCode(String code) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/61e105ee1dcf461868ce5482171f2e03/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T16:31:13+08:00" />
<meta property="article:modified_time" content="2023-12-13T16:31:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">javaweb搭配ajax和json</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>ajax一般用来前端界面与后端界面交互使用。数据格式一般使用json，优点是便于对象与字符串的转化。</p> 
<h5>1.不适用json对象封装。</h5> 
<p>jsp:</p> 
<pre><code class="language-javascript">&lt;script&gt;
  $.ajax({
    url: "/LoginServlet",
    data: {"name":name, "pwd":password},
    dataType: "json",
    type: "post",
    success: function (result) {
      if (result.code == "200") {
        alert(result.msg);
      }
    }
  })
&lt;/script&gt;</code></pre> 
<p>后端：</p> 
<pre><code class="language-java">String json1 = "{\"code\":200, \"message\":\"访问成功\"}";
out.print(json1);</code></pre> 
<h5>2.使用json对象封装json格式化。</h5> 
<p>首先导入  fastjson-1.1.13.jar  lib库。</p> 
<p>这是json格式化代码，这个方法在我们刚导入的jar包中：</p> 
<p>public String toJSONString(){<!-- --><br>         JSONObject jsonObject=new JSONObject();<br>          return  jsonObject.toJSONString(this);<br>     }</p> 
<p>加一层封装，这是一个工具类，用到了泛型：</p> 
<pre><code class="language-java">package com.hz.utils;

import com.alibaba.fastjson.JSONObject;

public class JsonMessage&lt;E&gt; {
    private  String code;//状态码
    private String msg;//状态码描述信息
    private    E    data;//数据

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public E getData() {
        return data;
    }

    public void setData(E data) {
        this.data = data;
    }

    public JsonMessage(String code, String msg, E data) {
        this.code = code;
        this.msg = msg;
        this.data = data;
    }
    public String toJSONString(){
        JSONObject jsonObject=new JSONObject();
         return  jsonObject.toJSONString(this);
    }
}
</code></pre> 
<p>调用类，把对象传进去，就会返回json格式字符串。</p> 
<pre><code class="language-java">@WebServlet("/IndexServlet")
public class IndexServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //ajax中 相应到页面处理乱码
        response.setCharacterEncoding("utf-8");
        String uname=request.getParameter("uname");
        String upwd=request.getParameter("upwd");
        //创建out对象
        PrintWriter out=response.getWriter();
        String json="";
        if(uname.equals("张三")&amp;&amp;upwd.equals("123")) {

            User user1=new User();
            user1.setId(1111);
            user1.setUserName("张三");
            user1.setUserPassword("123");

            User user2=new User();
            user2.setId(2222);
            user2.setUserName("李四");
            user2.setUserPassword("123");

            List&lt;User&gt; userList=new ArrayList&lt;&gt;();
            userList.add(user1);
            userList.add(user2);


           json= new JsonMassage&lt;List&lt;User&gt;&gt;("200","请求成功",userList).toJSONString();

    }

        out.print(json);

    }

}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4e8b1f5a53e69890a030a202c8f1cb02/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">简洁应用框架VSEF的架构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/27cb7becd2e1628bd62d63b3021a9dd4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[PTA]平均之上</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>