<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>麒麟操作系统V10安装达梦数据库 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="麒麟操作系统V10安装达梦数据库" />
<meta property="og:description" content="麒麟操作系统V10安装达梦数据库
1、下载达梦数据库
https://www.dameng.com/ucenter/docs.html 2、选择DM8开发版，rh7。
3、用xshell连接系统。
4、把数据库安装文件挂上去，记得要点一下右上角的已连接。
5、挂载安装文件，执行安装文件
mount /dev/sr0 /mnt cd /mnt/ ls ./DMInstall.bin -i 6、选择中文安装，其中提示可打开文件数过少，至少设置为65536或更多，我看没有报错就没有处理。
7、设置时区。
8、设置北京时间21.
9、选择自定义安装。
10、全部安装就完事了。
11、默认安装目录，不改动。
12、默认安装路径，也不改动。
13、开始安装。
14、安装完成。
15、数据库初始化。
cd /opt/dmdbms/bin 执行初始化
./dminit PATH=/home/dmdba/dmdbms PAGE_SIZE=16 初始化有这些参数
[root@localhost bin]# ./dminit HELP initdb V8 db version: 0x7000b file dm.key not found, use default license! License will expire on 2021-09-04 格式: ./dminit KEYWORD=value 例程: ./dminit PATH=/public/dmdb/dmData PAGE_SIZE=16 关键字 说明（默认值） -------------------------------------------------------------------------------- INI_FILE 初始化文件dm.ini存放的路径 PATH 初始数据库存放的路径 CTL_PATH 控制文件路径 LOG_PATH 日志文件路径 EXTENT_SIZE 数据文件使用的簇大小(16)，可选值：16, 32, 64，单位：页 PAGE_SIZE 数据页大小(8)，可选值：4, 8, 16, 32，单位：K LOG_SIZE 日志文件大小(256)，单位为：M，范围为：64M ~ 2G CASE_SENSITIVE 大小敏感(Y)，可选值：Y/N，1/0 CHARSET/UNICODE_FLAG 字符集(0)，可选值：0[GB18030]，1[UTF-8]，2[EUC-KR] SEC_PRIV_MODE 权限管理模式(0)，可选值：0[TRADITION]，1[BMJ]，2[EVAL] LENGTH_IN_CHAR VARCHAR类型长度是否以字符为单位(N)，可选值：Y/N，1/0 SYSDBA_PWD 设置SYSDBA密码(SYSDBA) SYSAUDITOR_PWD 设置SYSAUDITOR密码(SYSAUDITOR) DB_NAME 数据库名(DAMENG) INSTANCE_NAME 实例名(DMSERVER) PORT_NUM 监听端口号(5236) BUFFER 系统缓存大小(100)，单位M TIME_ZONE 设置时区(&#43;08:00) PAGE_CHECK 页检查模式(0)，可选值：0/1/2 EXTERNAL_CIPHER_NAME 设置默认加密算法 EXTERNAL_HASH_NAME 设置默认HASH算法 EXTERNAL_CRYPTO_NAME 设置根密钥加密引擎 RLOG_ENC_FLAG 设置日志文件是否加密(N)，可选值：Y/N，1/0 USBKEY_PIN 设置USBKEY PIN PAGE_ENC_SLICE_SIZE 设置页加密分片大小，可选值：512、4096，单位：Byte ENCRYPT_NAME 设置全库加密算法 BLANK_PAD_MODE 设置空格填充模式(0)，可选值：0/1 SYSTEM_MIRROR_PATH SYSTEM数据文件镜像路径 MAIN_MIRROR_PATH MAIN数据文件镜像 ROLL_MIRROR_PATH 回滚文件镜像路径 MAL_FLAG 初始化时设置dm." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/7dc1eb1c02f29813deaa2df8cdf0e543/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-04T17:20:52+08:00" />
<meta property="article:modified_time" content="2021-07-04T17:20:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">麒麟操作系统V10安装达梦数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>麒麟操作系统V10安装达梦数据库</p> 
<p>1、下载达梦数据库</p> 
<pre><code>https://www.dameng.com/ucenter/docs.html
</code></pre> 
<p>2、选择DM8开发版，rh7。</p> 
<p><img src="https://images2.imgbox.com/93/80/aDyisWNz_o.png" alt=""></p> 
<p>3、用xshell连接系统。</p> 
<p><img src="https://images2.imgbox.com/ed/60/z9wWsG17_o.png" alt=""></p> 
<p>4、把数据库安装文件挂上去，记得要点一下右上角的已连接。</p> 
<p><img src="https://images2.imgbox.com/b6/4e/f9eqJKMS_o.png" alt=""></p> 
<p>5、挂载安装文件，执行安装文件</p> 
<pre><code>mount /dev/sr0 /mnt
cd /mnt/
ls
./DMInstall.bin -i
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/28/vXhVQhJN_o.png" alt=""></p> 
<p>6、选择中文安装，其中提示可打开文件数过少，至少设置为65536或更多，我看没有报错就没有处理。</p> 
<p><img src="https://images2.imgbox.com/70/ff/Y0HDfnrj_o.png" alt=""></p> 
<p>7、设置时区。</p> 
<p><img src="https://images2.imgbox.com/a9/05/0FTrZe2r_o.png" alt=""></p> 
<p>8、设置北京时间21.</p> 
<p><img src="https://images2.imgbox.com/18/a5/Wz8V8Csf_o.png" alt=""></p> 
<p>9、选择自定义安装。</p> 
<p><img src="https://images2.imgbox.com/59/17/Vs7Yu1lu_o.png" alt=""></p> 
<p>10、全部安装就完事了。</p> 
<p><img src="https://images2.imgbox.com/25/e6/SIIBDKiG_o.png" alt=""></p> 
<p>11、默认安装目录，不改动。</p> 
<p><img src="https://images2.imgbox.com/cd/25/58Du4qHm_o.png" alt=""></p> 
<p>12、默认安装路径，也不改动。</p> 
<p><img src="https://images2.imgbox.com/8d/7e/i5n8icZY_o.png" alt=""></p> 
<p>13、开始安装。</p> 
<p><img src="https://images2.imgbox.com/c5/69/U99FXJYr_o.png" alt=""></p> 
<p>14、安装完成。</p> 
<p><img src="https://images2.imgbox.com/08/b8/j4vYG6bq_o.png" alt=""></p> 
<p>15、数据库初始化。</p> 
<pre><code>cd /opt/dmdbms/bin
</code></pre> 
<p>执行初始化</p> 
<pre><code>./dminit PATH=/home/dmdba/dmdbms PAGE_SIZE=16
</code></pre> 
<p>初始化有这些参数</p> 
<pre><code>[root@localhost bin]# ./dminit HELP
initdb V8
db version: 0x7000b
file dm.key not found, use default license!
License will expire on 2021-09-04
格式: ./dminit     KEYWORD=value

例程: ./dminit     PATH=/public/dmdb/dmData PAGE_SIZE=16

关键字                     说明（默认值）
--------------------------------------------------------------------------------
INI_FILE                   初始化文件dm.ini存放的路径
PATH                       初始数据库存放的路径
CTL_PATH                   控制文件路径
LOG_PATH                   日志文件路径
EXTENT_SIZE                数据文件使用的簇大小(16)，可选值：16, 32, 64，单位：页
PAGE_SIZE                  数据页大小(8)，可选值：4, 8, 16, 32，单位：K
LOG_SIZE                   日志文件大小(256)，单位为：M，范围为：64M ~ 2G
CASE_SENSITIVE             大小敏感(Y)，可选值：Y/N，1/0
CHARSET/UNICODE_FLAG       字符集(0)，可选值：0[GB18030]，1[UTF-8]，2[EUC-KR]
SEC_PRIV_MODE              权限管理模式(0)，可选值：0[TRADITION]，1[BMJ]，2[EVAL]
LENGTH_IN_CHAR             VARCHAR类型长度是否以字符为单位(N)，可选值：Y/N，1/0
SYSDBA_PWD                 设置SYSDBA密码(SYSDBA)
SYSAUDITOR_PWD             设置SYSAUDITOR密码(SYSAUDITOR)
DB_NAME                    数据库名(DAMENG)
INSTANCE_NAME              实例名(DMSERVER)
PORT_NUM                   监听端口号(5236)
BUFFER                     系统缓存大小(100)，单位M
TIME_ZONE                  设置时区(+08:00)
PAGE_CHECK                 页检查模式(0)，可选值：0/1/2
EXTERNAL_CIPHER_NAME       设置默认加密算法
EXTERNAL_HASH_NAME         设置默认HASH算法
EXTERNAL_CRYPTO_NAME       设置根密钥加密引擎
RLOG_ENC_FLAG              设置日志文件是否加密(N)，可选值：Y/N，1/0
USBKEY_PIN                 设置USBKEY PIN
PAGE_ENC_SLICE_SIZE        设置页加密分片大小，可选值：512、4096，单位：Byte
ENCRYPT_NAME               设置全库加密算法
BLANK_PAD_MODE             设置空格填充模式(0)，可选值：0/1
SYSTEM_MIRROR_PATH         SYSTEM数据文件镜像路径
MAIN_MIRROR_PATH           MAIN数据文件镜像
ROLL_MIRROR_PATH           回滚文件镜像路径
MAL_FLAG                   初始化时设置dm.ini中的MAL_INI(0)
ARCH_FLAG                  初始化时设置dm.ini中的ARCH_INI(0)
MPP_FLAG                   Mpp系统内的库初始化时设置dm.ini中的mpp_ini(0)
CONTROL                    初始化配置文件（配置文件格式见系统管理员手册）
AUTO_OVERWRITE             是否覆盖所有同名文件(0) 0:不覆盖 1:部分覆盖 2:完全覆盖
USE_NEW_HASH               是否使用改进的字符类型HASH算法(1)
DCP_MODE                   是否是DCP代理模式(0)
DCP_PORT_NUM               DCP代理模式下管理端口
ELOG_PATH                  指定初始化过程中生成的日志文件所在路径
AP_PORT_NUM                ECS模式下AP协同工作的监听端口
DFS_FLAG                   初始化时设置dm.ini中的DFS_INI(0)
DFS_PATH                   启用dfs时指定数据文件的缺省路径
DFS_HOST                   指定连接分布式系统DFS的服务地址(localhost)
DFS_PORT                   指定连接分布式系统DFS的服务端口号(3332)
DFS_COPY_NUM               指定分布式系统的副本数(3)
DFS_DB_NAME                指定分布式系统的中数据库名(默认与DB_NAME一致)
SHARE_FLAG                 指定分布式系统中该数据库的共享属性(0)
REGION_MODE                指定分布式系统中该数据库的系统表空间数据文件的区块策略(0) 0:微区策略 1:宏区策略
HUGE_WITH_DELTA            是否仅支持创建事务型HUGE表(1) 1:是 0:否
RLOG_GEN_FOR_HUGE          是否生成HUGE表REDO日志(0) 1:是 0:否
PSEG_MGR_FLAG              是否仅使用管理段记录事务信息(0) 1:是 0:否
HELP                       打印帮助信息
</code></pre> 
<p>执行完后如图。</p> 
<p><img src="https://images2.imgbox.com/31/28/pPsYUTtO_o.png" alt=""></p> 
<p>16、注册服务，自动注册。</p> 
<p>DM提供了将DM服务注册成操作系统服务的脚本，也提供了卸载操作系统服务的脚本。脚本目录在安装目录/script/root下，这里是在/opt/dmdbms/script/root下</p> 
<p>脚本名：dm_service_installer.sh</p> 
<pre><code>cd /opt/dmdbms/script/root
</code></pre> 
<p>执行自动注册</p> 
<pre><code>./dm_service_installer.sh -t dmserver -p DMSERVER -dm_ini /home/dmdba/dmdbms/DAMENG/dm.ini -auto true
</code></pre> 
<p>注册成功后会有提示。</p> 
<p><img src="https://images2.imgbox.com/fd/d1/vdku0mga_o.png" alt=""></p> 
<p>17、启动服务。</p> 
<pre><code>systemctl start DmServiceDMSERVER.service
</code></pre> 
<p>18、Linux连接数据库。</p> 
<p>命令行连接工具路径：安装路径/tool/disql，这里是/opt/dmdbms/tool/disql</p> 
<pre><code>./disql
</code></pre> 
<pre><code>[root@localhost tool]# ./disql 
disql V8
SQL&gt; conn SYSDBA/SYSDBA@LOCALHOST:5236

服务器[LOCALHOST:5236]:处于普通打开状态登录使用时间 : 3.381(ms)
</code></pre> 
<p>19、查看</p> 
<pre><code>SQL&gt; select tablespace_name from dba_tablespaces;

行号     TABLESPACE_NAME
---------- ---------------
1          SYSTEM
2          ROLL
3          TEMP
4          MAIN
5          HMAIN

已用时间: 7.033(毫秒). 执行号:499.
</code></pre> 
<p>20、创建表空间</p> 
<pre><code>SQL&gt; create tablespace "bookshop" datafile '/home/dmdba/dmdbms/DAMENG/bookshop.dbf' size 128 CACHE = NORMAL copy 2;

操作已执行
已用时间: 10.371(毫秒). 执行号:500.
</code></pre> 
<p>21、创建用户</p> 
<pre><code>SQL&gt; create user dev identified by "dev.123" limit password_life_time 60 default tablespace "bookshop";
create user dev identified by "dev.123" limit password_life_time 60 default tablespace "bookshop";
第1 行附近出现错误[-2504]:密码长度不符合要求.
已用时间: 1.110(毫秒). 执行号:0.
SQL&gt; create user dev identified by "dev.123bug" limit password_life_time 60 default tablespace "bookshop";
操作已执行
已用时间: 4.445(毫秒). 执行号:501.
</code></pre> 
<p>交给开发去写bug了。</p> 
<pre><code>数据库地址：10.0.0.210
端口：5236
账号：dev
密码：dev.123bug
</code></pre> 
<p>22、使用windows客户端连接数据库。</p> 
<p>①下载win64服务器安装包</p> 
<pre><code>https://download.dameng.com/official/DM8/DM8-win-64.zip
</code></pre> 
<p>②安装选择客户端安装</p> 
<p><img src="https://images2.imgbox.com/34/3d/e6FrMvjx_o.png" alt=""></p> 
<p>③使用安装目录下/tool/manager.exe连接数据库</p> 
<p>④连接报错，没开防火墙。</p> 
<p><img src="https://images2.imgbox.com/a0/15/wndWvo7k_o.png" alt=""></p> 
<p>⑤关闭防火墙</p> 
<p>查看防火墙状态</p> 
<pre><code>[root@localhost tool]# systemctl status firewalld.service 
● firewalld.service - firewalld - dynamic firewall daemon   
Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor &gt;   
Active: active (running) since Sun 2021-07-04 12:01:42 CST; 3min 35s ago 
    Docs: man:firewalld(1) 
Main PID: 12944 (firewalld) 
   Tasks: 2   
 Memory: 23.5M  
 CGroup: /system.slice/firewalld.service           
 └─12944 /usr/bin/python3 /usr/sbin/firewalld --nofork --nopid
 7月 04 12:01:42 localhost.localdomain systemd[1]: Starting firewalld - dynamic&gt;
 7月 04 12:01:42 localhost.localdomain systemd[1]: Started firewalld - dynamic &gt;
 lines 1-12/12 (END)
</code></pre> 
<p>关闭防火墙</p> 
<pre><code>[root@localhost tool]# systemctl stop firewalld.service
</code></pre> 
<p>关闭开机启用防火墙</p> 
<pre><code>[root@localhost tool]# systemctl disable firewalld.service 
Removed /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
[root@localhost tool]# 
</code></pre> 
<p>这样子后，可以直接连接数据库了。</p> 
<p>⑥将5236端口打开。</p> 
<p>查看端口是否已开</p> 
<pre><code>[root@localhost tool]# firewall-cmd --query-port=5236/tcp
no
</code></pre> 
<p>添加指定需要开放的端口</p> 
<pre><code>[root@localhost tool]# firewall-cmd --add-port=5236/tcp --permanent
 success
[root@localhost tool]# 
</code></pre> 
<p>重新载入防火墙规则</p> 
<pre><code>[root@localhost tool]# firewall-cmd --reload
 success
[root@localhost tool]# 
</code></pre> 
<p>查看指定端口是否已开启</p> 
<pre><code>[root@localhost tool]# firewall-cmd --query-port=5236/tcp
yes
[root@localhost tool]# 
</code></pre> 
<p>端口开放成功，windows数据库管理工具连接成功。</p> 
<p><img src="https://images2.imgbox.com/06/ab/cXYL8o4W_o.png" alt=""></p> 
<p>23、报错处理：创建SOCKET连接失败。</p> 
<p><img src="https://images2.imgbox.com/5c/fd/Edm4xoCc_o.png" alt=""></p> 
<p>解决办法：这是初始化数据库后，数据库服务没有启动。</p> 
<pre><code>systemctl start DmServiceDMSERVER.service
</code></pre> 
<p>24、数据库就安装好了，可以交给开发写bug了</p> 
<p>25、官方文档，写的有点云里雾里。</p> 
<pre><code>链接：https://pan.baidu.com/s/1JqWhGAgnvxeKhLeTXZQ3Zg 
提取码：1y6c
 --来自百度网盘超级会员V6的分享
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7619dfdd9afc32e3b91538c3a850d65e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">屏幕适配方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f9a9793873f40f5751c3dc00b678c28/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机可移动磁盘无法显示图片,移动硬盘不显示盘符原因及解决方法步骤介绍【图文详解】...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>