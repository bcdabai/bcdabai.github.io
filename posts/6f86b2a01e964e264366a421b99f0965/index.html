<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ASP.NET MVC预览4-使用Ajax和Ajax.Form - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ASP.NET MVC预览4-使用Ajax和Ajax.Form" />
<meta property="og:description" content="ASP.NET MVC Preview 4 is up on CodePlex. The Gu has all the exquisite Gu-Like Detail on his blog. Phil Haack has some notes on this release on his blog. ASP.NET MVC Preview 4在CodePlex上可用。 顾先生在他的博客上拥有所有精美的“赞似细节” 。 菲尔·哈克(Phil Haack)在他的博客上对此发布有一些注释。
If you take a look at the generated &#34;changes&#34; document, it shows a bunch of new stuff like AjaxHelpers and AjaxExtensions that set the stage for some interesting things the community could do with ASP." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/6f86b2a01e964e264366a421b99f0965/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-04T13:41:56+08:00" />
<meta property="article:modified_time" content="2020-10-04T13:41:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ASP.NET MVC预览4-使用Ajax和Ajax.Form</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <section> 
 <p><a href="http://www.codeplex.com/aspnet" rel="nofollow">ASP.NET MVC Preview 4 is up on CodePlex</a>. <a href="http://weblogs.asp.net/scottgu" rel="nofollow">The Gu</a> has all the <a href="http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx" rel="nofollow">exquisite Gu-Like Detail on his blog</a>. <a href="http://haacked.com" rel="nofollow">Phil Haack</a> has some <a href="http://haacked.com/archive/2008/07/16/aspnetmvc-codeplex-preview4.aspx" rel="nofollow">notes on this release on his blog</a>. </p> 
 <p><a href="http://www.codeplex.com/aspnet" rel="nofollow">ASP.NET MVC Preview 4在CodePlex上可用</a>。 <a href="http://weblogs.asp.net/scottgu" rel="nofollow">顾先生</a><a href="http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx" rel="nofollow">在他的博客上</a>拥有所有<a href="http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx" rel="nofollow">精美的“赞似细节”</a> 。 <a href="http://haacked.com" rel="nofollow">菲尔·哈克(Phil Haack)</a><a href="http://haacked.com/archive/2008/07/16/aspnetmvc-codeplex-preview4.aspx" rel="nofollow">在他的博客上对此发布</a>有一些<a href="http://haacked.com/archive/2008/07/16/aspnetmvc-codeplex-preview4.aspx" rel="nofollow">注释</a>。</p> 
 <p>If you take a look at the generated "changes" document, it shows a bunch of new stuff like AjaxHelpers and AjaxExtensions that set the stage for some interesting things the community could do with ASP.NET MVC and Ajax. I'd like to see some <a href="http://www.jquery.org" rel="nofollow">JQuery</a> love in there, maybe with some <a href="http://www.mvccontrib.org" rel="nofollow">MVCContrib</a> as they've been quiet lately.</p> 
 <p> 如果您查看生成的“变更”文档，则显示了许多新内容，例如AjaxHelpers和AjaxExtensions，它们为社区使用ASP.NET MVC和Ajax可以做的一些有趣的事情奠定了基础。 我想在其中看到一些<a href="http://www.jquery.org" rel="nofollow">JQuery的</a>爱，也许与一些<a href="http://www.mvccontrib.org" rel="nofollow">MVCContrib</a>在一起，因为它们最近一直很安静。</p> 
 <p>Using the new Preview 4 bits, here's what I was able to get running in just a few minutes.</p> 
 <p> 使用新的Preview 4位，这是我仅需几分钟即可开始运行的功能。</p> 
 <p>Given a ViewPage that has a TextBox and a Button on it, when I click the button (and submit the form) I'll call back to the server and get some text that should then go in the div next to the button.</p> 
 <p> 给定一个上面有一个TextBox和一个Button的ViewPage，当我单击该按钮(并提交表单)时，我将回调到服务器，并获取一些文本，然后将其放在该按钮旁边的div中。</p> 
 <div style="text-align: center;"> 
  <img height="328" alt="mvcpreview4ajax" src="https://images2.imgbox.com/22/14/iC96BF1F_o.png" width="450" border="0" style="outline: none;"> 
 </div> 
 <p>The View looks like:</p> 
 <p> 视图如下所示： </p> 
 <pre><code class="has" name="code">&lt;asp:Content ID="indexContent" ContentPlaceHolderID="MainContent" runat="server"&gt;<br>    &lt;p&gt;<br>       &lt;%using (Ajax.Form("ExamineTextBox", new AjaxOptions { UpdateTargetId = "result" }))<br>        { %&gt;<br>            &lt;%= Html.TextBox("textBox1")%&gt;<br>            &lt;input type="submit" value="Button"/&gt; <br>            &lt;span id="result"/&gt;<br>     &lt;% } %&gt;<br>    &lt;/p&gt;<br>&lt;/asp:Content&gt;</code>

</pre> 
 <p>Notice the Ajax.Form helper and the UpdateTargetID that refers to the span. There's more AjaxOptions in there to explore as well, that we'll see in a second. The controller action looks like this:</p> 
 <p> 注意Ajax.Form帮助器和引用该跨度的UpdateTargetID。 还有更多的AjaxOptions可供探索，我们将在第二秒看到。 控制器动作如下所示： </p> 
 <pre><code class="has" name="code">public class HomeController : Controller<br>{<!-- --><br>   public string ExamineTextBox(string textBox1)<br>   {<!-- --><br>      if (textBox1 != "Initial Data")<br>      {<!-- --><br>         return "This text is MVC different from before!";<br>      }<br>      return String.Empty;<br>   }<br>}</code>

</pre> 
 <p>Notice that the return method of the ExamineTextBox isn't an ActionResult, it's a string. In fact, the string result is being wrapped for you into a ContentResult. You could certainly make a ContentResult yourself, but this makes for a nicer looking method signature.</p> 
 <p> 请注意，ExamineTextBox的返回方法不是ActionResult，而是字符串。 实际上，字符串结果已为您包装到ContentResult中。 您当然可以自己创建一个ContentResult，但这可以使方法签名看起来更好。</p> 
 <p>The result of that method is returned via the AJAX call, then put into that span via magic and pixie dust. Actually, the request looks like this:</p> 
 <p> 该方法的结果通过AJAX调用返回，然后通过魔术和小精灵灰尘放入该范围。 实际上，请求看起来像这样： </p> 
 <pre><code class="has">POST /Home/ExamineTextBox HTTP/1.1<br>Referer: http://localhost.:45210/Home<br>Content-Type: application/x-www-form-urlencoded; charset=utf-8<br>Accept-Encoding: gzip, deflate<br>Host: localhost.:45210<br>Content-Length: 28<br>Connection: Keep-Alive<br>Pragma: no-cache<br><br><strong>textBox1=dude&amp;__MVCAJAX=true</strong></code>

</pre> 
 <p>and the Response like this:</p> 
 <p> 和这样的回应： </p> 
 <pre><code class="has">HTTP/1.1 200 OK<br>Server: ASP.NET Development Server/9.0.0.0<br>Cache-Control: private<br>Content-Type: text/html; charset=utf-8<br>Content-Length: 39<br>Connection: Close<br><br><strong>This text is MVC different from before!</strong></code>

</pre> 
 <p>And that UpdateTargetID (the span) mentioned in the Ajax Form helper above? That's swapped in via the magic in MicrosoftMvcAjax.debug.js. There are options for before, after and replace.</p> 
 <p> 以及上面的Ajax Form帮助器中提到的UpdateTargetID(范围)？ 通过MicrosoftMvcAjax.debug.js中的魔术将其交换。 有之前，之后和替换的选项。 </p> 
 <pre><code class="has" name="code">// Insert the results into the target element<br>if (targetElement) {<!-- --><br>    switch (insertionMode) {<!-- --><br>        case Sys.Mvc.InsertionMode.Replace:<br>            targetElement.innerHTML = executor.get_responseData();<br>            break;<br>        case Sys.Mvc.InsertionMode.InsertBefore:<br>            targetElement.innerHTML = executor.get_responseData() + targetElement.innerHTML;<br>            break;<br>        case Sys.Mvc.InsertionMode.InsertAfter:<br>            targetElement.innerHTML = targetElement.innerHTML + executor.get_responseData();<br>            break;<br>    }<br>}</code>

</pre> 
 <p>Note that I had to manually (for now) add the JavaScript libraries, so I put them in my Site.Master View.</p> 
 <p> 请注意，我不得不手动(现在)添加JavaScript库，因此将它们放在Site.Master视图中。 </p> 
 <pre><code class="has" name="code">&lt;script src="/Content/MicrosoftAjax.debug.js" type="text/javascript"&gt;&lt;/script&gt;<br>&lt;script src="/Content/MicrosoftMvcAjax.debug.js" type="text/javascript"&gt;&lt;/script&gt;<br></code>

</pre> 
 <p>Also, notice that the MicrosoftMvcAjax.js is new and it's in your /Content folder if you make a new MVC Application. Congrats to <a href="http://www.haacked.com" rel="nofollow">Phil</a> and <a href="http://weblogs.asp.net/leftslipper/" rel="nofollow">Eilon</a> and the team for this release!</p> 
 <p> 另外，请注意，MicrosoftMvcAjax.js是新的，如果创建新的MVC应用程序，则位于/ Content文件夹中。 祝贺<a href="http://www.haacked.com" rel="nofollow">Phil</a>和<a href="http://weblogs.asp.net/leftslipper/" rel="nofollow">Eilon</a>及其团队发布了该版本！</p> 
 <p><strong>Related Links</strong></p> 
 <p> <strong>相关链接</strong></p> 
 <ul><li><p><strong><a href="http://www.asp.net/mvc" rel="nofollow">http://www.asp.net/mvc</a> </strong></p><p><strong><a href="http://www.asp.net/mvc" rel="nofollow">http://www.asp.net/mvc</a></strong></p></li><li><p><a title="http://weblogs.asp.net/stephenwalther/" href="http://weblogs.asp.net/stephenwalther/" rel="nofollow">http://weblogs.asp.net/stephenwalther/</a> </p><p> <a title="http://weblogs.asp.net/stephenwalther/" href="http://weblogs.asp.net/stephenwalther/" rel="nofollow">http://weblogs.asp.net/stephenwalther/</a></p></li></ul> 
 <blockquote> 
  <p>翻译自: <a href="https://www.hanselman.com/blog/aspnet-mvc-preview-4-using-ajax-and-ajaxform" rel="nofollow">https://www.hanselman.com/blog/aspnet-mvc-preview-4-using-ajax-and-ajaxform</a></p> 
 </blockquote> 
</section>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a8fbe57a01069d2d9134797f133b8f55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">路由器玩机---老毛子设置AP与主路由设置(2)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dbb32c750d929f99b82338ba62feac29/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Kubernetes二进制部署（多节点）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>