<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js之iframe子页面与父页面通信 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js之iframe子页面与父页面通信" />
<meta property="og:description" content="一、同域下父子页面的通信 父页面parent.html &lt;html&gt; &lt;head&gt; &lt;script type=&#34;text/javascript&#34;&gt; function say(){ alert(&#34;parent.html&#34;); } function callChild(){ myFrame.say(); myFrame.document.getElementById(&#34;button&#34;).value=&#34;调用结束&#34;; } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input id=&#34;button&#34; type=&#34;button&#34; value=&#34;调用child.html中的函数say()&#34; οnclick=&#34;callChild()&#34;/&gt; &lt;iframe name=&#34;myFrame&#34; src=&#34;child.html&#34;&gt;&lt;/iframe&gt; &lt;/body&gt; &lt;/html&gt; 子页面child.html &lt;html&gt; &lt;head&gt; &lt;script type=&#34;text/javascript&#34;&gt; function say(){ alert(&#34;child.html&#34;); } function callParent(){ parent.say(); parent.window.document.getElementById(&#34;button&#34;).value=&#34;调用结束&#34;; } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input id=&#34;button&#34; type=&#34;button&#34; value=&#34;调用parent.html中的say()函数&#34; οnclick=&#34;callParent()&#34;/&gt; &lt;/body&gt; &lt;/html&gt; 方法调用 父页面调用子页面方法：FrameName.window.childMethod();
子页面调用父页面方法：parent.window.parentMethod();
DOM元素访问 获取到页面的window.document对象后，即可访问DOM元素
注意事项
要确保在iframe加载完成后再进行操作，如果iframe还未加载完成就开始调用里面的方法或变量，会产生错误。判断iframe是否加载完成有两种方法：
1. iframe上用onload事件
2. 用document.readyState==&#34;complete&#34;来判断
二、跨域父子页面通信方法 如果iframe所链接的是外部页面，因为安全机制就不能使用同域名下的通信方式了。
父页面向子页面传递数据 实现的技巧是利用location对象的hash值，通过它传递通信数据。在父页面设置iframe的src后面多加个data字符串，然后在子页面中通过某种方式能即时的获取到这儿的data就可以了，例如：
1. 在子页面中通过setInterval方法设置定时器，监听location.href的变化即可获得上面的data信息" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/93e9d3bf7af4d7d1b48524a3dd7e1007/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-09T13:59:28+08:00" />
<meta property="article:modified_time" content="2021-12-09T13:59:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js之iframe子页面与父页面通信</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、同域下父子页面的通信</h3> 
<h4>父页面parent.html</h4> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/9d/b9/GCIMFEa8_o.gif"></p> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/e1/3e/7h4sjDFV_o.gif"></p> 
<pre>&lt;html&gt;
&lt;head&gt;
    &lt;script type="text/javascript"&gt;
        function say(){
            alert("parent.html");
        }
        function callChild(){
            myFrame.say();
            myFrame.document.getElementById("button").value="调用结束";
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input id="button" type="button" value="调用child.html中的函数say()" οnclick="callChild()"/&gt;
    &lt;iframe name="myFrame" src="child.html"&gt;&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/79/fc/aiF5al5j_o.gif"></p> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/21/b4/UQbEpmZP_o.gif"></p> 
<h4>子页面child.html</h4> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/13/e2/3GZ71XNS_o.gif"></p> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/aa/fd/78Z2dSXc_o.gif"></p> 
<pre>&lt;html&gt;
&lt;head&gt;
    &lt;script type="text/javascript"&gt;
        function say(){
            alert("child.html");
        }
        function callParent(){
            parent.say();
            parent.window.document.getElementById("button").value="调用结束";
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input id="button" type="button" value="调用parent.html中的say()函数" οnclick="callParent()"/&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/f9/ec/pWPsVZ9f_o.gif"></p> 
<p style="text-align:center;"><img alt="复制代码" src="https://images2.imgbox.com/51/9b/tFhrzgi1_o.gif"></p> 
<h4>方法调用</h4> 
<p>父页面调用子页面方法：FrameName.window.childMethod();</p> 
<p>子页面调用父页面方法：parent.window.parentMethod();</p> 
<h4>DOM元素访问</h4> 
<p>获取到页面的window.document对象后，即可访问DOM元素</p> 
<p>注意事项</p> 
<p>要确保在iframe加载完成后再进行操作，如果iframe还未加载完成就开始调用里面的方法或变量，会产生错误。判断iframe是否加载完成有两种方法：</p> 
<p>1. iframe上用onload事件</p> 
<p>2. 用document.readyState=="complete"来判断</p> 
<h3>二、跨域父子页面通信方法</h3> 
<p>如果iframe所链接的是外部页面，因为安全机制就不能使用同域名下的通信方式了。</p> 
<h4>父页面向子页面传递数据</h4> 
<p>实现的技巧是利用location对象的hash值，通过它传递通信数据。在父页面设置iframe的src后面多加个data字符串，然后在子页面中通过某种方式能即时的获取到这儿的data就可以了，例如：</p> 
<p>1. 在子页面中通过setInterval方法设置定时器，监听location.href的变化即可获得上面的data信息</p> 
<p>2. 然后子页面根据这个data信息进行相应的逻辑处理</p> 
<h4>子页面向父页面传递数据</h4> 
<p>实现技巧就是利用一个代理iframe，它嵌入到子页面中，并且和父页面必须保持是同域，然后通过它充分利用上面第一种通信方式的实现原理就把子页面的数据传递给代理iframe，然后由于代理的iframe和主页面是同域的，所以主页面就可以利用同域的方式获取到这些数据。使用 window.top或者window.parent.parent获取浏览器最顶层window对象的引用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/33d31ac03ac57671c604013a54c3b1f1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">flink入门（wordcount）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5383d40c06bcbf18b54af119ca3c59bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">开发环境 dns-client占用cpu过高问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>