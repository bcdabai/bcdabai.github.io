<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MFC窗体控件随窗体变化 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MFC窗体控件随窗体变化" />
<meta property="og:description" content="/定义函数、变量// void resize(); POINT Old;//存放对话框的宽和高 /// void CNewFrameDlg::OnSize(UINT nType, int cx, int cy) { CDialog::OnSize(nType, cx, cy); if(nType==SIZE_RESTORED||nType==SIZE_MAXIMIZED)//窗体大小发生变动。处理函数resize { resize(); } } void CNewFrameDlg::resize() { float fsp[2]; POINT Newp; //获取现在对话框的大小 CRect recta; GetClientRect(&amp;recta); //取客户区大小 Newp.x=recta.right-recta.left; Newp.y=recta.bottom-recta.top; fsp[0]=(float)Newp.x/Old.x; fsp[1]=(float)Newp.y/Old.y; CRect Rect; int woc; CPoint OldTLPoint,TLPoint; //左上角 CPoint OldBRPoint,BRPoint; //右下角 HWND hwndChild=::GetWindow(m_hWnd,GW_CHILD); //列出所有控件 while(hwndChild) { woc=::GetDlgCtrlID(hwndChild);//取得ID if (woc == IDC_LIST1||woc==IDC_STATICFRAME) { GetDlgItem(woc)-&gt;GetWindowRect(Rect); ScreenToClient(Rect); OldTLPoint = Rect.TopLeft(); TLPoint.x = long(OldTLPoint.x*fsp[0]); TLPoint.y = long(OldTLPoint." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d37d17dc32ba80123e09004dbaa5040b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-05T01:51:24+08:00" />
<meta property="article:modified_time" content="2019-07-05T01:51:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MFC窗体控件随窗体变化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-cpp">/定义函数、变量//
        void resize();
        POINT Old;//存放对话框的宽和高
        ///        



void CNewFrameDlg::OnSize(UINT nType, int cx, int cy) 
{
        CDialog::OnSize(nType, cx, cy);
        
        if(nType==SIZE_RESTORED||nType==SIZE_MAXIMIZED)//窗体大小发生变动。处理函数resize
        {
                resize();
        }
}

void CNewFrameDlg::resize()
{
        float fsp[2];
        POINT Newp; //获取现在对话框的大小
        CRect recta;  
        GetClientRect(&amp;recta);     //取客户区大小
        Newp.x=recta.right-recta.left;
        Newp.y=recta.bottom-recta.top;
        fsp[0]=(float)Newp.x/Old.x;
        fsp[1]=(float)Newp.y/Old.y;
        CRect Rect;
        int woc;
        CPoint OldTLPoint,TLPoint; //左上角
        CPoint OldBRPoint,BRPoint; //右下角
        HWND  hwndChild=::GetWindow(m_hWnd,GW_CHILD);  //列出所有控件
        while(hwndChild)  
        {  
                woc=::GetDlgCtrlID(hwndChild);//取得ID

                if (woc == IDC_LIST1||woc==IDC_STATICFRAME)
                {
                        GetDlgItem(woc)-&gt;GetWindowRect(Rect);
                        ScreenToClient(Rect);
                        OldTLPoint = Rect.TopLeft();
                        TLPoint.x = long(OldTLPoint.x*fsp[0]);
                        TLPoint.y = long(OldTLPoint.y*fsp[1]);
                        OldBRPoint = Rect.BottomRight();
                        BRPoint.x = long(OldBRPoint.x *fsp[0]);
                        BRPoint.y = long(OldBRPoint.y *fsp[1]);
                        Rect.SetRect(TLPoint,BRPoint);
                        if (woc == IDC_LIST1)
                        {
                                GetDlgItem(woc)-&gt;MoveWindow(CRect(TLPoint.x,TLPoint.y,TLPoint.x+(OldBRPoint.x-OldTLPoint.x),BRPoint.y/*TLPoint.y+(OldBRPoint.y-OldTLPoint.y)*/),TRUE);
                        }
                        else
                        {
                                GetDlgItem(woc)-&gt;MoveWindow(Rect,TRUE);
                        }
                        
                    hwndChild=::GetWindow(hwndChild, GW_HWNDNEXT);  
                }
        }
        Old=Newp;
}

</code></pre> 
 </div> 
</div> 
<p>转载于:https://www.cnblogs.com/rogee/archive/2010/12/30/1922182.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5e77b196ae7619beb00228fb8d7564f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VC Ping IP的类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6210451667f0168cc22c3acbf9ff7c24/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VC&#43;&#43;最小化到托盘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>