<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ES增删改查入门 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ES增删改查入门" />
<meta property="og:description" content="一、文档管理 1.添加文档 模板：
PUT /{索引}/_doc/{id} {请求体数据信息json格式} 例子：
PUT /book/_doc/1 { &#34;title&#34;:&#34;Java程序性能&#34;, &#34;desc&#34;:&#34;强类型语言&#34; } 2.修改文档 模板：
POST /{索引}/_doc/{id} {请求体数据信息json格式} 例子：
POST /book/_doc/1 { &#34;title&#34;:&#34;Go程序性能&#34;, &#34;desc&#34;:&#34;强类型语言&#34; } 3.删除文档 模板：
DELETE /{索引}/_doc/{id} 例子
DELETE /book/_doc/1 4.获取文档 模板：
GET /{索引}/_doc/{id} 例子：
GET /book/_doc/1 5.批处理 模板：
[PUT|POST] /{索引}/_bulk {action:{metadata}} {请求体数据信息json格式} 备注：
action对应取值：
create : 创建一个文档，如果文档不存在就创建index : 创建一个新的文档，如果文档存在就更新update : 批量更新文档delete : 批量删除，不需要有请求体 例子：
POST /book/_bulk {&#34;index&#34;:{&#34;_id&#34;:1}} {&#34;id&#34;:1,&#34;title&#34;:&#34;php入门到精通&#34;,&#34;desc&#34;:&#34;php是世界上最好的语言&#34;} {&#34;index&#34;:{&#34;_id&#34;:2}} {&#34;id&#34;:1,&#34;title&#34;:&#34;java入门到精通&#34;,&#34;desc&#34;:&#34;java是世界上最快的语言&#34;} 二、查询数据 - query 1.查询全部数据 - match_all POST /{索引}/_search { &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/d59c577479c79d20c85ff6a5c170e0e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-17T20:57:44+08:00" />
<meta property="article:modified_time" content="2022-11-17T20:57:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ES增删改查入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="b712ac5c">一、文档管理</h2> 
<h3 id="d5tsF">1.添加文档</h3> 
<p id="u61fc6ff5">模板：</p> 
<pre id="fp2Dw">PUT /{索引}/_doc/{id}
{请求体数据信息json格式}</pre> 
<p id="ucc31fea0">例子：</p> 
<pre id="zn8kN">PUT /book/_doc/1
{
"title":"Java程序性能",
"desc":"强类型语言"
}</pre> 
<h3 id="PrwZZ">2.修改文档</h3> 
<p id="u7ba23af4">模板：</p> 
<pre id="zXMLW">POST /{索引}/_doc/{id}
{请求体数据信息json格式}</pre> 
<p id="udbb907a4">例子：</p> 
<pre id="efe05">POST /book/_doc/1
{
"title":"Go程序性能",
"desc":"强类型语言"
}</pre> 
<h3 id="Xy5ZH">3.删除文档</h3> 
<p id="u73a10c16">模板：</p> 
<pre id="wqSna">DELETE /{索引}/_doc/{id}</pre> 
<p id="u8dbe4d56">例子</p> 
<pre id="tw9c8">DELETE /book/_doc/1</pre> 
<h3 id="Lq6j1">4.获取文档</h3> 
<p id="u7f67098f">模板：</p> 
<pre id="XIQnu">GET /{索引}/_doc/{id}</pre> 
<p id="u8466e437">例子：</p> 
<pre id="dBjFM">GET /book/_doc/1</pre> 
<h3 id="mMRdW">5.批处理</h3> 
<p id="u8697966e">模板：</p> 
<pre id="aUsua">[PUT|POST]  /{索引}/_bulk
{action:{metadata}}
{请求体数据信息json格式}</pre> 
<p id="u51a1c3bd">备注：</p> 
<p id="u84a332fa">action对应取值：</p> 
<ul><li id="u118792b6">create : 创建一个文档，如果文档不存在就创建</li><li id="u8cc6f2f4">index : 创建一个新的文档，如果文档存在就更新</li><li id="uad33f2a5">update : 批量更新文档</li><li id="u7310b30c">delete : 批量删除，不需要有请求体</li></ul> 
<p id="u70fb6d08">例子：</p> 
<pre id="xQrqe">POST /book/_bulk
{"index":{"_id":1}}
{"id":1,"title":"php入门到精通","desc":"php是世界上最好的语言"}
{"index":{"_id":2}}
{"id":1,"title":"java入门到精通","desc":"java是世界上最快的语言"}</pre> 
<p id="u13e0c62c"></p> 
<h2 id="818d0053">二、查询数据 - query</h2> 
<h3 id="d8b1e867">1.查询全部数据 - match_all</h3> 
<pre id="kyu4e">POST /{索引}/_search
{
  "query": {
  	"match_all": {}
  }
}</pre> 
<h3 id="y01oq">2.关键词查询 - term</h3> 
<p id="u91ec7a50">模板:</p> 
<pre id="ruzxQ">POST /{索引}/_search
{
  "query":{
    "term":{
    	"{字段名}":"{搜索词}"
    }
  }
}</pre> 
<p id="u777bfcf8">例子：</p> 
<pre id="NiTlr">POST /book/_search
{
  "query": {
    "term": {
    	"desc": "java"
    }
  }
}</pre> 
<h3 id="DBNSA">3.根据查询字符串查询 - query_string</h3> 
<p id="udf7b461f">模板:</p> 
<pre id="iVmGU">POST /{索引}/_search
{
  "query":{
    "query_string":{
      "default_field":"{字段名}",
      "query":"{查询字符串}"
    }
  }
}</pre> 
<p id="ua8f35bea">例子</p> 
<pre id="nNYcp">POST /book/_search
{
  "query":{
    "query_string":{
      "default_field":"desc",
      "query":"java"
    }
  }
}</pre> 
<h3 id="r0tt0">4.根据查询字符串查询 - match</h3> 
<pre id="OiUoR">POST /book/_search
{
  "query":{
    "match":{
    	"title":"java"
    }
  }
}</pre> 
<h3 id="UwyPc">5.指定多个字段查询 - multi_match</h3> 
<pre id="RgrN0">POST /book/_search
{
  "query":{
    "multi_match":{
      "query":"入门",
      "fields":["desc","title"]
    }
  }
}</pre> 
<h2 id="VJic8">三、bool查询</h2> 
<h3 id="4043d238">1.组合条件查询</h3> 
<p id="u0988f98a">逻辑关系：<br> must：必须满足，相当于是AND<br> should：应该满足，相当于OR<br> must_not:必须不能满足，相当于NOT<br> filter: 必须满足，不计分，同时可以cache</p> 
<pre id="V0Qk4">POST /book/_search
{
  "query":{
  "bool":{
    "should":[
      {
        "term": {
        	"title": "java"
        }
      },
      {
        "match": {
        	"desc": "PHP"
        }
      }
     ]
  	}
	}
}</pre> 
<h3 id="h8AYE">2.filter条件搜索</h3> 
<h4 id="iZlgR">（1）范围搜索 - range</h4> 
<ul><li id="u03bac1ea">gt ：大于</li><li id="u72bc9d09">lt ：小于</li><li id="u19e38494">gte ：大于等于</li><li id="ua0cc845b">lte ：小于等于</li></ul> 
<p id="u0abf18d1">例子：</p> 
<pre id="aZi5q">POST /book/_search
{
  "query":{
  "bool":{
    "filter":{
      "range":{
        "price":{
          "gt":25,
          "lt":50
          }
        }
      }
    }
  }
}</pre> 
<p id="ua49519a5"></p> 
<h4 id="eJUQo">（2）字段存在查询 - exists</h4> 
<p id="u12329cf1">例子：</p> 
<pre id="lVYbR">{
  "query":{
  "bool":{
    "filter":{
      "exists":{
        "field":"desc"
      }
      }
    }
  }
}</pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/87add8c2ff1ecc9f442436cd0e8e6ec6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ES倒排序索引</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/341c4691e33cd858071c8c5118940909/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ES-分词器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>