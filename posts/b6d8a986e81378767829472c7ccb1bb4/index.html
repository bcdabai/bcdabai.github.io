<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux升级gcc版本详细教程 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux升级gcc版本详细教程" />
<meta property="og:description" content="0.前言 一般linux操作系统默认的gcc版本都比较低，例如centos7系统默认的gcc版本为4.8.5。gcc是从4.7版本开始支持C&#43;&#43;11的，4.8版本对C&#43;&#43;11新特性的编译支持还不够完善，因此如果需要更好的体验C&#43;&#43;11以及以上版本的新特性，需要升级gcc到一个较高的版本。
本文给出了linux系统中涉及国家gcc的操作步骤，供大家参考。
升级步骤可以大致分为下面四个步骤：
查看确认原来的gcc版本
下载需要升级的gcc版本
下载新版本gcc需要的依赖
编译并安装gcc新版本
查看确认gcc原来的版本 linux命令行中输入：
gcc --version 可以看到显示如下：
gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44) Copyright © 2015 Free Software Foundation, Inc. 本程序是自由软件；请参看源代码的版权声明。本软件没有任何担保； 包括没有适销性和某一专用目的下的适用性担保。 一般很多linux系统默认的gcc版本为4.8.5，该版本对C&#43;&#43;11的支持还不够完善，可以将版本升级到一个更高的版本。本文以升级到版本10.1.0为例。
下载需要升级的gcc版本并解压 2.1下载gcc新版本 由于linux系统没有外网，本文给出的示例是先在windows系统上将gcc版本下载，然后上传的linux系统中。
下载gcc新版本地址为：
http://ftp.gnu.org/gnu/gcc/ 上面有很多gcc版本，需要自己需要的版本进行下载即可。
本文以版本10.1.0为例，点击红色部分，下载文件gcc-10.1.0.tar.gz：
2.2 将gcc新版本上传到linux系统并解压 将下载好的gcc版本上传到linux系统中。本文将版本放在目录：
/opt2/test_other/debug_test/ 进入到/opt2/test_other/debug_test/目录，将文件解压到/usr/local目录下面：
tar -zvxf gcc-10.1.0.tar.gz --directory=/usr/local/ 解压之后可以在/usr/local目录下面看到解压后的gcc目录：
下载并gcc需要的依赖 3.1 查看gcc需要的依赖 cd 到gcc-10.1.0目录下面，查看需要的依赖：
vim contrib/download_prerequisites 可以看到需要的依赖以及版本如下：
从上面看到一共有四个依赖：gmp、mpfr、mpc以及isl。
3.2 下载需要依赖 在安装gcc新版本之前一定要先下载这几个依赖（注意依赖的版本）。
依赖下载的地址：
https://gcc.gnu.org/pub/gcc/infrastructure/ 下载好4个依赖之后，将文件上传到linux系统的目录/opt2/test_other/debug_test/下面。
3.3 将依赖解压到目录gcc-10.1.0 cd到/opt2/test_other/debug_test/目录下面，用下面命令将gmp文件解压到目录gcc-10.1.0：
tar -jvxf gmp-6.1.0.tar.bz2 --directory=/usr/local/gcc-10.1.0/ 用同样的命令可以将isl-0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/b6d8a986e81378767829472c7ccb1bb4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-28T09:05:13+08:00" />
<meta property="article:modified_time" content="2023-02-28T09:05:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux升级gcc版本详细教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h2 style="">0.前言</h2> 
 <p style="text-indent:1.4em;">一般linux操作系统默认的gcc版本都比较低，例如centos7系统默认的gcc版本为4.8.5。gcc是从4.7版本开始支持C++11的，4.8版本对C++11新特性的编译支持还不够完善，因此如果需要更好的体验C++11以及以上版本的新特性，需要升级gcc到一个较高的版本。</p> 
 <p style="text-indent:1.4em;">本文给出了linux系统中涉及国家gcc的操作步骤，供大家参考。</p> 
 <p style="text-indent:1.4em;">升级步骤可以大致分为下面四个步骤：</p> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;"><p>查看确认原来的gcc版本</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;"><p>下载需要升级的gcc版本</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;"><p>下载新版本gcc需要的依赖</p></li></ul> 
 <ul><li style="margin-left:2.8em;list-style-type:circle;text-indent:0;"><p>编译并安装gcc新版本</p></li></ul> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><h2>查看确认gcc原来的版本</h2></li></ol> 
 <p style="">linux命令行中输入：</p> 
 <pre class="kdocs-bash"><code class="language-bash">gcc --version</code></pre> 
 <p style="">可以看到显示如下：</p> 
 <blockquote class="kdocs-blockquote" style="">
   gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44) 
  <br>Copyright 
  © 2015 Free Software Foundation, Inc. 
  <br>本程序是自由软件；请参看源代码的版权声明。本软件没有任何担保； 
  <br>包括没有适销性和某一专用目的下的适用性担保。 
 </blockquote> 
 <p style="">一般很多linux系统默认的gcc版本为4.8.5，该版本对C++11的支持还不够完善，可以将版本升级到一个更高的版本。本文以升级到版本10.1.0为例。</p> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><h2>下载需要升级的gcc版本并解压</h2></li></ol> 
 <h3 style="">2.1下载gcc新版本</h3> 
 <p style="text-indent:1.4em;">由于linux系统没有外网，本文给出的示例是先在windows系统上将gcc版本下载，然后上传的linux系统中。</p> 
 <p style="">下载gcc新版本地址为：</p> 
 <blockquote class="kdocs-blockquote" style=""> 
  <a class="kdocs-link" style="color:#0A6CFF;" href="http://ftp.gnu.org/gnu/gcc/" rel="nofollow noopener noreferrer" target="_blank">http://ftp.gnu.org/gnu/gcc/</a> 
 </blockquote> 
 <p style="">上面有很多gcc版本，需要自己需要的版本进行下载即可。</p> 
 <p style="">本文以版本10.1.0为例，点击红色部分，下载文件<a class="kdocs-link" style="color:#0A6CFF;" href="http://ftp.gnu.org/gnu/gcc/gcc-10.1.0/gcc-10.1.0.tar.gz" rel="nofollow noopener noreferrer" target="_blank">gcc-10.1.0.tar.gz</a>：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:719px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:49.513214%;height:0;"> 
    <img src="https://images2.imgbox.com/4a/5e/60S2c1TK_o.png" style="margin-left:;display:block;width:719px;margin-top:-49.513214%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h3 style="">2.2 将gcc新版本上传到linux系统并解压</h3> 
 <p style="">将下载好的gcc版本上传到linux系统中。本文将版本放在目录：</p> 
 <pre class="kdocs-bash"><code class="language-bash">/opt2/test_other/debug_test/</code></pre> 
 <p style="">进入到/opt2/test_other/debug_test/目录，将文件解压到/usr/local目录下面：</p> 
 <pre class="kdocs-bash"><code class="language-bash">tar -zvxf gcc-10.1.0.tar.gz --directory=/usr/local/</code></pre> 
 <p style="">解压之后可以在/usr/local目录下面看到解压后的gcc目录：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:823px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:5.346294%;height:0;"> 
    <img src="https://images2.imgbox.com/16/7e/D4OC35zU_o.png" style="margin-left:;display:block;width:823px;margin-top:-5.346294%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><h2>下载并gcc需要的依赖</h2></li></ol> 
 <h3 style="">3.1 查看gcc需要的依赖</h3> 
 <p style="">cd 到gcc-10.1.0目录下面，查看需要的依赖：</p> 
 <pre class="kdocs-bash"><code class="language-bash">vim contrib/download_prerequisites</code></pre> 
 <p style="">可以看到需要的依赖以及版本如下：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:742px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:28.032345%;height:0;"> 
    <img src="https://images2.imgbox.com/d3/32/l360xRog_o.png" style="margin-left:;display:block;width:742px;margin-top:-28.032345%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">从上面看到一共有四个依赖：gmp、mpfr、mpc以及isl。</p> 
 <h3 style="">3.2 下载需要依赖</h3> 
 <p style="">在安装gcc新版本之前一定要先下载这几个依赖（注意依赖的版本）。</p> 
 <p style="">依赖下载的地址：</p> 
 <blockquote class="kdocs-blockquote" style=""> 
  <a class="kdocs-link" style="color:#0A6CFF;" href="https://gcc.gnu.org/pub/gcc/infrastructure/" rel="nofollow noopener noreferrer" target="_blank">https://gcc.gnu.org/pub/gcc/infrastructure/</a> 
 </blockquote> 
 <p style="">下载好4个依赖之后，将文件上传到linux系统的目录/opt2/test_other/debug_test/下面。</p> 
 <h3 style="">3.3 将依赖解压到目录gcc-10.1.0</h3> 
 <p style="text-indent:1.4em;">cd到/opt2/test_other/debug_test/目录下面，用下面命令将gmp文件解压到目录gcc-10.1.0：</p> 
 <pre class="kdocs-bash"><code class="language-bash">tar -jvxf gmp-6.1.0.tar.bz2 --directory=/usr/local/gcc-10.1.0/</code></pre> 
 <p style="">用同样的命令可以将isl-0.18.tar.bz2、mpfr-3.1.4.tar.bz2解压到目录gcc-10.1.0。</p> 
 <p style="">下面的命令将mpc-1.0.3.tar.gz解压到目录gcc-10.1.0：</p> 
 <pre class="kdocs-bash"><code class="language-bash">tar -zvxf mpc-1.0.3.tar.gz --directory=/usr/local/gcc-10.1.0/</code></pre> 
 <h3 style="">3.4 为新下载的依赖建立软链接</h3> 
 <p style="text-indent:1.4em;">cd到gcc-10.1.0目录下面，依次执行下面四个命令，为四个依赖创建软链接：</p> 
 <pre class="kdocs-bash"><code class="language-bash">ln -sf gmp-6.1.0 gmp
ln -sf isl-0.18 isl
ln -sf mpc-1.0.3 mpc
ln -sf mpfr-3.1.4 mpfr</code></pre> 
 <p style="">在目录gcc-10.1.0下面查看建立的软连接：</p> 
 <pre class="kdocs-bash"><code class="language-bash">ls -l | grep ^l</code></pre> 
 <p style="">如果上面的软连接建立成功，会看到下面四个链接文件，显示如下：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:760px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:9.473684%;height:0;"> 
    <img src="https://images2.imgbox.com/43/d8/xx0TshF0_o.png" style="margin-left:;display:block;width:760px;margin-top:-9.473684%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><h2>编译并安装gcc</h2></li></ol> 
 <h3 style="">4.1 编译并安装</h3> 
 <p style="text-indent:1.4em;"> 在目录gcc-10.1.0下面依次执行下面两个命令：</p> 
 <pre class="kdocs-bash"><code class="language-bash">mkdir build &amp;&amp; cd build 
../configure -enable-checking=release -enable-languages=c,c++ -disable-multilib </code></pre> 
 <p style="">如果上面的命令执行正确，可以看到生成的makefile文件。上述命令执行完成之后，build下面可以看到下面几个文件：</p> 
 <blockquote class="kdocs-blockquote" style="">
   config.log config.status Makefile serdep.tmp 
 </blockquote> 
 <p style="">注意在执行上面的第二个configure命令时，也可以通过prefix参数为新版本gcc指定安装安装目录（如果没有指定默认为/usr/local/，这里本文没有指定）：</p> 
 <pre class="kdocs-bash"><code class="language-bash">../configure --prefix=/usr/local/gcc-10.1.0/ --enable-checking=release --enable-languages=c,c++ --disable-multilib</code></pre> 
 <p style="">然后在build目录下面执行的命令，编译安装gcc：</p> 
 <pre class="kdocs-bash"><code class="language-bash">make -j4 &amp;&amp; make install</code></pre> 
 <p style="">该过程时间比较漫长，大约需要2小时以上，需要耐心等待。如果编译安装过程没有报错，最后一段打印大概是这样：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:694px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:50.432278%;height:0;"> 
    <img src="https://images2.imgbox.com/5e/28/S6Ve6zbn_o.png" style="margin-left:;display:block;width:694px;margin-top:-50.432278%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""></p> 
 <h3 style="">4.2 更新gcc</h3> 
 <p style="">上面的过程执行完，如果你在linux命令行中输入：gcc -version,你会发现显示的还是原来的版本，这是因为gcc还没有更新，执行的还是原来的gcc命令。</p> 
 <p style="">原来的gcc命令位于目录/usr/bin/gcc等目录下面，为了不覆盖原来的命令。将原来的相关内容进行备份处理，执行如下命令：</p> 
 <pre class="kdocs-bash"><code class="language-bash">mv /usr/bin/gcc /usr/bin/gcc485
mv /usr/bin/g++ /usr/bin/g++485
mv /usr/bin/c++ /usr/bin/c++485
mv /usr/bin/cc /usr/bin/cc485
mv /usr/lib64/libstdc++.so.6 /usr/lib64/libstdc++.so.6.bak</code></pre> 
 <p style="">安装的gcc新版本位于/usr/local/bin目录下面，需要为新版本gcc创建软链接：</p> 
 <pre class="kdocs-bash"><code class="language-bash">ln -s /usr/local/bin/gcc /usr/bin/gcc
ln -s /usr/local/bin/g++ /usr/bin/g++
ln -s /usr/local/bin/c++ /usr/bin/c++
ln -s /usr/local/bin/gcc /usr/bin/cc
ln -s /usr/local/lib64/libstdc++.so.6.0.28 /usr/lib64/libstdc++.so.6</code></pre> 
 <p style="">上面的步骤步骤完成之后，输入gcc -v查看版本：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:757px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:9.64333%;height:0;"> 
    <img src="https://images2.imgbox.com/8a/02/OtO8WCK8_o.png" style="margin-left:;display:block;width:757px;margin-top:-9.64333%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">可以看到版本已经变成安装的最新版本10.1.0了，说明安装成功。</p> 
 <p style=""></p> 
 <p style="">【参考文章】</p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.jb51.net/article/95974.htm" rel="nofollow noopener noreferrer" target="_blank">https://www.jb51.net/article/95974.htm</a></p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.jb51.net/article/230581.htm" rel="nofollow noopener noreferrer" target="_blank">https://www.jb51.net/article/230581.htm</a></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://cloud.tencent.com/developer/article/1424725" rel="nofollow noopener noreferrer" target="_blank">https://cloud.tencent.com/developer/article/1424725</a></p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><a class="kdocs-link" style="color:#0A6CFF;" href="https://blog.csdn.net/liyelool/article/details/118656509" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/liyelool/article/details/118656509</a></p></li></ol> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9dcae3abe25c2ead22a1f6a7e91205c9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JS——数据处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53460cc1fda21384974a689c1e06bdfa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言服务端端口监听</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>