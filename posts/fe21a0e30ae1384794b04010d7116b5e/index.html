<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pygame的基础知识详解（主窗口创建、图像绘制、时钟对象和事件响应等知识点），请惠存 - 编程大白的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pygame的基础知识详解（主窗口创建、图像绘制、时钟对象和事件响应等知识点），请惠存" />
<meta property="og:description" content="各位好，很久没更新博客了，最近较为深入研究pygame库，有些心得体会，想分享给各位，准备做成一个系列知识。欢迎各位查阅。
这篇作为一个基础知识的宣贯，想和各位深入分享一下pygame的基础知识，深入理解函数的使用。
一、pygame介绍 pygame是一个非常非常火的游戏库，那么作为游戏，我相信大家第一印象就是包括：游戏的主界面、游戏里面酷炫的动态效果。
二、pygame库的安装 这个相信大家都懂了，就不深入介绍了。
pip install pygame 如果下载很慢，可以搜索一下国内的pip源下载。
三、pygame库的导入 在python代码中，需要使用到该库时，需要进行导入。
import pygame 四、pygame库的初始化和退出 要使用 pygame 提供的所有功能之前，需要调用 init 方法，在游戏结束前需要调用一下 quit 方法
（一）pygame.init() 导入并初始化所有 pygame 模块，使用其他模块之前，必须先调用 init 方法
（二）pygame.quit() 卸载所有 pygame 模块，在游戏结束之前调用！
五、pygame界面的坐标系 pygame 专门提供了一个类 pygame.Rect 用于描述 矩形区域Rect(x, y, width, height) -&gt; Rect。
所有可见的元素 都是以 矩形区域 来描述位置的，要描述一个矩形区域有四个要素：原点 在 左上角 (0, 0)，其中：x 轴水平方向向右，逐渐增加；y 轴 垂直方向向 下，逐渐增加。
示例代码如下：
import pygame pygame.init() myrect = pygame.Rect(300, 500, 200, 256) print(&#34;myrect坐标原点：%d %d 大小：%d %d&#34; % (myrect." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcdabai.github.io/posts/fe21a0e30ae1384794b04010d7116b5e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-24T12:02:24+08:00" />
<meta property="article:modified_time" content="2021-04-24T12:02:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大白的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大白的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pygame的基础知识详解（主窗口创建、图像绘制、时钟对象和事件响应等知识点），请惠存</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>各位好，很久没更新博客了，最近较为深入研究pygame库，有些心得体会，想分享给各位，准备做成一个系列知识。欢迎各位查阅。<br> 这篇作为一个基础知识的宣贯，想和各位深入分享一下pygame的基础知识，深入理解函数的使用。</p> 
<h2><a id="pygame_2"></a>一、pygame介绍</h2> 
<p>pygame是一个非常非常火的游戏库，那么作为游戏，我相信大家第一印象就是包括：游戏的主界面、游戏里面酷炫的动态效果。</p> 
<h2><a id="pygame_4"></a>二、pygame库的安装</h2> 
<p>这个相信大家都懂了，就不深入介绍了。</p> 
<pre><code class="prism language-python">pip install pygame
</code></pre> 
<p>如果下载很慢，可以搜索一下国内的pip源下载。</p> 
<h2><a id="pygame_11"></a>三、pygame库的导入</h2> 
<p>在python代码中，需要使用到该库时，需要进行导入。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
</code></pre> 
<h2><a id="pygame_16"></a>四、pygame库的初始化和退出</h2> 
<p>要使用 pygame 提供的所有功能之前，需要调用 <code>init</code> 方法，在游戏结束前需要调用一下 <code>quit</code> 方法</p> 
<h3><a id="pygameinit_18"></a>（一）pygame.init()</h3> 
<p>导入并初始化所有 pygame 模块，使用其他模块之前，必须先调用 init 方法</p> 
<h3><a id="pygamequit_20"></a>（二）pygame.quit()</h3> 
<p>卸载所有 pygame 模块，在游戏结束之前调用！</p> 
<h2><a id="pygame_22"></a>五、pygame界面的坐标系</h2> 
<p>pygame 专门提供了一个类 pygame.Rect 用于描述 矩形区域<code>Rect(x, y, width, height) -&gt; Rect</code>。</p> 
<blockquote> 
 <p>所有可见的元素 都是以 矩形区域 来描述位置的，要描述一个矩形区域有四个要素：原点 在 左上角 (0, 0)，其中：x 轴水平方向向右，逐渐增加；y 轴 垂直方向向 下，逐渐增加。</p> 
</blockquote> 
<p>示例代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
myrect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"myrect坐标原点：%d %d 大小：%d %d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>myrect<span class="token punctuation">.</span>x<span class="token punctuation">,</span> myrect<span class="token punctuation">.</span>y<span class="token punctuation">,</span>myrect<span class="token punctuation">.</span>width<span class="token punctuation">,</span> myrect<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_35"></a>六、创建游戏主窗口</h2> 
<p>pygame 专门提供了一个 模块 <code>pygame.display</code> 用于创建、管理 游戏窗口</p> 
<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>pygame.display.set_mode()</td><td>初始化显示窗口</td></tr><tr><td>pygame.display.update()</td><td>更新部分内容显示到屏幕上，如果没有参数，则与flip功能相同</td></tr><tr><td>pygame.display.flip()</td><td>更新整个待显示的Surface对象到屏幕上</td></tr></tbody></table> 
<h3><a id="set_mode_44"></a>（一）set_mode函数</h3> 
<blockquote> 
 <p>set_mode(resolution=(0,0), flags=0, depth=0) -&gt; Surface<br> 第一个参数为元祖，代表分 辨率（必须）；<br> 第二个参数是一个标志位，如果不用什么特性，就指定0；<br> 第三个参数为色深。</p> 
</blockquote> 
<table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>resolution</td><td>指定屏幕的 宽 和 高，默认创建的窗口大小和屏幕大小一致</td></tr><tr><td>flags</td><td>参数指定屏幕的附加选项，例如是否全屏等等，默认不需要传递</td></tr><tr><td>depth</td><td>参数表示颜色的位数，默认自动匹配</td></tr></tbody></table> 
<p>返回值：Surface对象（可以理解为：游戏的屏幕），游戏的元素 都需要被绘制到游戏的屏幕上，后续所有的图像绘制都基于这个返回结果</p> 
<ul><li><strong>附上flags标识位</strong></li></ul> 
<table><thead><tr><th>flags标识位</th><th>功能</th></tr></thead><tbody><tr><td>FULLSCREEN</td><td>创建一个全屏窗口</td></tr><tr><td>DOUBLEBUF</td><td>创建一个“双缓冲“窗口，建议在HWSURFACE或OPENGL时使用</td></tr><tr><td>HWSURFACE</td><td>创建一个硬件加速窗口，必须和FULLSCREEN同时使用</td></tr><tr><td>OPENGL</td><td>创建一个OPENGL渲染的窗口</td></tr><tr><td>RESIZABLE</td><td>创建一个可以改变大小的窗口</td></tr><tr><td>NOFRAME</td><td>创建一个没有边框的窗口</td></tr></tbody></table> 
<h4><a id="F2_71"></a>案例：创建一个全屏窗口并F2切换</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame

pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">#游戏初始化的设置，他应该在游戏代码编写的最前边</span>
screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">960</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#创建窗口以进行显示;screen定义了一个游戏的屏幕，后续游戏场景中的游戏对象，都要在这个screen上绘制</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"全屏窗口切换"</span><span class="token punctuation">)</span>    <span class="token comment">#设置当前游戏窗口的标题</span>
fullscreen <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    screen<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#pygame.event.get()  游戏中的事件</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>  <span class="token comment">#如果事件类型是退出</span>
            exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>KEYDOWN<span class="token punctuation">:</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> pygame<span class="token punctuation">.</span>K_F2<span class="token punctuation">:</span>
                fullscreen <span class="token operator">=</span> <span class="token operator">not</span> fullscreen
                <span class="token keyword">if</span> fullscreen<span class="token punctuation">:</span>
                    screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1440</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pygame<span class="token punctuation">.</span>FULLSCREEN<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">960</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#更新窗口</span>
</code></pre> 
<h4><a id="RESIZABLE_95"></a>案例：窗口RESIZABLE变换</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame

pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
SCREEN_SIZE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">)</span>
screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>SCREEN_SIZE<span class="token punctuation">,</span>pygame<span class="token punctuation">.</span>RESIZABLE<span class="token punctuation">)</span>

pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"窗口RESIZABLE变换"</span><span class="token punctuation">)</span>
fullscreen <span class="token operator">=</span> <span class="token boolean">False</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    screen<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
            exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>VIDEORESIZE<span class="token punctuation">:</span>   <span class="token comment">#如果窗口大小发生了变化</span>
            SCREEN_SIZE<span class="token operator">=</span>event<span class="token punctuation">.</span>size   <span class="token comment">#返回当前窗口大小--元组(宽,高)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
            screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>SCREEN_SIZE<span class="token punctuation">,</span> pygame<span class="token punctuation">.</span>RESIZABLE<span class="token punctuation">)</span>
            <span class="token keyword">pass</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="update_119"></a>（二）update函数</h3> 
<p>显示屏幕的更新部分,在调用了绘制函数以便让显示Surface对象看上去是你想要的方式之后，必须调用pygame.display.update()让显示Surface真正地出现在用户的显示器上。</p> 
<blockquote> 
 <p>属性：<br> update(rectangle=None) -&gt; None<br> update(rectangle_list) -&gt; None</p> 
</blockquote> 
<p>此函数类似于用于软件显示的pygame.display.flip()的优化版本。它只允许更新屏幕的一部分，而不是整个区域。如果没有传递参数，它将更新整个表面积，如pygame.display.flip()。<br> 可以向函数传递单个矩形或一系列矩形。一次传递多个矩形比使用单个或部分矩形列表多次调用update更有效。如果传递了一个不包含任何值矩形序列，则会被跳过。</p> 
<h3><a id="flip_128"></a>（三）flip函数</h3> 
<p>将整个显示 Surface 更新到屏幕</p> 
<blockquote> 
 <p>属性：flip() -&gt; None</p> 
</blockquote> 
<p>这将更新整个显示的内容。如果set_mode函数中设置了显示模式使用的flags是 <code>pygame.HWSURFACE</code> 和 <code>pygame.DOUBLEBUF</code>，则将等待垂直回溯并交换曲面。如果使用的是不同类型的显示模式，则只需更新窗口的全部内容。</p> 
<h3><a id="updateflip_134"></a>（四）update和flip的区别</h3> 
<p>flip函数将重新绘制整个屏幕对应的窗口。<br> update函数仅仅重新绘制窗口中有变化的区域。<br> 如果仅仅是几个物体在移动，那么他只重绘其中移动的部分，没有变化的部分，并不进行重绘。update比flip速度更快。</p> 
<blockquote> 
 <p>在一般的游戏中，如果不是场景变化非常频繁的时候，我们建议使用update函数，而不是flip函数。但是，当使用OpenGL的时候，不能使用pygame.display.update()来更新窗口，需要使用pygame.display.flip()来更新</p> 
</blockquote> 
<h2><a id="_141"></a>七、图像绘制</h2> 
<p>在游戏中，能够看到的 游戏元素 大多都是 图像<br> 图像文件 初始是保存在磁盘上的，如果需要使用，第一步 就需要 被加载到内存，要在屏幕上 看到某一个图像的内容，需要按照三个步骤：</p> 
<blockquote> 
 <p>1、 使用 pygame.image.load() 加载图像的数据 使用 游戏屏幕 对象，<br> 2、使用convert函数是将图像数据都转化为Surface对象，每次加载完图像以后就应该做这件事件（如果你不写pygame也会帮你做）；convert_alpha相比convert，保留了Alpha通道信息。<br> 3、调用 blit 方法 将图像绘制到指定位置</p> 
</blockquote> 
<h3><a id="loadconvert_149"></a>（一）load和convert函数</h3> 
<p>使用 pygame.image.load() 加载图像的数据 使用 游戏屏幕 对象。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
<span class="token keyword">import</span> sys
<span class="token comment"># 全局初始化</span>
pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 设置窗口的分辨率和标题</span>
resolution <span class="token operator">=</span> width<span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">,</span><span class="token number">700</span> <span class="token comment">#设置窗口大小和标题</span>
windowSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>resolution<span class="token punctuation">)</span> <span class="token comment">#设置分辨率并得到全局的【绘图表面】</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"风景如画"</span><span class="token punctuation">)</span><span class="token comment">#设置标题</span>
<span class="token comment">#加载背景图，返回的表面可以用于绘制其它对象于其上</span>
bgSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"temp.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 处理退出事件</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
            pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 将背景图像绘制于窗口表面windowSurface</span>
    windowSurface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>bgSurface<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 绘制结束，刷新界面</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>可以在 screen 对象完成 所有 blit 方法之后，统一调用一次 display.update 方法，同样可以在屏幕上 看到最终的绘制结果。display.update() 会将 画布 的 最终结果 绘制在屏幕上，这样可以 提高屏幕绘制效率，增加游戏的流畅度。</p> 
</blockquote> 
<p>效果图：<br> <img src="https://images2.imgbox.com/1f/ab/xijA0fA8_o.png" alt="在这里插入图片描述"><br> 原图：<br> <img src="https://images2.imgbox.com/91/c3/n2QyXh7C_o.png" alt="在这里插入图片描述"><br> 可以发现原图和效果图对比，明显显示不全。那么我们如何可以显示全呢？<br> 这里就使用了另外的一个函数<code>pygame.transform.scale</code>，通过该函数调整文件的大小，适配整个屏幕。</p> 
<pre><code class="prism language-python">picture <span class="token operator">=</span> pygame<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>scale<span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"image/cc.png"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">480</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># （480，700）标识图片的大小信息。</span>
</code></pre> 
<p>相关代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
<span class="token keyword">import</span> sys

<span class="token comment"># 全局初始化</span>
pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 设置窗口的分辨率和标题</span>
resolution <span class="token operator">=</span> width<span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">,</span><span class="token number">700</span> <span class="token comment">#设置窗口大小和标题</span>
windowSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>resolution<span class="token punctuation">)</span> <span class="token comment">#设置分辨率并得到全局的【绘图表面】</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"风景如画"</span><span class="token punctuation">)</span><span class="token comment">#设置标题</span>

<span class="token comment">#加载背景图，返回的表面可以用于绘制其它对象于其上</span>
bgSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>scale<span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"temp.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">480</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 将背景图像绘制于窗口表面windowSurface</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 处理退出事件</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
            pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    windowSurface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>bgSurface<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 绘制结束，刷新界面</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>效果图：<br> <img src="https://images2.imgbox.com/6c/77/SdpHybhD_o.png" alt="在这里插入图片描述"><br> 可以看到，显示是完整了，但是图片明显是别压缩过。</p> 
<h3><a id="blit_217"></a>（二）blit函数</h3> 
<blockquote> 
 <p>surface.blit(image,(x,y),rect)</p> 
</blockquote> 
<p>那么，我们可以尝试一下让图片动起来。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
<span class="token keyword">import</span> sys

<span class="token comment"># 全局初始化</span>
pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 设置窗口的分辨率和标题</span>
resolution <span class="token operator">=</span> width<span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">,</span><span class="token number">700</span> <span class="token comment">#设置窗口大小和标题</span>
windowSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>resolution<span class="token punctuation">)</span> <span class="token comment">#设置分辨率并得到全局的【绘图表面】</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"风景如画"</span><span class="token punctuation">)</span><span class="token comment">#设置标题</span>

<span class="token comment">#加载背景图，返回的表面可以用于绘制其它对象于其上</span>
bgSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"temp.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token punctuation">)</span>
frameRect <span class="token operator">=</span> bgSurface<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>
clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 将背景图像绘制于窗口表面windowSurface</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># 处理退出事件</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
            pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

    windowSurface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>bgSurface<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>frameRect<span class="token punctuation">)</span>
    frameRect<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token comment"># 绘制结束，刷新界面</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>flip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 时钟停留一帧的时长</span>
    clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
</code></pre> 
<p>效果图：<br> <img src="https://images2.imgbox.com/42/d7/kxuLFkZc_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="_256"></a>八、时钟对象</h2> 
<p>pygame 专门提供了一个类 pygame.time.Clock 可以非常方便的设置屏幕绘制速度 —— 刷新帧率，要使用 时钟对象 需要两步：</p> 
<blockquote> 
 <p>1）在 游戏初始化 创建一个 时钟对象<br> 2）在 游戏循环 中让时钟对象调用 tick(帧率) 方法</p> 
</blockquote> 
<p>tick 方法会根据 上次被调用的时间，自动设置 游戏循环 中的延时：</p> 
<pre><code class="prism language-python">clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment"># 游戏循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置屏幕刷新帧率</span>
    clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    i <span class="token operator">+=</span> <span class="token number">1</span>
</code></pre> 
<h2><a id="___276"></a>九、在游戏循环中 监听 事件</h2> 
<blockquote> 
 <p>事件 event：<br> 就是游戏启动后，用户针对游戏所做的操作<br> 例如：点击关闭按钮，点击鼠标，按下键盘…</p> 
</blockquote> 
<p>在 游戏循环 中，判断用户 具体的操作，只有 捕获 到用户具体的操作，才能有针对性的做出响应pygame 中通过 pygame.event.get() 可以获得 用户当前所做动作 的 事件列表</p> 
<pre><code class="prism language-python"><span class="token comment">#初始化时钟对象</span>
clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#游戏循环</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置屏幕刷新帧率</span>
    clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token comment"># 事件监听</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 判断用户是否点击了关闭按钮</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"退出游戏..."</span><span class="token punctuation">)</span>
            pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>下表是一个常用事件集：</p> 
<table><thead><tr><th>事件</th><th>说明</th></tr></thead><tbody><tr><td>QUIT</td><td>用户按下关闭按钮</td></tr><tr><td>KEYDOWN</td><td>键盘被按下</td></tr><tr><td>KEYUP</td><td>键盘被放开</td></tr><tr><td>MOUSEMOTION</td><td>鼠标移动</td></tr><tr><td>MOUSEBUTTONDOWN</td><td>鼠标按下</td></tr><tr><td>MOUSEBUTTONUP</td><td>鼠标放开</td></tr><tr><td>VIDEORESIZE</td><td>窗口缩放</td></tr></tbody></table> 
<h3><a id="_309"></a>（一）监听鼠标操作</h3> 
<pre><code class="prism language-python"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> QUIT<span class="token punctuation">:</span>
            <span class="token comment"># 接收到退出时间后退出程序</span>
            exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 获得鼠标位置</span>
    x<span class="token punctuation">,</span> y <span class="token operator">=</span> pygame<span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>get_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 将光标画上去</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 刷新画面</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_325"></a>（二）监听键盘操作</h3> 
<pre><code class="prism language-python"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> QUIT<span class="token punctuation">:</span>
            exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> KEYDOWN<span class="token punctuation">:</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_LEFT<span class="token punctuation">:</span>
                move_x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_RIGHT<span class="token punctuation">:</span>
                move_x <span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_UP<span class="token punctuation">:</span>
                move_y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_DOWN<span class="token punctuation">:</span>
                move_y <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> KEYUP<span class="token punctuation">:</span>
            move_x <span class="token operator">=</span> <span class="token number">0</span>
            move_y <span class="token operator">=</span> <span class="token number">0</span>

    x <span class="token operator">+=</span> move_x
    y <span class="token operator">+=</span> move_y

    screen<span class="token punctuation">.</span>fill<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    screen<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 在新的位置上画图</span>
    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>KEYDOWN和KEYUP的参数说明：</p> 
<ul><li>key- 按下或者放开的键值，是一个数字，估计地球上很少有人可以记住，所以Pygame中你可以使用K_xxx来表示，比如字母a就是K_a，还有K_SPACE和K_RETURN等。</li><li>mod -包含了组合键信息，如果mod &amp; KMOD_CTRL是真值，表示用户同时按下了Ctrl键。类似的还有KMOD_SHIFT，KMOD_ALT。</li></ul> 
<h3><a id="_359"></a>（三）监听窗口缩放</h3> 
<p>使用VIDEORESIZE进行事件监听。</p> 
<pre><code class="prism language-python"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    event <span class="token operator">=</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> VIDEORESIZE<span class="token punctuation">:</span>
         add user code

    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="pygame_370"></a>十、一个完整的pygame主程序</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pygame
<span class="token keyword">import</span> sys

pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

resolution <span class="token operator">=</span> width<span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">,</span><span class="token number">600</span> <span class="token comment">#设置窗口大小和标题</span>
windowSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>resolution<span class="token punctuation">)</span> <span class="token comment">#设置分辨率并得到全局的【绘图表面】</span>
pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">"风景如画"</span><span class="token punctuation">)</span><span class="token comment">#设置标题</span>

bgSurface <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"temp.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建时钟对象</span>
clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment"># 处理用户输入</span>
        <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 处理退出事件</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>
                pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
                sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        windowSurface<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>bgSurface<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 绘制结束，刷新界面</span>
        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>flip<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 时钟停留一帧的时长</span>
        clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行效果如下：<br> <img src="https://images2.imgbox.com/02/b0/S2hsqDji_o.png" alt="在这里插入图片描述"></p> 
<p>好的，其实，这篇博文只是想跟大家介绍一下pygame库中的主要函数、实现流程及相关的主要对象，让大家有一个粗略的、较为概念性的认识，后面将会有更多的实战案例和细节分享给大家</p> 
<blockquote> 
 <p>欢迎大家持续关注，感谢支持！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c4c774d7678b87c9b6e15fe378cb6d55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用TreeSet实现Comparable、Comparator的两种排序方式（自然排序、定制排序）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/249213a02046e624dd4b5b954c6577c9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">比较保险、方便、彻底的卸载ambari方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大白的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>